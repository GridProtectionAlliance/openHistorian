{"version":3,"file":"DataSourcesListPage.484f4354fefac3548e23.js","mappings":"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","sources":["webpack://grafana/./public/app/core/components/PageActionBar/PageActionBar.tsx","webpack://grafana/./public/app/features/datasources/components/DataSourceAddButton.tsx","webpack://grafana/./public/app/features/datasources/components/DataSourcesListHeader.tsx","webpack://grafana/./public/app/features/datasources/components/DataSourcesList.tsx","webpack://grafana/./public/app/features/connections/components/ConnectionsRedirectNotice/ConnectionsRedirectNotice.tsx","webpack://grafana/./public/app/features/datasources/pages/DataSourcesListPage.tsx","webpack://grafana/./public/app/features/datasources/state/contexts.ts","webpack://grafana/./public/app/features/datasources/state/hooks.ts"],"sourcesContent":["import React, { PureComponent } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { LinkButton, FilterInput } from '@grafana/ui';\n\nimport { SortPicker } from '../Select/SortPicker';\n\nexport interface Props {\n  searchQuery: string;\n  setSearchQuery: (value: string) => void;\n  linkButton?: { href: string; title: string; disabled?: boolean };\n  target?: string;\n  placeholder?: string;\n  sortPicker?: {\n    onChange: (sortValue: SelectableValue) => void;\n    value?: string;\n    getSortOptions?: () => Promise<SelectableValue[]>;\n  };\n}\n\nexport default class PageActionBar extends PureComponent<Props> {\n  render() {\n    const {\n      searchQuery,\n      linkButton,\n      setSearchQuery,\n      target,\n      placeholder = 'Search by name or type',\n      sortPicker,\n    } = this.props;\n    const linkProps: typeof LinkButton.defaultProps = { href: linkButton?.href, disabled: linkButton?.disabled };\n\n    if (target) {\n      linkProps.target = target;\n    }\n\n    return (\n      <div className=\"page-action-bar\">\n        <div className=\"gf-form gf-form--grow\">\n          <FilterInput value={searchQuery} onChange={setSearchQuery} placeholder={placeholder} />\n        </div>\n        {sortPicker && (\n          <SortPicker\n            onChange={sortPicker.onChange}\n            value={sortPicker.value}\n            getSortOptions={sortPicker.getSortOptions}\n          />\n        )}\n        {linkButton && <LinkButton {...linkProps}>{linkButton.title}</LinkButton>}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport { config } from '@grafana/runtime';\nimport { LinkButton } from '@grafana/ui';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types';\n\nimport { useDataSourcesRoutes } from '../state';\n\nexport function DataSourceAddButton(): JSX.Element | null {\n  const canCreateDataSource = contextSrv.hasPermission(AccessControlAction.DataSourcesCreate);\n  const dataSourcesRoutes = useDataSourcesRoutes();\n\n  return canCreateDataSource ? (\n    <LinkButton icon=\"plus\" href={config.appSubUrl + dataSourcesRoutes.New}>\n      Add new data source\n    </LinkButton>\n  ) : null;\n}\n","import React, { useCallback } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport PageActionBar from 'app/core/components/PageActionBar/PageActionBar';\nimport { contextSrv } from 'app/core/core';\nimport { StoreState, useSelector, useDispatch, AccessControlAction } from 'app/types';\n\nimport {\n  getDataSourcesSearchQuery,\n  getDataSourcesSort,\n  setDataSourcesSearchQuery,\n  setIsSortAscending,\n  useDataSourcesRoutes,\n} from '../state';\n\nconst ascendingSortValue = 'alpha-asc';\nconst descendingSortValue = 'alpha-desc';\n\nconst sortOptions = [\n  // We use this unicode 'en dash' character (U+2013), because it looks nicer\n  // than simple dash in this context. This is also used in the response of\n  // the `sorting` endpoint, which is used in the search dashboard page.\n  { label: 'Sort by A–Z', value: ascendingSortValue },\n  { label: 'Sort by Z–A', value: descendingSortValue },\n];\n\nexport function DataSourcesListHeader() {\n  const dispatch = useDispatch();\n  const setSearchQuery = useCallback((q: string) => dispatch(setDataSourcesSearchQuery(q)), [dispatch]);\n  const searchQuery = useSelector(({ dataSources }: StoreState) => getDataSourcesSearchQuery(dataSources));\n\n  // TODO remove this logic adding the link button once topnav is live\n  // instead use the actions in DataSourcesListPage\n  const canCreateDataSource = contextSrv.hasPermission(AccessControlAction.DataSourcesCreate);\n  const dataSourcesRoutes = useDataSourcesRoutes();\n  const isTopnav = config.featureToggles.topnav;\n  const linkButton =\n    !isTopnav && canCreateDataSource\n      ? {\n          href: dataSourcesRoutes.New,\n          title: 'Add new data source',\n        }\n      : undefined;\n\n  const setSort = useCallback(\n    (sort: SelectableValue) => dispatch(setIsSortAscending(sort.value === ascendingSortValue)),\n    [dispatch]\n  );\n  const isSortAscending = useSelector(({ dataSources }: StoreState) => getDataSourcesSort(dataSources));\n\n  const sortPicker = {\n    onChange: setSort,\n    value: isSortAscending ? ascendingSortValue : descendingSortValue,\n    getSortOptions: () => Promise.resolve(sortOptions),\n  };\n\n  return (\n    <PageActionBar\n      searchQuery={searchQuery}\n      setSearchQuery={setSearchQuery}\n      key=\"action-bar\"\n      sortPicker={sortPicker}\n      linkButton={linkButton}\n    />\n  );\n}\n","import { css } from '@emotion/css';\nimport React, { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport { DataSourceSettings, GrafanaTheme2 } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { LinkButton, Card, Tag, useStyles2 } from '@grafana/ui';\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\nimport { contextSrv } from 'app/core/core';\nimport { StoreState, AccessControlAction, useSelector } from 'app/types';\n\nimport { getDataSources, getDataSourcesCount, useDataSourcesRoutes, useLoadDataSources } from '../state';\nimport { trackCreateDashboardClicked, trackExploreClicked, trackDataSourcesListViewed } from '../tracking';\nimport { constructDataSourceExploreUrl } from '../utils';\n\nimport { DataSourcesListHeader } from './DataSourcesListHeader';\n\nexport function DataSourcesList() {\n  const { isLoading } = useLoadDataSources();\n\n  const dataSources = useSelector((state) => getDataSources(state.dataSources));\n  const dataSourcesCount = useSelector(({ dataSources }: StoreState) => getDataSourcesCount(dataSources));\n  const hasCreateRights = contextSrv.hasPermission(AccessControlAction.DataSourcesCreate);\n  const hasWriteRights = contextSrv.hasPermission(AccessControlAction.DataSourcesWrite);\n  const hasExploreRights = contextSrv.hasPermission(AccessControlAction.DataSourcesExplore);\n\n  return (\n    <DataSourcesListView\n      dataSources={dataSources}\n      dataSourcesCount={dataSourcesCount}\n      isLoading={isLoading}\n      hasCreateRights={hasCreateRights}\n      hasWriteRights={hasWriteRights}\n      hasExploreRights={hasExploreRights}\n    />\n  );\n}\n\nexport type ViewProps = {\n  dataSources: DataSourceSettings[];\n  dataSourcesCount: number;\n  isLoading: boolean;\n  hasCreateRights: boolean;\n  hasWriteRights: boolean;\n  hasExploreRights: boolean;\n};\n\nexport function DataSourcesListView({\n  dataSources,\n  dataSourcesCount,\n  isLoading,\n  hasCreateRights,\n  hasWriteRights,\n  hasExploreRights,\n}: ViewProps) {\n  const styles = useStyles2(getStyles);\n  const dataSourcesRoutes = useDataSourcesRoutes();\n  const location = useLocation();\n\n  useEffect(() => {\n    trackDataSourcesListViewed({\n      grafana_version: config.buildInfo.version,\n      path: location.pathname,\n    });\n  }, [location]);\n\n  if (isLoading) {\n    return <PageLoader />;\n  }\n\n  if (dataSourcesCount === 0) {\n    return (\n      <EmptyListCTA\n        buttonDisabled={!hasCreateRights}\n        title=\"No data sources defined\"\n        buttonIcon=\"database\"\n        buttonLink={dataSourcesRoutes.New}\n        buttonTitle=\"Add data source\"\n        proTip=\"You can also define data sources through configuration files.\"\n        proTipLink=\"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list\"\n        proTipLinkTitle=\"Learn more\"\n        proTipTarget=\"_blank\"\n      />\n    );\n  }\n\n  return (\n    <>\n      {/* List Header */}\n      <DataSourcesListHeader />\n\n      {/* List */}\n      <ul className={styles.list}>\n        {dataSources.map((dataSource) => {\n          const dsLink = config.appSubUrl + dataSourcesRoutes.Edit.replace(/:uid/gi, dataSource.uid);\n          return (\n            <li key={dataSource.uid}>\n              <Card href={hasWriteRights ? dsLink : undefined}>\n                <Card.Heading>{dataSource.name}</Card.Heading>\n                <Card.Figure>\n                  <img src={dataSource.typeLogoUrl} alt=\"\" height=\"40px\" width=\"40px\" className={styles.logo} />\n                </Card.Figure>\n                <Card.Meta>\n                  {[\n                    dataSource.typeName,\n                    dataSource.url,\n                    dataSource.isDefault && <Tag key=\"default-tag\" name={'default'} colorIndex={1} />,\n                  ]}\n                </Card.Meta>\n                <Card.Tags>\n                  {/* Build Dashboard */}\n                  <LinkButton\n                    icon=\"apps\"\n                    fill=\"outline\"\n                    variant=\"secondary\"\n                    href={`dashboard/new-with-ds/${dataSource.uid}`}\n                    onClick={() => {\n                      trackCreateDashboardClicked({\n                        grafana_version: config.buildInfo.version,\n                        datasource_uid: dataSource.uid,\n                        plugin_name: dataSource.typeName,\n                        path: location.pathname,\n                      });\n                    }}\n                  >\n                    Build a dashboard\n                  </LinkButton>\n\n                  {/* Explore */}\n                  {hasExploreRights && (\n                    <LinkButton\n                      icon=\"compass\"\n                      fill=\"outline\"\n                      variant=\"secondary\"\n                      className={styles.button}\n                      href={constructDataSourceExploreUrl(dataSource)}\n                      onClick={() => {\n                        trackExploreClicked({\n                          grafana_version: config.buildInfo.version,\n                          datasource_uid: dataSource.uid,\n                          plugin_name: dataSource.typeName,\n                          path: location.pathname,\n                        });\n                      }}\n                    >\n                      Explore\n                    </LinkButton>\n                  )}\n                </Card.Tags>\n              </Card>\n            </li>\n          );\n        })}\n      </ul>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    list: css({\n      listStyle: 'none',\n      display: 'grid',\n      // gap: '8px', Add back when legacy support for old Card interface is dropped\n    }),\n    logo: css({\n      objectFit: 'contain',\n    }),\n    button: css({\n      marginLeft: theme.spacing(2),\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, LinkButton, useStyles2 } from '@grafana/ui';\n\nimport { ROUTES } from '../../constants';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  alertContent: css`\n    display: flex;\n    flex-direction: row;\n    padding: 0;\n    justify-content: space-between;\n    align-items: center;\n  `,\n  alertParagraph: css`\n    margin: 0 ${theme.spacing(1)} 0 0;\n    line-height: ${theme.spacing(theme.components.height.sm)};\n    color: ${theme.colors.text.primary};\n  `,\n});\n\nexport function ConnectionsRedirectNotice() {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <Alert severity=\"warning\" title=\"\">\n      <div className={styles.alertContent}>\n        <p className={styles.alertParagraph}>\n          Data sources have a new home! You can discover new data sources or manage existing ones in the new Connections\n          page, accessible from the lefthand nav.\n        </p>\n        <LinkButton aria-label=\"Link to Connections\" icon=\"adjust-circle\" href={ROUTES.DataSources}>\n          See data sources in Connections\n        </LinkButton>\n      </div>\n    </Alert>\n  );\n}\n","import React from 'react';\n\nimport { config } from '@grafana/runtime';\nimport { Page } from 'app/core/components/Page/Page';\nimport { ConnectionsRedirectNotice } from 'app/features/connections/components/ConnectionsRedirectNotice';\nimport { StoreState, useSelector } from 'app/types';\n\nimport { DataSourceAddButton } from '../components/DataSourceAddButton';\nimport { DataSourcesList } from '../components/DataSourcesList';\nimport { getDataSourcesCount } from '../state';\n\nexport function DataSourcesListPage() {\n  const dataSourcesCount = useSelector(({ dataSources }: StoreState) => getDataSourcesCount(dataSources));\n\n  const actions = config.featureToggles.topnav && dataSourcesCount > 0 ? <DataSourceAddButton /> : undefined;\n  return (\n    <Page navId=\"datasources\" actions={actions}>\n      <Page.Contents>\n        {config.featureToggles.dataConnectionsConsole && <ConnectionsRedirectNotice />}\n        <DataSourcesList />\n      </Page.Contents>\n    </Page>\n  );\n}\n\nexport default DataSourcesListPage;\n","import { createContext } from 'react';\n\nimport { DATASOURCES_ROUTES } from '../constants';\nimport { DataSourcesRoutes } from '../types';\n\n// The purpose of this context is to be able to override the data-sources routes (used for links for example) used under\n// the app/features/datasources modules, so we can reuse them more easily in different parts of the application (e.g. under Connections)\nexport const DataSourcesRoutesContext = createContext<DataSourcesRoutes>(DATASOURCES_ROUTES);\n","import { useContext, useEffect } from 'react';\n\nimport { DataSourcePluginMeta, DataSourceSettings, NavModelItem } from '@grafana/data';\nimport { cleanUpAction } from 'app/core/actions/cleanUp';\nimport appEvents from 'app/core/app_events';\nimport { contextSrv } from 'app/core/core';\nimport { getNavModel } from 'app/core/selectors/navModel';\nimport { AccessControlAction, useDispatch, useSelector } from 'app/types';\nimport { ShowConfirmModalEvent } from 'app/types/events';\n\nimport { DataSourceRights } from '../types';\nimport { constructDataSourceExploreUrl } from '../utils';\n\nimport {\n  initDataSourceSettings,\n  testDataSource,\n  loadDataSource,\n  loadDataSources,\n  loadDataSourcePlugins,\n  addDataSource,\n  updateDataSource,\n  deleteLoadedDataSource,\n} from './actions';\nimport { DataSourcesRoutesContext } from './contexts';\nimport { getDataSourceLoadingNav, buildNavModel, getDataSourceNav } from './navModel';\nimport { initialDataSourceSettingsState } from './reducers';\nimport { getDataSource, getDataSourceMeta } from './selectors';\n\nexport const useInitDataSourceSettings = (uid: string) => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(initDataSourceSettings(uid));\n\n    return function cleanUp() {\n      dispatch(\n        cleanUpAction({\n          cleanupAction: (state) => (state.dataSourceSettings = initialDataSourceSettingsState),\n        })\n      );\n    };\n  }, [uid, dispatch]);\n};\n\nexport const useTestDataSource = (uid: string) => {\n  const dispatch = useDispatch();\n  const dataSourcesRoutes = useDataSourcesRoutes();\n\n  return () => dispatch(testDataSource(uid, dataSourcesRoutes.Edit));\n};\n\nexport const useLoadDataSources = () => {\n  const dispatch = useDispatch();\n  const isLoading = useSelector((state) => state.dataSources.isLoadingDataSources);\n  const dataSources = useSelector((state) => state.dataSources.dataSources);\n\n  useEffect(() => {\n    dispatch(loadDataSources());\n  }, [dispatch]);\n\n  return { isLoading, dataSources };\n};\n\nexport const useLoadDataSource = (uid: string) => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(loadDataSource(uid));\n  }, [dispatch, uid]);\n};\n\nexport const useLoadDataSourcePlugins = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(loadDataSourcePlugins());\n  }, [dispatch]);\n};\n\nexport const useAddDatasource = () => {\n  const dispatch = useDispatch();\n  const dataSourcesRoutes = useDataSourcesRoutes();\n\n  return (plugin: DataSourcePluginMeta) => {\n    dispatch(addDataSource(plugin, dataSourcesRoutes.Edit));\n  };\n};\n\nexport const useUpdateDatasource = () => {\n  const dispatch = useDispatch();\n\n  return async (dataSource: DataSourceSettings) => dispatch(updateDataSource(dataSource));\n};\n\nexport const useDeleteLoadedDataSource = () => {\n  const dispatch = useDispatch();\n  const { name } = useSelector((state) => state.dataSources.dataSource);\n\n  return () => {\n    appEvents.publish(\n      new ShowConfirmModalEvent({\n        title: 'Delete',\n        text: `Are you sure you want to delete the \"${name}\" data source?`,\n        yesText: 'Delete',\n        icon: 'trash-alt',\n        onConfirm: () => dispatch(deleteLoadedDataSource()),\n      })\n    );\n  };\n};\n\nexport const useDataSource = (uid: string) => {\n  return useSelector((state) => getDataSource(state.dataSources, uid));\n};\n\nexport const useDataSourceExploreUrl = (uid: string) => {\n  const dataSource = useDataSource(uid);\n  return constructDataSourceExploreUrl(dataSource);\n};\n\nexport const useDataSourceMeta = (pluginType: string): DataSourcePluginMeta => {\n  return useSelector((state) => getDataSourceMeta(state.dataSources, pluginType));\n};\n\nexport const useDataSourceSettings = () => {\n  return useSelector((state) => state.dataSourceSettings);\n};\n\nexport const useDataSourceSettingsNav = (dataSourceId: string, pageId: string | null) => {\n  const dataSource = useDataSource(dataSourceId);\n  const { plugin, loadError, loading } = useDataSourceSettings();\n  const navIndex = useSelector((state) => state.navIndex);\n  const navIndexId = pageId ? `datasource-${pageId}-${dataSourceId}` : `datasource-settings-${dataSourceId}`;\n\n  if (loadError) {\n    const node: NavModelItem = {\n      text: loadError,\n      subTitle: 'Data Source Error',\n      icon: 'exclamation-triangle',\n    };\n\n    return {\n      node: node,\n      main: node,\n    };\n  }\n\n  if (loading || !plugin) {\n    return getNavModel(navIndex, navIndexId, getDataSourceLoadingNav('settings'));\n  }\n\n  return getNavModel(navIndex, navIndexId, getDataSourceNav(buildNavModel(dataSource, plugin), pageId || 'settings'));\n};\n\nexport const useDataSourceRights = (uid: string): DataSourceRights => {\n  const dataSource = useDataSource(uid);\n  const readOnly = dataSource.readOnly === true;\n  const hasWriteRights = contextSrv.hasPermissionInMetadata(AccessControlAction.DataSourcesWrite, dataSource);\n  const hasDeleteRights = contextSrv.hasPermissionInMetadata(AccessControlAction.DataSourcesDelete, dataSource);\n\n  return {\n    readOnly,\n    hasWriteRights,\n    hasDeleteRights,\n  };\n};\n\nexport const useDataSourcesRoutes = () => {\n  return useContext(DataSourcesRoutesContext);\n};\n"],"names":["PageActionBar","searchQuery","linkButton","setSearchQuery","target","placeholder","sortPicker","linkProps","DataSourceAddButton","canCreateDataSource","dataSourcesRoutes","ascendingSortValue","descendingSortValue","sortOptions","DataSourcesListHeader","dispatch","q","dataSources","config","setSort","sort","isSortAscending","DataSourcesList","isLoading","state","dataSourcesCount","hasCreateRights","hasWriteRights","hasExploreRights","DataSourcesListView","styles","getStyles","location","PageLoader","EmptyListCTA","dataSource","dsLink","Card","Tag","theme","ConnectionsRedirectNotice","Alert","DataSourcesListPage","actions","Page","DataSourcesRoutesContext","useInitDataSourceSettings","uid","useTestDataSource","useDataSourcesRoutes","useLoadDataSources","useLoadDataSource","useLoadDataSourcePlugins","useAddDatasource","plugin","useUpdateDatasource","useDeleteLoadedDataSource","name","useDataSource","useDataSourceExploreUrl","useDataSourceMeta","pluginType","useDataSourceSettings","useDataSourceSettingsNav","dataSourceId","pageId","loadError","loading","navIndex","navIndexId","node","useDataSourceRights","readOnly","hasDeleteRights"],"sourceRoot":""}