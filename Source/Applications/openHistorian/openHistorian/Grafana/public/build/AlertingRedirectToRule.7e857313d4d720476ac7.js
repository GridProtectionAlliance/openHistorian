"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5516],{6165:(z,v,a)=>{a.r(v),a.d(v,{RedirectToRuleViewer:()=>$,default:()=>H});var e=a(74848),l=a(32196),S=a(96540),j=a(54148),L=a(87586),T=a(32264),P=a(17172),h=a(40845),f=a(42418),F=a(39558),m=a(10860),I=a(14578),M=a(66602),U=a(69087),N=a(21780);const V={icon:"bell",id:"alert-rule-view"};function c(s){const{wrapInContent:n=!0,children:t,title:d,renderTitle:o}=s,u=(0,h.of)(w);return(0,e.jsx)(N.YW,{pageNav:{...V,text:d},renderTitle:o,navId:"alert-list",children:(0,e.jsx)(N.YW.Contents,{children:(0,e.jsx)("div",{className:u.content,children:n?(0,e.jsx)(Z,{...s}):t})})})}function Z({children:s,padding:n=2}){const t=(0,h.of)(A(n));return(0,e.jsx)("div",{className:t.wrapper,children:s})}const w=s=>({content:(0,l.css)({maxWidth:`${s.breakpoints.values.xxl}px`})}),A=s=>n=>({wrapper:(0,l.css)({background:n.colors.background.primary,border:`1px solid ${n.colors.border.weak}`,borderRadius:n.shape.radius.default,padding:n.spacing(s)})});var W=a(730),Y=a(57220),C=a(78742),y=a(18461);const i="Find rule",R=T.$.appSubUrl;function B(){const s=(0,L.A)();return(0,S.useMemo)(()=>{const n=s.pathname?.replace(R,"").split("/")??[],t=(0,y.c)(decodeURIComponent((0,y.c)(n[3]))),d=decodeURIComponent(n[2]),o=new URLSearchParams(s.search);return{name:t,sourceName:d,namespace:o.get("namespace")??void 0,group:o.get("group")??void 0}},[s])}function $(){const s=(0,h.of)(E),{name:n,sourceName:t,namespace:d,group:o}=B(),{error:u,loading:X,rules:g=[]}=(0,W.we)(n,t,{namespace:d,groupName:o});if(!n||!t)return(0,e.jsx)(j.C5,{replace:!0,to:"/notfound"});if(u)return(0,e.jsx)(c,{title:i,children:(0,e.jsx)(f.F,{title:`Failed to load rules from ${t}`,children:(0,P.NF)(u)&&(0,e.jsxs)("details",{className:s.errorMessage,children:[u.message,(0,e.jsx)("br",{})]})})});if(X)return(0,e.jsx)(c,{title:i,children:(0,e.jsx)(F._,{text:"Loading rule..."})});const x=(0,Y.Zw)(t);if(!x)return(0,e.jsx)(c,{title:i,children:(0,e.jsx)(f.F,{title:"Could not view rule",children:(0,e.jsx)("details",{className:s.errorMessage,children:`Could not find data source with name: ${t}.`})})});if(g.length===1){const[r]=g,p=(0,C.w$)(x,r,"/alerting/list").replace(R,"");return(0,e.jsx)(j.C5,{replace:!0,to:p})}return g.length===0?(0,e.jsx)(c,{title:i,children:(0,e.jsxs)("div",{"data-testid":"no-rules",children:["No rules in ",(0,e.jsx)("span",{className:s.param,children:t})," matched the name"," ",(0,e.jsx)("span",{className:s.param,children:n})]})}):(0,e.jsxs)(c,{title:i,children:[(0,e.jsxs)("div",{children:["Several rules in ",(0,e.jsx)("span",{className:s.param,children:t})," matched the name"," ",(0,e.jsx)("span",{className:s.param,children:n}),", please select the rule you want to view."]}),(0,e.jsx)("div",{className:s.rules,children:g.map((r,p)=>(0,e.jsxs)(m.Z,{href:(0,C.w$)(x,r,"/alerting/list"),children:[(0,e.jsx)(m.Z.Heading,{children:r.name}),(0,e.jsxs)(m.Z.Meta,{separator:"",children:[(0,e.jsx)(I.I,{name:"folder"}),(0,e.jsx)("span",{className:s.namespace,children:`${r.namespace.name} / ${r.group.name}`})]}),(0,e.jsx)(m.Z.Tags,{children:(0,e.jsx)(U.m,{labels:r.labels})})]},`${r.name}-${p}`))})]})}function E(s){return{param:(0,l.css)({fontStyle:"italic",color:s.colors.text.secondary}),rules:(0,l.css)({marginTop:s.spacing(2)}),namespace:(0,l.css)({marginLeft:s.spacing(1)}),errorMessage:(0,l.css)({whiteSpace:"pre-wrap"})}}const H=(0,M.Xc)($,{style:"page"})}}]);

//# sourceMappingURL=AlertingRedirectToRule.7e857313d4d720476ac7.js.map