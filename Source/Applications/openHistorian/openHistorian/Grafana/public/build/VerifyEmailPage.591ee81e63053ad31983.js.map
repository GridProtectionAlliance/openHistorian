{"version":3,"sources":["webpack:///./public/app/core/components/Signup/VerifyEmail.tsx","webpack:///./public/app/core/components/Signup/VerifyEmailPage.tsx"],"names":["VerifyEmail","useState","emailSent","setEmailSent","margin","variant","href","getConfig","appSubUrl","onSubmit","formModel","getBackendSrv","post","then","catch","err","msg","data","message","appEvents","emit","AppEvents","alertWarning","register","errors","label","description","invalid","email","error","placeholder","name","ref","required","VerifyEmailPage","verifyEmailEnabled","LoginLayout","window","location"],"mappings":"4rBAWO,IAAMA,EAAkB,WAAM,QACDC,oBAAS,GADR,GAC5BC,EAD4B,KACjBC,EADiB,KAenC,OAAID,EAEA,6BACE,mIACA,kBAAC,YAAD,CAAWE,OAAO,OAClB,kBAAC,aAAD,CAAYC,QAAQ,UAAUC,KAAMC,cAAYC,UAAY,WAA5D,oBAQJ,kBAAC,OAAD,CAAMC,SAzBS,SAACC,GAChBC,0BACGC,KAAK,mBAAoBF,GACzBG,MAAK,WACJV,GAAa,MAEdW,OAAM,SAAAC,GAAO,MACNC,GAAM,UAAAD,EAAIE,YAAJ,eAAUC,UAAWH,EACjCI,IAAUC,KAAKC,YAAUC,aAAc,CAACN,UAkBzC,kBAAGO,EAAH,EAAGA,SAAUC,EAAb,EAAaA,OAAb,OACC,oCACE,kBAAC,SAAD,qBACA,kBAAC,QAAD,CACEC,MAAM,QACNC,YAAY,kEACZC,UAAYH,EAAeI,MAC3BC,MAAK,UAAGL,EAAeI,aAAlB,aAAE,EAAuBV,SAE9B,kBAAC,QAAD,CAAOY,YAAY,QAAQC,KAAK,QAAQC,IAAKT,EAAS,CAAEU,UAAU,OAEpE,kBAAC,kBAAD,KACE,kBAAC,SAAD,gCACA,kBAAC,aAAD,CAAY5B,QAAQ,OAAOC,KAAMC,cAAYC,UAAY,UAAzD,uBCrDZ,gDAMO,IAAM0B,EAAsB,WACjC,OAAK3B,cAAY4B,mBAMf,kBAACC,EAAA,EAAD,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,SAPJC,OAAOC,SAAShC,KAAOC,cAAYC,UAAY,UACxC,uCAYI0B","file":"VerifyEmailPage.591ee81e63053ad31983.js","sourcesContent":["import React, { FC, useState } from 'react';\nimport { Form, Field, Input, Button, Legend, Container, HorizontalGroup, LinkButton } from '@grafana/ui';\nimport { getConfig } from 'app/core/config';\nimport { getBackendSrv } from '@grafana/runtime';\nimport appEvents from 'app/core/app_events';\nimport { AppEvents } from '@grafana/data';\n\ninterface EmailDTO {\n  email: string;\n}\n\nexport const VerifyEmail: FC = () => {\n  const [emailSent, setEmailSent] = useState(false);\n\n  const onSubmit = (formModel: EmailDTO) => {\n    getBackendSrv()\n      .post('/api/user/signup', formModel)\n      .then(() => {\n        setEmailSent(true);\n      })\n      .catch(err => {\n        const msg = err.data?.message || err;\n        appEvents.emit(AppEvents.alertWarning, [msg]);\n      });\n  };\n\n  if (emailSent) {\n    return (\n      <div>\n        <p>An email with a verification link has been sent to the email address. You should receive it shortly.</p>\n        <Container margin=\"md\" />\n        <LinkButton variant=\"primary\" href={getConfig().appSubUrl + '/signup'}>\n          Complete Signup\n        </LinkButton>\n      </div>\n    );\n  }\n\n  return (\n    <Form onSubmit={onSubmit}>\n      {({ register, errors }) => (\n        <>\n          <Legend>Verify Email</Legend>\n          <Field\n            label=\"Email\"\n            description=\"Enter your email address to get a verification link sent to you\"\n            invalid={!!(errors as any).email}\n            error={(errors as any).email?.message}\n          >\n            <Input placeholder=\"Email\" name=\"email\" ref={register({ required: true })} />\n          </Field>\n          <HorizontalGroup>\n            <Button>Send verification email</Button>\n            <LinkButton variant=\"link\" href={getConfig().appSubUrl + '/login'}>\n              Back to login\n            </LinkButton>\n          </HorizontalGroup>\n        </>\n      )}\n    </Form>\n  );\n};\n","import React, { FC } from 'react';\n\nimport { LoginLayout, InnerBox } from '../Login/LoginLayout';\nimport { VerifyEmail } from './VerifyEmail';\nimport { getConfig } from 'app/core/config';\n\nexport const VerifyEmailPage: FC = () => {\n  if (!getConfig().verifyEmailEnabled) {\n    window.location.href = getConfig().appSubUrl + '/signup';\n    return <></>;\n  }\n\n  return (\n    <LoginLayout>\n      <InnerBox>\n        <VerifyEmail />\n      </InnerBox>\n    </LoginLayout>\n  );\n};\n\nexport default VerifyEmailPage;\n"],"sourceRoot":""}