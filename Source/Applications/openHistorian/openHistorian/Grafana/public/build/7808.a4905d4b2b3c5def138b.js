(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7808],{6191:(L,S,o)=>{"use strict";o.d(S,{X:()=>P});var U=o(32196),M=o(96540),k=o(40845);const P=({children:l})=>{const d=(0,k.of)(z);return M.createElement("div",{className:d.root},l)},z=l=>({root:(0,U.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:l.spacing(3),minHeight:l.spacing(4)})})},31347:(L,S,o)=>{"use strict";o.d(S,{Z:()=>M});var U=o(96540);const M=({grow:k,shrink:P})=>U.createElement("div",{style:{display:"block",flexGrow:k,flexShrink:P}})},22354:(L,S,o)=>{"use strict";o.d(S,{W:()=>B});var U=o(32196),M=o(96540),k=o(40845),P=o(90182),z=o(4603),l=Object.defineProperty,d=Object.defineProperties,v=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,ae=(ne,w,W)=>w in ne?l(ne,w,{enumerable:!0,configurable:!0,writable:!0,value:W}):ne[w]=W,ie=(ne,w)=>{for(var W in w||(w={}))I.call(w,W)&&ae(ne,W,w[W]);if(u)for(var W of u(w))y.call(w,W)&&ae(ne,W,w[W]);return ne},J=(ne,w)=>d(ne,v(w)),ee=(ne,w)=>{var W={};for(var oe in ne)I.call(ne,oe)&&w.indexOf(oe)<0&&(W[oe]=ne[oe]);if(ne!=null&&u)for(var oe of u(ne))w.indexOf(oe)<0&&y.call(ne,oe)&&(W[oe]=ne[oe]);return W};function B(ne){var w=ne,{label:W}=w,oe=ee(w,["label"]);const b=(0,k.of)(se),[pe]=(0,M.useState)(()=>Math.random().toString(16).slice(2)),G={SelectContainer:H,ValueContainer:g,SingleValue:g};return M.createElement("div",{className:b.root},W&&M.createElement("label",{className:b.label,htmlFor:pe},W,":","\xA0"),M.createElement(P.l6,J(ie({openMenuOnFocus:!0,inputId:pe},oe),{components:G})))}const H=ne=>{const{children:w}=ne,W=(0,k.of)(se);return M.createElement(z.K,J(ie({},ne),{className:(0,U.cx)(ne.className,W.container)}),w)},g=ne=>{const{className:w,children:W}=ne,oe=(0,k.of)(se);return M.createElement("div",{className:(0,U.cx)(w,oe.valueContainer)},W)},se=ne=>({root:(0,U.css)({display:"flex",fontSize:12,alignItems:"center"}),label:(0,U.css)({color:ne.colors.text.secondary,whiteSpace:"nowrap"}),container:(0,U.css)({background:"none",borderColor:"transparent"}),valueContainer:(0,U.css)({display:"flex",alignItems:"center",flex:"initial",color:ne.colors.text.secondary,fontSize:12})})},74526:()=>{(function(){"use strict";/**
 * Bindonce - Zero watches binding for AngularJs
 * @version v0.3.1
 * @link https://github.com/Pasvaz/bindonce
 * @author Pasquale Vazzana <pasqualevazzana@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */var L=angular.module("pasvaz.bindonce",[]);L.directive("bindonce",function(){var S=function(M){if(M&&M.length!==0){var k=angular.lowercase(""+M);M=!(k==="f"||k==="0"||k==="false"||k==="no"||k==="n"||k==="[]")}else M=!1;return M},o=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(o)&&(o=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var U={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(M,k,P,z){var l=function(u,I,y){var ae=I==="show"?"":"none",ie=I==="hide"?"":"none";u.css("display",S(y)?ae:ie)},d=function(u,I){if(angular.isObject(I)&&!angular.isArray(I)){var y=[];angular.forEach(I,function(ae,ie){ae&&y.push(ie)}),I=y}I&&u.addClass(angular.isArray(I)?I.join(" "):I)},v={watcherRemover:void 0,binders:[],group:P.boName,element:k,ran:!1,addBinder:function(u){this.binders.push(u),this.ran&&this.runBinders()},setupWatcher:function(u){var I=this;this.watcherRemover=M.$watch(u,function(y){y!==void 0&&(I.removeWatcher(),I.runBinders())},!0)},removeWatcher:function(){this.watcherRemover!==void 0&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){for(;this.binders.length>0;){var u=this.binders.shift();if(!(this.group&&this.group!=u.group)){var I=u.scope.$eval(u.interpolate?z(u.value):u.value);switch(u.attr){case"boIf":S(I)&&u.transclude(u.scope.$new(),function(J){var ee=u.element.parent(),B=u.element&&u.element[u.element.length-1],H=ee&&ee[0]||B&&B.parentNode,g=B&&B.nextSibling||null;angular.forEach(J,function(se){H.insertBefore(se,g)})});break;case"boSwitch":var y,ae=u.controller[0];(y=ae.cases["!"+I]||ae.cases["?"])&&(u.scope.$eval(u.attrs.change),angular.forEach(y,function(J){J.transclude(u.scope.$new(),function(ee){var B=J.element.parent(),H=J.element&&J.element[J.element.length-1],g=B&&B[0]||H&&H.parentNode,se=H&&H.nextSibling||null;angular.forEach(ee,function(ne){g.insertBefore(ne,se)})})}));break;case"boSwitchWhen":var ie=u.controller[0];ie.cases["!"+u.attrs.boSwitchWhen]=ie.cases["!"+u.attrs.boSwitchWhen]||[],ie.cases["!"+u.attrs.boSwitchWhen].push({transclude:u.transclude,element:u.element});break;case"boSwitchDefault":var ie=u.controller[0];ie.cases["?"]=ie.cases["?"]||[],ie.cases["?"].push({transclude:u.transclude,element:u.element});break;case"hide":case"show":l(u.element,u.attr,I);break;case"class":d(u.element,I);break;case"text":u.element.text(I);break;case"html":u.element.html(I);break;case"style":u.element.css(I);break;case"src":u.element.attr(u.attr,I),o&&u.element.prop("src",I);break;case"attr":angular.forEach(u.attrs,function(J,ee){var B,H;ee.match(/^boAttr./)&&u.attrs[ee]&&(B=ee.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),H=u.scope.$eval(u.attrs[ee]),u.element.attr(B,H))});break;case"href":case"alt":case"title":case"id":case"value":u.element.attr(u.attr,I);break}}}this.ran=!0}};return v}],link:function(M,k,P,z){var l=P.bindonce?M.$eval(P.bindonce):!0;l!==void 0?z.runBinders():(z.setupWatcher(P.bindonce),k.bind("$destroy",z.removeWatcher))}};return U}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boBind",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"},{directiveName:"boIf",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boSwitch",require:"boSwitch",controller:function(){this.cases={}}},{directiveName:"boSwitchWhen",transclude:"element",priority:800,require:"^boSwitch"},{directiveName:"boSwitchDefault",transclude:"element",priority:800,require:"^boSwitch"}],function(S){var o=200;return L.directive(S.directiveName,function(){var U={priority:S.priority||o,transclude:S.transclude||!1,terminal:S.terminal||!1,require:["^bindonce"].concat(S.require||[]),controller:S.controller,compile:function(M,k,P){return function(z,l,d,v){var u=v[0],I=d.boParent;if(I&&u.group!==I){var y=u.element.parent();u=void 0;for(var ae;y[0].nodeType!==9&&y.length;){if((ae=y.data("$bindonceController"))&&ae.group===I){u=ae;break}y=y.parent()}if(!u)throw new Error("No bindonce controller: "+I)}u.addBinder({element:l,attr:S.attribute||S.directiveName,attrs:d,value:d[S.directiveName],interpolate:S.interpolate,group:I,transclude:P,controller:v.slice(1),scope:z})}}};return U})})})()},32747:()=>{/**
 * @license AngularJS v1.8.3
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */(function(L,S){"use strict";function o(J,ee){if(M(J)){ee=ee||[];for(var B=0,H=J.length;B<H;B++)ee[B]=J[B]}else if(k(J)){ee=ee||{};for(var g in J)g.charAt(0)==="$"&&g.charAt(1)==="$"||(ee[g]=J[g])}return ee||J}function U(J,ee){var B=[],H=J.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(g,se,ne,w){var W=w==="?"||w==="*?",oe=w==="*"||w==="*?";return B.push({name:ne,optional:W}),se=se||"",(W?"(?:"+se:se+"(?:")+(oe?"(.+?)":"([^/]+)")+(W?"?)?":")")}).replace(/([/$*])/g,"\\$1");return ee.ignoreTrailingSlashes&&(H=H.replace(/\/+$/,"")+"/*"),{keys:B,regexp:new RegExp("^"+H+"(?:[?#]|$)",ee.caseInsensitiveMatch?"i":"")}}var M,k,P,z,l=S.module("ngRoute",[]).info({angularVersion:"1.8.3"}).provider("$route",u).run(I),d=S.$$minErr("ngRoute"),v;function u(){M=S.isArray,k=S.isObject,P=S.isDefined,z=S.noop;function J(B,H){return S.extend(Object.create(B),H)}var ee={};this.when=function(B,H){var g=o(H);if(S.isUndefined(g.reloadOnUrl)&&(g.reloadOnUrl=!0),S.isUndefined(g.reloadOnSearch)&&(g.reloadOnSearch=!0),S.isUndefined(g.caseInsensitiveMatch)&&(g.caseInsensitiveMatch=this.caseInsensitiveMatch),ee[B]=S.extend(g,{originalPath:B},B&&U(B,g)),B){var se=B[B.length-1]==="/"?B.substr(0,B.length-1):B+"/";ee[se]=S.extend({originalPath:B,redirectTo:B},U(se,g))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(B){return typeof B=="string"&&(B={redirectTo:B}),this.when(null,B),this},v=!0,this.eagerInstantiationEnabled=function(H){return P(H)?(v=H,this):v},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(B,H,g,se,ne,w,W,oe){var b=!1,pe,G,ge={routes:ee,reload:function(){b=!0;var V={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,b=!1}};B.$evalAsync(function(){de(V),V.defaultPrevented||le()})},updateParams:function(V){if(this.current&&this.current.$$route)V=S.extend({},this.current.params,V),H.path(Pe(this.current.$$route.originalPath,V)),H.search(V);else throw d("norout","Tried updating route with no current route")}};return B.$on("$locationChangeStart",de),B.$on("$locationChangeSuccess",le),ge;function C(V,K){var N=K.keys,Y={};if(!K.regexp)return null;var q=K.regexp.exec(V);if(!q)return null;for(var ce=1,re=q.length;ce<re;++ce){var be=N[ce-1],j=q[ce];be&&j&&(Y[be.name]=j)}return Y}function de(V){var K=ge.current;pe=De(),G=we(pe,K),!G&&(K||pe)&&B.$broadcast("$routeChangeStart",pe,K).defaultPrevented&&V&&V.preventDefault()}function le(){var V=ge.current,K=pe;if(G)V.params=K.params,S.copy(V.params,g),B.$broadcast("$routeUpdate",V);else if(K||V){b=!1,ge.current=K;var N=se.resolve(K);oe.$$incOutstandingRequestCount("$route"),N.then(Q).then(_).then(function(Y){return Y&&N.then(xe).then(function(q){K===ge.current&&(K&&(K.locals=q,S.copy(K.params,g)),B.$broadcast("$routeChangeSuccess",K,V))})}).catch(function(Y){K===ge.current&&B.$broadcast("$routeChangeError",K,V,Y)}).finally(function(){oe.$$completeOutstandingRequest(z,"$route")})}}function Q(V){var K={route:V,hasRedirection:!1};if(V){if(V.redirectTo)if(S.isString(V.redirectTo))K.path=Pe(V.redirectTo,V.params),K.search=V.params,K.hasRedirection=!0;else{var N=H.path(),Y=H.search(),q=V.redirectTo(V.pathParams,N,Y);S.isDefined(q)&&(K.url=q,K.hasRedirection=!0)}else if(V.resolveRedirectTo)return se.resolve(ne.invoke(V.resolveRedirectTo)).then(function(ce){return S.isDefined(ce)&&(K.url=ce,K.hasRedirection=!0),K})}return K}function _(V){var K=!0;if(V.route!==ge.current)K=!1;else if(V.hasRedirection){var N=H.url(),Y=V.url;Y?H.url(Y).replace():Y=H.path(V.path).search(V.search).replace().url(),Y!==N&&(K=!1)}return K}function xe(V){if(V){var K=S.extend({},V.resolve);S.forEach(K,function(Y,q){K[q]=S.isString(Y)?ne.get(Y):ne.invoke(Y,null,null,q)});var N=ve(V);return S.isDefined(N)&&(K.$template=N),se.all(K)}}function ve(V){var K,N;return S.isDefined(K=V.template)?S.isFunction(K)&&(K=K(V.params)):S.isDefined(N=V.templateUrl)&&(S.isFunction(N)&&(N=N(V.params)),S.isDefined(N)&&(V.loadedTemplateUrl=W.valueOf(N),K=w(N))),K}function De(){var V,K;return S.forEach(ee,function(N,Y){!K&&(V=C(H.path(),N))&&(K=J(N,{params:S.extend({},H.search(),V),pathParams:V}),K.$$route=N)}),K||ee[null]&&J(ee[null],{params:{},pathParams:{}})}function we(V,K){return!b&&V&&K&&V.$$route===K.$$route&&(!V.reloadOnUrl||!V.reloadOnSearch&&S.equals(V.pathParams,K.pathParams))}function Pe(V,K){var N=[];return S.forEach((V||"").split(":"),function(Y,q){if(q===0)N.push(Y);else{var ce=Y.match(/(\w+)(?:[?*])?(.*)/),re=ce[1];N.push(K[re]),N.push(ce[2]||""),delete K[re]}}),N.join("")}}]}I.$inject=["$injector"];function I(J){v&&J.get("$route")}l.provider("$routeParams",y);function y(){this.$get=function(){return{}}}l.directive("ngView",ae),l.directive("ngView",ie),ae.$inject=["$route","$anchorScroll","$animate"];function ae(J,ee,B){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(H,g,se,ne,w){var W,oe,b,pe=se.autoscroll,G=se.onload||"";H.$on("$routeChangeSuccess",C),C();function ge(){b&&(B.cancel(b),b=null),W&&(W.$destroy(),W=null),oe&&(b=B.leave(oe),b.done(function(de){de!==!1&&(b=null)}),oe=null)}function C(){var de=J.current&&J.current.locals,le=de&&de.$template;if(S.isDefined(le)){var Q=H.$new(),_=J.current,xe=w(Q,function(ve){B.enter(ve,null,oe||g).done(function(we){we!==!1&&S.isDefined(pe)&&(!pe||H.$eval(pe))&&ee()}),ge()});oe=xe,W=_.scope=Q,W.$emit("$viewContentLoaded"),W.$eval(G)}else ge()}}}}ie.$inject=["$compile","$controller","$route"];function ie(J,ee,B){return{restrict:"ECA",priority:-400,link:function(H,g){var se=B.current,ne=se.locals;g.html(ne.$template);var w=J(g.contents());if(se.controller){ne.$scope=H;var W=ee(se.controller,ne);se.controllerAs&&(H[se.controllerAs]=W),g.data("$ngControllerController",W),g.children().data("$ngControllerController",W)}H[se.resolveAs||"$resolve"]=ne,w(H)}}}})(window,window.angular)},23345:(L,S,o)=>{o(32747),L.exports="ngRoute"},81221:()=>{/**
 * @license AngularJS v1.8.3
 * (c) 2010-2020 Google LLC. http://angularjs.org
 * License: MIT
 */(function(L,S){"use strict";var o=S.$$minErr("$sanitize"),U,M,k,P,z,l,d,v,u,I;function y(){var ie=!1,J=!1;this.$get=["$$sanitizeUri",function(N){return ie=!0,J&&M(pe,oe),function(Y){var q=[];return u(Y,I(q,function(ce,re){return!/^unsafe:/.test(N(ce,re))})),q.join("")}}],this.enableSvg=function(N){return z(N)?(J=N,this):J},this.addValidElements=function(N){return ie||(P(N)&&(N={htmlElements:N}),_(oe,N.svgElements),_(H,N.htmlVoidElements),_(pe,N.htmlVoidElements),_(pe,N.htmlElements)),this},this.addValidAttrs=function(N){return ie||M(de,Q(N,!0)),this},U=S.bind,M=S.extend,k=S.forEach,P=S.isArray,z=S.isDefined,l=S.$$lowercase,d=S.noop,u=ve,I=Pe,v=L.Node.prototype.contains||function(N){return!!(this.compareDocumentPosition(N)&16)};var ee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,B=/([^#-~ |!])/g,H=le("area,br,col,hr,img,wbr"),g=le("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),se=le("rp,rt"),ne=M({},se,g),w=M({},g,le("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),W=M({},se,le("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),oe=le("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),b=le("script,style"),pe=M({},H,w,W,ne),G=le("background,cite,href,longdesc,src,xlink:href,xml:base"),ge=le("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),C=le("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),de=M({},G,C,ge);function le(N,Y){return Q(N.split(","),Y)}function Q(N,Y){var q={},ce;for(ce=0;ce<N.length;ce++)q[Y?l(N[ce]):N[ce]]=!0;return q}function _(N,Y){Y&&Y.length&&M(N,Q(Y))}var xe=function(N,Y){if(re())return be;if(!Y||!Y.implementation)throw o("noinert","Can't create an inert html document");var q=Y.implementation.createHTMLDocument("inert"),ce=(q.documentElement||q.getDocumentElement()).querySelector("body");return j;function re(){try{return!!be("")}catch{return!1}}function be(fe){fe="<remove></remove>"+fe;try{var O=new N.DOMParser().parseFromString(fe,"text/html").body;return O.firstChild.remove(),O}catch{return}}function j(fe){return ce.innerHTML=fe,Y.documentMode&&V(ce),ce}}(L,L.document);function ve(N,Y){N==null?N="":typeof N!="string"&&(N=""+N);var q=xe(N);if(!q)return"";var ce=5;do{if(ce===0)throw o("uinput","Failed to sanitize html because the input is unstable");ce--,N=q.innerHTML,q=xe(N)}while(N!==q.innerHTML);for(var re=q.firstChild;re;){switch(re.nodeType){case 1:Y.start(re.nodeName.toLowerCase(),De(re.attributes));break;case 3:Y.chars(re.textContent);break}var be;if(!(be=re.firstChild)&&(re.nodeType===1&&Y.end(re.nodeName.toLowerCase()),be=K("nextSibling",re),!be))for(;be==null&&(re=K("parentNode",re),re!==q);)be=K("nextSibling",re),re.nodeType===1&&Y.end(re.nodeName.toLowerCase());re=be}for(;re=q.firstChild;)q.removeChild(re)}function De(N){for(var Y={},q=0,ce=N.length;q<ce;q++){var re=N[q];Y[re.name]=re.value}return Y}function we(N){return N.replace(/&/g,"&amp;").replace(ee,function(Y){var q=Y.charCodeAt(0),ce=Y.charCodeAt(1);return"&#"+((q-55296)*1024+(ce-56320)+65536)+";"}).replace(B,function(Y){return"&#"+Y.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pe(N,Y){var q=!1,ce=U(N,N.push);return{start:function(re,be){re=l(re),!q&&b[re]&&(q=re),!q&&pe[re]===!0&&(ce("<"),ce(re),k(be,function(j,fe){var O=l(fe),$e=re==="img"&&O==="src"||O==="background";de[O]===!0&&(G[O]!==!0||Y(j,$e))&&(ce(" "),ce(fe),ce('="'),ce(we(j)),ce('"'))}),ce(">"))},end:function(re){re=l(re),!q&&pe[re]===!0&&H[re]!==!0&&(ce("</"),ce(re),ce(">")),re==q&&(q=!1)},chars:function(re){q||ce(we(re))}}}function V(N){for(;N;){if(N.nodeType===L.Node.ELEMENT_NODE)for(var Y=N.attributes,q=0,ce=Y.length;q<ce;q++){var re=Y[q],be=re.name.toLowerCase();(be==="xmlns:ns1"||be.lastIndexOf("ns1:",0)===0)&&(N.removeAttributeNode(re),q--,ce--)}var j=N.firstChild;j&&V(j),N=K("nextSibling",N)}}function K(N,Y){var q=Y[N];if(q&&v.call(Y,q))throw o("elclob","Failed to sanitize html because the element is clobbered: {0}",Y.outerHTML||Y.outerText);return q}}function ae(ie){var J=[],ee=I(J,d);return ee.chars(ie),J.join("")}S.module("ngSanitize",[]).provider("$sanitize",y).info({angularVersion:"1.8.3"}),S.module("ngSanitize").filter("linky",["$sanitize",function(ie){var J=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,ee=/^mailto:/i,B=S.$$minErr("linky"),H=S.isDefined,g=S.isFunction,se=S.isObject,ne=S.isString;return function(w,W,oe){if(w==null||w==="")return w;if(!ne(w))throw B("notstring","Expected string but received: {0}",w);for(var b=g(oe)?oe:se(oe)?function(){return oe}:function(){return{}},pe,G=w,ge=[],C,de;pe=G.match(J);)C=pe[0],!pe[2]&&!pe[4]&&(C=(pe[3]?"http://":"mailto:")+C),de=pe.index,le(G.substr(0,de)),Q(C,pe[0].replace(ee,"")),G=G.substring(de+pe[0].length);return le(G),ie(ge.join(""));function le(_){_&&ge.push(ae(_))}function Q(_,xe){var ve,De=b(_);ge.push("<a ");for(ve in De)ge.push(ve+'="'+De[ve]+'" ');H(W)&&!("target"in De)&&ge.push('target="',W,'" '),ge.push('href="',_.replace(/"/g,"&quot;"),'">'),le(xe),ge.push("</a>")}}}])})(window,window.angular)},26415:(L,S,o)=>{o(81221),L.exports="ngSanitize"},12582:L=>{"use strict";function S(o){var U=this,M;if(this._au)return;function k(){U.root[U.origin.offset]?z():P()}function P(){M||(M=setInterval(function(){U.root[U.origin.offset]&&(z(),U.update())},300))}function z(){clearInterval(M),M=null}var l=U._debounce(function(){U.update()},300);this._observer=new o(function(){k(),U.update(),l()}),this.on("init",function(){U._observer.observe(U.root,{childList:!0,subtree:!0,characterData:!0}),k()}),this.on("dispose",function(){U._observer.disconnect(),z(),delete U._observer}),this._au=!0}L.exports=function(U){var M=U.MutationObserver||U.WebKitMutationObserver||U.MozMutationObserver||null;return function(){return M?(S.call(this,M),this):this}}},69786:(L,S,o)=>{"use strict";var U=o(69079).qs;L.exports=function(k){var P,z,l,d,v=this,u;d=k.screen||.9,k.forward&&(P=U(k.forward,this.clipper),u={element:P,handler:function(){var I=v.pos()+(k.delta||30);v.pos(I)},type:"click"},this._eventHandlers.push(u),this.event(u.element,u.type,u.handler,"on")),k.backward&&(z=U(k.backward,this.clipper),u={element:z,handler:function(){var I=v.pos()-(k.delta||30);v.pos(I)},type:"click"},this._eventHandlers.push(u),this.event(u.element,u.type,u.handler,"on")),k.track&&(k.track===!0?l=this.track:l=U(k.track,this.clipper),l&&(u={element:l,handler:function(I){if(I.target==l){var y=I["offset"+v.origin.x],ae=v.bar[v.origin.offsetPos],ie=0;y<ae?ie=-1:y>ae+v.bar[v.origin.offset]&&(ie=1);var J=v.pos()+ie*d*v.scroller[v.origin.client];v.pos(J)}},type:"mousedown"},this._eventHandlers.push(u),this.event(u.element,u.type,u.handler,"on")))}},92747:(L,S,o)=>{"use strict";var U=function(){return this||(0,eval)("this")}(),M=U&&U.window||U,k=o(69079).f0,P=o(69079).AH,z=o(69079).WQ,l=o(69079).zy,d=o(69079).rm,v=o(69079).o8,u=o(69079).qs,I=w,y=["left","top","right","bottom","width","height"],ae=[],ie={v:{x:"Y",pos:y[1],oppos:y[3],crossPos:y[0],crossOpPos:y[2],size:y[5],crossSize:y[4],crossMinSize:"min-"+y[4],crossMaxSize:"max-"+y[4],client:"clientHeight",crossClient:"clientWidth",scrollEdge:"scrollLeft",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:y[0],oppos:y[2],crossPos:y[1],crossOpPos:y[3],size:y[4],crossSize:y[5],crossMinSize:"min-"+y[5],crossMaxSize:"max-"+y[5],client:"clientWidth",crossClient:"clientHeight",scrollEdge:"scrollTop",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},J=17,ee=15,B=/[\s\S]*Macintosh[\s\S]*\) Gecko[\s\S]*/,H=B.test(M.navigator&&M.navigator.userAgent),g,se,ne;function w(C){var de=!!C,le=C&&C[0]||C,Q=typeof C=="string"||le instanceof HTMLElement,_=Q?{root:C}:v(C),xe,ve,De={direction:"v",barOnCls:"_scrollbar",resizeDebounce:0,event:k,cssGuru:!1,impact:"scroller",position:"static"};_=_||{};for(var we in De)_[we]==null&&(_[we]=De[we]);xe=this&&this instanceof M.jQuery,_._chain?ve=_.root:xe?_.root=ve=this[0]:ve=u(_.root||_.scroller);var Pe=pe(ve,_.direction),V=+Pe;if(_.index=V,V==V&&Pe!==null&&ae[V])return ae[V];_.root&&_.scroller?_.scroller=u(_.scroller,ve):_.scroller=ve,_.root=ve;var K=G(_);return K.autoUpdate&&K.autoUpdate(),K}function W(C,de){var le=0,Q=C;for((Q.length===void 0||Q===M)&&(Q=[Q]);Q[le];)de.call(this,Q[le],le),le++}function oe(){return new Date().getTime()}function b(C,de,le){C._eventHandlers=C._eventHandlers||[{element:C.scroller,handler:function(Q){C.scroll(Q)},type:"scroll"},{element:C.root,handler:function(){C.update()},type:"transitionend animationend"},{element:C.scroller,handler:function(){C.update()},type:"keyup"},{element:C.bar,handler:function(Q){Q.preventDefault(),C.selection(),C.drag.now=1,C.draggingCls&&z(C.root,C.draggingCls)},type:"touchstart mousedown"},{element:document,handler:function(){C.selection(1),C.drag.now=0,C.draggingCls&&d(C.root,C.draggingCls)},type:"mouseup blur touchend"},{element:document,handler:function(Q){Q.button!=2&&C._pos0(Q)},type:"touchstart mousedown"},{element:document,handler:function(Q){C.drag.now&&C.drag(Q)},type:"mousemove touchmove"},{element:M,handler:function(){C.update()},type:"resize"},{element:C.root,handler:function(){C.update()},type:"sizeChange"},{element:C.clipper,handler:function(){C.clipperOnScroll()},type:"scroll"}],W(C._eventHandlers,function(Q){if(Q.element)if(Q.element.length&&Q.element!==M)for(var _=0;_<Q.element.length;_++)de(Q.element[_],Q.type,Q.handler,le);else de(Q.element,Q.type,Q.handler,le)})}function pe(C,de,le,Q){var _="data-baron-"+de+"-id";return le=="on"?C.setAttribute(_,Q):le=="off"&&C.removeAttribute(_),C.getAttribute(_)}function G(C){var de=new w.prototype.constructor(C);return b(de,C.event,"on"),pe(de.root,C.direction,"on",ae.length),ae.push(de),de.update(),de}function ge(C){if(this.events&&this.events[C])for(var de=0;de<this.events[C].length;de++){var le=Array.prototype.slice.call(arguments,1);this.events[C][de].apply(this,le)}}w.prototype={_debounce:function(C,de){var le=this,Q,_,xe=function(){if(le._disposed){clearTimeout(Q),Q=le=null;return}var ve=oe()-_;ve<de&&ve>=0?Q=setTimeout(xe,de-ve):(Q=null,C())};return function(){_=oe(),Q||(Q=setTimeout(xe,de))}},constructor:function(C){var de,le,Q,_,xe,ve,De;ve=oe(),this.params=C,this.event=C.event,this.events={},this.root=C.root,this.scroller=u(C.scroller),this.bar=u(C.bar,this.root),Q=this.track=u(C.track,this.root),!this.track&&this.bar&&(Q=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=C.direction,this.rtl=C.rtl,this.origin=ie[this.direction],this.barOnCls=C.barOnCls,this.scrollingCls=C.scrollingCls,this.draggingCls=C.draggingCls,this.impact=C.impact,this.position=C.position,this.rtl=C.rtl,this.barTopLimit=0,this.resizeDebounce=C.resizeDebounce;function we(j){var fe=this.barMinSize||20,O=j;O>0&&O<fe&&(O=fe),this.bar&&P(this.bar,this.origin.size,parseInt(O,10)+"px")}function Pe(j){if(this.bar){var fe=P(this.bar,this.origin.pos),O=+j+"px";O&&O!=fe&&P(this.bar,this.origin.pos,O)}}function V(){return Q[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function K(j){return j*V.call(this)+this.barTopLimit}function N(j){return(j-this.barTopLimit)/V.call(this)}this.cursor=function(j){return j["client"+this.origin.x]||(((j.originalEvent||j).touches||{})[0]||{})["page"+this.origin.x]};function Y(){return!1}if(this.pos=function(j){var fe="page"+this.origin.x+"Offset",O=this.scroller[fe]?fe:this.origin.scroll;return j!==void 0&&(this.scroller[O]=j),this.scroller[O]},this.rpos=function(j){var fe=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client],O;return j?O=this.pos(j*fe):O=this.pos(),O/(fe||1)},this.barOn=function(j){if(this.barOnCls){var fe=this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize];j||fe?l(this.root,this.barOnCls)&&d(this.root,this.barOnCls):l(this.root,this.barOnCls)||z(this.root,this.barOnCls)}},this._pos0=function(j){le=this.cursor(j)-de},this.drag=function(j){var fe=N.call(this,this.cursor(j)-le),O=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];this.scroller[this.origin.scroll]=fe*O},this.selection=function(j){this.event(document,"selectpos selectstart",Y,j?"off":"on")},this.resize=function(){var j=this,fe=j.resizeDebounce===void 0?300:j.resizeDebounce,O=0;oe()-ve<fe&&(clearTimeout(_),O=fe);function $e(){var Ge=j.scroller[j.origin.crossOffset],Se=j.scroller[j.origin.crossClient],et=0,He,Fe;if(H?et=ee:Se>0&&Ge===0&&(Ge=Se+J),Ge)if(j.barOn(),j.impact=="scroller"){var tt=Ge-Se+et;if(j.position=="static")He=P(j.scroller,j.origin.crossSize),Fe=j.clipper[j.origin.crossClient]+tt+"px",He!=Fe&&j._setCrossSizes(j.scroller,Fe);else{var nt={},rt=j.rtl?"Left":"Right";j.direction=="h"&&(rt="Bottom"),nt["padding"+rt]=tt+"px",P(j.scroller,nt)}}else He=P(j.clipper,j.origin.crossSize),Fe=Se+"px",He!=Fe&&j._setCrossSizes(j.clipper,Fe);Array.prototype.unshift.call(arguments,"resize"),ge.apply(j,arguments),ve=oe()}O?_=setTimeout($e,O):$e()},this.updatePositions=function(j){var fe,O=this;O.bar&&(fe=(Q[O.origin.client]-O.barTopLimit)*O.scroller[O.origin.client]/O.scroller[O.origin.scrollSize],(j||parseInt(De,10)!=parseInt(fe,10))&&(we.call(O,fe),De=fe),de=K.call(O,O.rpos()),Pe.call(O,de)),Array.prototype.unshift.call(arguments,"scroll"),ge.apply(O,arguments)},this.scroll=function(){var j=this;j.updatePositions(),j.scrollingCls&&(xe||z(j.root,j.scrollingCls),clearTimeout(xe),xe=setTimeout(function(){d(j.root,j.scrollingCls),xe=void 0},300))},this.clipperOnScroll=function(){this.rtl?this.clipper[this.origin.scrollEdge]=this.clipper[this.origin.scrollSize]:this.clipper[this.origin.scrollEdge]=0},this._setCrossSizes=function(j,fe){var O={};O[this.origin.crossSize]=fe,O[this.origin.crossMinSize]=fe,O[this.origin.crossMaxSize]=fe,P(j,O)},this._dumbCss=function(j){if(!C.cssGuru){var fe=j?"hidden":null,O=j?"none":null;P(this.clipper,{overflow:fe,msOverflowStyle:O,position:this.position=="static"?"":"relative"});var $e=j?"scroll":null,Ge=this.direction=="v"?"y":"x",Se={};Se["overflow-"+Ge]=$e,Se["box-sizing"]="border-box",Se.margin="0",Se.border="0",this.position=="absolute"&&(Se.position="absolute",Se.top="0",this.direction=="h"?Se.left=Se.right="0":(Se.bottom="0",Se.right=this.rtl?"0":"",Se.left=this.rtl?"":"0")),P(this.scroller,Se)}},this._dumbCss(!0),H){var q="paddingRight",ce={},re=M.getComputedStyle(this.scroller)[[q]];C.direction=="h"?q="paddingBottom":C.rtl&&(q="paddingLeft");var be=parseInt(re,10);be!=be&&(be=0),ce[q]=ee+be+"px",P(this.scroller,ce)}return this},update:function(C){return ge.call(this,"upd",C),this.resize(1),this.updatePositions(1),this},dispose:function(){b(this,this.event,"off"),pe(this.root,this.params.direction,"off"),this.params.direction=="v"?this._setCrossSizes(this.scroller,""):this._setCrossSizes(this.clipper,""),this._dumbCss(!1),this.barOn(!0),ge.call(this,"dispose"),ae[this.params.index]=null,this.params=null,this._disposed=!0},on:function(C,de,le){for(var Q=C.split(" "),_=0;_<Q.length;_++)Q[_]=="init"?de.call(this,le):(this.events[Q[_]]=this.events[Q[_]]||[],this.events[Q[_]].push(function(xe){de.call(this,xe||le)}))},baron:function(C){return C.root=this.params.root,C.scroller=this.params.scroller,C.direction=this.params.direction=="v"?"h":"v",C._chain=!0,w(C)}},w.prototype.constructor.prototype=w.prototype,w.noConflict=function(){return M.baron=I,w},w.version="3.0.1",w.prototype.autoUpdate=o(12582)(M),w.prototype.fix=o(41197),w.prototype.controls=o(69786),L.exports=w},41197:(L,S,o)=>{"use strict";var U=o(37420),M=o(69079).AH,k=o(69079).WQ,P=o(69079).rm;L.exports=function(l){var d,v,u={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},I=[],y=[],ae=[],ie=this.scroller,J=this.event,ee=this;function B(w,W,oe){var b=W,pe=oe==1?"pos":"oppos";v<(u.minView||0)&&(b=void 0),M(d[w],this.origin.pos,""),M(d[w],this.origin.oppos,""),P(d[w],u.outside),b!==void 0&&(b+="px",M(d[w],this.origin[pe],b),k(d[w],u.outside))}function H(w){try{var W=document.createEvent("WheelEvent");W.initWebKitWheelEvent(w.originalEvent.wheelDeltaX,w.originalEvent.wheelDeltaY),ie.dispatchEvent(W),w.preventDefault()}catch{}}function g(w){var W;for(var oe in w)u[oe]=w[oe];if(u.elements instanceof HTMLElement?d=[u.elements]:typeof u.elements=="string"?d=this.scroller.querySelectorAll(u.elements):u.elements&&u.elements[0]instanceof HTMLElement&&(d=u.elements),d){v=this.scroller[this.origin.client];for(var b=0;b<d.length;b++)W={},W[this.origin.size]=d[b][this.origin.offset]+"px",d[b].parentNode!==this.scroller&&M(d[b].parentNode,W),W={},W[this.origin.crossSize]=d[b].parentNode[this.origin.crossClient]+"px",M(d[b],W),v-=d[b][this.origin.offset],ae[b]=d[b].parentNode[this.origin.offsetPos],I[b]=I[b-1]||0,y[b]=y[b-1]||Math.min(ae[b],0),d[b-1]&&(I[b]+=d[b-1][this.origin.offset],y[b]+=d[b-1][this.origin.offset]),b==0&&ae[b]==0||(this.event(d[b],"mousewheel",H,"off"),this.event(d[b],"mousewheel",H));u.limiter&&d[0]&&(this.track&&this.track!=this.scroller?(W={},W[this.origin.pos]=d[0].parentNode[this.origin.offset]+"px",M(this.track,W)):this.barTopLimit=d[0].parentNode[this.origin.offset],this.scroll()),u.limiter===!1&&(this.barTopLimit=0)}var pe={element:d,handler:function(){for(var ge=this.parentNode,C=ge.offsetTop,de,le=0;le<d.length;le++)d[le]===this&&(de=le);var Q=C-I[de];u.scroll?u.scroll({x1:ee.scroller.scrollTop,x2:Q}):ee.scroller.scrollTop=Q},type:"click"};if(u.clickable){this._eventHandlers.push(pe);for(var G=0;G<pe.element.length;G++)J(pe.element[G],pe.type,pe.handler,"on")}}this.on("init",g,l);var se=[],ne=[];return this.on("init scroll",function(){var w,W,oe,b;if(d){var pe;for(b=0;b<d.length;b++)w=0,ae[b]-this.pos()<y[b]+u.radius?(w=1,W=I[b]):ae[b]-this.pos()>y[b]+v-u.radius?(w=2,W=this.scroller[this.origin.client]-d[b][this.origin.offset]-I[b]-v):(w=3,W=void 0),oe=!1,(ae[b]-this.pos()<y[b]||ae[b]-this.pos()>y[b]+v)&&(oe=!0),(w!=se[b]||oe!=ne[b])&&(B.call(this,b,W,w),se[b]=w,ne[b]=oe,pe=!0);if(pe)for(b=0;b<d.length;b++)se[b]==1&&u.past&&(k(d[b],u.past),P(d[b],u.future)),se[b]==2&&u.future&&(k(d[b],u.future),P(d[b],u.past)),se[b]==3&&(P(d[b],u.past),P(d[b],u.future),k(d[b],u.inside)),se[b]!=se[b+1]&&se[b]==1?(k(d[b],u.before),P(d[b],u.after)):se[b]!=se[b-1]&&se[b]==2?(k(d[b],u.after),P(d[b],u.before)):(P(d[b],u.before),P(d[b],u.after)),u.grad&&(ne[b]?k(d[b],u.grad):P(d[b],u.grad))}}),this.on("resize upd",function(w){g.call(this,w&&w.fix)}),this}},37420:L=>{L.exports=function(o,U,M){var k=console[o]||console.log,P=["Baron: "+U,M];Function.prototype.apply.call(k,console,P)}},69079:L=>{"use strict";var S,o=!1;try{var U=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,U)}catch{}L.exports.f0=function(P,z,l,d){var v=z.split(" "),u=d=="on"?"add":"remove";v.forEach(function(I){var y=!1;["scroll","touchstart","touchmove"].indexOf(I)!=-1&&o&&(y={passive:!0}),P[u+"EventListener"](I,l,y)})};function M(k,P){for(var z in k)k.hasOwnProperty(z)&&P(z,k[z])}L.exports.AH=function(P,z,l){var d;if(l===void 0){if(typeof z=="string")return P.style[z];d=z}else d={},d[z]=l;M(d,function(v,u){P.style[v]=u})},L.exports.WQ=function(P,z){z&&P.classList.add(z)},L.exports.rm=function(P,z){z&&P.classList.remove(z)},L.exports.zy=function(P,z){return z?P.classList.contains(z):!1},L.exports.o8=function(P){var z={},l=P||{};return M(l,function(d,v){z[d]=v}),z},L.exports.qs=function(P,z){if(P instanceof HTMLElement)return P;var l=z||document;return l.querySelector(P)},S=M},27808:(L,S,o)=>{"use strict";o.d(S,{AngularApp:()=>Zi});var U=o(92747),M=o.n(U),k=o(64423),P=o(26272),z=o(3591),l=o(67982),d=o(28444);const v=`
  <ng-transclude class="panel-height-helper"></ng-transclude>
`;l.m7.directive("grafanaPanel",["$timeout",t=>({restrict:"E",template:v,transclude:!0,scope:{ctrl:"="},link:(e,r)=>{const n=e.ctrl,i=e.ctrl.panel,s=new k.yU;let a;function c(){a&&a.update()}n.events.on(P.ee.componentDidMount,()=>{if(n.__proto__.constructor.scrollable){const f="baron baron__root baron__clipper panel-content--scrollable",x="baron__scroller",p=`
            <div class="baron__track">
              <div class="baron__bar"></div>
            </div>
          `,A=r,T=r.find(":first").find(":first");A.addClass(f),$(p).appendTo(A),T.addClass(x),a=M()({root:A[0],scroller:T[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling"}),a.scroll()}});function h(){n.height=e.$parent.$parent.size.height,n.width=e.$parent.$parent.size.width}h(),s.add(i.events.subscribe(z._,()=>{h(),n.events.emit("refresh")})),s.add(i.events.subscribe(d.XM,f=>{f.payload?.fromAngular||(h(),t(()=>{c(),n.events.emit("render")}))})),s.add(n.events.subscribe(d.XM,f=>{f.payload&&(f.payload.fromAngular=!0,i.events.publish(f))})),e.$on("$destroy",()=>{r.off(),s.unsubscribe(),n.events.emit(P.ee.panelTeardown),n.events.removeAllListeners(),a&&a.dispose()}),i.events.publish(d.vk)}})]);var u=o(59559),I=o(7025),y=o.n(I);const ae=y().module("grafana.directives"),ie={};ae.directive("panelEditorTab",["dynamicDirectiveSrv",J]);function J(t){return t.create({scope:{ctrl:"=",editorTab:"="},directive:e=>{const r=e.ctrl.pluginId,n=e.editorTab.title.toLowerCase().replace(" ","-").replace("&","").replace(" ","").replace(" ","-");if(ie[r]){if(ie[r][n])return ie[r][n]}else ie[r]=[];const i={fn:()=>e.editorTab.directiveFn(),name:`panel-editor-tab-${r}${n}`};return ie[r][n]=i,i}})}class ee{constructor(){this.hasTextEditMode=!1}$onInit(){this.panelCtrl=this.queryCtrl.panelCtrl,this.target=this.queryCtrl.target,this.panel=this.panelCtrl.panel,this.hasTextEditMode&&this.queryCtrl.toggleEditorMode&&(this.panelCtrl.toggleEditorMode=this.queryCtrl.toggleEditorMode.bind(this.queryCtrl)),this.queryCtrl.getCollapsedText&&(this.panelCtrl.getCollapsedText=this.queryCtrl.getCollapsedText.bind(this.queryCtrl))}}l.m7.directive("queryEditorRow",B);function B(){return{restrict:"E",controller:ee,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/angular/panel/partials/query_editor_row.html",transclude:!0,scope:{queryCtrl:"=",canCollapse:"=",hasTextEditMode:"="}}}var H=o(50410),g=o(2543),se=o.n(g),ne=o(47232),w=o(23989);l.Ay.filter("stringSort",()=>t=>t.sort()),l.Ay.filter("slice",()=>(t,e,r)=>(0,g.isUndefined)(t)?t:t.slice(e,r)),l.Ay.filter("stringify",()=>t=>(0,g.isObject)(t)&&!(0,g.isArray)(t)?y().toJson(t):(0,g.isNull)(t)?null:t.toString()),l.Ay.filter("moment",()=>(t,e)=>{switch(e){case"ago":return(0,ne.KQ)(t).fromNow()}return(0,ne.KQ)(t).fromNow()});function W(t=(0,w.w)()){const e=(r,n)=>{let i;return n.ctrl?i=(n.ctrl.panel||n.ctrl.row).scopedVars:i=n.row.scopedVars,t.replaceWithText(r,i)};return e.$stateful=!0,e}l.Ay.filter("interpolateTemplateVars",W);const oe={};class b{constructor(){}set(){console.warn("old deprecated alert srv being used")}}l.Ay.service("alertSrv",b);class pe{constructor(e){this.$compile=e}static{this.$inject=["$compile"]}addDirective(e,r,n){const i=y().element(document.createElement(r));this.$compile(i)(n),e.empty(),e.append(i)}link(e,r,n,i){const s=i.directive(e);if(!s||!s.fn){r.empty();return}s.fn.registered||(l.Ay.directive(n.$normalize(s.name),s.fn),s.fn.registered=!0),this.addDirective(r,s.name,e)}create(e){return{restrict:"E",scope:e.scope,link:(n,i,s)=>{if(e.watchPath){let a=null;n.$watch(e.watchPath,()=>{a&&a.$destroy(),a=n.$new(),this.link(a,i,s,e)})}else this.link(n,i,s,e)}}}}l.Ay.service("dynamicDirectiveSrv",pe);var G=o(96540),ge=o(5338);function C(t,e){if(y().isFunction(t))return t;if(!t)throw new Error("ReactComponent name attribute must be specified");let r;try{r=e.get(t)}catch{}if(!r)try{r=t.split(".").reduce((n,i)=>n[i],window)}catch{}if(!r)throw Error("Cannot find react component "+t);return r}function de(t,e){if(t.wrappedInApply)return t;const r=function(){const n=arguments,i=e.$root.$$phase;return i==="$apply"||i==="$digest"?t.apply(null,n):e.$apply(()=>t.apply(null,n))};return r.wrappedInApply=!0,r}function le(t,e,r){return Object.keys(t||{}).reduce((n,i)=>{const s=t[i],a=(r||{})[i]||{};return n[i]=y().isFunction(s)&&a.wrapApply!==!1?de(s,e):s,n},{})}function Q(t,e,r,n){const i=y().isFunction(e.$watchCollection),s=y().isFunction(e.$watchGroup),a=[];for(const c of r){const h=De(c),f=Pe(t,c);!h||h.match(/\(.*\)/)||f==="one-time"||(f==="collection"&&i?e.$watchCollection(h,n):f==="reference"&&s?a.push(h):e.$watch(h,n,f!=="reference"))}t==="one-time"&&n(),a.length&&e.$watchGroup(a,n)}function _(t,e,r,n){r.$evalAsync(()=>{n.render(G.createElement(t,e))})}function xe(t){return Array.isArray(t)?t[0]:t}function ve(t){return Array.isArray(t)?t[1]:{}}function De(t){return Array.isArray(t)?t[0]:t}function we(t,e){const r=Object.keys(t).find(n=>n.toLowerCase()===e.toLowerCase()||(0,g.kebabCase)(n)===(0,g.kebabCase)(e));return t[r]}function Pe(t,e){return Array.isArray(e)&&y().isObject(e[1])&&e[1].watchDepth||t}const V=t=>({restrict:"E",replace:!0,link:function(e,r,n){const i=C(n.name,t),s=(0,ge.H)(r[0]),a=()=>{const c=e.$eval(n.props),h=le(c,e);_(i,h,e,s)};n.props?Q(n.watchDepth,e,[n.props],a):a(),e.$on("$destroy",()=>{n.onScopeDestroy?e.$eval(n.onScopeDestroy,{unmountComponent:s.unmount.bind(this)}):s.unmount()})}}),K=t=>(e,r,n,i)=>{const s={restrict:"E",replace:!0,link:function(a,c,h){const f=C(e,t),x=(0,ge.H)(c[0]);r=r||Object.keys(f.propTypes||{});const p=()=>{let T={};const F={};r.forEach(he=>{const D=xe(he);T[D]=a.$eval(we(h,D)),F[D]=ve(he)}),T=le(T,a,F),T=y().extend({},T,i),_(f,T,a,x)},A=r.map(T=>Array.isArray(T)?[we(h,T[0]),ve(T)]:we(h,T));r.length?Q(h.watchDepth,a,A,p):p(),a.$on("$destroy",()=>{h.onScopeDestroy?a.$eval(h.onScopeDestroy,{unmountComponent:x.unmount.bind(this)}):x.unmount()})}};return y().extend(s,n)},N=y().module("react",[]);N.directive("reactComponent",["$injector",V]),N.factory("reactDirective",["$injector",K]),l.Ay.service("uiSegmentSrv",["$sce","templateSrv",Y]);function Y(t,e){const r=this;class n{constructor(s){if(s==="*"||s.value==="*"){this.value="*",this.html=t.trustAsHtml('<i class="fa fa-asterisk"><i>'),this.type=s.type,this.expandable=!0;return}if((0,g.isString)(s)){this.value=s,this.html=t.trustAsHtml(e.highlightVariablesAsHtml(this.value));return}this.text=s.value,this.cssClass=s.cssClass,this.custom=s.custom,this.type=s.type,this.fake=s.fake,this.value=s.value,this.selectMode=s.selectMode,this.expandable=s.expandable,this.html=s.html||t.trustAsHtml(e.highlightVariablesAsHtml(this.value))}}this.getSegmentForValue=function(i,s){return i?this.newSegment(i):this.newSegment({value:s,fake:!0})},this.newSelectMeasurement=()=>new n({value:"select measurement",fake:!0}),this.newFake=(i,s,a)=>new n({value:i,fake:!0,type:s,cssClass:a}),this.newSegment=i=>new n(i),this.newKey=i=>new n({value:i,type:"key",cssClass:"query-segment-key"}),this.newKeyValue=i=>new n({value:i,type:"value",cssClass:"query-segment-value"}),this.newCondition=i=>new n({value:i,type:"condition",cssClass:"query-keyword"}),this.newOperator=i=>new n({value:i,type:"operator",cssClass:"query-segment-operator"}),this.newOperators=i=>(0,g.map)(i,s=>new n({value:s,type:"operator",cssClass:"query-segment-operator"})),this.transformToSegments=(i,s)=>a=>{const c=(0,g.map)(a,h=>r.newSegment({value:h.text,expandable:h.expandable}));return i&&(0,g.each)(e.getVariables(),h=>{(s===void 0||s===h.type)&&c.unshift(r.newSegment({type:"value",value:"$"+h.name,expandable:!0}))}),c},this.newSelectMetric=()=>new n({value:"select metric",fake:!0}),this.newPlusButton=()=>new n({fake:!0,html:'<i class="fa fa-plus "></i>',type:"plus-button",cssClass:"query-part"})}var q=o(66899),ce=o.n(q);l.Ay.service("popoverSrv",["$compile","$rootScope","$timeout",re]);function re(t,e,r){let n=null;this.close=()=>{n&&n.close()},this.show=i=>{n&&(n.close(),n=null);const s=(0,g.extend)(e.$new(!0),i.model);let a;const c=()=>{setTimeout(()=>{s.$destroy(),a.tether&&a.destroy(),i.onClose&&i.onClose()}),n=null};s.dismiss=()=>{a.close()};const h=document.createElement("div");return h.innerHTML=i.template,t(h)(s),r(()=>{a=new(ce())({target:i.element,content:h,position:i.position,classes:i.classNames||"drop-popover",openOn:i.openOn,hoverCloseDelay:200,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together"}]}}),a.on("close",()=>{c()}),n=a,n.open()},100),()=>{a&&a.close()}}}class be{constructor(e){this.$timeout=e,this.timers=[]}static{this.$inject=["$timeout"]}register(e){return this.timers.push(e),e}cancel(e){this.timers=(0,g.without)(this.timers,e),this.$timeout.cancel(e)}cancelAll(){(0,g.each)(this.timers,e=>{this.$timeout.cancel(e)}),this.timers=[]}}l.Ay.service("timer",be);class j{constructor(e,r){this.$compile=e,this.$rootScope=r}static{this.$inject=["$compile","$rootScope"]}load(e,r,n){const i=this.$rootScope.$new();(0,g.assign)(i,r);const s=this.$compile(n)(i);return y().element(e).append(s),{destroy:()=>{i.$destroy(),s.remove()},digest:()=>{i.$$phase||i.$digest()},getScope:()=>i}}}l.Ay.service("angularLoader",j);var fe=o(34796),O=o.n(fe);const $e=O()(window);O().fn.place_tt=(()=>{const t={offset:5};return function(e,r,n){return n=O().extend(!0,{},t,n),this.each(()=>{const i=O()(this);let s,a;i.addClass("grafana-tooltip"),O()("#tooltip").remove(),i.appendTo(document.body),n.compile&&y().element(document).injector().invoke(["$compile","$rootScope",(f,x)=>{const p=x.$new(!0);(0,g.extend)(p,n.scopeData),f(i)(p),p.$digest(),p.$destroy()}]),s=i.outerWidth(!0),a=i.outerHeight(!0);const c=e+n.offset+s>$e.width()?e-n.offset-s:e+n.offset,h=r+n.offset+a>$e.height()?r-n.offset-a:r+n.offset;i.css("left",c>0?c:0),i.css("top",h>0?h:0)})}})();function Ge(t){const e='<input type="text" class="gf-form-input input-medium tight-form-input" spellcheck="false" style="display:none"></input>',r='<a class="gf-form-label tight-form-func dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>';return{scope:{menuItems:"=dropdownTypeahead",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel"},link:(n,i,s)=>{const a=O()(e),c=O()(r);a.appendTo(i),c.appendTo(i),s.linkText&&c.html(s.linkText),s.ngModel&&n.$watch("model",x=>{(0,g.each)(n.menuItems,p=>{(0,g.each)(p.submenu,A=>{A.value===x&&c.html(A.text)})})});const h=(0,g.reduce)(n.menuItems,(x,p,A)=>(p.submenu?(0,g.each)(p.submenu,(T,F)=>{T.click="menuItemSelected("+A+","+F+")",x.push(p.text+" "+T.text)}):(p.click="menuItemSelected("+A+")",x.push(p.text)),x),[]),f=()=>{a.hide(),a.val(""),c.show(),c.focus(),i.removeClass("open")};n.menuItemSelected=(x,p)=>{const A=n.menuItems[x],T={$item:A};A.submenu&&p!==void 0&&(T.$subItem=A.submenu[p]),n.dropdownTypeaheadOnSelect(T),f()},a.attr("data-provide","typeahead"),a.typeahead({source:h,minLength:1,items:10,updater:x=>{const p={};return(0,g.each)(n.menuItems,A=>{(0,g.each)(A.submenu,T=>{x===A.text+" "+T.text&&(p.$subItem=T,p.$item=A)})}),p.$item&&n.$apply(()=>{n.dropdownTypeaheadOnSelect(p)}),a.trigger("blur"),""}}),c.click(()=>{c.hide(),a.show(),a.focus()}),a.keyup(()=>{i.toggleClass("open",a.val()==="")}),i.mousedown(x=>{x.preventDefault()}),a.blur(()=>{a.hide(),a.val(""),c.show(),c.focus(),setTimeout(()=>{i.removeClass("open")},200)}),t(i.contents())(n)}}}function Se(t){const e='<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>',r='<a class="{{buttonTemplateClass}} dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>';return{scope:{menuItems:"=dropdownTypeahead2",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel",buttonTemplateClass:"@"},link:(n,i,s)=>{const a=O()(e);n.buttonTemplateClass||(n.buttonTemplateClass="gf-form-input");const c=O()(r),h={blur:null};a.appendTo(i),c.appendTo(i),s.linkText&&c.html(s.linkText),s.ngModel&&n.$watch("model",p=>{(0,g.each)(n.menuItems,A=>{(0,g.each)(A.submenu,T=>{T.value===p&&c.html(T.text)})})});const f=(0,g.reduce)(n.menuItems,(p,A,T)=>(A.submenu?(0,g.each)(A.submenu,(F,he)=>{F.click="menuItemSelected("+T+","+he+")",p.push(A.text+" "+F.text)}):(A.click="menuItemSelected("+T+")",p.push(A.text)),p),[]),x=()=>{a.hide(),a.val(""),c.show(),c.focus(),i.removeClass("open")};n.menuItemSelected=(p,A)=>{const T=n.menuItems[p],F={$item:T};T.submenu&&A!==void 0&&(F.$subItem=T.submenu[A]),n.dropdownTypeaheadOnSelect(F),x()},a.attr("data-provide","typeahead"),a.typeahead({source:f,minLength:1,items:10,updater:p=>{const A={};return(0,g.each)(n.menuItems,T=>{(0,g.each)(T.submenu,F=>{p===T.text+" "+F.text&&(A.$subItem=F,A.$item=T)})}),A.$item&&n.$apply(()=>{n.dropdownTypeaheadOnSelect(A)}),a.trigger("blur"),""}}),c.click(()=>{c.hide(),a.show(),a.focus()}),a.keyup(()=>{i.toggleClass("open",a.val()==="")}),i.mousedown(p=>{p.preventDefault(),h.blur=null}),a.blur(()=>{h.blur=setTimeout(()=>{x()},1)}),t(i.contents())(n)}}}l.Ay.directive("dropdownTypeahead",["$compile",Ge]),l.Ay.directive("dropdownTypeahead2",["$compile",Se]);function et(t){return{link:(e,r)=>{const n=r[0],i=()=>{const a=new Event("change");return n.dispatchEvent(a)},s=({animationName:a})=>{switch(a){case"onAutoFillStart":return i();case"onAutoFillCancel":return i()}return null};n.addEventListener("animationstart",s),e.$on("$destroy",()=>{n.removeEventListener("animationstart",s)})}}}l.Ay.directive("autofillEventFix",["$compile",et]);function He(t,e,r){const n='<input type="text" data-provide="typeahead"  class="gf-form-input input-medium" spellcheck="false" style="display:none"></input>',i='<a class="gf-form-label" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>',s='<a class="gf-form-input gf-form-input--dropdown" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>';return{scope:{segment:"=",getOptions:"&",onChange:"&",debounce:"@"},link:(a,c)=>{const h=O()(n),f=a.segment,x=O()(f.selectMode?s:i);let p=null,A=null,T=!0;const F=a.debounce;h.appendTo(c),x.appendTo(c),a.updateVariableValue=D=>{D===""||f.value===D||a.$apply(()=>{const X=(0,g.find)(a.altSegments,{value:D});X?(f.value=X.value,f.html=X.html||e.trustAsHtml(r.highlightVariablesAsHtml(X.value)),f.fake=!1,f.expandable=X.expandable,X.type&&(f.type=X.type)):f.custom!=="false"&&(f.value=D,f.html=e.trustAsHtml(r.highlightVariablesAsHtml(D)),f.expandable=!0,f.fake=!1),a.onChange()})},a.switchToLink=D=>{T&&!D||(clearTimeout(A),A=null,T=!0,h.hide(),x.show(),a.updateVariableValue(h.val()))},a.inputBlur=()=>{A=setTimeout(a.switchToLink,200)},a.source=(D,X)=>{a.$apply(()=>{a.getOptions({$query:D}).then(Z=>{a.altSegments=Z,p=(0,g.map)(a.altSegments,te=>(0,g.escape)(te.value)),f.custom!=="false"&&!f.fake&&(0,g.indexOf)(p,f.value)===-1&&p.unshift((0,g.escape)(f.value)),X(p)})})},a.updater=D=>(D=(0,g.unescape)(D),D===f.value?(clearTimeout(A),h.focus(),D):(h.val(D),a.switchToLink(!0),D)),a.matcher=function(D){if(T)return!1;let X=this.query;X[0]==="/"&&(X=X.substring(1)),X[X.length-1]==="/"&&(X=X.substring(0,X.length-1));try{return D.toLowerCase().match(X.toLowerCase())}catch{return!1}},h.attr("data-provide","typeahead"),h.typeahead({source:a.source,minLength:0,items:1e4,updater:a.updater,matcher:a.matcher});const he=h.data("typeahead");he.lookup=function(){this.query=this.$element.val()||"";const D=this.source(this.query,O().proxy(this.process,this));return D&&this.process(D)},F&&(he.lookup=(0,g.debounce)(he.lookup,500,{leading:!0})),x.keydown(D=>{(D.keyCode===40||D.keyCode===13)&&x.click()}),x.click(()=>{p=null,h.css("width",Math.max(x.width(),80)+16+"px"),x.hide(),h.show(),h.focus(),T=!1;const D=h.data("typeahead");D&&(h.val(""),D.lookup())}),h.blur(a.inputBlur),t(c.contents())(a)}}}function Fe(t){return{template:'<metric-segment segment="segment" get-options="getOptionsInternal()" on-change="onSegmentChange()"></metric-segment>',restrict:"E",scope:{property:"=",options:"=",getOptions:"&",onChange:"&"},link:{pre:function(r,n,i){let s;r.valueToSegment=a=>{const c=(0,g.find)(r.options,{value:a}),h={cssClass:i.cssClass,custom:i.custom,value:c?c.text:a,selectMode:i.selectMode};return t.newSegment(h)},r.getOptionsInternal=()=>r.options?(s=r.options,Promise.resolve((0,g.map)(r.options,a=>({value:a.text})))):r.getOptions().then(a=>(s=a,(0,g.map)(a,c=>c.html?c:{value:c.text}))),r.onSegmentChange=()=>{if(s){const a=(0,g.find)(s,{text:r.segment.value});a&&a.value!==r.property?r.property=a.value:i.custom!=="false"&&(r.property=r.segment.value)}else r.property=r.segment.value;r.$$postDigest(()=>{r.$apply(()=>{r.onChange()})})},r.segment=r.valueToSegment(r.property)}}}}l.Ay.directive("metricSegment",["$compile","$sce","templateSrv",He]),l.Ay.directive("metricSegmentModel",["uiSegmentSrv",Fe]),l.Ay.directive("tip",["$compile",tt]);function tt(t){return{restrict:"E",link:(e,r,n)=>{let i='<i class="grafana-tip fa fa-'+(n.icon||"question-circle")+`" bs-tooltip="'`+r.text().replace(/[\'\"\\{}<>&]/g,s=>"&amp;#"+s.charCodeAt(0)+";")+`'"></i>`;r.replaceWith(t(y().element(i))(e))}}}l.Ay.directive("compile",["$compile",nt]);function nt(t){return{restrict:"A",link:(e,r,n)=>{e.$watch(i=>i.$eval(n.compile),i=>{r.html(i),t(r.contents())(e)})}}}l.Ay.directive("watchChange",rt);function rt(){return{scope:{onchange:"&watchChange"},link:(t,e)=>{e.on("input",()=>{t.$apply(()=>{t.onchange({inputValue:e.val()})})})}}}l.Ay.directive("editorOptBool",["$compile",Ht]);function Ht(t){return{restrict:"E",link:(e,r,n)=>{const i=n.change?' ng-change="'+n.change+'"':"",s=n.tip?" <tip>"+n.tip+"</tip>":"",c='<div class="editor-option gf-form-checkbox text-center"'+(n.showIf?' ng-show="'+n.showIf+'" ':"")+'> <label for="'+n.model+'" class="small">'+n.text+s+'</label><input class="cr1" id="'+n.model+'" type="checkbox"        ng-model="'+n.model+'"'+i+'       ng-checked="'+n.model+'"></input> <label for="'+n.model+'" class="cr1"></label>';r.replaceWith(t(y().element(c))(e))}}}l.Ay.directive("editorCheckbox",["$compile, $interpolate",Qt]);function Qt(t,e){return{restrict:"E",link:(r,n,i)=>{const s=e(i.text)(r),a=e(i.model)(r),c=i.change?' ng-change="'+i.change+'"':"",h=i.tip?" <tip>"+i.tip+"</tip>":"",f='<label for="'+r.$id+a+'" class="checkbox-label">'+s+h+"</label>";let x='<input class="cr1" id="'+r.$id+a+'" type="checkbox"        ng-model="'+a+'"'+c+'       ng-checked="'+a+'"></input> <label for="'+r.$id+a+'" class="cr1"></label>';x=x+f,n.addClass("gf-form-checkbox"),n.html(t(y().element(x))(r))}}}l.Ay.directive("gfDropdown",["$parse","$compile","$timeout",Yt]);function Yt(t,e,r){function n(i,s){const c=['<ul class="dropdown-menu '+(s==="top"?"dropup":"")+'" role="menu" aria-labelledby="drop1">',"</ul>"];for(let h=0;h<i.length;h++){const f=i[h];if(f.divider){c.splice(h+1,0,'<li class="divider"></li>');continue}let x="<li"+(f.submenu&&f.submenu.length?' class="dropdown-submenu"':"")+'><a tabindex="-1" ng-href="'+(f.href||"")+'"'+(f.click?' ng-click="'+f.click+'"':"")+(f.target?' target="'+f.target+'"':"")+(f.method?' data-method="'+f.method+'"':"")+">"+(f.text||"")+"</a>";f.submenu&&f.submenu.length&&(x+=n(f.submenu).join(`
`)),x+="</li>",c.splice(h+1,0,x)}return c}return{restrict:"EA",scope:!0,link:function(s,a,c){const h=t(c.gfDropdown),f=h(s);r(()=>{const x=a.data("placement");y().element(n(f,x).join("")).insertAfter(a),e(a.next("ul.dropdown-menu"))(s)}),a.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}l.Ay.directive("bsTooltip",["$parse","$compile",function(t,e){return{restrict:"A",scope:!0,link:function(n,i,s){let a=t(s.bsTooltip),c=a(n);n.$watch(s.bsTooltip,function(f,x){f!==x&&(c=f)}),i.on("show",function(f){O()(".tooltip.in").each(function(){const x=O()(this),p=x.data("tooltip");p&&!p.$element.is(i)&&x.tooltip("hide")})}),i.tooltip({title:function(){return y().isFunction(c)?c.apply(null,arguments):c},html:!0,container:"body"});const h=i.data("tooltip");h.show=function(){const f=O().fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),f},n._tooltip=function(f){i.tooltip(f)},n.hide=function(){i.tooltip("hide")},n.show=function(){i.tooltip("show")},n.dismiss=n.hide}}}]),l.Ay.directive("bsTypeahead",["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(r,n,i,s){let a=t(i.bsTypeahead),c=a(r);r.$watch(i.bsTypeahead,function(f,x){f!==x&&(c=f)}),n.attr("data-provide","typeahead"),n.typeahead({source:function(){return y().isFunction(c)?c.apply(null,arguments):c},minLength:i.minLength||1,items:i.item,updater:function(f){return s&&r.$apply(function(){s.$setViewValue(f)}),r.$emit("typeahead-updated",f),f}});const h=n.data("typeahead");h.lookup=function(){let f;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(f=(0,g.isFunction)(this.source)?this.source(this.query,O().proxy(this.process,this)):this.source,f?this.process(f):this)},i.matchAll&&(h.matcher=function(){return!0}),i.minLength==="0"&&setTimeout(function(){n.on("focus",function(){n.val().length===0&&setTimeout(n.typeahead.bind(n,"lookup"),200)})})}}}]);var Et=o(65879);function Xt(){return{restrict:"A",priority:1,require:"ngModel",link:(t,e,r,n)=>{r.type==="radio"||r.type==="checkbox"||(e.off("input keydown change"),e.bind("blur",()=>{t.$apply(()=>{n.$setViewValue(e.val())})}))}}}function Jt(){return{restrict:"A",require:"ngModel",link:(t,e,r,n)=>{n.$parsers.push(i=>i===""?null:i)}}}function Zt(){return{require:"ngModel",link:(t,e,r,n)=>{n.$validators.integer=(i,s)=>n.$isEmpty(i)||s.indexOf("$")===0||s.indexOf("+$")===0?!0:Et.describeTextRange(s).invalid!==!0}}}l.Ay.directive("ngModelOnblur",Xt),l.Ay.directive("emptyToNull",Jt),l.Ay.directive("validTimeSpan",Zt);var qt=o(69613),ns=o(42346);function bt(t,e){const{color:r,borderColor:n}=(0,qt.MC)(t);e.css("background-color",r),e.css("border-color",n)}function _t(){return{scope:{tagColorFromName:"="},link:(t,e)=>{bt(t.tagColorFromName,e)}}}function en(){function t(e,r){if(r)return y().isFunction(e.$parent[r])?e.$parent[r]:n=>n[r]}return{restrict:"EA",scope:{model:"=ngModel",onTagsUpdated:"&"},template:"<select multiple></select>",replace:!1,link:function(e,r,n){y().isArray(e.model)||(e.model=[]);const i=O()("select",r);n.placeholder&&i.attr("placeholder",n.placeholder),i.tagsinput({typeahead:{source:y().isFunction(e.$parent[n.typeaheadSource])?e.$parent[n.typeaheadSource]:null},widthClass:n.widthClass,itemValue:t(e,n.itemvalue),itemText:t(e,n.itemtext),tagClass:y().isFunction(e.$parent[n.tagclass])?e.$parent[n.tagclass]:()=>n.tagclass}),i.on("itemAdded",s=>{e.model.indexOf(s.item)===-1&&(e.model.push(s.item),e.onTagsUpdated&&e.onTagsUpdated());const a=i.next().children("span").filter(()=>O()(this).text()===s.item);bt(s.item,a)}),i.on("itemRemoved",s=>{const a=e.model.indexOf(s.item);a!==-1&&(e.model.splice(a,1),e.onTagsUpdated&&e.onTagsUpdated())}),e.$watch("model",()=>{y().isArray(e.model)||(e.model=[]),i.tagsinput("removeAll");for(let s=0;s<e.model.length;s++)i.tagsinput("add",e.model[s])},!0)}}}l.Ay.directive("tagColorFromName",_t),l.Ay.directive("bootstrapTagsinput",en);function tn(t){let e=t[0];const r=t[t.length-1];let n;e=e.nextSibling;for(let i=1;e!==r&&e;i++)(n||t[i]!==e)&&(n||(n=O()([].slice.call(t,0,i))),n.push(e)),e=e.nextSibling;return n||t}l.Ay.directive("rebuildOnChange",["$animate",nn]);function nn(t){return{multiElement:!0,terminal:!0,transclude:!0,priority:600,restrict:"E",link:(e,r,n,i,s)=>{let a,c,h;function f(){h&&(h.remove(),h=null),c&&(c.$destroy(),c=null),a&&(h=tn(a.clone),t.leave(h).then(()=>{h=null}),a=null)}e.$watch(n.property,function(p,A){c&&p!==A&&f(),!c&&(p||n.showNull)?s((T,F)=>{c=F,T[T.length++]=document.createComment(" end rebuild on change "),a={clone:T},t.enter(T,r.parent(),r)}):f()})}}}l.Ay.directive("giveFocus",()=>(t,e,r)=>{e.click(n=>{n.stopPropagation()}),t.$watch(r.giveFocus,n=>{n&&setTimeout(()=>{e.focus();const i=e[0];if(i.setSelectionRange){const s=e.val().length*2;i.setSelectionRange(s,s)}},200)},!0)});const rs={};class rn{constructor(){const e=()=>{};this.observer=new MutationObserver(e);const r={attributes:!0,attributeFilter:["class"],characterData:!1,childList:!0,subtree:!1};this.observer.observe(y().element(".delta-html")[0],r)}$onDestroy(){this.observer.disconnect()}}function sn(){return{controller:rn,replace:!1,restrict:"A"}}l.Ay.directive("diffDelta",sn);class on{constructor(e,r,n){this.$scope=e,this.$rootScope=r,this.$anchorScroll=n}static{this.$inject=["$scope","$rootScope","$anchorScroll"]}goToLine(e){let r;const n=()=>{this.$anchorScroll(`l${e}`),r()};this.$scope.switchView().then(()=>{r=this.$rootScope.$on("json-diff-ready",n.bind(this))})}}function an(){return{controller:on,controllerAs:"ctrl",replace:!0,restrict:"E",scope:{line:"@lineDisplay",link:"@lineLink",switchView:"&"},template:'<a class="diff-linenum btn btn-inverse btn-small" ng-click="ctrl.goToLine(link)">Line {{ line }}</a>'}}l.Ay.directive("diffLinkJson",an);function ln(){"use strict";return{restrict:"A",require:"ngModel",link:(t,e,r,n)=>{function i(a){return(a||"").split(",")}function s(a){return(0,g.isArray)(a)?(a||"").join(","):a}n.$parsers.push(i),n.$formatters.push(s)}}}l.Ay.directive("arrayJoin",ln);var cn=o(55458),Je=o(14578),un=o(62930),dn=o(83598),pn=o(70104),hn=o(2056),fn=o(33083),mn=o(64919),gn=o(91409),vn=o(10534),yn=o(32264),En=o(96378);function Ie(t,e,r){l.Ay.directive(t,["reactDirective",n=>n((0,En.e)(e,yn.$.theme2),r)])}var bn=o(85242),Tn=o(75590),m=o(74848),xn=o(32017),Cn=o.n(xn),ut=o(50877),An=o(43127),Tt=o(71087),Sn=o(96374);const Ze={components:{queryEditor:{container:"data-testid cloud-monitoring-query-editor",header:{select:"data-testid cloud-monitoring-header"},visualMetricsQueryEditor:{container:{input:"data-testid cloud-monitoring-visual-metrics-query-editor"}},mqlMetricsQueryEditor:{container:{input:"data-testid cloud-monitoring-mql-query-editor"}},sloQueryEditor:{container:{input:"data-testid cloud-monitoring-slo-query-editor"}},promQlQueryEditor:{container:{input:"data-testid cloud-monitoring-prom-ql-query-editor"}}}}};var Ae=(t=>(t.ANNOTATION="annotation",t.PROMQL="promQL",t.SLO="slo",t.TIME_SERIES_LIST="timeSeriesList",t.TIME_SERIES_QUERY="timeSeriesQuery",t))(Ae||{});const ss={filters:[],groupBys:[],secondaryGroupBys:[]};var Ve=(t=>(t.Delta="delta",t.None="none",t.Rate="rate",t))(Ve||{});const os={filters:[],groupBys:[]};var R=(t=>(t.CUMULATIVE="CUMULATIVE",t.DELTA="DELTA",t.GAUGE="GAUGE",t.METRIC_KIND_UNSPECIFIED="METRIC_KIND_UNSPECIFIED",t))(R||{}),E=(t=>(t.BOOL="BOOL",t.DISTRIBUTION="DISTRIBUTION",t.DOUBLE="DOUBLE",t.INT64="INT64",t.MONEY="MONEY",t.STRING="STRING",t.VALUE_TYPE_UNSPECIFIED="VALUE_TYPE_UNSPECIFIED",t))(E||{}),qe=(t=>(t.ALIGN_COUNT="ALIGN_COUNT",t.ALIGN_COUNT_FALSE="ALIGN_COUNT_FALSE",t.ALIGN_COUNT_TRUE="ALIGN_COUNT_TRUE",t.ALIGN_DELTA="ALIGN_DELTA",t.ALIGN_FRACTION_TRUE="ALIGN_FRACTION_TRUE",t.ALIGN_INTERPOLATE="ALIGN_INTERPOLATE",t.ALIGN_MAX="ALIGN_MAX",t.ALIGN_MEAN="ALIGN_MEAN",t.ALIGN_MIN="ALIGN_MIN",t.ALIGN_NEXT_OLDER="ALIGN_NEXT_OLDER",t.ALIGN_NONE="ALIGN_NONE",t.ALIGN_PERCENTILE_05="ALIGN_PERCENTILE_05",t.ALIGN_PERCENTILE_50="ALIGN_PERCENTILE_50",t.ALIGN_PERCENTILE_95="ALIGN_PERCENTILE_95",t.ALIGN_PERCENTILE_99="ALIGN_PERCENTILE_99",t.ALIGN_PERCENT_CHANGE="ALIGN_PERCENT_CHANGE",t.ALIGN_RATE="ALIGN_RATE",t.ALIGN_STDDEV="ALIGN_STDDEV",t.ALIGN_SUM="ALIGN_SUM",t))(qe||{});const as={filters:[]};var In=(t=>(t.Aggregations="aggregations",t.Aligners="aligners",t.AlignmentPeriods="alignmentPeriods",t.DefaultProject="defaultProject",t.LabelKeys="labelKeys",t.LabelValues="labelValues",t.MetricTypes="metricTypes",t.Projects="projects",t.ResourceTypes="resourceTypes",t.SLO="slo",t.SLOServices="sloServices",t.Selectors="selectors",t.Services="services",t))(In||{}),Ln=o(46819),Le=o(81580),xt=o(10354);const dt=({refId:t,value:e="",onChange:r})=>{const[n,i]=(0,G.useState)(e??""),s=(0,g.debounce)(r,1e3),a=c=>{i(c.currentTarget.value),s(c.currentTarget.value)};return(0,m.jsx)(Le.c,{label:"Alias by",children:(0,m.jsx)(xt.p,{id:`${t}-alias-by`,value:n,onChange:a})})};var Qe=o(9e4),Ct=o(66864),Nn=o(15292);const ls=71,cs=19,us=14,ds=28,At=[{text:"none",value:"ALIGN_NONE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.STRING,E.VALUE_TYPE_UNSPECIFIED,E.BOOL],metricKinds:[R.GAUGE]},{text:"delta",value:"ALIGN_DELTA",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.CUMULATIVE,R.DELTA]},{text:"rate",value:"ALIGN_RATE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.CUMULATIVE,R.DELTA]},{text:"interpolate",value:"ALIGN_INTERPOLATE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE]},{text:"next older",value:"ALIGN_NEXT_OLDER",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.STRING,E.VALUE_TYPE_UNSPECIFIED,E.BOOL],metricKinds:[R.GAUGE]},{text:"min",value:"ALIGN_MIN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"max",value:"ALIGN_MAX",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"mean",value:"ALIGN_MEAN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"count",value:"ALIGN_COUNT",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.BOOL],metricKinds:[R.GAUGE,R.DELTA]},{text:"sum",value:"ALIGN_SUM",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"stddev",value:"ALIGN_STDDEV",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]},{text:"count true",value:"ALIGN_COUNT_TRUE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE]},{text:"count false",value:"ALIGN_COUNT_FALSE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE]},{text:"fraction true",value:"ALIGN_FRACTION_TRUE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE]},{text:"percentile 99",value:"ALIGN_PERCENTILE_99",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percentile 95",value:"ALIGN_PERCENTILE_95",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percentile 50",value:"ALIGN_PERCENTILE_50",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percentile 05",value:"ALIGN_PERCENTILE_05",valueTypes:[E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA]},{text:"percent change",value:"ALIGN_PERCENT_CHANGE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA]}],Dn=[{text:"none",value:"REDUCE_NONE",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.BOOL,E.STRING],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"mean",value:"REDUCE_MEAN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"min",value:"REDUCE_MIN",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"max",value:"REDUCE_MAX",valueTypes:[E.INT64,E.DOUBLE,E.MONEY],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"sum",value:"REDUCE_SUM",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"std. dev.",value:"REDUCE_STDDEV",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE,R.METRIC_KIND_UNSPECIFIED]},{text:"count",value:"REDUCE_COUNT",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION,E.BOOL,E.STRING],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"count true",value:"REDUCE_COUNT_TRUE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE,R.DELTA]},{text:"count false",value:"REDUCE_COUNT_FALSE",valueTypes:[E.BOOL],metricKinds:[R.GAUGE,R.DELTA]},{text:"99th percentile",value:"REDUCE_PERCENTILE_99",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"95th percentile",value:"REDUCE_PERCENTILE_95",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"50th percentile",value:"REDUCE_PERCENTILE_50",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]},{text:"5th percentile",value:"REDUCE_PERCENTILE_05",valueTypes:[E.INT64,E.DOUBLE,E.MONEY,E.DISTRIBUTION],metricKinds:[R.GAUGE,R.DELTA,R.CUMULATIVE]}],St=[{text:"grafana auto",value:"grafana-auto"},{text:"stackdriver auto",value:"stackdriver-auto",hidden:!0},{text:"cloud monitoring auto",value:"cloud-monitoring-auto"},{text:"1m",value:"+60s"},{text:"2m",value:"+120s"},{text:"5m",value:"+300s"},{text:"10m",value:"+600s"},{text:"30m",value:"+1800s"},{text:"1h",value:"+3600s"},{text:"3h",value:"+7200s"},{text:"6h",value:"+21600s"},{text:"1d",value:"+86400s"},{text:"3d",value:"+259200s"},{text:"1w",value:"+604800s"}],wn=[{text:"auto",value:"auto"},{text:"1m",value:"1m"},{text:"2m",value:"2m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"30m",value:"30m"},{text:"1h",value:"1h"},{text:"3h",value:"3h"},{text:"6h",value:"6h"},{text:"1d",value:"1d"},{text:"3d",value:"3d"},{text:"1w",value:"1w"}],On=[{text:"1m",value:"1m"},{text:"2m",value:"2m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"30m",value:"30m"},{text:"1h",value:"1h"},{text:"3h",value:"3h"},{text:"6h",value:"6h"},{text:"24h",value:"24h"},{text:"72h",value:"72h"}],Mn=["metadata.system_labels.cloud_account","metadata.system_labels.name","metadata.system_labels.region","metadata.system_labels.state","metadata.system_labels.instance_group","metadata.system_labels.node_name","metadata.system_labels.service_name","metadata.system_labels.top_level_controller_type","metadata.system_labels.top_level_controller_name","metadata.system_labels.container_image"],It="select_slo_burn_rate",Lt=[{label:"SLI Value",value:"select_slo_health"},{label:"SLO Compliance",value:"select_slo_compliance"},{label:"SLO Error Budget Remaining",value:"select_slo_budget_fraction"},{label:"SLO Burn Rate",value:It}],Pn=[{label:"Builder",value:Ae.TIME_SERIES_LIST},{label:"MQL",value:Ae.TIME_SERIES_QUERY},{label:"Service Level Objectives (SLO)",value:Ae.SLO},{label:"PromQL",value:Ae.PROMQL}];var Oe=o(90182);function it({refId:t,projectName:e,datasource:r,onChange:n,templateVariableOptions:i}){const[s,a]=(0,G.useState)([]);(0,G.useEffect)(()=>{r.getProjects().then(h=>a(h))},[r]);const c=(0,G.useMemo)(()=>[{label:"Template Variables",options:i},...s],[s,i]);return(0,m.jsx)(Le.c,{label:"Project",children:(0,m.jsx)(Oe.l6,{width:"auto",allowCustomValue:!0,formatCreateLabel:h=>`Use project: ${h}`,onChange:({value:h})=>n(h),options:c,value:{value:e,label:e},placeholder:"Select Project",inputId:`${t}-project`})})}var st=o(97801),Nt=o(72574);const ps=t=>uniqBy(t,"service"),Un=(t,e)=>t.filter(r=>r.service===e),hs=(t,e,r,n)=>{const i=Un(t,n).map(h=>({value:h.type,name:h.displayName})),s=i.some(h=>h.value===r),a=i.length?i[0].value:"";return{metricTypes:i,selectedMetricType:s?e:a}},$n=(t,e,r)=>(r&&r===Ve.Rate&&(e=R.GAUGE),t?At.filter(n=>n.valueTypes.indexOf(t)!==-1&&n.metricKinds.indexOf(e)!==-1):[]),Rn=(t,e)=>e?Dn.filter(r=>r.valueTypes.indexOf(t)!==-1&&r.metricKinds.indexOf(e)!==-1):[],fs=async(t,e,r)=>{const i=await t.getLabels(e,"handleLabelKeysQuery",r);return[...Object.keys(i),...SYSTEM_LABELS]},pt=(t=E.DOUBLE,e=R.GAUGE,r=qe.ALIGN_MEAN,n)=>{const i=(0,Nt.w)(),s=$n(t,e,n).map(a=>({...a,label:a.text}));return s.some(a=>a.value===i.replace(r))||(r=s.length>0?s[0].value:qe.ALIGN_MEAN),{alignOptions:s,perSeriesAligner:r}},Dt=t=>{const e=t.reduce((r,n)=>{const i=n.split(".").map(g.startCase),s=(i.length===2?i:(0,g.initial)(i)).join(" "),a={value:n,label:n};return r[s]?r[s]=[...r[s],a]:r[s]=[a],r},{});return Object.entries(e).map(([r,n])=>({label:r,options:n,expanded:!0}),[])},jn=t=>(0,g.chunk)(t,4).map(([e,r,n,i="AND"])=>({key:e,operator:r,value:n,condition:i})),wt=(t,e)=>{const{perSeriesAligner:r,alignmentPeriod:n}=t;if(!n||!r)return"";const i=At.find(c=>c.value===e.templateSrv.replace(r)),s=parseInt(n,10);return`${Et.secondsToHms(s)} interval (${i?.text??""})`},kn=t=>{const e=t?.filters?.findIndex(n=>n==="metric.type");return t?.filters?.[e+2]||""},Bn=(t,e)=>{if(!t.filters)return t.filters=["metric.type","=",e],t;const r=t?.filters?.findIndex(n=>n==="metric.type");return r===-1?t.filters.push("metric.type","=",e):t.filters[r+2]=e,t},Gn=t=>{const e=Fn(t),r=Vn(e,t);return(0,m.jsx)(Le.c,{label:"Group by function","data-testid":"cloud-monitoring-aggregation",children:(0,m.jsx)(Oe.l6,{width:"auto",onChange:({value:n})=>t.onChange(n),value:r,options:[{label:"Template Variables",options:t.templateVariableOptions},{label:"Aggregations",expanded:!0,options:e}],placeholder:"Select Reducer",inputId:`${t.refId}-group-by-function`,menuPlacement:"top"})})},Fn=({metricDescriptor:t})=>{const e=t?.valueType,r=t?.metricKind;return(0,G.useMemo)(()=>!e||!r?[]:Rn(e,r).map(n=>({...n,label:n.text})),[e,r])},Vn=(t,e)=>(0,G.useMemo)(()=>[...t,...e.templateVariableOptions].find(n=>n.value===e.crossSeriesReducer),[t,e.crossSeriesReducer,e.templateVariableOptions]),zn=({refId:t,labels:e=[],query:r,onChange:n,variableOptionGroup:i,metricDescriptor:s})=>{const a=(0,G.useMemo)(()=>[i,...Dt([...e,...Mn])],[e,i]);return(0,m.jsxs)(st.B,{children:[(0,m.jsx)(Le.c,{label:"Group by",tooltip:"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series.",children:(0,m.jsx)(Oe.KF,{allowCustomValue:!0,inputId:`${t}-group-by`,width:"auto",placeholder:"Choose label",options:a,value:r.groupBys??[],onChange:c=>{n({...r,groupBys:c.map(h=>h.value)})},menuPlacement:"top"})}),(0,m.jsx)(Gn,{metricDescriptor:s,templateVariableOptions:i.options,crossSeriesReducer:r.crossSeriesReducer,groupBys:r.groupBys??[],onChange:c=>n({...r,crossSeriesReducer:c}),refId:t})]})},Kn=({inputId:t,query:e,templateVariableOptions:r,onChange:n,metricDescriptor:i,preprocessor:s})=>{const{perSeriesAligner:a}=e;let{valueType:c,metricKind:h}=i||{};const{perSeriesAligner:f,alignOptions:x}=(0,G.useMemo)(()=>pt(c,h,a,s),[c,h,a,s]);return(0,m.jsx)(Oe.l6,{onChange:({value:p})=>n({...e,perSeriesAligner:p}),value:[...x,...r].find(p=>p.value===f),options:[{label:"Template Variables",options:r},{label:"Alignment options",expanded:!0,options:x}],placeholder:"Select Alignment",inputId:t,menuPlacement:"top"})};function ht({inputId:t,templateVariableOptions:e,onChange:r,current:n,disabled:i,aligmentPeriods:s}){const a=(0,G.useMemo)(()=>s.map(h=>({...h,label:h.text})),[s]),c=(0,G.useMemo)(()=>a.filter(h=>!h.hidden),[a]);return(0,m.jsx)(Oe.l6,{width:"auto",onChange:({value:h})=>r(h),value:[...a,...e].find(h=>h.value===n),options:[{label:"Template Variables",options:e},{label:"Aggregations",expanded:!0,options:c}],placeholder:"Select Period",inputId:t,disabled:i,allowCustomValue:!0,menuPlacement:"top"})}const Wn=({refId:t,templateVariableOptions:e,onChange:r,query:n,customMetaData:i,datasource:s,metricDescriptor:a,preprocessor:c})=>{const h=(0,G.useMemo)(()=>wt(i,s),[i,s]);return(0,m.jsxs)(st.B,{children:[(0,m.jsx)(Le.c,{label:"Alignment function",tooltip:"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result.",children:(0,m.jsx)(Kn,{inputId:`${t}-alignment-function`,templateVariableOptions:e,query:n,onChange:f=>r({...n,...f}),metricDescriptor:a,preprocessor:c})}),(0,m.jsx)(Le.c,{label:"Alignment period",tooltip:h,children:(0,m.jsx)(ht,{inputId:`${t}-alignment-period`,templateVariableOptions:e,current:n.alignmentPeriod,onChange:f=>r({...n,alignmentPeriod:f}),aligmentPeriods:St})})]})};var Hn=o(3721),Qn=o(85269);const ft="=",Ot="AND",Yn=t=>t.flatMap(({key:e,operator:r,value:n,condition:i})=>[e,r,n,i]).slice(0,-1),Xn=["=","!=","=~","!=~"].map(ut.z),Mt=["metric.type"],Jn=({labels:t={},filters:e,onChange:r,variableOptionGroup:n})=>{const i=jn(e),s=i.filter(({key:p})=>!Mt.includes(p)),a=i.filter(({key:p})=>Mt.includes(p)),c=(0,G.useMemo)(()=>[n,...Dt(Object.keys(t))],[t,n]),h=({key:p="",value:A=""})=>{c.some(D=>D.options?c.some(X=>X.label===p):D.label===p)||c.push({label:p,value:p});const F=t.hasOwnProperty(p)?[n,...t[p].map(ut.z)]:[n];return F.some(D=>D.label===A)||F.push({label:A,value:A}),{options:c,valueOptions:F}},f=p=>{const A=p.concat(a).map(({key:T,operator:F,value:he,condition:D})=>({key:T||"",operator:F||ft,value:he||"",condition:D||Ot}));r(Yn(A))},x=(p,A,T)=>{const{key:F="",operator:he=ft,value:D="",condition:X=Ot}=p,{options:Z,valueOptions:te}=h(p);return(0,m.jsxs)(Ct.Gy,{spacing:"xs",width:"auto",children:[(0,m.jsx)(Oe.l6,{"aria-label":"Filter label key",formatCreateLabel:ue=>`Use label key: ${ue}`,allowCustomValue:!0,value:F,options:Z,onChange:({value:ue=""})=>A({key:ue,operator:he,value:D,condition:X})}),(0,m.jsx)(Oe.l6,{value:he,options:Xn,onChange:({value:ue=ft})=>A({key:F,operator:ue,value:D,condition:X})}),(0,m.jsx)(Oe.l6,{"aria-label":"Filter label value",placeholder:"add filter value",formatCreateLabel:ue=>`Use label value: ${ue}`,allowCustomValue:!0,value:D,options:te,onChange:({value:ue=""})=>A({key:F,operator:he,value:ue,condition:X})}),(0,m.jsx)(Hn.Z,{"aria-label":"Remove",icon:"times",variant:"secondary",onClick:T,type:"button"})]})};return(0,m.jsx)(Qe.U,{children:(0,m.jsx)(Le.c,{label:"Filter",tooltip:"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression.",children:(0,m.jsx)(Qn.o,{items:s,renderItem:x,onChange:f})})})},ms=()=>jsx(Alert,{severity:"info",title:"Annotation Query Format",children:jsxs("div",{children:[jsxs("p",{children:["An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned."," "]}),jsx("p",{children:"The Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:"}),jsxs("code",{children:["{{metric.type}}"," has value: ","{{metric.value}}"]}),jsxs("p",{children:["Example Result: ",jsx("code",{children:"monitoring.googleapis.com/uptime_check/http_status has this value: 502"})]}),jsx("span",{children:"Patterns:"}),jsxs("p",{children:[jsx("code",{children:"{{metric.value}}"})," = value of the metric/point"]}),jsxs("p",{children:[jsx("code",{children:"{{metric.type}}"})," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"]}),jsxs("p",{children:[jsx("code",{children:"{{metric.name}}"})," = name part of metric e.g. instance/cpu/usage_time"]}),jsxs("p",{children:[jsx("code",{children:"{{metric.service}}"})," = service part of metric e.g. compute"]}),jsxs("p",{children:[jsx("code",{children:"{{metric.label.label_name}}"})," = Metric label metadata e.g. metric.label.instance_name"]}),jsxs("p",{children:[jsx("code",{children:"{{resource.label.label_name}}"})," = Resource label metadata e.g. resource.label.zone"]})]})}),Zn=({refId:t,current:e,templateVariableOptions:r,onChange:n})=>{const i=On.map(a=>({...a,label:a.text}));e&&!i.find(a=>a.value===e)&&i.push({label:e,text:e,value:e,hidden:!1});const s=i.filter(a=>!a.hidden);return(0,m.jsx)(Le.c,{label:"Lookback period",htmlFor:`${t}-lookback-period`,children:(0,m.jsx)(Oe.l6,{inputId:`${t}-lookback-period`,width:"auto",allowCustomValue:!0,value:[...i,...r].find(a=>a.value===e),options:[{label:"Template Variables",options:r},{label:"Predefined periods",expanded:!0,options:s}],onChange:({value:a})=>n(a)})})},qn=({refId:t,query:e,templateVariableOptions:r,onChange:n,datasource:i})=>{const[s,a]=(0,G.useState)([]),{projectName:c,serviceId:h}=e;return(0,G.useEffect)(()=>{!c||!h||i.getServiceLevelObjectives(c,h).then(f=>{a([{label:"Template Variables",options:r},...f])})},[i,c,h,r]),(0,m.jsx)(Le.c,{label:"SLO",children:(0,m.jsx)(Oe.l6,{inputId:`${t}-slo`,width:"auto",allowCustomValue:!0,value:e?.sloId&&{value:e?.sloId,label:e?.sloName||e?.sloId},placeholder:"Select SLO",options:s,onChange:async({value:f="",label:x=""})=>{const A=(await i.getServiceLevelObjectives(c,h)).find(({value:T})=>T===i.templateSrv.replace(f));n({...e,sloId:f,sloName:x,goal:A?.goal})}})})},_n=({refId:t,query:e,templateVariableOptions:r,onChange:n,datasource:i})=>(0,m.jsx)(Le.c,{label:"Selector",htmlFor:`${t}-slo-selector`,children:(0,m.jsx)(Oe.l6,{inputId:`${t}-slo-selector`,width:"auto",allowCustomValue:!0,value:[...Lt,...r].find(s=>s.value===e?.selectorName),options:[{label:"Template Variables",options:r},...Lt],onChange:({value:s})=>n({...e,selectorName:s??""})})}),er=({refId:t,query:e,templateVariableOptions:r,onChange:n,datasource:i})=>{const[s,a]=(0,G.useState)([]),{projectName:c}=e;return(0,G.useEffect)(()=>{c&&i.getSLOServices(c).then(h=>{a([{label:"Template Variables",options:r},...h])})},[i,c,r]),(0,m.jsx)(Le.c,{label:"Service",children:(0,m.jsx)(Oe.l6,{inputId:`${t}-slo-service`,width:"auto",allowCustomValue:!0,value:e?.serviceId&&{value:e?.serviceId,label:e?.serviceName||e?.serviceId},placeholder:"Select service",options:s,onChange:({value:h="",label:f=""})=>n({...e,serviceId:h,serviceName:f,sloId:""})})})},tr=t=>({projectName:t.getDefaultProject(),alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:qe.ALIGN_MEAN,aliasBy:"",selectorName:"select_slo_health",serviceId:"",serviceName:"",sloId:"",sloName:"",lookbackPeriod:""});function nr({refId:t,query:e,datasource:r,onChange:n,variableOptionGroup:i,customMetaData:s,aliasBy:a,onChangeAliasBy:c}){const h=(0,G.useMemo)(()=>wt(s,r),[s,r]);return(0,m.jsx)("span",{"data-testid":Ze.components.queryEditor.sloQueryEditor.container.input,children:(0,m.jsxs)(Qe.U,{children:[(0,m.jsx)(it,{refId:t,templateVariableOptions:i.options,projectName:e.projectName,datasource:r,onChange:f=>n({...e,projectName:f})}),(0,m.jsx)(er,{refId:t,datasource:r,templateVariableOptions:i.options,query:e,onChange:n}),(0,m.jsx)(qn,{refId:t,datasource:r,templateVariableOptions:i.options,query:e,onChange:n}),(0,m.jsx)(_n,{refId:t,datasource:r,templateVariableOptions:i.options,query:e,onChange:n}),e.selectorName===It&&(0,m.jsx)(Zn,{refId:t,onChange:f=>n({...e,lookbackPeriod:f}),current:e.lookbackPeriod,templateVariableOptions:i.options}),(0,m.jsx)(st.B,{children:(0,m.jsx)(Le.c,{label:"Alignment period",tooltip:h,children:(0,m.jsx)(ht,{inputId:`${t}-alignment-period`,templateVariableOptions:i.options,current:e.alignmentPeriod,onChange:f=>n({...e,alignmentPeriod:f}),aligmentPeriods:St})})}),(0,m.jsx)(dt,{refId:t,value:a,onChange:c})]})})}var Pt=o(21744);function rr({query:t,onChange:e,onRunQuery:r}){const n=i=>{i.key==="Enter"&&(i.shiftKey||i.ctrlKey)&&(i.preventDefault(),r())};return(0,m.jsx)("span",{"data-testid":Ze.components.queryEditor.mqlMetricsQueryEditor.container.input,children:(0,m.jsx)(Pt.f,{name:"Query",className:"slate-query-field",value:t,rows:10,placeholder:"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)",onBlur:r,onChange:i=>e(i.currentTarget.value),onKeyDown:n})})}const gs=({label:t,onChange:e,value:r,options:n,allowCustomValue:i=!1})=>jsx(Field,{label:t,children:jsx(Select,{width:25,allowCustomValue:i,value:r,onChange:({value:s})=>e(s),options:n})});var Be=o(32196),ir=o(76459),sr=o.n(ir),or=o(14110),ot=o(40845),ar=o(88824),lr=o(94354);const Ut={label:"None",value:Ve.None},cr=({query:t,metricDescriptor:e,onChange:r})=>{const n=ur(e);return(0,m.jsx)(Le.c,{label:"Pre-processing",tooltip:"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metric's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series",children:(0,m.jsx)(lr.z,{onChange:i=>{const{perSeriesAligner:s}=t,{valueType:a,metricKind:c}=e??{},{perSeriesAligner:h}=pt(a,c,s,i);r({...t,preprocessor:i,perSeriesAligner:h})},value:t.preprocessor??Ve.None,options:n})})},ur=t=>{const e=t?.metricKind,r=t?.valueType;return(0,G.useMemo)(()=>{if(!e||e===R.GAUGE||r===E.DISTRIBUTION)return[Ut];const n=[Ut,{label:"Rate",value:Ve.Rate,description:"Data points are aligned and converted to a rate per time series"}];return e===R.CUMULATIVE?[...n,{label:"Delta",value:Ve.Delta,description:"Data points are aligned by their delta (difference) per time series"}]:n},[e,r])};function dr({refId:t,onChange:e,datasource:r,query:n,variableOptionGroup:i,customMetaData:s,aliasBy:a,onChangeAliasBy:c,range:h}){const[f,x]=(0,G.useState)({}),[p,A]=(0,G.useState)([]),[T,F]=(0,G.useState)(),[he,D]=(0,G.useState)([]),[X,Z]=(0,G.useState)([]),[te,ue]=(0,G.useState)(""),[Ee,me]=(0,G.useState)({...h});(ye=>{Ee!==null&&(Ee.raw.from.toString()!==ye.raw.from.toString()||Ee.raw.to.toString()!==ye.raw.to.toString())&&me({...ye})})(h);const Ke=(0,ot.$j)(),Me=(0,ar.J)(Ke),je=(0,ot.of)(pr),{projectName:ke,groupBys:zt,crossSeriesReducer:Kt}=n,ze=kn(n),{templateSrv:at}=r,lt=(0,G.useCallback)((ye,Ce)=>ye.find(Te=>Te.type===at.replace(Ce)),[at]);(0,G.useEffect)(()=>{ke&&ze&&r.getLabels(ze,t,ke,{groupBys:zt,crossSeriesReducer:Kt},Ee).then(ye=>x(ye))},[r,zt,ze,ke,t,Kt,Ee]),(0,G.useEffect)(()=>{(async()=>{if(ke){const Ce=await r.getMetricTypes(ke);(0,or.rR)("cloud-monitoring-metric-descriptors-loaded",{count:Ce.length});const Te=_i(Ce);A(Ce),Z(Te)}})()},[r,ke,je,Me.optionDescription]),(0,G.useEffect)(()=>{const Ce=(Xe=>{const ct=lt(Xe,ze);return ct?Xe.filter(We=>We.service===ct.service).map(We=>({service:We.service,value:We.type,label:We.displayName,component:function(){return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:je,children:We.type}),(0,m.jsx)("div",{className:Me.optionDescription,children:We.description})]})}})):[]})(p),Te=Ce.length>0?Ce[0].service:"",Ue=lt(p,ze);F(Ue),D(Ce),ue(Te)},[p,lt,ze,je,Me.optionDescription]);const qi=({value:ye})=>{const Ce=p.filter(Te=>Te.service===at.replace(ye)).map(Te=>({service:Te.service,value:Te.type,label:Te.displayName,description:Te.description}));n.filters=[],Ce.length>0&&!Ce.some(Te=>Te.value===at.replace(ze))?(Wt(Ce[0]),ue(ye),D(Ce)):(ue(ye),D(Ce))},_i=ye=>{const Ce=ye.map(Te=>({value:Te.service,label:(0,g.startCase)(Te.serviceShortName)}));return Ce.length>0?(0,g.uniqBy)(Ce,Te=>Te.value):[]},es=async ye=>{const Te=(await r.filterMetricsByType(ke,te)).filter(Ue=>Ue.type.includes(ye.toLowerCase())).map(Ue=>({value:Ue.type,label:Ue.displayName,component:function(){return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:je,children:Ue.type}),(0,m.jsx)("div",{className:Me.optionDescription,children:Ue.description})]})}}));return[{label:"Template Variables",options:i.options},...Te]},ts=sr()(es,400),Wt=({value:ye})=>{const Ce=lt(p,ye);F(Ce);const{metricKind:Te,valueType:Ue}=Ce,Xe=Te===R.GAUGE||Ue===E.DISTRIBUTION?Ve.None:Ve.Rate,{perSeriesAligner:ct}=pt(Ue,Te,n.perSeriesAligner,Xe);Object.assign(n,{...mt(r),projectName:n.projectName,filters:n.filters}),e({...Bn({...n,perSeriesAligner:ct},ye),preprocessor:Xe})};return(0,m.jsxs)("span",{"data-testid":Ze.components.queryEditor.visualMetricsQueryEditor.container.input,children:[(0,m.jsx)(Qe.U,{children:(0,m.jsxs)(st.B,{children:[(0,m.jsx)(it,{refId:t,templateVariableOptions:i.options,projectName:ke,datasource:r,onChange:ye=>{e({...n,projectName:ye})}}),(0,m.jsx)(Le.c,{label:"Service",width:"auto",children:(0,m.jsx)(Oe.l6,{width:"auto",onChange:qi,isLoading:X.length===0,value:[...X,...i.options].find(ye=>ye.value===te),options:[{label:"Template Variables",options:i.options},...X],placeholder:"Select Services",inputId:`${t}-service`})}),(0,m.jsx)(Le.c,{label:"Metric name",width:"auto",htmlFor:`${t}-select-metric`,children:(0,m.jsx)("span",{title:te===""?"Select a service first":"Type to search metrics",children:(0,m.jsx)(Oe.DW,{width:"auto",onChange:Wt,value:[...he,...i.options].find(ye=>ye.value===ze),loadOptions:ts,defaultOptions:[{label:"Template Variables",options:i.options},...he.slice(0,100)],placeholder:"Select Metric",inputId:`${t}-select-metric`,disabled:te===""})})})]})}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Jn,{labels:f,filters:n.filters,onChange:ye=>e({...n,filters:ye}),variableOptionGroup:i}),(0,m.jsxs)(Qe.U,{children:[(0,m.jsx)(cr,{metricDescriptor:T,query:n,onChange:e}),(0,m.jsx)(zn,{refId:t,labels:Object.keys(f),query:n,onChange:e,variableOptionGroup:i,metricDescriptor:T}),(0,m.jsx)(Wn,{refId:t,datasource:r,templateVariableOptions:i.options,query:n,customMetaData:s,onChange:e,metricDescriptor:T,preprocessor:n.preprocessor}),(0,m.jsx)(dt,{refId:t,value:a,onChange:c})]})]})]})}const pr=t=>(0,Be.css)`
  label: grafana-select-option-description;
  font-weight: normal;
  font-style: italic;
  color: ${t.colors.text.secondary};
`,hr=G.memo(dr),fr=({refId:t,onChange:e,graphPeriod:r,variableOptionGroup:n})=>(0,m.jsx)(Qe.U,{children:(0,m.jsx)(Le.c,{label:"Graph period",htmlFor:`${t}-graph-period`,tooltip:(0,m.jsxs)(m.Fragment,{children:["Set ",(0,m.jsx)("code",{children:"graph_period"})," which forces a preferred period between points. Automatically set to the current interval if left blank."]}),children:(0,m.jsxs)(Ct.Gy,{children:[(0,m.jsx)(Nn.d,{"data-testid":`${t}-switch-graph-period`,value:r!=="disabled",onChange:i=>e(i.currentTarget.checked?"":"disabled")}),(0,m.jsx)(ht,{inputId:`${t}-graph-period`,templateVariableOptions:n.options,current:r,onChange:e,disabled:r==="disabled",aligmentPeriods:wn})]})})}),mt=t=>({projectName:t.getDefaultProject(),crossSeriesReducer:"REDUCE_NONE",alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:qe.ALIGN_MEAN,groupBys:[],filters:[]}),$t=t=>({projectName:t.getDefaultProject(),query:""});function mr({refId:t,query:e,datasource:r,onChange:n,onRunQuery:i,customMetaData:s,variableOptionGroup:a,range:c}){const h=(0,G.useCallback)(x=>{let p=!0;if(x?.filters&&x.filters.length>0){for(const A of x.filters)if(A===""){p=!1;break}}n({...e,timeSeriesList:x}),p&&i()},[n,i,e]),f=(0,G.useCallback)(x=>{n({...e,timeSeriesQuery:x}),i()},[n,i,e]);return(0,G.useEffect)(()=>{e.queryType===Ae.TIME_SERIES_LIST&&!e.timeSeriesList&&n({refId:e.refId,datasource:e.datasource,queryType:Ae.TIME_SERIES_LIST,timeSeriesList:mt(r),aliasBy:e.aliasBy}),e.queryType===Ae.TIME_SERIES_QUERY&&!e.timeSeriesQuery&&n({refId:e.refId,datasource:e.datasource,queryType:Ae.TIME_SERIES_QUERY,timeSeriesQuery:$t(r),aliasBy:e.aliasBy})},[n,e,r]),(0,m.jsxs)(Tt.D,{children:[(e.queryType===Ae.ANNOTATION||e.queryType===Ae.TIME_SERIES_LIST)&&e.timeSeriesList&&(0,m.jsx)(hr,{refId:t,variableOptionGroup:a,customMetaData:s,onChange:h,datasource:r,query:e.timeSeriesList,aliasBy:e.aliasBy,onChangeAliasBy:x=>n({...e,aliasBy:x}),range:c}),e.queryType===Ae.TIME_SERIES_QUERY&&e.timeSeriesQuery&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Ln.B,{gap:1,direction:"row",children:[(0,m.jsx)(it,{refId:t,datasource:r,onChange:x=>f({...e.timeSeriesQuery,projectName:x}),templateVariableOptions:a.options,projectName:e.timeSeriesQuery.projectName}),(0,m.jsx)(dt,{refId:t,value:e.aliasBy,onChange:x=>n({...e,aliasBy:x})})]}),(0,m.jsx)(rr,{onChange:x=>f({...e.timeSeriesQuery,query:x}),onRunQuery:i,query:e.timeSeriesQuery.query}),(0,m.jsx)(fr,{onChange:x=>f({...e.timeSeriesQuery,graphPeriod:x}),graphPeriod:e.timeSeriesQuery.graphPeriod,refId:t,variableOptionGroup:a})]})]})}const gr=G.memo(mr),vs=t=>({projectName:t.getDefaultProject(),expr:"",step:"10s"});function vr({refId:t,query:e,datasource:r,onChange:n,variableOptionGroup:i,onRunQuery:s}){function a(c){c.key==="Enter"&&c.shiftKey&&(s(),c.preventDefault(),c.stopPropagation())}return(0,m.jsx)("span",{"data-testid":Ze.components.queryEditor.promQlQueryEditor.container.input,children:(0,m.jsxs)(Qe.U,{children:[(0,m.jsx)(it,{refId:t,templateVariableOptions:i.options,projectName:e.projectName,datasource:r,onChange:c=>n({...e,projectName:c})}),(0,m.jsx)(Pt.f,{name:"Query",className:"slate-query-field",value:e.expr,rows:10,placeholder:"Enter a Cloud Monitoring Prometheus query (Run with Shift+Enter)",onBlur:s,onKeyDown:a,onChange:c=>n({...e,expr:c.currentTarget.value})}),(0,m.jsx)(Le.c,{label:"Min step",tooltip:"Time units and built-in variables can be used here, for example: $__interval, $__rate_interval, 5s, 1m, 3h, 1d, 1y (Default if no unit is specified: 10s)",children:(0,m.jsx)(xt.p,{type:"string",placeholder:"auto",onChange:c=>n({...e,step:c.currentTarget.value}),onKeyDown:a,value:e.step??""})})]})})}var yr=o(6191),Er=o(22354),br=o(31347);const Tr=t=>{const{query:e,onChange:r,onRunQuery:n}=t,{queryType:i}=e;return(0,m.jsxs)(yr.X,{children:[(0,m.jsx)(Er.W,{label:"Query type",options:Pn,value:i,onChange:({value:s})=>{r({...e,queryType:s}),n()}}),(0,m.jsx)(br.Z,{grow:1})]})},xr=t=>{const{datasource:e,query:r,onRunQuery:n,onChange:i,range:s}=t,[a,c]=(0,G.useState)(!1);(0,G.useEffect)(()=>{const me=e.migrateQuery(r);Cn()(me,r)||i({...me})},[r,e,i]);const[h,f]=(0,G.useState)(r),[x,p]=(0,G.useState)(!1),A={...tr(e),...r.sloQuery},T=me=>{i({...r,sloQuery:me}),n()},F={projectName:e.getDefaultProject(),expr:"",step:"10s",...r.promQLQuery},he=me=>{i({...r,promQLQuery:me})},D=me=>{(me.queryType===Ae.TIME_SERIES_LIST&&!(0,g.isEqual)(me.timeSeriesList,mt(e))||me.queryType===Ae.TIME_SERIES_QUERY&&!(0,g.isEqual)(me.timeSeriesQuery,$t(e)))&&p(!0),i(me)},Z=(t.data?.series.length?t.data?.series[0].meta:{})?.custom??{},te={label:"Template Variables",expanded:!1,options:e.getVariables().map(ut.z)};(0,G.useEffect)(()=>{(!r.queryType||!Object.values(Ae).includes(r.queryType))&&i({...r,queryType:Ae.TIME_SERIES_LIST})});const ue=r.queryType,Ee=me=>{x&&(h.queryType===Ae.TIME_SERIES_LIST||h.queryType===Ae.TIME_SERIES_QUERY)?h.queryType!==me.queryType&&c(!0):i(me),f(me)};return(0,m.jsx)("span",{"data-testid":Ze.components.queryEditor.container,children:(0,m.jsxs)(Tt.D,{children:[(0,m.jsx)(Sn.u,{"data-testid":"switch-query-type-modal",title:"Warning",body:"By switching your query type, your current query will be lost.",isOpen:a,onConfirm:()=>{c(!1),i(h),p(!1)},confirmText:"Confirm",onDismiss:()=>{c(!1),f(r)}}),(0,m.jsx)(Tr,{query:r,onChange:Ee,onRunQuery:n}),ue===Ae.PROMQL&&(0,m.jsx)(vr,{refId:r.refId,variableOptionGroup:te,onChange:he,onRunQuery:n,datasource:e,query:F}),ue!==Ae.SLO&&(0,m.jsx)(gr,{refId:r.refId,variableOptionGroup:te,customMetaData:Z,onChange:D,onRunQuery:n,datasource:e,query:r,range:s||(0,An.E2)()}),ue===Ae.SLO&&(0,m.jsx)(nr,{refId:r.refId,variableOptionGroup:te,customMetaData:Z,onChange:T,onRunQuery:n,datasource:e,query:A,aliasBy:r.aliasBy,onChangeAliasBy:me=>i({...r,aliasBy:me})})]})})};var Cr=o(7521),Ar=o(38645);const Sr=t=>{const{value:e,placeholder:r,className:n,isSearchable:i,onChange:s}=t,a=Ir(t),c=Lr(a,e),h=(0,G.useCallback)(f=>s(f.value),[s]);return(0,m.jsx)(Oe.l6,{className:n,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:h,options:a,isSearchable:i,maxMenuHeight:500,placeholder:r,noOptionsMessage:"No options found",value:c})},Ir=({variables:t=[],options:e})=>(0,G.useMemo)(()=>!Array.isArray(t)||t.length===0?e:[{label:"Template Variables",options:t.map(({name:r})=>({label:`$${r}`,value:`$${r}`}))},...e],[t,e]),Lr=(t,e)=>(0,G.useMemo)(()=>(t.every(n=>n.options)?(0,g.flatten)(t.map(n=>n.options)):t).find(n=>n.value===e),[t,e]);var Nr=o(99818),Dr=o(93522),wr=o(63021),Or=o(40675),Rt=o(8887),Mr=o(13773),Pr=o(76323),jt=o(13544);const Ur=t=>{const[e,r]=(0,G.useState)(null),n=t.type==="submenu",i=(0,ot.of)(Rr),s=t.iconClassName?(0,Rt.Uo)(t.iconClassName):void 0;switch(t.type){case"divider":return(0,m.jsx)("li",{className:"divider"});case"group":return(0,m.jsx)("li",{children:(0,m.jsx)("span",{className:i.groupLabel,children:t.text})});default:return(0,m.jsxs)("li",{className:n?`dropdown-submenu ${$r(e)}`:void 0,ref:r,"data-testid":jt.Tp.components.Panels.Panel.menuItems(t.text),children:[(0,m.jsxs)("a",{onClick:t.onClick,href:t.href,role:"menuitem",children:[s&&(0,m.jsx)(Je.I,{name:s,className:i.menuIconClassName}),(0,m.jsxs)("span",{className:"dropdown-item-text","data-testid":jt.Tp.components.Panels.Panel.headerItems(t.text),children:[t.text,n&&(0,m.jsx)(Je.I,{name:"angle-right",className:i.shortcutIconClassName})]}),t.shortcut&&(0,m.jsxs)("span",{className:"dropdown-menu-item-shortcut",children:[(0,m.jsx)(Je.I,{name:"keyboard",className:i.menuIconClassName})," ",t.shortcut]})]}),t.children]})}};function $r(t){if(!t)return"invisible";const e=t.parentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return r.width===0?"invisible":e.right+r.width+10>window.innerWidth?"pull-left":"pull-right"}function Rr(t){return{menuIconClassName:(0,Be.css)({marginRight:t.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,Be.css)({position:"absolute",top:"7px",right:t.spacing(.5),color:t.colors.text.secondary}),groupLabel:(0,Be.css)({color:t.colors.text.secondary,fontSize:t.typography.size.sm,padding:t.spacing(.5,1)})}}const jr=({children:t,customCss:e})=>{if(!t||t.length===0)return null;const r=t.find(n=>n.active===!0);return(0,m.jsx)("div",{className:`gf-form-select-wrapper width-20 ${e}`,children:(0,m.jsxs)("div",{className:"dropdown",children:[(0,m.jsx)("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"},children:r?.text}),(0,m.jsx)("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu",children:t.map(n=>n.hideFromTabs?null:(0,m.jsx)(Ur,{iconClassName:n.icon,text:n.text,href:n.url},n.url))})]})})},kr=({children:t})=>!t||t.length===0?null:(0,m.jsxs)("nav",{children:[(0,m.jsx)(jr,{customCss:"page-header__select-nav",children:t}),(0,m.jsx)(wr.U,{className:"page-header__tabs",hideBorder:!0,children:t.map((e,r)=>!e.hideFromTabs&&(0,m.jsx)(Or.o,{label:e.text,active:e.active,icon:e.icon,href:e.url,suffix:e.tabSuffix},`${e.url}-${r}`))})]}),Br=({navItem:t,renderTitle:e,actions:r,info:n,subTitle:i})=>{const s=(0,ot.of)(Fr);if(!t)return null;const a=c=>{const h=c.icon==="grafana"?12:14,f=c.icon&&(0,Rt.Uo)(c.icon),x=i??c.subTitle;return(0,m.jsxs)("div",{className:"page-header__inner",children:[(0,m.jsxs)("span",{className:"page-header__logo",children:[f&&(0,m.jsx)(Je.I,{name:f,size:"xxxl",style:{marginTop:h}}),c.img&&(0,m.jsx)("img",{className:"page-header__img",src:c.img,alt:""})]}),(0,m.jsxs)("div",{className:(0,Be.cx)("page-header__info-block",s.headerText),children:[e?e(c.text):Gr(c.text,c.highlightText),n&&(0,m.jsx)(Mr.Q,{info:n}),x&&(0,m.jsx)("div",{className:"page-header__sub-title",children:x}),r&&(0,m.jsx)("div",{className:s.actions,children:r})]})]})};return(0,m.jsx)("div",{className:s.headerCanvas,children:(0,m.jsx)("div",{className:"page-container",children:(0,m.jsxs)("div",{className:"page-header",children:[a(t),t.children&&t.children.length>0&&(0,m.jsx)(kr,{children:t.children})]})})})};function Gr(t,e){return t?(0,m.jsxs)("h1",{className:"page-header__title",children:[t,e&&(0,m.jsx)(Pr.J,{text:e,className:(0,Be.css)`
            vertical-align: middle;
          `})]}):null}const Fr=t=>({actions:(0,Be.css)({display:"flex",flexDirection:"row",gap:t.spacing(1)}),headerText:(0,Be.css)({display:"flex",flexDirection:"column",gap:t.spacing(1)}),headerCanvas:(0,Be.css)`
    background: ${t.colors.background.canvas};
  `}),{SecretFormField:Vr}=cn.rRI;function zr(){Ie("footer",Ar.wi,[]),Ie("icon",Je.I,["name","size","type",["onClick",{watchDepth:"reference",wrapApply:!0}]]),Ie("spinner",un.y,["inline"]),Ie("helpModal",Dr.N,[]),Ie("pageHeader",Br,["model","noTabs"]),Ie("emptyListCta",Cr.A,["title","buttonIcon","buttonLink","buttonTitle",["onClick",{watchDepth:"reference",wrapApply:!0}],"proTip","proTipLink","proTipLinkTitle","proTipTarget","infoBox","infoBoxTitle"]),Ie("tagFilter",Nr.$,["tags",["onChange",{watchDepth:"reference"}],["tagOptions",{watchDepth:"reference"}]]),Ie("colorPicker",dn.sk,["color",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("seriesColorPickerPopover",pn.t,["color","series","onColorChange","onToggleAxis"]),Ie("unitPicker",hn.p,["value","width",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("metricSelect",Sr,["options","onChange","value","isSearchable","className","placeholder",["variables",{watchDepth:"reference"}]]),Ie("cloudMonitoringQueryEditor",xr,["target","onQueryChange","onExecuteQuery",["events",{watchDepth:"reference"}],["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),Ie("secretFormField",Vr,["value","isConfigured","inputWidth","labelWidth","aria-label",["onReset",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("graphContextMenu",fn.H,["x","y","itemsGroup",["onClose",{watchDepth:"reference",wrapApply:!0}],["getContextMenuSource",{watchDepth:"reference",wrapApply:!0}],["timeZone",{watchDepth:"reference",wrapApply:!0}]]),Ie("drilldownLinksEditor",mn.e,["value","links","suggestions",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("datasourceHttpSettingsNext",gn.t,["defaultUrl","showAccessOptions","dataSourceConfig","showForwardOAuthIdentityOption",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("folderPicker",bn.sR,["labelClass","rootName","enableCreateNew","enableReset","initialTitle","initialFolderId","dashboardId","onCreateFolder",["enterFolderCreation",{watchDepth:"reference",wrapApply:!0}],["exitFolderCreation",{watchDepth:"reference",wrapApply:!0}],["onLoad",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("timePickerSettings",Tn.p,["renderCount","refreshIntervals","timePickerHidden","nowDelay","timezone",["onTimeZoneChange",{watchDepth:"reference",wrapApply:!0}],["onRefreshIntervalChange",{watchDepth:"reference",wrapApply:!0}],["onNowDelayChange",{watchDepth:"reference",wrapApply:!0}],["onHideTimePickerChange",{watchDepth:"reference",wrapApply:!0}]]),Ie("clipboardButton",vn.b,[["getText",{watchDepth:"reference",wrapApply:!0}]])}const gt=t=>e=>e.finally(t.$evalAsync),Kr=`
<div class="dropdown cascade-open">
<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.def.type}}</a>
<span>(</span><span class="query-part-parameters"></span><span>)</span>
<ul class="dropdown-menu">
  <li ng-repeat="action in partActions">
    <a ng-click="triggerPartAction(action)">{{action.text}}</a>
  </li>
</ul>
`;l.Ay.directive("queryPartEditor",["templateSrv",Wr]);function Wr(t){const e='<input type="text" class="hide input-mini tight-form-func-param"></input>';return{restrict:"E",template:Kr,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(n,i){const s=n.part,a=s.def,c=i.find(".query-part-parameters"),h=n.debounce;n.partActions=[];function f(D){const X=O()(this),Z=X.next();Z.val(s.params[D]),Z.css("width",X.width()+16+"px"),X.hide(),Z.show(),Z.focus(),Z.select();const te=Z.data("typeahead");te&&(Z.val(""),te.lookup())}function x(D){const X=O()(this),Z=X.prev(),te=X.val();(te!==""||s.def.params[D].optional)&&(Z.html(t.highlightVariablesAsHtml(te)),s.updateParam(X.val(),D),n.$apply(()=>{n.handleEvent({$event:{name:"part-param-changed"}})})),X.hide(),Z.show()}function p(D,X){X.which===13&&x.call(this,D)}function A(){this.style.width=(3+this.value.length)*8+"px"}function T(D,X,Z){if(!X.options&&!X.dynamicLookup)return;const te=(Ee,me)=>{if(X.options){let Ne=X.options;return X.type==="int"&&(Ne=(0,g.map)(Ne,Ke=>Ke.toString())),Ne}n.$apply(()=>{n.handleEvent({$event:{name:"get-param-options"}}).then(Ne=>{const Ke=(0,g.map)(Ne,Me=>(0,g.escape)(Me.value));me(Ke)})})};D.attr("data-provide","typeahead"),D.typeahead({source:te,minLength:0,items:1e3,updater:Ee=>(Ee=(0,g.unescape)(Ee),setTimeout(()=>{x.call(D[0],Z)},0),Ee)});const ue=D.data("typeahead");ue.lookup=function(){this.query=this.$element.val()||"";const Ee=this.source(this.query,O().proxy(this.process,this));return Ee&&this.process(Ee)},h&&(ue.lookup=(0,g.debounce)(ue.lookup,500,{leading:!0}))}n.showActionsMenu=()=>{gt(n)(n.handleEvent({$event:{name:"get-part-actions"}}).then(D=>{n.partActions=D}))},n.triggerPartAction=D=>{n.handleEvent({$event:{name:"action",action:D}})};function F(){(0,g.each)(a.params,(D,X)=>{if(D.optional&&s.params.length<=X)return;X>0&&O()("<span>, </span>").appendTo(c);const Z=t.highlightVariablesAsHtml(s.params[X]),te=O()('<a class="graphite-func-param-link pointer">'+Z+"</a>"),ue=O()(e);te.appendTo(c),ue.appendTo(c),ue.blur((0,g.partial)(x,X)),ue.keyup(A),ue.keypress((0,g.partial)(p,X)),te.click((0,g.partial)(f,X)),T(ue,D,X)})}function he(){c.empty(),F()}he()}}}function Hr(t){let e=this.query;return e===""?!0:(e[0]==="/"&&(e=e.substring(1)),e[e.length-1]==="/"&&(e=e.substring(0,e.length-1)),t.toLowerCase().match(e.toLowerCase()))}class Qr{constructor(e,r,n,i){this.$scope=e,this.$sce=n,this.templateSrv=i,this.inputElement=r.find("input").first(),this.linkElement=r.find("a").first(),this.linkMode=!0,this.cancelBlur=null,this.labelMode=!1,this.lookupText=!1,this.debounce=!1,e.$watch("ctrl.model",this.modelChanged.bind(this))}static{this.$inject=["$scope","$element","$sce","templateSrv"]}$onInit(){this.labelMode?this.cssClasses="gf-form-label "+this.cssClass:this.cssClasses="gf-form-input gf-form-input--dropdown "+this.cssClass,this.placeholder&&this.inputElement.attr("placeholder",this.placeholder),this.inputElement.attr("data-provide","typeahead"),this.inputElement.typeahead({source:this.typeaheadSource.bind(this),minLength:0,items:1e4,updater:this.typeaheadUpdater.bind(this),matcher:Hr});const e=this.inputElement.data("typeahead");e.lookup=function(){this.query=this.$element.val()||"",this.source(this.query,this.process.bind(this))},this.debounce&&(e.lookup=(0,g.debounce)(e.lookup,500,{leading:!0})),this.linkElement.keydown(r=>{(r.keyCode===40||r.keyCode===13)&&this.linkElement.click()}),this.inputElement.keydown(r=>{r.keyCode===13&&setTimeout(()=>{this.inputElement.blur()},300)}),this.inputElement.blur(this.inputBlur.bind(this)),this.startOpen&&setTimeout(this.open.bind(this),0)}getOptionsInternal(e){return gt(this.$scope)(Promise.resolve(this.getOptions({$query:e})))}isPromiseLike(e){return e&&typeof e.then=="function"}modelChanged(){(0,g.isObject)(this.model)?this.updateDisplay(this.model.text):this.lookupText?this.getOptionsInternal("").then(e=>{const r=(0,g.find)(e,{value:this.model});this.updateDisplay(r?r.text:this.model)}):this.updateDisplay(this.model)}typeaheadSource(e,r){this.getOptionsInternal(e).then(n=>{this.optionCache=n;const i=(0,g.map)(n,s=>(0,g.escape)(s.text));this.allowCustom&&this.text!==""&&(0,g.indexOf)(i,this.text)===-1&&i.unshift(this.text),r(i)})}typeaheadUpdater(e){return e===this.text?(clearTimeout(this.cancelBlur),this.inputElement.focus(),e):(this.inputElement.val(e),this.switchToLink(!0),e)}switchToLink(e){this.linkMode&&!e||(clearTimeout(this.cancelBlur),this.cancelBlur=null,this.linkMode=!0,this.inputElement.hide(),this.linkElement.show(),this.updateValue(this.inputElement.val()))}inputBlur(){this.cancelBlur=setTimeout(this.switchToLink.bind(this),200)}updateValue(e){e=(0,g.unescape)(e),!(e===""||this.text===e)&&this.$scope.$apply(()=>{const r=(0,g.find)(this.optionCache,{text:e});r?((0,g.isObject)(this.model)?this.model=r:this.model=r.value,this.text=r.text):this.allowCustom&&((0,g.isObject)(this.model)?this.model.text=this.model.value=e:this.model=e,this.text=e),this.$scope.$$postDigest(()=>{this.$scope.$apply(()=>{this.onChange({$option:r})})})})}updateDisplay(e){this.text=e,this.display=this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(e))}open(){this.inputElement.css("width",Math.max(this.linkElement.width(),80)+16+"px"),this.inputElement.show(),this.inputElement.focus(),this.linkElement.hide(),this.linkMode=!1;const e=this.inputElement.data("typeahead");e&&(this.inputElement.val(""),e.lookup())}}const Yr=`
<input type="text"
  data-provide="typeahead"
  class="gf-form-input"
  spellcheck="false"
  style="display:none">
</input>
<a ng-class="ctrl.cssClasses"
   tabindex="1"
   ng-click="ctrl.open()"
   give-focus="ctrl.focus"
   ng-bind-html="ctrl.display || '&nbsp;'">
</a>
`;function Xr(){return{restrict:"E",template:Yr,controller:Qr,bindToController:!0,controllerAs:"ctrl",scope:{model:"=",getOptions:"&",onChange:"&",cssClass:"@",allowCustom:"@",labelMode:"@",lookupText:"@",placeholder:"@",startOpen:"@",debounce:"@"}}}l.Ay.directive("gfFormDropdown",Xr);const Jr=`
<div class="baron__track">
  <div class="baron__bar"></div>
</div>
`,Zr="baron baron__root",qr="baron__scroller";function _r(){return{restrict:"A",link:(t,e,r)=>{let n=e.parent();const i=e;r.grafanaScrollbar&&r.grafanaScrollbar==="scrollonroot"&&(n=i),n.addClass(Zr),O()(Jr).appendTo(n),e.addClass(qr);const s={root:n[0],scroller:i[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling",track:".baron__track",direction:"v"},a=M()(s);t.$on("$destroy",()=>{a.dispose()})}}}l.Ay.directive("grafanaScrollbar",_r);var ei=o(44533);l.Ay.directive("jsonTree",[function(){return{restrict:"E",scope:{object:"=",startExpanded:"@",rootName:"@"},link:(e,r)=>{let n=e.startExpanded;e.startExpanded==="true"?n=2:e.startExpanded==="false"&&(n=1);const i={[e.rootName]:e.object},a=new ei.O(i,n,{animateOpen:!0}).render(!0);r.append(a)}}}]);const ti=`
<label for="check-{{ctrl.id}}" class="gf-form-switch-container">
  <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">
    {{ctrl.label}}
    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">
      {{ctrl.tooltip}}
    </info-popover>
  </div>
  <div class="gf-form-switch {{ctrl.switchClass}}" ng-if="ctrl.show">
    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">
    <span class="gf-form-switch__slider"></span>
  </div>
</label>
`,ni=`
<label for="check-{{ctrl.id}}" class="gf-form-switch-container">
   <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">
    {{ctrl.label}}
    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">
      {{ctrl.tooltip}}
    </info-popover>
  </div>
  <div class="gf-form-checkbox {{ctrl.switchClass}}" ng-if="ctrl.show">
    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">
    <span class="gf-form-switch__checkbox"></span>
  </div>
</label>
`;class kt{constructor(e,r){this.$timeout=r,this.show=!0,this.id=e.$id}static{this.$inject=["$scope","$timeout"]}internalOnChange(){return this.$timeout(()=>this.onChange())}}function ri(){return{restrict:"E",controller:kt,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:ti}}function ii(){return{restrict:"E",controller:kt,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:ni}}l.Ay.directive("gfFormSwitch",ri),l.Ay.directive("gfFormCheckbox",ii);function si(){return{restrict:"E",template:`<icon name="'info-circle'" style="margin-left: 10px;" size="'xs'"></icon>`,transclude:!0,link:(t,e,r,n,i)=>{const s=r.offset||"0 -10px",a=r.position||"right middle";let c="drop-help drop-hide-out-of-bounds";const h="hover";e.addClass("gf-form-help-icon"),r.wide&&(c+=" drop-wide"),r.mode&&e.addClass("gf-form-help-icon--"+r.mode),i((f,x)=>{const p=document.createElement("div");p.className="markdown-html",(0,g.each)(f,T=>{p.appendChild(T)});const A={target:e[0],content:p,position:a,classes:c,openOn:h,hoverOpenDelay:400,tetherOptions:{offset:s,constraints:[{to:"window",attachment:"together",pin:!0}]}};t.$applyAsync(()=>{const T=new(ce())(A),F=t.$on("$destroy",()=>{T.destroy(),F()})})})}}}l.Ay.directive("infoPopover",si),l.Ay.directive("spectrumPicker",oi);function oi(){return{restrict:"E",require:"ngModel",scope:!0,replace:!0,template:'<color-picker color="ngModel.$viewValue" on-change="onColorChange"></color-picker>',link:(t,e,r,n)=>{t.ngModel=n,t.onColorChange=i=>{n.$setViewValue(i)}}}}var Ye=o(2913);const ai="ace/theme/grafana-dark",li="ace/theme/textmate",ci="text",ui=10,di=2,pi=!0,hi=!0,fi="<div></div>";async function mi(t,e,r){const n=r.mode||ci,i=r.maxLines||ui,s=r.showGutter!==void 0,a=r.tabSize||di,c=r.behavioursEnabled?r.behavioursEnabled==="true":pi,h=r.snippetsEnabled?r.snippetsEnabled==="true":hi,f=e.get(0),{default:x}=await o.e(3832).then(o.t.bind(o,47496,23));await o.e(6464).then(o.t.bind(o,6464,23)),await o.e(2694).then(o.t.bind(o,52694,23)),await o.e(7391).then(o.t.bind(o,57391,23)),await o.e(2228).then(o.t.bind(o,32228,23)),await o.e(2514).then(o.t.bind(o,32514,23)),await o.e(7515).then(o.t.bind(o,17515,23)),await o.e(4289).then(o.t.bind(o,54289,23)),await o.e(1708).then(o.t.bind(o,11708,23)),await o.e(7613).then(o.t.bind(o,7613,23)),await o.e(8730).then(o.t.bind(o,98730,23)),await o.e(9118).then(o.t.bind(o,59118,23)),await o.e(5277).then(o.t.bind(o,45277,23)),await o.e(9384).then(o.t.bind(o,47003,23));const p=x.edit(f),A=p.getSession(),T={maxLines:i,showGutter:s,tabSize:a,behavioursEnabled:c,highlightActiveLine:!1,showPrintMargin:!1,autoScrollEditorIntoView:!0};p.setOptions(T),p.$blockScrolling=1/0,p.renderer.setScrollMargin(10,10),p.renderer.setPadding(10),D(),he(n),X(t.content),e.addClass("gf-code-editor");const F=e.find("textarea");F.addClass("gf-form-input"),F.attr("aria-label",r.textareaLabel),t.codeEditorFocus&&setTimeout(()=>{F.focus();const Z=F[0];if(Z.setSelectionRange){const te=F.val().length*2;Z.setSelectionRange(te,te)}},100),A.on("change",Z=>{t.$apply(()=>{const te=p.getValue();t.content=te})}),t.$watch("content",(Z,te)=>{const ue=p.getValue();Z!==ue&&Z!==te&&t.$$postDigest(()=>{X(Z)})}),p.on("blur",()=>{t.onChange()}),t.$on("$destroy",()=>{p.destroy()}),p.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:()=>{t.onChange()}});function he(Z){if(x.acequire("ace/ext/language_tools"),p.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:h}),t.getCompleter()){const ue=p;ue.completers=ue.completers.slice(),ue.completers.push(t.getCompleter())}const te=`ace/mode/${Z}`;A.setMode(te)}function D(){let Z=ai;Ye.Ay.bootData.user.lightTheme&&(Z=li),p.setTheme(Z)}function X(Z){p.setValue(Z),p.clearSelection()}}function gi(){return{restrict:"E",template:fi,scope:{content:"=",datasource:"=",codeEditorFocus:"<",onChange:"&",getCompleter:"&"},link:mi}}l.Ay.directive("codeEditor",gi);const vi=`
<div class="dropdown cascade-open">
<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.label}}</a>
<span>{{part.def.wrapOpen}}</span><span class="query-part-parameters"></span><span>{{part.def.wrapClose}}</span>
<ul class="dropdown-menu">
  <li ng-repeat="action in partActions">
    <a ng-click="triggerPartAction(action)">{{action.text}}</a>
  </li>
</ul>
`;l.Ay.directive("sqlPartEditor",["templateSrv",yi]);function yi(t){const e='<input type="text" class="hide input-mini"></input>';return{restrict:"E",template:vi,scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(n,i){const s=n.part,a=s.def,c=i.find(".query-part-parameters"),h=n.debounce;let f=null;n.partActions=[];function x(Z){const te=O()(this),ue=te.next();ue.val(s.params[Z]),ue.css("width",te.width()+16+"px"),te.hide(),ue.show(),ue.focus(),ue.select();const Ee=ue.data("typeahead");Ee&&(ue.val(""),Ee.lookup())}function p(Z,te){f=setTimeout(()=>{A(Z,te)},200)}function A(Z,te){const ue=Z.prev(),Ee=Z.val();(Ee!==""||s.def.params[te].optional)&&(ue.html(t.highlightVariablesAsHtml(Ee)),s.updateParam(Z.val(),te),n.$apply(()=>{n.handleEvent({$event:{name:"part-param-changed"}})})),Z.hide(),ue.show()}function T(Z,te){te.which===13&&A(O()(this),Z)}function F(){this.style.width=(3+this.value.length)*8+"px"}function he(Z,te,ue){if(!te.options&&!te.dynamicLookup)return;const Ee=(Ne,Ke)=>{if(te.options){let Me=te.options;return te.type==="int"&&(Me=(0,g.map)(Me,je=>je.toString())),Me}n.$apply(()=>{n.handleEvent({$event:{name:"get-param-options",param:te}}).then(Me=>{const je=(0,g.map)(Me,ke=>(0,g.escape)(ke.value));(0,g.indexOf)(je,s.params[ue])===-1&&je.unshift((0,g.escape)(s.params[ue])),Ke(je)})})};Z.attr("data-provide","typeahead"),Z.typeahead({source:Ee,minLength:0,items:1e3,updater:Ne=>(Ne=(0,g.unescape)(Ne),Ne===s.params[ue]&&(clearTimeout(f),Z.focus()),Ne)});const me=Z.data("typeahead");me.lookup=function(){this.query=this.$element.val()||"";const Ne=this.source(this.query,O().proxy(this.process,this));return Ne&&this.process(Ne)},h&&(me.lookup=(0,g.debounce)(me.lookup,500,{leading:!0}))}n.showActionsMenu=()=>{n.handleEvent({$event:{name:"get-part-actions"}}).then(Z=>{n.partActions=Z})},n.triggerPartAction=Z=>{n.handleEvent({$event:{name:"action",action:Z}})};function D(){(0,g.each)(a.params,(Z,te)=>{if(Z.optional&&s.params.length<=te)return;te>0&&O()("<span>"+a.separator+"</span>").appendTo(c);const ue=t.highlightVariablesAsHtml(s.params[te]),Ee=O()('<a class="query-part__link">'+ue+"</a>"),me=O()(e);Ee.appendTo(c),me.appendTo(c),me.blur((0,g.partial)(p,me,te)),me.keyup(F),me.keypress((0,g.partial)(T,te)),Ee.click((0,g.partial)(x,te)),he(me,Z,te)})}function X(){c.empty(),D()}X()}}}l.m7.directive("datasourceHttpSettings",()=>({scope:{current:"=",suggestUrl:"@",noDirectAccess:"@",showForwardOAuthIdentityOption:"@"},templateUrl:"public/app/angular/partials/http_settings_next.html",link:{pre:t=>{t.showAccessOption=t.noDirectAccess!=="true",t.onChange=e=>{t.current=e}}}})),l.m7.directive("datasourceTlsAuthSettings",()=>({scope:{current:"="},templateUrl:"public/app/angular/partials/tls_auth_settings.html"}));var Bt=o(15162),vt=o(1682);l.Ay.directive("pluginComponent",["$compile","$http","$templateCache","$location",Ei]);function Ei(t,e,r,n){function i(p){if(p.template)return Promise.resolve(p.template);const A=r.get(p.templateUrl);return A?Promise.resolve(A):e.get(p.templateUrl).then(T=>T.data)}function s(p,A){if(p)return p.indexOf("public")===0?p:A+"/"+p}function a(p){return p.Component.templateUrl=s(p.Component.templateUrl,p.baseUrl),()=>({templateUrl:p.Component.templateUrl,template:p.Component.template,restrict:"E",controller:p.Component,controllerAs:"ctrl",bindToController:!0,scope:p.bindings,link:(A,T,F,he)=>{he.link&&he.link(A,T,F,he),he.init&&he.init()}})}function c(p,A){const T={name:"panel-plugin-"+p.panel.type,bindings:{dashboard:"=",panel:"=",row:"="},attrs:{dashboard:"dashboard",panel:"panel",class:"panel-height-helper"}},F=Ye.Ay.panels[p.panel.type];return(0,Bt.TV)(F.id).then(he=>{const D=he.angularPanelCtrl;return T.Component=D,!D||D.registered?T:D.templatePromise?D.templatePromise.then(X=>T):(F&&(D.templateUrl=s(D.templateUrl,F.baseUrl)),D.templatePromise=i(D).then(X=>(D.templateUrl=null,D.template=`<grafana-panel ctrl="ctrl" class="panel-height-helper">${X}</grafana-panel>`,{...T,baseUrl:F.baseUrl})),D.templatePromise)})}function h(p,A){switch(A.type){case"query-ctrl":{const T=p.ctrl.datasource;return Promise.resolve({baseUrl:T.meta.baseUrl,name:"query-ctrl-"+T.meta.id,bindings:{target:"=",panelCtrl:"=",datasource:"="},attrs:{target:"ctrl.target","panel-ctrl":"ctrl",datasource:"ctrl.datasource"},Component:T.components.QueryCtrl})}case"annotations-query-ctrl":{const T=p.ctrl.currentDatasource.meta.baseUrl,F=p.ctrl.currentDatasource.meta.id;return(0,vt.cS)(p.ctrl.currentDatasource.meta).then(he=>({baseUrl:T,name:"annotations-query-ctrl-"+F,bindings:{annotation:"=",datasource:"="},attrs:{annotation:"ctrl.currentAnnotation",datasource:"ctrl.currentDatasource"},Component:he.components.AnnotationsQueryCtrl}))}case"datasource-config-ctrl":{const T=p.ctrl.datasourceMeta,F=n.url();return(0,vt.cS)(T).then(he=>(p.$watch("ctrl.current",()=>{F===n.url()&&p.onModelChanged(p.ctrl.current)},!0),{baseUrl:T.baseUrl,name:"ds-config-"+T.id,bindings:{meta:"=",current:"="},attrs:{meta:"ctrl.datasourceMeta",current:"ctrl.current"},Component:he.angularConfigCtrl}))}case"app-config-ctrl":{const T=p.ctrl.model;return(0,vt.ui)(T).then(F=>({baseUrl:T.baseUrl,name:"app-config-"+T.id,bindings:{appModel:"=",appEditCtrl:"="},attrs:{"app-model":"ctrl.model","app-edit-ctrl":"ctrl"},Component:F.angularConfigCtrl}))}case"panel":return c(p,A);default:return Promise.reject({message:"Could not find component type: "+A.type})}}function f(p,A,T){const F=y().element(document.createElement(T.name));(0,g.each)(T.attrs,(he,D)=>{F.attr(D,he)}),t(F)(p),A.empty(),setTimeout(()=>{p.$applyAsync(()=>{A.append(F),setTimeout(()=>{p.$applyAsync(()=>{p.$broadcast(P.ee.componentDidMount.name)})})})})}function x(p,A,T,F){if(F.notFound){A.empty();return}if(!F.Component)throw{message:"Failed to find exported plugin component for "+F.name};if(!F.Component.registered){const he=T.$normalize(F.name),D=a(F);l.Ay.directive(he,D),F.Component.registered=!0}f(p,A,F)}return{restrict:"E",link:(p,A,T)=>{h(p,T).then(F=>{x(p,A,T,F)}).catch(F=>{console.error("Plugin component error",F)})}}}var Gt=o(7376),bi=o(81634),Ti=o(24284),_e=o(28138);class xi{static{this.$inject=["$scope","utilSrv","$rootScope","contextSrv","angularLoader","$injector"]}constructor(e,r,n,i,s,a){(0,Gt.w)(s),(0,bi.j)(a),e.init=()=>{e.contextSrv=i,e.appSubUrl=Ye.Ay.appSubUrl,e._=se(),r.init()},n.colors=Ti.Tj,n.onAppEvent=function(c,h,f){let x;typeof c=="string"?x=n.$on(c,h):x=n.$on(c.name,h);let p=this;p.$id===1&&!f&&console.warn("warning rootScope onAppEvent called without localscope"),f&&(p=f),p.$on("$destroy",x)},n.appEvent=(c,h)=>{typeof c=="string"?(n.$emit(c,h),_e.A.emit(c,h)):(n.$emit(c.name,h),_e.A.emit(c,h))},e.init()}}function Ci(){return{restrict:"E",controller:xi,link:(t,e)=>{const r=O()("body");O().fn.modal.Constructor.prototype.enforceFocus=()=>{};let n=new Date().getTime(),i=!0;const s=60*5e3;function a(){i&&r.hasClass("page-dashboard")&&new Date().getTime()-n>s&&(i=!1,r.addClass("view-mode--inactive"))}function c(){n=new Date().getTime(),i||(i=!0,r.removeClass("view-mode--inactive"))}r.mousemove(c),r.keydown(c),document.addEventListener("wheel",c,{capture:!0,passive:!0}),document.addEventListener("visibilitychange",c),setInterval(a,2e3),r.click(h=>{const f=O()(h.target);if(f.parents().length===0)return;r.find(".dropdown-menu-open").removeClass("dropdown-menu-open");const x=f.closest("[data-click-hide]");if(x.length){const A=x.parent();x.detach(),setTimeout(()=>{A.append(x)},100)}const p=e.find(".popover");p.length>0&&f.parents(".graph-legend").length===0&&p.hide()})}}}l.Ay.directive("grafanaApp",Ci);var ys=o(23345),Es=o(26415),bs=o(74526),Ai=o(16233),Si=o(17493),Ii=o(74856),Li=o(63770),Ni=o(87815),Di=o(5808),Ft=o(39601);class wi{constructor(){this.$get=()=>{},(0,Ft.Lc)("Patch angular",!1,"RouteParamsProvider")}}class Oi{constructor(){(0,Ft.Lc)("Patch angular",!1,"RouteProvider")}$get(){return this}}var Mi=o(4244);const Pi=()=>{l.m7.config(["$provide",t=>{t.decorator("$browser",["$delegate",e=>(e.onUrlChange=()=>{},e.url=()=>"",e)])}])},Ui=()=>{l.m7.config(["$provide",t=>{t.decorator("$location",["$delegate",e=>(e=new Mi.b,e)])}]),l.m7.provider("$route",Oi),l.m7.provider("$routeParams",wi)};function $i(){Pi(),Ui()}function Ri(t){t.oldInvoke=t.invoke,t.invoke=(e,r,n,i)=>{const s=n?.$scope?.$parent;return s&&(s.panel&&(r.panel=s.panel),s.dashboard&&(r.dashboard=s.dashboard),s.ctrl?.target&&(r.panelCtrl=s.ctrl,r.datasource=s.ctrl.datasource,r.target=s.ctrl.target),s.ctrl?.datasourceMeta&&(r.meta=s.ctrl.datasourceMeta,r.current=s.ctrl.current),s.ctrl?.currentAnnotation&&(r.annotation=s.ctrl.currentAnnotation,r.datasource=s.ctrl.currentDatasource),s.isAppConfigCtrl&&(r.appEditCtrl=s.ctrl,r.appModel=s.ctrl.model),s.$parent?.$parent?.ctrl?.appModel&&(r.appModel=s.$parent?.$parent?.ctrl?.appModel)),t.oldInvoke(e,r,n,i)}}var ji=o(39741),ki=o(18226),Vt=o(14792);function Bi(t){return function(r){const n=(0,G.useRef)(null),i=(0,G.useRef)(),s=(0,G.useRef)();return(0,G.useEffect)(()=>{if(!n.current)return;const a=(0,Gt.E)(),c='<plugin-component type="panel" class="panel-height-helper"></plugin-component>',h=new Fi,f=new Gi(t,r,h);i.current={panel:f,dashboard:(0,Vt.UA)().getCurrent(),size:{width:r.width,height:r.height},queryRunner:h},s.current=a.load(n.current,i.current,c)},[]),(0,G.useEffect)(()=>{s.current&&(i.current.size.height=r.height,i.current.size.width=r.width,i.current.panel.events.publish(new d.XM))},[r.width,r.height]),(0,G.useEffect)(()=>{i.current?.panel&&i.current.queryRunner.forwardNewData(r.data)},[r.data]),(0,m.jsx)("div",{ref:n,className:"panel-height-helper"})}}class Gi{constructor(e,r,n){r.options.angularOptions&&Object.assign(this,r.options.angularOptions),this.id=r.id,this.type=e.meta.id,this.title=r.title,this.fieldConfig=r.fieldConfig,this.options=r.options,this.plugin=e,this.events=new ki.o,this.queryRunner=n}refresh(){this.events.publish(new z._)}render(){this.events.publish(new d.XM)}getQueryRunner(){return this.queryRunner}}class Fi{constructor(){this.subject=new ji.m(1)}getData(e){return this.subject}forwardNewData(e){this.subject.next(e)}run(){}}var Vi=o(17172),zi=o(19347),Ki=o(10096),Wi=o(71500),Hi=o(29304),Re=o(95344);class Qi{constructor(){}init(){_e.l.subscribe(d.Ps,e=>this.showModal(e.payload)),_e.l.subscribe(d.aP,this.hideModal.bind(this))}hideModal(){(0,Re.l)("UtilSrv","hideModal",""),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss()}showModal(e){(0,Re.l)("UtilSrv","showModal","publish ShowModalReactEvent")}}var yt=o(10154);class Yi{clearPromiseCaches(){(0,Re.l)("annotations_srv.ts","clearPromiseCaches","DashboardQueryRunner")}getAnnotations(e){return(0,Re.l)("annotations_srv.ts","getAnnotations","DashboardQueryRunner.getResult"),Promise.resolve({annotations:[],alertState:void 0})}getAlertStates(e){return(0,Re.l)("annotations_srv.ts","getAlertStates","DashboardQueryRunner.getResult"),Promise.resolve(void 0)}getGlobalAnnotations(e){return(0,Re.l)("annotations_srv.ts","getGlobalAnnotations","DashboardQueryRunner.getResult"),Promise.resolve([])}saveAnnotationEvent(e){return(0,Re.l)("annotations_srv.ts","saveAnnotationEvent","api/saveAnnotation"),(0,yt.vJ)(e)}updateAnnotationEvent(e){return(0,Re.l)("annotations_srv.ts","updateAnnotationEvent","api/updateAnnotation"),(0,yt.rJ)(e)}deleteAnnotationEvent(e){return(0,Re.l)("annotations_srv.ts","deleteAnnotationEvent","api/deleteAnnotation"),(0,yt.Xm)(e)}translateQueryResult(e,r){(0,Re.l)("annotations_srv.ts","translateQueryResult","DashboardQueryRunner/utils/translateQueryResult"),e.snapshotData&&(e=(0,g.cloneDeep)(e),delete e.snapshotData);for(const n of r)n.source=e,n.color=e.iconColor,n.type=e.name,n.isRegion=n.timeEnd&&n.time!==n.timeEnd;return r}}function Xi(){l.Ay.factory("backendSrv",()=>(0,Vi.AI)()),l.Ay.factory("contextSrv",()=>Ki.TP),l.Ay.factory("dashboardSrv",()=>(0,Vt.UA)()),l.Ay.factory("datasourceSrv",()=>(0,zi.l)()),l.Ay.factory("linkSrv",()=>(0,Hi.mQ)()),l.Ay.factory("validationSrv",()=>Wi.P),l.Ay.service("annotationsSrv",Yi),l.Ay.service("utilSrv",Qi)}const Ji={angular:{...y(),default:y()},"app/core/core_module":{default:l.m7,__useDefault:!0},"app/core/core":{appEvents:_e.A,contextSrv:Ai.TP,coreModule:l.m7},"app/plugins/sdk":Di,"app/core/utils/promiseToDigest":{promiseToDigest:gt}};class Zi{constructor(){this.preBootModules=[],this.ngModuleDependencies=[],this.registerFunctions={}}init(){const e=y().module("grafana",[]);(0,Bt.f7)(Bi),e.config(["$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide","$sceDelegateProvider",(n,i,s,a,c,h)=>{Ye.$W.buildInfo.env!=="development"&&i.debugInfoEnabled(!1),a.useApplyAsync(!0),Ye.$W.pluginsCDNBaseURL&&h.trustedResourceUrlList(["self",`${Ye.$W.pluginsCDNBaseURL}/**`]),this.registerFunctions.controller=n.register,this.registerFunctions.directive=i.directive,this.registerFunctions.factory=c.factory,this.registerFunctions.service=c.service,this.registerFunctions.filter=s.register,c.decorator("$http",["$delegate","$templateCache",(f,x)=>{const p=f.get;return f.get=(A,T)=>(A.match(/\.html$/)&&(x.get(A)||(A+="?v="+new Date().getTime())),p(A,T)),f}])}]),this.ngModuleDependencies=["grafana.core","ngSanitize","grafana","pasvaz.bindonce","react"],l.yF.forEach(n=>{this.useModule(n)}),y().module("grafana.services").service("dashboardLoaderSrv",Si.Fu),l.m7.factory("timeSrv",()=>(0,Ii.jG)()),l.m7.factory("templateSrv",()=>(0,Nt.w)()),zr(),Xi(),$i();const r=(0,Ni.kB)(Ji);Li.z.addImportMap({imports:r}),$.fn.tooltip.defaults.animation=!1}useModule(e){return this.preBootModules?this.preBootModules.push(e):(0,g.extend)(e,this.registerFunctions),this.ngModuleDependencies.push(e.name),e}bootstrap(){const e=y().bootstrap(document.getElementById("ngRoot"),this.ngModuleDependencies);return Ri(e),e.invoke(()=>(this.preBootModules.forEach(r=>{(0,g.extend)(r,this.registerFunctions)}),()=>{})),e}}},59559:(L,S,o)=>{"use strict";o.d(S,{a:()=>k});var U=o(2543),M=o.n(U);class k{constructor(z,l){this.$scope=z,this.$injector=l,this.panelCtrl=this.panelCtrl??z.ctrl.panelCtrl,this.target=this.target??z.ctrl.target,this.datasource=this.datasource??z.ctrl.datasource,this.panel=this.panelCtrl?.panel??z.ctrl.panelCtrl.panel,this.isLastQuery=(0,U.indexOf)(this.panel.targets,this.target)===this.panel.targets.length-1}refresh(){this.panelCtrl.refresh()}}},50410:(L,S,o)=>{"use strict";let U=o(12631);U.keys().forEach(M=>{U(M)})},7521:(L,S,o)=>{"use strict";o.d(S,{A:()=>y});var U=o(74848),M=o(32196),k=o(13544),P=o(14578),z=o(42418),l=o(55852),d=o(76442);const v=(0,M.css)({textAlign:"center"}),u=(0,M.css)({maxWidth:"700px",margin:"0 auto"}),y=({title:ae,buttonIcon:ie,buttonLink:J,buttonTitle:ee,buttonDisabled:B,onClick:H,proTip:g,proTipLink:se,proTipLinkTitle:ne,proTipTarget:w,infoBox:W,infoBoxTitle:oe})=>{const b=()=>(0,U.jsxs)(U.Fragment,{children:[g?(0,U.jsxs)("span",{children:[(0,U.jsx)(P.I,{name:"rocket"}),(0,U.jsxs)(U.Fragment,{children:[" ProTip: ",g," "]}),se&&(0,U.jsx)("a",{href:se,target:w,className:"text-link",children:ne})]},"proTipFooter"):"",W?(0,U.jsx)(z.F,{severity:"info",title:oe??"",className:u,children:(0,U.jsx)("div",{dangerouslySetInnerHTML:W})}):""]}),pe=b()?"":(0,M.css)({marginBottom:"20px"}),G=J?l.z9:l.$n,ge=(0,U.jsx)(G,{size:"lg",onClick:H,href:J,icon:ie,className:pe,"data-testid":k.Tp.components.CallToActionCard.buttonV2(ee),disabled:B,children:ee});return(0,U.jsx)(d.c,{className:v,message:ae,footer:b(),callToActionElement:ge})}},76323:(L,S,o)=>{"use strict";o.d(S,{J:()=>l});var U=o(74848),M=o(32196),k=o(96540),P=o(14110),z=o(40845);const l=({text:v="PRO",className:u,experimentId:I,eventVariant:y="",...ae})=>{const ie=(0,z.of)(d);return(0,k.useEffect)(()=>{I&&(0,P.Xp)(I,"test",y)},[I,y]),(0,U.jsx)("span",{className:(0,M.cx)(ie.badge,u),...ae,children:v})},d=v=>({badge:(0,M.css)`
      margin-left: ${v.spacing(1.25)};
      border-radius: ${v.shape.borderRadius(5)};
      background-color: ${v.colors.success.main};
      padding: ${v.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${v.typography.fontWeightMedium};
      font-size: ${v.typography.pxToRem(10)};
    `})},5808:(L,S,o)=>{"use strict";o.r(S),o.d(S,{MetricsPanelCtrl:()=>d,PanelCtrl:()=>l,QueryCtrl:()=>v,loadPluginCss:()=>M.PL});var U=o(92341),M=o(89191),k=o(75519),P=o(70225),z=o(59559);const l=(0,U.Y)(P.y),d=(0,U.Y)(k.F),v=(0,U.Y)(z.a)},42346:()=>{(function(L){"use strict";var S={tagClass:function(l){return"label label-info"},itemValue:function(l){return l&&l.toString()},itemText:function(l){return this.itemValue(l)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(l,d){d.hide().fadeIn()}};function o(l,d){this.itemsArray=[],this.$element=L(l),this.$element.hide(),this.widthClass=d.widthClass||"width-9",this.isSelect=l.tagName==="SELECT",this.multiple=this.isSelect&&l.hasAttribute("multiple"),this.objectItems=d&&d.itemValue,this.placeholderText=l.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.$container=L('<div class="bootstrap-tagsinput"></div>'),this.$input=L('<input class="gf-form-input '+this.widthClass+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(d)}o.prototype={constructor:o,add:function(l,d){var v=this;if(!(v.options.maxTags&&v.itemsArray.length>=v.options.maxTags)&&!(l!==!1&&!l)){if(typeof l=="object"&&!v.objectItems)throw"Can't add objects when itemValue option is not set";if(!l.toString().match(/^\s*$/)){if(v.isSelect&&!v.multiple&&v.itemsArray.length>0&&v.remove(v.itemsArray[0]),typeof l=="string"&&this.$element[0].tagName==="INPUT"){var u=l.split(",");if(u.length>1){for(var I=0;I<u.length;I++)this.add(u[I],!0);d||v.pushVal();return}}var y=v.options.itemValue(l),ae=v.options.itemText(l),ie=v.options.tagClass(l),J=L.grep(v.itemsArray,function(g){return v.options.itemValue(g)===y})[0];if(J){if(v.options.onTagExists){var ee=L(".tag",v.$container).filter(function(){return L(this).data("item")===J});v.options.onTagExists(l,ee)}return}v.itemsArray.push(l);var B=L('<span class="tag '+P(ie)+'">'+P(ae)+'<span data-role="remove"></span></span>');if(B.data("item",l),v.findInputWrapper().before(B),B.after(" "),v.isSelect&&!L('option[value="'+escape(y)+'"]',v.$element)[0]){var H=L("<option selected>"+P(ae)+"</option>");H.data("item",l),H.attr("value",y),v.$element.append(H)}d||v.pushVal(),v.options.maxTags===v.itemsArray.length&&v.$container.addClass("bootstrap-tagsinput-max"),v.$element.trigger(L.Event("itemAdded",{item:l}))}}},remove:function(l,d){var v=this;v.objectItems&&(typeof l=="object"?l=L.grep(v.itemsArray,function(u){return v.options.itemValue(u)==v.options.itemValue(l)})[0]:l=L.grep(v.itemsArray,function(u){return v.options.itemValue(u)==l})[0]),l&&(L(".tag",v.$container).filter(function(){return L(this).data("item")===l}).remove(),L("option",v.$element).filter(function(){return L(this).data("item")===l}).remove(),v.itemsArray.splice(L.inArray(l,v.itemsArray),1)),d||v.pushVal(),v.options.maxTags>v.itemsArray.length&&v.$container.removeClass("bootstrap-tagsinput-max"),v.$element.trigger(L.Event("itemRemoved",{item:l}))},removeAll:function(){var l=this;for(L(".tag",l.$container).remove(),L("option",l.$element).remove();l.itemsArray.length>0;)l.itemsArray.pop();l.pushVal(),l.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var l=this;L(".tag",l.$container).each(function(){var d=L(this),v=d.data("item"),u=l.options.itemValue(v),I=l.options.itemText(v),y=l.options.tagClass(v);if(d.attr("class",null),d.addClass("tag "+P(y)),d.contents().filter(function(){return this.nodeType==3})[0].nodeValue=P(I),l.isSelect){var ae=L("option",l.$element).filter(function(){return L(this).data("item")===v});ae.attr("value",u)}})},items:function(){return this.itemsArray},pushVal:function(){var l=this,d=L.map(l.items(),function(v){return l.options.itemValue(v).toString()});l.$element.val(d,!0).trigger("change")},build:function(l){var d=this;d.options=L.extend({},S,l);var v=d.options.typeahead||{};d.objectItems&&(d.options.freeInput=!1),U(d.options,"itemValue"),U(d.options,"itemText"),U(d.options,"tagClass"),d.options.source&&(v.source=d.options.source),v.source&&L.fn.typeahead&&(M(v,"source"),d.$input.typeahead({source:function(u,I){function y(J){for(var ee=[],B=0;B<J.length;B++){var H=d.options.itemText(J[B]);ae[H]=J[B],ee.push(H)}I(ee)}this.map={};var ae=this.map,ie=v.source(u);L.isFunction(ie.success)?ie.success(y):L.when(ie).then(y)},updater:function(u){d.add(this.map[u])},matcher:function(u){return u.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(u){return u.sort()},highlighter:function(u){var I=new RegExp("("+this.query+")","gi");return u.replace(I,"<strong>$1</strong>")}})),d.$container.on("click",L.proxy(function(u){d.$input.focus()},d)),d.$container.on("blur","input",L.proxy(function(u){var I=L(u.target);d.add(I.val()),I.val(""),u.preventDefault()},d)),d.$container.on("keydown","input",L.proxy(function(u){var I=L(u.target),y=d.findInputWrapper();switch(u.which){case 8:if(z(I[0])===0){var ae=y.prev();ae&&d.remove(ae.data("item"))}break;case 46:if(z(I[0])===0){var ie=y.next();ie&&d.remove(ie.data("item"))}break;case 37:var J=y.prev();I.val().length===0&&J[0]&&(J.before(y),I.focus());break;case 39:var ee=y.next();I.val().length===0&&ee[0]&&(ee.after(y),I.focus());break;default:d.options.freeInput&&L.inArray(u.which,d.options.confirmKeys)>=0&&(d.add(I.val()),I.val(""),u.preventDefault())}I.attr("size",Math.max(this.inputSize,I.val().length))},d)),d.$container.on("click","[data-role=remove]",L.proxy(function(u){d.remove(L(u.target).closest(".tag").data("item")),u.stopPropagation()},d)),d.options.itemValue===S.itemValue&&(d.$element[0].tagName==="INPUT"?d.add(d.$element.val()):L("option",d.$element).each(function(){d.add(L(this).attr("value"),!0)}))},destroy:function(){var l=this;l.$container.off("keypress","input"),l.$container.off("click","[role=remove]"),l.$container.remove(),l.$element.removeData("tagsinput"),l.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var l=this.$input[0],d=this.$container[0];l&&l.parentNode!==d;)l=l.parentNode;return L(l)}},L.fn.tagsinput=function(l,d){var v=[];return this.each(function(){var u=L(this).data("tagsinput");if(!u)u=new o(this,l),L(this).data("tagsinput",u),v.push(u),this.tagName==="SELECT"&&L("option",L(this)).attr("selected","selected"),L(this).val(L(this).val());else{var I=u[l](d);I!==void 0&&v.push(I)}}),typeof l=="string"?v.length>1?v:v[0]:v},L.fn.tagsinput.Constructor=o;function U(l,d){if(typeof l[d]!="function"){var v=l[d];l[d]=function(u){return u[v]}}}function M(l,d){if(typeof l[d]!="function"){var v=l[d];l[d]=function(){return v}}}var k=L("<div />");function P(l){return l?k.text(l).html():""}function z(l){var d=0;if(document.selection){l.focus();var v=document.selection.createRange();v.moveStart("character",-l.value.length),d=v.text.length}else(l.selectionStart||l.selectionStart=="0")&&(d=l.selectionStart);return d}L(function(){L("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery)}}]);

//# sourceMappingURL=7808.a4905d4b2b3c5def138b.js.map