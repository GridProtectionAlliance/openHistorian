"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4606],{13471:(N,W,t)=>{t.d(W,{B:()=>d});var l=t(74848),r=t(32196),E=t(96540),M=t(40845),R=t(32982),O=t(56034),U=t(24293),S=t(94536),m=t(79871),c=t(10875),p=(s=>(s[s.Leading=0]="Leading",s[s.Trailing=1]="Trailing",s))(p||{});const _=({color:s=U.F,colorIndicator:v=m.Ev,position:u=0,lineStyle:C})=>{const g=(0,M.of)(a);return v===m.fX.series?(0,l.jsx)(S.p,{color:s,lineStyle:C,className:u===0?g.leading:g.trailing}):(0,l.jsx)("span",{style:{backgroundColor:s},className:(0,r.cx)(u===0?g.leading:g.trailing,(0,c.L$)(v,g))})},a=s=>({leading:(0,r.css)({marginRight:s.spacing(.5)}),trailing:(0,r.css)({marginLeft:s.spacing(.5)}),value:(0,r.css)({width:"12px",height:"12px",borderRadius:s.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,r.css)({}),pie_1_4:(0,r.css)({}),pie_2_4:(0,r.css)({}),pie_3_4:(0,r.css)({}),marker_sm:(0,r.css)({width:"4px",height:"4px",borderRadius:s.shape.radius.circle,minWidth:"4px"}),marker_md:(0,r.css)({width:"8px",height:"8px",borderRadius:s.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,r.css)({width:"12px",height:"12px",borderRadius:s.shape.radius.circle,minWidth:"12px"})});var o=(s=>(s.label="label",s.value="value",s))(o||{});const e="Copied to clipboard",i=2*1e3,n=7,d=({label:s,value:v,color:u,colorIndicator:C,colorPlacement:g=m.lJ.first,justify:x="flex-start",isActive:P=!1,marginRight:L="0px",isPinned:B,lineStyle:I,showValueScroll:T})=>{const h=(0,M.of)(f,x,L),D=T?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[A,j]=(0,E.useState)(!1),[F,z]=(0,E.useState)(null),[V,Z]=(0,E.useState)(!1),w=(0,E.useRef)(null),H=(0,E.useRef)(null);(0,E.useEffect)(()=>{let y;return V&&(y=setTimeout(()=>{Z(!1)},i)),()=>{window.clearTimeout(y)}},[V]);const J=async(y,G)=>{if(!(navigator?.clipboard&&window.isSecureContext)){$(y,G);return}try{await navigator.clipboard.writeText(y),z({[`${G}`]:y}),Z(!0)}catch{z(null)}},$=(y,G)=>{const K=document.createElement("textarea");w.current?.appendChild(K),K.value=y,K.focus(),K.select();try{document.execCommand("copy")&&(z({[`${G}`]:y}),Z(!0))}catch(Y){console.error("Unable to copy to clipboard",Y)}K.remove()},X=y=>{y.currentTarget.offsetWidth<y.currentTarget.scrollWidth&&j(!0)},Q=()=>j(!1);return s.length*n>window.innerWidth/2&&(s=s.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,l.jsxs)("div",{className:h.contentWrapper,children:[(u||s)&&(0,l.jsxs)("div",{className:h.valueWrapper,children:[u&&g===m.lJ.first&&(0,l.jsx)(_,{color:u,colorIndicator:C,lineStyle:I}),B?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(O.m,{content:s,interactive:!1,show:A,children:(0,l.jsxs)(l.Fragment,{children:[V&&F?.label&&(0,l.jsx)(R.r,{placement:"top",referenceElement:w.current,children:e}),(0,l.jsx)("div",{className:(0,r.cx)(h.label,P&&h.activeSeries,navigator?.clipboard&&h.copy),onMouseEnter:X,onMouseLeave:Q,onClick:()=>J(s,"label"),ref:w,children:s})]})})}):(0,l.jsx)("div",{className:(0,r.cx)(h.label,P&&h.activeSeries),children:s})]}),(0,l.jsxs)("div",{className:h.valueWrapper,children:[u&&g===m.lJ.leading&&(0,l.jsx)(_,{color:u,colorIndicator:C,position:p.Leading,lineStyle:I}),B?(0,l.jsxs)(l.Fragment,{children:[V&&F?.value&&(0,l.jsx)(R.r,{placement:"top",referenceElement:H.current,children:e}),(0,l.jsx)("div",{className:(0,r.cx)(h.value,P,navigator?.clipboard&&h.copy),style:D,onClick:()=>J(v?v.toString():"","value"),ref:H,children:v})]}):(0,l.jsx)("div",{className:(0,r.cx)(h.value,P),style:D,children:v}),u&&g===m.lJ.trailing&&(0,l.jsx)(_,{color:u,colorIndicator:C,position:p.Trailing,lineStyle:I})]})]})},f=(s,v,u)=>({contentWrapper:(0,r.css)({display:"flex",alignItems:"start",justifyContent:v,marginRight:u}),label:(0,r.css)({color:s.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:s.spacing(2)}),value:(0,r.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,r.css)({display:"flex",alignItems:"center"}),activeSeries:(0,r.css)({fontWeight:s.typography.fontWeightBold,color:s.colors.text.maxContrast}),copy:(0,r.css)({cursor:"pointer"})})},30249:(N,W,t)=>{t.d(W,{o:()=>a});var l=t(74848),r=t(96540),E=t(85200),M=t(1173),R=t(11261),O=t(90708),U=t(67266),S=t(81297),m=t(16895),c=t(40458);function p(o,e,i=[]){for(const n of i)if(typeof n=="function"){if(!n(o,e))return!1}else if(e[n]!==o[n])return!1;return!0}const _={x:E.sJ.get(M.Ct.firstTimeField).get({}),y:E.sJ.get(M.Ct.byTypes).get(new Set([R.PU.number,R.PU.enum]))};class a extends r.Component{constructor(e){super(e),this.getTimeRange=()=>this.props.timeRange;let i=this.prepState(e);i.alignedData=i.config.prepData([i.alignedFrame]),this.state=i,this.plotInstance=r.createRef()}prepState(e,i=!0){let n=null;const{frames:d,fields:f=_,preparePlotFrame:s,replaceVariables:v,dataLinkPostProcessor:u}=e,C=s??c.m,g=d.some(P=>P.fields.some(L=>(L.config.links?.length??0)>0)),x=C(d,{...f,y:g?()=>!0:f.y},e.timeRange);if((0,m.uY)("GraphNG",!1,"data aligned",x),x){let P=x;if(g){const B=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let I=d.map((T,h)=>({...T,fields:x.fields.filter((D,A)=>A===0||D.state?.origin?.frameIndex===h),length:x.length}));I.forEach((T,h)=>{T.fields.forEach(D=>{D.getLinks=(0,O._M)(T,D,{...D.state?.scopedVars,__dataContext:{value:{data:I,field:D,frame:T,frameIndex:h}}},v,B,u)})}),P={...x,fields:x.fields.filter((T,h)=>h===0||f.y(T,x,[x]))}}let L=this.state?.config;i&&(L=e.prepConfig(P,this.props.frames,this.getTimeRange),(0,m.uY)("GraphNG",!1,"config prepared",L)),n={alignedFrame:P,config:L},(0,m.uY)("GraphNG",!1,"data prepared",n.alignedData)}return n}componentDidUpdate(e){const{frames:i,structureRev:n,timeZone:d,cursorSync:f,propsToDiff:s}=this.props,v=!p(e,this.props,s);if(i!==e.frames||v||d!==e.timeZone||f!==e.cursorSync){let u=this.prepState(this.props,!1);u&&((this.state.config===void 0||d!==e.timeZone||f!==e.cursorSync||n!==e.structureRev||!n||v)&&(u.config=this.props.prepConfig(u.alignedFrame,this.props.frames,this.getTimeRange),(0,m.uY)("GraphNG",!1,"config recreated",u.config)),u.alignedData=u.config.prepData([u.alignedFrame]),this.setState(u))}}render(){const{width:e,height:i,children:n,renderLegend:d}=this.props,{config:f,alignedFrame:s,alignedData:v}=this.state;return f?(0,l.jsx)(U.KU,{width:e,height:i,legend:d(f),children:(u,C)=>(0,l.jsx)(S.Z,{config:f,data:v,width:u,height:C,plotRef:g=>this.plotInstance.current=g,children:n?n(f,s):null})}):null}}},40458:(N,W,t)=>{t.d(W,{m:()=>m});var l=t(11261),r=t(73060),E=t(46294);function M(c,p,_){let a,o;for(let e=0;e<p.length;e++)if(p[e]==null)o==null&&a!=null&&(o=e);else{if(o!=null&&a!=null){if(c[e]-a<_)for(;o<e;)p[o++]=void 0;o=null}a=c[e]}return p}var R=t(52622);function O(c){return c.type===l.PU.number&&c.config.custom?.drawStyle===R.GR.Bars&&!c.config.custom?.hideFrom?.viz}function U(c,p){return c.fields.find(_=>p!=null?_.name===p:_.type===l.PU.time)}function S(c,p){const _=U(c,p);let a=_?.values;for(let o=0;o<c.fields.length;o++){let e=c.fields[o];if(e===_||O(e))continue;let i=e.config.custom?.spanNulls;typeof i=="number"&&i!==-1&&a&&(e.values=M(a,e.values,i))}return c}function m(c,p,_){let a;e:for(let n of c)for(let d of n.fields)if(p.x(d,n,c)){a=d;break e}c=c.map(n=>a?.state?.nullThresholdApplied?n:(0,E.M)({frame:n,refFieldName:a.name,refFieldPseudoMin:_?.from.valueOf(),refFieldPseudoMax:_?.to.valueOf()}));let o=c.reduce((n,d)=>n+d.fields.reduce((f,s)=>f+(O(s)?1:0),0),0),e=1/0;o>1&&c.forEach(n=>{if(!n.fields.some(O))return;const d=a.values;for(let f=0;f<d.length;f++)f>0&&(e=Math.min(e,d[f]-d[f-1]))});let i=(0,r.Fd)({frames:c,joinBy:p.x,keep:p.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:n=>{if(O(n))return r.WO;let d=n.config.custom?.spanNulls;return d===!0?r.RC:d===-1?r.WO:r.JI}});return i?(i=S(i,a.name),e!==1/0&&(i.fields.forEach((n,d)=>{let f=n.values;if(d===0){let s=f[f.length-1];f.push(s+e,s+2*e)}else O(n)?f.push(null,null):f.push(void 0,void 0)}),i.length+=2),i):null}},82389:(N,W,t)=>{t.d(W,{I:()=>p});var l=t(74848),r=t(96540),E=t(24293),M=t(11261),R=t(52622),O=t(67266),U=t(96516),S=t(30249),m=t(28895);const c=["rowHeight","colWidth","showValue","mergeValues","alignValue","tooltip","paginationRev"];class p extends r.Component{constructor(){super(...arguments),this.getValueColor=(a,o,e)=>{const i=this.props.frames[a]?.fields[o];if(i?.display){const n=i.display(e);if(n.color)return n.color}return E.F},this.prepConfig=(a,o,e)=>(0,m.iE)({frame:a,getTimeRange:e,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:a.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor,hoverMulti:this.props.tooltip?.mode===R.$N.Multi}),this.renderLegend=a=>{const{legend:o,legendItems:e}=this.props;return!a||!e||!o||o.showLegend===!1?null:(0,l.jsx)(O.KU.Legend,{placement:o.placement,children:(0,l.jsx)(U.t,{placement:o.placement,items:e,displayMode:o.displayMode,readonly:!0})})}}render(){return(0,l.jsx)(S.o,{...this.props,fields:{x:a=>a.type===M.PU.time,y:a=>a.type===M.PU.number||a.type===M.PU.boolean||a.type===M.PU.string||a.type===M.PU.enum},prepConfig:this.prepConfig,propsToDiff:c,renderLegend:this.renderLegend})}}},87232:(N,W,t)=>{t.d(W,{K:()=>_});var l=t(74848),r=t(11261),E=t(52622),M=t(11389),R=t(75073),O=t(52415),U=t(55307),S=t(10875),m=t(28895),c=t(21164),p=t(82915);const _=({series:a,dataIdxs:o,seriesIdx:e,mode:i=E.$N.Single,sortOrder:n=E.xB.None,isPinned:d,annotate:f,timeRange:s,withDuration:v,maxHeight:u,replaceVariables:C})=>{const g=a.fields[0],x=e!=null?o[e]:o.find(T=>T!=null),P=g.display(g.values[x]).text;i=d?E.$N.Single:i;const L=(0,S.cp)(a.fields,g,o,e,i,n);if(v&&i===E.$N.Single){const T=a.fields[e],h=(0,m.GY)(T,x);let D;h&&(D=g.values[h]);const A=g.values[x];let j;if(D)j=D&&(0,m.c5)(D-A);else{const F=s.to.valueOf();j=(0,m.c5)(F-A)}L.push({label:"Duration",value:j})}let B;if(d&&e!=null){const T=a.fields[e],h=o[e],D=(0,c.u)(T,h),A=(0,c.O)(a,T,C,h);B=(0,l.jsx)(R.S,{dataLinks:D,annotate:f,actions:A})}const I={label:g.type===r.PU.time?"":g.state?.displayName??g.name,value:P};return(0,l.jsxs)(U.i,{children:[(0,l.jsx)(O.A,{item:I,isPinned:d}),(0,l.jsx)(M.o,{items:L,isPinned:d,scrollable:(0,p.T5)({mode:i,maxHeight:u}),maxHeight:u}),B]})}}}]);

//# sourceMappingURL=4606.b79b4f6137533589f0f3.js.map