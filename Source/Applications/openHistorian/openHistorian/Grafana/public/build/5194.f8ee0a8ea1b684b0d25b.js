"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5194],{76365:(De,ie,v)=>{v.d(ie,{S6:()=>_,Jz:()=>de,oA:()=>ge,Ik:()=>ue});var t=v(11261),d=v(75972),q=v(57875),h=v(5546),k=v(2543);function ne(P,r){const m=Y(P);return J(m,r,"parents")}function Y(P){return P.map(r=>{if(!r.parents?.length)return r;const m={...r,children:[]},S=[{child:m,parent:r.parents[0]}];for(;S.length;){const y=S.shift(),N={...y.parent,children:y.child?[y.child]:[],parents:[]};y.child&&(N.value=y.child.value,y.child.parents=[N]),y.parent.parents?.length&&S.push({child:N,parent:y.parent.parents[0]})}return m})}function J(P,r,m="children"){const S=m==="parents"?"children":"parents",y=[],N=[{previous:void 0,items:P,level:0}];for(;N.length;){const D=N.shift(),E=D.items.flatMap(O=>O.itemIndexes),$={value:D.items.reduce((O,we)=>O+we.value,0),itemIndexes:E,children:[],parents:[],start:0,level:D.level};if(y[D.level]=y[D.level]||[],y[D.level].push($),D.previous){$[S]=[D.previous];const O=D.previous[m]?.reduce((we,ke)=>we+ke.value,0)||0;$.start=D.previous.start+O,D.previous[m].push($)}const fe=D.items.flatMap(O=>O[m]||[]),K=(0,k.groupBy)(fe,O=>r.getLabel(O.itemIndexes[0]));for(const O of Object.values(K))N.push({previous:$,items:O,level:D.level+1})}return m==="parents"&&(y.reverse(),y.forEach((D,E)=>{D.forEach($=>{$.level=E})})),y}function re(P,r){const m=[];let S=0,y;const N={};for(let E=0;E<P.data.length;E++){const $=P.getLevel(E),fe=E>0?P.getLevel(E-1):void 0;if(m[$]=m[$]||[],fe&&fe>=$){const O=m[$][m[$].length-1];S=O.start+P.getValue(O.itemIndexes[0])+P.getValueRight(O.itemIndexes[0]),y=O.parents[0]}const K={itemIndexes:[E],value:P.getValue(E)+P.getValueRight(E),valueRight:P.isDiffFlamegraph()?P.getValueRight(E):void 0,start:S,parents:y&&[y],children:[],level:$};N[P.getLabel(E)]?N[P.getLabel(E)].push(K):N[P.getLabel(E)]=[K],y&&y.children.push(K),y=K,m[$].push(K)}const D=new ye(r?.collapsingThreshold);return r?.collapsing&&D.addTree(m[0][0]),[m,N,D.getCollapsedMap()]}class _{constructor(r){this.map=new Map,this.map=r||new Map}get(r){return this.map.get(r)}keys(){return this.map.keys()}values(){return this.map.values()}size(){return this.map.size}setCollapsedStatus(r,m){const S=new Map(this.map),y=this.map.get(r),N={...y,collapsed:m};for(const D of y.items)S.set(D,N);return new _(S)}setAllCollapsedStatus(r){const m=new Map(this.map);for(const S of this.map.keys()){const N={...this.map.get(S),collapsed:r};m.set(S,N)}return new _(m)}}class ye{constructor(r){this.map=new Map,this.threshold=.99,r!==void 0&&(this.threshold=r)}addTree(r){const m=[r];for(;m.length;){const S=m.shift();S.parents?.length&&this.addItem(S,S.parents[0]),S.children.length&&m.unshift(...S.children)}}addItem(r,m){if(m&&r.value>m.value*this.threshold&&m.children.length===1)if(this.map.has(m)){const S=this.map.get(m);this.map.set(r,S),S.items.push(r)}else{const S={items:[m,r],collapsed:!0};this.map.set(m,S),this.map.set(r,S)}}getCollapsedMap(){return new _(this.map)}}function ue(P){return P.missingFields.length?`Data is missing fields: ${P.missingFields.join(", ")}`:P.wrongTypeFields.length?`Data has fields of wrong type: ${P.wrongTypeFields.map(r=>`${r.name} has type ${r.type} but should be ${r.expectedTypes.join(" or ")}`).join(", ")}`:""}function ge(P){const r=[["label",[t.PU.string,t.PU.enum]],["level",[t.PU.number]],["value",[t.PU.number]],["self",[t.PU.number]]],m=[],S=[];for(const y of r){const[N,D]=y,E=P?.fields.find($=>$.name===N);if(!E){m.push(N);continue}D.includes(E.type)||S.push({name:N,expectedTypes:D,type:E.type})}if(m.length>0||S.length>0)return{wrongTypeFields:S,missingFields:m}}class de{constructor(r,m,S=(0,d.a)()){this.data=r,this.options=m;const y=ge(r);if(y)throw new Error(ue(y));if(this.labelField=r.fields.find(D=>D.name==="label"),this.levelField=r.fields.find(D=>D.name==="level"),this.valueField=r.fields.find(D=>D.name==="value"),this.selfField=r.fields.find(D=>D.name==="self"),this.valueRightField=r.fields.find(D=>D.name==="valueRight"),this.selfRightField=r.fields.find(D=>D.name==="selfRight"),(this.valueField||this.selfField)&&!(this.valueField&&this.selfField))throw new Error("Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.");const N=this.labelField?.config?.type?.enum;N?(this.labelDisplayProcessor=(0,q.J)({field:this.labelField,theme:S}),this.uniqueLabels=N.text||[]):(this.labelDisplayProcessor=D=>({text:D+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,q.J)({field:this.valueField,theme:S})}isDiffFlamegraph(){return!!(this.valueRightField&&this.selfRightField)}getLabel(r){return this.labelDisplayProcessor(this.labelField.values[r]).text}getLevel(r){return this.levelField.values[r]}getValue(r){return me(this.valueField,r)}getValueRight(r){return me(this.valueRightField,r)}getSelf(r){return me(this.selfField,r)}getSelfRight(r){return me(this.selfRightField,r)}getSelfDisplay(r){return this.valueDisplayProcessor(this.getSelf(r))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case h.Zk.Bytes:return"RAM";case h.Zk.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(r){const m=this.getNodesWithLabel(r);if(!m?.length)return[[],[]];const S=ne(m,this),y=J(m,this);return[S,y]}getNodesWithLabel(r){return this.initLevels(),this.uniqueLabelsMap[r]}getCollapsedMap(){return this.initLevels(),this.collapsedMap}initLevels(){if(!this.levels){const[r,m,S]=re(this,this.options);this.levels=r,this.uniqueLabelsMap=m,this.collapsedMap=S}}}function me(P,r){return P?(typeof r=="number"?[r]:r).reduce((S,y)=>S+P.values[y],0):0}},85194:(De,ie,v)=>{v.d(ie,{A:()=>Xt});var t=v(74848),d=v(32196),q=v(53076),h=v(96540),k=v(49185),ne=v(60578),Y=v(14578);const J=22*window.devicePixelRatio,re=10*window.devicePixelRatio,_=.5*window.devicePixelRatio,ye=20*window.devicePixelRatio,ue=.5*window.devicePixelRatio,ge=4*window.devicePixelRatio,de=3*window.devicePixelRatio,me=3*window.devicePixelRatio,P=4*window.devicePixelRatio,r=2*window.devicePixelRatio,m=800,S=120;var y=v(64539),N=v(59093),D=v(28122);const $=({data:e,itemData:s,onMenuItemClick:l,onItemFocus:a,onSandwich:n,collapseConfig:c,onExpandGroup:i,onCollapseGroup:u,onExpandAllGroups:o,onCollapseAllGroups:f,getExtraContextMenuButtons:x,collapsing:b,allGroupsExpanded:g,allGroupsCollapsed:w,selectedView:p,search:j})=>{function R(){const C=x?.(s,e.data,{selectedView:p,isDiff:e.isDiffFlamegraph(),search:j,collapseConfig:c})||[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.D,{label:"Focus block",icon:"eye",onClick:()=>{a(),l()}}),(0,t.jsx)(y.D,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(s.label).then(()=>{l()})}}),(0,t.jsx)(y.D,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{n(),l()}}),C.map(({label:F,icon:T,onClick:L})=>(0,t.jsx)(y.D,{label:F,icon:T,onClick:()=>L()},F)),b&&(0,t.jsxs)(N.r,{label:"Grouping",children:[c?c.collapsed?(0,t.jsx)(y.D,{label:"Expand group",icon:"angle-double-down",onClick:()=>{i(),l()}}):(0,t.jsx)(y.D,{label:"Collapse group",icon:"angle-double-up",onClick:()=>{u(),l()}}):null,!g&&(0,t.jsx)(y.D,{label:"Expand all groups",icon:"angle-double-down",onClick:()=>{o(),l()}}),!w&&(0,t.jsx)(y.D,{label:"Collapse all groups",icon:"angle-double-up",onClick:()=>{f(),l()}})]})]})}return(0,t.jsx)("div",{"data-testid":"contextMenu",children:(0,t.jsx)(D.t,{renderMenuItems:R,x:s.posX+10,y:s.posY,focusOnOpen:!1})})};var fe=v(83195),K=v(40845),O=v(48840),we=v(17464),ke=v(69503);const Ue=({data:e,item:s,totalTicks:l,position:a,collapseConfig:n})=>{const c=(0,K.of)(Je);if(!(s&&a))return null;let i;if(e.isDiffFlamegraph()){const u=Ye(e,s,l);i=(0,t.jsx)(O.j,{className:c.tooltipTable,columns:[{id:"label",header:""},{id:"baseline",header:"Baseline"},{id:"comparison",header:"Comparison"},{id:"diff",header:"Diff"}],data:u,getRowId:o=>o.rowId})}else{const u=Xe(e,s,l);i=(0,t.jsxs)("p",{className:c.lastParagraph,children:[u.unitTitle,(0,t.jsx)("br",{}),"Total: ",(0,t.jsx)("b",{children:u.unitValue})," (",u.percentValue,"%)",(0,t.jsx)("br",{}),"Self: ",(0,t.jsx)("b",{children:u.unitSelf})," (",u.percentSelf,"%)",(0,t.jsx)("br",{}),"Samples: ",(0,t.jsx)("b",{children:u.samples})]})}return(0,t.jsx)(we.ZL,{children:(0,t.jsx)(ke.o,{className:c.tooltipContainer,position:a,offset:{x:15,y:0},children:(0,t.jsxs)("div",{className:c.tooltipContent,children:[(0,t.jsxs)("p",{className:c.tooltipName,children:[e.getLabel(s.itemIndexes[0]),n&&n.collapsed?(0,t.jsxs)("span",{children:[(0,t.jsx)("br",{}),"and ",n.items.length," similar items"]}):""]}),i]})})})},Xe=(e,s,l)=>{const a=e.valueDisplayProcessor(s.value),n=e.getSelfDisplay(s.itemIndexes),c=Math.round(1e4*(a.numeric/l))/100,i=Math.round(1e4*(n.numeric/l))/100;let u=a.text+a.suffix,o=n.text+n.suffix;const f=e.getUnitTitle();return f==="Count"&&(a.suffix||(u=a.text),n.suffix||(o=n.text)),{percentValue:c,percentSelf:i,unitTitle:f,unitValue:u,unitSelf:o,samples:a.numeric.toLocaleString()}},Ye=(e,s,l)=>{const n=e.getLevels()[0][0].valueRight,c=l-n,i=s.value-s.valueRight,u=Math.round(1e4*i/c)/100,o=Math.round(1e4*s.valueRight/n)/100,f=(o-u)/u*100,x=Be(e,e.valueDisplayProcessor(i)),b=Be(e,e.valueDisplayProcessor(s.valueRight)),g=(0,fe.j_)("short");return[{rowId:"1",label:"% of total",baseline:u+"%",comparison:o+"%",diff:g(f).text+"%"},{rowId:"2",label:"Value",baseline:x,comparison:b,diff:Be(e,e.valueDisplayProcessor(s.valueRight-i))},{rowId:"3",label:"Samples",baseline:g(i).text,comparison:g(s.valueRight).text,diff:g(s.valueRight-i).text}]};function Be(e,s){let l=s.text+s.suffix;return e.getUnitTitle()==="Count"&&(s.suffix||(l=s.text)),l}const Je=e=>({tooltipContainer:(0,d.css)({title:"tooltipContainer",overflow:"hidden"}),tooltipContent:(0,d.css)({title:"tooltipContent",fontSize:e.typography.bodySmall.fontSize,width:"100%"}),tooltipName:(0,d.css)({title:"tooltipName",marginTop:0,wordBreak:"break-all"}),lastParagraph:(0,d.css)({title:"lastParagraph",marginBottom:0}),name:(0,d.css)({title:"name",marginBottom:"10px"}),tooltipTable:(0,d.css)({title:"tooltipTable",maxWidth:"400px"})}),Ke=Ue;var B=v(84140),I=v(5546),Ze=v(55995);function Qe(e,s=0){let l,a,n,c,i,u,o,f;for(l=e.length&3,a=e.length-l,n=s,i=3432918353,u=461845907,f=0;f<a;)o=e.charCodeAt(f)&255|(e.charCodeAt(++f)&255)<<8|(e.charCodeAt(++f)&255)<<16|(e.charCodeAt(++f)&255)<<24,++f,o=(o&65535)*i+(((o>>>16)*i&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(o&65535)*u+(((o>>>16)*u&65535)<<16)&4294967295,n^=o,n=n<<13|n>>>19,c=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(c&65535)+27492+(((c>>>16)+58964&65535)<<16);switch(o=0,l){case 3:o^=(e.charCodeAt(f+2)&255)<<16;case 2:o^=(e.charCodeAt(f+1)&255)<<8;case 1:o^=e.charCodeAt(f)&255;default:o=(o&65535)*i+(((o>>>16)*i&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(o&65535)*u+(((o>>>16)*u&65535)<<16)&4294967295,n^=o}return n^=e.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}const he=[(0,B.A)({h:24,s:69,l:60}),(0,B.A)({h:34,s:65,l:65}),(0,B.A)({h:194,s:52,l:61}),(0,B.A)({h:163,s:45,l:55}),(0,B.A)({h:211,s:48,l:60}),(0,B.A)({h:246,s:40,l:65}),(0,B.A)({h:305,s:63,l:79}),(0,B.A)({h:47,s:100,l:73}),(0,B.A)({r:183,g:219,b:171}),(0,B.A)({r:244,g:213,b:152}),(0,B.A)({r:78,g:146,b:249}),(0,B.A)({r:249,g:186,b:143}),(0,B.A)({r:242,g:145,b:145}),(0,B.A)({r:130,g:181,b:216}),(0,B.A)({r:229,g:168,b:226}),(0,B.A)({r:174,g:162,b:224}),(0,B.A)({r:154,g:196,b:138}),(0,B.A)({r:242,g:201,b:109}),(0,B.A)({r:101,g:197,b:219}),(0,B.A)({r:249,g:147,b:78}),(0,B.A)({r:234,g:100,b:96}),(0,B.A)({r:81,g:149,b:206}),(0,B.A)({r:214,g:131,b:206}),(0,B.A)({r:128,g:110,b:183})],qe=Ie(1,100,0,1),_e=Ie(100,100,0,1),et=`linear-gradient(90deg, ${qe} 0%, ${_e} 100%)`,tt=`linear-gradient(90deg, ${he[0]} 0%, ${he[2]} 30%, ${he[6]} 50%, ${he[7]} 70%, ${he[8]} 100%)`;function Ie(e,s,l,a){const n=Math.min(1,e/s/(a-l)),c=50-50*n,i=65+7*n;return(0,B.A)({h:c,s:100,l:i})}function st(e,s){const l=it(e),n=Qe(l||"",0)%he.length;let c=he[n].clone();return s.isLight&&(c=c.brighten(15)),c}const ve=["rgb(0, 170, 0)","rgb(148, 142, 142)","rgb(200, 0, 0)"],lt=`linear-gradient(90deg, ${ve[0]} 0%, ${ve[1]} 50%, ${ve[2]} 100%)`,xe=["rgb(26, 133, 255)","rgb(148, 142, 142)","rgb(220, 50, 32)"],nt=`linear-gradient(90deg, ${xe[0]} 0%, ${xe[1]} 50%, ${xe[2]} 100%)`;function at(e,s,l,a,n){const c=n===I.yU.Default?ve:xe,i=(0,Ze.scaleLinear)().domain([-100,0,100]).range(c),u=e-s,o=l-a;if(a===0||o===0){const w=i(0);return(0,B.A)(w)}const f=Math.round(1e4*u/o)/100,b=(Math.round(1e4*s/a)/100-f)/f*100,g=i(b);return(0,B.A)(g)}const ot=[["phpspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>([^\/]*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function it(e){for(const[s,l]of ot){const a=e.match(l);if(a)return a.groups?.packageName||""}}function rt(e){const{canvasRef:s,data:l,root:a,depth:n,direction:c,wrapperWidth:i,rangeMin:u,rangeMax:o,matchedLabels:f,textAlign:x,totalViewTicks:b,totalColorTicks:g,totalTicksRight:w,colorScheme:p,focusedItemData:j,collapsedMap:R}=e,C=ht(s,i,n),F=(0,K.$j)(),T=(0,h.useMemo)(()=>{const M=(0,B.A)(F.colors.background.secondary);return F.isLight?M.darken(10).toHexString():M.lighten(10).toHexString()},[F]),L=ft(g,w,p,F,T,u,o,f,j?j.item.level:0),A=ct(C,l,L,x,R);(0,h.useEffect)(()=>{if(!C)return;C.clearRect(0,0,C.canvas.width,C.canvas.height);const M=new Path2D;dt(a,c,l,b,u,o,i,R,(V,H,ee,Z,U,te,se)=>{se?M.rect(H,ee,Z,U):A(V,H,ee,Z,U,te)}),C.fillStyle=T,C.fill(M)},[C,l,a,i,u,o,b,c,A,R,T])}function ct(e,s,l,a,n){return(0,h.useMemo)(()=>e?(i,u,o,f,x,b)=>{e.beginPath(),e.rect(u+ue,o,f,x),e.fillStyle=l(i,b,!1),e.stroke(),e.fill();const g=n.get(i);let w=b;g&&g.collapsed&&(w=`(${g.items.length}) `+b),f>=ye&&(g?(Ee(e,s,w,i,f,a==="left"?u+P+r:u,o,a),ut(e,u,o,x,i,g)):Ee(e,s,w,i,f,u,o,a))}:()=>{},[e,l,a,s,n])}function ut(e,s,l,a,n,c){const i=s+P;e.beginPath(),e.rect(s,l,i-s+de+me,a),e.fill(),e.beginPath(),c.collapsed?e.rect(i,l+a/4,de,a/2):c.items[0]===n?e.rect(i,l+a/2,de,a/2):c.items[c.items.length-1]===n?e.rect(i,l,de,a/2):e.rect(i,l,de,a),e.fillStyle="#666",e.fill()}function dt(e,s,l,a,n,c,i,u,o){const f=[];f.push({item:e,levelOffset:0});const x=i*window.devicePixelRatio/a/(c-n);let b;for(;f.length>0;){const{item:g,levelOffset:w}=f.shift();let p=g.value;const j=p*x<=re,R=p*x-(j?0:ue*2),C=J;if(R<_)continue;let F=0,T=!1;const L=u.get(g),A=L&&L.collapsed;if(A&&b===L.items[0]?(F=s==="children"?-1:1,T=!0):b=void 0,!T){const V=Ne(g.start,a,n,x),H=(g.level+w)*J;let ee=l.getLabel(g.itemIndexes[0]);A&&(b=g),o(g,V,H,R,C,ee,j)}const M=s==="children"?g.children:g.parents;M&&f.unshift(...M.map(V=>({item:V,levelOffset:w+F})))}}function ft(e,s,l,a,n,c,i,u,o){return(0,h.useCallback)(function(x,b,g){if(g&&!u)return n;const w=x.valueRight!==void 0&&(l===I.yU.Default||l===I.yU.DiffColorBlind)?at(x.value,x.valueRight,e,s,l):l===I.zM.ValueBased?Ie(x.value,e,c,i):st(b,a);return u?u.has(b)?w.toHslString():n:x.level>o-1?w.toHslString():w.lighten(15).toHslString()},[e,s,l,a,c,i,u,o,n])}function ht(e,s,l){const[a,n]=(0,h.useState)();return(0,h.useEffect)(()=>{if(!(l&&e.current))return;const c=e.current.getContext("2d"),i=J*l;e.current.width=Math.round(s*window.devicePixelRatio),e.current.height=Math.round(i),e.current.style.width=`${s}px`,e.current.style.height=`${i/window.devicePixelRatio}px`,c.textBaseline="middle",c.font=12*window.devicePixelRatio+"px monospace",c.strokeStyle="white",n(c)},[e,n,s,l]),a}function Ee(e,s,l,a,n,c,i,u){e.save(),e.clip(),e.fillStyle="#222";const o=s.valueDisplayProcessor(a.value),f=o.suffix?o.text+o.suffix:o.text,x=e.measureText(l),b=n-ge;let g=`${l} (${f})`,w=Math.max(c,0)+ge;x.width>b&&(e.textAlign=u,u==="right"&&(g=l,w=c+n-ge)),e.fillText(g,w,i+J/2+2),e.restore()}function Ne(e,s,l,a){return(e-s*l)*a}const pt=({data:e,rangeMin:s,rangeMax:l,matchedLabels:a,setRangeMin:n,setRangeMax:c,onItemFocused:i,focusedItemData:u,textAlign:o,onSandwich:f,colorScheme:x,totalProfileTicks:b,totalProfileTicksRight:g,totalViewTicks:w,root:p,direction:j,depth:R,showFlameGraphOnly:C,collapsedMap:F,setCollapsedMap:T,collapsing:L,getExtraContextMenuButtons:A,selectedView:M,search:V})=>{const H=gt(),[ee,{width:Z}]=(0,k.A)(),U=(0,h.useRef)(null),[te,se]=(0,h.useState)(),[z,Q]=(0,h.useState)();rt({canvasRef:U,colorScheme:x,data:e,focusedItemData:u,root:p,direction:j,depth:R,rangeMax:l,rangeMin:s,matchedLabels:a,textAlign:o,totalViewTicks:w,totalColorTicks:e.isDiffFlamegraph()?b:w,totalTicksRight:g,wrapperWidth:Z,collapsedMap:F});const ce=(0,h.useCallback)(G=>{se(void 0);const oe=U.current.clientWidth/w/(l-s),le=ze({x:G.nativeEvent.offsetX,y:G.nativeEvent.offsetY},p,j,R,oe,w,s,F);Q(le?{posY:G.clientY,posX:G.clientX,item:le,label:e.getLabel(le.itemIndexes[0])}:void 0)},[e,s,l,w,p,j,R,F]),[Te,W]=(0,h.useState)(),pe=(0,h.useCallback)(G=>{if(z===void 0){se(void 0),W(void 0);const oe=U.current.clientWidth/w/(l-s),le=ze({x:G.nativeEvent.offsetX,y:G.nativeEvent.offsetY},p,j,R,oe,w,s,F);le&&(W({x:G.clientX,y:G.clientY}),se(le))}},[s,l,w,z,W,p,j,R,F]),ae=(0,h.useCallback)(()=>{se(void 0)},[]);return(0,h.useEffect)(()=>{const G=oe=>{oe.target instanceof HTMLElement&&oe.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&Q(void 0)};return window.addEventListener("click",G),()=>window.removeEventListener("click",G)},[Q]),(0,t.jsxs)("div",{className:H.graph,children:[(0,t.jsx)("div",{className:H.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:ee,children:(0,t.jsx)("canvas",{ref:U,"data-testid":"flameGraph",onClick:ce,onMouseMove:pe,onMouseLeave:ae})}),(0,t.jsx)(Ke,{position:Te,item:te,data:e,totalTicks:w,collapseConfig:te?F.get(te):void 0}),!C&&z&&(0,t.jsx)($,{data:e,itemData:z,collapsing:L,collapseConfig:F.get(z.item),onMenuItemClick:()=>{Q(void 0)},onItemFocus:()=>{n(z.item.start/w),c((z.item.start+z.item.value)/w),i(z)},onSandwich:()=>{f(e.getLabel(z.item.itemIndexes[0]))},onExpandGroup:()=>{T(F.setCollapsedStatus(z.item,!1))},onCollapseGroup:()=>{T(F.setCollapsedStatus(z.item,!0))},onExpandAllGroups:()=>{T(F.setAllCollapsedStatus(!1))},onCollapseAllGroups:()=>{T(F.setAllCollapsedStatus(!0))},allGroupsCollapsed:Array.from(F.values()).every(G=>G.collapsed),allGroupsExpanded:Array.from(F.values()).every(G=>!G.collapsed),getExtraContextMenuButtons:A,selectedView:M,search:V})]})},gt=()=>({graph:(0,d.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),canvasContainer:(0,d.css)({label:"canvasContainer",display:"flex"}),canvasWrapper:(0,d.css)({label:"canvasWrapper",cursor:"pointer",flex:1,overflow:"hidden"}),sandwichMarker:(0,d.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerIcon:(0,d.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),ze=(e,s,l,a,n,c,i,u)=>{let o=s,f=l==="children"?0:a-1;const x=Math.floor(e.y/(J/window.devicePixelRatio));let b;for(;o;){const g=o;if(o=void 0,f===x){b=g;break}const w=l==="children"?g.children:g.parents||[];for(const p of w){const j=Ne(p.start,c,i,n),R=Ne(p.start+p.value,c,i,n);if(j<=e.x&&e.x<R){o=p;const C=u.get(p);(!C||!C.collapsed||C.items[0]===p)&&(f=f+(l==="children"?1:-1));break}}}return b},Ae=pt;var Re=v(29158);const $e=(0,h.memo)(({data:e,focusedItem:s,totalTicks:l,sandwichedLabel:a,onFocusPillClick:n,onSandwichPillClick:c})=>{const i=(0,K.of)(mt),u=[],o=(0,fe.j_)("short")(l),f=e.valueDisplayProcessor(l);let x=f.text+f.suffix;const b=e.getUnitTitle();if(b==="Count"&&(f.suffix||(x=f.text)),u.push((0,t.jsxs)("div",{className:i.metadataPill,children:[x," | ",o.text,o.suffix," samples (",b,")"]},"default")),a&&u.push((0,t.jsxs)("span",{children:[(0,t.jsx)(Y.I,{size:"sm",name:"angle-right"}),(0,t.jsxs)("div",{className:i.metadataPill,children:[(0,t.jsx)(Y.I,{size:"sm",name:"gf-show-context"})," ",(0,t.jsx)("span",{className:i.metadataPillName,children:a.substring(a.lastIndexOf("/")+1)}),(0,t.jsx)(Re.K,{className:i.pillCloseButton,name:"times",size:"sm",onClick:c,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})]})]},"sandwich")),s){const g=Math.round(1e4*(s.item.value/l))/100;u.push((0,t.jsxs)("span",{children:[(0,t.jsx)(Y.I,{size:"sm",name:"angle-right"}),(0,t.jsxs)("div",{className:i.metadataPill,children:[(0,t.jsx)(Y.I,{size:"sm",name:"eye"})," ",g,"% of total",(0,t.jsx)(Re.K,{className:i.pillCloseButton,name:"times",size:"sm",onClick:n,tooltip:"Remove focus","aria-label":"Remove focus"})]})]},"focus"))}return(0,t.jsx)("div",{className:i.metadata,children:u})});$e.displayName="FlameGraphMetadata";const mt=e=>({metadataPill:(0,d.css)({label:"metadataPill",display:"inline-flex",alignItems:"center",background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(8),padding:e.spacing(.5,1),fontSize:e.typography.bodySmall.fontSize,fontWeight:e.typography.fontWeightMedium,lineHeight:e.typography.bodySmall.lineHeight,color:e.colors.text.secondary}),pillCloseButton:(0,d.css)({label:"pillCloseButton",verticalAlign:"text-bottom",margin:e.spacing(0,.5)}),metadata:(0,d.css)({margin:"8px 0",textAlign:"center"}),metadataPillName:(0,d.css)({label:"metadataPillName",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginLeft:e.spacing(.5)})}),vt=$e,xt=({data:e,rangeMin:s,rangeMax:l,matchedLabels:a,setRangeMin:n,setRangeMax:c,onItemFocused:i,focusedItemData:u,textAlign:o,onSandwich:f,sandwichItem:x,onFocusPillClick:b,onSandwichPillClick:g,colorScheme:w,showFlameGraphOnly:p,getExtraContextMenuButtons:j,collapsing:R,selectedView:C,search:F,collapsedMap:T,setCollapsedMap:L})=>{const A=bt(),[M,V]=(0,h.useState)(),[H,ee]=(0,h.useState)(),[Z,U]=(0,h.useState)(0),[te,se]=(0,h.useState)(),[z,Q]=(0,h.useState)(0);if((0,h.useEffect)(()=>{if(e){let W=e.getLevels(),pe=W.length?W[0][0].value:0,ae=W.length?W[0][0].valueRight:void 0,G=pe,oe;if(x){const[le,Ce]=e.getSandwichLevels(x);W=Ce,oe=le,G=Ce[0]?.[0]?.value??0}V(W),ee(oe),U(pe),se(ae),Q(G)}},[e,x]),!M)return null;const ce={data:e,rangeMin:s,rangeMax:l,matchedLabels:a,setRangeMin:n,setRangeMax:c,onItemFocused:i,focusedItemData:u,textAlign:o,onSandwich:f,colorScheme:w,totalProfileTicks:Z,totalProfileTicksRight:te,totalViewTicks:z,showFlameGraphOnly:p,collapsedMap:T,setCollapsedMap:L,getExtraContextMenuButtons:j,collapsing:R,search:F,selectedView:C},Te=H?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:A.sandwichCanvasWrapper,children:[(0,t.jsxs)("div",{className:A.sandwichMarker,children:["Callers",(0,t.jsx)(Y.I,{className:A.sandwichMarkerIcon,name:"arrow-down"})]}),(0,t.jsx)(Ae,{...ce,root:H[H.length-1][0],depth:H.length,direction:"parents",collapsing:!1})]}),(0,t.jsxs)("div",{className:A.sandwichCanvasWrapper,children:[(0,t.jsxs)("div",{className:(0,d.cx)(A.sandwichMarker,A.sandwichMarkerCalees),children:[(0,t.jsx)(Y.I,{className:A.sandwichMarkerIcon,name:"arrow-up"}),"Callees"]}),(0,t.jsx)(Ae,{...ce,root:M[0][0],depth:M.length,direction:"children",collapsing:!1})]})]}):(0,t.jsx)(Ae,{...ce,root:M[0][0],depth:M.length,direction:"children"});return(0,t.jsxs)("div",{className:A.graph,children:[(0,t.jsx)(vt,{data:e,focusedItem:u,sandwichedLabel:x,totalTicks:z,onFocusPillClick:b,onSandwichPillClick:g}),Te]})},bt=()=>({graph:(0,d.css)({label:"graph",overflow:"auto",flexGrow:1,flexBasis:"50%"}),sandwichCanvasWrapper:(0,d.css)({label:"sandwichCanvasWrapper",display:"flex",marginBottom:`${J/window.devicePixelRatio}px`}),sandwichMarker:(0,d.css)({label:"sandwichMarker",writingMode:"vertical-lr",transform:"rotate(180deg)",overflow:"hidden",whiteSpace:"nowrap"}),sandwichMarkerCalees:(0,d.css)({label:"sandwichMarkerCalees",textAlign:"right"}),sandwichMarkerIcon:(0,d.css)({label:"sandwichMarkerIcon",verticalAlign:"baseline"})}),Ct=xt;var We=v(76365),yt=v(75198),wt=v(80292),Se=v(55852),St=v(10354),Ft=v(19727),Oe=v(94354),be=v(38138),Tt=v(83122);const jt=({search:e,setSearch:s,selectedView:l,setSelectedView:a,containerWidth:n,onReset:c,textAlign:i,onTextAlignChange:u,showResetButton:o,colorScheme:f,onColorSchemeChange:x,stickyHeader:b,extraHeaderElements:g,vertical:w,isDiffMode:p,setCollapsedMap:j,collapsedMap:R})=>{const C=(0,K.of)(He),[F,T]=kt(e,s),L=F!==""?(0,t.jsx)(Se.$n,{icon:"times",fill:"text",size:"sm",onClick:()=>{s(""),T("")},children:"Clear"}):null;return(0,t.jsxs)("div",{className:(0,d.cx)(C.header,{[C.stickyHeader]:b}),children:[(0,t.jsx)("div",{className:C.inputContainer,children:(0,t.jsx)(St.p,{value:F||"",onChange:A=>{T(A.currentTarget.value)},placeholder:"Search...",suffix:L})}),(0,t.jsxs)("div",{className:C.rightContainer,children:[o&&(0,t.jsx)(Se.$n,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{c()},className:C.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),(0,t.jsx)(Dt,{value:f,onChange:x,isDiffMode:p}),(0,t.jsxs)(Ft.e,{className:C.buttonSpacing,children:[(0,t.jsx)(Se.$n,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Expand all groups",onClick:()=>{j(R.setAllCollapsedStatus(!1))},"aria-label":"Expand all groups",icon:"angle-double-down",disabled:l===I.F8.TopTable}),(0,t.jsx)(Se.$n,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Collapse all groups",onClick:()=>{j(R.setAllCollapsedStatus(!0))},"aria-label":"Collapse all groups",icon:"angle-double-up",disabled:l===I.F8.TopTable})]}),(0,t.jsx)(Oe.z,{size:"sm",disabled:l===I.F8.TopTable,options:Rt,value:i,onChange:u,className:C.buttonSpacing}),(0,t.jsx)(Oe.z,{size:"sm",options:Pt(n,w),value:l,onChange:a}),g&&(0,t.jsx)("div",{className:C.extraElements,children:g})]})]})};function Dt(e){const s=(0,K.of)(He);let l=(0,t.jsxs)(be.W,{children:[(0,t.jsx)(be.W.Item,{label:"By package name",onClick:()=>e.onChange(I.zM.PackageBased)}),(0,t.jsx)(be.W.Item,{label:"By value",onClick:()=>e.onChange(I.zM.ValueBased)})]});const a={[I.zM.ValueBased]:s.colorDotByValue,[I.zM.PackageBased]:s.colorDotByPackage,[I.yU.DiffColorBlind]:s.colorDotDiffColorBlind,[I.yU.Default]:s.colorDotDiffDefault}[e.value]||s.colorDotByValue;let n=(0,t.jsx)("span",{className:(0,d.cx)(s.colorDot,a)});return e.isDiffMode&&(l=(0,t.jsxs)(be.W,{children:[(0,t.jsx)(be.W.Item,{label:"Default (green to red)",onClick:()=>e.onChange(I.yU.Default)}),(0,t.jsx)(be.W.Item,{label:"Color blind (blue to red)",onClick:()=>e.onChange(I.yU.DiffColorBlind)})]}),n=(0,t.jsxs)("div",{className:(0,d.cx)(s.colorDotDiff,a),children:[(0,t.jsx)("div",{children:"-100% (removed)"}),(0,t.jsx)("div",{children:"0%"}),(0,t.jsx)("div",{children:"+100% (added)"})]})),(0,t.jsx)(Tt.m,{overlay:l,children:(0,t.jsx)(Se.$n,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:s.buttonSpacing,"aria-label":"Change color scheme",children:n})})}const Rt=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function Pt(e,s){let l=[{value:I.F8.TopTable,label:"Top Table",description:"Only show top table"},{value:I.F8.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return(e>=m||s)&&l.push({value:I.F8.Both,label:"Both",description:"Show both the top table and flame graph"}),l}function kt(e,s){const[l,a]=(0,h.useState)(e),n=(0,wt.A)(e);return(0,yt.A)(()=>{s(l)},250,[l]),(0,h.useEffect)(()=>{n!==e&&e!==l&&a(e)},[e,n,l]),[l,a]}const He=e=>({header:(0,d.css)({label:"header",display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",top:0,gap:e.spacing(1),marginTop:e.spacing(1)}),stickyHeader:(0,d.css)({zIndex:e.zIndex.navbarFixed,position:"sticky",background:e.colors.background.primary}),inputContainer:(0,d.css)({label:"inputContainer",flexGrow:1,minWidth:"150px",maxWidth:"350px"}),rightContainer:(0,d.css)({label:"rightContainer",display:"flex",alignItems:"flex-start",flexWrap:"wrap"}),buttonSpacing:(0,d.css)({label:"buttonSpacing",marginRight:e.spacing(1)}),resetButton:(0,d.css)({label:"resetButton",display:"flex",marginRight:e.spacing(2)}),resetButtonIconWrapper:(0,d.css)({label:"resetButtonIcon",padding:"0 5px",color:e.colors.text.disabled}),colorDot:(0,d.css)({label:"colorDot",display:"inline-block",width:"10px",height:"10px",borderRadius:"50%"}),colorDotDiff:(0,d.css)({label:"colorDotDiff",display:"flex",width:"200px",height:"12px",color:"white",fontSize:9,lineHeight:1.3,fontWeight:300,justifyContent:"space-between",padding:"0 2px",borderRadius:"2px"}),colorDotByValue:(0,d.css)({label:"colorDotByValue",background:et}),colorDotByPackage:(0,d.css)({label:"colorDotByPackage",background:tt}),colorDotDiffDefault:(0,d.css)({label:"colorDotDiffDefault",background:lt}),colorDotDiffColorBlind:(0,d.css)({label:"colorDotDiffColorBlind",background:nt}),extraElements:(0,d.css)({label:"extraElements",marginLeft:e.spacing(1)})}),Bt=jt;var It=v(70713),Le=v(11261),Pe=v(25019),Nt=v(90708),At=v(77093),Ge=v(52622);const Ve=(0,h.memo)(({data:e,onSymbolClick:s,search:l,matchedLabels:a,onSearch:n,sandwichItem:c,onSandwich:i,onTableSort:u,colorScheme:o})=>{const f=(0,h.useMemo)(()=>{let p={};for(let j=0;j<e.data.length;j++){const R=e.getValue(j),C=e.getValueRight(j),F=e.getSelf(j),T=e.getLabel(j);(!a||a.has(T))&&(p[T]=p[T]||{},p[T].self=p[T].self?p[T].self+F:F,p[T].total=p[T].total?p[T].total+R:R,p[T].totalRight=p[T].totalRight?p[T].totalRight+C:C)}return p},[e,a]),x=(0,K.of)(Et),b=(0,K.$j)(),[g,w]=(0,h.useState)([{displayName:"Self",desc:!0}]);return(0,t.jsx)("div",{className:x.topTableContainer,"data-testid":"topTable",children:(0,t.jsx)(It.Ay,{style:{width:"100%"},children:({width:p,height:j})=>{if(p<3||j<3)return null;const R=Lt(e,f,p,s,n,i,b,o,l,c);return(0,t.jsx)(At.X,{initialSortBy:g,onSortByChange:C=>{C&&C.length&&u?.(C[0].displayName+"_"+(C[0].desc?"desc":"asc")),w(C)},data:R,width:p,height:j})}})})});Ve.displayName="FlameGraphTopTableContainer";function Lt(e,s,l,a,n,c,i,u,o,f){const x=Gt(c,n,o,f),b={type:Le.PU.string,name:"Symbol",values:[],config:{custom:{width:l-Me-S*2},links:[{title:"Highlight symbol",url:"",onClick:p=>{const R=p.origin.field.values[p.origin.rowIndex];a(R)}}]}};let g;if(e.isDiffFlamegraph()){b.config.custom.width=l-Me-S*3;const p=Fe("Baseline","percent"),j=Fe("Comparison","percent"),R=Fe("Diff","percent");R.config.custom.cellOptions.type=Ge.ob.ColorText;const[C,F]=u===I.yU.DiffColorBlind?[xe[0],xe[2]]:[ve[0],ve[2]];R.config.mappings=[{type:Pe.d.ValueToText,options:{[1/0]:{text:"new",color:F}}},{type:Pe.d.ValueToText,options:{[-100]:{text:"removed",color:C}}},{type:Pe.d.RangeToText,options:{from:0,to:1/0,result:{color:F}}},{type:Pe.d.RangeToText,options:{from:-1/0,to:0,result:{color:C}}}];const T=e.getLevels(),L=T.length?T[0][0].value:0,A=T.length?T[0][0].valueRight:void 0;for(let M in s){x.values.push(null),b.values.push(M);const V=s[M].total,H=s[M].totalRight,ee=L-A,Z=Math.round(1e4*V/ee)/100,U=Math.round(1e4*H/A)/100,te=(U-Z)/Z*100;R.values.push(te),p.values.push(Z),j.values.push(U)}g={fields:[x,b,p,j,R],length:b.values.length}}else{const p=Fe("Self",e.selfField.config.unit),j=Fe("Total",e.valueField.config.unit);for(let R in s)x.values.push(null),b.values.push(R),p.values.push(s[R].self),j.values.push(s[R].total);g={fields:[x,b,p,j],length:b.values.length}}return(0,Nt.we)({data:[g],fieldConfig:{defaults:{},overrides:[]},replaceVariables:p=>p,theme:i})[0]}function Fe(e,s){const l={width:S,align:"auto",inspect:!1,cellOptions:{type:Ge.ob.Auto}};return{type:Le.PU.number,name:e,values:[],config:{unit:s,custom:l}}}const Me=61;function Gt(e,s,l,a){const n={type:Ge.ob.Custom,cellComponent:i=>(0,t.jsx)(Mt,{frame:i.frame,onSandwich:e,onSearch:s,search:l,sandwichItem:a,rowIndex:i.rowIndex})},c={filterable:!1,width:Me,hideHeader:!0,inspect:!1,align:"auto",cellOptions:n};return{type:Le.PU.number,name:"actions",values:[],config:{custom:c}}}function Mt(e){const s=zt(),l=e.frame.fields.find(c=>c.name==="Symbol")?.values[e.rowIndex],a=e.search===l,n=e.sandwichItem===l;return(0,t.jsxs)("div",{className:s.actionCellWrapper,children:[(0,t.jsx)(Re.K,{className:s.actionCellButton,name:"search",variant:a?"primary":"secondary",tooltip:a?"Clear from search":"Search for symbol","aria-label":a?"Clear from search":"Search for symbol",onClick:()=>{e.onSearch(a?"":l)}}),(0,t.jsx)(Re.K,{className:s.actionCellButton,name:"gf-show-context",tooltip:n?"Remove from sandwich view":"Show in sandwich view",variant:n?"primary":"secondary","aria-label":n?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{e.onSandwich(n?void 0:l)}})]})}const Et=e=>({topTableContainer:(0,d.css)({label:"topTableContainer",padding:e.spacing(1),backgroundColor:e.colors.background.secondary,height:"100%"})}),zt=()=>({actionCellWrapper:(0,d.css)({label:"actionCellWrapper",display:"flex",height:"24px"}),actionCellButton:(0,d.css)({label:"actionCellButton",marginRight:0,width:"24px"})}),$t=Ve,Wt=new q.A,Ot=({data:e,onTableSymbolClick:s,onViewSelected:l,onTextAlignSelected:a,onTableSort:n,getTheme:c,stickyHeader:i,extraHeaderElements:u,vertical:o,showFlameGraphOnly:f,disableCollapsing:x,getExtraContextMenuButtons:b})=>{const[g,w]=(0,h.useState)(),[p,j]=(0,h.useState)(0),[R,C]=(0,h.useState)(1),[F,T]=(0,h.useState)(""),[L,A]=(0,h.useState)(I.F8.Both),[M,{width:V}]=(0,k.A)(),[H,ee]=(0,h.useState)("left"),[Z,U]=(0,h.useState)(),[te,se]=(0,h.useState)(new We.S6),z=(0,h.useMemo)(()=>c(),[c]),Q=(0,h.useMemo)(()=>{if(!e)return;const X=new We.Jz(e,{collapsing:!x},z);return se(X.getCollapsedMap()),X},[e,z,x]),[ce,Te]=Ht(Q),W=Ut(z),pe=Vt(F,Q);(0,h.useEffect)(()=>{V>0&&V<m&&L===I.F8.Both&&!o&&A(I.F8.FlameGraph)},[L,A,V,o]);const ae=(0,h.useCallback)(()=>{w(void 0),j(0),C(1)},[w,C,j]);function G(){U(void 0)}(0,h.useEffect)(()=>{ae(),G()},[e,ae]);const oe=(0,h.useCallback)(X=>{F===X?T(""):(s?.(X),T(X),ae())},[T,ae,s,F]);if(!Q)return null;const le=(0,t.jsx)(Ct,{data:Q,rangeMin:p,rangeMax:R,matchedLabels:pe,setRangeMin:j,setRangeMax:C,onItemFocused:X=>w(X),focusedItemData:g,textAlign:H,sandwichItem:Z,onSandwich:X=>{ae(),U(X)},onFocusPillClick:ae,onSandwichPillClick:G,colorScheme:ce,showFlameGraphOnly:f,collapsing:!x,getExtraContextMenuButtons:b,selectedView:L,search:F,collapsedMap:te,setCollapsedMap:se}),Ce=(0,t.jsx)($t,{data:Q,onSymbolClick:oe,search:F,matchedLabels:pe,sandwichItem:Z,onSandwich:U,onSearch:T,onTableSort:n,colorScheme:ce});let je;return f||L===I.F8.FlameGraph?je=le:L===I.F8.TopTable?je=(0,t.jsx)("div",{className:W.tableContainer,children:Ce}):L===I.F8.Both&&(o?je=(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:W.verticalGraphContainer,children:le}),(0,t.jsx)("div",{className:W.verticalTableContainer,children:Ce})]}):je=(0,t.jsxs)("div",{className:W.horizontalContainer,children:[(0,t.jsx)("div",{className:W.horizontalTableContainer,children:Ce}),(0,t.jsx)("div",{className:W.horizontalGraphContainer,children:le})]})),(0,t.jsx)(ne.D.Provider,{value:z,children:(0,t.jsxs)("div",{ref:M,className:W.container,children:[!f&&(0,t.jsx)(Bt,{search:F,setSearch:T,selectedView:L,setSelectedView:X=>{A(X),l?.(X)},containerWidth:V,onReset:()=>{ae(),G()},textAlign:H,onTextAlignChange:X=>{ee(X),a?.(X)},showResetButton:!!(g||Z),colorScheme:ce,onColorSchemeChange:Te,stickyHeader:!!i,extraHeaderElements:u,vertical:o,isDiffMode:Q.isDiffFlamegraph(),setCollapsedMap:se,collapsedMap:te}),(0,t.jsx)("div",{className:W.body,children:je})]})})};function Ht(e){const s=e?.isDiffFlamegraph()?I.yU.Default:I.zM.PackageBased,[l,a]=(0,h.useState)(s);return(0,h.useEffect)(()=>{a(s)},[s]),[l,a]}function Vt(e,s){return(0,h.useMemo)(()=>{if(e&&s){const l=new Set;let a=Wt.filter(s.getUniqueLabels(),e);if(a)for(let n of a)l.add(s.getUniqueLabels()[n]);return l}},[e,s])}function Ut(e){return{container:(0,d.css)({label:"container",overflow:"auto",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:e.spacing(1)}),body:(0,d.css)({label:"body",flexGrow:1}),tableContainer:(0,d.css)({height:800}),horizontalContainer:(0,d.css)({label:"horizontalContainer",display:"flex",minHeight:0,flexDirection:"row",columnGap:e.spacing(1),width:"100%"}),horizontalGraphContainer:(0,d.css)({flexBasis:"50%"}),horizontalTableContainer:(0,d.css)({flexBasis:"50%",maxHeight:800}),verticalGraphContainer:(0,d.css)({marginBottom:e.spacing(1)}),verticalTableContainer:(0,d.css)({height:800})}}const Xt=Ot},5546:(De,ie,v)=>{v.d(ie,{F8:()=>d,Zk:()=>t,yU:()=>h,zM:()=>q});var t=(k=>(k.Bytes="bytes",k.Short="short",k.Nanoseconds="ns",k))(t||{}),d=(k=>(k.TopTable="topTable",k.FlameGraph="flameGraph",k.Both="both",k))(d||{}),q=(k=>(k.ValueBased="valueBased",k.PackageBased="packageBased",k))(q||{}),h=(k=>(k.Default="default",k.DiffColorBlind="diffColorBlind",k))(h||{})},75198:(De,ie,v)=>{var t;t={value:!0};var d=v(31635),q=v(96540),h=d.__importDefault(v(93182));function k(ne,Y,J){Y===void 0&&(Y=0),J===void 0&&(J=[]);var re=h.default(ne,Y),_=re[0],ye=re[1],ue=re[2];return q.useEffect(ue,J),[_,ye]}ie.A=k},93182:(De,ie,v)=>{Object.defineProperty(ie,"__esModule",{value:!0});var t=v(96540);function d(q,h){h===void 0&&(h=0);var k=t.useRef(!1),ne=t.useRef(),Y=t.useRef(q),J=t.useCallback(function(){return k.current},[]),re=t.useCallback(function(){k.current=!1,ne.current&&clearTimeout(ne.current),ne.current=setTimeout(function(){k.current=!0,Y.current()},h)},[h]),_=t.useCallback(function(){k.current=null,ne.current&&clearTimeout(ne.current)},[]);return t.useEffect(function(){Y.current=q},[q]),t.useEffect(function(){return re(),_},[h]),[J,_,re]}ie.default=d}}]);

//# sourceMappingURL=5194.f8ee0a8ea1b684b0d25b.js.map