{"version":3,"file":"ServiceAccountsPage.48eb8659c24d17486122.js","mappings":"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","sources":["webpack://grafana/./public/app/features/serviceaccounts/components/ServiceAccountsListItem.tsx","webpack://grafana/./public/app/features/serviceaccounts/ServiceAccountsListPage.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { memo } from 'react';\n\nimport { GrafanaTheme2, OrgRole } from '@grafana/data';\nimport { Button, HorizontalGroup, Icon, IconButton, useStyles2 } from '@grafana/ui';\nimport { UserRolePicker } from 'app/core/components/RolePicker/UserRolePicker';\nimport { contextSrv } from 'app/core/core';\nimport { OrgRolePicker } from 'app/features/admin/OrgRolePicker';\nimport { AccessControlAction, Role, ServiceAccountDTO } from 'app/types';\n\ntype ServiceAccountListItemProps = {\n  serviceAccount: ServiceAccountDTO;\n  onRoleChange: (role: OrgRole, serviceAccount: ServiceAccountDTO) => void;\n  roleOptions: Role[];\n  builtInRoles: Record<string, Role[]>;\n  onRemoveButtonClick: (serviceAccount: ServiceAccountDTO) => void;\n  onDisable: (serviceAccount: ServiceAccountDTO) => void;\n  onEnable: (serviceAccount: ServiceAccountDTO) => void;\n  onAddTokenClick: (serviceAccount: ServiceAccountDTO) => void;\n};\n\nconst getServiceAccountsAriaLabel = (name: string) => {\n  return `Edit service account's ${name} details`;\n};\n\nconst ServiceAccountListItem = memo(\n  ({\n    serviceAccount,\n    onRoleChange,\n    roleOptions,\n    builtInRoles,\n    onRemoveButtonClick,\n    onDisable,\n    onEnable,\n    onAddTokenClick,\n  }: ServiceAccountListItemProps) => {\n    const editUrl = `org/serviceaccounts/${serviceAccount.id}`;\n    const styles = useStyles2(getStyles);\n    const canUpdateRole = contextSrv.hasPermissionInMetadata(AccessControlAction.ServiceAccountsWrite, serviceAccount);\n    const displayRolePicker =\n      contextSrv.hasPermission(AccessControlAction.ActionRolesList) &&\n      contextSrv.hasPermission(AccessControlAction.ActionUserRolesList);\n\n    return (\n      <tr key={serviceAccount.id} className={cx({ [styles.disabled]: serviceAccount.isDisabled })}>\n        <td className=\"width-4 text-center link-td\">\n          <a href={editUrl} aria-label={getServiceAccountsAriaLabel(serviceAccount.name)}>\n            <img\n              className=\"filter-table__avatar\"\n              src={serviceAccount.avatarUrl}\n              alt={`Avatar for user ${serviceAccount.name}`}\n            />\n          </a>\n        </td>\n        <td className=\"link-td max-width-10\">\n          <a\n            className=\"ellipsis\"\n            href={editUrl}\n            title={serviceAccount.name}\n            aria-label={getServiceAccountsAriaLabel(serviceAccount.name)}\n          >\n            {serviceAccount.name}\n          </a>\n        </td>\n        <td className=\"link-td max-width-10\">\n          <a\n            className={styles.accountId}\n            href={editUrl}\n            title={serviceAccount.login}\n            aria-label={getServiceAccountsAriaLabel(serviceAccount.name)}\n          >\n            {serviceAccount.login}\n          </a>\n        </td>\n        {contextSrv.licensedAccessControlEnabled() ? (\n          <td>\n            {displayRolePicker && (\n              <UserRolePicker\n                userId={serviceAccount.id}\n                orgId={serviceAccount.orgId}\n                builtInRole={serviceAccount.role}\n                onBuiltinRoleChange={(newRole) => onRoleChange(newRole, serviceAccount)}\n                roleOptions={roleOptions}\n                builtInRoles={builtInRoles}\n                builtinRolesDisabled={!canUpdateRole}\n                disabled={serviceAccount.isDisabled}\n              />\n            )}\n          </td>\n        ) : (\n          <td>\n            <OrgRolePicker\n              aria-label=\"Role\"\n              value={serviceAccount.role}\n              disabled={!canUpdateRole || serviceAccount.isDisabled}\n              onChange={(newRole) => onRoleChange(newRole, serviceAccount)}\n            />\n          </td>\n        )}\n        <td className=\"link-td max-width-10\">\n          <a\n            className=\"ellipsis\"\n            href={editUrl}\n            title=\"Tokens\"\n            aria-label={getServiceAccountsAriaLabel(serviceAccount.name)}\n          >\n            <div className={cx(styles.tokensInfo, { [styles.tokensInfoSecondary]: !serviceAccount.tokens })}>\n              <span>\n                <Icon name=\"key-skeleton-alt\"></Icon>\n              </span>\n              {serviceAccount.tokens || 'No tokens'}\n            </div>\n          </a>\n        </td>\n        <td>\n          <HorizontalGroup justify=\"flex-end\">\n            {contextSrv.hasPermission(AccessControlAction.ServiceAccountsWrite) && !serviceAccount.tokens && (\n              <Button onClick={() => onAddTokenClick(serviceAccount)} disabled={serviceAccount.isDisabled}>\n                Add token\n              </Button>\n            )}\n            {contextSrv.hasPermissionInMetadata(AccessControlAction.ServiceAccountsWrite, serviceAccount) &&\n              (serviceAccount.isDisabled ? (\n                <Button variant=\"primary\" onClick={() => onEnable(serviceAccount)}>\n                  Enable\n                </Button>\n              ) : (\n                <Button variant=\"secondary\" onClick={() => onDisable(serviceAccount)}>\n                  Disable\n                </Button>\n              ))}\n            {contextSrv.hasPermissionInMetadata(AccessControlAction.ServiceAccountsDelete, serviceAccount) && (\n              <IconButton\n                className={styles.deleteButton}\n                name=\"trash-alt\"\n                size=\"md\"\n                onClick={() => onRemoveButtonClick(serviceAccount)}\n                aria-label={`Delete service account ${serviceAccount.name}`}\n              />\n            )}\n          </HorizontalGroup>\n        </td>\n      </tr>\n    );\n  }\n);\nServiceAccountListItem.displayName = 'ServiceAccountListItem';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    iconRow: css`\n      svg {\n        margin-left: ${theme.spacing(0.5)};\n      }\n    `,\n    accountId: cx(\n      'ellipsis',\n      css`\n        color: ${theme.colors.text.secondary};\n      `\n    ),\n    deleteButton: css`\n      color: ${theme.colors.text.secondary};\n    `,\n    tokensInfo: css`\n      span {\n        margin-right: ${theme.spacing(1)};\n      }\n    `,\n    tokensInfoSecondary: css`\n      color: ${theme.colors.text.secondary};\n    `,\n    disabled: css`\n      td a {\n        color: ${theme.colors.text.secondary};\n      }\n    `,\n  };\n};\n\nexport default ServiceAccountListItem;\n","import { css, cx } from '@emotion/css';\nimport pluralize from 'pluralize';\nimport React, { useEffect, useState } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { GrafanaTheme2, OrgRole } from '@grafana/data';\nimport { Alert, ConfirmModal, FilterInput, Icon, LinkButton, RadioButtonGroup, Tooltip, useStyles2 } from '@grafana/ui';\nimport EmptyListCTA from 'app/core/components/EmptyListCTA/EmptyListCTA';\nimport { Page } from 'app/core/components/Page/Page';\nimport PageLoader from 'app/core/components/PageLoader/PageLoader';\nimport { contextSrv } from 'app/core/core';\nimport { StoreState, ServiceAccountDTO, AccessControlAction, ServiceAccountStateFilter } from 'app/types';\n\nimport { CreateTokenModal, ServiceAccountToken } from './components/CreateTokenModal';\nimport ServiceAccountListItem from './components/ServiceAccountsListItem';\nimport {\n  changeQuery,\n  fetchACOptions,\n  fetchServiceAccounts,\n  deleteServiceAccount,\n  updateServiceAccount,\n  changeStateFilter,\n  createServiceAccountToken,\n  getApiKeysMigrationStatus,\n  getApiKeysMigrationInfo,\n  closeApiKeysMigrationInfo,\n} from './state/actions';\n\ninterface OwnProps {}\n\nexport type Props = OwnProps & ConnectedProps<typeof connector>;\n\nfunction mapStateToProps(state: StoreState) {\n  return {\n    ...state.serviceAccounts,\n  };\n}\n\nconst mapDispatchToProps = {\n  changeQuery,\n  fetchACOptions,\n  fetchServiceAccounts,\n  deleteServiceAccount,\n  updateServiceAccount,\n  changeStateFilter,\n  createServiceAccountToken,\n  getApiKeysMigrationStatus,\n  getApiKeysMigrationInfo,\n  closeApiKeysMigrationInfo,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport const ServiceAccountsListPageUnconnected = ({\n  serviceAccounts,\n  isLoading,\n  roleOptions,\n  builtInRoles,\n  query,\n  serviceAccountStateFilter,\n  apiKeysMigrated,\n  showApiKeysMigrationInfo,\n  changeQuery,\n  fetchACOptions,\n  fetchServiceAccounts,\n  deleteServiceAccount,\n  updateServiceAccount,\n  changeStateFilter,\n  createServiceAccountToken,\n  getApiKeysMigrationStatus,\n  getApiKeysMigrationInfo,\n  closeApiKeysMigrationInfo,\n}: Props): JSX.Element => {\n  const styles = useStyles2(getStyles);\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  const [isRemoveModalOpen, setIsRemoveModalOpen] = useState(false);\n  const [isDisableModalOpen, setIsDisableModalOpen] = useState(false);\n  const [newToken, setNewToken] = useState('');\n  const [currentServiceAccount, setCurrentServiceAccount] = useState<ServiceAccountDTO | null>(null);\n\n  useEffect(() => {\n    fetchServiceAccounts({ withLoadingIndicator: true });\n    getApiKeysMigrationStatus();\n    getApiKeysMigrationInfo();\n    if (contextSrv.licensedAccessControlEnabled()) {\n      fetchACOptions();\n    }\n  }, [fetchACOptions, fetchServiceAccounts, getApiKeysMigrationStatus, getApiKeysMigrationInfo]);\n\n  const noServiceAccountsCreated =\n    serviceAccounts.length === 0 && serviceAccountStateFilter === ServiceAccountStateFilter.All && !query;\n\n  const onRoleChange = async (role: OrgRole, serviceAccount: ServiceAccountDTO) => {\n    const updatedServiceAccount = { ...serviceAccount, role: role };\n    updateServiceAccount(updatedServiceAccount);\n    if (contextSrv.licensedAccessControlEnabled()) {\n      fetchACOptions();\n    }\n  };\n\n  const onQueryChange = (value: string) => {\n    changeQuery(value);\n  };\n\n  const onStateFilterChange = (value: ServiceAccountStateFilter) => {\n    changeStateFilter(value);\n  };\n\n  const onRemoveButtonClick = (serviceAccount: ServiceAccountDTO) => {\n    setCurrentServiceAccount(serviceAccount);\n    setIsRemoveModalOpen(true);\n  };\n\n  const onServiceAccountRemove = async () => {\n    if (currentServiceAccount) {\n      deleteServiceAccount(currentServiceAccount.id);\n    }\n    onRemoveModalClose();\n  };\n\n  const onDisableButtonClick = (serviceAccount: ServiceAccountDTO) => {\n    setCurrentServiceAccount(serviceAccount);\n    setIsDisableModalOpen(true);\n  };\n\n  const onDisable = () => {\n    if (currentServiceAccount) {\n      updateServiceAccount({ ...currentServiceAccount, isDisabled: true });\n    }\n    onDisableModalClose();\n  };\n\n  const onEnable = (serviceAccount: ServiceAccountDTO) => {\n    updateServiceAccount({ ...serviceAccount, isDisabled: false });\n  };\n\n  const onTokenAdd = (serviceAccount: ServiceAccountDTO) => {\n    setCurrentServiceAccount(serviceAccount);\n    setIsAddModalOpen(true);\n  };\n\n  const onTokenCreate = async (token: ServiceAccountToken) => {\n    if (currentServiceAccount) {\n      createServiceAccountToken(currentServiceAccount.id, token, setNewToken);\n    }\n  };\n\n  const onAddModalClose = () => {\n    setIsAddModalOpen(false);\n    setCurrentServiceAccount(null);\n    setNewToken('');\n  };\n\n  const onRemoveModalClose = () => {\n    setIsRemoveModalOpen(false);\n    setCurrentServiceAccount(null);\n  };\n\n  const onDisableModalClose = () => {\n    setIsDisableModalOpen(false);\n    setCurrentServiceAccount(null);\n  };\n\n  const onMigrationInfoClose = () => {\n    closeApiKeysMigrationInfo();\n  };\n\n  const docsLink = (\n    <a\n      className=\"external-link\"\n      href=\"https://grafana.com/docs/grafana/latest/administration/service-accounts/\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      here.\n    </a>\n  );\n  const subTitle = (\n    <span>\n      Service accounts and their tokens can be used to authenticate against the Grafana API. Find out more {docsLink}\n    </span>\n  );\n\n  return (\n    <Page navId=\"serviceaccounts\" subTitle={subTitle}>\n      <Page.Contents>\n        {apiKeysMigrated && showApiKeysMigrationInfo && (\n          <Alert\n            title=\"API keys migrated to Service accounts. Your keys are now called tokens and live inside respective service\n          accounts. Learn more.\"\n            severity=\"success\"\n            onRemove={onMigrationInfoClose}\n          ></Alert>\n        )}\n        <Page.OldNavOnly>\n          <div className={styles.pageHeader}>\n            <h2>Service accounts</h2>\n            <div className={styles.apiKeyInfoLabel}>\n              <Tooltip\n                placement=\"bottom\"\n                interactive\n                content={<>API keys are now service accounts with tokens. Find out more {docsLink}</>}\n              >\n                <Icon name=\"question-circle\" />\n              </Tooltip>\n              <span>Looking for API keys?</span>\n            </div>\n          </div>\n        </Page.OldNavOnly>\n        <div className=\"page-action-bar\">\n          <div className=\"gf-form gf-form--grow\">\n            <FilterInput\n              placeholder=\"Search service account by name\"\n              value={query}\n              onChange={onQueryChange}\n              width={50}\n            />\n          </div>\n          <RadioButtonGroup\n            options={[\n              { label: 'All', value: ServiceAccountStateFilter.All },\n              { label: 'With expired tokens', value: ServiceAccountStateFilter.WithExpiredTokens },\n              { label: 'Disabled', value: ServiceAccountStateFilter.Disabled },\n            ]}\n            onChange={onStateFilterChange}\n            value={serviceAccountStateFilter}\n            className={styles.filter}\n          />\n          {!noServiceAccountsCreated && contextSrv.hasPermission(AccessControlAction.ServiceAccountsCreate) && (\n            <LinkButton href=\"org/serviceaccounts/create\" variant=\"primary\">\n              Add service account\n            </LinkButton>\n          )}\n        </div>\n        {isLoading && <PageLoader />}\n        {!isLoading && noServiceAccountsCreated && (\n          <>\n            <EmptyListCTA\n              title=\"You haven't created any service accounts yet.\"\n              buttonIcon=\"key-skeleton-alt\"\n              buttonLink=\"org/serviceaccounts/create\"\n              buttonTitle=\"Add service account\"\n              buttonDisabled={!contextSrv.hasPermission(AccessControlAction.ServiceAccountsCreate)}\n              proTip=\"Remember, you can provide specific permissions for API access to other applications.\"\n              proTipLink=\"\"\n              proTipLinkTitle=\"\"\n              proTipTarget=\"_blank\"\n            />\n          </>\n        )}\n\n        {!isLoading && serviceAccounts.length !== 0 && (\n          <>\n            <div className={cx(styles.table, 'admin-list-table')}>\n              <table className=\"filter-table filter-table--hover\">\n                <thead>\n                  <tr>\n                    <th></th>\n                    <th>Account</th>\n                    <th>ID</th>\n                    <th>Roles</th>\n                    <th>Tokens</th>\n                    <th style={{ width: '34px' }} />\n                  </tr>\n                </thead>\n                <tbody>\n                  {serviceAccounts.map((serviceAccount: ServiceAccountDTO) => (\n                    <ServiceAccountListItem\n                      serviceAccount={serviceAccount}\n                      key={serviceAccount.id}\n                      builtInRoles={builtInRoles}\n                      roleOptions={roleOptions}\n                      onRoleChange={onRoleChange}\n                      onRemoveButtonClick={onRemoveButtonClick}\n                      onDisable={onDisableButtonClick}\n                      onEnable={onEnable}\n                      onAddTokenClick={onTokenAdd}\n                    />\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </>\n        )}\n        {currentServiceAccount && (\n          <>\n            <ConfirmModal\n              isOpen={isRemoveModalOpen}\n              body={`Are you sure you want to delete '${currentServiceAccount.name}'${\n                !!currentServiceAccount.tokens\n                  ? ` and ${currentServiceAccount.tokens} accompanying ${pluralize(\n                      'token',\n                      currentServiceAccount.tokens\n                    )}`\n                  : ''\n              }?`}\n              confirmText=\"Delete\"\n              title=\"Delete service account\"\n              onConfirm={onServiceAccountRemove}\n              onDismiss={onRemoveModalClose}\n            />\n            <ConfirmModal\n              isOpen={isDisableModalOpen}\n              title=\"Disable service account\"\n              body={`Are you sure you want to disable '${currentServiceAccount.name}'?`}\n              confirmText=\"Disable service account\"\n              onConfirm={onDisable}\n              onDismiss={onDisableModalClose}\n            />\n            <CreateTokenModal\n              isOpen={isAddModalOpen}\n              token={newToken}\n              serviceAccountLogin={currentServiceAccount.login}\n              onCreateToken={onTokenCreate}\n              onClose={onAddModalClose}\n            />\n          </>\n        )}\n      </Page.Contents>\n    </Page>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => {\n  return {\n    table: css`\n      margin-top: ${theme.spacing(3)};\n    `,\n    filter: css`\n      margin: 0 ${theme.spacing(1)};\n    `,\n    row: css`\n      display: flex;\n      align-items: center;\n      height: 100% !important;\n\n      a {\n        padding: ${theme.spacing(0.5)} 0 !important;\n      }\n    `,\n    unitTooltip: css`\n      display: flex;\n      flex-direction: column;\n    `,\n    unitItem: css`\n      cursor: pointer;\n      padding: ${theme.spacing(0.5)} 0;\n      margin-right: ${theme.spacing(1)};\n    `,\n    disabled: css`\n      color: ${theme.colors.text.disabled};\n    `,\n    link: css`\n      color: inherit;\n      cursor: pointer;\n      text-decoration: underline;\n    `,\n    pageHeader: css`\n      display: flex;\n      margin-bottom: ${theme.spacing(2)};\n    `,\n    apiKeyInfoLabel: css`\n      margin-left: ${theme.spacing(1)};\n      line-height: 2.2;\n      flex-grow: 1;\n      color: ${theme.colors.text.secondary};\n\n      span {\n        padding: ${theme.spacing(0.5)};\n      }\n    `,\n    filterDelimiter: css`\n      flex-grow: 1;\n    `,\n  };\n};\n\nconst ServiceAccountsListPage = connector(ServiceAccountsListPageUnconnected);\nexport default ServiceAccountsListPage;\n"],"names":["getServiceAccountsAriaLabel","name","ServiceAccountListItem","memo","serviceAccount","onRoleChange","roleOptions","builtInRoles","onRemoveButtonClick","onDisable","onEnable","onAddTokenClick","editUrl","id","styles","useStyles2","getStyles","canUpdateRole","contextSrv","AccessControlAction","displayRolePicker","className","cx","disabled","isDisabled","href","src","avatarUrl","alt","title","accountId","login","UserRolePicker","userId","orgId","builtInRole","role","onBuiltinRoleChange","newRole","builtinRolesDisabled","OrgRolePicker","value","onChange","tokensInfo","tokensInfoSecondary","tokens","Icon","HorizontalGroup","justify","Button","onClick","variant","IconButton","deleteButton","size","displayName","theme","iconRow","css","spacing","colors","text","secondary","mapDispatchToProps","changeQuery","fetchACOptions","fetchServiceAccounts","deleteServiceAccount","updateServiceAccount","changeStateFilter","createServiceAccountToken","getApiKeysMigrationStatus","getApiKeysMigrationInfo","closeApiKeysMigrationInfo","connector","connect","state","serviceAccounts","ServiceAccountsListPageUnconnected","isLoading","query","serviceAccountStateFilter","apiKeysMigrated","showApiKeysMigrationInfo","isAddModalOpen","setIsAddModalOpen","useState","isRemoveModalOpen","setIsRemoveModalOpen","isDisableModalOpen","setIsDisableModalOpen","newToken","setNewToken","currentServiceAccount","setCurrentServiceAccount","useEffect","withLoadingIndicator","noServiceAccountsCreated","length","ServiceAccountStateFilter","async","updatedServiceAccount","onDisableButtonClick","onTokenAdd","onRemoveModalClose","onDisableModalClose","docsLink","target","rel","subTitle","Page","navId","Alert","severity","onRemove","pageHeader","apiKeyInfoLabel","Tooltip","placement","interactive","content","FilterInput","placeholder","width","RadioButtonGroup","options","label","filter","LinkButton","PageLoader","EmptyListCTA","buttonIcon","buttonLink","buttonTitle","buttonDisabled","proTip","proTipLink","proTipLinkTitle","proTipTarget","table","style","map","ConfirmModal","isOpen","body","pluralize","confirmText","onConfirm","onDismiss","CreateTokenModal","token","serviceAccountLogin","onCreateToken","onClose","row","unitTooltip","unitItem","link","filterDelimiter"],"sourceRoot":""}