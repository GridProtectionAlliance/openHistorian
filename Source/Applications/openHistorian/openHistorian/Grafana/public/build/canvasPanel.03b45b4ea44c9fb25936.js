"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3330],{72243:(wf,hn,z)=>{z.d(hn,{f:()=>qt});var va=z(68404),pa=z(15670);const qt=({onChange:w,options:gn,label:ha})=>va.createElement(pa.b,{icon:"plus",label:ha,variant:"secondary",options:gn,onChange:w,isFullWidth:!0})},84310:(wf,hn,z)=>{z.r(hn),z.d(hn,{addStandardCanvasEditorOptions:()=>No,plugin:()=>$y});var va=z(48513),pa=z(68061),qt=z(11746),w=z(68404),gn=z(46528),ha=z(53376),Go=z(37932),Df=z(60325),vt=z(9892);function Mf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(a){return a?""+t+a:""}).join(" ")}).join(" ")}function Tf(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function le(t,e){return function(n){n&&(t[e]=n)}}function Fo(t,e,n){return function(r){r&&(t[e][n]=r)}}function ga(t,e){return function(n){var r=n.prototype;t.forEach(function(a){e(r,a)})}}function Rf(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(a){var i=e[a]||a;i in n||(n[i]=function(){for(var s,o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var u=(s=this[r])[a].apply(s,o);return u===this[r]?this:u})})}}var Of=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var a=this.keys,i=this.values,s=a.indexOf(n),o=s===-1?a.length:s;a[o]=n,i[o]=r},t}(),kf=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),Pf=typeof Map=="function",Af=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function If(t,e){var n=[],r=[];return t.forEach(function(a){var i=a[0],s=a[1],o=new Af;n[i]=o,r[s]=o}),n.forEach(function(a,i){a.connect(n[i-1])}),t.filter(function(a,i){return!e[i]}).map(function(a,i){var s=a[0],o=a[1];if(s===o)return[0,0];var l=n[s],u=r[o-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,n[0]);var f=l.getIndex();return[c,f]})}var Nf=function(){function t(n,r,a,i,s,o,l,u){this.prevList=n,this.list=r,this.added=a,this.removed=i,this.changed=s,this.maintained=o,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=If(this.changedBeforeAdded,this.fixed),r=this.changed,a=[];this.cacheOrdered=n.filter(function(i,s){var o=i[0],l=i[1],u=r[s],c=u[0],f=u[1];if(o!==l)return a.push([c,f]),!0}),this.cachePureChanged=a},t}();function Tr(t,e,n){var r=Pf?Map:n?kf:Of,a=n||function(y){return y},i=[],s=[],o=[],l=t.map(a),u=e.map(a),c=new r,f=new r,d=[],v=[],p={},h=[],g=0,m=0;return l.forEach(function(y,E){c.set(y,E)}),u.forEach(function(y,E){f.set(y,E)}),l.forEach(function(y,E){var b=f.get(y);typeof b>"u"?(++m,s.push(E)):p[b]=m}),u.forEach(function(y,E){var b=c.get(y);typeof b>"u"?(i.push(E),++g):(o.push([b,E]),m=p[E]||0,d.push([b-m,E-g]),v.push(E===b),b!==E&&h.push([b,E]))}),s.reverse(),new Nf(t,e,i,s,h,o,d,v)}var Bf=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),a=Tr(this.list,r,this.findKeyCallback);return this.list=r,a},t}();const Lf=Bf;var zo="rgb",Ko="rgba",Ho="hsl",Wo="hsla",Uy=[zo,Ko,Ho,Wo],Gf="function",Zy="property",qy="array",Ff="object",zf="string",Kf="number",Rr="undefined",Jy=typeof window!==Rr,Or=typeof document!==Rr&&document,Yo=null,Qy=function(t){if(!Or)return"";var e=(Or.body||Or.documentElement).style,n=Yo.length;if(typeof e[t]!==Rr)return t;for(var r=0;r<n;++r){var a="-"+Yo[r]+"-"+t;if(typeof e[a]!==Rr)return a}return""},t1=null,e1=null,r1=null,n1=null,Hf=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ze=1e-7,mn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function a1(t,e,n,r){return(t*r+e*n)/(n+r)}function Wf(t){return typeof t===Rr}function ma(t){return t&&typeof t===Ff}function jo(t){return Array.isArray(t)}function Ke(t){return typeof t===zf}function Yf(t){return typeof t===Kf}function jf(t){return typeof t===Gf}function Vf(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function Vo(t,e,n,r,a){var i=ya(t,e,n);return i?n:$f(t,e,n+1,r,a)}function ya(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function $f(t,e,n,r,a){for(var i=function(u){var c=e[u].trim();if(c===t.close&&!ya(t,e,u))return{value:u};var f=u,d=Ea(a,function(v){var p=v.open;return p===c});if(d&&(f=Vo(d,e,u,r,a)),f===-1)return s=u,"break";u=f,s=u},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function $o(t,e){var n=Ke(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?Hf:u,f=c.map(function(S){var D=S.open,C=S.close;return D===C?D:D+"|"+C}).join("|"),d="(\\s*"+a+"\\s*|"+f+"|\\s+)",v=new RegExp(d,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var E=function(S){var D=p[S].trim(),C=S,M=Ea(c,function(T){var P=T.open;return P===D}),R=Ea(c,function(T){var P=T.close;return P===D});if(M){if(C=Vo(M,p,S,h,c),C!==-1&&l)return y()&&i||(g.push(p.slice(S,C+1).join("")),S=C,i)?(b=S,"break"):(b=S,"continue")}else{if(R&&!ya(R,p,S))throw new Error("invalid format: "+R.close);if(Vf(D,a)&&!s)return y(),i?(b=S,"break"):(b=S,"continue")}C===-1&&(C=h-1),m.push(p.slice(S,C+1).join("")),S=C,b=S},b,x=0;x<h;++x){var _=E(x);if(x=b,_==="break")break}return m.length&&g.push(m.join("")),g}function Xf(t){return $o(t,"")}function sr(t){return $o(t,",")}function Xo(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Uo(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function i1(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function ba(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function o1(t){return[].slice.call(t)}function s1(){return Date.now?Date.now():new Date().getTime()}function Zo(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function Uf(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function l1(t,e,n){var r=Uf(t,e);return r>-1?t[r]:n}function Ea(t,e,n){var r=Zo(t,e);return r>-1?t[r]:n}var u1=null,c1=null;function f1(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function d1(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function v1(t,e){var n=Uo(t),r=n.value,a=n.unit;if(ma(e)){var i=e[a];if(i){if(jf(i))return i(r);if(mn[a])return mn[a](r,i)}}else if(a==="%")return r*e/100;return mn[a]?mn[a](r):r}function Zf(t,e,n){return Math.max(e,Math.min(t,n))}function qo(t,e,n){return[[De(e[0],ze),De(e[0]*t[1]/t[0],ze)],[De(e[1]*t[0]/t[1],ze),De(e[1],ze)]].filter(function(r){return r.every(function(a,i){return n?a<=e[i]:a>=e[i]})})[0]||t}function p1(t,e,n,r){if(!r)return t.map(function(d,v){return Zf(d,e[v],n[v])});var a=t[0],i=t[1],s=qo(t,e,!1),o=s[0],l=s[1],u=qo(t,n,!0),c=u[0],f=u[1];return a<o||i<l?(a=o,i=l):(a>c||i>f)&&(a=c,i=f),[a,i]}function h1(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function qf(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Jo(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function Jf(t){return[0,1].map(function(e){return qf(t.map(function(n){return n[e]}))})}function g1(t){var e=Jf(t),n=Jo(e,t[0]),r=Jo(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function m1(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function De(t,e){return e?Math.round(t/e)*e:t}function y1(t,e){return t.forEach(function(n,r){t[r]=De(t[r],e)}),t}function b1(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function E1(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,Ke(n)?n:n.apply(void 0,a))})}function Qf(t){return t.replace("#","")}function Qo(t){var e=Qf(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function td(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function ed(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function S1(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?Qo(td(t)):Qo(t);if(t.indexOf("(")!==-1){var e=Xo(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=sr(r),i=[0,0,0,1],s=a.length;switch(n){case zo:case Ko:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case Ho:case Wo:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return ed(i)}}}function _1(t,e){return e?Or.querySelectorAll(t):Or.querySelector(t)}function x1(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function C1(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function w1(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function D1(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=window.getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function M1(t,e,n,r){t.addEventListener(e,n,r)}function T1(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Sa=function(t,e){return Sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Sa(t,e)};function He(t,e){Sa(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Me=function(){return Me=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Me.apply(this,arguments)};function ts(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function rd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function _a(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function xa(t,e){var n=Object.keys(t),r=Object.keys(e),a=Tr(n,r,function(l){return l}),i={},s={},o={};return a.added.forEach(function(l){var u=r[l];i[u]=e[u]}),a.removed.forEach(function(l){var u=n[l];s[u]=t[u]}),a.maintained.forEach(function(l){var u=l[0],c=n[u],f=[t[c],e[c]];t[c]!==e[c]&&(o[c]=f)}),{added:i,removed:s,changed:o}}function es(t){t.forEach(function(e){e()})}function rs(t){var e=0;return t.map(function(n){return n==null?"$compat"+ ++e:""+n})}function ns(t,e,n,r){if(Ke(t)||Yf(t))return new od("text_"+t,e,n,r,null,{});var a=typeof t.type=="string"?sd:t.type.prototype.render?ud:ld;return new a(t.type,e,n,r,t.ref,t.props)}function as(t){var e=[];return t.forEach(function(n){e=e.concat(jo(n)?as(n):n)}),e}function is(t){var e=t.className,n=ts(t,["className"]);return e!=null&&(n.class=e),delete n.style,delete n.children,n}function Ca(t,e){if(!e)return t;for(var n in e)Wf(t[n])&&(t[n]=e[n]);return t}function Qt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.key,s=a.ref,o=ts(a,["key","ref"]);return{type:t,key:i,ref:s,props:Me(Me({},o),{children:as(n).filter(function(l){return l!=null&&l!==!1})})}}var kr=function(){function t(n,r,a,i,s,o){o===void 0&&(o={}),this.type=n,this.key=r,this.index=a,this.container=i,this.ref=s,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(n,r){return!0},e._update=function(n,r,a,i){if(this.base&&!Ke(r)&&!i&&!this._should(r.props,a))return!1;this.original=r,this._setState(a);var s=this.props;return Ke(r)||(this.props=r.props,this.ref=r.ref),this._render(n,this.base?s:{},a),!0},e._mounted=function(){var n=this.ref;n&&n(this.base)},e._setState=function(n){},e._updated=function(){var n=this.ref;n&&n(this.base)},e._destroy=function(){var n=this.ref;n&&n(null)},t}();function nd(t,e,n){var r=xa(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in a)n.setAttribute(o,a[o]);for(var o in s)n.setAttribute(o,s[o][1]);for(var o in i)n.removeAttribute(o)}function ad(t,e,n){var r=xa(t,e),a=r.added,i=r.removed,s=r.changed;for(var o in i)n.removeEventListener(o);for(var o in a)n.addEventListener(o,a[o]);for(var o in s)n.removeEventListener(o),n.addEventListener(o,s[o][1]);for(var o in i)n.removeEventListener(o)}function id(t,e,n){var r=n.style,a=xa(t,e),i=a.added,s=a.removed,o=a.changed;for(var l in i){var u=ba(l,"-");r.setProperty?r.setProperty(u,i[l]):r[u]=i[l]}for(var l in o){var u=ba(l,"-");r.setProperty?r.setProperty(u,o[l][1]):r[u]=o[l][1]}for(var l in s){var u=ba(l,"-");r.removeProperty?r.removeProperty(u):r[u]=""}}function os(t){var e={},n={};for(var r in t)r.indexOf("on")===0?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var od=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),r.push(function(){i?a._mounted():a._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(kr),sd=function(t){He(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.events={},r._isSVG=!1,r}var n=e.prototype;return n.addEventListener=function(r,a){var i=this.events;i[r]=function(s){s.nativeEvent=s,a(s)},this.base.addEventListener(r,i[r])},n.removeEventListener=function(r){var a=this.events;this.base.removeEventListener(r,a[r]),delete a[r]},n._should=function(r){return _a(this.props,r)},n._render=function(r,a){var i=this,s=!this.base;if(s){var o=this._hasSVG();this._isSVG=o;var l=this.props.portalContainer;if(!l){var u=this.type;o?l=document.createElementNS("http://www.w3.org/2000/svg",u):l=document.createElement(u)}this.base=l}Ar(this,this._providers,this.props.children,r,null);var c=this.base,f=os(a),d=f.attributes,v=f.events,p=os(this.props),h=p.attributes,g=p.events;return nd(is(d),is(h),c),ad(v,g,this),id(a.style||{},this.props.style||{},c),r.push(function(){s?i._mounted():i._updated()}),!0},n._unmount=function(){var r=this.events,a=this.base;for(var i in r)a.removeEventListener(i,r[i]);this._providers.forEach(function(s){s._unmount()}),this.events={},this.props.portalContainer||a.parentNode.removeChild(a)},n._hasSVG=function(){if(this._isSVG||this.type==="svg")return!0;var r=wa(this.container);return r&&"ownerSVGElement"in r},e}(kr);function wa(t){if(!t)return null;var e=t.base;return e instanceof Node?e:wa(t.container)}function Pr(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Pr(e[0].base):null}var ld=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n._render=function(r){var a=this.type(this.props);return Ar(this,this._providers,a?[a]:[],r),!0},n._unmount=function(){this._providers.forEach(function(r){r._unmount()})},e}(kr),ss=function(t){He(e,t);function e(r){var a=t.call(this,"container","container",0,null)||this;return a.base=r,a}var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(kr),ud=function(t){He(e,t);function e(r,a,i,s,o,l){return l===void 0&&(l={}),t.call(this,r,a,i,s,o,Ca(l,r.defaultProps))||this}var n=e.prototype;return n._should=function(r,a){return this.base.shouldComponentUpdate(Ca(r,this.type.defaultProps),a||this.base.state)},n._render=function(r,a){var i=this;this.props=Ca(this.props,this.type.defaultProps);var s=!this.base;s?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,l=o.state,u=o.render();u&&u.props&&!u.props.children.length&&(u.props.children=this.props.children),Ar(this,this._providers,u?[u]:[],r),r.push(function(){s?(i._mounted(),o.componentDidMount()):(i._updated(),o.componentDidUpdate(a,l))})},n._setState=function(r){var a=this.base;!a||!r||(a.state=r)},n._unmount=function(){this._providers.forEach(function(r){r._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(kr),Da=function(){function t(n){n===void 0&&(n={}),this.props=n,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(n,r){return!0},e.render=function(){return null},e.setState=function(n,r,a){var i=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Me(Me({},this.$_state),n),a?this.$_setState(r,a):this.$_timer=setTimeout(function(){i.$_timer=0,i.$_setState(r,a)})},e.forceUpdate=function(n){this.setState({},n,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(n,r){},e.componentWillUnmount=function(){},e.$_setState=function(n,r){var a=[],i=this.$_provider,s=Ar(i.container,[i],[i.original],a,Me(Me({},this.state),this.$_state),r);s&&(n&&a.push(n),es(a))},t}(),Ma=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.shouldComponentUpdate=function(r,a){return _a(this.props,r)||_a(this.state,a)},e}(Da),cd=function(t){He(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){var r=this.props,a=r.element,i=r.container;this._portalProvider=new ss(i),yn(a,i,this._portalProvider)},n.componentDidUpdate=function(){var r=this.props,a=r.element,i=r.container;yn(a,i,this._portalProvider)},n.componentWillUnmount=function(){var r=this.props.container;yn(null,r,this._portalProvider),this._portalProvider=null},e}(Ma);function fd(t,e,n){var r=[];Ar(t,t._providers,e,r,n),es(r)}function dd(t,e){for(var n=t._providers,r=n.length,a=e.index+1;a<r;++a){var i=Pr(n[a].base);if(i)return i}return null}function vd(t,e,n){var r=n.map(function(l){return Ke(l)?null:l.key}),a=rs(e.map(function(l){return l.key})),i=rs(r),s=Tr(a,i,function(l){return l});s.removed.forEach(function(l){e.splice(l,1)[0]._unmount()}),s.ordered.forEach(function(l){var u=l[0],c=l[1],f=e.splice(u,1)[0];e.splice(c,0,f);var d=Pr(f.base),v=Pr(e[c+1]&&e[c+1].base);d&&d.parentNode.insertBefore(d,v)}),s.added.forEach(function(l){e.splice(l,0,ns(n[l],r[l],l,t))});var o=s.maintained.filter(function(l){var u=l[0],c=l[1],f=n[c],d=e[c],v=Ke(f)?"text_"+f:f.type;return v!==d.type?(d._unmount(),e.splice(c,1,ns(f,r[c],c,t)),!0):(d.index=c,!1)});return rd(s.added,o.map(function(l){var u=l[0],c=l[1];return c}))}function Ar(t,e,n,r,a,i){var s=vd(t,e,n),o=e.filter(function(u,c){return u._update(r,n[c],a,i)}),l=wa(t);return l&&s.reverse().forEach(function(u){var c=e[u],f=Pr(c.base);if(f&&l!==f&&!f.parentNode){var d=dd(t,c);l.insertBefore(f,d)}}),o.length>0}function yn(t,e,n){n===void 0&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new ss(e)),fd(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function ls(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),yn(t,e,r),n&&n()}function pd(t,e){return Qt(cd,{element:t,container:e})}var hd="simple-1.1.0";function Ta(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function us(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function gd(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Ra(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function cs(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function md(t,e){var n=Ra("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function Oa(t){return t.replace(/_/g,".")}function Ir(t,e){var n=null,r="-1";return Ta(t,function(a){var i=Ra("("+a.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!i||a.brand?!1:(n=a,r=i[3]||"-1",a.versionAlias?r=a.versionAlias:a.versionTest&&(r=md(a.versionTest.toLowerCase(),e)||r),r=Oa(r),!0)}),{preset:n,version:r}}function bn(t,e){var n={brand:"",version:"-1"};return Ta(t,function(r){var a=fs(e,r);return a?(n.brand=r.id,n.version=r.versionAlias||a.version,n.version!=="-1"):!1}),n}function fs(t,e){return us(t,function(n){var r=n.brand;return Ra(""+e.test,r.toLowerCase())})}var ds=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],vs=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ka=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ps=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],hs=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function gs(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,a=n[0],i={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!bn(ps,n).brand},s={name:"unknown",version:"-1",majorVersion:-1};i.webkit=!i.chromium&&Ta(ka,function(d){return fs(n,d)});var o=bn(vs,n);if(i.chromium=!!o.brand,i.chromiumVersion=o.version,!i.chromium){var l=bn(ka,n);i.webkit=!!l.brand,i.webkitVersion=l.version}if(t){var u=t.platform.toLowerCase(),c=us(hs,function(d){return new RegExp(""+d.test,"g").exec(u)});s.name=c?c.id:u,s.version=t.platformVersion}var f=bn(ds,n);return f.brand&&(i.name=f.brand,i.version=t?t.uaFullVersion:f.version),navigator.platform==="Linux armv8l"?s.name="android":i.webkit&&(s.name=r?"ios":"mac"),s.name==="ios"&&i.webview&&(i.version="-1"),s.version=Oa(s.version),i.version=Oa(i.version),s.majorVersion=parseInt(s.version,10),i.majorVersion=parseInt(i.version,10),{browser:i,os:s,isMobile:r,isHints:!0}}function yd(t){var e=gd(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:!!Ir(ps,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},a={name:"unknown",version:"-1",majorVersion:-1},i=Ir(ds,e),s=i.preset,o=i.version,l=Ir(hs,e),u=l.preset,c=l.version,f=Ir(vs,e);if(r.chromium=!!f.preset,r.chromiumVersion=f.version,!r.chromium){var d=Ir(ka,e);r.webkit=!!d.preset,r.webkitVersion=d.version}return u&&(a.name=u.id,a.version=c,a.majorVersion=parseInt(c,10)),s&&(r.name=s.id,r.version=o,r.webview&&a.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:a,isMobile:n,isHints:!1}}function R1(t){return cs()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion"]).then(function(e){var n=gs(e);return t&&t(n),n}):(t&&t(Pa()),typeof Promise>"u"||!Promise?null:Promise.resolve(Pa()))}function Pa(t){return typeof t>"u"&&cs()?gs():yd(t)}const bd=Pa;var ms="rgb",ys="rgba",bs="hsl",Es="hsla",O1=[ms,ys,bs,Es],Ed="function",k1="property",P1="array",Sd="object",_d="string",xd="number",Nr="undefined",Ss=typeof window!==Nr,Br=typeof document!==Nr&&document,_s=null,A1=function(t){if(!Br)return"";var e=(Br.body||Br.documentElement).style,n=_s.length;if(typeof e[t]!==Nr)return t;for(var r=0;r<n;++r){var a="-"+_s[r]+"-"+t;if(typeof e[a]!==Nr)return a}return""},I1=null,N1=null,B1=null,L1=null,Cd=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Kt=1e-7,G1=1/Kt,En={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function We(t,e,n,r){return(t*r+e*n)/(n+r)}function Aa(t){return typeof t===Nr}function Ye(t){return t&&typeof t===Sd}function Pt(t){return Array.isArray(t)}function Te(t){return typeof t===_d}function xs(t){return typeof t===xd}function Cs(t){return typeof t===Ed}function Dd(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function ws(t,e,n,r,a){var i=Ia(t,e,n);return i?n:Md(t,e,n+1,r,a)}function Ia(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Md(t,e,n,r,a){for(var i=function(u){var c=e[u].trim();if(c===t.close&&!Ia(t,e,u))return{value:u};var f=u,d=Ve(a,function(v){var p=v.open;return p===c});if(d&&(f=ws(d,e,u,r,a)),f===-1)return s=u,"break";u=f,s=u},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Na(t,e){var n=Te(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?Cd:u,f=c.map(function(S){var D=S.open,C=S.close;return D===C?D:D+"|"+C}).join("|"),d="(\\s*"+a+"\\s*|"+f+"|\\s+)",v=new RegExp(d,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var E=function(S){var D=p[S].trim(),C=S,M=Ve(c,function(P){var k=P.open;return k===D}),R=Ve(c,function(P){var k=P.close;return k===D});if(M){if(C=ws(M,p,S,h,c),C!==-1&&l)return y()&&i||(g.push(p.slice(S,C+1).join("")),S=C,i)?(b=S,"break"):(b=S,"continue")}else if(R&&!Ia(R,p,S)){var T=wd(c);return T.splice(c.indexOf(R),1),{value:Na(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:T})}}else if(Dd(D,a)&&!s)return y(),i?(b=S,"break"):(b=S,"continue");C===-1&&(C=h-1),m.push(p.slice(S,C+1).join("")),S=C,b=S},b,x=0;x<h;++x){var _=E(x);if(x=b,typeof _=="object")return _.value;if(_==="break")break}return m.length&&g.push(m.join("")),g}function je(t){return Na(t,"")}function Ba(t){return Na(t,",")}function Ds(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Sn(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function F1(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function Td(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function z1(t){return[].slice.call(t)}function Ms(){return Date.now?Date.now():new Date().getTime()}function lr(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function Rd(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function K1(t,e,n){var r=Rd(t,e);return r>-1?t[r]:n}function Ve(t,e,n){var r=lr(t,e);return r>-1?t[r]:n}var Ts=function(){var t=Ms(),e=Ss&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Ms(),a=window.setTimeout(function(){n(r-t)},1e3/60);return a}}(),Od=function(){var t=Ss&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function Re(t){return Object.keys(t)}function H1(t){var e=Re(t);return e.map(function(n){return t[n]})}function W1(t){var e=Re(t);return e.map(function(n){return[n,t[n]]})}function Y1(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function _t(t,e){var n=Sn(t),r=n.value,a=n.unit;if(Ye(e)){var i=e[a];if(i){if(Cs(i))return i(r);if(En[a])return En[a](r,i)}}else if(a==="%")return r*e/100;return En[a]?En[a](r):r}function La(t,e,n){return Math.max(e,Math.min(t,n))}function Rs(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[lt(e[0],Kt),lt(e[0]/r,Kt)],[lt(e[1]*r,Kt),lt(e[1],Kt)]].filter(function(a){return a.every(function(i,s){var o=e[s],l=lt(o,Kt);return n?i<=o||i<=l:i>=o||i>=l})})[0]||t}function kd(t,e,n,r){if(!r)return t.map(function(v,p){return La(v,e[p],n[p])});var a=t[0],i=t[1],s=r===!0?a/i:r,o=Rs(t,e,!1,s),l=o[0],u=o[1],c=Rs(t,n,!0,s),f=c[0],d=c[1];return a<l||i<u?(a=l,i=u):(a>f||i>d)&&(a=f,i=d),[a,i]}function j1(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Ga(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Ct(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function Pd(t){return[0,1].map(function(e){return Ga(t.map(function(n){return n[e]}))})}function Ad(t){var e=Pd(t),n=Ct(e,t[0]),r=Ct(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function pe(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function lt(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Os(t,e){return t.forEach(function(n,r){t[r]=lt(t[r],e)}),t}function V1(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function $1(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,Te(n)?n:n.apply(void 0,a))})}function X1(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Id(t){return t.reduce(function(e,n){return Pt(n)?e.push.apply(e,Id(n)):e.push(n),e},[])}function Nd(t){return t.replace("#","")}function ks(t){var e=Nd(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function Bd(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function Ld(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function U1(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?ks(Bd(t)):ks(t);if(t.indexOf("(")!==-1){var e=Ds(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=Ba(r),i=[0,0,0,1],s=a.length;switch(n){case ms:case ys:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case bs:case Es:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return Ld(i)}}}function Z1(t,e){return e?Br.querySelectorAll(t):Br.querySelector(t)}function Ot(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Ps(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function As(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function q1(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=window.getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function J1(t,e,n,r){t.addEventListener(e,n,r)}function Q1(t,e,n,r){t.removeEventListener(e,n,r)}function Gd(t,e,n,r,a,i){for(var s=0;s<a;++s){var o=n+s*a,l=r+s*a;t[o]+=t[l]*i,e[o]+=e[l]*i}}function Fd(t,e,n,r,a){for(var i=0;i<a;++i){var s=n+i*a,o=r+i*a,l=t[s],u=e[s];t[s]=t[o],t[o]=l,e[s]=e[o],e[o]=u}}function zd(t,e,n,r,a){for(var i=0;i<r;++i){var s=n+i*r;t[s]/=a,e[s]/=a}}function Is(t,e,n){n===void 0&&(n=Math.sqrt(t.length));for(var r=t.slice(),a=0;a<n;++a)r[a*n+e-1]=0,r[(e-1)*n+a]=0;return r[(e-1)*(n+1)]=1,r}function re(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=xt(e),a=0;a<e;++a){var i=e*a+a;if(!De(n[i],ze)){for(var s=a+1;s<e;++s)if(n[e*a+s]){Fd(n,r,a,s,e);break}}if(!De(n[i],ze))return[];zd(n,r,a,e,n[i]);for(var s=0;s<e;++s){var o=s,l=s+a*e,u=n[l];!De(u,ze)||a===s||Gd(n,r,o,a,e,-u)}}return r}function Kd(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var a=0;a<e;++a)n[a*e+r]=t[e*r+a];return n}function Ns(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],a=0;a<e-1;++a)n[a]=t[e*(e-1)+a]/r;return n[e-1]=0,n}function Hd(t,e){for(var n=xt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function $e(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function ue(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=xt(n),a=Math.min(e,n),i=0;i<a-1;++i){for(var s=0;s<a-1;++s)r[i*n+s]=t[i*e+s];r[(i+1)*n-1]=t[(i+1)*e-1],r[(n-1)*n+i]=t[(e-1)*e+i]}return r[n*n-1]=t[e*e-1],r}function Fa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=xt(t);return e.forEach(function(a){r=mt(r,a,t)}),r}function mt(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],a=t.length/n,i=e.length/a;if(a){if(!i)return t}else return e;for(var s=0;s<n;++s)for(var o=0;o<i;++o){r[o*n+s]=0;for(var l=0;l<a;++l)r[o*n+s]+=t[l*n+s]*e[o*a+l]}return r}function ft(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]+e[a];return r}function Z(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),a=0;a<n;++a)r[a]=r[a]-e[a];return r}function Wd(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Bs(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function It(t,e,n){n===void 0&&(n=e.length);var r=mt(t,e,n),a=r[n-1];return r.map(function(i){return i/a})}function Yd(t,e){return mt(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function jd(t,e){return mt(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Vd(t,e){return mt(t,ur(e,4))}function _n(t,e){var n=e[0],r=n===void 0?1:n,a=e[1],i=a===void 0?1:a,s=e[2],o=s===void 0?1:s;return mt(t,[r,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1],4)}function Lr(t,e){return It(ur(e,3),$e(t,3))}function za(t,e){var n=e[0],r=n===void 0?0:n,a=e[1],i=a===void 0?0:a,s=e[2],o=s===void 0?0:s;return mt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,i,o,1],4)}function Ka(t,e){return mt(t,e,4)}function ur(t,e){var n=Math.cos(t),r=Math.sin(t),a=xt(e);return a[0]=n,a[1]=r,a[e]=-r,a[e+1]=n,a}function xt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Ha(t,e){for(var n=xt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[(e+1)*a]=t[a];return n}function Gr(t,e){for(var n=xt(e),r=Math.min(t.length,e-1),a=0;a<r;++a)n[e*(e-1)+a]=t[a];return n}function Wa(t,e,n,r,a,i,s,o){var l=t[0],u=t[1],c=e[0],f=e[1],d=n[0],v=n[1],p=r[0],h=r[1],g=a[0],m=a[1],y=i[0],E=i[1],b=s[0],x=s[1],_=o[0],S=o[1],D=[l,0,c,0,d,0,p,0,u,0,f,0,v,0,h,0,1,0,1,0,1,0,1,0,0,l,0,c,0,d,0,p,0,u,0,f,0,v,0,h,0,1,0,1,0,1,0,1,-g*l,-m*l,-y*c,-E*c,-b*d,-x*d,-_*p,-S*p,-g*u,-m*u,-y*f,-E*f,-b*v,-x*v,-_*h,-S*h],C=re(D,8);if(!C.length)return[];var M=mt(C,[g,m,y,E,b,x,_,S],8);return M[8]=1,ue(Kd(M),3,4)}function tb(t){return[0,1].map(function(e){return average(t.map(function(n){return n[e]}))})}function Ya(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Fr(t){return cr(Xe(t))}function eb(t){return Fr(getComputedStyle(t).transform)}function xn(t,e){var n=It(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function $d(t,e){e===void 0&&(e=document.body);for(var n=t,r=Ya();n;){var a=getComputedStyle(n).transform;if(r=Ka(Fr(a),r),n===e)break;n=n.parentElement}return r=re(r,4),r[12]=0,r[13]=0,r[14]=0,r}function cr(t){var e=Ya();return t.forEach(function(n){var r=n.matrixFunction,a=n.functionValue;r&&(e=r(e,a))}),e}function Xe(t){var e=jo(t)?t:Xf(t);return e.map(function(n){var r=Xo(n),a=r.prefix,i=r.value,s=null,o=a,l="";if(a==="translate"||a==="translateX"||a==="translate3d"){var u=sr(i).map(function(M){return parseFloat(M)}),c=u[0],f=u[1],d=f===void 0?0:f,v=u[2],p=v===void 0?0:v;s=za,l=[c,d,p]}else if(a==="translateY"){var d=parseFloat(i);s=za,l=[0,d,0]}else if(a==="translateZ"){var p=parseFloat(i);s=za,l=[0,0,p]}else if(a==="scale"||a==="scale3d"){var h=sr(i).map(function(M){return parseFloat(M)}),g=h[0],m=h[1],y=m===void 0?g:m,E=h[2],b=E===void 0?1:E;s=_n,l=[g,y,b]}else if(a==="scaleX"){var g=parseFloat(i);s=_n,l=[g,1,1]}else if(a==="scaleY"){var y=parseFloat(i);s=_n,l=[1,y,1]}else if(a==="scaleZ"){var b=parseFloat(i);s=_n,l=[1,1,b]}else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var x=Uo(i),_=x.unit,S=x.value,D=_==="rad"?S:S*Math.PI/180;a==="rotate"||a==="rotateZ"?(o="rotateZ",s=Vd):a==="rotateX"?s=Yd:a==="rotateY"&&(s=jd),l=D}else if(a==="matrix3d")s=Ka,l=sr(i).map(function(M){return parseFloat(M)});else if(a==="matrix"){var C=sr(i).map(function(M){return parseFloat(M)});s=Ka,l=[C[0],C[1],0,0,C[2],C[3],0,0,0,0,1,0,C[4],C[5],0,1]}else o="";return{name:a,functionName:o,value:i,matrixFunction:s,functionValue:l}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ja=function(t,e){return ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},ja(t,e)};function Xd(t,e){ja(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ls=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),Ud=function(t){Xd(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,Ls)||this}return e}(Lf);function zr(t,e){return Tr(t,e,Ls)}const Gs=Ud;var Fs="rgb",zs="rgba",Ks="hsl",Hs="hsla",rb=[Fs,zs,Ks,Hs],Zd="function",nb="property",ab="array",qd="object",Jd="string",Qd="number",Kr="undefined",ib=typeof window!==Kr,Hr=typeof document!==Kr&&document,Ws=null,ob=function(t){if(!Hr)return"";var e=(Hr.body||Hr.documentElement).style,n=Ws.length;if(typeof e[t]!==Kr)return t;for(var r=0;r<n;++r){var a="-"+Ws[r]+"-"+t;if(typeof e[a]!==Kr)return a}return""},sb=null,lb=null,ub=null,cb=null,tv=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],he=1e-7,fb=1/he,Cn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function db(t,e,n,r){return(t*r+e*n)/(n+r)}function vb(t){return typeof t===Kr}function Va(t){return t&&typeof t===qd}function ev(t){return Array.isArray(t)}function $a(t){return typeof t===Jd}function pb(t){return typeof t===Qd}function Ys(t){return typeof t===Zd}function rv(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function js(t,e,n,r,a){var i=Xa(t,e,n);return i?n:nv(t,e,n+1,r,a)}function Xa(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function nv(t,e,n,r,a){for(var i=function(u){var c=e[u].trim();if(c===t.close&&!Xa(t,e,u))return{value:u};var f=u,d=Wr(a,function(v){var p=v.open;return p===c});if(d&&(f=js(d,e,u,r,a)),f===-1)return s=u,"break";u=f,s=u},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function Vs(t,e){var n=$a(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?tv:u,f=c.map(function(S){var D=S.open,C=S.close;return D===C?D:D+"|"+C}).join("|"),d="(\\s*"+a+"\\s*|"+f+"|\\s+)",v=new RegExp(d,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var E=function(S){var D=p[S].trim(),C=S,M=Wr(c,function(T){var P=T.open;return P===D}),R=Wr(c,function(T){var P=T.close;return P===D});if(M){if(C=js(M,p,S,h,c),C!==-1&&l)return y()&&i||(g.push(p.slice(S,C+1).join("")),S=C,i)?(b=S,"break"):(b=S,"continue")}else{if(R&&!Xa(R,p,S))throw new Error("invalid format: "+R.close);if(rv(D,a)&&!s)return y(),i?(b=S,"break"):(b=S,"continue")}C===-1&&(C=h-1),m.push(p.slice(S,C+1).join("")),S=C,b=S},b,x=0;x<h;++x){var _=E(x);if(x=b,_==="break")break}return m.length&&g.push(m.join("")),g}function hb(t){return Vs(t,"")}function $s(t){return Vs(t,",")}function av(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Xs(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function Us(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function gb(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function mb(t){return[].slice.call(t)}function Zs(){return Date.now?Date.now():new Date().getTime()}function Ua(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function iv(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function yb(t,e,n){var r=iv(t,e);return r>-1?t[r]:n}function Wr(t,e,n){var r=Ua(t,e);return r>-1?t[r]:n}var bb=null,Eb=null;function Sb(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in e)e.push(n);return e}function _b(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function xb(t,e){var n=Xs(t),r=n.value,a=n.unit;if(Va(e)){var i=e[a];if(i){if(Ys(i))return i(r);if(Cn[a])return Cn[a](r,i)}}else if(a==="%")return r*e/100;return Cn[a]?Cn[a](r):r}function qs(t,e,n){return Math.max(e,Math.min(t,n))}function Js(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Ue(e[0],he),Ue(e[0]/r,he)],[Ue(e[1]*r,he),Ue(e[1],he)]].filter(function(a){return a.every(function(i,s){var o=e[s],l=Ue(o,he);return n?i<=o||i<=l:i>=o||i>=l})})[0]||t}function ov(t,e,n,r){if(!r)return t.map(function(v,p){return qs(v,e[p],n[p])});var a=t[0],i=t[1],s=r===!0?a/i:r,o=Js(t,e,!1,s),l=o[0],u=o[1],c=Js(t,n,!0,s),f=c[0],d=c[1];return a<l||i<u?(a=l,i=u):(a>f||i>d)&&(a=f,i=d),[a,i]}function sv(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function lv(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Qs(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function uv(t){return[0,1].map(function(e){return lv(t.map(function(n){return n[e]}))})}function tl(t){var e=uv(t),n=Qs(e,t[0]),r=Qs(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Za(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Ue(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Cb(t,e){return t.forEach(function(n,r){t[r]=Ue(t[r],e)}),t}function wb(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Db(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,$a(n)?n:n.apply(void 0,a))})}function cv(t){return t.replace("#","")}function el(t){var e=cv(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function fv(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function dv(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function Mb(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?el(fv(t)):el(t);if(t.indexOf("(")!==-1){var e=av(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=$s(r),i=[0,0,0,1],s=a.length;switch(n){case Fs:case zs:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case Ks:case Hs:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return dv(i)}}}function Tb(t,e){return e?Hr.querySelectorAll(t):Hr.querySelector(t)}function vv(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function pv(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Rb(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Ob(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=window.getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function $t(t,e,n,r){t.addEventListener(e,n,r)}function Ht(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ze(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Wt(t){return Ue(t,he)}function hv(t,e){return t.every(function(n,r){return Wt(n-e[r])===0})}function gv(t,e){return!Wt(t[0]-e[0])&&!Wt(t[1]-e[1])}function mv(t){return t.reduce(function(e,n){return e.push.apply(e,n),e},[])}function Yr(t){return t.length<3?0:Math.abs(sv(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function qa(t,e){var n=e.width,r=e.height,a=e.left,i=e.top,s=Oe(t),o=s.minX,l=s.minY,u=s.maxX,c=s.maxY,f=n/(u-o),d=r/(c-l);return t.map(function(v){return[a+(v[0]-o)*f,i+(v[1]-l)*d]})}function Oe(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function wn(t,e,n){var r=t[0],a=t[1],i=Oe(e),s=i.minX,o=i.maxX,l=[[s,a],[o,a]],u=qe(l[0],l[1]),c=Qa(e),f=[];if(c.forEach(function(p){var h=qe(p[0],p[1]),g=p[0];if(hv(u,h))f.push({pos:t,line:p,type:"line"});else{var m=Ja(Dn(u,h),[l,p]);m.forEach(function(y){p.some(function(E){return gv(E,y)})?f.push({pos:y,line:p,type:"point"}):Wt(g[1]-a)!==0&&f.push({pos:y,line:p,type:"intersection"})})}}),!n&&Wr(f,function(p){return p[0]===r}))return!0;var d=0,v={};return f.forEach(function(p){var h=p.pos,g=p.type,m=p.line;if(!(h[0]>r))if(g==="intersection")++d;else{if(g==="line")return;if(g==="point"){var y=Wr(m,function(x){return x[1]!==a}),E=v[h[0]],b=y[1]>a?1:-1;E?E!==b&&++d:v[h[0]]=b}}}),d%2===1}function yv(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/(n*n+r*r)}function qe(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],s=a-n,o=i-r;Math.abs(s)<he&&(s=0),Math.abs(o)<he&&(o=0);var l=0,u=0,c=0;return s?o?(l=-o/s,u=1,c=-l*n-r):(u=1,c=-r):o&&(l=-1,c=n),[l,u,c]}function Dn(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],s=e[1],o=e[2],l=n===0&&i===0,u=r===0&&s===0,c=[];if(l&&u)return[];if(l){var f=-a/r,d=-o/s;return f!==d?[]:[[-1/0,f],[1/0,f]]}else if(u){var v=-a/n,p=-o/i;return v!==p?[]:[[v,-1/0],[v,1/0]]}else if(n===0){var h=-a/r,g=-(s*h+o)/i;c=[[g,h]]}else if(i===0){var h=-o/s,g=-(r*h+a)/n;c=[[g,h]]}else if(r===0){var g=-a/n,h=-(i*g+o)/s;c=[[g,h]]}else if(s===0){var g=-o/i,h=-(n*g+a)/r;c=[[g,h]]}else{var g=(r*o-s*a)/(s*n-r*i),h=-(n*g+a)/r;c=[[g,h]]}return c.map(function(m){return[m[0],m[1]]})}function kb(t,e,n){var r=Dn(qe(t[0],t[1]),qe(e[0],e[1]));return n?Ja(r,[t,e]):r}function bv(t,e){var n=qe(e[0],e[1]);return Wt(yv(n,t))===0}function Ja(t,e){var n=e.map(function(f){return[0,1].map(function(d){return[Math.min(f[0][d],f[1][d]),Math.max(f[0][d],f[1][d])]})}),r=[];if(t.length===2){var a=t[0],i=a[0],s=a[1];if(Wt(i-t[1][0])){if(!Wt(s-t[1][1])){var u=Math.max.apply(Math,n.map(function(f){return f[0][0]})),c=Math.min.apply(Math,n.map(function(f){return f[0][1]}));if(Wt(u-c)>0)return[];r=[[u,s],[c,s]]}}else{var o=Math.max.apply(Math,n.map(function(f){return f[1][0]})),l=Math.min.apply(Math,n.map(function(f){return f[1][1]}));if(Wt(o-l)>0)return[];r=[[i,o],[i,l]]}}return r.length||(r=t.filter(function(f){var d=f[0],v=f[1];return n.every(function(p){return 0<=Wt(d-p[0][0])&&0<=Wt(p[0][1]-d)&&0<=Wt(v-p[1][0])&&0<=Wt(p[1][1]-v)})})),r.map(function(f){return[Wt(f[0]),Wt(f[1])]})}function Qa(t){return Ze(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function ti(t,e){var n=t.slice(),r=e.slice();tl(n)===-1&&n.reverse(),tl(r)===-1&&r.reverse();var a=Qa(n),i=Qa(r),s=a.map(function(c){return qe(c[0],c[1])}),o=i.map(function(c){return qe(c[0],c[1])}),l=[];s.forEach(function(c,f){var d=a[f],v=[];o.forEach(function(p,h){var g=Dn(c,p),m=Ja(g,[d,i[h]]);v.push.apply(v,m.map(function(y){return{index1:f,index2:h,pos:y,type:"intersection"}}))}),v.sort(function(p,h){return Za(d[0],p.pos)-Za(d[0],h.pos)}),l.push.apply(l,v),wn(d[1],r)&&l.push({index1:f,index2:-1,pos:d[1],type:"inside"})}),i.forEach(function(c,f){if(wn(c[1],n)){var d=!1,v=Ua(l,function(p){var h=p.index2;return h===f?(d=!0,!1):!!d});v===-1&&(d=!1,v=Ua(l,function(p){var h=p.index1,g=p.index2;return h===-1&&g+1===f?(d=!0,!1):!!d})),v===-1?l.push({index1:-1,index2:f,pos:c[1],type:"inside"}):l.splice(v,0,{index1:-1,index2:f,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var f=c.pos,d=f[0]+"x"+f[1];return u[d]?!1:(u[d]=!0,!0)})}function ei(t,e){var n=ti(t,e);return n.map(function(r){var a=r.pos;return a})}function Ev(t){var e=t[0],n=e.index1,r=e.index2,a=t[1],i=a.index1,s=a.index2;return n!==-1&&(n===i||n+1===i)||r!==-1&&(r===s||r+1===s)}function Sv(t,e){var n=ti(t,e),r=[],a;return ti(t,e).forEach(function(i,s,o){s===0||!Ev([o[s-1],i])?(a=[i],r.push(a)):a.push(i)}),r.map(function(i){return i.map(function(s){var o=s.pos;return o})})}function Mn(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=[]);for(var a=r.length===0,i=t.length,s=t[n]?n:0,o=Ze(t.slice(s),t.slice(0,s)),l=function(f){var d=o[f];if(find(e,function(m){return m[0]===d[0]&&m[1]===d[1]}))return"continue";if(r.some(function(m){return find(m,function(y){return y[0]===d[0]&&y[1]===d[1]})}))return a?"continue":"break";var v=void 0;a?(v=[],r.push(v)):v=r[r.length-1],v.push(d);var p=[d,t[n+1]||t[0]],h=e.filter(function(m){return bv(m,p)}).sort(function(m,y){return getDist(d,m)-getDist(d,y)})[0];if(h){var g=e.indexOf(h);if(Mn(e,t,g,r),!a)return"break"}else return Mn(o,e,f+1,r),"break"},u=0;u<i;++u){var c=l(u);if(c==="break")break}return r}function Pb(t,e){return Mn(t,Ze(e).reverse())}function Ab(t,e){if(!e.length)return[Ze(t)];var n=Sv(t,e),r=[t];return n.forEach(function(a){var i=Ze(a).reverse();r=mv(r.map(function(s){var o=Mn(s,i),l=o[0];if(o.length===1&&i.every(function(d){return l.indexOf(d)===-1})){var u=l[l.length-1],c=Ze(i).sort(function(d,v){return getDist(u,d)-getDist(u,v)})[0],f=i.indexOf(c);l.push.apply(l,Ze(i.slice(f),i.slice(0,f),[i[f],u]))}return o}))}),r}function _v(t,e){var n=ei(t,e);return Yr(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ri=function(){return ri=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ri.apply(this,arguments)};function xv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var Cv=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(ma(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(ma(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=Zo(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,xv(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(ri({listener:r},a))},t}();const jr=Cv;var rl="rgb",nl="rgba",al="hsl",il="hsla",Ib=[rl,nl,al,il],wv="function",Nb="property",Bb="array",Dv="object",Mv="string",Tv="number",Vr="undefined",Lb=typeof window!==Vr,fr=typeof document!==Vr&&document,ol=null,Gb=function(t){if(!fr)return"";var e=(fr.body||fr.documentElement).style,n=ol.length;if(typeof e[t]!==Vr)return t;for(var r=0;r<n;++r){var a="-"+ol[r]+"-"+t;if(typeof e[a]!==Vr)return a}return""},Fb=null,zb=null,Kb=null,Hb=null,Rv=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],dr=1e-7,Wb=1/dr,Tn={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ov(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function Yb(t,e,n,r){return(t*r+e*n)/(n+r)}function jb(t){return typeof t===Vr}function kv(t){return t&&typeof t===Dv}function sl(t){return Array.isArray(t)}function ni(t){return typeof t===Mv}function Vb(t){return typeof t===Tv}function ll(t){return typeof t===wv}function Pv(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function ul(t,e,n,r,a){var i=ai(t,e,n);return i?n:Av(t,e,n+1,r,a)}function ai(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Av(t,e,n,r,a){for(var i=function(u){var c=e[u].trim();if(c===t.close&&!ai(t,e,u))return{value:u};var f=u,d=oi(a,function(v){var p=v.open;return p===c});if(d&&(f=ul(d,e,u,r,a)),f===-1)return s=u,"break";u=f,s=u},s,o=n;o<r;++o){var l=i(o);if(o=s,typeof l=="object")return l.value;if(l==="break")break}return-1}function ii(t,e){var n=ni(e)?{separator:e}:e,r=n.separator,a=r===void 0?",":r,i=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,o=n.isSeparateOpenClose,l=o===void 0?s:o,u=n.openCloseCharacters,c=u===void 0?Rv:u,f=c.map(function(S){var D=S.open,C=S.close;return D===C?D:D+"|"+C}).join("|"),d="(\\s*"+a+"\\s*|"+f+"|\\s+)",v=new RegExp(d,"g"),p=t.split(v).filter(Boolean),h=p.length,g=[],m=[];function y(){return m.length?(g.push(m.join("")),m=[],!0):!1}for(var E=function(S){var D=p[S].trim(),C=S,M=oi(c,function(P){var k=P.open;return k===D}),R=oi(c,function(P){var k=P.close;return k===D});if(M){if(C=ul(M,p,S,h,c),C!==-1&&l)return y()&&i||(g.push(p.slice(S,C+1).join("")),S=C,i)?(b=S,"break"):(b=S,"continue")}else if(R&&!ai(R,p,S)){var T=Ov(c);return T.splice(c.indexOf(R),1),{value:ii(t,{separator:a,isSeparateFirst:i,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:T})}}else if(Pv(D,a)&&!s)return y(),i?(b=S,"break"):(b=S,"continue");C===-1&&(C=h-1),m.push(p.slice(S,C+1).join("")),S=C,b=S},b,x=0;x<h;++x){var _=E(x);if(x=b,typeof _=="object")return _.value;if(_==="break")break}return m.length&&g.push(m.join("")),g}function $b(t){return ii(t,"")}function Iv(t){return ii(t,",")}function Nv(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Bv(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],a=e[3];return{prefix:n,unit:a,value:parseFloat(r)}}function Lv(t){return t.replace(/[\s-_]([a-z])/g,function(e,n){return n.toUpperCase()})}function Xb(t,e){return e===void 0&&(e="-"),t.replace(/([a-z])([A-Z])/g,function(n,r,a){return""+r+e+a.toLowerCase()})}function Ub(t){return[].slice.call(t)}function Gv(){return Date.now?Date.now():new Date().getTime()}function Fv(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function zv(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=r-1;a>=0;--a)if(e(t[a],a,t))return a;return n}function Zb(t,e,n){var r=zv(t,e);return r>-1?t[r]:n}function oi(t,e,n){var r=Fv(t,e);return r>-1?t[r]:n}var qb=null,Jb=null;function cl(t){return Object.keys(t)}function Qb(t){var e=cl(t);return e.map(function(n){return t[n]})}function tE(t){var e=cl(t);return e.map(function(n){return[n,t[n]]})}function eE(t,e){e===void 0&&(e=[]),t.sort(function(n,r){var a=e.indexOf(n),i=e.indexOf(r);return i===-1&&a===-1?0:a===-1?1:i===-1?-1:a-i})}function rE(t,e){var n=Bv(t),r=n.value,a=n.unit;if(kv(e)){var i=e[a];if(i){if(ll(i))return i(r);if(Tn[a])return Tn[a](r,i)}}else if(a==="%")return r*e/100;return Tn[a]?Tn[a](r):r}function Kv(t,e,n){return Math.max(e,Math.min(t,n))}function fl(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[vr(e[0],dr),vr(e[0]/r,dr)],[vr(e[1]*r,dr),vr(e[1],dr)]].filter(function(a){return a.every(function(i,s){var o=e[s],l=vr(o,dr);return n?i<=o||i<=l:i>=o||i>=l})})[0]||t}function nE(t,e,n,r){if(!r)return t.map(function(v,p){return Kv(v,e[p],n[p])});var a=t[0],i=t[1],s=r===!0?a/i:r,o=fl(t,e,!1,s),l=o[0],u=o[1],c=fl(t,n,!0,s),f=c[0],d=c[1];return a<l||i<u?(a=l,i=u):(a>f||i>d)&&(a=f,i=d),[a,i]}function aE(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function Hv(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function dl(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function Wv(t){return[0,1].map(function(e){return Hv(t.map(function(n){return n[e]}))})}function iE(t){var e=Wv(t),n=dl(e,t[0]),r=dl(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function oE(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function vr(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function sE(t,e){return t.forEach(function(n,r){t[r]=vr(t[r],e)}),t}function lE(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function uE(t,e,n){var r=!1;return t.replace(e,function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return r?a[0]:(r=!0,ni(n)?n:n.apply(void 0,a))})}function cE(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Yv(t){return t.reduce(function(e,n){return sl(n)?e.push.apply(e,Yv(n)):e.push(n),e},[])}function jv(t){return t.replace("#","")}function vl(t){var e=jv(t),n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),i=parseInt(e.substring(6,8),16)/255;return isNaN(i)&&(i=1),[n,r,a,i]}function Vv(t){var e=t.charAt(1),n=t.charAt(2),r=t.charAt(3),a=t.charAt(4),i=["#",e,e,n,n,r,r,a,a];return i.join("")}function $v(t){var e,n=t[0],r=t[1],a=t[2];n<0&&(n+=Math.floor((Math.abs(n)+360)/360)*360),n%=360;var i=(1-Math.abs(2*a-1))*r,s=i*(1-Math.abs(n/60%2-1)),o=a-i/2,l;return n<60?l=[i,s,0]:n<120?l=[s,i,0]:n<180?l=[0,i,s]:n<240?l=[0,s,i]:n<300?l=[s,0,i]:n<360?l=[i,0,s]:l=[0,0,0],[Math.round((l[0]+o)*255),Math.round((l[1]+o)*255),Math.round((l[2]+o)*255),(e=t[3])!==null&&e!==void 0?e:1]}function fE(t){if(t.charAt(0)==="#")return t.length===4||t.length===5?vl(Vv(t)):vl(t);if(t.indexOf("(")!==-1){var e=Nv(t),n=e.prefix,r=e.value;if(!n||!r)return;var a=Iv(r),i=[0,0,0,1],s=a.length;switch(n){case rl:case nl:for(var o=0;o<s;++o)i[o]=parseFloat(a[o]);return i;case al:case il:for(var o=0;o<s;++o)a[o].indexOf("%")!==-1?i[o]=parseFloat(a[o])/100:i[o]=parseFloat(a[o]);return $v(i)}}}function dE(t,e){return fr?e?fr.querySelectorAll(t):fr.querySelector(t):e?[]:null}function vE(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function pE(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function hE(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function gE(t,e){if(!t||!e||!e.length)return{};var n;if(t instanceof Element)n=t;else if(t.length)n=t[0];else return{};for(var r={},a=window.getComputedStyle(n),i=e.length,s=0;s<i;++s)r[e[s]]=a[e[s]];return r}function mE(t,e,n,r){t.addEventListener(e,n,r)}function yE(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var si=function(t,e){return si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},si(t,e)};function Xv(t,e){si(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pr=function(){return pr=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pr.apply(this,arguments)};function Uv(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function pl(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Rn(t){if(t){if(ni(t))return document.querySelector(t)}else return null;if(ll(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var Zv=function(t){Xv(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var a=r._currentOptions;r._lock||!a||r.emit("scrollDrag",{next:function(i){r.checkScroll({container:a.container,inputEvent:i})}})},r}var n=e.prototype;return n.dragStart=function(r,a){var i=Rn(a.container);if(!i){this._flag=!1;return}var s=0,o=0,l=0,u=0;if(i===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=i.getBoundingClientRect();s=c.top,o=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:s,left:o,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],a),this._currentOptions=a,this._registerScrollEvent(a)},n.drag=function(r,a){if(clearTimeout(this._timer),!!this._flag){var i=r.clientX,s=r.clientY,o=a.threshold,l=o===void 0?0:o,u=this,c=u._startRect,f=u._startPos;this._currentOptions=a;var d=[0,0];return c.top>s-l?(f[1]>c.top||s<f[1])&&(d[1]=-1):c.top+c.height<s+l&&(f[1]<c.top+c.height||s>f[1])&&(d[1]=1),c.left>i-l?(f[0]>c.left||i<f[0])&&(d[0]=-1):c.left+c.width<i+l&&(f[0]<c.left+c.width||i>f[0])&&(d[0]=1),!d[0]&&!d[1]?!1:this._continueDrag(pr(pr({},a),{direction:d,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var a=this;if(this._isWait)return!1;var i=r.prevScrollPos,s=i===void 0?this._prevScrollPos:i,o=r.direction,l=r.throttleTime,u=l===void 0?0:l,c=r.inputEvent,f=r.isDrag,d=this._getScrollPosition(o||[0,0],r),v=d[0]-s[0],p=d[1]-s[1],h=o||[v?Math.abs(v)/v:0,p?Math.abs(p)/p:0];return this._prevScrollPos=d,this._lock=!1,!v&&!p?!1:(this.emit("move",{offsetX:h[0]?v:0,offsetY:h[1]?p:0,inputEvent:c}),u&&f&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,a){var i=a.container,s=a.getScrollPosition,o=s===void 0?Uv:s;return o({container:Rn(i),direction:r})},n._continueDrag=function(r){var a=this,i,s=r.container,o=r.direction,l=r.throttleTime,u=r.useScroll,c=r.isDrag,f=r.inputEvent;if(!(!this._flag||c&&this._isWait)){var d=Gv(),v=Math.max(l+this._prevTime-d,0);if(v>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){a._continueDrag(r)},v),!1;this._prevTime=d;var p=this._getScrollPosition(o,r);this._prevScrollPos=p,c&&(this._isWait=!0),u||(this._lock=!0);var h={container:Rn(s),direction:o,inputEvent:f};return(i=r.requestScroll)===null||i===void 0||i.call(r,h),this.emit("scroll",h),this._isWait=!1,u||this.checkScroll(pr(pr({},r),{prevScrollPos:p,direction:o,inputEvent:f}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var a=r.checkScrollEvent;if(a){var i=a===!0?pl:a,s=Rn(r.container);a===!0&&(s===document.body||s===document.documentElement)?this._unregister=pl(window,this._onScroll):this._unregister=i(s,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(jr);const hl=Zv;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var li=function(t,e){return li=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},li(t,e)};function qv(t,e){li(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mt=function(){return Mt=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mt.apply(this,arguments)};function Jv(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=Math.atan2(r,n);return a>=0?a:a+Math.PI*2}function ui(t){return Jv([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Qv(t){return t.touches&&t.touches.length>=2}function On(t){return t?t.touches?ep(t.touches):[ml(t)]:[]}function tp(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function gl(t,e,n){var r=n.length,a=$r(t,r),i=a.clientX,s=a.clientY,o=a.originalClientX,l=a.originalClientY,u=$r(e,r),c=u.clientX,f=u.clientY,d=$r(n,r),v=d.clientX,p=d.clientY,h=i-c,g=s-f,m=i-v,y=s-p;return{clientX:o,clientY:l,deltaX:h,deltaY:g,distX:m,distY:y}}function ci(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function ep(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(ml(t[r]));return n}function ml(t){return{clientX:t.clientX,clientY:t.clientY}}function $r(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var a=t[r];n.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,n.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,n.clientX+=a.clientX,n.clientY+=a.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var fi=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),ui(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),ui(e)-ui(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=gl(e||this.prevClients,this.prevClients,this.startClients),a=r.deltaX,i=r.deltaY;return this.movement+=Math.sqrt(a*a+i*i),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);var n=this.prevClients;return this.startClients.map(function(r,a){return gl([e[a]],[n[a]],[r])})},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=$r(e,this.length),a=$r(this.prevClients,this.length),i=r.clientX-a.clientX,s=r.clientY-a.clientY;return Math.sqrt(i*i+s*s)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),ci(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),ci(e)/ci(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),yl=["textarea","input"],bl=function(t){qv(e,t);function e(n,r){r===void 0&&(r={});var a=t.call(this)||this;a.options={},a.flag=!1,a.pinchFlag=!1,a.data={},a.isDrag=!1,a.isPinch=!1,a.isMouse=!1,a.isTouch=!1,a.clientStores=[],a.targets=[],a.prevTime=0,a.doubleFlag=!1,a._dragFlag=!1,a._isTrusted=!1,a._isMouseEvent=!1,a._isSecondaryButton=!1,a._preventMouseEvent=!1,a._prevInputEvent=null,a.onDragStart=function(f,d){if(d===void 0&&(d=!0),!(!a.flag&&f.cancelable===!1)){var v=a.options,p=v.container,h=v.pinchOutside,g=v.preventWheelClick,m=v.preventRightClick,y=v.preventDefault,E=v.checkInput,b=v.preventClickEventOnDragStart,x=v.preventClickEventOnDrag,_=v.preventClickEventByCondition,S=a.isTouch,D=!a.flag;if(a._isSecondaryButton=f.which===3||f.button===2,g&&(f.which===2||f.button===1)||m&&(f.which===3||f.button===2))return a.stop(),!1;if(D){var C=document.activeElement,M=f.target;if(M){var R=M.tagName.toLowerCase(),T=yl.indexOf(R)>-1,P=M.isContentEditable;if(T||P){if(E||C===M||C&&P&&C.isContentEditable&&C.contains(M))return!1}else if((y||f.type==="touchstart")&&C){var k=C.tagName.toLowerCase();(C.isContentEditable||yl.indexOf(k)>-1)&&C.blur()}(b||x||_)&&$t(window,"click",a._onClick,!0)}a.clientStores=[new fi(On(f))],a.flag=!0,a.isDrag=!1,a._isTrusted=d,a._dragFlag=!0,a._prevInputEvent=f,a.data={},a.doubleFlag=Zs()-a.prevTime<200,a._isMouseEvent=tp(f),!a._isMouseEvent&&a._preventMouseEvent&&(a._preventMouseEvent=!1);var A=a._preventMouseEvent||a.emit("dragStart",Mt(Mt({data:a.data,datas:a.data,inputEvent:f,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,isTrusted:d,isDouble:a.doubleFlag},a.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){a._dragFlag=!1}}));A===!1&&a.stop(),a._isMouseEvent&&a.flag&&y&&f.preventDefault()}if(!a.flag)return!1;var N=0;if(D?(a._attchDragEvent(),S&&h&&(N=setTimeout(function(){$t(p,"touchstart",a.onDragStart,{passive:!1})}))):S&&h&&Ht(p,"touchstart",a.onDragStart),a.flag&&Qv(f)){if(clearTimeout(N),D&&f.touches.length!==f.changedTouches.length)return;a.pinchFlag||a.onPinchStart(f)}}},a.onDrag=function(f,d){if(a.flag){var v=a.options.preventDefault;!a._isMouseEvent&&v&&f.preventDefault(),a._prevInputEvent=f;var p=On(f),h=a.moveClients(p,f,!1);if(a._dragFlag){if(a.pinchFlag||h.deltaX||h.deltaY){var g=a._preventMouseEvent||a.emit("drag",Mt(Mt({},h),{isScroll:!!d,inputEvent:f}));if(g===!1){a.stop();return}}a.pinchFlag&&a.onPinch(f,p)}a.getCurrentStore().getPosition(p,!0)}},a.onDragEnd=function(f){if(a.flag){var d=a.options,v=d.pinchOutside,p=d.container,h=d.preventClickEventOnDrag,g=d.preventClickEventOnDragStart,m=d.preventClickEventByCondition,y=a.isDrag;(h||g||m)&&requestAnimationFrame(function(){a._allowClickEvent()}),!m&&!g&&h&&!y&&a._allowClickEvent(),a.isTouch&&v&&Ht(p,"touchstart",a.onDragStart),a.pinchFlag&&a.onPinchEnd(f);var E=f?.touches?On(f):[],b=E.length;b===0||!a.options.keepDragging?a.flag=!1:a._addStore(new fi(E));var x=a._getPosition(),_=Zs(),S=!y&&a.doubleFlag;a._prevInputEvent=null,a.prevTime=y||S?0:_,a.flag||(a._dettachDragEvent(),a._preventMouseEvent||a.emit("dragEnd",Mt({data:a.data,datas:a.data,isDouble:S,isDrag:y,isClick:!y,isMouseEvent:a._isMouseEvent,isSecondaryButton:a._isSecondaryButton,inputEvent:f,isTrusted:a._isTrusted},x)),a.clientStores=[],a._isMouseEvent||(a._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){a._preventMouseEvent=!1})})))}},a.onBlur=function(){a.onDragEnd()},a._allowClickEvent=function(){Ht(window,"click",a._onClick,!0)},a._onClick=function(f){a._allowClickEvent(),a._preventMouseEvent=!1;var d=a.options.preventClickEventByCondition;d?.(f)||(f.stopPropagation(),f.preventDefault())},a._onContextMenu=function(f){var d=a.options;d.preventRightClick?a.onDragEnd(f):f.preventDefault()},a._passCallback=function(){};var i=[].concat(n);a.options=Mt({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var s=a.options,o=s.container,l=s.events,u=s.checkWindowBlur;if(a.isTouch=l.indexOf("touch")>-1,a.isMouse=l.indexOf("mouse")>-1,a.targets=i,a.isMouse&&(i.forEach(function(f){$t(f,"mousedown",a.onDragStart),$t(f,"mousemove",a._passCallback)}),$t(o,"contextmenu",a._onContextMenu)),u&&$t(window,"blur",a.onBlur),a.isTouch){var c={passive:!1};i.forEach(function(f){$t(f,"touchstart",a.onDragStart,c),$t(f,"touchmove",a._passCallback,c)})}return a}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,a){return r+a.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,a,i){i===void 0&&(i=!0),this.flag&&(this.clientStores[0].move(n,r),i&&this.onDrag(a,!0))},e.prototype.move=function(n,r){var a=n[0],i=n[1],s=this.getCurrentStore(),o=s.prevClients;return this.moveClients(o.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+a,clientY:c+i,originalClientX:u,originalClientY:c}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var a in n)r[a]=n[a];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),Mt(Mt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,a=this.options.container;this.off(),Ht(window,"blur",this.onBlur),this.isMouse&&(r.forEach(function(i){Ht(i,"mousedown",n.onDragStart)}),Ht(a,"contextmenu",this._onContextMenu)),this.isTouch&&(r.forEach(function(i){Ht(i,"touchstart",n.onDragStart)}),Ht(a,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>r)){var a=new fi(On(n));this.pinchFlag=!0,this._addStore(a);var i=this.emit("pinchStart",Mt(Mt({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:n,isTrusted:this._isTrusted}));i===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var a=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Mt(Mt({data:this.data,datas:this.data,movement:this.getMovement(r),angle:a.getAngle(r),rotation:a.getRotation(r),touches:a.getPositions(r),scale:a.getScale(r),distance:a.getDistance(r)},a.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var a=this.getCurrentStore();this.emit("pinchEnd",Mt(Mt({data:this.data,datas:this.data,isPinch:r,touches:a.getPositions()},a.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,a){var i=this._getPosition(n,a),s=this.isDrag;(i.deltaX||i.deltaY)&&(this.isDrag=!0);var o=!1;return!s&&this.isDrag&&(o=!0),Mt(Mt({data:this.data,datas:this.data},i),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:o})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var a=this.getCurrentStore(),i=a.getPosition(n,r),s=this.clientStores.slice(1).reduce(function(u,c){var f=c.getPosition();return u.distX+=f.distX,u.distY+=f.distY,u},i),o=s.distX,l=s.distY;return Mt(Mt({},i),{distX:o,distY:l})},e.prototype._attchDragEvent=function(){var n=this.options.container,r={passive:!1};this.isMouse&&($t(n,"mousemove",this.onDrag),$t(n,"mouseup",this.onDragEnd)),this.isTouch&&($t(n,"touchmove",this.onDrag,r),$t(n,"touchend",this.onDragEnd,r),$t(n,"touchcancel",this.onDragEnd,r))},e.prototype._dettachDragEvent=function(){var n=this.options.container;this.isMouse&&(Ht(n,"mousemove",this.onDrag),Ht(n,"mouseup",this.onDragEnd)),this.isTouch&&(Ht(n,"touchstart",this.onDragStart),Ht(n,"touchmove",this.onDrag),Ht(n,"touchend",this.onDragEnd),Ht(n,"touchcancel",this.onDragEnd))},e}(jr);function rp(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var np=rp;function ap(t){return np(t).toString(36)}function ip(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function op(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,a){var i=a.trim();return(i?sr(i):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?""+o.replace(/\:host/g,"."+t):o?"."+t+" "+o:"."+t}).join(", ")+" {"})}function sp(t,e,n,r){var a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),n.nonce&&a.setAttribute("nonce",n.nonce),a.innerHTML=op(t,e,n),(r||document.head||document.body).appendChild(a),a}function lp(t){var e="rCS"+ap(t),n=0,r;return{className:e,inject:function(a,i){i===void 0&&(i={});var s=ip(a),o=n===0,l;return(s||o)&&(l=sp(e,t,i,s)),o&&(r=l),s||++n,{destroy:function(){s?(a.removeChild(l),l=null):(n>0&&--n,n===0&&r&&(r.parentNode.removeChild(r),r=null))}}}}}const up=lp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var di=function(t,e){return di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},di(t,e)};function El(t,e){di(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var vi=function(){return vi=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vi.apply(this,arguments)};function cp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}var fp=function(t){El(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.injectResult=null,r.tag="div",r}var n=e.prototype;return n.render=function(){var r=this.props,a=r.className,i=a===void 0?"":a,s=r.cspNonce,o=r.portalContainer,l=cp(r,["className","cspNonce","portalContainer"]),u=this.injector.className,c=this.tag,f={};return(hd||"").indexOf("simple")>-1&&o&&(f={portalContainer:o}),Qt(c,vi({ref:le(this,"element"),"data-styled-id":u,className:i+" "+u},f,l))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(Da);function dp(t,e){var n=up(e);return function(r){El(a,r);function a(){var i=r!==null&&r.apply(this,arguments)||this;return i.injector=n,i.tag=t,i}return a}(fp)}const Sl=dp;var pi=function(t,e){return pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},pi(t,e)};function hr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var O=function(){return O=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O.apply(this,arguments)};function vp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function pp(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function Q(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Xr(t,e){var n;return O({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}function hp(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function gp(t){var e=hp(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var kn=bd(),_l=kn.browser.webkit,xl=_l&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),mp=kn.browser.name==="firefox",yp=parseInt(kn.browser.webkitVersion,10)>=612||parseInt(kn.browser.version,10)>=15,hi="moveable-",bp=`
{
	position: absolute;
	width: 1px;
	height: 1px;
	left: 0;
	top: 0;
    z-index: 3000;
    --moveable-color: #4af;
    --zoom: 1;
    --zoompx: 1px;
    will-change: transform;
    outline: 1px solid transparent;
}
.control-box {
    z-index: 0;
}
.line, .control {
    position: absolute;
	left: 0;
    top: 0;
    will-change: transform;
}
.control {
	width: 14px;
	height: 14px;
	border-radius: 50%;
	border: 2px solid #fff;
	box-sizing: border-box;
    background: #4af;
    background: var(--moveable-color);
	margin-top: -7px;
    margin-left: -7px;
    border: 2px solid #fff;
    z-index: 10;
}
.padding {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    transform-origin: 0 0;
}
.line {
	width: 1px;
    height: 1px;
    background: #4af;
    background: var(--moveable-color);
	transform-origin: 0px 50%;
}
.line.edge {
    z-index: 1;
    background: transparent;
}
.line.dashed {
    box-sizing: border-box;
    background: transparent;
}
.line.dashed.horizontal {
    border-top: 1px dashed #4af;
    border-top-color: #4af;
    border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
    border-left: 1px dashed #4af;
    border-left-color: #4af;
    border-left-color: var(--moveable-color);
}
.line.vertical {
    transform: translateX(-50%);
}
.line.horizontal {
    transform: translateY(-50%);
}
.line.vertical.bold {
    width: 2px;
}
.line.horizontal.bold {
    height: 2px;
}

.control.origin {
	border-color: #f55;
	background: #fff;
	width: 12px;
	height: 12px;
	margin-top: -6px;
    margin-left: -6px;
	pointer-events: none;
}
`.concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
	`).concat(gp(t),`
}
`)}).join(`
`),`

.line.direction:before {
    content: "";
    position: absolute;
    width: 100%;
    height: calc(var(--moveable-line-padding, 0) * 1px);
    bottom: 0;
    left: 0;
}
.group {
    z-index: -1;
}
.area {
    position: absolute;
}
.area-pieces {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}
.area.avoid, .area.pass {
    pointer-events: none;
}
.area.avoid+.area-pieces {
    display: block;
}
.area-piece {
    position: absolute;
}

`).concat(xl?`:global svg *:before {
	content:"";
	transform-origin: inherit;
}`:"",`
`),Ep=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],gi=1e-4,Yt=1e-7,Pn=1e-9,mi=Math.pow(10,10),Cl=-mi,Sp=["n","w","s","e"],yi=["n","w","s","e","nw","ne","sw","se"],_p={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},bi={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},wl={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Dl=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag"];function Ur(t,e,n,r,a,i){var s,o;i===void 0&&(i="draggable");var l=(o=(s=e.gestos[i])===null||s===void 0?void 0:s.move(n,t.inputEvent))!==null&&o!==void 0?o:{},u=l.originalDatas||l.datas,c=u[i]||(u[i]={});return O(O({},a?Zl(e,l):l),{isPinch:!!r,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var gr=function(){function t(n){var r;n===void 0&&(n="draggable"),this.ableName=n,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(r={},r[n]={},r)}var e=t.prototype;return e.dragStart=function(n,r){this.isDrag=!1,this.isFlag=!1;var a=r.originalDatas;return this.datas=a,a[this.ableName]||(a[this.ableName]={}),O(O({},this.move(n,r.inputEvent)),{type:"dragstart"})},e.drag=function(n,r){return this.move([n[0]-this.prevX,n[1]-this.prevY],r)},e.move=function(n,r){var a,i,s=!1;if(!this.isFlag)this.prevX=n[0],this.prevY=n[1],this.startX=n[0],this.startY=n[1],a=n[0],i=n[1],this.isFlag=!0;else{var o=this.isDrag;a=this.prevX+n[0],i=this.prevY+n[1],(n[0]||n[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=a,this.prevY=i,{type:"drag",clientX:a,clientY:i,inputEvent:r,isFirstDrag:s,isDrag:this.isDrag,distX:a-this.startX,distY:i-this.startY,deltaX:n[0],deltaY:n[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Ml(t,e){var n=e.clientX,r=e.clientY,a=e.datas,i=t.state,s=i.moveableClientRect,o=i.rootMatrix,l=i.is3d,u=i.pos1,c=s.left,f=s.top,d=l?4:3,v=Z(tr(o,[n-c,r-f],d),u),p=v[0],h=v[1],g=ce({datas:a,distX:p,distY:h}),m=g[0],y=g[1];return[m,y]}function Je(t,e){var n=e.datas,r=t.state,a=r.allMatrix,i=r.beforeMatrix,s=r.is3d,o=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,f=r.targetMatrix,d=r.transformOrigin,v=s?4:3;n.is3d=s,n.matrix=a,n.targetMatrix=f,n.beforeMatrix=i,n.offsetMatrix=c,n.transformOrigin=d,n.inverseMatrix=re(a,v),n.inverseBeforeMatrix=re(i,v),n.absoluteOrigin=$e(ft([o,l],u),v),n.startDragBeforeDist=It(n.inverseBeforeMatrix,n.absoluteOrigin,v),n.startDragDist=It(n.inverseMatrix,n.absoluteOrigin,v)}function xp(t){return yr(t.datas.beforeTransform,[50,50],100,100).direction}function An(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,a=n.transformIndex,i=r.nextTransforms,s=i.length,o=r.nextTransformAppendedIndexes,l=0;a===-1?(e==="translate"?l=0:e==="rotate"&&(l=lr(i,function(d){return d.match(/scale\(/g)})),l===-1&&(l=i.length),n.transformIndex=l):Ve(o,function(d){return d.index===a&&d.functionName===e})?l=a:l=a+o.filter(function(d){return d.index<a}).length;var u=Up(i,l),c=u.targetFunction,f=e==="rotate"?"rotateZ":e;n.beforeFunctionTexts=u.beforeFunctionTexts,n.afterFunctionTexts=u.afterFunctionTexts,n.beforeTransform=u.beforeFunctionMatrix,n.beforeTransform2=u.beforeFunctionMatrix2,n.targetTansform=u.targetFunctionMatrix,n.afterTransform=u.afterFunctionMatrix,n.afterTransform2=u.afterFunctionMatrix2,n.targetAllTransform=u.allFunctionMatrix,c.functionName===f?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=Q(Q([],o,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function In(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Cp(t){var e=t.datas,n=t.distX,r=t.distY,a=Rl({datas:e,distX:n,distY:r}),i=a[0],s=a[1],o=Tl(e,Hd([i,s],4));return It(o,$e([0,0,0],4),4)}function Tl(t,e,n){var r=t.beforeTransform,a=t.afterTransform,i=t.beforeTransform2,s=t.afterTransform2,o=t.targetAllTransform,l=n?mt(o,e,4):mt(e,o,4),u=mt(re(n?i:r,4),l,4),c=mt(u,re(n?s:a,4),4);return c}function Rl(t){var e=t.datas,n=t.distX,r=t.distY,a=e.inverseBeforeMatrix,i=e.is3d,s=e.startDragBeforeDist,o=e.absoluteOrigin,l=i?4:3;return Z(It(a,ft(o,[n,r]),l),s)}function ce(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.inverseBeforeMatrix,s=n.inverseMatrix,o=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,f=o?4:3;return Z(It(e?i:s,ft(c,[r,a]),f),e?l:u)}function wp(t,e){var n=t.datas,r=t.distX,a=t.distY,i=n.beforeMatrix,s=n.matrix,o=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,f=o?4:3;return Z(It(e?i:s,ft(e?l:u,[r,a]),f),c)}function Dp(t,e,n,r,a,i){return r===void 0&&(r=e),a===void 0&&(a=n),i===void 0&&(i=[0,0]),t?t.map(function(s,o){var l=Sn(s),u=l.value,c=l.unit,f=o?a:r,d=o?n:e;if(s==="%"||isNaN(u)){var v=f?i[o]/f:0;return d*v}else if(c!=="%")return u;return d*u/100}):i}function Ol(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Mp(t,e){return Ol(e).map(function(n){return t[n]})}function wt(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,a=[We(t[0][0],t[1][0],n,1-n),We(t[0][1],t[1][1],n,1-n)],i=[We(t[2][0],t[3][0],n,1-n),We(t[2][1],t[3][1],n,1-n)];return[We(a[0],i[0],r,1-r),We(a[1],i[1],r,1-r)]}function Tp(t,e,n,r,a,i){var s=ke(e,n,r,a),o=wt(s,i),l=t[0]-o[0],u=t[1]-o[1];return[l,u]}function Zr(t,e,n,r){return mt(t,Fn(e,r,n),r)}function Rp(t,e,n){var r=t.transformOrigin,a=t.offsetMatrix,i=t.is3d,s=e.beforeTransform,o=e.afterTransform,l=i?4:3,u=Fr([n]);return Zr(a,ue(mt(mt(s,u,4),o,4),4,l),r,l)}function Op(t,e){var n=t.transformOrigin,r=t.offsetMatrix,a=t.is3d,i=t.targetMatrix,s=a?4:3;return Zr(r,mt(i,Ha(e,s),s),n,s)}function Nn(t){var e=mr(t);return{setTransform:function(n,r){r===void 0&&(r=-1),e.startTransforms=Pt(n)?n:je(n),Ei(t,r)},setTransformIndex:function(n){Ei(t,n)}}}function Bn(t,e){var n=mr(t),r=n.startTransforms;Ei(t,lr(r,function(a){return a.indexOf("".concat(e,"("))===0}))}function Ei(t,e){var n=mr(t),r=t.datas;if(r.transformIndex=e,e!==-1){var a=n.startTransforms[e];if(a){var i=Xe([a]);r.startValue=i[0].functionValue}}}function Si(t,e){var n=mr(t);n.nextTransforms=je(e)}function mr(t){return t.originalDatas.beforeRenderable}function kl(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Ln(t){return kl(t).join(" ")}function Gn(t){return mr(t).nextStyle}function Pl(t,e,n,r,a){Si(a,e);var i=Vt.drag(t,Ur(a,t.state,n,r,!1)),s=i?i.transform:e;return O(O({transform:e,drag:i},jt({transform:s},a)),{afterTransform:s})}function Al(t,e,n,r,a){var i=t.state,s=i.left,o=i.top,l=t.props.groupable,u=Rp(t.state,a,e),c=l?s:0,f=l?o:0,d=Nl(t,n,u),v=Z(r,d);return Z(v,[c,f])}function kp(t,e,n,r,a){var i=Al(t,"scale(".concat(e.join(", "),")"),n,r,a);return i}function Il(t,e,n){return[-1+t[0]/(e/2),-1+t[1]/(n/2)]}function Nl(t,e,n){n===void 0&&(n=t.state.allMatrix);var r=t.state,a=r.width,i=r.height,s=r.is3d,o=s?4:3,l=[a/2*(1+e[0]),i/2*(1+e[1])];return kt(n,l,o)}function Pp(t,e,n){var r=n.fixedDirection,a=n.fixedPosition;return Al(t,"rotate(".concat(e,"deg)"),r,a,n)}function Ap(t,e,n,r,a,i){var s=t.props.groupable,o=t.state,l=o.transformOrigin,u=o.offsetMatrix,c=o.is3d,f=o.width,d=o.height,v=o.left,p=o.top,h=i.fixedDirection,g=i.nextTargetMatrix||o.targetMatrix,m=c?4:3,y=Dp(a,e,n,f,d,l),E=s?v:0,b=s?p:0,x=Zr(u,g,y,m),_=Tp(r,x,e,n,m,h);return Z(_,[E,b])}function Bl(t,e){return wt(Xt(t.state),e)}function Ip(t,e){var n=t.targetGesto,r=t.controlGesto,a;return n?.isFlag()&&(a=n.getEventData()[e]),!a&&r?.isFlag()&&(a=r.getEventData()[e]),a||{}}function Np(t,e){return[t[0]*e[0],t[1]*e[1]]}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mf.apply(void 0,Q([hi],t,!1))}function Ll(t){t()}function Bp(t){return!t||t==="none"?[1,0,0,1,0,0]:Ye(t)?t:Fr(t)}function Fn(t,e,n){return Fa(e,Gr(n,e),t,Gr(n.map(function(r){return-r}),e))}function Lp(t,e,n){if(e==="%"){var r=xi(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function Gp(t){var e=zn(ge(t,":before"));return e.map(function(n,r){var a=Sn(n),i=a.value,s=a.unit;return i*Lp(t,s,r===0)})}function zn(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Gl(t,e){e===void 0&&(e=ge(t));var n=e.transform;if(n&&n!=="none")return e.transform;if("transform"in t){var r=t.transform,a=r.baseVal;if(!a)return"";var i=a.length;if(!i)return"";for(var s=[],o=function(u){var c=a[u].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map(function(f){return c[f]}).join(", "),")"))},l=0;l<i;++l)o(l);return s.join(" ")}return""}function qr(t,e,n,r,a){var i,s,o,l=t&&t.ownerDocument?t.ownerDocument:document,u=l.documentElement||l.body,c=!1,f,d;if(!t||n)f=t;else{var v=(i=t?.assignedSlot)===null||i===void 0?void 0:i.parentElement,p=t.parentElement;v?(c=!0,d=p,f=v):f=p}for(var h=!1,g=t===e||f===e,m="relative",y=1,E=parseFloat((s=a)===null||s===void 0?void 0:s.zoom)||1,b=a?.position;f&&f!==u;){e===f&&(g=!0);var x=ge(f),_=f.tagName.toLowerCase(),S=Gl(f,x),D=x.willChange,C=parseFloat(x.zoom)||1;if(m=x.position,r&&C!==1){y=C;break}if(!n&&r&&E!==1&&b&&b!=="absolute"||_==="svg"||m!=="static"||S&&S!=="none"||D==="transform")break;var M=(o=t?.assignedSlot)===null||o===void 0?void 0:o.parentNode,R=f.parentNode;M&&(c=!0,d=R);var T=M||R;if(T&&T.nodeType===11){f=T.host,h=!0;break}f=T,m="relative"}return{offsetZoom:y,hasSlot:c,parentSlotElement:d,isCustomElement:h,isStatic:m==="static",isEnd:g||!f||f===u,offsetParent:f||u}}function Fp(t,e,n){var r,a=t.tagName.toLowerCase(),i=t.offsetLeft,s=t.offsetTop,o=Aa(i),l=!o,u,c;return!l&&a!=="svg"?(u=xl?Gp(t):zn(n).map(function(f){return parseFloat(f)}),c=u.slice(),l=!0,r=Hp(t,u,t===e&&e.tagName.toLowerCase()==="g"),i=r[0],s=r[1],u[0]=r[2],u[1]=r[3]):(u=zn(n).map(function(f){return parseFloat(f)}),c=u.slice()),{tagName:a,isSVG:o,hasOffset:l,offset:[i||0,s||0],origin:u,targetOrigin:c}}function Fl(t,e,n){n===void 0&&(n=ge(t));var r=ge(document.body),a=r.position;if(!e&&(!a||a==="static"))return[0,0];var i=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return n.position==="absolute"&&((n.top!=="auto"||n.bottom!=="auto")&&(s=0),(n.left!=="auto"||n.right!=="auto")&&(i=0)),[i,s]}function _i(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=ue(n,3,4))})}function zp(t){for(var e=t.parentElement,n=!1;e;){var r=ge(e).transform;if(r&&r!=="none"){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function Kn(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Bs(t,!e).join(","),")")}function xi(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,a=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:a.x,y:a.y,width:a.width||e,height:a.height||n,clientWidth:e,clientHeight:n}}function Kp(t,e){var n=xi(t),r=n.width,a=n.height,i=n.clientWidth,s=n.clientHeight,o=i/r,l=s/a,u=t.preserveAspectRatio.baseVal,c=u.align,f=u.meetOrSlice,d=[0,0],v=[o,l],p=[0,0];if(c!==1){var h=(c-2)%3,g=Math.floor((c-2)/3);d[0]=r*h/2,d[1]=a*g/2;var m=f===2?Math.max(l,o):Math.min(o,l);v[0]=m,v[1]=m,p[0]=(i-r)/2*h,p[1]=(s-a)/2*g}var y=Ha(v,e);return y[e*(e-1)]=p[0],y[e*(e-1)+1]=p[1],Fn(y,e,d)}function Hp(t,e,n){if(!t.getBBox||!n&&t.tagName.toLowerCase()==="g")return[0,0,0,0];var r=t.getBBox(),a=xi(t.ownerSVGElement),i=r.x-a.x,s=r.y-a.y;return[i,s,e[0]-i,e[1]-s]}function kt(t,e,n){return It(t,$e(e,n),n)}function ke(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(a){return kt(t,a,r)})}function te(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,e),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e),s=Math.max.apply(Math,n),o=i-r,l=s-a;return{left:r,top:a,right:i,bottom:s,width:o,height:l}}function zl(t,e,n,r){var a=ke(t,e,n,r);return te(a)}function Wp(t,e,n,r,a){var i,s=t.target,o=t.origin,l=e.matrix,u=Hl(s),c=u.offsetWidth,f=u.offsetHeight,d=n.getBoundingClientRect(),v=[0,0];n===document.body&&(v=Fl(s,!0));for(var p=s.getBoundingClientRect(),h=p.left-d.left+n.scrollLeft-(n.clientLeft||0)+v[0],g=p.top-d.top+n.scrollTop-(n.clientTop||0)+v[1],m=p.width,y=p.height,E=Fa(r,a,l),b=zl(E,c,f,r),x=b.left,_=b.top,S=b.width,D=b.height,C=kt(E,o,r),M=Z(C,[x,_]),R=[h+M[0]*m/S,g+M[1]*y/D],T=[0,0],P=0;++P<10;){var k=re(a,r);i=Z(kt(k,R,r),kt(k,C,r)),T[0]=i[0],T[1]=i[1];var A=Fa(r,a,Gr(T,r),l),N=zl(A,c,f,r),G=N.left,B=N.top,F=G-h,I=B-g;if(Math.abs(F)<2&&Math.abs(I)<2)break;R[0]-=F,R[1]-=I}return T.map(function(L){return Math.round(L)})}function Yp(t,e,n){var r=t.length===16,a=r?4:3,i=e.map(function(l){return kt(t,l,a)}),s=n.left,o=n.top;return i.map(function(l){return[l[0]+s,l[1]+o]})}function yr(t,e,n,r){var a=t.length===16,i=a?4:3,s=ke(t,n,r,i),o=s[0],l=o[0],u=o[1],c=s[1],f=c[0],d=c[1],v=s[2],p=v[0],h=v[1],g=s[3],m=g[0],y=g[1],E=kt(t,e,i),b=E[0],x=E[1],_=Math.min(l,f,p,m),S=Math.min(u,d,h,y),D=Math.max(l,f,p,m),C=Math.max(u,d,h,y);l=l-_||0,f=f-_||0,p=p-_||0,m=m-_||0,u=u-S||0,d=d-S||0,h=h-S||0,y=y-S||0,b=b-_||0,x=x-S||0;var M=Ad(ke(t,100,100,i));return{left:_,top:S,right:D,bottom:C,origin:[b,x],pos1:[l,u],pos2:[f,d],pos3:[p,h],pos4:[m,y],direction:M}}function ne(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Kl(t,e){return ne([e[0]-t[0],e[1]-t[1]])}function Jr(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Ct(t,e));var a=Kl(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(a,"px")}}function Ci(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n.length,i=n.reduce(function(o,l){return o+l[0]},0)/a,s=n.reduce(function(o,l){return o+l[1]},0)/a;return{transform:"translateZ(0px) translate(".concat(i,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Qe(t,e){var n=t[e];return Ye(n)?O(O({},t),n):t}function Hl(t,e){e===void 0&&(e=t?ge(t):null);var n=t&&!Aa(t.offsetWidth),r=0,a=0,i=0,s=0,o=0,l=0,u=0,c=0,f=0,d=0,v=0,p=0,h=1/0,g=1/0,m=1/0,y=1/0,E=0,b=0,x=!1;if(t)if(!n&&t.tagName.toLowerCase()!=="svg"){var _=t.getBBox();x=!0,r=_.width,a=_.height,o=r,l=a,u=r,c=a,i=r,s=a}else{var S=t.style,D=e.boxSizing==="border-box",C=parseFloat(e.borderLeftWidth)||0,M=parseFloat(e.borderRightWidth)||0,R=parseFloat(e.borderTopWidth)||0,T=parseFloat(e.borderBottomWidth)||0,P=parseFloat(e.paddingLeft)||0,k=parseFloat(e.paddingRight)||0,A=parseFloat(e.paddingTop)||0,N=parseFloat(e.paddingBottom)||0,G=P+k,B=A+N,F=C+M,I=R+T,L=G+F,K=B+I,W=e.position,Y=0,H=0;if("clientLeft"in t){var j=null;if(W==="absolute"){var U=qr(t,document.body);j=U.offsetParent}else j=t.parentElement;if(j){var J=ge(j);Y=parseFloat(J.width),H=parseFloat(J.height)}}f=Math.max(G,_t(e.minWidth,Y)||0),d=Math.max(B,_t(e.minHeight,H)||0),h=_t(e.maxWidth,Y),g=_t(e.maxHeight,H),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),E=_t(S.width,0)||0,b=_t(S.height,0)||0,o=parseFloat(e.width)||0,l=parseFloat(e.height)||0,u=Math.abs(o-E)<1?La(f,E||o,h):o,c=Math.abs(l-b)<1?La(d,b||l,g):l,r=u,a=c,i=u,s=c,D?(m=h,y=g,v=f,p=d,u=r-L,c=a-K):(m=h+L,y=g+K,v=f+L,p=d+K,r=u+L,a=c+K),i=u+G,s=c+B}return{svg:x,offsetWidth:r,offsetHeight:a,clientWidth:i,clientHeight:s,contentWidth:u,contentHeight:c,inlineCSSWidth:E,inlineCSSHeight:b,cssWidth:o,cssHeight:l,minWidth:f,minHeight:d,maxWidth:h,maxHeight:g,minOffsetWidth:v,minOffsetHeight:p,maxOffsetWidth:m,maxOffsetHeight:y}}function Wl(t,e){return Ct(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Hn(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Yl(t,e){var n=t===document.body||t===document.documentElement,r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=ge(t).overflow!=="visible",O(O({},e),r)}function wi(t,e,n,r){var a=t.left,i=t.right,s=t.top,o=t.bottom,l=e.top,u=e.left,c={left:u+a,top:l+s,right:u+i,bottom:l+o,width:i-a,height:o-s};return n&&r?Yl(n,c):c}function Qr(t,e){var n=0,r=0,a=0,i=0;if(t){var s=t.getBoundingClientRect();n=s.left,r=s.top,a=s.width,i=s.height}var o={left:n,top:r,width:a,height:i,right:n+a,bottom:r+i};return t&&e?Yl(t,o):o}function jl(t,e,n,r){var a;if(t)a=t;else if(e)a=[0,0];else{var i=n.target;a=Vl(i,r)}return a}function Vl(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var a=[0,0];return r.indexOf("w")>-1&&(a[0]=-1),r.indexOf("e")>-1&&(a[0]=1),r.indexOf("n")>-1&&(a[1]=-1),r.indexOf("s")>-1&&(a[1]=1),a}}}function Di(t,e){return[ft(e,t[0]),ft(e,t[1]),ft(e,t[2]),ft(e,t[3])]}function Xt(t){var e=t.left,n=t.top,r=t.pos1,a=t.pos2,i=t.pos3,s=t.pos4;return Di([r,a,i,s],[e,n])}function jp(t){return Math.round(t%1===-.5?t-1:t)}function br(t,e){var n;(n=t[e])===null||n===void 0||n.unset(),t[e]=null}function jt(t,e){if(e){var n=mr(e);n.nextStyle=O(O({},n.nextStyle),t)}return{style:t,cssText:Re(t).map(function(r){return"".concat(Td(r,"-"),": ").concat(t[r],";")}).join("")}}function $l(t,e,n){var r=e.afterTransform||e.transform;return O(O({},jt(O(O(O({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function at(t,e,n,r){var a=e.datas;a.datas||(a.datas={});var i=O(O({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:a.datas,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){a.isEventStart=!1},stopDrag:function(){var s;(s=e.stop)===null||s===void 0||s.call(e)}});return a.isStartEvent?r||(a.lastEvent=i):a.isStartEvent=!0,i}function Jt(t,e,n){var r=e.datas,a="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),O(O({isDrag:a},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Wn(t,e,n){t._emitter.on(e,n)}function V(t,e,n,r){return t.triggerEvent(e,n,r)}function ge(t,e){return window.getComputedStyle(t,e)}function Yn(t,e,n){var r={},a={};return t.filter(function(i){var s=i.name;if(r[s]||!e.some(function(o){return i[o]}))return!1;if(!n&&i.ableGroup){if(a[i.ableGroup])return!1;a[i.ableGroup]=!0}return r[s]=!0,!0})}function Mi(t,e){return t===e||t==null&&e==null}function Vp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var a=t[r];if(!Aa(a))return a}return t[n]}function Xl(t,e){var n=[],r=[];return t.forEach(function(a,i){var s=e(a,i,t),o=r.indexOf(s),l=n[o]||[];o===-1&&(r.push(s),n.push(l)),l.push(a)}),n}function $p(t,e){var n=[],r={};return t.forEach(function(a,i){var s=e(a,i,t),o=r[s];o||(o=[],r[s]=o,n.push(o)),o.push(a)}),n}function Ul(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Er(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return Math.abs(r)-Math.abs(n)}),t[0]}function tr(t,e,n){return It(re(t,n),$e(e,n),n)}function Zl(t,e){var n,r=t.is3d,a=t.rootMatrix,i=r?4:3;return n=tr(a,[e.distX,e.distY],i),e.distX=n[0],e.distY=n[1],e}function jn(t,e,n,r,a){return Z(kt(t,ft(n,e),a),r)}function ae(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Vn(t){return Math.abs(t)<=Yt?0:t}function Ti(t){return function(e){if(!e.isDragging(t))return"";var n=Ip(e,t),r=n.deg;return r?q("view-control-rotation".concat(r)):""}}function Ri(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(i){return r.requestAble===i})?r.parentDirection:!1;var a=r.inputEvent.target;return Ot(a,q("direction"))&&(!t||Ot(a,q(t)))}}function Xp(t){var e={};for(var n in t)e[t[n]]=n;return e}function Up(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),a=t[e]||"",i=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),o=Xe(n),l=Xe(r),u=Xe([a]),c=Xe(i),f=Xe(s),d=cr(o),v=cr(l),p=cr(c),h=cr(f),g=mt(d,p,4);return{transforms:t,beforeFunctionMatrix:d,beforeFunctionMatrix2:v,targetFunctionMatrix:cr(u),afterFunctionMatrix:p,afterFunctionMatrix2:h,allFunctionMatrix:g,beforeFunctions:o,beforeFunctions2:l,targetFunction:u[0],afterFunctions:c,afterFunctions2:f,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:a,afterFunctionTexts:i,afterFunctionTexts2:s}}function Zp(t){return!t||!Ye(t)||t instanceof Element?!1:Pt(t)||"length"in t}function er(t,e){return t?t instanceof Element?t:Te(t)?e?document.querySelector(t):t:Cs(t)?t():"current"in t?t.current:t:null}function Oi(t,e){if(!t)return[];var n=Zp(t)?[].slice.call(t):[t];return n.reduce(function(r,a){return Te(a)&&e?Q(Q([],r,!0),[].slice.call(document.querySelectorAll(a)),!0):(Pt(a)?r.push(Oi(a,e)):r.push(er(a,e)),r)},[])}function qp(t,e,n){var r=Ct(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function ql(t,e){var n=t.rootMatrix,r=t.is3d,a=r?4:3,i=re(n,a);return r||(i=ue(i,3,4)),i[12]=0,i[13]=0,i[14]=0,xn(i,e)}function Jl(t,e,n,r,a){var i=t[0],s=t[1],o=0,l=0;if(a&&i&&s){var u=Ct([0,0],e),c=Ct([0,0],r),f=ne(e),d=Math.cos(u-c)*f;if(!r[0])l=d,o=l*n;else if(!r[1])o=d,l=o/n;else{var v=r[0]*2*i,p=r[1]*2*s,h=ne([v+e[0],p+e[1]])-ne([v,p]),g=Ct([0,0],[n,1]);o=Math.cos(g)*h,l=Math.sin(g)*h}}else o=r[0]*e[0],l=r[1]*e[1];return[o,l]}function Ql(t,e,n,r){var a,i=n.ratio,s=n.startOffsetWidth,o=n.startOffsetHeight,l=0,u=0,c=r.distX,f=r.distY,d=r.parentDistance,v=r.parentDist,p=r.parentScale,h=n.fixedDirection,g=[0,1].map(function(_){return Math.abs(t[_]-h[_])}),m=[0,1].map(function(_){var S=g[_];return S!==0&&(S=2/S),S});if(v)l=v[0],u=v[1],e&&(l?u||(u=l/i):l=u*i);else if(p)l=(p[0]-1)*s,u=(p[1]-1)*o;else if(d){var y=s*g[0],E=o*g[1],b=ne([y,E]);l=d/b*y*m[0],u=d/b*E*m[1]}else{var x=ce({datas:n,distX:c,distY:f});x=m.map(function(_,S){return x[S]*_}),a=Jl([s,o],x,i,t,e),l=a[0],u=a[1]}return{distWidth:l,distHeight:u}}function ki(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=t.split(" "),r=n[0],a=n[1],i=ki(r||""),s=ki(a||""),o=O(O({},i),s),l={x:"50%",y:"50%"};return o.x&&(l.x=o.x),o.y&&(l.y=o.y),o.value&&(o.x&&!o.y&&(l.y=o.value),!o.x&&o.y&&(l.x=o.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function Jp(t,e,n){var r=ki(t,!0),a=r.x,i=r.y;return[_t(a,e)||0,_t(i,n)||0]}function Qp(t,e,n){var r=t.map(function(i){return Z(i,e)}),a=r.map(function(i){return Lr(i,n)});return{prev:r,next:a,result:a.map(function(i){return ft(i,e)})}}function tu(t,e){return t.length===e.length&&t.every(function(n,r){var a=e[r],i=Pt(n),s=Pt(a);return i&&s?tu(n,a):!i&&!s?n===a:!1})}var th=Xr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,a=e.angle,i=e.originalDatas,s=t.props,o=s.pinchable,l=s.ables;if(!o)return!1;var u="onPinch".concat(r?"Group":"","Start"),c="drag".concat(r?"Group":"","ControlStart"),f=(o===!0?t.controlAbles:l.filter(function(h){return o.indexOf(h.name)>-1})).filter(function(h){return h.canPinch&&h[c]}),d=at(t,e,{});r&&(d.targets=r);var v=V(t,u,d);n.isPinch=v!==!1,n.ables=f;var p=n.isPinch;return p?(f.forEach(function(h){if(i[h.name]=i[h.name]||{},!!h[c]){var g=O(O({},e),{datas:i[h.name],parentRotate:a,isPinch:!0});h[c](t,g)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p):!1},pinch:function(t,e){var n=e.datas,r=e.scale,a=e.distance,i=e.originalDatas,s=e.inputEvent,o=e.targets,l=e.angle;if(n.isPinch){var u=a*(1-1/r),c=at(t,e,{});o&&(c.targets=o);var f="onPinch".concat(o?"Group":"");V(t,f,c);var d=n.ables,v="drag".concat(o?"Group":"","Control");return d.forEach(function(p){p[v]&&p[v](t,O(O({},e),{datas:i[p.name],inputEvent:s,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.targets,s=e.originalDatas;if(n.isPinch){var o="onPinch".concat(i?"Group":"","End"),l=Jt(t,e,{isDrag:r});i&&(l.targets=i),V(t,o,l);var u=n.ables,c="drag".concat(i?"Group":"","ControlEnd");return u.forEach(function(f){f[c]&&f[c](t,O(O({},e),{isDrag:r,datas:s[f.name],inputEvent:a,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,O(O({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,O(O({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,O(O({},e),{targets:t.props.targets}))}});function ie(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var a=r.groupable;a.childDatas=a.childDatas||[];var i=a.childDatas;return t.moveables.map(function(s,o){return i[o]=i[o]||{},i[o][e]=i[o][e]||{},O(O({},n),{datas:i[o][e],originalDatas:i[o]})})}function Pi(t,e,n,r,a,i,s){var o=!!n.match(/Start$/g),l=!!n.match(/End$/g),u=a.isPinch,c=a.datas,f=ie(t,e.name,a),d=t.moveables,v=f.map(function(p,h){var g=d[h],m=g.state,y=m.gestos,E=p;if(o)E=new gr(s).dragStart(r,p);else{if(y[s]||(y[s]=c.childGestos[h]),!y[s])return;E=Ur(p,m,r,u,i,s)}var b=e[n](g,O(O({},E),{parentFlag:!0}));return l&&(y[s]=null),b});return o&&(c.childGestos=d.map(function(p){return p.state.gestos[s]})),v}function me(t,e,n,r,a,i){a===void 0&&(a=function(c,f){return f});var s=!!n.match(/End$/g),o=ie(t,e.name,r),l=t.moveables,u=o.map(function(c,f){var d=l[f],v=c;v=a(d,c);var p=e[n](d,O(O({},v),{parentFlag:!0}));return p&&i&&i(d,c,p,f),s&&(d.state.gestos={}),p});return u}var eh=["left","right","center"],rh=["top","bottom","middle"],Pe={start:"left",end:"right",center:"center"},Ae={start:"top",end:"bottom",center:"middle"};function Sr(t,e){var n=t.props,r=n.snappable,a=n.bounds,i=n.innerBounds,s=n.verticalGuidelines,o=n.horizontalGuidelines,l=n.snapGridWidth,u=n.snapGridHeight,c=t.state,f=c.guidelines,d=c.enableSnap;return!r||!d||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||u||a||i||f&&f.length||s&&s.length||o&&o.length)}function Ai(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function nh(t,e){var n=Ai(t),r={};for(var a in n)a in e&&n[a]&&(r[a]=e[a]);return r}function Ii(t,e){var n=nh(t,e),r=rh.filter(function(i){return i in n}),a=eh.filter(function(i){return i in n});return{horizontal:r.map(function(i){return n[i]}),vertical:a.map(function(i){return n[i]})}}function ah(t,e,n){var r=kt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function ih(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];Math.abs(r)<Kt&&(r=0),Math.abs(a)<Kt&&(a=0);var i=0,s=0,o=0;return r?a?(i=-a/r,s=1,o=i*e[0]-e[1]):(s=1,o=-e[1]):(i=-1,o=e[0]),[i,s,o].map(function(l){return lt(l,Kt)})}function $n(t,e,n,r){var a=t.props,i=Vp(r,a.snapThreshold,5);return eu(t.state.guidelines,e,n,i)}function eu(t,e,n,r){return{vertical:nu(t,"vertical",e,r),horizontal:nu(t,"horizontal",n,r)}}function oh(t,e,n){var r=n[0],a=n[1],i=e[0],s=e[1],o=Z(n,e),l=o[0],u=o[1],c=u>0,f=l>0;l=Vn(l),u=Vn(u);var d={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(l===0&&u===0)return{vertical:d,horizontal:v};var p=$n(t,l?[r]:[],u?[a]:[]),h=p.vertical,g=p.horizontal;h.posInfos.filter(function(k){var A=k.pos;return f?A>=i:A<=i}),g.posInfos.filter(function(k){var A=k.pos;return c?A>=s:A<=s}),h.isSnap=h.posInfos.length>0,g.isSnap=g.posInfos.length>0;var m=Ni(h),y=m.isSnap,E=m.guideline,b=Ni(g),x=b.isSnap,_=b.guideline,S=x?_.pos[1]:0,D=y?E.pos[0]:0;if(l===0)x&&(v.isSnap=!0,v.pos=_.pos[1],v.offset=a-v.pos);else if(u===0)y&&(d.isSnap=!0,d.pos=D,d.offset=r-D);else{var C=u/l,M=n[1]-C*r,R=0,T=0,P=!1;y?(T=D,R=C*T+M,P=!0):x&&(R=S,T=(R-M)/C,P=!0),P&&(d.isSnap=!0,d.pos=T,d.offset=r-T,v.isSnap=!0,v.pos=R,v.offset=a-R)}return{vertical:d,horizontal:v}}function ru(t,e,n){var r=Ii(t.props.snapDirections,e);return $n(t,r.vertical,r.horizontal,n)}function Ni(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],a=r.offset,i=r.dist,s=r.guideline;return{isSnap:e,offset:a,dist:i,pos:n.pos,guideline:s}}function nu(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var a=e==="vertical",i=a?0:1,s=n.map(function(l,u){var c=t.map(function(f){var d=f.pos,v=l-d[i];return{offset:v,dist:Math.abs(v),guideline:f}}).filter(function(f){var d=f.guideline,v=f.dist,p=d.type;return!(p!==e||v>r)}).sort(function(f,d){return f.dist-d.dist});return{pos:l,index:u,guidelineInfos:c}}).filter(function(l){return l.guidelineInfos.length>0}).sort(function(l,u){return l.guidelineInfos[0].dist-u.guidelineInfos[0].dist}),o=s.length>0;return{isSnap:o,index:o?s[0].index:-1,posInfos:s}}function sh(t,e,n,r){r===void 0&&(r=1);var a=[];if(n[0]&&n[1])a=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(o){return wt(e,o)});else if(!n[0]&&!n[1])for(var i=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)a.push(i[s]),a.push([(i[s][0]+i[s+1][0])/2,(i[s][1]+i[s+1][1])/2]);else t.props.keepRatio?a=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(o){return wt(e,o)}):(a=Mp(e,n),a.length>1&&a.push([(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]));return $n(t,a.map(function(o){return o[0]}),a.map(function(o){return o[1]}),r)}function au(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Yt?1:r<Yt?-1:n-r}function Xn(t,e){return t.slice().sort(function(n,r){var a=n.sign[e],i=r.sign[e],s=n.offset[e],o=r.offset[e];if(a){if(!i)return-1}else return 1;return au({isBound:n.isBound,isSnap:n.isSnap,offset:s},{isBound:r.isBound,isSnap:r.isSnap,offset:o})})[0]}function lh(t,e,n){var r=[];if(n)Math.abs(e[0])!==1||Math.abs(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var a=t[0]?t:[1,1];[1,-1].forEach(function(s){[1,-1].forEach(function(o){var l=[s*a[0],o*a[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var i=Math.abs(e[0])===1?[1]:[1,-1];i.forEach(function(s){r.push([[e[0],-1],[s*t[0],-1]],[[e[0],0],[s*t[0],0]],[[e[0],1],[s*t[0],1]])})}else if(t[1]){var i=Math.abs(e[1])===1?[1]:[1,-1];i.forEach(function(o){r.push([[-1,e[1]],[-1,o*t[1]]],[[0,e[1]],[0,o*t[1]]],[[1,e[1]],[1,o*t[1]]])})}return r}function iu(t,e){var n=Ga([e[0][0],e[1][0]]),r=Ga([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Bi(t,e){var n=e[0],r=e[1],a=r[0]-n[0],i=r[1]-n[1];Math.abs(a)<Yt&&(a=0),Math.abs(i)<Yt&&(i=0);var s,o;if(!a)s=n[0],o=t[0];else if(!i)s=n[1],o=t[1];else{var l=i/a;s=l*(t[0]-n[0])+n[1],o=t[1]}return s-o}function ou(t,e,n,r){return r===void 0&&(r=Yt),t.every(function(a){var i=Bi(a,e),s=i<=0;return s===n||Math.abs(i)<=r})}function su(t,e,n,r,a){return a===void 0&&(a=0),r&&e-a<=t||!r&&t<=n+a?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function uh(t,e){var n=e.line,r=e.centerSign,a=e.verticalSign,i=e.horizontalSign,s=e.lineConstants,o=t.props.innerBounds;if(!o)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=o.left,u=o.top,c=o.width,f=o.height,d=[[l,u],[l,u+f]],v=[[l,u],[l+c,u]],p=[[l+c,u],[l+c,u+f]],h=[[l,u+f],[l+c,u+f]];if(ou([[l,u],[l+c,u],[l,u+f],[l+c,u+f]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=Ie(n,s,v,a),m=Ie(n,s,h,a),y=Ie(n,s,d,i),E=Ie(n,s,p,i),b=g.isBound&&m.isBound,x=g.isBound||m.isBound,_=y.isBound&&E.isBound,S=y.isBound||E.isBound,D=Er(g.offset,m.offset),C=Er(y.offset,E.offset),M=[0,0],R=!1,T=!1;return Math.abs(C)<Math.abs(D)?(M=[D,0],R=x,T=b):(M=[0,C],R=S,T=_),{isAllBound:T,isVerticalBound:x,isHorizontalBound:S,isBound:R,offset:M}}function Ie(t,e,n,r,a,i){var s=e[0],o=e[1],l=t[0],u=n[0],c=n[1],f=Vn(c[1]-u[1]),d=Vn(c[0]-u[0]),v=o,p=s,h=-s/o;if(d){if(!f){if(i&&!v)return{isBound:!1,offset:0};if(p){var E=(u[1]-l[1])/h+l[0];return su(E,u[0],c[0],r,a)}else{var m=u[1]-l[1],y=Math.abs(m)<=(a||0);return{isBound:y,offset:y?m:0}}}}else{if(i&&!p)return{isBound:!1,offset:0};if(v){var g=h*(u[0]-l[0])+l[1];return su(g,u[1],c[1],r,a)}else{var m=u[0]-l[0],y=Math.abs(m)<=(a||0);return{isBound:y,offset:y?m:0}}}return{isBound:!1,offset:0}}function lu(t,e,n){return e.map(function(r){var a=uh(t,r),i=a.isBound,s=a.offset,o=a.isVerticalBound,l=a.isHorizontalBound,u=r.multiple,c=ce({datas:n,distX:s[0],distY:s[1]}).map(function(f,d){return f*(u[d]?2/u[d]:0)});return{sign:u,isBound:i,isVerticalBound:o,isHorizontalBound:l,isSnap:!1,offset:c}})}function ch(t,e,n){var r,a=Li(t,e,[0,0],!1).map(function(d){return O(O({},d),{multiple:d.multiple.map(function(v){return Math.abs(v)*2})})}),i=lu(t,a,n),s=Xn(i,0),o=Xn(i,1),l=0,u=0,c=s.isVerticalBound||o.isVerticalBound,f=s.isHorizontalBound||o.isHorizontalBound;return(c||f)&&(r=wp({datas:n,distX:-s.offset[0],distY:-o.offset[1]}),l=r[0],u=r[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:f,offset:u}}}function fh(t,e){var n=[],r=t[0],a=t[1];return r&&a?n.push([[0,a*2],t,[-r,a]],[[r*2,0],t,[r,-a]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):a?(n.push([[0,a*2],[1,a],[-1,a]]),e&&n.push([[-1,0],[-1,a],[-1,-a]],[[1,0],[1,a],[1,-a]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function Li(t,e,n,r){var a=t.state,i=a.allMatrix,s=a.is3d,o=ke(i,100,100,s?4:3),l=wt(o,[0,0]);return fh(n,r).map(function(u){var c=u[0],f=u[1],d=u[2],v=[wt(o,f),wt(o,d)],p=ih(v),h=iu(l,v),g=h.vertical,m=h.horizontal,y=Bi(l,v)<=0;return{multiple:c,centerSign:y,verticalSign:g,horizontalSign:m,lineConstants:p,line:[wt(e,f),wt(e,d)]}})}function uu(t,e,n,r){var a=r?t.map(function(i){return Lr(i,r)}):t;return[[a[0],a[1]],[a[1],a[3]],[a[3],a[2]],[a[2],a[0]]].some(function(i){var s=Bi(n,i)<=0;return!ou(e,i,s)})}function dh(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!a)return Math.abs(e[1]);var i=a/r;return Math.abs((-i*e[0]+e[1])/Math.sqrt(Math.pow(i,2)+1))}function vh(t){var e=t[0],n=t[1],r=n[0]-e[0],a=n[1]-e[1];if(!r)return[e[0],0];if(!a)return[0,e[1]];var i=a/r,s=-i*e[0]+e[1];return[-s/(i+1/i),s/(i*i+1)]}function ph(t,e,n,r,a){var i=t.props.innerBounds,s=a*Math.PI/180;if(!i)return[];var o=i.left,l=i.top,u=i.width,c=i.height,f=o-r[0],d=o+u-r[0],v=l-r[1],p=l+c-r[1],h=[[f,v],[d,v],[f,p],[d,p]],g=wt(n,[0,0]);if(!uu(n,h,g,0))return[];var m=[],y=h.map(function(E){return[ne(E),Ct([0,0],E)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(E){var b=Ct([0,0],vh(E)),x=dh(E);m.push.apply(m,y.filter(function(_){var S=_[0];return S&&x<=S}).map(function(_){var S=_[0],D=_[1],C=Math.acos(S?x/S:0),M=D+C,R=D-C;return[s+M-b,s+R-b]}).reduce(function(_,S){return _.push.apply(_,S),_},[]).filter(function(_){return!uu(e,h,g,_)}).map(function(_){return lt(_*180/Math.PI,Yt)}))}),m}function hh(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=n.pos1,a=n.pos2,i=n.pos3,s=n.pos4,o=[r,a,i,s],l=wt(o,[0,0]),u=e.left,c=e.top,f=e.width,d=e.height,v=[[u,c],[u,c+d]],p=[[u,c],[u+f,c]],h=[[u+f,c],[u+f,c+d]],g=[[u,c+d],[u+f,c+d]],m=Li(t,o,[0,0],!1),y=[],E=[],b={top:!1,bottom:!1,left:!1,right:!1};return m.forEach(function(x){var _=x.line,S=x.lineConstants,D=iu(l,_),C=D.horizontal,M=D.vertical,R=Ie(_,S,p,M,1,!0),T=Ie(_,S,g,M,1,!0),P=Ie(_,S,v,C,1,!0),k=Ie(_,S,h,C,1,!0);R.isBound&&!b.top&&(y.push(c),b.top=!0),T.isBound&&!b.bottom&&(y.push(c+d),b.bottom=!0),P.isBound&&!b.left&&(E.push(u),b.left=!0),k.isBound&&!b.right&&(E.push(u+f),b.right=!0)}),{horizontal:y,vertical:E}}function Gi(t,e,n){var r=t||{},a=r.position,i=a===void 0?"client":a,s=r.left,o=s===void 0?-1/0:s,l=r.top,u=l===void 0?-1/0:l,c=r.right,f=c===void 0?1/0:c,d=r.bottom,v=d===void 0?1/0:d,p={position:i,left:o,top:u,right:f,bottom:v};return{vertical:cu(p,e,!0),horizontal:cu(p,n,!1)}}function Un(t,e){var n=t.state,r=n.containerClientRect,a=r.clientHeight,i=r.clientWidth,s=r.clientLeft,o=r.clientTop,l=n.snapOffset,u=l.left,c=l.top,f=l.right,d=l.bottom,v=e||t.props.bounds||{},p=v.position||"client",h=p==="css",g=v.left,m=g===void 0?-1/0:g,y=v.top,E=y===void 0?-1/0:y,b=v.right,x=b===void 0?h?-1/0:1/0:b,_=v.bottom,S=_===void 0?h?-1/0:1/0:_;return h&&(x=i+f-u-x,S=a+d-c-S),{left:m+u-s,right:x+u-s,top:E+c-o,bottom:S+c-o}}function gh(t,e,n){var r=Un(t),a=r.left,i=r.top,s=r.right,o=r.bottom,l=n[0],u=n[1],c=Z(n,e),f=c[0],d=c[1];Math.abs(f)<Yt&&(f=0),Math.abs(d)<Yt&&(d=0);var v=d>0,p=f>0,h={isBound:!1,offset:0,pos:0},g={isBound:!1,offset:0,pos:0};if(f===0&&d===0)return{vertical:h,horizontal:g};if(f===0)v?o<u&&(g.pos=o,g.offset=u-o):i>u&&(g.pos=i,g.offset=u-i);else if(d===0)p?s<l&&(h.pos=s,h.offset=l-s):a>l&&(h.pos=a,h.offset=l-a);else{var m=d/f,y=n[1]-m*l,E=0,b=0,x=!1;p&&s<=l?(E=m*s+y,b=s,x=!0):!p&&l<=a&&(E=m*a+y,b=a,x=!0),x&&(E<i||E>o)&&(x=!1),x||(v&&o<=u?(E=o,b=(E-y)/m,x=!0):!v&&u<=i&&(E=i,b=(E-y)/m,x=!0)),x&&(h.isBound=!0,h.pos=b,h.offset=l-b,g.isBound=!0,g.pos=E,g.offset=u-E)}return{vertical:h,horizontal:g}}function cu(t,e,n){var r=t[n?"left":"top"],a=t[n?"right":"bottom"],i=Math.min.apply(Math,e),s=Math.max.apply(Math,e),o=[];return r+1>i&&o.push({isBound:!0,offset:i-r,pos:r}),a-1<s&&o.push({isBound:!0,offset:s-a,pos:a}),o.length||o.push({isBound:!1,offset:0,pos:0}),o.sort(function(l,u){return Math.abs(u.offset)-Math.abs(l.offset)})}function fu(t,e,n){var r=n?t.map(function(a){return Lr(a,n)}):t;return r.some(function(a){return a[0]<e.left&&Math.abs(a[0]-e.left)>.1||a[0]>e.right&&Math.abs(a[0]-e.right)>.1||a[1]<e.top&&Math.abs(a[1]-e.top)>.1||a[1]>e.bottom&&Math.abs(a[1]-e.bottom)>.1})}function mh(t,e,n){var r=ne(t),a=Math.sqrt(r*r-e*e)||0;return[a,-a].sort(function(i,s){return Math.abs(i-t[n?0:1])-Math.abs(s-t[n?0:1])}).map(function(i){return Ct([0,0],n?[i,e]:[e,i])})}function yh(t,e,n,r,a){if(!t.props.bounds)return[];var i=a*Math.PI/180,s=Un(t),o=s.left,l=s.top,u=s.right,c=s.bottom,f=o-r[0],d=u-r[0],v=l-r[1],p=c-r[1],h={left:f,top:v,right:d,bottom:p};if(!fu(n,h,0))return[];var g=[];return[[f,0],[d,0],[v,1],[p,1]].forEach(function(m){var y=m[0],E=m[1];n.forEach(function(b){var x=Ct([0,0],b);g.push.apply(g,mh(b,y,E).map(function(_){return i+_-x}).filter(function(_){return!fu(e,h,_)}).map(function(_){return lt(_*180/Math.PI,Yt)}))})}),g}function bh(t,e){var n,r=t.direction,a=t.classNames,i=t.size,s=t.pos,o=t.zoom,l=t.key,u=r==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:a.join(" "),style:(n={},n[u?"width":"height"]="".concat(i),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(o,")"),n)})}function Fi(t,e){return bh(O(O({},t),{classNames:Q([q("line","guideline",t.direction)],t.classNames,!0).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(lt(n,.1),"px")})}),e)}function du(t,e,n,r,a,i,s,o){var l=t.props.zoom;return n.map(function(u,c){var f=u.type,d=u.pos,v=[0,0];return v[s]=r,v[s?0:1]=-a+d,Fi({key:"".concat(e,"TargetGuideline").concat(c),classNames:[q("target","bold",f)],posValue:v,sizeValue:i,zoom:l,direction:e},o)})}function vu(t,e,n,r,a,i){var s=t.props,o=s.zoom,l=s.isDisplayInnerSnapDigit,u=e==="horizontal"?Pe:Ae,c=a[u.start],f=a[u.end];return n.filter(function(d){var v=d.hide,p=d.elementRect;if(v)return!1;if(l&&p){var h=p.rect;if(h[u.start]<=c&&f<=h[u.end])return!1}return!0}).map(function(d,v){var p=d.pos,h=d.size,g=d.element,m=d.className,y=[-r[0]+p[0],-r[1]+p[1]];return Fi({key:"".concat(e,"-default-guideline-").concat(v),classNames:g?[q("bold"),m]:[q("normal"),m],direction:e,posValue:y,sizeValue:h,zoom:o},i)})}function tn(t,e,n,r,a,i,s,o){var l,u=t.props,c=u.snapDigit,f=c===void 0?0:c,d=u.isDisplaySnapDigit,v=d===void 0?!0:d,p=u.snapDistFormat,h=p===void 0?function(x,_){return x}:p,g=u.zoom,m=e==="horizontal"?"X":"Y",y=e==="vertical"?"height":"width",E=Math.abs(a),b=v?parseFloat(E.toFixed(f)):0;return o.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:q("guideline-group",e),style:(l={left:"".concat(i[0],"px"),top:"".concat(i[1],"px")},l[y]="".concat(E,"px"),l)},Fi({direction:e,classNames:[q(n),s],size:"100%",posValue:[0,0],sizeValue:E,zoom:g},o),o.createElement("div",{className:q("size-value","gap"),style:{transform:"translate".concat(m,"(-50%) scale(").concat(g,")")}},b>0?h(b,e):""))}function Eh(t,e,n,r){var a=t==="vertical"?0:1,i=t==="vertical"?1:0,s=a?Pe:Ae,o=n[s.start],l=n[s.end];return Xl(e,function(u){return u.pos[a]}).map(function(u){var c=[],f=[],d=[];return u.forEach(function(v){var p,h,g=v.element,m=v.elementRect.rect;if(m[s.end]<o)c.push(v);else if(l<m[s.start])f.push(v);else if(m[s.start]<=o&&l<=m[s.end]&&r){var y=v.pos,E={element:g,rect:O(O({},m),(p={},p[s.end]=m[s.start],p))},b={element:g,rect:O(O({},m),(h={},h[s.start]=m[s.end],h))},x=[0,0],_=[0,0];x[a]=y[a],x[i]=y[i],_[a]=y[a],_[i]=y[i]+v.size,c.push({type:t,pos:x,size:0,elementRect:E}),f.push({type:t,pos:_,size:0,elementRect:b})}}),c.sort(function(v,p){return p.pos[i]-v.pos[i]}),f.sort(function(v,p){return v.pos[i]-p.pos[i]}),{total:u,start:c,end:f,inner:d}})}function Sh(t,e,n,r,a){var i=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach(function(o){var l=e.filter(function(g){return g.type===o}),u=o==="vertical"?1:0,c=u?0:1,f=Eh(o,l,r,i),d=u?Ae:Pe,v=u?Pe:Ae,p=r[d.start],h=r[d.end];f.forEach(function(g){var m=g.total,y=g.start,E=g.end,b=g.inner,x=n[c]+m[0].pos[c]-r[v.start],_=r;y.forEach(function(S){var D=S.elementRect.rect,C=_[d.start]-D[d.end];if(C>0){var M=[0,0];M[u]=n[u]+_[d.start]-p-C,M[c]=x,s.push(tn(t,o,"dashed",s.length,C,M,S.className,a))}_=D}),_=r,E.forEach(function(S){var D=S.elementRect.rect,C=D[d.start]-_[d.end];if(C>0){var M=[0,0];M[u]=n[u]+_[d.end]-p,M[c]=x,s.push(tn(t,o,"dashed",s.length,C,M,S.className,a))}_=D}),b.forEach(function(S){var D=S.elementRect.rect,C=p-D[d.start],M=D[d.end]-h,R=[0,0],T=[0,0];R[u]=n[u]-C,R[c]=x,T[u]=n[u]+h-p,T[c]=x,s.push(tn(t,o,"dashed",s.length,C,R,S.className,a)),s.push(tn(t,o,"dashed",s.length,M,T,S.className,a))})})}),s}function _h(t,e,n,r,a){var i=[];return["horizontal","vertical"].forEach(function(s){var o=e.filter(function(g){return g.type===s}).slice(0,1),l=s==="vertical"?0:1,u=l?0:1,c=l?Ae:Pe,f=l?Pe:Ae,d=r[c.start],v=r[c.end],p=r[f.start],h=r[f.end];o.forEach(function(g){var m=g.gap,y=g.gapRects,E=Math.max.apply(Math,Q([p],y.map(function(_){var S=_.rect;return S[f.start]}),!1)),b=Math.min.apply(Math,Q([h],y.map(function(_){var S=_.rect;return S[f.end]}),!1)),x=(E+b)/2;E===b||x===(p+h)/2||y.forEach(function(_){var S=_.rect,D=_.className,C=[n[0],n[1]];if(S[c.end]<d)C[l]+=S[c.end]-d;else if(v<S[c.start])C[l]+=S[c.start]-d-m;else return;C[u]+=x-p,i.push(tn(t,l?"vertical":"horizontal","gap",i.length,m,C,D,a))})})}),i}function xh(t,e,n,r){var a=e[0]-t[0],i=e[1]-t[1];if(Math.abs(a)<Kt&&(a=0),Math.abs(i)<Kt&&(i=0),!a)return r?[0,0]:[0,n];if(!i)return r?[n,0]:[0,0];var s=i/a,o=t[1]-s*t[0];if(r){var l=s*(e[0]+n)+o;return[n,l-e[1]]}else{var u=(e[1]+n-o)/s;return[u-e[0],n]}}function zi(t,e,n,r,a){var i=xh(t,e,n,r);if(!i)return{isOutside:!1,offset:[0,0]};var s=pe(t,e),o=pe(i,t),l=pe(i,e),u=o>s||l>s,c=ce({datas:a,distX:i[0],distY:i[1]}),f=c[0],d=c[1];return{offset:[f,d],isOutside:u}}function Zn(t,e){return t.isBound?t.offset:e.isSnap?Ni(e).offset:0}function Ch(t,e,n,r,a){var i=e[0],s=e[1],o=n[0],l=n[1],u=r[0],c=r[1],f=a[0],d=a[1],v=-f,p=-d;if(t&&i&&s){v=0,p=0;var h=[];if(o&&l?h.push([0,d],[f,0]):o?h.push([f,0]):l?h.push([0,d]):u&&c?h.push([0,d],[f,0]):u?h.push([f,0]):c&&h.push([0,d]),h.length){h.sort(function(E,b){return ne(Z([i,s],E))-ne(Z([i,s],b))});var g=h[0];if(g[0]&&Math.abs(i)>Kt)v=-g[0],p=s*Math.abs(i+v)/Math.abs(i)-s;else if(g[1]&&Math.abs(s)>Kt){var m=s;p=-g[1],v=i*Math.abs(s+p)/Math.abs(m)-i}if(t&&l&&o)if(Math.abs(v)>Kt&&Math.abs(v)<Math.abs(f)){var y=Math.abs(f)/Math.abs(v);v*=y,p*=y}else if(Math.abs(p)>Kt&&Math.abs(p)<Math.abs(d)){var y=Math.abs(d)/Math.abs(p);v*=y,p*=y}else v=Er(-f,v),p=Er(-d,p)}}else v=i||o?-f:0,p=s||l?-d:0;return[v,p]}function wh(t,e,n,r,a,i){if(!Sr(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Di(i.absolutePoses,[e,n]),o=te(s),l=o.left,u=o.right,c=o.top,f=o.bottom,d={horizontal:s.map(function(k){return k[1]}),vertical:s.map(function(k){return k[0]})},v=Ai(t.props.snapDirections),p=Ii(v,{left:l,right:u,top:c,bottom:f,center:(l+u)/2,middle:(c+f)/2}),h=qn(t,a,p,d),g=h.vertical,m=h.horizontal,y=ch(t,s,i),E=y.vertical,b=y.horizontal,x=g.isSnap,_=m.isSnap,S=g.isBound||E.isBound,D=m.isBound||b.isBound,C=Er(g.offset,E.offset),M=Er(m.offset,b.offset),R=Ch(r,[e,n],[S,D],[x,_],[C,M]),T=R[0],P=R[1];return[{isBound:S,isSnap:x,offset:T},{isBound:D,isSnap:_,offset:P}]}function qn(t,e,n,r){r===void 0&&(r=n);var a=Gi(Un(t),r.vertical,r.horizontal),i=a.horizontal,s=a.vertical,o=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:$n(t,n.vertical,n.horizontal),l=o.horizontal,u=o.vertical,c=Zn(i[0],l),f=Zn(s[0],u),d=Math.abs(c),v=Math.abs(f);return{horizontal:{isBound:i[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:d,bounds:i,snap:l},vertical:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:v,bounds:s,snap:u}}}function pu(t,e,n,r,a){var i=Gi(e,n,r),s=i.horizontal,o=i.vertical,l=eu(t,n,r,a),u=l.horizontal,c=l.vertical,f=Zn(s[0],u),d=Zn(o[0],c),v=Math.abs(f),p=Math.abs(d);return{horizontal:{isBound:s[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:v,bounds:s,snap:u},vertical:{isBound:o[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:d,dist:p,bounds:o,snap:c}}}function Dh(t,e,n,r){var a=Ct(t,e)/Math.PI*180,i=n.vertical,s=i.isBound,o=i.isSnap,l=i.dist,u=n.horizontal,c=u.isBound,f=u.isSnap,d=u.dist,v=a%180,p=v<3||v>177,h=v>87&&v<93;return d<l&&(s||o&&!h&&(!r||!p))?"vertical":c||f&&!p&&(!r||!h)?"horizontal":""}function Mh(t,e,n,r,a,i){return n.map(function(s){var o=s[0],l=s[1],u=wt(e,o),c=wt(e,l),f=r?Th(t,u,c,a):qn(t,a,{vertical:[c[0]],horizontal:[c[1]]}),d=f.horizontal,v=d.offset,p=d.isBound,h=d.isSnap,g=f.vertical,m=g.offset,y=g.isBound,E=g.isSnap,b=Z(l,o);if(!m&&!v)return{isBound:y||p,isSnap:E||h,sign:b,offset:[0,0]};var x=Dh(u,c,f,r);if(!x)return{sign:b,isBound:!1,isSnap:!1,offset:[0,0]};var _=x==="vertical",S=[0,0];return!r&&Math.abs(l[0])===1&&Math.abs(l[1])===1&&o[0]!==l[0]&&o[1]!==l[1]?S=ce({datas:i,distX:-m,distY:-v}):S=zi(u,c,-(_?m:v),_,i).offset,S=S.map(function(D,C){return D*(b[C]?2/b[C]:0)}),{sign:b,isBound:_?y:p,isSnap:_?E:h,offset:S}})}function hu(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Th(t,e,n,r){var a=gh(t,e,n),i=a.horizontal,s=a.vertical,o=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:oh(t,e,n),l=o.horizontal,u=o.vertical,c=hu(i,l),f=hu(s,u),d=Math.abs(c),v=Math.abs(f);return{horizontal:{isBound:i.isBound,isSnap:l.isSnap,offset:c,dist:d},vertical:{isBound:s.isBound,isSnap:u.isSnap,offset:f,dist:v}}}function Rh(t,e,n,r,a){var i=[-n[0],-n[1]],s=t.state,o=s.width,l=s.height,u=t.props.bounds,c=1/0,f=1/0;if(u){var d=[[n[0],-n[1]],[-n[0],n[1]]],v=u.left,p=v===void 0?-1/0:v,h=u.top,g=h===void 0?-1/0:h,m=u.right,y=m===void 0?1/0:m,E=u.bottom,b=E===void 0?1/0:E;d.forEach(function(x){var _=x[0]!==i[0],S=x[1]!==i[1],D=wt(e,x),C=Ct(r,D)*360/Math.PI;if(S){var M=D.slice();(Math.abs(C-360)<2||Math.abs(C-180)<2)&&(M[1]=r[1]);var R=zi(r,M,(r[1]<D[1]?b:g)-D[1],!1,a),T=R.offset,P=T[1],k=R.isOutside;isNaN(P)||(f=l+(k?1:-1)*Math.abs(P))}if(_){var M=D.slice();(Math.abs(C-90)<2||Math.abs(C-270)<2)&&(M[0]=r[0]);var A=zi(r,M,(r[0]<D[0]?y:p)-D[0],!0,a),N=A.offset[0],G=A.isOutside;isNaN(N)||(c=o+(G?1:-1)*Math.abs(N))}})}return{maxWidth:c,maxHeight:f}}function Ki(t){var e=t.state,n=e.containerClientRect,r=e.hasFixed,a=n.overflow,i=n.scrollHeight,s=n.scrollWidth,o=n.clientHeight,l=n.clientWidth,u=n.clientLeft,c=n.clientTop,f=t.props,d=f.snapGap,v=d===void 0?!0:d,p=f.verticalGuidelines,h=f.horizontalGuidelines,g=f.snapThreshold,m=g===void 0?5:g,y=f.snapGridWidth,E=y===void 0?0:y,b=f.snapGridHeight,x=b===void 0?0:b,_=f.maxSnapElementGuidelineDistance,S=_===void 0?1/0:_,D=te(Xt(t.state)),C=D.top,M=D.left,R=D.bottom,T=D.right,P={top:C,left:M,bottom:R,right:T,center:(M+T)/2,middle:(C+R)/2},k=Ph(t),A=Q([],k,!0);v&&A.push.apply(A,Oh(t,P,m)),A.push.apply(A,kh(E,x,a?s:l,a?i:o,u,c));var N=O({},e.snapOffset||{left:0,top:0,bottom:0,right:0});if(r){var G=n.left,B=n.top;N.left+=G,N.top+=B,N.right+=G,N.bottom+=B}return A.push.apply(A,mu(h||!1,p||!1,a?s:l,a?i:o,u,c,N)),A=A.filter(function(F){var I=F.element,L=F.elementRect,K=F.type;if(!I||!L)return!0;var W=L.rect;return gu(P,W,K,S)}),A}function Oh(t,e,n){var r=t.props,a=r.maxSnapElementGuidelineDistance,i=a===void 0?1/0:a,s=r.maxSnapElementGapDistance,o=s===void 0?1/0:s,l=t.state.elementRects,u=[];return[["vertical",Pe,Ae],["horizontal",Ae,Pe]].forEach(function(c){var f=c[0],d=c[1],v=c[2],p=e[d.start],h=e[d.end],g=e[d.center],m=e[v.start],y=e[v.end];function E(_){var S=_.rect;return S[d.end]<p+n?p-S[d.end]:h-n<S[d.start]?S[d.start]-h:-1}var b=l.filter(function(_){var S=_.rect;return S[v.start]>y||S[v.end]<m?!1:E(_)>0}).sort(function(_,S){return E(_)-E(S)}),x=[];b.forEach(function(_){b.forEach(function(S){if(_!==S){var D=_.rect,C=S.rect,M=D[v.start],R=D[v.end],T=C[v.start],P=C[v.end];M>P||T>R||x.push([_,S])}})}),x.forEach(function(_){var S=_[0],D=_[1],C=S.rect,M=D.rect,R=C[d.start],T=C[d.end],P=M[d.start],k=M[d.end],A=0,N=0,G=!1,B=!1,F=!1;if(T<=p&&h<=P){if(B=!0,A=(P-T-(h-p))/2,N=T+A+(h-p)/2,Math.abs(N-g)>n)return}else if(T<P&&k<p+n){if(G=!0,A=P-T,N=k+A,Math.abs(N-p)>n)return}else if(T<P&&h-n<R){if(F=!0,A=P-T,N=R-A,Math.abs(N-h)>n)return}else return;A&&gu(e,M,f,i)&&(A>o||u.push({type:f,pos:f==="vertical"?[N,0]:[0,N],element:D.element,size:0,className:D.className,isStart:G,isCenter:B,isEnd:F,gap:A,hide:!0,gapRects:[S,D]}))})}),u}function kh(t,e,n,r,a,i){a===void 0&&(a=0),i===void 0&&(i=0);var s=[];if(e)for(var o=0;o<=r;o+=e)s.push({type:"horizontal",pos:[0,lt(o-i,.1)],size:n,hide:!0});if(t)for(var o=0;o<=n;o+=t)s.push({type:"vertical",pos:[lt(o-a,.1),0],size:r,hide:!0});return s}function gu(t,e,n,r){return n==="horizontal"?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function Ph(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var a=(e.elementRects||[]).filter(function(d){return!d.refresh}),i=r.map(function(d){return Ye(d)&&"element"in d?O(O({},d),{element:er(d.element,!0)}):{element:er(d,!0)}}).filter(function(d){return d.element}),s=zr(a.map(function(d){return d.element}),i.map(function(d){return d.element})),o=s.maintained,l=s.added,u=[];o.forEach(function(d){var v=d[0],p=d[1];u[p]=a[v]}),Ah(t,l.map(function(d){return i[d]})).map(function(d,v){u[l[v]]=d}),e.elementRects=u;var c=Ai(t.props.elementSnapDirections),f=[];return u.forEach(function(d){var v=d.element,p=d.top,h=p===void 0?c.top:p,g=d.left,m=g===void 0?c.left:g,y=d.right,E=y===void 0?c.right:y,b=d.bottom,x=b===void 0?c.bottom:b,_=d.center,S=_===void 0?c.center:_,D=d.middle,C=D===void 0?c.middle:D,M=d.className,R=d.rect,T=Ii({top:h,right:E,left:m,bottom:x,center:S,middle:C},R),P=T.horizontal,k=T.vertical,A=R.top,N=R.left,G=R.right-N,B=R.bottom-A,F=[G,B];k.forEach(function(I){f.push({type:"vertical",element:v,pos:[lt(I,.1),A],size:B,sizes:F,className:M,elementRect:d})}),P.forEach(function(I){f.push({type:"horizontal",element:v,pos:[N,lt(I,.1)],size:G,sizes:F,className:M,elementRect:d})})}),f}function mu(t,e,n,r,a,i,s){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s={left:0,top:0,right:0,bottom:0});var o=[],l=s.left,u=s.top,c=s.bottom,f=s.right,d=n+f-l,v=r+c-u;return t&&t.forEach(function(p){var h=Ye(p)?p:{pos:p};o.push({type:"horizontal",pos:[l,lt(h.pos-i+u,.1)],size:d,className:h.className})}),e&&e.forEach(function(p){var h=Ye(p)?p:{pos:p};o.push({type:"vertical",pos:[lt(h.pos-a+l,.1),u],size:v,className:h.className})}),o}function Ah(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,a=n.targetClientRect,i=a.top,s=a.left,o=n.rootMatrix,l=n.is3d,u=l?4:3,c=ah(o,r,u),f=c[0],d=c[1],v=Xt(n),p=Oe(v),h=p.minX,g=p.minY,m=Z([h,g],tr(o,[s-f,i-d],u)).map(function(b){return jp(b)}),y=m[0],E=m[1];return e.map(function(b){var x=b.element.getBoundingClientRect(),_=x.left-f,S=x.top-d,D=S+x.height,C=_+x.width,M=tr(o,[_,S],u),R=M[0],T=M[1],P=tr(o,[C,D],u),k=P[0],A=P[1];return O(O({},b),{rect:{left:R+y,right:k+y,top:T+E,bottom:A+E,center:(R+k)/2+y,middle:(T+A)/2+E}})})}function Jn(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var a=e.containerClientRect,i={left:0,top:0,bottom:0,right:0};if(n!==r){var s=er(r,!0);if(s){var o=Qr(s),l=ql(e,[o.left-a.left,o.top-a.top]),u=ql(e,[o.right-a.right,o.bottom-a.bottom]);i.left=lt(l[0],1e-5),i.top=lt(l[1],1e-5),i.right=lt(u[0],1e-5),i.bottom=lt(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=i,e.guidelines=Ki(t),e.enableSnap=!0,!0}function yu(t,e,n,r,a,i){var s=ke(t,e,n,i?4:3),o=wt(s,r);return Di(s,Z(a,o))}function Ih(t,e,n,r,a,i){var s=i.fixedDirection,o=lh(n,s,r),l=Li(t,e,n,r),u=Q(Q([],Mh(t,e,o,r,a,i),!0),lu(t,l,i),!0),c=Xn(u,0),f=Xn(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:f.isBound,offset:f.offset[1]}}}function Nh(t,e,n,r,a,i,s,o,l){var u=wt(e,s),c=qn(t,o,{vertical:[u[0]],horizontal:[u[1]]}),f=c.horizontal.offset,d=c.vertical.offset;if(lt(d,gi)||lt(f,gi)){var v=ce({datas:l,distX:-d,distY:-f}),p=v[0],h=v[1],g=Math.min(a||1/0,n+s[0]*p),m=Math.min(i||1/0,r+s[1]*h);return[g-n,m-r]}return[0,0]}function bu(t,e,n,r,a,i,s,o){for(var l=Xt(t.state),u=t.props.keepRatio,c=0,f=0,d=0;d<2;++d){var v=e(c,f),p=Ih(t,v,a,u,s,o),h=p.width,g=p.height,m=h.isBound,y=g.isBound,E=h.offset,b=g.offset;if(d===1&&(m||(E=0),y||(b=0)),d===0&&s&&!m&&!y)return[0,0];if(u){var x=Math.abs(E)*(n?1/n:1),_=Math.abs(b)*(r?1/r:1),S=m&&y?x<_:y||!m&&x<_;S?E=n*b/r:b=r*E/n}c+=E,f+=b}if(a[0]&&a[1]){var D=Rh(t,l,a,i,o),C=D.maxWidth,M=D.maxHeight,R=Nh(t,e(c,f).map(function(k){return k.map(function(A){return lt(A,gi)})}),n+c,r+f,C,M,a,s,o),E=R[0],b=R[1];c+=E,f+=b}return[c,f]}function Bh(t,e,n){if(!Sr(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,a=e.pos2,i=e.pos3,s=e.pos4,o=e.origin,l=n*Math.PI/180,u=[r,a,i,s].map(function(v){return Z(v,o)}),c=u.map(function(v){return Lr(v,l)}),f=Q(Q([],yh(t,u,c,o,n),!0),ph(t,u,c,o,n),!0);f.sort(function(v,p){return Math.abs(v-n)-Math.abs(p-n)});var d=f.length>0;return{isSnap:d,rotation:d?f[0]:n}}function Lh(t,e,n,r,a,i,s){if(!Sr(t,"resizable"))return[0,0];var o=s.fixedDirection,l=s.nextAllMatrix,u=t.state,c=u.allMatrix,f=u.is3d;return bu(t,function(d,v){return yu(l||c,e+d,n+v,o,a,f)},e,n,r,a,i,s)}function Gh(t,e,n,r,a){if(!Sr(t,"scalable"))return[0,0];var i=a.startOffsetWidth,s=a.startOffsetHeight,o=a.fixedPosition,l=a.fixedDirection,u=a.is3d,c=bu(t,function(f,d){return yu(Op(a,ft(e,[f/i,d/s])),i,s,l,o,u)},i,s,n,o,r,a);return[c[0]/i,c[1]/s]}function Fh(t,e){e.absolutePoses=Xt(t.state)}function Eu(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var a=r.guideline;e.indexOf(a)>-1||e.push(a)})}),e}function Su(t,e,n,r,a,i){var s=Gi(Un(t,i),e,n),o=s.vertical,l=s.horizontal;o.forEach(function(d){d.isBound&&r.push({type:"bounds",pos:d.pos})}),l.forEach(function(d){d.isBound&&a.push({type:"bounds",pos:d.pos})});var u=hh(t),c=u.vertical,f=u.horizontal;c.forEach(function(d){lr(r,function(v){var p=v.type,h=v.pos;return p==="bounds"&&h===d})>=0||r.push({type:"bounds",pos:d})}),f.forEach(function(d){lr(a,function(v){var p=v.type,h=v.pos;return p==="bounds"&&h===d})>=0||a.push({type:"bounds",pos:d})})}var zh=Ri("",["resizable","scalable"]),Kh={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,snapRenderThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[`:host {
    --bounds-color: #d66;
}
.guideline {
    pointer-events: none;
    z-index: 2;
}
.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}
.guideline-group {
    position: absolute;
    top: 0;
    left: 0;
}
.guideline-group .size-value {
    position: absolute;
    color: #f55;
    font-size: 12px;
    font-weight: bold;
}
.guideline-group.horizontal .size-value {
    transform-origin: 50% 100%;
    transform: translateX(-50%);
    left: 50%;
    bottom: 5px;
}
.guideline-group.vertical .size-value {
    transform-origin: 0% 50%;
    top: 50%;
    transform: translateY(-50%);
    left: 5px;
}
.guideline.gap {
    background: #f55;
}
.size-value.gap {
    color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,a=n.left,i=n.pos1,s=n.pos2,o=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=t.props.snapRenderThreshold,f=c===void 0?1:c;if(!u||!u.render||!Sr(t,""))return[];n.guidelines=Ki(t);var d=Math.min(i[0],s[0],o[0],l[0]),v=Math.min(i[1],s[1],o[1],l[1]),p=u.externalPoses||[],h=Xt(t.state),g=[],m=[],y=[],E=[],b=[],x=te(h),_=x.width,S=x.height,D=x.top,C=x.left,M=x.bottom,R=x.right,T={left:C,right:R,top:D,bottom:M,center:(C+R)/2,middle:(D+M)/2},P=p.length>0,k=P?te(p):{};if(!u.request){if(u.direction&&b.push(sh(t,h,u.direction,f)),u.snap){var A=te(h);u.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),b.push(ru(t,A,f))}P&&(u.center&&(k.middle=(k.top+k.bottom)/2,k.center=(k.left+k.right)/2),b.push(ru(t,k,f))),b.forEach(function(F){var I=F.vertical.posInfos,L=F.horizontal.posInfos;g.push.apply(g,I.filter(function(K){var W=K.guidelineInfos;return W.some(function(Y){var H=Y.guideline;return!H.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),m.push.apply(m,L.filter(function(K){var W=K.guidelineInfos;return W.some(function(Y){var H=Y.guideline;return!H.hide})}).map(function(K){return{type:"snap",pos:K.pos}})),y.push.apply(y,Eu(I)),E.push.apply(E,Eu(L))})}Su(t,[C,R],[D,M],g,m),P&&Su(t,[k.left,k.right],[k.top,k.bottom],g,m,u.externalBounds);var N=Q(Q([],y,!0),E,!0),G=N.filter(function(F){return F.element&&!F.gapRects}),B=N.filter(function(F){return F.gapRects}).sort(function(F,I){return F.gap-I.gap});return V(t,"onSnap",{guidelines:N.filter(function(F){var I=F.element;return!I}),elements:G,gaps:B},!0),Q(Q(Q(Q(Q(Q([],Sh(t,G,[d,v],T,e),!0),_h(t,B,[d,v],T,e),!0),vu(t,"horizontal",E,[a,r],T,e),!0),vu(t,"vertical",y,[a,r],T,e),!0),du(t,"horizontal",m,d,r,_,0,e),!0),du(t,"vertical",g,v,a,S,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Jn(t)},drag:function(t){var e=t.state;Jn(t)||(e.guidelines=Ki(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(zh(t,e)||Vi(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Ot(e.inputEvent.target,q("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Jn(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Jn(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function _u(t,e,n,r){var a=t.getState(),i=a.renderPoses,s=a.rotation,o=a.direction,l=Qe(t.props,e).zoom,u=o>0?1:-1,c=s/Math.PI*180,f={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var v=d.renderDirectionMap;return n.forEach(function(p){var h=p.dir;f[h]=!0}),n.map(function(p){var h=p.data,g=p.classNames,m=p.dir,y=bi[m];if(!y||!f[m])return null;v[m]=!0;var E=(lt(c,15)+u*wl[m]+720)%180,b={};return Re(h).forEach(function(x){b["data-".concat(x)]=h[x]}),r.createElement("div",O({className:q.apply(void 0,Q(["control","direction",m,e],g,!1)),"data-rotation":E,"data-direction":m},b,{key:"direction-".concat(m),style:Ci.apply(void 0,Q([s,l],y.map(function(x){return i[x]}),!1))}))})}function xu(t,e,n,r){var a=Qe(t.props,n).renderDirections,i=a===void 0?e:a;if(!i)return[];var s=i===!0?yi:i;return _u(t,n,s.map(function(o){return{data:{},classNames:[],dir:o}}),r)}function Hh(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),a=r.renderPoses,i=r.rotation,s=r.direction,o=n.renderDirectionMap,l=t.props.zoom,u=s>0?1:-1,c=i/Math.PI*180;return Re(o).map(function(f){var d=bi[f];if(!d)return null;var v=(lt(c,15)+u*wl[f]+720)%180;return e.createElement("div",{className:q("around-control"),"data-rotation":v,"data-direction":f,key:"direction-around-".concat(f),style:Ci.apply(void 0,Q([i,l],d.map(function(p){return a[p]}),!1))})})}function en(t,e,n,r,a,i){for(var s=[],o=6;o<arguments.length;o++)s[o-6]=arguments[o];var l=Ct(n,r),u=e?lt(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(i),className:q.apply(void 0,Q(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":u,"data-line-key":i,"data-direction":e,style:Jr(n,r,a,l)})}function Cu(t,e,n,r,a){var i=n===!0?Sp:n;return i.map(function(s,o){var l=bi[s],u=l[0],c=l[1];if(c!=null)return en(t,s,r[u],r[c],a,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function wu(t){return function(e,n){var r=Qe(e.props,t).edge;return r&&(r===!0||r.length)?Q(Q([],Cu(n,t,r,e.getState().renderPoses,e.props.zoom),!0),Wh(e,t,n),!0):Du(e,t,n)}}function Du(t,e,n){return xu(t,yi,e,n)}function Wh(t,e,n){return xu(t,["nw","ne","sw","se"],e,n)}var Vt={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},requestStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.throttleDragRotate,a=n.zoom,i=t.getState(),s=i.dragInfo,o=i.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var u=ne(l),c=Ct(l,[0,0]);return[e.createElement("div",{className:q("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(u,"px"),transform:"translate(".concat(o[0],"px, ").concat(o[1],"px) rotate(").concat(c,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,a=e.parentGesto,i=t.state,s=i.gestos,o=i.style;if(s.draggable)return!1;s.draggable=a||t.targetGesto,n.datas={},n.left=parseFloat(o.left||"")||0,n.top=parseFloat(o.top||"")||0,n.bottom=parseFloat(o.bottom||"")||0,n.right=parseFloat(o.right||"")||0,n.startValue=[0,0],Je(t,e),Bn(e,"translate"),Fh(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=at(t,e,O({set:function(c){n.startValue=c}},Nn(e))),u=r||V(t,"onDragStart",l);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){An(e,"translate");var n=e.datas,r=e.parentEvent,a=e.parentFlag,i=e.isPinch,s=e.isRequest,o=e.deltaOffset,l=e.distX,u=e.distY,c=n.isDrag,f=n.prevDist,d=n.prevBeforeDist,v=n.startValue;if(c){o&&(l+=o[0],u+=o[1]);var p=t.props,h=p.parentMoveable,g=r?0:p.throttleDrag||0,m=r?0:p.throttleDragRotate||0,y=0,E=!1,b=!1,x=!1,_=!1;if(!r&&m>0&&(l||u)){var S=p.startDragRotate||0,D=lt(S+Ct([0,0],[l,u])*180/Math.PI,m)-S,C=u*Math.abs(Math.cos((D-90)/180*Math.PI)),M=l*Math.abs(Math.cos(D/180*Math.PI)),R=ne([M,C]);y=D*Math.PI/180,l=R*Math.cos(y),u=R*Math.sin(y)}if(!i&&!r&&!a){var T=wh(t,l,u,m,s||o,n),P=T[0],k=T[1];E=P.isSnap,b=P.isBound,x=k.isSnap,_=k.isBound;var A=P.offset,N=k.offset;l+=A,u+=N}var G=ft(Rl({datas:n,distX:l,distY:u}),v),B=ft(Cp({datas:n,distX:l,distY:u}),v);Os(B,Yt),Os(G,Yt),m||(!E&&!b&&(B[0]=lt(B[0],g),G[0]=lt(G[0],g)),!x&&!_&&(B[1]=lt(B[1],g),G[1]=lt(G[1],g)));var F=Z(G,v),I=Z(B,v),L=Z(I,f),K=Z(F,d);n.prevDist=I,n.prevBeforeDist=F,n.passDelta=L,n.passDist=I;var W=n.left+F[0],Y=n.top+F[1],H=n.right-F[0],j=n.bottom-F[1],U=In(n,"translate(".concat(B[0],"px, ").concat(B[1],"px)"),"translate(".concat(I[0],"px, ").concat(I[1],"px)"));if(Si(e,U),t.state.dragInfo.dist=r?[0,0]:I,!(!r&&!h&&L.every(function(it){return!it})&&K.some(function(it){return!it}))){var J=t.state,et=J.width,$=J.height,X=at(t,e,O({transform:U,dist:I,delta:L,translate:B,beforeDist:F,beforeDelta:K,beforeTranslate:G,left:W,top:Y,right:H,bottom:j,width:et,height:$,isPinch:i},jt({transform:U},e)));return!r&&V(t,"onDrag",X),X}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,O(O({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var a=Jt(t,e,{});return!n&&V(t,"onDragEnd",a),a}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=this.dragStart(t,e);if(!i)return!1;var s=Pi(t,this,"dragStart",[r||0,a||0],e,!1,"draggable"),o=O(O({},i),{targets:t.props.targets,events:s}),l=V(t,"onDragGroupStart",o);return n.isDrag=l!==!1,n.isDrag?i:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,e),a=e.datas.passDelta,i=Pi(t,this,"drag",a,e,!1,"draggable");if(r){var s=O({targets:t.props.targets,events:i},r);return V(t,"onDragGroup",s),s}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var a=Pi(t,this,"dragEnd",[0,0],e,!1,"draggable");return V(t,"onDragGroupEnd",Jt(t,e,{targets:t.props.targets,events:a})),n}},request:function(t){var e={},n=t.getRect(),r=0,a=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(i){return"x"in i?r=i.x-n.left:"deltaX"in i&&(r+=i.deltaX),"y"in i?a=i.y-n.top:"deltaY"in i&&(a+=i.deltaY),{datas:e,distX:r,distY:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Mu=Ri("resizable"),Hi={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean,checkResizableError:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:wu("resizable"),dragControlCondition:Mu,viewClassName:Ti("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,a=e.isPinch,i=e.isGroup,s=e.parentDirection,o=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,f=jl(s,a,r,l),d=t.state,v=d.target,p=d.width,h=d.height,g=d.gestos;if(!f||!v||g.resizable)return!1;g.resizable=o||t.controlGesto,!a&&Je(t,e),l.datas={},l.direction=f,l.startOffsetWidth=p,l.startOffsetHeight=h,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],i||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var m=t.props.transformOrigin||"% %";l.transformOrigin=m&&Te(m)?m.split(" "):m,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=(n=e?.parentIsWidth)!==null&&n!==void 0?n:!f[0]&&!f[1]||f[0]||!f[1];function y(C){l.ratio=C&&isFinite(C)?C:0}l.startPositions=Xt(t.state);function E(C){l.fixedDirection=C,l.fixedPosition=wt(l.startPositions,C)}function b(C){var M=t.state,R=M.width,T=M.height;l.fixedPosition=C,l.fixedDirection=Il(C,R,T)}function x(C){l.minSize=[_t("".concat(C[0]),0)||0,_t("".concat(C[1]),0)||0]}function _(C){var M=[C[0]||1/0,C[1]||1/0];(!xs(M[0])||isFinite(M[0]))&&(M[0]=_t("".concat(M[0]),0)||1/0),(!xs(M[1])||isFinite(M[1]))&&(M[1]=_t("".concat(M[1]),0)||1/0),l.maxSize=M}y(p/h),E(u||[-f[0],-f[1]]),l.setFixedDirection=E,l.setFixedPosition=b,l.setMin=x,l.setMax=_;var S=at(t,e,{direction:f,startRatio:l.ratio,set:function(C){var M=C[0],R=C[1];l.startWidth=M,l.startHeight=R},setMin:x,setMax:_,setRatio:y,setFixedDirection:E,setFixedPosition:b,setOrigin:function(C){l.transformOrigin=C},dragStart:Vt.dragStart(t,new gr().dragStart([0,0],e))}),D=c||V(t,"onResizeStart",S);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,D!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:f}),l.isResize?S:!1},dragControl:function(t,e){var n,r=e.datas,a=e.parentFlag,i=e.isPinch,s=e.parentKeepRatio,o=e.dragClient,l=e.parentDist,u=e.isRequest,c=e.isGroup,f=e.parentEvent,d=e.resolveMatrix,v=r.isResize,p=r.transformOrigin,h=r.startWidth,g=r.startHeight,m=r.prevWidth,y=r.prevHeight,E=r.minSize,b=r.maxSize,x=r.ratio,_=r.startOffsetWidth,S=r.startOffsetHeight,D=r.isWidth;if(!v)return;if(d){var C=t.state.is3d,M=r.startOffsetMatrix,R=r.startTransformOrigin,T=C?4:3,P=Fr(kl(e)),k=Math.sqrt(P.length);T!==k&&(P=ue(P,k,T));var A=Zr(M,P,R,T),N=ke(A,_,S,T);r.startPositions=N,r.nextTargetMatrix=P,r.nextAllMatrix=A}var G=Qe(t.props,"resizable"),B=G.resizeFormat,F=G.throttleResize,I=F===void 0?a?0:1:F,L=G.parentMoveable,K=G.keepRatioFinally,W=r.direction,Y=W,H=0,j=0;!W[0]&&!W[1]&&(Y=[1,1]);var U=x&&(s??G.keepRatio)||!1;function J(){var gt=r.fixedDirection,bt=Ql(Y,U,r,e);H=bt.distWidth,j=bt.distHeight;var Bt=Y[0]-gt[0]||U?Math.max(_+H,Yt):_,Lt=Y[1]-gt[1]||U?Math.max(S+j,Yt):S;return U&&_&&S&&(D?Lt=Bt/x:Bt=Lt*x),[Bt,Lt]}var et=J(),$=et[0],X=et[1];f||(r.setFixedDirection(r.fixedDirection),V(t,"onBeforeResize",at(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(gt){var bt;return r.setFixedDirection(gt),bt=J(),$=bt[0],X=bt[1],[$,X]},setFixedPosition:function(gt){var bt;return r.setFixedPosition(gt),bt=J(),$=bt[0],X=bt[1],[$,X]},boundingWidth:$,boundingHeight:X,setSize:function(gt){$=gt[0],X=gt[1]}},!0)));var it=o;o||(!a&&i?it=Bl(t,[0,0]):it=r.fixedPosition);var rt=[0,0];i||(rt=Lh(t,$,X,W,it,u,r)),l&&(!l[0]&&(rt[0]=0),!l[1]&&(rt[1]=0));function Et(){var gt;B&&(gt=B([$,X]),$=gt[0],X=gt[1]),$=lt($,I),X=lt(X,I)}if(U){Y[0]&&Y[1]&&rt[0]&&rt[1]&&(Math.abs(rt[0])>Math.abs(rt[1])?rt[1]=0:rt[0]=0);var ot=!rt[0]&&!rt[1];ot&&Et(),Y[0]&&!Y[1]||rt[0]&&!rt[1]||ot&&D?($+=rt[0],X=$/x):(!Y[0]&&Y[1]||!rt[0]&&rt[1]||ot&&!D)&&(X+=rt[1],$=X*x)}else $+=rt[0],X+=rt[1],$=Math.max(0,$),X=Math.max(0,X);n=kd([$,X],E,b,U?x:!1),$=n[0],X=n[1],Et(),U&&(c||K)&&(D?X=$/x:$=X*x),H=$-_,j=X-S;var ct=[H-m,j-y];r.prevWidth=H,r.prevHeight=j;var pt=Ap(t,$,X,it,p,r);if(!(!L&&ct.every(function(gt){return!gt})&&pt.every(function(gt){return!gt}))){var nt=Vt.drag(t,Ur(e,t.state,pt,!!i,!1,"draggable")),st=nt.transform,ut=h+H,Rt=g+j,ht=at(t,e,O({width:ut,height:Rt,offsetWidth:Math.round($),offsetHeight:Math.round(X),startRatio:x,boundingWidth:$,boundingHeight:X,direction:W,dist:[H,j],delta:ct,isPinch:!!i,drag:nt},$l({style:{width:"".concat(ut,"px"),height:"".concat(Rt,"px")},transform:st},nt,e)));return!f&&V(t,"onResize",ht),ht}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,a=n.startOffsetWidth,i=n.startOffsetHeight,s=n.prevWidth,o=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,f=u-(a+s),d=c-(i+o),v=Math.abs(f)>3,p=Math.abs(d)>3;if(v&&(n.startWidth+=f,n.startOffsetWidth+=f,n.prevWidth+=f),p&&(n.startHeight+=d,n.startOffsetHeight+=d,n.prevHeight+=d),v||p)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var a=Jt(t,e,{});return!r&&V(t,"onResizeEnd",a),a}},dragGroupControlCondition:Mu,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,O(O({},e),{isGroup:!0}));if(!r)return!1;var a=ie(t,"resizable",e);function i(p,h){var g=n.fixedDirection,m=n.fixedPosition,y=h.datas.startPositions||Xt(p.state),E=wt(y,g),b=It(ur(-t.rotation/180*Math.PI,3),[E[0]-m[0],E[1]-m[1],1],3),x=b[0],_=b[1];return h.datas.originalX=x,h.datas.originalY=_,h}var s=n.startOffsetWidth,o=n.startOffsetHeight;function l(){var p=n.minSize;a.forEach(function(h){var g=h.datas,m=g.minSize,y=g.startOffsetWidth,E=g.startOffsetHeight,b=s*(y?m[0]/y:0),x=o*(E?m[1]/E:0);p[0]=Math.max(p[0],b),p[1]=Math.max(p[1],x)})}function u(){var p=n.maxSize;a.forEach(function(h){var g=h.datas,m=g.maxSize,y=g.startOffsetWidth,E=g.startOffsetHeight,b=s*(y?m[0]/y:0),x=o*(E?m[1]/E:0);p[0]=Math.min(p[0],b),p[1]=Math.min(p[1],x)})}var c=me(t,this,"dragControlStart",e,function(p,h){return i(p,h)});l(),u();var f=function(p){r.setFixedDirection(p),c.forEach(function(h,g){h.setFixedDirection(p),i(h.moveable,a[g])})};n.setFixedDirection=f;var d=O(O({},r),{targets:t.props.targets,events:c.map(function(p){return O(O({},p),{setMin:function(h){p.setMin(h),l()},setMax:function(h){p.setMax(h),u()}})}),setFixedDirection:f,setMin:function(p){r.setMin(p),l()},setMax:function(p){r.setMax(p),u()}}),v=V(t,"onResizeGroupStart",d);return n.isResize=v!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Qe(t.props,"resizable");Wn(t,"onBeforeResize",function(v){V(t,"onBeforeResizeGroup",at(t,e,O(O({},v),{targets:r.targets}),!0))});var a=this.dragControl(t,O(O({},e),{isGroup:!0}));if(a){var i=a.boundingWidth,s=a.boundingHeight,o=a.dist,l=r.keepRatio,u=[i/(i-o[0]),s/(s-o[1])],c=n.fixedPosition,f=me(t,this,"dragControl",e,function(v,p){var h=It(ur(t.rotation/180*Math.PI,3),[p.datas.originalX*u[0],p.datas.originalY*u[1],1],3),g=h[0],m=h[1];return O(O({},p),{parentDist:null,parentScale:u,dragClient:ft(c,[g,m]),parentKeepRatio:l})}),d=O({targets:r.targets,events:f},a);return V(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var a=me(t,this,"dragControlEnd",e),i=Jt(t,e,{targets:t.props.targets,events:a});return V(t,"onResizeGroupEnd",i),n}},request:function(t){var e={},n=0,r=0,a=t.getRect();return{isControl:!0,requestStart:function(i){var s;return{datas:e,parentDirection:i.direction||[1,1],parentIsWidth:(s=i?.horizontal)!==null&&s!==void 0?s:!0}},request:function(i){return"offsetWidth"in i?n=i.offsetWidth-a.offsetWidth:"deltaWidth"in i&&(n+=i.deltaWidth),"offsetHeight"in i?r=i.offsetHeight-a.offsetHeight:"deltaHeight"in i&&(r+=i.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:i.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Wi(t,e,n,r,a){var i=t.props.groupable,s=t.state,o=s.is3d?4:3,l=e.origin,u=kt(t.state.rootMatrix,Z([l[0],l[1]],i?[0,0]:[s.left,s.top]),o),c=ft([a.left,a.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Ct(c,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=pe(c,[n,r])}function Qn(t,e,n){var r=n.defaultDeg,a=n.prevDeg,i=a%360,s=Math.floor(a/360);i<0&&(i+=360),i>t&&i>270&&t<90?++s:i<t&&i<90&&t>270&&--s;var o=e*(s*360+t-r);return n.prevDeg=r+o,o}function Yi(t,e,n,r){return Qn(Ct(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function ji(t,e,n,r,a,i){var s=t.props.throttleRotate,o=s===void 0?0:s,l=n.prevSnapDeg,u=0,c=!1;if(i){var f=Bh(t,e,r);c=f.isSnap,u=a+f.rotation}c||(u=lt(a+r,o));var d=u-a;return n.prevSnapDeg=d,[d-l,d,u]}function Tu(t,e,n){var r=e[0],a=e[1],i=e[2],s=e[3];if(t==="none")return[];if(Pt(t))return t.map(function(h){return Tu(h,[r,a,i,s],n)[0]});var o=(t||"top").split("-"),l=o[0],u=o[1],c=[r,a];l==="left"?c=[i,r]:l==="right"?c=[a,s]:l==="bottom"&&(c=[s,i]);var f=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],d=Wl(c,n);if(u){var v=u==="top"||u==="left",p=l==="bottom"||l==="left";f=c[v&&!p||!v&&p?0:1]}return[[f,d]]}function Vi(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Ot(n,q("rotation-control"))||Ot(n,q("around-control"))||Ot(n,q("control"))&&Ot(n,q("rotatable")))return!0;var r=t.props.rotationTarget;return r?Oi(r,!0).some(function(a){return a?n===a||n.contains(a):!1}):!1}var Yh=yi.map(function(t){var e="",n="",r="center",a="center";return t.indexOf("n")>-1&&(e="top: -20px;",a="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",a="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(a,`;
    }`)}).join(`
`),jh=`.rotation {
    position: absolute;
    height: 40px;
    width: 1px;
    transform-origin: 50% 100%;
    height: calc(40px * var(--zoom));
    top: auto;
    left: 0;
    bottom: 100%;
    will-change: transform;
}
.rotation .rotation-line {
    display: block;
    width: 100%;
    height: 100%;
    transform-origin: 50% 50%;
}
.rotation .rotation-control {
    border-color: #4af;
    border-color: var(--moveable-color);
    background:#fff;
    cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
    cursor: alias;
}
.around-control {
    position: absolute;
    will-change: transform;
    width: 20px;
    height: 20px;
    left: -10px;
    top: -10px;
    box-sizing: border-box;
    background: transparent;
    z-index: 8;
    cursor: alias;
    transform-origin: center center;
}
.rotatable.direction.control.move {
    cursor: move;
}
`.concat(Yh,`
`),Vh={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[jh],viewClassName:function(t){return t.isDragging("rotatable")?q("view-rotation-dragging"):""},render:function(t,e){var n=Qe(t.props,"rotatable"),r=n.rotatable,a=n.rotationPosition,i=n.zoom,s=n.renderDirections,o=n.rotateAroundControls,l=n.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,f=u.direction;if(!r)return null;var d=Tu(a,c,f),v=[];if(d.forEach(function(m,y){var E=m[0],b=m[1];v.push(e.createElement("div",{key:"rotation".concat(y),className:q("rotation"),style:{transform:"translate(-50%) translate(".concat(E[0],"px, ").concat(E[1],"px) rotate(").concat(b,"rad)")}},e.createElement("div",{className:q("line rotation-line"),style:{transform:"scaleX(".concat(i,")")}}),e.createElement("div",{className:q("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(i,")")}})))}),s){var p=Re(l||{}),h={};p.forEach(function(m){l[m].forEach(function(y){h[y]=m})});var g=[];Pt(s)&&(g=s.map(function(m){var y=h[m];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:m}})),v.push.apply(v,_u(t,"rotatable",g,e))}return o&&v.push.apply(v,Hh(t,e)),v},dragControlCondition:Vi,dragControlStart:function(t,e){var n,r,a=e.datas,i=e.clientX,s=e.clientY,o=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,f=t.state,d=f.target,v=f.left,p=f.top,h=f.direction,g=f.beforeDirection,m=f.targetTransform,y=f.moveableClientRect,E=f.offsetMatrix,b=f.targetMatrix,x=f.allMatrix,_=f.width,S=f.height;if(!c&&!d)return!1;var D=t.getRect();a.rect=D,a.transform=m,a.left=v,a.top=p;var C=function(H){var j=t.state,U=j.allMatrix,J=j.is3d,et=j.width,$=j.height,X=Il(H,et,$);a.fixedDirection=X,a.fixedPosition=kt(U,H,J?4:3),L&&L.setFixedPosition(H)},M=function(H){a.fixedDirection=H,a.fixedPosition=Nl(t,H),L&&L.setFixedDirection(H)},R=i,T=s;if(c||u||l){var P=o||0;a.beforeInfo={origin:D.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},a.afterInfo=O(O({},a.beforeInfo),{origin:D.origin}),a.absoluteInfo=O(O({},a.beforeInfo),{origin:D.origin,startValue:P})}else{var k=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(k){var A=k.getAttribute("data-direction")||"",N=_p[A];if(N){a.isControl=!0,a.isAroundControl=Ot(k,q("around-control")),a.controlDirection=N;var G=k.getAttribute("data-resolve");G&&(a.resolveAble=G);var B=Yp(f.rootMatrix,f.renderPoses,y);n=wt(B,N),R=n[0],T=n[1]}}a.beforeInfo={origin:D.beforeOrigin},a.afterInfo={origin:D.origin},a.absoluteInfo={origin:D.origin,startValue:D.rotation};var F=C;C=function(H){var j=f.is3d?4:3,U=ft(Ns(b,j),H),J=U[0],et=U[1],$=It(E,$e([J,et],j)),X=It(x,$e([H[0],H[1]],j));F(H);var it=f.posDelta;a.beforeInfo.origin=Z($,it),a.afterInfo.origin=Z(X,it),a.absoluteInfo.origin=Z(X,it),Wi(t,a.beforeInfo,R,T,y),Wi(t,a.afterInfo,R,T,y),Wi(t,a.absoluteInfo,R,T,y)},M=function(H){var j=wt([[0,0],[_,0],[0,S],[_,S]],H);C(j)}}a.startClientX=R,a.startClientY=T,a.direction=h,a.beforeDirection=g,a.startValue=0,a.datas={},Bn(e,"rotate");var I=!1,L=!1;if(a.isControl&&a.resolveAble){var K=a.resolveAble;K==="resizable"&&(L=Hi.dragControlStart(t,O(O({},new gr("resizable").dragStart([0,0],e)),{parentPosition:a.controlPosition,parentFixedPosition:a.fixedPosition})))}L||(I=Vt.dragStart(t,new gr().dragStart([0,0],e))),C(f.transformOrigin);var W=at(t,e,O(O({set:function(H){a.startValue=H*Math.PI/180},setFixedDirection:M,setFixedPosition:C},Nn(e)),{dragStart:I,resizeStart:L})),Y=V(t,"onRotateStart",W);return a.isRotate=Y!==!1,f.snapRenderInfo={request:e.isRequest},a.isRotate?W:!1},dragControl:function(t,e){var n,r,a,i=e.datas,s=e.clientDistX,o=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,f=e.groupDelta,d=i.beforeDirection,v=i.beforeInfo,p=i.afterInfo,h=i.absoluteInfo,g=i.isRotate,m=i.startValue,y=i.rect,E=i.startClientX,b=i.startClientY;if(g){An(e,"rotate");var x=xp(e),_=d*x,S=t.props.parentMoveable,D=0,C,M,R=0,T,P,k=0,A,N,G=180/Math.PI*m,B=h.startValue,F=!1,I=E+s,L=b+o;if(!u&&"parentDist"in e){var K=e.parentDist;C=K,T=K,A=K}else c||u?(C=Qn(l,d,v),T=Qn(l,_,p),A=Qn(l,_,h)):(C=Yi(I,L,d,v),T=Yi(I,L,_,p),A=Yi(I,L,_,h),F=!0);if(M=G+C,P=G+T,N=B+A,V(t,"onBeforeRotate",at(t,e,{beforeRotation:M,rotation:P,absoluteRotation:N,setRotation:function(it){T=it-G,C=T,A=T}},!0)),n=ji(t,y,v,C,G,F),D=n[0],C=n[1],M=n[2],r=ji(t,y,p,T,G,F),R=r[0],T=r[1],P=r[2],a=ji(t,y,h,A,B,F),k=a[0],A=a[1],N=a[2],!(!k&&!R&&!D&&!S)){var W=In(i,"rotate(".concat(P,"deg)"),"rotate(".concat(T,"deg)")),Y=Pp(t,T,i),H=Z(ft(f||[0,0],Y),i.prevInverseDist||[0,0]);i.prevInverseDist=Y,i.requestValue=null;var j=Pl(t,W,H,c,e),U=j,J=pe([I,L],h.startAbsoluteOrigin)-h.startDist,et=void 0;if(i.resolveAble==="resizable"){var $=Hi.dragControl(t,O(O({},Ur(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:J}));$&&(et=$,U=$l(U,$,e))}var X=at(t,e,O(O({delta:R,dist:T,rotate:P,rotation:P,beforeDist:C,beforeDelta:D,beforeRotate:M,beforeRotation:M,absoluteDist:A,absoluteDelta:k,absoluteRotate:N,absoluteRotation:N,isPinch:!!c,resize:et},j),U));return V(t,"onRotate",X),X}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=Jt(t,e,{});return V(t,"onRotateEnd",r),r}},dragGroupControlCondition:Vi,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,a=r.left,i=r.top,s=r.beforeOrigin,o=this.dragControlStart(t,e);if(!o)return!1;o.set(n.beforeDirection*t.rotation);var l=me(t,this,"dragControlStart",e,function(f,d){var v=f.state,p=v.left,h=v.top,g=v.beforeOrigin,m=ft(Z([p,h],[a,i]),Z(g,s));return d.datas.startGroupClient=m,d.datas.groupClient=m,O(O({},d),{parentRotate:0})}),u=O(O({},o),{targets:t.props.targets,events:l}),c=V(t,"onRotateGroupStart",u);return n.isRotate=c!==!1,n.isRotate?o:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Wn(t,"onBeforeRotate",function(u){V(t,"onBeforeRotateGroup",at(t,e,O(O({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.beforeDirection,i=r.beforeDist,s=i/180*Math.PI,o=me(t,this,"dragControl",e,function(u,c){var f=c.datas.startGroupClient,d=c.datas.groupClient,v=d[0],p=d[1],h=Lr(f,s*a),g=h[0],m=h[1],y=[g-v,m-p];return c.datas.groupClient=[g,m],O(O({},c),{parentRotate:i,groupDelta:y})});t.rotation=a*r.beforeRotation;var l=O({targets:t.props.targets,events:o,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return V(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var a=me(t,this,"dragControlEnd",e),i=Jt(t,e,{targets:t.props.targets,events:a});return V(t,"onRotateGroupEnd",i),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaRotate"in a?n+=a.deltaRotate:"rotate"in a&&(n=a.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Ru=Ri("scalable"),$h={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:wu("scalable"),dragControlCondition:Ru,viewClassName:Ti("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,a=e.inputEvent,i=e.parentDirection,s=jl(i,r,a,n),o=t.state,l=o.width,u=o.height,c=o.targetTransform,f=o.target,d=o.pos1,v=o.pos2,p=o.pos4;if(!s||!f)return!1;r||Je(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=s,n.startOffsetWidth=l,n.startOffsetHeight=u,n.startValue=[1,1];var h=pe(d,v),g=pe(v,p),m=!s[0]&&!s[1]||s[0]||!s[1];n.scaleWidth=h,n.scaleHeight=g,n.scaleXRatio=h/l,n.scaleYRatio=g/u,Bn(e,"scale"),n.isWidth=m;function y(_){n.ratio=_&&isFinite(_)?_:0}n.startPositions=Xt(t.state);function E(_){n.fixedDirection=_,n.fixedPosition=wt(n.startPositions,_)}n.setFixedDirection=E,y(pe(d,v)/pe(v,p)),E([-s[0],-s[1]]);var b=at(t,e,O(O({direction:s,set:function(_){n.startValue=_},setRatio:y,setFixedDirection:E},Nn(e)),{dragStart:Vt.dragStart(t,new gr().dragStart([0,0],e))})),x=V(t,"onScaleStart",b);return n.startFixedDirection=n.fixedDirection,x!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),n.isScale?b:!1},dragControl:function(t,e){An(e,"scale");var n=e.datas,r=e.parentKeepRatio,a=e.parentFlag,i=e.isPinch,s=e.dragClient,o=e.isRequest,l=n.prevDist,u=n.direction,c=n.startOffsetWidth,f=n.startOffsetHeight,d=n.isScale,v=n.startValue,p=n.isWidth,h=n.ratio;if(!d)return!1;var g=t.props,m=g.throttleScale,y=g.parentMoveable,E=u;!u[0]&&!u[1]&&(E=[1,1]);var b=h&&(r??g.keepRatio)||!1,x=t.state;function _(){var L=Ql(E,b,n,e),K=L.distWidth,W=L.distHeight,Y=c?(c+K)/c:1,H=f?(f+W)/f:1;return Y=E[0]||b?Y*v[0]:v[0],H=E[1]||b?H*v[1]:v[1],Y===0&&(Y=(l[0]>0?1:-1)*Pn),H===0&&(H=(l[1]>0?1:-1)*Pn),[Y,H]}var S=_();if(!i&&t.props.groupable){var D=x.snapRenderInfo||{},C=D.direction;Pt(C)&&(C[0]||C[1])&&(x.snapRenderInfo={direction:u,request:e.isRequest})}V(t,"onBeforeScale",at(t,e,{scale:S,setFixedDirection:function(L){return n.setFixedDirection(L),S=_(),S},startFixedDirection:n.startFixedDirection,setScale:function(L){S=L}},!0));var M=[S[0]/v[0],S[1]/v[1]],R=s,T=[0,0];if(s||(!a&&i?R=Bl(t,[0,0]):R=n.fixedPosition),i||(T=Gh(t,M,u,o,n)),b){E[0]&&E[1]&&T[0]&&T[1]&&(Math.abs(T[0]*c)>Math.abs(T[1]*f)?T[1]=0:T[0]=0);var P=!T[0]&&!T[1];if(P&&(p?M[0]=lt(M[0]*v[0],m)/v[0]:M[1]=lt(M[1]*v[1],m)/v[1]),E[0]&&!E[1]||T[0]&&!T[1]||P&&p){M[0]+=T[0];var k=c*M[0]*v[0]/h;M[1]=k/f/v[1]}else if(!E[0]&&E[1]||!T[0]&&T[1]||P&&!p){M[1]+=T[1];var A=f*M[1]*v[1]*h;M[0]=A/c/v[0]}}else M[0]+=T[0],M[1]+=T[1],T[0]||(M[0]=lt(M[0]*v[0],m)/v[0]),T[1]||(M[1]=lt(M[1]*v[1],m)/v[1]);M[0]===0&&(M[0]=(l[0]>0?1:-1)*Pn),M[1]===0&&(M[1]=(l[1]>0?1:-1)*Pn);var N=[M[0]/l[0],M[1]/l[1]];S=Np(M,v);var G=kp(t,M,n.fixedDirection,R,n),B=Z(G,n.prevInverseDist||[0,0]);if(n.prevDist=M,n.prevInverseDist=G,S[0]===l[0]&&S[1]===l[1]&&B.every(function(L){return!L})&&!y)return!1;var F=In(n,"scale(".concat(S.join(", "),")"),"scale(".concat(M.join(", "),")")),I=at(t,e,O({offsetWidth:c,offsetHeight:f,direction:u,scale:S,dist:M,delta:N,isPinch:!!i},Pl(t,F,B,i,e)));return V(t,"onScale",I),I},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=Jt(t,e,{});return V(t,"onScaleEnd",r),r},dragGroupControlCondition:Ru,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var a=ie(t,"resizable",e);function i(c,f){var d=n.fixedDirection,v=n.fixedPosition,p=f.datas.startPositions||Xt(c.state),h=wt(p,d),g=It(ur(-t.rotation/180*Math.PI,3),[h[0]-v[0],h[1]-v[1],1],3),m=g[0],y=g[1];return f.datas.originalX=m,f.datas.originalY=y,f}n.moveableScale=t.scale;var s=me(t,this,"dragControlStart",e,function(c,f){return i(c,f)}),o=function(c){r.setFixedDirection(c),s.forEach(function(f,d){f.setFixedDirection(c),i(f.moveable,a[d])})};n.setFixedDirection=o;var l=O(O({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),u=V(t,"onScaleGroupStart",l);return n.isScale=u!==!1,n.isScale?l:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Wn(t,"onBeforeScale",function(f){V(t,"onBeforeScaleGroup",at(t,e,O(O({},f),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var a=n.moveableScale;t.scale=[r.scale[0]*a[0],r.scale[1]*a[1]];var i=t.props.keepRatio,s=r.dist,o=r.scale,l=n.fixedPosition,u=me(t,this,"dragControl",e,function(f,d){var v=It(ur(t.rotation/180*Math.PI,3),[d.datas.originalX*s[0],d.datas.originalY*s[1],1],3),p=v[0],h=v[1];return O(O({},d),{parentDist:null,parentScale:o,parentKeepRatio:i,dragClient:ft(l,[p,h])})}),c=O({targets:t.props.targets,events:u},r);return V(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var a=me(t,this,"dragControlEnd",e),i=Jt(t,e,{targets:t.props.targets,events:a});return V(t,"onScaleGroupEnd",i),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(r){return{datas:t,parentDirection:r.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ne(t,e){return t.map(function(n,r){return We(n,e[r],1,2)})}function Ou(t,e,n){var r=Ct(t,e),a=Ct(t,n),i=a-r;return i>=0?i:i+2*Math.PI}function Xh(t,e){var n=Ou(t[0],t[1],t[2]),r=Ou(e[0],e[1],e[2]),a=Math.PI;return!(n>=a&&r<=a||n<=a&&r>=a)}var Uh={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:Ti("warpable"),render:function(t,e){var n=t.props,r=n.resizable,a=n.scalable,i=n.warpable,s=n.zoom;if(r||a||!i)return[];var o=t.state,l=o.pos1,u=o.pos2,c=o.pos3,f=o.pos4,d=Ne(l,u),v=Ne(u,l),p=Ne(l,c),h=Ne(c,l),g=Ne(c,f),m=Ne(f,c),y=Ne(u,f),E=Ne(f,u);return Q([e.createElement("div",{className:q("line"),key:"middeLine1",style:Jr(d,g,s)}),e.createElement("div",{className:q("line"),key:"middeLine2",style:Jr(v,m,s)}),e.createElement("div",{className:q("line"),key:"middeLine3",style:Jr(p,y,s)}),e.createElement("div",{className:q("line"),key:"middeLine4",style:Jr(h,E,s)})],Du(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Ot(n,q("direction"))&&Ot(n,q("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,a=t.props.target,i=r.target,s=Vl(i,n);if(!s||!a)return!1;var o=t.state,l=o.transformOrigin,u=o.is3d,c=o.targetTransform,f=o.targetMatrix,d=o.width,v=o.height,p=o.left,h=o.top;n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?f:ue(f,3,4),n.targetInverseMatrix=Is(re(n.warpTargetMatrix,4),3,4),n.direction=s,n.left=p,n.top=h,n.poses=[[0,0],[d,0],[0,v],[d,v]].map(function(y){return Z(y,l)}),n.nextPoses=n.poses.map(function(y){var E=y[0],b=y[1];return It(n.warpTargetMatrix,[E,b,0,1],4)}),n.startValue=xt(4),n.prevMatrix=xt(4),n.absolutePoses=Xt(o),n.posIndexes=Ol(s),Je(t,e),Bn(e,"matrix3d"),o.snapRenderInfo={request:e.isRequest,direction:s};var g=at(t,e,O({set:function(y){n.startValue=y}},Nn(e))),m=V(t,"onWarpStart",g);return m!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,a=e.distX,i=e.distY,s=n.targetInverseMatrix,o=n.prevMatrix,l=n.isWarp,u=n.startValue,c=n.poses,f=n.posIndexes,d=n.absolutePoses;if(!l)return!1;if(An(e,"matrix3d"),Sr(t,"warpable")){var v=f.map(function(C){return d[C]});v.length>1&&v.push([(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2]);var p=qn(t,r,{horizontal:v.map(function(C){return C[1]+i}),vertical:v.map(function(C){return C[0]+a})}),h=p.horizontal,g=p.vertical;i-=h.offset,a-=g.offset}var m=ce({datas:n,distX:a,distY:i},!0),y=n.nextPoses.slice();if(f.forEach(function(C){y[C]=ft(y[C],m)}),!Ep.every(function(C){return Xh(C.map(function(M){return c[M]}),C.map(function(M){return y[M]}))}))return!1;var E=Wa(c[0],c[2],c[1],c[3],y[0],y[2],y[1],y[3]);if(!E.length)return!1;var b=mt(s,E,4),x=Tl(n,b,!0),_=mt(re(o,4),x,4);n.prevMatrix=x;var S=mt(u,x,4),D=In(n,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return Si(e,D),V(t,"onWarp",at(t,e,O({delta:_,matrix:S,dist:x,multiply:mt,transform:D},jt({transform:D},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,V(t,"onWarpEnd",Jt(t,e,{})),r):!1}},Zh=q("area-pieces"),ta=q("area-piece"),ku=q("avoid"),qh=q("view-dragging");function $i(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,a=n.height;As(e,ku),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(a,"px")}}function Pu(t){return t.createElement("div",{key:"area_pieces",className:Zh},t.createElement("div",{className:ta}),t.createElement("div",{className:ta}),t.createElement("div",{className:ta}),t.createElement("div",{className:ta}))}var Au={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,a=n.dragArea,i=n.groupable,s=n.passDragArea,o=t.getState(),l=o.width,u=o.height,c=o.renderPoses,f=s?q("area","pass"):q("area");if(i)return[e.createElement("div",{key:"area",ref:le(t,"areaElement"),className:f}),Pu(e)];if(!r||!a)return[];var d=Wa([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),v=d.length?Kn(d,!0):"none";return[e.createElement("div",{key:"area",ref:le(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:v}}),Pu(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,a=e.clientY,i=e.inputEvent;if(!i)return!1;n.isDragArea=!1;var s=t.areaElement,o=t.state,l=o.moveableClientRect,u=o.renderPoses,c=o.rootMatrix,f=o.is3d,d=l.left,v=l.top,p=te(u),h=p.left,g=p.top,m=p.width,y=p.height,E=f?4:3,b=tr(c,[r-d,a-v],E),x=b[0],_=b[1];x-=h,_-=g;var S=[{left:h,top:g,width:m,height:_-10},{left:h,top:g,width:x-10,height:y},{left:h,top:g+_+10,width:m,height:y-_-10},{left:h+x+10,top:g,width:m-x-10,height:y}],D=[].slice.call(s.nextElementSibling.children);S.forEach(function(C,M){D[M].style.cssText="left: ".concat(C.left,"px;top: ").concat(C.top,"px; width: ").concat(C.width,"px; height: ").concat(C.height,"px;")}),Ps(s,ku),o.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,$i(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||$i(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){$i(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&Ts(function(){e.disableNativeEvent=!1})}},Jh=Xr("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),a=r.beforeOrigin,i=r.rotation;return[e.createElement("div",{className:q("control","origin"),style:Ci(i,n,a),key:"beforeOrigin"})]}});function Qh(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var tg={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,scrollThrottleTime:Number,getScrollPosition:Function,scrollOptions:Object},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,a=r===void 0?t.getContainer():r,i=n.scrollOptions,s=new hl,o=er(a,!0);e.datas.dragScroll=s,t.state.dragScroll=s;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;s.on("scroll",function(c){var f=c.container,d=c.direction,v=at(t,e,{scrollContainer:f,direction:d}),p=u?"onScrollGroup":"onScroll";u&&(v.targets=u),V(t,p,v)}).on("move",function(c){var f=c.offsetX,d=c.offsetY,v=c.inputEvent;t[l].scrollBy(f,d,v.inputEvent,!0)}).on("scrollDrag",function(c){var f=c.next;f(t[l].getCurrentEvent())}),s.dragStart(e,O({container:o},i))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,a=r.scrollContainer,i=a===void 0?t.getContainer():a,s=r.scrollThreshold,o=s===void 0?0:s,l=r.scrollThrottleTime,u=l===void 0?0:l,c=r.getScrollPosition,f=c===void 0?Qh:c,d=r.scrollOptions;return n.drag(e,O({container:i,threshold:o,throttleTime:u,getScrollPosition:function(v){return f({scrollContainer:v.container,direction:v.direction})}},d)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,O(O({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,O(O({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,O(O({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,O(O({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},Iu={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object,persistData:Object,useAccuratePosition:Boolean,firstRenderState:Object,linePadding:Boolean},events:{onChangeTargets:"changeTargets"}},eg=Xr("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},a=r.left,i=a===void 0?0:a,s=r.top,o=s===void 0?0:s,l=r.right,u=l===void 0?0:l,c=r.bottom,f=c===void 0?0:c,d=t.getState(),v=d.renderPoses,p=d.pos1,h=d.pos2,g=d.pos3,m=d.pos4,y=[p,h,g,m],E=[];return i>0&&E.push([0,2]),o>0&&E.push([0,1]),u>0&&E.push([1,3]),f>0&&E.push([2,3]),E.map(function(b,x){var _=b[0],S=b[1],D=y[_],C=y[S],M=v[_],R=v[S],T=Wa([0,0],[100,0],[0,100],[100,100],D,C,M,R);if(T.length)return e.createElement("div",{key:"padding".concat(x),className:q("padding"),style:{transform:Kn(T,!0)}})})}}),Nu=["nw","ne","se","sw"];function ea(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var rg=[1,2,5,6],ng=[0,3,4,7],rr=[1,-1,-1,1],nr=[1,1,-1,-1];function Xi(t,e,n,r,a,i,s,o){a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=n),o===void 0&&(o=r);var l=[],u=!1,c=t.filter(function(d){return!d.virtual}),f=c.map(function(d){var v=d.horizontal,p=d.vertical,h=d.pos;if(p&&!u&&(u=!0,l.push("/")),u){var g=Math.max(0,p===1?h[1]-i:o-h[1]);return l.push(ae(g,r,e)),g}else{var g=Math.max(0,v===1?h[0]-a:s-h[0]);return l.push(ae(g,n,e)),g}});return{radiusPoses:c,styles:l,raws:f}}function Bu(t){for(var e=[0,0],n=[0,0],r=t.length,a=0;a<r;++a){var i=t[a];i.sub&&(i.horizontal&&(e[1]===0&&(e[0]=a),e[1]=a-e[0]+1,n[0]=a+1),i.vertical&&(n[1]===0&&(n[0]=a),n[1]=a-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Lu(t,e,n,r,a,i,s){var o,l,u,c;i===void 0&&(i=[0,0]),s===void 0&&(s=!1);var f=t.indexOf("/"),d=(f>-1?t.slice(0,f):t).length,v=t.slice(0,d),p=t.slice(d+1),h=v.length,g=p.length,m=g>0,y=v[0],E=y===void 0?"0px":y,b=v[1],x=b===void 0?E:b,_=v[2],S=_===void 0?E:_,D=v[3],C=D===void 0?x:D,M=p[0],R=M===void 0?E:M,T=p[1],P=T===void 0?m?R:x:T,k=p[2],A=k===void 0?m?R:S:k,N=p[3],G=N===void 0?m?P:C:N,B=[E,x,S,C].map(function(Y){return _t(Y,e)}),F=[R,P,A,G].map(function(Y){return _t(Y,n)}),I=B.slice(),L=F.slice();o=ea([I[0],I[1]],e),I[0]=o[0],I[1]=o[1],l=ea([I[3],I[2]],e),I[3]=l[0],I[2]=l[1],u=ea([L[0],L[3]],n),L[0]=u[0],L[3]=u[1],c=ea([L[1],L[2]],n),L[1]=c[0],L[2]=c[1];var K=s?I:I.slice(0,Math.max(i[0],h)),W=s?L:L.slice(0,Math.max(i[1],g));return Q(Q([],K.map(function(Y,H){var j=Nu[H];return{virtual:H>=h,horizontal:rr[H],vertical:0,pos:[r+Y,a+(nr[H]===-1?n:0)],sub:!0,raw:B[H],direction:j}}),!0),W.map(function(Y,H){var j=Nu[H];return{virtual:H>=g,horizontal:0,vertical:nr[H],pos:[r+(rr[H]===-1?e:0),a+Y],sub:!0,raw:F[H],direction:j}}),!0)}function ag(t,e,n,r,a){a===void 0&&(a=e.length);var i=Bu(t.slice(r)),s=i.horizontalRange,o=i.verticalRange,l=n-r,u=0;if(l===0)u=a;else if(l>0&&l<s[1])u=s[1]-l;else if(l>=o[0])u=o[0]+o[1]-l;else return;t.splice(n,u),e.splice(n,u)}function ig(t,e,n,r,a,i,s,o,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var f=Bu(t.slice(n)),d=f.horizontalRange,v=f.verticalRange;if(r>-1)for(var p=rr[r]===1?i-u:o-i,h=d[1];h<=r;++h){var g=nr[h]===1?c:l,m=0;if(r===h?m=i:h===0?m=u+p:rr[h]===-1&&(m=o-(e[n][0]-u)),t.splice(n+h,0,{horizontal:rr[h],vertical:0,pos:[m,g]}),e.splice(n+h,0,[m,g]),h===0)break}else if(a>-1){var y=nr[a]===1?s-c:l-s;if(d[1]===0&&v[1]===0){var E=[u+y,c];t.push({horizontal:rr[0],vertical:0,pos:E}),e.push(E)}for(var b=v[0],h=v[1];h<=a;++h){var m=rr[h]===1?u:o,g=0;if(a===h?g=s:h===0?g=c+y:nr[h]===1?g=e[n+b][1]:nr[h]===-1&&(g=l-(e[n+b][1]-c)),t.push({horizontal:0,vertical:nr[h],pos:[m,g]}),e.push([m,g]),h===0)break}}}function og(t,e){e===void 0&&(e=t.map(function(a){return a.raw}));var n=t.map(function(a,i){return a.horizontal?e[i]:null}).filter(function(a){return a!=null}),r=t.map(function(a,i){return a.vertical?e[i]:null}).filter(function(a){return a!=null});return{horizontals:n,verticals:r}}var sg=[[0,-1,"n"],[1,0,"e"]],lg=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Ui(t,e,n){var r=t.props.clipRelative,a=t.state,i=a.width,s=a.height,o=e,l=o.type,u=o.poses,c=l==="rect",f=l==="circle";if(l==="polygon")return n.map(function(_){return"".concat(ae(_[0],i,r)," ").concat(ae(_[1],s,r))});if(c||l==="inset"){var d=n[1][1],v=n[3][0],p=n[7][0],h=n[5][1];if(c)return[d,v,h,p].map(function(_){return"".concat(_,"px")});var g=[d,i-v,s-h,p].map(function(_,S){return ae(_,S%2?i:s,r)});if(n.length>8){var m=Z(n[4],n[0]),y=m[0],E=m[1];g.push.apply(g,Q(["round"],Xi(u.slice(8).map(function(_,S){return O(O({},_),{pos:n[S]})}),r,y,E,p,d,v,h).styles,!1))}return g}else if(f||l==="ellipse"){var b=n[0],x=ae(Math.abs(n[1][1]-b[1]),f?Math.sqrt((i*i+s*s)/2):s,r),g=f?[x]:[ae(Math.abs(n[2][0]-b[0]),i,r),x];return g.push("at",ae(b[0],i,r),ae(b[1],s,r)),g}}function ra(t,e,n,r){var a=[r,(r+e)/2,e],i=[t,(t+n)/2,n];return lg.map(function(s){var o=s[0],l=s[1],u=s[2],c=a[o+1],f=i[l+1];return{vertical:Math.abs(l),horizontal:Math.abs(o),direction:u,pos:[c,f]}})}function Gu(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var a=r.pos;e[0]=Math.min(e[0],a[0]),e[1]=Math.max(e[1],a[0]),n[0]=Math.min(n[0],a[1]),n[1]=Math.max(n[1],a[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function Fu(t,e,n,r,a){var i,s,o,l,u,c,f;if(t){var d=a;if(!d){var v=getComputedStyle(t),p=v.clipPath;d=p!=="none"?p:v.clip}if(!((!d||d==="none"||d==="auto")&&(d=r,!d))){var h=Ds(d),g=h.prefix,m=g===void 0?d:g,y=h.value,E=y===void 0?"":y,b=m==="circle",x=" ";if(m==="polygon"){var _=Ba(E||"0% 0%, 100% 0%, 100% 100%, 0% 100%");x=",";var S=_.map(function(nt){var st=nt.split(" "),ut=st[0],Rt=st[1];return{vertical:1,horizontal:1,pos:[_t(ut,e),_t(Rt,n)]}}),D=Oe(S.map(function(nt){return nt.pos}));return{type:m,clipText:d,poses:S,splitter:x,left:D.minX,right:D.maxX,top:D.minY,bottom:D.maxY}}else if(b||m==="ellipse"){var C="",M="",R=0,T=0,_=je(E);if(b){var P="";i=_[0],P=i===void 0?"50%":i,s=_[2],C=s===void 0?"50%":s,o=_[3],M=o===void 0?"50%":o,R=_t(P,Math.sqrt((e*e+n*n)/2)),T=R}else{var k="",A="";l=_[0],k=l===void 0?"50%":l,u=_[1],A=u===void 0?"50%":u,c=_[3],C=c===void 0?"50%":c,f=_[4],M=f===void 0?"50%":f,R=_t(k,e),T=_t(A,n)}var N=[_t(C,e),_t(M,n)],S=Q([{vertical:1,horizontal:1,pos:N,direction:"nesw"}],sg.slice(0,b?1:2).map(function(ut){return{vertical:Math.abs(ut[1]),horizontal:ut[0],direction:ut[2],sub:!0,pos:[N[0]+ut[0]*R,N[1]+ut[1]*T]}}),!0);return{type:m,clipText:d,radiusX:R,radiusY:T,left:N[0]-R,top:N[1]-T,right:N[0]+R,bottom:N[1]+T,poses:S,splitter:x}}else if(m==="inset"){var _=je(E||"0 0 0 0"),G=_.indexOf("round"),B=(G>-1?_.slice(0,G):_).length,F=_.slice(B+1),I=_.slice(0,B),L=I[0],K=I[1],W=K===void 0?L:K,Y=I[2],H=Y===void 0?L:Y,j=I[3],U=j===void 0?W:j,J=[L,H].map(function(ut){return _t(ut,n)}),et=J[0],$=J[1],X=[U,W].map(function(ut){return _t(ut,e)}),it=X[0],rt=X[1],Et=e-rt,ot=n-$,ct=Lu(F,Et-it,ot-et,it,et),S=Q(Q([],ra(et,Et,ot,it),!0),ct,!0);return{type:"inset",clipText:d,poses:S,top:et,left:it,right:Et,bottom:ot,radius:F,splitter:x}}else if(m==="rect"){var _=Ba(E||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));x=",";var pt=_.map(function(bt){var Bt=Sn(bt).value;return Bt}),et=pt[0],rt=pt[1],$=pt[2],it=pt[3],S=ra(et,rt,$,it);return{type:"rect",clipText:d,poses:S,top:et,right:rt,bottom:$,left:it,values:_,splitter:x}}}}}function ug(t,e,n,r,a){var i=t[e],s=i.direction,o=i.sub,l=t.map(function(){return[0,0]}),u=s?s.split(""):[];if(r&&e<8){var c=u.filter(function(P){return P==="w"||P==="e"}),f=u.filter(function(P){return P==="n"||P==="s"}),d=c[0],v=f[0];l[e]=n;var p=Gu(t),h=p[0],g=p[1],m=h&&g?h/g:0;if(m&&a){var y=(e+4)%8,E=t[y].pos,b=[0,0];s.indexOf("w")>-1?b[0]=-1:s.indexOf("e")>-1&&(b[0]=1),s.indexOf("n")>-1?b[1]=-1:s.indexOf("s")>-1&&(b[1]=1);var x=Jl([h,g],n,m,b,!0),_=h+x[0],S=g+x[1],D=E[1],C=E[1],M=E[0],R=E[0];b[0]===-1?M=R-_:b[0]===1?R=M+_:(M=M-_/2,R=R+_/2),b[1]===-1?D=C-S:(b[1]===1||(D=C-S/2),C=D+S);var T=ra(D,R,C,M);t.forEach(function(P,k){l[k][0]=T[k].pos[0]-P.pos[0],l[k][1]=T[k].pos[1]-P.pos[1]})}else t.forEach(function(P,k){var A=P.direction;A&&(A.indexOf(d)>-1&&(l[k][0]=n[0]),A.indexOf(v)>-1&&(l[k][1]=n[1]))}),d&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),v&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!o?u.forEach(function(P){var k=P==="n"||P==="s";t.forEach(function(A,N){var G=A.direction,B=A.horizontal,F=A.vertical;!G||G.indexOf(P)===-1||(l[N]=[k||!B?0:n[0],!k||!F?0:n[1]])})}):l[e]=n;return l}function cg(t,e){var n=Ml(t,e),r=n[0],a=n[1],i=e.datas,s=i.clipPath,o=i.clipIndex,l=s,u=l.type,c=l.poses,f=l.splitter,d=c.map(function(y){return y.pos});if(u==="polygon")d.splice(o,0,[r,a]);else if(u==="inset"){var v=rg.indexOf(o),p=ng.indexOf(o),h=c.length;if(ig(c,d,8,v,p,r,a,d[4][0],d[4][1],d[0][0],d[0][1]),h===c.length)return}else return;var g=Ui(t,s,d),m="".concat(u,"(").concat(g.join(f),")");V(t,"onClip",at(t,e,O({clipEventType:"added",clipType:u,poses:d,clipStyles:g,clipStyle:m,distX:0,distY:0},jt({clipPath:m},e))))}function fg(t,e){var n=e.datas,r=n.clipPath,a=n.clipIndex,i=r,s=i.type,o=i.poses,l=i.splitter,u=o.map(function(v){return v.pos}),c=u.length;if(s==="polygon")o.splice(a,1),u.splice(a,1);else if(s==="inset"){if(a<8||(ag(o,u,a,8,c),c===o.length))return}else return;var f=Ui(t,r,u),d="".concat(s,"(").concat(f.join(l),")");V(t,"onClip",at(t,e,O({clipEventType:"removed",clipType:s,poses:u,clipStyles:f,clipStyle:d,distX:0,distY:0},jt({clipPath:d},e))))}var dg={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[`.control.clip-control {
    background: #6d6;
    cursor: pointer;
}
.control.clip-control.clip-radius {
    background: #d66;
}
.line.clip-line {
    background: #6e6;
    cursor: move;
    z-index: 1;
}
.clip-area {
    position: absolute;
    top: 0;
    left: 0;
}
.clip-ellipse {
    position: absolute;
    cursor: move;
    border: 1px solid #6d6;
    border: var(--zoompx) solid #6d6;
    border-radius: 50%;
    transform-origin: 0px 0px;
}`,`:host {
    --bounds-color: #d66;
}`,`.guideline {
    pointer-events: none;
    z-index: 2;
}`,`.line.guideline.bounds {
    background: #d66;
    background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,a=n.defaultClipPath,i=n.clipArea,s=n.zoom,o=n.groupable,l=t.getState(),u=l.target,c=l.width,f=l.height,d=l.allMatrix,v=l.is3d,p=l.left,h=l.top,g=l.pos1,m=l.pos2,y=l.pos3,E=l.pos4,b=l.clipPathState,x=l.snapBoundInfos,_=l.rotation;if(!u||o)return[];var S=Fu(u,c,f,a||"inset",b||r);if(!S)return[];var D=v?4:3,C=S.type,M=S.poses,R=M.map(function(ot){var ct=kt(d,ot.pos,D);return[ct[0]-p,ct[1]-h]}),T=[],P=[],k=C==="rect",A=C==="inset",N=C==="polygon";if(k||A||N){var G=A?R.slice(0,8):R;P=G.map(function(ot,ct){var pt=ct===0?G[G.length-1]:G[ct-1],nt=Ct(pt,ot),st=Kl(pt,ot);return e.createElement("div",{key:"clipLine".concat(ct),className:q("line","clip-line","snap-control"),"data-clip-index":ct,style:{width:"".concat(st,"px"),transform:"translate(".concat(pt[0],"px, ").concat(pt[1],"px) rotate(").concat(nt,"rad) scaleY(").concat(s,")")}})})}if(T=R.map(function(ot,ct){return e.createElement("div",{key:"clipControl".concat(ct),className:q("control","clip-control","snap-control"),"data-clip-index":ct,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(_,"rad) scale(").concat(s,")")}})}),A&&T.push.apply(T,R.slice(8).map(function(ot,ct){return e.createElement("div",{key:"clipRadiusControl".concat(ct),className:q("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+ct,style:{transform:"translate(".concat(ot[0],"px, ").concat(ot[1],"px) rotate(").concat(_,"rad) scale(").concat(s,")")}})})),C==="circle"||C==="ellipse"){var B=S.left,F=S.top,I=S.radiusX,L=S.radiusY,K=Z(kt(d,[B,F],D),kt(d,[0,0],D)),W=K[0],Y=K[1],H="none";if(!i){for(var j=Math.max(10,I/5,L/5),U=[],J=0;J<=j;++J){var et=Math.PI*2/j*J;U.push([I+(I-s)*Math.cos(et),L+(L-s)*Math.sin(et)])}U.push([I,-2]),U.push([-2,-2]),U.push([-2,L*2+2]),U.push([I*2+2,L*2+2]),U.push([I*2+2,-2]),U.push([I,-2]),H="polygon(".concat(U.map(function(ot){return"".concat(ot[0],"px ").concat(ot[1],"px")}).join(", "),")")}T.push(e.createElement("div",{key:"clipEllipse",className:q("clip-ellipse","snap-control"),style:{width:"".concat(I*2,"px"),height:"".concat(L*2,"px"),clipPath:H,transform:"translate(".concat(-p+W,"px, ").concat(-h+Y,"px) ").concat(Kn(d))}}))}if(i){var $=te(Q([g,m,y,E],R,!0)),X=$.width,it=$.height,rt=$.left,Et=$.top;if(N||k||A){var U=A?R.slice(0,8):R;T.push(e.createElement("div",{key:"clipArea",className:q("clip-area","snap-control"),style:{width:"".concat(X,"px"),height:"".concat(it,"px"),transform:"translate(".concat(rt,"px, ").concat(Et,"px)"),clipPath:"polygon(".concat(U.map(function(ct){return"".concat(ct[0]-rt,"px ").concat(ct[1]-Et,"px")}).join(", "),")")}}))}}return x&&["vertical","horizontal"].forEach(function(ot){var ct=x[ot],pt=ot==="horizontal";ct.isSnap&&P.push.apply(P,ct.snap.posInfos.map(function(nt,st){var ut=nt.pos,Rt=Z(kt(d,pt?[0,ut]:[ut,0],D),[p,h]),ht=Z(kt(d,pt?[c,ut]:[ut,f],D),[p,h]);return en(e,"",Rt,ht,s,"clip".concat(ot,"snap").concat(st),"guideline")})),ct.isBound&&P.push.apply(P,ct.bounds.map(function(nt,st){var ut=nt.pos,Rt=Z(kt(d,pt?[0,ut]:[ut,0],D),[p,h]),ht=Z(kt(d,pt?[c,ut]:[ut,f],D),[p,h]);return en(e,"",Rt,ht,s,"clip".concat(ot,"bounds").concat(st),"guideline","bounds","bold")}))}),Q(Q([],T,!0),P,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,a=r===void 0?!0:r;return a?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,O(O({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,a=r.defaultClipPath,i=r.customClipPath,s=n.target,o=n.width,l=n.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",f=e.datas,d=Fu(s,o,l,a||"inset",i);if(!d)return!1;var v=d.clipText,p=d.type,h=d.poses,g=V(t,"onClipStart",at(t,e,{clipType:p,clipStyle:v,poses:h.map(function(m){return m.pos})}));return g===!1?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,f.clipPath=d,f.isClipStart=!0,n.clipPathState=v,Je(t,e),!0)},dragControl:function(t,e){var n,r,a=e.datas,i=e.originalDatas,s=e.isDragTarget;if(!a.isClipStart)return!1;var o=a,l=o.isControl,u=o.isLine,c=o.isArea,f=o.clipIndex,d=o.clipPath;if(!d)return!1;var v=Qe(t.props,"clippable"),p=v.keepRatio,h=0,g=0,m=i.draggable,y=ce(e);s&&m?(n=m.prevBeforeDist,h=n[0],g=n[1]):(h=y[0],g=y[1]);var E=[h,g],b=t.state,x=b.width,_=b.height,S=!c&&!l&&!u,D=d.type,C=d.poses,M=d.splitter,R=C.map(function(yt){return yt.pos});S&&(h=-h,g=-g);var T=!l||C[f].direction==="nesw",P=D==="inset"||D==="rect",k=C.map(function(){return[0,0]});if(l&&!T){var A=C[f],N=A.horizontal,G=A.vertical,B=[h*Math.abs(N),g*Math.abs(G)];k=ug(C,f,B,P,p)}else T&&(k=R.map(function(){return[h,g]}));var F=R.map(function(yt,Gt){return ft(yt,k[Gt])}),I=Q([],F,!0);b.snapBoundInfos=null;var L=d.type==="circle",K=d.type==="ellipse";if(L||K){var W=te(F),Y=Math.abs(W.bottom-W.top),H=Math.abs(K?W.right-W.left:Y),j=F[0][1]+Y,U=F[0][0]-H,J=F[0][0]+H;L&&(I.push([J,W.bottom]),k.push([1,0])),I.push([W.left,j]),k.push([0,1]),I.push([U,W.bottom]),k.push([1,0])}var et=mu((v.clipHorizontalGuidelines||[]).map(function(yt){return _t("".concat(yt),_)}),(v.clipVerticalGuidelines||[]).map(function(yt){return _t("".concat(yt),x)}),x,_),$=[],X=[];if(L||K)$=[I[4][0],I[2][0]],X=[I[1][1],I[3][1]];else if(P){var it=[I[0],I[2],I[4],I[6]],rt=[k[0],k[2],k[4],k[6]];$=it.filter(function(yt,Gt){return rt[Gt][0]}).map(function(yt){return yt[0]}),X=it.filter(function(yt,Gt){return rt[Gt][1]}).map(function(yt){return yt[1]})}else $=I.filter(function(yt,Gt){return k[Gt][0]}).map(function(yt){return yt[0]}),X=I.filter(function(yt,Gt){return k[Gt][1]}).map(function(yt){return yt[1]});var Et=[0,0],ot=pu(et,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:_},$,X,5),ct=ot.horizontal,pt=ot.vertical,nt=ct.offset,st=pt.offset;if(ct.isBound&&(Et[1]+=nt),pt.isBound&&(Et[0]+=st),(K||L)&&k[0][0]===0&&k[0][1]===0){var W=te(F),ut=W.bottom-W.top,Rt=K?W.right-W.left:ut,ht=pt.isBound?Math.abs(st):pt.snapIndex===0?-st:st,gt=ct.isBound?Math.abs(nt):ct.snapIndex===0?-nt:nt;Rt-=ht,ut-=gt,L&&(ut=au(pt,ct)>0?ut:Rt,Rt=ut);var bt=I[0];I[1][1]=bt[1]-ut,I[2][0]=bt[0]+Rt,I[3][1]=bt[1]+ut,I[4][0]=bt[0]-Rt}else if(P&&p&&l){var Bt=Gu(C),Lt=Bt[0],Zt=Bt[1],ve=Lt&&Zt?Lt/Zt:0,_e=C[f],ee=_e.direction||"",xe=I[1][1],j=I[5][1],U=I[7][0],J=I[3][0];nt<=st?nt=st/ve:st=nt*ve,ee.indexOf("w")>-1?U-=st:ee.indexOf("e")>-1?J-=st:(U+=st/2,J-=st/2),ee.indexOf("n")>-1?xe-=nt:ee.indexOf("s")>-1?j-=nt:(xe+=nt/2,j-=nt/2);var dt=ra(xe,J,j,U);I.forEach(function(Mr,Xy){var Lo;Lo=dt[Xy].pos,Mr[0]=Lo[0],Mr[1]=Lo[1]})}else I.forEach(function(yt,Gt){var pn=k[Gt];pn[0]&&(yt[0]-=st),pn[1]&&(yt[1]-=nt)});var St=Ui(t,d,F),zt="".concat(D,"(").concat(St.join(M),")");if(b.clipPathState=zt,L||K)$=[I[4][0],I[2][0]],X=[I[1][1],I[3][1]];else if(P){var it=[I[0],I[2],I[4],I[6]];$=it.map(function(Gt){return Gt[0]}),X=it.map(function(Gt){return Gt[1]})}else $=I.map(function(yt){return yt[0]}),X=I.map(function(yt){return yt[1]});if(b.snapBoundInfos=pu(et,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:_},$,X,1),m){var Fe=b.is3d,Ce=b.allMatrix,Bo=Fe?4:3,we=Et;s&&(we=[E[0]+Et[0]-y[0],E[1]+Et[1]-y[1]]),m.deltaOffset=mt(Ce,[we[0],we[1],0,0],Bo)}return V(t,"onClip",at(t,e,O({clipEventType:"changed",clipType:D,poses:F,clipStyle:zt,clipStyles:St,distX:h,distY:g},jt((r={},r[D==="rect"?"clip":"clipPath"]=zt,r),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,a=e.isDouble,i=r.isLine,s=r.isClipStart,o=r.isControl;return s?(V(t,"onClipEnd",Jt(t,e,{})),a&&(o?fg(t,e):i&&cg(t,e)),a||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},vg={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[`:host[data-able-origindraggable] .control.origin {
    pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Ot(e.inputEvent.target,q("origin"))},dragControlStart:function(t,e){var n=e.datas;Je(t,e);var r=at(t,e,{dragStart:Vt.dragStart(t,new gr().dragStart([0,0],e))}),a=V(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,a===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,a=e.isRequest;if(!n.isDragOrigin)return!1;var i=ce(e),s=i[0],o=i[1],l=t.state,u=l.width,c=l.height,f=l.offsetMatrix,d=l.targetMatrix,v=l.is3d,p=t.props.originRelative,h=p===void 0?!0:p,g=v?4:3,m=[s,o];if(a){var y=e.distOrigin;(y[0]||y[1])&&(m=y)}var E=ft(n.startOrigin,m),b=ft(n.startTargetOrigin,m),x=Z(m,n.prevOrigin),_=Zr(f,d,E,g),S=t.getRect(),D=te(ke(_,u,c,g)),C=[S.left-D.left,S.top-D.top];n.prevOrigin=m;var M=[ae(b[0],u,h),ae(b[1],c,h)].join(" "),R=Vt.drag(t,Ur(e,t.state,C,!!r,!1)),T=at(t,e,O(O({width:u,height:c,origin:E,dist:m,delta:x,transformOrigin:M,drag:R},jt({transformOrigin:M,transform:R.transform},e)),{afterTransform:R.transform}));return V(t,"onDragOrigin",T),T},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(V(t,"onDragOriginEnd",Jt(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,a=0,i=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(o){return"deltaOrigin"in o?(s[0]+=o.deltaOrigin[0],s[1]+=o.deltaOrigin[1]):"origin"in o?(s[0]=o.origin[0]-i[0],s[1]=o.origin[1]-i[1]):("x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?a=o.y-n.top:"deltaY"in o&&(a+=o.deltaY)),{datas:e,distX:r,distY:a,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function pg(t,e,n,r){var a=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,i=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,s=-1;if(e===0&&(a===0?s=0:a===1&&(s=1)),e===2&&(a<=2?s=2:a<=3&&(s=3)),e===3&&(i===0?s=4:i<4&&(s=7)),e===1&&(i<=1?s=5:i<=2&&(s=6)),!(s===-1||!t[s].virtual)){var o=t[s];hg(t,s),s<4?o.pos[0]=n:o.pos[1]=r}}function hg(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function gg(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function zu(t,e,n,r,a){r===void 0&&(r=[0,0]);var i=[];return!t||t==="0px"?i=[]:i=je(t),Lu(i,e,n,0,0,r,a)}function Ku(t,e,n,r,a){var i=t.state,s=i.width,o=i.height,l=Xi(a,t.props.roundRelative,s,o),u=l.raws,c=l.styles,f=l.radiusPoses,d=og(f,u),v=d.horizontals,p=d.verticals,h=c.join(" ");i.borderRadiusState=h;var g=at(t,e,O({horizontals:v,verticals:p,borderRadius:h,width:s,height:o,delta:r,dist:n},jt({borderRadius:h},e)));return V(t,"onRound",g),g}function Hu(t){var e=t.getState().style,n=e.borderRadius||"";if(!n&&t.props.groupable){var r=t.getTargets()[0];r&&(n=getComputedStyle(r).borderRadius,e.borderRadius=n)}return n}var mg={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd",onRoundGroupStart:"roundGroupStart",onRoundGroup:"roundGroup",onRoundGroupEnd:"roundGroupEnd"},css:[`.control.border-radius {
    background: #d66;
    cursor: pointer;
    z-index: 3;
}`,`.control.border-radius.vertical {
    background: #d6d;
    z-index: 2;
}`,`.control.border-radius.virtual {
    opacity: 0.5;
    z-index: 1;
}`,`:host.round-line-clickable .line.direction {
    cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?q("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,a=n.width,i=n.height,s=n.allMatrix,o=n.is3d,l=n.left,u=n.top,c=n.borderRadiusState,f=t.props,d=f.minRoundControls,v=d===void 0?[0,0]:d,p=f.maxRoundControls,h=p===void 0?[4,4]:p,g=f.zoom,m=f.roundPadding,y=m===void 0?0:m,E=f.isDisplayShadowRoundControls,b=f.groupable;if(!r)return null;var x=c||Hu(t),_=o?4:3,S=zu(x,a,i,v,!0);if(!S)return null;var D=0,C=0,M=b?[0,0]:[l,u];return S.map(function(R,T){var P=R.horizontal,k=R.vertical,A=R.direction||"",N=Q([],R.pos,!0);C+=Math.abs(P),D+=Math.abs(k),P&&A.indexOf("n")>-1&&(N[1]-=y),k&&A.indexOf("w")>-1&&(N[0]-=y),P&&A.indexOf("s")>-1&&(N[1]+=y),k&&A.indexOf("e")>-1&&(N[0]+=y);var G=Z(kt(s,N,_),M),B=R.vertical?D<=h[1]&&(E||!R.virtual):C<=h[0]&&(E||!R.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(T),className:q("control","border-radius",R.vertical?"vertical":"",R.virtual?"virtual":""),"data-radius-index":T,style:{display:B?"block":"none",transform:"translate(".concat(G[0],"px, ").concat(G[1],"px) scale(").concat(g,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,a=n.target,i=a.getAttribute("class")||"",s=i.indexOf("border-radius")>-1,o=i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1,l=s?parseInt(a.getAttribute("data-radius-index"),10):-1,u=-1;if(o){var c=a.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!s&&!o)return!1;var f=at(t,e,{}),d=V(t,"onRoundStart",f);if(d===!1)return!1;r.lineIndex=u,r.controlIndex=l,r.isControl=s,r.isLine=o,Je(t,e);var v=t.props,p=v.roundRelative,h=v.minRoundControls,g=h===void 0?[0,0]:h,m=t.state,y=m.width,E=m.height;r.isRound=!0,r.prevDist=[0,0];var b=Hu(t),x=zu(b||"",y,E,g,!0)||[];return r.controlPoses=x,m.borderRadiusState=Xi(x,p,y,E).styles.join(" "),f},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var a=n.controlIndex,i=ce(e),s=i[0],o=i[1],l=[s,o],u=Z(l,n.prevDist),c=t.props.maxRoundControls,f=c===void 0?[4,4]:c,d=t.state,v=d.width,p=d.height,h=r[a],g=h.vertical,m=h.horizontal,y=r.map(function(b){var x=b.horizontal,_=b.vertical,S=[x*m*l[0],_*g*l[1]];if(x){if(f[0]===1)return S;if(f[0]<4&&x!==m)return S}else{if(f[1]===0)return S[1]=_*m*l[0]/v*p,S;if(g){if(f[1]===1)return S;if(f[1]<4&&_!==g)return S}}return[0,0]});y[a]=l;var E=r.map(function(b,x){return O(O({},b),{pos:ft(b.pos,y[x])})});return a<4?E.slice(0,a+1).forEach(function(b){b.virtual=!1}):E.slice(4,a+1).forEach(function(b){b.virtual=!1}),n.prevDist=[s,o],Ku(t,e,l,u,E)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,a=e.isDouble;if(!r.isRound)return!1;var i=r.isControl,s=r.controlIndex,o=r.isLine,l=r.lineIndex,u=r.controlPoses,c=u.filter(function(m){var y=m.virtual;return y}).length,f=t.props.roundClickable,d=f===void 0?!0:f;if(a&&d){if(i&&(d===!0||d==="control"))gg(u,s);else if(o&&(d===!0||d==="line")){var v=Ml(t,e),p=v[0],h=v[1];pg(u,l,p,h)}c!==u.filter(function(m){var y=m.virtual;return y}).length&&Ku(t,e,[0,0],[0,0],u)}var g=Jt(t,e,{});return V(t,"onRoundEnd",g),n.borderRadiusState="",g},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=ie(t,"roundable",e),s=O({targets:t.props.targets,events:i.map(function(o,l){return O(O({},o),{target:a[l],moveable:r[l],currentTarget:r[l]})})},n);return V(t,"onRoundGroupStart",s),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,a=t.props.targets,i=ie(t,"roundable",e),s=O({targets:t.props.targets,events:i.map(function(o,l){return O(O(O({},o),{target:a[l],moveable:r[l],currentTarget:r[l]}),jt({borderRadius:n.borderRadius},o))})},n);return V(t,"onRoundGroup",s),s},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,a=ie(t,"roundable",e);Wn(t,"onRound",function(o){var l=O({targets:t.props.targets,events:a.map(function(u,c){return O(O(O({},u),{target:r[c],moveable:n[c],currentTarget:n[c]}),jt({borderRadius:o.borderRadius},u))})},o);V(t,"onRoundGroup",l)});var i=this.dragControlEnd(t,e);if(!i)return!1;var s=O({targets:t.props.targets,events:a.map(function(o,l){var u;return O(O({},o),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(u=o.datas)===null||u===void 0?void 0:u.lastEvent})})},i);return V(t,"onRoundGroupEnd",s),s},unset:function(t){t.state.borderRadiusState=""}};function yg(t,e){var n=e?4:3,r=xt(n),a="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===a||t==="matrix(1,0,0,1,0,0)"}var Wu={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,a=n.target,i=n.targetMatrix,s=a?.style.transform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(Bs(i,!0),")"),l=!s||s==="none"?o:s;e.datas.startTransforms=yg(l,r)?[]:je(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return at(t,e,{setTransform:function(n){e.datas.startTransforms=Pt(n)?n:je(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return at(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),V(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),V(t,"onBeforeRender",at(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){V(t,"onBeforeRenderEnd",at(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=ie(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.setTransform(l,s),n.resetStyle(s),n.fillDragStartParams(l,s)});V(t,"onBeforeRenderGroupStart",at(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:i}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=ie(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.resetStyle(s),n.fillDragParams(l,s)});V(t,"onBeforeRenderGroup",at(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:i}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),V(t,"onBeforeRenderGroupEnd",at(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Yu={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){V(t,"onRenderStart",at(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){V(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){V(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){V(t,"onRenderGroupStart",at(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ie(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragParams(l,s)});V(t,"onRenderGroup",at(t,e,O(O({isPinch:!!e.isPinch,targets:t.props.targets,transform:Ln(e)},jt(Gn(e))),{events:i})))},dragGroupEnd:function(t,e){var n=this,r=ie(t,"beforeRenderable",e),a=t.moveables,i=r.map(function(s,o){var l=a[o];return n.fillDragEndParams(l,s)});V(t,"onRenderGroupEnd",at(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:i,transform:Ln(e)},jt(Gn(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return at(t,e,O({isPinch:!!e.isPinch,transform:Ln(e)},jt(Gn(e))))},fillDragEndParams:function(t,e){return at(t,e,O({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:Ln(e)},jt(Gn(e))))}};function rn(t,e,n,r,a,i,s){var o=a==="Start",l=t.state.target,u=i.isRequest;if(!l||o&&r.indexOf("Control")>-1&&!u&&t.areaElement===i.inputEvent.target)return!1;var c="".concat(n).concat(r).concat(a),f="".concat(n).concat(r,"Condition"),d=a==="End",v=a==="After",p=o&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(a,!0,!1),i.clientDistX=i.distX,i.clientDistY=i.distY,a===""&&!u&&Zl(t.state,i);var h=Q([],t[e],!0);if(u){var g=i.requestAble;h.some(function(T){return T.name===g})||h.push.apply(h,t.props.ables.filter(function(T){return T.name===g}))}if(!h.length||h.every(function(T){return T.dragRelation}))return!1;var m=Q(Q([Wu],h,!0),[Yu],!1).filter(function(T){return T[c]}),y=i.datas;p&&m.forEach(function(T){T.unset&&T.unset(t)});var E=i.inputEvent,b;d&&E&&(b=document.elementFromPoint(i.clientX,i.clientY)||E.target);var x=0,_=!1,S=function(){var T;_=!0,(T=i.stop)===null||T===void 0||T.call(i)},D=m.filter(function(T){var P=T.name,k=y[P]||(y[P]={});if(o&&(k.isEventStart=!T[f]||T[f](t,i)),k.isEventStart){var A=T[c](t,O(O({},i),{stop:S,resultCount:x,datas:k,originalDatas:y,inputTarget:b}));return t._emitter.off(),o&&A===!1&&(k.isEventStart=!1),x+=A||k.isEventStart?1:0,A}return!1}),C=D.length,M=!1;if(_&&(M=!0),!M&&o&&m.length&&!C&&(M=m.filter(function(T){var P=T.name,k=y[P];return k.isEventStart?T.dragRelation!=="strong":!1}).length),(d||M)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(T){T.state.gestos={}}),m.forEach(function(T){T.unset&&T.unset(t)})),o&&!M&&!u&&C&&i?.preventDefault(),t.isUnmounted||M)return!1;if(!o&&C&&!s||d){var R=t.props.flushSync||Ll;R(function(){t.updateRect(d?a:"",!0,!1),t.forceUpdate()})}return!o&&!d&&!v&&C&&!s&&rn(t,e,n,r,a+"After",i),!0}function Zi(t){return function(e){var n=t.props.dragTarget,r=e.inputEvent.target,a=t.areaElement;return n&&(r===n||n.contains(r))||r===a||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||Ot(r,"moveable-area")||Ot(r,"moveable-padding")||Ot(r,"moveable-edgeDraggable")}}function ju(t,e,n){var r=t.controlBox.getElement(),a=[],i=t.props.dragTarget;return a.push(r),(!t.props.dragArea||i)&&a.push(e),qi(t,a,"targetAbles",n,{dragStart:Zi(t),pinchStart:Zi(t)})}function qi(t,e,n,r,a){a===void 0&&(a={});var i=n==="targetAbles",s=t.props,o=s.pinchOutside,l=s.pinchThreshold,u=s.preventClickEventOnDrag,c=s.preventClickDefault,f=s.checkInput,d={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:o,preventClickEventOnDrag:i?u:!1,preventClickEventOnDragStart:i?c:!1,preventClickEventByCondition:i?null:function(h){return t.controlBox.getElement().contains(h.target)},checkInput:i?f:!1},v=new bl(e,d),p=r==="Control";return["drag","pinch"].forEach(function(h){["Start","","End"].forEach(function(g){v.on("".concat(h).concat(g),function(m){var y,E=m.eventType;if(a[E]&&!a[E](m)){m.stop();return}var b=rn(t,n,h,r,g,m);b?(t.props.stopPropagation||g==="Start"&&p)&&((y=m?.inputEvent)===null||y===void 0||y.stopPropagation()):m.stop()})})}),v}var bg=function(){function t(n,r,a){var i=this;this.target=n,this.moveable=r,this.eventName=a,this.ables=[],this._onEvent=function(s){var o=i.eventName,l=i.moveable;l.state.disableNativeEvent||i.ables.forEach(function(u){u[o](l,{inputEvent:s})})},n.addEventListener(a.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(n){this.ables=n},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Eg(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function Vu(t,e,n){for(var r=t,a=[],i=document.documentElement||document.body,s=!n&&t===e||t===i,o=s,l=!1,u=3,c,f,d,v=!1,p=qr(e,e,!0).offsetParent,h=1;r&&!o;){o=s;var g=getComputedStyle(r),m=g.position,y=Gl(r,g),E=Wd(Bp(y)),b=m==="fixed",x={hasTransform:!1,fixedContainer:null};b&&(v=!0,x=zp(r),p=x.fixedContainer);var _=E.length;!l&&_===16&&(l=!0,u=4,_i(a),d&&(d=ue(d,3,4))),l&&_===9&&(E=ue(E,3,4));var S=Fp(r,t,g),D=S.tagName,C=S.hasOffset,M=S.isSVG,R=S.origin,T=S.targetOrigin,P=S.offset,k=P[0],A=P[1];D==="svg"&&d&&(a.push({type:"target",target:r,matrix:Kp(r,u)}),a.push({type:"offset",target:r,matrix:xt(u)}));var N=void 0,G=!1,B=!1,F=parseFloat(g.zoom)||1;if(b)N=x.fixedContainer,G=!0;else{var I=qr(r,e,!1,!0,g),L=I.offsetZoom;if(N=I.offsetParent,G=I.isEnd,B=I.isStatic,h*=L,L!==1&&B)k-=N.offsetLeft,A-=N.offsetTop;else if(mp){var K=I.parentSlotElement;if(K){for(var W=N,Y=0,H=0;W&&Eg(W);)Y+=W.offsetLeft,H+=W.offsetTop,W=W.offsetParent;k-=Y,A-=H}}}_l&&!yp&&C&&!M&&B&&(m==="relative"||m==="static")&&(k-=N.offsetLeft,A-=N.offsetTop,s=s||G);var j=0,U=0,J=0,et=0;if(b)C&&x.hasTransform&&(J=N.clientLeft,et=N.clientTop);else if(C&&p!==N&&(j=N.clientLeft,U=N.clientTop),C&&N===i){var $=Fl(r,!1,g);k+=$[0],A+=$[1]}if(a.push({type:"target",target:r,matrix:Fn(E,u,R)}),C){var X=r===t,it=X?0:r.scrollLeft,rt=X?0:r.scrollTop;a.push({type:"offset",target:r,matrix:Gr([k-it+j-J,A-rt+U-et],u)})}else a.push({type:"offset",target:r,origin:R});if(F!==1&&a.push({type:"zoom",target:r,matrix:Fn(Ha([F,F],u),u,[0,0])}),d||(d=E),c||(c=R),f||(f=T),o||b)break;r=N,s=G,(!n||r===i)&&(o=s)}return d||(d=xt(u)),c||(c=[0,0]),f||(f=[0,0]),{zoom:h,offsetContainer:p,matrixes:a,targetMatrix:d,transformOrigin:c,targetOrigin:f,is3d:l,hasFixed:v}}function Sg(t,e,n,r){var a;n===void 0&&(n=e);var i=Vu(t,e),s=i.matrixes,o=i.is3d,l=i.targetMatrix,u=i.transformOrigin,c=i.targetOrigin,f=i.offsetContainer,d=i.hasFixed,v=i.zoom,p=Vu(f,n,!0),h=p.matrixes,g=p.is3d,m=p.offsetContainer,y=p.zoom,E=r||g||o,b=E?4:3,x=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,_=l,S=xt(b),D=xt(b),C=xt(b),M=xt(b),R=s.length;h.reverse(),s.reverse(),!o&&E&&(_=ue(_,3,4),_i(s)),!g&&E&&_i(h),h.forEach(function(B){D=mt(D,B.matrix,b)});var T=n||document.body,P=((a=h[0])===null||a===void 0?void 0:a.target)||qr(T,T,!0).offsetParent,k=h.slice(1).reduce(function(B,F){return mt(B,F.matrix,b)},xt(b));s.forEach(function(B,F){if(R-2===F&&(C=S.slice()),R-1===F&&(M=S.slice()),!B.matrix){var I=s[F+1],L=Wp(B,I,P,b,mt(k,S,b));B.matrix=Gr(L,b)}S=mt(S,B.matrix,b)});var A=!x&&o;_||(_=xt(A?4:3));var N=Kn(x&&_.length===16?ue(_,4,3):_,A),G=D;return D=Is(D,b,b),{hasZoom:v!==1||y!==1,hasFixed:d,rootMatrix:D,originalRootMatrix:G,beforeMatrix:C,offsetMatrix:M,allMatrix:S,targetMatrix:_,targetTransform:N,transformOrigin:u,targetOrigin:c,is3d:E,offsetContainer:f,offsetRootContainer:m}}function $u(t,e,n,r){n===void 0&&(n=e);var a=0,i=0,s=0,o={},l=Hl(t);if(t&&(a=l.offsetWidth,i=l.offsetHeight),t){var u=Sg(t,e,n,r),c=yr(u.allMatrix,u.transformOrigin,a,i);o=O(O({},u),c);var f=yr(u.allMatrix,[50,50],100,100);s=Wl([f.pos1,f.pos2],f.direction)}var d=r?4:3;return O(O(O({hasZoom:!1,width:a,height:i,rotation:s},l),{originalRootMatrix:xt(d),rootMatrix:xt(d),beforeMatrix:xt(d),offsetMatrix:xt(d),allMatrix:xt(d),targetMatrix:xt(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),o)}function bE(t,e,n){return n===void 0&&(n=e),$u(t,e,n,!0)}function Ji(t,e,n,r,a,i){i===void 0&&(i=[]);var s=1,o=[0,0],l=Hn(),u=Hn(),c=Hn(),f=Hn(),d=[0,0],v={},p=$u(e,n,a,!0);if(e){var h=getComputedStyle(e);i.forEach(function(T){v[T]=h[T]});var g=p.is3d?4:3,m=yr(p.offsetMatrix,ft(p.transformOrigin,Ns(p.targetMatrix,g)),p.width,p.height);s=m.direction,o=ft(m.origin,[m.left-p.left,m.top-p.top]),f=Qr(p.offsetRootContainer);var y=qr(r,r,!0).offsetParent||p.offsetRootContainer;if(p.hasZoom){var E=yr(mt(p.originalRootMatrix,p.allMatrix),p.transformOrigin,p.width,p.height),b=yr(p.originalRootMatrix,zn(getComputedStyle(y)).map(function(T){return parseFloat(T)}),y.offsetWidth,y.offsetHeight);if(l=wi(E,f),c=wi(b,f,y,!0),t){var x=E.left,_=E.top;u=wi({left:x,top:_,bottom:_,right:_},f)}}else{l=Qr(e),c=Qr(y,!0),t&&(u=Qr(t));var S=c.left,D=c.top,C=c.clientLeft,M=c.clientTop,R=[l.left-S,l.top-D];d=Z(tr(p.rootMatrix,R,4),[C+p.left,M+p.top])}}return O({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:f,beforeDirection:s,beforeOrigin:o,originalBeforeOrigin:o,target:e,style:v,offsetDelta:d},p)}function Xu(t){var e=t.pos1,n=t.pos2,r=t.pos3,a=t.pos4;if(!e||!n||!r||!a)return null;var i=Oe([e,n,r,a]),s=[i.minX,i.minY],o=Z(t.origin,s);return e=Z(e,s),n=Z(n,s),r=Z(r,s),a=Z(a,s),O(O({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:n,pos3:r,pos4:a,origin:o,beforeOrigin:o,isPersisted:!0})}var _r=function(t){hr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state=O({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Ji(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new jr,r._prevTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._observer=null,r._observerId=0,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r.checkUpdateRect=function(){if(!r.isDragging()){var a=r.props.parentMoveable;if(a){a.checkUpdateRect();return}Od(r._observerId),r._observerId=Ts(function(){r.isDragging()||r.updateRect()})}},r._onPreventClick=function(a){a.stopPropagation(),a.preventDefault()},r}var n=e.prototype;return n.render=function(){var r=this.props,a=this.getState(),i=r.parentPosition,s=r.className,o=r.target,l=r.zoom,u=r.cspNonce,c=r.translateZ,f=r.cssStyled,d=r.portalContainer,v=r.groupable,p=r.linePadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=i||[0,0],g=h[0],m=h[1],y=a.left,E=a.top,b=a.target,x=a.direction,_=a.hasFixed,S=a.offsetDelta,D=r.targets,C=this.isDragging(),M={};this.getEnabledAbles().forEach(function(N){M["data-able-".concat(N.name.toLowerCase())]=!0});var R=this._getAbleClassName(),T=D&&D.length&&(b||v)||o||!this._hasFirstTarget&&this.state.isPersisted,P=this.controlBox||this.props.firstRenderState||this.props.persistData,k=[y-g,E-m];!v&&r.useAccuratePosition&&(k[0]+=S[0],k[1]+=S[1]);var A={position:_?"fixed":"absolute",display:T?"block":"none",visibility:P?"visible":"hidden",transform:"translate3d(".concat(k[0],"px, ").concat(k[1],"px, ").concat(c,")"),"--zoom":l,"--zoompx":"".concat(l,"px")};return p&&(A["--moveable-line-padding"]=p),Qt(f,O({cspNonce:u,ref:le(this,"controlBox"),className:"".concat(q("control-box",x===-1?"reverse":"",C?"dragging":"")," ").concat(R," ").concat(s)},M,{onClick:this._onPreventClick,portalContainer:d,style:A}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1,this.controlBox.getElement();var r=this.props,a=r.parentMoveable,i=r.container,s=r.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!a&&!s&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},n.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(r)},n.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off();var r=this._viewContainer;r&&this._changeAbleViewClassNames([]),br(this,"targetGesto"),br(this,"controlGesto");var a=this.events;for(var i in a){var s=a[i];s&&s.destroy()}},n.getTargets=function(){var r=this.props.target;return r?[r]:[]},n.getAble=function(r){var a=this.props.ables||[];return Ve(a,function(i){return i.name===r})},n.getContainer=function(){var r=this.props,a=r.parentMoveable,i=r.wrapperMoveable,s=r.container;return s||i&&i.getContainer()||a&&a.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(r){var a;return r&&(((a=r.getAttribute)===null||a===void 0?void 0:a.call(r,"class"))||"").indexOf(hi)>-1},n.dragStart=function(r){var a=this.targetGesto,i=this.controlGesto;return a&&Zi(this)({inputEvent:r})?a.isFlag()||a.triggerDragStart(r):i&&this.isMoveableElement(r.target)&&(i.isFlag()||i.triggerDragStart(r)),this},n.hitTest=function(r){var a=this.state,i=a.target,s=a.pos1,o=a.pos2,l=a.pos3,u=a.pos4,c=a.targetClientRect;if(!i)return 0;var f;if(r instanceof Element){var d=r.getBoundingClientRect();f={left:d.left,top:d.top,width:d.width,height:d.height}}else f=O({width:0,height:0},r);var v=f.left,p=f.top,h=f.width,g=f.height,m=qa([s,o,u,l],c),y=_v(m,[[v,p],[v+h,p],[v+h,p+g],[v,p+g]]),E=Yr(m);return!y||!E?0:Math.min(100,y/E*100)},n.isInside=function(r,a){var i=this.state,s=i.target,o=i.pos1,l=i.pos2,u=i.pos3,c=i.pos4,f=i.targetClientRect;return s?wn([r,a],qa([o,l,c,u],f)):!1},n.updateRect=function(r,a,i){i===void 0&&(i=!0);var s=this.props,o=s.parentMoveable,l=this.state,u=l.target||this.props.target,c=this.getContainer(),f=o?o._rootContainer:this._rootContainer,d=Ji(this.controlBox&&this.controlBox.getElement(),u,c,c,f||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var v=Xu(s.persistData);for(var p in v)d[p]=v[p]}this.updateState(d,o?!1:i)},n.isDragging=function(r){var a,i,s=this.targetGesto,o=this.controlGesto;if(s?.isFlag()){if(!r)return!0;var l=s.getEventData();return!!(!((a=l[r])===null||a===void 0)&&a.isEventStart)}if(o?.isFlag()){if(!r)return!0;var l=o.getEventData();return!!(!((i=l[r])===null||i===void 0)&&i.isEventStart)}return!1},n.updateTarget=function(r){this.updateRect(r,!0)},n.getRect=function(){var r=this.state,a=Xt(this.state),i=a[0],s=a[1],o=a[2],l=a[3],u=te(a),c=r.width,f=r.height,d=u.width,v=u.height,p=u.left,h=u.top,g=[r.left,r.top],m=ft(g,r.origin),y=ft(g,r.beforeOrigin),E=r.transformOrigin;return{width:d,height:v,left:p,top:h,pos1:i,pos2:s,pos3:o,pos4:l,offsetWidth:c,offsetHeight:f,beforeOrigin:y,origin:m,transformOrigin:E,rotation:this.getRotation()}},n.getManager=function(){return this},n.stopDrag=function(r){var a,i;(!r||r==="target")&&((a=this.targetGesto)===null||a===void 0||a.stop()),(!r||r==="control")&&((i=this.controlGesto)===null||i===void 0||i.stop())},n.getRotation=function(){var r=this.state,a=r.pos1,i=r.pos2,s=r.direction;return qp(a,i,s)},n.request=function(r,a,i){a===void 0&&(a={});var s=this.props,o=s.ables,l=s.groupable,u=o.filter(function(g){return g.name===r})[0];if(this.isDragging()||!u||!u.request)return{request:function(){return this},requestEnd:function(){return this}};var c=this,f=u.request(this),d=i||a.isInstant,v=f.isControl?"controlAbles":"targetAbles",p="".concat(l?"Group":"").concat(f.isControl?"Control":""),h={request:function(g){return rn(c,v,"drag",p,"",O(O({},f.request(g)),{requestAble:r,isRequest:!0}),d),this},requestEnd:function(){return rn(c,v,"drag",p,"End",O(O({},f.requestEnd()),{requestAble:r,isRequest:!0}),d),this}};return rn(c,v,"drag",p,"Start",O(O({},f.requestStart(a)),{requestAble:r,isRequest:!0}),d),d?h.request(a).requestEnd():h},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var r=this.getState(),a=this.props,i=r.originalBeforeOrigin,s=r.transformOrigin,o=r.allMatrix,l=r.is3d,u=r.pos1,c=r.pos2,f=r.pos3,d=r.pos4,v=r.left,p=r.top,h=r.isPersisted,g=a.padding||{},m=g.left,y=m===void 0?0:m,E=g.top,b=E===void 0?0:E,x=g.bottom,_=x===void 0?0:x,S=g.right,D=S===void 0?0:S,C=l?4:3,M=[];h?M=s:this.controlBox&&a.groupable?M=i:M=ft(i,[v,p]),r.renderPoses=[ft(u,jn(o,[-y,-b],s,M,C)),ft(c,jn(o,[D,-b],s,M,C)),ft(f,jn(o,[-y,_],s,M,C)),ft(d,jn(o,[D,_],s,M,C))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,a=r.target,i=r.container,s=r.parentMoveable,o=this.state,l=o.target,u=o.container;if(!(!l&&!a)){this.updateAbles();var c=!Mi(l,a),f=c||!Mi(u,i);if(f){var d=i||this.controlBox;d&&this.unsetAbles(),this.updateState({target:a,container:i}),!s&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=c}}},n.waitToChangeTarget=function(){return new Promise(function(){})},n.triggerEvent=function(r,a){this._emitter.trigger(r,a);var i=this.props[r];return i&&i(a)},n.useCSS=function(r,a){var i=this.props.customStyledMap,s=r+a;return i[s]||(i[s]=Sl(r,a)),i[s]},n.getState=function(){var r,a=this.props;(a.target||!((r=a.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=a.persistData,o=a.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var l=Xu(s);if(l)return this.updateState(l,!1),this.state}return this.state.isPersisted=!1,this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(a){a.unset&&a.unset(r)})},n.updateAbles=function(r,a){r===void 0&&(r=this.props.ables),a===void 0&&(a="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(r),l="drag".concat(a,"Start"),u="pinch".concat(a,"Start"),c="drag".concat(a,"ControlStart"),f=Yn(o,[l,u],s),d=Yn(o,[c],s);this.enabledAbles=o,this.targetAbles=f,this.controlAbles=d},n.updateState=function(r,a){if(a){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var s in r)i[s]=r[s]}},n.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var a=this.props;return r.filter(function(i){return i&&(i.always&&a[i.name]!==!1||a[i.name])})},n.renderAbles=function(){var r=this,a=this.props,i=a.triggerAblesSimultaneously,s={createElement:Qt};return this.renderState={},$p(Ul(Yn(this.getEnabledAbles(),["render"],i).map(function(o){var l=o.render;return l(r,s)||[]})).filter(function(o){return o}),function(o){var l=o.key;return l}).map(function(o){return o[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._getRequestStyles=function(){var r=this.getEnabledAbles().reduce(function(a,i){var s,o,l=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return Q(Q([],a,!0),l,!0)},[]);return r},n._updateObserver=function(r){var a,i=this.props,s=i.target;if(!window.ResizeObserver||!s||!i.useResizeObserver){(a=this._observer)===null||a===void 0||a.disconnect();return}if(!(r.target===s&&this._observer)){var o=new ResizeObserver(this.checkUpdateRect);o.observe(s,{box:"border-box"}),this._observer=o}},n._updateEvents=function(){var r=this.controlBox.getElement(),a=this.targetAbles.length,i=this.controlAbles.length,s=this.props,o=s.dragTarget||s.target,l=!a&&this.targetGesto||this._isTargetChanged(!0);l&&(br(this,"targetGesto"),this.updateState({gesto:null})),i||br(this,"controlGesto"),o&&a&&!this.targetGesto&&(this.targetGesto=ju(this,o,"")),!this.controlGesto&&i&&(this.controlGesto=qi(this,r,"controlAbles","Control"))},n._updateTargets=function(){var r=this.props;this._prevTarget=r.dragTarget||r.target,this._prevDragArea=r.dragArea},n._renderLines=function(){var r=this.props,a=r,i=a.zoom,s=a.hideDefaultLines,o=a.hideChildMoveableDefaultLines,l=a.parentMoveable;if(s||l&&o)return[];var u=this.getState().renderPoses,c={createElement:Qt};return[[0,1],[1,3],[3,2],[2,0]].map(function(f,d){var v=f[0],p=f[1];return en(c,"",u[v],u[p],i,"render-line-".concat(d))})},n._isTargetChanged=function(r){var a=this.props,i=a.dragTarget||a.target,s=this._prevTarget,o=this._prevDragArea,l=a.dragArea,u=!l&&s!==i,c=(r||l)&&o!==l;return u||c},n._updateNativeEvents=function(){var r=this,a=this.props,i=a.dragArea?this.areaElement:this.state.target,s=this.events,o=Re(s);if(this._isTargetChanged())for(var l in s){var u=s[l];u&&u.destroy(),s[l]=null}if(i){var c=this.enabledAbles;o.forEach(function(f){var d=Yn(c,[f]),v=d.length>0,p=s[f];if(!v){p&&(p.destroy(),s[f]=null);return}p||(p=new bg(i,r,f),s[f]=p),p.setAbles(d)})}},n._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=er(r,!0))},n._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=er(r,!0));var a=this._viewContainer;a&&this._changeAbleViewClassNames(Q(Q([],this._getAbleViewClassNames(),!0),[this.isDragging()?qh:""],!1))},n._changeAbleViewClassNames=function(r){var a=this._viewContainer,i=Xl(r.filter(Boolean),function(c){return c}).map(function(c){var f=c[0];return f}),s=this._viewClassNames,o=Tr(s,i),l=o.removed,u=o.added;l.forEach(function(c){As(a,s[c])}),u.forEach(function(c){Ps(a,i[c])}),this._viewClassNames=i},n._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(a){var i;return((i=a.viewClassName)===null||i===void 0?void 0:i.call(a,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},n._getAbleClassName=function(r){var a=this;r===void 0&&(r="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,l=s?.isFlag()?s.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(c){var f,d,v,p=c.name,h=((f=c.className)===null||f===void 0?void 0:f.call(c,a))||"";return(!((d=l[p])===null||d===void 0)&&d.isEventStart||!((v=u[p])===null||v===void 0)&&v.isEventStart)&&(h+=" ".concat(q("".concat(p).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,portalContainer:null,useResizeObserver:!1,linePadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Ll,firstRenderState:null,persistData:null,viewContainer:null,useAccuratePosition:!1},e}(Ma),Qi={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,groupableProps:Object,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n,r=t.props,a=r.targets||[];t.moveables=[];var i=t.getState(),s=i.left,o=i.top,l=i.isPersisted,u=[s,o],c=r.zoom||1,f=t.renderGroupRects,d=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];return l?a=d.map(function(){return null}):d=[],Q(Q([],a.map(function(v,p){return e.createElement(_r,{key:"moveable"+p,ref:Fo(t,"moveables",p),target:v,origin:!1,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:u,persistData:d[p],zoom:c})}),!0),Ul(f.map(function(v,p){var h=v.pos1,g=v.pos2,m=v.pos3,y=v.pos4,E=[h,g,m,y];return[[0,1],[1,3],[3,2],[2,0]].map(function(b,x){var _=b[0],S=b[1];return en(e,"",Z(E[_],u),Z(E[S],u),c,"group-rect-".concat(p,"-").concat(x))})})),!0)}},_g=Xr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,a=e.inputTarget,i=t.isMoveableElement(a),s=!i&&t.controlBox.getElement().contains(a);if(!(!r||!a||e.isDrag||t.isMoveableElement(a)||s)){var o=n.contains(a);V(t,"onClick",at(t,e,{isDouble:e.isDouble,inputTarget:a,isTarget:n===a,moveableTarget:t.props.target,containsTarget:o}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var a=t.props.targets,i=a.indexOf(r),s=i>-1,o=!1;i===-1&&(i=lr(a,function(l){return l.contains(r)}),o=i>-1),V(t,"onClickGroup",at(t,e,{isDouble:e.isDouble,targets:a,inputTarget:r,targetIndex:i,isTarget:s,containsTarget:o,moveableTarget:a[i]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function xr(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),O(O({},t),{datas:e})}var xg=Xr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
    cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Cu(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Ot(a,q("direction"))&&Ot(a,q("edge"))&&Ot(a,q("edgeDraggable"))},dragStart:function(t,e){return Vt.dragStart(t,xr(e))},drag:function(t,e){return Vt.drag(t,xr(e))},dragEnd:function(t,e){return Vt.dragEnd(t,xr(e))},dragGroupCondition:function(t,e){var n,r=t.props,a=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!a?!1:!r.draggable&&Ot(a,q("direction"))&&Ot(a,q("line"))},dragGroupStart:function(t,e){return Vt.dragGroupStart(t,xr(e))},dragGroup:function(t,e){return Vt.dragGroup(t,xr(e))},dragGroupEnd:function(t,e){return Vt.dragGroupEnd(t,xr(e))},unset:function(t){return Vt.unset(t)}}),Uu={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},to=[Wu,Iu,Kh,th,Vt,xg,Hi,$h,Uh,Vh,tg,eg,Jh,vg,dg,mg,Qi,Uu,_g,Au,Yu],Cg=to.reduce(function(t,e){return O(O({},t),"events"in e?e.events:{})},{}),Zu=to.reduce(function(t,e){return O(O({},t),e.props)},{}),wg=Xp(Cg),Dg=Object.keys(wg),Mg=Object.keys(Zu);function qu(t,e){var n=t[0],r=t[1],a=t[2];return(n*e[0]+r*e[1]+a)/Math.sqrt(n*n+r*r)}function na(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function Ju(t,e){return Math.max.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.max(r[e],a[e],i[e],s[e])}))}function Qu(t,e){return Math.min.apply(Math,t.map(function(n){var r=n[0],a=n[1],i=n[2],s=n[3];return Math.min(r[e],a[e],i[e],s[e])}))}function Tg(t,e){var n,r=[0,0],a=[0,0],i=[0,0],s=[0,0],o=0,l=0;if(!t.length)return{pos1:r,pos2:a,pos3:i,pos4:s,minX:0,minY:0,maxX:0,maxY:0,width:o,height:l,rotation:e};var u=lt(e,Yt);if(u%90){var c=u/180*Math.PI,f=Math.tan(c),d=-1/f,v=[mi,Cl],p=[[0,0],[0,0]],h=[mi,Cl],g=[[0,0],[0,0]];t.forEach(function(F){F.forEach(function(I){var L=qu([-f,1,0],I),K=qu([-d,1,0],I);v[0]>L&&(p[0]=I,v[0]=L),v[1]<L&&(p[1]=I,v[1]=L),h[0]>K&&(g[0]=I,h[0]=K),h[1]<K&&(g[1]=I,h[1]=K)})});var m=p[0],y=p[1],E=g[0],b=g[1],x=[-f,1,na([-f,1],m)],_=[-f,1,na([-f,1],y)],S=[-d,1,na([-d,1],E)],D=[-d,1,na([-d,1],b)];n=[[x,S],[x,D],[_,S],[_,D]].map(function(F){var I=F[0],L=F[1];return Dn(I,L)[0]}),r=n[0],a=n[1],i=n[2],s=n[3],o=h[1]-h[0],l=v[1]-v[0]}else{var C=Qu(t,0),M=Qu(t,1),R=Ju(t,0),T=Ju(t,1);if(r=[C,M],a=[R,M],i=[C,T],s=[R,T],o=R-C,l=T-M,u%180){var P=[i,r,s,a];r=P[0],a=P[1],i=P[2],s=P[3],o=T-M,l=R-C}}if(u%360>180){var P=[s,i,a,r];r=P[0],a=P[1],i=P[2],s=P[3]}var k=Oe([r,a,i,s]),A=k.minX,N=k.minY,G=k.maxX,B=k.maxY;return{pos1:r,pos2:a,pos3:i,pos4:s,width:o,height:l,minX:A,minY:N,maxX:G,maxY:B,rotation:e}}function tc(t,e){var n=e.map(function(r){if(Pt(r)){var a=tc(t,r),i=a.length;return i>1?a:i===1?a[0]:null}else{var s=Ve(t,function(o){var l=o.manager;return l.props.target===r});return s?(s.finded=!0,s.manager):null}}).filter(Boolean);return n.length===1&&Pt(n[0])?n[0]:n}var Rg=function(t){hr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.differ=new Gs,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}var n=e.prototype;return n.componentDidMount=function(){t.prototype.componentDidMount.call(this)},n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;this.moveables.forEach(function(J){J.updateRect(r,!1,!1)});var l=this.props,u=this.moveables,c=o.target||l.target,f=u.map(function(J){return{finded:!1,manager:J}}),d=this.props.targetGroups||[],v=tc(f,d);v.push.apply(v,f.filter(function(J){var et=J.finded;return!et}).map(function(J){var et=J.manager;return et}));var p=[],h=!a||r!==""&&l.updateGroup,g=l.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(s=this.props.persistData)===null||s===void 0?void 0:s.rotation;m!=null&&(g=m)}function y(J,et,$){var X=J.map(function(nt){if(Pt(nt)){var st=y(nt,et),ut=[st.pos1,st.pos2,st.pos3,st.pos4];return p.push(st),{poses:ut,rotation:st.rotation}}else return{poses:Xt(nt.state),rotation:nt.getRotation()}}),it=X.map(function(nt){var st=nt.rotation;return st}),rt=0,Et=it[0],ot=it.every(function(nt){return Math.abs(Et-nt)<.1});h?rt=ot?Et:g:rt=!$&&ot?Et:et;var ct=X.map(function(nt){var st=nt.poses;return st}),pt=Tg(ct,rt);return pt}var E=y(v,this.rotation,!0);h&&(this.rotation=E.rotation,this.transformOrigin=l.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=p;var b=this.transformOrigin,x=this.rotation,_=this.scale,S=E.width,D=E.height,C=E.minX,M=E.minY,R=Qp([[0,0],[S,0],[0,D],[S,D]],Jp(b,S,D),this.rotation/180*Math.PI),T=Oe(R.result),P=T.minX,k=T.minY,A=" rotate(".concat(x,"deg)")+" scale(".concat(_[0]>=0?1:-1,", ").concat(_[1]>=0?1:-1,")"),N="translate(".concat(-P,"px, ").concat(-k,"px)").concat(A);this.controlBox.getElement().style.transform="translate3d(".concat(C,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),c.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(b,";")+"width:".concat(S,"px;height:").concat(D,"px;")+"transform: ".concat(N),o.width=S,o.height=D;var G=this.getContainer(),B=Ji(this.controlBox.getElement(),c,this.controlBox.getElement(),this.getContainer(),this._rootContainer||G,[]),F=[B.left,B.top],I=Xt(B),L=I[0],K=I[1],W=I[2],Y=I[3],H=Oe([L,K,W,Y]),j=[H.minX,H.minY],U=_[0]*_[1]>0?1:-1;B.pos1=Z(L,j),B.pos2=Z(K,j),B.pos3=Z(W,j),B.pos4=Z(Y,j),B.left=C-B.left+j[0],B.top=M-B.top+j[1],B.origin=Z(ft(F,B.origin),j),B.beforeOrigin=Z(ft(F,B.beforeOrigin),j),B.originalBeforeOrigin=ft(F,B.originalBeforeOrigin),B.transformOrigin=Z(ft(F,B.transformOrigin),j),c.style.transform="translate(".concat(-P-j[0],"px, ").concat(-k-j[1],"px)")+A,this.updateState(O(O({},B),{posDelta:j,direction:U,beforeDirection:U}),i)},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.triggerEvent=function(r,a,i){if(i||r.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,r,a);this._emitter.trigger(r,a)},n.updateAbles=function(){t.prototype.updateAbles.call(this,Q(Q([],this.props.ables,!0),[Qi],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var r=this.state,a=this.props,i=this._prevTarget,s=a.dragTarget||this.areaElement;i!==s&&(br(this,"targetGesto"),br(this,"controlGesto"),r.target=null),r.target||(r.target=this.areaElement,this.controlBox.getElement().style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=ju(this,s,"Group")),this.controlGesto||(this.controlGesto=qi(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!Mi(r.container,a.container);o&&(r.container=a.container);var l=a.targets,u=this.differ.update(l),c=u.added,f=u.changed,d=u.removed,v=c.length||d.length;(o||v||this.transformOrigin!==(a.defaultGroupOrigin||"50% 50%")||f.length||l.length&&!tu(this._targetGroups,a.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!v},n._updateObserver=function(){},e.defaultProps=O(O({},_r.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(_r),Og=function(t){hr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.moveables=[],r}var n=e.prototype;return n.render=function(){var r=this,a,i=this.props,s=i.cspNonce,o=i.cssStyled,l=i.persistData,u=i.targets||[],c=u.length,f=this.isUnmounted||!c,d=(a=l?.children)!==null&&a!==void 0?a:[];return f&&!c&&d.length?u=d.map(function(){return null}):f||(d=[]),Qt(o,{cspNonce:s,ref:le(this,"controlBox"),className:q("control-box")},u.map(function(v,p){return Qt(_r,O({key:"moveable"+p,ref:Fo(r,"moveables",p)},r.props,{target:v,wrapperMoveable:r,isWrapperMounted:r.isMoveableMounted,persistData:d[p]}))}))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(r,a,i){i===void 0&&(i=!0),this.moveables.forEach(function(s){s.updateRect(r,a,i)})},n.getRect=function(){return O(O({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(_r);function ec(t,e){var n=[];return t.forEach(function(r){if(r){if(Te(r)){e[r]&&n.push.apply(n,e[r]);return}Pt(r)?n.push.apply(n,ec(r,e)):n.push(r)}}),n}function rc(t,e){var n=[];return t.forEach(function(r){if(r){if(Te(r)){e[r]&&n.push.apply(n,e[r]);return}Pt(r)?n.push(rc(r,e)):n.push(r)}}),n}function nc(t,e){return t.length!==e.length||t.some(function(n,r){var a=e[r];return!n&&!a?!1:n!=a?Pt(n)&&Pt(a)?nc(n,a):!0:!1})}var ac=function(t){hr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.refTargets=[],r.selectorMap={},r._differ=new Gs,r._elementTargets=[],r._onChangeTargets=null,r}var n=e.prototype;return e.makeStyled=function(){var r={},a=this.getTotalAbles();a.forEach(function(s){var o=s.css;o&&o.forEach(function(l){r[l]=!0})});var i=Re(r).join(`
`);this.defaultStyled=Sl("div",Tf(hi,bp+i))},e.getTotalAbles=function(){return Q([Iu,Qi,Uu,Au],this.defaultAbles,!0)},n.render=function(){var r,a=this.constructor;a.defaultStyled||a.makeStyled();var i=this.props,s=i.ables,o=i.props,l=vp(i,["ables","props"]),u=this._updateRefs(!0),c=ec(u,this.selectorMap),f=c.length>1,d=a.getTotalAbles(),v=Q(Q([],d,!0),s||[],!0),p=O(O(O({},l),o||{}),{ables:v,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=c;var h=null,g=this.moveable,m=l.persistData;if(m?.children&&(f=!0),f){if(l.individualGroupable)return Qt(Og,O({key:"individual-group",ref:le(this,"moveable")},p,{target:null,targets:c}));var y=rc(u,this.selectorMap);if(g&&!g.props.groupable&&!g.props.individualGroupable){var E=g.props.target;E&&c.indexOf(E)>-1&&(h=O({},g.state))}return Qt(Rg,O({key:"group",ref:le(this,"moveable")},p,(r=l.groupableProps)!==null&&r!==void 0?r:{},{target:null,targets:c,targetGroups:y,firstRenderState:h}))}else{var b=c[0];if(g&&(g.props.groupable||g.props.individualGroupable)){var x=g.moveables||[],_=Ve(x,function(S){return S.props.target===b});_&&(h=O({},_.state))}return Qt(_r,O({key:"single",ref:le(this,"moveable")},p,{target:b,firstRenderState:h}))}},n.componentDidMount=function(){this._checkChangeTargets(),this._updateRefs()},n.componentDidUpdate=function(){this._checkChangeTargets()},n.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},n.getTargets=function(){var r,a;return(a=(r=this.moveable)===null||r===void 0?void 0:r.getTargets())!==null&&a!==void 0?a:[]},n.updateSelectors=function(){this.selectorMap={},this._updateRefs()},n.waitToChangeTarget=function(){var r=this,a;return this._onChangeTargets=function(){r._onChangeTargets=null,a()},new Promise(function(i){a=i})},n.waitToChangeTargets=function(){return this.waitToChangeTarget()},n.getManager=function(){return this.moveable},n._updateRefs=function(r){var a=this.refTargets,i=Oi(this.props.target||this.props.targets),s=typeof document<"u",o=nc(a,i),l=this.selectorMap,u={};return this.refTargets.forEach(function c(f){if(Te(f)){var d=l[f];d?u[f]=l[f]:s&&(o=!0,u[f]=[].slice.call(document.querySelectorAll(f)))}else Pt(f)&&f.forEach(c)}),this.refTargets=i,this.selectorMap=u,!r&&o&&this.forceUpdate(),i},n._checkChangeTargets=function(){var r,a,i,s=this._differ.update(this._elementTargets),o=s.added,l=s.removed,u=o.length||l.length;u&&((a=(r=this.props).onChangeTargets)===null||a===void 0||a.call(r,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this)),this._updateRefs()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,pp([Rf(Dl)],e.prototype,"moveable",void 0),e}(Ma),kg=function(t){hr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=to,e}(ac);function EE(t){var e;return e=function(n){hr(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}return r}(ac),e.defaultAbles=t,e}var Pg=kg;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eo=function(t,e){return eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},eo(t,e)};function ro(t,e){eo(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nn=function(){return nn=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nn.apply(this,arguments)};function Ag(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}var Ig=function(t){ro(e,t);function e(r){var a=t.call(this,r)||this;return a.state={},a.state=a.props,a}var n=e.prototype;return n.render=function(){return pd(Qt(Pg,nn({ref:le(this,"moveable")},this.state)),this.state.parentElement)},e}(Da),Ng=Mg,Bg=Dl,Lg=Dg,SE=Zu,Gg=function(t){ro(e,t);function e(r,a){a===void 0&&(a={});var i=t.call(this)||this;i.tempElement=document.createElement("div");var s=nn({},a),o={};Lg.forEach(function(u){o[Lv("on ".concat(u))]=function(c){return i.trigger(u,c)}}),ls(Qt(Ig,nn({ref:le(i,"innerMoveable"),parentElement:r},s,o)),i.tempElement);var l=s.target;return sl(l)&&l.length>1&&i.updateRect(),i}var n=e.prototype;return n.setState=function(r,a){this.innerMoveable.setState(r,a)},n.forceUpdate=function(r){this.innerMoveable.forceUpdate(r)},n.dragStart=function(r){var a=this.innerMoveable;a.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(r)},n.destroy=function(){ls(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=Ag([ga(Bg,function(r,a){r[a]||(r[a]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=this.getMoveable();if(!(!o||!o[a]))return o[a].apply(o,i)})}),ga(Ng,function(r,a){Object.defineProperty(r,a,{get:function(){return this.getMoveable().props[a]},set:function(i){var s;this.setState((s={},s[a]=i,s))},enumerable:!0,configurable:!0})})],e),e}(jr),Fg=function(t){ro(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Gg);function _E(t,e,n){return getElementInfo$1(t,e,n)}function xE(t,e){return makeAble$1(t,e)}var ic=z(91017),zg=z(924),oc=z(31129),no=function(t,e){return no=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},no(t,e)};function Kg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");no(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Hg="object",Wg="string";function sc(t){return t&&typeof t===Hg}function lc(t){return Array.isArray(t)}function uc(t){return typeof t===Wg}function Yg(t,e,n){n===void 0&&(n=-1);for(var r=t.length,a=0;a<r;++a)if(e(t[a],a,t))return a;return n}function ao(t,e,n,r){t.addEventListener(e,n,r)}function io(t,e,n,r){t.removeEventListener(e,n,r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oo=function(){return oo=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oo.apply(this,arguments)};function jg(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}var Vg=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(sc(n))for(var a in n)this.on(a,n[a]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(sc(n))for(var a in n)this.off(a);else if(!r)this._events[n]=[];else{var i=this._events[n];if(i){var s=Yg(i,function(o){return o.listener===r});s>-1&&i.splice(s,1)}}return this},e.once=function(n,r){var a=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(i){a._addEvent(n,i,{once:!0})})},e.emit=function(n,r){var a=this;r===void 0&&(r={});var i=this._events[n];if(!n||!i)return!0;var s=!1;return r.eventType=n,r.stop=function(){s=!0},r.currentTarget=this,jg(i).forEach(function(o){o.listener(r),o.once&&a.off(n,o.listener)}),!s},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,a){var i=this._events;i[n]=i[n]||[];var s=i[n];s.push(oo({listener:r},a))},t}();function $g(t,e){return e={exports:{}},t(e,e.exports),e.exports}var an=$g(function(t,e){function n(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return s[l];var c=String(l),f=r[c.toLowerCase()];if(f)return f;var f=a[c.toLowerCase()];if(f)return f;if(c.length===1)return c.charCodeAt(0)}n.isEventKey=function(u,c){if(u&&typeof u=="object"){var f=u.which||u.keyCode||u.charCode;if(f==null)return!1;if(typeof c=="string"){var d=r[c.toLowerCase()];if(d)return d===f;var d=a[c.toLowerCase()];if(d)return d===f}else if(typeof c=="number")return c===f;return!1}},e=t.exports=n;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=e.names=e.title={};for(i in r)s[r[i]]=i;for(var o in a)r[o]=a[o]}),CE=an.code,wE=an.codes,DE=an.aliases,Xg=an.names,ME=an.title,cc={"+":"plus","left command":"meta","right command":"meta"},fc={shift:1,ctrl:2,alt:3,meta:4};function dc(t,e){var n=(Xg[t]||e||"").toLowerCase();for(var r in cc)n=n.replace(r,cc[r]);return n.replace(/\s/g,"")}function vc(t,e){e===void 0&&(e=dc(t.keyCode,t.key));var n=Ug(t);return n.indexOf(e)===-1&&n.push(e),n.filter(Boolean)}function Ug(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function pc(t){var e=t.slice();return e.sort(function(n,r){var a=fc[n]||5,i=fc[r]||5;return a-i}),e}var hc,Zg=function(t){Kg(e,t);function e(r){r===void 0&&(r=window);var a=t.call(this)||this;return a.container=r,a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a.clear=function(){return a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.metaKey=!1,a},a.keydownEvent=function(i){a.triggerEvent("keydown",i)},a.keyupEvent=function(i){a.triggerEvent("keyup",i)},a.blur=function(){a.clear(),a.trigger("blur")},ao(r,"blur",a.blur),ao(r,"keydown",a.keydownEvent),ao(r,"keyup",a.keyupEvent),a}var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return hc||(hc=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var r=this.container;this.clear(),this.off(),io(r,"blur",this.blur),io(r,"keydown",this.keydownEvent),io(r,"keyup",this.keyupEvent)},n.keydown=function(r,a){return this.addEvent("keydown",r,a)},n.offKeydown=function(r,a){return this.removeEvent("keydown",r,a)},n.offKeyup=function(r,a){return this.removeEvent("keyup",r,a)},n.keyup=function(r,a){return this.addEvent("keyup",r,a)},n.addEvent=function(r,a,i){return lc(a)?this.on(r+"."+pc(a).join("."),i):uc(a)?this.on(r+"."+a,i):this.on(r,a),this},n.removeEvent=function(r,a,i){return lc(a)?this.off(r+"."+pc(a).join("."),i):uc(a)?this.off(r+"."+a,i):this.off(r,a),this},n.triggerEvent=function(r,a){this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.altKey=a.altKey,this.metaKey=a.metaKey;var i=dc(a.keyCode,a.key),s=i==="ctrl"||i==="shift"||i==="meta"||i==="alt",o={key:i,isToggle:s,inputEvent:a,keyCode:a.keyCode,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey};this.trigger(r,o),this.trigger(r+"."+i,o);var l=vc(a,i);l.length>1&&this.trigger(r+"."+l.join("."),o)},e}(Vg);const qg=Zg;function Jg(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var Qg=Jg;function t0(t){return Qg(t).toString(36)}function e0(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function r0(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,a){var i=a.trim();return(i?$s(i):[""]).map(function(s){var o=s.trim();return o.indexOf("@")===0?o:o.indexOf(":global")>-1?o.replace(/\:global/g,""):o.indexOf(":host")>-1?""+o.replace(/\:host/g,"."+t):o?"."+t+" "+o:"."+t}).join(", ")+" {"})}function n0(t,e,n,r){var a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",t),n.nonce&&a.setAttribute("nonce",n.nonce),a.innerHTML=r0(t,e,n),(r||document.head||document.body).appendChild(a),a}function a0(t){var e="rCS"+t0(t),n=0,r;return{className:e,inject:function(a,i){i===void 0&&(i={});var s=e0(a),o=n===0,l;return(s||o)&&(l=n0(e,t,i,s)),o&&(r=l),s||++n,{destroy:function(){s?(a.removeChild(l),l=null):(n>0&&--n,n===0&&r&&(r.parentNode.removeChild(r),r=null))}}}}}const i0=a0;var so=function(t,e){return so=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},so(t,e)};function gc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");so(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var At=function(){return At=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},At.apply(this,arguments)};function o0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function s0(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function on(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function l0(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function u0(t){if(typeof Map>"u")return t.filter(function(n,r){return t.indexOf(n)===r});var e=new Map;return t.filter(function(n){return e.has(n)?!1:(e.set(n,!0),!0)})}function mc(t,e){return document.elementFromPoint&&document.elementFromPoint(t,e)||null}function yc(t,e,n){var r=t.tag,a=t.children,i=t.attributes,s=t.className,o=t.style,l=e||document.createElement(r);for(var u in i)l.setAttribute(u,i[u]);var c=l.children;if(a.forEach(function(d,v){yc(d,c[v],l)}),s&&s.split(" ").forEach(function(d){vv(l,d)||pv(l,d)}),o){var f=l.style;for(var u in o)f[u]=o[u]}return!e&&n&&n.appendChild(l),l}function c0(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=e||{},i=a.className,s=i===void 0?"":i,o=a.style,l=o===void 0?{}:o,u=o0(a,["className","style"]);return{tag:t,className:s,style:l,attributes:u,children:n}}function lo(t,e,n){t!==e&&n(t,e)}function bc(t,e,n){var r;n===void 0&&(n=t.data.boundArea);var a=t.distX,i=a===void 0?0:a,s=t.distY,o=s===void 0?0:s,l=t.data,u=l.startX,c=l.startY;if(e>0){var f=Math.sqrt((i*i+o*o)/(1+e*e)),d=e*f;i=(i>=0?1:-1)*d,o=(o>=0?1:-1)*f}var v=Math.abs(i),p=Math.abs(o),h=i<0?u-n.left:n.right-u,g=o<0?c-n.top:n.bottom-c;r=ov([v,p],[0,0],[h,g],!!e),v=r[0],p=r[1],i=(i>=0?1:-1)*v,o=(o>=0?1:-1)*p;var m=Math.min(0,i),y=Math.min(0,o),E=u+m,b=c+y;return{left:E,top:b,right:E+v,bottom:b+p,width:v,height:p}}function aa(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,a=e.width,i=e.height;return{pos1:[n,r],pos2:[n+a,r],pos3:[n,r+i],pos4:[n+a,r+i]}}function Ec(t,e,n){var r=zr(t,e),a=r.list,i=r.prevList,s=r.added,o=r.removed,l=r.maintained;return on(on(on([],s.map(function(u){return a[u]}),!0),o.map(function(u){return i[u]}),!0),n?l.map(function(u){var c=u[1];return a[c]}):[],!0)}function Sc(t){for(var e=0,n=t.length,r=1;r<n;++r)e=Math.max(Za(t[r],t[r-1]),e);return e}var _c=i0(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),f0="selecto-selection ".concat(_c.className),xc=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],TE=on(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],xc,!0),RE={boundContainer:null,portalContainer:null,container:null,dragContainer:null,selectableTargets:Array,selectByClick:Boolean,selectFromInside:Boolean,continueSelect:Boolean,toggleContinueSelect:Array,toggleContinueSelectWithoutDeselect:Array,keyContainer:null,hitRate:Number,scrollOptions:Object,checkInput:Boolean,preventDefault:Boolean,cspNonce:String,ratio:Number,getElementRect:Function,preventDragFromInside:Boolean,rootContainer:Object,dragCondition:Function,clickBySelectEnd:Boolean,continueSelectWithoutDeselect:Boolean,preventClickEventOnDragStart:Boolean,preventClickEventOnDrag:Boolean,checkOverflow:Boolean,innerScrollOptions:Object},OE=null,kE=null,d0=function(t){gc(e,t);function e(r){r===void 0&&(r={});var a=t.call(this)||this;a.selectedTargets=[],a.dragScroll=new hl,a._onDragStart=function(o,l){var u=o.data,c=o.clientX,f=o.clientY,d=o.inputEvent,v=a.options,p=v.selectFromInside,h=v.selectByClick,g=v.rootContainer,m=v.boundContainer,y=v.preventDragFromInside,E=y===void 0?!0:y,b=v.clickBySelectEnd,x=v.dragCondition;if(x&&!x(o)){o.stop();return}u.data={},u.innerWidth=window.innerWidth,u.innerHeight=window.innerHeight,a.findSelectableTargets(u),u.startSelectedTargets=a.selectedTargets,u.scaleMatrix=Ya(),u.containerX=0,u.containerY=0;var _={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(g){var S=a.container.getBoundingClientRect();u.containerX=S.left,u.containerY=S.top,u.scaleMatrix=$d(a.container,g)}if(m){var D=Va(m)&&"element"in m?At({left:!0,top:!0,bottom:!0,right:!0},m):{element:m,left:!0,top:!0,bottom:!0,right:!0},C=D.element,M=void 0;if(C){$a(C)?M=document.querySelector(C):C===!0?M=a.container:M=C;var R=M.getBoundingClientRect();D.left&&(_.left=R.left),D.top&&(_.top=R.top),D.right&&(_.right=R.right),D.bottom&&(_.bottom=R.bottom)}}u.boundArea=_;var T={left:c,top:f,right:c,bottom:f,width:0,height:0},P=[];if(!p||h&&!b){var k=a._findElement(l||mc(c,f),u.selectableTargets);P=k?[k]:[]}var A=P.length>0,N=!p&&A;if(N&&!h)return o.stop(),!1;var G=d.type,B=G==="mousedown"||G==="touchstart",F=!o.isClick&&B?a.emit("dragStart",At(At({},o),{data:u.data})):!0;if(!F)return o.stop(),!1;if(a.continueSelect?(P=Ec(a.selectedTargets,P,a.continueSelectWithoutDeselect),u.startPassedTargets=a.selectedTargets):u.startPassedTargets=[],a._select(P,T,o,!0),u.startX=c,u.startY=f,u.selectFlag=!1,u.preventDragFromInside=!1,d.target){var I=xn(u.scaleMatrix,[c-u.containerX,f-u.containerY]);a.target.style.cssText+="position: ".concat(g?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(I[0],"px, ").concat(I[1],"px)")}if(N&&h&&!b)d.preventDefault(),E&&(a._selectEnd(u.startSelectedTargets,u.startPassedTargets,T,o),u.preventDragFromInside=!0);else{u.selectFlag=!0,G==="touchstart"&&d.preventDefault();var L=a.options,K=L.scrollOptions,W=L.innerScrollOptions,Y=!1;if(W){for(var H=o.inputEvent,j=H.target,U=null,J=j;J&&J!==document.body;){var et=getComputedStyle(J).overflow!=="visible";if(et){U=J;break}J=J.parentElement}U&&(u.innerScrollOptions=At({container:U,checkScrollEvent:!0},W===!0?{}:W),a.dragScroll.dragStart(o,u.innerScrollOptions),Y=!0)}!Y&&K&&K.container&&a.dragScroll.dragStart(o,K),b&&(u.selectFlag=!1,o.preventDrag())}return!0},a._onDrag=function(o){if(o.data.selectFlag){var l=a.scrollOptions,u=o.data.innerScrollOptions,c=u||l?.container;if(c&&!o.isScroll&&a.dragScroll.drag(o,u||l))return}a._checkSelected(o)},a._onDragEnd=function(o){var l=o.data,u=o.inputEvent,c=bc(o,a.options.ratio),f=l.selectFlag;if(u&&a.emit("dragEnd",At(At({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:f},o),{data:l.data,rect:c})),a.target.style.cssText+="display: none;",f)l.selectFlag=!1,a.dragScroll.dragEnd();else if(a.selectByClick&&a.clickBySelectEnd){var d=a._findElement(mc(o.clientX,o.clientY),l.selectableTargets);a._select(d?[d]:[],c,o)}l.preventDragFromInside||a._selectEnd(l.startSelectedTargets,l.startPassedTargets,c,o)},a._onKeyDown=function(o){var l=a.options,u=!1;if(!a._keydownContinueSelect){var c=a._sameCombiKey(o,l.toggleContinueSelect);a._keydownContinueSelect=c,u=c}if(!a._keydownContinueSelectWithoutDeselection){var c=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);a._keydownContinueSelectWithoutDeselection=c,u=u||c}u&&a.emit("keydown",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onKeyUp=function(o){var l=a.options,u=!1;if(a._keydownContinueSelect){var c=a._sameCombiKey(o,l.toggleContinueSelect,!0);a._keydownContinueSelect=!c,u=c}if(a._keydownContinueSelectWithoutDeselection){var c=a._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);a._keydownContinueSelectWithoutDeselection=!c,u=u||c}u&&a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection})},a._onBlur=function(){(a._keydownContinueSelect||a._keydownContinueSelectWithoutDeselection)&&(a._keydownContinueSelect=!1,a._keydownContinueSelectWithoutDeselection=!1,a.emit("keyup",{keydownContinueSelect:a._keydownContinueSelect,keydownContinueSelectWithoutDeselection:a._keydownContinueSelectWithoutDeselection}))},a._onDocumentSelectStart=function(o){if(a.gesto.isFlag()){var l=a.dragContainer;l===window&&(l=document.documentElement);var u=l instanceof Element?[l]:[].slice.call(l),c=o.target;u.some(function(f){if(f===c||f.contains(c))return o.preventDefault(),!0})}},a.target=r.portalContainer;var i=r.container;a.options=At({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:aa,cspNonce:"",ratio:0},r);var s=a.options.portalContainer;return s&&(i=s.parentElement),a.container=i||document.body,a.initElement(),a.initDragScroll(),a.setKeyController(),a}var n=e.prototype;return n.setSelectedTargets=function(r){var a=this.selectedTargets,i=zr(a,r),s=i.added,o=i.removed,l=i.prevList,u=i.list;return this.selectedTargets=r,{added:s.map(function(c){return u[c]}),removed:o.map(function(c){return l[c]}),beforeSelected:a,selected:r}},n.setSelectedTargetsByPoints=function(r,a){var i=Math.min(r[0],a[0]),s=Math.min(r[1],a[1]),o=Math.max(r[0],a[0]),l=Math.max(r[1],a[1]),u={left:i,top:s,right:o,bottom:l,width:o-i,height:l-s},c={ignoreClick:!0};this.findSelectableTargets(c);var f=this.hitTest(u,c),d=this.setSelectedTargets(f);return At(At({},d),{rect:u})},n.selectTargetsByPoints=function(r,a){var i=new MouseEvent("mousedown",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),l=this.gesto,u=l.onDragStart(i);u!==!1&&(l.onDrag(s),l.onDragEnd(o))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(r){return this.gesto.triggerDragStart(r),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),Ht(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(r){var a=this.getElementRect||aa,i=a(r),s=[i.pos1,i.pos2,i.pos4,i.pos3];if(a!==aa){var o=r.getBoundingClientRect();return qa(s,o)}return s},n.getSelectableElements=function(){var r=[];return this.options.selectableTargets.forEach(function(a){if(Ys(a)){var i=a();i&&r.push.apply(r,[].slice.call(i))}else if(a instanceof Node)r.push(a);else if(Va(a))r.push(a.value||a.current);else{var s=[].slice.call(document.querySelectorAll(a));r.push.apply(r,s)}}),r},n.checkScroll=function(){if(this.gesto.isFlag()){var r=this.scrollOptions,a=this.gesto.getEventData().innerScrollOptions,i=a||r?.container;i&&this.dragScroll.checkScroll(At({inputEvent:this.gesto.getCurrentEvent()},a||r))}},n.findSelectableTargets=function(r){var a=this;r===void 0&&(r=this.gesto.getEventData());var i=this.getSelectableElements(),s=i.map(function(c){return a.getElementPoints(c)});r.selectableTargets=i,r.selectablePoints=s,r.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions;if(l){var u=new Map;r.selectableInnerScrollParentMap=u,r.selectableInnerScrollPathsList=i.map(function(c,f){for(var d=c.parentElement,v=[],p=[],h=function(){var g=u.get(d);if(!g){var m=getComputedStyle(d).overflow!=="visible";if(m){var y=aa(d);g={parentElement:d,indexes:[],points:[y.pos1,y.pos2,y.pos4,y.pos3],paths:on([],p,!0)},v.push(d),v.forEach(function(E){u.set(E,g)}),v=[]}}g?(d=g.parentElement,u.get(d).indexes.push(f),p.push(d)):v.push(d),d=d.parentElement};d&&d!==document.body;)h();return p})}return o.checkOverflow||(r.selectableInners=i.map(function(){return!0})),this._refreshGroups(r),i},n.clickTarget=function(r,a){var i=l0(r),s=i.clientX,o=i.clientY,l={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:r,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,a)&&this._onDragEnd(l),this},n.setKeyController=function(){var r=this.options,a=r.keyContainer,i=r.toggleContinueSelect,s=r.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(i||s)&&(this.keycon=new qg(a||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){var r=this.options,a=r.toggleContinueSelect,i=r.toggleContinueSelectWithoutDeselect;!a&&!i||this.keycon||this.setKeyController()},n.setKeyContainer=function(r){var a=this,i=this.options;lo(i.keyContainer,r,function(){i.keyContainer=r,a.setKeyController()})},n.getContinueSelect=function(){var r=this.options,a=r.continueSelect,i=r.toggleContinueSelect;return!i||!this._keydownContinueSelect?a:!a},n.getContinueSelectWithoutDeselect=function(){var r=this.options,a=r.continueSelectWithoutDeselect,i=r.toggleContinueSelectWithoutDeselect;return!i||!this._keydownContinueSelectWithoutDeselection?a:!a},n.setToggleContinueSelect=function(r){var a=this,i=this.options;lo(i.toggleContinueSelect,r,function(){i.toggleContinueSelect=r,a.setKeyEvent()})},n.setToggleContinueSelectWithoutDeselect=function(r){var a=this,i=this.options;lo(i.toggleContinueSelectWithoutDeselect,r,function(){i.toggleContinueSelectWithoutDeselect=r,a.setKeyEvent()})},n.setPreventDefault=function(r){this.gesto.options.preventDefault=r},n.setCheckInput=function(r){this.gesto.options.checkInput=r},n.initElement=function(){this.target=yc(c0("div",{className:f0}),this.target,this.container);var r=this.target,a=this.options,i=a.dragContainer,s=a.checkInput,o=a.preventDefault,l=a.preventClickEventOnDragStart,u=a.preventClickEventOnDrag,c=a.preventClickEventByCondition,f=a.preventRightClick,d=f===void 0?!0:f;this.dragContainer=typeof i=="string"?[].slice.call(document.querySelectorAll(i)):i||this.target.parentNode,this.gesto=new bl(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:s,preventDefault:o,preventClickEventOnDragStart:l,preventClickEventOnDrag:u,preventClickEventByCondition:c,preventRightClick:d}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),$t(document,"selectstart",this._onDocumentSelectStart),this.injectResult=_c.inject(r,{nonce:this.options.cspNonce})},n.hitTest=function(r,a,i){var s=this.options,o=s.hitRate,l=s.selectByClick,u=r.left,c=r.top,f=r.right,d=r.bottom,v=a.innerGroups,p=a.innerWidth,h=a.innerHeight,g=i?.clientX,m=i?.clientY,y=a.ignoreClick,E=[[u,c],[f,c],[f,d],[u,d]],b=Xs("".concat(o)),x=function(B,F){var I=y?!1:wn([g,m],B);if(l&&I)return!0;var L=ei(E,B);if(!L.length)return!1;var K=Yr(L),W=0;if(K===0&&Yr(B)===0?(W=Sc(B),K=Sc(L)):W=Yr(B),b.unit==="px")return K>=b.value;var Y=qs(Math.round(K/W*100),0,100);return Y>=Math.min(100,b.value)},_=a.selectableTargets,S=a.selectablePoints,D=a.selectableInners;if(!v)return _.filter(function(B,F){return D[F]?x(S[F],_[F]):!1});for(var C=[],M=Math.floor(u/p),R=Math.floor(f/p),T=Math.floor(c/h),P=Math.floor(d/h),k=M;k<=R;++k){var A=v[k];if(A)for(var N=T;N<=P;++N){var G=A[N];G&&G.forEach(function(B){var F=S[B],I=D[B],L=_[B];I&&x(F)&&C.push(L)})}}return u0(C)},n.initDragScroll=function(){var r=this;this.dragScroll.on("scrollDrag",function(a){var i=a.next;i(r.gesto.getCurrentEvent())}).on("scroll",function(a){var i=a.container,s=a.direction,o=r.gesto.getEventData().innerScrollOptions;o?r.emit("innerScroll",{container:i,direction:s}):r.emit("scroll",{container:i,direction:s})}).on("move",function(a){var i=a.offsetX,s=a.offsetY,o=a.inputEvent,l=r.gesto;if(!(!l||!l.isFlag())){var u=r.gesto.getEventData(),c=u.boundArea;u.startX-=i,u.startY-=s;var f=r.gesto.getEventData().innerScrollOptions,d=f?.container,v=!1;if(d){var p=u.selectableInnerScrollParentMap,h=p.get(d);h&&(h.paths.forEach(function(g){var m=p.get(g);m.points.forEach(function(y){y[0]-=i,y[1]-=s})}),h.indexes.forEach(function(g){u.selectablePoints[g].forEach(function(m){m[0]-=i,m[1]-=s})}),v=!0)}v||u.selectablePoints.forEach(function(g){g.forEach(function(m){m[0]-=i,m[1]-=s})}),r._refreshGroups(u),c.left-=i,c.right-=i,c.top-=s,c.bottom-=s,r.gesto.scrollBy(i,s,o.inputEvent),r._checkSelected(r.gesto.getCurrentEvent())}})},n._select=function(r,a,i,s){var o=i.inputEvent,l=i.data,u=this.setSelectedTargets(r);s&&this.emit("selectStart",At(At({},u),{rect:a,inputEvent:o,data:l.data,isTrusted:i.isTrusted})),(u.added.length||u.removed.length)&&this.emit("select",At(At({},u),{rect:a,inputEvent:o,data:l.data,isTrusted:i.isTrusted}))},n._selectEnd=function(r,a,i,s){var o=s.inputEvent,l=s.isDouble,u=s.data,c=zr(r,this.selectedTargets),f=c.added,d=c.removed,v=c.prevList,p=c.list,h=zr(a,this.selectedTargets),g=h.added,m=h.removed,y=h.prevList,E=h.list,b=o&&o.type,x=b==="mousedown"||b==="touchstart";this.emit("selectEnd",{startSelected:r,beforeSelected:a,selected:this.selectedTargets,added:f.map(function(_){return p[_]}),removed:d.map(function(_){return v[_]}),afterAdded:g.map(function(_){return E[_]}),afterRemoved:m.map(function(_){return y[_]}),isDragStart:x,isClick:!!s.isClick,isDouble:!!l,rect:i,inputEvent:o,data:u.data,isTrusted:s.isTrusted})},n._checkSelected=function(r,a){a===void 0&&(a=bc(r,this.options.ratio));var i=r.data,s=a.top,o=a.left,l=a.width,u=a.height,c=i.selectFlag,f=i.containerX,d=i.containerY,v=i.scaleMatrix,p=xn(v,[o-f,s-d]),h=xn(v,[l,u]),g=[];if(c){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var m=this.hitTest(a,i,r);g=Ec(i.startPassedTargets,m,this.continueSelect&&this.continueSelectWithoutDeselect)}var y=this.emit("drag",At(At({},r),{data:i.data,isSelect:c,rect:a}));if(y===!1){this.target.style.cssText+="display: none;",r.stop();return}c&&this._select(g,a,r)},n._sameCombiKey=function(r,a,i){if(!a)return!1;var s=vc(r.inputEvent,r.key),o=[].concat(a),l=ev(o[0])?o:[o];if(i){var u=r.key;return l.some(function(c){return c.some(function(f){return f===u})})}return l.some(function(c){return c.every(function(f){return s.indexOf(f)>-1})})},n._findElement=function(r,a){for(var i=r;i&&!(a.indexOf(i)>-1);)i=i.parentElement;return i},n._refreshGroups=function(r){var a,i=r.innerWidth,s=r.innerHeight,o=r.selectablePoints;if(this.options.checkOverflow){var l=(a=this.gesto.getEventData().innerScrollOptions)===null||a===void 0?void 0:a.container,u=r.selectableInnerScrollParentMap,c=r.selectableInnerScrollPathsList;r.selectableInners=c.map(function(v,p){var h=!1;return v.every(function(g){if(h)return!0;if(g===l)return h=!0,!0;var m=u.get(g);if(m){var y=o[p],E=m.points,b=ei(y,E);if(!b.length)return!1}return!0})})}if(!i||!s)r.innerGroups=null;else{var f=r.selectablePoints,d={};f.forEach(function(v,p){var h=1/0,g=-1/0,m=1/0,y=-1/0;v.forEach(function(x){var _=Math.floor(x[0]/i),S=Math.floor(x[1]/s);h=Math.min(_,h),g=Math.max(_,g),m=Math.min(S,m),y=Math.max(S,y)});for(var E=h;E<=g;++E)for(var b=m;b<=y;++b)d[E]=d[E]||{},d[E][b]=d[E][b]||[],d[E][b].push(p)}),r.innerGroups=d}},e=s0([ga(xc,function(r,a){var i={enumerable:!0,configurable:!0,get:function(){return this.options[a]}},s=Us("get ".concat(a));r[s]?i.get=function(){return this[s]()}:i.get=function(){return this.options[a]};var o=Us("set ".concat(a));r[o]?i.set=function(u){this[o](u)}:i.set=function(u){this.options[a]=u},Object.defineProperty(r,a,i)})],e),e}(jr),v0=function(t){gc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(d0);const p0=v0;var h0=z(25318),sn=z(85511),g0=z(7804),Cc=z(47694),tt=z(43752),ln=z(20927),ye=z(42044),m0=z(30909),Ft=z(10207),oe=z(6478);const y0=({scene:t,panel:e})=>{const n=e.state.openInlineEdit,[r,a]=(0,w.useState)(!1),[i,s]=(0,w.useState)({x:0,y:0}),o=b0(),l=t.selecto?.getSelectedTargets(),u=e.context?.instanceState?.layer,c=(0,w.useCallback)(p=>{if(!(p instanceof MouseEvent))return;p.preventDefault(),e.setActivePanel(),p.currentTarget!==t.div&&(p.currentTarget instanceof HTMLElement||p.currentTarget instanceof SVGElement)&&t.select({targets:[p.currentTarget]}),s({x:p.pageX,y:p.pageY}),a(!0)},[t,e]);(0,w.useEffect)(()=>{t.selecto&&t.selecto.getSelectableElements().forEach(p=>{p.addEventListener("contextmenu",c)})},[c,t.selecto]),(0,w.useEffect)(()=>{t.div&&t.div.addEventListener("contextmenu",c)},[c,t.div]);const f=()=>{a(!1)},d=()=>{const p=!t.isPanelEditing&&w.createElement(ye.s,{label:n?"Close Editor":"Open Editor",onClick:()=>{t.inlineEditingCallback&&(n?e.closeInlineEdit():t.inlineEditingCallback()),f()},className:o.menuItem}),h=()=>{if(l?.length===1){const b=()=>{t.editModeEnabled.next(!0),f()},x=t.findElementByTarget(l[0]);return x&&x.item.hasEditMode&&w.createElement(ye.s,{label:"Edit",onClick:b,className:o.menuItem})}return null},g=(0,oe.JI)(t.shouldShowAdvancedTypes).options,m=()=>{const b=[],x=_=>{let S=i.y,D=i.x;if(t.div){const C=t.div.getBoundingClientRect();S=S-C.top,D=D-C.left}(0,oe.xy)(_,u,{...i,y:S,x:D})};return g.map(_=>{b.push(w.createElement(ye.s,{key:_.value,label:_.label??"Canvas item",onClick:()=>x(_)}))}),b},y=!t.isPanelEditing&&w.createElement(ye.s,{label:"Add item",className:o.menuItem,childItems:m(),customSubMenuContainerStyles:{maxHeight:"150px",overflowY:"auto"}}),E=!t.isPanelEditing&&w.createElement(ye.s,{label:"Set background",onClick:()=>{t.setBackgroundCallback&&t.setBackgroundCallback(i),f()},className:o.menuItem});return l&&l.length>=1?w.createElement(w.Fragment,null,h(),w.createElement(ye.s,{label:"Delete",onClick:()=>{v(Ft.G.Delete),f()},className:o.menuItem}),w.createElement(ye.s,{label:"Duplicate",onClick:()=>{v(Ft.G.Duplicate),f()},className:o.menuItem}),w.createElement(ye.s,{label:"Bring to front",onClick:()=>{v(Ft.G.MoveTop),f()},className:o.menuItem}),w.createElement(ye.s,{label:"Send to back",onClick:()=>{v(Ft.G.MoveBottom),f()},className:o.menuItem}),p):w.createElement(w.Fragment,null,p,E,y)},v=p=>{t.selection.pipe((0,oc.P)()).subscribe(h=>{const g=h[0].parent;h.forEach(m=>{g.doAction(p,m)})}),setTimeout(()=>{t.addToSelection(),t.targetsToSelect.clear()})};return r?w.createElement("div",{onContextMenu:p=>{p.preventDefault(),f()}},w.createElement(m0.x,{x:i.x,y:i.y,onClose:f,renderMenuItems:d,focusOnOpen:!1})):w.createElement(w.Fragment,null)},b0=()=>({menuItem:vt.css`
    max-width: 200px;
  `});var E0=z(99510),S0=z(6665),se=z(72648),Cr=z(52081),uo=z(31403),_0=z(20888),x0=z(50796);const C0=({scene:t})=>{const e=(0,se.wW)(w0),n=()=>{t?.tooltipCallback&&t.tooltip&&t.tooltipCallback(void 0)},r=(0,w.createRef)(),{overlayProps:a}=(0,S0.Ir)({onClose:n,isDismissable:!0},r),{dialogProps:i}=(0,E0.R)({},r),s=t.tooltip?.element;if(!s)return w.createElement(w.Fragment,null);const o=()=>s.data?.links&&s.data?.links.length>0&&w.createElement("div",null,w.createElement(Cr.wc,null,s.data?.links?.map((l,u)=>w.createElement(uo.Qj,{key:u,icon:"external-link-alt",target:l.target,href:l.href,onClick:l.onClick,fill:"text",style:{width:"100%"}},l.title))));return w.createElement(w.Fragment,null,t.tooltip?.element&&t.tooltip.anchorPoint&&w.createElement(sn.h_,null,w.createElement(_0.S,{position:{x:t.tooltip.anchorPoint.x,y:t.tooltip.anchorPoint.y},offset:{x:5,y:0},allowPointerEvents:t.tooltip.isOpen},w.createElement("section",{ref:r,...a,...i},t.tooltip.isOpen&&w.createElement(x0.P,{style:{zIndex:1},onClick:n}),w.createElement("div",{className:e.wrapper},o())))))},w0=t=>({wrapper:vt.css`
    margin-top: 20px;
    background: ${t.colors.background.primary};
  `}),wc="connectionControl",Dc="connection anchor",co=8,ar=3,D0=({setRef:t,handleMouseLeave:e})=>{const n=(0,w.useRef)(null),r=(0,se.wW)(M0),a=2.5,i=5.5,s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",o=d=>{d.target instanceof HTMLImageElement&&n.current&&d.target.style&&(n.current.style.display="block",n.current.style.top=`calc(${d.target.style.top} - ${i}px + ${ar}px)`,n.current.style.left=`calc(${d.target.style.left} - ${i}px + ${ar}px)`)},l=()=>{n.current&&(n.current.style.display="none")},u=d=>{e(d)&&l()},c=[{x:-1,y:1},{x:-.5,y:1},{x:0,y:1},{x:.5,y:1},{x:1,y:1},{x:1,y:.5},{x:1,y:0},{x:1,y:-.5},{x:1,y:-1},{x:.5,y:-1},{x:0,y:-1},{x:-.5,y:-1},{x:-1,y:-1},{x:-1,y:-.5},{x:-1,y:0},{x:-1,y:.5}],f=(d=c)=>d.map(v=>{const p=`${v.x},${v.y}`,h={top:`calc(${-v.y*50+50}% - ${a}px - ${ar}px)`,left:`calc(${v.x*50+50}% - ${a}px - ${ar}px)`};return w.createElement("img",{id:p,key:p,alt:Dc,className:r.anchor,style:h,src:s,onMouseEnter:o})});return w.createElement("div",{className:r.root,ref:t},w.createElement("div",{className:r.mouseoutDiv,onMouseOut:u,onBlur:u}),w.createElement("div",{id:wc,ref:n,className:r.highlightElement,onMouseLeave:l}),f())},M0=t=>({root:vt.css`
    position: absolute;
    display: none;
  `,mouseoutDiv:vt.css`
    position: absolute;
    margin: -30px;
    width: calc(100% + 60px);
    height: calc(100% + 60px);
  `,anchor:vt.css`
    padding: ${ar}px;
    position: absolute;
    cursor: cursor;
    width: calc(5px + 2 * ${ar}px);
    height: calc(5px + 2 * ${ar}px);
    z-index: 100;
    pointer-events: auto !important;
  `,highlightElement:vt.css`
    background-color: #00ff00;
    opacity: 0.3;
    position: absolute;
    cursor: cursor;
    position: absolute;
    pointer-events: auto;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    display: none;
    z-index: 110;
  `});let T0=0;const R0=({setSVGRef:t,setLineRef:e,scene:n})=>{const r=(0,se.wW)(O0),a=Date.now()+"_"+T0++,i="connectionLineId",s=(0,w.useMemo)(()=>`head-${a}`,[a]),o=(0,w.useMemo)(()=>`editorHead-${a}`,[a]),l=Cc.vc.theme2.colors.text.primary,[u,c]=(0,w.useState)(void 0),f=(0,w.useRef)(u);(0,w.useEffect)(()=>{f.current=u});const[d,v]=(0,w.useState)(void 0),p=(0,w.useRef)(d);(0,w.useEffect)(()=>{p.current=d});const h=b=>{if(b.keyCode===8||b.keyCode===46)f.current&&p.current&&(p.current.options.connections=p.current.options.connections?.filter(x=>x!==f.current),p.current.onChange(p.current.options),c(void 0),v(void 0));else return;document.removeEventListener("keyup",h),n.selecto.rootContainer.removeEventListener("click",g)},g=b=>{const x=b.target;!(x instanceof SVGLineElement&&x.id===i)&&(c(void 0),v(void 0))},m=(b,x)=>{n.isEditingEnabled&&(c(b),v(x),document.addEventListener("keyup",h),n.selecto.rootContainer.addEventListener("click",g))},y=(0,w.useCallback)(()=>(0,oe.E6)(n.byName),[n.byName]),E=()=>y().map((b,x)=>{const{source:_,target:S,info:D}=b,C=_.div?.getBoundingClientRect(),M=_.div?.parentElement,R=M?.getBoundingClientRect();if(!C||!M||!R)return;const T=C.left-R.left+C.width/2,P=C.top-R.top+C.height/2,k=T+D.source.x*C.width/2,A=P-D.source.y*C.height/2;let N,G;if(D.targetName){const L=S.div?.getBoundingClientRect(),K=L.left-R.left+L.width/2,W=L.top-R.top+L.height/2;N=K+D.target.x*L.width/2,G=W-D.target.y*L.height/2}else{const L=R.width/2,K=R.height/2;N=L+D.target.x*R.width/2,G=K-D.target.y*R.height/2}const B=u===D,F={stroke:"#44aaff",strokeWidth:3},I=n.isEditingEnabled?"grab":"";return w.createElement("svg",{className:r.connection,key:x},w.createElement("g",{onClick:()=>m(D,_)},w.createElement("defs",null,w.createElement("marker",{id:s,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:l},w.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:l}))),w.createElement("line",{id:`${i}_transparent`,cursor:I,stroke:"transparent",pointerEvents:"auto",strokeWidth:15,x1:k,y1:A,x2:N,y2:G}),w.createElement("line",{id:i,stroke:l,pointerEvents:"auto",strokeWidth:2,markerEnd:`url(#${s})`,x1:k,y1:A,x2:N,y2:G,style:B?F:{},cursor:I})))});return w.createElement(w.Fragment,null,w.createElement("svg",{ref:t,className:r.editorSVG},w.createElement("defs",null,w.createElement("marker",{id:o,markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",stroke:l},w.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:l}))),w.createElement("line",{ref:e,stroke:l,strokeWidth:2,markerEnd:`url(#${o})`})),E())},O0=t=>({editorSVG:vt.css`
    position: absolute;
    pointer-events: none;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
  `,connection:vt.css`
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 1000;
    pointer-events: none;
  `});class k0{constructor(e){this.setConnectionAnchorRef=n=>{this.connectionAnchorDiv=n},this.setConnectionSVGRef=n=>{this.connectionSVG=n},this.setConnectionLineRef=n=>{this.connectionLine=n},this.findElementTarget=n=>{let r;if(n!==this.scene.div)return r=this.scene.findElementByTarget(n),!r&&n.parentElement&&(r=this.findElementTarget(n.parentElement)),r},this.handleMouseEnter=n=>{if(!(n.target instanceof Element)||!this.scene.isEditingEnabled)return;let r=this.findElementTarget(n.target);if(!r){console.log("no element");return}if(this.isDrawingConnection)this.connectionTarget=r;else if(this.connectionSource=r,!this.connectionSource){console.log("no connection source");return}const a=r.div.getBoundingClientRect(),i=this.scene.div?.getBoundingClientRect(),s=a.top-(i?.top??0),o=a.left-(i?.left??0);this.connectionAnchorDiv&&(this.connectionAnchorDiv.style.display="none",this.connectionAnchorDiv.style.display="block",this.connectionAnchorDiv.style.top=`${s}px`,this.connectionAnchorDiv.style.left=`${o}px`,this.connectionAnchorDiv.style.height=`${a.height}px`,this.connectionAnchorDiv.style.width=`${a.width}px`)},this.handleMouseLeave=n=>n.relatedTarget instanceof HTMLImageElement&&n.relatedTarget.getAttribute("alt")===Dc?!1:(this.connectionTarget=void 0,this.connectionAnchorDiv.style.display="none",!0),this.connectionListener=n=>{if(n.preventDefault(),!(this.connectionLine&&this.scene.div&&this.scene.div.parentElement))return;const r=this.scene.div.parentElement.getBoundingClientRect(),a=n.pageX-r.x,i=n.pageY-r.y;this.connectionLine.setAttribute("x2",`${a}`),this.connectionLine.setAttribute("y2",`${i}`);const s=this.connectionLine.x1.baseVal.value,o=this.connectionLine.y1.baseVal.value;if(this.didConnectionLeaveHighlight||Math.hypot(a-s,i-o)>co&&this.connectionSVG&&(this.didConnectionLeaveHighlight=!0,this.connectionSVG.style.display="block",this.isDrawingConnection=!0),!n.buttons){if(this.connectionSource&&this.connectionSource.div&&this.connectionSource.div.parentElement){const l=this.connectionSource.div.getBoundingClientRect(),u=this.connectionSource.div.parentElement.getBoundingClientRect(),c=l.top-u.top+l.height/2,f=l.left-u.left+l.width/2,d=(s-f)/(l.width/2),v=(c-o)/(l.height/2);let p,h,g;if(this.connectionTarget&&this.connectionTarget.div){const E=this.connectionTarget.div.getBoundingClientRect(),b=E.top-u.top+E.height/2,x=E.left-u.left+E.width/2;p=(a-x)/(E.width/2),h=(b-i)/(E.height/2),g=this.connectionTarget.options.name}else{const E=u.height/2,b=u.width/2;p=(a-b)/(u.width/2),h=(E-i)/(u.height/2)}const m={source:{x:d,y:v},target:{x:p,y:h},targetName:g,color:"white",size:10,path:tt.lS.Straight},{options:y}=this.connectionSource;y.connections||(y.connections=[]),this.didConnectionLeaveHighlight&&(this.connectionSource.options.connections=[...y.connections,m],this.connectionSource.onChange(this.connectionSource.options))}this.connectionSVG&&(this.connectionSVG.style.display="none"),this.scene.selecto&&this.scene.selecto.rootContainer&&(this.scene.selecto.rootContainer.style.cursor="default",this.scene.selecto.rootContainer.removeEventListener("mousemove",this.connectionListener)),this.isDrawingConnection=!1}},this.handleConnectionDragStart=(n,r,a)=>{if(this.scene.selecto.rootContainer.style.cursor="crosshair",this.connectionSVG&&this.connectionLine&&this.scene.div&&this.scene.div.parentElement){const i=n.getBoundingClientRect(),s=this.scene.div.parentElement.getBoundingClientRect(),o=i.x-s.x+co,l=i.y-s.y+co,u=r-s.x,c=a-s.y;this.connectionLine.setAttribute("x1",`${o}`),this.connectionLine.setAttribute("y1",`${l}`),this.connectionLine.setAttribute("x2",`${u}`),this.connectionLine.setAttribute("y2",`${c}`),this.didConnectionLeaveHighlight=!1}this.scene.selecto?.rootContainer?.addEventListener("mousemove",this.connectionListener)},this.connectionsNeedUpdate=n=>(0,oe.$k)(n)||(0,oe.ns)(n,this.scene.byName),this.scene=e}render(){return w.createElement(w.Fragment,null,w.createElement(D0,{setRef:this.setConnectionAnchorRef,handleMouseLeave:this.handleMouseLeave}),w.createElement(R0,{setSVGRef:this.setConnectionSVGRef,setLineRef:this.setConnectionLineRef,scene:this.scene}))}}var P0=z(18271),fe=z(68313);const A0=t=>({name:"settingsViewable",props:{},events:{},render(e,n){if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;const r=e.getRect();return n.createElement("div",{key:"settings-viewable",className:"moveable-settings",style:{position:"absolute",left:`${r.width+18}px`,top:"0px",color:"white",fontSize:"18px",cursor:"pointer",userSelect:"none",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100},onClick:a=>{const i=e.getContainer(),s=new PointerEvent("contextmenu",{clientX:a.clientX,clientY:a.clientY});i.dispatchEvent(s)}},"","\u2699\uFE0F","")}}),I0={name:"dimensionViewable",props:{},events:{},render(t,e){const n=t.getRect();return e.createElement("div",{key:"dimension-viewable",className:"moveable-dimension",style:{position:"absolute",left:`${n.width/2}px`,top:`${n.height+20}px`,background:"#4af",borderRadius:"2px",padding:"2px 4px",color:"white",fontSize:"13px",whiteSpace:"nowrap",fontWeight:"bold",willChange:"transform",transform:"translate(-50%, 0px)",zIndex:100}},Math.round(n.offsetWidth)," x ",Math.round(n.offsetHeight))}},N0=t=>({name:"constraintViewable",props:{},events:{},render(e,n){const r=e.getRect(),a=t.findElementByTarget(e.state.target);if(t.selecto?.getSelectedTargets()&&t.selecto?.getSelectedTargets().length>1)return;let i=null,s=null;const o=a?.tempConstraint??a?.options.constraint??{},l="1px dashed #4af",u=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(45deg)"}}),c=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/2-r.height/16}px`,borderLeft:l,height:`${r.height/8}px`,transform:"rotate(-45deg)"}}),f=n.createElement("div",{},[u,c]),d=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,bottom:"0px",borderLeft:l,height:"100vh"}}),v=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height}px`,borderLeft:l,height:"100vh"}}),p=n.createElement("div",{},[d,v]),h=n.createElement("div",{style:{position:"absolute",left:`${r.width/2}px`,top:`${r.height/4}px`,borderLeft:l,height:`${r.height/2}px`}}),g=n.createElement("div",{},[h,f]);switch(o.vertical){case fe.fJ.Top:i=d;break;case fe.fJ.Bottom:i=v;break;case fe.fJ.TopBottom:i=p;break;case fe.fJ.Center:i=g;break}const m=n.createElement("div",{style:{position:"absolute",right:"0px",top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),y=n.createElement("div",{style:{position:"absolute",left:`${r.width}px`,top:`${r.height/2}px`,borderTop:l,width:"100vw"}}),E=n.createElement("div",{},[m,y]),b=n.createElement("div",{style:{position:"absolute",left:`${r.width/4}px`,top:`${r.height/2}px`,borderTop:l,width:`${r.width/2}px`}}),x=n.createElement("div",{},[b,f]);switch(o.horizontal){case fe._5.Left:s=m;break;case fe._5.Right:s=y;break;case fe._5.LeftRight:s=E;break;case fe._5.Center:s=x;break}return n.createElement("div",{},[i,s])}});class B0 extends qt.f{constructor(e,n,r){super(e,n),this.options=e,this.scene=n,this.changeCallback=r,this.setRootRef=a=>{this.div=a},this.sizeStyle={height:"100%",width:"100%"}}isRoot(){return!0}onChange(e){this.revId++,this.options={...e},this.changeCallback()}getSaveModel(){const{placement:e,constraint:n,...r}=this.options;return{...r,elements:this.elements.map(a=>a.getSaveModel())}}render(){return w.createElement("div",{onContextMenu:e=>e.preventDefault(),key:this.UID,ref:this.setRootRef,style:{...this.sizeStyle,...this.dataStyle}},this.elements.map(e=>e.render()))}}class L0{constructor(e,n,r,a,i){this.onSave=a,this.styles=G0(Cc.vc.theme2),this.selection=new gn.t(1),this.moved=new ic.x,this.byName=new Map,this.revId=0,this.width=0,this.height=0,this.style={},this.skipNextSelectionBroadcast=!1,this.ignoreDataUpdate=!1,this.isPanelEditing=Go.E1.getSearchObject().editPanel!==void 0,this.editModeEnabled=new zg.X(!1),this.targetsToSelect=new Set,this.getNextElementName=(s=!1)=>{const o=s?"Frame":"Element";let l=this.byName.size+1;const u=l+100;for(;l<u;){const c=`${o} ${l++}`;if(!this.byName.has(c))return c}return`${o} ${Date.now()}`},this.canRename=s=>!this.byName.has(s),this.context={getColor:s=>(0,ln.FP)(this.data,s),getScale:s=>(0,ln.pb)(this.data,s),getScalar:s=>(0,ln.z2)(this.data,s),getText:s=>(0,ln.WO)(this.data,s),getResource:s=>(0,ln.Qz)(this.data,s),getPanelData:()=>this.data},this.generateFrameContainer=s=>{let o=1/0,l=1/0,u=0,c=0;return s.forEach(f=>{const d=f.div?.getBoundingClientRect();d&&(o>d.top&&(o=d.top),l>d.left&&(l=d.left),u<d.right&&(u=d.right),c<d.bottom&&(c=d.bottom))}),{top:o,left:l,width:u-l,height:c-o}},this.save=(s=!1)=>{this.onSave(this.root.getSaveModel()),s&&setTimeout(()=>{this.div&&this.initMoveable(!0,this.isEditingEnabled)})},this.findElementByTarget=s=>{const o=[...this.root.elements];for(;o.length>0;){const l=o.shift();if(l&&l.div&&l.div===s)return l;const u=l instanceof qt.f?l.elements:[];for(const c of u)o.unshift(c)}},this.setNonTargetPointerEvents=(s,o)=>{const l=[...this.root.elements];for(;l.length>0;){const u=l.shift();u&&u.div&&u.div!==s&&u.applyLayoutStylesToDiv(o);const c=u instanceof qt.f?u.elements:[];for(const f of c)l.unshift(f)}},this.setRef=s=>{this.div=s},this.select=s=>{this.selecto&&(this.selecto.setSelectedTargets(s.targets),this.updateSelection(s),this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none"))},this.updateSelection=s=>{if(this.moveable.target=s.targets,this.skipNextSelectionBroadcast){this.skipNextSelectionBroadcast=!1;return}if(s.frame)this.selection.next([s.frame]);else{const o=s.targets.map(l=>this.findElementByTarget(l));this.selection.next(o)}},this.generateTargetElements=s=>{let o=[];const l=[...s];for(;l.length>0;){const u=l.shift();u&&u.div&&o.push(u.div);const c=u instanceof qt.f?u.elements:[];for(const f of c)l.unshift(f)}return o},this.initMoveable=(s=!1,o=!0)=>{const l=this.generateTargetElements(this.root.elements);s&&this.selecto&&this.selecto.destroy(),this.selecto=new p0({container:this.div,rootContainer:this.div,selectableTargets:l,toggleContinueSelect:"shift",selectFromInside:!1,hitRate:0}),this.moveable=new Fg(this.div,{draggable:o&&!this.editModeEnabled.getValue(),resizable:o,ables:[I0,N0(this),A0(this)],props:{dimensionViewable:o,constraintViewable:o,settingsViewable:o},origin:!1,className:this.styles.selected}).on("click",c=>{const f=this.findElementByTarget(c.target);let d=!1;f&&(d=f.item.hasEditMode??!1),c.isDouble&&o&&!this.editModeEnabled.getValue()&&d&&this.editModeEnabled.next(!0)}).on("clickGroup",c=>{this.selecto.clickTarget(c.inputEvent,c.inputTarget)}).on("dragStart",c=>{this.ignoreDataUpdate=!0,this.setNonTargetPointerEvents(c.target,!0)}).on("dragGroupStart",c=>{this.ignoreDataUpdate=!0}).on("drag",c=>{const f=this.findElementByTarget(c.target);f&&(f.applyDrag(c),this.connections.connectionsNeedUpdate(f)&&this.moveableActionCallback&&this.moveableActionCallback(!0))}).on("dragGroup",c=>{let f=!1;for(let d of c.events){const v=this.findElementByTarget(d.target);v&&(v.applyDrag(d),f||(f=this.connections.connectionsNeedUpdate(v)))}f&&this.moveableActionCallback&&this.moveableActionCallback(!0)}).on("dragGroupEnd",c=>{c.events.forEach(f=>{const d=this.findElementByTarget(f.target);d&&d.setPlacementFromConstraint()}),this.moved.next(Date.now()),this.ignoreDataUpdate=!1}).on("dragEnd",c=>{const f=this.findElementByTarget(c.target);f&&f.setPlacementFromConstraint(),this.moved.next(Date.now()),this.ignoreDataUpdate=!1,this.setNonTargetPointerEvents(c.target,!1)}).on("resizeStart",c=>{const f=this.findElementByTarget(c.target);f&&(f.tempConstraint={...f.options.constraint},f.options.constraint={vertical:fe.fJ.Top,horizontal:fe._5.Left},f.setPlacementFromConstraint())}).on("resize",c=>{const f=this.findElementByTarget(c.target);f&&(f.applyResize(c),this.connections.connectionsNeedUpdate(f)&&this.moveableActionCallback&&this.moveableActionCallback(!0)),this.moved.next(Date.now())}).on("resizeGroup",c=>{let f=!1;for(let d of c.events){const v=this.findElementByTarget(d.target);v&&(v.applyResize(d),f||(f=this.connections.connectionsNeedUpdate(v)))}f&&this.moveableActionCallback&&this.moveableActionCallback(!0),this.moved.next(Date.now())}).on("resizeEnd",c=>{const f=this.findElementByTarget(c.target);f&&(f.tempConstraint&&(f.options.constraint=f.tempConstraint,f.tempConstraint=void 0),f.setPlacementFromConstraint())});let u=[];this.selecto.on("dragStart",c=>{const f=c.inputEvent.target;if(f.id===wc){this.connections.handleConnectionDragStart(f,c.inputEvent.clientX,c.inputEvent.clientY),c.stop();return}const d=this.moveable.isMoveableElement(f)||u.some(p=>p===f||p.contains(f)),v=this.selecto?.getSelectedTargets().includes(f.parentElement.parentElement);this.isEditingEnabled&&!this.editModeEnabled.getValue()&&d&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),(d||v||!this.isEditingEnabled)&&c.stop()}).on("select",()=>{this.editModeEnabled.next(!1),this.connections.connectionAnchorDiv&&(this.connections.connectionAnchorDiv.style.display="none")}).on("selectEnd",c=>{u=c.selected,this.updateSelection({targets:u}),c.isDragStart&&(this.isEditingEnabled&&!this.editModeEnabled.getValue()&&this.selecto?.getSelectedTargets().length&&(this.selecto.getSelectedTargets()[0].style.cursor="grabbing"),c.inputEvent.preventDefault(),c.data.timer=setTimeout(()=>{this.moveable.dragStart(c.inputEvent)}))}).on("dragEnd",c=>{clearTimeout(c.data.timer)})},this.reorderElements=(s,o,l,u)=>{switch(l){case!0:switch(u){case-1:s.parent instanceof qt.f?o.parent&&(this.updateElements(s,o.parent,o.parent.elements.length),s.updateData(o.parent.scene.context)):o.parent?.reorderTree(s,o,!0);break;default:o.parent&&(this.updateElements(s,o.parent,o.parent.elements.indexOf(o)),s.updateData(o.parent.scene.context));break}break;case!1:o instanceof qt.f?s.parent===o?s.parent?.reorderTree(s,o,!0):(this.updateElements(s,o),s.updateData(o.scene.context)):s.parent===o.parent?s.parent?.reorderTree(s,o):o.parent&&(this.updateElements(s,o.parent),s.updateData(o.parent.scene.context));break}},this.updateElements=(s,o,l=null)=>{s.parent?.doAction(Ft.G.Delete,s),s.parent=o;const u=s.div?.getBoundingClientRect();s.setPlacementFromConstraint(u,o.div?.getBoundingClientRect());const c=l??o.elements.length-1;o.elements.splice(c,0,s),o.scene.save(),o.reinitializeMoveable()},this.addToSelection=()=>{try{let s={targets:[]};s.targets=[...this.targetsToSelect],this.select(s)}catch{P0.Z.emit(h0.SI.alertError,["Unable to add to selection"])}},this.root=this.load(e,n,r),this.subscription=this.editModeEnabled.subscribe(s=>{!this.moveable||!this.isEditingEnabled||(this.moveable.draggable=!s)}),this.panel=i,this.connections=new k0(this)}load(e,n,r){return this.root=new B0(e??{type:"frame",elements:[tt.Nm]},this,this.save),this.isEditingEnabled=n,this.shouldShowAdvancedTypes=r,setTimeout(()=>{if(this.div){const a=n;this.initMoveable(a,n),this.currentLayer=this.root,this.selection.next([])}}),this.root}updateData(e){this.data=e,this.root.updateData(this.context)}updateSize(e,n){this.width=e,this.height=n,this.style={width:e,height:n},this.selecto?.getSelectedTargets().length&&this.clearCurrentSelection()}frameSelection(){this.selection.pipe((0,oc.P)()).subscribe(e=>{const n=e[0].parent,r=new qt.f({type:"frame",name:this.getNextElementName(!0),elements:[]},this,e[0].parent),a=this.generateFrameContainer(e);r.options.placement=a,e.forEach(i=>{const s=i.div?.getBoundingClientRect();i.setPlacementFromConstraint(s,a),n.doAction(Ft.G.Delete,i),r.doAction(Ft.G.Duplicate,i,!1,!1)}),r.setPlacementFromConstraint(a,n.div?.getBoundingClientRect()),n.elements.push(r),this.byName.set(r.getName(),r),this.save()})}clearCurrentSelection(e=!1){this.skipNextSelectionBroadcast=e;let n=new MouseEvent("click");this.selecto?.clickTarget(n,this.div)}updateCurrentLayer(e){this.currentLayer=e,this.clearCurrentSelection(),this.save()}render(){const e=this.isPanelEditing||!this.isPanelEditing&&this.isEditingEnabled,n=!this.isEditingEnabled&&this.tooltip?.element&&this.tooltip.element.data.links?.length>0;return w.createElement("div",{key:this.revId,className:this.styles.wrap,style:this.style,ref:this.setRef},this.connections.render(),this.root.render(),e&&w.createElement(sn.h_,null,w.createElement(y0,{scene:this,panel:this.panel})),n&&w.createElement(sn.h_,null,w.createElement(C0,{scene:this})))}}const G0=(0,g0.B)(t=>({wrap:vt.css`
    overflow: hidden;
    position: relative;
  `,selected:vt.css`
    z-index: 999 !important;
  `}));var Mc=z(45984),F0=z(53004),z0=z.n(F0),K0=z(87638),be=z(8180),Tc=z(58379),fo=z(82897),Rc=z(3499),Oc=z(72243),H0=z(91183),vo=z(91752),W0=z(57054),po=z(13505),Y0=z(72142),j0=z(79841);const V0=({onTabChange:t})=>{const[e,n]=(0,w.useState)(Ft.o.SelectedElement),r=[{label:"Selected Element",value:Ft.o.SelectedElement},{label:"Element Management",value:Ft.o.ElementManagement}],a=i=>{t(i),n(i)};return w.createElement(w.Fragment,null,w.createElement(Y0.J,null,r.map((i,s)=>w.createElement(j0.O,{key:`${i.value}-${s}`,label:i.label,active:i.value===e,onChangeTab:()=>a(i.value)}))))};var kc=z(24799),ho=z(39904),Pc=z(53217),$0=z(11543),X0=z(81764),U0=z(45458);const Z0=({onVerticalConstraintChange:t,onHorizontalConstraintChange:e,currentConstraints:n})=>{const r=(0,se.wW)(q0(n)),a=()=>{t(tt.fJ.Top)},i=()=>{t(tt.fJ.Bottom)},s=()=>{t(tt.fJ.Center)},o=()=>{e(tt._5.Left)},l=()=>{e(tt._5.Right)},u=()=>{e(tt._5.Center)};return w.createElement("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"75.000000pt",height:"75.000000pt",viewBox:"0 0 228.000000 228.000000",preserveAspectRatio:"xMidYMid meet",style:{marginBottom:"4.8px"}},w.createElement("g",{transform:"translate(0.000000,228.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},w.createElement("path",{fill:"#e5e5e5",d:`M198 2028 l-28 -32 0 -912 0 -912 31 -31 31 -31 915 0 915 0 29 29
29 29 0 917 0 917 -27 29 -28 29 -920 0 -920 0 -27 -32z m1876 -17 c15 -16 16
-98 16 -927 0 -860 -1 -909 -18 -926 -17 -17 -66 -18 -927 -18 -862 0 -910 1
-927 18 -17 17 -18 65 -18 926 0 832 1 911 16 927 16 18 45 19 468 21 248 2
659 2 912 0 431 -2 462 -4 478 -21z`}),w.createElement("rect",{className:r.topConstraint,height:"228",width:"46",y:"1735",x:"1123"}),w.createElement("rect",{className:r.constraintHover,onClick:a,height:"350",width:"300",y:"1680",x:"995",fill:"transparent"}),w.createElement("rect",{className:r.bottomConstraint,height:"228",width:"46",y:"210",x:"1123"}),w.createElement("rect",{className:r.constraintHover,onClick:i,height:"350",width:"300",y:"135",x:"995",fill:"transparent"}),w.createElement("rect",{className:r.leftConstraint,height:"46",width:"228",y:"1060",x:"265"}),w.createElement("rect",{className:r.constraintHover,onClick:o,height:"300",width:"350",y:"925",x:"200",fill:"transparent"}),w.createElement("rect",{className:r.rightConstraint,height:"46",width:"228",y:"1060",x:"1795"}),w.createElement("rect",{className:r.constraintHover,onClick:l,height:"300",width:"350",y:"925",x:"1730",fill:"transparent"}),w.createElement("path",{className:r.box,d:`M568 1669 c-17 -9 -18 -48 -18 -584 0 -558 1 -575 19 -585 27 -14
1125 -14 1152 0 18 10 19 27 19 580 0 504 -2 570 -16 584 -14 14 -80 16 -577
16 -363 -1 -568 -4 -579 -11z m1119 -42 c4 -5 4 -1079 0 -1084 -5 -4 -1079 -4
-1084 0 -5 6 -4 1077 1 1085 4 7 1076 6 1083 -1z`}),w.createElement("rect",{className:r.verticalCenterConstraint,height:"456",width:"46",y:"855",x:"1123"}),w.createElement("rect",{className:r.constraintHover,onClick:s,height:"660",width:"300",y:"750",x:"995",fill:"transparent"}),w.createElement("rect",{className:r.horizontalCenterConstraint,height:"46",width:"456",y:"1060",x:"918"}),w.createElement("rect",{className:r.constraintHover,onClick:u,height:"300",width:"660",y:"925",x:"815",fill:"transparent"})))},q0=t=>e=>{const n="#daebf7",r="0.6",a="#0d99ff",i=e.isDark?"#ffffff":"#000000";return{constraintHover:vt.css`
      &:hover {
        fill: ${n};
        fill-opacity: ${r};
      }
    `,topConstraint:vt.css`
      ${t.vertical===tt.fJ.Top||t.vertical===tt.fJ.TopBottom?`width: 92pt; x: 1085; fill: ${a};`:`fill: ${i};`}
    `,bottomConstraint:vt.css`
      ${t.vertical===tt.fJ.Bottom||t.vertical===tt.fJ.TopBottom?`width: 92pt; x: 1085; fill: ${a};`:`fill: ${i};`}
    `,leftConstraint:vt.css`
      ${t.horizontal===tt._5.Left||t.horizontal===tt._5.LeftRight?`height: 92pt; y: 1014; fill: ${a};`:`fill: ${i};`}
    `,rightConstraint:vt.css`
      ${t.horizontal===tt._5.Right||t.horizontal===tt._5.LeftRight?`height: 92pt; y: 1014; fill: ${a};`:`fill: ${i};`}
    `,horizontalCenterConstraint:vt.css`
      ${t.horizontal===tt._5.Center?`height: 92pt; y: 1014; fill: ${a};`:`fill: ${i};`}
    `,verticalCenterConstraint:vt.css`
      ${t.vertical===tt.fJ.Center?`width: 92pt; x: 1085; fill: ${a};`:`fill: ${i};`}
    `,box:vt.css`
      fill: ${i};
    `}},J0=({onPositionChange:t,element:e,settings:n})=>{const r=(0,se.wW)(Q0),a=o=>{const l={vertical:tt.fJ.Top,horizontal:tt._5.Left},u={...e.options.constraint};switch(e.options.constraint=l,e.setPlacementFromConstraint(),o){case tt.Ru.Top:t(0,"top");break;case tt.Ru.Bottom:t(s(e.options.placement?.height??0,"bottom"),"top");break;case tt.Ru.VerticalCenter:t(i(e.options.placement?.height??0,"v"),"top");break;case tt.Ru.Left:t(0,"left");break;case tt.Ru.Right:t(s(e.options.placement?.width??0,"right"),"left");break;case tt.Ru.HorizontalCenter:t(i(e.options.placement?.width??0,"h"),"left");break}e.options.constraint=u,e.setPlacementFromConstraint()},i=(o,l)=>((l==="h"?n.scene.width:n.scene.height)-o)/2,s=(o,l)=>(l==="right"?n.scene.width:n.scene.height)-o;return w.createElement("div",{className:r.buttonGroup},w.createElement(be.h,{name:"horizontal-align-left",onClick:()=>a(tt.Ru.Left),className:r.button,size:"lg",tooltip:"Align left"}),w.createElement(be.h,{name:"horizontal-align-center",onClick:()=>a(tt.Ru.HorizontalCenter),className:r.button,size:"lg",tooltip:"Align horizontal centers"}),w.createElement(be.h,{name:"horizontal-align-right",onClick:()=>a(tt.Ru.Right),className:r.button,size:"lg",tooltip:"Align right"}),w.createElement(be.h,{name:"vertical-align-top",onClick:()=>a(tt.Ru.Top),size:"lg",tooltip:"Align top"}),w.createElement(be.h,{name:"vertical-align-center",onClick:()=>a(tt.Ru.VerticalCenter),className:r.button,size:"lg",tooltip:"Align vertical centers"}),w.createElement(be.h,{name:"vertical-align-bottom",onClick:()=>a(tt.Ru.Bottom),className:r.button,size:"lg",tooltip:"Align bottom"}))},Q0=t=>({buttonGroup:vt.css`
    display: flex;
    flex-wrap: wrap;
    padding: 12px 0 12px 0;
  `,button:vt.css`
    margin-left: 5px;
    margin-right: 5px;
  `}),tm=["top","left","bottom","right","width","height"],em=[{label:"Left",value:tt._5.Left},{label:"Right",value:tt._5.Right},{label:"Left & right",value:tt._5.LeftRight},{label:"Center",value:tt._5.Center},{label:"Scale",value:tt._5.Scale}],rm=[{label:"Top",value:tt.fJ.Top},{label:"Bottom",value:tt.fJ.Bottom},{label:"Top & bottom",value:tt.fJ.TopBottom},{label:"Center",value:tt.fJ.Center},{label:"Scale",value:tt.fJ.Scale}];function Ac({item:t}){const e=t.settings;if((0,Rc.Z)(e?.scene?e.scene.moved:new ic.x),!e)return w.createElement("div",null,"Loading...");const n=e.element;if(!n)return w.createElement("div",null,"???");const{options:r}=n,{placement:a,constraint:i}=r,s=()=>{setTimeout(()=>{e.scene.select({targets:[n.div]})})},o=v=>{l(v.value)},l=v=>{n.options.constraint.horizontal=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},u=v=>{c(v.value)},c=v=>{n.options.constraint.vertical=v,n.setPlacementFromConstraint(),e.scene.revId++,e.scene.save(!0),s()},f=(v,p)=>{n.options.placement[p]=v??n.options.placement[p],n.applyLayoutStylesToDiv(),e.scene.clearCurrentSelection(!0),s()},d=n.tempConstraint??i??{};return w.createElement("div",null,w.createElement(J0,{onPositionChange:f,settings:e,element:n}),w.createElement("br",null),w.createElement(kc.g,{label:"Constraints"},w.createElement(Cr.Lh,null,w.createElement(Z0,{onVerticalConstraintChange:c,onHorizontalConstraintChange:l,currentConstraints:d}),w.createElement(Cr.wc,null,w.createElement(Cr.Lh,null,w.createElement(ho.J,{name:"arrows-h"}),w.createElement(Pc.Ph,{options:em,onChange:o,value:d.horizontal})),w.createElement(Cr.Lh,null,w.createElement(ho.J,{name:"arrows-v"}),w.createElement(Pc.Ph,{options:rm,onChange:u,value:d.vertical}))))),w.createElement("br",null),w.createElement(kc.g,{label:"Position"},w.createElement(w.Fragment,null,tm.map(v=>{const p=a[v];return p==null?null:w.createElement($0.Z,{key:v},w.createElement(X0._,{label:v,labelWidth:8,grow:!0},w.createElement(U0.Y,{value:p,onChange:h=>f(h,v)})))}))))}var ia=z(28528);function Ic(t){return{category:t.category,path:"--",values:e=>({getValue:n=>(0,fo.get)(t.element.options,n),onChange:(n,r)=>{let a=t.element.options;if(n==="type"&&r){const i=tt.Jk.getIfExists(r);if(!i){console.warn("layer does not exist",r);return}a={...a,...i.getNewOptions(a),type:i.id}}else a=(0,po.hs)(a,n,r);t.element.onChange(a),t.element.updateData(t.scene.context)}}),build:(e,n)=>{const{options:r}=t.element,a=r?.type?r.type:tt.Nm.type,i=(0,oe.JI)(t.scene.shouldShowAdvancedTypes,a).options,s=!t.scene.shouldShowAdvancedTypes&&!tt.NQ.filter(c=>c.id===r?.type).length;e.addSelect({path:"type",name:void 0,settings:{options:i},description:s?"Selected element type is not supported by current settings. Please enable advanced element types.":""});const o=tt.Jk.getIfExists(r?.type??tt.Nm.type);let l=r;l||(l={...o.getNewOptions(r),type:o.id,name:`Element ${Date.now()}.${Math.floor(Math.random()*100)}`});const u={...n,options:l};o?.registerOptionsUI&&o.registerOptionsUI(e,u),e.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Quick placement",editor:Ac,settings:t}),ia.I.addBackground(e,u),ia.I.addBorder(e,u)}}}var Nc=z(39341),de=z(22060),Dt=z(85919),go=z(98253),Nt=z(23106),ir=z(78992),Bc=z(68409),Lc=z(94345),Be=z(43166),Gc=z(45980),Fc=z(91534),wr=z(79003),Le=z(54411),zc=z(65745),nm=z(23019),Ut=z.n(nm),mo=w.createContext(null),oa=z(35920),am=function(e){for(var n=e.prefixCls,r=e.level,a=e.isStart,i=e.isEnd,s="".concat(n,"-indent-unit"),o=[],l=0;l<r;l+=1){var u;o.push(w.createElement("span",{key:l,className:Ut()(s,(u={},(0,Dt.Z)(u,"".concat(s,"-start"),a[l]),(0,Dt.Z)(u,"".concat(s,"-end"),i[l]),u))}))}return w.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},o)};const im=w.memo(am);var om=z(5101),sm=z(77545),lm=["children"];function un(t,e){return t??e}function sa(t){var e=t||{},n=e.title,r=e._title,a=e.key,i=e.children,s=n||"title";return{title:s,_title:r||[s],key:a||"key",children:i||"children"}}function PE(t,e){var n=new Map;function r(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(a||[]).forEach(function(s){var o=s[e.key],l=s[e.children];warning(o!=null,"Tree node must have a certain key: [".concat(i).concat(o,"]"));var u=String(o);warning(!n.has(u)||o===null||o===void 0,"Same 'key' exist in the Tree: ".concat(u)),n.set(u,!0),r(l,"".concat(i).concat(u," > "))})}r(t)}function um(t){function e(n){var r=(0,sm.Z)(n);return r.map(function(a){if(!gm(a))return(0,Le.ZP)(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var i=a.key,s=a.props,o=s.children,l=(0,oa.Z)(s,lm),u=(0,Nt.Z)({key:i},l),c=e(o);return c.length&&(u.children=c),u}).filter(function(a){return a})}return e(t)}function yo(t,e,n){var r=sa(n),a=r._title,i=r.key,s=r.children,o=new Set(e===!0?[]:e),l=[];function u(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return c.map(function(d,v){for(var p=Wc(f?f.pos:"0",v),h=un(d[i],p),g,m=0;m<a.length;m+=1){var y=a[m];if(d[y]!==void 0){g=d[y];break}}var E=(0,Nt.Z)((0,Nt.Z)({},(0,om.Z)(d,[].concat((0,ir.Z)(a),[i,s]))),{},{title:g,key:h,parent:f,pos:p,children:null,data:d,isStart:[].concat((0,ir.Z)(f?f.isStart:[]),[v===0]),isEnd:[].concat((0,ir.Z)(f?f.isEnd:[]),[v===c.length-1])});return l.push(E),e===!0||o.has(h)?E.children=u(d[s]||[],E):E.children=[],E})}return u(t),l}function cm(t,e,n){var r={};(0,go.Z)(n)==="object"?r=n:r={externalGetKey:n},r=r||{};var a=r,i=a.childrenPropName,s=a.externalGetKey,o=a.fieldNames,l=sa(o),u=l.key,c=l.children,f=i||c,d;s?typeof s=="string"?d=function(h){return h[s]}:typeof s=="function"&&(d=function(h){return s(h)}):d=function(h,g){return un(h[u],g)};function v(p,h,g,m){var y=p?p[f]:t,E=p?Wc(g.pos,h):"0",b=p?[].concat((0,ir.Z)(m),[p]):[];if(p){var x=d(p,E),_={node:p,index:h,pos:E,key:x,parentPos:g.node?g.pos:null,level:g.level+1,nodes:b};e(_)}y&&y.forEach(function(S,D){v(S,D,{node:p,pos:E,level:g?g.level+1:-1},b)})}v(null)}function fm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.initWrapper,r=e.processEntity,a=e.onProcessFinished,i=e.externalGetKey,s=e.childrenPropName,o=e.fieldNames,l=arguments.length>2?arguments[2]:void 0,u=i||l,c={},f={},d={posEntities:c,keyEntities:f};return n&&(d=n(d)||d),cm(t,function(v){var p=v.node,h=v.index,g=v.pos,m=v.key,y=v.parentPos,E=v.level,b=v.nodes,x={node:p,nodes:b,index:h,key:m,pos:g,level:E},_=un(m,g);c[g]=x,f[_]=x,x.parent=c[y],x.parent&&(x.parent.children=x.parent.children||[],x.parent.children.push(x)),r&&r(x,d)},{externalGetKey:u,childrenPropName:s,fieldNames:o}),a&&a(d),d}function cn(t,e){var n=e.expandedKeys,r=e.selectedKeys,a=e.loadedKeys,i=e.loadingKeys,s=e.checkedKeys,o=e.halfCheckedKeys,l=e.dragOverNodeKey,u=e.dropPosition,c=e.keyEntities,f=c[t],d={eventKey:t,expanded:n.indexOf(t)!==-1,selected:r.indexOf(t)!==-1,loaded:a.indexOf(t)!==-1,loading:i.indexOf(t)!==-1,checked:s.indexOf(t)!==-1,halfChecked:o.indexOf(t)!==-1,pos:String(f?f.pos:""),dragOver:l===t&&u===0,dragOverGapTop:l===t&&u===-1,dragOverGapBottom:l===t&&u===1};return d}function Tt(t){var e=t.data,n=t.expanded,r=t.selected,a=t.checked,i=t.loaded,s=t.loading,o=t.halfChecked,l=t.dragOver,u=t.dragOverGapTop,c=t.dragOverGapBottom,f=t.pos,d=t.active,v=t.eventKey,p=(0,Nt.Z)((0,Nt.Z)({},e),{},{expanded:n,selected:r,checked:a,loaded:i,loading:s,halfChecked:o,dragOver:l,dragOverGapTop:u,dragOverGapBottom:c,pos:f,active:d,key:v});return"props"in p||Object.defineProperty(p,"props",{get:function(){return(0,Le.ZP)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),t}}),p}var dm=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],Kc="open",Hc="close",vm="---",pm=function(t){(0,Gc.Z)(n,t);var e=(0,Fc.Z)(n);function n(){var r;(0,Bc.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.state={dragNodeHighlight:!1},r.selectHandle=void 0,r.onSelectorClick=function(o){var l=r.props.context.onNodeClick;l(o,Tt(r.props)),r.isSelectable()?r.onSelect(o):r.onCheck(o)},r.onSelectorDoubleClick=function(o){var l=r.props.context.onNodeDoubleClick;l(o,Tt(r.props))},r.onSelect=function(o){if(!r.isDisabled()){var l=r.props.context.onNodeSelect;o.preventDefault(),l(o,Tt(r.props))}},r.onCheck=function(o){if(!r.isDisabled()){var l=r.props,u=l.disableCheckbox,c=l.checked,f=r.props.context.onNodeCheck;if(!(!r.isCheckable()||u)){o.preventDefault();var d=!c;f(o,Tt(r.props),d)}}},r.onMouseEnter=function(o){var l=r.props.context.onNodeMouseEnter;l(o,Tt(r.props))},r.onMouseLeave=function(o){var l=r.props.context.onNodeMouseLeave;l(o,Tt(r.props))},r.onContextMenu=function(o){var l=r.props.context.onNodeContextMenu;l(o,Tt(r.props))},r.onDragStart=function(o){var l=r.props.context.onNodeDragStart;o.stopPropagation(),r.setState({dragNodeHighlight:!0}),l(o,(0,Be.Z)(r));try{o.dataTransfer.setData("text/plain","")}catch{}},r.onDragEnter=function(o){var l=r.props.context.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),l(o,(0,Be.Z)(r))},r.onDragOver=function(o){var l=r.props.context.onNodeDragOver;o.preventDefault(),o.stopPropagation(),l(o,(0,Be.Z)(r))},r.onDragLeave=function(o){var l=r.props.context.onNodeDragLeave;o.stopPropagation(),l(o,(0,Be.Z)(r))},r.onDragEnd=function(o){var l=r.props.context.onNodeDragEnd;o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,Be.Z)(r))},r.onDrop=function(o){var l=r.props.context.onNodeDrop;o.preventDefault(),o.stopPropagation(),r.setState({dragNodeHighlight:!1}),l(o,(0,Be.Z)(r))},r.onExpand=function(o){var l=r.props,u=l.loading,c=l.context.onNodeExpand;u||c(o,Tt(r.props))},r.setSelectHandle=function(o){r.selectHandle=o},r.getNodeState=function(){var o=r.props.expanded;return r.isLeaf()?null:o?Kc:Hc},r.hasChildren=function(){var o=r.props.eventKey,l=r.props.context.keyEntities,u=l[o]||{},c=u.children;return!!(c||[]).length},r.isLeaf=function(){var o=r.props,l=o.isLeaf,u=o.loaded,c=r.props.context.loadData,f=r.hasChildren();return l===!1?!1:l||!c&&!f||c&&u&&!f},r.isDisabled=function(){var o=r.props.disabled,l=r.props.context.disabled;return!!(l||o)},r.isCheckable=function(){var o=r.props.checkable,l=r.props.context.checkable;return!l||o===!1?!1:l},r.syncLoadData=function(o){var l=o.expanded,u=o.loading,c=o.loaded,f=r.props.context,d=f.loadData,v=f.onNodeLoad;u||d&&l&&!r.isLeaf()&&!r.hasChildren()&&!c&&v(Tt(r.props))},r.isDraggable=function(){var o=r.props,l=o.data,u=o.context.draggable;return!!(u&&(!u.nodeDraggable||u.nodeDraggable(l)))},r.renderDragHandler=function(){var o=r.props.context,l=o.draggable,u=o.prefixCls;return l?.icon?w.createElement("span",{className:"".concat(u,"-draggable-icon")},l.icon):null},r.renderSwitcherIconDom=function(o){var l=r.props.switcherIcon,u=r.props.context.switcherIcon,c=l||u;return typeof c=="function"?c((0,Nt.Z)((0,Nt.Z)({},r.props),{},{isLeaf:o})):c},r.renderSwitcher=function(){var o=r.props.expanded,l=r.props.context.prefixCls;if(r.isLeaf()){var u=r.renderSwitcherIconDom(!0);return u!==!1?w.createElement("span",{className:Ut()("".concat(l,"-switcher"),"".concat(l,"-switcher-noop"))},u):null}var c=Ut()("".concat(l,"-switcher"),"".concat(l,"-switcher_").concat(o?Kc:Hc)),f=r.renderSwitcherIconDom(!1);return f!==!1?w.createElement("span",{onClick:r.onExpand,className:c},f):null},r.renderCheckbox=function(){var o=r.props,l=o.checked,u=o.halfChecked,c=o.disableCheckbox,f=r.props.context.prefixCls,d=r.isDisabled(),v=r.isCheckable();if(!v)return null;var p=typeof v!="boolean"?v:null;return w.createElement("span",{className:Ut()("".concat(f,"-checkbox"),l&&"".concat(f,"-checkbox-checked"),!l&&u&&"".concat(f,"-checkbox-indeterminate"),(d||c)&&"".concat(f,"-checkbox-disabled")),onClick:r.onCheck},p)},r.renderIcon=function(){var o=r.props.loading,l=r.props.context.prefixCls;return w.createElement("span",{className:Ut()("".concat(l,"-iconEle"),"".concat(l,"-icon__").concat(r.getNodeState()||"docu"),o&&"".concat(l,"-icon_loading"))})},r.renderSelector=function(){var o=r.state.dragNodeHighlight,l=r.props,u=l.title,c=l.selected,f=l.icon,d=l.loading,v=l.data,p=r.props.context,h=p.prefixCls,g=p.showIcon,m=p.icon,y=p.loadData,E=p.titleRender,b=r.isDisabled(),x="".concat(h,"-node-content-wrapper"),_;if(g){var S=f||m;_=S?w.createElement("span",{className:Ut()("".concat(h,"-iconEle"),"".concat(h,"-icon__customize"))},typeof S=="function"?S(r.props):S):r.renderIcon()}else y&&d&&(_=r.renderIcon());var D;typeof u=="function"?D=u(v):E?D=E(v):D=u;var C=w.createElement("span",{className:"".concat(h,"-title")},D);return w.createElement("span",{ref:r.setSelectHandle,title:typeof u=="string"?u:"",className:Ut()("".concat(x),"".concat(x,"-").concat(r.getNodeState()||"normal"),!b&&(c||o)&&"".concat(h,"-node-selected")),onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onContextMenu:r.onContextMenu,onClick:r.onSelectorClick,onDoubleClick:r.onSelectorDoubleClick},_,C,r.renderDropIndicator())},r.renderDropIndicator=function(){var o=r.props,l=o.disabled,u=o.eventKey,c=r.props.context,f=c.draggable,d=c.dropLevelOffset,v=c.dropPosition,p=c.prefixCls,h=c.indent,g=c.dropIndicatorRender,m=c.dragOverNodeKey,y=c.direction,E=!!f,b=!l&&E&&m===u;return b?g({dropPosition:v,dropLevelOffset:d,indent:h,prefixCls:p,direction:y}):null},r}return(0,Lc.Z)(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var a=this.props.selectable,i=this.props.context.selectable;return typeof a=="boolean"?a:i}},{key:"render",value:function(){var a,i=this.props,s=i.eventKey,o=i.className,l=i.style,u=i.dragOver,c=i.dragOverGapTop,f=i.dragOverGapBottom,d=i.isLeaf,v=i.isStart,p=i.isEnd,h=i.expanded,g=i.selected,m=i.checked,y=i.halfChecked,E=i.loading,b=i.domRef,x=i.active,_=i.data,S=i.onMouseMove,D=i.selectable,C=(0,oa.Z)(i,dm),M=this.props.context,R=M.prefixCls,T=M.filterTreeNode,P=M.keyEntities,k=M.dropContainerKey,A=M.dropTargetKey,N=M.draggingNodeKey,G=this.isDisabled(),B=(0,zc.Z)(C,{aria:!0,data:!0}),F=P[s]||{},I=F.level,L=p[p.length-1],K=this.isDraggable(),W=!G&&K,Y=N===s,H=D!==void 0?{"aria-selected":!!D}:void 0;return w.createElement("div",(0,de.Z)({ref:b,className:Ut()(o,"".concat(R,"-treenode"),(a={},(0,Dt.Z)(a,"".concat(R,"-treenode-disabled"),G),(0,Dt.Z)(a,"".concat(R,"-treenode-switcher-").concat(h?"open":"close"),!d),(0,Dt.Z)(a,"".concat(R,"-treenode-checkbox-checked"),m),(0,Dt.Z)(a,"".concat(R,"-treenode-checkbox-indeterminate"),y),(0,Dt.Z)(a,"".concat(R,"-treenode-selected"),g),(0,Dt.Z)(a,"".concat(R,"-treenode-loading"),E),(0,Dt.Z)(a,"".concat(R,"-treenode-active"),x),(0,Dt.Z)(a,"".concat(R,"-treenode-leaf-last"),L),(0,Dt.Z)(a,"".concat(R,"-treenode-draggable"),K),(0,Dt.Z)(a,"dragging",Y),(0,Dt.Z)(a,"drop-target",A===s),(0,Dt.Z)(a,"drop-container",k===s),(0,Dt.Z)(a,"drag-over",!G&&u),(0,Dt.Z)(a,"drag-over-gap-top",!G&&c),(0,Dt.Z)(a,"drag-over-gap-bottom",!G&&f),(0,Dt.Z)(a,"filter-node",T&&T(Tt(this.props))),a)),style:l,draggable:W,"aria-grabbed":Y,onDragStart:W?this.onDragStart:void 0,onDragEnter:K?this.onDragEnter:void 0,onDragOver:K?this.onDragOver:void 0,onDragLeave:K?this.onDragLeave:void 0,onDrop:K?this.onDrop:void 0,onDragEnd:K?this.onDragEnd:void 0,onMouseMove:S},H,B),w.createElement(im,{prefixCls:R,level:I,isStart:v,isEnd:p}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(w.Component),la=function(e){return w.createElement(mo.Consumer,null,function(n){return w.createElement(pm,(0,de.Z)({},e,{context:n}))})};la.displayName="TreeNode",la.defaultProps={title:vm},la.isTreeNode=1;const bo=la;var hm=null;function Ee(t,e){if(!t)return[];var n=t.slice(),r=n.indexOf(e);return r>=0&&n.splice(r,1),n}function Ge(t,e){var n=(t||[]).slice();return n.indexOf(e)===-1&&n.push(e),n}function Eo(t){return t.split("-")}function Wc(t,e){return"".concat(t,"-").concat(e)}function gm(t){return t&&t.type&&t.type.isTreeNode}function mm(t,e){var n=[],r=e[t];function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(s){var o=s.key,l=s.children;n.push(o),a(l)})}return a(r.children),n}function ym(t){if(t.parent){var e=Eo(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function bm(t){var e=Eo(t.pos);return Number(e[e.length-1])===0}function Yc(t,e,n,r,a,i,s,o,l,u){var c,f=t.clientX,d=t.clientY,v=t.target.getBoundingClientRect(),p=v.top,h=v.height,g=(u==="rtl"?-1:1)*((a?.x||0)-f),m=(g-12)/r,y=o[n.props.eventKey];if(d<p+h/2){var E=s.findIndex(function(A){return A.key===y.key}),b=E<=0?0:E-1,x=s[b].key;y=o[x]}var _=y.key,S=y,D=y.key,C=0,M=0;if(!l.includes(_))for(var R=0;R<m&&ym(y);R+=1)y=y.parent,M+=1;var T=e.props.data,P=y.node,k=!0;return bm(y)&&y.level===0&&d<p+h/2&&i({dragNode:T,dropNode:P,dropPosition:-1})&&y.key===n.props.eventKey?C=-1:(S.children||[]).length&&l.includes(D)?i({dragNode:T,dropNode:P,dropPosition:0})?C=0:k=!1:M===0?m>-1.5?i({dragNode:T,dropNode:P,dropPosition:1})?C=1:k=!1:i({dragNode:T,dropNode:P,dropPosition:0})?C=0:i({dragNode:T,dropNode:P,dropPosition:1})?C=1:k=!1:i({dragNode:T,dropNode:P,dropPosition:1})?C=1:k=!1,{dropPosition:C,dropLevelOffset:M,dropTargetKey:y.key,dropTargetPos:y.pos,dragOverNodeKey:D,dropContainerKey:C===0?null:((c=y.parent)===null||c===void 0?void 0:c.key)||null,dropAllowed:k}}function jc(t,e){if(t){var n=e.multiple;return n?t.slice():t.length?[t[0]]:t}}var Em=function(e){return e};function Sm(t,e){if(!t)return[];var n=e||{},r=n.processProps,a=r===void 0?Em:r,i=Array.isArray(t)?t:[t];return i.map(function(s){var o=s.children,l=_objectWithoutProperties(s,hm),u=Sm(o,e);return React.createElement(TreeNode,_extends({key:l.key},a(l)),u)})}function So(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if((0,go.Z)(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return(0,Le.ZP)(!1,"`checkedKeys` is not an array or an object"),null;return e}function Vc(t,e){var n=new Set;function r(a){if(!n.has(a)){var i=e[a];if(i){n.add(a);var s=i.parent,o=i.node;o.disabled||s&&r(s.key)}}}return(t||[]).forEach(function(a){r(a)}),(0,ir.Z)(n)}function $c(t){if(t==null)throw new TypeError("Cannot destructure "+t)}var Dr=z(14162),_m=z(87188);function Xc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Uc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xc(Object(n),!0).forEach(function(r){Zc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qc=w.forwardRef(function(t,e){var n=t.height,r=t.offset,a=t.children,i=t.prefixCls,s=t.onInnerResize,o={},l={display:"flex",flexDirection:"column"};return r!==void 0&&(o={height:n,position:"relative",overflow:"hidden"},l=Uc(Uc({},l),{},{transform:"translateY(".concat(r,"px)"),position:"absolute",left:0,right:0,top:0})),w.createElement("div",{style:o},w.createElement(_m.Z,{onResize:function(c){var f=c.offsetHeight;f&&s&&s()}},w.createElement("div",{style:l,className:Ut()(Zc({},"".concat(i,"-holder-inner"),i)),ref:e},a)))});qc.displayName="Filler";const xm=qc;var Se=z(7967);function _o(t){return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(t)}function Jc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wm(t,e,n){return e&&Qc(t.prototype,e),n&&Qc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}function xo(t,e){return xo=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},xo(t,e)}function Mm(t){var e=Om();return function(){var r=ua(t),a;if(e){var i=ua(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Tm(this,a)}}function Tm(t,e){if(e&&(_o(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rm(t)}function Rm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Om(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ua(t){return ua=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ua(t)}var km=20;function tf(t){return"touches"in t?t.touches[0].pageY:t.pageY}var Pm=function(t){Dm(n,t);var e=Mm(n);function n(){var r;Cm(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.moveRaf=null,r.scrollbarRef=w.createRef(),r.thumbRef=w.createRef(),r.visibleTimeout=null,r.state={dragging:!1,pageY:null,startTop:null,visible:!1},r.delayHidden=function(){clearTimeout(r.visibleTimeout),r.setState({visible:!0}),r.visibleTimeout=setTimeout(function(){r.setState({visible:!1})},2e3)},r.onScrollbarTouchStart=function(o){o.preventDefault()},r.onContainerMouseDown=function(o){o.stopPropagation(),o.preventDefault()},r.patchEvents=function(){window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.onMouseUp),r.thumbRef.current.addEventListener("touchmove",r.onMouseMove),r.thumbRef.current.addEventListener("touchend",r.onMouseUp)},r.removeEvents=function(){var o;window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.onMouseUp),(o=r.scrollbarRef.current)===null||o===void 0||o.removeEventListener("touchstart",r.onScrollbarTouchStart),r.thumbRef.current&&(r.thumbRef.current.removeEventListener("touchstart",r.onMouseDown),r.thumbRef.current.removeEventListener("touchmove",r.onMouseMove),r.thumbRef.current.removeEventListener("touchend",r.onMouseUp)),Se.Z.cancel(r.moveRaf)},r.onMouseDown=function(o){var l=r.props.onStartMove;r.setState({dragging:!0,pageY:tf(o),startTop:r.getTop()}),l(),r.patchEvents(),o.stopPropagation(),o.preventDefault()},r.onMouseMove=function(o){var l=r.state,u=l.dragging,c=l.pageY,f=l.startTop,d=r.props.onScroll;if(Se.Z.cancel(r.moveRaf),u){var v=tf(o)-c,p=f+v,h=r.getEnableScrollRange(),g=r.getEnableHeightRange(),m=g?p/g:0,y=Math.ceil(m*h);r.moveRaf=(0,Se.Z)(function(){d(y)})}},r.onMouseUp=function(){var o=r.props.onStopMove;r.setState({dragging:!1}),o(),r.removeEvents()},r.getSpinHeight=function(){var o=r.props,l=o.height,u=o.count,c=l/u*10;return c=Math.max(c,km),c=Math.min(c,l/2),Math.floor(c)},r.getEnableScrollRange=function(){var o=r.props,l=o.scrollHeight,u=o.height;return l-u||0},r.getEnableHeightRange=function(){var o=r.props.height,l=r.getSpinHeight();return o-l||0},r.getTop=function(){var o=r.props.scrollTop,l=r.getEnableScrollRange(),u=r.getEnableHeightRange();if(o===0||l===0)return 0;var c=o/l;return c*u},r.showScroll=function(){var o=r.props,l=o.height,u=o.scrollHeight;return u>l},r}return wm(n,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(a){a.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var a=this.state,i=a.dragging,s=a.visible,o=this.props.prefixCls,l=this.getSpinHeight(),u=this.getTop(),c=this.showScroll(),f=c&&s;return w.createElement("div",{ref:this.scrollbarRef,className:Ut()("".concat(o,"-scrollbar"),Jc({},"".concat(o,"-scrollbar-show"),c)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:f?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},w.createElement("div",{ref:this.thumbRef,className:Ut()("".concat(o,"-scrollbar-thumb"),Jc({},"".concat(o,"-scrollbar-thumb-moving"),i)),style:{width:"100%",height:l,top:u,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),n}(w.Component);function Am(t){var e=t.children,n=t.setRef,r=w.useCallback(function(a){n(a)},[]);return w.cloneElement(e,{ref:r})}function Im(t,e,n,r,a,i){var s=i.getKey;return t.slice(e,n+1).map(function(o,l){var u=e+l,c=a(o,u,{}),f=s(o);return w.createElement(Am,{key:f,setRef:function(v){return r(o,v)}},c)})}var Nm=z(44677);function Bm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ef(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lm(t,e,n){return e&&ef(t.prototype,e),n&&ef(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Gm=function(){function t(){Bm(this,t),this.maps=void 0,this.maps=Object.create(null)}return Lm(t,[{key:"set",value:function(n,r){this.maps[n]=r}},{key:"get",value:function(n){return this.maps[n]}}]),t}();const Fm=Gm;function zm(t,e){return Ym(t)||Wm(t,e)||Hm(t,e)||Km()}function Km(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hm(t,e){if(t){if(typeof t=="string")return rf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rf(t,e)}}function rf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wm(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,s,o;try{for(n=n.call(t);!(a=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));a=!0);}catch(l){i=!0,o=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw o}}return r}}function Ym(t){if(Array.isArray(t))return t}function jm(t,e,n){var r=w.useState(0),a=zm(r,2),i=a[0],s=a[1],o=(0,w.useRef)(new Map),l=(0,w.useRef)(new Fm),u=(0,w.useRef)();function c(){Se.Z.cancel(u.current)}function f(){c(),u.current=(0,Se.Z)(function(){o.current.forEach(function(v,p){if(v&&v.offsetParent){var h=(0,Nm.Z)(v),g=h.offsetHeight;l.current.get(p)!==g&&l.current.set(p,h.offsetHeight)}}),s(function(v){return v+1})})}function d(v,p){var h=t(v),g=o.current.get(h);p?(o.current.set(h,p),f()):o.current.delete(h),!g!=!p&&(p?e?.(v):n?.(v))}return(0,w.useEffect)(function(){return c},[]),[d,f,l.current,i]}function Co(t){return Co=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(t)}function Vm(t,e,n,r,a,i,s,o){var l=w.useRef();return function(u){if(u==null){o();return}if(Se.Z.cancel(l.current),typeof u=="number")s(u);else if(u&&Co(u)==="object"){var c,f=u.align;"index"in u?c=u.index:c=e.findIndex(function(h){return a(h)===u.key});var d=u.offset,v=d===void 0?0:d,p=function h(g,m){if(!(g<0||!t.current)){var y=t.current.clientHeight,E=!1,b=m;if(y){for(var x=m||f,_=0,S=0,D=0,C=Math.min(e.length,c),M=0;M<=C;M+=1){var R=a(e[M]);S=_;var T=n.get(R);D=S+(T===void 0?r:T),_=D,M===c&&T===void 0&&(E=!0)}var P=null;switch(x){case"top":P=S-v;break;case"bottom":P=D-y+v;break;default:{var k=t.current.scrollTop,A=k+y;S<k?b="top":D>A&&(b="bottom")}}P!==null&&P!==t.current.scrollTop&&s(P)}l.current=(0,Se.Z)(function(){E&&i(),h(g-1,b)})}};p(3)}}}function AE(t,e,n,r){var a=n-t,i=e-n,s=Math.min(a,i)*2;if(r<=s){var o=Math.floor(r/2);return r%2?n+o+1:n-o}return a>i?n-(r-i):n+(r-a)}function $m(t,e,n){var r=t.length,a=e.length,i,s;if(r===0&&a===0)return null;r<a?(i=t,s=e):(i=e,s=t);var o={__EMPTY_ITEM__:!0};function l(p){return p!==void 0?n(p):o}for(var u=null,c=Math.abs(r-a)!==1,f=0;f<s.length;f+=1){var d=l(i[f]),v=l(s[f]);if(d!==v){u=f,c=c||d!==l(s[f+1]);break}}return u===null?null:{index:u,multiple:c}}function nf(t,e){return qm(t)||Zm(t,e)||Um(t,e)||Xm()}function Xm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Um(t,e){if(t){if(typeof t=="string")return af(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return af(t,e)}}function af(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zm(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,s,o;try{for(n=n.call(t);!(a=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));a=!0);}catch(l){i=!0,o=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw o}}return r}}function qm(t){if(Array.isArray(t))return t}function Jm(t,e,n){var r=w.useState(t),a=nf(r,2),i=a[0],s=a[1],o=w.useState(null),l=nf(o,2),u=l[0],c=l[1];return w.useEffect(function(){var f=$m(i||[],t||[],e);f?.index!==void 0&&(n?.(f.index),c(t[f.index])),s(t)},[t]),[u]}function wo(t){return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(t)}var Qm=(typeof navigator>"u"?"undefined":wo(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ty=Qm,of=function(t,e){var n=(0,w.useRef)(!1),r=(0,w.useRef)(null);function a(){clearTimeout(r.current),n.current=!0,r.current=setTimeout(function(){n.current=!1},50)}var i=(0,w.useRef)({top:t,bottom:e});return i.current.top=t,i.current.bottom=e,function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=s<0&&i.current.top||s>0&&i.current.bottom;return o&&l?(clearTimeout(r.current),n.current=!1):(!l||n.current)&&a(),!n.current&&l}};function ey(t,e,n,r){var a=(0,w.useRef)(0),i=(0,w.useRef)(null),s=(0,w.useRef)(null),o=(0,w.useRef)(!1),l=of(e,n);function u(f){if(t){Se.Z.cancel(i.current);var d=f.deltaY;a.current+=d,s.current=d,!l(d)&&(ty||f.preventDefault(),i.current=(0,Se.Z)(function(){var v=o.current?10:1;r(a.current*v),a.current=0}))}}function c(f){t&&(o.current=f.detail===s.current)}return[u,c]}var Do=z(8024),ry=14/15;function ny(t,e,n){var r=(0,w.useRef)(!1),a=(0,w.useRef)(0),i=(0,w.useRef)(null),s=(0,w.useRef)(null),o,l=function(d){if(r.current){var v=Math.ceil(d.touches[0].pageY),p=a.current-v;a.current=v,n(p)&&d.preventDefault(),clearInterval(s.current),s.current=setInterval(function(){p*=ry,(!n(p,!0)||Math.abs(p)<=.1)&&clearInterval(s.current)},16)}},u=function(){r.current=!1,o()},c=function(d){o(),d.touches.length===1&&!r.current&&(r.current=!0,a.current=Math.ceil(d.touches[0].pageY),i.current=d.target,i.current.addEventListener("touchmove",l),i.current.addEventListener("touchend",u))};o=function(){i.current&&(i.current.removeEventListener("touchmove",l),i.current.removeEventListener("touchend",u))},(0,Do.Z)(function(){return t&&e.current.addEventListener("touchstart",c),function(){var f;(f=e.current)===null||f===void 0||f.removeEventListener("touchstart",c),o(),clearInterval(s.current)}},[t])}var ay=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"];function Mo(){return Mo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mo.apply(this,arguments)}function sf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function To(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sf(Object(n),!0).forEach(function(r){lf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sf(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fn(t,e){return ly(t)||sy(t,e)||oy(t,e)||iy()}function iy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oy(t,e){if(t){if(typeof t=="string")return uf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uf(t,e)}}function uf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sy(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,s,o;try{for(n=n.call(t);!(a=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));a=!0);}catch(l){i=!0,o=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw o}}return r}}function ly(t){if(Array.isArray(t))return t}function uy(t,e){if(t==null)return{};var n=cy(t,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cy(t,e){if(t==null)return{};var n={},r=Object.keys(t),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var fy=[],dy={overflowY:"auto",overflowAnchor:"none"};function vy(t,e){var n=t.prefixCls,r=n===void 0?"rc-virtual-list":n,a=t.className,i=t.height,s=t.itemHeight,o=t.fullHeight,l=o===void 0?!0:o,u=t.style,c=t.data,f=t.children,d=t.itemKey,v=t.virtual,p=t.component,h=p===void 0?"div":p,g=t.onScroll,m=t.onVisibleChange,y=uy(t,ay),E=!!(v!==!1&&i&&s),b=E&&c&&s*c.length>i,x=(0,w.useState)(0),_=fn(x,2),S=_[0],D=_[1],C=(0,w.useState)(!1),M=fn(C,2),R=M[0],T=M[1],P=Ut()(r,a),k=c||fy,A=(0,w.useRef)(),N=(0,w.useRef)(),G=(0,w.useRef)(),B=w.useCallback(function(dt){return typeof d=="function"?d(dt):dt?.[d]},[d]),F={getKey:B};function I(dt){D(function(St){var zt;typeof dt=="function"?zt=dt(St):zt=dt;var Fe=st(zt);return A.current.scrollTop=Fe,Fe})}var L=(0,w.useRef)({start:0,end:k.length}),K=(0,w.useRef)(),W=Jm(k,B),Y=fn(W,1),H=Y[0];K.current=H;var j=jm(B,null,null),U=fn(j,4),J=U[0],et=U[1],$=U[2],X=U[3],it=w.useMemo(function(){if(!E)return{scrollHeight:void 0,start:0,end:k.length-1,offset:void 0};if(!b){var dt;return{scrollHeight:((dt=N.current)===null||dt===void 0?void 0:dt.offsetHeight)||0,start:0,end:k.length-1,offset:void 0}}for(var St=0,zt,Fe,Ce,Bo=k.length,we=0;we<Bo;we+=1){var yt=k[we],Gt=B(yt),pn=$.get(Gt),Mr=St+(pn===void 0?s:pn);Mr>=S&&zt===void 0&&(zt=we,Fe=St),Mr>S+i&&Ce===void 0&&(Ce=we),St=Mr}return zt===void 0&&(zt=0,Fe=0),Ce===void 0&&(Ce=k.length-1),Ce=Math.min(Ce+1,k.length),{scrollHeight:St,start:zt,end:Ce,offset:Fe}},[b,E,S,k,X,i]),rt=it.scrollHeight,Et=it.start,ot=it.end,ct=it.offset;L.current.start=Et,L.current.end=ot;var pt=rt-i,nt=(0,w.useRef)(pt);nt.current=pt;function st(dt){var St=dt;return Number.isNaN(nt.current)||(St=Math.min(St,nt.current)),St=Math.max(St,0),St}var ut=S<=0,Rt=S>=pt,ht=of(ut,Rt);function gt(dt){var St=dt;I(St)}function bt(dt){var St=dt.currentTarget.scrollTop;St!==S&&I(St),g?.(dt)}var Bt=ey(E,ut,Rt,function(dt){I(function(St){var zt=St+dt;return zt})}),Lt=fn(Bt,2),Zt=Lt[0],ve=Lt[1];ny(E,A,function(dt,St){return ht(dt,St)?!1:(Zt({preventDefault:function(){},deltaY:dt}),!0)}),(0,Do.Z)(function(){function dt(St){E&&St.preventDefault()}return A.current.addEventListener("wheel",Zt),A.current.addEventListener("DOMMouseScroll",ve),A.current.addEventListener("MozMousePixelScroll",dt),function(){A.current&&(A.current.removeEventListener("wheel",Zt),A.current.removeEventListener("DOMMouseScroll",ve),A.current.removeEventListener("MozMousePixelScroll",dt))}},[E]);var _e=Vm(A,k,$,s,B,et,I,function(){var dt;(dt=G.current)===null||dt===void 0||dt.delayHidden()});w.useImperativeHandle(e,function(){return{scrollTo:_e}}),(0,Do.Z)(function(){if(m){var dt=k.slice(Et,ot+1);m(dt,k)}},[Et,ot,k]);var ee=Im(k,Et,ot,J,f,F),xe=null;return i&&(xe=To(lf({},l?"height":"maxHeight",i),dy),E&&(xe.overflowY="hidden",R&&(xe.pointerEvents="none"))),w.createElement("div",Mo({style:To(To({},u),{},{position:"relative"}),className:P},y),w.createElement(h,{className:"".concat(r,"-holder"),style:xe,ref:A,onScroll:bt},w.createElement(xm,{prefixCls:r,height:rt,offset:ct,onInnerResize:et,ref:N},ee)),E&&w.createElement(Pm,{ref:G,prefixCls:r,scrollTop:S,height:i,scrollHeight:rt,count:k.length,onScroll:gt,onStartMove:function(){T(!0)},onStopMove:function(){T(!1)}}))}var cf=w.forwardRef(vy);cf.displayName="List";const py=cf;var hy=z(45765),gy=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],ff=function(e,n){var r=e.className,a=e.style,i=e.motion,s=e.motionNodes,o=e.motionType,l=e.onMotionStart,u=e.onMotionEnd,c=e.active,f=e.treeNodeRequiredProps,d=(0,oa.Z)(e,gy),v=w.useState(!0),p=(0,Dr.Z)(v,2),h=p[0],g=p[1],m=w.useContext(mo),y=m.prefixCls,E=w.useRef(!1),b=function(){E.current||u(),E.current=!0};return(0,w.useEffect)(function(){s&&o==="hide"&&h&&g(!1)},[s]),(0,w.useEffect)(function(){return s&&l(),function(){s&&b()}},[]),s?w.createElement(hy.Z,(0,de.Z)({ref:n,visible:h},i,{motionAppear:o==="show",onAppearEnd:b,onLeaveEnd:b}),function(x,_){var S=x.className,D=x.style;return w.createElement("div",{ref:_,className:Ut()("".concat(y,"-treenode-motion"),S),style:D},s.map(function(C){var M=(0,de.Z)({},($c(C.data),C.data)),R=C.title,T=C.key,P=C.isStart,k=C.isEnd;delete M.children;var A=cn(T,f);return w.createElement(bo,(0,de.Z)({},M,A,{title:R,active:c,data:C.data,key:T,isStart:P,isEnd:k}))}))}):w.createElement(bo,(0,de.Z)({domRef:n,className:r,style:a},d,{active:c}))};ff.displayName="MotionTreeNode";var my=w.forwardRef(ff);const yy=my;function by(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.length,r=e.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function a(i,s){var o=new Map;i.forEach(function(u){o.set(u,!0)});var l=s.filter(function(u){return!o.has(u)});return l.length===1?l[0]:null}return n<r?{add:!0,key:a(t,e)}:{add:!1,key:a(e,t)}}function df(t,e,n){var r=t.findIndex(function(o){return o.key===n}),a=t[r+1],i=e.findIndex(function(o){return o.key===n});if(a){var s=e.findIndex(function(o){return o.key===a.key});return e.slice(i+1,s)}return e.slice(i+1)}var Ey=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],vf={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Sy=function(){},or="RC_TREE_MOTION_".concat(Math.random()),Ro={key:or},pf={key:or,level:0,index:0,pos:"0",node:Ro,nodes:[Ro]},hf={parent:null,children:[],pos:pf.pos,data:Ro,title:null,key:or,isStart:[],isEnd:[]};function gf(t,e,n,r){return e===!1||!n?t:t.slice(0,Math.ceil(n/r)+1)}function mf(t){var e=t.key,n=t.pos;return un(e,n)}function _y(t){for(var e=String(t.data.key),n=t;n.parent;)n=n.parent,e="".concat(n.data.key," > ").concat(e);return e}var yf=w.forwardRef(function(t,e){var n=t.prefixCls,r=t.data,a=t.selectable,i=t.checkable,s=t.expandedKeys,o=t.selectedKeys,l=t.checkedKeys,u=t.loadedKeys,c=t.loadingKeys,f=t.halfCheckedKeys,d=t.keyEntities,v=t.disabled,p=t.dragging,h=t.dragOverNodeKey,g=t.dropPosition,m=t.motion,y=t.height,E=t.itemHeight,b=t.virtual,x=t.focusable,_=t.activeItem,S=t.focused,D=t.tabIndex,C=t.onKeyDown,M=t.onFocus,R=t.onBlur,T=t.onActiveChange,P=t.onListChangeStart,k=t.onListChangeEnd,A=(0,oa.Z)(t,Ey),N=w.useRef(null),G=w.useRef(null);w.useImperativeHandle(e,function(){return{scrollTo:function(gt){N.current.scrollTo(gt)},getIndentWidth:function(){return G.current.offsetWidth}}});var B=w.useState(s),F=(0,Dr.Z)(B,2),I=F[0],L=F[1],K=w.useState(r),W=(0,Dr.Z)(K,2),Y=W[0],H=W[1],j=w.useState(r),U=(0,Dr.Z)(j,2),J=U[0],et=U[1],$=w.useState([]),X=(0,Dr.Z)($,2),it=X[0],rt=X[1],Et=w.useState(null),ot=(0,Dr.Z)(Et,2),ct=ot[0],pt=ot[1],nt=w.useRef(r);nt.current=r;function st(){var ht=nt.current;H(ht),et(ht),rt([]),pt(null),k()}w.useEffect(function(){L(s);var ht=by(I,s);if(ht.key!==null)if(ht.add){var gt=Y.findIndex(function(_e){var ee=_e.key;return ee===ht.key}),bt=gf(df(Y,r,ht.key),b,y,E),Bt=Y.slice();Bt.splice(gt+1,0,hf),et(Bt),rt(bt),pt("show")}else{var Lt=r.findIndex(function(_e){var ee=_e.key;return ee===ht.key}),Zt=gf(df(r,Y,ht.key),b,y,E),ve=r.slice();ve.splice(Lt+1,0,hf),et(ve),rt(Zt),pt("hide")}else Y!==r&&(H(r),et(r))},[s,r]),w.useEffect(function(){p||st()},[p]);var ut=m?J:r,Rt={expandedKeys:s,selectedKeys:o,loadedKeys:u,loadingKeys:c,checkedKeys:l,halfCheckedKeys:f,dragOverNodeKey:h,dropPosition:g,keyEntities:d};return w.createElement(w.Fragment,null,S&&_&&w.createElement("span",{style:vf,"aria-live":"assertive"},_y(_)),w.createElement("div",null,w.createElement("input",{style:vf,disabled:x===!1||v,tabIndex:x!==!1?D:null,onKeyDown:C,onFocus:M,onBlur:R,value:"",onChange:Sy,"aria-label":"for screen reader"})),w.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},w.createElement("div",{className:"".concat(n,"-indent")},w.createElement("div",{ref:G,className:"".concat(n,"-indent-unit")}))),w.createElement(py,(0,de.Z)({},A,{data:ut,itemKey:mf,height:y,fullHeight:!1,virtual:b,itemHeight:E,prefixCls:"".concat(n,"-list"),ref:N,onVisibleChange:function(gt,bt){var Bt=new Set(gt),Lt=bt.filter(function(Zt){return!Bt.has(Zt)});Lt.some(function(Zt){return mf(Zt)===or})&&st()}}),function(ht){var gt=ht.pos,bt=(0,de.Z)({},($c(ht.data),ht.data)),Bt=ht.title,Lt=ht.key,Zt=ht.isStart,ve=ht.isEnd,_e=un(Lt,gt);delete bt.key,delete bt.children;var ee=cn(_e,Rt);return w.createElement(yy,(0,de.Z)({},bt,ee,{title:Bt,active:!!_&&Lt===_.key,pos:gt,data:ht.data,isStart:Zt,isEnd:ve,motion:m,motionNodes:Lt===or?it:null,motionType:ct,onMotionStart:P,onMotionEnd:st,treeNodeRequiredProps:Rt,onMouseMove:function(){T(null)}}))}))});yf.displayName="NodeList";const xy=yf;function bf(t,e){var n=new Set;return t.forEach(function(r){e.has(r)||n.add(r)}),n}function Cy(t){var e=t||{},n=e.disabled,r=e.disableCheckbox,a=e.checkable;return!!(n||r)||a===!1}function wy(t,e,n,r){for(var a=new Set(t),i=new Set,s=0;s<=n;s+=1){var o=e.get(s)||new Set;o.forEach(function(f){var d=f.key,v=f.node,p=f.children,h=p===void 0?[]:p;a.has(d)&&!r(v)&&h.filter(function(g){return!r(g.node)}).forEach(function(g){a.add(g.key)})})}for(var l=new Set,u=n;u>=0;u-=1){var c=e.get(u)||new Set;c.forEach(function(f){var d=f.parent,v=f.node;if(!(r(v)||!f.parent||l.has(f.parent.key))){if(r(f.parent.node)){l.add(d.key);return}var p=!0,h=!1;(d.children||[]).filter(function(g){return!r(g.node)}).forEach(function(g){var m=g.key,y=a.has(m);p&&!y&&(p=!1),!h&&(y||i.has(m))&&(h=!0)}),p&&a.add(d.key),h&&i.add(d.key),l.add(d.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(bf(i,a))}}function Dy(t,e,n,r,a){for(var i=new Set(t),s=new Set(e),o=0;o<=r;o+=1){var l=n.get(o)||new Set;l.forEach(function(d){var v=d.key,p=d.node,h=d.children,g=h===void 0?[]:h;!i.has(v)&&!s.has(v)&&!a(p)&&g.filter(function(m){return!a(m.node)}).forEach(function(m){i.delete(m.key)})})}s=new Set;for(var u=new Set,c=r;c>=0;c-=1){var f=n.get(c)||new Set;f.forEach(function(d){var v=d.parent,p=d.node;if(!(a(p)||!d.parent||u.has(d.parent.key))){if(a(d.parent.node)){u.add(v.key);return}var h=!0,g=!1;(v.children||[]).filter(function(m){return!a(m.node)}).forEach(function(m){var y=m.key,E=i.has(y);h&&!E&&(h=!1),!g&&(E||s.has(y))&&(g=!0)}),h||i.delete(v.key),g&&s.add(v.key),u.add(v.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(bf(s,i))}}function Oo(t,e,n,r){var a=[],i;r?i=r:i=Cy;var s=new Set(t.filter(function(c){var f=!!n[c];return f||a.push(c),f})),o=new Map,l=0;Object.keys(n).forEach(function(c){var f=n[c],d=f.level,v=o.get(d);v||(v=new Set,o.set(d,v)),v.add(f),l=Math.max(l,d)}),(0,Le.ZP)(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(c){return"'".concat(c,"'")}).join(", ")));var u;return e===!0?u=wy(s,o,l,i):u=Dy(s,e.halfCheckedKeys,o,l,i),u}function My(t){var e=t.dropPosition,n=t.dropLevelOffset,r=t.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(e){case-1:a.top=0,a.left=-n*r;break;case 1:a.bottom=0,a.left=-n*r;break;case 0:a.bottom=0,a.left=r;break}return w.createElement("div",{style:a})}var Ty=10,ko=function(t){(0,Gc.Z)(n,t);var e=(0,Fc.Z)(n);function n(){var r;(0,Bc.Z)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=e.call.apply(e,[this].concat(i)),r.destroyed=!1,r.delayedDragEnterLogic=void 0,r.loadingRetryTimes={},r.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:sa()},r.dragStartMousePosition=null,r.dragNode=void 0,r.currentMouseOverDroppableNodeKey=null,r.listRef=w.createRef(),r.onNodeDragStart=function(o,l){var u=r.state,c=u.expandedKeys,f=u.keyEntities,d=r.props.onDragStart,v=l.props.eventKey;r.dragNode=l,r.dragStartMousePosition={x:o.clientX,y:o.clientY};var p=Ee(c,v);r.setState({draggingNodeKey:v,dragChildrenKeys:mm(v,f),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(p),window.addEventListener("dragend",r.onWindowDragEnd),d?.({event:o,node:Tt(l.props)})},r.onNodeDragEnter=function(o,l){var u=r.state,c=u.expandedKeys,f=u.keyEntities,d=u.dragChildrenKeys,v=u.flattenNodes,p=u.indent,h=r.props,g=h.onDragEnter,m=h.onExpand,y=h.allowDrop,E=h.direction,b=l.props,x=b.pos,_=b.eventKey,S=(0,Be.Z)(r),D=S.dragNode;if(r.currentMouseOverDroppableNodeKey!==_&&(r.currentMouseOverDroppableNodeKey=_),!D){r.resetDragState();return}var C=Yc(o,D,l,p,r.dragStartMousePosition,y,v,f,c,E),M=C.dropPosition,R=C.dropLevelOffset,T=C.dropTargetKey,P=C.dropContainerKey,k=C.dropTargetPos,A=C.dropAllowed,N=C.dragOverNodeKey;if(d.indexOf(T)!==-1||!A){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(G){clearTimeout(r.delayedDragEnterLogic[G])}),D.props.eventKey!==l.props.eventKey&&(o.persist(),r.delayedDragEnterLogic[x]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var G=(0,ir.Z)(c),B=f[l.props.eventKey];B&&(B.children||[]).length&&(G=Ge(c,l.props.eventKey)),"expandedKeys"in r.props||r.setExpandedKeys(G),m?.(G,{node:Tt(l.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),D.props.eventKey===T&&R===0){r.resetDragState();return}r.setState({dragOverNodeKey:N,dropPosition:M,dropLevelOffset:R,dropTargetKey:T,dropContainerKey:P,dropTargetPos:k,dropAllowed:A}),g?.({event:o,node:Tt(l.props),expandedKeys:c})},r.onNodeDragOver=function(o,l){var u=r.state,c=u.dragChildrenKeys,f=u.flattenNodes,d=u.keyEntities,v=u.expandedKeys,p=u.indent,h=r.props,g=h.onDragOver,m=h.allowDrop,y=h.direction,E=(0,Be.Z)(r),b=E.dragNode;if(b){var x=Yc(o,b,l,p,r.dragStartMousePosition,m,f,d,v,y),_=x.dropPosition,S=x.dropLevelOffset,D=x.dropTargetKey,C=x.dropContainerKey,M=x.dropAllowed,R=x.dropTargetPos,T=x.dragOverNodeKey;c.indexOf(D)!==-1||!M||(b.props.eventKey===D&&S===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():_===r.state.dropPosition&&S===r.state.dropLevelOffset&&D===r.state.dropTargetKey&&C===r.state.dropContainerKey&&R===r.state.dropTargetPos&&M===r.state.dropAllowed&&T===r.state.dragOverNodeKey||r.setState({dropPosition:_,dropLevelOffset:S,dropTargetKey:D,dropContainerKey:C,dropTargetPos:R,dropAllowed:M,dragOverNodeKey:T}),g?.({event:o,node:Tt(l.props)}))}},r.onNodeDragLeave=function(o,l){r.currentMouseOverDroppableNodeKey===l.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var u=r.props.onDragLeave;u?.({event:o,node:Tt(l.props)})},r.onWindowDragEnd=function(o){r.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDragEnd=function(o,l){var u=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),u?.({event:o,node:Tt(l.props)}),r.dragNode=null,window.removeEventListener("dragend",r.onWindowDragEnd)},r.onNodeDrop=function(o,l){var u,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=r.state,d=f.dragChildrenKeys,v=f.dropPosition,p=f.dropTargetKey,h=f.dropTargetPos,g=f.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),p!==null){var y=(0,Nt.Z)((0,Nt.Z)({},cn(p,r.getTreeNodeRequiredProps())),{},{active:((u=r.getActiveItem())===null||u===void 0?void 0:u.key)===p,data:r.state.keyEntities[p].node}),E=d.indexOf(p)!==-1;(0,Le.ZP)(!E,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var b=Eo(h),x={event:o,node:Tt(y),dragNode:r.dragNode?Tt(r.dragNode.props):null,dragNodesKeys:[r.dragNode.props.eventKey].concat(d),dropToGap:v!==0,dropPosition:v+Number(b[b.length-1])};c||m?.(x),r.dragNode=null}}},r.cleanDragState=function(){var o=r.state.draggingNodeKey;o!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null},r.triggerExpandActionExpand=function(o,l){var u=r.state,c=u.expandedKeys,f=u.flattenNodes,d=l.expanded,v=l.key,p=l.isLeaf;if(!(p||o.shiftKey||o.metaKey||o.ctrlKey)){var h=f.filter(function(m){return m.key===v})[0],g=Tt((0,Nt.Z)((0,Nt.Z)({},cn(v,r.getTreeNodeRequiredProps())),{},{data:h.data}));r.setExpandedKeys(d?Ee(c,v):Ge(c,v)),r.onNodeExpand(o,g)}},r.onNodeClick=function(o,l){var u=r.props,c=u.onClick,f=u.expandAction;f==="click"&&r.triggerExpandActionExpand(o,l),c?.(o,l)},r.onNodeDoubleClick=function(o,l){var u=r.props,c=u.onDoubleClick,f=u.expandAction;f==="doubleClick"&&r.triggerExpandActionExpand(o,l),c?.(o,l)},r.onNodeSelect=function(o,l){var u=r.state.selectedKeys,c=r.state,f=c.keyEntities,d=c.fieldNames,v=r.props,p=v.onSelect,h=v.multiple,g=l.selected,m=l[d.key],y=!g;y?h?u=Ge(u,m):u=[m]:u=Ee(u,m);var E=u.map(function(b){var x=f[b];return x?x.node:null}).filter(function(b){return b});r.setUncontrolledState({selectedKeys:u}),p?.(u,{event:"select",selected:y,node:l,selectedNodes:E,nativeEvent:o.nativeEvent})},r.onNodeCheck=function(o,l,u){var c=r.state,f=c.keyEntities,d=c.checkedKeys,v=c.halfCheckedKeys,p=r.props,h=p.checkStrictly,g=p.onCheck,m=l.key,y,E={event:"check",node:l,checked:u,nativeEvent:o.nativeEvent};if(h){var b=u?Ge(d,m):Ee(d,m),x=Ee(v,m);y={checked:b,halfChecked:x},E.checkedNodes=b.map(function(R){return f[R]}).filter(function(R){return R}).map(function(R){return R.node}),r.setUncontrolledState({checkedKeys:b})}else{var _=Oo([].concat((0,ir.Z)(d),[m]),!0,f),S=_.checkedKeys,D=_.halfCheckedKeys;if(!u){var C=new Set(S);C.delete(m);var M=Oo(Array.from(C),{checked:!1,halfCheckedKeys:D},f);S=M.checkedKeys,D=M.halfCheckedKeys}y=S,E.checkedNodes=[],E.checkedNodesPositions=[],E.halfCheckedKeys=D,S.forEach(function(R){var T=f[R];if(T){var P=T.node,k=T.pos;E.checkedNodes.push(P),E.checkedNodesPositions.push({node:P,pos:k})}}),r.setUncontrolledState({checkedKeys:S},!1,{halfCheckedKeys:D})}g?.(y,E)},r.onNodeLoad=function(o){var l=o.key,u=new Promise(function(c,f){r.setState(function(d){var v=d.loadedKeys,p=v===void 0?[]:v,h=d.loadingKeys,g=h===void 0?[]:h,m=r.props,y=m.loadData,E=m.onLoad;if(!y||p.indexOf(l)!==-1||g.indexOf(l)!==-1)return null;var b=y(o);return b.then(function(){var x=r.state.loadedKeys,_=Ge(x,l);E?.(_,{event:"load",node:o}),r.setUncontrolledState({loadedKeys:_}),r.setState(function(S){return{loadingKeys:Ee(S.loadingKeys,l)}}),c()}).catch(function(x){if(r.setState(function(S){return{loadingKeys:Ee(S.loadingKeys,l)}}),r.loadingRetryTimes[l]=(r.loadingRetryTimes[l]||0)+1,r.loadingRetryTimes[l]>=Ty){var _=r.state.loadedKeys;(0,Le.ZP)(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:Ge(_,l)}),c()}f(x)}),{loadingKeys:Ge(g,l)}})});return u.catch(function(){}),u},r.onNodeMouseEnter=function(o,l){var u=r.props.onMouseEnter;u?.({event:o,node:l})},r.onNodeMouseLeave=function(o,l){var u=r.props.onMouseLeave;u?.({event:o,node:l})},r.onNodeContextMenu=function(o,l){var u=r.props.onRightClick;u&&(o.preventDefault(),u({event:o,node:l}))},r.onFocus=function(){var o=r.props.onFocus;r.setState({focused:!0});for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];o?.apply(void 0,u)},r.onBlur=function(){var o=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];o?.apply(void 0,u)},r.getTreeNodeRequiredProps=function(){var o=r.state,l=o.expandedKeys,u=o.selectedKeys,c=o.loadedKeys,f=o.loadingKeys,d=o.checkedKeys,v=o.halfCheckedKeys,p=o.dragOverNodeKey,h=o.dropPosition,g=o.keyEntities;return{expandedKeys:l||[],selectedKeys:u||[],loadedKeys:c||[],loadingKeys:f||[],checkedKeys:d||[],halfCheckedKeys:v||[],dragOverNodeKey:p,dropPosition:h,keyEntities:g}},r.setExpandedKeys=function(o){var l=r.state,u=l.treeData,c=l.fieldNames,f=yo(u,o,c);r.setUncontrolledState({expandedKeys:o,flattenNodes:f},!0)},r.onNodeExpand=function(o,l){var u=r.state.expandedKeys,c=r.state,f=c.listChanging,d=c.fieldNames,v=r.props,p=v.onExpand,h=v.loadData,g=l.expanded,m=l[d.key];if(!f){var y=u.indexOf(m),E=!g;if((0,Le.ZP)(g&&y!==-1||!g&&y===-1,"Expand state not sync with index check"),E?u=Ge(u,m):u=Ee(u,m),r.setExpandedKeys(u),p?.(u,{node:l,expanded:E,nativeEvent:o.nativeEvent}),E&&h){var b=r.onNodeLoad(l);b&&b.then(function(){var x=yo(r.state.treeData,u,d);r.setUncontrolledState({flattenNodes:x})}).catch(function(){var x=r.state.expandedKeys,_=Ee(x,m);r.setExpandedKeys(_)})}}},r.onListChangeStart=function(){r.setUncontrolledState({listChanging:!0})},r.onListChangeEnd=function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})},r.onActiveChange=function(o){var l=r.state.activeKey,u=r.props.onActiveChange;l!==o&&(r.setState({activeKey:o}),o!==null&&r.scrollTo({key:o}),u?.(o))},r.getActiveItem=function(){var o=r.state,l=o.activeKey,u=o.flattenNodes;return l===null?null:u.find(function(c){var f=c.key;return f===l})||null},r.offsetActiveKey=function(o){var l=r.state,u=l.flattenNodes,c=l.activeKey,f=u.findIndex(function(p){var h=p.key;return h===c});f===-1&&o<0&&(f=u.length),f=(f+o+u.length)%u.length;var d=u[f];if(d){var v=d.key;r.onActiveChange(v)}else r.onActiveChange(null)},r.onKeyDown=function(o){var l=r.state,u=l.activeKey,c=l.expandedKeys,f=l.checkedKeys,d=l.fieldNames,v=r.props,p=v.onKeyDown,h=v.checkable,g=v.selectable;switch(o.which){case wr.Z.UP:{r.offsetActiveKey(-1),o.preventDefault();break}case wr.Z.DOWN:{r.offsetActiveKey(1),o.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var y=r.getTreeNodeRequiredProps(),E=m.data.isLeaf===!1||!!(m.data[d.children]||[]).length,b=Tt((0,Nt.Z)((0,Nt.Z)({},cn(u,y)),{},{data:m.data,active:!0}));switch(o.which){case wr.Z.LEFT:{E&&c.includes(u)?r.onNodeExpand({},b):m.parent&&r.onActiveChange(m.parent.key),o.preventDefault();break}case wr.Z.RIGHT:{E&&!c.includes(u)?r.onNodeExpand({},b):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),o.preventDefault();break}case wr.Z.ENTER:case wr.Z.SPACE:{h&&!b.disabled&&b.checkable!==!1&&!b.disableCheckbox?r.onNodeCheck({},b,!f.includes(u)):!h&&g&&!b.disabled&&b.selectable!==!1&&r.onNodeSelect({},b);break}}}p?.(o)},r.setUncontrolledState=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var c=!1,f=!0,d={};Object.keys(o).forEach(function(v){if(v in r.props){f=!1;return}c=!0,d[v]=o[v]}),c&&(!l||f)&&r.setState((0,Nt.Z)((0,Nt.Z)({},d),u))}},r.scrollTo=function(o){r.listRef.current.scrollTo(o)},r}return(0,Lc.Z)(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props.activeKey;a!==void 0&&a!==this.state.activeKey&&(this.setState({activeKey:a}),a!==null&&this.scrollTo({key:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a,i=this.state,s=i.focused,o=i.flattenNodes,l=i.keyEntities,u=i.draggingNodeKey,c=i.activeKey,f=i.dropLevelOffset,d=i.dropContainerKey,v=i.dropTargetKey,p=i.dropPosition,h=i.dragOverNodeKey,g=i.indent,m=this.props,y=m.prefixCls,E=m.className,b=m.style,x=m.showLine,_=m.focusable,S=m.tabIndex,D=S===void 0?0:S,C=m.selectable,M=m.showIcon,R=m.icon,T=m.switcherIcon,P=m.draggable,k=m.checkable,A=m.checkStrictly,N=m.disabled,G=m.motion,B=m.loadData,F=m.filterTreeNode,I=m.height,L=m.itemHeight,K=m.virtual,W=m.titleRender,Y=m.dropIndicatorRender,H=m.onContextMenu,j=m.onScroll,U=m.direction,J=m.rootClassName,et=m.rootStyle,$=(0,zc.Z)(this.props,{aria:!0,data:!0}),X;return P&&((0,go.Z)(P)==="object"?X=P:typeof P=="function"?X={nodeDraggable:P}:X={}),w.createElement(mo.Provider,{value:{prefixCls:y,selectable:C,showIcon:M,icon:R,switcherIcon:T,draggable:X,draggingNodeKey:u,checkable:k,checkStrictly:A,disabled:N,keyEntities:l,dropLevelOffset:f,dropContainerKey:d,dropTargetKey:v,dropPosition:p,dragOverNodeKey:h,indent:g,direction:U,dropIndicatorRender:Y,loadData:B,filterTreeNode:F,titleRender:W,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},w.createElement("div",{role:"tree",className:Ut()(y,E,J,(a={},(0,Dt.Z)(a,"".concat(y,"-show-line"),x),(0,Dt.Z)(a,"".concat(y,"-focused"),s),(0,Dt.Z)(a,"".concat(y,"-active-focused"),c!==null),a)),style:et},w.createElement(xy,(0,de.Z)({ref:this.listRef,prefixCls:y,style:b,data:o,disabled:N,selectable:C,checkable:!!k,motion:G,dragging:u!==null,height:I,itemHeight:L,virtual:K,focusable:_,focused:s,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:H,onScroll:j},this.getTreeNodeRequiredProps(),$))))}}],[{key:"getDerivedStateFromProps",value:function(a,i){var s=i.prevProps,o={prevProps:a};function l(_){return!s&&_ in a||s&&s[_]!==a[_]}var u,c=i.fieldNames;if(l("fieldNames")&&(c=sa(a.fieldNames),o.fieldNames=c),l("treeData")?u=a.treeData:l("children")&&((0,Le.ZP)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),u=um(a.children)),u){o.treeData=u;var f=fm(u,{fieldNames:c});o.keyEntities=(0,Nt.Z)((0,Dt.Z)({},or,pf),f.keyEntities)}var d=o.keyEntities||i.keyEntities;if(l("expandedKeys")||s&&l("autoExpandParent"))o.expandedKeys=a.autoExpandParent||!s&&a.defaultExpandParent?Vc(a.expandedKeys,d):a.expandedKeys;else if(!s&&a.defaultExpandAll){var v=(0,Nt.Z)({},d);delete v[or],o.expandedKeys=Object.keys(v).map(function(_){return v[_].key})}else!s&&a.defaultExpandedKeys&&(o.expandedKeys=a.autoExpandParent||a.defaultExpandParent?Vc(a.defaultExpandedKeys,d):a.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,u||o.expandedKeys){var p=yo(u||i.treeData,o.expandedKeys||i.expandedKeys,c);o.flattenNodes=p}if(a.selectable&&(l("selectedKeys")?o.selectedKeys=jc(a.selectedKeys,a):!s&&a.defaultSelectedKeys&&(o.selectedKeys=jc(a.defaultSelectedKeys,a))),a.checkable){var h;if(l("checkedKeys")?h=So(a.checkedKeys)||{}:!s&&a.defaultCheckedKeys?h=So(a.defaultCheckedKeys)||{}:u&&(h=So(a.checkedKeys)||{checkedKeys:i.checkedKeys,halfCheckedKeys:i.halfCheckedKeys}),h){var g=h,m=g.checkedKeys,y=m===void 0?[]:m,E=g.halfCheckedKeys,b=E===void 0?[]:E;if(!a.checkStrictly){var x=Oo(y,!0,d);y=x.checkedKeys,b=x.halfCheckedKeys}o.checkedKeys=y,o.halfCheckedKeys=b}}return l("loadedKeys")&&(o.loadedKeys=a.loadedKeys),o}}]),n}(w.Component);ko.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:My,allowDrop:function(){return!0},expandAction:!1},ko.TreeNode=bo;const Ry=ko;var Oy=z(35645);function ky(t){return Nc.css`
    .moveable-control-box {
      z-index: 999;
    }
    ,
    .rc-tree {
      margin: 0;
      margin-bottom: 15px;
      border: 1px solid transparent;

      &-focused:not(&-active-focused) {
        border-color: cyan;
      }

      .rc-tree-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .rc-tree-treenode {
        margin: 0;
        padding: 1px;
        line-height: 24px;
        white-space: nowrap;
        list-style: none;
        outline: 0;

        display: flex;
        margin-bottom: 3px;
        cursor: pointer;

        .draggable {
          color: #333;
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          // -khtml-user-drag: element;
          // -webkit-user-drag: element;
        }

        &.drop-container {
          > .draggable::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            box-shadow: inset 0 0 0 2px blue;
            content: '';
          }
          & ~ .rc-tree-treenode {
            border-left: 2px solid ${t.components.input.borderColor};
          }
        }
        &.drop-target {
          & ~ .rc-tree-treenode {
            border-left: none;
          }
        }
        &.filter-node {
          > .rc-tree-node-content-wrapper {
            color: #a60000 !important;
            font-weight: bold !important;
          }
        }
        ul {
          margin: 0;
          padding: 0 0 0 18px;
        }
        .rc-tree-node-content-wrapper {
          position: relative;
          display: inline-block;
          height: 24px;
          margin: 0;
          padding: 0;
          text-decoration: none;
          vertical-align: top;
          cursor: grab;
          flex-grow: 1;
          display: flex;

          border: 1px solid ${t.components.input.borderColor};
          border-radius: ${t.shape.borderRadius(1)};
          background: ${t.colors.background.secondary};
          min-height: ${t.spacing.gridSize*4}px;

          &:hover {
            border: 1px solid ${t.components.input.borderHover};
          }

          &.rc-tree-node-selected {
            border: 1px solid ${t.colors.primary.border};
            opacity: 1;
          }
        }

        span {
          &.rc-tree-checkbox,
          &.rc-tree-iconEle {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 2px;
            line-height: 16px;
            vertical-align: -0.125em;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-switcher {
            display: flex;
            align-items: center;
            width: 16px;
            background-color: transparent;
            background-repeat: no-repeat;
            background-attachment: scroll;
            border: 0 none;
            outline: none;
            cursor: pointer;

            &.rc-tree-icon__customize {
              background-image: none;
            }
          }
          &.rc-tree-icon_loading {
            margin-right: 2px;
            vertical-align: top;
            background: url('data:image/gif;base64,R0lGODlhEAAQAKIGAMLY8YSx5HOm4Mjc88/g9Ofw+v///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgAGACwAAAAAEAAQAAADMGi6RbUwGjKIXCAA016PgRBElAVlG/RdLOO0X9nK61W39qvqiwz5Ls/rRqrggsdkAgAh+QQFCgAGACwCAAAABwAFAAADD2hqELAmiFBIYY4MAutdCQAh+QQFCgAGACwGAAAABwAFAAADD1hU1kaDOKMYCGAGEeYFCQAh+QQFCgAGACwKAAIABQAHAAADEFhUZjSkKdZqBQG0IELDQAIAIfkEBQoABgAsCgAGAAUABwAAAxBoVlRKgyjmlAIBqCDCzUoCACH5BAUKAAYALAYACgAHAAUAAAMPaGpFtYYMAgJgLogA610JACH5BAUKAAYALAIACgAHAAUAAAMPCAHWFiI4o1ghZZJB5i0JACH5BAUKAAYALAAABgAFAAcAAAMQCAFmIaEp1motpDQySMNFAgA7')
              no-repeat scroll 0 0 transparent;
          }
          &.rc-tree-switcher {
            &.rc-tree-switcher-noop {
              cursor: auto;
            }
            &.rc-tree-switcher_open {
              background-position: -93px -56px;
            }
            &.rc-tree-switcher_close {
              background-position: -75px -56px;
            }
          }
          &.rc-tree-checkbox {
            width: 13px;
            height: 13px;
            margin: 0 3px;
            background-position: 0 0;
            &-checked {
              background-position: -14px 0;
            }
            &-indeterminate {
              background-position: -14px -28px;
            }
            &-disabled {
              background-position: 0 -56px;
            }
            &.rc-tree-checkbox-checked.rc-tree-checkbox-disabled {
              background-position: -14px -56px;
            }
            &.rc-tree-checkbox-indeterminate.rc-tree-checkbox-disabled {
              position: relative;
              background: #ccc;
              border-radius: 3px;
              &::after {
                position: absolute;
                top: 5px;
                left: 3px;
                width: 5px;
                height: 0;
                border: 2px solid #fff;
                border-top: 0;
                border-left: 0;
                -webkit-transform: scale(1);
                transform: scale(1);
                content: ' ';
              }
            }
          }
        }
      }
      &:not(.rc-tree-show-line) {
        .rc-tree-treenode {
          .rc-tree-switcher-noop {
            background: none;
          }
        }
      }
      &.rc-tree-show-line {
        .rc-tree-treenode:not(:last-child) {
          > ul {
            background: url('data:image/gif;base64,R0lGODlhCQACAIAAAMzMzP///yH5BAEAAAEALAAAAAAJAAIAAAIEjI9pUAA7') 0 0
              repeat-y;
          }
          > .rc-tree-switcher-noop {
            background-position: -56px -18px;
          }
        }
        .rc-tree-treenode:last-child {
          > .rc-tree-switcher-noop {
            background-position: -56px -36px;
          }
        }
      }
      &-child-tree {
        display: none;
        &-open {
          display: block;
        }
      }
      &-treenode-disabled {
        > span:not(.rc-tree-switcher),
        > a,
        > a span {
          color: #767676;
          cursor: not-allowed;
        }
      }
      &-treenode-active {
        background: rgba(0, 0, 0, 0.1);
      }
      &-node-selected {
        opacity: 0.8;
      }
      &-icon__open {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -16px;
      }
      &-icon__close {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px 0;
      }
      &-icon__docu {
        margin-right: 2px;
        vertical-align: top;
        background-position: -110px -32px;
      }
      &-icon__customize {
        margin-right: 2px;
        vertical-align: top;
      }
      &-title {
        display: inline-block;
      }
      &-indent {
        display: inline-block;
        height: 0;
        vertical-align: bottom;
      }
      &-indent-unit {
        display: inline-block;
        width: 16px;
      }

      &-draggable-icon {
        display: inline-flex;
        justify-content: center;
        width: 16px;
      }
    }
  `}function Po(t,e,n){let r=[];if(t)for(let a=t.elements.length;a--;a>=0){const i=t.elements[a],s={key:i.UID,title:i.getName(),selectable:!0,dataRef:i};i instanceof qt.f&&(s.children=Po(i,e,n)),r.push(s)}return r}function Py(t,e){const n=t.node.key,r=t.dragNode.key,a=t.node.pos.split("-"),i=t.dropPosition-Number(a[a.length-1]),s=(u,c,f)=>{u.forEach((d,v,p)=>{if(d.key===c){f(d,v,p);return}d.children&&s(d.children,c,f)})},o=[...e];let l;if(s(o,r,(u,c,f)=>{f.splice(c,1),l=u}),i===0)s(o,n,u=>{u.children=u.children||[],u.children.unshift(l)});else{let u=[],c=0;s(o,n,(f,d,v)=>{u=v,c=d}),i===-1?u.splice(c,0,l):u.splice(c+1,0,l)}return o}var Ay=z(93022);const Iy=({settings:t,nodeData:e,setAllowSelection:n})=>{const r=e.dataRef,a=e.dataRef.getName(),i=(0,se.wW)(Ny),s=t.layer,o=()=>{if(t?.layer)return t.layer.scene},l=v=>{(v.parent??s).doAction(Ft.G.Delete,v),n(!1)},u=v=>{(v.parent??s).doAction(Ft.G.Duplicate,v),n(!1)},c=(v,p)=>{v.onChange({...v.options,name:p})},f=v=>{const p=o();return Boolean(p?.canRename(v))},d=v=>v.options.type;return w.createElement(w.Fragment,null,w.createElement(Ay.X,{name:a,onChange:v=>c(r,v),verifyLayerNameUniqueness:f??void 0}),w.createElement("div",{className:i.textWrapper},"\xA0 ",d(r)),!e.children&&w.createElement("div",{className:i.actionButtonsWrapper},w.createElement(be.h,{name:"copy",title:"Duplicate",className:i.actionIcon,onClick:()=>u(r)}),w.createElement(be.h,{name:"trash-alt",title:"remove",className:i.actionIcon,onClick:()=>l(r)})))},Ny=t=>({actionButtonsWrapper:vt.css`
    display: flex;
    align-items: flex-end;
  `,actionIcon:vt.css`
    color: ${t.colors.text.secondary};
    cursor: pointer;
    &:hover {
      color: ${t.colors.text.primary};
    }
  `,textWrapper:vt.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    overflow: hidden;
    margin-right: ${t.spacing(1)};
  `,layerName:vt.css`
    font-weight: ${t.typography.fontWeightMedium};
    color: ${t.colors.primary.text};
    cursor: pointer;
    overflow: hidden;
    margin-left: ${t.spacing(.5)};
  `});let Ef=!0;const By=({item:t})=>{const[e,n]=(0,w.useState)(Po(t?.settings?.scene.root)),[r,a]=(0,w.useState)(!0),[i,s]=(0,w.useState)([]),[o,l]=(0,w.useState)([]),u=(0,se.l4)(),c=ky(u),f=(0,se.wW)(Ly),d=u.colors.primary.border,{settings:v}=t,p=(0,w.useMemo)(()=>v?.selected?v.selected.map(R=>R?.getName()):[],[v?.selected]),h=(0,w.useMemo)(()=>v?.selected?v.selected.map(R=>R?.UID):[],[v?.selected]);if((0,w.useEffect)(()=>{n(Po(t?.settings?.scene.root,p,d)),l(h),_()},[t?.settings?.scene.root,d,p,h]),!v)return w.createElement("div",null,"No settings");const g=v.layer;if(!g)return w.createElement("div",null,"Missing layer?");const m=(R,T)=>{Ef&&t.settings?.scene&&(0,oe.gw)(t.settings.scene,T.node.dataRef)},y=()=>!0,E=R=>{const T=R.node.pos.split("-"),P=R.dropPosition-Number(T[T.length-1]),k=R.dragNode.dataRef,A=R.node.dataRef,N=Py(R,e);n(N),A.parent?.scene.reorderElements(k,A,R.dropToGap,P)},b=R=>{s(R),a(!1)},x=R=>R.isLeaf?w.createElement(w.Fragment,null):w.createElement(ho.J,{name:"angle-right",title:"Node Icon",style:{transform:`rotate(${R.expanded?90:0}deg)`,fill:u.colors.text.primary}}),_=(R=!0)=>{Ef=R},S=()=>{g.scene.clearCurrentSelection()},D=R=>w.createElement(Iy,{nodeData:R,setAllowSelection:_,settings:v}),C=()=>{g.scene?g.scene.frameSelection():console.warn("no scene!")},M=(0,oe.JI)(v.scene.shouldShowAdvancedTypes).options;return w.createElement(w.Fragment,null,w.createElement(Nc.Global,{styles:c}),w.createElement(Ry,{selectable:!0,onSelect:m,draggable:!0,defaultExpandAll:!0,autoExpandParent:r,showIcon:!1,allowDrop:y,onDrop:E,expandedKeys:i,onExpand:b,treeData:e,titleRender:D,switcherIcon:x,selectedKeys:o,multiple:!0}),w.createElement(Cr.Lh,{justify:"space-between"},w.createElement("div",{className:f.addLayerButton},w.createElement(Oc.f,{onChange:R=>(0,oe.xy)(R,g),options:M,label:"Add item"})),p.length>0&&w.createElement(uo.zx,{size:"sm",variant:"secondary",onClick:S},"Clear selection"),p.length>1&&Oy.v.featureToggles.canvasPanelNesting&&w.createElement(uo.zx,{size:"sm",variant:"secondary",onClick:C},"Frame selection")))},Ly=t=>({addLayerButton:vt.css`
    margin-left: 18px;
    min-width: 150px;
  `});function Sf(t){const{selected:e,scene:n}=t;if(n.currentLayer||(n.currentLayer=n.root),e)for(const a of e){if(a instanceof qt.f){n.currentLayer=a;break}if(a&&a.parent){n.currentLayer=a.parent;break}}const r=n.currentLayer.options||{elements:[]};return{category:["Layer"],path:"--",values:a=>({getValue:i=>(0,fo.get)(r,i),onChange:(i,s)=>{if(i==="type"&&s){console.warn("unable to change layer type");return}const o=(0,po.hs)(r,i,s);n.currentLayer?.onChange(o),n.currentLayer?.updateData(n.context)}}),build:(a,i)=>{const s=n.currentLayer;s&&s.isRoot(),a.addCustomEditor({id:"content",path:"root",name:"Elements",editor:By,settings:{scene:n,layer:n.currentLayer,selected:e}});const o={...i,options:r};ia.I.addBackground(a,o),ia.I.addBorder(a,o),s&&!s.isRoot()&&a.addCustomEditor({category:["Layout"],id:"content",path:"__",name:"Constraints",editor:Ac,settings:{scene:t.scene,element:s}})}}}function Gy(){const t=(0,Rc.Z)(vn),e=t?.panel.context?.instanceState,n=(0,se.wW)(zy),[r,a]=(0,w.useState)(Ft.o.SelectedElement),i=(0,w.useMemo)(()=>{const f=t?.panel,d=e;if(!d||!f)return new vo.j({id:"root",title:"root"});const v=(p,h)=>{r===Ft.o.ElementManagement&&p.addNestedOptions(Sf(e));const g=d.selected;if(g?.length===1&&r===Ft.o.SelectedElement){const m=g[0];m&&!(m instanceof qt.f)&&p.addNestedOptions(Ic({category:[`Selected element (${m.options.name})`],element:m,scene:d.scene}))}No(p)};return Fy({options:f.props.options,onChange:f.props.onOptionsChange,data:f.props.data?.series},v)},[e,t,r]),s={marginLeft:15,marginTop:10},o=f=>{a(f)},l=(0,oe.JI)(e?.scene.shouldShowAdvancedTypes).options,u=e?.layer,c=e&&r===Ft.o.SelectedElement&&e.selected.length===0;return w.createElement(w.Fragment,null,w.createElement("div",{style:s},i.items.map(f=>f.render())),w.createElement("div",{style:s},w.createElement(Oc.f,{onChange:f=>(0,oe.xy)(f,u),options:l,label:"Add item"})),w.createElement("div",{style:s},w.createElement(V0,{onTabChange:o}),i.categories.map(f=>_f(f)),c&&w.createElement("div",{className:n.selectElement},"Please select an element")))}function _f(t){return w.createElement(H0.u,{...t.props,key:t.props.id},w.createElement("div",null,t.items.map(e=>e.render())),t.categories.map(e=>_f(e)))}function Fy(t,e){const n={data:t.data??[],options:t.options},r=new vo.j({id:"root",title:"root"}),a=s=>{if(s?.length){const o=s[0];let l=r.categories.find(u=>u.props.id===o);return l||(l=new vo.j({id:o,title:o}),r.categories.push(l)),l}return r},i={getValue:s=>(0,fo.get)(t.options,s),onChange:(s,o)=>{t.onChange((0,po.hs)(t.options,s,o))}};return(0,W0.HZ)(e,i,a,n),r}const zy=t=>({selectElement:vt.css`
    color: ${t.colors.text.secondary};
    padding: ${t.spacing(2)};
  `}),Ao=10,xf=32;function Ky({onClose:t,id:e,scene:n}){const r=n.root.div?.getBoundingClientRect(),a=window.innerHeight,i=window.innerWidth,s=(0,w.useRef)(null),o=(0,se.wW)(Hy),l="inlineEditPanel"+e.toString(),u={width:400,height:400},c=r?.width??u.width+Ao*2,f=r?.x??0+c-u.width-Ao,d=r?.y??0+xf,v=Tc.Z.getObject(l,{x:f,y:d,w:u.width,h:u.height}),[p,h]=(0,w.useState)({width:v.w,height:v.h}),[g,m]=(0,w.useState)({x:v.x,y:v.y});(0,w.useEffect)(()=>{const x=i-p.width-Ao,_=a-p.height-xf;x<g.x&&x>0&&m({...g,x}),_<g.y&&_>0&&m({...g,y:_})},[a,i,g,p]);const y=(x,_)=>{let S=_.x<0?0:_.x,D=_.y<0?0:_.y;m({x:S,y:D}),b(S,D,p.width,p.height)},E=(x,_)=>{const{size:S}=_;h({width:S.width,height:S.height}),b(g.x,g.y,S.width,S.height)},b=(x,_,S,D)=>{Tc.Z.setObject(l,{x,y:_,w:S,h:D})};return w.createElement(sn.h_,null,w.createElement("div",{className:o.draggableWrapper},w.createElement(z0(),{handle:"strong",onStop:y,position:{x:g.x,y:g.y}},w.createElement(K0.Resizable,{height:p.height,width:p.width,onResize:E},w.createElement("div",{className:o.inlineEditorContainer,style:{height:`${p.height}px`,width:`${p.width}px`},ref:s},w.createElement("strong",{className:o.inlineEditorHeader},w.createElement("div",{className:o.placeholder}),w.createElement("div",null,"Canvas Inline Editor"),w.createElement(be.h,{name:"times",size:"xl",className:o.inlineEditorClose,onClick:t})),w.createElement("div",{className:o.inlineEditorContentWrapper},w.createElement("div",{className:o.inlineEditorContent},w.createElement(Gy,null))))))))}const Hy=t=>({inlineEditorContainer:vt.css`
    display: flex;
    flex-direction: column;
    background: ${t.components.panel.background};
    border: 1px solid ${t.colors.border.strong};
    box-shadow: 5px 5px 20px -5px #000000;
    z-index: 1000;
    opacity: 1;
    min-width: 400px;
  `,draggableWrapper:vt.css`
    width: 0;
    height: 0;
  `,inlineEditorHeader:vt.css`
    display: flex;
    align-items: center;
    justify-content: center;
    background: ${t.colors.background.canvas};
    border: 1px solid ${t.colors.border.weak};
    height: 40px;
    cursor: move;
  `,inlineEditorContent:vt.css`
    white-space: pre-wrap;
    padding: 10px;
  `,inlineEditorClose:vt.css`
    margin-left: auto;
  `,placeholder:vt.css`
    width: 24px;
    height: 24px;
    visibility: hidden;
    margin-right: auto;
  `,inlineEditorContentWrapper:vt.css`
    overflow: scroll;
  `});var Io=z(25532),Wy=z(26260);function Yy({onClose:t,scene:e,anchorPoint:n}){const r=e.root.options.background?.image?.fixed??"",[a,i]=(0,w.useState)(r),s=(0,se.l4)(),o=jy(s,n),l=u=>{u&&(i(u),e.root&&(e.root.options.background={...e.root.options.background,image:{mode:Io.ResourceDimensionMode.Fixed,fixed:u}},e.revId++,e.save(),e.root.reinitializeMoveable()),e&&e.updateData(e.data)),t()};return w.createElement(sn.h_,{className:o.portalWrapper},w.createElement(Wy.Y,{onChange:l,value:a,mediaType:Io.MediaType.Image,folderName:Io.ResourceFolderName.IOT}))}const jy=(t,e)=>({portalWrapper:vt.css`
    width: 315px;
    height: 445px;
    transform: translate(${e.x}px, ${e.y-200}px);
  `});let ca=[],dn,fa=!1,da=!1;const vn=new gn.t(1);class Cf extends w.Component{constructor(e){super(e),this.panelContext={},this.subs=new ha.w0,this.needsReload=!1,this.isEditing=Go.E1.getSearchObject().editPanel!==void 0,this.onUpdateScene=n=>{const{onOptionsChange:r,options:a}=this.props;r({...a,root:n}),this.setState({refresh:this.state.refresh+1}),vn.next({panel:this})},this.openInlineEdit=()=>{if(fa){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openInlineEdit:!0}),fa=!0},this.openSetBackground=n=>{if(da){this.forceUpdate(),this.setActivePanel();return}this.setActivePanel(),this.setState({openSetBackground:!0}),this.setState({contextMenuAnchorPoint:n}),da=!0},this.tooltipCallback=n=>{this.scene.tooltip=n,this.forceUpdate()},this.moveableActionCallback=n=>{this.setState({moveableAction:n}),this.forceUpdate()},this.closeInlineEdit=()=>{this.setState({openInlineEdit:!1}),fa=!1},this.closeSetBackground=()=>{this.setState({openSetBackground:!1}),da=!1},this.setActivePanel=()=>{dn=this,vn.next({panel:this})},this.renderInlineEdit=()=>w.createElement(Ky,{onClose:()=>this.closeInlineEdit(),id:this.props.id,scene:this.scene}),this.renderSetBackground=()=>w.createElement(Yy,{onClose:()=>this.closeSetBackground(),scene:this.scene,anchorPoint:this.state.contextMenuAnchorPoint}),this.state={refresh:0,openInlineEdit:!1,openSetBackground:!1,contextMenuAnchorPoint:{x:0,y:0},moveableAction:!1},this.scene=new L0(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes,this.onUpdateScene,this),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),this.scene.inlineEditingCallback=this.openInlineEdit,this.scene.setBackgroundCallback=this.openSetBackground,this.scene.tooltipCallback=this.tooltipCallback,this.scene.moveableActionCallback=this.moveableActionCallback,this.subs.add(this.props.eventBus.subscribe(Mc.xF,n=>{this.scene.clearCurrentSelection(),this.closeInlineEdit()})),this.subs.add(this.props.eventBus.subscribe(Mc.Yr,n=>{this.props.id===n.payload&&(this.needsReload=!0,this.scene.clearCurrentSelection(),this.scene.load(this.props.options.root,this.props.options.inlineEditing,this.props.options.showAdvancedTypes))}))}componentDidMount(){dn=this,vn.next({panel:this}),this.panelContext=this.context,this.panelContext.onInstanceStateChange&&(this.panelContext.onInstanceStateChange({scene:this.scene,layer:this.scene.root}),this.subs.add(this.scene.selection.subscribe({next:e=>{this.panelContext.onInstanceStateChange({scene:this.scene,selected:e,layer:this.scene.root}),dn=this,vn.next({panel:this}),ca.forEach(n=>{n!==dn&&n.scene.clearCurrentSelection(!0)})}}))),ca.push(this)}componentWillUnmount(){this.scene.subscription.unsubscribe(),this.subs.unsubscribe(),fa=!1,da=!1,ca=ca.filter(e=>e.props.id!==dn?.props.id)}shouldComponentUpdate(e,n){const{width:r,height:a,data:i,options:s}=this.props;let o=!1;(r!==e.width||a!==e.height)&&(this.scene.updateSize(e.width,e.height),o=!0),i!==e.data&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),s!==e.options&&!this.scene.ignoreDataUpdate&&(this.scene.updateData(e.data),o=!0),this.state.refresh!==n.refresh&&(o=!0),this.state.openInlineEdit!==n.openInlineEdit&&(o=!0),this.state.openSetBackground!==n.openSetBackground&&(o=!0),this.state.moveableAction!==n.moveableAction&&(o=!0);const l=this.props.options.inlineEditing!==e.options.inlineEditing,u=this.props.options.showAdvancedTypes!==e.options.showAdvancedTypes;return(this.needsReload||l||u)&&(l&&this.scene.revId++,this.needsReload=!1,this.scene.load(e.options.root,e.options.inlineEditing,e.options.showAdvancedTypes),this.scene.updateSize(e.width,e.height),this.scene.updateData(e.data),o=!0),o}render(){return w.createElement(w.Fragment,null,this.scene.render(),this.state.openInlineEdit&&this.renderInlineEdit(),this.state.openSetBackground&&this.renderSetBackground())}}Cf.contextType=Df.bb;const Vy=t=>{if((t?.pluginVersion??"")===""){const n=t.options?.root;if(n?.elements)for(const r of n.elements)r.type==="text-box"&&(r.type="rectangle")}return t.options},No=t=>{t.addBooleanSwitch({path:"inlineEditing",name:"Inline editing",description:"Enable editing the panel directly",defaultValue:!0}),t.addBooleanSwitch({path:"showAdvancedTypes",name:"Show advanced element types",description:"",defaultValue:!1})},$y=new va.c(Cf).setNoPadding().useFieldConfig({standardOptions:{[pa.qb.Mappings]:{settings:{icon:!0}}}}).setMigrationHandler(Vy).setPanelOptions((t,e)=>{const n=e.instanceState;if(No(t),n){t.addNestedOptions(Sf(n));const r=n.selected;if(r?.length===1){const a=r[0];a instanceof qt.f||t.addNestedOptions(Ic({category:[`Selected element (${a.options.name})`],element:a,scene:n.scene}))}}})}}]);

//# sourceMappingURL=canvasPanel.03b45b4ea44c9fb25936.js.map