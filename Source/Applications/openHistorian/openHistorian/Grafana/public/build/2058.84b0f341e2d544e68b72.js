"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2058],{92058:(D,d,e)=>{e.r(d),e.d(d,{plugin:()=>P});var u=e(40187),c=e(36666),s=e(62467),f=e(49935),l=e(81160),E=e(69850),v=e(52622),p=e(81887),m=e(74730);class C extends u.mA{constructor(a){super(a)}getCollapsedText(a){return`Dashboard Reference: ${a.panelId}`}query(a){const n=a.scopedVars?.__sceneObject;let o=n?n.value.valueOf():void 0;if(a.requestId.indexOf("mixed")>-1)throw new Error("Dashboard data source cannot be used with Mixed data source.");if(!o)throw new Error("Can only be called from a scene");const r=a.targets[0];if(!r)return(0,s.of)({data:[]});const h=r.panelId;if(!h)return(0,s.of)({data:[]});let g=this.findSourcePanel(o,h);if(!g)return(0,s.of)({data:[],error:{message:"Could not find source panel"}});let t=g.state.$data;return!r.withTransforms&&t instanceof p.Es&&(t=t.state.$data),!t||!t.getResultsStream?(0,s.of)({data:[]}):(0,f.v)(()=>{!t.isActive&&t?.setContainerWidth&&t?.setContainerWidth(500);const T=t.activate();return t.getResultsStream().pipe((0,l.T)(i=>({data:this.getDataFramesForQueryTopic(i.data,r),state:i.data.state,errors:i.data.errors,error:i.data.error,key:"source-ds-provider"})),(0,E.j)(T))})}getDataFramesForQueryTopic(a,n){const o=a.annotations??[];return n.topic===v.QR.Annotations?o.map(r=>({...r,meta:{...r.meta,dataTopic:v.QR.Series}})):[...a.series,...o]}findSourcePanel(a,n){return(0,m.vL)(a,(0,m.XA)(n))}testDatasource(){return Promise.resolve({message:"",status:""})}}const P=new u.tD(C).setQueryEditor(c.A)},49935:(D,d,e)=>{e.d(d,{v:()=>s});var u=e(88483),c=e(15964);function s(f){return new u.c(function(l){(0,c.Tg)(f()).subscribe(l)})}}}]);

//# sourceMappingURL=2058.84b0f341e2d544e68b72.js.map