(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[404],{49880:(y,w,n)=>{"use client";const{createElement:M,useEffect:i,useRef:r}=n(96540);function v({html:m,dangerouslySetInnerHTML:p,allowRerender:x,...S}){const d=r(null),u=r(!0);return i(()=>{if(!m||!d.current)throw new Error("html prop can't be null");if(!u.current)return;u.current=!!x;const g=document.createRange().createContextualFragment(m);d.current.innerHTML="",d.current.appendChild(g)},[m,d]),M("div",{...S,ref:d})}y.exports=v},31984:(y,w,n)=>{"use strict";n.r(w),n.d(w,{plugin:()=>O});var M=n(65158),i=n(74848),r=n(32196),v=n(49880),m=n.n(v),p=n(96540),x=n(40996),S=n(80997),d=n(36663),u=n(40845),g=n(32372),T=n(40276),b=n(2913),s=(e=>(e.Code="code",e.HTML="html",e.Markdown="markdown",e))(s||{}),C=(e=>(e.Go="go",e.Html="html",e.Json="json",e.Markdown="markdown",e.Plaintext="plaintext",e.Sql="sql",e.Typescript="typescript",e.Xml="xml",e.Yaml="yaml",e))(C||{});const z="plaintext",h={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},H={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function k(e){const o=(0,u.of)(j),[a,c]=(0,p.useState)({mode:e.options.mode,content:P(e.options,e.replaceVariables,b.Ay.disableSanitizeHtml)});if((0,x.A)(()=>{const{options:t,replaceVariables:f}=e,l=P(t,f,b.Ay.disableSanitizeHtml);(l!==a.content||t.mode!==a.mode)&&c({mode:t.mode,content:l})},100,[e]),a.mode===s.Code){const t=e.options.code??h;return(0,i.jsx)(g.B,{value:a.content,language:t.language??h.language,width:e.width,height:e.height,containerStyles:o.codeEditorContainer,showMiniMap:t.showMiniMap,showLineNumbers:t.showLineNumbers,readOnly:!0},`${t.showLineNumbers}/${t.showMiniMap}`)}return(0,i.jsx)(T.E,{autoHeightMin:"100%",className:o.containStrict,children:(0,i.jsx)(m(),{allowRerender:!0,html:a.content,className:o.markdown,"data-testid":"TextPanel-converted-content"})})}function P(e,o,a){let{mode:c,content:t}=e;if(t=o(t,{},e.code?.language==="json"?"json":"html"),!t)return" ";switch(c){case s.Code:break;case s.HTML:a||(t=S.sQ.sanitizeTextPanelContent(t));break;case s.Markdown:default:t=(0,d.P)(t,{noSanitize:a})}return t}const j=e=>({codeEditorContainer:(0,r.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${e.colors.background.primary};
    }
  `,markdown:(0,r.cx)("markdown-html",(0,r.css)`
      height: 100%;
    `),containStrict:(0,r.css)({contain:"strict"})});var E=n(70713),N=n(99544);const B=({value:e,onChange:o,context:a})=>{const c=(0,p.useMemo)(()=>a.options?.mode??s.Markdown,[a]),t=(0,u.of)(V),f=()=>a.getSuggestions?a.getSuggestions().map(l=>(0,N.O)(l)):[];return(0,i.jsx)("div",{className:(0,r.cx)(t.editorBox),children:(0,i.jsx)(E.Ay,{disableHeight:!0,children:({width:l})=>l===0?null:(0,i.jsx)(g.B,{value:e,onBlur:o,onSave:o,language:c,width:l,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:f})})})},V=e=>({editorBox:(0,r.css)`
    label: editorBox;
    border: 1px solid ${e.colors.border.medium};
    border-radius: ${e.shape.radius.default};
    margin: ${e.spacing(.5)} 0;
    width: 100%;
  `}),L=e=>{const o=parseFloat(e.pluginVersion||"6.1");let a=e.options;if(e.hasOwnProperty("content")&&e.hasOwnProperty("mode")){const t=e,f=t.content,l=t.mode;delete t.content,delete t.mode,o<7.1&&(a={content:f,mode:l})}return[s.Code,s.HTML,s.Markdown].find(t=>t===a.mode)||(a={...a,mode:s.Markdown}),a},O=new M.m(k).setPanelOptions(e=>{e.addRadio({path:"mode",name:"Mode",settings:{options:[{value:s.Markdown,label:"Markdown"},{value:s.HTML,label:"HTML"},{value:s.Code,label:"Code"}]},defaultValue:H.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(C).map(o=>({value:o,label:o}))},defaultValue:h.language,showIf:o=>o.mode===s.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:h.showLineNumbers,showIf:o=>o.mode===s.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:h.showMiniMap,showIf:o=>o.mode===s.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:B,defaultValue:H.content})}).setMigrationHandler(L)}}]);

//# sourceMappingURL=textPanel.0c6f79977cf76e160bd3.js.map