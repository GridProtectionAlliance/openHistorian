"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7317],{68403:($,g,s)=>{s.r(g),s.d(g,{plugin:()=>E});var F=s(65158),f=s(37055),o=s(74848),y=s(41811),P=s(96540),x=s(96192),N=s(95511),U=s(48543);const j=({width:n,height:e,data:t,options:r})=>{const d=(0,x.JQ)(t.timeRange),l=(0,P.useId)();if(!t||!t.series.length)return(0,o.jsx)("div",{className:"panel-empty",children:(0,o.jsx)("p",{children:"No data found in response"})});const c=(0,y.A)(U.BR);return(0,o.jsx)("div",{style:{width:n,height:e},children:(0,o.jsx)(N.F,{dataFrames:c(t.series,r),getLinks:d,panelId:l})})};var S=s(32196),C=s(40845),G=s(83598),p=s(55852),A=s(76218);const O=({value:n,onChange:e,context:t})=>{const r=(0,C.of)(L),d=()=>{const i={field:"",color:""};e(n?[...n,i]:[i])},l=i=>{const a=n?.slice();a.splice(i,1),e(a)},c=(i,a,m)=>{let v=n?.slice()??[];v[i][a]=m,e(v)};return(0,o.jsxs)(o.Fragment,{children:[n?.map((i,a)=>(0,o.jsxs)("div",{className:r.section,children:[(0,o.jsx)(A.O,{context:t,value:i.field??"",onChange:m=>{c(a,"field",m)},item:{settings:{filter:m=>m.name.includes("arc__")},id:`arc-field-${a}`,name:`arc-field-${a}`}}),(0,o.jsx)(G.sk,{color:i.color||"#808080",onChange:m=>{c(a,"color",m)}}),(0,o.jsx)(p.$n,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>l(a),title:"Remove arc"})]},a)),(0,o.jsx)(p.$n,{size:"sm",icon:"plus",onClick:d,variant:"secondary",children:"Add arc"})]})},L=()=>({section:(0,S.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `});var h=s(11261),z=s(47070),u=s(38824);class D{getListWithDefaults(e){return e.getListAppender({name:u.m.NodeGraph,pluginId:"nodeGraph"})}hasCorrectFields(e){let t=!1,r=!1;const d=[["id",h.PU.string],["title",h.PU.string],["mainstat",h.PU.number]],l=[["id",h.PU.string],["source",h.PU.string],["target",h.PU.string]];for(const c of e)this.checkFields(d,c)&&(t=!0),this.checkFields(l,c)&&(r=!0);return t&&r}checkFields(e,t){let r=!0;for(const d of e){const[l,c]=d,i=t.fields.find(a=>a.name===l);if(!i||c!==i.type){r=!1;break}}return r}getSuggestionsForData(e){if(!e.data)return;const t=this.hasCorrectFields(e.data.series),r=e.data.series.filter(d=>d.meta&&d.meta.preferredVisualisationType==="nodeGraph");(t||r.length===2)&&this.getListWithDefaults(e).append({name:u.m.NodeGraph,score:z.nQ.Best})}}const E=new F.m(j).useFieldConfig({disableStandardOptions:Object.values(f.uo).filter(n=>n!==f.uo.Links)}).setPanelOptions((n,e)=>{n.addNestedOptions({category:["Nodes"],path:"nodes",build:t=>{t.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),t.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),t.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:O})}}),n.addNestedOptions({category:["Edges"],path:"edges",build:t=>{t.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),t.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})}).setSuggestionsSupplier(new D)}}]);

//# sourceMappingURL=nodeGraphPanel.f3cf4eaaa80ab54d2e6f.js.map