(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"+nK6":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"TeamList",function(){return O});var r=n("mrSG"),a=n("q1tI"),i=n.n(a),c=n("0cfB"),s=n("ZGyg"),u=n("kDLi"),o=n("QQVG"),m=n("GQ3c"),l=n("gxTa"),d=n("8uRs"),f=n("lzJ5"),b=n("EKT6"),h=n("ZFWI"),p=n("umNM"),g=n("hBny"),v=n("BPIC"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deleteTeam=function(e){t.props.deleteTeam(e.id)},t.onSearchQueryChange=function(e){t.props.setSearchQuery(e)},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.fetchTeams()},t.prototype.fetchTeams=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return[4,this.props.loadTeams()];case 1:return e.sent(),[2]}})})},t.prototype.renderTeam=function(e){var t=this,n=this.props,r=n.editorsCanAdmin,a=n.signedInUser,c=e.permission,s="org/teams/edit/"+e.id,o=Object(d.h)({permission:c,editorsCanAdmin:r,signedInUser:a});return i.a.createElement("tr",{key:e.id},i.a.createElement("td",{className:"width-4 text-center link-td"},i.a.createElement("a",{href:s},i.a.createElement("img",{className:"filter-table__avatar",src:e.avatarUrl}))),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:s},e.name)),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:s},e.email)),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:s},e.memberCount)),i.a.createElement("td",{className:"text-right"},i.a.createElement(u.DeleteButton,{size:"sm",disabled:!o,onConfirm:function(){return t.deleteTeam(e)}})))},t.prototype.renderEmptyList=function(){return i.a.createElement(o.a,{title:"You haven't created any teams yet.",buttonIcon:"gicon gicon-team",buttonLink:"org/teams/new",buttonTitle:" New team",proTip:"Assign folder and dashboard permissions to teams instead of users to ease administration.",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"})},t.prototype.renderTeamList=function(){var e=this,t=this.props,n=t.teams,r=t.searchQuery,a=t.editorsCanAdmin,c=t.signedInUser,s=a&&c.orgRole===m.OrgRole.Viewer,u=s?" disabled":"",o=s?"#":"org/teams/new";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(b.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search teams",value:r,onChange:this.onSearchQueryChange})),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("a",{className:"btn btn-primary"+u,href:o},"New team")),i.a.createElement("div",{className:"admin-list-table"},i.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"Members"),i.a.createElement("th",{style:{width:"1%"}}))),i.a.createElement("tbody",null,n.map(function(t){return e.renderTeam(t)})))))},t.prototype.renderList=function(){return this.props.teamsCount>0?this.renderTeamList():this.renderEmptyList()},t.prototype.render=function(){var e=this.props,t=e.hasFetched,n=e.navModel;return i.a.createElement(s.a,{navModel:n},i.a.createElement(s.a.Contents,{isLoading:!t},t&&this.renderList()))},t}(a.PureComponent);var j={loadTeams:l.g,deleteTeam:l.c,setSearchQuery:v.c};t.default=Object(c.hot)(e)(Object(g.a)(function(e){return{navModel:Object(f.a)(e.navIndex,"teams"),teams:Object(d.f)(e.teams),searchQuery:Object(d.b)(e.teams),teamsCount:Object(d.g)(e.teams),hasFetched:e.teams.hasFetched,editorsCanAdmin:h.a.editorsCanAdmin,signedInUser:p.a.user}},j,function(e){return e.teams})(O))}.call(this,n("3UD+")(e))},"8uRs":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"g",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"f",function(){return o}),n.d(t,"e",function(){return m}),n.d(t,"i",function(){return l}),n.d(t,"h",function(){return d});var r=n("GQ3c"),a=function(e){return e.searchQuery},i=function(e){return e.searchMemberQuery},c=function(e){return e.groups},s=function(e){return e.teams.length},u=function(e,t){return e.team.id===parseInt(t,10)?e.team:null},o=function(e){var t=RegExp(e.searchQuery,"i");return e.teams.filter(function(e){return t.test(e.name)})},m=function(e){var t=RegExp(e.searchMemberQuery,"i");return e.members.filter(function(e){return t.test(e.login)||t.test(e.email)||t.test(e.name)})},l=function(e){var t=e.members,n=e.signedInUser,a=e.editorsCanAdmin,i=t.find(function(e){return e.userId===n.id}),c=i?i.permission:r.TeamPermissionLevel.Member;return d({permission:c,signedInUser:n,editorsCanAdmin:a})},d=function(e){var t=e.permission,n=e.signedInUser,a=e.editorsCanAdmin,i=n.isGrafanaAdmin||n.orgRole===r.OrgRole.Admin,c=t===r.TeamPermissionLevel.Admin;return i||c||!a}},EKT6:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("q1tI"),a=n.n(r),i=n("Obii"),c=Object(r.forwardRef)(function(e,t){return a.a.createElement("label",{className:e.labelClassName},a.a.createElement("input",{ref:t,type:"text",className:e.inputClassName,value:Object(i.unEscapeStringFromRegex)(e.value),onChange:function(t){return e.onChange(Object(i.escapeStringForRegex)(t.target.value))},placeholder:e.placeholder?e.placeholder:null}),a.a.createElement("i",{className:"gf-form-input-icon fa fa-search"}))})},gxTa:function(e,t,n){"use strict";n.d(t,"g",function(){return u}),n.d(t,"d",function(){return o}),n.d(t,"f",function(){return m}),n.d(t,"b",function(){return l}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"e",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"h",function(){return p}),n.d(t,"c",function(){return g}),n.d(t,"k",function(){return v});var r=n("mrSG"),a=n("t8hP"),i=n("3SGO"),c=n("zsYB"),s=n("BPIC");function u(){var e=this;return function(t){return Object(r.__awaiter)(e,void 0,void 0,function(){var e;return Object(r.__generator)(this,function(n){switch(n.label){case 0:return[4,Object(a.getBackendSrv)().get("/api/teams/search",{perpage:1e3,page:1})];case 1:return e=n.sent(),t(Object(s.g)(e.teams)),[2]}})})}}function o(e){var t=this;return function(n){return Object(r.__awaiter)(t,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return[4,Object(a.getBackendSrv)().get("/api/teams/"+e)];case 1:return t=r.sent(),n(Object(s.e)(t)),n(Object(i.d)(Object(c.a)(t))),[2]}})})}}function m(){var e=this;return function(t,n){return Object(r.__awaiter)(e,void 0,void 0,function(){var e,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return e=n().team.team,[4,Object(a.getBackendSrv)().get("/api/teams/"+e.id+"/members")];case 1:return i=r.sent(),t(Object(s.f)(i)),[2]}})})}}function l(e){var t=this;return function(n,i){return Object(r.__awaiter)(t,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return t=i().team.team,[4,Object(a.getBackendSrv)().post("/api/teams/"+t.id+"/members",{userId:e})];case 1:return r.sent(),n(m()),[2]}})})}}function d(e){var t=this;return function(n,i){return Object(r.__awaiter)(t,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return t=i().team.team,[4,Object(a.getBackendSrv)().delete("/api/teams/"+t.id+"/members/"+e)];case 1:return r.sent(),n(m()),[2]}})})}}function f(e,t){var n=this;return function(i,c){return Object(r.__awaiter)(n,void 0,void 0,function(){var n;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return n=c().team.team,[4,Object(a.getBackendSrv)().put("/api/teams/"+n.id,{name:e,email:t})];case 1:return r.sent(),i(o(n.id)),[2]}})})}}function b(){var e=this;return function(t,n){return Object(r.__awaiter)(e,void 0,void 0,function(){var e,i;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return e=n().team.team,[4,Object(a.getBackendSrv)().get("/api/teams/"+e.id+"/groups")];case 1:return i=r.sent(),t(Object(s.d)(i)),[2]}})})}}function h(e){var t=this;return function(n,i){return Object(r.__awaiter)(t,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return t=i().team.team,[4,Object(a.getBackendSrv)().post("/api/teams/"+t.id+"/groups",{groupId:e})];case 1:return r.sent(),n(b()),[2]}})})}}function p(e){var t=this;return function(n,i){return Object(r.__awaiter)(t,void 0,void 0,function(){var t;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return t=i().team.team,[4,Object(a.getBackendSrv)().delete("/api/teams/"+t.id+"/groups/"+encodeURIComponent(e))];case 1:return r.sent(),n(b()),[2]}})})}}function g(e){var t=this;return function(n){return Object(r.__awaiter)(t,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return[4,Object(a.getBackendSrv)().delete("/api/teams/"+e)];case 1:return t.sent(),n(u()),[2]}})})}}function v(e){var t=this;return function(n){return Object(r.__awaiter)(t,void 0,void 0,function(){return Object(r.__generator)(this,function(t){switch(t.label){case 0:return[4,Object(a.getBackendSrv)().put("/api/teams/"+e.teamId+"/members/"+e.userId,{permission:e.permission})];case 1:return t.sent(),n(m()),[2]}})})}}},hBny:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("mrSG"),a=n("/MKj"),i=n("zVNn"),c=n("q1tI"),s=n.n(c),u=n("2mql"),o=n.n(u),m=function(e,t,n){return function(u){var m=Object(a.connect)(e,t)(u),l=function(e){var t=Object(a.useDispatch)();return Object(c.useEffect)(function(){return function(){t(Object(i.a)({stateSelector:n}))}},[]),s.a.createElement(m,Object(r.__assign)({},e))};return l.displayName="ConnectWithCleanUp("+m.displayName+")",o()(l,u),l}}},zsYB:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var r=n("mrSG"),a=n("GQ3c"),i=n("ZFWI");function c(e){var t={img:e.avatarUrl,id:"team-"+e.id,subTitle:"Manage members & settings",url:"",text:e.name,breadcrumbs:[{title:"Teams",url:"org/teams"}],children:[{active:!1,icon:"gicon gicon-team",id:"team-members-"+e.id,text:"Members",url:"org/teams/edit/"+e.id+"/members"},{active:!1,icon:"fa fa-fw fa-sliders",id:"team-settings-"+e.id,text:"Settings",url:"org/teams/edit/"+e.id+"/settings"}]};return i.b.licenseInfo.hasLicense&&t.children.push({active:!1,icon:"fa fa-fw fa-refresh",id:"team-groupsync-"+e.id,text:"External group sync",url:"org/teams/edit/"+e.id+"/groupsync"}),t}function s(e){var t,n,i,s=c({avatarUrl:"public/img/user_profile.png",id:1,name:"Loading",email:"loading",memberCount:0,permission:a.TeamPermissionLevel.Member});try{for(var u=Object(r.__values)(s.children),o=u.next();!o.done;o=u.next()){var m=o.value;if(m.id.indexOf(e)>0){m.active=!0,i=m;break}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return{main:s,node:i}}}}]);
//# sourceMappingURL=TeamList.4d0490a94b199a11f40c.js.map