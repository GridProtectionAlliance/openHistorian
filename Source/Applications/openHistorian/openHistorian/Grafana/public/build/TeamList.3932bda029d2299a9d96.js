(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"+nK6":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"TeamList",function(){return E});var r=n("mrSG"),a=n("q1tI"),i=n.n(a),s=n("/MKj"),o=n("0cfB"),m=n("ZGyg"),c=n("kDLi"),l=n("QQVG"),u=n("GQ3c"),d=n("gxTa"),f=n("8uRs"),p=n("lzJ5"),h=n("EKT6"),g=n("ZFWI"),b=n("umNM"),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deleteTeam=function(e){t.props.deleteTeam(e.id)},t.onSearchQueryChange=function(e){t.props.setSearchQuery(e)},t}return r.c(t,e),t.prototype.componentDidMount=function(){this.fetchTeams()},t.prototype.fetchTeams=function(){return r.b(this,void 0,void 0,function(){return r.d(this,function(e){switch(e.label){case 0:return[4,this.props.loadTeams()];case 1:return e.sent(),[2]}})})},t.prototype.renderTeam=function(e){var t=this,n=this.props,r=n.editorsCanAdmin,a=n.signedInUser,s=e.permission,o="org/teams/edit/"+e.id,m=Object(f.h)({permission:s,editorsCanAdmin:r,signedInUser:a});return i.a.createElement("tr",{key:e.id},i.a.createElement("td",{className:"width-4 text-center link-td"},i.a.createElement("a",{href:o},i.a.createElement("img",{className:"filter-table__avatar",src:e.avatarUrl}))),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:o},e.name)),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:o},e.email)),i.a.createElement("td",{className:"link-td"},i.a.createElement("a",{href:o},e.memberCount)),i.a.createElement("td",{className:"text-right"},i.a.createElement(c.DeleteButton,{onConfirm:function(){return t.deleteTeam(e)},disabled:!m})))},t.prototype.renderEmptyList=function(){return i.a.createElement(l.a,{title:"You haven't created any teams yet.",buttonIcon:"gicon gicon-team",buttonLink:"org/teams/new",buttonTitle:" New team",proTip:"Assign folder and dashboard permissions to teams instead of users to ease administration.",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"})},t.prototype.renderTeamList=function(){var e=this,t=this.props,n=t.teams,r=t.searchQuery,a=t.editorsCanAdmin,s=t.signedInUser,o=a&&s.orgRole===u.OrgRole.Viewer,m=o?" disabled":"",c=o?"#":"org/teams/new";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"page-action-bar"},i.a.createElement("div",{className:"gf-form gf-form--grow"},i.a.createElement(h.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search teams",value:r,onChange:this.onSearchQueryChange})),i.a.createElement("div",{className:"page-action-bar__spacer"}),i.a.createElement("a",{className:"btn btn-primary"+m,href:c},"New team")),i.a.createElement("div",{className:"admin-list-table"},i.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"Members"),i.a.createElement("th",{style:{width:"1%"}}))),i.a.createElement("tbody",null,n.map(function(t){return e.renderTeam(t)})))))},t.prototype.renderList=function(){return this.props.teamsCount>0?this.renderTeamList():this.renderEmptyList()},t.prototype.render=function(){var e=this.props,t=e.hasFetched,n=e.navModel;return i.a.createElement(m.a,{navModel:n},i.a.createElement(m.a.Contents,{isLoading:!t},t&&this.renderList()))},t}(a.PureComponent);var v={loadTeams:d.h,deleteTeam:d.d,setSearchQuery:d.l};t.default=Object(o.hot)(e)(Object(s.b)(function(e){return{navModel:Object(p.a)(e.navIndex,"teams"),teams:Object(f.f)(e.teams),searchQuery:Object(f.b)(e.teams),teamsCount:Object(f.g)(e.teams),hasFetched:e.teams.hasFetched,editorsCanAdmin:g.a.editorsCanAdmin,signedInUser:b.a.user}},v)(E))}.call(this,n("3UD+")(e))},"8uRs":function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return s}),n.d(t,"g",function(){return o}),n.d(t,"c",function(){return m}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"h",function(){return d});var r=n("GQ3c"),a=function(e){return e.searchQuery},i=function(e){return e.searchMemberQuery},s=function(e){return e.groups},o=function(e){return e.teams.length},m=function(e,t){return e.team.id===parseInt(t,10)?e.team:null},c=function(e){var t=RegExp(e.searchQuery,"i");return e.teams.filter(function(e){return t.test(e.name)})},l=function(e){var t=RegExp(e.searchMemberQuery,"i");return e.members.filter(function(e){return t.test(e.login)||t.test(e.email)})},u=function(e){var t=e.members,n=e.signedInUser,a=e.editorsCanAdmin,i=t.find(function(e){return e.userId===n.id}),s=i?i.permission:r.TeamPermissionLevel.Member;return d({permission:s,signedInUser:n,editorsCanAdmin:a})},d=function(e){var t=e.permission,n=e.signedInUser,a=e.editorsCanAdmin,i=n.isGrafanaAdmin||n.orgRole===r.OrgRole.Admin,s=t===r.TeamPermissionLevel.Admin;return i||s||!a}}}]);
//# sourceMappingURL=TeamList.3932bda029d2299a9d96.js.map