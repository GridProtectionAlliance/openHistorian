"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8431],{65229:(s,e,i)=>{i.r(e),i.d(e,{AccessControlFolderPermissions:()=>g,default:()=>P});var n=i(68404),o=i(18745),r=i(83654),d=i(69371),t=i(98163),a=i(8674),l=i(47570),c=i(87413),m=i(49545),h=i(45916);const p={getFolderByUid:c.Pb},u=(0,o.connect)((function(s,e){const i=e.match.params.uid;return{uid:i,pageNav:(0,a.h)(s.navIndex,`folder-permissions-${i}`,(0,m._)(1))}}),p),g=s=>{let{uid:e,getFolderByUid:i,pageNav:o}=s;(0,n.useEffect)((()=>{i(e)}),[i,e]);const a=t.Vt.hasPermission(l.bW.FoldersPermissionsWrite);return(0,h.jsx)(d.T,{navId:"dashboards/browse",pageNav:o.main,children:(0,h.jsx)(d.T.Contents,{children:(0,h.jsx)(r.P,{resource:"folders",resourceId:e,canSetPermissions:a})})})},P=u(g)},29577:(s,e,i)=>{i.r(e),i.d(e,{FolderPermissions:()=>F,default:()=>C});var n,o,r,d,t=i(68404),a=i(18745),l=i(3490),c=i(72779),m=i(69371),h=i(93319),p=i(18778),u=i(25130),g=i(8674),P=i(87413),f=i(49545),v=i(45916);function x(s,e,i){return e in s?Object.defineProperty(s,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[e]=i,s}const b={getFolderByUid:P.Pb,getFolderPermissions:P.a,updateFolderPermission:P.v7,removeFolderPermission:P.Uk,addFolderPermission:P.pz},j=(0,a.connect)(((s,e)=>{const i=e.match.params.uid;return{pageNav:(0,g.h)(s.navIndex,`folder-permissions-${i}`,(0,f._)(1)),folderUid:i,folder:s.folder}}),b);class F extends t.PureComponent{constructor(s){super(s),x(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),x(this,"onRemoveItem",(s=>{this.props.removeFolderPermission(s)})),x(this,"onPermissionChanged",((s,e)=>{this.props.updateFolderPermission(s,e)})),x(this,"onAddPermission",(s=>this.props.addFolderPermission(s))),x(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getFolderByUid(this.props.folderUid),this.props.getFolderPermissions(this.props.folderUid)}render(){const{pageNav:s,folder:e}=this.props,{isAdding:i}=this.state;if(0===e.id)return(0,v.jsx)(m.T,{navId:"dashboards/browse",pageNav:s.main,children:n||(n=(0,v.jsx)(m.T.Contents,{isLoading:!0,children:(0,v.jsx)("span",{})}))});const t={title:e.title,url:e.url,id:e.id};return(0,v.jsx)(m.T,{navId:"browse",pageNav:s.main,children:(0,v.jsxs)(m.T.Contents,{children:[(0,v.jsxs)("div",{className:"page-action-bar",children:[o||(o=(0,v.jsx)("h3",{className:"page-sub-heading",children:"Folder Permissions"})),r||(r=(0,v.jsx)(l.Tooltip,{placement:"auto",content:(0,v.jsx)(u.Z,{}),children:(0,v.jsx)(l.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),d||(d=(0,v.jsx)("div",{className:"page-action-bar__spacer"})),(0,v.jsx)(l.Button,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:i,children:"Add Permission"})]}),(0,v.jsx)(c.s,{in:i,children:(0,v.jsx)(h.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,v.jsx)(p.Z,{items:e.permissions,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:t})]})})}}const C=j(F)}}]);
//# sourceMappingURL=FolderPermissions.347b79876471ef6c856c.js.map