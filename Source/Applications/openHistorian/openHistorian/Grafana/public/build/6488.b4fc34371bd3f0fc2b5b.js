"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6488],{77293:(B,I,e)=>{e.d(I,{Yb:()=>m,d5:()=>b});var p=e(35645);const m=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function l(){const h=p.v.licenseInfo?.trialExpiry;return!!(h&&h>0)}const b=()=>l()&&p.v.featureToggles.featureHighlights},96488:(B,I,e)=>{e.d(I,{J_:()=>q,F5:()=>ta,M9:()=>J,gv:()=>V,Kj:()=>aa,bZ:()=>Y,kY:()=>Q,oe:()=>ea});var p=e(83383),m=e(35645),l=e(22069),b=e(54899),h=e(37932),C=e(659),u=e(77582),v=e(29930),o=e(86475),i=e(91162),d=e(13011),S=e(66322),s=e(65583),P=e(95156);const U=async()=>await(0,v.i)().get("/api/datasources"),M=async a=>{const n=await(0,s.n)((0,v.i)().fetch({method:"GET",url:`/api/datasources/${a}`,params:(0,P.y)(),showErrorAlert:!1}));if(n.ok)return n.data;throw Error(`Could not find data source by ID: "${a}"`)},A=async a=>{const n=await(0,s.n)((0,v.i)().fetch({method:"GET",url:`/api/datasources/uid/${a}`,params:(0,P.y)(),showErrorAlert:!1}));if(n.ok)return n.data;throw Error(`Could not find data source by UID: "${a}"`)},w=async a=>{try{return await A(a)}catch{console.log(`Failed to lookup data source using UID "${a}"`)}try{return await M(a)}catch{console.log(`Failed to lookup data source using ID "${a}"`)}throw Error("Could not find data source")},N=a=>(0,v.i)().post("/api/datasources",a),T=()=>(0,v.i)().get("/api/plugins",{enabled:1,type:"datasource"}),Z=a=>(0,v.i)().put(`/api/datasources/uid/${a.uid}`,a),$=a=>(0,v.i)().delete(`/api/datasources/uid/${a}`);var O=e(3597),L=e(63065),k=e(85597),z=e(24699),K=e(66121);function G(a){const n=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(t=>t),r={},c={},D=H();for(const t of n)r[t.id]=t;for(const t of a){const x=D.find(y=>y.id===t.id);if((t.enterprise||x)&&(t.category="enterprise",t.unlicensed=!(0,K.v)("enterprise.plugins"),t.info.links=x?.info?.links||t.info.links),t.info.links)for(const y of t.info.links)y.name="Learn more";(n.find(y=>y.id===t.category)||r.other).plugins.push(t),c[t.id]=t}for(const t of n){if(t.id==="cloud"&&t.plugins.push(j()),t.id==="enterprise")for(const x of D)c[x.id]||t.plugins.push(x);F(t.plugins)}return n.filter(t=>t.plugins.length>0)}function F(a){const n={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};a.sort((r,c)=>{const D=n[r.id]||0,t=n[c.id]||0;return D>t?-1:D<t||r.name>c.name?1:-1})}function H(){return[f({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),f({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),f({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),f({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),f({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),f({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),f({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),f({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),f({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),f({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),f({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),f({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),f({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),f({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),f({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),f({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),f({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})]}function j(){return{id:"gcloud",name:"Grafana Cloud",type:z.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function f(a){return{id:a.id,name:a.name,type:z.zV.datasource,module:"phantom",baseUrl:"",info:{description:a.description,logos:{small:a.imgUrl,large:a.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+a.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var _=e(79508),E=e(41632),W=e(93769);const J=(a,n={loadDataSource:V,loadDataSourceMeta:X,getDataSource:W.f6,getDataSourceMeta:W.G4,importDataSourcePlugin:S.nL})=>async(r,c)=>{if(!a){r((0,E.CT)(new Error("Invalid UID")));return}try{const D=await r(n.loadDataSource(a));await r(n.loadDataSourceMeta(D));const t=n.getDataSource(c().dataSources,a),x=n.getDataSourceMeta(c().dataSources,t.type),g=await n.importDataSourcePlugin(x);r((0,E.iZ)(g))}catch(D){D instanceof Error&&r((0,E.CT)(D))}},Q=(a,n=O.n.Edit,r={getDatasourceSrv:i.ak,getBackendSrv:v.i})=>async(c,D)=>{const t=await r.getDatasourceSrv().get(a),x=n.replace(/:uid/gi,a);t.testDatasource&&(c((0,E.j_)()),r.getBackendSrv().withNoBackendCache(async()=>{try{const g=await t.testDatasource();c((0,E.ng)(g)),(0,L.Rw)({grafana_version:m.v.buildInfo.version,plugin_id:t.type,datasource_uid:t.uid,success:!0,path:x})}catch(g){let y,R;g instanceof l.ZA?(y=g.message,R=g.details):(0,b.kW)(g)?y=g.data.message??`HTTP error ${g.statusText}`:g instanceof Error&&(y=g.message),c((0,E.Aq)({message:y,details:R})),(0,L.Rw)({grafana_version:m.v.buildInfo.version,plugin_id:t.type,datasource_uid:t.uid,success:!1,path:x})}}))};function Y(){return async a=>{a((0,E.MP)());const n=await U();a((0,E.be)(n))}}function V(a){return async n=>{let r=await w(a);return a!==r.uid&&(window.location.href=p.u.assureBaseUrl(`/datasources/edit/${r.uid}`),r={}),n((0,E.rl)(r)),r}}function X(a){return async n=>{const r=await(0,d.a)(a.type),c=await(0,S.nL)(r),D=c.DataSourceClass.prototype instanceof l.CK,t={...r,isBackend:r.backend||D};n((0,E.jS)(t)),c.meta=t,n((0,C.RL)((0,_.B1)(a,c)))}}function q(a,n=O.n.Edit){return async(r,c)=>{const D=await U();r((0,E.be)(D));const t=c().dataSources.dataSources,x=t.length===0,g={name:a.name,type:a.id,access:"proxy",isDefault:x};(0,k.NV)(t,g.name)&&(g.name=(0,k.eM)(t,g.name));const y=await N(g),R=n.replace(/:uid/gi,y.datasource.uid);await(0,i.ak)().reload(),await u.Vt.fetchUserPermissions(),(0,L.Er)({grafana_version:m.v.buildInfo.version,plugin_id:a.id,datasource_uid:y.datasource.uid,plugin_version:y.meta?.info?.version,path:R}),h.E1.push(R)}}function aa(){return async a=>{a((0,E.Ww)());const n=await T(),r=G(n);a((0,E.wZ)({plugins:n,categories:r}))}}function ea(a){return async n=>(await Z(a),await(0,i.ak)().reload(),n(V(a.uid)))}function ta(){return async(a,n)=>{const{uid:r}=n().dataSources.dataSource;await $(r),await(0,i.ak)().reload();const c=m.v.featureToggles.dataConnectionsConsole?o.Z.DataSources:"/datasources";h.E1.push(c)}}},79508:(B,I,e)=>{e.d(I,{B1:()=>o,nI:()=>i,xG:()=>d});var p=e(24699),m=e(66121),l=e(73194),b=e(47694),h=e(77582),C=e(77293),u=e(81168);const v="Loading";function o(s,P){const U=P.meta,M=b.ZP.featureToggles.featureHighlights,A={img:U.info.logos.large,id:"datasource-"+s.uid,subTitle:`Type: ${U.name}`,url:"",text:s.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${s.uid}`,text:"Settings",url:`datasources/edit/${s.uid}/`}]};if(P.configPages)for(const k of P.configPages)A.children.push({active:!1,text:k.title,icon:k.icon,url:`datasources/edit/${s.uid}/?page=${k.id}`,id:`datasource-page-${k.id}`});U.includes&&S(U.includes)&&h.Vt.hasRole("Admin")&&A.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${s.uid}`,text:"Dashboards",url:`datasources/edit/${s.uid}/dashboards`});const w=s.type===v,N="feature-highlights-data-source-permissions-badge",T={active:!1,icon:"lock",id:`datasource-permissions-${s.uid}`,text:"Permissions",url:`datasources/edit/${s.uid}/permissions`};(0,C.d5)()&&!w&&(T.tabSuffix=()=>(0,l.Z)({experimentId:N,eventVariant:"trial"})),(0,m.v)("dspermissions.enforcement")?h.Vt.hasPermission(u.AccessControlAction.DataSourcesPermissionsRead)&&A.children.push(T):M&&!w&&A.children.push({...T,url:T.url+"/upgrade",tabSuffix:()=>(0,l.Z)({experimentId:N})});const Z="feature-highlights-data-source-insights-badge",$={active:!1,icon:"info-circle",id:`datasource-insights-${s.uid}`,text:"Insights",url:`datasources/edit/${s.uid}/insights`};(0,C.d5)()&&!w&&($.tabSuffix=()=>(0,l.Z)({experimentId:Z,eventVariant:"trial"})),(0,m.v)("analytics")?h.Vt.hasPermission(u.AccessControlAction.DataSourcesInsightsRead)&&A.children.push($):M&&!w&&A.children.push({...$,url:$.url+"/upgrade",tabSuffix:()=>(0,l.Z)({experimentId:Z})});const O="feature-highlights-query-caching-badge",L={active:!1,icon:"database",id:`datasource-cache-${s.uid}`,text:"Cache",url:`datasources/edit/${s.uid}/cache`,hideFromTabs:!U.isBackend||!b.ZP.caching.enabled};return(0,C.d5)()&&!w&&(L.tabSuffix=()=>(0,l.Z)({experimentId:O,eventVariant:"trial"})),(0,m.v)("caching")?h.Vt.hasPermissionInMetadata(u.AccessControlAction.DataSourcesCachingRead,s)&&A.children.push(L):M&&!w&&A.children.push({...L,url:L.url+"/upgrade",tabSuffix:()=>(0,l.Z)({experimentId:O})}),A}function i(s,P){let U={text:""};for(const M of s.children)if(M.id.indexOf(P)>0){M.active=!0,U=M;break}return{main:s,node:U}}function d(s){const P=o({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:v,typeName:v,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:p.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return i(P,s)}function S(s){return s.find(P=>P.type==="dashboard")!==void 0}},93769:(B,I,e)=>{e.d(I,{G4:()=>b,I5:()=>m,IA:()=>v,IO:()=>h,f6:()=>l,mt:()=>p,r7:()=>u});const p=o=>{const i=new RegExp(o.searchQuery,"i");return o.dataSources.filter(S=>i.test(S.name)||i.test(S.database)||i.test(S.type)).sort((S,s)=>o.isSortAscending?S.name.localeCompare(s.name):s.name.localeCompare(S.name))},m=o=>{const i=new RegExp(o.dataSourceTypeSearchQuery,"i");return o.plugins.filter(d=>i.test(d.name))},l=(o,i)=>o.dataSource.uid===i?o.dataSource:{},b=(o,i)=>o.dataSourceMeta.id===i?o.dataSourceMeta:{},h=o=>o.searchQuery,C=o=>o.layoutMode,u=o=>o.dataSourcesCount,v=o=>o.isSortAscending},63065:(B,I,e)=>{e.d(I,{Er:()=>m,Rw:()=>l,U4:()=>b,dF:()=>C,hJ:()=>h});var p=e(41818);const m=u=>{(0,p.ff)("grafana_ds_add_datasource_clicked",u)},l=u=>{(0,p.ff)("grafana_ds_test_datasource_clicked",u)},b=u=>{(0,p.ff)("grafana_ds_explore_datasource_clicked",u)},h=u=>{(0,p.ff)("grafana_ds_create_dashboard_clicked",u)},C=u=>{(0,p.ff)("grafana_ds_datasources_list_viewed",u)}},85597:(B,I,e)=>{e.d(I,{NV:()=>l,eM:()=>b,iU:()=>o});var p=e(27677),m=e(83383);function l(i,d){return i.filter(S=>S.name.toLowerCase()===d.toLowerCase()).length>0}function b(i,d){for(;l(i,d);)h(d)?d=`${v(d)}${u(C(d))}`:d=`${d}-1`;return d}function h(i){return i.endsWith("-",i.length-1)}function C(i){return parseInt(i.slice(-1),10)}function u(i){return isNaN(i)?1:i+1}function v(i){return i.slice(0,i.length-1)}const o=i=>{const d=JSON.stringify({datasource:i.name,context:"explore"});return p.Cj.renderUrl(m.u.assureBaseUrl("/explore"),{left:d})}}}]);

//# sourceMappingURL=6488.b4fc34371bd3f0fc2b5b.js.map