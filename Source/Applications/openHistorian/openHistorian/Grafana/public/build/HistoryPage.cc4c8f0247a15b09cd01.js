"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[44],{64047:(le,L,a)=>{a.d(L,{e:()=>M});var t=a(74848),A=a(55852);const M=({isCollapsed:g,onToggle:C,idControlled:$,className:d,text:T,size:R="xl",...K})=>(0,t.jsx)(A.$n,{type:"button",fill:"text",variant:"secondary","aria-expanded":!g,"aria-controls":$,className:d,icon:g?"angle-right":"angle-down",onClick:()=>C(!g),...K,children:T})},57362:(le,L,a)=>{a.r(L),a.d(L,{default:()=>xt});var t=a(74848),A=a(66602),M=a(37959),g=a(32196),C=a(96540),$=a(12470),d=a(81887),T=a(52622),R=a(56034),K=a(55852),b=a(40845),v=a(94753),B=a(14578),u=a(8484),w=a(25027),ce=a(74856),de=a(99140),z=a(29333),ue=a(24180),ge=a(49185),k=a(42418),me=a(57514),F=a(67061),he=a(19384),S=a(94822),ye=a(98439),H=a(98164),fe=a(57220),xe=a(3704),pe=a(69087),ve=a(64047),O=a(2543),je=a(730),G=a(32642),Fe=a(18461),Ce=a(55196),Te=a(50509),be=a(95584),Se=a(285),E=a(14084),Ne=a(17172),Ee=a(7392),Ie=a(78742);function q({error:e}){if((0,Ne.NF)(e)&&e.status===404)return(0,t.jsx)(Ee.L,{entity:"History"});const n=(0,u.t)("alerting.central-alert-history.error","Something went wrong loading the alert state history"),s=(0,Ie.JZ)(e);return(0,t.jsx)(k.F,{title:n,children:s})}var I=a(11261),Re=a(25019),we=a(50082),Pe=a(57875),_=a(48241);const ee=10*1e3,W="var-",Le={stateTo:"all",stateFrom:"all"};function Ae({data:e},n=Le){const{stateTo:s,stateFrom:r}=n,[i=[],c=[]]=e?.values??[],l=((0,E.bF)(i)?i:[]).reduce((y,m,j)=>{const x=c[j];if(!(0,E.PA)(x))return y;const N=(0,S.lh)(x.current),P=(0,S.lh)(x.previous),X=s!==f.all?s===N:!0,Y=r!==f.all?r===P:!0;return X&&Y&&y.push({timestamp:m,line:x}),y},[]),h=(0,O.groupBy)(l,y=>JSON.stringify(y.line.labels)),p=Object.entries(h).map(([y,m])=>De(y,m));return Oe(p)}function $e(){return new URLSearchParams(window.location.search).get(`${W}${J}`)??""}function Be(){return new URLSearchParams(window.location.search).get(`${W}${Q}`)??f.all}function He(){return new URLSearchParams(window.location.search).get(`${W}${Z}`)??f.all}function Oe(e){const n=$e(),r=e.filter(l=>{const h=JSON.parse(l.name??""),p=n?(0,G.Zc)(n):[];return(0,H.Av)(h,p)}).flatMap(l=>l.fields.find(h=>h.name==="time")),i=(0,O.groupBy)(r?.flatMap(l=>l?.values),l=>Math.floor(l/ee)*ee),c={name:"time",type:I.PU.time,values:Object.keys(i).map(Number),config:{displayName:"Time",custom:{fillOpacity:100}}},o={name:"value",type:I.PU.number,values:Object.values(i).map(l=>l.length),config:{}};return[{fields:[c,o],length:c.values.length}]}function De(e,n){const s={name:"time",type:I.PU.time,values:[...n.map(c=>c.timestamp)],config:{displayName:"Time",custom:{fillOpacity:100}}},r=s.values.map((c,o)=>o);return r.sort((0,_.i)(s)),{fields:[{...s,values:s.values.map((c,o)=>s.values[r[o]])},{name:e,type:I.PU.number,values:s.values.map(c=>1),config:{}}],length:s.values.length,name:e}}function Ve(e,n){const s={name:"time",type:I.PU.time,values:[...e.map(o=>o.timestamp),Date.now()],config:{displayName:"Time",custom:{fillOpacity:100}}},r=s.values.map((o,l)=>l);r.sort((0,_.i)(s));const i=[...e.map(o=>o.line.current),e.at(-1)?.line.current],c={fields:[{...s,values:s.values.map((o,l)=>s.values[r[l]])},{name:"State",type:I.PU.string,values:i.map((o,l)=>i[r[l]]),config:{displayName:"State",color:{mode:"thresholds"},custom:{fillOpacity:100},mappings:[{type:Re.d.ValueToText,options:{Alerting:{color:n.colors.error.main},Pending:{color:n.colors.warning.main},Normal:{color:n.colors.success.main},NoData:{color:n.colors.info.main}}}],thresholds:{mode:we.O.Absolute,steps:[]}}}],length:s.values.length,name:""};return c.fields.forEach(o=>{o.display=(0,Pe.J)({field:o,theme:n})}),c}function Ue({record:e,addFilter:n,timeRange:s}){(0,C.useEffect)(()=>{(0,w.iW)()},[]);const r=e.line?.ruleUID??"",i=e.line?.labels,c=(0,C.useMemo)(()=>(0,Fe.qg)(r,!0),[r]),{error:o,loading:l,result:h}=(0,je.ZU)({ruleIdentifier:c,limitAlerts:0});return o?(0,t.jsx)(v.E,{children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.error",children:"Error loading rule for this event."})}):l?(0,t.jsx)(v.E,{children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.loading",children:"Loading..."})}):h?(0,t.jsxs)(F.B,{direction:"column",gap:.5,children:[(0,t.jsxs)(F.B,{direction:"row",gap:6,children:[(0,t.jsx)(ze,{record:e,addFilter:n}),(0,t.jsx)(We,{record:e})]}),(0,t.jsx)(Ge,{rule:h}),(0,t.jsx)(Ke,{ruleUID:r,timeRange:s,labels:i??{}})]}):(0,t.jsx)(v.E,{children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.not-found",children:"Rule not found for this event."})})}function Me(e,n){const s=(0,b.$j)();return(0,C.useMemo)(()=>{const r=n?.data?.values[0]??[],i=(0,E.bF)(r)?r:[],c=n?.data?.values[1]??[],o=i.reduce((m,j,x)=>{const N=c[x];return(0,E.PA)(N)&&m.push({timestamp:j,line:N}),m},[]),l=(0,O.groupBy)(o,m=>JSON.stringify(m.line.labels)),h=(0,G.Zc)(e),p=Object.entries(l).filter(([m])=>{const j=JSON.parse(m);return(0,H.Av)(j,h)});return{dataFrames:Object.values(p).map(m=>Ve(m[1],s))}},[n,e,s])}function Ke({ruleUID:e,timeRange:n,labels:s}){const{useGetRuleHistoryQuery:r}=z.U,{currentData:i,isLoading:c,isError:o,error:l}=r({ruleUid:e,from:n.from.unix(),to:n.to.unix(),limit:D},{refetchOnFocus:!0,refetchOnReconnect:!0}),{dataFrames:h}=Me(s?Object.entries(s).map(([j,x])=>`${j}=${x}`).join(","):"",i),{frameSubset:p,frameTimeRange:y}=(0,Se.useFrameSubset)(h);if(c)return(0,t.jsx)("div",{children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.loading",children:"Loading..."})});if(o)return(0,t.jsx)(q,{error:l});if(!p||p.length===0)return null;const m=h[0]?.fields[0]?.values?.length-1;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Je,{transitions:e?m:0}),(0,t.jsx)(be.A,{frames:p,timeRange:y})]})}function ze({record:e,addFilter:n}){return(0,t.jsxs)(F.B,{gap:.5,direction:"column",children:[(0,t.jsx)(v.E,{variant:"body",weight:"light",color:"secondary",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.state-transitions",children:"State transition"})}),(0,t.jsxs)(F.B,{gap:.5,direction:"row",alignItems:"center",children:[(0,t.jsx)(V,{state:e.line.previous,showLabel:!0,addFilter:n,type:"from"}),(0,t.jsx)(B.I,{name:"arrow-right",size:"lg"}),(0,t.jsx)(V,{state:e.line.current,showLabel:!0,addFilter:n,type:"to"})]})]})}const Ge=({rule:e})=>{const n=(0,b.of)(te),s=e.annotations;return!s||Object.keys(s).length===0?null:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:n.metadataWrapper,children:Object.entries(s).map(([r,i])=>{const c=(0,O.capitalize)(r);return(0,t.jsxs)(Ce.P,{direction:"column",children:[c,(0,t.jsx)(Te.$,{value:i})]},c)})})})};function We({record:e}){const n=e?.line?.values?JSON.stringify(e.line.values):(0,u.t)("alerting.central-alert-history.details.no-values","No values");return(0,t.jsxs)(F.B,{gap:.5,direction:"column",children:[(0,t.jsx)(v.E,{variant:"body",weight:"light",color:"secondary",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.value-in-transition",children:"Value in transition"})}),(0,t.jsx)(F.B,{gap:.5,direction:"row",alignItems:"center",children:(0,t.jsx)(v.E,{variant:"body",weight:"light",children:n})})]})}function Je({transitions:e}){const n=(0,b.of)(te);return(0,t.jsxs)("div",{className:n.transitionsNumber,children:[(0,t.jsx)(v.E,{variant:"body",weight:"bold",color:"secondary",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.number-transitions",children:"State transitions for selected period:"})}),(0,t.jsx)(v.E,{variant:"body",weight:"light",children:e})]})}const te=e=>({metadataWrapper:(0,g.css)({display:"grid",gridTemplateColumns:"auto auto",rowGap:e.spacing(3),columnGap:e.spacing(12)}),transitionsNumber:(0,g.css)({display:"flex",flexDirection:"row",gap:e.spacing(.5),alignItems:"center",marginTop:e.spacing(1.5)})}),ne={labels:"",stateFrom:"all",stateTo:"all"};function Qe(e,n=ne){return(0,C.useMemo)(()=>Ze(e,n),[n,e])}function Ze(e,n=ne){const{labels:s,stateFrom:r,stateTo:i}=n;if(!e?.data)return{historyRecords:[]};const c=s?(0,G.Zc)(s):[],[o,l]=e.data.values;return{historyRecords:((0,E.bF)(o)?o:[]).reduce((y,m,j)=>{const x=l[j];if(!(0,E.PA)(x))return y;const N=x.labels&&(0,H.Av)(x.labels,c),P=(0,S.lh)(x.current),X=(0,S.lh)(x.previous),Y=i!==f.all?i===P:!0,pt=r!==f.all?r===X:!0;return N&&Y&&pt&&y.push({timestamp:m,line:x}),y},[])}}const D=5e3,Xe=100,se=({timeRange:e,valueInLabelFilter:n,valueInStateToFilter:s,valueInStateFromFilter:r,addFilter:i})=>{const c=e?.from.unix(),o=e?.to.unix(),{data:l,isLoading:h,isError:p,error:y}=z.U.endpoints.getRuleHistory.useQuery({from:c,to:o,limit:D}),{historyRecords:m}=Qe(l,{labels:n.toString(),stateFrom:r.toString(),stateTo:s.toString()}),j=m.sort((N,P)=>P.timestamp-N.timestamp);if(p)return(0,t.jsx)(q,{error:y});const x=!h&&l?.data?.values?.[0]?.length===D;return x&&(0,w.Hs)({from:c,to:o}),(0,t.jsxs)(t.Fragment,{children:[x&&(0,t.jsx)(k.F,{severity:"warning",title:(0,u.t)("alerting.central-alert-history.too-many-events.title","Unable to display all events"),children:(0,u.t)("alerting.central-alert-history.too-many-events.text","The selected time period has too many events to display. Diplaying the latest 5000 events. Try using a shorter time period.")}),(0,t.jsx)(Ye,{visible:h}),(0,t.jsx)(ke,{logRecords:j,addFilter:i,timeRange:e})]})},Ye=({visible:e=!1})=>{const[n,{width:s}]=(0,ge.A)();return(0,t.jsx)("div",{ref:n,children:e&&(0,t.jsx)(me.G,{width:s,"data-testid":"loading-bar"})})};function ke({logRecords:e,addFilter:n,timeRange:s}){const{page:r,pageItems:i,numberOfPages:c,onPageChange:o}=(0,ye.W)(e,1,Xe);return(0,t.jsxs)(F.B,{direction:"column",gap:0,children:[(0,t.jsx)(qe,{}),(0,t.jsx)("ul",{children:i.map(l=>(0,t.jsx)(_e,{record:l,addFilter:n,timeRange:s},l.timestamp+(l.line.fingerprint??"")))}),(0,t.jsx)(he.d,{currentPage:r,numberOfPages:c,onNavigate:o,hideWhenSinglePage:!0})]})}function qe(){const e=(0,b.of)(U);return(0,t.jsx)("div",{className:e.headerWrapper,children:(0,t.jsxs)("div",{className:e.mainHeader,children:[(0,t.jsx)("div",{className:e.timeCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.header.timestamp",children:"Timestamp"})})}),(0,t.jsx)("div",{className:e.transitionCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.header.state",children:"State"})})}),(0,t.jsx)("div",{className:e.alertNameCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.header.alert-rule",children:"Alert rule"})})}),(0,t.jsx)("div",{className:e.labelsCol,children:(0,t.jsx)(v.E,{variant:"body",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.header.instance",children:"Instance"})})})]})})}function _e({record:e,addFilter:n,timeRange:s}){const r=(0,b.of)(U),[i,c]=(0,C.useState)(!0);function o(l,h){n(l,h,"label")}return(0,t.jsxs)(F.B,{direction:"column",gap:0,children:[(0,t.jsxs)("div",{className:(0,g.cx)(r.header,i?r.collapsedHeader:r.notCollapsedHeader),"data-testid":"event-row-header",children:[(0,t.jsx)(ve.e,{size:"sm",className:r.collapseToggle,isCollapsed:i,onToggle:c}),(0,t.jsxs)(F.B,{gap:.5,direction:"row",alignItems:"center",children:[(0,t.jsx)("div",{className:r.timeCol,children:(0,t.jsx)(nt,{time:e.timestamp})}),(0,t.jsx)("div",{className:r.transitionCol,children:(0,t.jsx)(tt,{previous:e.line.previous,current:e.line.current,addFilter:n})}),(0,t.jsx)("div",{className:r.alertNameCol,children:e.line.labels?(0,t.jsx)(et,{labels:e.line.labels,ruleUID:e.line.ruleUID}):null}),(0,t.jsx)("div",{className:r.labelsCol,children:(0,t.jsx)(pe.m,{labels:e.line.labels??{},size:"xs",onClick:o})})]})]}),!i&&(0,t.jsx)("div",{className:r.expandedRow,children:(0,t.jsx)(Ue,{record:e,addFilter:n,timeRange:s})})]})}function et({labels:e,ruleUID:n}){const s=(0,b.of)(U),{pathname:r,search:i}=(0,ue.zy)(),c=`${r}${i}`,o=e.alertname;if(!n)return(0,t.jsx)(v.E,{children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.unknown-rule",children:"Unknown"})});const l=(0,xe.G)(`/alerting/${fe.hY}/${n}/view`,{tab:"history",returnTo:c});return(0,t.jsx)(R.m,{content:o??"",children:(0,t.jsx)("a",{href:l,className:s.alertName,children:o})})}function tt({previous:e,current:n,addFilter:s}){return(0,t.jsxs)(F.B,{gap:.5,direction:"row",children:[(0,t.jsx)(V,{state:e,addFilter:s,type:"from"}),(0,t.jsx)(B.I,{name:"arrow-right",size:"lg"}),(0,t.jsx)(V,{state:n,addFilter:s,type:"to"})]})}const re=({iconName:e,iconColor:n,tooltipContent:s,labelText:r,showLabel:i})=>(0,t.jsx)(R.m,{content:s,placement:"top",children:(0,t.jsxs)(F.B,{gap:.5,direction:"row",alignItems:"center",children:[(0,t.jsx)(B.I,{name:e,size:"md",className:n}),i&&(0,t.jsx)(v.E,{variant:"body",weight:"light",children:r})]})});function V({state:e,showLabel:n=!1,addFilter:s,type:r}){const i=(0,b.of)(U),c=(0,u.t)("alerting.central-alert-history.details.no-recognized-state","No recognized state");if(!(0,S.s1)(e)&&!(0,S.qr)(e))return(0,t.jsx)(re,{iconName:"exclamation-triangle",tooltipContent:c,labelText:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.unknown-event-state",children:"Unknown"}),showLabel:n,iconColor:i.warningColor});const o=(0,S.lh)(e),l=(0,S.$k)(e),h={Normal:{iconName:"check-circle",iconColor:l?i.warningColor:i.normalColor,tooltipContent:l?`Normal (${l})`:"Normal",labelText:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.state.normal",children:"Normal"})},Alerting:{iconName:"exclamation-circle",iconColor:i.alertingColor,tooltipContent:"Alerting",labelText:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.state.alerting",children:"Alerting"})},NoData:{iconName:"exclamation-triangle",iconColor:i.warningColor,tooltipContent:"Insufficient data",labelText:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.state.no-data",children:"No data"})},Error:{iconName:"exclamation-circle",tooltipContent:"Error",iconColor:i.warningColor,labelText:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.state.error",children:"Error"})},Pending:{iconName:"circle",iconColor:i.warningColor,tooltipContent:l?`Pending (${l})`:"Pending",labelText:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.details.state.pending",children:"Pending"})}};function p(){s("state",o,r==="from"?"stateFrom":"stateTo")}const y=h[o]||{iconName:"exclamation-triangle",tooltipContent:"Unknown State"};return(0,t.jsx)("div",{onClick:p,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&p()},className:i.state,role:"button",tabIndex:0,children:(0,t.jsx)(re,{...y,showLabel:n})})}const nt=({time:e})=>{const s=new Date(e).toLocaleString("en-US",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(0,t.jsx)(v.E,{variant:"body",weight:"light",children:s})},vt=(0,A.Xc)(se,{style:"page"}),U=e=>({header:(0,g.css)({display:"flex",flexDirection:"row",alignItems:"center",padding:`${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} 0`,flexWrap:"nowrap","&:hover":{backgroundColor:e.components.table.rowHoverBackground}}),collapsedHeader:(0,g.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),notCollapsedHeader:(0,g.css)({borderBottom:"none"}),collapseToggle:(0,g.css)({background:"none",border:"none",marginTop:`-${e.spacing(1)}`,marginBottom:`-${e.spacing(1)}`,svg:{marginBottom:0}}),normalColor:(0,g.css)({fill:e.colors.success.text}),warningColor:(0,g.css)({fill:e.colors.warning.text}),alertingColor:(0,g.css)({fill:e.colors.error.text}),timeCol:(0,g.css)({width:"150px"}),transitionCol:(0,g.css)({width:"80px"}),alertNameCol:(0,g.css)({width:"300px"}),labelsCol:(0,g.css)({display:"flex",overflow:"hidden",alignItems:"center",paddingRight:e.spacing(2),flex:1}),alertName:(0,g.css)({whiteSpace:"nowrap",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",display:"block",color:e.colors.text.link}),expandedRow:(0,g.css)({padding:e.spacing(2),marginLeft:e.spacing(2),borderLeft:`1px solid ${e.colors.border.weak}`}),colorIcon:(0,g.css)({color:e.colors.primary.text,"&:hover":{opacity:.8}}),state:(0,g.css)({"&:hover":{opacity:.8,cursor:"pointer"}}),headerWrapper:(0,g.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),mainHeader:(0,g.css)({display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"nowrap",marginLeft:"30px",padding:`${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} 0`,gap:e.spacing(.5)})});class st extends d.Bs{static{this.Component=rt}constructor(){super({})}}function rt({model:e}){const{value:n}=d.jh.getTimeRange(e).useState(),s=d.jh.lookupVariable(J,e),r=d.jh.lookupVariable(Q,e),i=d.jh.lookupVariable(Z,e),c=s.getValue(),o=r.getValue(),l=i.getValue(),h=(p,y,m)=>{const j=`${p}=${y}`;(0,w.P6)({type:m,key:p,value:y}),m==="stateTo"&&r.changeValueTo(y),m==="stateFrom"&&i.changeValueTo(y);const x=(0,H.EU)(c.toString(),j);m==="label"&&s.setValue(x)};return(0,t.jsx)(se,{timeRange:n,valueInLabelFilter:c,addFilter:h,valueInStateToFilter:o,valueInStateFromFilter:l})}const ae="__history_api_ds_uid__",ie="__history_api_ds_pluginId__",at={type:ie,uid:ae,settings:void 0};function it(){const e=(0,C.useMemo)(()=>new ot(ae,ie),[]);(0,C.useEffect)(()=>{try{d.Go.registerRuntimeDataSource({dataSource:e})}catch{}},[e])}class ot extends d.UU{constructor(n,s){super(s,n)}async query(n){const s=n.range.from.unix(),r=n.range.to.unix(),i=Be(),c=He(),o=await lt(s,r);return{data:Ae(o,{stateTo:i,stateFrom:c})}}testDatasource(){return Promise.resolve({status:"success",message:"Data source is working",title:"Success"})}}const lt=(e,n)=>(0,de.JD)(z.U.endpoints.getRuleHistory.initiate({from:e,to:n,limit:D},{forceRefetch:!!(0,ce.jG)().getAutoRefreshInteval().interval})).unwrap(),J="labelsFilter",Q="stateFilterTo",Z="stateFilterFrom",f={all:"all",firing:"Alerting",normal:"Normal",pending:"Pending"},ct=()=>{(0,C.useEffect)(()=>{(0,w.fH)(w.le.loadedCentralAlertStateHistory)},[]);const e=new d.TS({name:J,label:"Labels: "}),n=new d.yP({name:Q,value:f.all,label:"End state:",hide:$.zL.dontHide,query:`All : ${f.all}, To Firing : ${f.firing},To Normal : ${f.normal},To Pending : ${f.pending}`}),s=new d.yP({name:Z,value:f.all,label:"Start state:",hide:$.zL.dontHide,query:`All : ${f.all}, From Firing : ${f.firing},From Normal : ${f.normal},From Pending : ${f.pending}`});it();const r=new d.P1({controls:[new d.dM({component:ht}),new d.dM({component:yt}),new d.K8({}),new d.dM({component:mt,props:{labelsFilterVariable:e,transitionsToFilterVariable:n,transitionsFromFilterVariable:s}}),new d.N0,new d.KE({}),new d.WM({})],$timeRange:new d.JZ({from:"now-1h",to:"now"}),$variables:new d.Pj({variables:[e,s,n]}),body:new d.G1({direction:"column",children:[new d.vA({ySizing:"content",body:dt(at)}),new d.vA({body:new st})]})});return(0,d.Yg)(r)?(0,t.jsx)(r.Component,{model:r}):null};function dt(e){return new d.P1({controls:[],body:new d.G1({direction:"column",children:[new d.vA({ySizing:"content",body:new d.G1({children:[gt(e)]})})]})})}function ut(e){return new d.dt({datasource:e,queries:[{refId:"A",expr:"",queryType:"range",step:"10s"}]})}function gt(e){return new d.vA({minHeight:300,body:d.d0.timeseries().setTitle("Alert Events").setDescription("Each alert event represents an alert instance that changed its state at a particular point in time. The history of the data is displayed over a period of time.").setData(ut(e)).setColor({mode:"continuous-BlPu"}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("drawStyle",T.GR.Bars).setCustomFieldConfig("lineInterpolation",T.dx.Linear).setCustomFieldConfig("lineWidth",1).setCustomFieldConfig("barAlignment",0).setCustomFieldConfig("spanNulls",!1).setCustomFieldConfig("insertNulls",!1).setCustomFieldConfig("showPoints",T.yL.Auto).setCustomFieldConfig("pointSize",5).setCustomFieldConfig("stacking",{mode:T.gs.None,group:"A"}).setCustomFieldConfig("gradientMode",T.on.Hue).setCustomFieldConfig("scaleDistribution",{type:T.L4.Linear}).setOption("legend",{showLegend:!1,displayMode:T.lm.Hidden}).setOption("tooltip",{mode:T.$N.Single}).setNoValue("No events found").build()})}function mt({labelsFilterVariable:e,transitionsToFilterVariable:n,transitionsFromFilterVariable:s}){const r=e.getValue(),i=n.getValue(),c=s.getValue();if(!r&&i===f.all&&c===f.all)return null;const o=()=>{e.setValue(""),n.changeValueTo(f.all),s.changeValueTo(f.all)};return(0,t.jsx)(R.m,{content:"Clear filter",children:(0,t.jsx)(K.$n,{variant:"secondary",icon:"times",onClick:o,children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.filter.clear",children:"Clear filters"})})})}const ht=()=>{const e=(0,b.of)(oe);return(0,t.jsx)("div",{className:e.filterLabelContainer,children:(0,t.jsx)(v.E,{variant:"body",weight:"light",color:"secondary",children:(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.filterBy",children:"Filter by:"})})})},yt=()=>{const e=(0,b.of)(oe);return(0,t.jsx)("div",{className:e.filterInfoContainer,children:(0,t.jsx)(R.m,{content:(0,t.jsxs)("div",{children:[(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.filter.info.label1",children:"Filter events using label querying without spaces, ex:"}),(0,t.jsx)("pre",{children:'{severity="critical", instance=~"cluster-us-.+"}'}),(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.filter.info.label2",children:"Invalid use of spaces:"}),(0,t.jsx)("pre",{children:'{severity= "critical"}'}),(0,t.jsx)("pre",{children:'{severity ="critical"}'}),(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.filter.info.label3",children:"Valid use of spaces:"}),(0,t.jsx)("pre",{children:'{severity=" critical"}'}),(0,t.jsx)(u.x6,{i18nKey:"alerting.central-alert-history.filter.info.label4",children:"Filter alerts using label querying without braces, ex:"}),(0,t.jsx)("pre",{children:'severity="critical", instance=~"cluster-us-.+"'})]}),children:(0,t.jsx)(B.I,{name:"info-circle",size:"sm"})})})},oe=e=>({filterInfoContainer:(0,g.css)({padding:"0",alignSelf:"center",marginRight:e.spacing(-1)}),filterLabelContainer:(0,g.css)({padding:"0",alignSelf:"center"})}),ft=()=>(0,t.jsx)(M.d,{navId:"alerts-history",isLoading:!1,children:(0,t.jsx)(ct,{})}),xt=(0,A.Xc)(ft,{style:"page"})}}]);

//# sourceMappingURL=HistoryPage.cc4c8f0247a15b09cd01.js.map