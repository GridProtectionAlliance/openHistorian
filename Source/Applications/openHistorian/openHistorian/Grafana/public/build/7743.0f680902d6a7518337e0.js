"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7743],{7521:(Y,M,a)=>{a.d(M,{A:()=>b});var e=a(74848),r=a(32196),f=a(13544),u=a(14578),d=a(42418),x=a(55852),B=a(76442);const E=(0,r.css)({textAlign:"center"}),m=(0,r.css)({maxWidth:"700px",margin:"0 auto"}),b=({title:$,buttonIcon:y,buttonLink:L,buttonTitle:z,buttonDisabled:W,onClick:R,proTip:A,proTipLink:Z,proTipLinkTitle:O,proTipTarget:ae,infoBox:X,infoBoxTitle:k})=>{const _=()=>(0,e.jsxs)(e.Fragment,{children:[A?(0,e.jsxs)("span",{children:[(0,e.jsx)(u.I,{name:"rocket"}),(0,e.jsxs)(e.Fragment,{children:[" ProTip: ",A," "]}),Z&&(0,e.jsx)("a",{href:Z,target:ae,className:"text-link",children:O})]},"proTipFooter"):"",X?(0,e.jsx)(d.F,{severity:"info",title:k??"",className:m,children:(0,e.jsx)("div",{dangerouslySetInnerHTML:X})}):""]}),ee=_()?"":(0,r.css)({marginBottom:"20px"}),n=L?x.z9:x.$n,C=(0,e.jsx)(n,{size:"lg",onClick:R,href:L,icon:y,className:ee,"data-testid":f.Tp.components.CallToActionCard.buttonV2(z),disabled:W,children:z});return(0,e.jsx)(B.c,{className:E,message:$,footer:_(),callToActionElement:C})}},76323:(Y,M,a)=>{a.d(M,{J:()=>x});var e=a(74848),r=a(32196),f=a(96540),u=a(14110),d=a(40845);const x=({text:E="PRO",className:m,experimentId:p,eventVariant:b="",...$})=>{const y=(0,d.of)(B);return(0,f.useEffect)(()=>{p&&(0,u.Xp)(p,"test",b)},[p,b]),(0,e.jsx)("span",{className:(0,r.cx)(y.badge,m),...$,children:E})},B=E=>({badge:(0,r.css)`
      margin-left: ${E.spacing(1.25)};
      border-radius: ${E.shape.borderRadius(5)};
      background-color: ${E.colors.success.main};
      padding: ${E.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${E.typography.fontWeightMedium};
      font-size: ${E.typography.pxToRem(10)};
    `})},35538:(Y,M,a)=>{a.d(M,{pL:()=>r,z5:()=>u});var e=a(32264);const r=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function f(){const d=e.$.licenseInfo?.trialExpiry;return!!(d&&d>0)}const u=()=>f()&&e.$.featureToggles.featureHighlights},38348:(Y,M,a)=>{a.d(M,{A:()=>d});var e=a(74848),r=a(14578),f=a(55852);function u({dashboards:x,onImport:B,onRemove:E}){function m(p){return p.revision!==p.importedRevision?"Update":"Re-import"}return(0,e.jsx)("table",{className:"filter-table",children:(0,e.jsx)("tbody",{children:x.map((p,b)=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"width-1",children:(0,e.jsx)(r.I,{name:"apps"})}),(0,e.jsx)("td",{children:p.imported?(0,e.jsx)("a",{href:p.importedUrl,children:p.title}):(0,e.jsx)("span",{children:p.title})}),(0,e.jsxs)("td",{style:{textAlign:"right"},children:[p.imported?(0,e.jsx)(f.$n,{variant:"secondary",size:"sm",onClick:()=>B(p,!0),children:m(p)}):(0,e.jsx)(f.$n,{variant:"secondary",size:"sm",onClick:()=>B(p,!1),children:"Import"}),p.imported&&(0,e.jsx)(f.$n,{"aria-label":"Delete dashboard",icon:"trash-alt",variant:"destructive",size:"sm",onClick:()=>E(p)})]})]},`${p.dashboardId}-${b}`))})})}const d=u},34258:(Y,M,a)=>{a.d(M,{du:()=>Ee,Qq:()=>Ae,PK:()=>N,G2:()=>Pe,bn:()=>J,Ge:()=>V,jB:()=>De});var e=a(69129),r=a(71733),f=a(26657),u=a(17172),d=a(32264),x=a(39601),B=a(82467),E=a(10096),m=a(27677),p=a(2468),b=a(6320),$=a(31193),y=a(27716),L=a(1682),z=a(31678),W=a(75505),R=a(80714);const A=async()=>await(0,m.AI)().get("/api/datasources"),Z=async l=>{const v=await(0,W.s)((0,m.AI)().fetch({method:"GET",url:`/api/datasources/${l}`,params:(0,R.F)(),showErrorAlert:!1}));if(v.ok)return v.data;throw Error(`Could not find data source by ID: "${l}"`)},O=async l=>{const v=await(0,W.s)((0,m.AI)().fetch({method:"GET",url:`/api/datasources/uid/${l}`,params:(0,R.F)(),showErrorAlert:!1}));if(v.ok)return v.data;throw Error(`Could not find data source by UID: "${l}"`)},ae=async l=>{try{return await O(l)}catch{console.log(`Failed to lookup data source using UID "${l}"`)}try{return await Z(l)}catch{console.log(`Failed to lookup data source using ID "${l}"`)}throw Error("Could not find data source")},X=l=>(0,m.AI)().post("/api/datasources",l),k=()=>(0,m.AI)().get("/api/plugins",{enabled:1,type:"datasource"}),_=l=>(0,m.AI)().put(`/api/datasources/uid/${l.uid}`,l,{showErrorAlert:!1,showSuccessAlert:!1}),ee=l=>(0,m.AI)().delete(`/api/datasources/uid/${l}`);var n=a(83883),C=a(4589),H=a(43429),Q=a(33378);function le(l){const v=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(P=>P),S={},I={},G=pe();for(const P of v)S[P.id]=P;for(const P of l){const se=G.find(ne=>ne.id===P.id);if((P.enterprise||se)&&(P.category="enterprise",P.unlicensed=!(0,Q.a)("enterprise.plugins"),P.info.links=se?.info?.links||P.info.links),P.info.links)for(const ne of P.info.links)ne.name="Learn more";(v.find(ne=>ne.id===P.category)||S.other).plugins.push(P),I[P.id]=P}for(const P of v){if(P.id==="cloud"&&P.plugins.push(ce()),P.id==="enterprise")for(const se of G)I[se.id]||P.plugins.push(se);K(P.plugins)}return v.filter(P=>P.plugins.length>0)}function K(l){const v={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};l.sort((S,I)=>{const G=v[S.id]||0,P=v[I.id]||0;return G>P?-1:G<P||S.name>I.name?1:-1})}function pe(){return[j({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),j({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),j({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),j({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),j({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),j({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),j({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),j({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),j({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),j({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),j({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),j({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),j({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),j({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),j({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),j({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),j({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"}),j({id:"grafana-sumologic-datasource",description:"SumoLogic integration and datasource",name:"SumoLogic",imgUrl:"public/img/plugins/sumo.svg"}),j({id:"grafana-pagerduty-datasource",description:"PagerDuty datasource",name:"PagerDuty",imgUrl:"public/img/plugins/pagerduty.svg"}),j({id:"grafana-catchpoint-datasource",description:"Catchpoint datasource",name:"Catchpoint",imgUrl:"public/img/plugins/catchpoint.svg"}),j({id:"grafana-azurecosmosdb-datasource",description:"Azure CosmosDB datasource",name:"Azure CosmosDB",imgUrl:"public/img/plugins/azure-cosmosdb.svg"}),j({id:"grafana-adobeanalytics-datasource",description:"Adobe Analytics datasource",name:"Adobe Analytics",imgUrl:"public/img/plugins/adobe-analytics.svg"}),j({id:"grafana-cloudflare-datasource",description:"Cloudflare datasource",name:"Cloudflare",imgUrl:"public/img/plugins/cloudflare.jpg"}),j({id:"grafana-cockroachdb-datasource",description:"CockroachDB datasource",name:"CockroachDB",imgUrl:"public/img/plugins/cockroachdb.jpg"}),j({id:"grafana-netlify-datasource",description:"Netlify datasource",name:"Netlify",imgUrl:"public/img/plugins/netlify.svg"}),j({id:"grafana-drone-datasource",description:"Drone datasource",name:"Drone",imgUrl:"public/img/plugins/drone.svg"}),j({id:"grafana-zendesk-datasource",description:"Zendesk datasource",name:"Zendesk",imgUrl:"public/img/plugins/zendesk.svg"}),j({id:"grafana-atlassianstatuspage-datasource",description:"Atlassian Statuspage datasource",name:"Atlassian Statuspage",imgUrl:"public/img/plugins/atlassian-statuspage.svg"}),j({id:"grafana-aurora-datasource",description:"Aurora data source",name:"Aurora",imgUrl:"public/img/plugins/aurora.svg"})]}function ce(){return{id:"gcloud",name:"Grafana Cloud",type:H.QE.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function j(l){return{id:l.id,name:l.name,type:H.QE.datasource,module:"phantom",baseUrl:"",info:{description:l.description,logos:{small:l.imgUrl,large:l.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+l.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var me=a(74984),w=a(36227),he=a(54226);const g=l=>{let v,S;return l.error&&l.error instanceof f.b1?(v=l.error.message,S=l.error.details):(0,u.NF)(l)?v=l.data.message??`HTTP error ${l.statusText}`:l instanceof Error&&(v=l.message),{message:v,details:S}},h=l=>{const{details:v,message:S,status:I}=l;return{status:I,message:S,details:v}},N=(l,v={loadDataSource:de,loadDataSourceMeta:ve,getDataSource:he.U4,getDataSourceMeta:he.Fj,importDataSourcePlugin:L.cS})=>async(S,I)=>{if(!l){S((0,w.qR)(new Error("Invalid UID")));return}try{const G=await S(v.loadDataSource(l));await S(v.loadDataSourceMeta(G));const P=v.getDataSource(I().dataSources,l),se=v.getDataSourceMeta(I().dataSources,P.type),re=await v.importDataSourcePlugin(se);S((0,w.Ks)(re))}catch(G){G instanceof Error&&S((0,w.qR)(G))}},V=(l,v=n.I.Edit,S={getDatasourceSrv:$.tR,getBackendSrv:m.AI})=>async(I,G)=>{const P=await S.getDatasourceSrv().get(l),se=v.replace(/:uid/gi,l);P.testDatasource&&(I((0,w.QZ)()),S.getBackendSrv().withNoBackendCache(async()=>{try{const re=await P.testDatasource(),ne=h({...re,details:{...re.details}});I((0,w.lg)(ne)),(0,C.Mh)({grafana_version:d.$.buildInfo.version,plugin_id:P.type,datasource_uid:P.uid,success:!0,path:se}),E.lE.publish(new e.NI)}catch(re){const ne=g(re);I((0,w.UP)({...ne})),(0,C.Mh)({grafana_version:d.$.buildInfo.version,plugin_id:P.type,datasource_uid:P.uid,success:!1,path:se}),E.lE.publish(new e.LL)}}))};function J(){return async l=>{if(!E.TP.hasPermission(z.AccessControlAction.DataSourcesRead))return;l((0,w.TN)());const v=await A();l((0,w.E1)(v))}}function de(l){return async v=>{let S=await ae(l);return l!==S.uid&&(window.location.href=r.I.assureBaseUrl(`/datasources/edit/${S.uid}`),S={}),v((0,w.jz)(S)),S}}function ve(l){return async v=>{const S=await(0,y.x)(l.type),I=await(0,L.cS)(S),G=I.DataSourceClass.prototype instanceof f.iy,P={...S,isBackend:S.backend||G};v((0,w.gZ)(P)),I.meta=P,v((0,B.Vz)((0,me.R4)(l,I)))}}function Ee(l,v=n.I.Edit){return async()=>{const S={type:l.id,access:"proxy"},I=await X(S),G=v.replace(/:uid/gi,I.datasource.uid);await(0,$.tR)().reload(),await E.TP.fetchUserPermissions(),(0,C.V9)({grafana_version:d.$.buildInfo.version,plugin_id:l.id,datasource_uid:I.datasource.uid,plugin_version:I.meta?.info?.version,path:G}),x.Ny.push(G)}}function Pe(){return async l=>{l((0,w.Gc)());const v=await k(),S=le(v);l((0,w.f$)({plugins:v,categories:S}))}}const Se=new p.H;function De(l){return async v=>{try{d.$.featureToggles.grafanaAPIServerWithExperimentalAPIs&&(l.apiVersion=await Se.get(l.type)),await _(l)}catch(S){const I=g(S);v((0,w.UP)(I));const G=(0,u.NF)(S)?S.data:{message:"An unexpected error occurred.",traceID:""};return Promise.reject(G)}return await(0,$.tR)().reload(),v(de(l.uid))}}function Ae(){return async(l,v)=>{const{uid:S}=v().dataSources.dataSource;try{await ee(S),await(0,$.tR)().reload();const I=b.b.DataSources;x.Ny.push(I)}catch(I){const G=g(I);l((0,w.UP)(G))}}}},458:(Y,M,a)=>{a.d(M,{C:()=>f});var e=a(96540),r=a(83883);const f=(0,e.createContext)(r.I)},11084:(Y,M,a)=>{a.d(M,{$k:()=>Z,BY:()=>y,S4:()=>X,Tn:()=>ae,US:()=>L,Um:()=>R,_e:()=>k,aM:()=>ee,hx:()=>W,k9:()=>A,oU:()=>$,u1:()=>_,xw:()=>O});var e=a(96540),r=a(97007),f=a(28138),u=a(10096),d=a(31678),x=a(28444),B=a(11959),E=a(34258),m=a(458),p=a(36227),b=a(54226);const $=n=>{const C=(0,d.useDispatch)();(0,e.useEffect)(()=>(C((0,E.PK)(n)),function(){C((0,r.N)({cleanupAction:Q=>Q.dataSourceSettings=p.IJ}))}),[n,C])},y=n=>{const C=(0,d.useDispatch)(),H=ee();return()=>C((0,E.Ge)(n,H.Edit))},L=()=>{const n=(0,d.useDispatch)(),C=(0,d.useSelector)(Q=>Q.dataSources.isLoadingDataSources),H=(0,d.useSelector)(Q=>Q.dataSources.dataSources);return(0,e.useEffect)(()=>{n((0,E.bn)())},[n]),{isLoading:C,dataSources:H}},z=n=>{const C=useDispatch();useEffect(()=>{C(loadDataSource(n))},[C,n])},W=()=>{const n=(0,d.useDispatch)();(0,e.useEffect)(()=>{n((0,E.G2)())},[n])},R=()=>{const n=(0,d.useDispatch)(),C=ee();return H=>{n((0,E.du)(H,C.Edit))}},A=()=>{const n=(0,d.useDispatch)();return async C=>n((0,E.jB)(C))},Z=()=>{const n=(0,d.useDispatch)(),{name:C}=(0,d.useSelector)(H=>H.dataSources.dataSource);return()=>{f.A.publish(new x.bY({title:"Delete",text:`Are you sure you want to delete the "${C}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>n((0,E.Qq)())}))}},O=n=>(0,d.useSelector)(C=>(0,b.U4)(C.dataSources,n)),ae=n=>{const C=O(n);return(0,B.h)(C)},X=n=>(0,d.useSelector)(C=>(0,b.Fj)(C.dataSources,n)),k=()=>(0,d.useSelector)(n=>n.dataSourceSettings),_=n=>{const C=O(n),H=C.readOnly===!0,Q=u.TP.hasPermissionInMetadata(d.AccessControlAction.DataSourcesWrite,C),le=u.TP.hasPermissionInMetadata(d.AccessControlAction.DataSourcesDelete,C);return{readOnly:H,hasWriteRights:Q,hasDeleteRights:le}},ee=()=>(0,e.useContext)(m.C)},85464:(Y,M,a)=>{a.d(M,{$k:()=>f.$k,BY:()=>f.BY,Bs:()=>d.Bs,CR:()=>r.C,C_:()=>d.C_,S4:()=>f.S4,Tk:()=>d.Tk,Tn:()=>f.Tn,US:()=>f.US,Um:()=>f.Um,_e:()=>f._e,aM:()=>f.aM,du:()=>e.du,eB:()=>d.eB,hp:()=>x.hp,hx:()=>f.hx,jz:()=>d.jz,k9:()=>f.k9,lv:()=>x.lv,oU:()=>f.oU,rb:()=>d.rb,u1:()=>f.u1,wC:()=>x.wC,xs:()=>x.xs,xw:()=>f.xw,zC:()=>x.zC});var e=a(34258),r=a(458),f=a(11084),u=a(74984),d=a(36227),x=a(54226)},74984:(Y,M,a)=>{a.d(M,{$m:()=>b,R4:()=>m,Vh:()=>p});var e=a(43429),r=a(33378),f=a(76323),u=a(2913),d=a(10096),x=a(35538),B=a(31678);const E="Loading";function m(y,L){const z=L.meta,W=u.Ay.featureToggles.featureHighlights,R={img:z.info.logos.large,id:"datasource-"+y.uid,url:"",text:y.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${y.uid}`,text:"Settings",url:`datasources/edit/${y.uid}/`}]};if(L.configPages)for(const k of L.configPages)R.children.push({active:!1,text:k.title,icon:k.icon,url:`datasources/edit/${y.uid}/?page=${k.id}`,id:`datasource-page-${k.id}`});z.includes&&$(z.includes)&&d.TP.hasRole("Admin")&&R.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${y.uid}`,text:"Dashboards",url:`datasources/edit/${y.uid}/dashboards`});const A=y.type===E,Z="feature-highlights-data-source-permissions-badge",O={active:!1,icon:"lock",id:`datasource-permissions-${y.uid}`,text:"Permissions",url:`datasources/edit/${y.uid}/permissions`};if((0,x.z5)()&&!A&&(O.tabSuffix=()=>(0,f.J)({experimentId:Z,eventVariant:"trial"})),(0,r.a)("dspermissions.enforcement")?d.TP.hasPermissionInMetadata(B.AccessControlAction.DataSourcesPermissionsRead,y)&&R.children.push(O):W&&!A&&R.children.push({...O,url:O.url+"/upgrade",tabSuffix:()=>(0,f.J)({experimentId:Z})}),u.Ay.analytics?.enabled){const k="feature-highlights-data-source-insights-badge",_={active:!1,icon:"info-circle",id:`datasource-insights-${y.uid}`,text:"Insights",url:`datasources/edit/${y.uid}/insights`};(0,x.z5)()&&!A&&(_.tabSuffix=()=>(0,f.J)({experimentId:k,eventVariant:"trial"})),(0,r.a)("analytics")?d.TP.hasPermission(B.AccessControlAction.DataSourcesInsightsRead)&&R.children.push(_):W&&!A&&R.children.push({..._,url:_.url+"/upgrade",tabSuffix:()=>(0,f.J)({experimentId:k})})}const ae="feature-highlights-query-caching-badge",X={active:!1,icon:"database",id:`datasource-cache-${y.uid}`,text:"Cache",url:`datasources/edit/${y.uid}/cache`,hideFromTabs:!z.isBackend||!u.Ay.caching.enabled};return(0,x.z5)()&&!A&&(X.tabSuffix=()=>(0,f.J)({experimentId:ae,eventVariant:"trial"})),(0,r.a)("caching")?d.TP.hasPermissionInMetadata(B.AccessControlAction.DataSourcesCachingRead,y)&&R.children.push(X):W&&!A&&R.children.push({...X,url:X.url+"/upgrade",tabSuffix:()=>(0,f.J)({experimentId:ae})}),R}function p(y,L){let z={text:""};for(const W of y.children)if(W.id.indexOf(L)>0){W.active=!0,z=W;break}return{main:y,node:z}}function b(y){const L=m({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:E,typeName:E,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:e.QE.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return p(L,y)}function $(y){return y.find(L=>L.type==="dashboard")!==void 0}},54226:(Y,M,a)=>{a.d(M,{Fj:()=>d,U4:()=>u,hp:()=>f,lv:()=>m,wC:()=>E,xs:()=>x,zC:()=>r});var e=a(41811);const r=(0,e.A)(p=>{const b=new RegExp(p.searchQuery,"i");return p.dataSources.filter(y=>b.test(y.name)||b.test(y.database)||b.test(y.type)).sort((y,L)=>p.isSortAscending?y.name.localeCompare(L.name):L.name.localeCompare(y.name))}),f=(0,e.A)(p=>{const b=new RegExp(p.dataSourceTypeSearchQuery,"i");return p.plugins.filter($=>b.test($.name))}),u=(p,b)=>p.dataSource.uid===b?p.dataSource:{},d=(p,b)=>p.dataSourceMeta.id===b?p.dataSourceMeta:{},x=p=>p.searchQuery,B=p=>p.layoutMode,E=p=>p.dataSourcesCount,m=p=>p.isSortAscending},4589:(Y,M,a)=>{a.d(M,{M1:()=>u,Mh:()=>f,TR:()=>d,V9:()=>r,_i:()=>B,kg:()=>x,m3:()=>E});var e=a(14110);const r=m=>{(0,e.rR)("grafana_ds_add_datasource_clicked",m)},f=m=>{(0,e.rR)("grafana_ds_test_datasource_clicked",m)},u=m=>{(0,e.rR)("grafana_ds_explore_datasource_clicked",m)},d=m=>{(0,e.rR)("grafana_ds_create_dashboard_clicked",m)},x=m=>{(0,e.rR)("grafana_ds_datasources_list_viewed",m)},B=m=>{(0,e.rR)("connections_datasources_settings_clicked",{item:m})},E=m=>{(0,e.rR)("connections_datasources_ds_configured",m)}},11959:(Y,M,a)=>{a.d(M,{h:()=>f});var e=a(76885),r=a(71733);const f=u=>{const d=JSON.stringify({datasource:u.name,context:"explore"});return e.kM.renderUrl(r.I.assureBaseUrl("/explore"),{left:d})}},50691:(Y,M,a)=>{a.d(M,{fk:()=>W,yf:()=>R,Df:()=>u,Uj:()=>y,Jn:()=>m,z$:()=>L});var e=a(74848),r=a(43429),f=a(39938);function u({error:A}){const Z=d(A);return(0,e.jsx)(f.E,{icon:"exclamation-triangle",text:"Disabled",color:"red",tooltip:Z})}function d(A){switch(A){case r.ZK.modifiedSignature:return"Plugin disabled due to modified content";case r.ZK.invalidSignature:return"Plugin disabled due to invalid plugin signature";case r.ZK.missingSignature:return"Plugin disabled due to missing plugin signature";case null:case void 0:return"Plugin disabled";default:return`Plugin disabled due to unknown error${A?`: ${A}`:""}`}}var x=a(40845),B=a(32196);const E=A=>(0,B.css)`
  background: ${A.colors.background.primary};
  border-color: ${A.colors.border.strong};
  color: ${A.colors.text.secondary};
`;function m(){const A=(0,x.of)(E);return(0,e.jsx)(f.E,{text:"Installed",color:"orange",className:A})}var p=a(33378),b=a(67061),$=a(98624);function y({plugin:A}){const Z=(0,x.of)(E);return(0,p.a)("enterprise.plugins")?(0,e.jsx)(f.E,{text:"Enterprise",color:"blue"}):(0,e.jsxs)(b.B,{wrap:"wrap",children:[(0,e.jsx)($.B,{status:A.signature}),(0,e.jsx)(f.E,{icon:"lock",role:"img","aria-label":"lock icon",text:"Enterprise",color:"blue",className:Z,title:"Requires a Grafana Enterprise license"})]})}function L({plugin:A}){const Z=(0,x.of)(z);return(0,e.jsx)("p",{className:Z.hasUpdate,children:"Update available!"})}const z=A=>({hasUpdate:(0,B.css)`
      color: ${A.colors.text.secondary};
      font-size: ${A.typography.bodySmall.fontSize};
      margin-bottom: 0;
    `});function W(){return(0,e.jsx)(f.E,{icon:"exclamation-triangle",text:"Angular",color:"orange",tooltip:"This plugin uses deprecated functionality, support for which is being removed."})}function R(){return(0,e.jsx)(f.E,{icon:"exclamation-triangle",text:"Deprecated",color:"orange",tooltip:"This plugin is deprecated and no longer receives updates."})}},31906:(Y,M,a)=>{a.d(M,{a:()=>u});var e=a(74848),r=a(90613),f=a(39558);const u=({text:d="Loading..."})=>(0,e.jsx)(r.a,{display:"flex",alignItems:"center",direction:"column",justifyContent:"center",paddingTop:10,children:(0,e.jsx)(f._,{text:d})})},50124:(Y,M,a)=>{a.d(M,{V:()=>Et});var e=a(74848),r=a(32196),f=a(54148),u=a(32264),d=a(40845),x=a(67061),B=a(40980),E=a(90613),m=a(42418),p=a(21780),b=a(31678),$=a(74106),y=a(31906),L=a(96540),z=a(13834),W=a(48840);const R=({sanitizedHTML:t})=>{const i=(0,d.of)(A);return(0,e.jsx)("div",{dangerouslySetInnerHTML:{__html:t??"No changelog was found"},className:(0,r.cx)(i.changelog)})},A=t=>({changelog:(0,r.css)({"h1:first-of-type":{display:"none"},"h2:first-of-type":{marginTop:0},h2:{marginTop:t.spacing(2),marginBottom:t.spacing(1)},li:{marginLeft:t.spacing(4)},a:{color:t.colors.text.link,"&:hover":{color:t.colors.text.link,textDecoration:"underline"}}})});var Z=a(72724),O=a(5129);const ae=({versions:t=[],installedVersion:i})=>{const s=(0,d.of)(X),o=(0,O.Gl)(t);return t.length===0?(0,e.jsx)("p",{children:"No version history was found."}):(0,e.jsxs)("table",{className:s.table,children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:"Version"}),(0,e.jsx)("th",{children:"Last updated"}),(0,e.jsx)("th",{children:"Grafana Dependency"})]})}),(0,e.jsx)("tbody",{children:t.map(c=>{const D=i===c.version;return(0,e.jsxs)("tr",{children:[D?(0,e.jsxs)("td",{className:s.currentVersion,children:[c.version," (installed version)"]}):c.version===o?.version?(0,e.jsxs)("td",{children:[c.version," (latest compatible version)"]}):(0,e.jsx)("td",{children:c.version}),(0,e.jsx)("td",{className:D?s.currentVersion:"",children:(0,Z.fq)(c.createdAt)}),(0,e.jsx)("td",{className:D?s.currentVersion:"",children:c.grafanaDependency||"N/A"})]},c.version)})})]})},X=t=>({container:(0,r.css)`
    padding: ${t.spacing(2,4,3)};
  `,table:(0,r.css)`
    table-layout: fixed;
    width: 100%;
    td,
    th {
      padding: ${t.spacing()} 0;
    }
    th {
      font-size: ${t.typography.h5.fontSize};
    }
  `,currentVersion:(0,r.css)`
    font-weight: ${t.typography.fontWeightBold};
  `});var k=a(16817),_=a(60677);const ee=t=>(0,k.A)(async()=>t&&(u.$.pluginAdminExternalManageEnabled&&u.$.featureToggles.managedPluginsInstall?t.isFullyInstalled:t.isInstalled)&&!t.isDisabled?(0,_.W3)(t.id):null,[t?.id,t?.isInstalled,t?.isDisabled]);var n=a(66253),C=a(2543),H=a(95344),Q=a(17172),le=a(7376),K=a(55852);class pe extends L.PureComponent{constructor(i){super(i),this.element=null,this.preUpdateHook=()=>Promise.resolve(),this.postUpdateHook=()=>Promise.resolve(),this.update=()=>{const s=this.model.id;this.preUpdateHook().then(()=>{const o=(0,C.extend)({enabled:this.model.enabled,pinned:this.model.pinned,jsonData:this.model.jsonData,secureJsonData:this.model.secureJsonData},{});return(0,Q.AI)().post(`/api/plugins/${s}/settings`,o)}).then(this.postUpdateHook).then(o=>{window.location.href=window.location.href})},this.setPreUpdateHook=s=>{this.preUpdateHook=s},this.setPostUpdateHook=s=>{this.postUpdateHook=s},this.importDashboards=()=>((0,H.l)("AppConfig","importDashboards()"),Promise.resolve()),this.enable=()=>{this.model.enabled=!0,this.model.pinned=!0,this.update()},this.disable=()=>{this.model.enabled=!1,this.model.pinned=!1,this.update()},this.state={angularCtrl:null,refresh:0}}componentDidMount(){setTimeout(()=>{this.setState({refresh:this.state.refresh+1})},5)}componentDidUpdate(i){if(!this.element||this.state.angularCtrl)return;this.model=(0,C.cloneDeep)(this.props.app.meta);const s=(0,le.E)(),o='<plugin-component type="app-config-ctrl"></plugin-component>',c={ctrl:this,isAppConfigCtrl:!0},D=s.load(this.element,c,o);this.setState({angularCtrl:D})}render(){const i=this.model,s=(0,r.css)({marginRight:"8px"});return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{ref:o=>this.element=o}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),i&&(0,e.jsxs)("div",{className:"gf-form",children:[!i.enabled&&(0,e.jsx)(K.$n,{variant:"primary",onClick:this.enable,className:s,children:"Enable"}),i.enabled&&(0,e.jsx)(K.$n,{variant:"primary",onClick:this.update,className:s,children:"Update"}),i.enabled&&(0,e.jsx)(K.$n,{variant:"destructive",onClick:this.disable,className:s,children:"Disable"})]})]})}}var ce=a(26272),j=a(10096),me=a(38348);class w extends L.PureComponent{constructor(i){super(i),this.importAll=()=>{this.importNext(0)},this.importNext=s=>{const{dashboards:o}=this.state;return this.import(o[s],!0).then(()=>s+1<o.length?new Promise(c=>{setTimeout(()=>{this.importNext(s+1).then(()=>{c()})},500)}):Promise.resolve())},this.import=(s,o)=>{const{plugin:c,datasource:D}=this.props,T={pluginId:c.id,path:s.path,overwrite:o,inputs:D?[{name:"*",type:"datasource",pluginId:D.meta.id,value:D.name}]:[]};return(0,Q.AI)().post("/api/dashboards/import",T).then(F=>{j.lE.emit(ce.r1.alertSuccess,["Dashboard Imported",s.title]),(0,C.extend)(s,F),this.setState({dashboards:[...this.state.dashboards]})})},this.remove=s=>{(0,Q.AI)().delete("/api/dashboards/uid/"+s.uid).then(()=>{s.imported=!1,this.setState({dashboards:[...this.state.dashboards]})})},this.state={loading:!0,dashboards:[]}}async componentDidMount(){const i=this.props.plugin.id;(0,Q.AI)().get(`/api/plugins/${i}/dashboards`).then(s=>{this.setState({dashboards:s,loading:!1})})}render(){const{loading:i,dashboards:s}=this.state;return i?(0,e.jsx)("div",{children:"loading..."}):!s||!s.length?(0,e.jsx)("div",{children:"No dashboards are included with this plugin"}):(0,e.jsx)(me.A,{dashboards:s,onImport:this.import,onRemove:this.remove})}}var he=a(70713),g=a(62467),h=a(43429),N=a(62930),V=a(7521),J=a(66359),de=a(65812);function ve({plugin:t}){const i=(0,d.of)(Ee),s=(0,L.useMemo)(()=>t.type===h.QE.datasource?{query:"*",ds_type:t.id,kind:["dashboard"]}:{query:"*",panel_type:t.id,kind:["panel"]},[t]),o=(0,k.A)(()=>(0,de.getGrafanaSearcher)().search(s),[s]),c=o.value;return c?.totalRows?(0,e.jsxs)("div",{className:i.wrap,children:[(0,e.jsxs)("div",{className:i.info,children:[t.name," is used ",(0,e.jsx)("b",{children:c.totalRows})," times."]}),(0,e.jsx)(he.Ay,{children:({width:D,height:T})=>(0,e.jsx)(J.P,{response:c,width:D,height:T,clearSelection:()=>{},keyboardEvents:(0,g.of)(),onTagSelected:()=>{}})})]}):o.loading?(0,e.jsx)(N.y,{}):u.$.featureToggles.panelTitleSearch?(0,e.jsx)(V.A,{title:`${t.name} is not used in any dashboards yet`,buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?panelType=${t.id}&editPanel=1`}):(0,e.jsx)(m.F,{title:"Missing feature toggle: panelTitleSearch",children:"Plugin usage requires the new search index to find usage across dashboards"})}const Ee=t=>({wrap:(0,r.css)`
      width: 100%;
      height: 90%;
    `,info:(0,r.css)`
      padding-bottom: 30px;
    `});function Pe({plugin:t,queryParams:i,pageId:s}){const o=(0,d.of)(Se),{value:c}=ee(t),D=(0,L.useMemo)(()=>[{id:"action",header:"Action",cell:({cell:{value:U}})=>U},{id:"scope",header:"Scope",cell:({cell:{value:U}})=>U}],[]);if(s===n.LZ.OVERVIEW)return(0,e.jsx)("div",{className:o.readme,dangerouslySetInnerHTML:{__html:t.details?.readme??"No plugin help or readme markdown file was found"}});if(s===n.LZ.VERSIONS)return(0,e.jsx)("div",{children:(0,e.jsx)(ae,{versions:t.details?.versions,installedVersion:t.installedVersion})});if(s===n.LZ.CHANGELOG&&t?.details?.changelog)return(0,e.jsx)(R,{sanitizedHTML:t?.details?.changelog});if(s===n.LZ.CONFIG&&c?.angularConfigCtrl)return(0,e.jsx)("div",{children:(0,e.jsx)(pe,{app:c})});const T=t.iam?.permissions||t.details?.iam?.permissions;if(u.$.featureToggles.externalServiceAccounts&&s===n.LZ.IAM&&T&&T.length>0)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(x.B,{direction:"row",children:["The ",t.name," plugin needs a service account to be able to query Grafana. The following list contains the permissions available to the service account:"]}),(0,e.jsx)(W.j,{columns:D,data:T,getRowId:U=>String(U.action)})]});if(c?.configPages){for(const U of c.configPages)if(s===U.id)return(0,e.jsx)("div",{children:(0,e.jsx)(z.a,{meta:c.meta,children:(0,e.jsx)(U.body,{plugin:c,query:i})})})}return s===n.LZ.USAGE&&c?(0,e.jsx)("div",{className:o.wrap,children:(0,e.jsx)(ve,{plugin:c?.meta})}):s===n.LZ.DASHBOARDS&&c?(0,e.jsx)("div",{children:(0,e.jsx)(w,{plugin:c?.meta})}):(0,e.jsx)("div",{children:(0,e.jsx)("p",{children:"Page not found."})})}const Se=t=>({wrap:(0,r.css)({width:"100%",height:"50vh"}),readme:(0,r.css)({"& img":{maxWidth:"100%"},"h1, h2, h3":{marginTop:t.spacing(3),marginBottom:t.spacing(2)},"*:first-child":{marginTop:0},li:{marginLeft:t.spacing(2),"& > p":{margin:t.spacing(1,0)}},a:{color:t.colors.text.link,"&:hover":{color:t.colors.text.link,textDecoration:"underline"}},table:{tableLayout:"fixed",width:"100%","td, th":{overflowX:"auto",padding:t.spacing(.5,1)},"table, th, td":{border:`1px solid ${t.colors.border.medium}`,borderCollapse:"collapse"}}})});var De=a(13544);function Ae({className:t,plugin:i}){return i.isDisabled?(0,e.jsxs)(m.F,{severity:"error",title:"Plugin disabled",className:t,"data-testid":De.Tp.pages.PluginPage.disabledInfo,children:[l(i.error),(0,e.jsx)("p",{children:"Please contact your server administrator to get this resolved."}),(0,e.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/administration/cli/#plugins-commands",className:"external-link",target:"_blank",rel:"noreferrer",children:"Read more about managing plugins"})]}):null}function l(t){switch(t){case h.ZK.modifiedSignature:return(0,e.jsx)("p",{children:"Grafana Labs checks each plugin to verify that it has a valid digital signature. While doing this, we discovered that the content of this plugin does not match its signature. We can not guarantee the trustworthy of this plugin and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a verified version of this plugin."});case h.ZK.invalidSignature:return(0,e.jsx)("p",{children:"Grafana Labs checks each plugin to verify that it has a valid digital signature. While doing this, we discovered that it was invalid. We can not guarantee the trustworthy of this plugin and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a verified version of this plugin."});case h.ZK.missingSignature:return(0,e.jsx)("p",{children:"Grafana Labs checks each plugin to verify that it has a valid digital signature. While doing this, we discovered that there is no signature for this plugin. We can not guarantee the trustworthy of this plugin and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a verified version of this plugin."});case h.ZK.failedBackendStart:return(0,e.jsx)("p",{children:"This plugin failed to start. Server logs can provide more information."});case h.ZK.angular:return(0,e.jsx)(e.Fragment,{});default:return(0,e.jsx)("p",{children:"We failed to run this plugin due to an unkown reason and have therefore disabled it. We recommend you to reinstall the plugin to make sure you are running a working version of this plugin."})}}var v=a(94753),S=a(72109),I=a(8484),G=a(84753);function P(t){const{info:i,plugin:s}=t;return(0,e.jsxs)(x.B,{direction:"column",gap:3,shrink:0,grow:0,maxWidth:"250px",children:[(0,e.jsx)(E.a,{padding:2,borderColor:"medium",borderStyle:"solid",children:(0,e.jsxs)(x.B,{direction:"column",gap:2,children:[i.map((o,c)=>(0,e.jsxs)(x.B,{wrap:!0,direction:"column",gap:.5,children:[(0,e.jsx)(v.E,{color:"secondary",children:o.label+":"}),(0,e.jsx)("div",{children:o.value})]},c)),s.updatedAt&&(0,e.jsxs)(x.B,{direction:"column",gap:.5,children:[(0,e.jsx)(v.E,{color:"secondary",children:(0,e.jsx)(I.x6,{i18nKey:"plugins.details.labels.updatedAt",children:"Last updated: "})})," ",(0,e.jsx)(v.E,{children:(0,G.Y)(new Date(s.updatedAt))})]})]})}),s?.details?.links&&s.details?.links?.length>0&&(0,e.jsx)(E.a,{padding:2,borderColor:"medium",borderStyle:"solid",children:(0,e.jsxs)(x.B,{direction:"column",gap:2,children:[(0,e.jsx)(v.E,{color:"secondary",children:(0,e.jsx)(I.x6,{i18nKey:"plugins.details.labels.links",children:"Links "})}),s.details.links.map((o,c)=>(0,e.jsx)(S.Y,{href:o.url,external:!0,children:o.name},c))]})}),!s?.isCore&&(0,e.jsx)(E.a,{padding:2,borderColor:"medium",borderStyle:"solid",children:(0,e.jsxs)(x.B,{direction:"column",children:[(0,e.jsx)(v.E,{color:"secondary",children:(0,e.jsx)(I.x6,{i18nKey:"plugins.details.labels.reportAbuse",children:"Report a concern "})}),(0,e.jsx)(K.z9,{href:"mailto:integrations@grafana.com",variant:"secondary",fill:"solid",children:(0,e.jsx)(I.x6,{i18nKey:"plugins.details.labels.contactGrafanaLabs",children:"Contact Grafana Labs"})})]})})]})}function se({className:t,plugin:i}){const s=i.signature===h.Ac.valid,o=i.signature===h.Ac.internal,c=i.isDisabled&&re(i.error);return s||o||c?null:(0,e.jsxs)(m.F,{severity:"warning",title:"Invalid plugin signature","data-testid":De.Tp.pages.PluginPage.signatureInfo,className:t,children:[(0,e.jsx)("p",{children:"Grafana Labs checks each plugin to verify that it has a valid digital signature. Plugin signature verification is part of our security measures to ensure plugins are safe and trustworthy. Grafana Labs can\u2019t guarantee the integrity of this unsigned plugin. Ask the plugin author to request it to be signed."}),(0,e.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",className:"external-link",target:"_blank",rel:"noreferrer",children:"Read more about plugins signing."})]})}function re(t){switch(t){case h.ZK.invalidSignature:case h.ZK.missingSignature:case h.ZK.modifiedSignature:return!0;default:return!1}}const ne=(t,i)=>{const{loading:s,error:o,value:c}=ee(t),{pathname:D}=(0,f.zy)(),T=Ke(t,c),F=!!t?.isPublished,U=i||T,oe=(0,L.useMemo)(()=>{const ye=t&&j.TP.hasPermissionInMetadata(b.AccessControlAction.PluginsWrite,t),q=[];if(F&&q.push({text:n.og.VERSIONS,id:n.LZ.VERSIONS,icon:"history",url:`${D}?page=${n.LZ.VERSIONS}`,active:n.LZ.VERSIONS===U}),F&&t?.details?.changelog&&q.push({text:n.og.CHANGELOG,id:n.LZ.CHANGELOG,icon:"rocket",url:`${D}?page=${n.LZ.CHANGELOG}`,active:n.LZ.CHANGELOG===U}),!c||(u.$.featureToggles.externalServiceAccounts&&(t?.iam||t?.details?.iam)&&q.push({text:n.og.IAM,icon:"shield",id:n.LZ.IAM,url:`${D}?page=${n.LZ.IAM}`,active:n.LZ.IAM===U}),u.$.featureToggles.panelTitleSearch&&(c.meta.type===h.QE.panel||c.meta.type===h.QE.datasource)&&q.push({text:n.og.USAGE,icon:"list-ul",id:n.LZ.USAGE,url:`${D}?page=${n.LZ.USAGE}`,active:n.LZ.USAGE===U}),!ye))return q;if(c.meta.type===h.QE.app){if(c.angularConfigCtrl&&q.push({text:"Config",icon:"cog",id:n.LZ.CONFIG,url:`${D}?page=${n.LZ.CONFIG}`,active:n.LZ.CONFIG===U}),c.configPages)for(const ie of c.configPages)q.push({text:ie.title,icon:ie.icon,id:ie.id,url:`${D}?page=${ie.id}`,active:ie.id===U});c.meta.includes?.find(ie=>ie.type===h.ib.dashboard)&&q.push({text:"Dashboards",icon:"apps",id:n.LZ.DASHBOARDS,url:`${D}?page=${n.LZ.DASHBOARDS}`,active:n.LZ.DASHBOARDS===U})}return q},[t,c,D,F,U]),ue={text:t?.name??"",img:t?.info.logos.small,children:[{text:n.og.OVERVIEW,icon:"file-alt",id:n.LZ.OVERVIEW,url:`${D}?page=${n.LZ.OVERVIEW}`,active:n.LZ.OVERVIEW===U},...oe]};return{error:o,loading:s,navModel:ue,activePageId:U}};function Ke(t,i){return!t||!i||!j.TP.hasPermissionInMetadata(b.AccessControlAction.PluginsWrite,t)||i.meta.type!==h.QE.app?n.LZ.OVERVIEW:i.angularConfigCtrl?n.LZ.CONFIG:i.configPages?.length?i.configPages[0].id:n.LZ.OVERVIEW}var Ie=a(14578),xe=a(2913),Ve=a(84684);function ze({plugin:t}){const{value:i}=ee(t);if(!i||!j.TP.hasPermission(b.AccessControlAction.PluginsWrite))return null;const{enabled:s,jsonData:o}=i?.meta,c=()=>Ue(t.id,{enabled:!0,pinned:!0,jsonData:o}),D=()=>{Ue(t.id,{enabled:!1,pinned:!1,jsonData:o})};return(0,e.jsxs)(e.Fragment,{children:[!s&&(0,e.jsx)(K.$n,{variant:"primary",onClick:c,children:"Enable"}),s&&(0,e.jsx)(K.$n,{variant:"destructive",onClick:D,children:"Disable"})]})}const Ue=async(t,i)=>{try{await(0,Ve.ij)(t,i),window.location.reload()}catch(s){console.error("Error while updating the plugin",s)}};var Re=a(85464),Oe=a(16233);function Lt(){return config.bootData.user.isGrafanaAdmin}function Tt(){return contextSrv.hasRole("Admin")}function Ze(){return Oe.TP.hasPermission(b.AccessControlAction.DataSourcesCreate)&&Oe.TP.hasPermission(b.AccessControlAction.DataSourcesWrite)}function we({plugin:t}){const i=(0,b.useDispatch)(),s=(0,Re.aM)(),o=(0,L.useCallback)(()=>{const D={name:t.name,id:t.id};i((0,Re.du)(D,s.Edit))},[i,t,s]);if(!Ze())return null;const c=u.$.featureToggles.managedPluginsInstall&&u.$.pluginAdminExternalManageEnabled&&!t.isFullyInstalled;return(0,e.jsx)(K.$n,{variant:"primary",onClick:o,disabled:c,title:c?"The plugin isn't usable yet, it may take some time to complete the installation.":void 0,children:"Add new data source"})}function ke({plugin:t}){if(!(u.$.featureToggles.managedPluginsInstall&&u.$.pluginAdminExternalManageEnabled?t.isFullyInstalled:t.isInstalled)||t.isDisabled)return null;switch(t.type){case h.QE.datasource:return(0,e.jsx)(we,{plugin:t});case h.QE.app:return(0,e.jsx)(ze,{plugin:t});default:return null}}var He=a(33378),Qe=a(66864),te=a(83391);const Je=({plugin:t,pluginStatus:i,latestCompatibleVersion:s})=>{const o=(0,d.of)(Ye),c=u.$.pluginAdminExternalManageEnabled,D=j.TP.hasPermission(b.AccessControlAction.PluginsInstall),T=(0,te.pw)(),F=!!s;return t.type===h.QE.renderer?(0,e.jsx)(m.F,{severity:"warning",title:"Renderer plugins cannot be managed by the Plugin Catalog.",className:o.alert}):t.type===h.QE.secretsmanager?(0,e.jsx)(m.F,{severity:"warning",title:"Secrets manager plugins cannot be managed by the Plugin Catalog.",className:o.alert}):t.isEnterprise&&!(0,He.a)("enterprise.plugins")?(0,e.jsx)(m.F,{severity:"warning",title:"",className:o.alert,children:(0,e.jsxs)(Qe.Gy,{height:"auto",align:"center",children:[(0,e.jsx)("span",{children:"No valid Grafana Enterprise license detected."}),(0,e.jsx)(K.z9,{href:`${(0,O.H2)(t.id)}?utm_source=grafana_catalog_learn_more`,target:"_blank",rel:"noopener noreferrer",size:"sm",fill:"text",icon:"external-link-alt",children:"Learn more"})]})}):t.isDev?(0,e.jsx)(m.F,{severity:"warning",title:"This is a development build of the plugin and can't be uninstalled.",className:o.alert}):!D&&!c?(0,e.jsx)(m.F,{severity:"warning",title:Xe(i),className:o.alert}):t.isPublished?F?T?null:(0,e.jsx)(m.F,{severity:"warning",title:"The install controls have been disabled because the Grafana server cannot access grafana.com.",className:o.alert}):(0,e.jsx)(m.F,{severity:"warning",title:"This plugin doesn't support your version of Grafana.",className:o.alert}):(0,e.jsx)(m.F,{severity:"warning",title:"",className:o.alert,children:(0,e.jsxs)("div",{children:["This plugin is not published to"," ",(0,e.jsx)("a",{href:"https://www.grafana.com/plugins",target:"__blank",rel:"noreferrer",children:"grafana.com/plugins"})," ","and can't be managed via the catalog."]})})},Ye=t=>({alert:(0,r.css)({marginTop:`${t.spacing(2)}`})});function Xe(t){switch(t){case n.u8.INSTALL:case n.u8.REINSTALL:return"You do not have permission to install this plugin.";case n.u8.UNINSTALL:return"You do not have permission to uninstall this plugin.";case n.u8.UPDATE:return"You do not have permission to update this plugin.";default:return"You do not have permission to manage this plugin."}}var _e=a(39601),je=a(14110),qe=a(96374),Ce=a(28138),et=a(83277),tt=a(91219);const at=t=>{(0,je.rR)("grafana_plugin_install_clicked",t)},st=t=>{(0,je.rR)("grafana_plugin_uninstall_clicked",t)},nt="plugin_update_clicked";function it({plugin:t,pluginStatus:i,latestCompatibleVersion:s,hasInstallWarning:o,setNeedReload:c}){const D=(0,b.useDispatch)(),[T]=(0,et.s)(),F=(0,f.zy)(),{isInstalling:U,error:oe}=(0,te.XN)(),{isUninstalling:ue,error:ye}=(0,te.qG)(),q=(0,te.xX)(),ie=(0,te.Gp)(),ge=(0,te.SQ)(),be=(0,te.A5)(),[At,Be]=(0,L.useState)(!1),It=()=>Be(!0),Ne=()=>Be(!1),$e=ue?"Uninstalling":"Uninstall",We={plugin_id:t.id,plugin_type:t.type,path:F.pathname};(0,L.useEffect)(()=>()=>{ge()},[]);const jt=async()=>{at(We);const fe=await q(t.id,s?.version);if(!oe&&!("error"in fe)){let Me=`Installed ${t.name}`;u.$.pluginAdminExternalManageEnabled&&xe.Ay.featureToggles.managedPluginsInstall&&(Me="Install requested, this may take a few minutes."),Ce.A.emit(ce.r1.alertSuccess,[Me]),t.type==="app"&&c?.(!0),await be(t.id)}},Ge=async()=>{if(Ne(),st(We),await ie(t.id),!ye){const fe=T.page;fe!==n.LZ.OVERVIEW&&fe!==n.LZ.VERSIONS&&_e.Ny.replace(`${F.pathname}?page=${n.LZ.OVERVIEW}`);let Fe=`Uninstalled ${t.name}`;u.$.pluginAdminExternalManageEnabled&&xe.Ay.featureToggles.managedPluginsInstall&&(Fe="Uninstall requested, this may take a few minutes."),Ce.A.emit(ce.r1.alertSuccess,[Fe]),t.type==="app"&&(D((0,tt.fc)({pluginID:t.id})),c?.(!1))}},Ct=async()=>{(0,je.rR)(nt),await q(t.id,s?.version,!0),oe||Ce.A.emit(ce.r1.alertSuccess,[`Updated ${t.name}`])};let Le=u.$.pluginAdminExternalManageEnabled&&xe.Ay.featureToggles.managedPluginsInstall?t.isUninstallingFromInstance:ue,Te="";if(t.isPreinstalled.found&&(Le=!0,Te="Preinstalled plugin. Remove from Grafana config before uninstalling."),i===n.u8.UNINSTALL)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(qe.u,{isOpen:At,title:`Uninstall ${t.name}`,body:"Are you sure you want to uninstall this plugin?",confirmText:"Confirm",icon:"exclamation-triangle",onConfirm:Ge,onDismiss:Ne}),(0,e.jsx)(x.B,{alignItems:"flex-start",width:"auto",height:"auto",children:(0,e.jsx)(K.$n,{variant:"destructive",disabled:Le,onClick:It,title:Te,children:$e})})]});if(!t.isPublished||o)return null;if(i===n.u8.UPDATE){const fe=u.$.pluginAdminExternalManageEnabled&&xe.Ay.featureToggles.managedPluginsInstall?t.isUpdatingFromInstance:U;return(0,e.jsxs)(x.B,{alignItems:"flex-start",width:"auto",height:"auto",children:[!t.isManaged&&!t.isPreinstalled.withVersion&&(0,e.jsx)(K.$n,{disabled:fe,onClick:Ct,children:U?"Updating":"Update"}),(0,e.jsx)(K.$n,{variant:"destructive",disabled:Le,onClick:Ge,title:Te,children:$e})]})}const bt=U||oe||!u.$.angularSupportEnabled&&t.angularDetected;return(0,e.jsx)(K.$n,{disabled:bt,onClick:jt,children:U?"Installing":"Install"})}function rt({pluginId:t,pluginStatus:i,angularDetected:s}){const o=`${(0,O.H2)(t)}/?tab=installation`;return i===n.u8.UPDATE?(0,e.jsxs)(x.B,{height:"auto",children:[(0,e.jsx)(K.z9,{href:o,target:"_blank",rel:"noopener noreferrer",children:"Update via grafana.com"}),(0,e.jsx)(K.z9,{variant:"destructive",href:o,target:"_blank",rel:"noopener noreferrer",children:"Uninstall via grafana.com"})]}):i===n.u8.UNINSTALL?(0,e.jsx)(K.z9,{variant:"destructive",href:o,target:"_blank",rel:"noopener noreferrer",children:"Uninstall via grafana.com"}):(0,e.jsx)(K.z9,{disabled:!u.$.angularSupportEnabled&&s,href:o,target:"_blank",rel:"noopener noreferrer",children:"Install via grafana.com"})}const ot=({plugin:t})=>{const i=(0,d.of)(lt),s=(0,te.pw)(),o=(0,O.Gl)(t?.details?.versions),[c,D]=(0,L.useState)(!1);if(!t)return null;const T=(0,O.N6)(t,s,o),F=u.$.pluginAdminExternalManageEnabled,U=t.isInstalled?t.hasUpdate?n.u8.UPDATE:n.u8.UNINSTALL:n.u8.INSTALL,oe=t.isCore||t.isDisabled||t.isProvisioned||!(0,O.j_)();return(0,e.jsxs)(x.B,{direction:"column",children:[(0,e.jsxs)(x.B,{alignItems:"center",children:[!oe&&(0,e.jsx)(e.Fragment,{children:F&&!T&&!xe.Ay.featureToggles.managedPluginsInstall?(0,e.jsx)(rt,{pluginId:t.id,pluginStatus:U,angularDetected:t.angularDetected}):(0,e.jsx)(it,{plugin:t,latestCompatibleVersion:o,pluginStatus:U,setNeedReload:D,hasInstallWarning:T})}),(0,e.jsx)(ke,{plugin:t})]}),c&&(0,e.jsxs)(x.B,{alignItems:"center",children:[(0,e.jsx)(Ie.I,{name:"exclamation-triangle"}),(0,e.jsx)("span",{className:i.message,children:"Refresh the page to see the changes"})]})]})},lt=t=>({message:(0,r.css)`
      color: ${t.colors.text.secondary};
    `}),ct=({plugin:t})=>{const i=(0,te.pw)(),s=(0,d.of)(dt),{error:o}=(0,te.XN)();if(!t)return null;const c=(0,O.Gl)(t.details?.versions),D=t.isInstalled?t.hasUpdate?n.u8.UPDATE:n.u8.UNINSTALL:n.u8.INSTALL;return(0,e.jsxs)("div",{className:s.subtitle,children:[o&&(0,e.jsx)(m.F,{title:"message"in o?o.message:"",children:typeof o=="string"?o:o.error}),t?.description&&(0,e.jsx)("div",{children:t?.description}),!u.$.featureToggles.pluginsDetailsRightPanel&&!!t?.details?.links?.length&&(0,e.jsx)("span",{children:t.details.links.map((T,F)=>(0,e.jsxs)(L.Fragment,{children:[F>0&&" | ",(0,e.jsx)("a",{href:T.url,className:"external-link",children:T.name})]},F))}),(0,O.N6)(t,i,c)&&(0,e.jsx)(Je,{plugin:t,pluginStatus:D,latestCompatibleVersion:c})]})},dt=t=>({subtitle:(0,r.css)`
      display: flex;
      flex-direction: column;
      gap: ${t.spacing(1)};
    `});var ut=a(50691);function gt({plugin:t,grafanaDependency:i}){const s=(0,d.of)(ht),o=t.details?.pluginDependencies;return!i&&(!o||!o.length)?null:(0,e.jsxs)(x.B,{gap:1,children:[!!i&&(0,e.jsxs)("div",{className:s.depBadge,children:[(0,e.jsx)(Ie.I,{name:"grafana",className:s.icon}),"Grafana ",i]}),o&&o.length>0&&(0,e.jsx)("div",{children:o.map(D=>(0,e.jsxs)("span",{className:s.depBadge,children:[(0,e.jsx)(Ie.I,{name:n.Ip[D.type],className:s.icon}),D.name," ",D.version]},D.name))})]})}const ht=t=>({dependencyTitle:(0,r.css)`
      margin-right: ${t.spacing(.5)};

      &::after {
        content: '';
        padding: 0;
      }
    `,depBadge:(0,r.css)({display:"flex",alignItems:"flex-start"}),icon:(0,r.css)`
      color: ${t.colors.text.secondary};
      margin-right: ${t.spacing(.5)};
    `});var ft=a(98624);function pt({plugin:t}){const i=(0,d.of)(mt);return(0,e.jsx)("div",{className:i.container,children:(0,e.jsx)("a",{href:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/",target:"_blank",rel:"noreferrer",className:i.link,children:(0,e.jsx)(ft.B,{status:t.signature,signatureType:t.signatureType,signatureOrg:t.signatureOrg})})})}const mt=t=>({container:(0,r.css)`
      display: flex;
      flex-wrap: wrap;
      gap: ${t.spacing(.5)};
    `,link:(0,r.css)`
      display: inline-flex;
      align-items: center;
    `}),vt=t=>{const i=[];if(!t)return i;const s=(0,O.Gl)(t.details?.versions),o=!t.isInstalled;let c=t.installedVersion;!c&&o&&s?.version&&(c=s?.version),c&&(t.isManaged?i.push({label:(0,I.t)("plugins.details.labels.version","Version"),value:"Managed by Grafana"}):i.push({label:(0,I.t)("plugins.details.labels.version","Version"),value:`${c}${t.isPreinstalled.withVersion?" (preinstalled)":""}`})),t.orgName&&i.push({label:(0,I.t)("plugins.details.labels.from","From"),value:t.orgName}),(!t.signatureType||t.signatureType===h.kv.community||t.signatureType===h.kv.commercial)&&t.downloads>0&&i.push({label:(0,I.t)("plugins.details.labels.downloads","Downloads"),value:new Intl.NumberFormat().format(t.downloads)});const T=t.details?.pluginDependencies;let F=t.details?.grafanaDependency;return o&&s?.grafanaDependency&&(F=s?.grafanaDependency),!F&&(!T||!T.length)||i.push({label:(0,I.t)("plugins.details.labels.dependencies","Dependencies"),value:(0,e.jsx)(gt,{plugin:t,grafanaDependency:F})}),t.isDisabled&&i.push({label:(0,I.t)("plugins.details.labels.status","Status"),value:(0,e.jsx)(ut.Df,{error:t.error})}),i.push({label:(0,I.t)("plugins.details.labels.signature","Signature"),value:(0,e.jsx)(pt,{plugin:t})}),i},Mt=t=>({subtitle:css`
      display: flex;
      flex-direction: column;
      gap: ${t.spacing(1)};
    `}),xt=t=>{const i=vt(t);return{actions:(0,e.jsx)(ot,{plugin:t}),info:i,subtitle:(0,e.jsx)(ct,{plugin:t})}};var yt=a(36663);function Dt(t){const{className:i,plugin:s}=t,[o,c]=(0,L.useState)(!1);return s.isDeprecated&&!o?(0,e.jsxs)(m.F,{severity:"warning",title:"Deprecated",className:i,onRemove:()=>c(!0),children:[(0,e.jsxs)("p",{children:["This ",s.type," plugin is"," ",(0,e.jsx)("a",{className:"external-link",href:"https://grafana.com/legal/plugin-deprecation/",rel:"noreferrer",target:"_blank",children:"deprecated"})," ","and has been removed from the catalog."]}),s.details?.statusContext&&(0,e.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:(0,yt.G)(s.details.statusContext)}})]}):null}function Et({pluginId:t,navId:i="plugins",notFoundComponent:s=(0,e.jsx)(St,{}),notFoundNavModel:o={text:"Unknown plugin",subTitle:"The requested ID does not belong to any plugin",active:!0}}){const c=(0,f.zy)(),D=new URLSearchParams(c.search),T=(0,te.ob)(t),{navModel:F,activePageId:U}=ne(T,D.get("page")),{actions:oe,info:ue,subtitle:ye}=xt(T),{isLoading:q}=(0,te.m5)(),{isLoading:ie}=(0,te.wr)(),ge=(0,d.of)(Pt);if(q||ie)return(0,e.jsx)(p.YW,{navId:i,pageNav:{text:"",active:!0},children:(0,e.jsx)(y.a,{})});if(!T)return(0,e.jsx)(p.YW,{navId:i,pageNav:o,children:s});const be=u.$.featureToggles.pluginsDetailsRightPanel?{}:{info:ue};return(0,e.jsx)(p.YW,{navId:i,pageNav:F,actions:oe,subTitle:ye,...be,children:(0,e.jsxs)(x.B,{gap:4,justifyContent:"space-between",direction:{xs:"column-reverse",sm:"row"},children:[(0,e.jsx)(p.YW.Contents,{children:(0,e.jsxs)(B.J,{className:ge.tabContent,children:[T.angularDetected&&(0,e.jsx)($.c,{className:ge.alert,angularSupportEnabled:u.$?.angularSupportEnabled,pluginId:T.id,pluginType:T.type,showPluginDetailsLink:!1,interactionElementId:"plugin-details-page"}),(0,e.jsx)(se,{plugin:T,className:ge.alert}),(0,e.jsx)(Ae,{plugin:T,className:ge.alert}),(0,e.jsx)(Dt,{plugin:T,className:ge.alert}),(0,e.jsx)(Pe,{queryParams:Object.fromEntries(D),plugin:T,pageId:U})]})}),u.$.featureToggles.pluginsDetailsRightPanel&&(0,e.jsx)(P,{info:ue,plugin:T})]})})}const Pt=t=>({alert:(0,r.css)({marginBottom:t.spacing(2)}),subtitle:(0,r.css)({display:"flex",flexDirection:"column",gap:t.spacing(1)}),tabContent:(0,r.css)({paddingLeft:"5px",width:"100%"})});function St(){return(0,e.jsx)(x.B,{justifyContent:"center",alignItems:"center",height:"100%",children:(0,e.jsx)(E.a,{children:(0,e.jsxs)(m.F,{severity:b.AppNotificationSeverity.Warning,title:"Plugin not found",children:["That plugin cannot be found. Please check the url is correct or ",(0,e.jsx)("br",{}),"go to the ",(0,e.jsx)("a",{href:"/plugins",children:"plugin catalog"}),"."]})})})}},83391:(Y,M,a)=>{a.d(M,{A5:()=>he,wr:()=>K,m5:()=>le,PW:()=>O,F9:()=>_,ob:()=>X,sM:()=>ae,xX:()=>ee,XN:()=>pe,pw:()=>H,Gp:()=>C,qG:()=>ce,SQ:()=>n});var e=a(96540),r=a(31678),f=a(5129),u=a(20701),d=a(25508),x=a(54479),B=a(14110),E=a(66253),m=a(31326);const p=g=>g.plugins,b=(0,d.Mz)(p,({items:g})=>g),{selectAll:$,selectById:y}=m.AI.getSelectors(b),L=g=>(0,d.Mz)($,h=>{const N=g.keyword?(0,x.xb)(g.keyword.toLowerCase()):"",V=N!==""?(0,f.TD)(h,N):null;return N&&(0,B.rR)("plugins_search",{resultsCount:V?.length}),h.filter(J=>!(N&&V==null||N&&!V?.includes(J.id)||g.type&&J.type!==g.type||g.isInstalled!==void 0&&J.isInstalled!==g.isInstalled||g.isEnterprise!==void 0&&J.isEnterprise!==g.isEnterprise||g.hasUpdate!==void 0&&(J.hasUpdate!==g.hasUpdate||!(0,f.R7)(J))))}),z=g=>(0,d.Mz)($,h=>{const N=[];for(const V of h)V.error&&(!g||V.type===g)&&N.push({pluginId:V.id,errorCode:V.error,pluginType:V.type});return N}),W=g=>(0,d.Mz)(p,({requests:h={}})=>h[g]),R=g=>(0,d.Mz)(W(g),h=>h?.status===E.IZ.Pending),A=g=>(0,d.Mz)(W(g),h=>h?.status===E.IZ.Rejected?h?.error:null),Z=g=>(0,d.Mz)(W(g),h=>h===void 0),O=(g,h=f.by.nameAsc)=>{j();const N=(0,e.useMemo)(()=>L(g),[g]),V=(0,r.useSelector)(N),{isLoading:J,error:de}=Q(),ve=(0,f.Xc)(V,h);return{isLoading:J,error:de,plugins:ve}},ae=()=>{const{isLoading:g}=le(),{plugins:h}=O({isInstalled:!0}),N=h.filter(f.R7);return{isLoading:g,updatablePlugins:N}},X=g=>(j(),w(g),(0,r.useSelector)(h=>y(h,g))),k=g=>(me(),useSelector(h=>selectById(h,g))),_=g=>(j(),(0,r.useSelector)(z(g))),ee=()=>{const g=(0,r.useDispatch)();return(h,N,V)=>g((0,u.ai)({id:h,version:N,isUpdating:V}))},n=()=>{const g=(0,r.useDispatch)();return()=>g((0,u.nT)())},C=()=>{const g=(0,r.useDispatch)();return h=>g((0,u.JC)(h))},H=()=>(0,r.useSelector)(A(u.JJ.typePrefix))===null,Q=()=>{const g=(0,r.useSelector)(R("plugins/fetchLocal")),h=(0,r.useSelector)(A("plugins/fetchLocal"));return{isLoading:g,error:h}},le=()=>{const g=(0,r.useSelector)(R(u.mj.typePrefix)),h=(0,r.useSelector)(R("plugins/fetchLocal")),N=(0,r.useSelector)(R("plugins/fetchRemote")),V=g||h||N,J=(0,r.useSelector)(A(u.mj.typePrefix));return{isLoading:V,error:J}},K=()=>{const g=(0,r.useSelector)(R(u.t5.typePrefix)),h=(0,r.useSelector)(A(u.t5.typePrefix));return{isLoading:g,error:h}},pe=()=>{const g=(0,r.useSelector)(R(u.ai.typePrefix)),h=(0,r.useSelector)(A(u.ai.typePrefix));return{isInstalling:g,error:h}},ce=()=>{const g=(0,r.useSelector)(R(u.JC.typePrefix)),h=(0,r.useSelector)(A(u.JC.typePrefix));return{isUninstalling:g,error:h}},j=()=>{const g=(0,r.useDispatch)(),h=(0,r.useSelector)(Z(u.mj.typePrefix));(0,e.useEffect)(()=>{h&&g((0,u.mj)())},[])},me=()=>{const g=useDispatch(),h=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{h&&g(fetchAllLocal())},[])},w=g=>{const h=(0,r.useDispatch)(),N=(0,r.useSelector)(de=>y(de,g)),J=!(0,r.useSelector)(R(u.t5.typePrefix))&&N&&!N.details;(0,e.useEffect)(()=>{J&&h((0,u.t5)(g))},[N])},he=()=>{const g=(0,r.useDispatch)();return h=>g((0,u.t5)(h))}}}]);

//# sourceMappingURL=7743.0f680902d6a7518337e0.js.map