(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"8uRs":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return m})),n.d(t,"h",(function(){return f}));var r=n("GQ3c"),a=function(e){return e.searchQuery},o=function(e){return e.searchMemberQuery},i=function(e){return e.groups},c=function(e){return e.teams.length},u=function(e,t){return e.team.id===parseInt(t,10)?e.team:null},s=function(e){var t=RegExp(e.searchQuery,"i");return e.teams.filter((function(e){return t.test(e.name)}))},l=function(e){var t=RegExp(e.searchMemberQuery,"i");return e.members.filter((function(e){return t.test(e.login)||t.test(e.email)||t.test(e.name)}))},m=function(e){var t=e.members,n=e.signedInUser,a=e.editorsCanAdmin,o=t.find((function(e){return e.userId===n.id})),i=o?o.permission:r.TeamPermissionLevel.Member;return f({permission:i,signedInUser:n,editorsCanAdmin:a})},f=function(e){var t=e.permission,n=e.signedInUser,a=e.editorsCanAdmin,o=n.isGrafanaAdmin||n.orgRole===r.OrgRole.Admin,i=t===r.TeamPermissionLevel.Admin;return o||i||!a}},Rczg:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("kDLi"),c=n("mHLn"),u=n("gxTa"),s=n("X+V3"),l=n("8uRs");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={updateTeam:u.j};t.a=Object(o.connect)((function(e){var t=Object(s.c)(e.location);return{team:Object(l.c)(e.team,t)}}),p)((function(e){var t=e.team,n=e.updateTeam;return a.a.createElement(i.VerticalGroup,null,a.a.createElement(i.FieldSet,{label:"Team Settings"},a.a.createElement(i.Form,{defaultValues:f({},t),onSubmit:function(e){n(e.name,e.email)}},(function(e){var t=e.register;return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.Field,{label:"Name"},a.a.createElement(i.Input,{name:"name",ref:t({required:!0})})),a.a.createElement(i.Field,{label:"Email",description:"This is optional and is primarily used to set the team profile avatar (via gravatar service)"},a.a.createElement(i.Input,{placeholder:"team@email.com",type:"email",name:"email",ref:t})),a.a.createElement(i.Button,{type:"submit"},"Update"))}))),a.a.createElement(c.a,{resourceUri:"teams/".concat(t.id)}))}))},WB4m:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("BVom"),c=n("kDLi"),u=n("gxTa"),s=n("8uRs"),l=n("QQVG");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=c.LegacyForms.Input,v="Sync LDAP or OAuth groups with your Grafana teams.",y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,b(t).call(this,e))).onToggleAdding=function(){n.setState({isAdding:!n.state.isAdding})},n.onNewGroupIdChanged=function(e){n.setState({newGroupId:e.target.value})},n.onAddGroup=function(e){e.preventDefault(),n.props.addTeamGroup(n.state.newGroupId),n.setState({isAdding:!1,newGroupId:""})},n.onRemoveGroup=function(e){n.props.removeTeamGroup(e.groupId)},n.state={isAdding:!1,newGroupId:""},n}var n,r,o,u,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.fetchTeamGroups()}},{key:"fetchTeamGroups",value:(u=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadTeamGroups();case 2:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=u.apply(e,t);function o(e){f(a,n,r,o,i,"next",e)}function i(e){f(a,n,r,o,i,"throw",e)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"isNewGroupValid",value:function(){return this.state.newGroupId.length>1}},{key:"renderGroup",value:function(e){var t=this;return a.a.createElement("tr",{key:e.groupId},a.a.createElement("td",null,e.groupId),a.a.createElement("td",{style:{width:"1%"}},a.a.createElement("a",{className:"btn btn-danger btn-small",onClick:function(){return t.onRemoveGroup(e)}},a.a.createElement(c.Icon,{name:"times",style:{marginBottom:0}}))))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAdding,r=t.newGroupId,o=this.props.groups;return a.a.createElement("div",null,a.a.createElement("div",{className:"page-action-bar"},a.a.createElement("h3",{className:"page-sub-heading"},"External group sync"),a.a.createElement(c.Tooltip,{placement:"auto",content:v},a.a.createElement(c.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),a.a.createElement("div",{className:"page-action-bar__spacer"}),o.length>0&&a.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onToggleAdding},a.a.createElement(c.Icon,{name:"plus"})," Add group")),a.a.createElement(i.a,{in:n},a.a.createElement("div",{className:"cta-form"},a.a.createElement("button",{className:"cta-form__close btn btn-transparent",onClick:this.onToggleAdding},a.a.createElement(c.Icon,{name:"times"})),a.a.createElement("h5",null,"Add External Group"),a.a.createElement("form",{className:"gf-form-inline",onSubmit:this.onAddGroup},a.a.createElement("div",{className:"gf-form"},a.a.createElement(g,{type:"text",className:"gf-form-input width-30",value:r,onChange:this.onNewGroupIdChanged,placeholder:"cn=ops,ou=groups,dc=grafana,dc=org"})),a.a.createElement("div",{className:"gf-form"},a.a.createElement("button",{className:"btn btn-primary gf-form-btn",type:"submit",disabled:!this.isNewGroupValid()},"Add group"))))),0===o.length&&!n&&a.a.createElement(l.a,{onClick:this.onToggleAdding,buttonIcon:"users-alt",title:"There are no external groups to sync with",buttonTitle:"Add Group",proTip:v,proTipLinkTitle:"Learn more",proTipLink:"http://docs.grafana.org/auth/enhanced_ldap/",proTipTarget:"_blank"}),o.length>0&&a.a.createElement("div",{className:"admin-list-table"},a.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"External Group ID"),a.a.createElement("th",{style:{width:"1%"}}))),a.a.createElement("tbody",null,o.map((function(t){return e.renderGroup(t)}))))))}}])&&d(n.prototype,r),o&&d(n,o),t}(r.PureComponent);var E={loadTeamGroups:u.e,addTeamGroup:u.a,removeTeamGroup:u.h};t.a=Object(o.connect)((function(e){return{groups:Object(s.d)(e.team)}}),E)(y)},cwy8:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("/MKj"),i=n("kDLi"),c=n("BVom"),u=n("+dgx"),s=n("rCnR"),l=n("gxTa"),m=n("8uRs"),f=n("EKT6"),d=function(e){var t=e.featureToggle,n=e.children;return!0===t?a.a.createElement(a.a.Fragment,null,n):null},p=n("ZFWI"),b=n("umNM"),h=n("GQ3c");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=i.LegacyForms.Select,S=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=w(t).call(this,e),(n=!a||"object"!==g(a)&&"function"!=typeof a?O(r):a).onPermissionChange=function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{permission:e.value});n.props.updateTeamMember(r)},n.renderLabels=n.renderLabels.bind(O(n)),n.renderPermissions=n.renderPermissions.bind(O(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"onRemoveMember",value:function(e){this.props.removeTeamMember(e.userId)}},{key:"renderPermissions",value:function(e){var t=this,n=this.props,r=n.editorsCanAdmin,o=n.signedInUserIsTeamAdmin,i=h.teamsPermissionLevels.find((function(t){return t.value===e.permission}));return a.a.createElement(d,{featureToggle:r},a.a.createElement("td",{className:"width-5 team-permissions"},a.a.createElement("div",{className:"gf-form"},o&&a.a.createElement(T,{isSearchable:!1,options:h.teamsPermissionLevels,onChange:function(n){return t.onPermissionChange(n,e)},className:"gf-form-select-box__control--menu-right",value:i}),!o&&a.a.createElement("span",null,i.label))))}},{key:"renderLabels",value:function(e){return e?a.a.createElement("td",null,e.map((function(e){return a.a.createElement(s.a,{key:e,label:e,removeIcon:!1,count:0,onClick:function(){}})}))):a.a.createElement("td",null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.member,r=t.syncEnabled,o=t.signedInUserIsTeamAdmin;return a.a.createElement("tr",{key:n.userId},a.a.createElement("td",{className:"width-4 text-center"},a.a.createElement("img",{className:"filter-table__avatar",src:n.avatarUrl})),a.a.createElement("td",null,n.login),a.a.createElement("td",null,n.email),a.a.createElement("td",null,n.name),this.renderPermissions(n),r&&this.renderLabels(n.labels),a.a.createElement("td",{className:"text-right"},a.a.createElement(i.DeleteButton,{size:"sm",disabled:!o,onConfirm:function(){return e.onRemoveMember(n)}})))}}])&&E(n.prototype,r),o&&E(n,o),t}(r.PureComponent);var k={removeTeamMember:l.i,updateTeamMember:l.k},P=Object(o.connect)((function(e){return{}}),k)(S),x=n("BPIC");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){C(o,r,a,i,c,"next",e)}function c(e){C(o,r,a,i,c,"throw",e)}i(void 0)}))}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_(this,N(t).call(this,e))).onSearchQueryChange=function(e){n.props.setSearchMemberQuery(e)},n.onToggleAdding=function(){n.setState({isAdding:!n.state.isAdding})},n.onUserSelected=function(e){n.setState({newTeamMember:e})},n.onAddUserToTeam=A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.addTeamMember(n.state.newTeamMember.id),n.setState({newTeamMember:null});case 2:case"end":return e.stop()}}),e)}))),n.state={isAdding:!1,newTeamMember:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(r=[{key:"renderLabels",value:function(e){return e?a.a.createElement("td",null,e.map((function(e){return a.a.createElement(s.a,{key:e,label:e,removeIcon:!1,count:0,onClick:function(){}})}))):a.a.createElement("td",null)}},{key:"render",value:function(){var e=this.state.isAdding,t=this.props,n=t.searchMemberQuery,r=t.members,o=t.syncEnabled,s=t.editorsCanAdmin,l=t.signedInUser,p=Object(m.i)({members:r,editorsCanAdmin:s,signedInUser:l});return a.a.createElement("div",null,a.a.createElement("div",{className:"page-action-bar"},a.a.createElement("div",{className:"gf-form gf-form--grow"},a.a.createElement(f.a,{labelClassName:"gf-form--has-input-icon gf-form--grow",inputClassName:"gf-form-input",placeholder:"Search members",value:n,onChange:this.onSearchQueryChange})),a.a.createElement("div",{className:"page-action-bar__spacer"}),a.a.createElement("button",{className:"btn btn-primary pull-right",onClick:this.onToggleAdding,disabled:e||!p},"Add member")),a.a.createElement(c.a,{in:e},a.a.createElement("div",{className:"cta-form"},a.a.createElement("button",{className:"cta-form__close btn btn-transparent",onClick:this.onToggleAdding},a.a.createElement(i.Icon,{name:"times"})),a.a.createElement("h5",null,"Add team member"),a.a.createElement("div",{className:"gf-form-inline"},a.a.createElement(u.a,{onSelected:this.onUserSelected,className:"min-width-30"}),this.state.newTeamMember&&a.a.createElement("button",{className:"btn btn-primary gf-form-btn",type:"submit",onClick:this.onAddUserToTeam},"Add to team")))),a.a.createElement("div",{className:"admin-list-table"},a.a.createElement("table",{className:"filter-table filter-table--hover form-inline"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null),a.a.createElement("th",null,"Login"),a.a.createElement("th",null,"Email"),a.a.createElement("th",null,"Name"),a.a.createElement(d,{featureToggle:s},a.a.createElement("th",null,"Permission")),o&&a.a.createElement("th",null),a.a.createElement("th",{style:{width:"1%"}}))),a.a.createElement("tbody",null,r&&r.map((function(e){return a.a.createElement(P,{key:e.userId,member:e,syncEnabled:o,editorsCanAdmin:s,signedInUserIsTeamAdmin:p})}))))))}}])&&R(n.prototype,r),o&&R(n,o),t}(r.PureComponent);var G={addTeamMember:l.b,setSearchMemberQuery:x.b};t.a=Object(o.connect)((function(e){return{searchMemberQuery:Object(m.a)(e.team),editorsCanAdmin:p.a.editorsCanAdmin,signedInUser:b.a.user}}),G)(M)},gxTa:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"k",(function(){return y}));var r=n("t8hP"),a=n("3SGO"),o=n("zsYB"),i=n("BPIC");function c(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,u,"next",e)}function u(e){c(o,r,a,i,u,"throw",e)}i(void 0)}))}}function s(){return function(){var e=u(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.getBackendSrv)().get("/api/teams/search",{perpage:1e3,page:1});case 2:n=e.sent,t(Object(i.g)(n.teams));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function l(e){return function(){var t=u(regeneratorRuntime.mark((function t(n){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.getBackendSrv)().get("/api/teams/".concat(e));case 2:c=t.sent,n(Object(i.e)(c)),n(Object(a.e)(Object(o.a)(c)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function m(){return function(){var e=u(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().team.team,e.next=3,Object(r.getBackendSrv)().get("/api/teams/".concat(a.id,"/members"));case 3:o=e.sent,t(Object(i.f)(o));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function f(e){return function(){var t=u(regeneratorRuntime.mark((function t(n,a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().team.team,t.next=3,Object(r.getBackendSrv)().post("/api/teams/".concat(o.id,"/members"),{userId:e});case 3:n(m());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function d(e){return function(){var t=u(regeneratorRuntime.mark((function t(n,a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().team.team,t.next=3,Object(r.getBackendSrv)().delete("/api/teams/".concat(o.id,"/members/").concat(e));case 3:n(m());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function p(e,t){return function(){var n=u(regeneratorRuntime.mark((function n(a,o){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=o().team.team,n.next=3,Object(r.getBackendSrv)().put("/api/teams/".concat(i.id),{name:e,email:t});case 3:a(l(i.id));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function b(){return function(){var e=u(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().team.team,e.next=3,Object(r.getBackendSrv)().get("/api/teams/".concat(a.id,"/groups"));case 3:o=e.sent,t(Object(i.d)(o));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function h(e){return function(){var t=u(regeneratorRuntime.mark((function t(n,a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().team.team,t.next=3,Object(r.getBackendSrv)().post("/api/teams/".concat(o.id,"/groups"),{groupId:e});case 3:n(b());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function g(e){return function(){var t=u(regeneratorRuntime.mark((function t(n,a){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().team.team,t.next=3,Object(r.getBackendSrv)().delete("/api/teams/".concat(o.id,"/groups/").concat(encodeURIComponent(e)));case 3:n(b());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function v(e){return function(){var t=u(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.getBackendSrv)().delete("/api/teams/".concat(e));case 2:n(s());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function y(e){return function(){var t=u(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.getBackendSrv)().put("/api/teams/".concat(e.teamId,"/members/").concat(e.userId),{permission:e.permission});case 2:n(m());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},mHLn:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n("q1tI"),a=n.n(r),o=n("kDDq"),i=n("kDLi"),c=n("Csm0"),u=n("NXk7");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n      margin-right: 6px;\n    "]);return l=function(){return e},e}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,c,"next",e)}function c(e){f(o,r,a,i,c,"throw",e)}i(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=[{value:"",label:"Default"},{value:"dark",label:"Dark"},{value:"light",label:"Light"}],y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,h(t).call(this,e))).backendSrv=u.b,n.onSubmitForm=d(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,r=t.homeDashboardId,a=t.theme,o=t.timezone,e.next=3,u.b.put("/api/".concat(n.props.resourceUri,"/preferences"),{homeDashboardId:r,theme:a,timezone:o});case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)}))),n.onThemeChanged=function(e){n.setState({theme:e})},n.onTimeZoneChanged=function(e){e&&n.setState({timezone:e})},n.onHomeDashboardChanged=function(e){n.setState({homeDashboardId:e})},n.getFullDashName=function(e){return void 0===e.folderTitle||""===e.folderTitle?e.title:e.folderTitle+" / "+e.title},n.state={homeDashboardId:0,theme:"",timezone:"",dashboards:[]},n}var n,r,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:(s=d(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.b.get("/api/".concat(this.props.resourceUri,"/preferences"));case 2:return t=e.sent,e.next=5,u.b.search({starred:!0});case 5:if(n=e.sent,r={id:0,title:"Default",tags:[],type:"",uid:"",uri:"",url:"",folderId:0,folderTitle:"",folderUid:"",folderUrl:"",isStarred:!1,slug:"",items:[]},!(t.homeDashboardId>0)||n.find((function(e){return e.id===t.homeDashboardId}))){e.next=12;break}return e.next=10,u.b.search({dashboardIds:[t.homeDashboardId]});case 10:(a=e.sent)&&a.length>0&&n.push(a[0]);case 12:this.setState({homeDashboardId:t.homeDashboardId,theme:t.theme,timezone:t.timezone,dashboards:[r].concat(m(n))});case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.theme,r=t.timezone,o=t.homeDashboardId,u=t.dashboards,s=E();return a.a.createElement(i.Form,{onSubmit:this.onSubmitForm},(function(){var t;return a.a.createElement(i.FieldSet,{label:"Preferences"},a.a.createElement(i.Field,{label:"UI Theme"},a.a.createElement(i.RadioButtonGroup,{options:v,value:null===(t=v.find((function(e){return e.value===n})))||void 0===t?void 0:t.value,onChange:e.onThemeChanged})),a.a.createElement(i.Field,{label:a.a.createElement(i.Label,null,a.a.createElement("span",{className:s.labelText},"Home Dashboard"),a.a.createElement(i.Tooltip,{content:"Not finding dashboard you want? Star it first, then it should appear in this select box."},a.a.createElement(i.Icon,{name:"info-circle"})))},a.a.createElement(i.Select,{value:u.find((function(e){return e.id===o})),getOptionValue:function(e){return e.id},getOptionLabel:e.getFullDashName,onChange:function(t){return e.onHomeDashboardChanged(t.id)},options:u,placeholder:"Choose default dashboard"})),a.a.createElement(i.Field,{label:"Timezone","aria-label":c.selectors.components.TimeZonePicker.container},a.a.createElement(i.TimeZonePicker,{includeInternal:!0,value:r,onChange:e.onTimeZoneChanged})),a.a.createElement("div",{className:"gf-form-button-row"},a.a.createElement(i.Button,{variant:"primary"},"Save")))}))}}])&&p(n.prototype,r),o&&p(n,o),t}(r.PureComponent);t.b=y;var E=Object(i.stylesFactory)((function(){return{labelText:Object(o.css)(l())}}))},"p+xb":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"TeamPages",(function(){return x}));var r,a=n("q1tI"),o=n.n(a),i=n("/MKj"),c=n("LvDl"),u=n.n(c),s=n("0cfB"),l=n("ZFWI"),m=n("ZGyg"),f=n("cwy8"),d=n("Rczg"),p=n("WB4m"),b=n("gxTa"),h=n("8uRs"),g=n("zsYB"),v=n("lzJ5"),y=n("X+V3"),E=n("umNM");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){O(o,r,a,i,c,"next",e)}function c(e){O(o,r,a,i,c,"throw",e)}i(void 0)}))}}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e){e.Members="members",e.Settings="settings",e.GroupSync="groupsync"}(r||(r={}));var x=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=S(this,k(t).call(this,e))).textsAreEqual=function(e,t){return!e&&!t||!(!e||!t)&&e.toLocaleLowerCase()===t.toLocaleLowerCase()},n.hideTabsFromNonTeamAdmin=function(e,t){return!t&&e.main&&e.main.children&&e.main.children.filter((function(e){return!n.textsAreEqual(e.text,r.Members)})).map((function(e){e.hideFromTabs=!0})),e},n.state={isLoading:!1,isSyncEnabled:l.b.licenseInfo.hasLicense},n}var n,a,i,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:(s=j(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchTeam();case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"fetchTeam",value:(c=j(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.loadTeam,r=t.teamId,this.setState({isLoading:!0}),e.next=4,n(r);case 4:return a=e.sent,e.next=7,this.props.loadTeamMembers();case 7:return this.setState({isLoading:!1}),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getCurrentPage",value:function(){var e=["members","settings","groupsync"],t=this.props.pageName;return u.a.includes(e,t)?t:e[0]}},{key:"renderPage",value:function(e){var t=this.state.isSyncEnabled,n=this.props.members;switch(this.getCurrentPage()){case r.Members:return o.a.createElement(f.a,{syncEnabled:t,members:n});case r.Settings:return e&&o.a.createElement(d.a,null);case r.GroupSync:return e&&t&&o.a.createElement(p.a,null)}return null}},{key:"render",value:function(){var e=this.props,t=e.team,n=e.navModel,r=e.members,a=e.editorsCanAdmin,i=e.signedInUser,c=Object(h.i)({members:r,editorsCanAdmin:a,signedInUser:i});return o.a.createElement(m.a,{navModel:this.hideTabsFromNonTeamAdmin(n,c)},o.a.createElement(m.a.Contents,{isLoading:this.state.isLoading},t&&0!==Object.keys(t).length&&this.renderPage(c)))}}])&&T(n.prototype,a),i&&T(n,i),t}(a.PureComponent);var I={loadTeam:b.d,loadTeamMembers:b.f};t.default=Object(s.hot)(e)(Object(i.connect)((function(e){var t=Object(y.c)(e.location),n=Object(y.d)(e.location)||"members",r=Object(g.b)(n);return{navModel:Object(v.a)(e.navIndex,"team-".concat(n,"-").concat(t),r),teamId:t,pageName:n,team:Object(h.c)(e.team,t),members:Object(h.e)(e.team),editorsCanAdmin:l.b.editorsCanAdmin,signedInUser:E.a.user}}),I)(x))}.call(this,n("3UD+")(e))},zsYB:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n("GQ3c"),a=n("ZFWI");function o(e){var t={img:e.avatarUrl,id:"team-"+e.id,subTitle:"Manage members & settings",url:"",text:e.name,breadcrumbs:[{title:"Teams",url:"org/teams"}],children:[{active:!1,icon:"users-alt",id:"team-members-".concat(e.id),text:"Members",url:"org/teams/edit/".concat(e.id,"/members")},{active:!1,icon:"sliders-v-alt",id:"team-settings-".concat(e.id),text:"Settings",url:"org/teams/edit/".concat(e.id,"/settings")}]};return a.b.licenseInfo.hasLicense&&t.children.push({active:!1,icon:"sync",id:"team-groupsync-".concat(e.id),text:"External group sync",url:"org/teams/edit/".concat(e.id,"/groupsync")}),t}function i(e){var t,n=o({avatarUrl:"public/img/user_profile.png",id:1,name:"Loading",email:"loading",memberCount:0,permission:r.TeamPermissionLevel.Member}),a=!0,i=!1,c=void 0;try{for(var u,s=n.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var l=u.value;if(l.id.indexOf(e)>0){l.active=!0,t=l;break}}}catch(e){i=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw c}}return{main:n,node:t}}}}]);
//# sourceMappingURL=TeamPages.591ee81e63053ad31983.js.map