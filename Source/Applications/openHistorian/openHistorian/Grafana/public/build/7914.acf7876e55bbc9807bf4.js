"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7914],{20851:(h,g,s)=>{s.d(g,{GU:()=>d,YO:()=>E,qm:()=>u});var n=s(74848),i=s(32196),m=s(96540),a=s(40845),o=s(19361),x=s(38645);const u=({children:e,enterAnimation:t=!0})=>{const f=(0,a.of)(E);return(0,n.jsx)("div",{className:(0,i.cx)(f.loginInnerBox,t&&f.enterAnimation),children:e})},d=({children:e,branding:t,isChangingPassword:f})=>{const r=(0,a.of)(E),[P,O]=(0,m.useState)(!1),M=t?.loginSubtitle??o.M.GetLoginSubTitle(),_=t?.loginTitle??o.M.LoginTitle,p=t?.loginBoxBackground||o.M.LoginBoxBackground(),D=t?.loginLogo,j=t?.hideEdition??o.M.HideEdition;return(0,m.useEffect)(()=>O(!0),[]),(0,n.jsxs)(o.M.LoginBackground,{className:(0,i.cx)(r.container,P&&r.loginAnim,t?.loginBackground),children:[(0,n.jsx)("div",{className:r.loginMain,children:(0,n.jsxs)("div",{className:(0,i.cx)(r.loginContent,p,"login-content-box"),children:[(0,n.jsxs)("div",{className:r.loginLogoWrapper,children:[(0,n.jsx)(o.M.LoginLogo,{className:r.loginLogo,logo:D}),(0,n.jsx)("div",{className:r.titleWrapper,children:f?(0,n.jsx)("h1",{className:r.mainTitle,children:"Update your password"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:r.mainTitle,children:_}),M&&(0,n.jsx)("h3",{className:r.subTitle,children:M})]})})]}),(0,n.jsx)("div",{className:r.loginOuterBox,children:e})]})}),t?.hideFooter?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(x.wi,{hideEdition:j,customLinks:t?.footerLinks})]})},c=(0,i.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,E=e=>({loginMain:(0,i.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,i.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,i.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,i.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,i.css)({width:"100%",maxWidth:60,marginBottom:e.spacing(2),[e.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,i.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(3)}),titleWrapper:(0,i.css)({textAlign:"center"}),mainTitle:(0,i.css)({fontSize:22,[e.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,i.css)({fontSize:e.typography.size.md,color:e.colors.text.secondary}),loginContent:(0,i.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:e.shape.radius.default,padding:e.spacing(2,0),opacity:0,[e.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[e.breakpoints.up("sm")]:{minHeight:e.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,i.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,i.css)({padding:e.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[e.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,i.css)({[e.transitions.handleMotion("no-preference")]:{animation:`${c} ease-out 0.2s`}})})},78361:(h,g,s)=>{s.d(g,{s:()=>x});var n=s(74848),i=s(96540),m=s(13544),a=s(10354),o=s(29158);const x=(0,i.forwardRef)((u,d)=>{const[c,E]=(0,i.useState)(!1);return(0,n.jsx)(a.p,{...u,type:c?"text":"password","data-testid":m.Tp.pages.Login.password,ref:d,suffix:(0,n.jsx)(o.K,{name:c?"eye-slash":"eye","aria-controls":u.id,role:"switch","aria-checked":c,onClick:()=>{E(!c)},tooltip:c?"Hide password":"Show password"})})});x.displayName="PasswordField"},27914:(h,g,s)=>{s.r(g),s.d(g,{SignupPage:()=>f,default:()=>r});var n=s(74848),i=s(49785),m=s(17172),a=s(88575),o=s(10354),x=s(67061),u=s(55852),d=s(2913),c=s(3169),E=s(35538),e=s(20851),t=s(78361);const f=({queryParams:P})=>{const O=(0,c._2)(),{handleSubmit:M,formState:{errors:_},register:p,getValues:D}=(0,i.mN)({defaultValues:{email:P.email,code:P.code}}),j=async l=>{l.name===""&&delete l.name,delete l.confirm,(await(0,m.AI)().post("/api/user/signup/step2",{email:l.email,code:l.code,username:l.email,orgName:l.orgName,password:l.password,name:l.name}).catch(L=>{const y=L.data?.message||L;O.warning(y)})).code==="redirect-to-select-org"&&window.location.assign((0,d.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,d.zj)().appSubUrl+"/")};return(0,n.jsx)(e.GU,{children:(0,n.jsx)(e.qm,{children:(0,n.jsxs)("form",{onSubmit:M(j),style:{width:"100%"},children:[(0,n.jsx)(a.D,{label:"Your name",children:(0,n.jsx)(o.p,{id:"user-name",...p("name"),placeholder:"(optional)"})}),(0,n.jsx)(a.D,{label:"Email",invalid:!!_.email,error:_.email?.message,children:(0,n.jsx)(o.p,{id:"email",...p("email",{required:"Email is required",pattern:{value:E.pL,message:"Email is invalid"}}),type:"email",placeholder:"Email"})}),!(0,d.zj)().autoAssignOrg&&(0,n.jsx)(a.D,{label:"Org. name",children:(0,n.jsx)(o.p,{id:"org-name",...p("orgName"),placeholder:"Org. name"})}),(0,d.zj)().verifyEmailEnabled&&(0,n.jsx)(a.D,{label:"Email verification code (sent to your email)",children:(0,n.jsx)(o.p,{id:"verification-code",...p("code"),placeholder:"Code"})}),(0,n.jsx)(a.D,{label:"Password",invalid:!!_.password,error:_?.password?.message,children:(0,n.jsx)(t.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...p("password",{required:"Password is required"})})}),(0,n.jsx)(a.D,{label:"Confirm password",invalid:!!_.confirm,error:_?.confirm?.message,children:(0,n.jsx)(t.s,{id:"confirm-new-password",autoComplete:"new-password",...p("confirm",{required:"Confirmed password is required",validate:l=>l===D().password||"Passwords must match!"})})}),(0,n.jsxs)(x.B,{children:[(0,n.jsx)(u.$n,{type:"submit",children:"Submit"}),(0,n.jsx)(u.z9,{fill:"text",href:(0,d.zj)().appSubUrl+"/login",children:"Back to login"})]})]})})})},r=f},35538:(h,g,s)=>{s.d(g,{pL:()=>i,z5:()=>a});var n=s(32264);const i=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function m(){const o=n.$.licenseInfo?.trialExpiry;return!!(o&&o>0)}const a=()=>m()&&n.$.featureToggles.featureHighlights}}]);

//# sourceMappingURL=7914.acf7876e55bbc9807bf4.js.map