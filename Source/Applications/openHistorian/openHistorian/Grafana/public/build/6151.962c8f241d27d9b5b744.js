/*! For license information please see 6151.962c8f241d27d9b5b744.js.LICENSE.txt */
(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6151],{12322:(e,t,n)=>{"use strict";n.d(t,{i:()=>d});var a=n(33071),s=n(54573),i=n(39056);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o=e=>e;class l{constructor(e,t){r(this,"converter",o),this.source=e,this.prop=t}get length(){return this.source.length}get(e){return this.converter(this.source[e][this.prop])}toArray(){return(0,s.n)(this)}toJSON(){return(0,s.n)(this)}}class d extends a.G{constructor(e,t){super(),r(this,"name",void 0),r(this,"refId",void 0),r(this,"meta",void 0),r(this,"fields",[]),r(this,"length",0),this.source=e,this.length=e.length;const n=e.length?e[0]:{};t?this.fields=t.map((t=>({name:t,type:(0,i._m)(t,n[t]),config:{},values:new l(e,t)}))):this.setFieldsFromObject(n)}setFieldsFromObject(e){this.fields=Object.keys(e).map((t=>({name:t,type:(0,i._m)(t,e[t]),config:{},values:new l(this.source,t)})))}setFieldType(e,t,n){let a=this.fields.find((t=>t.name===e));return a?a.type=t:(a={name:e,type:t,config:{},values:new l(this.source,e)},this.fields.push(a)),a.values.converter=null!=n?n:o,a}get(e){return this.source[e]}toJSON(){return(0,i.og)(this)}}},12621:(e,t,n)=>{"use strict";n.d(t,{Jy:()=>l,Y:()=>u,vP:()=>c});var a=n(78689),s=n(15449),i=n(39056);const r=["values","state","display"];const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function l(e,t){if(e&&t)for(const n in e){const a=o[n];for(const s of e[n])s<t.length&&(t[s]=a)}}function d(e,t){for(const n of t)if(null!=n)return(0,i._m)(e,n);return a.fS.other}function c(e){const{schema:t,data:n}=e;if(!t||!t.fields)throw new Error("JSON needs a fields definition");const a=n?n.values.reduce(((e,t)=>Math.max(e,t.length)),0):0,i=t.fields.map(((e,t)=>{var i,r,o;let c,u=n?n.values[t]:[],h=u.length;return h!==a&&(u.length=a,u.fill(void 0,h)),(c=n&&n.entities&&n.entities[t])&&l(c,u),Object.assign({},e,{type:null!==(i=e.type)&&void 0!==i?i:d(e.name,u),config:null!==(r=e.config)&&void 0!==r?r:{},values:new s.Gt(u),entities:null!==(o=c)&&void 0!==o?o:{}})}));return Object.assign({},t,{fields:i,length:a})}function u(e){const t={values:[]};return{schema:{refId:e.refId,meta:e.meta,name:e.name,fields:e.fields.map((e=>{const{values:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);return delete a.entities,t.values.push(n.toArray()),a}))},data:t}}},98175:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var a=n(33071);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends a.G{constructor(e){super(),s(this,"index",0),s(this,"obj",void 0),s(this,"fields",void 0),this.data=e;const t={},n={};for(let a=0;a<e.fields.length;a++){const s=e.fields[a];if(!s.name)continue;n[s.name]=s;const i=()=>s.values.get(this.index);t.hasOwnProperty(s.name)||Object.defineProperty(t,s.name,{enumerable:!0,get:i}),t.hasOwnProperty(a.toString())||Object.defineProperty(t,a,{enumerable:!1,get:i})}this.obj=t,this.fields=n}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(e){if(!this.dataFrame||!this.dataFrame.fields)return;const t=this.dataFrame.fields[e];return t&&t.display?t.display:void 0}get(e){return this.index=e,this.obj}toArray(){return new Array(this.data.length).fill(0).map(((e,t)=>Object.assign({},this.get(t))))}}},11178:(e,t,n)=>{"use strict";n.d(t,{Y:()=>c,v:()=>u});var a=n(82897),s=n(86208),i=n(95714),r=n(23569),o=n(33071),l=n(39056);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=void 0;class u extends o.G{constructor(e,t){if(super(),d(this,"name",void 0),d(this,"refId",void 0),d(this,"meta",void 0),d(this,"fields",[]),d(this,"first",new r.G),d(this,"creator",void 0),d(this,"parsers",void 0),this.creator=t||(e=>new r.G(e)),e){const{name:t,refId:n,meta:a,fields:s}=e;if(t&&(this.name=t),n&&(this.refId=n),a&&(this.meta=a),s)for(const e of s)this.addField(e)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(e,t){return this.addField({name:t||"",type:(0,l.LI)(e)})}addField(e,t){let n;e.values&&(n=Array.isArray(e.values)?e.values:e.values.toArray());let a=e.type;a||"time"!==e.name&&"Time"!==e.name?(!a&&n&&n.length&&(a=(0,l.LI)(n[0])),a||(a=s.fS.other)):a=s.fS.time;let i=e.name;i||(i=`Field ${this.fields.length+1}`);const r=Object.assign({},e,{name:i,type:a,config:e.config||{},values:this.creator(n)});if(a===s.fS.other&&(a=(0,l.fu)(r),a&&(r.type=a)),this.fields.push(r),this.first=this.fields[0].values,t)for(;r.values.length<t;)r.values.add(c);else this.validate();return r}validate(){const e=this.fields.reduce(((e,t)=>Math.max(e,t.values.length)),0);for(const t of this.fields)for(;t.values.length!==e;)t.values.add(c)}reverse(){for(const e of this.fields)e.values.reverse()}setParser(e,t){return this.parsers||(this.parsers=new Map),this.parsers.set(e,t),t}parseValue(e,t){var n;let a=null===(n=this.parsers)||void 0===n?void 0:n.get(e);return a||(a=this.setParser(e,(0,i.d)(t,e))),a(t)}appendRow(e){for(let t=this.fields.length;t<e.length;t++)this.addField({name:`Field ${t+1}`,type:(0,l.LI)(e[t])});if(this.length<1)for(let t=0;t<this.fields.length;t++){const n=this.fields[t];n.type&&n.type!==s.fS.other||(n.type=(0,l.LI)(e[t]))}for(let t=0;t<this.fields.length;t++){const n=this.fields[t];let i=e[t];n.type!==s.fS.string&&(0,a.isString)(i)&&(i=this.parseValue(n,i)),n.values.add(i)}}add(e){const t=e;for(const e of this.fields){let n=t[e.name];e.type!==s.fS.string&&(0,a.isString)(n)&&(n=this.parseValue(e,n)),void 0===n&&(n=c),e.values.add(n)}}set(e,t){if(e>this.length)throw new Error("Unable ot set value beyond current length");const n=t||{};for(const t of this.fields)t.values.set(e,n[t.name])}get(e){const t={};for(const n of this.fields)t[n.name]=n.values.get(e);return t}toJSON(){return(0,l.og)(this)}}},96197:(e,t,n)=>{"use strict";n.d(t,{$q:()=>i,GV:()=>s,YP:()=>l,jC:()=>r,q2:()=>a,r7:()=>o});const a=(e,t)=>({name:e,columns:t}),s=e=>e.columns,i=(e,t)=>e.columns[t],r=(e,t,n)=>e.columns[t].values.get(n),o=(e,t,n)=>e.columns.map((e=>e.values.get(n))),l=(e,t)=>e[t]},98252:(e,t,n)=>{"use strict";function a(e,t,n){var a,s;if(e===t)return!0;if((null==e||null===(a=e.fields)||void 0===a?void 0:a.length)!==(null==t||null===(s=t.fields)||void 0===s?void 0:s.length))return!1;if(e.name!==t.name)return!1;for(let a=0;a<e.fields.length;a++){const s=e.fields[a],i=t.fields[a];if(s.type!==i.type||s.name!==i.name)return!1;if(n)continue;if(s.labels&&i.labels&&!r(s.labels,i.labels))return!1;const o=s.config,l=i.config;let d=Object.keys(o),c=Object.keys(l);if(d.length!==c.length)return!1;for(const e of d){if(!(e in l))return!1;if("interval"!==e)if("custom"===e){if(!r(o[e],l[e]))return!1}else if(o[e]!==l[e])return!1}}return!0}function s(e,t,n){if(e===t)return!0;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(let a=0;a<e.length;a++)if(!n(e[a],t[a]))return!1;return!0}n.d(t,{Ch:()=>a,Vv:()=>r,nl:()=>s});const i=(e,t)=>e===t;function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;if(e===t)return!0;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let s of a)if(!n(e[s],t[s]))return!1;return!0}},64421:(e,t,n)=>{"use strict";n.d(t,{iB:()=>h.i,a2:()=>d,US:()=>a.U,N:()=>r,Yi:()=>l.Y,vA:()=>l.v,m$:()=>m.m$,nl:()=>g.nl,Ch:()=>g.Ch,q2:()=>u.q2,vP:()=>p.vP,Y:()=>p.Y,Jy:()=>p.Jy,r7:()=>u.r7,$q:()=>u.$q,GV:()=>u.GV,fh:()=>c.fh,YP:()=>u.YP,DP:()=>c.DP,sV:()=>c.sV,jC:()=>u.jC,fu:()=>c.fu,_m:()=>c._m,LI:()=>c.LI,SX:()=>c.SX,aY:()=>c.aY,Ji:()=>c.Ji,Y6:()=>c.Y6,Vv:()=>g.Vv,aK:()=>c.aK,g0:()=>c.g0,og:()=>c.og,Aw:()=>c.Aw,Zr:()=>c.Zr});var a=n(98175),s=n(43215);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e){i(this,"fields",[]),i(this,"fieldByName",{}),i(this,"fieldByType",{}),this.fields=e.fields.map(((e,t)=>Object.assign({},e,{index:t})));for(let t=0;t<e.fields.length;t++){const n=e.fields[t];if(n.type===s.FieldType.other){const e=(0,s.guessFieldTypeForField)(n);e&&(n.type=e)}this.fieldByType[n.type]||(this.fieldByType[n.type]=[]),this.fieldByType[n.type].push(Object.assign({},n,{index:t})),this.fieldByName[n.name]?console.warn("Duplicate field names in DataFrame: ",n.name):this.fieldByName[n.name]=Object.assign({},n,{index:t})}}getFields(e){if(!e)return[...this.fields];const t=this.fieldByType[e];return t?[...t]:[]}hasFieldOfType(e){const t=this.fieldByType[e];return t&&t.length>0}getFirstFieldOfType(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.fieldByType[e].find((e=>{var n;return t||!(null!==(n=e.config.custom)&&void 0!==n&&n.hidden)}))}hasFieldNamed(e){return!!this.fieldByName[e]}hasFieldWithNameAndType(e,t){return!!this.fieldByName[e]&&this.fieldByType[t].filter((t=>t.name===e)).length>0}getFieldByName(e){return this.fieldByName[e]}getFieldsByLabel(e,t){return Object.values(this.fieldByName).filter((n=>n.labels&&n.labels[e]===t))}}var o=n(80612),l=n(11178);class d extends l.v{constructor(e){super(void 0,(t=>new o.d(Object.assign({},e,{buffer:t}))))}}var c=n(39056),u=n(96197),h=n(12322),p=n(12621),g=n(98252),m=n(79004)},39056:(e,t,n)=>{"use strict";n.d(t,{Aw:()=>F,DP:()=>b,Ji:()=>j,LI:()=>x,SX:()=>w,Y6:()=>I,Zr:()=>k,_m:()=>v,aK:()=>T,aY:()=>S,fh:()=>O,fu:()=>y,g0:()=>C,og:()=>N,sV:()=>D});var a=n(82897),s=n(19991),i=n(46804),r=n(65407),o=n(78689),l=n(23569),d=n(60158),c=n(54573),u=n(12322),h=n(12621),p=n(11178);const g=["text","type"];function m(e){const t=e.columns.map((e=>{const t=e,{text:n,type:a}=t,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,g);return{name:null!=n&&n.length?n:e,config:s||{},values:new l.G,type:a&&Object.values(o.fS).includes(a)?a:o.fS.other}}));if(!(0,a.isArray)(e.rows))throw new Error(`Expected table rows to be array, got ${typeof e.rows}.`);for(const n of e.rows)for(let e=0;e<t.length;e++)t[e].values.buffer.push(n[e]);for(const e of t)if(e.type===o.fS.other){const t=y(e);t&&(e.type=t)}return{fields:t,refId:e.refId,meta:e.meta,name:e.name,length:e.rows.length}}const f=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function v(e,t){return!e||"date"!==(e=e.toLowerCase())&&"time"!==e?x(t):o.fS.time}function b(e){return e instanceof Date||(0,s.v9)(e)?o.fS.time:(0,a.isNumber)(e)?o.fS.number:(0,a.isString)(e)?o.fS.string:(0,a.isBoolean)(e)?o.fS.boolean:o.fS.other}function x(e){return e instanceof Date||(0,s.v9)(e)?o.fS.time:(0,a.isNumber)(e)?o.fS.number:(0,a.isString)(e)?f.test(e)?o.fS.number:"true"===e||"TRUE"===e||"True"===e||"false"===e||"FALSE"===e||"False"===e?o.fS.boolean:o.fS.string:(0,a.isBoolean)(e)?o.fS.boolean:o.fS.other}function y(e){if(e.name){const t=e.name.toLowerCase();if("date"===t||"time"===t)return o.fS.time}for(let t=0;t<e.values.length;t++){const n=e.values.get(t);if(null!=n)return x(n)}}const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n of e.fields)if(!n.type||n.type===o.fS.other||t)return Object.assign({},e,{fields:e.fields.map((e=>e.type&&e.type!==o.fS.other&&!t?e:Object.assign({},e,{type:y(e)||o.fS.other})))});return e},j=e=>e&&e.hasOwnProperty("columns"),S=e=>e&&e.hasOwnProperty("fields");function C(e){var t,n;if("fields"in e)return"length"in e&&null!==(t=e.fields[0])&&void 0!==t&&null!==(n=t.values)&&void 0!==n&&n.get?e:new p.v(e);if(e.hasOwnProperty("type")&&"docs"===e.type)return function(e){const t=[{name:e.target,type:o.fS.other,labels:e.tags,config:{unit:e.unit,filterable:e.filterable},values:new l.G}];for(const n of e.datapoints)t[0].values.buffer.push(n);return{name:e.target,refId:e.target,meta:{json:!0},fields:t,length:e.datapoints.length}}(e);if(e.hasOwnProperty("datapoints")||e.hasOwnProperty("points"))return function(e){const t=[],n=[],a=e.datapoints||e.points;for(const e of a)n.push(e[0]),t.push(e[1]);const s=[{name:o.Ls,type:o.fS.time,config:{},values:new l.G(t)},{name:o.M5,type:o.fS.number,config:{unit:e.unit},values:new l.G(n),labels:e.tags}];return e.title&&(s[1].config.displayNameFromDS=e.title),{name:e.target||e.name,refId:e.refId,meta:e.meta,fields:s,length:n.length}}(e);if(e.hasOwnProperty("data"))return e.hasOwnProperty("schema")?(0,h.vP)(e):function(e){const t=new l.G,n=new l.G;for(let a=0;a<e.data.length;a++){const s=e.data[a];t.buffer.push(s[1]),n.buffer.push(s[0])}return{name:e.label,fields:[{name:e.label||o.M5,type:o.fS.number,config:{},values:t},{name:o.Ls,type:o.fS.time,config:{unit:"dateTimeAsIso"},values:n}],length:t.buffer.length}}(e);if(e.hasOwnProperty("columns"))return m(e);if(Array.isArray(e))return new u.i(e);throw console.warn("Can not convert",e),new Error("Unsupported data format")}const k=e=>{const{fields:t}=e,n=e.length,a=[];if(2===t.length){const{timeField:s,timeIndex:i}=D(e);if(s){const s=t[0===i?1:0],o=t[i];for(let e=0;e<n;e++)a.push([s.values.get(e),o.values.get(e)]);return{alias:e.name,target:(0,r.C)(s,e),datapoints:a,unit:t[0].config?t[0].config.unit:void 0,refId:e.refId,meta:e.meta}}}for(let e=0;e<n;e++){const n=[];for(let a=0;a<t.length;a++)n.push(t[a].values.get(e));a.push(n)}return e.meta&&e.meta.json?{alias:t[0].name||e.name,target:t[0].name||e.name,datapoints:t[0].values.toArray(),filterable:t[0].config?t[0].config.filterable:void 0,type:"docs"}:{columns:t.map((e=>{const{name:t,config:n}=e;if(n){const e=Object.assign({},n);return e.text=t,e}return{text:t}})),type:"table",refId:e.refId,meta:e.meta,rows:a}};function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=e.fields[t];if(!a)return e;const s=[];for(let t=0;t<e.length;t++)s.push(t);const r=(0,i.Mo)(a,n);return s.sort(r),Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{values:new d.o(e.values,s)})))})}function I(e){return Object.assign({},e,{fields:e.fields.map((e=>{const t=[...e.values.toArray()];return t.reverse(),Object.assign({},e,{values:new l.G(t)})}))})}function O(e,t){const n=[];for(const a of e.fields)n.push(a.values.get(t));return n}function N(e){return F(e)}function F(e,t){return{fields:(t?e.fields.filter(t):e.fields).map((e=>{let t=e.values.toArray();return t instanceof Float64Array&&(t=(0,c.n)(e.values)),{name:e.name,type:e.type,config:e.config,values:t,labels:e.labels}})),refId:e.refId,meta:e.meta,name:e.name}}const D=e=>{for(let t=0;t<e.fields.length;t++)if(e.fields[t].type===o.fS.time)return{timeField:e.fields[t],timeIndex:t};return{}}},79004:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>i,m$:()=>r});var a=n(86208),s=n(39056);function i(e){return!e.find((e=>!function(e){return!(e.fields.length>2)&&Boolean(e.fields.find((e=>e.type===a.fS.time)))}(e)))}function r(e){for(let t=0;t<e.length;t++){const n=(0,s.sV)(e[t]);if(void 0!==n.timeField&&void 0!==n.timeIndex)return!0}return!1}},76132:(e,t,n)=>{"use strict";n.d(t,{K:()=>i,Z:()=>r});var a=n(91921);let s=()=>a.Ys;const i=e=>{s=null!=e?e:s},r=e=>{var t,n;return null!==(t=null!==(n=null==e?void 0:e.timeZone)&&void 0!==n?n:s())&&void 0!==t?t:a.Ys}},36613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isMathString:()=>r,isValid:()=>l,parse:()=>o,parseDateMath:()=>d,roundToFiscal:()=>c});var a=n(82897),s=n(19991);const i=["y","M","w","d","h","m","s","Q"];function r(e){return!!e&&!("string"!=typeof e||"now"!==e.substring(0,3)&&!e.includes("||"))}function o(e,t,n,i){if(e){if("string"!=typeof e)return(0,s.v9)(e)?e:(0,a.isDate)(e)?(0,s.CQ)(e):void 0;{let a,r,o,l="";return"now"===e.substring(0,3)?(a=(0,s.GY)(n),l=e.substring("now".length)):(r=e.indexOf("||"),-1===r?(o=e,l=""):(o=e.substring(0,r),l=e.substring(r+2)),a=(0,s.CQ)(o,s.VJ)),l.length?d(l,a,t,i):a}}}function l(e){const t=o(e);return!!t&&(!!(0,s.v9)(t)&&t.isValid())}function d(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.replace(/\s/g,""),o=t;let l=0;const d=r.length;for(;l<d;){const e=r.charAt(l++);let t,d,u,h=!1;if("/"===e)t=0;else if("+"===e)t=1;else{if("-"!==e)return;t=2}if(isNaN(parseInt(r.charAt(l),10)))d=1;else if(2===r.length)d=parseInt(r.charAt(l),10);else{const e=l;for(;!isNaN(parseInt(r.charAt(l),10));)if(l++,l>10)return;d=parseInt(r.substring(e,l),10)}if(0===t&&1!==d)return;if(u=r.charAt(l++),"f"===u&&(u=r.charAt(l++),h=!0),!(0,a.includes)(i,u))return;0===t?n?h?c(s,o,u,n):o.endOf(u):h?c(s,o,u,n):o.startOf(u):1===t?o.add(d,u):2===t&&o.subtract(d,u)}return o}function c(e,t,n,a){switch(n){case"y":return a?c(e,t,n,!1).add(11,"M").endOf("M"):t.subtract((t.month()-e+12)%12,"M").startOf("M"),t;case"Q":return a?c(e,t,n,!1).add(2,"M").endOf("M"):t.subtract((t.month()-e+3)%3,"M").startOf("M"),t;default:return}}},36865:(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Ji:()=>r,U6:()=>o,zf:()=>i});const s="YYYY-MM-DD HH:mm:ss";class i{constructor(){a(this,"fullDate",s),a(this,"fullDateMS","YYYY-MM-DD HH:mm:ss.SSS"),a(this,"interval",{millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"})}update(e){this.fullDate=e.fullDate,this.interval=e.interval,e.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=r({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=r({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=r({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=r({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=r({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=r({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(e){return`time:${e?this.fullDateMS:this.fullDate}`}}function r(e,t,n){if(l())return null!=n?n:s;!t&&navigator&&(t=[...navigator.languages]);const a=new Intl.DateTimeFormat(t||void 0,e),i=a.formatToParts(new Date),r={year:"YYYY",month:"MM",day:"DD",hour:a.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return i.map((e=>r[e.type]||e.value)).join("")}const o=new i,l=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},82858:(e,t,n)=>{"use strict";n.d(t,{E8:()=>d,Fm:()=>c,Hk:()=>u,dq:()=>o,lf:()=>l});var a=n(35853),s=n.n(a),i=n(76132),r=n(36865);const o=(e,t)=>p(e,(0,i.Z)(t)).format(h(t)),l=(e,t)=>p(e,(0,i.Z)(t)).format(),d=(e,t)=>p(e,(0,i.Z)(t)).fromNow(),c=(e,t)=>p(e,(0,i.Z)(t)).format(`${r.U6.fullDate} z`),u=(e,t)=>p(e,(0,i.Z)(t)).format("z"),h=e=>{var t,n;return null!=e&&e.defaultWithMS?null!==(n=null==e?void 0:e.format)&&void 0!==n?n:r.U6.fullDateMS:null!==(t=null==e?void 0:e.format)&&void 0!==t?t:r.U6.fullDate},p=(e,t)=>{const n=e,a=s().tz.zone(t);return a&&a.name?s().utc(n).tz(a.name):"utc"===t?s().utc(n):s().utc(n).local()}},93349:(e,t,n)=>{"use strict";n.d(t,{Nz:()=>d.DateTimeOptions,VJ:()=>i.VJ,RQ:()=>c,zf:()=>x.zf,qb:()=>d.TimeZoneResolver,Ks:()=>I,Rn:()=>a,CQ:()=>i.CQ,C_:()=>i.C_,GY:()=>i.GY,dq:()=>y.dq,lf:()=>y.lf,E8:()=>y.E8,Fm:()=>y.Fm,J:()=>w.J,iX:()=>O,Kd:()=>i.Kd,k4:()=>i.k4,Ze:()=>d.Z,$8:()=>g,Pr:()=>h,ZV:()=>p,ig:()=>i.ig,jN:()=>i.jN,vT:()=>k,v9:()=>i.v9,AI:()=>N,jO:()=>F,IA:()=>D,Ji:()=>x.Ji,RA:()=>T,cT:()=>s,i_:()=>i.i_,K7:()=>d.K,Ls:()=>i.Ls,U6:()=>x.U6,Hk:()=>y.Hk,Vs:()=>u,np:()=>i.Ks,zh:()=>i.zh});var a=n(36613),s=n(52106),i=n(19991),r=n(82897),o=n(35853),l=n.n(o),d=n(76132);let c;!function(e){e.default="",e.localBrowserTime="browser",e.utc="utc"}(c||(c={}));const u=e=>{switch((0,d.Z)({timeZone:e})){case"browser":return"Local browser time";case"utc":return"UTC";default:return e}},h=(e,t)=>{const n=m(e,t);return n||f(e,t)},p=(0,r.memoize)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return!0===e?t.push(c.default,c.localBrowserTime,c.utc):e&&t.push(...e),l().tz.names().reduce(((e,t)=>{const n=b[t];return Array.isArray(n)&&0!==n.length?(e.push(t),e):e}),t)})),g=(0,r.memoize)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=p(e),n=t.reduce(((e,t)=>{var n;const a=t.indexOf("/");if(-1===a){var s;const n="";return e[n]=null!==(s=e[n])&&void 0!==s?s:[],e[n].push(t),e}const i=t.slice(0,a);return e[i]=null!==(n=e[i])&&void 0!==n?n:[],e[i].push(t),e}),{});return Object.keys(n).map((e=>({name:e,zones:n[e]})))})),m=(e,t)=>{switch(e){case c.utc:return{name:"Coordinated Universal Time",ianaName:"UTC",zone:e,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case c.default:{var n,a;const s=(0,d.Z)(),i=null!==(n="browser"===s||"utc"===s?m(s,t):f(s,t))&&void 0!==n?n:{};return Object.assign({countries:null!==(a=b[s])&&void 0!==a?a:[],abbreviation:"",offsetInMins:0},i,{ianaName:i.ianaName,name:"Default",zone:e})}case c.localBrowserTime:{var s,i;const n=l().tz.guess(!0),a=null!==(s=f(n,t))&&void 0!==s?s:{};return Object.assign({countries:null!==(i=b[n])&&void 0!==i?i:[],abbreviation:"Your local time",offsetInMins:(new Date).getTimezoneOffset()},a,{name:"Browser Time",ianaName:a.ianaName,zone:e})}default:return}},f=(e,t)=>{var n;const a=l().tz.zone(e);var s;if(a)return{name:e,ianaName:a.name,zone:e,countries:null!==(n=b[e])&&void 0!==n?n:[],abbreviation:(s=a.abbr(t),/^(\+|\-).+/.test(s)?"":s),offsetInMins:a.utcOffset(t)}},v={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},b=l().tz.countries().reduce(((e,t)=>l().tz.zonesForCountry(t).reduce(((e,n)=>{e[n]||(e[n]=[]);const a=v[t];return a?(e[n].push({code:t,name:a}),e):e}),e)),{});var x=n(36865),y=n(82858),w=n(64230),j=n(77183),S=n(76200);const C={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function k(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,S.Z)(e);return Object.entries(n).reduce(((e,n)=>{let[a,s]=n;if(s&&0!==s&&("seconds"!==a||t||!e)){return e+`${""!==e?" ":""}${s}${C[a][0]}`}return e}),"")}function T(e){return e.split(" ").reduce(((e,t)=>{const n=t.match(/(\d+)(.+)/),a=null==n?void 0:n[1],s=null==n?void 0:n[2];if(!a||!s)return e;const i=Object.entries(C).find((e=>{let[t,a]=e;return null==a?void 0:a.includes(n[2])})),r=parseInt(a,10);return i?Object.assign({},e,{[i[0]]:r}):e}),{})}function I(e,t){return(0,j.Z)(e,t)}function O(e){const t=new Date;return I(t,e).getTime()-t.getTime()}function N(e){return!isNaN(Date.parse(e))}function F(e){for(const n of e.trim().split(" ")){var t;const e=n.match(/(\d+)(.+)/);if(null===e||3!==e.length)return!1;if(!(null===(t=Object.entries(C).find((t=>{let[n,a]=t;return null==a?void 0:a.includes(e[2])})))||void 0===t?void 0:t[0]))return!1}return!0}function D(e){const t=["h","m","s","ms","us","Âµs","ns"];for(const n of e.trim().split(" ")){const e=n.match(/([0-9]*[.]?[0-9]+)(.+)/);if(null===e||3!==e.length)return!1;if(!t.includes(e[2]))return!1}return!0}},19991:(e,t,n)=>{"use strict";n.d(t,{CQ:()=>h,C_:()=>p,GY:()=>g,Kd:()=>o,Ks:()=>u,Ls:()=>v,VJ:()=>i,i_:()=>r,ig:()=>m,jN:()=>f,k4:()=>l,v9:()=>d,zh:()=>c});var a=n(36365),s=n.n(a);const i=s().ISO_8601,r=e=>{s().locale(e)},o=()=>s().locale(),l=()=>s().localeData(),d=e=>s().isMoment(e),c=(e,t)=>s().utc(e,t),u=(e,t)=>s().duration(e,t),h=(e,t)=>s()(e,t),p=e=>h(e),g=(e,t,n)=>"utc"===e?c(t,n):h(t,n),m=e=>s().weekdays().findIndex((t=>t.toLowerCase()===e.toLowerCase())),f=e=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex((t=>t.toLowerCase()===e.toLowerCase())),v=e=>{const t="-weekStart",n=o().replace(t,""),a=e?f(e):-1;-1!==a?s().locale(n+t,{parentLocale:n,week:{dow:a}}):r(n)}},52106:(e,t,n)=>{"use strict";n.r(t),n.d(t,{calculateInterval:()=>y,convertRawToRange:()=>g,describeInterval:()=>S,describeTextRange:()=>c,describeTimeRange:()=>u,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>k,intervalToSeconds:()=>C,isFiscal:()=>f,isRelativeTimeRange:()=>v,isValidTimeSpan:()=>h,msRangeToTimeString:()=>x,relativeToTimeRange:()=>O,roundInterval:()=>T,secondsToHms:()=>b,timeRangeToRelative:()=>I});var a=n(82897),s=n(36613),i=n(82858),r=n(19991),o=n(64230);const l={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},d={};function c(e){const t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);let n=d[e+" to now"];if(n)return n;n=t?{from:e,to:"now"}:{from:"now",to:e};const a=/^now([-+])(\d+)(\w)/.exec(e);if(a){const e=a[3],s=parseInt(a[2],10),i=l[e];i&&(n.display=t?"Last ":"Next ",n.display+=s+" "+i.display,n.section=i.section,s>1&&(n.display+="s"))}else n.display=n.from+" to "+n.to,n.invalid=!0;return n}function u(e,t){const n=d[e.from.toString()+" to "+e.to.toString()];if(n)return n.display;const a={timeZone:t};if((0,r.v9)(e.from)&&(0,r.v9)(e.to))return(0,i.dq)(e.from,a)+" to "+(0,i.dq)(e.to,a);if((0,r.v9)(e.from)){const t=s.parse(e.to,!0,"utc");return t?(0,i.dq)(e.from,a)+" to "+(0,i.E8)(t,a):""}if((0,r.v9)(e.to)){const t=s.parse(e.from,!1,"utc");return t?(0,i.E8)(t,a)+" to "+(0,i.dq)(e.to,a):""}if("now"===e.to.toString()){return c(e.from).display}return e.from.toString()+" to "+e.to.toString()}(0,a.each)([{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],(e=>{d[e.from+" to "+e.to]=e})),(0,a.each)([{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],(e=>{d[e.from+" to "+e.to]=e}));const h=e=>{if(0===e.indexOf("$")||0===e.indexOf("+$"))return!0;return!0!==c(e).invalid},p=(e,t)=>{if((0,r.v9)(e.from))return(0,i.Hk)(e.from,{timeZone:t});const n=s.parse(e.from,!0);return n?(0,i.Hk)(n,{timeZone:t}):""},g=(e,t,n)=>{const a=(0,o.J)(e.from,{roundUp:!1,timeZone:t,fiscalYearStartMonth:n}),i=(0,o.J)(e.to,{roundUp:!0,timeZone:t,fiscalYearStartMonth:n});return s.isMathString(e.from)||s.isMathString(e.to)?{from:a,to:i,raw:e}:{from:a,to:i,raw:{from:a,to:i}}};function m(e){return"string"==typeof e&&e.indexOf("now")>=0}function f(e){return"string"==typeof e.raw.from&&e.raw.from.indexOf("f")>0||"string"==typeof e.raw.to&&e.raw.to.indexOf("f")>0}function v(e){return m(e.from)||m(e.to)}function b(e){const t=Math.floor(e/31536e3);if(t)return t+"y";const n=Math.floor(e%31536e3/86400);if(n)return n+"d";const a=Math.floor(e%31536e3%86400/3600);if(a)return a+"h";const s=Math.floor(e%31536e3%86400%3600/60);if(s)return s+"m";const i=Math.floor(e%31536e3%86400%3600%60);if(i)return i+"s";const r=Math.floor(1e3*e);return r?r+"ms":"less than a millisecond"}function x(e){const t=Number((e/1e3).toFixed()),n=Math.floor(t/60/60),a=Math.floor(t/60)-60*n,s=Number((t%60).toFixed());let i=n?n+"h":"",r=a?a+"min":"",o=s?s+"sec":"";return i&&r?i+=" ":i=i,(r||i)&&o?r+=" ":r=r,i+r+o||"less than 1sec"}function y(e,t,n){let a=1;n&&(a=k(n));let s=T((e.to.valueOf()-e.from.valueOf())/t);return a>s&&(s=a),{intervalMs:s,interval:b(s/1e3)}}const w=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,j={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function S(e){if(Number(e))return{sec:j.s,type:"s",count:parseInt(e,10)};const t=e.match(w);if(!t||!(0,a.has)(j,t[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(j).join(", ")}"`);return{sec:j[t[2]],type:t[2],count:parseInt(t[1],10)}}function C(e){const t=S(e);return t.sec*t.count}function k(e){const t=S(e);return 1e3*t.sec*t.count}function T(e){switch(!0){case e<10:return 1;case e<15:return 10;case e<35:return 20;case e<75:return 50;case e<150:return 100;case e<350:return 200;case e<750:return 500;case e<1500:return 1e3;case e<3500:return 2e3;case e<7500:return 5e3;case e<12500:return 1e4;case e<17500:return 15e3;case e<25e3:return 2e4;case e<45e3:return 3e4;case e<9e4:return 6e4;case e<21e4:return 12e4;case e<45e4:return 3e5;case e<75e4:return 6e5;case e<105e4:return 9e5;case e<15e5:return 12e5;case e<27e5:return 18e5;case e<54e5:return 36e5;case e<9e6:return 72e5;case e<162e5:return 108e5;case e<324e5:return 216e5;case e<864e5:return 432e5;case e<6048e5:return 864e5;case e<18144e5:return 6048e5;case e<36288e5:return 2592e6;default:return 31536e6}}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.CQ)();const n=t.unix()-e.from.unix(),a=t.unix()-e.to.unix();return{from:n,to:a}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.CQ)();const n=(0,r.CQ)(t).subtract(e.from,"s"),a=0===e.to?(0,r.CQ)(t):(0,r.CQ)(t).subtract(e.to,"s");return{from:n,to:a,raw:{from:n,to:a}}}},99012:(e,t,n)=>{"use strict";n.d(t,{U:()=>h,g:()=>g});var a=n(82897),s=n(39056),i=n(93349),r=n(86208),o=n(11449),l=n(4231),d=n(51130),c=n(36845);const u={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function h(e){var t;if(!e||(0,a.isEmpty)(e)||!e.field)return p;const n=e.field,s=null!==(t=n.config)&&void 0!==t?t:{};let h=s.unit,g=h&&(u[h]||h.startsWith("time:")),m=!1;if(n.type!==r.fS.time||g)n.type===r.fS.boolean?(0,d.br)(h)||(h="bool"):h||n.type!==r.fS.string||(h="string");else if(h="dateTimeAsSystem",g=!0,n.values&&n.values.length>1){let e=n.values.get(0),t=n.values.get(n.values.length-1);"string"==typeof e?(e=(0,i.J)(e).unix(),t=(0,i.J)(t).unix()):(e/=1e3,t/=1e3),m=Math.abs(t-e)<60}const f=(0,d.Cf)(h||"none"),v=(0,c.NI)(n,e.theme);return(t,n)=>{const{mappings:r}=s,d="string"===h;g&&"string"==typeof t&&(t=(0,i.zh)(t).valueOf());let c,u,p,b,x,y,w=d?NaN:(0,o.I)(t);if(r&&r.length>0){const n=(0,l.vh)(r,t);n&&(null!=n.text&&(c=n.text),null!=n.color&&(b=e.theme.visualization.getColorByName(n.color)),null!=n.icon&&(x=n.icon))}if(!isNaN(w)){if(null==c&&!(0,a.isBoolean)(t)){const t=f(w,null!=n?n:s.decimals,null,e.timeZone,m);c=t.text,p=t.suffix,u=t.prefix}if(null==b){const e=v(w);b=e.color,y=e.percent}}if(null==c&&(0,a.isArray)(t)&&(c=(0,a.join)(t,", ")),null==c&&(c=(0,a.toString)(t),c||(c=s.noValue?s.noValue:"")),!b){const e=v(-1/0);b=e.color,y=e.percent}const j={text:c,numeric:w,prefix:u,suffix:p,color:b};return null!=x&&(j.icon=x),null!=y&&(j.percent=y),j}}function p(e){return{text:(0,a.toString)(e),numeric:(0,o.I)(e)}}function g(){return e=>({text:"other"===(0,s.DP)(e)?`${JSON.stringify(e,m())}`:`${e}`,numeric:null})}const m=()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}}},92010:(e,t,n)=>{"use strict";n.d(t,{QY:()=>p,WO:()=>c,YO:()=>g,fD:()=>h});var a=n(25996),s=n(92809),i=n(78689),r=n(94956),o=n(36845),l=n(90244);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=new r.B((()=>[{id:i.Sc.Fixed,name:"Single color",description:"Set a specific color",getCalculator:m},{id:i.Sc.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(e,t)=>(e,n,a)=>{const s=null!=a?a:l.yM;return t.visualization.getColorByName(s.color)}},new u({id:i.Sc.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:e=>e.visualization.palette}),new u({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["green","yellow","red"]}),new u({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:e=>["red","yellow","green"]}),new u({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-red"]}),new u({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:e=>["blue","purple"]}),new u({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-blue"]}),new u({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-blue"]}),new u({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-red"]}),new u({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-green"]}),new u({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-purple"]})]));class u{constructor(e){d(this,"id",void 0),d(this,"name",void 0),d(this,"description",void 0),d(this,"isContinuous",void 0),d(this,"isByValue",void 0),d(this,"colorCache",void 0),d(this,"colorCacheTheme",void 0),d(this,"interpolator",void 0),d(this,"getNamedColors",void 0),this.id=e.id,this.name=e.name,this.description=e.description,this.getNamedColors=e.getColors,this.isContinuous=e.isContinuous,this.isByValue=e.isByValue}getColors(e){return this.getNamedColors?(this.colorCache&&this.colorCacheTheme===e||(this.colorCache=this.getNamedColors(e).map(e.visualization.getColorByName),this.colorCacheTheme=e),this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,a.hD)(this.colorCache)),this.interpolator}getCalculator(e,t){const n=this.getColors(t);return this.isByValue?this.isContinuous?(e,t,n)=>this.getInterpolator()(t):(e,t,a)=>n[t*(n.length-1)]:(t,a,s)=>{var i,r;const o=null!==(i=null===(r=e.state)||void 0===r?void 0:r.seriesIndex)&&void 0!==i?i:0;return n[o%n.length]}}}function h(e){var t,n;return c.get(null!==(t=null===(n=e.config.color)||void 0===n?void 0:n.mode)&&void 0!==t?t:i.Sc.Thresholds)}function p(e){return c.get(null!=e?e:i.Sc.Thresholds)}function g(e,t){var n,a,i;const r=h(e);if(!r.isByValue)return{color:r.getCalculator(e,t)(0,0),threshold:l.yM,percent:1};const d=(0,o.NI)(e,t),c=null!==(n=null===(a=e.config.color)||void 0===a?void 0:a.seriesBy)&&void 0!==n?n:"last";return d(null!==(i=(0,s.Kx)({field:e,reducers:[c]})[c])&&void 0!==i?i:0)}function m(e,t){return()=>{var n,a;return t.visualization.getColorByName(null!==(n=null===(a=e.config.color)||void 0===a?void 0:a.fixedColor)&&void 0!==n?n:i.R3)}}},4661:(e,t,n)=>{"use strict";n.d(t,{SM:()=>x,Of:()=>T,Xu:()=>b,gb:()=>C});var a=n(82897),s=n(64421),i=n(39056),r=n(23457),o=n(29264),l=n(78689),d=n(92299),c=n(87102),u=n(57595),h=n(99012),p=n(65407),g=n(33932),m=n(89558),f=n(14557);function v(e,t,n){return new Proxy({},{get:(a,s,i)=>"name"===s?e.name:"displayName"===s?(0,p.C)(e,t,n):"labels"===s||"formattedLabels"===s?e.labels?Object.assign({},e.labels,{__values:Object.values(e.labels).sort().join(", "),toString:()=>(0,f.aA)(e.labels,"",!0)}):"":void 0})}function b(e){var t,n;let a=null,s=null;const i=[o.gz.min,o.gz.max];for(const t of e)for(const e of t.fields)if(e.type===l.fS.number){const t=(0,o.Kx)({field:e,reducers:i}),n=t[o.gz.min],r=t[o.gz.max];(null===a||n<a)&&(a=n),(null===s||r>s)&&(s=r)}return{min:a,max:s,delta:(null!==(t=s)&&void 0!==t?t:0)-(null!==(n=a)&&void 0!==n?n:0)}}function x(e){var t;if(!e.data)return[];const n=e.fieldConfig;if(!n)return e.data;const i=null!==(t=e.fieldConfigRegistry)&&void 0!==t?t:m.N;let r,d=0;const c=[];if(n.overrides)for(const e of n.overrides){const t=o.Ls.get(e.matcher.id);t&&c.push({match:t.get(e.matcher.options),properties:e.properties})}return e.data.map(((t,o)=>{const u=Object.assign({},t);u.fields=u.fields.map((e=>Object.assign({},e,{config:(0,a.cloneDeep)(e.config),state:Object.assign({},e.state)})));const g={__series:{text:"Series",value:{name:(0,p.n)(u,o)}}};for(const t of u.fields){const p=t.config;t.state.scopedVars=Object.assign({},g,{__field:{text:"Field",value:v(t,u,e.data)}});const x={field:t,data:e.data,dataFrameIndex:o,replaceVariables:e.replaceVariables,fieldConfigRegistry:i};j(p,n.defaults,x);for(const n of c)if(n.match(t,u,e.data))for(const e of n.properties)w(p,e,x);let S,C=t.type;if(!C||C===l.fS.other){const e=(0,s.fu)(t);e&&(C=e)}if(t.type===l.fS.number){var m,f;r||(0,a.isNumber)(p.min)&&(0,a.isNumber)(p.max)||(r=b(e.data));const t=null!==(m=p.min)&&void 0!==m?m:r.min,n=null!==(f=p.max)&&void 0!==f?f:r.max;S={min:t,max:n,delta:n-t}}t.state.seriesIndex=d,t.state.range=S,t.type=C,t.type!==l.fS.time&&d++,t.display=(0,h.U)({field:t,theme:e.theme,timeZone:e.timeZone}),"dateTimeFromNow"!==t.config.unit&&(t.display=y(t.display,2500)),t.getLinks=k(u,t,t.state.scopedVars,x.replaceVariables,e.timeZone)}return u}))}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;const n=new Map;for(let e=-1;e<=15;e++)n.set(e,new Map);return(a,s)=>{let i=n.get(null!=s?s:-1),o=i.get(a);return o||(i.size===t&&i.clear(),o=e(a,s),o.color&&(o.color=(0,r.asHexString)(o.color)),i.set(a,o)),o}}function w(e,t,n){const s=n.fieldConfigRegistry.getIfExists(t.id);if(!s)return;const i=s.process(t.value,n,s.settings);null==i?s.isCustom&&e.custom?(0,a.unset)(e.custom,s.path):(0,a.unset)(e,s.path):s.isCustom?(e.custom||(e.custom={}),(0,a.set)(e.custom,s.path,i)):(0,a.set)(e,s.path,i)}function j(e,t,n){for(const a of n.fieldConfigRegistry.list())a.isCustom&&!e.custom&&(e.custom={}),S(a.isCustom?e.custom:e,a.isCustom?t.custom:t,a,n);C(e)}function S(e,t,n,s){const i=(0,a.get)(e,n.path);if(null==i){const i=s.fieldConfigRegistry.getIfExists(n.id);if(!i)return;if(i&&i.shouldApply(s.field)){const n=i.process((0,a.get)(t,i.path),s,i.settings);null!=n&&(0,a.set)(e,i.path,n)}}}function C(e){const{thresholds:t}=e;if(e.color?e.color.mode||delete e.color:t&&(e.color={mode:l.Sc.Thresholds}),e.hasOwnProperty("min")&&e.hasOwnProperty("max")&&e.min>e.max){const t=e.max;e.max=e.min,e.min=t}}const k=(e,t,n,a,s)=>r=>{if(!t.config.links||0===t.config.links.length)return[];const o=d.uT.getTimeRangeUrlParams(),{timeField:l}=(0,i.sV)(e);return t.config.links.map((i=>{const h=d.uT.getVariablesUrlParams();let p={},m={};if(void 0===r.valueRowIndex||isNaN(r.valueRowIndex))r.calculatedValue&&(m={raw:r.calculatedValue.numeric,numeric:r.calculatedValue.numeric,text:(0,u.zc)(r.calculatedValue)});else{const n=(0,g.z)({frame:e,rowIndex:r.valueRowIndex,timeZone:s});m={raw:t.values.get(r.valueRowIndex),numeric:n[t.name].numeric,text:n[t.name].text,time:l?l.values.get(r.valueRowIndex):void 0},p={__data:{value:{name:e.name,refId:e.refId,fields:n},text:"Data"}}}const f=Object.assign({},n,{__value:{text:"Value",value:m}},p,{[d.WC.keepTime]:{text:o,value:o},[d.WC.includeVars]:{text:h,value:h}});if(i.onClick)return{href:i.url,title:a(i.title||"",f),target:i.targetBlank?"_blank":void 0,onClick:(e,n)=>{i.onClick({origin:null!=n?n:t,e,replaceVariables:e=>a(e,f)})},origin:t};if(i.internal)return(0,c._)({link:i,internalLink:i.internal,scopedVars:f,field:t,range:{},replaceVariables:a});let v=d.uT.assureBaseUrl(i.url.replace(/\n/g,""));v=a(v,f),v=d.uT.processUrl(v);return{href:v,title:a(i.title||"",f),target:i.targetBlank?"_blank":void 0,origin:t}}))};function T(e){if(!e||0===e.length)return[];const t=[...e],n=(0,h.g)();for(let e=0;e<t.length;e++){const a=Object.assign({},t[e]),s=[...a.fields];for(let e=0;e<s.length;e++)s[e]=Object.assign({},s[e],{display:n});t[e]=Object.assign({},a,{fields:s})}return t}},33932:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var a=n(82897),s=n(57595),i=n(99012);function r(e){return new Proxy({},{get:(t,n)=>{var r;let o=e.frame.fields.find((e=>n===e.name));if(!o){const t=(0,a.toNumber)(n);o=e.frame.fields[t]}if(o||(o=e.frame.fields.find((e=>n===e.config.displayName))),o||(o=e.frame.fields.find((e=>!!e.labels&&n===e.labels.name))),!o)return;const l=(null!==(r=o.display)&&void 0!==r?r:(0,i.U)())(o.values.get(e.rowIndex));return l.toString=()=>(0,s.zc)(l),l}})}},22754:(e,t,n)=>{"use strict";n.d(t,{cB:()=>v,WI:()=>T.FieldColorMode,ZD:()=>I.Z,pZ:()=>m,dE:()=>f,E1:()=>g,n_:()=>p,HU:()=>h,SM:()=>N.SM,Of:()=>N.Of,W4:()=>k.W4,NN:()=>k.NN,W0:()=>k.W0,WO:()=>T.WO,m1:()=>O.m1,U_:()=>c.U,sg:()=>S,QY:()=>T.QY,fD:()=>T.fD,xD:()=>D.xD,CZ:()=>u.C,nG:()=>b,zv:()=>F.z,YO:()=>T.YO,nf:()=>u.n,gE:()=>c.g,NI:()=>D.NI,gG:()=>j,kG:()=>k.kG,Oh:()=>k.Oh,AE:()=>k.AE,bP:()=>O.bP,SO:()=>C.S,N6:()=>C.N,op:()=>k.op,ZN:()=>k.ZN,VB:()=>k.VB,gb:()=>N.gb,uj:()=>k.uj});var a=n(82897),s=n(98175),i=n(39056),r=n(29264),o=n(92809),l=n(14054),d=n(78689),c=n(99012),u=n(65407);const h="__series.name",p="__field.displayName",g="__field.labels",m="__calc",f="__cell_",v=25,b=e=>{var t;const{replaceVariables:n,reduceOptions:h,timeZone:p,theme:g}=e,b=h.calcs.length?h.calcs:[o.gz.last],S=[],C=(0,r.sq)(h.fields?{id:l.mi.byRegexp,options:h.fields}:{id:l.mi.numeric}),k=null!==(t=e.data)&&void 0!==t?t:[],T=h.limit?h.limit:v,I={};let O=!1;for(let t=0;t<k.length&&!O;t++){const r=k[t],{timeField:l}=(0,i.sV)(r),d=new s.U(r);for(let t=0;t<r.fields.length&&!O;t++){var N,F,D;const s=r.fields[t],i=s.getLinks;if(!C(s,r,k))continue;let v=s.config;var P;if(null!==(N=s.state)&&void 0!==N&&N.range)v=Object.assign({},v,null===(P=s.state)||void 0===P?void 0:P.range);const M=null!==(F=s.config.displayName)&&void 0!==F?F:"",R=null!==(D=s.display)&&void 0!==D?D:(0,c.U)({field:s,theme:e.theme,timeZone:p});if(h.values){const o=M.indexOf(f)>=0;for(let l=0;l<s.values.length;l++){if(o)for(let e=0;e<r.fields.length;e++){const t=r.fields[e].values.get(l);I[f+e]={value:t,text:(0,a.toString)(t)}}s.state=y(s,S.length);const c=R(s.values.get(l)),u=x(r,s,l,n,I),h=w(u,e.fieldConfig,g);if(S.push({name:"",field:v,display:Object.assign({},c,{title:u,color:null!=h?h:c.color}),view:d,colIndex:t,rowIndex:l,getLinks:i?()=>i({valueRowIndex:l}):()=>[],hasLinks:j(s)}),S.length>=T){O=!0;break}}}else{const a=(0,o.Kx)({field:s,reducers:b});for(const c of b){I[m]={value:c,text:c};const h=R(a[c]);var A;if(""!==M)h.title=n(M,Object.assign({},null===(A=s.state)||void 0===A?void 0:A.scopedVars,I));else h.title=(0,u.C)(s,r,k);let p;e.sparkline&&(p={y:r.fields[t],x:l},c===o.gz.last?p.highlightIndex=p.y.values.length-1:c===o.gz.first&&(p.highlightIndex=0)),S.push({name:c,field:v,display:h,sparkline:p,view:d,colIndex:t,getLinks:i?()=>i({calculatedValue:h}):()=>[],hasLinks:j(s)})}}}}return 0===S.length&&S.push(function(e){var t,n;const s="No data",{fieldConfig:i,timeZone:r}=e,{defaults:o}=i,l=(0,c.U)({field:{type:d.fS.other,config:o},theme:e.theme,timeZone:r})(null),u=function(e,t){if(!e||(0,a.isEmpty)(e.text))return t;return e.text}(l,s);return{name:s,field:Object.assign({},o,{max:null!==(t=o.max)&&void 0!==t?t:0,min:null!==(n=o.min)&&void 0!==n?n:0}),display:{text:u,numeric:0,color:l.color},hasLinks:!1}}(e)),S};function x(e,t,n,a,s){let i=[],r=0;var o;if(t.config.displayName)return a(t.config.displayName,Object.assign({},null===(o=t.state)||void 0===o?void 0:o.scopedVars,s));for(const a of e.fields)if(a!==t)if(a.type===d.fS.string){var l;const e=null!==(l=a.values.get(n))&&void 0!==l?l:"",t=a.display?a.display(e).text:e;t.length>0&&i.push(t)}else a.type===d.fS.number&&r++;return(r||0===i.length)&&i.push((0,u.C)(t,e)),i.join(" ")}function y(e,t){return Object.assign({},e.state,{seriesIndex:t})}function w(e,t,n){for(const a of t.overrides)if("byName"===a.matcher.id&&a.matcher.options===e)for(const e of a.properties)if("color"===e.id&&e.value)return n.visualization.getColorByName(e.value.fixedColor);return null}function j(e){var t,n;return!(null===(t=e.config)||void 0===t||null===(n=t.links)||void 0===n||!n.length)&&e.config.links.length>0}function S(e){const t={title:"",text:""};let n=0,a=0;for(let s=0;s<e.length;s++){const i=e[s].display;i.text&&i.text.length>t.text.length&&(t.text=i.text),i.title&&i.title.length>t.title.length&&(t.title=i.title),i.prefix&&i.prefix.length>n&&(t.prefix=i.prefix,n=i.prefix.length),i.suffix&&i.suffix.length>a&&(t.suffix=i.suffix,a=i.suffix.length)}return t}var C=n(89558),k=n(91142),T=n(92010),I=n(23227),O=n(90244),N=n(4661),F=n(33932),D=n(36845)},91142:(e,t,n)=>{"use strict";n.d(t,{AE:()=>l,NN:()=>r,Oh:()=>s,VB:()=>u,W0:()=>i,W4:()=>h,ZN:()=>c,kG:()=>a,op:()=>d,uj:()=>o});const a=(e,t,n)=>e,s=(e,t,n)=>{if(null!=e)return parseFloat(e)},i=(e,t,n)=>{var a,s;return null===(a=t.field)||void 0===a||(null===(s=a.state)||void 0===s||delete s.displayName),d(e,t,n)},r=(e,t,n)=>e,o=(e,t,n)=>e,l=(e,t,n)=>e,d=(e,t,n)=>null==e?e:n&&n.expandTemplateVars&&t.replaceVariables?t.replaceVariables(e,t.field.state.scopedVars):`${e}`,c=(e,t,n)=>e,u=(e,t,n)=>e,h=(e,t,n)=>e},36845:(e,t,n)=>{"use strict";n.d(t,{NI:()=>l,dz:()=>d,xD:()=>c});var a=n(82897),s=n(92809),i=n(78689),r=n(92010),o=n(90244);function l(e,t){var n,a;if(e.type===i.fS.boolean)return function(e,t){const n={color:t.visualization.getColorByName("green"),percent:1,threshold:void 0},a={color:t.visualization.getColorByName("red"),percent:0,threshold:void 0},s=(0,r.fD)(e);if(s.isContinuous&&s.getColors){const e=s.getColors(t);n.color=e[e.length-1],a.color=e[0]}return e=>Boolean(e)?n:a}(e,t);const s=(0,r.fD)(e).getCalculator(e,t),l=null!==(n=null===(a=e.state)||void 0===a?void 0:a.range)&&void 0!==n?n:d(e);return t=>{let n=0;t!==-1/0&&(n=(t-l.min)/l.delta,Number.isNaN(n)&&(n=0));const a=(0,o.pD)(e,t,n);return{percent:n,threshold:a,color:s(t,n,a)}}}function d(e){if(e.type!==i.fS.number)return{min:0,max:100,delta:100};let t=e.config.min,n=e.config.max;if(!(0,a.isNumber)(t)||!(0,a.isNumber)(n))if(e.values&&e.values.length){const i=(0,s.Kx)({field:e,reducers:[s.gz.min,s.gz.max]});(0,a.isNumber)(t)||(t=i[s.gz.min]),(0,a.isNumber)(n)||(n=i[s.gz.max])}else t=0,n=100;return{min:t,max:n,delta:n-t}}function c(e,t){var n;const{config:s}=e;let{min:i,max:r}=s;return(0,a.isNumber)(i)&&(0,a.isNumber)(r)?s:t||null===(n=e.state)||void 0===n||!n.range?Object.assign({},s,d(e)):Object.assign({},s,e.state.range)}},89558:(e,t,n)=>{"use strict";n.d(t,{N:()=>s,S:()=>i});var a=n(94956);const s=new(n(23227).Z),i=new a.B},90244:(e,t,n)=>{"use strict";n.d(t,{bP:()=>o,m1:()=>i,pD:()=>r,yM:()=>s});var a=n(78689);const s={value:0,color:a.R3};function i(e,t){if(!t||0===t.length)return s;let n=t[0];for(const a of t){if(!(e>=a.value))break;n=a}return n}function r(e,t,n){const{thresholds:s}=e.config;return(null==s?void 0:s.mode)===a.H3.Percentage?i(100*n,null==s?void 0:s.steps):i(t,null==s?void 0:s.steps)}function o(e){return e.sort(((e,t)=>e.value-t.value))}},43215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractLabelOperator:()=>r.K2,AlertState:()=>r.Z9,AnnotationChangeEvent:()=>I,AnnotationEventFieldSource:()=>r.Lj,AppEvents:()=>r.SI,AppPlugin:()=>r.k8,AppendedVectors:()=>o.l$,ArrayDataFrame:()=>l.iB,ArrayVector:()=>o.Gt,AsNumberVector:()=>o.sq,BasicValueMatcherOptions:()=>P.hM,BinaryOperationID:()=>i.LH,BinaryOperationVector:()=>o.rM,BootData:()=>r.Yu,BuildInfo:()=>r.SP,BusEventBase:()=>m.m,BusEventWithPayload:()=>m.R,ByNamesMatcherMode:()=>d.Ys,ByNamesMatcherOptions:()=>d.VC,CSVHeaderStyle:()=>i.x5,CSVReader:()=>i.QM,CircularDataFrame:()=>l.a2,CircularVector:()=>o.dV,ConstantVector:()=>o.uI,CoreApp:()=>r.zj,CurrentUserDTO:()=>r.eW,CustomVariableSupport:()=>r.Mg,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>p.cB,DEFAULT_SAML_NAME:()=>r.bm,DashboardCursorSync:()=>r.mQ,DashboardLoadedEvent:()=>O,DataFrameType:()=>r.Pz,DataFrameView:()=>l.US,DataHoverClearEvent:()=>k,DataHoverEvent:()=>C,DataLinkBuiltInVars:()=>i.WC,DataQueryErrorType:()=>r.eA,DataSelectEvent:()=>T,DataSourceApi:()=>r.MF,DataSourcePlugin:()=>r.hf,DataSourceVariableSupport:()=>r.gv,DataTopic:()=>r.w5,DataTransformerID:()=>d.Wk,DateTimeOptions:()=>c.Nz,DefaultTimeZone:()=>r.Ys,DocsId:()=>i.xV,EventBusSrv:()=>w,ExploreMode:()=>r.Ru,FALLBACK_COLOR:()=>r.R3,FeatureState:()=>r.CQ,FeatureToggles:()=>r.uv,FieldCache:()=>l.N,FieldColorMode:()=>p.WI,FieldColorModeId:()=>r.Sc,FieldConfigEditorBuilder:()=>i.vo,FieldConfigOptionsRegistry:()=>p.ZD,FieldConfigProperty:()=>r.qb,FieldMatcherID:()=>d.mi,FieldType:()=>r.fS,FormattedVector:()=>o.$Y,FrameGeometrySourceMode:()=>D,FrameMatcherID:()=>d.E4,GAUGE_DEFAULT_MAXIMUM:()=>r.Z3,GAUGE_DEFAULT_MINIMUM:()=>r.Hx,GrafanaConfig:()=>r.Nm,GrafanaPlugin:()=>r.Sg,GrafanaTheme2:()=>N.So,GrafanaThemeType:()=>r.Qu,GroupingToMatrixTransformerOptions:()=>U.GroupingToMatrixTransformerOptions,ISO_8601:()=>c.VJ,IndexVector:()=>o.rm,InternalTimeZones:()=>c.RQ,LanguageProvider:()=>r.iL,LayoutMode:()=>a.LayoutMode,LayoutModes:()=>A,LegacyGraphHoverClearEvent:()=>r.oi,LegacyGraphHoverEvent:()=>r.IA,LegacyMappingType:()=>i.HU,LicenseInfo:()=>r.TO,LiveChannelConnectionState:()=>r.yS,LiveChannelEventType:()=>r.FU,LiveChannelScope:()=>r.z,LiveChannelType:()=>r.SK,LoadingState:()=>r.Gu,LogLevel:()=>r.in,LogsDedupDescription:()=>r.Uv,LogsDedupStrategy:()=>r.Y4,LogsMetaKind:()=>r.Ku,LogsParsers:()=>i.bA,LogsSortOrder:()=>r.UV,MISSING_VALUE:()=>l.Yi,MappingType:()=>r.Hi,MatcherID:()=>d.Ff,MutableDataFrame:()=>l.vA,NavMenuItemType:()=>r.VO,NavSection:()=>r.yV,NodeGraphDataFrameFieldNames:()=>i.zG,NullValueMode:()=>r.Gl,OAuth:()=>r.fy,OAuthSettings:()=>r.xX,OrgRole:()=>r.B5,PanelEvents:()=>r.Kh,PanelOptionsEditorBuilder:()=>i.rt,PanelPlugin:()=>z,PluginErrorCode:()=>r.w2,PluginIncludeType:()=>r.$_,PluginSignatureStatus:()=>r.Xy,PluginSignatureType:()=>r._Z,PluginState:()=>r.BV,PluginType:()=>r.zV,PreloadPlugin:()=>r.V7,QueryRunner:()=>_.r,QueryRunnerOptions:()=>_.z,RangeValueMatcherOptions:()=>P.qE,ReducerID:()=>d.gz,RegexpOrNamesMatcherOptions:()=>d.Py,Registry:()=>i.Bz,RenameByRegexTransformerOptions:()=>d.ao,SetFieldConfigOptionsArgs:()=>s.SetFieldConfigOptionsArgs,SortedVector:()=>o.oH,SpecialValueMatch:()=>r.eE,StandardOptionConfig:()=>s.StandardOptionConfig,StandardVariableSupport:()=>r.v6,SystemDateFormatsState:()=>c.zf,TIME_FORMAT:()=>r.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>r.rN,TIME_SERIES_TIME_FIELD_NAME:()=>r.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>r.M5,ThemeBreakpoints:()=>N.v,ThemeBreakpointsKey:()=>N.Zs,ThemeColors:()=>N.aG,ThemeRichColor:()=>N.yl,ThemeShadows:()=>N.ly,ThemeShape:()=>N.wB,ThemeSpacing:()=>N.EQ,ThemeTransitions:()=>N.v$,ThemeTypography:()=>N.zc,ThemeTypographyVariant:()=>N.XZ,ThemeVisualizationColors:()=>N.Z2,ThemeVizColor:()=>N.Nz,ThemeVizHue:()=>N.h8,ThemeZIndices:()=>N.Kh,ThresholdsMode:()=>r.H3,TimeZoneResolver:()=>c.qb,TransformerRegistryItem:()=>d.xr,TransformerUIProps:()=>d.fb,UrlQueryMap:()=>i.Vq,UrlQueryValue:()=>i.yw,VAR_CALC:()=>p.pZ,VAR_CELL_PREFIX:()=>p.dE,VAR_FIELD_LABELS:()=>p.E1,VAR_FIELD_NAME:()=>p.n_,VAR_SERIES_NAME:()=>p.HU,ValueMatcherID:()=>d.mE,ValueMatcherOptions:()=>P.m8,VariableOrigin:()=>r.L8,VariableSuggestionsScope:()=>r.o3,VariableSupportBase:()=>r.Tq,VariableSupportType:()=>r.j2,VisualizationSuggestionScore:()=>r._,VisualizationSuggestionsBuilder:()=>r.mi,VisualizationSuggestionsListAppender:()=>r.sf,VizOrientation:()=>r.wm,WithLoadingIndicatorOptions:()=>i.rm,addDurationToDate:()=>c.Ks,addLogLevelToSeries:()=>i.Ar,anySeriesWithTimeField:()=>l.m$,anyToNumber:()=>i.IX,applyFieldOverrides:()=>p.SM,applyRawFieldOverrides:()=>p.Of,arrayUtils:()=>i.sq,binaryOperators:()=>i.nk,booleanOverrideProcessor:()=>p.W4,booleanValueFormatter:()=>h.IR,buildHistogram:()=>d.gY,calculateFieldStats:()=>i.zd,calculateLogsLabelStats:()=>i.lL,calculateStats:()=>i.i6,checkLogsError:()=>i.Mi,classicColors:()=>i.ZC,colorManipulator:()=>N.r8,compareArrayValues:()=>l.nl,compareDataFrameStructures:()=>l.Ch,convertOldAngularValueMappings:()=>i.Jb,createDimension:()=>l.q2,createFieldConfigRegistry:()=>E,createTheme:()=>N.jG,dataFrameFromJSON:()=>l.vP,dataFrameToJSON:()=>l.Y,dataLinksOverrideProcessor:()=>p.NN,dateMath:()=>c.Rn,dateTime:()=>c.CQ,dateTimeAsMoment:()=>c.C_,dateTimeForTimeZone:()=>c.GY,dateTimeFormat:()=>c.dq,dateTimeFormatISO:()=>c.lf,dateTimeFormatTimeAgo:()=>c.E8,dateTimeFormatWithAbbrevation:()=>c.Fm,dateTimeParse:()=>c.J,decodeFieldValueEntities:()=>l.Jy,deprecationWarning:()=>i.d9,displayNameOverrideProcessor:()=>p.W0,doStandardCalcs:()=>d.uP,durationToMilliseconds:()=>c.iX,ensureTimeField:()=>d.J_,escapeStringForRegex:()=>u.GE,escapeUnescapedString:()=>i.l3,eventFactory:()=>g.X,fieldColorModeRegistry:()=>p.WO,fieldMatchers:()=>d.Ls,fieldReducers:()=>d.TB,findCommonLabels:()=>i.FT,findHighlightChunksInText:()=>u.Xt,findMatchesInText:()=>u.lu,findUniqueLabels:()=>i.IU,formatLabels:()=>i.aA,formattedValueToString:()=>h.zc,frameMatchers:()=>d.Ac,getActiveThreshold:()=>p.m1,getAllValuesFromDimension:()=>l.r7,getColumnFromDimension:()=>l.$q,getColumnsFromDimension:()=>l.GV,getDataFrameRow:()=>l.fh,getDataSourceRef:()=>i.iU,getDataSourceUID:()=>i.BT,getDefaultRelativeTimeRange:()=>r.Rr,getDefaultTimeRange:()=>r.JK,getDimensionByName:()=>l.YP,getDisplayProcessor:()=>p.U_,getDisplayValueAlignmentFactors:()=>p.sg,getFieldColorMode:()=>p.QY,getFieldColorModeForField:()=>p.fD,getFieldConfigWithMinMax:()=>p.xD,getFieldDisplayName:()=>p.CZ,getFieldDisplayValues:()=>p.nG,getFieldDisplayValuesProxy:()=>p.zv,getFieldMatcher:()=>d.sq,getFieldSeriesColor:()=>p.YO,getFieldTypeFromValue:()=>l.DP,getFlotPairs:()=>i.k8,getFlotPairsConstant:()=>i.HE,getFrameDisplayName:()=>p.nf,getFrameMatchers:()=>d.b9,getHistogramFields:()=>d.qr,getLocale:()=>c.Kd,getLocaleData:()=>c.k4,getLogLevel:()=>i.ZO,getLogLevelFromKey:()=>i.jx,getParser:()=>i.MT,getRawDisplayProcessor:()=>p.gE,getScaleCalculator:()=>p.NI,getSeriesTimeStep:()=>i.e4,getTimeField:()=>l.sV,getTimeZone:()=>c.Ze,getTimeZoneGroups:()=>c.$8,getTimeZoneInfo:()=>c.Pr,getTimeZones:()=>c.ZV,getValueFormat:()=>h.Cf,getValueFormats:()=>h.QW,getValueFormatterIndex:()=>h.Td,getValueFromDimension:()=>l.jC,getValueMatcher:()=>d.IG,getWeekdayIndex:()=>c.ig,getWeekdayIndexByEnglishName:()=>c.jN,guessDecimals:()=>i.dP,guessFieldTypeForField:()=>l.fu,guessFieldTypeFromNameAndValue:()=>l._m,guessFieldTypeFromValue:()=>l.LI,guessFieldTypes:()=>l.SX,hasLinks:()=>p.gG,hasLogsContextSupport:()=>r.Q4,hasLogsVolumeSupport:()=>r.On,hasMsResolution:()=>i.fp,hasQueryExportSupport:()=>r.p,hasQueryImportSupport:()=>r.CZ,histogramBucketSizes:()=>d.Zi,histogramFieldInfo:()=>d.py,histogramFieldsToFrame:()=>d.zM,histogramFrameBucketMaxFieldName:()=>d.cO,histogramFrameBucketMinFieldName:()=>d.wL,histogramTransformer:()=>d.Op,identityOverrideProcessor:()=>p.kG,incrRound:()=>d.Jz,incrRoundDn:()=>d.mB,incrRoundUp:()=>d.UO,intervalToAbbreviatedDurationString:()=>c.vT,isBooleanUnit:()=>h.br,isDataFrame:()=>l.aY,isDataSourceRef:()=>i.cv,isDateTime:()=>c.v9,isLiveChannelJoinEvent:()=>r.mx,isLiveChannelLeaveEvent:()=>r.gH,isLiveChannelMessageEvent:()=>r.RL,isLiveChannelStatusEvent:()=>r.se,isSystemOverride:()=>r.v3,isSystemOverrideWithRef:()=>r.kf,isTableData:()=>l.Ji,isUnsignedPluginSignature:()=>r.xA,isValidDate:()=>c.AI,isValidDuration:()=>c.jO,isValidGoDuration:()=>c.IA,isValidLiveChannelAddress:()=>r.nU,localTimeFormat:()=>c.Ji,locale:()=>h.SP,locationUtil:()=>i.uT,makeClassES5Compatible:()=>i.s2,mapInternalLinkToExplore:()=>i._N,matchAllLabels:()=>i.VS,monacoLanguageRegistry:()=>F,numberOverrideProcessor:()=>p.Oh,objRemoveUndefined:()=>i.Hh,onUpdateDatasourceJsonDataOption:()=>i._R,onUpdateDatasourceJsonDataOptionChecked:()=>i.hz,onUpdateDatasourceJsonDataOptionSelect:()=>i.nx,onUpdateDatasourceOption:()=>i.z_,onUpdateDatasourceResetOption:()=>i.HD,onUpdateDatasourceSecureJsonDataOption:()=>i.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>i.TX,outerJoinDataFrames:()=>d.JP,parseDuration:()=>c.RA,parseFlags:()=>u.TL,parseLabels:()=>i.J8,parseLiveChannelAddress:()=>r.H7,preferredVisualizationTypes:()=>r.dC,rangeUtil:()=>c.cT,readCSV:()=>i.uP,reduceField:()=>d.Kx,renderMarkdown:()=>u.ap,renderTextPanelMarkdown:()=>u.xH,reverseDataFrame:()=>l.Y6,roundDecimals:()=>i.O9,scaledUnits:()=>h.Qj,selectOverrideProcessor:()=>p.AE,serializeStateToUrlParam:()=>i.S,setLocale:()=>c.i_,setTimeZoneResolver:()=>c.K7,setWeekStart:()=>c.Ls,shallowCompare:()=>l.Vv,simpleCountUnit:()=>h.SR,sortDataFrame:()=>l.aK,sortInAscendingOrder:()=>i.DA,sortInDescendingOrder:()=>i.$8,sortLogRows:()=>i.$u,sortLogsResult:()=>i.j0,sortThresholds:()=>p.bP,standardEditorsRegistry:()=>p.SO,standardFieldConfigEditorRegistry:()=>p.N6,standardTransformers:()=>d.YR,standardTransformersRegistry:()=>d.Ze,stringFormater:()=>h.vb,stringOverrideProcessor:()=>p.op,stringStartsAsRegEx:()=>u.oH,stringToJsRegex:()=>u.jO,stringToMs:()=>u.e0,systemDateFormats:()=>c.U6,textUtil:()=>u.QX,thresholdsOverrideProcessor:()=>p.ZN,timeZoneAbbrevation:()=>c.Hk,timeZoneFormatUserFriendly:()=>c.Vs,toCSV:()=>i.MJ,toDataFrame:()=>l.g0,toDataFrameDTO:()=>l.og,toDuration:()=>c.np,toFilteredDataFrameDTO:()=>l.Aw,toFixed:()=>h.FH,toFixedScaled:()=>h.bn,toFixedUnit:()=>h.q2,toFloatOrUndefined:()=>u.dz,toIntegerOrUndefined:()=>u.By,toLegacyResponseData:()=>l.Zr,toLiveChannelId:()=>r.Aj,toNumberString:()=>u.PF,toOption:()=>i.Er,toPascalCase:()=>u.Mh,toUtc:()=>c.zh,transformDataFrame:()=>d.Hz,unEscapeStringFromRegex:()=>u.x6,unitOverrideProcessor:()=>p.VB,updateDatasourcePluginJsonDataOption:()=>i.tp,updateDatasourcePluginOption:()=>i.fd,updateDatasourcePluginResetOption:()=>i.Mf,updateDatasourcePluginSecureJsonDataOption:()=>i.uw,urlUtil:()=>i.Cj,validateFieldConfig:()=>p.gb,valueMappingsOverrideProcessor:()=>p.uj,valueMatchers:()=>d.U8,vectorator:()=>o.sD,withLoadingIndicator:()=>i.xc});var a={};n.r(a),n.d(a,{l:()=>A});var s={};n.r(s),n.d(s,{c:()=>z});var i=n(92299),r=n(78689),o=n(15449),l=n(64421),d=n(29264),c=n(93349),u=n(29787),h=n(57595),p=n(22754),g=n(72413),m=n(35090),f=n(51125),v=n.n(f),b=n(16976),x=n(61292);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w{constructor(){y(this,"emitter",void 0),this.emitter=new(v())}publish(e){this.emitter.emit(e.type,e)}subscribe(e,t){return this.getStream(e).subscribe({next:t})}getStream(e){return new b.y((t=>{const n=e=>{t.next(e)};return this.emitter.on(e.type,n),()=>{this.emitter.off(e.type,n)}}))}newScopedBus(e,t){return new j([e],this,t)}emit(e,t){"string"==typeof e?this.emitter.emit(e,{type:e,payload:t}):this.emitter.emit(e.name,{type:e.name,payload:t})}on(e,t,n){if(t.wrapper=e=>{t(e.payload)},"string"==typeof e?this.emitter.on(e,t.wrapper):this.emitter.on(e.name,t.wrapper),n){const a=n.$on("$destroy",(()=>{this.off(e,t),a()}))}}off(e,t){"string"!=typeof e?this.emitter.off(e.name,t.wrapper):this.emitter.off(e,t.wrapper)}removeAllListeners(){this.emitter.removeAllListeners()}}class j{constructor(e,t,n){y(this,"filterConfig",void 0),y(this,"filter",(e=>!this.filterConfig.onlyLocal||e.origin===this)),this.path=e,this.eventBus=t,this.filterConfig=null!=n?n:{onlyLocal:!1}}publish(e){e.origin||(e.origin=this),this.eventBus.publish(e)}getStream(e){return this.eventBus.getStream(e).pipe((0,x.h)(this.filter))}subscribe(e,t){return this.getStream(e).subscribe({next:t})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(e,t){return new j([...this.path,e],this,t)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class C extends m.R{}S(C,"type","data-hover");class k extends m.m{}S(k,"type","data-hover-clear");class T extends m.R{}S(T,"type","data-select");class I extends m.R{}S(I,"type","annotation-event");class O extends m.R{}S(O,"type","dashboard-loaded");var N=n(89963);const F=new(n(94956).B);let D;!function(e){e.Auto="auto",e.Geohash="geohash",e.Coords="coords",e.Lookup="lookup"}(D||(D={}));var P=n(16411);let A;!function(e){e.Grid="grid",e.List="list"}(A||(A={}));var M=n(82897),R=n(19151),$=n(23227),L=n(89558);function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=new $.Z,a=L.N.list(),s={};if(e.useCustomConfig){const t=new R.vo;e.useCustomConfig(t);for(const e of t.getRegistry().list())if(e.isCustom=!0,e.id="custom."+e.id,V(e,a)){var i;const t=null!==(i=s[e.category[0]])&&void 0!==i?i:[];t.push(e),s[e.category[0]]=t}else n.register(e)}for(let t of a){if(e.disableStandardOptions){if(e.disableStandardOptions.indexOf(t.id)>-1)continue}if(e.standardOptions){var r,o;const n=null===(r=e.standardOptions[t.id])||void 0===r?void 0:r.defaultValue,a=null===(o=e.standardOptions[t.id])||void 0===o?void 0:o.settings;n&&(t=Object.assign({},t,{defaultValue:n})),a&&(t=Object.assign({},t,{settings:t.settings?Object.assign({},t.settings,a):a}))}if(n.register(t),t.category&&s[t.category[0]])for(let e of s[t.category[0]])n.register(e)}for(const e of n.list())if(e.path.indexOf("[")>0)throw new Error(`[${t}] Field config paths do not support arrays: ${e.id}`);return n}function V(e,t){return Boolean(t.find((t=>e.category&&t.category&&e.category[0]===t.category[0])))}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class z extends r.Sg{constructor(e){super(),B(this,"_defaults",void 0),B(this,"_fieldConfigDefaults",{defaults:{},overrides:[]}),B(this,"_fieldConfigRegistry",void 0),B(this,"_initConfigRegistry",(()=>new p.ZD)),B(this,"optionsSupplier",void 0),B(this,"suggestionsSupplier",void 0),B(this,"panel",void 0),B(this,"editor",void 0),B(this,"onPanelMigration",void 0),B(this,"onPanelTypeChanged",void 0),B(this,"noPadding",void 0),B(this,"dataSupport",{annotations:!1,alertStates:!1}),B(this,"angularPanelCtrl",void 0),this.panel=e}get defaults(){let e=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const t=new R.rt;this.optionsSupplier(t,{data:[]});for(const n of t.getItems())null!=n.defaultValue&&(0,M.set)(e,n.path,n.defaultValue)}return e}get fieldConfigDefaults(){const e=this._fieldConfigDefaults.defaults;e.custom={};for(const t of this.fieldConfigRegistry.list())void 0!==t.defaultValue&&(0,M.set)(e,t.id,t.defaultValue);return{defaults:Object.assign({},e),overrides:this._fieldConfigDefaults.overrides}}setDefaults(e){return(0,i.d9)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=e,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(e){return(0,i.d9)("PanelPlugin","setEditor","setPanelOptions"),this.editor=e,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(e){return this.onPanelMigration=e,this}setPanelChangeHandler(e){return this.onPanelTypeChanged=e,this}setPanelOptions(e){return this.optionsSupplier=e,this}getPanelOptionsSupplier(){var e;return null!==(e=this.optionsSupplier)&&void 0!==e?e:()=>{}}setDataSupport(e){return this.dataSupport=Object.assign({},this.dataSupport,e),this}useFieldConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._initConfigRegistry=()=>E(e,this.meta.name),this}setSuggestionsSupplier(e){return this.suggestionsSupplier=e,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(e){return this.meta.id===e}}var _=n(41726),U=n(74181)},29787:(e,t,n)=>{"use strict";n.d(t,{GE:()=>a.GE,Xt:()=>c.Xt,lu:()=>c.lu,TL:()=>c.TL,ap:()=>l,xH:()=>d,oH:()=>a.oH,jO:()=>a.jO,e0:()=>a.e0,QX:()=>u,dz:()=>a.dz,By:()=>a.By,PF:()=>a.PF,Mh:()=>a.Mh,x6:()=>a.x6});var a=n(7171),s=n(25756),i=n(95943);let r=!1;const o={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function l(e,t){let n;r||(s.TU.setOptions(Object.assign({},o)),r=!0),null!=t&&t.breaks&&(n=Object.assign({},o,{breaks:!0}));const a=(0,s.TU)(e||"",n);return null!=t&&t.noSanitize?a:(0,i.Nw)(a)}function d(e,t){r||(s.TU.setOptions(Object.assign({},o)),r=!0);const n=(0,s.TU)(e||"");return null!=t&&t.noSanitize?n:(0,i.he)(n)}var c=n(2725);const u={escapeHtml:i.Xv,hasAnsiCodes:i.oT,sanitize:i.Nw,sanitizeTextPanelContent:i.he,sanitizeUrl:i.Nm}},7171:(e,t,n)=>{"use strict";n.d(t,{By:()=>p,GE:()=>o,Mh:()=>m,PF:()=>h,dz:()=>g,e0:()=>u,jO:()=>c,oH:()=>d,x6:()=>l});var a=n(82897);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(s,"g"),r=new RegExp("(\\\\)"+s,"g"),o=e=>e?e.replace(i,"\\$1"):e,l=e=>e?e.replace(r,"$2"):e;function d(e){return!!e&&"/"===e[0]}function c(e){if(!d(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!t)throw new Error(`'${e}' is not a valid regular expression.`);return new RegExp(t[1],t[2])}function u(e){if(!e)return 0;const t=parseInt(e,10),n=e.slice(String(t).length),a=36e5;switch(n){case"s":return 1e3*t;case"m":return 6e4*t;case"h":return t*a;case"d":return 864e5*t;default:if(!n)return isNaN(t)?0:t;throw new Error("Not supported unit: "+n)}}function h(e){return null!=e&&Number.isFinite(e)?e.toString():""}function p(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function g(e){if(!e)return;const t=parseFloat(e);return isNaN(t)?void 0:t}const m=e=>{const t=(0,a.camelCase)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},2725:(e,t,n)=>{"use strict";function a(e){let{searchWords:t,textToHighlight:n}=e;const a=[];for(const e of t)a.push(...s(n,e));return a}n.d(t,{TL:()=>r,Xt:()=>a,lu:()=>s});function s(e,t){if(!e||!t)return[];const n=[],{cleaned:a,flags:s}=r((e=>e.replace(/[[{(][\w,.-?:*+]+$/,""))(t));let i;try{i=new RegExp(`(?:${a})`,s)}catch(e){return n}return e.replace(i,(function(e){if(e){var t;const a=(t=(arguments.length<=1?0:arguments.length-1)-2+1)<1||arguments.length<=t?void 0:arguments[t];n.push({text:e,start:a,length:e.length,end:a+e.length})}return""})),n}const i=/\(\?([ims-]+)\)/g;function r(e){const t=new Set(["g"]);return{cleaned:e.replace(i,((e,n)=>{const a=n.startsWith("-");for(let e=0;e<n.length;++e){const s=n.charAt(e);a||"-"===n.charAt(e-1)?t.delete(s):"-"!==s&&t.add(s)}return""})),flags:Array.from(t).join("")}}},16535:(e,t,n)=>{"use strict";function a(){const e="px",t={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};return{values:t,up:function(e){return`@media (min-width:${"number"==typeof e?e:t[e]}px)`},down:function(e){return`@media (max-width:${("number"==typeof e?e:t[e])-.05}px)`},keys:["xs","sm","md","lg","xl","xxl"],unit:e}}n.d(t,{_:()=>a})},23457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{alpha:()=>f,asHexString:()=>l,asRgbString:()=>d,darken:()=>v,decomposeColor:()=>u,emphasize:()=>m,getContrastRatio:()=>p,getLuminance:()=>g,hexToRgb:()=>r,hslToRgb:()=>c,lighten:()=>b,recomposeColor:()=>h,rgbToHex:()=>o});var a=n(35008),s=n.n(a);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function r(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function o(e){if(0===e.indexOf("#"))return e;const{values:t}=u(e);return`#${t.map((e=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(e))).join("")}`}function l(e){if("#"===e[0])return e;const t=s()(e);return 1===t.getAlpha()?t.toHexString():t.toHex8String()}function d(e){return e.startsWith("rgb")?e:s()(e).toRgbString()}function c(e){const t=u(e),{values:n}=t,a=n[0],s=n[1]/100,i=n[2]/100,r=s*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+a/30)%12;return i-r*Math.max(Math.min(t-3,9-t,1),-1)};let l="rgb";const d=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===t.type&&(l+="a",d.push(n[3])),h({type:l,values:d})}function u(e){if("string"!=typeof e)return e;if("#"===e.charAt(0))return u(r(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(`Unsupported '${e}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let a,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),a=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error(`Unsupported ${a} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:n,values:s,colorSpace:a}}function h(e){const{type:t,colorSpace:n}=e;let a=e.values;return-1!==t.indexOf("rgb")?a=a.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),a=-1!==t.indexOf("color")?`${n} ${a.join(" ")}`:`${a.join(", ")}`,`${t}(${a})`}function p(e,t,n){const a=g(e),s=g(t,n);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function g(e,t){const n=u(e);let a="hsl"===n.type?u(c(e)).values:n.values;if(t&&"rgba"===n.type){const e=u(t),n=a[3];a[0]=a[0]*n+e.values[0]*(1-n),a[1]=a[1]*n+e.values[1]*(1-n),a[2]=a[2]*n+e.values[2]*(1-n)}const s=a.map((e=>("color"!==n.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)));return Number((.2126*s[0]+.7152*s[1]+.0722*s[2]).toFixed(3))}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return g(e)>.5?v(e,t):b(e,t)}function f(e,t){if(""===e)return"#000000";if(t=i(t),"#"===e[0]){if(9===e.length)e=e.substring(0,7);else if(e.length<=5){let t="#";for(let n=1;n<4;n++)t+=e[n]+e[n];e=t}return e+Math.round(255*t).toString(16).padStart(2,"0")}if("("===e[3])return e.replace(")",`, ${t})`);if("("===e[4])return e.substring(0,e.lastIndexOf(","))+`, ${t})`;const n=u(e);return"color"===n.type?n.values[3]=`/${t}`:n.values[3]=t,h(n)}function v(e,t){const n=u(e);if(t=i(t),-1!==n.type.indexOf("hsl"))n.values[2]*=1-t;else if(-1!==n.type.indexOf("rgb")||-1!==n.type.indexOf("color"))for(let e=0;e<3;e+=1)n.values[e]*=1-t;return h(n)}function b(e,t){const n=u(e);if(t=i(t),-1!==n.type.indexOf("hsl"))n.values[2]+=(100-n.values[2])*t;else if(-1!==n.type.indexOf("rgb"))for(let e=0;e<3;e+=1)n.values[e]+=(255-n.values[e])*t;else if(-1!==n.type.indexOf("color"))for(let e=0;e<3;e+=1)n.values[e]+=(1-n.values[e])*t;return h(n)}},28038:(e,t,n)=>{"use strict";n.d(t,{i:()=>c});var a=n(82897),s=n(23457),i=n(28090);const r=["primary","secondary","info","warning","success","error","tonalOffset","hoverFactor","contrastThreshold"];function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{constructor(){o(this,"mode","dark"),o(this,"whiteBase","204, 204, 220"),o(this,"border",{weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`}),o(this,"text",{primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:i.D.blueDarkText,maxContrast:i.D.white}),o(this,"primary",{main:i.D.blueDarkMain,text:i.D.blueDarkText,border:i.D.blueDarkText}),o(this,"secondary",{main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong}),o(this,"info",this.primary),o(this,"error",{main:i.D.redDarkMain,text:i.D.redDarkText}),o(this,"success",{main:i.D.greenDarkMain,text:i.D.greenDarkText}),o(this,"warning",{main:i.D.orangeDarkMain,text:i.D.orangeDarkText}),o(this,"background",{canvas:i.D.gray05,primary:i.D.gray10,secondary:i.D.gray15}),o(this,"action",{hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38}),o(this,"gradients",{brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"}),o(this,"contrastThreshold",3),o(this,"hoverFactor",.03),o(this,"tonalOffset",.15)}}class d{constructor(){o(this,"mode","light"),o(this,"blackBase","36, 41, 46"),o(this,"primary",{main:i.D.blueLightMain,border:i.D.blueLightText,text:i.D.blueLightText}),o(this,"text",{primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:i.D.black}),o(this,"border",{weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`}),o(this,"secondary",{main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong}),o(this,"info",{main:i.D.blueLightMain,text:i.D.blueLightText}),o(this,"error",{main:i.D.redLightMain,text:i.D.redLightText,border:i.D.redLightText}),o(this,"success",{main:i.D.greenLightMain,text:i.D.greenLightText}),o(this,"warning",{main:i.D.orangeLightMain,text:i.D.orangeLightText}),o(this,"background",{canvas:i.D.gray90,primary:i.D.white,secondary:i.D.gray100}),o(this,"action",{hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38}),o(this,"gradients",{brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"}),o(this,"contrastThreshold",3),o(this,"hoverFactor",.03),o(this,"tonalOffset",.2)}}function c(e){var t;const n=new l,i=new d,o="dark"===(null!==(t=e.mode)&&void 0!==t?t:"dark")?n:i,{primary:c=o.primary,secondary:u=o.secondary,info:h=o.info,warning:p=o.warning,success:g=o.success,error:m=o.error,tonalOffset:f=o.tonalOffset,hoverFactor:v=o.hoverFactor,contrastThreshold:b=o.contrastThreshold}=e,x=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;const a=(0,s.getContrastRatio)(n.text.maxContrast,e,o.background.primary)>=t?n.text.maxContrast:i.text.maxContrast;return a}const w=e=>{let{color:t,name:n}=e;if(t=Object.assign({},t,{name:n}),!t.main)throw new Error(`Missing main color for ${n}`);return t.text||(t.text=t.main),t.border||(t.border=t.text),t.shade||(t.shade="light"===o.mode?(0,s.darken)(t.main,f):(0,s.lighten)(t.main,f)),t.transparent||(t.transparent="light"===o.mode?(0,s.alpha)(t.main,.08):(0,s.alpha)(t.main,.15)),t.contrastText||(t.contrastText=y(t.main)),t};return(0,a.merge)(Object.assign({},o,{primary:w({color:c,name:"primary"}),secondary:w({color:u,name:"secondary"}),info:w({color:h,name:"info"}),error:w({color:m,name:"error"}),success:w({color:g,name:"success"}),warning:w({color:p,name:"warning"}),getContrastText:y,emphasize:(e,t)=>(0,s.emphasize)(e,null!=t?t:v)}),x)}},51496:(e,t,n)=>{"use strict";function a(e){return"dark"===e.mode?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}n.d(t,{G:()=>a})},81128:(e,t,n)=>{"use strict";function a(e){var t;const n=null!==(t=e.borderRadius)&&void 0!==t?t:2;return{borderRadius:e=>`${(null!=e?e:1)*n}px`}}n.d(t,{r:()=>a})},23157:(e,t,n)=>{"use strict";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gridSize:t=8}=e,n=e=>"string"==typeof e?e:e*t,a=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0===t.length&&(t[0]=1),t.map((e=>{const t=n(e);return"number"==typeof t?`${t}px`:t})).join(" ")};return a.gridSize=t,a}n.d(t,{_:()=>a})},54197:(e,t,n)=>{"use strict";n.d(t,{ig:()=>l});const a={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},s={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:n=s.standard,easing:i=a.easeInOut,delay:r=0}=t;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof n?n:o(n)} ${i} ${"string"==typeof r?r:o(r)}`)).join(",")}function r(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function o(e){return`${Math.round(e)}ms`}function l(){return{create:i,duration:s,easing:a,getAutoHeightDuration:r}}},56545:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});const a='"Roboto", "Helvetica", "Arial", sans-serif',s="'Roboto Mono', monospace";function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fontFamily:n=a,fontFamilyMonospace:i=s,fontSize:o=14,fontWeightLight:l=300,fontWeightRegular:d=400,fontWeightMedium:c=500,fontWeightBold:u=500,htmlFontSize:h=14}=t;const p=o/14,g=e=>e/h*p+"rem",m=(e,t,s,i,o)=>Object.assign({fontFamily:n,fontWeight:e,fontSize:g(t),lineHeight:s},n===a?{letterSpacing:`${r(i/t)}em`}:{},o),f={h1:m(l,28,1.167,-.25),h2:m(l,24,1.2,0),h3:m(d,21,1.167,0),h4:m(d,18,1.235,.25),h5:m(d,16,1.334,0),h6:m(c,14,1.6,.15),body:m(d,14,1.5,.15),bodySmall:m(d,12,1.5,.15)},v={base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"};return Object.assign({htmlFontSize:h,pxToRem:g,fontFamily:n,fontFamilyMonospace:i,fontSize:o,fontWeightLight:l,fontWeightRegular:d,fontWeightMedium:c,fontWeightBold:u,size:v},f)}function r(e){return Math.round(1e5*e)/1e5}},51407:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var a=n(78689);function s(e){let t=[];"dark"===e.mode?t=[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]:"light"===e.mode&&(t=[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]);const n={};for(const e of t)for(const t of e.shades)if(n[t.name]=t.color,t.aliases)for(const e of t.aliases)n[e]=t.color;n.transparent="rgba(0,0,0,0)",n["panel-bg"]=e.background.primary,n.text=e.text.primary;return{hues:t,palette:["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],getColorByName:e=>{if(!e)return a.R3;const t=n[e];if(t)return t;if("#"===e[0])return e;if(e.indexOf("rgb")>-1)return e;const s=i[e.toLowerCase()];return s?(n[e]=s,s):e}}}const i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},89963:(e,t,n)=>{"use strict";n.d(t,{EQ:()=>u.ThemeSpacing,Kh:()=>h.ThemeZIndices,Nz:()=>p.ThemeVizColor,So:()=>s.S,XZ:()=>d.ThemeTypographyVariant,Z2:()=>p.ThemeVisualizationColors,Zs:()=>r.ThemeBreakpointsKey,aG:()=>i.ThemeColors,h8:()=>p.ThemeVizHue,jG:()=>a.j,ly:()=>o.ThemeShadows,r8:()=>g,v:()=>r.ThemeBreakpoints,v$:()=>c.ThemeTransitions,wB:()=>l.ThemeShape,yl:()=>s.y,zc:()=>d.ThemeTypography});var a=n(41177),s=n(63573),i=n(28038),r=n(16535),o=n(51496),l=n(81128),d=n(56545),c=n(54197),u=n(23157),h=n(56077),p=n(51407),g=n(23457)},63573:()=>{},56077:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});const a={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},29264:(e,t,n)=>{"use strict";n.d(t,{Ys:()=>K.Ys,VC:()=>K.ByNamesMatcherOptions,Wk:()=>r.W,mi:()=>i.mi,E4:()=>i.E4,Ff:()=>i.Ff,gz:()=>_.gz,Py:()=>K.RegexpOrNamesMatcherOptions,ao:()=>a.RenameByRegexTransformerOptions,xr:()=>s.TransformerRegistryItem,fb:()=>s.TransformerUIProps,mE:()=>i.mE,gY:()=>k.gY,uP:()=>_.uP,J_:()=>v,Ls:()=>o.Ls,TB:()=>_.TB,Ac:()=>o.Ac,sq:()=>o.sq,b9:()=>o.b9,qr:()=>k.qr,IG:()=>o.IG,Zi:()=>k.Zi,py:()=>k.py,zM:()=>k.zM,cO:()=>k.cO,wL:()=>k.wL,Op:()=>k.Op,Jz:()=>k.Jz,mB:()=>k.mB,UO:()=>k.UO,JP:()=>Q.JP,Kx:()=>_.Kx,YR:()=>z,Ze:()=>W,Hz:()=>G,U8:()=>o.U8});var a={};n.r(a),n.d(a,{J:()=>$});var s={};n.r(s),n.d(s,{Z:()=>W});var i=n(14054),r=n(90),o=n(73244),l=n(20794),d=n(69269),c=n(35778),u=n(93349),h=n(86208),p=n(15449);const g={id:r.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:e=>t=>t.pipe((0,c.U)((t=>g.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const n=function(e,t){if(!e.conversions.length)return t;const n=t.map((e=>Object.assign({},e)));for(const t of e.conversions){if(!t.targetField)continue;const e=o.Ls.get(i.mi.byName).get(t.targetField);for(const a of n)a.fields=a.fields.map((s=>e(s,a,n)?m(s,t):s))}return n}(e,t);return n||[]}};function m(e,t){switch(t.destinationType){case h.fS.time:return v(e,t.dateFormat);case h.fS.number:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++){const n=+t[e];t[e]=Number.isFinite(n)?n:null}return Object.assign({},e,{type:h.fS.number,values:new p.Gt(t)})}(e);case h.fS.string:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=`${t[e]}`;return Object.assign({},e,{type:h.fS.string,values:new p.Gt(t)})}(e);case h.fS.boolean:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=Boolean(!!t[e]);return Object.assign({},e,{type:h.fS.boolean,values:new p.Gt(t)})}(e);case h.fS.other:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)try{t[e]=JSON.parse(t[e])}catch{t[e]=null}return Object.assign({},e,{type:h.fS.other,values:new p.Gt(t)})}(e);default:return e}}const f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function v(e,t){const n="number"==typeof e.values.get(0);return e.type===h.fS.time&&n?e:n?Object.assign({},e,{type:h.fS.time}):function(e,t){let n=t?{format:t}:void 0;const a=e.values.toArray().slice();let s=a.find((e=>null!=e)),i="string"==typeof s&&f.test(s);for(let e=0;e<a.length;e++)if(a[e]){let t=i?Date.parse(a[e]):(0,u.J)(a[e],n).valueOf();a[e]=Number.isFinite(t)?t:null}else a[e]=null;return Object.assign({},e,{type:h.fS.time,values:new p.Gt(a)})}(e,t)}var b=n(70513),x=n(13930),y=n(78117),w=n(48901),j=n(23043),S=n(24671),C=n(74181),k=n(93478),T=n(37994),I=n(55718),O=n(58988),N=n(813),F=n(64073),D=n(16975),P=n(45461),A=n(94749),M=n(65407),R=n(7171);const $={id:r.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:e=>t=>t.pipe((0,c.U)((t=>Array.isArray(t)&&0!==t.length?t.map(L(e)):t)))},L=e=>t=>{const n=(0,R.jO)(e.regex),a=t.fields.map((a=>{const s=(0,M.C)(a,t);if(!n.test(s))return a;const i=s.replace(n,e.renamePattern);return Object.assign({},a,{config:Object.assign({},a.config,{displayName:i}),state:Object.assign({},a.state,{displayName:i})})}));return Object.assign({},t,{fields:a})};var E=n(52223),V=n(7029),B=n(51222);const z={noopTransformer:N.d,filterFieldsTransformer:x.P,filterFieldsByNameTransformer:y.w,filterFramesTransformer:x.u,filterFramesByRefIdTransformer:w.J,filterByValueTransformer:j.JA,orderFieldsTransformer:F.t,organizeFieldsTransformer:D.u,reduceTransformer:P.mf,concatenateTransformer:d.aE,calculateFieldTransformer:l.U,seriesToColumnsTransformer:E.u,seriesToRowsTransformer:V.D,renameFieldsTransformer:A.M,labelsToFieldsTransformer:T.r,ensureColumnsTransformer:b.W,groupByTransformer:S.i,sortByTransformer:B.t,mergeTransformer:O.R,renameByRegexTransformer:$,histogramTransformer:k.Op,convertFieldTypeTransformer:g,groupingToMatrixTransformer:C.n,limitTransformer:I.F};var _=n(92809),U=n(71808),H=n(71114);const W=new(n(94956).B),q=e=>t=>{var n;const a=W.get(e.id);if(!a)return t;const s=null!==(n=a.transformation.defaultOptions)&&void 0!==n?n:{},i=Object.assign({},s,e.options);return t.pipe((0,H.z)((t=>(0,U.of)(t).pipe(a.transformation.operator(i,e.replace),Z(t,a)))))},Z=(e,t)=>n=>n.pipe((0,c.U)((n=>{if(n===e)return n;for(const e of n)e.meta||(e.meta={}),e.meta.transformations?e.meta.transformations=[...e.meta.transformations,t.id]:e.meta.transformations=[t.id];return n})));function G(e,t){const n=(0,U.of)(t);if(!e.length)return n;const a=[];for(let t=0;t<e.length;t++){const n=e[t];n.disabled||a.push(q(n))}return n.pipe.apply(n,a)}var K=n(12113),Q=n(76714)},73244:(e,t,n)=>{"use strict";n.d(t,{Ac:()=>m,IG:()=>x,Ls:()=>g,U8:()=>f,b9:()=>b,sq:()=>v});var a=n(94956),s=n(29843),i=n(12113),r=n(67490),o=n(91435),l=n(13387),d=n(14716),c=n(84230),u=n(49397),h=n(25876),p=n(34393);const g=new a.B((()=>[...(0,r.Ty)(),...(0,s.N)(),...(0,i.Lk)(),...(0,l.z)()])),m=new a.B((()=>[...(0,r.fX)(),...(0,i.cC)(),...(0,o.n)()])),f=new a.B((()=>[...(0,c.a)(),...(0,u.H)(),...(0,d.T)(),...(0,h.G)(),...(0,p.G)()]));function v(e){const t=g.get(e.id);if(!t)throw new Error("Unknown field matcher: "+e.id);return t.get(e.options)}function b(e){const t=m.get(e.id);if(!t)throw new Error("Unknown frame matcher: "+e.id);return t.get(e.options)}function x(e){const t=f.get(e.id);if(!t)throw new Error("Unknown value matcher: "+e.id);return t.get(e.options)}},12113:(e,t,n)=>{"use strict";n.d(t,{Lk:()=>g,Ys:()=>r,cC:()=>m});var a=n(65407),s=n(7171),i=n(14054);let r;!function(e){e.exclude="exclude",e.include="include"}(r||(r={}));const o={id:i.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:e=>(t,n,s)=>e===t.name||(0,a.C)(t,n,s)===e,getOptionsDisplayText:e=>`Field name: ${e}`},l={id:i.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:r.include,names:[]},get:e=>{const{names:t,mode:n=r.include}=e,s=new Set(null!=t?t:[]),i=(e,t,n)=>s.has(e.name)||s.has((0,a.C)(e,t,n));return n===r.exclude?(e,t,n)=>!i(e,t,n):i},getOptionsDisplayText:e=>{const{names:t,mode:n}=e,a=(null!=t?t:[]).join(", ");return n===r.exclude?`All except: ${a}`:`All of: ${a}`}},d={id:i.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:e=>{const t=h(e);return(e,n,s)=>{const i=(0,a.C)(e,n,s);return!!t&&t.test(i)}},getOptionsDisplayText:e=>`Field name by pattern: ${e}`},c={id:i.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:e=>(t,n,a)=>n.refId===e,getOptionsDisplayText:e=>`Math all fields returned by query with reference ID: ${e}`},u={id:i.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:e=>{var t;const n=d.get((null==e?void 0:e.pattern)||""),a=l.get({mode:r.include,names:null!==(t=null==e?void 0:e.names)&&void 0!==t?t:[]});return(e,t,s)=>a(e,t,s)||n(e,t,s)},getOptionsDisplayText:e=>{var t,n,a;return`Field name by pattern: ${null!==(t=null==e?void 0:e.pattern)&&void 0!==t?t:""} or names: ${null!==(n=null==e||null===(a=e.names)||void 0===a?void 0:a.join(","))&&void 0!==n?n:""}`}},h=e=>{if(e)try{return(0,s.jO)(e)}catch(e){return void console.error(e)}},p={id:i.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:e=>{const t=(0,s.jO)(e);return e=>t.test(e.name||"")},getOptionsDisplayText:e=>`Frame name: ${e}`};function g(){return[o,d,l,u,c]}function m(){return[p]}},16411:()=>{},20794:(e,t,n)=>{"use strict";n.d(t,{U:()=>w,h:()=>S,ie:()=>b});var a=n(82897),s=n(35778),i=n(39056),r=n(22754),o=n(78689),l=n(27002),d=n(15449),c=n(98070),u=n(63317),h=n(92809),p=n(73244),g=n(14054),m=n(70513),f=n(90),v=n(813);let b;!function(e){e.ReduceRow="reduceRow",e.BinaryOperation="binary"}(b||(b={}));const x={reducer:h.gz.sum},y={left:"",operator:l.L.Add,right:""},w={id:f.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:b.ReduceRow,reduce:{reducer:h.gz.sum}},operator:(e,t)=>n=>{const r=e&&!1!==e.timeSeries?m.W.operator(null):v.d.operator({});return e.alias=t?t(e.alias):e.alias,n.pipe(r,(0,s.U)((n=>{var s;const r=null!==(s=e.mode)&&void 0!==s?s:b.ReduceRow;let c;if(r===b.ReduceRow)c=function(e,t){var n;let a=(0,p.sq)({id:g.mi.numeric});e.include&&e.include.length&&(a=(0,p.sq)({id:g.mi.byNames,options:{names:e.include}}));const s=h.TB.get(e.reducer);if(!s)throw new Error(`Unknown reducer: ${e.reducer}`);const i=null!==(n=s.reduce)&&void 0!==n?n:h.uP,r=e.nullValueMode===o.Gl.Ignore,l=e.nullValueMode===o.Gl.AsZero;return n=>{const s=[];for(const e of n.fields)a(e,n,t)&&s.push(e.values);const c=new u.C(s),h={name:"temp",values:c,type:o.fS.number,config:{}},p=[];for(let t=0;t<n.length;t++){c.rowIndex=t;const n=i(h,r,l)[e.reducer];p.push(n)}return new d.Gt(p)}}((0,a.defaults)(e.reduce,x),n);else if(r===b.BinaryOperation){var m,f,v,w;const s=t?Object.assign({},e.binary,{left:t?t(null===(m=e.binary)||void 0===m?void 0:m.left):null===(f=e.binary)||void 0===f?void 0:f.left,right:t?t(null===(v=e.binary)||void 0===v?void 0:v.right):null===(w=e.binary)||void 0===w?void 0:w.right}):e.binary;c=function(e,t){const n=l.n.getIfExists(e.operator);return a=>{const s=j(a,e.left,t),i=j(a,e.right,t);if(s&&i&&n)return new d.rM(s,i,n.operation)}}((0,a.defaults)(s,y),n)}return c?n.map((t=>{const n=c(t);if(!n)return t;const a={name:S(e),type:o.fS.number,config:{},values:n};let s=[];if(e.replaceFields){const{timeField:n}=(0,i.sV)(t);s=n&&!1!==e.timeSeries?[n,a]:[a]}else s=[...t.fields,a];return Object.assign({},t,{fields:s})})):n})))}};function j(e,t,n){if(!t)return;for(const a of e.fields)if(t===(0,r.CZ)(a,e,n))return a.type===o.fS.boolean?new c.s(a.values):a.values;const a=parseFloat(t);return isNaN(a)?void 0:new d.uI(a,e.length)}function S(e){var t;if(null!==(t=e.alias)&&void 0!==t&&t.length)return e.alias;if(e.mode===b.BinaryOperation){var n,a,s;const{binary:t}=e;return`${null!==(n=null==t?void 0:t.left)&&void 0!==n?n:""} ${null!==(a=null==t?void 0:t.operator)&&void 0!==a?a:""} ${null!==(s=null==t?void 0:t.right)&&void 0!==s?s:""}`}if(e.mode===b.ReduceRow){var i;const t=h.TB.getIfExists(null===(i=e.reduce)||void 0===i?void 0:i.reducer);if(t)return t.name}return"math"}},69269:(e,t,n)=>{"use strict";n.d(t,{HO:()=>o,aE:()=>l});var a=n(35778),s=n(86208),i=n(15449),r=n(90);let o;!function(e){e.Drop="drop",e.FieldName="field",e.Label="label"}(o||(o={}));const l={id:r.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:o.FieldName,frameNameLabel:"frame"},operator:e=>t=>t.pipe((0,a.U)((t=>!Array.isArray(t)||t.length<2?t:[d(t,e)])))};function d(e,t){var n;let a=!0,r=e[0].length;const l=null!==(n=t.frameNameLabel)&&void 0!==n?n:"frame";let d=[];for(const n of e){r!==n.length&&(a=!1,r=Math.max(r,n.length));for(const e of n.fields){const a=Object.assign({},e);a.state=void 0,n.name&&(t.frameNameMode===o.Drop||(t.frameNameMode===o.Label?(a.labels=Object.assign({},e.labels),a.labels[l]=n.name):a.name&&a.name!==s.M5?a.name=`${n.name} Â· ${e.name}`:a.name=n.name)),d.push(a)}}return a||(d=d.map((e=>{if(e.values.length===r)return e;const t=e.values.toArray();return t.length=r,Object.assign({},e,{values:new i.Gt(t)})}))),{fields:d,length:r}}},23043:(e,t,n)=>{"use strict";n.d(t,{ER:()=>c,JA:()=>u,PQ:()=>d});var a=n(35778),s=n(65407),i=n(23569),r=n(73244),o=n(90),l=n(813);let d,c;!function(e){e.exclude="exclude",e.include="include"}(d||(d={})),function(e){e.all="all",e.any="any"}(c||(c={}));const u={id:o.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:d.include,match:c.any},operator:e=>t=>{const n=e.filters,s=e.match===c.all,r=e.type===d.include;return Array.isArray(n)&&0!==n.length?t.pipe((0,a.U)((e=>{if(!Array.isArray(e)||0===e.length)return e;const t=new Set;for(const a of e){const i=p(a,e),r=h(n,i);for(let n=0;n<a.length;n++){if(t.has(n))continue;let i=!0;for(const t of r){const r=t(n,a,e);if(!s&&r){i=!0;break}if(s&&!r){i=!1;break}i=r}i&&t.add(n)}}const a=[],o=r?t.size:e[0].length-t.size;for(const n of e){const e=[];for(const a of n.fields){const s=[];for(let e=0;e<n.length;e++)r&&t.has(e)?s.push(a.values.get(e)):r||t.has(e)||s.push(a.values.get(e));e.push(Object.assign({},a,{values:new i.G(s),state:{}}))}a.push(Object.assign({},n,{fields:e,length:o}))}return a}))):t.pipe(l.d.operator({}))}},h=(e,t)=>{const n=()=>!1;return e.map((e=>{var a;const s=null!==(a=t[e.fieldName])&&void 0!==a?a:-1;if(s<0)return console.warn(`[FilterByValue] Could not find index for field name: ${e.fieldName}`),n;const i=(0,r.IG)(e.config);return(e,t,n)=>i(e,t.fields[s],t,n)}))},p=(e,t)=>e.fields.reduce(((n,a,i)=>(n[(0,s.C)(a,e,t)]=i,n)),{})},24671:(e,t,n)=>{"use strict";n.d(t,{i:()=>u,x:()=>c});var a=n(35778),s=n(39056),i=n(65407),r=n(86208),o=n(23569),l=n(92809),d=n(90);let c;!function(e){e.aggregate="aggregate",e.groupBy="groupby"}(c||(c={}));const u={id:d.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,a.U)((t=>{if(!Object.keys(e.fields).find((t=>e.fields[t].operation===c.groupBy)))return t;const n=[];for(const s of t){const t=[];for(const n of s.fields)h(n,e)&&t.push(n);if(0===t.length)continue;const d=new Map;for(let e=0;e<s.length;e++){var a;const n=String(t.map((t=>t.values.get(e)))),r=null!==(a=d.get(n))&&void 0!==a?a:{};d.has(n)||d.set(n,r);for(let t of s.fields){const n=(0,i.C)(t);r[n]||(r[n]={name:n,type:t.type,config:Object.assign({},t.config),values:new o.G}),r[n].values.add(t.values.get(e))}}const c=[];for(const e of t){const t=new o.G,n=(0,i.C)(e);d.forEach((e=>{t.add(e[n].values.get(0))})),c.push({name:e.name,type:e.type,config:Object.assign({},e.config),values:t})}for(const t of s.fields){if(!p(t,e))continue;const n=(0,i.C)(t),a=e.fields[n].aggregations,s={};d.forEach((e=>{const t=e[n],i=(0,l.Kx)({field:t,reducers:a});for(const e of a)Array.isArray(s[e])||(s[e]=[]),s[e].push(i[e])}));for(const e of a){const a={name:`${n} (${e})`,values:new o.G(s[e]),type:r.fS.other,config:{}};a.type=g(e,t,a),c.push(a)}}n.push({fields:c,length:d.size})}return n})))},h=(e,t)=>{var n;const a=(0,i.C)(e);return(null==t||null===(n=t.fields[a])||void 0===n?void 0:n.operation)===c.groupBy},p=(e,t)=>{var n;const a=(0,i.C)(e);return(null==t||null===(n=t.fields[a])||void 0===n?void 0:n.operation)===c.aggregate&&Array.isArray(null==t?void 0:t.fields[a].aggregations)&&(null==t?void 0:t.fields[a].aggregations.length)>0},g=(e,t,n)=>{var a;switch(e){case l.gz.allIsNull:return r.fS.boolean;case l.gz.last:case l.gz.lastNotNull:case l.gz.first:case l.gz.firstNotNull:return t.type;default:return null!==(a=(0,s.fu)(n))&&void 0!==a?a:r.fS.string}}},74181:(e,t,n)=>{"use strict";n.d(t,{n:()=>u});var a=n(35778),s=n(64421),i=n(65407),r=n(78689),o=n(90);const l="Time",d="Time",c="Value",u={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:l,rowField:d,valueField:c},operator:e=>t=>t.pipe((0,a.U)((t=>{const n=e.columnField||l,a=e.rowField||d,i=e.valueField||c;if(1!==t.length)return t;const o=t[0],u=p(o,n),g=p(o,a),m=p(o,i),f=`${a}\\${n}`;if(!u||!g||!m)return t;const v=h(u.values),b=h(g.values),x={};for(let e=0;e<m.values.length;e++){const t=u.values.get(e),n=g.values.get(e),a=m.values.get(e);x[t]||(x[t]={}),x[t][n]=a}const y=new s.vA;y.addField({name:f,values:b,type:r.fS.string});for(const e of v){let t=[];for(const n of b){var w;const a=null!==(w=x[e][n])&&void 0!==w?w:"";t.push(a)}y.addField({name:e.toString(),values:t,config:m.config,type:m.type})}return[y]})))};function h(e){const t=new Set;for(let n=0;n<e.length;n++)t.add(e.get(n));return Array.from(t)}function p(e,t){for(let n=0;n<e.fields.length;n++){const a=e.fields[n];if(t===(0,i.C)(a))return a}return null}},93478:(e,t,n)=>{"use strict";n.d(t,{Jz:()=>x,Op:()=>g,UO:()=>y,Zi:()=>c,cO:()=>f,gY:()=>b,mB:()=>w,py:()=>p,qr:()=>v,wL:()=>m,zM:()=>S});var a=n(35778),s=n(22754),i=n(89963),r=n(86208),o=n(23569),l=n(90),d=n(76714);const c=[1e-9,2e-9,2.5e-9,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=[null],h=(e,t)=>e-t,p={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},g={id:l.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,a.U)((t=>g.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const n=b(t,e);return null==n?[]:[S(n)]}},m="BucketMin",f="BucketMax";function v(e){let t,n;const a=[];for(const s of e.fields)s.name===m?t=s:s.name===f?n=s:s.type===r.fS.number&&a.push(s);if(t&&n&&a.length)return{bucketMin:t,bucketMax:n,counts:a}}function b(e,t){var n,a,s;let i=null==t?void 0:t.bucketSize,l=null!==(n=null==t?void 0:t.bucketOffset)&&void 0!==n?n:0;if(!i||i<0){let t=[];for(const n of e)for(const e of n.fields)e.type===r.fS.number&&(t=t.concat(e.values.toArray()));t=t.filter((e=>null!=e)),t.sort(((e,t)=>e-t));let n=1/0;if(1===t.length)n=1;else for(let e=1;e<t.length;e++){let a=t[e]-t[e-1];0!==a&&(n=Math.min(n,a))}let a=t[0];const s=(t[t.length-1]-a)/20;for(let e=0;e<c.length;e++){let t=c[e];if(s<t&&t>=n){i=t;break}}}const p=e=>w(e-l,i)+l;let g,v=(null!==(a=(""+i).match(/\.\d+$/))&&void 0!==a?a:["."])[0].length-1,b=[],x=[];for(const t of e)for(const e of t.fields)if(e.type===r.fS.number){let t=j(e.values.toArray(),p,u,h);b.push(t),x.push(Object.assign({},e,{config:Object.assign({},e.config,{unit:"short"===e.config.unit?"short":void 0})})),!g&&e.config.unit&&(g=e.config)}if(!x.length)return null;let y=(0,d.v_)(b);for(let e=1;e<y.length;e++){let t=y[e];for(let e=0;e<t.length;e++)null==t[e]&&(t[e]=0)}const S={name:m,values:new o.G(y[0]),type:r.fS.number,state:void 0,config:0===v?null!==(s=g)&&void 0!==s?s:{}:Object.assign({},g,{decimals:v})},C=Object.assign({},S,{name:f,values:new o.G(y[0].map((e=>e+i)))});if(null!=t&&t.combine){const e=new Array(y[0].length).fill(0);for(let t=1;t<y.length;t++)for(let n=0;n<e.length;n++)e[n]+=y[t][n];x=[Object.assign({},x[0],{name:"Count",values:new o.G(e),type:r.fS.number,state:void 0})]}else x.forEach(((e,t)=>{e.values=new o.G(y[t+1])}));return{bucketMin:S,bucketMax:C,counts:x}}function x(e,t){return Math.round(e/t)*t}function y(e,t){return Math.ceil(e/t)*t}function w(e,t){return Math.floor(e/t)*t}function j(e,t,n,a){let s=new Map;for(let n=0;n<e.length;n++){let a=e[n];null!=a&&(a=t(a));let i=s.get(a);i?i.count++:s.set(a,{value:a,count:1})}n&&n.forEach((e=>s.delete(e)));let i=[...s.values()];a&&i.sort(((e,t)=>a(e.value,t.value)));let r=Array(i.length),o=Array(i.length);for(let e=0;e<i.length;e++)r[e]=i[e].value,o[e]=i[e].count;return[r,o]}function S(e,t){if(!e.bucketMin.display){const n=(0,s.U_)({field:e.bucketMin,theme:null!=t?t:(0,i.jG)()});e.bucketMin.display=n,e.bucketMax.display=n}return e.counts[0].display=(0,s.U_)({field:e.counts[0],theme:null!=t?t:(0,i.jG)()}),{fields:[e.bucketMin,e.bucketMax,...e.counts],length:e.bucketMin.values.length}}},76714:(e,t,n)=>{"use strict";n.d(t,{JP:()=>c,Y3:()=>d,v_:()=>m});var a=n(64421),s=n(78689),i=n(15449),r=n(73244),o=n(14054);function l(e){var t;return null!==(t=e.joinBy)&&void 0!==t?t:function(e){const{timeField:t}=(0,a.sV)(e[0]);if(t)return r.Ls.get(o.mi.firstTimeField).get({});let n=[];for(const t of e[0].fields)t.type===s.fS.number&&n.push(t.name);for(let t=1;t<e.length;t++){const t=[];for(const n of e[0].fields)n.type===s.fS.number&&t.push(n.name);n=n.filter((e=>!t.includes(e)))}return r.Ls.get(o.mi.byName).get(n[0])}(e.frames)}function d(e,t){if(t>=0){let n=e.fields[t];n.type===s.fS.string||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=e.length;if(n<=1)return!0;let a=0,s=n-1;for(;a<=s&&null==e.get(a);)a++;for(;s>=a&&null==e.get(s);)s--;if(s<=a)return!0;const i=Math.max(1,Math.floor((s-a+1)/t));for(let t=e.get(a),n=a+i;n<=s;n+=i){const a=e.get(n);if(null!=a){if(a<=t)return!1;t=a}}return!0}(n.values)||(e=(0,a.aK)(e,t))}return e}function c(e){var t;if(null===(t=e.frames)||void 0===t||!t.length)return;if(1===e.frames.length){let t=e.frames[0],n=t;const a=l(e);let s=n.fields.findIndex((t=>a(t,n,e.frames)));if(e.keepOriginIndices&&(n=Object.assign({},t,{fields:t.fields.map(((e,t)=>{const n=Object.assign({},e),a={frameIndex:0,fieldIndex:t};return n.state?n.state.origin=a:n.state={origin:a},n}))}),s>0)){const e=n.fields[s],t=n.fields.filter(((e,t)=>t!==s));t.unshift(e),n.fields=t,s=0}if(s>=0&&(n=d(n,s)),e.keep){let a=n.fields.filter(((t,a)=>a===s||e.keep(t,n,e.frames)));t!==n?n.fields=a:n=Object.assign({},t,{fields:a})}return n}const n=[],a=[],s=[],r=l(e);for(let t=0;t<e.frames.length;t++){var o;const i=e.frames[t];if(!i||null===(o=i.fields)||void 0===o||!o.length)continue;const l=[u];let d,m=[];for(let n=0;n<i.fields.length;n++){const a=i.fields[n];if(a.state=a.state||{},!d&&r(a,i,e.frames))d=a;else{var c,g;if(e.keep&&!e.keep(a,i,e.frames))continue;let t=null===(c=a.config.custom)||void 0===c?void 0:c.spanNulls;l.push(!0===t?u:-1===t?h:p);let n=null!==(g=a.labels)&&void 0!==g?g:{};i.name&&(n=Object.assign({},n,{name:i.name})),m.push(Object.assign({},a,{labels:n}))}e.keepOriginIndices&&(a.state.origin={frameIndex:t,fieldIndex:n})}if(!d)continue;0===s.length&&s.push(d),n.push(l);const v=[d.values.toArray()];for(const e of m){var f;v.push(e.values.toArray()),s.push(e),null===(f=e.state)||void 0===f||delete f.displayName}a.push(v)}const v=m(a,n);return{length:v[0].length,fields:s.map(((e,t)=>Object.assign({},e,{values:new i.Gt(v[t])})))}}const u=0,h=1,p=2;function g(e,t,n){for(let a,s=0,i=-1;s<t.length;s++){let r=t[s];if(r>i){for(a=r-1;a>=0&&null==e[a];)e[a--]=null;for(a=r+1;a<n&&null==e[a];)e[i=a++]=null}}}function m(e,t){const n=new Set;for(let t=0;t<e.length;t++){let a=e[t][0],s=a.length;for(let e=0;e<s;e++)n.add(a[e])}let a=[Array.from(n).sort(((e,t)=>e-t))],s=a[0].length,i=new Map;for(let e=0;e<s;e++)i.set(a[0][e],e);for(let n=0;n<e.length;n++){let r=e[n],o=r[0];for(let e=1;e<r.length;e++){let l=r[e],d=Array(s).fill(void 0),c=t?t[n][e]:h,m=[];for(let e=0;e<l.length;e++){let t=l[e],n=i.get(o[e]);null===t?c!==u&&(d[n]=t,c===p&&m.push(n)):d[n]=t}g(d,m,s),a.push(d)}}return a}},37994:(e,t,n)=>{"use strict";n.d(t,{k:()=>l,r:()=>d});var a=n(35778),s=n(43215),i=n(78689),r=n(15449),o=n(90);let l;!function(e){e.Columns="columns",e.Rows="rows"}(l||(l={}));const d={id:o.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:e=>t=>t.pipe((0,a.U)((t=>d.transformer(e)(t)))),transformer:e=>t=>{var n;if(e.mode===l.Rows)return function(e,t){const n=[];for(const a of e)for(const o of a.fields)if(o.labels){const l=[],d=[];if(t)for(const e of t)l.push(e),d.push(o.labels[e]);else for(const[e,t]of Object.entries(o.labels))l.push(e),d.push(t);d.length&&n.push(Object.assign({},a,{name:(0,s.getFieldDisplayName)(o,a,e),fields:[{name:"label",type:i.fS.string,config:{},values:new r.Gt(l)},{name:"value",type:i.fS.string,config:{},values:new r.Gt(d)}],length:d.length}))}return n}(t,e.keepLabels);const a=[],o=null!==(n=e.keepLabels)&&void 0!==n&&n.length?new Set(e.keepLabels):void 0;for(const n of t){const t=[],s={};for(const a of n.fields){if(!a.labels){t.push(a);continue}const n=Object.assign({},a,{config:Object.assign({},a.config,{displayName:void 0,displayNameFromDS:void 0}),labels:void 0});t.push(n);for(const t of Object.keys(a.labels)){var d;if(o&&!o.has(t))continue;if(e.valueLabel===t){n.name=a.labels[t];continue}(null!==(d=s[t])&&void 0!==d?d:s[t]=new Set).add(a.labels[t])}}for(const e in s)for(const a of s[e]){const s=new Array(n.length).fill(a);t.push({name:e,type:i.fS.string,values:new r.Gt(s),config:{}})}a.push({fields:t,length:n.length})}return a}}},64073:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,t:()=>i});var a=n(35778),s=n(65407);const i={id:n(90).W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:e=>t=>t.pipe((0,a.U)((t=>{const n=o(e.indexByName);return Array.isArray(t)&&0!==t.length?t.map((e=>Object.assign({},e,{fields:n(e.fields,t,e)}))):t})))},r=e=>(t,n)=>l(t,e)-l(n,e),o=e=>(t,n,a)=>{if(!Array.isArray(t)||0===t.length)return t;if(!e||0===Object.keys(e).length)return t;const i=r(e);return t.sort(((e,t)=>i((0,s.C)(e,a,n),(0,s.C)(t,a,n))))},l=(e,t)=>Number.isInteger(t[e])?t[e]:Number.MAX_SAFE_INTEGER},45461:(e,t,n)=>{"use strict";n.d(t,{AL:()=>h,mf:()=>p});var a=n(35778),s=n(39056),i=n(22754),r=n(86208),o=n(23569),l=n(92809),d=n(73244),c=n(67490),u=n(90);let h;!function(e){e.SeriesToRows="seriesToRows",e.ReduceFields="reduceFields"}(h||(h={}));const p={id:u.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[l.gz.max]},operator:e=>t=>t.pipe((0,a.U)((t=>{var n;if(null==e||null===(n=e.reducers)||void 0===n||!n.length)return t;const a=e.fields?(0,d.sq)(e.fields):e.includeTimeField&&e.mode===h.ReduceFields?c.m3:c.Qw;if(e.mode===h.ReduceFields)return function(e,t,n){const a=l.TB.list(n).map((e=>e.id)),s=[];for(const n of e){const i=[];for(const s of n.fields)if(t(s,n,e)){const e=(0,l.Kx)({field:s,reducers:a});for(const t of a){const n=e[t],r=Object.assign({},s,{values:new o.G([n])});r.state=void 0,a.length>1&&(r.labels||(r.labels={}),r.labels.reducer=l.TB.get(t).name),i.push(r)}}i.length&&s.push(Object.assign({},n,{fields:i,length:1}))}return s}(t,a,e.reducers);const u=function(e,t,n,a){const d=l.TB.list(n),c=d.map((e=>e.id)),u=[],h=a?function(e){const t=new Set;for(const n of e)for(const e of n.fields)if(e.labels)for(const n of Object.keys(e.labels))t.add(n);return[...t]}(e):[];for(const n of e){const p=n.fields.filter((a=>t(a,n,e))),g=p.length,m=[],f=new o.G(new Array(g));m.push({name:"Field",type:r.fS.string,values:f,config:{}});const v={};if(a)for(const e of h)v[e]=new o.G(new Array(g)),m.push({name:e,type:r.fS.string,values:v[e],config:{}});const b={};for(const e of d)b[e.id]=new o.G(new Array(g)),m.push({name:e.name,type:r.fS.other,values:b[e.id],config:{}});for(let t=0;t<p.length;t++){const s=p[t],r=(0,l.Kx)({field:s,reducers:c});if(a){if(f.buffer[t]=s.name,s.labels)for(const e of Object.keys(s.labels))v[e].set(t,s.labels[e])}else f.buffer[t]=(0,i.CZ)(s,n,e);for(const e of d){const n=r[e.id];b[e.id].buffer[t]=n}}for(const e of m)if(e.type===r.fS.other){const t=(0,s.fu)(e);t&&(e.type=t)}u.push(Object.assign({},n,{fields:m,length:g}))}return function(e){if(null==e||!e.length)return;const t=e[0];for(let n=1;n<e.length;n++){const a=e[n];for(let e=0;e<t.fields.length;e++){const n=t.fields[e];for(let t=0;t<a.fields.length;t++){const s=a.fields[t],i=0===e&&0===t,r=n.type===s.type&&n.name===s.name;if(i||r){const e=n.values.toArray(),t=s.values.toArray();n.values.buffer=e.concat(t)}}}}return t.name=void 0,t.length=t.fields[0].values.length,t}(u)}(t,a,e.reducers,e.labelsToFields);return u?[u]:[]})))}},12011:(e,t,n)=>{"use strict";let a;n.d(t,{e:()=>a}),function(e){e.OpenSource="Open Source",e.Pro="Pro",e.Enterprise="Enterprise"}(a||(a={}))},55961:(e,t,n)=>{"use strict";n.d(t,{Hx:()=>a,Z3:()=>s,bm:()=>i});const a=0,s=100,i="SAML"},24443:(e,t,n)=>{"use strict";let a;n.d(t,{Gl:()=>i,Gu:()=>a,dC:()=>s}),function(e){e.NotStarted="NotStarted",e.Loading="Loading",e.Streaming="Streaming",e.Done="Done",e.Error="Error"}(a||(a={}));const s=["graph","table","logs","trace","nodeGraph"];let i;!function(e){e.Null="null",e.Ignore="connected",e.AsZero="null as zero"}(i||(i={}))},13126:()=>{},78689:(e,t,n)=>{"use strict";n.d(t,{K2:()=>u,Z9:()=>ke,Lj:()=>g,SI:()=>ne,k8:()=>$,Yu:()=>Se.BootData,SP:()=>Se.BuildInfo,zj:()=>D,eW:()=>Se.CurrentUserDTO,Mg:()=>ye,bm:()=>a.bm,mQ:()=>d,Pz:()=>r,eA:()=>_,MF:()=>B,hf:()=>V,gv:()=>we,w5:()=>c,Ys:()=>x.Ys,Ru:()=>z,R3:()=>Q.R,CQ:()=>P,uv:()=>Ce.u,Sc:()=>Q.S,qb:()=>C,fS:()=>i.fS,Z3:()=>a.Z3,Hx:()=>a.Hx,Nm:()=>Se.GrafanaConfig,Sg:()=>M,Qu:()=>J.Q,iL:()=>U,oi:()=>ie,IA:()=>se,TO:()=>Se.LicenseInfo,yS:()=>le,FU:()=>de,z:()=>re,SK:()=>oe,Gu:()=>s.Gu,in:()=>m.in,Uv:()=>m.Uv,Y4:()=>m.Y4,Ku:()=>m.Ku,UV:()=>m.UV,Hi:()=>w.H,VO:()=>b,yV:()=>v,Gl:()=>s.Gl,fy:()=>Se.OAuth,xX:()=>Se.OAuthSettings,B5:()=>Y,Kh:()=>ae,w2:()=>N,$_:()=>F,Xy:()=>I,_Z:()=>O,BV:()=>k,zV:()=>T,V7:()=>Se.PreloadPlugin,eE:()=>w.e,v6:()=>xe,T_:()=>x.T_,rN:()=>i.rN,Ls:()=>i.Ls,M5:()=>i.M5,H3:()=>y.H,L8:()=>o,o3:()=>l,Tq:()=>be,j2:()=>ce,_:()=>Z,mi:()=>G,sf:()=>K,wm:()=>q,Rr:()=>x.Rr,JK:()=>x.JK,Q4:()=>m.Q4,On:()=>f.O,p:()=>p,CZ:()=>h,mx:()=>he,gH:()=>pe,RL:()=>ge,se:()=>ue,v3:()=>S,kf:()=>j,xA:()=>je,nU:()=>fe,H7:()=>me,dC:()=>s.dC,Aj:()=>ve});var a=n(55961),s=n(24443),i=n(86208);let r,o,l,d,c,u;!function(e){e.TimeSeriesWide="timeseries-wide",e.TimeSeriesLong="timeseries-long",e.TimeSeriesMany="timeseries-many",e.DirectoryListing="directory-listing",e.HeatmapRows="heatmap-rows",e.HeatmapCells="heatmap-cells"}(r||(r={})),function(e){e.Series="series",e.Field="field",e.Fields="fields",e.Value="value",e.BuiltIn="built-in",e.Template="template"}(o||(o={})),function(e){e.Values="values"}(l||(l={})),function(e){e[e.Off=0]="Off",e[e.Crosshair=1]="Crosshair",e[e.Tooltip=2]="Tooltip"}(d||(d={})),function(e){e.Annotations="annotations"}(c||(c={})),function(e){e.Equal="Equal",e.NotEqual="NotEqual",e.EqualRegEx="EqualRegEx",e.NotEqualRegEx="NotEqualRegEx"}(u||(u={}));const h=e=>void 0!==e.importFromAbstractQueries,p=e=>void 0!==e.exportToAbstractQueries;let g;!function(e){e.Field="field",e.Text="text",e.Skip="skip"}(g||(g={}));var m=n(32700),f=n(69773);let v,b;!function(e){e.Core="core",e.Plugin="plugin",e.Config="config"}(v||(v={})),function(e){e.Section="section",e.Item="item"}(b||(b={}));var x=n(91921),y=n(60419),w=n(70709);function j(e){return t=>t.__systemRef===e}const S=e=>"string"==typeof(null==e?void 0:e.__systemRef);let C,k,T,I,O,N,F,D,P;function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Unit="unit",e.Min="min",e.Max="max",e.Decimals="decimals",e.DisplayName="displayName",e.NoValue="noValue",e.Thresholds="thresholds",e.Mappings="mappings",e.Links="links",e.Color="color"}(C||(C={})),function(e){e.alpha="alpha",e.beta="beta",e.stable="stable",e.deprecated="deprecated"}(k||(k={})),function(e){e.panel="panel",e.datasource="datasource",e.app="app",e.renderer="renderer",e.secretsmanager="secretsmanager"}(T||(T={})),function(e){e.internal="internal",e.valid="valid",e.invalid="invalid",e.modified="modified",e.missing="missing"}(I||(I={})),function(e){e.grafana="grafana",e.commercial="commercial",e.community="community",e.private="private",e.core="core"}(O||(O={})),function(e){e.missingSignature="signatureMissing",e.invalidSignature="signatureInvalid",e.modifiedSignature="signatureModified"}(N||(N={})),function(e){e.dashboard="dashboard",e.page="page",e.panel="panel",e.datasource="datasource"}(F||(F={}));class M{addConfigPage(e){return this.configPages||(this.configPages=[]),this.configPages.push(e),this}setChannelSupport(e){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){A(this,"meta",void 0),A(this,"loadError",void 0),A(this,"angularConfigCtrl",void 0),A(this,"configPages",void 0),this.meta={}}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.CloudAlerting="cloud-alerting",e.UnifiedAlerting="unified-alerting",e.Dashboard="dashboard",e.Explore="explore",e.Unknown="unknown",e.PanelEditor="panel-editor",e.PanelViewer="panel-viewer"}(D||(D={}));class $ extends M{constructor(){super(...arguments),R(this,"root",void 0),R(this,"rootNav",void 0)}init(e){}setRootPage(e,t){return this.root=e,this.rootNav=t,this}setComponentsFromLegacyExports(e){if(e.ConfigCtrl&&(this.angularConfigCtrl=e.ConfigCtrl),this.meta&&this.meta.includes)for(const t of this.meta.includes)if(t.type===F.page&&t.component){if(!e[t.component]){console.warn("App Page uses unknown component: ",t.component,this.meta);continue}}}}!function(e){e.alpha="alpha",e.beta="beta"}(P||(P={}));var L=n(44991);function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class V extends M{constructor(e){super(),E(this,"components",{}),this.DataSourceClass=e}setConfigEditor(e){return this.components.ConfigEditor=e,this}setConfigCtrl(e){return this.angularConfigCtrl=e,this}setQueryCtrl(e){return this.components.QueryCtrl=e,this}setAnnotationQueryCtrl(e){return this.components.AnnotationsQueryCtrl=e,this}setQueryEditor(e){return this.components.QueryEditor=e,this}setExploreQueryField(e){return this.components.ExploreQueryField=e,this}setExploreMetricsQueryField(e){return this.components.ExploreMetricsQueryField=e,this}setExploreLogsQueryField(e){return this.components.ExploreLogsQueryField=e,this}setQueryEditorHelp(e){return this.components.QueryEditorHelp=e,this}setExploreStartPage(e){return this.setQueryEditorHelp(e)}setVariableQueryEditor(e){return this.components.VariableQueryEditor=e,this}setMetadataInspector(e){return this.components.MetadataInspector=e,this}setComponentsFromLegacyExports(e){this.angularConfigCtrl=e.ConfigCtrl,this.components.QueryCtrl=e.QueryCtrl,this.components.AnnotationsQueryCtrl=e.AnnotationsQueryCtrl,this.components.ExploreQueryField=e.ExploreQueryField,this.components.QueryEditor=e.QueryEditor,this.components.QueryEditorHelp=e.QueryEditorHelp,this.components.VariableQueryEditor=e.VariableQueryEditor}}class B{constructor(e){E(this,"name",void 0),E(this,"id",void 0),E(this,"type",void 0),E(this,"uid",void 0),E(this,"interval",void 0),E(this,"init",void 0),E(this,"components",void 0),E(this,"meta",void 0),E(this,"languageProvider",void 0),E(this,"annotations",void 0),E(this,"variables",void 0),this.name=e.name,this.id=e.id,this.type=e.type,this.meta=e.meta,this.uid=e.uid}getRef(){return{type:this.type,uid:this.uid}}}let z,_;!function(e){e.Logs="Logs",e.Metrics="Metrics",e.Tracing="Tracing"}(z||(z={})),function(e){e.Cancelled="cancelled",e.Timeout="timeout",e.Unknown="unknown"}(_||(_={}));class U{constructor(){E(this,"datasource",void 0),E(this,"request",void 0),E(this,"start",void 0),E(this,"startTask",void 0)}}U=(0,L.s)(U),B=(0,L.s)(B);var H=n(82897);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let q,Z;!function(e){e.Auto="auto",e.Vertical="vertical",e.Horizontal="horizontal"}(q||(q={})),function(e){e[e.Best=100]="Best",e[e.Good=70]="Good",e[e.OK=50]="OK"}(Z||(Z={}));class G{constructor(e,t){W(this,"data",void 0),W(this,"panel",void 0),W(this,"dataSummary",void 0),W(this,"list",[]),this.data=e,this.panel=t,this.dataSummary=this.computeDataSummary()}getListAppender(e){return new K(this.list,e)}computeDataSummary(){var e;const t=(null===(e=this.data)||void 0===e?void 0:e.series)||[];let n,a=0,s=0,r=0,o=0,l=0,d=0;for(const e of t){var c;o+=e.length,null!==(c=e.meta)&&void 0!==c&&c.preferredVisualisationType&&(n=e.meta.preferredVisualisationType);for(const t of e.fields)switch(d++,t.type){case i.fS.number:a+=1;break;case i.fS.time:s+=1;break;case i.fS.string:r+=1}e.length>l&&(l=e.length)}return{numberFieldCount:a,timeFieldCount:s,stringFieldCount:r,rowCountTotal:o,rowCountMax:l,fieldCount:d,preferredVisualisationType:n,frameCount:t.length,hasData:o>0,hasTimeField:s>0,hasNumberField:a>0,hasStringField:r>0}}getList(){return this.list}}class K{constructor(e,t){this.list=e,this.defaults=t}append(e){this.list.push((0,H.defaultsDeep)(e,this.defaults))}}var Q=n(11926),J=n(95390);let Y;!function(e){e.Admin="Admin",e.Editor="Editor",e.Viewer="Viewer"}(Y||(Y={}));var X=n(72413),ee=n(35090);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne={alertSuccess:(0,X.X)("alert-success"),alertWarning:(0,X.X)("alert-warning"),alertError:(0,X.X)("alert-error")},ae={refresh:(0,X.X)("refresh"),componentDidMount:(0,X.X)("component-did-mount"),dataReceived:(0,X.X)("data-received"),dataError:(0,X.X)("data-error"),dataFramesReceived:(0,X.X)("data-frames-received"),dataSnapshotLoad:(0,X.X)("data-snapshot-load"),editModeInitialized:(0,X.X)("init-edit-mode"),initPanelActions:(0,X.X)("init-panel-actions"),initialized:(0,X.X)("panel-initialized"),panelTeardown:(0,X.X)("panel-teardown"),render:(0,X.X)("render")};class se extends ee.R{}te(se,"type","graph-hover");class ie extends ee.m{constructor(){super(...arguments),te(this,"payload",{point:{}})}}let re,oe,le,de,ce;function ue(e){return e.type===de.Status}function he(e){return e.type===de.Join}function pe(e){return e.type===de.Leave}function ge(e){return e.type===de.Message}function me(e){if(null!=e&&e.length){let t=e.trim().split("/");if(t.length>=3)return{scope:t[0],namespace:t[1],path:t.slice(2).join("/")}}}function fe(e){return!!(null!=e&&e.path&&e.namespace&&e.scope)}function ve(e){if(!e.scope)return"";let t=e.scope;return e.namespace?(t+="/"+e.namespace,e.path?t+"/"+e.path:t):t}te(ie,"type","graph-hover-clear"),function(e){e.DataSource="ds",e.Plugin="plugin",e.Grafana="grafana",e.Stream="stream"}(re||(re={})),function(e){e.DataStream="stream",e.DataFrame="frame",e.JSON="json"}(oe||(oe={})),function(e){e.Pending="pending",e.Connected="connected",e.Disconnected="disconnected",e.Shutdown="shutdown",e.Invalid="invalid"}(le||(le={})),function(e){e.Status="status",e.Join="join",e.Leave="leave",e.Message="message"}(de||(de={})),function(e){e.Legacy="legacy",e.Standard="standard",e.Custom="custom",e.Datasource="datasource"}(ce||(ce={}));class be{}class xe extends be{getType(){return ce.Standard}}class ye extends be{constructor(){var e,t,n;super(...arguments),n=void 0,(t="editor")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getType(){return ce.Custom}}class we extends be{getType(){return ce.Datasource}}function je(e){return e&&e!==I.valid&&e!==I.internal}var Se=n(12011),Ce=n(13126);let ke;!function(e){e.NoData="no_data",e.Paused="paused",e.Alerting="alerting",e.OK="ok",e.Pending="pending",e.Unknown="unknown"}(ke||(ke={}))},32700:(e,t,n)=>{"use strict";let a,s,i,r,o;n.d(t,{Ku:()=>s,Q4:()=>l,UV:()=>i,Uv:()=>o,Y4:()=>r,in:()=>a}),function(e){e.emerg="critical",e.fatal="critical",e.alert="critical",e.crit="critical",e.critical="critical",e.warn="warning",e.warning="warning",e.err="error",e.eror="error",e.error="error",e.info="info",e.information="info",e.informational="info",e.notice="info",e.dbug="debug",e.debug="debug",e.trace="trace",e.unknown="unknown"}(a||(a={})),function(e){e[e.Number=0]="Number",e[e.String=1]="String",e[e.LabelsMap=2]="LabelsMap",e[e.Error=3]="Error"}(s||(s={})),function(e){e.Descending="Descending",e.Ascending="Ascending"}(i||(i={})),function(e){e.none="none",e.exact="exact",e.numbers="numbers",e.signature="signature"}(r||(r={})),function(e){e.none="No de-duplication",e.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",e.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",e.signature="De-duplication of successive lines that have identical punctuation and whitespace."}(o||(o={}));const l=e=>{if(!e)return!1;const t=e;return void 0!==t.getLogRowContext&&void 0!==t.showContextToggle}},69773:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});const a=e=>void 0!==e.getLogsVolumeDataProvider},41726:()=>{},91921:(e,t,n)=>{"use strict";n.d(t,{JK:()=>r,Rr:()=>o,T_:()=>i,Ys:()=>s});var a=n(19991);const s="browser",i="YYYY-MM-DD HH:mm:ss";function r(){const e=(0,a.CQ)();return{from:(0,a.CQ)(e).subtract(6,"hour"),to:e,raw:{from:"now-6h",to:"now"}}}function o(){return{from:600,to:0}}},19151:(e,t,n)=>{"use strict";n.d(t,{vo:()=>o,rt:()=>c,j:()=>d});var a=n(22754),s=n(94956);class i{constructor(){var e,t,n;n=[],(t="properties")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}addCustomEditor(e){return this.properties.push(e),this}getRegistry(){return new s.B((()=>this.properties))}getItems(){return this.properties}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends i{addNumberInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:a.SO.get("number").editor,editor:a.SO.get("number").editor,process:a.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSliderInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:a.SO.get("slider").editor,editor:a.SO.get("slider").editor,process:a.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addTextInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:a.SO.get("text").editor,editor:a.SO.get("text").editor,process:a.op,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:a.SO.get("select").editor,editor:a.SO.get("select").editor,process:a.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:a.SO.get("radio").editor,editor:a.SO.get("radio").editor,process:a.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("boolean").editor,override:a.SO.get("boolean").editor,process:a.W4,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("color").editor,override:a.SO.get("color").editor,process:a.kG,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("unit").editor,override:a.SO.get("unit").editor,process:a.VB,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}}class l{constructor(e){r(this,"path",""),r(this,"category",void 0),r(this,"defaultValue",void 0),r(this,"id","nested-panel-options"),r(this,"name","nested"),r(this,"editor",(()=>null)),r(this,"getBuilder",(()=>this.cfg.build)),r(this,"getNestedValueAccess",(e=>{const t=this.cfg.values;return t?t(e):{getValue:t=>e.getValue(`${this.path}.${t}`),onChange:(t,n)=>e.onChange(`${this.path}.${t}`,n)}})),this.cfg=e,this.path=e.path,this.category=e.category,this.defaultValue=e.defaultValue}}function d(e){return"nested-panel-options"===e.id}class c extends i{addNestedOptions(e){const t=new l(e);return this.addCustomEditor(t)}addNumberInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("number").editor}))}addSliderInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("slider").editor}))}addTextInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("text").editor}))}addStringArray(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("strings").editor}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("select").editor}))}addMultiSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("multi-select").editor}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("radio").editor}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("boolean").editor}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("color").editor,settings:e.settings||{}}))}addTimeZonePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("timezone").editor,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("unit").editor}))}addFieldNamePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("field-name").editor}))}addDashboardPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:a.SO.get("dashboard-uid").editor}))}}},87102:(e,t,n)=>{"use strict";n.d(t,{W:()=>i,_:()=>r});var a=n(38413),s=n(40245);const i={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function r(e){var t,n;const{onClickFn:a,replaceVariables:s,link:i,scopedVars:r,range:d,field:c,internalLink:u}=e,h=l(null===(t=i.internal)||void 0===t?void 0:t.query,r,s),p=l(null===(n=i.internal)||void 0===n?void 0:n.panelsState,r,s);return{title:s(i.title?i.title:u.datasourceName,r),href:o(u.datasourceUid,h,d,p),onClick:a?()=>{a({datasourceUid:u.datasourceUid,query:h,panelsState:p,range:d})}:void 0,target:"_self",origin:c}}function o(e,t,n,i){return a.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,s.S)({range:n.raw,datasource:e,queries:[t],panelsState:i}))}`)}function l(e,t,n){let a="";try{a=JSON.stringify(e||{})}catch(e){console.error(e)}a=n(a,t);let s={};try{s=JSON.parse(a)}catch(e){console.error(a,e)}return s}},92299:(e,t,n)=>{"use strict";n.d(t,{LH:()=>pe.L,x5:()=>R,QM:()=>E,WC:()=>je.W,xV:()=>Se,vo:()=>fe.vo,HU:()=>Ie.HU,bA:()=>Q,zG:()=>ge,rt:()=>fe.rt,Bz:()=>d.B,Vq:()=>we.UrlQueryMap,yw:()=>we.UrlQueryValue,rm:()=>Te.WithLoadingIndicatorOptions,Ar:()=>K,IX:()=>ke.I,sq:()=>a,nk:()=>pe.n,zd:()=>J,lL:()=>Y,i6:()=>X,Mi:()=>re,ZC:()=>ue.Z,Jb:()=>Ie.Jb,d9:()=>T,l3:()=>oe,FT:()=>le.FT,IU:()=>le.IU,aA:()=>le.aA,iU:()=>u,BT:()=>p,k8:()=>be,HE:()=>xe,ZO:()=>Z,jx:()=>G,MT:()=>te,e4:()=>he.e,dP:()=>de.d,fp:()=>he.f,cv:()=>h,uT:()=>ye.u,s2:()=>Ce.s,_N:()=>je._,VS:()=>le.VS,Hh:()=>ce.H,_R:()=>m,hz:()=>b,nx:()=>v,z_:()=>g,HD:()=>y,fi:()=>f,TX:()=>x,J8:()=>le.J8,uP:()=>$,O9:()=>de.O,S:()=>we.S,DA:()=>ne,$8:()=>ae,$u:()=>ie,j0:()=>se,MJ:()=>U,Er:()=>me.E,tp:()=>j,fd:()=>w,Mf:()=>C,uw:()=>S,Cj:()=>we.Cj,xc:()=>Te.x});var a={};n.r(a),n.d(a,{moveItemImmutably:()=>i,sortValues:()=>l});var s=n(97024);function i(e,t,n){const a=[...e];return Array.prototype.splice.call(a,n,0,Array.prototype.splice.call(a,t,1)[0]),a}const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),o=(e,t)=>e-t;function l(e){return(t,n)=>{if(t===n)return 0;if(null==n||"string"==typeof n&&""===n.trim())return-1;if(null==t||"string"==typeof t&&""===(null==t?void 0:t.trim()))return 1;let a=r.compare;return"number"==typeof t&&"number"==typeof n&&(a=o),e===s.As.Descending?a(n,t):a(t,n)}}var d=n(94956),c=n(82897);function u(e){return{uid:e.uid,type:e.type}}function h(e){return"object"==typeof e&&"string"==typeof(null==e?void 0:e.uid)}function p(e){return h(e)?e.uid:(0,c.isString)(e)?e:void 0}const g=(e,t)=>n=>{w(e,t,n.currentTarget.value)},m=(e,t)=>n=>{j(e,t,n.currentTarget.value)},f=(e,t)=>n=>{S(e,t,n.currentTarget.value)},v=(e,t)=>n=>{j(e,t,n.value)},b=(e,t)=>n=>{j(e,t,n.currentTarget.checked)},x=(e,t)=>n=>{S(e,t,n.value)},y=(e,t)=>n=>{C(e,t)};function w(e,t,n){const a=e.options;e.onOptionsChange(Object.assign({},a,{[t]:n}))}const j=(e,t,n)=>{const a=e.options;e.onOptionsChange(Object.assign({},a,{jsonData:Object.assign({},a.jsonData,{[t]:n})}))},S=(e,t,n)=>{const a=e.options;e.onOptionsChange(Object.assign({},a,{secureJsonData:Object.assign({},a.secureJsonData?a.secureJsonData:{},{[t]:n})}))},C=(e,t)=>{const n=e.options;e.onOptionsChange(Object.assign({},n,{secureJsonData:Object.assign({},n.secureJsonData?n.secureJsonData:{},{[t]:""}),secureJsonFields:Object.assign({},n.secureJsonFields,{[t]:!1})}))},k={},T=(e,t,n)=>{let a=`[Deprecation warning] ${e}: ${t} is deprecated`;n&&(a+=`. Use ${n} instead`);const s=Date.now(),i=k[a];(!i||s-i>1e4)&&(console.warn(a),k[a]=s)};var I=n(26389),O=n.n(I),N=n(11178),F=n(39056),D=n(22754),P=n(78689),A=n(57595);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let R;function $(e,t){return new E(t).readCSV(e)}var L;!function(e){e[e.full=0]="full",e[e.name=1]="name",e[e.none=2]="none"}(R||(R={})),function(e){e[e.Starting=0]="Starting",e[e.InHeader=1]="InHeader",e[e.ReadingRows=2]="ReadingRows"}(L||(L={}));class E{constructor(e){M(this,"config",void 0),M(this,"callback",void 0),M(this,"state",void 0),M(this,"data",void 0),M(this,"current",void 0),M(this,"chunk",((e,t)=>{for(let t=0;t<e.data.length;t++){const n=e.data[t];if(n.length<1)continue;const a=n[0];if(a){if(a.startsWith("#")){const e=a.indexOf("#",2);if(e>0){const t=a.slice(1,e),s="name"===t,i={unit:"#"};if(s||i.hasOwnProperty(t)){this.state===L.ReadingRows&&(this.current=new N.v({fields:[]}),this.data.push(this.current));const i=a.slice(e+1);if(s){this.current.addFieldFor(void 0,i);for(let e=1;e<n.length;e++)this.current.addFieldFor(void 0,n[e])}else{const{fields:e}=this.current;for(let a=0;a<e.length;a++){e[a].config||(e[a].config={});e[a].config[t]=0===a?i:n[a]}}this.state=L.InHeader;continue}}else if(this.state===L.Starting){this.state=L.InHeader;continue}continue}if(this.state===L.Starting){if((0,F.LI)(a)===P.fS.string){for(const e of n)this.current.addFieldFor(void 0,e);this.state=L.InHeader;continue}this.state=L.InHeader}}if(this.state,L.ReadingRows,this.state=L.ReadingRows,n.length>this.current.fields.length){const{fields:e}=this.current;for(let t=e.length;t<n.length;t++)this.current.addFieldFor(n[t]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(n),this.callback&&this.callback.onRow(n)}})),e||(e={}),this.config=e.config||{},this.callback=e.callback,this.current=new N.v({fields:[]}),this.state=L.Starting,this.data=[]}readCSV(e){this.current=new N.v({fields:[]}),this.data=[this.current];const t=Object.assign({},this.config,{dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk});return O().parse(e,t),this.data}}function V(e,t){const n=e.toString();return n.includes('"')?t.quoteChar+n.replace(/"/gi,'""')+t.quoteChar:n.includes("\n")||n.includes(t.delimiter)?t.quoteChar+n+t.quoteChar:n}function B(e,t){return e.display?n=>{const a=e.display(n);return V((0,A.zc)(a),t)}:e=>V(e,t)}function z(e,t,n){const a="name"===e,s="type"===e;for(const i of t){const r=i.config;if(a||s||r&&r.hasOwnProperty(e)){let i="#"+e+"#";for(let r=0;r<t.length;r++){r>0&&(i+=n.delimiter);let o=t[r].name;s?o=t[r].type:a||(o=t[r].config[e]),o&&(i+=V(o,n))}return i+n.newline}}return""}function _(){const e=["x","y"];return e.toLocaleString?e.toLocaleString().charAt(1):","}function U(e,t){if(!e)return"";let n=(t=(0,c.defaults)(t,{delimiter:_(),newline:"\r\n",quoteChar:'"',encoding:"",headerStyle:R.name,useExcelHeader:!1})).useExcelHeader?`sep=${t.delimiter}${t.newline}`:"";for(const a of e){const{fields:e}=a;if(0===e.length)continue;if(t.headerStyle===R.full)n=n+z("name",e,t)+z("type",e,t)+z("unit",e,t)+z("dateFormat",e,t);else if(t.headerStyle===R.name){for(let s=0;s<e.length;s++)s>0&&(n+=t.delimiter),n+=`"${(0,D.CZ)(e[s],a).replace(/"/g,'""')}"`;n+=t.newline}const s=e[0].values.length;if(s>0){const a=e.map((e=>B(e,t)));for(let i=0;i<s;i++){for(let s=0;s<e.length;s++){s>0&&(n+=t.delimiter);const r=e[s].values.get(i);null!==r&&(n+=a[s](r))}n+=t.newline}}n+=t.newline}return n}var H=n(32700),W=n(23569);const q=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function Z(e){if(!e)return H.in.unknown;let t,n=H.in.unknown;for(const a of Object.keys(H.in)){const s=new RegExp(`\\b${a}\\b`,"i").exec(e);s&&(void 0===t||s.index<t)&&(n=H.in[a],t=s.index)}return n}function G(e){const t=H.in[e.toString().toLowerCase()];return t||H.in.unknown}function K(e,t){const n=new W.G,a=e.fields[t];for(let e=0;e<a.values.length;e++){const e=a.values.get(t);n.buffer.push(Z(e))}return Object.assign({},e,{fields:[...e.fields,{name:"LogLevel",type:P.fS.string,values:n,config:{}}]})}const Q={JSON:{buildMatcher:e=>new RegExp(`(?:{|,)\\s*"${e}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:e=>{try{const t=JSON.parse(e);return Object.keys(t).map((e=>`"${e}":${JSON.stringify(t[e])}`))}catch{}return[]},getLabelFromField:e=>(e.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:e=>(e.match(/:\s*(.*)$/)||[])[1],test:e=>{let t;try{t=JSON.parse(e)}catch(e){}return"object"==typeof t}},logfmt:{buildMatcher:e=>new RegExp(`(?:^|\\s)${(0,c.escapeRegExp)(e)}=("[^"]*"|\\S+)`),getFields:e=>{const t=[];return e.replace(new RegExp(q,"g"),(e=>(t.push(e.trim()),""))),t},getLabelFromField:e=>(e.match(q)||[])[1],getValueFromField:e=>(e.match(q)||[])[2],test:e=>q.test(e)}};function J(e,t){const n=e.filter((e=>t.test(e.entry))),a=n.length,s=(0,c.countBy)(n,(e=>{const n=e.entry.match(t);return n?n[1]:null}));return ee(s,a)}function Y(e,t){const n=e.filter((e=>void 0!==e.labels[t])),a=n.length,s=(0,c.countBy)(n,(e=>e.labels[t]));return ee(s,a)}function X(e){const t=e.filter((e=>null!=e)),n=(0,c.countBy)(t);return ee(n,t.length)}const ee=(e,t)=>(0,c.chain)(e).map(((e,n)=>({count:e,value:n,proportion:e/t}))).sortBy("count").reverse().value();function te(e){let t;try{Q.JSON.test(e)&&(t=Q.JSON)}catch(e){}return!t&&Q.logfmt.test(e)&&(t=Q.logfmt),t}const ne=(e,t)=>e.timeEpochMs<t.timeEpochMs?-1:e.timeEpochMs>t.timeEpochMs?1:e.timeEpochNs<t.timeEpochNs?-1:e.timeEpochNs>t.timeEpochNs?1:0,ae=(e,t)=>e.timeEpochMs>t.timeEpochMs?-1:e.timeEpochMs<t.timeEpochMs?1:e.timeEpochNs>t.timeEpochNs?-1:e.timeEpochNs<t.timeEpochNs?1:0,se=(e,t)=>{const n=e?ie(e.rows,t):[];return e?Object.assign({},e,{rows:n}):{hasUniqueLabels:!1,rows:n}},ie=(e,t)=>t===H.UV.Ascending?e.sort(ne):e.sort(ae),re=e=>e.labels.__error__?{hasError:!0,errorMessage:e.labels.__error__}:{hasError:!1},oe=e=>e.replace(/\\r\\n|\\n|\\t|\\r/g,(e=>"t"===e.slice(1)?"\t":"\n"));var le=n(14557),de=n(40946),ce=n(13068),ue=n(86499),he=n(58352),pe=n(27002);let ge;!function(e){e.id="id",e.title="title",e.subTitle="subtitle",e.mainStat="mainstat",e.secondaryStat="secondarystat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(ge||(ge={}));var me=n(95454),fe=n(19151),ve=n(24443);function be(e){let{xField:t,yField:n,nullValueMode:a}=e;const s=t.values,i=n.values,r=s.length;if(i.length!==r)throw new Error("Unexpected field length");const o=a===ve.Gl.Ignore,l=a===ve.Gl.AsZero,d=[];for(let e=0;e<r;e++){const t=s.get(e);let n=i.get(e);if(null===n){if(o)continue;l&&(n=0)}null!==t&&d.push([t,n])}return d}function xe(e,t){if(!t.from||!t.to||!e||0===e.length)return[];const n=t.from.valueOf(),a=t.to.valueOf(),s=e[0][1];return[[n,s],[a,s]]}var ye=n(38413),we=n(40245),je=n(87102);let Se;!function(e){e[e.Transformations=0]="Transformations",e[e.FieldConfig=1]="FieldConfig",e[e.FieldConfigOverrides=2]="FieldConfigOverrides"}(Se||(Se={}));var Ce=n(44991),ke=n(11449),Te=n(48595),Ie=n(4231)},14557:(e,t,n)=>{"use strict";n.d(t,{FT:()=>i,IU:()=>r,J8:()=>s,VS:()=>o,aA:()=>l});const a=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function s(e){const t={};return e.replace(a,((e,n,a,s)=>(t[n]=s,""))),t}function i(e){return e.reduce(((e,t)=>{if(!t)throw new Error("Need parsed labels to find common labels.");return e?(Object.keys(t).forEach((n=>{void 0!==e[n]&&e[n]===t[n]||delete e[n]})),Object.keys(e).forEach((n=>{void 0===t[n]&&delete e[n]}))):e=Object.assign({},t),e}),void 0)}function r(e,t){const n=Object.assign({},e);return Object.keys(t).forEach((e=>{delete n[e]})),n}function o(e,t){if(!e)return!0;for(const[n,a]of Object.entries(e))if(!t||t[n]!==a)return!1;return!0}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(!e||0===Object.keys(e).length)return t;const a=Object.keys(e).sort(),s=a.map((t=>`${t}="${e[t]}"`)).join(", ");return n?s:["{",s,"}"].join("")}},38413:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var a=n(29787),s=n(40245);let i,r,o={appSubUrl:""};const l=e=>{var t;const n=(e=>{try{return new URL(e)}catch{return}})(e);if(n&&n.origin!==window.location.origin)return e;const a=null!==(t=o.appSubUrl)&&void 0!==t?t:"",s=a.endsWith("/")?1:0,i=e.startsWith("http");let r=a;return e.startsWith("/")&&!i||(r=`${window.location.origin}${a}`),e.length>0&&0===e.indexOf(r)?e.slice(r.length-s):e},d={initialize:e=>{o=e.config,i=e.getTimeRangeForUrl,r=e.getVariablesUrlParams},stripBaseFromUrl:l,assureBaseUrl:e=>e.startsWith("/")?`${o.appSubUrl}${l(e)}`:e,updateSearchParams:(e,t)=>{const n=new URLSearchParams(t);try{const t=new URL(e);return n.forEach(((e,n)=>t.searchParams.set(n,e))),t.href}catch{const t=new URLSearchParams(e);return n.forEach(((e,n)=>{t.set(n,e)})),"?"+t.toString()}},getTimeRangeUrlParams:()=>i?s.Cj.toUrlParams(i()):null,getVariablesUrlParams:e=>{if(!r)return null;const t=r(e);return s.Cj.toUrlParams(t)},getUrlForPartial:(e,t)=>{const n=s.Cj.parseKeyValue(e.search.startsWith("?")?e.search.substring(1):e.search);for(const e of Object.keys(t))null===t[e]||void 0===t[e]?delete n[e]:n[e]=t[e];return s.Cj.renderUrl(e.pathname,n)},processUrl:e=>o.disableSanitizeHtml?e:a.QX.sanitizeUrl(e)}},86499:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]},40946:(e,t,n)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Number.isInteger(e))return e;let n=10**t,a=e*n*(1+Number.EPSILON);return Math.round(a)/n}function s(e){return((""+e).split(".")[1]||"").length}n.d(t,{O:()=>a,d:()=>s})},13068:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});const a=e=>Object.keys(e).reduce(((t,n)=>(void 0!==e[n]&&(t[n]=e[n]),t)),{})},95454:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});const a=e=>({label:e,value:e})},58352:(e,t,n)=>{"use strict";n.d(t,{e:()=>a,f:()=>s});const a=e=>{let t,n=Number.MAX_VALUE;for(let a=0;a<e.values.length;a++){const s=e.values.get(a);if(void 0!==t){const e=s-t;n=e,e<n&&(n=e)}t=s}return n},s=e=>{for(let t=0;t<e.values.length;t++){const n=e.values.get(t);if(null!=n){const e=n.toString();if(13===e.length&&e%1e3!=0)return!0}}return!1}},40245:(e,t,n)=>{"use strict";function a(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+").replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e){const t=[],n=/\[\]$/,s=e=>"[object Array]"===Object.prototype.toString.call(e),i=(e,n)=>{if("boolean"!=typeof(n="function"==typeof n?n():null==n?"":n))t[t.length]=a(e,!0)+"="+a(n,!0);else{const s=n?"":"="+a("false",!0);t[t.length]=a(e,!0)+s}},r=(e,a)=>{let o,l,d;if(e)if(s(a))for(o=0,l=a.length;o<l;o++)n.test(e)?i(e,a[o]):r(e,a[o]);else if(a&&"[object Object]"===String(a))for(d in a)r(e+"["+d+"]",a[d]);else i(e,a);else if(s(a))for(o=0,l=a.length;o<l;o++)i(a[o].name,a[o].value);else for(d in a)r(d,a[d]);return t};return r("",e).join("&")}function i(e){try{return decodeURIComponent(e)}catch(e){return}}n.d(t,{Cj:()=>r,S:()=>o});const r={renderUrl:function(e,t){return t&&Object.keys(t).length>0&&(e+="?"+s(t)),e},toUrlParams:s,appendQueryToUrl:function(e,t){if(null!=t&&""!==t){const n=e.indexOf("?");-1!==n?e.length-n>1&&(e+="&"):e+="?",e+=t}return e},getUrlSearchParams:function(){const e=window.location.search.substring(1).split("&"),t={};for(const n of e){const e=n.split("=");if(e.length>1){const n=decodeURIComponent(e[0]),a=decodeURIComponent(e[1]);t[n]=n in t?[...t[n],a]:[a]}else if(1===e.length){t[decodeURIComponent(e[0])]=!0}}return t},parseKeyValue:function(e){var t={};const n=(e||"").split("&");for(let e of n){let n,a,s;if(e&&(a=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(a=e.substring(0,n),s=e.substring(n+1)),a=i(a),void 0!==a)){let e;s=void 0===s||i(s),e="string"==typeof s&&""!==s&&("true"===s||"false"===s)?"true"===s:s,t.hasOwnProperty(a)?Array.isArray(t[a])?t[a].push(s):t[a]=[t[a],isNaN(e)?s:e]:t[a]=isNaN(e)?s:e}}return t}};function o(e,t){return void 0!==t&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(e)}},4231:(e,t,n)=>{"use strict";n.d(t,{HU:()=>o,Jb:()=>l,vh:()=>r});var a=n(22754),s=n(7171),i=n(78689);function r(e,t){for(const n of e)switch(n.type){case i.Hi.ValueToText:if(null==t)continue;const e=n.options[t];if(e)return e;break;case i.Hi.RangeToText:if(null==t)continue;const a=parseFloat(t);if(isNaN(a))continue;if(!isNaN(n.options.from)&&a<n.options.from)continue;if(!isNaN(n.options.to)&&a>n.options.to)continue;return n.options.result;case i.Hi.RegexToText:if(null==t)continue;if("string"!=typeof t)continue;const r=(0,s.jO)(n.options.pattern);if(t.match(r)){const e=Object.assign({},n.options.result);return null!=e.text&&(e.text=t.replace(r,n.options.result.text||"")),e}case i.Hi.SpecialValue:switch(n.options.match){case i.eE.Null:if(null==t)return n.options.result;break;case i.eE.NaN:if(isNaN(t))return n.options.result;break;case i.eE.NullAndNaN:if(isNaN(t)||null==t)return n.options.result;break;case i.eE.True:if(!0===t||"true"===t)return n.options.result;break;case i.eE.False:if(!1===t||"false"===t)return n.options.result;break;case i.eE.Empty:if(""===t)return n.options.result}}return null}let o;function l(e,t){const n=[];let a=e.mappingType;if(e.mappingType||(e.valueMaps&&e.valueMaps.length?a=1:e.rangeMaps&&e.rangeMaps.length&&(a=2)),1===a)for(let a=0;a<e.valueMaps.length;a++){var s,r;const o=e.valueMaps[a];n.push(d(Object.assign({},o,{id:a,type:i.Hi.ValueToText}),(null===(s=e.fieldConfig)||void 0===s||null===(r=s.defaults)||void 0===r?void 0:r.thresholds)||t))}else if(2===a)for(let a=0;a<e.rangeMaps.length;a++){var o,l;const s=e.rangeMaps[a];n.push(d(Object.assign({},s,{id:a,type:i.Hi.RangeToText}),(null===(o=e.fieldConfig)||void 0===o||null===(l=o.defaults)||void 0===l?void 0:l.thresholds)||t))}return n}function d(e,t){const n={type:i.Hi.ValueToText,options:{}},s=[];let r;const l=parseFloat(e.text);if(t&&!isNaN(l)){const e=(0,a.m1)(l,t.steps);e&&e.color&&(r=e.color)}switch(e.type){case o.ValueToText:case i.Hi.ValueToText:null!=e.value&&("null"===e.value?s.push({type:i.Hi.SpecialValue,options:{match:i.eE.Null,result:{text:e.text,color:r}}}):n.options[String(e.value)]={text:e.text,color:r});break;case o.RangeToText:case i.Hi.RangeToText:"null"===e.from||"null"===e.to?s.push({type:i.Hi.SpecialValue,options:{match:i.eE.Null,result:{text:e.text,color:r}}}):s.push({type:i.Hi.RangeToText,options:{from:+e.from,to:+e.to,result:{text:e.text,color:r}}})}return Object.keys(n.options).length>0&&s.unshift(n),s[0]}!function(e){e[e.ValueToText=1]="ValueToText",e[e.RangeToText=2]="RangeToText"}(o||(o={}))},48595:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var a=n(3321),s=n(46089),i=n(48099),r=n(40818);function o(e){let{whileLoading:t,source:n}=e;return(0,a.T)((0,s.H)(200).pipe((0,i.h)(t),(0,r.R)(n)),n)}},57595:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>a.Cf,FH:()=>a.FH,IR:()=>a.IR,QW:()=>a.QW,Qj:()=>a.Qj,SP:()=>a.SP,SR:()=>a.SR,Td:()=>a.Td,bn:()=>a.bn,br:()=>a.br,q2:()=>a.q2,vb:()=>a.vb,zc:()=>a.zc});var a=n(51130)},51130:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>j,FH:()=>u,IR:()=>m,QW:()=>C,Qj:()=>v,SP:()=>b,SR:()=>x,Td:()=>S,bn:()=>h,br:()=>g,q2:()=>p,vb:()=>y,zc:()=>o});var a=n(82897),s=n(41717),i=n(60915),r=n(67670);function o(e){var t,n;return`${null!==(t=e.prefix)&&void 0!==t?t:""}${e.text}${null!==(n=e.suffix)&&void 0!==n?n:""}`}let l=[];const d={};let c=!1;function u(e,t){if(null===e)return"";if(e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY)return e.toLocaleString();if(null==t&&(t=function(e){const t=Math.abs(e);let n=1-Math.floor(Math.log(t)/Math.LN10);const a=Math.pow(10,-n);t/a>2.25&&++n;e%1==0&&(n=0);return Math.max(0,n)}(e)),0===e)return e.toFixed(t);const n=t?Math.pow(10,Math.max(0,t)):1,a=String(Math.round(e*n)/n);if(-1!==a.indexOf("e")||0===e)return a;const s=a.indexOf("."),i=-1===s?0:a.length-s-1;return i<t?(i?a:a+".")+String(n).slice(1,t-i+1):a}function h(e,t,n){return{text:u(e,t),suffix:n}}function p(e,t){return(n,a)=>{if(null===n)return{text:""};const s=u(n,a);return e?t?{text:s,prefix:e}:{text:s,suffix:" "+e}:{text:s}}}function g(e){return e&&e.startsWith("bool")}function m(e,t){return n=>({text:n?e:t})}const f=(e,t)=>Math.log10(t)/Math.log10(e);function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(s,i)=>{if(null===s)return{text:""};if(s===Number.NEGATIVE_INFINITY||s===Number.POSITIVE_INFINITY||isNaN(s))return{text:s.toLocaleString()};const r=0===s?0:Math.floor(f(e,Math.abs(s))),o=t[(0,a.clamp)(n+r,0,t.length-1)];return{text:u(s/e**(0,a.clamp)(r,-n,t.length-n-1),i),suffix:o}}}function b(e,t){return null==e?{text:""}:{text:e.toLocaleString(void 0,{maximumFractionDigits:t})}}function x(e){const t=v(1e3,["","K","M","B","T"]);return(n,a,s)=>{if(null===n)return{text:""};const i=t(n,a,s);return i.suffix+=" "+e,i}}function y(e){return{text:`${e}`}}function w(){l=(0,s.C)();for(const e of l)for(const t of e.formats)d[t.id]=t.fn;[{from:"farenheit",to:"fahrenheit"}].forEach((e=>{const t=d[e.to];t&&(d[e.from]=t)})),c=!0}function j(e){if(!e)return p("");c||w();const t=d[e];if(!t&&e){let t=e.indexOf(":");if(t>0){const n=e.substring(0,t),a=e.substring(t+1);if("prefix"===n)return p(a,!0);if("suffix"===n)return p(a,!1);if("time"===n)return(0,i.cN)(a);if("si"===n){const e=(0,r.dT)(a.charAt(0)),t=0===e?a:a.substring(1);return(0,r.i7)(t,e)}if("count"===n)return x(a);if("currency"===n)return(0,r.Aq)(a);if("bool"===n){if(t=a.indexOf("/"),t>=0){return m(a.substring(0,t),a.substring(t+1))}return m(a,"-")}}return p(e)}return t}function S(){return c||w(),d}function C(){return c||w(),l.map((e=>({text:e.name,submenu:e.formats.map((e=>({text:e.name,value:e.id})))})))}},17502:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var a=n(54573);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s(this,"length",0),s(this,"source",[]),this.length=e}setLength(e){if(e>this.length)this.length=e;else if(e<this.length){const t=[];for(const n of this.source)if(t.push(n),n.end>e){n.end=e;break}this.source=t,this.length=e}}append(e){const t={start:this.length,end:this.length+e.length,values:e};return this.length=t.end,this.source.push(t),t}get(e){for(let t=0;t<this.source.length;t++){const n=this.source[t];if(e>=n.start&&e<n.end)return n.values.get(e-n.start)}}toArray(){return(0,a.n)(this)}toJSON(){return(0,a.n)(this)}}},80612:(e,t,n)=>{"use strict";n.d(t,{d:()=>r});var a=n(33071),s=n(54573);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends a.G{constructor(e){super(),i(this,"buffer",void 0),i(this,"index",void 0),i(this,"capacity",void 0),i(this,"tail",void 0),i(this,"add",void 0),this.buffer=e.buffer||[],this.capacity=this.buffer.length,this.tail="head"!==e.append,this.index=0,this.add=this.getAddFunction(),e.capacity&&this.setCapacity(e.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?e=>{this.buffer.push(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:e=>{this.buffer.unshift(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?e=>{this.buffer[this.index]=e,this.index=(this.index+1)%this.buffer.length}:e=>{let t=this.index-1;t<0&&(t=this.buffer.length-1),this.buffer[t]=e,this.index=t}}setCapacity(e){if(this.capacity===e)return;const t=this.toArray();if(e>this.length)this.buffer=t;else if(e<this.capacity){const n=this.length-e;this.tail?this.buffer=t.slice(n,t.length):this.buffer=t.slice(0,t.length-n)}this.capacity=e,this.index=0,this.add=this.getAddFunction()}setAppendMode(e){const t="head"!==e;t!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=t,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(e){return this.buffer[(e+this.index)%this.buffer.length]}set(e,t){this.buffer[(e+this.index)%this.buffer.length]=t}get length(){return this.buffer.length}toArray(){return(0,s.n)(this)}toJSON(){return(0,s.n)(this)}}},33071:(e,t,n)=>{"use strict";n.d(t,{G:()=>s,s:()=>i});var a=n(54573);class s{*iterator(){for(let e=0;e<this.length;e++)yield this.get(e)}[Symbol.iterator](){return this.iterator()}forEach(e){return i(this).forEach(e)}map(e){return i(this).map(e)}filter(e){return i(this).filter(e)}toArray(){return(0,a.n)(this)}toJSON(){return this.toArray()}}function i(e){return{*[Symbol.iterator](){for(let t=0;t<e.length;t++)yield e.get(t)},forEach(t){for(let n=0;n<e.length;n++)t(e.get(n))},map(t){const n=[];for(let a=0;a<e.length;a++)n.push(t(e.get(a),a));return n},filter(e){const t=[];for(const n of this)e(n)&&t.push(n);return t}}}},15449:(e,t,n)=>{"use strict";n.d(t,{l$:()=>a.l,Gt:()=>s.G,sq:()=>g.s,rM:()=>o.r,dV:()=>i.d,uI:()=>r.u,$Y:()=>u,rm:()=>p,oH:()=>l.o,sD:()=>c.s});var a=n(17502),s=n(23569),i=n(80612),r=n(30538),o=n(96469),l=n(60158),d=n(57595),c=n(33071);class u extends c.G{constructor(e,t){super(),this.source=e,this.formatter=t}get length(){return this.source.length}get(e){const t=this.source.get(e);return(0,d.zc)(this.formatter(t))}}var h=n(78689);class p extends c.G{constructor(e){super(),this.len=e}get length(){return this.len}get(e){return e}static newField(e){return{name:"",values:new p(e),type:h.fS.number,config:{min:0,max:e-1}}}}var g=n(98070)},16695:(e,t,n)=>{"use strict";n.d(t,{wl:()=>s});const a={TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},searchInput:"search transformations"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${a.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"}},s={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add data source ${e}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Dashboard settings page title"},Annotations:{List:{addAnnotationCTA:a.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:a.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:a.CallToActionCard.button("Add variable"),addVariableCTAV2:a.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button"},QueryVariable:{queryOptionsDataSourceSelect:a.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public Dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",SaveConfigButton:"data-testid public dashboard save config button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemRow:"Playlist item row",itemIdType:"Playlist item dashboard by ID type",itemTagType:"Playlist item dashboard by Tag type",itemMoveUp:"Move playlist item order up",itemMoveDown:"Move playlist item order down",itemDelete:"Delete playlist item"}},components:a}},82653:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,Z:()=>s});n(68404);var a=n(45916);let s=e=>{let{message:t}=e;return(0,a.jsxs)("div",{children:["Unable to render data: ",t,"."]})};function i(e){s=e}},35364:(e,t,n)=>{"use strict";n.d(t,{$:()=>i,L:()=>r});n(68404);var a,s=n(45916);let i=()=>a||(a=(0,s.jsx)("div",{children:"PanelRenderer can only be used after Grafana instance has been started."}));function r(e){i=e}},8087:(e,t,n)=>{"use strict";n.d(t,{O:()=>r,v:()=>d});var a=n(82897),s=n(43215);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e){i(this,"isPublicDashboardView",void 0),i(this,"datasources",{}),i(this,"panels",{}),i(this,"minRefreshInterval",""),i(this,"appUrl",""),i(this,"appSubUrl",""),i(this,"windowTitlePrefix",""),i(this,"buildInfo",void 0),i(this,"newPanelTitle",""),i(this,"bootData",void 0),i(this,"externalUserMngLinkUrl",""),i(this,"externalUserMngLinkName",""),i(this,"externalUserMngInfo",""),i(this,"allowOrgCreate",!1),i(this,"feedbackLinksEnabled",!0),i(this,"disableLoginForm",!1),i(this,"defaultDatasource",""),i(this,"alertingEnabled",!1),i(this,"alertingErrorOrTimeout",""),i(this,"alertingNoDataOrNullValues",""),i(this,"alertingMinInterval",1),i(this,"angularSupportEnabled",!1),i(this,"authProxyEnabled",!1),i(this,"exploreEnabled",!1),i(this,"queryHistoryEnabled",!1),i(this,"helpEnabled",!1),i(this,"profileEnabled",!1),i(this,"ldapEnabled",!1),i(this,"jwtHeaderName",""),i(this,"jwtUrlLogin",!1),i(this,"sigV4AuthEnabled",!1),i(this,"azureAuthEnabled",!1),i(this,"samlEnabled",!1),i(this,"samlName",""),i(this,"autoAssignOrg",!0),i(this,"verifyEmailEnabled",!1),i(this,"oauth",{}),i(this,"rbacEnabled",!0),i(this,"rbacBuiltInRoleAssignmentEnabled",!1),i(this,"disableUserSignUp",!1),i(this,"loginHint",""),i(this,"passwordHint",""),i(this,"loginError",void 0),i(this,"navTree",void 0),i(this,"viewersCanEdit",!1),i(this,"editorsCanAdmin",!1),i(this,"disableSanitizeHtml",!1),i(this,"liveEnabled",!0),i(this,"theme",void 0),i(this,"theme2",void 0),i(this,"pluginsToPreload",[]),i(this,"featureToggles",{}),i(this,"licenseInfo",{}),i(this,"rendererAvailable",!1),i(this,"dashboardPreviews",{systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1}),i(this,"rendererVersion",""),i(this,"secretsManagerPluginEnabled",!1),i(this,"http2Enabled",!1),i(this,"dateFormats",void 0),i(this,"sentry",{enabled:!1,dsn:"",customEndpoint:"",sampleRate:1}),i(this,"grafanaJavascriptAgent",{enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1}),i(this,"pluginCatalogURL","https://grafana.com/grafana/plugins/"),i(this,"pluginAdminEnabled",!0),i(this,"pluginAdminExternalManageEnabled",!1),i(this,"pluginCatalogHiddenPlugins",[]),i(this,"expressionsEnabled",!1),i(this,"customTheme",void 0),i(this,"awsAllowedAuthProviders",[]),i(this,"awsAssumeRoleEnabled",!1),i(this,"azure",{managedIdentityEnabled:!1}),i(this,"caching",{enabled:!1}),i(this,"geomapDefaultBaseLayerConfig",void 0),i(this,"geomapDisableCustomBaseLayer",void 0),i(this,"unifiedAlertingEnabled",!1),i(this,"unifiedAlerting",{minInterval:""}),i(this,"applicationInsightsConnectionString",void 0),i(this,"applicationInsightsEndpointUrl",void 0),i(this,"recordedQueries",{enabled:!0}),i(this,"featureHighlights",{enabled:!1}),i(this,"reporting",{enabled:!0}),i(this,"googleAnalyticsId",void 0),i(this,"rudderstackWriteKey",void 0),i(this,"rudderstackDataPlaneUrl",void 0),i(this,"rudderstackSdkUrl",void 0),i(this,"rudderstackConfigUrl",void 0);const t=e.bootData.user.lightTheme?"light":"dark";this.theme2=(0,s.createTheme)({colors:{mode:t}}),this.theme=this.theme2.v1,this.bootData=e.bootData,this.isPublicDashboardView=e.bootData.settings.isPublicDashboardView;const n={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,a.merge)(this,n,e),this.buildInfo=e.buildInfo||n.buildInfo,this.dateFormats&&s.systemDateFormats.update(this.dateFormats),function(e){if(-1===window.location.href.indexOf("__feature"))return;new URLSearchParams(window.location.search).forEach(((t,n)=>{if(n.startsWith("__feature.")){const a=n.substring(10),s="true"===t;s!==e.featureToggles[n]&&(e.featureToggles[a]=s,console.log(`Setting feature toggle ${a} = ${s}`))}}))}(this),this.theme2.flags.topnav=this.featureToggles.topnav}}const o=window.grafanaBootData||{settings:{},user:{},navTree:[]},l=o.settings;l.bootData=o;const d=new r(l)},90923:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BackendDataSourceResponse:()=>F.BackendDataSourceResponse,CopyPanelEvent:()=>r.EK,DataResponse:()=>F.DataResponse,DataSourcePicker:()=>H,DataSourcePickerProps:()=>i.DataSourcePickerProps,DataSourcePickerState:()=>i.DataSourcePickerState,DataSourceWithBackend:()=>N.CK,EchoEventType:()=>r.ee,GrafanaBootConfig:()=>o.O,HealthCheckError:()=>N.ZA,HealthCheckResult:()=>N.HealthCheckResult,HealthCheckResultDetails:()=>N.HealthCheckResultDetails,HealthStatus:()=>N.QO,HistoryWrapper:()=>r._i,MetaAnalyticsEventName:()=>l,PanelDataErrorView:()=>P.Z,PanelDataErrorViewProps:()=>P.PanelDataErrorViewProps,PanelRenderer:()=>D.$,PanelRendererProps:()=>D.PanelRendererProps,PluginCssOptions:()=>a.PluginCssOptions,QueryRunnerFactory:()=>s.QueryRunnerFactory,RefreshEvent:()=>r.U5,StreamOptionsProvider:()=>N.StreamOptionsProvider,StreamingFrameAction:()=>r.T0,SystemJS:()=>p,ThemeChangedEvent:()=>r.hD,TimeRangeUpdatedEvent:()=>r.md,config:()=>o.v,createQueryRunner:()=>$,featureEnabled:()=>y,frameToMetricFindValue:()=>F.S9,getAngularLoader:()=>r.wi,getAppEvents:()=>r.N$,getBackendSrv:()=>r.i,getDataSourceSrv:()=>r.FC,getEchoSrv:()=>r.RP,getGrafanaLiveSrv:()=>r.gj,getLegacyAngularInjector:()=>r.VH,getLocationSrv:()=>r.Yn,getTemplateSrv:()=>r.JL,isExperimentViewEvent:()=>u,isFetchError:()=>r.kW,isInteractionEvent:()=>c,isPageviewEvent:()=>d,loadPluginCss:()=>g,locationSearchToObject:()=>r.Ox,locationService:()=>r.E1,logDebug:()=>I,logError:()=>O,logInfo:()=>k,logWarning:()=>T,navigationLogger:()=>r.GQ,registerEchoBackend:()=>r.e6,reportExperimentView:()=>x,reportInteraction:()=>b,reportMetaAnalytics:()=>f,reportPageview:()=>v,setAngularLoader:()=>r.WZ,setAppEvents:()=>r.Xw,setBackendSrv:()=>r.jW,setDataSourceSrv:()=>r.wS,setEchoSrv:()=>r.tz,setGrafanaLiveSrv:()=>r.cA,setLegacyAngularInjector:()=>r.tA,setLocationService:()=>r.ZG,setLocationSrv:()=>r.x_,setQueryRunnerFactory:()=>R,setTemplateSrv:()=>r.lD,toDataQueryError:()=>A.P,toDataQueryResponse:()=>F.z1});var a={};n.r(a),n.d(a,{i:()=>p,Y:()=>g});var s={};n.r(s),n.d(s,{A:()=>$,p:()=>R});var i={};n.r(i),n.d(i,{q:()=>H});var r=n(15301),o=n(8087);let l;!function(e){e.DashboardView="dashboard-view",e.DataRequest="data-request"}(l||(l={}));const d=e=>Boolean(e.payload.page),c=e=>Boolean(e.payload.interactionName),u=e=>Boolean(e.payload.experimentId);var h=n(59587);const p=n.n(h)();function g(e){const t=o.v.bootData.user.lightTheme?e.light:e.dark;return p.import(`${t}!css`)}var m=n(71391);const f=e=>{(0,m.RP)().addEvent({type:m.ee.MetaAnalytics,payload:e})},v=()=>{var e;const t=r.E1.getLocation(),n=`${null!==(e=o.v.appSubUrl)&&void 0!==e?e:""}${t.pathname}${t.search}${t.hash}`;(0,m.RP)().addEvent({type:m.ee.Pageview,payload:{page:n}})},b=(e,t)=>{(0,m.RP)().addEvent({type:m.ee.Interaction,payload:{interactionName:e,properties:t}})},x=(e,t,n)=>{(0,m.RP)().addEvent({type:m.ee.ExperimentView,payload:{experimentId:e,experimentGroup:t,experimentVariant:n}})},y=e=>{const{enabledFeatures:t}=o.v.licenseInfo;return t&&t[e]};var w=n(51882),j=n(48606),S=n(70996),C=n(67556);function k(e,t){o.v.grafanaJavascriptAgent.enabled&&S.W.api.pushLog([e],{level:C.i.INFO,context:t}),o.v.sentry.enabled&&(0,w.uT)(e,{level:j.z.Info,contexts:t})}function T(e,t){o.v.grafanaJavascriptAgent.enabled&&S.W.api.pushLog([e],{level:C.i.WARN,context:t}),o.v.sentry.enabled&&(0,w.uT)(e,{level:j.z.Warning,contexts:t})}function I(e,t){o.v.grafanaJavascriptAgent.enabled&&S.W.api.pushLog([e],{level:C.i.DEBUG,context:t}),o.v.sentry.enabled&&(0,w.uT)(e,{level:j.z.Debug,contexts:t})}function O(e,t){o.v.grafanaJavascriptAgent.enabled&&S.W.api.pushLog([e.message],{level:C.i.ERROR,context:t}),o.v.sentry.enabled&&(0,w.Tb)(e,{contexts:t})}var N=n(20467),F=n(62362),D=n(35364),P=n(82653),A=n(17462);let M;const R=e=>{if(M)throw new Error("Runner should only be set when Grafana is starting.");M=e},$=()=>{if(!M)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return M()};var L=n(68404),E=n(43215),V=n(16695),B=n(3490),z=n(17548),_=n(45916);function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H extends L.PureComponent{constructor(e){super(e),U(this,"dataSourceSrv",(0,z.F)()),U(this,"state",{}),U(this,"onChange",((e,t)=>{if("clear"===t.action&&this.props.onClear)return void this.props.onClear();const n=this.dataSourceSrv.getInstanceSettings(e.value);n&&(this.props.onChange(n),this.setState({error:void 0}))}))}componentDidMount(){const{current:e}=this.props;this.dataSourceSrv.getInstanceSettings(e)||this.setState({error:"Could not find data source "+e})}getCurrentValue(){const{current:e,hideTextValue:t,noDefault:n}=this.props;if(!e&&n)return;const a=this.dataSourceSrv.getInstanceSettings(e);if(a)return{label:a.name.slice(0,37),value:a.uid,imgUrl:a.meta.info.logos.small,hideText:t,meta:a.meta};const s=(0,E.getDataSourceUID)(e);return s===N.hr.uid||s===N.hr.name?{label:s,value:s,hideText:t}:{label:(null!=s?s:"no name")+" - not found",value:null!=s?s:void 0,imgUrl:"",hideText:t}}getDataSourceOptions(){const{alerting:e,tracing:t,metrics:n,mixed:a,dashboard:s,variables:i,annotations:r,pluginId:o,type:l,filter:d,logs:c}=this.props;return this.dataSourceSrv.getList({alerting:e,tracing:t,metrics:n,logs:c,dashboard:s,mixed:a,variables:i,annotations:r,pluginId:o,filter:d,type:l}).map((e=>({value:e.name,label:`${e.name}${e.isDefault?" (default)":""}`,imgUrl:e.meta.info.logos.small,meta:e.meta})))}render(){const{autoFocus:e,onBlur:t,onClear:n,openMenuOnFocus:a,placeholder:s,width:i,inputId:r}=this.props,{error:o}=this.state,l=this.getDataSourceOptions(),d=this.getCurrentValue(),c="function"==typeof n;return(0,_.jsx)("div",{"aria-label":V.wl.components.DataSourcePicker.container,children:(0,_.jsx)(B.Select,{"aria-label":V.wl.components.DataSourcePicker.inputV2,inputId:r||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:c,backspaceRemovesValue:!1,onChange:this.onChange,options:l,autoFocus:e,onBlur:t,width:i,openMenuOnFocus:a,maxMenuHeight:500,placeholder:s,noOptionsMessage:"No datasources found",value:null!=d?d:null,invalid:Boolean(o)||Boolean(this.props.invalid),getOptionLabel:e=>e.meta&&(0,E.isUnsignedPluginSignature)(e.meta.signature)&&e!==d?(0,_.jsxs)(B.HorizontalGroup,{align:"center",justify:"space-between",children:[(0,_.jsx)("span",{children:e.label})," ",(0,_.jsx)(B.PluginSignatureBadge,{status:e.meta.signature})]}):e.label||""})})}}U(H,"defaultProps",{autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"})},71391:(e,t,n)=>{"use strict";let a,s;function i(e){s=e}function r(){return s}n.d(t,{RP:()=>r,e6:()=>o,ee:()=>a,tz:()=>i}),function(e){e.Performance="performance",e.MetaAnalytics="meta-analytics",e.Sentry="sentry",e.Pageview="pageview",e.Interaction="interaction",e.ExperimentView="experimentview",e.GrafanaJavascriptAgent="grafana-javascript-agent"}(a||(a={}));const o=e=>{r().addBackend(e)}},17548:(e,t,n)=>{"use strict";let a;function s(e){a=e}function i(){return a}n.d(t,{F:()=>i,w:()=>s})},15301:(e,t,n)=>{"use strict";function a(e){return"object"==typeof e&&null!==e&&"status"in e&&"data"in e}let s;n.d(t,{EK:()=>$,ee:()=>g.ee,_i:()=>T,U5:()=>A,T0:()=>w.T0,hD:()=>M,md:()=>R,wi:()=>d,N$:()=>V,i:()=>r,FC:()=>c.F,RP:()=>g.RP,gj:()=>w.gj,VH:()=>y,Yn:()=>p,JL:()=>v,kW:()=>a,Ox:()=>I,E1:()=>O,GQ:()=>D,e6:()=>g.e6,WZ:()=>l,Xw:()=>E,jW:()=>i,wS:()=>c.w,tz:()=>g.tz,cA:()=>w.cA,tA:()=>x,ZG:()=>N,x_:()=>h,lD:()=>f});const i=e=>{s=e},r=()=>s;let o;function l(e){o=e}function d(){return o}var c=n(17548);let u;function h(e){u=e}function p(){return u}var g=n(71391);let m;const f=e=>{m=e},v=()=>m;let b;const x=e=>{b=e},y=()=>b;var w=n(82961),j=n(97594),S=n(43215),C=n(3490),k=n(8087);class T{constructor(e){var t,n,a,s;s=void 0,(a="history")in(n=this)?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,this.history=e||j.lX({basename:null!==(t=k.v.appSubUrl)&&void 0!==t?t:"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(e,t){const n=this.history.location,a=this.getSearchObject();for(const t of Object.keys(e))null===e[t]||void 0===e[t]?delete a[t]:a[t]=e[t];const s=S.urlUtil.renderUrl(n.pathname,a);t?this.history.replace(s,this.history.location.state):this.history.push(s,this.history.location.state)}push(e){this.history.push(e)}replace(e){this.history.replace(e)}reload(){var e;const t=null===(e=this.history.location.state)||void 0===e?void 0:e.routeReloadCounter;this.history.replace(Object.assign({},this.history.location,{state:{routeReloadCounter:t?t+1:1}}))}getLocation(){return this.history.location}getSearchObject(){return I(this.history.location.search)}update(e){if((0,S.deprecationWarning)("LocationSrv","update","partial, push or replace"),e.partial&&e.query)this.partial(e.query,e.partial);else{const t={pathname:e.path};e.query&&(t.search=S.urlUtil.toUrlParams(e.query)),e.replace?this.replace(t):this.push(t)}}}function I(e){let t="number"==typeof e?String(e):e;return t.length>0?t.startsWith("?")?S.urlUtil.parseKeyValue(t.substring(1)):S.urlUtil.parseKeyValue(t):{}}let O=new T;const N=e=>{throw new Error("locationService can be only overriden in test environment")},F=(0,C.createLogger)("Router"),D=F.logger;function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,C.attachDebugger)("location",O,F);class A extends S.BusEventBase{}P(A,"type","refresh");class M extends S.BusEventWithPayload{}P(M,"type","theme-changed");class R extends S.BusEventWithPayload{}P(R,"type","time-range-updated");class $ extends S.BusEventWithPayload{}let L;function E(e){L=e}function V(){return L}P($,"type","copy-panel")},82961:(e,t,n)=>{"use strict";let a,s;n.d(t,{T0:()=>a,cA:()=>i,gj:()=>r}),function(e){e.Append="append",e.Replace="replace"}(a||(a={}));const i=e=>{s=e},r=()=>s},20467:(e,t,n)=>{"use strict";n.d(t,{B9:()=>v,CK:()=>f,PI:()=>b,Pr:()=>p,QO:()=>m,ZA:()=>g,hr:()=>h});var a=n(71808),s=n(3321),i=n(75250),r=n(14444),o=n(43215),l=n(8087),d=n(15301),c=n(62362);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function p(e){var t;if(!e)return!1;const n=null!==(t=e.type)&&void 0!==t?t:e;return n===h.type||"-100"===n}class g extends Error{constructor(e,t){super(e),u(this,"details",void 0),this.details=t,this.name="HealthCheckError"}}let m;!function(e){e.Unknown="UNKNOWN",e.OK="OK",e.Error="ERROR"}(m||(m={}));class f extends o.DataSourceApi{constructor(e){super(e),u(this,"streamOptionsProvider",b)}query(e){const{intervalMs:t,maxDataPoints:n,range:s,requestId:u}=e;let g=e.targets;this.filterQuery&&(g=g.filter((e=>this.filterQuery(e))));const m=g.map((a=>{let s=this.getRef(),i=this.id;if(p(a.datasource))return Object.assign({},a,{datasource:h});if(a.datasource){var r;const t=(0,d.FC)().getInstanceSettings(a.datasource,e.scopedVars);if(!t)throw new Error(`Unknown Datasource: ${JSON.stringify(a.datasource)}`);s=null!==(r=t.rawRef)&&void 0!==r?r:(0,o.getDataSourceRef)(t),i=t.id}return Object.assign({},this.applyTemplateVariables(a,e.scopedVars),{datasource:s,datasourceId:i,intervalMs:t,maxDataPoints:n})}));if(!m.length)return(0,a.of)({data:[]});const f={queries:m};return s&&(f.range=s,f.from=s.from.valueOf().toString(),f.to=s.to.valueOf().toString()),l.v.featureToggles.queryOverLive?(0,d.gj)().getQueryData({request:e,body:f}):(0,d.i)().fetch({url:"/api/ds/query",method:"POST",data:f,requestId:u}).pipe((0,i.w)((t=>{var n;const s=(0,c.z1)(t,m);return null!==(n=s.data)&&void 0!==n&&n.length&&s.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?v(s,e,this.streamOptionsProvider):(0,a.of)(s)})),(0,r.K)((e=>(0,a.of)((0,c.z1)(e)))))}interpolateVariablesInQueries(e,t){return e.map((e=>this.applyTemplateVariables(e,t)))}applyTemplateVariables(e,t){return e}async getResource(e,t){return(0,d.i)().get(`/api/datasources/${this.id}/resources/${e}`,t)}async postResource(e,t){return(0,d.i)().post(`/api/datasources/${this.id}/resources/${e}`,Object.assign({},t))}async callHealthCheck(){return(0,d.i)().request({method:"GET",url:`/api/datasources/${this.id}/health`,showErrorAlert:!1}).then((e=>e)).catch((e=>e.data))}async testDatasource(){return this.callHealthCheck().then((e=>{if(e.status===m.OK)return{status:"success",message:e.message};throw new g(e.message,e.details)}))}}function v(e,t,n){const i=(0,d.gj)();if(!i)return(0,a.of)(e);const r=[],l=[];for(const a of e.data){var c;const e=(0,o.parseLiveChannelAddress)(null===(c=a.meta)||void 0===c?void 0:c.channel);if(e){const s=a;l.push(i.getDataStream({addr:e,buffer:n(t,s),frame:(0,o.dataFrameToJSON)(a)}))}else r.push(a)}return r.length&&l.push((0,a.of)(Object.assign({},e,{data:r}))),1===l.length?l[0]:(0,s.T)(...l)}const b=(e,t)=>{var n,a;const s={maxLength:null!==(n=e.maxDataPoints)&&void 0!==n?n:500,action:d.T0.Append};return"now"===(null===(a=e.rangeRaw)||void 0===a?void 0:a.to)&&(s.maxDelta=e.range.to.valueOf()-e.range.from.valueOf()),s};f=(0,o.makeClassES5Compatible)(f)},62362:(e,t,n)=>{"use strict";n.d(t,{Gw:()=>o,S9:()=>l,z1:()=>r});var a=n(43215),s=n(17462);const i={severity:"info",text:"Cached response"};function r(e,t){var n;const r={data:[],state:a.LoadingState.Done};if(null!==(n=e.data)&&void 0!==n&&n.results){const n=e.data.results,s=null!=t&&t.length?t.map((e=>e.refId)):Object.keys(n),v=function(e){const t=null==e?void 0:e.headers;if(!t||!t.get)return!1;return"HIT"===t.get("X-Cache")}(e),b=[];for(const e of s){const t=n[e];t&&(t.refId=e,b.push(t))}for(const e of b){var o,l,d;if(e.error&&(r.error||(r.error={refId:e.refId,message:e.error},r.state=a.LoadingState.Error)),null!==(o=e.frames)&&void 0!==o&&o.length)for(let t of e.frames){v&&(c=t,u=void 0,h=void 0,p=void 0,g=void 0,m=void 0,f=void 0,t=Object.assign({},c,{schema:Object.assign({},c.schema,{fields:[...null!==(u=null===(h=c.schema)||void 0===h?void 0:h.fields)&&void 0!==u?u:[]],meta:Object.assign({},null===(p=c.schema)||void 0===p?void 0:p.meta,{notices:[...null!==(g=null===(m=c.schema)||void 0===m||null===(f=m.meta)||void 0===f?void 0:f.notices)&&void 0!==g?g:[],i],isCachedResponse:!0})})}));const n=(0,a.dataFrameFromJSON)(t);n.refId||(n.refId=e.refId),r.data.push(n)}else{if(null!==(l=e.series)&&void 0!==l&&l.length)for(const t of e.series)t.refId||(t.refId=e.refId),r.data.push((0,a.toDataFrame)(t));if(null!==(d=e.tables)&&void 0!==d&&d.length)for(const t of e.tables)t.refId||(t.refId=e.refId),r.data.push((0,a.toDataFrame)(t))}}}var c,u,h,p,g,m,f;return e.status&&200!==e.status&&(r.state!==a.LoadingState.Error&&(r.state=a.LoadingState.Error),r.error||(r.error=(0,s.P)(e))),r}function o(e){var t,n,a,s;const i=r(e);var o,l;if(null!==(t=i.error)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message)return{status:"error",message:i.error.data.message,details:null!==(o=i.error)&&void 0!==o&&null!==(l=o.data)&&void 0!==l&&l.error?{message:i.error.data.error}:void 0};if(null!==(a=i.error)&&void 0!==a&&a.refId&&null!==(s=i.error)&&void 0!==s&&s.message)return{status:"error",message:i.error.message};throw e}function l(e){if(!e||!e.length)return[];const t=[];let n=e.fields.find((e=>e.type===a.FieldType.string));if(n||(n=e.fields.find((e=>e.type!==a.FieldType.time))),n)for(let e=0;e<n.values.length;e++)t.push({text:""+n.values.get(e)});return t}},97024:(e,t,n)=>{"use strict";let a,s,i,r,o,l,d,c,u,h,p,g;n.d(t,{yK:()=>s,LB:()=>a,pu:()=>h,QH:()=>k,pc:()=>b,IG:()=>x,ap:()=>y,jG:()=>w,l8:()=>r,FI:()=>c,pR:()=>o,i3:()=>m,jK:()=>f,KC:()=>l,bQ:()=>g,wf:()=>d,wN:()=>p,As:()=>C,o0:()=>u,h2:()=>j,f3:()=>S,Jp:()=>i,wm:()=>v}),function(e){e.Auto="auto",e.Bottom="bottom",e.Hidden="hidden",e.Left="left",e.Right="right",e.Top="top"}(a||(a={})),function(e){e.Series="series",e.Text="text"}(s||(s={})),function(e){e.Always="always",e.Auto="auto",e.Never="never"}(i||(i={})),function(e){e.Bars="bars",e.Line="line",e.Points="points"}(r||(r={})),function(e){e.Constant="constant",e.NegativeY="negative-Y"}(o||(o={})),function(e){e.Linear="linear",e.Smooth="smooth",e.StepAfter="stepAfter",e.StepBefore="stepBefore"}(l||(l={})),function(e){e.Linear="linear",e.Log="log",e.Ordinal="ordinal"}(d||(d={})),function(e){e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme"}(c||(c={})),function(e){e.None="none",e.Normal="normal",e.Percent="percent"}(u||(u={})),function(e){e[e.After=1]="After",e[e.Before=-1]="Before",e[e.Center=0]="Center"}(h||(h={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(p||(p={})),function(e){e[e.Down=-1]="Down",e[e.Left=-1]="Left",e[e.Right=1]="Right",e[e.Up=1]="Up"}(g||(g={}));let m,f;!function(e){e.Area="area",e.Line="line",e.LineAndArea="line+area",e.Off="off",e.Series="series"}(m||(m={})),function(e){e.Hidden="hidden",e.List="list",e.Table="table"}(f||(f={}));let v;!function(e){e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical"}(v||(v={}));let b,x,y,w,j,S,C;!function(e){e.Background="background",e.None="none",e.Value="value"}(b||(b={})),function(e){e.Area="area",e.Line="line",e.None="none"}(x||(x={})),function(e){e.Auto="auto",e.Center="center"}(y||(y={})),function(e){e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.ValueAndName="value_and_name"}(w||(w={})),function(e){e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge"}(j||(j={})),function(e){e.Multi="multi",e.None="none",e.Single="single"}(S||(S={})),function(e){e.Ascending="asc",e.Descending="desc",e.None="none"}(C||(C={}));let k;!function(e){e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd"}(k||(k={}));j.Auto},47426:(e,t,n)=>{"use strict";n.d(t,{b:()=>g});var a=n(36636),s=n(15372),i=n(68404),r=n(16695),o=n(49268),l=n(77274),d=n(19873),c=n(42786),u=n(45916);const h=["title","onRemove","children","buttonContent","elevated","bottomSpacing","topSpacing","className","severity"];function p(e){switch(e){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check";default:return""}}const g=i.forwardRef(((e,t)=>{let{title:n,onRemove:i,children:g,buttonContent:f,elevated:v,bottomSpacing:b,topSpacing:x,className:y,severity:w="error"}=e,j=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,h);const S=(0,o.l4)(),C=m(S,w,v,b,x),k=(0,s.Me)();return(0,u.jsxs)("div",Object.assign({ref:t,className:(0,a.cx)(C.alert,y),"data-testid":r.wl.components.Alert.alertV2(w),role:"alert","aria-labelledby":k},j,{children:[(0,u.jsx)("div",{className:C.icon,children:(0,u.jsx)(d.J,{size:"xl",name:p(w)})}),(0,u.jsxs)("div",{className:C.body,children:[(0,u.jsx)("div",{id:k,className:C.title,children:n}),g&&(0,u.jsx)("div",{className:C.content,children:g})]}),i&&!f&&(0,u.jsx)("div",{className:C.close,children:(0,u.jsx)(c.h,{"aria-label":"Close alert",name:"times",onClick:i,size:"lg",type:"button"})}),i&&f&&(0,u.jsx)("div",{className:C.buttonWrapper,children:(0,u.jsx)(l.zx,{"aria-label":"Close alert",variant:"secondary",onClick:i,type:"button",children:f})})]}))}));g.displayName="Alert";const m=(e,t,n,s,i)=>{const r=e.colors[t],o=e.shape.borderRadius();return{alert:a.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${o};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${e.colors.background.secondary};
      box-shadow: ${n?e.shadows.z3:e.shadows.z1};
      margin-bottom: ${e.spacing(null!=s?s:2)};
      margin-top: ${e.spacing(null!=i?i:0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${e.colors.background.primary};
        z-index: -1;
      }
    `,icon:a.css`
      padding: ${e.spacing(2,3)};
      background: ${r.main};
      border-radius: ${o} 0 0 ${o};
      color: ${r.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:a.css`
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.text.primary};
    `,body:a.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:a.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:a.css`
      padding: ${e.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:a.css`
      padding: ${e.spacing(2,1)};
      background: none;
      display: flex;
    `}}},77274:(e,t,n)=>{"use strict";n.d(t,{Qj:()=>f,c9:()=>x,fW:()=>v,zx:()=>m});var a=n(36636),s=n(68404),i=n(43215),r=n(49268),o=n(29977),l=n(5092),d=n(19873),c=n(88459),u=n(45916);const h=["variant","size","fill","icon","fullWidth","children","className","type"],p=["variant","size","fill","icon","fullWidth","children","className","onBlur","onFocus","disabled","tooltip","tooltipPlacement"];function g(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const m=s.forwardRef(((e,t)=>{let{variant:n="primary",size:s="md",fill:i="solid",icon:o,fullWidth:l,children:c,className:p,type:m="button"}=e,f=g(e,h);const b=(0,r.l4)(),x=v({theme:b,size:s,variant:n,fill:i,fullWidth:l,iconOnly:!c});return(0,u.jsxs)("button",Object.assign({className:(0,a.cx)(x.button,p),type:m},f,{ref:t,children:[o&&(0,u.jsx)(d.J,{name:o,size:s,className:x.icon}),c&&(0,u.jsx)("span",{className:x.content,children:c})]}))}));m.displayName="Button";const f=s.forwardRef(((e,t)=>{let{variant:n="primary",size:s="md",fill:i="solid",icon:o,fullWidth:l,children:h,className:m,disabled:f,tooltip:b,tooltipPlacement:x}=e,y=g(e,p);const w=(0,r.l4)(),j=v({theme:w,fullWidth:l,size:s,variant:n,fill:i,iconOnly:!h}),S=(0,a.cx)(j.button,{[(0,a.css)(j.disabled,{pointerEvents:"none"})]:f},m),C=(0,u.jsxs)("a",Object.assign({className:S},y,{tabIndex:f?-1:0,ref:t,children:[o&&(0,u.jsx)(d.J,{name:o,size:s,className:j.icon}),h&&(0,u.jsx)("span",{className:j.content,children:h})]}));return b?(0,u.jsx)(c.u,{content:b,placement:x,children:C}):C}));f.displayName="LinkButton";const v=e=>{const{theme:t,variant:n,fill:s="solid",size:i,iconOnly:r,fullWidth:d}=e,{height:c,padding:u,fontSize:h}=(0,l.iL)(i,t),p=x(t,n,s),g=function(e,t,n){const a={cursor:"not-allowed",boxShadow:"none",color:e.colors.text.disabled,transition:"none"};if("text"===n)return Object.assign({},a,{background:"transparent",border:"1px solid transparent"});if("outline"===n)return Object.assign({},a,{background:"transparent",border:`1px solid ${e.colors.action.disabledText}`});return Object.assign({},a,{background:e.colors.action.disabledBackground,border:"1px solid transparent"})}(t,0,s),m=(0,o.getFocusStyles)(t),f=t.spacing.gridSize*u-1;return{button:(0,a.css)(Object.assign({label:"button",display:"inline-flex",alignItems:"center",fontSize:h,fontWeight:t.typography.fontWeightMedium,fontFamily:t.typography.fontFamily,padding:`0 ${f}px`,height:t.spacing(c),lineHeight:t.spacing.gridSize*c-2+"px",verticalAlign:"middle",cursor:"pointer",borderRadius:t.shape.borderRadius(1),"&:focus":m,"&:focus-visible":m,"&:focus:not(:focus-visible)":(0,o.getMouseFocusStyles)(t)},d&&{flexGrow:1,justifyContent:"center"},p,{":disabled":g,"&[disabled]":g})),disabled:(0,a.css)(g),img:a.css`
      width: 16px;
      height: 16px;
      margin: ${t.spacing(0,1,0,.5)};
    `,icon:r?(0,a.css)({marginRight:t.spacing(-u/2),marginLeft:t.spacing(-u/2)}):(0,a.css)({marginRight:t.spacing(u/2)}),content:a.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function b(e,t,n){return"outline"===n?{background:"transparent",color:t.text,border:`1px solid ${t.border}`,transition:e.transitions.create(["background-color","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:i.colorManipulator.alpha(t.main,e.colors.action.hoverOpacity),borderColor:e.colors.emphasize(t.border,.25),color:t.text}}:"text"===n?{background:"transparent",color:t.text,border:"1px solid transparent",transition:e.transitions.create(["background-color","color"],{duration:e.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:i.colorManipulator.alpha(t.shade,e.colors.action.hoverOpacity),textDecoration:"none"}}:{background:t.main,color:t.contrastText,border:"1px solid transparent",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:t.shade,color:t.contrastText,boxShadow:e.shadows.z1}}}function x(e,t,n){switch(t){case"secondary":return b(e,e.colors.secondary,n);case"destructive":return b(e,e.colors.error,n);case"success":return b(e,e.colors.success,n);default:return b(e,e.colors.primary,n)}}},95708:(e,t,n)=>{"use strict";n.d(t,{zx:()=>a.zx,hE:()=>d,Qj:()=>a.Qj,fW:()=>a.fW,c9:()=>a.c9});var a=n(77274),s=n(36636),i=n(68404),r=n(49268),o=n(45916);const l=["className","children"];const d=(0,i.forwardRef)(((e,t)=>{let{className:n,children:a}=e,i=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,l);const d=(0,r.wW)(c);return(0,o.jsx)("div",Object.assign({ref:t,className:(0,s.cx)("button-group",d.wrapper,n)},i,{children:a}))}));d.displayName="ButtonGroup";const c=e=>({wrapper:s.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},91780:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var a=n(68404),s=n(45916);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r extends a.PureComponent{constructor(){super(...arguments),i(this,"myRef",(0,a.createRef)()),i(this,"state",{hasEventListener:!1}),i(this,"onOutsideClick",(e=>{const t=this.myRef.current;t&&t.contains(e.target)||this.props.onClick()}))}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return(0,s.jsx)("div",{ref:this.myRef,children:this.props.children})}}i(r,"defaultProps",{includeButtonPress:!0,parent:"undefined"!=typeof window?window:null,useCapture:!1})},93732:(e,t,n)=>{"use strict";n.d(t,{$:()=>h,b:()=>p});var a=n(36636),s=n(40059),i=n(68404),r=n(35008),o=n.n(r),l=n(16695),d=n(73512),c=n(45916);const u=["color","label","variant","isSelected","aria-label"];let h;!function(e){e.Small="small",e.Large="large"}(h||(h={}));const p=i.forwardRef(((e,t)=>{let{color:n,label:a,variant:i=h.Small,isSelected:r,"aria-label":o}=e,p=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,u);const m=(0,d.l4)(),{isFocusVisible:f,focusProps:v}=(0,s.Fx)(),b=g(m,i,n,f,r),x=!!a,y=`${o||a} color`;return(0,c.jsxs)("div",Object.assign({ref:t,className:b.wrapper,"data-testid":l.wl.components.ColorSwatch.name},p,{children:[x&&(0,c.jsx)("span",{className:b.label,children:a}),(0,c.jsx)("button",Object.assign({className:b.swatch},v,{"aria-label":y}))]}))})),g=(e,t,n,s,i)=>{const r=o()(n),l=t===h.Small?"16px":"32px";let d="none";return r.getAlpha()<.1&&(d=`2px solid ${e.colors.border.medium}`),{wrapper:(0,a.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,a.css)({marginRight:e.spacing(1)}),swatch:(0,a.css)({width:l,height:l,background:`${n}`,border:d,borderRadius:"50%",outlineOffset:"1px",outline:s?`2px solid  ${e.colors.primary.main}`:"none",boxShadow:i?`inset 0 0 0 2px ${n}, inset 0 0 0 4px ${e.colors.getContrastText(n)}`:"none",transition:e.transitions.create(["transform"],{duration:e.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};p.displayName="ColorSwatch"},91516:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,Z:()=>u});var a=n(36636),s=n(23019),i=n.n(s),r=n(68404),o=n(53211),l=n(49268),d=n(45916);const c=e=>{let{autoHide:t=!1,autoHideTimeout:n=200,setScrollTop:a,className:s,testId:c,autoHeightMin:u="0",autoHeightMax:p="100%",hideTracksWhenNotNeeded:g=!1,hideHorizontalTrack:m,hideVerticalTrack:f,scrollRefCallback:v,updateAfterMountMs:b,scrollTop:x,onScroll:y,children:w}=e;const j=(0,r.useRef)(null),S=(0,l.wW)(h);function C(e,t,n){return n.style&&t&&(n.style.display="none"),(0,d.jsx)("div",Object.assign({},n,{className:e}))}(0,r.useEffect)((()=>{j.current&&v&&v(j.current.view)}),[j,v]),(0,r.useEffect)((()=>{j.current&&null!=x&&j.current.scrollTop(x)}),[x]),(0,r.useEffect)((()=>{b&&setTimeout((()=>{const e=j.current;null!=e&&e.update&&e.update()}),b)}),[b]);const k=(0,r.useCallback)((e=>C("track-horizontal",m,e)),[m]),T=(0,r.useCallback)((e=>C("track-vertical",f,e)),[f]),I=(0,r.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"thumb-horizontal"}))),[]),O=(0,r.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"thumb-vertical"}))),[]),N=(0,r.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"scrollbar-view"}))),[]),F=(0,r.useCallback)((()=>{j.current&&a&&a(j.current.getValues())}),[a]);return(0,d.jsx)(o.ZP,{"data-testid":c,ref:j,className:i()(S.customScrollbar,s),onScrollStop:F,autoHeight:!0,autoHide:t,autoHideTimeout:n,hideTracksWhenNotNeeded:g,autoHeightMax:p,autoHeightMin:u,renderTrackHorizontal:k,renderTrackVertical:T,renderThumbHorizontal:I,renderThumbVertical:O,renderView:N,onScroll:y,children:w})},u=c,h=e=>({customScrollbar:a.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${e.shape.borderRadius(2)};
        width: ${e.spacing(1)} !important;
        right: 0px;
        bottom: ${e.spacing(.25)};
        top: ${e.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${e.shape.borderRadius(2)};
        height: ${e.spacing(1)} !important;
        right: ${e.spacing(.25)};
        bottom: ${e.spacing(.25)};
        left: ${e.spacing(.25)};
      }
      .thumb-vertical {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `})},86900:(e,t,n)=>{"use strict";n.d(t,{g:()=>h});var a=n(36636),s=n(68404),i=n(49268),r=n(18801),o=n(57229),l=n(4126),d=n(45916);const c=["label","description","horizontal","invalid","loading","disabled","required","error","children","className","validationMessageHorizontalOverflow","htmlFor"];const u=(0,i.Bb)((e=>({field:a.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${e.spacing(2)};
    `,fieldHorizontal:a.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:a.css`
      margin-top: ${e.spacing(.5)};
    `,fieldValidationWrapperHorizontal:a.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:a.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `}))),h=e=>{let{label:t,description:n,horizontal:h,invalid:p,loading:g,disabled:m,required:f,error:v,children:b,className:x,validationMessageHorizontalOverflow:y,htmlFor:w}=e,j=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,c);const S=(0,i.l4)(),C=u(S),k=null!=w?w:(0,r.getChildId)(b),T="string"==typeof t?(0,d.jsx)(l._,{htmlFor:k,description:n,children:`${t}${f?" *":""}`}):t,I=function(e){for(const t in e)void 0===e[t]&&delete e[t];return e}({invalid:p,disabled:m,loading:g});return(0,d.jsxs)("div",Object.assign({className:(0,a.cx)(C.field,h&&C.fieldHorizontal,x)},j,{children:[T,(0,d.jsxs)("div",{children:[s.cloneElement(b,I),p&&v&&!h&&(0,d.jsx)("div",{className:(0,a.cx)(C.fieldValidationWrapper,{[C.validationMessageHorizontalOverflow]:!!y}),children:(0,d.jsx)(o.S,{children:v})})]}),p&&v&&h&&(0,d.jsx)("div",{className:(0,a.cx)(C.fieldValidationWrapper,C.fieldValidationWrapperHorizontal,{[C.validationMessageHorizontalOverflow]:!!y}),children:(0,d.jsx)(o.S,{children:v})})]}))}},57229:(e,t,n)=>{"use strict";n.d(t,{S:()=>l});var a=n(36636),s=(n(68404),n(49268)),i=n(19873),r=n(45916);const o=(0,s.Bb)((e=>{const t=`\n      font-size: ${e.typography.size.sm};\n      font-weight: ${e.typography.fontWeightMedium};\n      padding: ${e.spacing(.5,1)};\n      color: ${e.colors.error.contrastText};\n      background: ${e.colors.error.main};\n      border-radius: ${e.shape.borderRadius()};\n      position: relative;\n      display: inline-block;\n\n      a {\n        color: ${e.colors.error.contrastText};\n        text-decoration: underline;\n      }\n\n      a:hover {\n        text-decoration: none;\n      }\n    `;return{vertical:a.css`
      ${t}
      margin: ${e.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${e.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:a.css`
      ${t}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:a.css`
      margin-right: ${e.spacing()};
    `}})),l=e=>{let{children:t,horizontal:n,className:l}=e;const d=(0,s.l4)(),c=o(d),u=(0,a.cx)(n?c.horizontal:c.vertical,l);return(0,r.jsxs)("div",{role:"alert",className:u,children:[(0,r.jsx)(i.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),t]})}},4126:(e,t,n)=>{"use strict";n.d(t,{F:()=>l,_:()=>d});var a=n(36636),s=(n(68404),n(49268)),i=n(19873),r=n(45916);const o=["children","description","className","category"];const l=(0,s.Bb)((e=>({label:a.css`
      label: Label;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${e.spacing(.5)};
      color: ${e.colors.text.primary};
      max-width: 480px;
    `,labelContent:a.css`
      display: flex;
      align-items: center;
    `,description:a.css`
      label: Label-description;
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightRegular};
      margin-top: ${e.spacing(.25)};
      display: block;
    `,categories:a.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:a.css`
      margin: 0 ${e.spacing(.25)};
    `}))),d=e=>{let{children:t,description:n,className:d,category:c}=e,u=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,o);const h=(0,s.l4)(),p=l(h),g=null==c?void 0:c.map(((e,t)=>(0,r.jsxs)("span",{className:p.categories,children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)(i.J,{name:"angle-right",className:p.chevron})]},`${e}/${t}`)));return(0,r.jsx)("div",{className:(0,a.cx)(p.label,d),children:(0,r.jsxs)("label",Object.assign({},u,{children:[(0,r.jsxs)("div",{className:p.labelContent,children:[g,t]}),n&&(0,r.jsx)("span",{className:p.description,children:n})]}))})}},5414:(e,t,n)=>{"use strict";n.d(t,{G:()=>c,I:()=>u});var a=n(23019),s=n.n(a),i=n(68404),r=n(89409),o=n(45916);const l=["validationEvents","className","hideErrorMessage","inputRef"];function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c;!function(e){e.Invalid="invalid",e.Valid="valid"}(c||(c={}));class u extends i.PureComponent{constructor(){super(...arguments),d(this,"state",{error:null}),d(this,"validatorAsync",(e=>t=>{const n=(0,r.Gu)(t.target.value,e);this.setState((e=>Object.assign({},e,{error:n?n[0]:null})))})),d(this,"populateEventPropsWithStatus",((e,t)=>{const n=Object.assign({},e);return t?(Object.keys(r.JU).forEach((a=>{((0,r.z3)(a,t)||e[a])&&(n[a]=async n=>{n.persist(),(0,r.z3)(a,t)&&await this.validatorAsync(t[a]).apply(this,[n]),e[a]&&e[a].apply(null,[n,this.status])})})),n):n}))}get status(){return this.state.error?c.Invalid:c.Valid}get isInvalid(){return this.status===c.Invalid}render(){const e=this.props,{validationEvents:t,className:n,hideErrorMessage:a,inputRef:i}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,l),{error:d}=this.state,c=s()("gf-form-input",{invalid:this.isInvalid},n),u=this.populateEventPropsWithStatus(r,t);return(0,o.jsxs)("div",{style:{flexGrow:1},children:[(0,o.jsx)("input",Object.assign({},u,{ref:i,className:c})),d&&!a&&(0,o.jsx)("span",{children:d})]})}}d(u,"defaultProps",{className:""})},75191:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,Z:()=>o});n(68404);var a=n(22585),s=n(19873),i=n(45916);const r=e=>{const t=e.selectProps.menuIsOpen;return(0,i.jsx)(a.c.IndicatorsContainer,Object.assign({},e,{children:(0,i.jsx)(s.J,{name:t?"angle-up":"angle-down",style:{marginTop:"7px"}})}))},o=r},48721:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,Z:()=>r});n(68404);var a=n(22585),s=n(45916);const i=e=>{const{children:t}=e;return(0,s.jsx)(a.c.NoOptionsMessage,Object.assign({},e,{children:(0,s.jsx)("div",{className:"gf-form-select-box__desc-option",children:(0,s.jsx)("div",{className:"gf-form-select-box__desc-option__body",children:t})})}))},r=i},11136:(e,t,n)=>{"use strict";n.d(t,{qb:()=>C,Ph:()=>S});var a,s=n(23019),i=n.n(s),r=n(68404),o=n(22585),l=n(58678),d=n(54503),c=n(4306),u=n(49268),h=n(91516),p=n(44332),g=n(15950),m=n(90242),f=n(88459),v=n(75191),b=n(48721),x=n(19873),y=n(45916);const w=e=>{const{children:t,isSelected:n,data:s}=e;return(0,y.jsx)(o.c.Option,Object.assign({},e,{children:(0,y.jsxs)("div",{className:"gf-form-select-box__desc-option",children:[s.imgUrl&&(0,y.jsx)("img",{className:"gf-form-select-box__desc-option__img",src:s.imgUrl}),(0,y.jsxs)("div",{className:"gf-form-select-box__desc-option__body",children:[(0,y.jsx)("div",{children:t}),s.description&&(0,y.jsx)("div",{className:"gf-form-select-box__desc-option__desc",children:s.description})]}),n&&(a||(a=(0,y.jsx)(x.J,{name:"check","aria-hidden":"true"})))]})}))};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S extends r.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:n,onChange:a,options:s,placeholder:r,width:o,value:d,className:u,isDisabled:h,isLoading:p,isSearchable:g,isClearable:f,backspaceRemovesValue:v,isMulti:b,autoFocus:x,openMenuOnFocus:w,onBlur:j,maxMenuHeight:C,noOptionsMessage:T,isOpen:I,components:O,tooltipContent:N,tabSelectsValue:F,onCloseMenu:D,onOpenMenu:P,allowCustomValue:A,formatCreateLabel:M,"aria-label":R}=this.props;let $="";o&&($="width-"+o);let L=l.ZP;const E={};A&&(L=c.Z,E.formatCreateLabel=null!=M?M:e=>e);const V=i()("gf-form-input","gf-form-input--form-dropdown",$,u),B=Object.assign({},S.defaultProps.components,O);return(0,y.jsx)(k,{onCloseMenu:D,onOpenMenu:P,tooltipContent:N,isOpen:I,children:(i,o)=>(0,y.jsx)(L,Object.assign({captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:V,components:B,defaultValue:e,value:d,getOptionLabel:t,getOptionValue:n,menuShouldScrollIntoView:!1,isSearchable:g,onChange:a,options:s,placeholder:r||"Choose",styles:(0,m.Z)(this.context),isDisabled:h,isLoading:p,isClearable:f,autoFocus:x,onBlur:j,openMenuOnFocus:w,maxMenuHeight:C,noOptionsMessage:T,isMulti:b,backspaceRemovesValue:v,menuIsOpen:I,onMenuOpen:i,onMenuClose:o,tabSelectsValue:F,"aria-label":R},E))})}}j(S,"contextType",u.Ni),j(S,"defaultProps",{className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:w,SingleValue:g.P,IndicatorsContainer:v.Z,MenuList:e=>(0,y.jsx)(o.c.MenuList,Object.assign({},e,{children:(0,y.jsx)(h.$,{autoHide:!1,autoHeightMax:"inherit",children:e.children})})),Group:p.n}});class C extends r.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:n,onChange:a,placeholder:s,width:r,value:o,className:l,loadOptions:c,defaultOptions:u,isLoading:h,loadingMessage:p,noOptionsMessage:f,isDisabled:x,isSearchable:j,isClearable:S,backspaceRemovesValue:C,autoFocus:T,onBlur:I,openMenuOnFocus:O,maxMenuHeight:N,isMulti:F,tooltipContent:D,onCloseMenu:P,onOpenMenu:A,isOpen:M}=this.props;let R="";r&&(R="width-"+r);const $=i()("gf-form-input","gf-form-input--form-dropdown",R,l);return(0,y.jsx)(k,{onCloseMenu:P,onOpenMenu:A,tooltipContent:D,isOpen:M,children:(i,r)=>(0,y.jsx)(d.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:$,components:{Option:w,SingleValue:g.P,IndicatorsContainer:v.Z,NoOptionsMessage:b.Z},defaultValue:e,value:o,getOptionLabel:t,getOptionValue:n,menuShouldScrollIntoView:!1,onChange:a,loadOptions:c,isLoading:h,defaultOptions:u,placeholder:s||"Choose",styles:(0,m.Z)(),loadingMessage:()=>p,noOptionsMessage:f,isDisabled:x,isSearchable:j,isClearable:S,autoFocus:T,onBlur:I,openMenuOnFocus:O,maxMenuHeight:N,isMulti:F,backspaceRemovesValue:C})})}}j(C,"defaultProps",{className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300});class k extends r.PureComponent{constructor(){super(...arguments),j(this,"state",{isOpenInternal:!1}),j(this,"onOpenMenu",(()=>{const{onOpenMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!0})})),j(this,"onCloseMenu",(()=>{const{onCloseMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!1})}))}render(){const{children:e,isOpen:t,tooltipContent:n}=this.props,{isOpenInternal:a}=this.state;let s;return(a||t)&&(s=!1),n?(0,y.jsx)(f.u,{show:s,content:n,placement:"bottom",children:(0,y.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}):(0,y.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}}},5092:(e,t,n)=>{"use strict";n.d(t,{GL:()=>i,RK:()=>r,ht:()=>l,iL:()=>c,nf:()=>o});var a=n(36636),s=n(29977);const i=e=>a.css`
  &:focus {
    ${(0,s.focusCss)(e)}
  }
`,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?e.colors.error.border:e.components.input.borderColor,s=t?e.colors.error.shade:e.components.input.borderHover,i=e.components.input.background,r=e.components.input.text,l=e.isDark?"#2e2f35":"#bab4ca";return(0,a.cx)(o(e),a.css`
      background: ${i};
      line-height: ${e.typography.body.lineHeight};
      font-size: ${e.typography.size.md};
      color: ${r};
      border: 1px solid ${n};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${i}!important;
        -webkit-text-fill-color: ${r} !important;
        border-color: ${l};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${e.colors.background.primary}, 0 0 0px 4px ${e.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${i}!important;
        -webkit-text-fill-color: ${r} !important;
      }

      &:hover {
        border-color: ${s};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${e.colors.action.disabledBackground};
        color: ${e.colors.action.disabledText};
        border: 1px solid ${e.colors.action.disabledBackground};

        &:hover {
          border-color: ${n};
        }
      }

      &::placeholder {
        color: ${e.colors.text.disabled};
        opacity: 1;
      }
    `)},o=e=>a.css`
    padding: ${e.spacing(0,1,0,1)};
  `,l=()=>({sm:a.css`
      width: ${d("sm")};
    `,md:a.css`
      width: ${d("md")};
    `,lg:a.css`
      width: ${d("lg")};
    `,auto:a.css`
      width: ${d("auto")};
    `}),d=e=>{switch(e){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";default:return"auto"}};function c(e,t){switch(e){case"sm":return{padding:1,fontSize:t.typography.size.sm,height:t.components.height.sm};case"lg":return{padding:3,fontSize:t.typography.size.lg,height:t.components.height.lg};default:return{padding:2,fontSize:t.typography.size.md,height:t.components.height.md}}}},90414:(e,t,n)=>{"use strict";n.d(t,{d:()=>m,j:()=>g});var a=n(68404),s=n(4203),i=n(2168),r=n(43215),o=n(16712),l=n(84798),d=n(24731),c=n(55273),u=n(53180),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g="__fixed";class m extends a.Component{constructor(e){super(e),p(this,"panelContext",{}),p(this,"plotInstance",void 0),p(this,"subscription",new s.w0),p(this,"getTimeRange",(()=>this.props.timeRange));let t=this.prepState(e);t.alignedData=t.config.prepData([t.alignedFrame]),this.state=t,this.plotInstance=a.createRef()}prepState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;const{frames:a,fields:s,preparePlotFrame:i}=e,o=(i||u.R)(a,s||{x:r.fieldMatchers.get(r.FieldMatcherID.firstTimeField).get({}),y:r.fieldMatchers.get(r.FieldMatcherID.numeric).get({})},e.timeRange);if((0,c.Zp)("GraphNG",!1,"data aligned",o),o){var l;let a=null===(l=this.state)||void 0===l?void 0:l.config;t&&(a=e.prepConfig(o,this.props.frames,this.getTimeRange),(0,c.Zp)("GraphNG",!1,"config prepared",a)),n={alignedFrame:o,config:a},(0,c.Zp)("GraphNG",!1,"data prepared",n.alignedData)}return n}handleCursorUpdate(e){var t,n;const a=null===(t=e.payload)||void 0===t||null===(n=t.point)||void 0===n?void 0:n.time,s=this.plotInstance.current;if(s&&a){const e=s.valToPos(a,"x");let t;if(e&&(t=(0,c.ah)(s,s.posToIdx(e))),!t||!e)return;s.setCursor({left:e,top:t})}}componentDidMount(){this.panelContext=this.context;const{eventBus:e}=this.panelContext;this.subscription.add(e.getStream(r.DataHoverEvent).pipe((0,i.p)(50)).subscribe({next:t=>{e!==t.origin&&this.handleCursorUpdate(t)}})),this.subscription.add(e.getStream(r.LegacyGraphHoverEvent).pipe((0,i.p)(50)).subscribe({next:e=>this.handleCursorUpdate(e)})),this.subscription.add(e.getStream(r.DataHoverClearEvent).pipe((0,i.p)(50)).subscribe({next:()=>{var e;const t=null===(e=this.plotInstance)||void 0===e?void 0:e.current;t&&t.setCursor({left:-10,top:-10})}}))}componentDidUpdate(e){const{frames:t,structureRev:n,timeZone:a,propsToDiff:s}=this.props,i=!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(const a of n)if("function"==typeof a){if(!a(e,t))return!1}else if(t[a]!==e[a])return!1;return!0}(e,this.props,s);if(t!==e.frames||i||a!==e.timeZone){let t=this.prepState(this.props,!1);if(t){(void 0===this.state.config||a!==e.timeZone||n!==e.structureRev||!n||i)&&(t.config=this.props.prepConfig(t.alignedFrame,this.props.frames,this.getTimeRange),(0,c.Zp)("GraphNG",!1,"config recreated",t.config)),t.alignedData=t.config.prepData([t.alignedFrame]),this.setState(t)}}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:e,height:t,children:n,timeRange:a,renderLegend:s}=this.props,{config:i,alignedFrame:r,alignedData:o}=this.state;return i?(0,h.jsx)(l.AY,{width:e,height:t,legend:s(i),children:(e,t)=>(0,h.jsx)(d.N,{config:i,data:o,width:e,height:t,timeRange:a,plotRef:e=>this.plotInstance.current=e,children:n?n(i,r):null})}):null}}p(m,"contextType",o.bb)},72710:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var a=n(43215);const s=(e,t,n)=>e+n;function i(e){if(0===e.frame.length)return e.frame;let{frame:t,refFieldName:n,refFieldPseudoMax:i,refFieldPseudoMin:r,insertMode:o}=e;o||(o=s);const l=t.fields.find((e=>null!=n?e.name===n:e.type===a.FieldType.time));if(null==l)return t;l.state=Object.assign({},l.state,{nullThresholdApplied:!0});const d=t.fields.map((e=>{var t,n,a;return null!==(t=null!==(n=null===(a=e.config.custom)||void 0===a?void 0:a.insertNulls)&&void 0!==n?n:l.config.interval)&&void 0!==t?t:null})),c=new Set(d);if(c.delete(null),0===c.size)return t;if(1===c.size){const e=c.values().next().value;if(e<=0)return t;const n=l.values.toArray(),s=t.fields.map((e=>e.values.toArray())),d=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;const l=e.length,d=[];if(null!=s&&s<e[0]){let t=(0,a.incrRoundDn)(s,n);for(;t<e[0];)d.push(r(t-n,t,n)),t+=n}d.push(e[0]);let c=e[0];for(let t=1;t<l;t++){const a=e[t];for(;a-c>n&&(d.push(r(c,a,n)),c+=n,o););d.push(a),c=a}if(null!=i&&i>c)for(;c+n<i;)d.push(r(c,i,n)),c+=n;const u=d.length;if(u===l)return t;const h=[];for(let n of t){let t;if(n!==e){t=Array(u);for(let a=0,s=0;a<u;a++)t[a]=e[s]===d[a]?n[s++]:null}else t=d;h.push(t)}return h}(n,s,e,r,i,o,true);return d===s?t:Object.assign({},t,{length:d[0].length,fields:t.fields.map(((e,t)=>Object.assign({},e,{values:new a.ArrayVector(d[t])})))})}return t}},33564:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var a=n(43215);function s(e){return Object.assign({},e,{fields:e.fields.map((e=>{var t;const n=+(null===(t=e.config)||void 0===t?void 0:t.noValue);if(Number.isNaN(n))return e;{const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)null===t[e]&&(t[e]=n);return Object.assign({},e,{values:new a.ArrayVector(t)})}}))})}},53180:(e,t,n)=>{"use strict";n.d(t,{z:()=>c,R:()=>d});var a=n(43215),s=n(97024),i=n(90414),r=n(72710);function o(e,t,n){let a,s;for(let i=0;i<t.length;i++){if(null==t[i])null==s&&null!=a&&(s=i);else{if(null!=s){if(e[i]-a<n)for(;s<i;)t[s++]=void 0;s=null}a=e[i]}}return t}function l(e){var t,n,i;return e.type===a.FieldType.number&&(null===(t=e.config.custom)||void 0===t?void 0:t.drawStyle)===s.l8.Bars&&!(null!==(n=e.config.custom)&&void 0!==n&&null!==(i=n.hideFrom)&&void 0!==i&&i.viz)}function d(e,t,n){e=e.map((e=>{var t;return null!==(t=e.fields[0].state)&&void 0!==t&&t.nullThresholdApplied?e:(0,r.w)({frame:e,refFieldName:null,refFieldPseudoMin:null==n?void 0:n.from.valueOf(),refFieldPseudoMax:null==n?void 0:n.to.valueOf()})}));let s=0;e.forEach((e=>{e.fields.forEach((e=>{l(e)&&(e.config.custom=Object.assign({},e.config.custom,{spanNulls:-1}),s++)}))}));let i=1/0;s>1&&e.forEach((e=>{if(!e.fields.some(l))return;const t=e.fields[0].values.toArray();for(let e=0;e<t.length;e++)e>0&&(i=Math.min(i,t[e]-t[e-1]))}));let d=(0,a.outerJoinDataFrames)({frames:e,joinBy:t.x,keep:t.y,keepOriginIndices:!0});return d?(d=function(e){let t=e.fields.find((e=>e.type===a.FieldType.time)),n=null==t?void 0:t.values.toArray();for(let i=0;i<e.fields.length;i++){var s;let r=e.fields[i];if(r===t||l(r))continue;let d=null===(s=r.config.custom)||void 0===s?void 0:s.spanNulls;"number"==typeof d&&-1!==d&&(r.values=new a.ArrayVector(o(n,r.values.toArray(),d)))}return e}(d),i!==1/0&&(d.fields.forEach(((e,t)=>{let n=e.values.toArray();if(0===t){let e=n[n.length-1];n.push(e+i,e+2*i)}else l(e)?n.push(null,null):n.push(void 0,void 0)})),d.length+=2),d):null}function c(e){var t,n,a,r,o,l,d;const c="na",u=`${void 0!==e.min?e.min:c}-${void 0!==e.max?e.max:c}`,h=`${void 0!==(null===(t=e.custom)||void 0===t?void 0:t.axisSoftMin)?e.custom.axisSoftMin:c}-${void 0!==(null===(n=e.custom)||void 0===n?void 0:n.axisSoftMax)?e.custom.axisSoftMax:c}`,p=`${void 0!==(null===(a=e.custom)||void 0===a?void 0:a.axisPlacement)?null===(r=e.custom)||void 0===r?void 0:r.axisPlacement:s.LB.Auto}`,g=null!==(o=e.unit)&&void 0!==o?o:i.j,m=null!==(l=e.custom)&&void 0!==l&&l.scaleDistribution?function(e){if(e.type===s.wf.Log)return`${e.type}${e.log}`;return e.type}(e.custom.scaleDistribution):s.wf.Linear;return`${g}/${u}/${h}/${p}/${m}/${Boolean(null===(d=e.custom)||void 0===d?void 0:d.axisLabel)?e.custom.axisLabel:c}`}},19873:(e,t,n)=>{"use strict";n.d(t,{J:()=>mn});var a=n(36636),s=n(68404),i=n(17377),r=n(73512),o=n(19229),l=n(38920),d=n(66986),c=n(25234),u=n(333),h=n(28441),p=n(44546),g=n(40808),m=n(23801),f=n(36109),v=n(44183),b=n(2731),x=n(1860),y=n(90384),w=n(9904),j=n(99309),S=n(29240),C=n(95120),k=n(49096),T=n(12126),I=n(57149),O=n(15648),N=n(38),F=n(73231),D=n(46968),P=n(15788),A=n(78844),M=n(70761),R=n(31318),$=n(71055),L=n(1116),E=n(25967),V=n(95759),B=n(30303),z=n(61713),_=n(59699),U=n(65136),H=n(5902),W=n(11238),q=n(17126),Z=n(20496),G=n(8990),K=n(40309),Q=n(3450),J=n(12925),Y=n(21105),X=n(69028),ee=n(62271),te=n(47189),ne=n(45349),ae=n(15753),se=n(31021),ie=n(25412),re=n(66966),oe=n(7495),le=n(55433),de=n(70628),ce=n(47452),ue=n(13545),he=n(56474),pe=n(94129),ge=n(28234),me=n(5813),fe=n(92363),ve=n(43767),be=n(78432),xe=n(51848),ye=n(38510),we=n(81954),je=n(77077),Se=n(37132),Ce=n(34379),ke=n(65919),Te=n(67425),Ie=n(27459),Oe=n(73433),Ne=n(58910),Fe=n(9361),De=n(6331),Pe=n(24243),Ae=n(52952),Me=n(7474),Re=n(27468),$e=n(47829),Le=n(89758),Ee=n(46361),Ve=n(45073),Be=n(33856),ze=n(47433),_e=n(3085),Ue=n(28505),He=n(82208),We=n(92872),qe=n(11576),Ze=n(63200),Ge=n(46886),Ke=n(6453),Qe=n(25899),Je=n(52632),Ye=n(65232),Xe=n(86551),et=n(34741),tt=n(59226),nt=n(69238),at=n(86449),st=n(71746),it=n(26965),rt=n(44003),ot=n(93663),lt=n(99045),dt=n(35015),ct=n(48283),ut=n(96863),ht=n(55895),pt=n(79943),gt=n(91206),mt=n(43590),ft=n(38550),vt=n(83829),bt=n(52198),xt=n(92823),yt=n(45971),wt=n(79328),jt=n(87206),St=n(9254),Ct=n(60771),kt=n(77887),Tt=n(78412),It=n(58175),Ot=n(48223),Nt=n(3425),Ft=n(59764),Dt=n(10886),Pt=n(62417),At=n(18703),Mt=n(65881),Rt=n(15367),$t=n(36074),Lt=n(6434),Et=n(15176),Vt=n(95809),Bt=n(61395),zt=n(96383),_t=n(71662),Ut=n(51170),Ht=n(91367),Wt=n(38318),qt=n(98991),Zt=n(19260),Gt=n(23998),Kt=n(45482),Qt=n(62570),Jt=n(62696),Yt=n(17756),Xt=n(15141),en=n(81467),tn=n(745),nn=n(40812),an=n(38076),sn=n(37603),rn=n(94194),on=n(87966);let ln=!1,dn="public/img/icons";function cn(e,t){i.V[dn+t]={content:e,status:"loaded"}}var un=n(37395),hn=n(45916);const pn=["size","type","name","className","style","title"];const gn=(0,o.B)((e=>({container:a.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:a.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:a.css`
      fill: ${e.palette.orange};
    `}))),mn=s.forwardRef(((e,t)=>{let{size:n="md",type:s="default",name:o,className:mn,style:vn,title:bn=""}=e,xn=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,pn);const yn=(0,r.Fg)();if(null!=o&&o.startsWith("fa fa-"))return(0,hn.jsx)("i",Object.assign({className:fn(o,mn)},xn,{style:vn}));"panel-add"===o&&(n="xl"),ln||function(){ln=!0;const e="undefined"!=typeof window&&window.__grafana_public_path__;e&&(dn=e+"img/icons/"),cn(T.Z,"unicons/angle-double-down.svg"),cn(I.Z,"unicons/angle-double-right.svg"),cn(O.Z,"unicons/angle-down.svg"),cn(N.Z,"unicons/angle-left.svg"),cn(F.Z,"unicons/angle-right.svg"),cn(D.Z,"unicons/angle-up.svg"),cn(P.Z,"unicons/apps.svg"),cn(V.Z,"unicons/arrow.svg"),cn(A.Z,"unicons/arrow-down.svg"),cn(M.Z,"unicons/arrow-from-right.svg"),cn(R.Z,"unicons/arrow-left.svg"),cn($.Z,"unicons/arrow-random.svg"),cn(L.Z,"unicons/arrow-right.svg"),cn(E.Z,"unicons/arrow-up.svg"),cn(B.Z,"unicons/arrows-h.svg"),cn(z.Z,"unicons/backward.svg"),cn(_.Z,"unicons/bars.svg"),cn(H.Z,"unicons/bell.svg"),cn(U.Z,"unicons/bell-slash.svg"),cn(W.Z,"unicons/bolt.svg"),cn(Z.Z,"unicons/book.svg"),cn(q.Z,"unicons/book-open.svg"),cn(G.Z,"unicons/brackets-curly.svg"),cn(K.Z,"unicons/bug.svg"),cn(Q.Z,"unicons/building.svg"),cn(J.Z,"unicons/calculator-alt.svg"),cn(Y.Z,"unicons/calendar-alt.svg"),cn(X.Z,"unicons/camera.svg"),cn(te.Z,"unicons/channel-add.svg"),cn(ne.Z,"unicons/chart-line.svg"),cn(se.Z,"unicons/check.svg"),cn(ae.Z,"unicons/check-circle.svg"),cn(ie.Z,"unicons/circle.svg"),cn(re.Z,"unicons/clipboard-alt.svg"),cn(oe.Z,"unicons/clock-nine.svg"),cn(ce.Z,"unicons/cloud.svg"),cn(le.Z,"unicons/cloud-download.svg"),cn(ue.Z,"unicons/code-branch.svg"),cn(he.Z,"unicons/cog.svg"),cn(pe.Z,"unicons/columns.svg"),cn(me.Z,"unicons/comment-alt.svg"),cn(ge.Z,"unicons/comment-alt-share.svg"),cn(fe.Z,"unicons/comments-alt.svg"),cn(ve.Z,"unicons/compass.svg"),cn(be.Z,"unicons/copy.svg"),cn(ye.Z,"unicons/cube.svg"),cn(we.Z,"unicons/dashboard.svg"),cn(je.Z,"unicons/database.svg"),cn(Se.Z,"unicons/document-info.svg"),cn(Ce.Z,"unicons/download-alt.svg"),cn(ke.Z,"unicons/draggabledots.svg"),cn(Te.Z,"unicons/edit.svg"),cn(Ie.Z,"unicons/ellipsis-v.svg"),cn(Oe.Z,"unicons/envelope.svg"),cn(Ne.Z,"unicons/exchange-alt.svg"),cn(Fe.Z,"unicons/exclamation-triangle.svg"),cn(De.Z,"unicons/external-link-alt.svg"),cn(Ae.Z,"unicons/eye.svg"),cn(Pe.Z,"unicons/eye-slash.svg"),cn(Me.Z,"unicons/file-alt.svg"),cn(Re.Z,"unicons/file-blank.svg"),cn(Le.Z,"unicons/filter.svg"),cn(_e.Z,"unicons/folder.svg"),cn(Ve.Z,"unicons/folder-open.svg"),cn(Be.Z,"unicons/folder-plus.svg"),cn(ze.Z,"unicons/folder-upload.svg"),cn(Ue.Z,"unicons/forward.svg"),cn(He.Z,"unicons/graph-bar.svg"),cn(We.Z,"unicons/history.svg"),cn(qe.Z,"unicons/home-alt.svg"),cn(Je.Z,"unicons/import.svg"),cn(Xe.Z,"unicons/info.svg"),cn(Ye.Z,"unicons/info-circle.svg"),cn(et.Z,"unicons/key-skeleton-alt.svg"),cn(tt.Z,"unicons/keyboard.svg"),cn(st.Z,"unicons/link.svg"),cn(rt.Z,"unicons/list-ul.svg"),cn(ot.Z,"unicons/lock.svg"),cn(ct.Z,"unicons/minus.svg"),cn(dt.Z,"unicons/minus-circle.svg"),cn(ut.Z,"unicons/mobile-android.svg"),cn(ht.Z,"unicons/monitor.svg"),cn(gt.Z,"unicons/pause.svg"),cn(mt.Z,"unicons/pen.svg"),cn(vt.Z,"unicons/play.svg"),cn(bt.Z,"unicons/plug.svg"),cn(wt.Z,"unicons/plus.svg"),cn(xt.Z,"unicons/plus-circle.svg"),cn(jt.Z,"unicons/power.svg"),cn(St.Z,"unicons/presentation-play.svg"),cn(Ct.Z,"unicons/process.svg"),cn(kt.Z,"unicons/question-circle.svg"),cn(It.Z,"unicons/repeat.svg"),cn(Ot.Z,"unicons/rocket.svg"),cn(Nt.Z,"unicons/save.svg"),cn(Pt.Z,"unicons/search.svg"),cn(Ft.Z,"unicons/search-minus.svg"),cn(Dt.Z,"unicons/search-plus.svg"),cn(At.Z,"unicons/share-alt.svg"),cn(Rt.Z,"unicons/shield.svg"),cn($t.Z,"unicons/signal.svg"),cn(Lt.Z,"unicons/signin.svg"),cn(Et.Z,"unicons/signout.svg"),cn(Vt.Z,"unicons/sitemap.svg"),cn(Bt.Z,"unicons/slack.svg"),cn(zt.Z,"unicons/sliders-v-alt.svg"),cn(_t.Z,"unicons/sort-amount-down.svg"),cn(Ut.Z,"unicons/sort-amount-up.svg"),cn(Ht.Z,"unicons/square-shape.svg"),cn(Wt.Z,"unicons/star.svg"),cn(qt.Z,"unicons/step-backward.svg"),cn(Zt.Z,"unicons/sync.svg"),cn(Gt.Z,"unicons/table.svg"),cn(Kt.Z,"unicons/tag-alt.svg"),cn(Qt.Z,"unicons/times.svg"),cn(Jt.Z,"unicons/trash-alt.svg"),cn(Yt.Z,"unicons/unlock.svg"),cn(Xt.Z,"unicons/upload.svg"),cn(en.Z,"unicons/user.svg"),cn(tn.Z,"unicons/users-alt.svg"),cn(rn.Z,"unicons/wrap-text.svg"),cn(de.Z,"unicons/cloud-upload.svg"),cn(xe.Z,"unicons/credit-card.svg"),cn($e.Z,"unicons/file-copy-alt.svg"),cn(Ee.Z,"unicons/fire.svg"),cn(Qe.Z,"unicons/hourglass.svg"),cn(nt.Z,"unicons/layer-group.svg"),cn(at.Z,"unicons/line-alt.svg"),cn(it.Z,"unicons/list-ui-alt.svg"),cn(lt.Z,"unicons/message.svg"),cn(pt.Z,"unicons/palette.svg"),cn(ft.Z,"unicons/percentage.svg"),cn(Mt.Z,"unicons/shield-exclamation.svg"),cn(yt.Z,"unicons/plus-square.svg"),cn(on.Z,"unicons/x.svg"),cn(ee.Z,"unicons/capture.svg"),cn(u.Z,"custom/gf-grid.svg"),cn(f.Z,"custom/gf-landscape.svg"),cn(v.Z,"custom/gf-layout-simple.svg"),cn(x.Z,"custom/gf-portrait.svg"),cn(l.Z,"custom/gf-bar-alignment-after.svg"),cn(d.Z,"custom/gf-bar-alignment-before.svg"),cn(c.Z,"custom/gf-bar-alignment-center.svg"),cn(h.Z,"custom/gf-interpolation-linear.svg"),cn(p.Z,"custom/gf-interpolation-smooth.svg"),cn(g.Z,"custom/gf-interpolation-step-after.svg"),cn(m.Z,"custom/gf-interpolation-step-before.svg"),cn(b.Z,"custom/gf-logs.svg"),cn(y.Z,"mono/favorite.svg"),cn(w.Z,"mono/grafana.svg"),cn(S.Z,"mono/heart.svg"),cn(j.Z,"mono/heart-break.svg"),cn(k.Z,"mono/panel-add.svg"),cn(C.Z,"mono/library-panel.svg"),cn(Tt.Z,"unicons/record-audio.svg"),cn(Ge.Z,"unicons/horizontal-align-left.svg"),cn(Ke.Z,"unicons/horizontal-align-right.svg"),cn(Ze.Z,"unicons/horizontal-align-center.svg"),cn(sn.Z,"unicons/vertical-align-top.svg"),cn(nn.Z,"unicons/vertical-align-bottom.svg"),cn(an.Z,"unicons/vertical-align-center.svg")}();const wn=gn(yn),jn=(0,un.B)(n),Sn=jn,Cn=null!=o&&o.startsWith("gf-bar-align")?16:null!=o&&o.startsWith("gf-interp")?30:jn,kn=(0,un.y)(o,s),Tn=`${dn}${kn}/${o}.svg`;return(0,hn.jsx)("div",Object.assign({className:wn.container},xn,{ref:t,children:(0,hn.jsx)(i.Z,{src:Tn,width:Cn,height:Sn,title:bn,className:(0,a.cx)(wn.icon,mn,"mono"===s?{[wn.orange]:"favorite"===o}:""),style:vn})}))}));function fn(e,t){return(0,a.cx)(e,{"fa-spin":"fa fa-spinner"===e},t)}mn.displayName="Icon"},37395:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,y:()=>s});const a=["grafana","favorite","heart-break","heart","panel-add","library-panel"];function s(e,t){return null!=e&&e.startsWith("gf-")?"custom":a.includes(e)?"mono":"default"===t?"unicons":"solid"===t?"solid":"mono"}function i(e){switch(e){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},42786:(e,t,n)=>{"use strict";n.d(t,{h:()=>g});var a=n(36636),s=n(68404),i=n(43215),r=n(73512),o=n(29977),l=n(19229),d=n(19873),c=n(37395),u=n(88459),h=n(45916);const p=["name","size","iconType","tooltip","tooltipPlacement","ariaLabel","className","variant"];const g=s.forwardRef(((e,t)=>{let{name:n,size:s="md",iconType:i,tooltip:o,tooltipPlacement:l,ariaLabel:c,className:g,variant:f="secondary"}=e,v=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,p);const b=(0,r.l4)(),x=m(b,s,f),y="string"==typeof o?o:"",w=(0,h.jsx)("button",Object.assign({ref:t,"aria-label":c||y},v,{className:(0,a.cx)(x.button,g),children:(0,h.jsx)(d.J,{name:n,size:s,className:x.icon,type:i})}));return o?(0,h.jsx)(u.u,{content:o,placement:l,children:w}):w}));g.displayName="IconButton";const m=(0,l.B)(((e,t,n)=>{const s=(0,c.B)(t),r=Math.max(s/3,8);let l=e.colors.text.primary;return"primary"===n?l=e.colors.primary.text:"destructive"===n&&(l=e.colors.error.text),{button:a.css`
      width: ${s}px;
      height: ${s}px;
      background: transparent;
      border: none;
      color: ${l};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${e.shape.borderRadius()};
      z-index: 0;
      margin-right: ${e.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${e.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${r}px;
        left: -${r}px;
        right: -${r}px;
        top: -${r}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,o.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) {
        ${(0,o.getMouseFocusStyles)(e)}
      }

      &:hover {
        color: ${l};

        &:before {
          background-color: ${"secondary"===n?e.colors.action.hover:i.colorManipulator.alpha(l,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:a.css`
      vertical-align: baseline;
      display: flex;
    `}}))},59795:(e,t,n)=>{"use strict";n.d(t,{H:()=>h,I:()=>u});var a=n(36636),s=n(68404),i=n(94327),r=n(49268),o=n(5092),l=n(49124),d=n(45916);const c=["className","addonAfter","addonBefore","prefix","suffix","invalid","loading","width"];const u=s.forwardRef(((e,t)=>{const{className:n,addonAfter:s,addonBefore:o,prefix:u,suffix:p,invalid:g,loading:m,width:f=0}=e,v=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,c),[b,x]=(0,i.Z)(),[y,w]=(0,i.Z)(),j=(0,r.l4)(),S=h({theme:j,invalid:!!g,width:f});return(0,d.jsxs)("div",{className:(0,a.cx)(S.wrapper,n),"data-testid":"input-wrapper",children:[!!o&&(0,d.jsx)("div",{className:S.addon,children:o}),(0,d.jsxs)("div",{className:S.inputWrapper,children:[u&&(0,d.jsx)("div",{className:S.prefix,ref:b,children:u}),(0,d.jsx)("input",Object.assign({ref:t,className:S.input},v,{style:{paddingLeft:u?x.width+12:void 0,paddingRight:p||m?w.width+12:void 0}})),(p||m)&&(0,d.jsxs)("div",{className:S.suffix,ref:y,children:[m&&(0,d.jsx)(l.$,{className:S.loadingIndicator,inline:!0}),p]})]}),!!s&&(0,d.jsx)("div",{className:S.addon,children:s})]})}));u.displayName="Input";const h=(0,r.Bb)((e=>{let{theme:t,invalid:n=!1,width:s}=e;const i="28px",r=a.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${t.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${i};
    color: ${t.colors.text.secondary};
  `;return{wrapper:(0,a.cx)(a.css`
        label: input-wrapper;
        display: flex;
        width: ${s?`${t.spacing(s)}`:"100%"};
        height: ${t.spacing(t.components.height.md)};
        border-radius: ${t.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${n?t.colors.error.border:t.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:a.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${i};
        }
        &:not(:last-child) {
          padding-right: ${i};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,a.cx)((0,o.GL)(t.v1),(0,o.RK)(t,n),a.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${t.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:a.css`
      background-color: ${t.colors.action.disabledBackground};
      color: ${t.colors.action.disabledText};
      border: 1px solid ${t.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:a.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,a.cx)(r,a.css`
        label: input-prefix;
        padding-left: ${t.spacing(1)};
        padding-right: ${t.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,a.cx)(r,a.css`
        label: input-suffix;
        padding-left: ${t.spacing(1)};
        padding-right: ${t.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:a.css`
      & + * {
        margin-left: ${t.spacing(.5)};
      }
    `}}))},92565:(e,t,n)=>{"use strict";n.d(t,{Ar:()=>d,Lh:()=>c,W2:()=>h,wc:()=>u});var a=n(36636),s=n(68404),i=n(49268),r=n(45916);const o=["children","orientation","spacing","justify","align","wrap","width","height"];var l;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(l||(l={}));const d=e=>{let{children:t,orientation:n=l.Horizontal,spacing:a="sm",justify:d="flex-start",align:c="normal",wrap:u=!1,width:h="100%",height:g="100%"}=e,m=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,o);const f=(0,i.Fg)(),v=p(f,n,a,d,c,u);return(0,r.jsx)("div",Object.assign({className:v.layout,style:{width:h,height:g}},m,{children:s.Children.toArray(t).filter(Boolean).map(((e,t)=>(0,r.jsx)("div",{className:v.childWrapper,children:e},t)))}))},c=e=>{let{children:t,spacing:n,justify:a,align:s="center",wrap:i,width:o,height:c}=e;return(0,r.jsx)(d,{spacing:n,justify:a,orientation:l.Horizontal,align:s,width:o,height:c,wrap:i,children:t})},u=e=>{let{children:t,spacing:n,justify:a,align:s,width:i,height:o}=e;return(0,r.jsx)(d,{spacing:n,justify:a,orientation:l.Vertical,align:s,width:i,height:o,children:t})},h=e=>{let{children:t,padding:n,margin:s,grow:o,shrink:l}=e;const d=(0,i.Fg)(),c=g(d,n,s);return(0,r.jsx)("div",{className:(0,a.cx)(c.wrapper,void 0!==o&&a.css`
            flex-grow: ${o};
          `,void 0!==l&&a.css`
            flex-shrink: ${l};
          `),children:t})},p=(0,i.Bb)(((e,t,n,s,i,r)=>{const o="none"!==n?e.spacing[n]:0,d=t===l.Horizontal&&!r||t===l.Vertical?0:`-${o}`,c=t===l.Vertical?"vertical-group":"horizontal-group";return{layout:a.css`
        label: ${c};
        display: flex;
        flex-direction: ${t===l.Vertical?"column":"row"};
        flex-wrap: ${r?"wrap":"nowrap"};
        justify-content: ${s};
        align-items: ${i};
        height: 100%;
        max-width: 100%;
        // compensate for last row margin when wrapped, horizontal layout
        margin-bottom: ${d};
      `,childWrapper:a.css`
        label: layoutChildrenWrapper;
        margin-bottom: ${t!==l.Horizontal||r?o:0};
        margin-right: ${t===l.Horizontal?o:0};
        display: flex;
        align-items: ${i};

        &:last-child {
          margin-bottom: ${t===l.Vertical&&0};
          margin-right: ${t===l.Horizontal&&0};
        }
      `}})),g=(0,i.Bb)(((e,t,n)=>{const s=t&&"none"!==t&&e.spacing[t]||0,i=n&&"none"!==n&&e.spacing[n]||0;return{wrapper:a.css`
      label: container;
      margin: ${i};
      padding: ${s};
    `}}))},48662:(e,t,n)=>{"use strict";n.d(t,{L:()=>l});var a=n(36636),s=n(68404),i=n(49268),r=n(45916);const o=(0,i.Bb)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{list:a.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:a.css`
    display: ${e?"inline-block":"block"};
  `}}));class l extends s.PureComponent{constructor(e){super(e)}render(){const{items:e,renderItem:t,getItemKey:n,className:s,inline:i}=this.props,l=o(i);return(0,r.jsx)("ul",{className:(0,a.cx)(l.list,s),children:e.map(((e,a)=>(0,r.jsx)("li",{className:l.item,children:t(e,a)},n?n(e):a)))})}}},73821:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});var a=n(68404),s=n(48662),i=n(45916);class r extends a.PureComponent{render(){return(0,i.jsx)(s.L,Object.assign({},this.props))}}},11331:(e,t,n)=>{"use strict";n.d(t,{Q:()=>u});var a=n(2525),s=n(68404),i=n(9575),r=n.n(i),o=n(43215),l=n(49268),d=n(45916);class c extends s.PureComponent{constructor(){var e,t,n;super(...arguments),n={chunks:[],prevValue:""},(t="state")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return null;return{chunks:a.ZP.parse(e.value).spans.map((t=>{return t.css?{style:(n=e.theme,a=t.css,a.split(/;\s*/).reduce(((e,t)=>{if("color:rgba(0,0,0,0.5)"===t)return{color:n.colors.text.secondary};const a=t.match(/([^:\s]+)\s*:\s*(.+)/);return a&&a[1]&&a[2]&&(e[a[1].replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=a[2]),e}),{})),text:t.text}:{text:t.text};var n,a})),prevValue:e.value}}render(){const{chunks:e}=this.state;return e.map(((e,t)=>{var n;const a=null!==(n=this.props.highlight)&&void 0!==n&&n.searchWords?(0,d.jsx)(r(),{textToHighlight:e.text,searchWords:this.props.highlight.searchWords,findChunks:o.findHighlightChunksInText,highlightClassName:this.props.highlight.highlightClassName},t):e.text;return e.style?(0,d.jsx)("span",{style:e.style,"data-testid":"ansiLogLine",children:a},t):a}))}}const u=(0,l.HE)(c);u.displayName="LogMessageAnsi"},88121:(e,t,n)=>{"use strict";n.d(t,{r:()=>O,n:()=>C});var a=n(36636),s=n(58635),i=n(68404),r=n(9575),o=n.n(r),l=n(35008),d=n.n(l),c=n(43215),u=n(49268),h=n(11331),p=n(73512),g=n(47426),m=n(91780),f=n(91516),v=n(73821),b=n(45916);const x=(e,t)=>{const n=t?a.css`
        top: -250px;
      `:a.css`
        margin-top: -250px;
        width: 75%;
      `,s=t?a.css`
        top: 100%;
      `:a.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:a.css`
      position: absolute;
      height: 250px;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      background: ${e.colors.bg1};
      box-shadow: 0 0 10px ${e.colors.dropdownShadow};
      border: 1px solid ${e.colors.bg2};
      border-radius: ${e.border.radius.md};
      width: 100%;
    `,header:a.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${e.colors.bg2};
    `,logs:a.css`
      height: 220px;
      padding: 10px;
    `,afterContext:n,beforeContext:s}},y=e=>{let{row:t,rows:n,onLoadMoreContext:s,canLoadMoreRows:i}=e;const{header:r}=(0,p.yK)(x);return(0,b.jsxs)("div",{className:r,children:[(0,b.jsxs)("span",{className:a.css`
          opacity: 0.6;
        `,children:["Found ",n.length," rows."]}),(n.length>=10||n.length>10&&n.length%10!=0)&&i&&(0,b.jsx)("span",{className:a.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:s,children:"Load 10 more"})]})},w=e=>{let{row:t,rows:n,error:s,className:r,shouldScrollToBottom:o,canLoadMoreRows:l,onLoadMoreContext:d}=e;const{commonStyles:u,logs:m}=(0,p.yK)(x),[w,j]=(0,i.useState)(0),S=(0,i.useRef)();(0,i.useLayoutEffect)((()=>{const e=n.length>0&&n.length<=10;o&&e&&S.current&&j(S.current.offsetHeight)}),[o,n]);const C={row:t,rows:n,onLoadMoreContext:d,canLoadMoreRows:l};return(0,b.jsxs)("div",{className:(0,a.cx)(u,r),children:[o&&!s&&(0,b.jsx)(y,Object.assign({},C)),(0,b.jsx)("div",{className:m,children:(0,b.jsx)(f.$,{autoHide:!0,scrollTop:w,autoHeightMin:"210px",children:(0,b.jsxs)("div",{ref:S,children:[!s&&(0,b.jsx)(v.a,{items:n,renderItem:e=>(0,b.jsx)("div",{className:a.css`
                        padding: 5px 0;
                      `,children:"string"==typeof e&&c.textUtil.hasAnsiCodes(e)?(0,b.jsx)(h.Q,{value:e}):e})}),s&&(0,b.jsx)(g.b,{title:s})]})})}),!o&&!s&&(0,b.jsx)(y,Object.assign({},C))]})},j=e=>{let{row:t,context:n,errors:a,onOutsideClick:s,onLoadMoreContext:r,hasMoreContextRows:o,wrapLogMessage:l}=e;(0,i.useEffect)((()=>{const e=e=>{27===e.keyCode&&s()};return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}}),[s]);const d=(0,p.Fg)(),{afterContext:c,beforeContext:u}=x(d,l);return(0,b.jsx)(m.L,{onClick:s,children:(0,b.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[n.after&&(0,b.jsx)(w,{rows:n.after,error:a&&a.after,row:t,className:c,shouldScrollToBottom:!0,canLoadMoreRows:!!o&&o.after,onLoadMoreContext:r}),n.before&&(0,b.jsx)(w,{onLoadMoreContext:r,canLoadMoreRows:!!o&&o.before,row:t,rows:n.before,error:a&&a.before,className:u})]})})};var S=n(50682);const C=1e5;function k(e,t,n,a){const s=n&&n.length>0&&n[0]&&n[0].length>0&&t.length<C,i=null!=n?n:[];if(e){const e=s?{searchWords:i,highlightClassName:a}:void 0;return(0,b.jsx)(h.Q,{value:t,highlight:e})}return s?(0,b.jsx)(o(),{textToHighlight:t,searchWords:i,findChunks:c.findHighlightChunksInText,highlightClassName:a}):t}const T=(0,s.Z)(((e,t)=>{if(t)try{return JSON.stringify(JSON.parse(e),void 0,2)}catch(t){return e}return e}));class I extends i.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{e.stopPropagation(),this.props.onToggleContext()},(t="onContextToggle")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const{row:e,theme:t,errors:n,hasMoreContextRows:s,updateLimit:i,context:r,contextIsOpen:o,showContextToggle:l,wrapLogMessage:c,prettifyLogMessage:u,onToggleContext:h}=this.props,p=(0,S.h)(t,e.logLevel),{hasAnsi:g,raw:m}=e,f=T(m,u),v=(e=>{const t=d()(e.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:a.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:a.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${t};
    `,horizontalScroll:a.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:a.css`
      display: block;
      margin-left: 0px;
    `}})(t);return(0,b.jsx)("td",{style:o?{position:"unset"}:void 0,className:p.logsRowMessage,children:(0,b.jsxs)("div",{className:(0,a.cx)({[v.positionRelative]:c},{[v.horizontalScroll]:!c}),children:[o&&r&&(0,b.jsx)(j,{row:e,context:r,errors:n,wrapLogMessage:c,hasMoreContextRows:s,onOutsideClick:h,onLoadMoreContext:()=>{i&&i()}}),(0,b.jsx)("span",{className:(0,a.cx)(v.positionRelative,{[v.rowWithContext]:o}),children:k(g,f,e.searchWords,p.logsRowMatchHighLight)}),(null==l?void 0:l(e))&&(0,b.jsxs)("span",{onClick:this.onContextToggle,className:(0,a.cx)("log-row-context",p.context,{[v.contextNewline]:!c}),children:[o?"Hide":"Show"," context"]})]})})}}const O=(0,u.HE)(I);O.displayName="LogRowMessage"},50682:(e,t,n)=>{"use strict";n.d(t,{h:()=>r});var a=n(36636),s=n(43215),i=n(49268);const r=(0,i.Bb)(((e,t)=>{let n=e.isLight?e.v1.palette.gray5:e.v1.palette.gray2;const r=i.GU.hoverColor(e.colors.background.secondary,e);switch(t){case s.LogLevel.crit:case s.LogLevel.critical:n="#705da0";break;case s.LogLevel.error:case s.LogLevel.err:n="#e24d42";break;case s.LogLevel.warning:case s.LogLevel.warn:n=e.colors.warning.main;break;case s.LogLevel.info:n="#7eb26d";break;case s.LogLevel.debug:n="#1f78c1";break;case s.LogLevel.trace:n="#6ed0e0"}return{logsRowMatchHighLight:a.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${e.components.textHighlight.text}
      background-color: ${e.components.textHighlight};
    `,logsRowsTable:a.css`
      label: logs-rows;
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.bodySmall.fontSize};
      width: 100%;
    `,context:a.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:a.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${e.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${e.spacing(1)};
        border-top: ${e.v1.border.width.sm} solid transparent;
        border-bottom: ${e.v1.border.width.sm} solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${r};
      }
    `,logsRowDuplicates:a.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:a.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${n};
      }
    `,logIconError:a.css`
      color: ${e.colors.warning.main};
    `,logsRowToggleDetails:a.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:a.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:a.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:a.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:a.css`
      label: logs-row-details-table;
      border: 1px solid ${e.colors.border.medium};
      padding: 0 ${e.spacing(1)} ${e.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:a.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:a.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${e.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:a.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${e.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:a.css`
      label: logs-row-details__heading;
      font-weight: ${e.typography.fontWeightBold};
      padding: ${e.spacing(1)} 0 ${e.spacing(.5)};
    `,logDetailsValue:a.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${r};
      }
    `}}))},25296:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var a=n(68404),s=n(71117),i=n(74562),r=n(45916);const o=e=>{var t,n;let{value:o,onChange:l,context:d,item:c}=e;const u=null!==(t=c.settings)&&void 0!==t?t:{},h=(0,i.IX)(d.data,null==u?void 0:u.filter),p=(0,i.nw)(h,o),g=(0,a.useCallback)((e=>{if(!e||(0,i.w3)(e.value,h))return l(null==e?void 0:e.value)}),[h,l]),m=p.find((e=>e.value===o));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.Ph,{value:m,placeholder:null!==(n=u.placeholderText)&&void 0!==n?n:"Select field",options:p,onChange:g,noOptionsMessage:u.noFieldsMessage,width:u.width,isClearable:!0})})}},74562:(e,t,n)=>{"use strict";n.d(t,{IX:()=>o,nw:()=>l,w3:()=>r});var a=n(68404),s=n(43215),i=n(52410);function r(e,t){return!!e&&(t.display.has(e)||t.raw.has(e))}function o(e,t){return(0,a.useMemo)((()=>function(e,t){const n={display:new Set,raw:new Set,fields:new Map};for(const a of e)for(const i of a.fields){if(t&&!t(i))continue;const r=(0,s.getFieldDisplayName)(i,a,e);n.display.add(r),n.fields.set(r,i),i.name&&r!==i.name&&(n.raw.add(i.name),n.fields.set(i.name,i))}return n}(e,t)),[e,t])}function l(e,t,n,s){return(0,a.useMemo)((()=>{let a=!1;const r=[];n&&r.push(n);for(const n of e.display){a||n!==t||(a=!0);const o=e.fields.get(n);s&&s!==(null==o?void 0:o.type)||r.push({value:n,label:n,icon:o?(0,i.e7)(o):void 0})}for(const n of e.raw)e.display.has(n)||(a||n!==t||(a=!0),r.push({value:n,label:`${n} (base field name)`}));return t&&!a&&r.push({value:t,label:`${t} (not found)`}),r}),[e,t,n,s])}},94025:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var a=n(36636);const s=(0,n(49268).Bb)((e=>{const t=e.shape.borderRadius(1);return{modal:a.css`
      position: fixed;
      z-index: ${e.zIndex.modal};
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      border-radius: ${t};
      border: 1px solid ${e.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:a.css`
      position: fixed;
      z-index: ${e.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${e.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:a.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${e.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:a.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,modalHeaderTitle:a.css`
      font-size: ${e.typography.size.lg};
      margin: ${e.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:a.css`
      margin-right: ${e.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:a.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${e.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:a.css`
      overflow: auto;
      padding: ${e.spacing(3)};
      width: 100%;
    `,modalButtonRow:a.css`
      padding-top: ${e.spacing(3)};
    `}}))},84276:(e,t,n)=>{"use strict";n.d(t,{T:()=>d});var a=n(36636),s=(n(68404),n(16695)),i=n(49268),r=n(19873),o=n(93279),l=n(45916);const d=e=>{let{onCancel:t,loading:n}=e;const d=(0,i.yK)(c);return n?(0,l.jsx)(o.u,{content:"Cancel query",children:(0,l.jsx)(r.J,{className:(0,a.cx)("spin-clockwise",{[d.clickable]:!!t}),name:"sync",size:"sm",onClick:t,"aria-label":s.wl.components.LoadingIndicator.icon})}):null},c=()=>({clickable:a.css`
      cursor: pointer;
    `})},16712:(e,t,n)=>{"use strict";n.d(t,{R9:()=>o,_w:()=>r,bb:()=>i});var a=n(68404),s=n(43215);const i=a.createContext({eventBus:new s.EventBusSrv}),r=i.Provider,o=()=>a.useContext(i)},10259:(e,t,n)=>{"use strict";n.d(t,{RN:()=>d,h_:()=>l,lO:()=>c});var a,s=n(68404),i=n(87524),r=n(49268),o=n(45916);function l(e){const{children:t,className:n,root:a,forwardedRef:l}=e,c=(0,r.l4)(),u=(0,s.useRef)(null),h=null!=a?a:d();return u.current||(u.current=document.createElement("div"),n&&(u.current.className=n),u.current.style.position="relative",u.current.style.zIndex=`${c.zIndex.portal}`),(0,s.useLayoutEffect)((()=>(u.current&&h.appendChild(u.current),()=>{u.current&&h.removeChild(u.current)})),[h]),i.createPortal((0,o.jsx)("div",{ref:l,children:t}),u.current)}function d(){var e;return null!==(e=window.document.getElementById("grafana-portal-container"))&&void 0!==e?e:document.body}function c(){return a||(a=(0,o.jsx)("div",{id:"grafana-portal-container"}))}s.forwardRef(((e,t)=>(0,o.jsx)(l,Object.assign({},e,{forwardedRef:t})))).displayName="RefForwardingPortal"},10941:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});n(68404);var a=n(19873),s=n(45916);const i=e=>{let{isOpen:t}=e;const n=t?"search":"angle-down",i=t?"sm":"md";return(0,s.jsx)(a.J,{name:n,size:i})}},71117:(e,t,n)=>{"use strict";n.d(t,{M8:()=>q,qb:()=>W,NU:()=>H,Ph:()=>U,eI:()=>O,E0:()=>a.SelectContainerProps});var a={};n.r(a),n.d(a,{e:()=>O});var s=n(68404),i=n(58678),r=n(54503),o=n(56503),l=n(4306),d=n(49268),c=n(19873),u=n(49124),h=n(10941),p=n(36636),g=n(73512),m=n(59795),f=n(45916);const v=s.forwardRef(((e,t)=>{const{children:n}=e,a=(0,g.l4)(),s=(0,m.H)({theme:a,invalid:!1});return(0,f.jsx)("div",{className:(0,p.cx)(s.suffix,p.css`
          position: relative;
        `),ref:t,children:n})}));v.displayName="IndicatorsContainer";var b=n(5092);const x=["focused","invalid","disabled","children","innerProps","prefix"];const y=(0,d.Bb)(((e,t,n)=>{const a=(0,m.H)({theme:e,invalid:t});return{input:(0,p.cx)((0,b.nf)(e),p.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,n&&p.css`
          padding-left: 0;
        `),prefix:(0,p.cx)(a.prefix,p.css`
        position: relative;
      `)}})),w=s.forwardRef((function(e,t){let{invalid:n,children:a,innerProps:s,prefix:i}=e;!function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n])}(e,x);const r=(0,g.l4)(),o=y(r,n,!!i);return(0,f.jsxs)("div",Object.assign({className:o.input},s,{ref:t,children:[i&&(0,f.jsx)("div",{className:(0,p.cx)(o.prefix),children:i}),a]}))}));var j=n(42786),S=n(27586);const C=e=>{let{innerProps:t,children:n}=e;const a=(0,d.l4)(),s=(0,S.D)(a);return(0,f.jsx)("div",Object.assign({},t,{className:s.multiValueContainer,children:n}))},k=e=>{let{children:t,innerProps:n}=e;const a=(0,d.l4)(),s=(0,S.D)(a);return(0,f.jsx)(j.h,Object.assign({},n,{name:"times",size:"sm",className:s.multiValueRemove}))};var T=n(22585),I=n(29977);const O=e=>{const{isDisabled:t,isFocused:n,children:a,selectProps:{invalid:s=!1}}=e,i=(0,g.l4)(),r=N(i,n,t,s);return(0,f.jsx)(T.c.SelectContainer,Object.assign({},e,{className:(0,p.cx)(r.wrapper,e.className),children:a}))},N=(0,d.Bb)(((e,t,n,a)=>{const s=(0,m.H)({theme:e,invalid:a});return{wrapper:(0,p.cx)(s.wrapper,(0,b.RK)(e,a),t&&p.css`
            ${(0,I.focusCss)(e.v1)}
          `,n&&s.inputDisabled,p.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${n?"not-allowed":"pointer"};
        `)}}));var F=n(91516);const D=e=>{let{children:t,maxHeight:n,innerRef:a,innerProps:s}=e;const i=(0,g.l4)(),r=(0,S.D)(i);return(0,f.jsx)("div",Object.assign({},s,{className:r.menu,style:{maxHeight:n},"aria-label":"Select options menu",children:(0,f.jsx)(F.$,{scrollRefCallback:a,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0,children:t})}))};D.displayName="SelectMenu";const P=e=>{let{children:t,data:n,innerProps:a,innerRef:s,isFocused:i,isSelected:r,renderOptionLabel:o}=e;const l=(0,g.l4)(),d=(0,S.D)(l);return(0,f.jsxs)("div",Object.assign({ref:s,className:(0,p.cx)(d.option,i&&d.optionFocused,r&&d.optionSelected,n.isDisabled&&d.optionDisabled)},a,{"aria-label":"Select option",title:n.title,children:[n.icon&&(0,f.jsx)(c.J,{name:n.icon,className:d.optionIcon}),n.imgUrl&&(0,f.jsx)("img",{className:d.optionImage,src:n.imgUrl,alt:n.label||n.value}),(0,f.jsxs)("div",{className:d.optionBody,children:[(0,f.jsx)("span",{children:o?o(n):t}),n.description&&(0,f.jsx)("div",{className:d.optionDescription,children:n.description}),n.component&&(0,f.jsx)(n.component,{})]})]}))};P.displayName="SelectMenuOptions";var A=n(44332),M=n(15950);class R extends s.Component{render(){const{children:e}=this.props,{selectProps:t}=this.props;if(t&&Array.isArray(e)&&Array.isArray(e[0])&&void 0!==t.maxVisibleValues&&(!t.showAllSelectedWhenOpen||!t.menuIsOpen)){const[n,...a]=e,s=n.slice(0,t.maxVisibleValues);return this.renderContainer([s,...a])}return this.renderContainer(e)}renderContainer(e){const{isMulti:t,theme:n}=this.props,a=(0,S.D)(n),s=(0,p.cx)(a.valueContainer,t&&a.valueContainerMulti);return(0,f.jsx)("div",{className:s,children:e})}}const $=(0,g.HE)(R);var L=n(90242);const E=(e,t)=>{for(const n of t)if("options"in n){let t=E(e,n.options);if(t)return t}else if("value"in n&&n.value===e)return n;return null};var V;const B=e=>{const{children:t,innerProps:n,selectProps:{menuIsOpen:a,onMenuClose:i,onMenuOpen:r},isFocused:o,isMulti:l,getValue:d,innerRef:c}=e,u=e.selectProps;return u.renderControl?s.createElement(u.renderControl,{isOpen:a,value:l?d():d()[0],ref:c,onClick:a?i:r,onBlur:i,disabled:!!u.disabled,invalid:!!u.invalid}):(0,f.jsx)(w,{ref:c,innerProps:n,prefix:u.prefix,focused:o,invalid:!!u.invalid,disabled:!!u.disabled,children:t})};function z(e){var t;let{allowCustomValue:n=!1,allowCreateWhileLoading:a=!1,"aria-label":p,autoFocus:g=!1,backspaceRemovesValue:m=!0,cacheOptions:b,className:x,closeMenuOnSelect:y=!0,components:w,defaultOptions:j,defaultValue:T,disabled:I=!1,filterOption:N,formatCreateLabel:F,getOptionLabel:R,getOptionValue:z,inputValue:U,invalid:H,isClearable:W=!1,id:q,isLoading:Z=!1,isMulti:G=!1,inputId:K,isOpen:Q,isOptionDisabled:J,isSearchable:Y=!0,loadOptions:X,loadingMessage:ee="Loading options...",maxMenuHeight:te=300,minMenuHeight:ne,maxVisibleValues:ae,menuPlacement:se="auto",menuPosition:ie,menuShouldPortal:re=!0,noOptionsMessage:oe="No options found",onBlur:le,onChange:de,onCloseMenu:ce,onCreateOption:ue,onInputChange:he,onKeyDown:pe,onOpenMenu:ge,onFocus:me,openMenuOnFocus:fe=!1,options:ve=[],placeholder:be="Choose",prefix:xe,renderControl:ye,showAllSelectedWhenOpen:we=!0,tabSelectsValue:je=!0,value:Se,width:Ce,isValidNewOption:ke,formatOptionLabel:Te}=e;const Ie=(0,d.l4)(),Oe=(0,S.D)(Ie),Ne=(0,s.useRef)(null),[Fe,De]=(0,s.useState)(!1),Pe=(0,L.O)(Ie,Ce);(0,s.useEffect)((()=>{if(X&&Q&&Ne.current&&Ne.current.controlRef&&"auto"===se){const e=window.innerHeight-Ne.current.controlRef.getBoundingClientRect().bottom;De(e<te)}}),[te,se,X,Q]);const Ae=(0,s.useCallback)(((e,t)=>{if(G&&null==e)return de([],t);de(e,t)}),[G,de]);let Me=i.ZP;const Re={};let $e,Le={};if(G&&X)$e=Se;else if(G&&Se&&Array.isArray(Se)&&!X)$e=Se.map((e=>{var t;return E(null!==(t=e.value)&&void 0!==t?t:e,ve)}));else if(X){const e=T||Se;$e=e?[e]:[]}else $e=((e,t)=>{if(Array.isArray(e)){const t=e.filter(Boolean);return null!=t&&t.length?t:void 0}if("object"==typeof e)return[e];if("string"==typeof e||"number"==typeof e){const n=E(e,t);if(n)return[n]}})(Se,ve);const Ee={"aria-label":p,autoFocus:g,backspaceRemovesValue:m,captureMenuScroll:!1,closeMenuOnSelect:y,defaultValue:T,disabled:I,filterOption:N,getOptionLabel:R,getOptionValue:z,inputValue:U,invalid:H,isClearable:W,id:q,isDisabled:I,isLoading:Z,isMulti:G,inputId:K,isOptionDisabled:J,isSearchable:Y,maxMenuHeight:te,minMenuHeight:ne,maxVisibleValues:ae,menuIsOpen:Q,menuPlacement:"auto"===se&&Fe?"top":se,menuPosition:ie,menuShouldBlockScroll:!0,menuPortalTarget:re&&"undefined"!=typeof document?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:le,onChange:Ae,onInputChange:he,onKeyDown:pe,onMenuClose:ce,onMenuOpen:ge,onFocus:me,formatOptionLabel:Te,openMenuOnFocus:fe,options:ve,placeholder:be,prefix:xe,renderControl:ye,showAllSelectedWhenOpen:we,tabSelectsValue:je,value:G?$e:null===(t=$e)||void 0===t?void 0:t[0]};return n&&(Me=l.Z,Re.allowCreateWhileLoading=a,Re.formatCreateLabel=null!=F?F:_,Re.onCreateOption=ue,Re.isValidNewOption=ke),X&&(Me=n?o.Z:r.Z,Le={loadOptions:X,cacheOptions:b,defaultOptions:j}),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Me,Object.assign({ref:Ne,components:Object.assign({MenuList:D,Group:A.n,ValueContainer:$,IndicatorsContainer(e){const{selectProps:t}=e,{value:n,showAllSelectedWhenOpen:a,maxVisibleValues:s,menuIsOpen:i}=t;if(void 0!==s){const t=n.length,r=[...e.children];return r.splice(-1,0,(e=>{const{maxVisibleValues:t,selectedValuesCount:n,menuIsOpen:a,showAllSelectedWhenOpen:s}=e;return!(void 0!==t&&n>t)||s&&a?null:(0,f.jsxs)("span",{id:"excess-values",children:["(+",n-t,")"]},"excess-values")})({maxVisibleValues:s,selectedValuesCount:t,showAllSelectedWhenOpen:a,menuIsOpen:i})),(0,f.jsx)(v,Object.assign({},e,{children:r}))}return(0,f.jsx)(v,Object.assign({},e))},IndicatorSeparator:()=>(0,f.jsx)(f.Fragment,{}),Control:B,Option:P,ClearIndicator(e){const{clearValue:t}=e;return(0,f.jsx)(c.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Oe.singleValueRemove,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),t()}})},LoadingIndicator:()=>V||(V=(0,f.jsx)(u.$,{inline:!0})),LoadingMessage:()=>(0,f.jsx)("div",{className:Oe.loadingMessage,children:ee}),NoOptionsMessage:()=>(0,f.jsx)("div",{className:Oe.loadingMessage,"aria-label":"No options provided",children:oe}),DropdownIndicator:e=>(0,f.jsx)(h.m,{isOpen:e.selectProps.menuIsOpen}),SingleValue:e=>(0,f.jsx)(M.P,Object.assign({},e,{disabled:I})),SelectContainer:O,MultiValueContainer:C,MultiValueRemove:k},w),styles:Pe,className:x},Ee,Re,Le))})}function _(e){return(0,f.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,f.jsx)("div",{children:e}),(0,f.jsx)("div",{style:{flexGrow:1}}),(0,f.jsx)("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"},children:"Hit enter to add"})]})}function U(e){return(0,f.jsx)(z,Object.assign({},e))}function H(e){return(0,f.jsx)(z,Object.assign({},e,{isMulti:!0}))}function W(e){return(0,f.jsx)(z,Object.assign({},e))}function q(e){return(0,f.jsx)(z,Object.assign({},e,{isMulti:!0}))}},44332:(e,t,n)=>{"use strict";n.d(t,{n:()=>u});var a=n(36636),s=n(68404),i=n(49268),r=n(19873),o=n(45916);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=(0,i.Bb)((e=>({header:a.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${e.colors.bg2};

      &:hover {
        color: ${e.colors.textStrong};
      }
    `,label:a.css`
      flex-grow: 1;
    `,icon:a.css`
      padding-right: 2px;
    `})));class c extends s.PureComponent{constructor(){super(...arguments),l(this,"state",{expanded:!1}),l(this,"onToggleChildren",(()=>{this.setState((e=>({expanded:!e.expanded})))}))}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:e}=this.props.selectProps.value;e&&this.props.options.some((t=>t.value===e))&&this.setState({expanded:!0})}}componentDidUpdate(e){""!==e.selectProps.inputValue&&this.setState({expanded:!0})}render(){const{children:e,label:t,theme:n}=this.props,{expanded:a}=this.state,s=d(n);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:s.header,onClick:this.onToggleChildren,children:[(0,o.jsx)("span",{className:s.label,children:t}),(0,o.jsx)(r.J,{className:s.icon,name:a?"angle-up":"angle-down"})," "]}),a&&e]})}}const u=(0,i.Zz)(c)},15950:(e,t,n)=>{"use strict";n.d(t,{P:()=>h});var a=n(36636),s=n(68404),i=n(22585),r=n(49268);var o=n(49124),l=n(22285),d=n(18373),c=n(45916);const u=e=>({singleValue:a.css`
    label: singleValue;
    color: ${e.components.input.text};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,spinnerWrapper:a.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,spinnerIcon:a.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,disabled:a.css`
    color: ${e.colors.text.disabled};
  `,isOpen:a.css`
    color: ${e.colors.text.disabled};
  `}),h=e=>{var t;const{children:n,data:l,isDisabled:h}=e,g=(0,r.wW)(u),m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:n=250,delay:a=250}=t,[i,r]=(0,s.useState)(e),o=(0,s.useRef)();return(0,s.useEffect)((()=>{let t;if(e)t=setTimeout((()=>{o.current=new Date,r(e)}),a);else{const a=o.current?Date.now()-o.current.valueOf():0,s=()=>{o.current=void 0,r(e)};a>=n?s():t=setTimeout(s,n-a)}return()=>{t&&(clearTimeout(t),t=void 0)}}),[e,n,a]),i}(l.loading||!1,{delay:250,duration:750});return(0,c.jsxs)(i.c.SingleValue,Object.assign({},e,{className:(0,a.cx)(g.singleValue,h&&g.disabled,e.selectProps.menuIsOpen&&g.isOpen),children:[l.imgUrl?(0,c.jsx)(p,{loading:m,imgUrl:l.imgUrl,styles:g,alt:null!==(t=l.label)&&void 0!==t?t:l.value}):(0,c.jsx)(d.R,{horizontal:!0,size:16,visible:m,duration:150,children:(0,c.jsx)("div",{className:g.spinnerWrapper,children:(0,c.jsx)(o.$,{className:g.spinnerIcon,inline:!0})})}),!l.hideText&&n]}))},p=e=>(0,c.jsxs)("div",{className:e.styles.spinnerWrapper,children:[(0,c.jsx)(l.n,{duration:150,visible:e.loading,children:(0,c.jsx)(o.$,{className:e.styles.spinnerIcon,inline:!0})}),(0,c.jsx)(l.n,{duration:150,visible:!e.loading,children:(0,c.jsx)("img",{className:e.styles.spinnerIcon,src:e.imgUrl,alt:e.alt})})]})},27586:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var a=n(36636);const s=(0,n(19229).B)((e=>({menu:a.css`
      label: grafana-select-menu;
      background: ${e.components.dropdown.background};
      box-shadow: ${e.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:a.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,optionIcon:a.css`
      margin-right: ${e.spacing(1)};
    `,optionImage:a.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:a.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      white-space: normal;
      line-height: ${e.typography.body.lineHeight};
    `,optionBody:a.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:a.css`
      label: grafana-select-option-focused;
      background: ${e.colors.action.focus};
    `,optionSelected:a.css`
      background: ${e.colors.action.selected};
    `,optionDisabled:a.css`
      label: grafana-select-option-disabled;
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:a.css`
      label: grafana-select-single-value;
      color: ${e.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:a.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:a.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:a.css`
      label: grafana-select-loading-message;
      padding: ${e.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:a.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius()};
      margin: ${e.spacing(.25,1,.25,0)};
      padding: ${e.spacing(.25,0,.25,1)};
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `,multiValueRemove:a.css`
      label: grafana-select-multi-value-remove;
      margin: ${e.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:a.css`
      cursor: pointer;
      &:hover {
        color: ${e.colors.text.primary};
      }
    `})))},90242:(e,t,n)=>{"use strict";n.d(t,{O:()=>i,Z:()=>s});var a=n(68404);function s(e){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(e){return Object.assign({},e,{color:"inherit",margin:0,padding:0,zIndex:1})},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:e=>{let{maxHeight:t}=e;return{maxHeight:t}},multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:t=>Object.assign({},t,{color:e.colors.text.disabled}),singleValue:()=>({}),valueContainer:()=>({})}}function i(e,t){return(0,a.useMemo)((()=>Object.assign({},s(e),{menuPortal:t=>Object.assign({},t,{zIndex:e.zIndex.portal}),menu:t=>{let{top:n,bottom:a,position:s}=t;return{top:n,bottom:a,position:s,minWidth:"100%",zIndex:e.zIndex.dropdown}},container:()=>({width:t?e.spacing(t):"100%",display:"auto"===t?"inline-flex":"flex"}),option:(e,t)=>Object.assign({},e,{opacity:t.isDisabled?.5:1})})),[e,t])}},65303:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var a=n(36636),s=n(93214);const i=(0,n(49268).Bb)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{spacing:i}=e,r=e.colors.border.strong,o=e.colors.primary.main,l=e.colors.primary.main,d=e.colors.primary.transparent,c=`box-shadow: 0px 0px 0px 6px ${d}`;return{container:a.css`
      width: 100%;
      margin: ${t?"inherit":`${i(1,3,1,1)}`};
      padding-bottom: ${t&&n?e.spacing(1):"inherit"};
      height: ${t?"auto":"100%"};
    `,slider:a.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${e.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${e.colors.text.disabled};
        font-size: ${e.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${e.colors.text.primary};
      }
      .rc-slider-vertical .rc-slider-handle {
        margin-top: -10px;
      }
      .rc-slider-handle {
        border: none;
        background-color: ${l};
        box-shadow: ${e.shadows.z1};
        cursor: pointer;
      }
      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle:focus,
      .rc-slider-handle-click-focused:focus {
        ${c};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${e.colors.text.primary};
        border-color: ${e.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${o};
      }
      .rc-slider-rail {
        background-color: ${r};
        cursor: pointer;
      }
    `,tooltip:s.iv`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${e.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${e.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:a.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:a.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:a.css`
      margin-left: ${e.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:a.css`
      margin: 0 0 ${e.spacing(3)} 0;
      order: 1;
    `}}))},49124:(e,t,n)=>{"use strict";n.d(t,{$:()=>l});var a=n(36636),s=(n(68404),n(49268)),i=n(19873),r=n(45916);const o=(0,s.Bb)(((e,t)=>({wrapper:a.css`
      font-size: ${e}px;
      ${t?a.css`
            display: inline-block;
          `:""}
    `}))),l=e=>{const{className:t,inline:n=!1,iconClassName:s,style:l,size:d=16}=e,c=o(d,n);return(0,r.jsx)("div",{"data-testid":"Spinner",style:l,className:(0,a.cx)(c.wrapper,t),children:(0,r.jsx)(i.J,{className:(0,a.cx)("fa-spin",s),name:"fa fa-spinner"})})}},40936:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});const a=e=>{var t;let{cell:n,tableStyles:a,onCellFilterAdded:s,columnIndex:i,columnCount:r,userProps:o}=e;const l=n.getCellProps(),d=n.column.field;if(null==d||!d.display)return null;l.style&&(l.style.minWidth=l.style.width,l.style.justifyContent=n.column.justifyContent);let c=(null!==(t=n.column.width)&&void 0!==t?t:24)-2*a.cellPadding;return i===r-1&&(c-=a.lastChildExtraPadding),n.render("Cell",{field:d,tableStyles:a,onCellFilterAdded:s,cellProps:l,innerWidth:c,userProps:o})}},97060:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});var a=n(36636),s=n(89409);const i=e=>{const{colors:t}=e,n=e.colors.background.secondary,i=e.colors.border.weak,r=e.colors.primary.border,o=e.typography.body.lineHeight,l=12+14*o,d=e.colors.emphasize(e.colors.background.primary,.03),c=Math.max((0,s.np)(),6),u=(t,n,s)=>{const r={margin:e.spacing(0,-.5,0,.5)},o={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${e.colors.primary.main}`,background:null!=n?n:d,zIndex:1};return a.css`
      label: ${s?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${6}px;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      border-right: 1px solid ${i};

      ${t?`color: ${t};`:""};
      ${n?`background: ${n};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
        padding-right: ${c}px;
      }

      &:hover {
        ${s&&o};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${s?r:{position:"absolute",top:0,right:0,margin:"auto"}}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${e.spacing(1,.5,1,.5)};
        background: ${n?"none":e.colors.emphasize(e.colors.background.primary,.03)};

        svg {
          color: ${t};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:e,cellHeight:l,buildCellContainerStyle:u,cellPadding:6,lastChildExtraPadding:c,cellHeightInner:14*o,rowHeight:l+2,table:a.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:a.css`
      label: thead;
      height: ${l}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${n};
      position: relative;
    `,tfoot:a.css`
      label: tfoot;
      height: ${l}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${n};
      position: relative;
    `,headerCell:a.css`
      padding: ${6}px;
      overflow: hidden;
      white-space: nowrap;
      color: ${t.primary.text};
      border-right: 1px solid ${e.colors.border.weak};
      display: flex;

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:a.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: flex;
      margin-right: ${e.spacing(.5)};
    `,cellContainer:u(void 0,void 0,!0),cellContainerNoOverflow:u(void 0,void 0,!1),cellText:a.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,cellLink:a.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      text-decoration: underline;
    `,imageCellLink:a.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:a.css`
      label: headerFilter;
      cursor: pointer;
    `,paginationWrapper:a.css`
      display: flex;
      background: ${n};
      height: ${l}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      border-top: 1px solid ${e.colors.border.weak};
      li {
        margin-bottom: 0;
      }
    `,paginationItem:a.css`
      flex: 20%;
    `,paginationCenterItem:a.css`
      flex: 100%;
      display: flex;
      justify-content: center;
    `,paginationSummary:a.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      flex: 20%;
      padding-right: ${e.spacing(1)};
    `,tableContentWrapper:e=>{const t=void 0!==e?`${e}px`:"100%";return a.css`
        label: tableContentWrapper;
        width: ${t};
        display: flex;
        flex-direction: column;
      `},row:a.css`
      label: row;
      border-bottom: 1px solid ${i};

      &:hover {
        background-color: ${d};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:a.css`
      height: 100%;
    `,resizeHandle:a.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${r};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:a.css`
      margin-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
    `,noData:a.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `}}},9239:(e,t,n)=>{"use strict";n.d(t,{PT:()=>s,h2:()=>a.h2,tE:()=>i});var a=n(97024);const s="=",i="!="},77443:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(36636),s=(n(68404),n(43215)),i=n(49268),r=n(45916);const o=(0,i.Bb)((e=>({counter:a.css`
      label: counter;
      margin-left: ${e.spacing(1)};
      border-radius: ${e.spacing(3)};
      background-color: ${e.colors.action.hover};
      padding: ${e.spacing(.25,1)};
      color: ${e.colors.text.secondary};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
    `}))),l=e=>{let{value:t}=e;const n=(0,i.wW)(o);return(0,r.jsx)("span",{className:n.counter,children:(0,s.locale)(t,0).text})}},60540:(e,t,n)=>{"use strict";n.d(t,{O:()=>h});var a=n(36636),s=n(68404),i=n(16695),r=n(49268),o=n(29977),l=n(19873),d=n(77443),c=n(45916);const u=["label","active","icon","onChangeTab","counter","suffix","className","href"];const h=s.forwardRef(((e,t)=>{var n,s;let{label:o,active:h,icon:g,onChangeTab:m,counter:f,suffix:v,href:b}=e,x=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,u);const y=(0,r.l4)(),w=p(y),j=(0,a.cx)(w.link,h?w.activeStyle:w.notActive);return(0,c.jsx)("div",{className:w.item,children:(0,c.jsx)("a",Object.assign({href:b||"#",className:j},x,{onClick:m,"aria-label":x["aria-label"]||i.wl.components.Tab.title(o),role:"tab","aria-selected":h,ref:t,children:(0,c.jsxs)(c.Fragment,{children:[g&&(n||(n=(0,c.jsx)(l.J,{name:g}))),o,"number"==typeof f&&(s||(s=(0,c.jsx)(d.A,{value:f}))),v&&(0,c.jsx)(v,{className:w.suffix})]})}))})}));h.displayName="Tab";const p=(0,r.Bb)((e=>({item:a.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:a.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${e.spacing(1)};
      }

      &:focus-visible {
+        ${(0,o.getFocusStyles)(e)}
      }
    `,notActive:a.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${e.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${e.colors.action.hover};
        }
      }
    `,activeStyle:a.css`
      label: activeTabStyle;
      color: ${e.colors.text.primary};
      overflow: hidden;
      font-weight: ${e.typography.fontWeightMedium};

      a {
        color: ${e.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:a.css`
      margin-left: ${e.spacing(1)};
    `})))},16028:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});var a=n(68404);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends a.Component{constructor(){super(...arguments),s(this,"hideTimeout",void 0),s(this,"state",{show:!1}),s(this,"showPopper",(()=>{clearTimeout(this.hideTimeout),this.setState({show:!0})})),s(this,"hidePopper",(()=>{this.hideTimeout=setTimeout((()=>{this.setState({show:!1})}),this.props.hideAfter)}))}render(){const{children:e,content:t,placement:n="auto"}=this.props,{show:a}=this.state;return e(this.showPopper,this.hidePopper,{show:a,placement:n,content:t})}}},93279:(e,t,n)=>{"use strict";n.d(t,{u:()=>c});var a=n(36636),s=n(68404),i=n(59418),r=n(43215),o=n(73512),l=n(10259),d=n(45916);const c=s.memo((e=>{let{children:t,theme:n,interactive:a,show:r,placement:c,content:h}=e;const{getArrowProps:p,getTooltipProps:g,setTooltipRef:m,setTriggerRef:f,visible:v,update:b}=(0,i.O)({visible:r,placement:c,interactive:a,delayHide:a?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"]}),x=(0,o.wW)(u)[null!=n?n:"info"];return(0,d.jsxs)(d.Fragment,{children:[s.cloneElement(t,{ref:f}),v&&(0,d.jsx)(l.h_,{children:(0,d.jsxs)("div",Object.assign({ref:m},g({className:x}),{children:[(0,d.jsx)("div",Object.assign({},p({className:"tooltip-arrow"}))),"string"==typeof h&&h,s.isValidElement(h)&&s.cloneElement(h),"function"==typeof h&&h({updatePopperPosition:b})]}))})]})}));function u(e){function t(t,n,s){return a.css`
      background-color: ${t};
      border-radius: 3px;
      border: 1px solid ${n};
      box-shadow: ${e.shadows.z2};
      color: ${s};
      font-size: ${e.typography.bodySmall.fontSize};
      padding: ${e.spacing(.5,1)};
      transition: opacity 0.3s;
      z-index: ${e.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      .tooltip-arrow {
        height: 1rem;
        position: absolute;
        width: 1rem;
        pointer-events: none;
      }

      .tooltip-arrow::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      .tooltip-arrow::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow {
        left: 0;
        margin-top: -10px;
        top: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::before {
        border-color: transparent transparent ${n} transparent;
        border-width: 0 8px 7px 8px;
        position: absolute;
        top: -1px;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::after {
        border-color: transparent transparent ${t} transparent;
        border-width: 0 8px 7px 8px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow {
        bottom: 0;
        left: 0;
        margin-bottom: -11px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::before {
        border-color: ${n} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
        position: absolute;
        top: 1px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::after {
        border-color: ${t} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow {
        left: 0;
        margin-left: -11px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::before {
        border-color: transparent ${n} transparent transparent;
        border-width: 7px 6px 7px 0;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::after {
        border-color: transparent ${t} transparent transparent;
        border-width: 6px 7px 7px 0;
        left: 2px;
        top: 1px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow {
        margin-right: -10px;
        right: 0;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::before {
        border-color: transparent transparent transparent ${n};
        border-width: 7px 0px 6px 7px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::after {
        border-color: transparent transparent transparent ${t};
        border-width: 6px 0 5px 5px;
        left: 1px;
        top: 1px;
      }

      code {
        border: none;
        display: inline;
        background: ${r.colorManipulator.darken(t,.1)};
        color: ${s};
      }

      pre {
        background: ${r.colorManipulator.darken(t,.1)};
        color: ${s};
      }

      a {
        color: ${s};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `}const n=t(e.components.tooltip.background,e.components.tooltip.background,e.components.tooltip.text);return{info:n,"info-alt":n,error:t(e.colors.error.main,e.colors.error.main,e.colors.error.contrastText)}}c.displayName="Tooltip"},88459:(e,t,n)=>{"use strict";n.d(t,{u:()=>a.u});var a=n(93279);n(16028)},88241:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});var a=n(68404),s=n(45916);const i=e=>{let{highlightParts:t,text:n,highlightClassName:i}=e;if(null==t||!t.length)return null;let r=[],o=function(e,t){const n=[];return e.forEach((e=>{n.push(e.start,e.end+1)})),0!==n[0]&&n.unshift(0),n[n.length-1]!==t&&n.push(t),n}(t,n.length),l=0===t[0].start;for(let e=1;e<o.length;e++){let t=o[e-1],s=o[e];r.push((0,a.createElement)(l?"mark":"span",{key:e-1,className:l?i:void 0},n.substring(t,s))),l=!l}return(0,s.jsx)("div",{children:r})}},84798:(e,t,n)=>{"use strict";n.d(t,{AY:()=>d});var a=n(36636),s=(n(68404),n(49499)),i=n(73512),r=n(29977),o=n(91516),l=n(45916);const d=e=>{var t,n;let{width:a,height:r,legend:d,children:u}=e;const h=(0,i.wW)(c),p={display:"flex",width:`${a}px`,height:`${r}px`},[g,m]=(0,s.Z)();if(!d)return(0,l.jsx)("div",{tabIndex:0,style:p,className:h.viz,children:u(a,r)});const{placement:f,maxHeight:v="35%",maxWidth:b="60%"}=d.props;let x=null;const y={};switch(f){case"bottom":p.flexDirection="column",y.maxHeight=v,m&&(x={width:a,height:r-m.height});break;case"right":p.flexDirection="row",y.maxWidth=b,m&&(x={width:a-m.width,height:r}),d.props.width&&(y.width=d.props.width,x={width:a-d.props.width,height:r})}return 0===(null===(t=x)||void 0===t?void 0:t.width)&&(x.width=a),0===(null===(n=x)||void 0===n?void 0:n.height)&&(x.height=r),(0,l.jsxs)("div",{style:p,children:[(0,l.jsx)("div",{tabIndex:0,className:h.viz,children:x&&u(x.width,x.height)}),(0,l.jsx)("div",{style:y,ref:g,children:(0,l.jsx)(o.$,{hideHorizontalTrack:!0,children:d})})]})},c=e=>({viz:(0,a.css)({flexGrow:2,borderRadius:e.shape.borderRadius(1),"&:focus-visible":(0,r.getFocusStyles)(e)})});d.Legend=e=>{let{children:t}=e;return(0,l.jsx)(l.Fragment,{children:t})}},9513:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var a=n(68404),s=n(43215),i=n(49268),r=n(45916);const o=["color","className","gradient"];const l=a.forwardRef(((e,t)=>{let{color:n,className:a,gradient:l}=e,d=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,o);const c=(0,i.l4)();let u;if(l){var h,p;const e=null===(h=(p=s.fieldColorModeRegistry.get(l)).getColors)||void 0===h?void 0:h.call(p,c);u=null!=e&&e.length?`linear-gradient(90deg, ${e.join(", ")})`:c.visualization.getColorByName("")}else u=n;const g={background:u,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return(0,r.jsx)("div",Object.assign({ref:t,className:a,style:g},d))}));l.displayName="SeriesIcon"},39016:(e,t,n)=>{"use strict";n.d(t,{cS:()=>x,Vb:()=>a.SeriesTableProps,Vt:()=>b,h:()=>a.SeriesTableRowProps,I5:()=>g,S$:()=>h});var a={};n.r(a),n.d(a,{c:()=>x,V:()=>b});var s=n(36636),i=n(68404),r=n(49268),o=n(10259),l=n(66767),d=n(29977);var c=n(45916);const u=["position","offset","children","allowPointerEvents","className"];const h=e=>{let{position:{x:t,y:n},offset:{x:a,y:o},children:d,allowPointerEvents:h=!1,className:g}=e,m=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,u);const f=(0,i.useRef)(null),[v,b]=(0,i.useState)({width:0,height:0}),{width:x,height:y}=(0,l.Z)(),[w,j]=(0,i.useState)({x:t+a,y:n+o}),S=(0,i.useMemo)((()=>new ResizeObserver((e=>{for(let t of e){const e=Math.floor(t.contentRect.width+16),n=Math.floor(t.contentRect.height+16);v.width===e&&v.height===n||b({width:Math.min(e,x),height:Math.min(n,y)})}}))),[v,x,y]);(0,i.useLayoutEffect)((()=>(f.current&&S.observe(f.current),()=>{S.disconnect()})),[S]),(0,i.useLayoutEffect)((()=>{if(f&&f.current){const{x:e,y:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=e,d=t;const c=Math.max(e+s+n-(r-s),0),u=Math.abs(Math.min(e-s-n-s,0)),h=c>0,p=u>0,g=Math.max(t+i+a-(o-i),0),m=Math.abs(Math.min(t-i-a-i,0)),f=g>0,v=m>0;return l=h&&p?c>u?s:r-s-n:h?e-s-n:e+s,d=f&&v?g>m?i:o-i-a:f?t-i-a:t+i,{x:l,y:d}}(t,n,v.width,v.height,a,o,x,y);j({x:e,y:s})}}),[x,y,t,a,n,o,v]);const C=(0,r.wW)(p);return(0,c.jsx)("div",Object.assign({ref:f,style:{position:"fixed",left:0,pointerEvents:h?"auto":"none",top:0,transform:`translate(${w.x}px, ${w.y}px)`,transition:"transform ease-out 0.1s"}},m,{className:(0,s.cx)(C.wrapper,g),children:d}))};h.displayName="VizTooltipContainer";const p=e=>({wrapper:s.css`
    ${(0,d.getTooltipContainerStyles)(e)}
  `}),g=e=>{let{content:t,position:n,offset:a}=e;const s=(0,r.yK)(m);return n?(0,c.jsx)(o.h_,{className:s.portal,children:(0,c.jsx)(h,{position:n,offset:a||{x:0,y:0},children:t})}):null};g.displayName="VizTooltip";const m=()=>({portal:s.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `});var f=n(9513);const v=e=>({icon:s.css`
      margin-right: ${e.spacing(1)};
      vertical-align: middle;
    `,seriesTable:s.css`
      display: table;
    `,seriesTableRow:s.css`
      display: table-row;
      font-size: ${e.typography.bodySmall.fontSize};
    `,seriesTableCell:s.css`
      display: table-cell;
    `,label:s.css`
      word-break: break-all;
    `,value:s.css`
      padding-left: ${e.spacing(2)};
    `,activeSeries:s.css`
      font-weight: ${e.typography.fontWeightBold};
      color: ${e.colors.text.maxContrast};
    `,timestamp:s.css`
      font-weight: ${e.typography.fontWeightBold};
      font-size: ${e.typography.bodySmall.fontSize};
    `}),b=e=>{let{color:t,label:n,value:a,isActive:i}=e;const o=(0,r.wW)(v);return(0,c.jsxs)("div",{"data-testid":"SeriesTableRow",className:(0,s.cx)(o.seriesTableRow,i&&o.activeSeries),children:[t&&(0,c.jsx)("div",{className:o.seriesTableCell,children:(0,c.jsx)(f.F,{color:t,className:o.icon})}),n&&(0,c.jsx)("div",{className:(0,s.cx)(o.seriesTableCell,o.label),children:n}),a&&(0,c.jsx)("div",{className:(0,s.cx)(o.seriesTableCell,o.value),children:a})]})},x=e=>{let{timestamp:t,series:n}=e;const a=(0,r.wW)(v);return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)("div",{className:a.timestamp,"aria-label":"Timestamp",children:t}),n.map(((e,t)=>(0,c.jsx)(b,{isActive:e.isActive,label:e.label,color:e.color,value:e.value},`${e.label}-${t}`)))]})}},29200:(e,t,n)=>{"use strict";n.d(t,{bZj:()=>Gl.b,Uxq:()=>Gl.AlertVariant,O5T:()=>zu,M8I:()=>Le.M8,qbS:()=>Le.qb,H6n:()=>cp,Cts:()=>Nc,JVe:()=>k.BadgeColor,u8S:()=>k.BadgeProps,xfx:()=>rr,QHm:()=>ir,w6I:()=>Zo,pcF:()=>Uo,IGx:()=>Ho,apN:()=>Wo,jGm:()=>qo,dI4:()=>Tm,zxk:()=>re.zx,OSz:()=>Ze,hE2:()=>re.hE,sBP:()=>re.ButtonProps,doH:()=>Sn,Wu3:()=>re.ButtonVariant,_d:()=>Qd,Zbd:()=>gg,_L7:()=>dg,jUt:()=>F.CardContainerProps,dwY:()=>D.Props,vTp:()=>He,iNw:()=>i.CascaderOption,WTJ:()=>ku,XZJ:()=>yp,LVf:()=>Mt.L,mUV:()=>De,pq4:()=>yi,EGH:()=>m.MonacoOptions,L0D:()=>m.CodeEditorSuggestionItem,kwZ:()=>gi,s2J:()=>ed,UO1:()=>Xl,zH8:()=>Dt,TkS:()=>$t,puI:()=>de,sm4:()=>ni,feC:()=>g.ConfirmModalProps,W20:()=>Js.W2,xVl:()=>vr,CMg:()=>f.ContextMenuProps,ybu:()=>Yl,ATJ:()=>oo.A,$TT:()=>ye.$,kuP:()=>rd,vmb:()=>fc,V5N:()=>xr,dIl:()=>jc,E1E:()=>Vu,Mtg:()=>xs,kse:()=>u.DatePickerProps,d2U:()=>Ss,Qiu:()=>h.DatePickerWithInputProps,xZq:()=>Fs,m1X:()=>ue,dys:()=>rh,Ltx:()=>Pg,msj:()=>Xh.m,isR:()=>N.DropzoneFile,jye:()=>lm,KBh:()=>Et,SVk:()=>nu,z4Q:()=>au,M_3:()=>T.ErrorBoundaryAlertProps,X2N:()=>Xc,TZ:()=>Ug,jKV:()=>Kg.j,nTT:()=>_u.n,aXU:()=>Mc,ZjK:()=>Pc,gNt:()=>la.g,F26:()=>Jh,Zjt:()=>Ed,C3N:()=>Wh,S0X:()=>ru.S,YoT:()=>Dp,A_i:()=>Mp,G1O:()=>N.FileDropzoneProps,K$w:()=>Op,wEv:()=>O.FileListItemProps,p0f:()=>Sp,HSx:()=>pp,BmQ:()=>Ks,l09:()=>vh,YE$:()=>I.FormInputSize,WRj:()=>ar,fiX:()=>Bd,aCY:()=>el,kJb:()=>gl,wvn:()=>sl,bpR:()=>il,drZ:()=>Kg.d,aSI:()=>A.GraphNGLegendEvent,E2j:()=>Kg.GraphNGProps,UNL:()=>Kl,pK4:()=>S.GraphSeriesTogglerAPI,UAG:()=>Ul,LhK:()=>Js.Lh,JO$:()=>E.J,hU:()=>se.h,gZk:()=>se.IconButtonVariant,vDh:()=>Tc,_9$:()=>uu,Z6t:()=>ju,cJ0:()=>_,W4p:()=>lu,mOU:()=>Gh,x$6:()=>nc,KEo:()=>ke,IIB:()=>$e.I,gs_:()=>bh,gwK:()=>Kc,uC:()=>Zc,Cmj:()=>Gg,__J:()=>Bh._,vw6:()=>Dm,Gdq:()=>Z.G,DeQ:()=>Uh,rUS:()=>Vh,Qjf:()=>re.Qj,aVo:()=>Ms.a,u3Z:()=>Je,c02:()=>r.LoadingPlaceholderProps,jwW:()=>sd,QNy:()=>id.Q,w3v:()=>$d,JxD:()=>zg,v2r:()=>dn,kSQ:()=>Qt,VO7:()=>o.MenuGroupProps,sNh:()=>sn,T4d:()=>l.MenuItemProps,oOs:()=>o.MenuItemsGroup,ZyH:()=>d.MenuProps,u_l:()=>ei,xBx:()=>Xs,Y0X:()=>Di,QEF:()=>Ii,Han:()=>Ti,krk:()=>Ni,JYt:()=>Pi,$iA:()=>Fi,d$d:()=>m.Monaco,rEm:()=>m.MonacoEditor,NUq:()=>Le.NU,k8K:()=>p.OnTagClick,XDu:()=>Ai,tlE:()=>_s,fmR:()=>kl,qbG:()=>ml,QEv:()=>b.ErrorIndicatorProps,E3Q:()=>vl.T,oP_:()=>vl.LoadingIndicatorProps,vIs:()=>x.PanelChromeProps,swS:()=>y.PanelChromeType,lk7:()=>Nm,QPw:()=>Sl.PanelContext,_wC:()=>Sl._w,bbH:()=>Sl.bb,jX4:()=>x.PanelPadding,lNn:()=>Vg,isz:()=>wo.PlotSelection,xyZ:()=>wo.PlotTooltipInterpolator,oDb:()=>Rg,bvM:()=>P.PluginSignatureBadgeProps,J2e:()=>xe,yky:()=>a.PopoverContent,Dh5:()=>he.D,h_i:()=>fe.h_,lO4:()=>fe.lO,qjJ:()=>di,SYO:()=>ap,xON:()=>op,U2U:()=>hh,VR_:()=>pi,dPd:()=>In,xpf:()=>tg,wf3:()=>mo.wf,fqL:()=>ye.ScrollbarPosition,m4K:()=>mp,Zkz:()=>bp,XX7:()=>qu,VXm:()=>Ju,Xrl:()=>eh,fT$:()=>nh,VBk:()=>Ku,PhF:()=>Le.Ph,eI2:()=>Le.eI,E0:()=>Le.E0,spA:()=>Pt,jx7:()=>Tt,qRd:()=>It,FiV:()=>nl.F,cS8:()=>tl.cS,VbF:()=>tl.Vb,VtB:()=>tl.Vt,ha2:()=>tl.h,YvT:()=>Bl,R8q:()=>Cl,FOj:()=>_i,U_X:()=>C.SingleStatBaseOptions,R9v:()=>Uu.R,iRW:()=>uh,bju:()=>Ro,$jN:()=>Ke.$,mMX:()=>Ut,rsf:()=>tc,sHf:()=>Iu,OK9:()=>Si.O,DJl:()=>s.TabConfig,I5H:()=>go,WLI:()=>Se,iA_:()=>Yr,h2q:()=>yr.h2,wtM:()=>io,JAu:()=>yr.TableSortByFieldState,J_V:()=>ki,Vp9:()=>Ws,PST:()=>Zs,B7H:()=>Es,Kx8:()=>eo,yAm:()=>hs,K4x:()=>zp,XcI:()=>rs,WKf:()=>c.TimeRangePickerProps,pfI:()=>am,OkK:()=>Gn,hAV:()=>gn,RNy:()=>xn,ua7:()=>Y.u,iiT:()=>Wg.i,gDA:()=>xo.gD,N$r:()=>fo.N,UBi:()=>Do,ffP:()=>v.UPlotConfigPrepFn,nAu:()=>zt,b59:()=>xh,wcK:()=>Js.wc,L2y:()=>co,AYi:()=>Zl.AY,C9i:()=>Zl.VizLayoutComponentType,Lxb:()=>Zl.VizLayoutLegendProps,wIc:()=>Zl.VizLayoutProps,ltB:()=>zl,Jn8:()=>w.VizLegendItem,eMh:()=>Dl,QBm:()=>Wl,M9j:()=>j.VizRepeaterRenderValueProps,I5C:()=>tl.I5,S$u:()=>tl.S$,zDr:()=>fs,zH1:()=>br,K2:()=>_g,Rbc:()=>Hg,z12:()=>Qg.z,PRL:()=>Kd,o5O:()=>Tn,ivH:()=>$h,LyM:()=>Ng,HxM:()=>$e.H,hIY:()=>hd.h,RNS:()=>fe.RN,D1k:()=>ep.D,qVi:()=>$g,sVu:()=>ol,mcr:()=>ll,NFT:()=>m.monacoTypes,RnT:()=>Qg.R,JpF:()=>Yh.Z,RKV:()=>us.RK,rDf:()=>Zd,ZHc:()=>qd,zrC:()=>im,R9P:()=>Sl.R9,ThK:()=>ji,PfY:()=>su});var a={};n.r(a);var s={};n.r(s),n.d(s,{W:()=>Se});var i={};n.r(i),n.d(i,{v:()=>He});var r={};n.r(r),n.d(r,{u:()=>Je});var o={};n.r(o),n.d(o,{k:()=>Qt});var l={};n.r(l),n.d(l,{s:()=>sn});var d={};n.r(d),n.d(d,{v:()=>dn});var c={};n.r(c),n.d(c,{sU:()=>ss,Xc:()=>rs});var u={};n.r(u),n.d(u,{M:()=>xs});var h={};n.r(h),n.d(h,{d:()=>Ss});var p={};n.r(p),n.d(p,{V:()=>Ws});var g={};n.r(g),n.d(g,{s:()=>ni});var m={};n.r(m),n.d(m,{k:()=>gi});var f={};n.r(f),n.d(f,{x:()=>vr});var v={};n.r(v),n.d(v,{U:()=>Do});var b={};n.r(b),n.d(b,{g:()=>ml});var x={};n.r(x),n.d(x,{f:()=>bl});var y={};n.r(y),n.d(y,{fm:()=>kl,qb:()=>ml,QE:()=>b.ErrorIndicatorProps,E3:()=>vl.T,oP:()=>vl.LoadingIndicatorProps,vI:()=>x.PanelChromeProps,QP:()=>Sl.PanelContext,_w:()=>Sl._w,bb:()=>Sl.bb,jX:()=>x.PanelPadding,R8:()=>Cl,R9:()=>Sl.R9});var w={};n.r(w),n.d(w,{Y:()=>Bl});var j={};n.r(j),n.d(j,{Q:()=>Wl});var S={};n.r(S),n.d(S,{U:()=>Kl});var C={};n.r(C),n.d(C,{PR:()=>Kd,rD:()=>Zd,ZH:()=>qd});var k={};n.r(k),n.d(k,{C:()=>Nc});var T={};n.r(T),n.d(T,{SV:()=>nu,z4:()=>au,Pf:()=>su});var I={};n.r(I);var O={};n.r(O),n.d(O,{K:()=>Op});var N={};n.r(N),n.d(N,{Yo:()=>Dp,A_:()=>Mp});var F={};n.r(F),n.d(F,{_:()=>dg,$:()=>cg});var D={};n.r(D),n.d(D,{Z:()=>gg,L:()=>Ng});var P={};n.r(P),n.d(P,{o:()=>Rg});var A={};n.r(A);var M=n(36636),R=n(68404),$=n(23019),L=n.n($),E=n(19873),V=n(88459),B=n(45916);const z=["children","isFocused","isInvalid","className","htmlFor","tooltip","width"];const _=e=>{let{children:t,isFocused:n,isInvalid:a,className:s,htmlFor:i,tooltip:r,width:o}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,z);const d=L()(s,`gf-form-label width-${o||"10"}`,{"gf-form-label--is-focused":n,"gf-form-label--is-invalid":a});return(0,B.jsxs)("label",Object.assign({className:d},l,{htmlFor:i,children:[t,r&&(0,B.jsx)(V.u,{placement:"top",content:r,theme:"info",children:(0,B.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,B.jsx)(E.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}))},U=["label","tooltip","labelWidth","inputWidth","inputEl","className"];const H=e=>{let{label:t,tooltip:n,labelWidth:a,inputWidth:s,inputEl:i,className:r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,U);const l=W();return(0,B.jsxs)("div",{className:(0,M.cx)(l.formField,r),children:[(0,B.jsx)(_,{width:a,tooltip:n,children:t}),i||(0,B.jsx)("input",Object.assign({type:"text",className:"gf-form-input "+(s?`width-${s}`:"")},o))]})};H.displayName="FormField",H.defaultProps={labelWidth:6,inputWidth:12};const W=()=>({formField:M.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `});var q,Z=n(5414),G=n(75191),K=n(48721),Q=n(11136),J=n(82897),Y=n(93279);function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ee extends R.PureComponent{constructor(){super(...arguments),X(this,"state",{id:(0,J.uniqueId)()}),X(this,"internalOnChange",(e=>{e.stopPropagation(),this.props.onChange(e)}))}render(){const{labelClass:e="",switchClass:t="",label:n,checked:a,transparent:s,className:i,tooltip:r,tooltipPlacement:o}=this.props,l=this.state.id,d=`gf-form-label ${e} ${s?"gf-form-label--transparent":""} pointer`,c=`gf-form-switch ${t} ${s?"gf-form-switch--transparent":""}`;return(0,B.jsx)("div",{className:"gf-form-switch-container-react",children:(0,B.jsxs)("label",{htmlFor:l,className:`gf-form gf-form-switch-container ${i||""}`,children:[n&&(0,B.jsxs)("div",{className:d,children:[n,r&&(0,B.jsx)(Y.u,{placement:o||"auto",content:r,theme:"info",children:(0,B.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,B.jsx)(E.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}),(0,B.jsxs)("div",{className:c,children:[(0,B.jsx)("input",{id:l,type:"checkbox",checked:a,onChange:this.internalOnChange}),q||(q=(0,B.jsx)("span",{className:"gf-form-switch__slider"}))]})]})})}}var te=n(77274);const ne=["label","labelWidth","inputWidth","onReset","isConfigured","tooltip","placeholder"];const ae=e=>{let{label:t="Password",labelWidth:n,inputWidth:a=12,onReset:s,isConfigured:i,tooltip:r,placeholder:o="Password"}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,ne);const d={noRadiusInput:M.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:M.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `};return(0,B.jsx)(H,{label:t,tooltip:r,labelWidth:n,inputEl:i?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("input",Object.assign({type:"text",className:(0,M.cx)(`gf-form-input width-${a}`,d.noRadiusInput),disabled:!0,value:"configured"},(0,J.omit)(l,"value"))),(0,B.jsx)(te.zx,{onClick:s,variant:"secondary",type:"button",children:"Reset"})]}):(0,B.jsx)("input",Object.assign({type:"password",className:`gf-form-input width-${a}`,placeholder:o},l))})};ae.displayName="SecretFormField";var se=n(42786),ie=n(49268),re=n(95708);function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class le extends R.PureComponent{constructor(){super(...arguments),oe(this,"mainButtonRef",R.createRef()),oe(this,"confirmButtonRef",R.createRef()),oe(this,"state",{showConfirm:!1}),oe(this,"onClickButton",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!0},(()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()})),this.props.onClick&&this.props.onClick()})),oe(this,"onClickCancel",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!1},(()=>{var e;null===(e=this.mainButtonRef.current)||void 0===e||e.focus()})),this.props.onCancel&&this.props.onCancel()})),oe(this,"onConfirm",(e=>{e&&e.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}))}render(){const{theme:e,className:t,size:n,disabled:a,confirmText:s,confirmVariant:i,children:r}=this.props,o=ce(e),l=(0,M.cx)(t,this.state.showConfirm?o.buttonHide:o.buttonShow,a&&o.buttonDisabled),d=(0,M.cx)(o.confirmButton,this.state.showConfirm?o.confirmButtonShow:o.confirmButtonHide),c=a?()=>{}:this.onClickButton;return(0,B.jsxs)("span",{className:o.buttonContainer,children:[(0,B.jsx)("div",{className:(0,M.cx)(a&&o.disabled),children:"string"==typeof r?(0,B.jsx)("span",{className:l,children:(0,B.jsx)(re.zx,{size:n,fill:"text",onClick:c,ref:this.mainButtonRef,children:r})}):(0,B.jsx)("span",{className:l,onClick:c,children:r})}),(0,B.jsxs)("span",{className:d,children:[(0,B.jsx)(re.zx,{size:n,variant:i,onClick:this.onConfirm,ref:this.confirmButtonRef,children:s}),(0,B.jsx)(re.zx,{size:n,fill:"text",onClick:this.onClickCancel,children:"Cancel"})]})]})}}const de=(0,ie.Zz)(le),ce=(0,ie.Bb)((e=>({buttonContainer:M.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:M.css`
      text-decoration: none;
      color: ${e.colors.text};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:M.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:M.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:M.css`
      align-items: flex-start;
      background: ${e.colors.bg1};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:M.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:M.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:M.css`
      cursor: not-allowed;
    `})));de.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},de.displayName="ConfirmButton";const ue=e=>{let{size:t,disabled:n,onConfirm:a,"aria-label":s}=e;return(0,B.jsx)(de,{confirmText:"Delete",confirmVariant:"destructive",size:t||"md",disabled:n,onConfirm:a,children:(0,B.jsx)(re.zx,{"aria-label":s,variant:"destructive",icon:"times",size:t||"sm"})})};var he=n(16028),pe=n(67341),ge=n(49446),me=n(88917),fe=n(10259);const ve={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},be={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class xe extends R.PureComponent{render(){const{content:e,show:t,placement:n,onMouseEnter:a,onMouseLeave:s,className:i,wrapperClassName:r,renderArrow:o,referenceElement:l,onKeyDown:d}=this.props;return(0,B.jsx)(pe.dK,{children:(0,B.jsx)(me.ZP,{in:t,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:t=>(0,B.jsx)(fe.h_,{children:(0,B.jsx)(ge.r,{placement:n,referenceElement:l,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}],children:n=>{let{ref:l,style:c,placement:u,arrowProps:h,update:p}=n;return(0,B.jsx)("div",{onMouseEnter:a,onMouseLeave:s,onKeyDown:d,ref:l,style:Object.assign({},c,ve,be[t]),"data-placement":u,className:`${r}`,children:(0,B.jsxs)("div",{className:i,children:["string"==typeof e&&e,R.isValidElement(e)&&R.cloneElement(e),"function"==typeof e&&e({updatePopperPosition:p}),o&&o({arrowProps:h,placement:u})]})})}})})})})}}var ye=n(91516),we=n(3490);const je=(0,ie.Bb)((e=>({container:M.css`
      height: 100%;
    `,tabContent:M.css`
      padding: ${e.spacing(2)};
      background-color: ${e.colors.background.primary};
      height: calc(100% - ${e.components.menuTabs.height}px);
    `,close:M.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${e.typography.size.lg};
    `,tabs:M.css`
      padding-top: ${e.spacing(1)};
      border-color: ${e.colors.border.weak};
      ul {
        margin-left: ${e.spacing(2)};
      }
    `})));function Se(e){var t,n;const[a,s]=(0,R.useState)(e.tabs.some((t=>t.value===e.defaultTab))?e.defaultTab:null===(t=e.tabs)||void 0===t?void 0:t[0].value),{tabs:i,onClose:r,closeIconTooltip:o}=e,l=(0,ie.l4)(),d=je(l);return(0,B.jsxs)("div",{className:d.container,children:[(0,B.jsxs)(we.TabsBar,{className:d.tabs,children:[i.map((e=>(0,B.jsx)(we.Tab,{label:e.label,active:e.value===a,onChangeTab:()=>{s(e.value)},icon:e.icon},e.value))),(0,B.jsx)(we.IconButton,{className:d.close,onClick:r,name:"times",title:null!=o?o:"Close"})]}),(0,B.jsx)(we.CustomScrollbar,{autoHeightMin:"100%",children:(0,B.jsx)(we.TabContent,{className:d.tabContent,children:null===(n=i.find((e=>e.value===a)))||void 0===n?void 0:n.content})})]})}var Ce=n(13767);function ke(e){let{referenceElement:t,children:n,suffixIcon:a,placement:s}=e;const[i,r]=(0,R.useState)(null),o=(0,Ce.D)(t,i,{placement:s}),l=(0,ie.wW)(Te),d=(0,ie.wW)(Oe);return(0,B.jsx)(fe.h_,{children:(0,B.jsx)("div",Object.assign({style:Object.assign({display:"inline-block"},o.styles.popper)},o.attributes.popper,{ref:r,children:(0,B.jsxs)("span",{className:(0,M.cx)(l.root,d[s]),children:[n&&(0,B.jsx)("span",{children:n}),a&&(0,B.jsx)(E.J,{name:a})]})}))})}const Te=e=>({root:(0,M.css)(Object.assign({},e.typography.bodySmall,{willChange:"transform",background:e.components.tooltip.background,color:e.components.tooltip.text,padding:e.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:e.spacing(.5),alignItems:"center"}))}),Ie=(e,t)=>(0,M.keyframes)({from:{opacity:0,transform:`translate(${e}, ${t})`},to:{opacity:1,transform:"translate(0, 0px)"}}),Oe=e=>{const t=Ie(0,e.spacing(1)),n=Ie(0,e.spacing(-1)),a=Ie(e.spacing(1),0),s=Ie(e.spacing(-1),0);return{top:(0,M.css)({marginBottom:e.spacing(1),animation:`${t} ease-out 100ms`}),bottom:(0,M.css)({marginTop:e.spacing(1),animation:`${n} ease-out 100ms`}),left:(0,M.css)({marginRight:e.spacing(1),animation:`${a} ease-out 100ms`}),right:(0,M.css)({marginLeft:e.spacing(1),animation:`${s} ease-out 100ms`})}};var Ne;const Fe=["onClipboardCopy","onClipboardError","children","getText","icon","variant"];function De(e){let{onClipboardCopy:t,onClipboardError:n,children:a,getText:s,icon:i,variant:r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Fe);const l=(0,ie.wW)(Ae),[d,c]=(0,R.useState)(!1);(0,R.useEffect)((()=>{let e;return d&&(e=setTimeout((()=>{c(!1)}),2e3)),()=>{window.clearTimeout(e)}}),[d]);const u=(0,R.useRef)(null),h=(0,R.useCallback)((async()=>{const e=s();try{await Pe(e,u),c(!0),null==t||t(e)}catch(t){null==n||n(e,t)}}),[s,t,n]);return(0,B.jsxs)(B.Fragment,{children:[d&&(0,B.jsx)(ke,{placement:"top",referenceElement:u.current,children:"Copied"}),(0,B.jsxs)(re.zx,Object.assign({onClick:h,icon:i,variant:d?"success":r,"aria-label":d?"Copied":void 0},o,{className:(0,M.cx)(l.button,d&&l.successButton),ref:u,children:[a,d&&(0,B.jsx)("div",{className:l.successOverlay,children:Ne||(Ne=(0,B.jsx)(E.J,{name:"check"}))})]}))]})}const Pe=async(e,t)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{var n;const a=document.createElement("textarea");null===(n=t.current)||void 0===n||n.appendChild(a),a.value=e,a.focus(),a.select(),document.execCommand("copy"),a.remove()}},Ae=e=>({button:(0,M.css)({position:"relative"}),successButton:(0,M.css)({"> *":(0,M.css)({visibility:"hidden"})}),successOverlay:(0,M.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})});var Me=n(58635),Re=n(68865),$e=n(59795),Le=n(71117);const Ee=e=>(t,n)=>{e&&e(t.map((e=>String(e))),Ve(n))},Ve=e=>e.map(Be),Be=e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.label}};var ze;function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ue=(0,M.css)("\n&:focus{\n  outline: none;\n}\n");class He extends R.PureComponent{constructor(e){var t;super(e),t=this,_e(this,"flattenOptions",(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];for(const s of e){const e=[...n];e.push(s),s.items?a=[...a,...t.flattenOptions(s.items,e)]:a.push({singleLabel:e[e.length-1].label,label:e.map((e=>e.label)).join(t.props.separator||" / "),value:e.map((e=>e.value))})}return a})),_e(this,"getSearchableOptions",(0,Me.Z)((e=>this.flattenOptions(e)))),_e(this,"onChange",((e,t)=>{const n=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?t.map((e=>e.label)).join(this.props.separator||"/"):t[t.length-1].label;this.setState({rcValue:e,focusCascade:!0,activeLabel:n}),this.props.onSelect(t[t.length-1].value)})),_e(this,"onSelect",(e=>{const t=e.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?e.label:e.singleLabel||"",rcValue:t,isSearching:!1}),this.props.onSelect(t[t.length-1])})),_e(this,"onCreateOption",(e=>{this.setState({activeLabel:e,rcValue:[],isSearching:!1}),this.props.onSelect(e)})),_e(this,"onBlur",(()=>{var e,t;this.setState({isSearching:!1,focusCascade:!1}),""===this.state.activeLabel&&this.setState({rcValue:[]}),null===(e=(t=this.props).onBlur)||void 0===e||e.call(t)})),_e(this,"onBlurCascade",(()=>{var e,t;this.setState({focusCascade:!1}),null===(e=(t=this.props).onBlur)||void 0===e||e.call(t)})),_e(this,"onInputKeyDown",(e=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(e.key)||this.setState({focusCascade:!1,isSearching:!0})})),_e(this,"onSelectInputChange",(e=>{""===e&&this.setState({isSearching:!1})}));const n=this.getSearchableOptions(e.options),{rcValue:a,activeLabel:s}=this.setInitialValue(n,e.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:a,activeLabel:s}}setInitialValue(e,t){if(!t)return{rcValue:[],activeLabel:""};for(const n of e){const e=n.value||[];if(e.indexOf(t)===e.length-1)return{rcValue:e,activeLabel:this.props.displayAllSelectedLevels?n.label:n.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:t}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:e,formatCreateLabel:t,placeholder:n,width:a,changeOnSelect:s,options:i}=this.props,{focusCascade:r,isSearching:o,rcValue:l,activeLabel:d}=this.state,c=this.getSearchableOptions(i);return(0,B.jsx)("div",{children:o?(0,B.jsx)(Le.Ph,{allowCustomValue:e,placeholder:n,autoFocus:!r,onChange:this.onSelect,onBlur:this.onBlur,options:c,onCreateOption:this.onCreateOption,formatCreateLabel:t,width:a,onInputChange:this.onSelectInputChange}):(0,B.jsx)(Re.Z,{onChange:Ee(this.onChange),options:i,changeOnSelect:s,value:l.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,children:(0,B.jsx)("div",{className:Ue,children:(0,B.jsx)($e.I,{autoFocus:this.props.autoFocus,width:a,placeholder:n,onBlur:this.onBlurCascade,value:d,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:r?ze||(ze=(0,B.jsx)(E.J,{name:"angle-up"})):(0,B.jsx)(E.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})})})})})}}_e(He,"defaultProps",{changeOnSelect:!0});const We=["onChange","className","loadData","icon","buttonProps","hideDownIcon","variant","disabled"];const qe=(0,ie.Bb)((e=>({popup:M.css`
      label: popup;
      z-index: ${e.zIndex.dropdown};
    `,icons:{right:M.css`
        margin: 1px 0 0 4px;
      `,left:M.css`
        margin: -1px 4px 0 0;
      `}}))),Ze=e=>{const{onChange:t,loadData:n,icon:a,buttonProps:s,hideDownIcon:i,variant:r,disabled:o}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,We),d=(0,ie.l4)(),c=qe(d);let u=e.children;return i||(u=[e.children,(0,B.jsx)(E.J,{name:"angle-down",className:c.icons.right},"down-icon")]),(0,B.jsx)(Re.Z,Object.assign({onChange:Ee(t),loadData:(h=n,e=>{h&&h(Ve(e))}),dropdownClassName:c.popup},l,{expandIcon:null,children:(0,B.jsx)(re.zx,Object.assign({icon:a,disabled:o,variant:r},null!=s?s:{},{children:u}))}));var h};Ze.displayName="ButtonCascader";var Ge,Ke=n(49124);const Qe=["text","className"];const Je=e=>{let{text:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Qe);const s=(0,ie.yK)(Ye);return(0,B.jsxs)("div",Object.assign({className:(0,M.cx)(s.container,n)},a,{children:[t," ",Ge||(Ge=(0,B.jsx)(Ke.$,{inline:!0}))]}))},Ye=e=>({container:M.css`
      margin-bottom: ${e.spacing.xl};
    `});var Xe=n(32848),et=n(40059),tt=n(43215),nt=n(73512),at=n(93732);function st(e,t){const n=new Array(e.length);for(let a=0;a<e.length;a++){const s=e.length-1-a;n[a]=t(e[s],s,e)}return n}const it=["hue","selectedColor","onColorSelect"];const rt=e=>{let{hue:t,selectedColor:n,onColorSelect:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,it);const i=(0,J.upperFirst)(t.name),r=(0,nt.wW)(ot);return(0,B.jsxs)("div",{className:r.colorRow,children:[(0,B.jsx)("div",{className:r.colorLabel,children:i}),(0,B.jsx)("div",Object.assign({},s,{className:r.swatchRow,children:st(t.shades,(e=>(0,B.jsx)(at.b,{"aria-label":e.name,variant:e.primary?at.$.Large:at.$.Small,isSelected:e.name===n,color:e.color,onClick:()=>a(e.name)},e.name)))}))]})},ot=e=>({colorRow:M.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${e.spacing(2)};
      padding: ${e.spacing(.5,0)};

      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,colorLabel:M.css`
      padding-left: ${e.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:M.css`
      display: flex;
      gap: ${e.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),lt=e=>{let{color:t,onChange:n}=e;const a=(0,nt.l4)(),s=(0,nt.wW)(dt),i=[];for(const e of a.visualization.hues)i.push((0,B.jsx)(rt,{selectedColor:t,hue:e,onColorSelect:n},e.name));return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:s.swatches,children:i}),(0,B.jsxs)("div",{className:s.extraColors,children:[(0,B.jsx)(at.b,{isSelected:"transparent"===t,color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>n("transparent")}),(0,B.jsx)(at.b,{isSelected:"text"===t,color:a.colors.text.primary,label:"Text color",onClick:()=>n("text")})]})]})},dt=e=>({container:M.css`
      display: flex;
      flex-direction: column;
    `,extraColors:M.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${e.spacing(1)};
      padding: ${e.spacing(1,0)};
    `,swatches:M.css`
      display: grid;
      flex-grow: 1;
    `});var ct=n(80584),ut=n(10631),ht=n(35008),pt=n.n(ht);const gt=["color","onChange","isClearable"];const mt=(0,R.forwardRef)(((e,t)=>{let{color:n,onChange:a,isClearable:s=!1}=e,i=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,gt);const[r,o]=(0,R.useState)(n),[l,d]=(0,R.useState)(n),c=(0,R.useMemo)((()=>(0,J.debounce)(a,100)),[]);(0,R.useEffect)((()=>{const e=pt()(n);e.isValid()&&n!==l&&(o(e.toString()),d(n))}),[n,l]);return(0,B.jsx)($e.I,Object.assign({},i,{value:r,onChange:e=>{const{value:t}=e.currentTarget;if(o(t),""===t&&s)return void c(t);const n=pt()(t);n.isValid()&&c(n.toString())},onBlur:()=>{pt()(r).isValid()||o(n)},addonBefore:(0,B.jsx)(vt,{color:n}),ref:t}))}));mt.displayName="ColorInput";const ft=mt,vt=e=>{let{color:t}=e;const n=(0,ie.wW)(bt);return(0,B.jsx)("div",{className:(0,M.cx)(n,M.css`
          background-color: ${t};
        `)})},bt=e=>M.css`
  height: 100%;
  width: ${4*e.spacing.gridSize}px;
  border-radius: ${e.shape.borderRadius()} 0 0 ${e.shape.borderRadius()};
  border: 1px solid ${e.colors.border.medium};
`,xt=e=>({wrapper:M.css`
    flex-grow: 1;
  `,root:M.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${e.v1.border.radius.sm} ${e.v1.border.radius.sm} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${e.v1.border.radius.sm} ${e.v1.border.radius.sm};
      }
      &__alpha,
      &__hue {
        height: ${e.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${e.spacing(2)};
        width: ${e.spacing(2)};
      }
    }
  `,colorInput:M.css`
    margin-top: ${e.spacing(2)};
  `}),yt=e=>{let{color:t,onChange:n}=e;const[a,s]=(0,R.useState)(t);(0,ut.Z)((e=>{n(tt.colorManipulator.asHexString(i.visualization.getColorByName(e)))}),500,[a]);const i=(0,ie.l4)(),r=(0,ie.wW)(xt),o=(0,R.useMemo)((()=>a.startsWith("rgba")?a:pt()(i.visualization.getColorByName(t)).toRgbString()),[a,i,t]);return(0,B.jsxs)("div",{className:r.wrapper,children:[(0,B.jsx)(ct.ef,{className:r.root,color:o,onChange:s}),(0,B.jsx)(ft,{theme:i,color:o,onChange:s,className:r.colorInput})]})};function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jt extends R.Component{constructor(e){super(e),wt(this,"getTabClassName",(e=>{const{activePicker:t}=this.state;return`ColorPickerPopover__tab ${t===e&&"ColorPickerPopover__tab--active"}`})),wt(this,"handleChange",(e=>{const{onChange:t,enableNamedColors:n,theme:a}=this.props;if(n)return t(e);t(tt.colorManipulator.asHexString(a.visualization.getColorByName(e)))})),wt(this,"onTabChange",(e=>()=>this.setState({activePicker:e}))),wt(this,"renderPicker",(()=>{const{activePicker:e}=this.state,{color:t}=this.props;switch(e){case"spectrum":return(0,B.jsx)(yt,{color:t,onChange:this.handleChange});case"palette":return(0,B.jsx)(lt,{color:t,onChange:this.handleChange});default:return this.renderCustomPicker(e)}})),wt(this,"renderCustomPicker",(e=>{const{customPickers:t,color:n,theme:a}=this.props;return t?R.createElement(t[e].tabComponent,{color:n,theme:a,onChange:this.handleChange}):null})),wt(this,"renderCustomPickerTabs",(()=>{const{customPickers:e}=this.props;return e?(0,B.jsx)(B.Fragment,{children:Object.keys(e).map((t=>(0,B.jsx)("button",{className:this.getTabClassName(t),onClick:this.onTabChange(t),children:e[t].name},t)))}):null})),this.state={activePicker:"palette"}}render(){const{theme:e}=this.props,t=Ct(e);return(0,B.jsx)(et.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,B.jsxs)("div",{tabIndex:-1,className:t.colorPickerPopover,children:[(0,B.jsxs)("div",{className:t.colorPickerPopoverTabs,children:[(0,B.jsx)("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),children:"Colors"}),(0,B.jsx)("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),children:"Custom"}),this.renderCustomPickerTabs()]}),(0,B.jsx)("div",{className:t.colorPickerPopoverContent,children:this.renderPicker()})]})})}}const St=(0,ie.HE)(jt);St.displayName="ColorPickerPopover";const Ct=(0,ie.Bb)((e=>({colorPickerPopover:M.css`
      border-radius: ${e.shape.borderRadius()};
      box-shadow: ${e.shadows.z3};
      background: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${e.spacing(1,0)};
        background: ${e.colors.background.secondary};
        color: ${e.colors.text.secondary};
        font-size: ${e.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.background.primary};
      }
    `,colorPickerPopoverContent:M.css`
      width: 246px;
      font-size: ${e.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${e.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:M.css`
      display: flex;
      width: 100%;
      border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
    `})));const kt=["yaxis","onToggleAxis","color"];const Tt=e=>{const t=(0,ie.yK)(Ot),{yaxis:n,onToggleAxis:a,color:s}=e,i=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,kt),r=a?{yaxis:{name:"Y-Axis",tabComponent:()=>(0,B.jsx)(ee,{label:"Use right y-axis",className:t.colorPickerAxisSwitch,labelClass:t.colorPickerAxisSwitchLabel,checked:2===n,onChange:()=>{a&&a()}},"yaxisSwitch")}}:void 0;return(0,B.jsx)(St,Object.assign({},i,{color:s||"#000000",customPickers:r}))};R.PureComponent;const It=(0,ie.HE)(Tt),Ot=()=>({colorPickerAxisSwitch:M.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:M.css`
      display: flex;
      flex-grow: 1;
    `});function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ft=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ColorPicker";return t=class extends R.Component{constructor(){super(...arguments),Nt(this,"pickerTriggerRef",(0,R.createRef)())}render(){const{theme:t,children:n,onChange:a}=this.props,s=At(t),i=R.createElement(e,Object.assign({},Object.assign({},this.props,{children:null}),{onChange:a}));return(0,B.jsx)(he.D,{content:i,hideAfter:300,children:(e,a,i)=>(0,B.jsxs)(B.Fragment,{children:[this.pickerTriggerRef.current&&(0,B.jsx)(xe,Object.assign({},i,{referenceElement:this.pickerTriggerRef.current,wrapperClassName:s.colorPicker,onMouseLeave:a,onMouseEnter:e,onKeyDown:e=>(0,Xe.i)(e,a)})),n?n({ref:this.pickerTriggerRef,showColorPicker:e,hideColorPicker:a}):(0,B.jsx)(at.b,{ref:this.pickerTriggerRef,onClick:e,onMouseLeave:a,color:t.visualization.getColorByName(this.props.color||"#000000")})]})})}},Nt(t,"displayName",n),t},Dt=(0,ie.HE)(Ft(St,"ColorPicker")),Pt=(0,ie.HE)(Ft(Tt,"SeriesColorPicker")),At=(0,ie.Bb)((e=>({colorPicker:M.css`
      position: absolute;
      z-index: ${e.zIndex.tooltip};
      color: ${e.colors.text.primary};
      max-width: 400px;
      font-size: ${e.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `})));var Mt=n(91780);const Rt=["value","onChange","returnColorAs"];const $t=(0,R.forwardRef)(((e,t)=>{let{value:n="",onChange:a,returnColorAs:s="rgb"}=e,i=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Rt);const[r,o]=(0,R.useState)(n),[l,d]=(0,R.useState)(!1),c=(0,ie.l4)(),u=(0,ie.wW)(Lt),h=(0,ie.wW)(xt);return(0,ut.Z)((e=>{if(e===n)return;if(!e)return void a("");const t=c.visualization.getColorByName(e);a("rgb"===s?tt.colorManipulator.asRgbString(t):tt.colorManipulator.asHexString(t))}),500,[r]),(0,B.jsx)(Mt.L,{onClick:()=>d(!1),children:(0,B.jsxs)("div",{className:u.wrapper,children:[l&&!i.disabled&&(0,B.jsx)(ct.ef,{"data-testid":"color-popover",color:r,onChange:o,className:(0,M.cx)(h.root,u.picker)}),(0,B.jsx)("div",{onClick:()=>d(!0),children:(0,B.jsx)(ft,Object.assign({},i,{theme:c,color:r,onChange:o,ref:t,isClearable:!0}))})]})})}));$t.displayName="ColorPickerInput";const Lt=e=>({wrapper:M.css`
      position: relative;
    `,picker:M.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:M.css`
      position: absolute;
    `}),Et=e=>{let{children:t}=e;const n=(0,ie.wW)(Vt);return(0,B.jsx)("div",{className:n.container,children:t})},Vt=e=>({container:M.css`
      border-left: 3px solid ${e.colors.info.main};
      background-color: ${e.colors.background.secondary};
      padding: ${e.spacing(2)};
      min-width: 350px;
      border-radius: ${e.shape.borderRadius(2)};
      margin-bottom: ${e.spacing(4)};
    `});function Bt(e){return`Custom unit: ${e}`}class zt extends R.PureComponent{constructor(){super(...arguments),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"onChange",(e=>{this.props.onChange(e.value)}))}render(){const{value:e,width:t}=this.props;let n;const a=(0,tt.getValueFormats)().map((t=>{const a=t.submenu.map((t=>{const a={label:t.text,value:t.value};return t.value===e&&(n=a),a}));return{label:t.text,value:t.text,items:a}}));return e&&!n&&(n={value:e,label:e}),(0,B.jsx)(He,{width:t,initialValue:n&&n.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:Bt,options:a,placeholder:"Choose",onSelect:this.props.onChange})}}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ut extends R.PureComponent{constructor(){super(...arguments),_t(this,"checkInput",(()=>{const{stats:e,allowMultiple:t,defaultStat:n,onChange:a}=this.props,s=tt.fieldReducers.list(e);if(s.length!==e.length){const t=s.map((e=>e.id)),n=(0,J.difference)(e,t);console.warn("Unknown stats",n,e),a(s.map((e=>e.id)))}!t&&e.length>1&&(console.warn("Removing extra stat",e),a([e[0]])),n&&e.length<1&&a([n])})),_t(this,"onSelectionChange",(e=>{const{onChange:t}=this.props;Array.isArray(e)?t(e.map((e=>e.value))):t(e&&e.value?[e.value]:[])}))}componentDidMount(){this.checkInput()}componentDidUpdate(e){this.checkInput()}render(){const{stats:e,allowMultiple:t,defaultStat:n,placeholder:a,className:s,menuPlacement:i,width:r,inputId:o}=this.props,l=tt.fieldReducers.selectOptions(e);return(0,B.jsx)(Le.Ph,{value:l.current,className:s,isClearable:!n,isMulti:t,width:r,isSearchable:!0,options:l.options,placeholder:a,onChange:this.onSelectionChange,menuPlacement:i,inputId:o})}}_t(Ut,"defaultProps",{allowMultiple:!1});var Ht=n(57447),Wt=n(16695),qt=n(99295),Zt=n(10063),Gt=n(2526);const Kt=e=>({divider:(0,M.css)({height:1,backgroundColor:e.colors.border.weak,margin:e.spacing(.5,0)})}),Qt=e=>{let{label:t,ariaLabel:n,children:a}=e;const s=(0,ie.wW)(Jt),i=`group-label-${(0,J.uniqueId)()}`;return(0,B.jsxs)("div",{role:"group","aria-labelledby":!n&&t?i:void 0,"aria-label":n,children:[t&&(0,B.jsx)("label",{id:i,className:s.groupLabel,"aria-hidden":!0,children:t}),a]})};Qt.displayName="MenuGroup";const Jt=e=>({groupLabel:M.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      padding: ${e.spacing(.5,1)};
    `});var Yt=n(29977),Xt=n(76687);const en=(e,t)=>(e%t+t)%t,tn=e=>{let{localRef:t,isMenuOpen:n,openedWithArrow:a,setOpenedWithArrow:s,close:i,onOpen:r,onClose:o,onKeyDown:l}=e;const[d,c]=(0,R.useState)(-1);(0,R.useEffect)((()=>{n&&a&&(c(0),null==s||s(!1))}),[n,a,s]),(0,R.useEffect)((()=>{var e,n;const a=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelectorAll('[data-role="menuitem"]');null==a||null===(n=a[d])||void 0===n||n.focus(),null==a||a.forEach(((e,t)=>{e.tabIndex=t===d?0:-1}))}),[t,d]),(0,Xt.Z)((()=>{var e;const n=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelector('[data-role="menuitem"]');n&&(n.tabIndex=0),null==r||r(c)}));return[e=>{var n,a,s;const r=null==t||null===(n=t.current)||void 0===n?void 0:n.querySelectorAll('[data-role="menuitem"]'),u=null!==(a=null==r?void 0:r.length)&&void 0!==a?a:0;switch(e.key){case"ArrowUp":e.preventDefault(),e.stopPropagation(),c(en(d-1,u));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),c(en(d+1,u));break;case"ArrowLeft":e.preventDefault(),e.stopPropagation(),c(-1),null==i||i();break;case"Home":e.preventDefault(),e.stopPropagation(),c(0);break;case"End":e.preventDefault(),e.stopPropagation(),c(u-1);break;case"Enter":e.preventDefault(),e.stopPropagation(),null==r||null===(s=r[d])||void 0===s||s.click();break;case"Escape":e.preventDefault(),e.stopPropagation(),null==o||o();break;case"Tab":null==o||o()}null==l||l(e)},()=>{-1===d&&c(0)}]},nn=R.memo((e=>{let{items:t,isOpen:n,openedWithArrow:a,setOpenedWithArrow:s,close:i}=e;const r=(0,ie.wW)(an),o=(0,R.useRef)(null),[l]=tn({localRef:o,isMenuOpen:n,openedWithArrow:a,setOpenedWithArrow:s,close:i});return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:r.iconWrapper,"aria-label":Wt.wl.components.Menu.SubMenu.icon,children:(0,B.jsx)(E.J,{name:"angle-right",className:r.icon,"aria-hidden":!0})}),n&&(0,B.jsx)("div",{ref:o,className:r.subMenu(o.current),"aria-label":Wt.wl.components.Menu.SubMenu.container,children:(0,B.jsx)("div",{className:r.itemsWrapper,role:"menu",onKeyDown:l,children:t})})]})}));nn.displayName="SubMenu";const an=e=>({iconWrapper:M.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:M.css`
      opacity: 0.7;
      margin-left: ${e.spacing(2)};
      color: ${e.colors.text.secondary};
    `,itemsWrapper:M.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
    `,subMenu:t=>M.css`
      position: absolute;
      top: 0;
      z-index: ${e.zIndex.dropdown};
      ${(e=>{if(!e)return"left";const t=e.parentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return 0===n.width?"left":t.right+n.width+10>window.innerWidth?"right":"left"})(t)}: 100%;
    `}),sn=R.memo(R.forwardRef(((e,t)=>{const{url:n,icon:a,label:s,ariaLabel:i,ariaChecked:r,target:o,onClick:l,className:d,active:c,destructive:u,childItems:h,role:p="menuitem",tabIndex:g=-1}=e,m=(0,ie.wW)(rn),[f,v]=(0,R.useState)(c),[b,x]=(0,R.useState)(!1),[y,w]=(0,R.useState)(!1),j=(0,R.useCallback)((()=>{x(!0),v(!0)}),[]),S=(0,R.useCallback)((()=>{x(!1),v(!1)}),[]),C=h&&h.length>0,k=C?"div":void 0===n?"button":"a",T=(0,M.cx)({[m.item]:!0,[m.active]:f,[m.destructive]:u},d),I=(0,R.useRef)(null);(0,R.useImperativeHandle)(t,(()=>I.current));return(0,B.jsxs)(k,{target:o,className:T,rel:"_blank"===o?"noopener noreferrer":void 0,href:n,onClick:l?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!l||(e.preventDefault(),e.stopPropagation(),l(e))}:void 0,onMouseEnter:j,onMouseLeave:S,onKeyDown:e=>{if("ArrowRight"===e.key)e.preventDefault(),e.stopPropagation(),C&&(x(!0),w(!0),v(!0))},role:void 0===n?p:void 0,"data-role":"menuitem",ref:I,"aria-label":i,"aria-checked":r,tabIndex:g,children:[a&&(0,B.jsx)(E.J,{name:a,className:m.icon,"aria-hidden":!0}),s,C&&(0,B.jsx)(nn,{items:h,isOpen:b,openedWithArrow:y,setOpenedWithArrow:w,close:()=>{var e;x(!1),v(!1),null==I||null===(e=I.current)||void 0===e||e.focus()}})]})})));sn.displayName="MenuItem";const rn=e=>({item:M.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${e.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${e.spacing(.5,2)};
      min-height: ${e.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,Yt.getFocusStyles)(e)}
      }
    `,active:M.css`
      background: ${e.colors.action.hover};
    `,destructive:M.css`
      color: ${e.colors.error.text};

      svg {
        color: ${e.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${e.colors.error.main};
        color: ${e.colors.error.contrastText};

        svg {
          color: ${e.colors.error.contrastText};
        }
      }
    `,icon:M.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${e.colors.text.secondary};
    `}),on=["header","children","ariaLabel","onOpen","onClose","onKeyDown"];const ln=R.forwardRef(((e,t)=>{let{header:n,children:a,ariaLabel:s,onOpen:i,onClose:r,onKeyDown:o}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,on);const d=(0,ie.wW)(cn),c=(0,R.useRef)(null);(0,R.useImperativeHandle)(t,(()=>c.current));const[u,h]=tn({localRef:c,onOpen:i,onClose:r,onKeyDown:o});return(0,B.jsxs)("div",Object.assign({},l,{ref:c,className:d.wrapper,role:"menu","aria-label":s,onKeyDown:u,onFocus:h,children:[n&&(0,B.jsx)("div",{className:d.header,children:n}),a]}))}));ln.displayName="Menu";const dn=Object.assign(ln,{Item:sn,Divider:function(){const e=(0,ie.wW)(Kt);return(0,B.jsx)("div",{className:e.divider})},Group:Qt}),cn=e=>({header:M.css`
      padding: ${e.spacing(.5,.5,1,.5)};
      border-bottom: 1px solid ${e.colors.border.weak};
    `,wrapper:M.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
      padding: ${e.spacing(.5,0)};
    `});var un,hn;const pn=["tooltip","icon","className","children","imgSrc","imgAlt","fullWidth","isOpen","narrow","variant","iconOnly","aria-label","isHighlighted"];const gn=(0,R.forwardRef)(((e,t)=>{let{tooltip:n,icon:a,className:s,children:i,imgSrc:r,imgAlt:o,fullWidth:l,isOpen:d,narrow:c,variant:u="default",iconOnly:h,"aria-label":p,isHighlighted:g}=e,m=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,pn);const f=(0,ie.wW)(vn),v=(0,M.cx)("toolbar-button",{[f.button]:!0,[f.buttonFullWidth]:l,[f.narrow]:c},f[u],s),b=(0,M.cx)({[f.content]:!0,[f.contentWithIcon]:!!a,[f.contentWithRightIcon]:void 0!==d}),x=(0,B.jsxs)("button",Object.assign({ref:t,className:v,"aria-label":mn(p,n),"aria-expanded":d},m,{children:[fn(a),r&&(0,B.jsx)("img",{className:f.img,src:r,alt:null!=o?o:""}),i&&!h&&(0,B.jsx)("div",{className:b,children:i}),!1===d&&(un||(un=(0,B.jsx)(E.J,{name:"angle-down"}))),!0===d&&(hn||(hn=(0,B.jsx)(E.J,{name:"angle-up"}))),g&&(0,B.jsx)("div",{className:f.highlight})]}));return n?(0,B.jsx)(Y.u,{content:n,placement:"bottom",children:x}):x}));function mn(e,t){return e||(t?Wt.wl.components.PageToolbar.item(t):void 0)}function fn(e){return e?(0,J.isString)(e)?(0,B.jsx)(E.J,{name:e,size:"lg"}):e:null}gn.displayName="ToolbarButton";const vn=e=>{const t=(0,re.c9)(e,"primary","solid"),n=(0,re.c9)(e,"destructive","solid"),a=M.css`
    color: ${e.colors.text.secondary};
    background-color: ${e.colors.background.primary};

    &:hover {
      color: ${e.colors.text.primary};
      background: ${e.colors.background.secondary};
    }
  `,s=M.css`
    color: ${e.colors.text.secondary};
    background-color: transparent;
    border: none;

    &:hover {
      color: ${e.colors.text.primary};
      background: ${e.colors.background.secondary};
    }
  `;return{button:M.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${e.spacing(e.components.height.md)};
      padding: ${e.spacing(0,1)};
      border-radius: ${e.shape.borderRadius()};
      line-height: ${e.components.height.md*e.spacing.gridSize-2}px;
      font-weight: ${e.typography.fontWeightMedium};
      border: 1px solid ${e.colors.border.weak};
      white-space: nowrap;
      transition: ${e.transitions.create(["background","box-shadow","border-color","color"],{duration:e.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,Yt.getFocusStyles)(e)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,Yt.getMouseFocusStyles)(e)}
      }

      &:hover {
        box-shadow: ${e.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${e.colors.action.disabledOpacity};
        background: ${e.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${e.colors.text.disabled};
          background: ${e.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:e.flags.topnav?s:a,active:M.css`
      color: ${e.v1.palette.orangeDark};
      border-color: ${e.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${e.colors.text.primary};
        background: ${e.colors.emphasize(e.colors.background.canvas,.03)};
      }
    `,primary:(0,M.css)(t),destructive:(0,M.css)(n),narrow:M.css`
      padding: 0 ${e.spacing(.5)};
    `,img:M.css`
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,buttonFullWidth:M.css`
      flex-grow: 1;
    `,content:M.css`
      flex-grow: 1;
    `,contentWithIcon:M.css`
      display: none;
      padding-left: ${e.spacing(1)};

      @media ${ie.GU.mediaUp(e.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:M.css`
      padding-right: ${e.spacing(.5)};
    `,highlight:M.css`
      background-color: ${e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}},bn=["className","children"];const xn=(0,R.forwardRef)(((e,t)=>{let{className:n,children:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,bn);const i=(0,ie.wW)(yn);return(0,B.jsx)("div",Object.assign({ref:t,className:(0,M.cx)(i.wrapper,n)},s,{children:a}))}));xn.displayName="ToolbarButtonRow";const yn=e=>({wrapper:M.css`
    display: flex;

    > .button-group,
    > .toolbar-button {
      margin-left: ${e.spacing(1)};

      &:first-child {
        margin-left: 0;
      }
    }
  `}),wn=["className","options","value","onChange","narrow","variant"];const jn=e=>{const{className:t,options:n,value:a,onChange:s,narrow:i,variant:r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,wn),l=(0,nt.wW)(Cn),d=(0,Gt.W)({}),c=R.useRef(null),{menuTriggerProps:u,menuProps:h}=(0,Zt.u4)({},d,c),{buttonProps:p}=(0,qt.U)(u,c);return(0,B.jsxs)(re.hE,{className:l.wrapper,children:[(0,B.jsx)(gn,Object.assign({className:t,isOpen:d.isOpen,narrow:i,variant:r,ref:c},p,o,{children:(null==a?void 0:a.label)||(null==a?void 0:a.value)})),d.isOpen&&(0,B.jsx)("div",{className:l.menuWrapper,children:(0,B.jsx)(Mt.L,{onClick:d.close,parent:document,includeButtonPress:!1,children:(0,B.jsx)(et.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,B.jsx)(dn,Object.assign({tabIndex:-1,onClose:d.close},h,{children:n.map((e=>(0,B.jsx)(sn,{label:e.label||e.value,onClick:()=>(e=>{s(e),d.close()})(e),active:e.value===(null==a?void 0:a.value),ariaChecked:e.value===(null==a?void 0:a.value),ariaLabel:e.ariaLabel||e.label,role:"menuitemradio"},`${e.value}`)))}))})})})]})};jn.displayName="ButtonSelect";const Sn=R.memo(jn),Cn=e=>({wrapper:M.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:M.css`
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      top: ${e.spacing(4)};
      right: 0;
    `});function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Tn=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class In extends R.PureComponent{constructor(e){super(e),kn(this,"onChangeSelect",(e=>{const{onIntervalChanged:t}=this.props;t&&t(e.value)}))}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":"default"}render(){const{onRefresh:e,intervals:t,tooltip:n,value:a,text:s,isLoading:i,noIntervalPicker:r,width:o,offOptionLabelMsg:l,offOptionAriaLabelMsg:d,offDescriptionAriaLabelMsg:c,onDescriptionAriaLabelMsg:u}=this.props,h=a||"",p=this.getVariant(),g={value:In.offOption.value,label:l||In.offOption.label,ariaLabel:d||In.offOption.ariaLabel},m=function(){let{intervals:e=Tn,offOption:t=In.offOption}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.map((e=>{const t=(0,tt.parseDuration)(e);return{label:e,value:e,ariaLabel:(0,Ht.Z)(t)}}));return n.unshift(t),n}({intervals:t,offOption:g}),f=m.find((e=>{let{value:t}=e;return t===h}));let v=f||g;v.label===g.label&&(v={value:""});const b=v.ariaLabel,x=""===v.value?c||"Auto refresh turned off. Choose refresh time interval":(null==u?void 0:u(b))||`Choose refresh time interval with current interval ${b} selected`;return(0,B.jsxs)(re.hE,{className:"refresh-picker",children:[(0,B.jsx)(gn,{"aria-label":s,tooltip:n,onClick:e,variant:p,icon:i?"fa fa-spinner":"sync",style:o?{width:o}:void 0,"data-testid":Wt.wl.components.RefreshPicker.runButtonV2,children:s}),!r&&(0,B.jsx)(Sn,{value:v,options:m,onChange:this.onChangeSelect,variant:p,"data-testid":Wt.wl.components.RefreshPicker.intervalButtonV2,"aria-label":x})]})}}kn(In,"offOption",{label:"Off",value:"",ariaLabel:"Turn off auto refresh"}),kn(In,"liveOption",{label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}),kn(In,"isLive",(e=>e===In.liveOption.value));var On=n(50984),Nn=n(63805),Fn=n(19229);const Dn=e=>e.stopPropagation(),Pn=e=>{const t=(0,ie.Fg)(),{children:n,label:a}=e,s=An(t);return a?(0,B.jsxs)("div",{onClick:Dn,children:[(0,B.jsx)("div",{className:s.header,children:(0,B.jsx)("span",{className:s.label,children:a})}),n]}):(0,B.jsx)("div",{onClick:Dn,children:n})},An=(0,ie.Bb)((e=>({header:M.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${e.colors.border1};
      text-transform: capitalize;
    `,label:M.css`
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      font-weight: ${e.typography.weight.semibold};
    `}))),Mn=e=>{const t=(0,ie.Fg)(),{timestamp:n,timeZone:a,className:s}=e,i=$n(t);return(0,J.isString)(a)?(0,B.jsx)(B.Fragment,{children:(0,B.jsx)("span",{className:(0,M.cx)(i.offset,s),children:Rn(n,a)})}):null},Rn=(e,t)=>{const n=(0,tt.dateTimeFormat)(e,{timeZone:t,format:"Z"});return"+00:00"===n?"UTC":`UTC${n}`},$n=(0,ie.Bb)((e=>{const t=M.css`
    font-weight: normal;
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
    white-space: normal;
  `;return{offset:M.css`
      ${t};
      color: ${e.colors.text};
      background: ${e.colors.bg2};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}})),Ln=e=>{let{info:t}=e;const n=(0,ie.Fg)(),a=Vn(n),s=En(t);return t?(0,B.jsx)("div",{className:a.description,children:s}):null},En=e=>(0,R.useMemo)((()=>{const t=[];if(!e)return"";if(e.countries.length>0){const n=e.countries[0];t.push(n.name)}return e.abbreviation&&t.push(e.abbreviation),t.join(", ")}),[e]),Vn=(0,ie.Bb)((e=>({description:M.css`
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      white-space: normal;
      text-overflow: ellipsis;
    `}))),Bn=e=>{let{title:t}=e;const n=(0,ie.Fg)(),a=zn(n);return t?(0,B.jsx)("span",{className:a.title,children:t}):null},zn=(0,ie.Bb)((e=>({title:M.css`
      font-weight: ${e.typography.weight.regular};
      text-overflow: ellipsis;
    `})));var _n,Un;const Hn="tz-utc-offset",Wn=(e,t)=>{const{children:n,innerProps:a,data:s,isSelected:i,isFocused:r}=e,o=(0,nt.l4)(),l=Zn(o),d=Date.now(),c=(0,M.cx)(l.container,r&&l.containerFocused);if(!(0,J.isString)(s.value))return null;const u=(0,tt.getTimeZoneInfo)(s.value,d);return(0,B.jsx)("div",Object.assign({className:c},a,{"aria-label":"Select option",children:(0,B.jsxs)("div",{className:(0,M.cx)(l.leftColumn,l.row),children:[(0,B.jsxs)("div",{className:(0,M.cx)(l.leftColumn,l.wideRow),children:[(0,B.jsx)(Bn,{title:n}),(0,B.jsx)("div",{className:l.spacer}),(0,B.jsx)(Ln,{info:u})]}),(0,B.jsxs)("div",{className:l.rightColumn,children:[(0,B.jsx)(Mn,{timeZone:(null==u?void 0:u.ianaName)||s.value,timestamp:d,className:Hn}),i&&(_n||(_n=(0,B.jsx)("span",{children:(0,B.jsx)(E.J,{name:"check"})})))]})]})}))},qn=(e,t)=>{const{children:n,innerProps:a,data:s,isSelected:i,isFocused:r}=e,o=(0,nt.l4)(),l=Zn(o),d=Date.now(),c=(0,M.cx)(l.container,r&&l.containerFocused);if(!(0,J.isString)(s.value))return null;const u=(0,tt.getTimeZoneInfo)(s.value,d);return(0,B.jsx)("div",Object.assign({className:c},a,{"aria-label":"Select option",children:(0,B.jsxs)("div",{className:l.body,children:[(0,B.jsxs)("div",{className:l.row,children:[(0,B.jsx)("div",{className:l.leftColumn,children:(0,B.jsx)(Bn,{title:n})}),(0,B.jsx)("div",{className:l.rightColumn,children:i&&(Un||(Un=(0,B.jsx)("span",{children:(0,B.jsx)(E.J,{name:"check"})})))})]}),(0,B.jsxs)("div",{className:l.row,children:[(0,B.jsx)("div",{className:l.leftColumn,children:(0,B.jsx)(Ln,{info:u})}),(0,B.jsx)("div",{className:l.rightColumn,children:(0,B.jsx)(Mn,{timestamp:d,timeZone:(null==u?void 0:u.ianaName)||s.value,className:Hn})})]})]})}))},Zn=(0,Fn.B)((e=>({container:M.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,containerFocused:M.css`
      background: ${e.colors.action.hover};
    `,body:M.css`
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:M.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:M.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:M.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:M.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:M.css`
      margin-left: 6px;
    `}))),Gn=e=>{const{onChange:t,width:n,autoFocus:a=!1,onBlur:s,value:i,includeInternal:r=!1,disabled:o=!1,inputId:l}=e,d=Kn(r),c=Qn(d,i),u=Yn(),h=n&&n<=45?qn:Wn,p=(0,R.useCallback)((e=>{if(!e||!(0,J.isString)(e.value))return t(i);t(e.value)}),[t,i]);return(0,B.jsx)(Le.Ph,{inputId:l,value:c,placeholder:"Type to search (country, city, abbreviation)",autoFocus:a,menuShouldPortal:!1,openMenuOnFocus:!0,width:n,filterOption:u,options:d,onChange:p,onBlur:s,components:{Option:h,Group:Pn},disabled:o,"aria-label":"Time zone picker"})},Kn=e=>{const t=Date.now();return(0,tt.getTimeZoneGroups)(e).map((e=>{const n=e.zones.reduce(((e,n)=>{const a=(0,tt.getTimeZoneInfo)(n,t);return a?(e.push({label:a.name,value:a.zone,searchIndex:Xn(a,t)}),e):e}),[]);return{label:e.name,options:n}}))},Qn=(e,t)=>(0,R.useMemo)((()=>{if(void 0===t)return;const n=(0,J.toLower)(t),a=e.find((e=>e.label?n.startsWith((0,J.toLower)(e.label)):Jn(n)));return null==a?void 0:a.options.find((e=>(0,J.isEmpty)(n)?e.value===tt.InternalTimeZones.default:(0,J.toLower)(e.value)===n))}),[e,t]),Jn=e=>{switch(e){case tt.InternalTimeZones.default:case tt.InternalTimeZones.localBrowserTime:case tt.InternalTimeZones.utc:return!0;default:return!1}},Yn=()=>(0,R.useCallback)(((e,t)=>!(t&&e.data&&e.data.searchIndex)||e.data.searchIndex.indexOf((0,J.toLower)(t))>-1),[]),Xn=(e,t)=>{const n=[(0,J.toLower)(e.name),(0,J.toLower)(e.abbreviation),(0,J.toLower)(Rn(t,e.zone))];for(const t of e.countries)n.push((0,J.toLower)(t.name)),n.push((0,J.toLower)(t.code));return n.join("|")},ea=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],ta=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}],na=e=>{const{timeZone:t,fiscalYearStartMonth:n,timestamp:a=Date.now(),onChangeTimeZone:s,onChangeFiscalYearStartMonth:i}=e,[r,o]=(0,R.useState)(!1),[l,d]=(0,R.useState)("tz"),c=(0,R.useCallback)((e=>{e&&e.stopPropagation(),o(!r)}),[r,o]),u=(0,ie.l4)(),h=aa(u);if(!(0,J.isString)(t))return null;const p=(0,tt.getTimeZoneInfo)(t,a);return p?(0,B.jsxs)("div",{children:[(0,B.jsxs)("section",{"aria-label":"Time zone selection",className:h.container,children:[(0,B.jsxs)("div",{className:h.timeZoneContainer,children:[(0,B.jsxs)("div",{className:h.timeZone,children:[(0,B.jsx)(Bn,{title:p.name}),(0,B.jsx)("div",{className:h.spacer}),(0,B.jsx)(Ln,{info:p})]}),(0,B.jsx)(Mn,{timeZone:t,timestamp:a})]}),(0,B.jsx)("div",{className:h.spacer}),(0,B.jsx)(re.zx,{variant:"secondary",onClick:c,size:"sm",children:"Change time settings"})]}),r?(0,B.jsxs)("div",{className:h.editContainer,children:[(0,B.jsx)("div",{children:(0,B.jsx)(ap,{value:l,options:[{label:"Time zone",value:"tz"},{label:"Fiscal year",value:"fy"}],onChange:d})}),"tz"===l?(0,B.jsx)("section",{"data-testid":Wt.wl.components.TimeZonePicker.containerV2,className:(0,M.cx)(h.timeZoneContainer,h.timeSettingContainer),children:(0,B.jsx)(Gn,{includeInternal:!0,onChange:e=>{c(),(0,J.isString)(e)&&s(e)},onBlur:c})}):(0,B.jsx)("section",{"aria-label":Wt.wl.components.TimeZonePicker.containerV2,className:(0,M.cx)(h.timeZoneContainer,h.timeSettingContainer),children:(0,B.jsx)(la.g,{className:h.fiscalYearField,label:"Fiscal year start month",children:(0,B.jsx)(Le.Ph,{value:n,menuShouldPortal:!1,options:ta,onChange:e=>{var t;i&&i(null!==(t=e.value)&&void 0!==t?t:0)}})})})]}):null]}):null},aa=(0,ie.Bb)((e=>({container:M.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:M.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:M.css`
      margin-left: 7px;
    `,timeSettingContainer:M.css`
      padding-top: ${e.spacing(1)};
    `,fiscalYearField:M.css`
      margin-bottom: 0px;
    `,timeZoneContainer:M.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:M.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}))),sa=(0,ie.Bb)((e=>({text:M.css`
      font-size: ${e.typography.size.md};
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.formLabel};
      margin: 0;
      display: flex;
    `}))),ia=(0,R.memo)((e=>{let{children:t}=e;const n=(0,ie.Fg)(),a=sa(n);return(0,B.jsx)("h3",{className:a.text,children:t})}));ia.displayName="TimePickerTitle";var ra,oa,la=n(86900),da=n(22643);function ca(e){let{onChange:t,from:n,to:a,timeZone:s}=e;const i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const a=e.toDate(),s=t.toDate(),i=(0,tt.dateTime)(a).isValid()?a:n,r=(0,tt.dateTime)(s).isValid()?s:n;if(i>r)return[r,i];return[i,r]}(n,a),r=function(e,t){return(0,R.useCallback)((n=>{if(!Array.isArray(n))return console.error("onCalendarChange: should be run in selectRange={true}");const a=(0,tt.dateTimeParse)(ua(n[0]),{timeZone:t}),s=(0,tt.dateTimeParse)(ua(n[1]),{timeZone:t});e(a,s)}),[e,t])}(t,s),o=(0,ie.wW)(ha);return(0,B.jsx)(da.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:o.body,tileClassName:o.title,value:i,nextLabel:ra||(ra=(0,B.jsx)(E.J,{name:"angle-right"})),prevLabel:oa||(oa=(0,B.jsx)(E.J,{name:"angle-left"})),onChange:r,locale:"en"})}function ua(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}ca.displayName="Body";const ha=e=>{const t=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:M.css`
      color: ${e.colors.text};
      background-color: ${e.colors.background.primary};
      font-size: ${e.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:M.css`
      z-index: ${e.zIndex.modal};
      background-color: ${e.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${e.colors.text};
        border: 0;
        font-weight: ${e.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${e.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${t},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};

        abbr {
          background-color: ${e.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${t},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${t},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}};function pa(e){let{onClose:t,onApply:n}=e;const a=(0,ie.wW)(ga);return(0,B.jsxs)("div",{className:a.container,children:[(0,B.jsx)(re.zx,{className:a.apply,onClick:n,children:"Apply time range"}),(0,B.jsx)(re.zx,{variant:"secondary",onClick:t,children:"Cancel"})]})}pa.displayName="Footer";const ga=e=>({container:M.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:M.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});var ma;function fa(e){let{onClose:t}=e;const n=(0,ie.wW)(va);return(0,B.jsxs)("div",{className:n.container,children:[ma||(ma=(0,B.jsx)(ia,{children:"Select a time range"})),(0,B.jsx)(re.zx,{"aria-label":Wt.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:t})]})}fa.displayName="Header";const va=e=>({container:M.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),ba=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{container:M.css`
      top: -1px;
      position: absolute;
      ${t?"left":"right"}: 544px;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      z-index: -1;
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${e.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${t?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${e.colors.border.weak};
      }
    `,modal:M.css`
      position: fixed;
      top: 20%;
      width: 100%;
      z-index: ${e.zIndex.modal};
    `,content:M.css`
      margin: 0 auto;
      width: 268px;
    `,backdrop:M.css`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: #202226;
      opacity: 0.7;
      z-index: ${e.zIndex.modalBackdrop};
      text-align: center;
    `}},xa=e=>e.stopPropagation();function ya(e){const t=(0,ie.l4)(),n=ba(t,e.isReversed),{isOpen:a,isFullscreen:s,onClose:i}=e,r=R.createRef(),{dialogProps:o}=(0,On.R)({"aria-label":Wt.wl.components.TimePicker.calendar.label},r),{overlayProps:l}=(0,Nn.Ir)({isDismissable:!0,isOpen:a,onClose:i},r);return a?s?(0,B.jsx)(et.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,B.jsxs)("section",Object.assign({className:n.container,onClick:xa,ref:r},l,o,{children:[(0,B.jsx)(fa,Object.assign({},e)),(0,B.jsx)(ca,Object.assign({},e))]}))}):(0,B.jsxs)(Nn.Xj,{children:[(0,B.jsx)(et.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,B.jsx)("section",Object.assign({className:n.modal,onClick:xa,ref:r},l,o,{children:(0,B.jsxs)("div",{className:n.content,"aria-label":Wt.wl.components.TimePicker.calendar.label,children:[(0,B.jsx)(fa,Object.assign({},e)),(0,B.jsx)(ca,Object.assign({},e)),(0,B.jsx)(pa,Object.assign({},e))]})}))}),(0,B.jsx)("div",{className:n.backdrop,onClick:xa})]}):null}const wa=(0,R.memo)(ya);var ja;ya.displayName="TimePickerCalendar";const Sa='Please enter a past date or "now"',Ca='"From" can\'t be after "To"',ka=e=>{const{value:t,isFullscreen:n=!1,timeZone:a,onApply:s,isReversed:i,fiscalYearStartMonth:r}=e,[o,l]=Ta(t.raw.from,t.raw.to,a),d=(0,we.useStyles2)(Na),[c,u]=(0,R.useState)(o),[h,p]=(0,R.useState)(l),[g,m]=(0,R.useState)(!1);(0,R.useEffect)((()=>{const[e,n]=Ta(t.raw.from,t.raw.to,a);u(e),p(n)}),[t.raw.from,t.raw.to,a]);const f=(0,R.useCallback)((e=>{e.preventDefault(),m(!0)}),[m]),v=(0,R.useCallback)((e=>{if(e.preventDefault(),h.invalid||c.invalid)return;const t={from:c.value,to:h.value},n=tt.rangeUtil.convertRawToRange(t,a,r);s(n)}),[c.invalid,c.value,s,a,h.invalid,h.value,r]),b=(0,R.useCallback)(((e,t)=>{const[n,s]=Ta(e,t,a);u(n),p(s)}),[a]),x=tt.rangeUtil.convertRawToRange({from:"now/fy",to:"now/fy"},a,r),y=(0,B.jsx)("div",{className:d.tooltip,children:tt.rangeUtil.isFiscal(t)?(0,B.jsx)(Y.u,{content:`Fiscal year: ${x.from.format("MMM-DD")} - ${x.to.format("MMM-DD")}`,children:ja||(ja=(0,B.jsx)(E.J,{name:"info-circle"}))}):null}),w=(0,B.jsx)(re.zx,{"aria-label":Wt.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",onClick:f});return(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{className:d.fieldContainer,children:[(0,B.jsx)(la.g,{label:"From",invalid:c.invalid,error:c.errorMessage,children:(0,B.jsx)($e.I,{onClick:e=>e.stopPropagation(),onChange:e=>b(e.currentTarget.value,h.value),addonAfter:w,"aria-label":Wt.wl.components.TimePicker.fromField,value:c.value})}),y]}),(0,B.jsxs)("div",{className:d.fieldContainer,children:[(0,B.jsx)(la.g,{label:"To",invalid:h.invalid,error:h.errorMessage,children:(0,B.jsx)($e.I,{onClick:e=>e.stopPropagation(),onChange:e=>b(c.value,e.currentTarget.value),addonAfter:w,"aria-label":Wt.wl.components.TimePicker.toField,value:h.value})}),y]}),(0,B.jsx)(re.zx,{"data-testid":Wt.wl.components.TimePicker.applyTimeRange,onClick:v,children:"Apply time range"}),(0,B.jsx)(wa,{isFullscreen:n,isOpen:g,from:(0,tt.dateTimeParse)(c.value),to:(0,tt.dateTimeParse)(h.value),onApply:v,onClose:()=>m(!1),onChange:b,timeZone:a,isReversed:i})]})};function Ta(e,t,n){const a=Ia(e,n),s=Ia(t,n),i=!Oa(a,!1,n),r=!Oa(s,!0,n),o=function(e,t,n){const a={from:e,to:t},s=tt.rangeUtil.convertRawToRange(a,n);return!(s.from.isSame(s.to)||s.from.isBefore(s.to))}(a,s,n)&&!r;return[{value:a,invalid:i||o,errorMessage:o&&!i?Ca:Sa},{value:s,invalid:r,errorMessage:Sa}]}function Ia(e,t){return(0,tt.isDateTime)(e)?(0,tt.dateTimeFormat)(e,{timeZone:t}):e}function Oa(e,t,n){if((0,tt.isDateTime)(e))return e.isValid();if(tt.dateMath.isMathString(e))return tt.dateMath.isValid(e);return(0,tt.dateTimeParse)(e,{roundUp:t,timeZone:n}).isValid()}function Na(e){return{fieldContainer:M.css`
      display: flex;
    `,tooltip:M.css`
      padding-left: ${e.spacing(1)};
      padding-top: ${e.spacing(3)};
    `}}var Fa=n(34110);const Da=e=>({container:M.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${e.colors.action.hover};
        cursor: pointer;
      }
    `,selected:M.css`
      background: ${e.colors.action.selected};
      font-weight: ${e.typography.fontWeightMedium};
    `,radio:M.css`
      opacity: 0;

      &:focus-visible + label {
        ${(0,Yt.getFocusStyles)(e)};
      }
    `,label:M.css`
      cursor: pointer;
    `}),Pa=(0,R.memo)((e=>{let{value:t,onSelect:n,selected:a=!1,name:s}=e;const i=(0,nt.wW)(Da),r=(0,Fa.Z)();return(0,B.jsxs)("li",{onClick:()=>n(t),className:(0,M.cx)(i.container,a&&i.selected),children:[(0,B.jsx)("input",{className:i.radio,checked:a,name:s,type:"checkbox",id:r,onChange:()=>n(t)}),(0,B.jsx)("label",{className:i.label,htmlFor:r,children:t.display})]})}));Pa.displayName="TimeRangeOption";const Aa=(0,ie.Bb)((()=>({title:M.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `}))),Ma=(0,ie.Bb)((()=>({grow:M.css`
      flex-grow: 1;
      align-items: flex-start;
    `}))),Ra=e=>{const t=Aa(),{title:n,options:a,placeholderEmpty:s}=e;return void 0!==s&&a.length<=0?(0,B.jsx)(B.Fragment,{children:s}):n?(0,B.jsx)("section",{"aria-label":n,children:(0,B.jsxs)("fieldset",{children:[(0,B.jsx)("div",{className:t.title,children:(0,B.jsx)(ia,{children:n})}),(0,B.jsx)($a,Object.assign({},e))]})}):(0,B.jsx)($a,Object.assign({},e))},$a=e=>{let{options:t,value:n,onChange:a,title:s}=e;const i=Ma();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("ul",{"aria-roledescription":"Time range selection",children:t.map(((e,t)=>(0,B.jsx)(Pa,{value:e,selected:La(e,n),onSelect:a,name:null!=s?s:"Time ranges"},function(e,t){return`${e.from}-${e.to}-${t}`}(e,t))))}),(0,B.jsx)("div",{className:i.grow})]})};function La(e,t){return!(!t||!e)&&(t.from===e.from&&t.to===e.to)}const Ea=(e,t)=>tt.rangeUtil.convertRawToRange({from:e.from,to:e.to},t);var Va,Ba,za,_a,Ua;const Ha=e=>{const{quickOptions:t=[],isReversed:n,isFullscreen:a,hideQuickRanges:s,timeZone:i,fiscalYearStartMonth:r,value:o,onChange:l,history:d,showHistory:c,className:u,hideTimeZone:h,onChangeTimeZone:p,onChangeFiscalYearStartMonth:g}=e,m=!(null!=d&&d.length),f=a&&c||!a&&(c&&!m||!s),v=(0,ie.l4)(),b=Qa(v,n,s,f,a),x=function(e,t){if(!Array.isArray(e)||0===e.length)return[];return e.slice(e.length-4).map((e=>((e,t)=>{const n=(0,tt.dateTimeFormat)(e.from,{timeZone:t}),a=(0,tt.dateTimeFormat)(e.to,{timeZone:t});return{from:n,to:a,display:`${n} to ${a}`}})(e,t)))}(d,i),y=Ka(o.raw,t),[w,j]=(0,R.useState)(""),S=t.filter((e=>e.display.toLowerCase().includes(w.toLowerCase())));return(0,B.jsxs)("div",{id:"TimePickerContent",className:(0,M.cx)(b.container,u),children:[(0,B.jsxs)("div",{className:b.body,children:[(!a||!s)&&(0,B.jsxs)("div",{className:b.rightSide,children:[(0,B.jsx)("div",{className:b.timeRangeFilter,children:(0,B.jsx)(pp,{width:0,autoFocus:!0,value:w,onChange:j,placeholder:"Search quick ranges"})}),(0,B.jsxs)(ye.$,{children:[!a&&(0,B.jsx)(qa,Object.assign({},e,{historyOptions:x})),!s&&(0,B.jsx)(Ra,{options:S,onChange:e=>l(Ea(e)),value:y})]})]}),a&&(0,B.jsx)("div",{className:b.leftSide,children:(0,B.jsx)(Za,Object.assign({},e,{historyOptions:x}))})]}),!h&&a&&(0,B.jsx)(na,{timeZone:i,fiscalYearStartMonth:r,onChangeTimeZone:p,onChangeFiscalYearStartMonth:g})]})},Wa=e=>{const{widthOverride:t}=e,n=(0,ie.l4)(),a=(t||window.innerWidth)>=n.breakpoints.values.lg;return(0,B.jsx)(Ha,Object.assign({},e,{isFullscreen:a}))},qa=e=>{const{value:t,hideQuickRanges:n,onChange:a,timeZone:s,historyOptions:i=[],showHistory:r}=e,o=(0,ie.l4)(),l=Ja(o),d=(0,tt.isDateTime)(t.raw.from)||(0,tt.isDateTime)(t.raw.to),[c,u]=(0,R.useState)(!d),h=!n&&c;return(0,B.jsxs)("fieldset",{children:[(0,B.jsx)("div",{className:l.header,children:(0,B.jsxs)("button",{type:"button",className:l.expandButton,onClick:()=>{n||u(!h)},"data-testid":Wt.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!h,"aria-controls":"expanded-timerange",children:[Va||(Va=(0,B.jsx)(ia,{children:"Absolute time range"})),!n&&(0,B.jsx)(E.J,{name:h?"angle-down":"angle-up"})]})}),!h&&(0,B.jsxs)("div",{className:l.body,id:"expanded-timerange",children:[(0,B.jsx)("div",{className:l.form,children:(0,B.jsx)(ka,{value:t,onApply:a,timeZone:s,isFullscreen:!1})}),r&&(0,B.jsx)(Ra,{title:"Recently used absolute ranges",options:i,onChange:e=>a(Ea(e,s)),placeholderEmpty:null})]})]})},Za=e=>{const{onChange:t,value:n,timeZone:a,fiscalYearStartMonth:s,isReversed:i,historyOptions:r}=e,o=(0,ie.l4)(),l=Ya(o,e.hideQuickRanges);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:l.container,children:[(0,B.jsx)("div",{className:l.title,"data-testid":Wt.wl.components.TimePicker.absoluteTimeRangeTitle,children:Ba||(Ba=(0,B.jsx)(ia,{children:"Absolute time range"}))}),(0,B.jsx)(ka,{value:n,timeZone:a,fiscalYearStartMonth:s,onApply:t,isFullscreen:!0,isReversed:i})]}),e.showHistory&&(0,B.jsx)("div",{className:l.recent,children:(0,B.jsx)(Ra,{title:"Recently used absolute ranges",options:r||[],onChange:e=>t(Ea(e,a)),placeholderEmpty:za||(za=(0,B.jsx)(Ga,{}))})})]})},Ga=(0,R.memo)((()=>{const e=(0,ie.l4)(),t=Xa(e);return(0,B.jsxs)("div",{className:t.container,children:[_a||(_a=(0,B.jsx)("div",{children:(0,B.jsx)("span",{children:"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here."})})),(0,B.jsxs)("div",{children:[(0,B.jsx)("a",{className:t.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new",children:"Read the documentation"}),Ua||(Ua=(0,B.jsx)("span",{children:" to find out more about how to enter custom time ranges."}))]})]})}));Ga.displayName="EmptyRecentList";const Ka=(e,t)=>(0,R.useMemo)((()=>{if(tt.rangeUtil.isRelativeTimeRange(e))return t.find((t=>t.from===e.from&&t.to===e.to))}),[e,t]),Qa=(0,ie.Bb)(((e,t,n,a,s)=>({container:M.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      width: ${s?"546px":"262px"};
      top: 116%;
      border-radius: 2px;
      border: 1px solid ${e.colors.border.weak};
      ${t?"left":"right"}: 0;
    `,body:M.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${a?"381px":"217px"};
    `,leftSide:M.css`
      display: flex;
      flex-direction: column;
      border-right: ${t?"none":`1px solid ${e.colors.border.weak}`};
      width: ${n?"100%":"60%"};
      overflow: hidden;
      order: ${t?1:0};
    `,rightSide:M.css`
      width: ${s?"40%":"100%"}; !important;
      border-right: ${t?`1px solid ${e.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:M.css`
      padding: ${e.spacing(1)};
    `,spacing:M.css`
      margin-top: 16px;
    `}))),Ja=(0,ie.Bb)((e=>({header:M.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:M.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,Yt.getFocusStyles)(e)}
      }
    `,body:M.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,form:M.css`
      padding: 7px 9px 7px 9px;
    `}))),Ya=(0,ie.Bb)(((e,t)=>({container:M.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${t?"11px":"20%"};
    `,title:M.css`
      margin-bottom: 11px;
    `,recent:M.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${e.spacing(1)};
    `}))),Xa=(0,ie.Bb)((e=>({container:M.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }
    `,link:M.css`
      color: ${e.colors.text.link};
    `})));var es,ts;const ns=()=>(0,B.jsxs)(B.Fragment,{children:["Time range zoom out ",es||(es=(0,B.jsx)("br",{}))," CTRL+Z"]}),as=e=>{let{timeRange:t,timeZone:n}=e;const a=(0,nt.Fg)(),s=ls(a);return(0,B.jsxs)(B.Fragment,{children:[(0,tt.dateTimeFormat)(t.from,{timeZone:n}),ts||(ts=(0,B.jsx)("div",{className:"text-center",children:"to"})),(0,tt.dateTimeFormat)(t.to,{timeZone:n}),(0,B.jsx)("div",{className:"text-center",children:(0,B.jsx)("span",{className:s.utc,children:(0,tt.timeZoneFormatUserFriendly)(n)})})]})},ss=(0,R.memo)((e=>{let{hideText:t,value:n,timeZone:a}=e;const s=(0,nt.Fg)(),i=ls(s);return t?null:(0,B.jsxs)("span",{className:i.container,children:[(0,B.jsx)("span",{children:is(n,a)}),(0,B.jsx)("span",{className:i.utc,children:tt.rangeUtil.describeTimeRangeAbbreviation(n,a)})]})}));ss.displayName="TimePickerButtonLabel";const is=(e,t)=>{const n={to:tt.dateMath.isMathString(e.raw.to)?e.raw.to:e.to,from:tt.dateMath.isMathString(e.raw.from)?e.raw.from:e.from};return tt.rangeUtil.describeTimeRange(n,t)},rs=(0,nt.Zz)((function(e){const[t,n]=(0,R.useState)(!1),{value:a,onMoveBackward:s,onMoveForward:i,onZoom:r,timeZone:o,fiscalYearStartMonth:l,timeSyncButton:d,isSynced:c,theme:u,history:h,onChangeTimeZone:p,onChangeFiscalYearStartMonth:g,hideQuickRanges:m,widthOverride:f}=e,v=(0,R.createRef)(),{overlayProps:b}=(0,Nn.Ir)({onClose:()=>{n(!1)},isDismissable:!0,isOpen:t},v),{dialogProps:x}=(0,On.R)({},v),y=os(u),w=(0,tt.isDateTime)(a.raw.from)||(0,tt.isDateTime)(a.raw.to),j=c?"active":"default";return(0,B.jsxs)(re.hE,{className:y.container,children:[w&&(0,B.jsx)(gn,{"aria-label":"Move time range backwards",variant:j,onClick:s,icon:"angle-left",narrow:!0}),(0,B.jsx)(Y.u,{content:(0,B.jsx)(as,{timeRange:a,timeZone:o}),placement:"bottom",interactive:!0,children:(0,B.jsx)(gn,{"data-testid":Wt.wl.components.TimePicker.openButton,"aria-label":`Time range picker with current time range ${is(a,o)} selected`,"aria-controls":"TimePickerContent",onClick:e=>{e.stopPropagation(),e.preventDefault(),n(!t)},icon:"clock-nine",isOpen:t,variant:j,children:(0,B.jsx)(ss,Object.assign({},e))})}),t&&(0,B.jsx)(et.MT,{contain:!0,autoFocus:!0,children:(0,B.jsx)("section",Object.assign({ref:v},b,x,{children:(0,B.jsx)(Wa,{timeZone:o,fiscalYearStartMonth:l,value:a,onChange:t=>{e.onChange(t),n(!1)},quickOptions:ea,history:h,showHistory:!0,widthOverride:f,onChangeTimeZone:p,onChangeFiscalYearStartMonth:g,hideQuickRanges:m})}))}),d,w&&(0,B.jsx)(gn,{"aria-label":"Move time range forwards",onClick:i,icon:"angle-right",narrow:!0,variant:j}),(0,B.jsx)(Y.u,{content:ns,placement:"bottom",children:(0,B.jsx)(gn,{"aria-label":"Zoom out time range",onClick:r,icon:"search-minus",variant:j})})]})})),os=(0,Fn.B)((e=>({container:M.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `}))),ls=(0,Fn.B)((e=>({container:M.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:M.css`
      color: ${e.palette.orange};
      font-size: ${e.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${e.typography.weight.semibold};
    `})));var ds,cs=n(24592),us=n(5092);const hs=e=>{let{minuteStep:t=1,showHour:n=!0,showSeconds:a=!1,onChange:s,value:i,size:r="auto",disabled:o}=e;const l=(0,we.useStyles)(gs);return(0,B.jsx)(cs.Z,{className:(0,M.cx)((0,us.ht)()[r],l.input),popupClassName:l.picker,defaultValue:(0,tt.dateTimeAsMoment)(),onChange:e=>s((0,tt.dateTime)(e)),allowEmpty:!1,showSecond:a,value:(0,tt.dateTimeAsMoment)(i),showHour:n,minuteStep:t,inputIcon:(0,B.jsx)(ps,{wrapperStyle:l.caretWrapper}),disabled:o})},ps=e=>{let{wrapperStyle:t=""}=e;return(0,B.jsx)("div",{className:t,children:ds||(ds=(0,B.jsx)(we.Icon,{name:"angle-down"}))})},gs=(0,ie.Bb)((e=>{const t=e.colors.formInputBg,n=e.colors.dropdownShadow,a=e.colors.dropdownOptionHoverBg,s=e.border.radius.sm,i=e.colors.formInputBorder;return{caretWrapper:M.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${e.colors.textWeak};
    `,picker:M.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${t};
        border-color: ${i};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${e.palette.orange};
            border-radius: ${s};
          }

          &:hover {
            background: ${a};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${n};
        background-color: ${t};
        border-color: ${i};
        border-radius: ${s};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${t};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:M.css`
      .rc-time-picker-input {
        background-color: ${t};
        border-radius: ${s};
        border-color: ${i};
        height: ${e.spacing.formInputHeight}px;

        &:focus {
          ${(0,Yt.focusCss)(e)}
        }

        &:disabled {
          background-color: ${e.colors.formInputBgDisabled};
          color: ${e.colors.formInputDisabledText};
          border: 1px solid ${e.colors.formInputBgDisabled};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}})),ms=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],fs=e=>{var t;const{onChange:n,width:a,autoFocus:s=!1,onBlur:i,value:r,disabled:o=!1,inputId:l}=e,d=(0,R.useCallback)((e=>{void 0!==e.value&&n(e.value)}),[n]);return(0,B.jsx)(Le.Ph,{inputId:l,value:null===(t=ms.find((e=>e.value===r)))||void 0===t?void 0:t.value,placeholder:Wt.wl.components.WeekStartPicker.placeholder,autoFocus:s,openMenuOnFocus:!0,width:a,options:ms,onChange:d,onBlur:i,disabled:o})};var vs,bs;const xs=(0,R.memo)((e=>{const t=(0,ie.wW)(ws),{isOpen:n,onClose:a}=e;return n?(0,B.jsx)(Mt.L,{useCapture:!0,includeButtonPress:!1,onClick:a,children:(0,B.jsx)("div",{className:t.modal,"data-testid":"date-picker",children:(0,B.jsx)(ys,Object.assign({},e))})}):null}));xs.displayName="DatePicker";const ys=(0,R.memo)((e=>{let{value:t,minDate:n,onChange:a}=e;const s=(0,ie.wW)(ha);return(0,B.jsx)(da.ZP,{className:s.body,tileClassName:s.title,value:t||new Date,minDate:n,nextLabel:vs||(vs=(0,B.jsx)(E.J,{name:"angle-right"})),prevLabel:bs||(bs=(0,B.jsx)(E.J,{name:"angle-left"})),onChange:e=>{Array.isArray(e)||a(e)},locale:"en"})}));ys.displayName="Body";const ws=e=>({modal:M.css`
      z-index: ${e.zIndex.modal};
      position: absolute;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${e.colors.text.disabled};
      }
    `}),js=["value","minDate","onChange","closeOnSelect","placeholder"];const Ss=e=>{let{value:t,minDate:n,onChange:a,closeOnSelect:s,placeholder:i="Date"}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,js);const[o,l]=R.useState(!1),d=(0,ie.yK)(Cs);return(0,B.jsxs)("div",{className:d.container,children:[(0,B.jsx)($e.I,Object.assign({type:"text",autoComplete:"off",placeholder:i,value:t?(c=t,(0,tt.dateTime)(c).format("L")):t,onClick:()=>l(!0),onChange:e=>{""===e.target.value&&a("")},className:d.input},r)),(0,B.jsx)(xs,{isOpen:o,value:t&&"string"!=typeof t?t:(0,tt.dateTime)().toDate(),minDate:n,onChange:e=>{a(e),s&&l(!1)},onClose:()=>l(!1)})]});var c},Cs=()=>({container:M.css`
      position: relative;
    `,input:M.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `});var ks,Ts,Is=n(86514);function Os(e,t,n){if((0,tt.isDateTime)(e))return e.isValid();if(tt.dateMath.isMathString(e))return tt.dateMath.isValid(e);return(0,tt.dateTimeParse)(e,{roundUp:t,timeZone:n}).isValid()}const Ns=e=>e.stopPropagation(),Fs=e=>{let{date:t,maxDate:n,label:a,onChange:s}=e;const[i,r]=(0,R.useState)(!1),o=(0,ie.l4)(),l=(0,Is.Z)(`(min-width: ${o.breakpoints.values.lg}px)`),d=(0,ie.wW)(ba),c=(0,ie.wW)(As),u=(0,R.useCallback)((e=>{r(!1),s(e)}),[s]),h=(0,R.useCallback)((e=>{e.preventDefault(),r(!0)}),[r]);return(0,B.jsxs)("div",{"data-testid":"date-time-picker",style:{position:"relative"},children:[(0,B.jsx)(Ds,{date:t,onChange:s,isFullscreen:l,onOpen:h,label:a}),i?l?(0,B.jsx)(Mt.L,{onClick:()=>r(!1),children:(0,B.jsx)(Ps,{date:t,onChange:u,isFullscreen:!0,onClose:()=>r(!1),maxDate:n})}):(0,B.jsx)(fe.h_,{children:(0,B.jsxs)(Mt.L,{onClick:()=>r(!1),children:[(0,B.jsx)("div",{className:c.modal,onClick:Ns,children:(0,B.jsx)(Ps,{date:t,onChange:u,isFullscreen:!1,onClose:()=>r(!1)})}),(0,B.jsx)("div",{className:d.backdrop,onClick:Ns})]})}):null]})},Ds=e=>{let{date:t,label:n,onChange:a,isFullscreen:s,onOpen:i}=e;const[r,o]=(0,R.useState)((()=>({value:t?(0,tt.dateTimeFormat)(t):(0,tt.dateTimeFormat)((0,tt.dateTime)()),invalid:!1})));(0,R.useEffect)((()=>{t&&o({invalid:!Os((0,tt.dateTimeFormat)(t)),value:(0,tt.isDateTime)(t)?(0,tt.dateTimeFormat)(t):t})}),[t]);const l=(0,R.useCallback)((e=>{const t=!Os(e.currentTarget.value);o({value:e.currentTarget.value,invalid:t})}),[]),d=(0,R.useCallback)((e=>{s&&i(e)}),[s,i]),c=(0,R.useCallback)((()=>{(0,tt.isDateTime)(r.value)&&a((0,tt.dateTime)(r.value))}),[r.value,a]),u=(0,B.jsx)(re.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:i});return(0,B.jsx)(uu,{label:n,onClick:Ns,invalid:!(!r.value||!r.invalid),className:M.css`
        margin-bottom: 0;
      `,children:(0,B.jsx)($e.I,{onClick:Ns,onChange:l,addonAfter:u,value:r.value,onFocus:d,onBlur:c,"data-testid":"date-time-input",placeholder:"Select date/time"})})},Ps=e=>{let{date:t,onClose:n,onChange:a,isFullscreen:s,maxDate:i}=e;const r=(0,ie.wW)(ha),o=(0,ie.wW)(As),[l,d]=(0,R.useState)((()=>t&&t.isValid()?t.toDate():new Date)),c=(0,R.useCallback)((e=>{Array.isArray(e)||d((t=>(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e)))}),[]),u=(0,R.useCallback)((e=>{d(e.toDate())}),[]);return(0,B.jsxs)("div",{className:(0,M.cx)(o.container,{[o.fullScreen]:s}),onClick:Ns,children:[(0,B.jsx)(da.ZP,{next2Label:null,prev2Label:null,value:l,nextLabel:ks||(ks=(0,B.jsx)(E.J,{name:"angle-right"})),nextAriaLabel:"Next month",prevLabel:Ts||(Ts=(0,B.jsx)(E.J,{name:"angle-left"})),prevAriaLabel:"Previous month",onChange:c,locale:"en",className:r.body,tileClassName:r.title,maxDate:i}),(0,B.jsx)("div",{className:o.time,children:(0,B.jsx)(hs,{showSeconds:!0,onChange:u,value:(0,tt.dateTime)(l)})}),(0,B.jsxs)(Js.Lh,{children:[(0,B.jsx)(re.zx,{type:"button",onClick:()=>a((0,tt.dateTime)(l)),children:"Apply"}),(0,B.jsx)(re.zx,{variant:"secondary",type:"button",onClick:n,children:"Cancel"})]})]})},As=e=>({container:M.css`
    padding: ${e.spacing(1)};
    border: 1px ${e.colors.border.weak} solid;
    border-radius: ${e.shape.borderRadius(1)};
    background-color: ${e.colors.background.primary};
    z-index: ${e.zIndex.modal};
  `,fullScreen:M.css`
    position: absolute;
  `,time:M.css`
    margin-bottom: ${e.spacing(2)};
  `,modal:M.css`
    position: fixed;
    top: 25%;
    left: 25%;
    width: 100%;
    z-index: ${e.zIndex.modal};
    max-width: 280px;
  `});var Ms=n(73821),Rs=n(89409);const $s=(0,ie.Bb)((e=>{let{theme:t,name:n}=e;const{color:a,borderColor:s}=(0,Rs.Bx)(n),i=t.spacing.formInputHeight-8;return{itemStyle:M.css`
      display: flex;
      align-items: center;
      height: ${i}px;
      line-height: ${i-2}px;
      background-color: ${a};
      color: ${t.palette.white};
      border: 1px solid ${s};
      border-radius: 3px;
      padding: 0 ${t.spacing.xs};
      margin-right: 3px;
      white-space: nowrap;
      text-shadow: none;
      font-weight: 500;
      font-size: ${t.typography.size.sm};
    `,nameStyle:M.css`
      margin-right: 3px;
    `,buttonStyles:M.css`
      margin: 0;
      &:hover::before {
        display: none;
      }
    `}})),Ls=e=>{let{name:t,disabled:n,onRemove:a}=e;const s=(0,ie.Fg)(),i=$s({theme:s,name:t});return(0,B.jsxs)("div",{className:i.itemStyle,children:[(0,B.jsx)("span",{className:i.nameStyle,children:t}),(0,B.jsx)(se.h,{name:"times",size:"lg",disabled:n,ariaLabel:`Remove ${t}`,onClick:()=>a(t),type:"button",className:i.buttonStyles})]})},Es=e=>{let{placeholder:t="New tag (enter key to add)",tags:n=[],onChange:a,width:s,className:i,disabled:r,addOnBlur:o,invalid:l,id:d}=e;const[c,u]=(0,R.useState)(""),h=(0,nt.yK)(Vs),p=(0,nt.l4)(),g=e=>{a(n.filter((t=>t!==e)))},m=e=>{null==e||e.preventDefault(),n.includes(c)||a(n.concat(c)),u("")};return(0,B.jsxs)("div",{className:(0,M.cx)(h.wrapper,i,s?(0,M.css)({width:p.spacing(s)}):""),children:[(0,B.jsx)("div",{className:null!=n&&n.length?h.tags:void 0,children:null==n?void 0:n.map(((e,t)=>(0,B.jsx)(Ls,{name:e,onRemove:g,disabled:r},`${e}-${t}`)))}),(0,B.jsx)("div",{children:(0,B.jsx)($e.I,{id:d,disabled:r,placeholder:t,onChange:e=>{u(e.target.value)},value:c,onKeyUp:e=>{e.preventDefault(),"Enter"===e.key&&""!==c&&(a(n.concat(c)),u(""))},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onBlur:()=>{o&&c&&m()},invalid:l,suffix:c.length>0&&(0,B.jsx)(re.zx,{fill:"text",className:h.addButtonStyle,onClick:m,size:"md",children:"Add"})})})]})},Vs=e=>({wrapper:M.css`
    min-height: ${e.spacing.formInputHeight}px;
    align-items: center;
    display: flex;
    flex-wrap: wrap;
  `,tags:M.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    margin-right: ${e.spacing.xs};
  `,addButtonStyle:M.css`
    margin: 0 -${e.spacing.sm};
  `});var Bs,zs;const _s=e=>{let{currentPage:t,numberOfPages:n,onNavigate:a,hideWhenSinglePage:s,showSmallVersion:i,className:r}=e;const o=(0,ie.wW)(Us),l=i?1:8,d=(0,R.useMemo)((()=>{const e=[...new Array(n).keys()],s=n>l,r=(e,t)=>(0,B.jsx)("li",{className:o.item,children:(0,B.jsx)(re.zx,{size:"sm",variant:t,onClick:()=>a(e),children:e})},e);return e.reduce(((e,a)=>{const d=a+1,c=d===t?"primary":"secondary",u=l,h=n-l+1,p=h-u,g=p>-1&&t>=u&&t<=h,m=i?1:3,f=i?0:2;return s?1===d||d===n||t<u&&d<u||p>=0&&t>h&&d>h||p<0&&t>=u&&d>h||g&&d>=t-f&&d<=t+f?e.push(r(d,c)):(d===u&&t<u||d===h&&t>h||g&&(d===t-m||d===t+m))&&e.push((0,B.jsx)("li",{className:o.item,children:(0,B.jsx)(E.J,{className:o.ellipsis,name:"ellipsis-v"})},d)):e.push(r(d,c)),e}),[])}),[t,n,a,l,i,o.ellipsis,o.item]);return s&&n<=1?null:(0,B.jsx)("div",{className:(0,M.cx)(o.container,r),children:(0,B.jsxs)("ol",{children:[(0,B.jsx)("li",{className:o.item,children:(0,B.jsx)(re.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>a(t-1),disabled:1===t,children:Bs||(Bs=(0,B.jsx)(E.J,{name:"angle-left"}))})}),d,(0,B.jsx)("li",{className:o.item,children:(0,B.jsx)(re.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>a(t+1),disabled:t===n,children:zs||(zs=(0,B.jsx)(E.J,{name:"angle-right"}))})})]})})},Us=()=>({container:M.css`
      float: right;
    `,item:M.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:M.css`
      transform: rotate(90deg);
    `}),Hs=["name","onClick","icon","className","colorIndex"];const Ws=(0,R.forwardRef)(((e,t)=>{let{name:n,onClick:a,icon:s,className:i,colorIndex:r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Hs);const l=(0,ie.Fg)(),d=qs(l,n,r),c=(0,M.cx)(d.wrapper,i,{[d.hover]:void 0!==a});return a?(0,B.jsxs)("button",Object.assign({},o,{className:c,onClick:e=>{e.preventDefault(),e.stopPropagation(),null==a||a(n,e)},ref:t,children:[s&&(0,B.jsx)(E.J,{name:s}),n]})):(0,B.jsxs)("span",Object.assign({},o,{className:c,ref:t,children:[s&&(0,B.jsx)(E.J,{name:s}),n]}))}));Ws.displayName="Tag";const qs=(e,t,n)=>{let a;return a=void 0===n?(0,Rs.Bx)(t):(0,Rs.vm)(n),{wrapper:M.css`
      appearance: none;
      border-style: none;
      font-weight: ${e.typography.weight.semibold};
      font-size: ${e.typography.size.sm};
      line-height: ${e.typography.lineHeight.xs};
      vertical-align: baseline;
      background-color: ${a.color};
      color: ${e.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${e.border.radius.md};
    `,hover:M.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}},Zs=(0,R.memo)((0,R.forwardRef)(((e,t)=>{let{displayMax:n,tags:a,icon:s,onClick:i,className:r,getAriaLabel:o}=e;const l=(0,ie.l4)(),d=Gs(l,Boolean(n&&n>0)),c=a.length,u=n?a.slice(0,n):a;return(0,B.jsxs)("ul",{className:(0,M.cx)(d.wrapper,r),"aria-label":"Tags",ref:t,children:[u.map(((e,t)=>(0,B.jsx)("li",{className:d.li,children:(0,B.jsx)(Ws,{name:e,icon:s,onClick:i,"aria-label":null==o?void 0:o(e,t),"data-tag-id":t})},e))),n&&n>0&&c-n>0&&(0,B.jsxs)("span",{className:d.moreTagsLabel,children:["+ ",c-n]})]})})));Zs.displayName="TagList";const Gs=(e,t)=>({wrapper:M.css`
      position: relative;
      align-items: ${t?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${t?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:M.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
    `,li:(0,M.css)({listStyle:"none"})}),Ks=e=>{let{label:t,selected:n,onClick:a,icon:s="check"}=e;const i=(0,ie.wW)(Qs);return(0,B.jsxs)("div",{className:(0,M.cx)(i.wrapper,n&&i.selected),onClick:a,children:[(0,B.jsx)("span",{children:t}),n&&(0,B.jsx)(E.J,{name:s,className:i.icon})]})},Qs=e=>({wrapper:M.css`
      padding: ${e.spacing(.25)} ${e.spacing(1)};
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(8)};
      padding: ${e.spacing(0,2)};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;
      cursor: pointer;

      &:hover {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
      }
    `,selected:M.css`
      color: ${e.colors.text.primary};
      background: ${e.colors.action.selected};

      &:hover {
        background: ${e.colors.action.focus};
      }
    `,icon:M.css`
      margin-left: ${e.spacing(.5)};
    `});var Js=n(92565),Ys=n(94025);const Xs=e=>{let{icon:t,iconTooltip:n,title:a,children:s,id:i}=e;const r=(0,ie.wW)(Ys.J);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h2",{className:r.modalHeaderTitle,id:i,children:a}),s]})};function ei(e){const{title:t,children:n,isOpen:a=!1,closeOnEscape:s=!0,closeOnBackdropClick:i=!0,className:r,contentClassName:o,onDismiss:l,onClickBackdrop:d,trapFocus:c=!0}=e,u=(0,ie.l4)(),h=(0,Ys.J)(u),p=(0,R.useRef)(null),{overlayProps:g,underlayProps:m}=(0,Nn.Ir)({isKeyboardDismissDisabled:!s,isOpen:a,onClose:l},p),{dialogProps:f,titleProps:v}=(0,On.R)({},p);if(!a)return null;const b=(0,M.cx)(h.modalHeader,"string"!=typeof t&&h.modalHeaderWithTabs);return(0,B.jsxs)(Nn.Xj,{children:[(0,B.jsx)("div",Object.assign({className:h.modalBackdrop,onClick:d||(i?l:void 0)},m)),(0,B.jsx)(et.MT,{contain:c,autoFocus:!0,restoreFocus:!0,children:(0,B.jsxs)("div",Object.assign({className:(0,M.cx)(h.modal,r),ref:p},g,f,{children:[(0,B.jsxs)("div",{className:b,children:["string"==typeof t&&(0,B.jsx)(ti,Object.assign({},e,{title:t,id:v.id})),"string"!=typeof t&&t,(0,B.jsx)("div",{className:h.modalHeaderClose,children:(0,B.jsx)(se.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:l})})]}),(0,B.jsx)("div",{className:(0,M.cx)(h.modalContent,o),children:n})]}))})]})}function ti(e){let{icon:t,iconTooltip:n,title:a,id:s}=e;return(0,B.jsx)(Xs,{icon:t,iconTooltip:n,title:a,id:s})}ei.ButtonRow=function(e){let{leftItems:t,children:n}=e;const a=(0,ie.l4)(),s=(0,Ys.J)(a);return t?(0,B.jsx)("div",{className:s.modalButtonRow,children:(0,B.jsxs)(Js.Lh,{justify:"space-between",children:[(0,B.jsx)(Js.Lh,{justify:"flex-start",spacing:"md",children:t}),(0,B.jsx)(Js.Lh,{justify:"flex-end",spacing:"md",children:n})]})}):(0,B.jsx)("div",{className:s.modalButtonRow,children:(0,B.jsx)(Js.Lh,{justify:"flex-end",spacing:"md",children:n})})};const ni=e=>{let{isOpen:t,title:n,body:a,description:s,confirmText:i,confirmationText:r,dismissText:o="Cancel",alternativeText:l,icon:d="exclamation-triangle",onConfirm:c,onDismiss:u,onAlternative:h}=e;const[p,g]=(0,R.useState)(Boolean(r)),m=(0,ie.wW)(ai),f=(0,R.useRef)(null);return(0,R.useEffect)((()=>{var e;t&&(null===(e=f.current)||void 0===e||e.focus())}),[t]),(0,B.jsxs)(ei,{className:m.modal,title:n,icon:d,isOpen:t,onDismiss:u,children:[(0,B.jsxs)("div",{className:m.modalText,children:[a,s?(0,B.jsx)("div",{className:m.modalDescription,children:s}):null,r?(0,B.jsx)("div",{className:m.modalConfirmationInput,children:(0,B.jsx)(Js.Lh,{children:(0,B.jsx)($e.I,{placeholder:`Type ${r} to confirm`,onChange:e=>{g(0!==(null==r?void 0:r.localeCompare(e.currentTarget.value)))}})})}):null]}),(0,B.jsxs)(ei.ButtonRow,{children:[(0,B.jsx)(re.zx,{variant:"secondary",onClick:u,fill:"outline",children:o}),(0,B.jsx)(re.zx,{variant:"destructive",onClick:c,disabled:p,ref:f,"aria-label":Wt.wl.pages.ConfirmModal.delete,children:i}),h?(0,B.jsx)(re.zx,{variant:"primary",onClick:h,children:l}):null]})]})},ai=e=>({modal:M.css`
    width: 500px;
  `,modalText:(0,M.css)({fontSize:e.typography.h5.fontSize,color:e.colors.text.primary}),modalDescription:(0,M.css)({fontSize:e.typography.body.fontSize}),modalConfirmationInput:(0,M.css)({paddingTop:e.spacing(1)})});var si=n(84453),ii=n(35380),ri=n(9676);function oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class li extends R.PureComponent{constructor(e,t){super(e,t),oi(this,"plugins",void 0),oi(this,"runOnChangeDebounced",void 0),oi(this,"lastExecutedValue",null),oi(this,"mounted",!1),oi(this,"editor",null),oi(this,"onChange",((e,t)=>{const n=e.document!==this.state.value.document,a=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(e),this.setState({value:e},(()=>{if(n){const n=si.Z.serialize(a)!==si.Z.serialize(e);n&&t&&this.runOnChangeAndRunQuery(),n&&!t&&this.runOnChangeDebounced()}}))})),oi(this,"runOnChange",(()=>{const{onChange:e}=this.props,t=si.Z.serialize(this.state.value);e&&e(this.cleanText(t))})),oi(this,"runOnRunQuery",(()=>{const{onRunQuery:e}=this.props;e&&(e(),this.lastExecutedValue=this.state.value)})),oi(this,"runOnChangeAndRunQuery",(()=>{this.runOnChange(),this.runOnRunQuery()})),oi(this,"handleBlur",((e,t,n)=>{const{onBlur:a}=this.props;if(a)a();else{(this.lastExecutedValue?si.Z.serialize(this.lastExecutedValue):null)!==si.Z.serialize(t.value)&&this.runOnChangeAndRunQuery()}return n()})),this.runOnChangeDebounced=(0,J.debounce)(this.runOnChange,500);const{onTypeahead:n,cleanText:a,portalOrigin:s,onWillApplySuggestion:i}=e;this.plugins=[(0,ri.bm)({onTypeahead:n,cleanText:a,portalOrigin:s,onWillApplySuggestion:i}),(0,ri.dv)({handler:this.runOnChangeAndRunQuery}),(0,ri.z2)(),(0,ri.Gp)(),(0,ri.$L)(),(0,ri.Rc)(),(0,ri.wl)(),...e.additionalPlugins||[]].filter((e=>e)),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,we.makeValue)(e.query||"",e.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(e,t){const{query:n,syntax:a,syntaxLoaded:s}=this.props;if(!e.syntaxLoaded&&s&&this.editor){const e=this.editor.insertText(" ").deleteBackward(1);this.onChange(e.value,!0)}const{value:i}=this.state;n!==e.query&&n!==si.Z.serialize(i)&&this.setState({value:(0,we.makeValue)(n||"",a)})}cleanText(e){return e.replace(/[\r]/g,"")}render(){const{disabled:e,theme:t}=this.props,n=L()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":e}),a=ci(t);return(0,B.jsx)("div",{className:(0,M.cx)(n,a.wrapper),children:(0,B.jsx)("div",{className:"slate-query-field","aria-label":Wt.wl.components.QueryField.container,children:(0,B.jsx)(ii.ML,{ref:e=>this.editor=e,schema:we.SCHEMA,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:e=>{this.onChange(e.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})})})}}const di=(0,ie.HE)(li),ci=e=>{const t=(0,Yt.getFocusStyles)(e);return{wrapper:M.css`
      &:focus-within {
        ${t}
      }
    `}};var ui=n(17614);var hi;const pi=e=>{const{loading:t,error:a,dependency:s}=(e=>{const t=(0,ui.Z)((async()=>await e));return Object.assign({},t,{dependency:t.value})})(n.e(2462).then(n.bind(n,13860)));if(t)return hi||(hi=(0,B.jsx)(Je,{text:""}));if(a)return(0,B.jsx)(Xc,{title:"React Monaco Editor failed to load",error:a,errorInfo:{componentStack:(null==a?void 0:a.stack)||""}});const i=s.ReactMonacoEditor;return(0,B.jsx)(i,Object.assign({},e))};let gi;function mi(e,t,n,a){const s=[];for(const r of n){var i;t&&!r.label.startsWith(t)||s.push(Object.assign({},r,{kind:fi(e,r.kind),range:a,insertText:null!==(i=r.insertText)&&void 0!==i?i:r.label}))}return s}function fi(e,t){switch(t){case gi.Method:return e.languages.CompletionItemKind.Method;case gi.Field:return e.languages.CompletionItemKind.Field;case gi.Property:return e.languages.CompletionItemKind.Property;case gi.Constant:return e.languages.CompletionItemKind.Constant;case gi.Text:return e.languages.CompletionItemKind.Text}return e.languages.CompletionItemKind.Text}function vi(e,t,n){if(t&&n)return e.languages.registerCompletionItemProvider(t,{triggerCharacters:["$"],provideCompletionItems:(t,a,s)=>{const i={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:a.column,endColumn:a.column};if("$"===s.triggerCharacter)return i.startColumn=a.column-1,{suggestions:mi(e,"$",n(),i)};const r=t.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column}),{index:o,prefix:l}=function(e){for(let t=e.length-1;t>0;t--){const n=e.charAt(t);if("$"===n)return{index:t,prefix:e.substring(t)};if(" "===n||"\t"===n||'"'===n||"'"===n)return{index:t+1,prefix:e.substring(t+1)}}return{index:0,prefix:e}}(r);i.startColumn=o+1;const d=mi(e,l,n(),i);return d.length?{suggestions:d}:void 0}})}function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Method="method",e.Field="field",e.Property="property",e.Constant="constant",e.Text="text"}(gi||(gi={}));class xi extends R.PureComponent{constructor(e){super(e),bi(this,"completionCancel",void 0),bi(this,"monaco",void 0),bi(this,"loadCustomLanguage",(()=>{const{language:e}=this.props,t=tt.monacoLanguageRegistry.getIfExists(e);return t?t.init():Promise.resolve()})),bi(this,"getEditorValue",(()=>"")),bi(this,"onBlur",(()=>{const{onBlur:e}=this.props;e&&e(this.getEditorValue())})),bi(this,"onSave",(()=>{const{onSave:e}=this.props;e&&e(this.getEditorValue())})),bi(this,"handleBeforeMount",(e=>{this.monaco=e;const{language:t,getSuggestions:n,onBeforeEditorMount:a}=this.props;n&&(this.completionCancel=vi(e,t,n)),null==a||a(e)})),bi(this,"handleOnMount",((e,t)=>{const{onEditorDidMount:n}=this.props;this.getEditorValue=()=>e.getValue(),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,this.onSave);const a=this.loadCustomLanguage();n&&a.then((()=>n(e,t)))}))}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(e){const{getSuggestions:t,language:n}=this.props,a=e.language!==n;if(e.getSuggestions!==t||a){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco)return void console.warn("Monaco instance not loaded yet");t&&(this.completionCancel=vi(this.monaco,n,t))}a&&this.loadCustomLanguage()}render(){var e,t;const{theme:n,language:a,width:s,height:i,showMiniMap:r,showLineNumbers:o,readOnly:l,monacoOptions:d}=this.props,c=null!==(e=this.props.value)&&void 0!==e?e:"",u=c.length>100,h=null!==(t=this.props.containerStyles)&&void 0!==t?t:wi(n).container,p={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:u&&r,renderCharacters:!1},readOnly:l,lineNumbersMinChars:4,lineDecorationsWidth:1*n.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*n.spacing.gridSize,bottom:.5*n.spacing.gridSize},fixedOverflowWidgets:!0};return o||(p.glyphMargin=!1,p.folding=!1,p.lineNumbers="off",p.lineNumbersMinChars=0),(0,B.jsx)("div",{className:h,onBlur:this.onBlur,"aria-label":Wt.wl.components.CodeEditor.container,children:(0,B.jsx)(pi,{width:s,height:i,language:a,value:c,options:Object.assign({},p,null!=d?d:{}),beforeMount:this.handleBeforeMount,onMount:this.handleOnMount})})}}const yi=(0,ie.HE)(xi),wi=e=>({container:M.css`
      border-radius: ${e.shape.borderRadius()};
      border: 1px solid ${e.components.input.borderColor};
    `});function ji(e){const t="${"+e.value+"}",n=e.value===e.label?e.origin:`${e.label} / ${e.origin}`;return{label:t,kind:gi.Property,detail:n,documentation:e.documentation}}var Si=n(60540);const Ci=(0,ie.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tabsWrapper:!t&&M.css`
        border-bottom: 1px solid ${e.colors.border.weak};
      `,tabs:M.css`
      position: relative;
      display: flex;
      height: ${e.components.menuTabs.height}px;
    `}})),ki=R.forwardRef(((e,t)=>{let{children:n,className:a,hideBorder:s}=e;const i=(0,ie.l4)(),r=Ci(i,s);return(0,B.jsx)("div",{className:(0,M.cx)(r.tabsWrapper,a),ref:t,children:(0,B.jsx)("div",{className:r.tabs,role:"tablist",children:n})})}));ki.displayName="TabsBar";const Ti=e=>{let{icon:t,title:n,tabs:a,activeTab:s,onChangeTab:i}=e;return(0,B.jsx)(Xs,{icon:t,title:n,children:(0,B.jsx)(ki,{hideBorder:!0,children:a.map(((e,t)=>(0,B.jsx)(Si.O,{label:e.label,icon:e.icon,suffix:e.tabSuffix,active:e.value===s,onChangeTab:()=>i(e)},`${e.value}-${t}`)))})})},Ii=e=>{let{children:t}=e;return(0,B.jsx)("div",{className:"share-modal-body",children:(0,B.jsx)("div",{className:"share-modal-header",children:(0,B.jsx)("div",{className:"share-modal-content",children:t})})})};function Oi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ni=R.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class Fi extends R.Component{constructor(e){super(e),Oi(this,"showModal",((e,t)=>{this.setState({component:e,props:t})})),Oi(this,"hideModal",(()=>{this.setState({component:null,props:{}})})),this.state={component:e.component||null,props:e.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return(0,B.jsx)(Ni.Provider,{value:this.state,children:this.props.children})}}const Di=()=>(0,B.jsx)(Ni.Consumer,{children:e=>{let{component:t,props:n}=e;return t?(0,B.jsx)(t,Object.assign({},n)):null}}),Pi=Ni.Consumer,Ai=R.memo((e=>{let{title:t,section:n,parent:a,pageIcon:s,onGoBack:i,children:r,titleHref:o,parentHref:l,leftItems:d,isFullscreen:c,className:u,"aria-label":h}=e;const p=(0,nt.wW)(Mi),g=(0,M.cx)("page-toolbar",p.toolbar,{"page-toolbar--fullscreen":c},u),m=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("span",{className:p.noLinkTitle,children:t}),n&&(0,B.jsxs)("span",{className:p.pre,children:[" / ",n]})]});return(0,B.jsxs)("nav",{className:g,"aria-label":h,children:[(0,B.jsxs)("div",{className:p.leftWrapper,children:[s&&!i&&(0,B.jsx)("div",{className:p.pageIcon,children:(0,B.jsx)(E.J,{name:s,size:"lg","aria-hidden":!0})}),i&&(0,B.jsx)("div",{className:p.pageIcon,children:(0,B.jsx)(se.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":Wt.wl.components.BackButton.backArrow,onClick:i})}),(0,B.jsxs)("nav",{"aria-label":"Search links",className:p.navElement,children:[a&&l&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(Vh,{"aria-label":`Search dashboard in the ${a} folder`,className:(0,M.cx)(p.titleText,p.parentLink,p.titleLink),href:l,children:[a," ",(0,B.jsx)("span",{className:p.parentIcon})]}),o&&(0,B.jsx)("span",{className:(0,M.cx)(p.titleText,p.titleDivider,p.parentLink),"aria-hidden":!0,children:"/"})]}),(t||(null==d?void 0:d.length))&&(0,B.jsxs)("div",{className:p.titleWrapper,children:[t&&(0,B.jsx)("h1",{className:p.h1Styles,children:o?(0,B.jsx)(Vh,{"aria-label":"Search dashboard by name",className:(0,M.cx)(p.titleText,p.titleLink),href:o,children:m}):(0,B.jsx)("div",{className:p.titleText,children:m})}),null==d?void 0:d.map(((e,t)=>(0,B.jsx)("div",{className:p.leftActionItem,children:e},t)))]})]})]}),R.Children.toArray(r).filter(Boolean).map(((e,t)=>(0,B.jsx)("div",{className:p.actionWrapper,children:e},t)))]})}));Ai.displayName="PageToolbar";const Mi=e=>{const{spacing:t,typography:n}=e,a=(0,Yt.getFocusStyles)(e);return{pre:M.css`
      white-space: pre;
    `,toolbar:M.css`
      align-items: center;
      background: ${e.colors.background.canvas};
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      padding: ${e.spacing(1.5,2)};
    `,leftWrapper:M.css`
      display: flex;
      flex-wrap: nowrap;
      flex-grow: 1;
    `,pageIcon:M.css`
      display: none;
      @media ${ie.GU.mediaUp(e.v1.breakpoints.md)} {
        display: flex;
        padding-right: ${e.spacing(1)};
        align-items: center;
      }
    `,noLinkTitle:M.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:M.css`
      display: flex;
      flex-grow: 1;
      margin: 0;
    `,navElement:M.css`
      display: flex;
      flex-grow: 1;
      align-items: center;
      max-width: calc(100vw - 78px);
    `,h1Styles:M.css`
      margin: 0;
      line-height: inherit;
      width: 300px;
      max-width: min-content;
      flex-grow: 1;
    `,parentIcon:M.css`
      margin-left: ${e.spacing(.5)};
    `,titleText:M.css`
      display: flex;
      font-size: ${n.size.lg};
      margin: 0;
      border-radius: 2px;
    `,titleLink:M.css`
      &:focus-visible {
        ${a}
      }
    `,titleDivider:M.css`
      padding: ${t(0,.5,0,.5)};
    `,parentLink:M.css`
      display: none;
      @media ${ie.GU.mediaUp(e.v1.breakpoints.md)} {
        display: unset;
      }
    `,actionWrapper:M.css`
      padding: ${t(.5,0,.5,1)};
    `,leftActionItem:M.css`
      display: none;
      @media ${ie.GU.mediaUp(e.v1.breakpoints.md)} {
        align-items: center;
        display: flex;
        padding-left: ${t(.5)};
      }
    `}};var Ri=n(72646),$i=n(71808),Li=n(50652),Ei=n(17976),Vi=n(75250),Bi=n(39419);function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _i extends R.PureComponent{constructor(e){super(e),zi(this,"propsSubject",void 0),zi(this,"subscription",void 0),this.propsSubject=new Ri.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,Vi.w)((e=>In.isLive(e.interval)?(0,$i.of)({}):e.loading?Li.C:(0,Ei.F)((0,tt.stringToMs)(e.interval)))),(0,Bi.b)((()=>this.props.func()))).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(e){In.isLive(e.interval)&&In.isLive(this.props.interval)||(0,J.isEqual)(e,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}var Ui,Hi=n(54944),Wi=n(62859);const qi=e=>Ui||(Ui=(0,B.jsx)("span",{children:"Â "}));var Zi=n(97060);const Gi=["key"];const Ki=e=>{const{totalColumnsWidth:t,footerGroups:n,height:a,isPaginationVisible:s}=e,i=Wt.wl.components.Panels.Visualization.Table,r=(0,ie.wW)(Zi.V);return(0,B.jsx)("table",{style:{position:s?"relative":"absolute",width:t?`${t}px`:"100%",bottom:"0px"},children:n.map((e=>{const t=e.getFooterGroupProps(),{key:n}=t,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,Gi);return(0,R.createElement)("tfoot",Object.assign({className:r.tfoot},s,{key:n,"data-testid":i.footer,style:a?{height:`${a}px`}:void 0}),(0,B.jsx)("tr",{children:e.headers.map(((e,t)=>function(e,t,n){var a;const s=e.getHeaderProps();if(!s)return null;s.style=null!==(a=s.style)&&void 0!==a?a:{},s.style.position="absolute",s.style.justifyContent=e.justifyContent,n&&(s.style.height=n);return(0,B.jsx)("th",Object.assign({className:t.headerCell},s,{children:e.render("Footer")}))}(e,r,a)))}))}))})};function Qi(e,t){return void 0===t?qi:(e=>{const t=M.css`
    width: 100%;
    list-style: none;
  `,n=M.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return e.value&&!Array.isArray(e.value)?(0,B.jsx)("span",{children:e.value}):e.value&&Array.isArray(e.value)&&e.value.length>0?(0,B.jsx)("ul",{className:t,children:e.value.map(((e,t)=>{const a=Object.keys(e)[0];return(0,B.jsxs)("li",{className:n,children:[(0,B.jsxs)("span",{children:[a,":"]}),(0,B.jsx)("span",{children:e[a]})]},t)}))}):qi})({value:t[e]})}var Ji,Yi=n(52410);const Xi=e=>{let{options:t,values:n,caseSensitive:a,onChange:s}=e;const i=(0,ie.l4)(),r=er(i),[o,l]=(0,R.useState)(""),d=(0,R.useMemo)((()=>new RegExp(o,a?void 0:"i")),[o,a]),c=(0,R.useMemo)((()=>t.filter((e=>void 0!==e.label&&d.test(e.label)))),[t,d]),u=i.spacing.gridSize,h=(0,R.useMemo)((()=>Math.min(28*c.length,140)+u),[u,c.length]),p=(0,R.useCallback)((e=>{l(e)}),[l]),g=(0,R.useCallback)((e=>t=>{const a=t.currentTarget.checked?n.concat(e):n.filter((t=>t.value!==e.value));s(a)}),[s,n]);return(0,B.jsxs)(Js.wc,{spacing:"md",children:[(0,B.jsx)(pp,{placeholder:"Filter values",onChange:p,value:o}),!c.length&&(Ji||(Ji=(0,B.jsx)(Bh._,{children:"No values"}))),c.length&&(0,B.jsx)(Wi.t7,{height:h,itemCount:c.length,itemSize:28,width:"100%",className:r.filterList,children:e=>{let{index:t,style:a}=e;const s=c[t],{value:i,label:o}=s,l=void 0!==n.find((e=>e.value===i));return(0,B.jsx)("div",{className:r.filterListRow,style:a,title:o,children:(0,B.jsx)(yp,{value:l,label:o,onChange:g(s)})})}})]})},er=(0,ie.Bb)((e=>({filterList:M.css`
    label: filterList;
  `,filterListRow:M.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${e.spacing(.5)};

    :hover {
      background-color: ${e.colors.action.hover};
    }
  `})));var tr=n(73514);const nr=["value","className","style"];const ar=e=>{var t,n;let{value:a,className:s,style:i}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,nr);const o=(null!==(t=a.prefix)&&void 0!==t?t:"").length>0,l=(null!==(n=a.suffix)&&void 0!==n?n:"").length>0;let d;if(i&&i.fontSize){const e=null==i?void 0:i.fontSize,t=function(e){return e<20?.9:e<26?.8:.6}(e);d={fontSize:e*t}}return(0,B.jsx)("div",Object.assign({className:s,style:i},r,{children:(0,B.jsxs)("div",{children:[o&&(0,B.jsx)("span",{children:a.prefix}),(0,B.jsx)("span",{children:a.text}),l&&(0,B.jsx)("span",{style:d,children:a.suffix})]})}))};ar.displayName="FormattedDisplayValue";const sr=1.5;let ir;!function(e){e.Basic="basic",e.Lcd="lcd",e.Gradient="gradient"}(ir||(ir={}));class rr extends R.PureComponent{render(){const{onClick:e,className:t}=this.props,{title:n}=this.props.value,a=function(e){const t={display:"flex",overflow:"hidden",width:"100%"},n=lr(e),a={fontSize:`${n.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};or(e.orientation)?(t.flexDirection="column-reverse",a.textAlign="center"):"above"===n.placement?t.flexDirection="column":(t.flexDirection="row",a.width=`${n.width}px`,a.textAlign="right",a.paddingRight="10px");return{wrapper:t,title:a}}(this.props);return n?(0,B.jsxs)("div",{style:a.wrapper,onClick:e,className:t,children:[(0,B.jsx)("div",{style:a.title,children:n}),this.renderBarAndValue()]}):(0,B.jsx)("div",{style:a.wrapper,onClick:e,className:t,children:this.renderBarAndValue()})}renderBarAndValue(){return"lcd"===this.props.displayMode?this.renderRetroBars():this.renderBasicAndGradientBars()}renderBasicAndGradientBars(){const{value:e,showUnfilled:t}=this.props,n=function(e){var t,n;const{displayMode:a,field:s,value:i,alignmentFactors:r,orientation:o,theme:l,text:d}=e,{valueWidth:c,valueHeight:u,maxBarHeight:h,maxBarWidth:p}=dr(e),g=null!==(t=s.min)&&void 0!==t?t:tt.GAUGE_DEFAULT_MINIMUM,m=null!==(n=s.max)&&void 0!==n?n:tt.GAUGE_DEFAULT_MAXIMUM,f=ur(i.numeric,g,m),v=pr(e),b=gr(r||i,v,c,u,o,d),x="basic"===a,y={display:"flex",flexGrow:1},w={borderRadius:"3px",position:"relative",zIndex:1},j={background:`rgba(${l.isDark?"255,255,255":"0,0,0"}, 0.07)`,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(or(o)){const t=Math.max(f*h,1);y.flexDirection="column",y.justifyContent="flex-end",w.transition="height 1s",w.height=`${t}px`,w.width=`${p}px`,j.bottom="-3px",j.width=`${c}px`,x?(w.background=`${pt()(v).setAlpha(.35).toRgbString()}`,w.borderTop=`2px solid ${v}`):w.background=hr(e,h)}else{const t=Math.max(f*p,1);y.flexDirection="row-reverse",y.justifyContent="flex-end",y.alignItems="stretch",w.transition="width 1s",w.height=`${h}px`,w.width=`${t}px`,j.left="-3px",j.height=`${u}px`,x?(w.background=`${pt()(v).setAlpha(.35).toRgbString()}`,w.borderRight=`2px solid ${v}`):w.background=hr(e,p)}return{wrapper:y,bar:w,value:b,emptyBar:j}}(this.props);return(0,B.jsxs)("div",{style:n.wrapper,children:[(0,B.jsx)(ar,{"data-testid":Wt.wl.components.Panels.Visualization.BarGauge.valueV2,value:e,style:n.value}),t&&(0,B.jsx)("div",{style:n.emptyBar}),(0,B.jsx)("div",{style:n.bar})]})}renderRetroBars(){var e,t;const{display:n,field:a,value:s,itemSpacing:i,alignmentFactors:r,orientation:o,lcdCellWidth:l,text:d}=this.props,{valueHeight:c,valueWidth:u,maxBarHeight:h,maxBarWidth:p,wrapperWidth:g,wrapperHeight:m}=dr(this.props),f=null!==(e=a.min)&&void 0!==e?e:tt.GAUGE_DEFAULT_MINIMUM,v=null!==(t=a.max)&&void 0!==t?t:tt.GAUGE_DEFAULT_MAXIMUM,b=or(o),x=v-f,y=b?h:p,w=i,j=Math.floor(y/l),S=Math.floor((y-w*j)/j),C=gr(r||s,pr(this.props),u,c,o,d),k={width:`${g}px`,height:`${m}px`,display:"flex"};b?(k.flexDirection="column-reverse",k.alignItems="center"):(k.flexDirection="row",k.alignItems="center",C.justifyContent="flex-end");const T=[];for(let e=0;e<j;e++){const t=cr(f+x/j*e,s,n),a={borderRadius:"2px"};t.isLit?a.backgroundImage=`radial-gradient(${t.background} 10%, ${t.backgroundShade})`:a.backgroundColor=t.background,b?(a.height=`${S}px`,a.width=`${p}px`,a.marginTop=`${w}px`):(a.width=`${S}px`,a.height=`${h}px`,a.marginRight=`${w}px`),T.push((0,B.jsx)("div",{style:a},e.toString()))}return(0,B.jsxs)("div",{style:k,children:[T,(0,B.jsx)(ar,{"data-testid":Wt.wl.components.Panels.Visualization.BarGauge.valueV2,value:s,style:C})]})}}function or(e){return e===tt.VizOrientation.Vertical}function lr(e){var t;const{height:n,width:a,alignmentFactors:s,orientation:i,text:r}=e,o=s?s.title:e.value.title;if(!o)return{fontSize:0,width:0,height:0,placement:"above"};if(or(i)){var l;const e=null!==(l=null==r?void 0:r.titleSize)&&void 0!==l?l:14;return{fontSize:e,width:a,height:e*sr,placement:"below"}}if(n>40){if(null!=r&&r.titleSize)return{fontSize:null==r?void 0:r.titleSize,width:0,height:r.titleSize*sr,placement:"above"};const e=.45,t=Math.max(Math.min(n*e,50),17);return{fontSize:t/sr,width:0,height:t,placement:"above"}}const d=Math.max(.6*n,18)/sr,c=(0,tr.X1)(o,d),u=Math.min(c.width+15,.4*a);return{fontSize:null!==(t=null==r?void 0:r.titleSize)&&void 0!==t?t:d,height:0,width:u,placement:"left"}}function dr(e){var t;const{height:n,width:a,orientation:s,text:i,alignmentFactors:r}=e,o=lr(e),l=null!=r?r:e.value,d=(0,tt.formattedValueToString)(l);let c=0,u=0,h=0,p=0,g=0,m=0;const f=null!==(t=null==i?void 0:i.valueSize)&&void 0!==t?t:Math.max(o.fontSize,12),v=(0,tr.X1)(d,f).width+20;return or(s)?(h=null!=i&&i.valueSize?1*i.valueSize:Math.min(Math.max(.1*n,18),50),p=a,c=n-(o.height+h),u=a,g=a,m=n-o.height):(h=n-o.height,p=Math.max(Math.min(.2*a,150),v),c=n-o.height,u=a-p-o.width,"above"===o.placement?(g=a,m=n-o.height):(g=a-o.width,m=n)),{valueWidth:p,valueHeight:h,maxBarWidth:u,maxBarHeight:c,wrapperHeight:m,wrapperWidth:g}}function cr(e,t,n){if(null===e)return{background:tt.FALLBACK_COLOR,border:tt.FALLBACK_COLOR};const a=n?n(e).color:null;return a?null===t||isNaN(t.numeric)||null!==e&&e>t.numeric?{background:pt()(a).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:pt()(a).setAlpha(.95).toRgbString(),backgroundShade:pt()(a).setAlpha(.55).toRgbString(),border:pt()(a).setAlpha(.9).toRgbString(),isLit:!0}:{background:tt.FALLBACK_COLOR,border:tt.FALLBACK_COLOR}}function ur(e,t,n){const a=Math.min((e-t)/(n-t),1);return isNaN(a)?0:a}function hr(e,t){var n,a;const{field:s,value:i,orientation:r,theme:o}=e,l=or(r)?"0deg":"90deg",d=s.min,c=s.max;let u="",h=0,p=(0,tt.getFieldColorMode)(null===(n=s.color)||void 0===n?void 0:n.mode);if(p.id===tt.FieldColorModeId.Thresholds){const n=s.thresholds;for(let a=0;a<n.steps.length;a++){const s=n.steps[a],r=e.theme.visualization.getColorByName(s.color),o=n.mode===tt.ThresholdsMode.Percentage?s.value/100:ur(s.value,d,c),p=o*t,g=Math.round(p-(p-h)/2),m=n.mode===tt.ThresholdsMode.Percentage?d+(c-d)*o:s.value;if(""===u)u=`linear-gradient(${l}, ${r}, ${r}`;else{if(i.numeric<m)break;h=p,u+=` ${g}px, ${r}`}}return u+")"}if(p.isContinuous&&p.getColors){const e=p.getColors(o);for(let n=0;n<e.length;n++){const a=e[n];if(""===u)u=`linear-gradient(${l}, ${a} 0px`;else{u+=`, ${a} ${n/(e.length-1)*t}px`}}return u+")"}return null!==(a=i.color)&&void 0!==a?a:tt.FALLBACK_COLOR}function pr(e){const{value:t}=e;return t.color?t.color:tt.FALLBACK_COLOR}function gr(e,t,n,a,s,i){const r={color:t,height:`${a}px`,width:`${n}px`,display:"flex",alignItems:"center",lineHeight:1};let o=n;const l=(0,tt.formattedValueToString)(e);var d,c;or(s)?(r.fontSize=null!==(d=null==i?void 0:i.valueSize)&&void 0!==d?d:(0,tr.MX)(l,o,a,1),r.justifyContent="center"):(r.fontSize=null!==(c=null==i?void 0:i.valueSize)&&void 0!==c?c:(0,tr.MX)(l,o-20,a,1),r.justifyContent="flex-end",r.paddingLeft="10px",r.paddingRight="10px",o-=10);return r}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(rr,"defaultProps",{lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:ir.Gradient,orientation:tt.VizOrientation.Horizontal,field:{min:0,max:100,thresholds:{mode:tt.ThresholdsMode.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0});var mr=n(84968),fr=n(35993);const vr=R.memo((e=>{let{x:t,y:n,onClose:a,focusOnOpen:s=!0,renderMenuItems:i,renderHeader:r}=e;const o=(0,R.useRef)(null),[l,d]=(0,R.useState)({});(0,R.useLayoutEffect)((()=>{const e=o.current;if(e){const a=e.getBoundingClientRect(),s=5,i={right:window.innerWidth<t+a.width,bottom:window.innerHeight<a.bottom+a.height+s};d({position:"fixed",left:i.right?t-a.width-s:t-s,top:i.bottom?n-a.height-s:n+s})}}),[t,n]),(0,fr.Z)(o,(()=>{null==a||a()}));const c=null==r?void 0:r(),u=null==i?void 0:i();return(0,B.jsx)(fe.h_,{children:(0,B.jsx)(dn,{header:c,ref:o,style:l,ariaLabel:Wt.wl.components.Menu.MenuComponent("Context"),onOpen:e=>{s&&e(0)},onClick:a,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),null==a||a())},children:u})})}));vr.displayName="ContextMenu";const br=e=>{let{children:t,renderMenuItems:n,focusOnOpen:a=!0}=e;const[s,i]=(0,R.useState)(!1),[r,o]=(0,R.useState)({x:0,y:0});return(0,B.jsxs)(B.Fragment,{children:[t({openMenu:e=>{i(!0),o({x:e.pageX,y:e.pageY})}}),s&&(0,B.jsx)(vr,{onClose:()=>i(!1),x:r.x,y:r.y,renderMenuItems:n,focusOnOpen:a})]})},xr=e=>{let{children:t,links:n,style:a}=e;const s=[{items:(0,mr.R)(n),label:"Data links"}],i=s[0].items.length,r=()=>s.map(((e,t)=>(0,B.jsx)(Qt,{label:e.label,children:(e.items||[]).map((e=>(0,B.jsx)(sn,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),o=M.css`
    cursor: context-menu;
  `;if(i>1)return(0,B.jsx)(br,{renderMenuItems:r,children:e=>{let{openMenu:n}=e;return t({openMenu:n,targetClassName:o})}});{const e=n()[0];return(0,B.jsx)("a",{href:e.href,onClick:e.onClick,target:e.target,title:e.title,style:Object.assign({},a,{overflow:"hidden"}),"aria-label":Wt.wl.components.DataLinksContextMenu.singleLink,children:t({})})}};var yr=n(9239);const wr={mode:tt.ThresholdsMode.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},jr=e=>{const{field:t,innerWidth:n,tableStyles:a,cell:s,cellProps:i,row:r}=e;let o=(0,tt.getFieldConfigWithMinMax)(t,!1);o.thresholds||(o=Object.assign({},o,{thresholds:wr}));const l=t.display(s.value);let d=ir.Gradient;t.config.custom&&t.config.custom.displayMode===yr.h2.LcdGauge?d=ir.Lcd:t.config.custom&&t.config.custom.displayMode===yr.h2.BasicGauge&&(d=ir.Basic);const c=()=>(0,J.isFunction)(t.getLinks)?t.getLinks({valueRowIndex:r.index}):[],u=Boolean(c().length);return(0,B.jsxs)("div",Object.assign({},i,{className:a.cellContainer,children:[u&&(0,B.jsx)(xr,{links:c,style:{display:"flex",width:"100%"},children:e=>(e=>{const{openMenu:s,targetClassName:i}=e;return(0,B.jsx)(rr,{width:n,height:a.cellHeightInner,field:o,display:t.display,text:{valueSize:14},value:l,orientation:tt.VizOrientation.Horizontal,theme:a.theme,onClick:s,className:i,itemSpacing:1,lcdCellWidth:8,displayMode:d})})(e)}),!u&&(0,B.jsx)(rr,{width:n,height:a.cellHeightInner,field:o,display:t.display,text:{valueSize:14},value:l,orientation:tt.VizOrientation.Horizontal,theme:a.theme,itemSpacing:1,lcdCellWidth:8,displayMode:d})]}))};function Sr(e){let{value:t,onDismiss:n,mode:a}=e,s=t;if((0,J.isString)(t))try{t=JSON.parse(t)}catch{}else s=JSON.stringify(t,null," ");let i=s;return"code"===a&&(i=JSON.stringify(t,null," ")),(0,B.jsxs)(ei,{onDismiss:n,isOpen:!0,title:"Inspect value",children:["code"===a?(0,B.jsx)(yi,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(i&&i.length)>100,value:i,readOnly:!0}):(0,B.jsx)("pre",{children:i}),(0,B.jsx)(ei.ButtonRow,{children:(0,B.jsx)(De,{icon:"copy",getText:()=>i,children:"Copy to Clipboard"})})]})}function Cr(e){var t;let{field:n,cell:a,previewMode:s,onCellFilterAdded:i}=e;const[r,o]=(0,R.useState)(!1),l="flex-end"===Dr(n),d=Boolean(n.config.filterable)&&void 0!==a.value,c=Boolean(null===(t=n.config.custom)||void 0===t?void 0:t.inspect),u={size:"sm",tooltipPlacement:"top"},h=(0,R.useCallback)((e=>{i&&i({key:n.name,operator:yr.PT,value:a.value})}),[a,n,i]),p=(0,R.useCallback)((e=>{i&&i({key:n.name,operator:yr.tE,value:a.value})}),[a,n,i]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"cellActions "+(l?"cellActionsLeft":""),children:(0,B.jsxs)(Js.Lh,{spacing:"xs",children:[c&&(0,B.jsx)(se.h,Object.assign({name:"eye",tooltip:"Inspect value",onClick:()=>{o(!0)}},u)),d&&(0,B.jsx)(se.h,Object.assign({name:"search-plus",onClick:h,tooltip:"Filter for value"},u)),d&&(0,B.jsx)(se.h,Object.assign({name:"search-minus",onClick:p,tooltip:"Filter out value"},u))]})}),r&&(0,B.jsx)(Sr,{mode:s,value:a.value,onDismiss:()=>{o(!1)}})]})}const kr=e=>{var t,n;const{field:a,cell:s,tableStyles:i,row:r,cellProps:o}=e,l=Boolean(null===(t=a.config.custom)||void 0===t?void 0:t.inspect),d=a.display(s.value);let c;c=R.isValidElement(s.value)?s.value:(0,tt.formattedValueToString)(d);const u=a.config.filterable&&void 0!==s.value||l,h=function(e,t,n){var a,s,i;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if((null===(a=t.config.custom)||void 0===a?void 0:a.displayMode)===yr.h2.ColorText)return e.buildCellContainerStyle(n.color,void 0,!r);if((null===(s=t.config.custom)||void 0===s?void 0:s.displayMode)===yr.h2.ColorBackgroundSolid){const t=pt()(n.color),a=(0,Rs.Gc)(n.color);return e.buildCellContainerStyle(a,t.toRgbString(),!r)}if((null===(i=t.config.custom)||void 0===i?void 0:i.displayMode)===yr.h2.ColorBackground){const t=e.theme.isDark?1:-.7,a=pt()(n.color).darken(10*t).spin(5).toRgbString(),s=(0,Rs.Gc)(n.color);return e.buildCellContainerStyle(s,`linear-gradient(120deg, ${a}, ${n.color})`,!r)}return r?e.cellContainerNoOverflow:e.cellContainer}(i,a,d,l),p=Boolean(null===(n=(0,Rs.iu)(a,r))||void 0===n?void 0:n.length);return(0,B.jsxs)("div",Object.assign({},o,{className:h,children:[!p&&(0,B.jsx)("div",{className:i.cellText,children:c}),p&&(0,B.jsx)(xr,{links:()=>(0,Rs.iu)(a,r)||[],children:e=>(0,B.jsx)("div",{onClick:e.openMenu,className:(0,M.cx)(i.cellLink,e.targetClassName),children:c})}),u&&(0,B.jsx)(Cr,Object.assign({},e,{previewMode:"text"}))]}))};var Tr=n(26929),Ir=n(6488);function Or(e){const{cell:t,tableStyles:n,cellProps:a}=e;let s="";return t.value instanceof Ir.Z?s=(new Tr.Z).writeGeometry(t.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):null!=t.value&&(s=`${t.value}`),(0,B.jsx)("div",Object.assign({},a,{className:n.cellContainer,children:(0,B.jsx)("div",{className:n.cellText,style:{fontFamily:"monospace"},children:s})}))}const Nr=e=>{var t;const{field:n,cell:a,tableStyles:s,row:i,cellProps:r}=e,o=n.display(a.value),l=Boolean(null===(t=(0,Rs.iu)(n,i))||void 0===t?void 0:t.length);return(0,B.jsxs)("div",Object.assign({},r,{className:s.cellContainer,children:[!l&&(0,B.jsx)("img",{src:o.text,className:s.imageCell}),l&&(0,B.jsx)(xr,{links:()=>(0,Rs.iu)(n,i)||[],children:e=>(0,B.jsx)("div",{onClick:e.openMenu,className:(0,M.cx)(s.imageCellLink,e.targetClassName),children:(0,B.jsx)("img",{src:o.text,className:s.imageCell})})})]}))};function Fr(e){var t,n;const{cell:a,tableStyles:s,cellProps:i,field:r,row:o}=e,l=Boolean(null===(t=r.config.custom)||void 0===t?void 0:t.inspect),d=M.css`
    cursor: pointer;
    font-family: monospace;
  `;let c=a.value,u=c;if((0,J.isString)(c))try{c=JSON.parse(c)}catch{}else u=JSON.stringify(c,null," ");const h=Boolean(null===(n=(0,Rs.iu)(r,o))||void 0===n?void 0:n.length);return(0,B.jsxs)("div",Object.assign({},i,{className:l?s.cellContainerNoOverflow:s.cellContainer,children:[(0,B.jsxs)("div",{className:(0,M.cx)(s.cellText,d),children:[!h&&(0,B.jsx)("div",{className:s.cellText,children:u}),h&&(0,B.jsx)(xr,{links:()=>(0,Rs.iu)(r,o)||[],children:e=>(0,B.jsx)("div",{onClick:e.openMenu,className:e.targetClassName,children:u})})]}),l&&(0,B.jsx)(Cr,Object.assign({},e,{previewMode:"code"}))]}))}function Dr(e){if(!e)return"flex-start";if(e.config.custom){switch(e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}}return e.type===tt.FieldType.number?"flex-end":"flex-start"}function Pr(e,t){switch(e){case yr.h2.ColorText:case yr.h2.ColorBackground:return kr;case yr.h2.Image:return Nr;case yr.h2.LcdGauge:case yr.h2.BasicGauge:case yr.h2.GradientGauge:return jr;case yr.h2.JSONView:return Fr}return t.type===tt.FieldType.geo?Or:t.type===tt.FieldType.other?Fr:kr}function Ar(e){return function(t,n,a){return 0===t.length?t:a&&e?t.filter((t=>{if(!t.values.hasOwnProperty(n))return!1;const s=Mr(t,e);return void 0!==a.find((e=>e.value===s))})):t}}function Mr(e,t){if(!t||!e)return"";const n=t.values.get(e.index),a=t.display?t.display(n):n;return t.display?(0,tt.formattedValueToString)(a):a}function Rr(e,t){return void 0===e.label&&void 0===t.label?0:void 0===e.label&&void 0!==t.label?-1:void 0!==e.label&&void 0===t.label?1:e.label<t.label?-1:e.label>t.label?1:0}function $r(e,t,n){return String(e.values[n]).localeCompare(String(t.values[n]),void 0,{sensitivity:"base"})}function Lr(e,t,n){const a=Er(e.values[n]),s=Er(t.values[n]);return a===s?0:a>s?1:-1}function Er(e){return null==e||""===e||isNaN(e)?Number.NEGATIVE_INFINITY:"number"==typeof e?e:Number(e)}const Vr=e=>{let{column:{preFilteredRows:t,filterValue:n,setFilter:a},onClose:s,field:i}=e;const r=(0,ie.l4)(),o=(0,R.useMemo)((()=>function(e,t){if(!t||0===e.length)return{};const n={};for(let a=0;a<e.length;a++){const s=Mr(e[a],t);n[s||"(Blanks)"]=s}return n}(t,i)),[t,i]),l=(0,R.useMemo)((()=>{return e=o,Object.keys(e).reduce(((t,n)=>t.concat({value:e[n],label:n})),[]).sort(Rr);var e}),[o]),d=(0,R.useMemo)((()=>function(e,t){return t?e.filter((e=>t.some((t=>t.value===e.value)))):[]}(l,n)),[l,n]),[c,u]=(0,R.useState)(d),[h,p]=(0,R.useState)(!1),g=(0,R.useCallback)((e=>s()),[s]),m=(0,R.useCallback)((e=>{const t=c.length?c:void 0;a(t),s()}),[a,c,s]),f=(0,R.useCallback)((e=>{a(void 0),s()}),[a,s]),v=(0,R.useMemo)((()=>void 0!==n),[n]),b=(0,ie.yK)(Br);return(0,B.jsx)(Mt.L,{onClick:g,useCapture:!0,children:(0,B.jsx)("div",{className:(0,M.cx)(b.filterContainer),onClick:zr,children:(0,B.jsxs)(Js.wc,{spacing:"lg",children:[(0,B.jsxs)(Js.wc,{spacing:"xs",children:[(0,B.jsxs)(Js.Lh,{justify:"space-between",align:"center",children:[(0,B.jsx)(Bh._,{className:b.label,children:"Filter by values:"}),(0,B.jsx)(se.h,{name:"text-fields",tooltip:"Match case",style:{color:h?r.colors.text.link:r.colors.text.disabled},onClick:()=>{p((e=>!e))}})]}),(0,B.jsx)("div",{className:(0,M.cx)(b.listDivider)}),(0,B.jsx)(Xi,{onChange:u,values:c,options:l,caseSensitive:h})]}),(0,B.jsxs)(Js.Lh,{spacing:"lg",children:[(0,B.jsxs)(Js.Lh,{children:[(0,B.jsx)(re.zx,{size:"sm",onClick:m,children:"Ok"}),(0,B.jsx)(re.zx,{size:"sm",variant:"secondary",onClick:g,children:"Cancel"})]}),v&&(0,B.jsx)(Js.Lh,{children:(0,B.jsx)(re.zx,{fill:"text",size:"sm",onClick:f,children:"Clear filter"})})]})]})})})},Br=(0,ie.Bb)((e=>({filterContainer:M.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${e.colors.bg1};
    border: ${e.border.width.sm} solid ${e.colors.border2};
    padding: ${e.spacing.md};
    margin: ${e.spacing.sm} 0;
    box-shadow: 0px 0px 20px ${e.colors.dropdownShadow};
    border-radius: ${e.spacing.xs};
  `,listDivider:M.css`
    label: listDivider;
    width: 100%;
    border-top: ${e.border.width.sm} solid ${e.colors.border2};
    padding: ${e.spacing.xs} ${e.spacing.md};
  `,label:M.css`
    margin-bottom: 0;
  `}))),zr=e=>{e.stopPropagation()};var _r;const Ur=e=>{var t;let{column:n,field:a,tableStyles:s}=e;const i=(0,R.useRef)(null),[r,o]=(0,R.useState)(!1),l=(0,ie.yK)(Hr),d=(0,R.useMemo)((()=>Boolean(n.filterValue)),[n.filterValue]),c=(0,R.useCallback)((()=>o(!0)),[o]),u=(0,R.useCallback)((()=>o(!1)),[o]);return a&&null!==(t=a.config.custom)&&void 0!==t&&t.filterable?(0,B.jsxs)("span",{className:(0,M.cx)(s.headerFilter,d?l.filterIconEnabled:l.filterIconDisabled),ref:i,role:"filterIcon",onClick:c,children:[_r||(_r=(0,B.jsx)(E.J,{name:"filter"})),r&&i.current&&(0,B.jsx)(xe,{content:(0,B.jsx)(Vr,{column:n,tableStyles:s,field:a,onClose:u}),placement:"bottom-start",referenceElement:i.current,show:!0})]}):null},Hr=(0,ie.Bb)((e=>({filterIconEnabled:M.css`
    label: filterIconEnabled;
    color: ${e.colors.textBlue};
  `,filterIconDisabled:M.css`
    label: filterIconDisabled;
    color: ${e.colors.textFaint};
  `})));var Wr,qr;const Zr=["key"];const Gr=e=>{const{headerGroups:t,showTypeIcons:n}=e,a=Wt.wl.components.Panels.Visualization.Table,s=(0,ie.wW)(Zi.V);return(0,B.jsx)("div",{role:"rowgroup",children:t.map((e=>{const t=e.getHeaderGroupProps(),{key:i}=t,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,Zr);return(0,R.createElement)("div",Object.assign({className:s.thead},r,{key:i,"aria-label":a.header,role:"row"}),e.headers.map(((e,t)=>function(e,t,n){var a;const s=e.getHeaderProps(),i=null!==(a=e.field)&&void 0!==a?a:null;e.canResize&&(s.style.userSelect=e.isResizing?"none":"auto");return s.style.position="absolute",s.style.justifyContent=e.justifyContent,(0,B.jsxs)("div",Object.assign({className:t.headerCell},s,{role:"columnheader",children:[e.canSort&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("button",Object.assign({},e.getSortByToggleProps(),{className:t.headerCellLabel,children:[n&&(0,B.jsx)(E.J,{name:(0,Yi.e7)(i),title:null==i?void 0:i.type,size:"sm",className:t.typeIcon}),(0,B.jsx)("div",{children:e.render("Header")}),(0,B.jsx)("div",{children:e.isSorted&&(e.isSortedDesc?Wr||(Wr=(0,B.jsx)(E.J,{name:"arrow-down"})):qr||(qr=(0,B.jsx)(E.J,{name:"arrow-up"})))})]})),e.canFilter&&(0,B.jsx)(Ur,{column:e,tableStyles:t,field:i})]}),!e.canSort&&e.render("Header"),!e.canSort&&e.canFilter&&(0,B.jsx)(Ur,{column:e,tableStyles:t,field:i}),e.canResize&&(0,B.jsx)("div",Object.assign({},e.getResizerProps(),{className:t.resizeHandle}))]}))}(e,s,n))))}))})};var Kr=n(40936);const Qr=150;function Jr(e,t){const n={};if(e){n.sortBy=[];for(const a of e)for(const e of t)e.Header===a.displayName&&n.sortBy.push({id:e.id,desc:a.desc})}return n}const Yr=(0,R.memo)((e=>{const{ariaLabel:t,data:n,height:a,onCellFilterAdded:s,width:i,columnMinWidth:r=Qr,noHeader:o,resizable:l=!0,initialSortBy:d,footerValues:c,showTypeIcons:u,enablePagination:h}=e,p=(0,R.useRef)(null),g=(0,ie.wW)(Zi.V),m=o?0:g.cellHeight,f=(0,R.useMemo)((()=>{let e=0;if(!c)return 0;for(const t of c)Array.isArray(t)&&t.length>e&&(e=t.length);return e>1?33*e:33}),[c]),v=(0,R.useMemo)((()=>n.fields.length?Array(n.length).fill(0):[]),[n]),b=(0,R.useMemo)((()=>function(e,t,n,a){const s=[];let i=0;for(const[o,l]of e.fields.entries()){var r;const d=l.config.custom||{};if(d.hidden)continue;d.width?t-=d.width:i++;const c=e=>{switch(e){case tt.FieldType.number:return"number";case tt.FieldType.time:return"basic";default:return"alphanumeric-insensitive"}},u=Pr(d.displayMode,l);s.push({Cell:u,id:o.toString(),field:l,Header:(0,tt.getFieldDisplayName)(l,e),accessor:(e,t)=>l.values.get(t),sortType:c(l.type),width:d.width,minWidth:null!==(r=d.minWidth)&&void 0!==r?r:n,filter:(0,Me.Z)(Ar(l)),justifyContent:Dr(l),Footer:Qi(o,a)})}let o=t/i;for(let e=i;e>0;e--)for(const e of s)!e.width&&e.minWidth>o&&(e.width=e.minWidth,i-=1,o=(t-=e.width)/i);for(const e of s)e.width||(e.width=o),e.minWidth=50;return s}(n,i,r,c)),[n,i,r,c]),x=function(e){let{onColumnResize:t,onSortByChange:n,data:a}=e;return(0,R.useCallback)(((e,s)=>{switch(s.type){case"columnDoneResizing":if(t){const n=e.columnResizing.headerIdWidths[0][0],s=parseInt(n,10),i=Math.round(e.columnResizing.columnWidths[n]),r=a.fields[s];if(!r)return e;const o=(0,tt.getFieldDisplayName)(r,a);t(o,i)}case"toggleSortBy":if(n){const t=[];for(const n of e.sortBy){const e=a.fields[parseInt(n.id,10)];e&&t.push({displayName:(0,tt.getFieldDisplayName)(e,a),desc:n.desc})}n(t)}}return e}),[a,t,n])}(e),y=(0,R.useMemo)((()=>({columns:b,data:v,disableResizing:!l,stateReducer:x,initialState:Jr(d,b),autoResetFilters:!1,sortTypes:{number:Lr,"alphanumeric-insensitive":$r}})),[d,b,v,l,x]),{getTableProps:w,headerGroups:j,rows:S,prepareRow:C,totalColumnsWidth:k,footerGroups:T,page:I,state:O,gotoPage:N,setPageSize:F,pageOptions:D}=(0,Hi.useTable)(y,Hi.useFilters,Hi.useSortBy,Hi.usePagination,Hi.useAbsoluteLayout,Hi.useResizeColumns);let P=a-(m+f);h&&(P-=g.cellHeight);const A=Math.round(P/g.cellHeight)-1;(0,R.useEffect)((()=>{A<=0||F(A)}),[A,F]);const M=R.useCallback((e=>{let{index:t,style:n}=e,a=S[t];return h&&(a=I[t]),C(a),(0,B.jsx)("div",Object.assign({},a.getRowProps({style:n}),{className:g.row,children:a.cells.map(((e,t)=>(0,B.jsx)(Kr.p,{tableStyles:g,cell:e,onCellFilterAdded:s,columnIndex:t,columnCount:a.cells.length},t)))}))}),[s,I,h,C,S,g]),$=(0,R.useCallback)((e=>{N(e-1)}),[N]),L=h?I.length:S.length;let E=null;if(h){const e=O.pageIndex*O.pageSize+1;let t=e+O.pageSize-1;const a=i<550;t>n.length&&(t=n.length),E=(0,B.jsxs)("div",{className:g.paginationWrapper,children:[a?null:(0,B.jsx)("div",{className:g.paginationItem}),(0,B.jsx)("div",{className:g.paginationCenterItem,children:(0,B.jsx)(_s,{currentPage:O.pageIndex+1,numberOfPages:D.length,showSmallVersion:a,onNavigate:$})}),a?null:(0,B.jsxs)("div",{className:g.paginationSummary,children:[e," - ",t," of ",n.length," rows"]})]})}return(0,B.jsxs)("div",Object.assign({},w(),{className:g.table,"aria-label":t,role:"table",children:[(0,B.jsx)(ye.$,{onScroll:e=>{const{scrollTop:t}=e.target;null!==p.current&&p.current.scrollTo(t)},children:(0,B.jsxs)("div",{className:g.tableContentWrapper(k),children:[!o&&(0,B.jsx)(Gr,{headerGroups:j,showTypeIcons:u}),L>0?(0,B.jsx)(Wi.t7,{height:P,itemCount:L,itemSize:g.rowHeight,width:"100%",ref:p,style:{overflow:void 0},children:M}):(0,B.jsx)("div",{style:{height:a-m},className:g.noData,children:"No data"}),c&&(0,B.jsx)(Ki,{height:f,isPaginationVisible:Boolean(h),footerValues:c,footerGroups:T,totalColumnsWidth:k})]})}),E]}))}));Yr.displayName="Table";const Xr=["invalid","className"];const eo=R.forwardRef(((e,t)=>{let{invalid:n,className:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Xr);const i=(0,ie.l4)(),r=to(i,n);return(0,B.jsx)("textarea",Object.assign({},s,{className:(0,M.cx)(r.textarea,a),ref:t}))})),to=(0,ie.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{textarea:(0,M.cx)((0,us.RK)(e),(0,us.GL)(e.v1),M.css`
        border-radius: ${e.shape.borderRadius()};
        padding: ${e.spacing.gridSize/4}px ${e.spacing.gridSize}px;
        width: 100%;
        border-color: ${t?e.colors.error.border:e.components.input.borderColor};
      `)}}));var no;function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}eo.displayName="TextArea";class so extends R.PureComponent{constructor(e){super(e),ao(this,"readCSV",(0,J.debounce)((()=>{const{config:e}=this.props,{text:t}=this.state;this.setState({data:(0,tt.readCSV)(t,{config:e})})}),150)),ao(this,"onTextChange",(e=>{this.setState({text:e.target.value})}));const{text:t,config:n}=e;this.state={text:t,data:(0,tt.readCSV)(t,{config:n})}}componentDidUpdate(e,t){const{text:n}=this.state;n===t.text&&this.props.config===e.config||this.readCSV(),this.props.text!==e.text&&this.props.text!==n&&this.setState({text:this.props.text}),this.state.data!==t.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:e,height:t,theme:n}=this.props,{data:a}=this.state,s=ro(n);return(0,B.jsxs)("div",{className:s.tableInputCsv,children:[(0,B.jsx)(eo,{style:{width:e,height:t},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:s.textarea}),a&&(0,B.jsx)("footer",{className:s.footer,children:a.map(((e,t)=>(0,B.jsxs)("span",{children:["Rows:",e.length,", Columns:",e.fields.length," Â ",no||(no=(0,B.jsx)(E.J,{name:"check-circle"}))]},t)))})]})}}const io=(0,ie.Zz)(so);io.displayName="TableInputCSV";const ro=(0,ie.Bb)((e=>({tableInputCsv:M.css`
      position: relative;
    `,textarea:M.css`
      height: 100%;
      width: 100%;
    `,footer:M.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${e.palette.online};
      padding: 1px ${e.spacing.xs};
      font-size: 80%;
    `})));var oo=n(77443);const lo=["label","active","icon","counter","className","suffix","onChangeTab","href"];const co=R.forwardRef(((e,t)=>{var n,a;let{label:s,active:i,icon:r,counter:o,suffix:l,onChangeTab:d,href:c}=e,u=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,lo);const h=(0,nt.wW)(uo),p=(0,M.cx)(h.link,i&&h.activeStyle);return(0,B.jsx)("li",{className:h.item,children:(0,B.jsx)("a",Object.assign({href:c,className:p},u,{onClick:d,"aria-label":u["aria-label"]||Wt.wl.components.Tab.title(s),role:"tab","aria-selected":i,ref:t,children:(0,B.jsxs)(B.Fragment,{children:[r&&(n||(n=(0,B.jsx)(E.J,{name:r}))),s,"number"==typeof o&&(a||(a=(0,B.jsx)(oo.A,{value:o}))),l&&(0,B.jsx)(l,{className:h.suffix})]})}))})}));co.displayName="Tab";const uo=e=>({item:M.css`
      list-style: none;
      margin-right: ${e.spacing(2)};
      position: relative;
      display: block;
    `,link:M.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;

      color: ${e.colors.text.primary};

      svg {
        margin-right: ${e.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:M.css`
      label: activeTabStyle;
      color: ${e.colors.text.maxContrast};
      font-weight: 500;
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:M.css`
      margin-left: ${e.spacing(1)};
    `}),ho=["children","className"];const po=(0,ie.Bb)((e=>({tabContent:M.css`
      background: ${e.colors.background.primary};
    `}))),go=e=>{let{children:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,ho);const s=(0,ie.l4)(),i=po(s);return(0,B.jsx)("div",Object.assign({},a,{className:(0,M.cx)(i.tabContent,n),children:t}))};var mo=n(97024),fo=n(24731),vo=n(55860),bo=n(55273),xo=n(38007),yo=n(16079),wo=n(85391);function jo(e,t,n){let a=0,s=0,i=0,r=0;return e===So.Down?(s=t.top,r=t.top+t.height):e===So.Left?(a=t.left+t.width,i=t.left):e===So.Up?(s=t.top+t.height,r=t.top):e===So.Right&&(a=t.left,i=t.left+t.width),n.createLinearGradient(a,s,i,r)}let So,Co;function ko(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.scales[t],i=null,r=null;for(let e=0;e<n.length;e++){let t=n[e][0];if((t<=s.min||null==i)&&(i=e),r=e,t>=s.max)break}if(i===r)return n[i][1];let o=n[i][0],l=n[r][0];o===-1/0&&(o=s.min),l===1/0&&(l=s.max);let d,c,u,h,p=Math.round(e.valToPos(o,t,!0)),g=Math.round(e.valToPos(l,t,!0)),m=p-g;if(0===m)return n[r][1];e.scales.x.ori===mo.wN.Horizontal?(d=u=0,c=p,h=g):(c=h=0,d=p,u=g);let f,v=(0,tr.AE)(),b=v.createLinearGradient(d,c,u,h);for(let s=i;s<=r;s++){let o=n[s],l=(p-(s===i?p:s===r?g:Math.round(e.valToPos(o[0],t,!0))))/m;a&&s>i&&b.addColorStop(l,f),b.addColorStop(l,f=o[1])}return b}function To(e,t,n,a,s,i){var r,o;let l=null!==(r=null!=n?n:s)&&void 0!==r?r:null,d=null!==(o=null!=a?a:i)&&void 0!==o?o:null;if(null==l||null==d){var c,u,h,p;let[n,a]=function(e,t){let n=e.scales[t],a=1/0,s=-1/0;return e.series.forEach(((n,i)=>{if(n.show&&n.scale===t)if(null==n.min){let t=e.data[i];for(let e=0;e<t.length;e++)null!=t[e]&&(a=Math.min(a,t[e]),s=Math.max(s,t[e]))}else a=Math.min(a,n.min),s=Math.max(s,n.max)})),s===a&&(a=n.min,s=n.max),[a,s]}(e,t);l=null!==(c=null!==(u=l)&&void 0!==u?u:n)&&void 0!==c?c:0,d=null!==(h=null!==(p=d)&&void 0!==p?p:a)&&void 0!==h?h:100}return[l,d]}function Io(e,t,n,a,s,i,r,o){if(!n)throw Error("Missing colorMode required for color scheme gradients");if(!a)throw Error("Missing thresholds required for color scheme gradients");return(l,d)=>{let c=l.series[d].scale,u="";if(n.id===tt.FieldColorModeId.Thresholds)if(a.mode===tt.ThresholdsMode.Absolute){u=ko(l,c,a.steps.map((n=>[n.value,tt.colorManipulator.alpha(t.visualization.getColorByName(n.color),e)])),!0)}else{const[n,d]=To(l,c,s,i,r,o),h=d-n;u=ko(l,c,a.steps.map((a=>[n+h*(a.value/100),tt.colorManipulator.alpha(t.visualization.getColorByName(a.color),e)])),!0)}else if(n.getColors){const a=n.getColors(t),[d,h]=To(l,c,s,i,r,o),p=h-d;u=ko(l,c,a.map(((n,s)=>[d+p*(s/(a.length-1)),tt.colorManipulator.alpha(t.visualization.getColorByName(n),e)])),!1)}return u}}!function(e){e[e.Right=0]="Right",e[e.Up=1]="Up",e[e.Left=2]="Left",e[e.Down=3]="Down"}(So||(So={}));class Oo extends wo.L{getConfig(){const{facets:e,drawStyle:t,pathBuilder:n,pointsBuilder:a,pointsFilter:s,lineInterpolation:i,lineWidth:r,lineStyle:o,barAlignment:l,barWidthFactor:d,barMaxWidth:c,showPoints:u,pointSize:h,scaleKey:p,pxAlign:g,spanNulls:m,show:f=!0}=this.props;let v={},b=this.getLineColor();if(v.stroke=b,null!=n)v.paths=n,v.width=r;else if(t===mo.l8.Points)v.paths=()=>null;else if(null!=t){var x;if(v.width=r,o&&"solid"!==o.fill)"dot"===o.fill&&(v.cap="round"),v.dash=null!==(x=o.dash)&&void 0!==x?x:[10,10];v.paths=(e,n,a,s)=>{let r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:200;const i=vo.Z.paths;Co||(Co={linear:i.linear(),smooth:i.spline(),stepBefore:i.stepped({align:-1}),stepAfter:i.stepped({align:1})});if(e===mo.l8.Bars){let e=`bars|${n}|${a}|${s}`;return Co[e]||(Co[e]=i.bars({size:[a,s],align:n})),Co[e]}if(e===mo.l8.Line){if(t===mo.KC.StepBefore)return Co.stepBefore;if(t===mo.KC.StepAfter)return Co.stepAfter;if(t===mo.KC.Smooth)return Co.smooth}return Co.linear}(t,i,l,d,c);return r(e,n,a,s)}}const y="string"==typeof b?b:(e,t)=>e.series[t]._stroke,w={points:{stroke:y,fill:y,size:!h||h<r?void 0:h,filter:s}};return null!=a?w.points.show=a:t===mo.l8.Points?w.points.show=!0:u===mo.Jp.Auto?t===mo.l8.Bars&&(w.points.show=!1):u===mo.Jp.Never?w.points.show=!1:u===mo.Jp.Always&&(w.points.show=!0),Object.assign({scale:p,facets:e,spanGaps:"number"!=typeof m&&m,value:()=>"",pxAlign:g,show:f,fill:this.getFill()},v,w)}getLineColor(){const{lineColor:e,gradientMode:t,colorMode:n,thresholds:a,theme:s,hardMin:i,hardMax:r,softMin:o,softMax:l,dynamicSeriesColor:d}=this.props;return t===mo.FI.None&&d?(t,n)=>{var a,s;return null!==(a=null!==(s=d(n))&&void 0!==s?s:e)&&void 0!==a?a:tt.FALLBACK_COLOR}:t===mo.FI.Scheme&&(null==n?void 0:n.id)!==tt.FieldColorModeId.Fixed?Io(1,s,n,a,i,r,o,l):null!=e?e:tt.FALLBACK_COLOR}getFill(){const{lineColor:e,fillColor:t,gradientMode:n,fillOpacity:a,colorMode:s,thresholds:i,theme:r,hardMin:o,hardMax:l,softMin:d,softMax:c,dynamicSeriesColor:u}=this.props;if(t)return t;const h=null!=n?n:mo.FI.None,p=(null!=a?a:0)/100;if(h===mo.FI.None&&u&&p>0)return(e,t)=>{let n=e.series[t]._stroke;return tt.colorManipulator.alpha(null!=n?n:"",p)};switch(h){case mo.FI.Opacity:return g=null!=t?t:e,m=p,(e,t)=>{const n=(0,tr.AE)(),a=jo(e.scales.x.ori===mo.wN.Horizontal?So.Down:So.Left,e.bbox,n);return a.addColorStop(0,tt.colorManipulator.alpha(g,m)),a.addColorStop(1,tt.colorManipulator.alpha(g,0)),a};case mo.FI.Hue:return function(e,t,n){return(a,s)=>{const i=(0,tr.AE)(),r=jo(a.scales.x.ori===mo.wN.Horizontal?So.Down:So.Left,a.bbox,i),o=pt()(e).spin(-15),l=pt()(e).spin(15);return n.isDark?(r.addColorStop(0,l.lighten(10).setAlpha(t).toString()),r.addColorStop(1,o.darken(10).setAlpha(t).toString())):(r.addColorStop(0,l.lighten(10).setAlpha(t).toString()),r.addColorStop(1,o.setAlpha(t).toString())),r}}(null!=t?t:e,p,r);case mo.FI.Scheme:if((null==s?void 0:s.id)!==tt.FieldColorModeId.Fixed)return Io(p,r,s,i,o,l,d,c);default:if(p>0)return tt.colorManipulator.alpha(null!=e?e:"",p)}var g,m}}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fo={drag:{setScale:!1},points:{size:(e,t)=>2*e.series[t].points.size,width:(e,t,n)=>n/4},focus:{prox:30}};class Do{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt.DefaultTimeZone;No(this,"series",[]),No(this,"axes",{}),No(this,"scales",[]),No(this,"bands",[]),No(this,"stackingGroups",[]),No(this,"cursor",void 0),No(this,"select",void 0),No(this,"hasLeftAxis",!1),No(this,"hooks",{}),No(this,"tz",void 0),No(this,"sync",!1),No(this,"mode",1),No(this,"frames",void 0),No(this,"thresholds",{}),No(this,"tooltipInterpolator",void 0),No(this,"padding",void 0),No(this,"prepData",void 0),No(this,"scaleKeys",["",""]),No(this,"tzDate",(e=>{let t=new Date(e);return this.tz?vo.Z.tzDate(t,this.tz):t})),this.tz=null===(e=(0,tt.getTimeZoneInfo)(t,Date.now()))||void 0===e?void 0:e.ianaName}addHook(e,t){(0,bo.Zp)("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",function(e){function t(e,t,n,a,s,i){let r=e.ctx,o=0;for(let e=0;e<t.length;e++)if("transparent"===t[e].color){o=e;break}r.lineWidth=2;for(let l=1;l<t.length;l++){const d=t[l];let c;c=o>=l&&l>0?pt()(n.visualization.getColorByName(t[l-1].color)):pt()(n.visualization.getColorByName(d.color)),1===c.getAlpha()&&c.setAlpha(.7);let u=Math.round(e.valToPos(a,"x",!0)),h=Math.round(e.valToPos(d.value,i,!0)),p=Math.round(e.valToPos(s,"x",!0)),g=Math.round(e.valToPos(d.value,i,!0));r.beginPath(),r.moveTo(u,h),r.lineTo(p,g),r.strokeStyle=c.toString(),r.stroke()}}function n(e,t,n){let a=e.ctx,s=ko(e,e.series[1].scale,t.map((e=>{let t=pt()(n.visualization.getColorByName(e.color));return 1===t.getAlpha()&&t.setAlpha(.15),[e.value,t.toString()]})),!0);a.fillStyle=s,a.fillRect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height)}const{scaleKey:a,thresholds:s,theme:i,config:r,hardMin:o,hardMax:l,softMin:d,softMax:c}=e;return e=>{const u=e.ctx,{min:h,max:p}=e.scales.x,{min:g,max:m}=e.scales[a];if(null==h||null==p||null==g||null==m)return;let{steps:f,mode:v}=s;if(v===tt.ThresholdsMode.Percentage){let[t,n]=To(e,a,o,l,d,c),s=n-t;f=f.map((e=>Object.assign({},e,{value:t+s*(e.value/100)})))}switch(u.save(),r.mode){case mo.i3.Line:t(e,f,i,h,p,a);break;case mo.i3.Area:n(e,f,i);break;case mo.i3.LineAndArea:n(e,f,i),t(e,f,i,h,p,a)}u.restore()}}(e)))}addAxis(e){var t,n;e.placement=null!==(t=e.placement)&&void 0!==t?t:mo.LB.Auto,e.grid=null!==(n=e.grid)&&void 0!==n?n:{};let a=e.scaleKey;var s;"x"===a&&(a+=null!==(s=e.timeZone)&&void 0!==s?s:"");this.axes[a]?this.axes[a].merge(e):(e.placement===mo.LB.Auto&&(e.placement=this.hasLeftAxis?mo.LB.Right:mo.LB.Left),e.placement===mo.LB.Left&&(this.hasLeftAxis=!0),e.placement===mo.LB.Hidden&&(e.grid.show=!1,e.size=0),this.axes[a]=new xo.ff(e))}getAxisPlacement(e){var t;const n=this.axes[e];return null!==(t=null==n?void 0:n.props.placement)&&void 0!==t?t:mo.LB.Left}setCursor(e){this.cursor=(0,J.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new Oo(e))}getSeries(){return this.series}addScale(e){const t=this.scales.find((t=>t.props.scaleKey===e.scaleKey));t?t.merge(e):this.scales.push(new yo.I(e))}addBand(e){this.bands.push(e)}setStackingGroups(e){this.stackingGroups=e}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=t=>(this.frames=t,e(t,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){var e=this;const t=Object.assign({},bo.qt,{mode:this.mode,series:[2===this.mode?null:{value:()=>""}]});t.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map((e=>e.getConfig())),t.series=[...t.series,...this.series.map((e=>e.getConfig()))],t.scales=this.scales.reduce(((e,t)=>Object.assign({},e,t.getConfig())),{}),t.hooks=this.hooks,t.select=this.select;const n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(n,a)=>{let s=n.series[a].points._stroke;if("string"!=typeof s){let t=e.frames[0].fields[a];s=t.display(t.values.get(n.cursor.idxs[a])).color}return s+t}};return t.cursor=(0,J.merge)({},Fo,{points:{stroke:n("80"),fill:n()}},this.cursor),t.tzDate=this.tzDate,Array.isArray(this.padding)&&(t.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach((e=>{(0,bo.Kq)(e).forEach((e=>{this.addBand(e)}))})),this.bands.length&&(t.bands=this.bands),t}ensureNonOverlappingAxes(e){const t=e.find((e=>"x"===e.props.scaleKey)),n=e.filter((e=>{var t;return void 0===(null===(t=e.props.grid)||void 0===t?void 0:t.show)})),a=n.findIndex((e=>e.props.placement===mo.LB.Left||e.props.placement===mo.LB.Bottom&&e!==t));for(let e=0;e<n.length;e++)n[e]===t||e===a?n[e].props.grid.show=!0:n[e].props.grid.show=!1;return e}}var Po=n(72710);function Ao(e,t){var n;const a=e.y.values.length,s=Object.assign({},e.y.config,t);return(0,Po.w)({frame:{refId:"sparkline",fields:[null!==(n=e.x)&&void 0!==n?n:tt.IndexVector.newField(a),Object.assign({},e.y,{config:s})],length:a}})}const Mo={drawStyle:mo.l8.Line,showPoints:mo.Jp.Auto,axisPlacement:mo.LB.Hidden};class Ro extends R.PureComponent{constructor(e){super(e);const t=Ao(e.sparkline,e.config);this.state={data:(0,bo.Bj)(t,(0,bo.i7)(t)),alignedDataFrame:t,configBuilder:this.prepareConfig(t)}}static getDerivedStateFromProps(e,t){const n=Ao(e.sparkline,e.config);return n?Object.assign({},t,{data:(0,bo.Bj)(n,(0,bo.i7)(n)),alignedDataFrame:n}):Object.assign({},t)}componentDidUpdate(e,t){const{alignedDataFrame:n}=this.state;if(!n)return;let a=!1;a=e.sparkline!==this.props.sparkline?!(0,tt.compareDataFrameStructures)(this.state.alignedDataFrame,t.alignedDataFrame):!(0,J.isEqual)(e.config,this.props.config),a&&this.setState({configBuilder:this.prepareConfig(n)})}getYRange(e){var t,n,a;let{min:s,max:i}=null===(t=this.state.alignedDataFrame.fields[1].state)||void 0===t?void 0:t.range;return s===i?(0===s?i=100:(s=0,i*=2),[s,i]):[Math.max(s,null!==(n=e.config.min)&&void 0!==n?n:-1/0),Math.min(i,null!==(a=e.config.max)&&void 0!==a?a:1/0)]}prepareConfig(e){const{theme:t}=this.props,n=new Do;n.setCursor({show:!1,x:!1,y:!1});const a=e.fields[0];n.addScale({scaleKey:"x",orientation:mo.wN.Horizontal,direction:mo.bQ.Right,isTime:!1,range:()=>{const{sparkline:e}=this.props;if(e.x){if(e.timeRange&&e.x.type===tt.FieldType.time)return[e.timeRange.from.valueOf(),e.timeRange.to.valueOf()];const t=e.x.values;return[t.get(0),t.get(t.length-1)]}return[0,e.y.values.length-1]}}),n.addAxis({scaleKey:"x",theme:t,placement:mo.LB.Hidden});for(let r=0;r<e.fields.length;r++){var s,i;const o=e.fields[r],l=o.config,d=Object.assign({},Mo,l.custom);if(o===a||o.type!==tt.FieldType.number)continue;const c=l.unit||"__fixed";n.addScale({scaleKey:c,orientation:mo.wN.Vertical,direction:mo.bQ.Up,range:()=>this.getYRange(o)}),n.addAxis({scaleKey:c,theme:t,placement:mo.LB.Hidden});const u=(0,tt.getFieldColorModeForField)(o).getCalculator(o,t)(0,0),h=d.drawStyle===mo.l8.Points?mo.Jp.Always:d.showPoints;n.addSeries({pxAlign:!1,scaleKey:c,theme:t,drawStyle:d.drawStyle,lineColor:null!==(s=d.lineColor)&&void 0!==s?s:u,lineWidth:d.lineWidth,lineInterpolation:d.lineInterpolation,showPoints:h,pointSize:d.pointSize,fillOpacity:d.fillOpacity,fillColor:null!==(i=d.fillColor)&&void 0!==i?i:u})}return n}render(){const{data:e,configBuilder:t}=this.state,{width:n,height:a,sparkline:s}=this.props;return(0,B.jsx)(fo.N,{data:e,config:t,width:n,height:a,timeRange:s.timeRange})}}function $o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Lo=1.2;class Eo{constructor(e){var t;$o(this,"titleFontSize",void 0),$o(this,"valueFontSize",void 0),$o(this,"chartHeight",void 0),$o(this,"chartWidth",void 0),$o(this,"valueColor",void 0),$o(this,"panelPadding",void 0),$o(this,"justifyCenter",void 0),$o(this,"titleToAlignTo",void 0),$o(this,"valueToAlignTo",void 0),$o(this,"maxTextWidth",void 0),$o(this,"maxTextHeight",void 0),$o(this,"textValues",void 0),this.props=e;const{width:n,height:a,value:s,text:i}=e;this.valueColor=null!==(t=s.color)&&void 0!==t?t:"gray",this.panelPadding=a>100?12:8,this.textValues=function(e){const{value:t,alignmentFactors:n,count:a}=e;let{textMode:s}=e;const i=n?n.title:t.title,r=(0,tt.formattedValueToString)(n||t);s===qo.Auto&&1===(null!=a?a:1)&&(s=qo.Value);switch(s){case qo.Name:return Object.assign({},t,{title:void 0,prefix:void 0,suffix:void 0,text:t.title||"",titleToAlignTo:void 0,valueToAlignTo:null!=i?i:"",tooltip:(0,tt.formattedValueToString)(t)});case qo.Value:return Object.assign({},t,{title:void 0,titleToAlignTo:void 0,valueToAlignTo:r,tooltip:t.title});case qo.None:return{numeric:t.numeric,color:t.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${t.title}\nValue: ${(0,tt.formattedValueToString)(t)}`};case qo.ValueAndName:default:return Object.assign({},t,{titleToAlignTo:i,valueToAlignTo:r})}}(e),this.justifyCenter=function(e,t){if(e===Wo.Center)return!0;return 0===(null!=t?t:"").length}(e.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=n-2*this.panelPadding,this.maxTextHeight=a-2*this.panelPadding,i&&(i.titleSize&&(this.titleFontSize=i.titleSize,this.titleToAlignTo=void 0),i.valueSize&&(this.valueFontSize=i.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const e={fontSize:`${this.titleFontSize}px`,lineHeight:Lo};return this.props.colorMode===Uo.Background&&(e.color=(0,Rs.Gc)(this.valueColor)),e}getValueStyles(){const e={fontSize:this.valueFontSize,fontWeight:500,lineHeight:Lo,position:"relative",zIndex:1};switch(this.justifyCenter&&(e.textAlign="center"),this.props.colorMode){case Uo.Value:e.color=this.valueColor;break;case Uo.Background:e.color=(0,Rs.Gc)(this.valueColor);break;case Uo.None:e.color=this.props.theme.colors.text.primary}return e}getValueAndTitleContainerStyles(){const e={display:"flex"};return this.justifyCenter&&(e.alignItems="center",e.justifyContent="center",e.flexGrow=1),e}getPanelStyles(){const{width:e,height:t,theme:n,colorMode:a}=this.props,s={width:`${e}px`,height:`${t}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},i=n.isDark?1:-.7;switch(a){case Uo.Background:const e=pt()(this.valueColor).darken(15*i).spin(8).toRgbString(),t=pt()(this.valueColor).darken(5*i).spin(-8).toRgbString();s.background=`linear-gradient(120deg, ${e}, ${t})`;break;case Uo.Value:s.background="transparent"}return this.justifyCenter&&(s.alignItems="center",s.flexDirection="row"),s}renderChart(){var e;const{sparkline:t,colorMode:n}=this.props;if(!t||(null===(e=t.y)||void 0===e?void 0:e.type)!==tt.FieldType.number)return null;let a,s;switch(n){case Uo.Background:a="rgba(255,255,255,0.4)",s=pt()(this.valueColor).brighten(40).toRgbString();break;case Uo.None:case Uo.Value:default:s=this.valueColor,a=pt()(this.valueColor).setAlpha(.2).toRgbString()}const i={custom:{drawStyle:mo.l8.Line,lineWidth:1,fillColor:a,lineColor:s}};return(0,B.jsx)("div",{style:this.getChartStyles(),children:(0,B.jsx)(Ro,{height:this.chartHeight,width:this.chartWidth,sparkline:t,config:i,theme:this.props.theme})})}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class Vo extends Eo{constructor(e){var t,n;super(e);const a=null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,tr.MX)(this.valueToAlignTo,this.maxTextWidth*a,this.maxTextHeight,Lo)),null!==(n=this.titleToAlignTo)&&void 0!==n&&n.length&&(this.titleFontSize=(0,tr.MX)(this.titleToAlignTo,.6*this.maxTextWidth,this.maxTextHeight,Lo,30),this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.alignItems="center",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}renderChart(){return null}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}class Bo extends Eo{constructor(e){var t;super(e);const{width:n,height:a}=e;this.chartWidth=n,this.chartHeight=.5*a,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,tr.MX)(this.titleToAlignTo,.6*this.maxTextWidth,.4*this.maxTextHeight,Lo,30)),this.valueToAlignTo.length&&(this.valueFontSize=(0,tr.MX)(this.valueToAlignTo,.4*this.maxTextWidth,.5*this.maxTextHeight,Lo))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="row",e.justifyContent="space-between",e}}class zo extends Eo{constructor(e){var t,n;super(e);const{width:a,height:s}=e;let i=0;this.chartHeight=.25*s,this.chartWidth=a,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,tr.MX)(this.titleToAlignTo,this.maxTextWidth,.15*s,Lo,30),i=this.titleFontSize*Lo),this.valueToAlignTo.length&&(this.valueFontSize=(0,tr.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-i,Lo)),null!==(n=this.titleToAlignTo)&&void 0!==n&&n.length&&(this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize)),this.chartHeight=s-this.titleFontSize*Lo-this.valueFontSize*Lo}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.justifyContent="center",e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="column",e}}class _o extends Eo{constructor(e){var t,n;super(e);const{height:a}=e;let s=0;null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,tr.MX)(this.titleToAlignTo,this.maxTextWidth,.15*a,Lo,30),s=this.titleFontSize*Lo),this.valueToAlignTo.length&&(this.valueFontSize=(0,tr.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-s,Lo)),null!==(n=this.titleToAlignTo)&&void 0!==n&&n.length&&(this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.flexGrow=1,e}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}let Uo,Ho,Wo,qo;!function(e){e.Value="value",e.Background="background",e.None="none"}(Uo||(Uo={})),function(e){e.None="none",e.Line="line",e.Area="area"}(Ho||(Ho={})),function(e){e.Auto="auto",e.Center="center"}(Wo||(Wo={})),function(e){e.Auto="auto",e.Value="value",e.ValueAndName="value_and_name",e.Name="name",e.None="none"}(qo||(qo={}));class Zo extends R.PureComponent{render(){const{onClick:e,className:t,hasLinks:n}=this.props,a=function(e){const{width:t,height:n,sparkline:a}=e;return t/n>2.5?n>50&&a&&a.y.values.length>1?new Bo(e):new Vo(e):n>100&&a&&a.y.values.length>1?new zo(e):new _o(e)}(this.props),s=a.getPanelStyles(),i=a.getValueAndTitleContainerStyles(),r=a.getValueStyles(),o=a.getTitleStyles(),l=a.textValues,d=n?void 0:l.tooltip;return(0,B.jsxs)("div",{className:t,style:s,onClick:e,title:d,children:[(0,B.jsxs)("div",{style:i,children:[l.title&&(0,B.jsx)("div",{style:o,children:l.title}),(0,B.jsx)(ar,{value:l,style:r})]}),a.renderChart()]})}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zo,"defaultProps",{justifyMode:Wo.Auto});var Go=n(98572),Ko=n.n(Go);const Qo={mode:tt.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function Jo(e,t,n){const a=null!=n,s=Math.min(.15*e/1.5,20),i=a?t-1.5*s:t;return{showLabel:a,gaugeHeight:Math.min(i,e),titleFontSize:s}}function Yo(e,t,n,a){var s,i,r,o,l,d;if((null===(s=t.color)||void 0===s?void 0:s.mode)!==tt.FieldColorModeId.Thresholds)return[{value:null!==(l=t.min)&&void 0!==l?l:tt.GAUGE_DEFAULT_MINIMUM,color:null!==(d=n.color)&&void 0!==d?d:tt.FALLBACK_COLOR}];const c=null!==(i=t.thresholds)&&void 0!==i?i:Qo,u=c.mode===tt.ThresholdsMode.Percentage,h=c.steps;let p=null!==(r=t.min)&&void 0!==r?r:tt.GAUGE_DEFAULT_MINIMUM,g=null!==(o=t.max)&&void 0!==o?o:tt.GAUGE_DEFAULT_MAXIMUM;u&&(p=0,g=100);const m=(0,tt.getActiveThreshold)(p,h),f=(0,tt.getActiveThreshold)(g,h),v=[{value:+p.toFixed(e),color:a.visualization.getColorByName(m.color)}];let b=!0;for(let e=0;e<h.length;e++){const t=h[e];if(b){m===t&&(b=!1);continue}const n=h[e-1];if(v.push({value:t.value,color:a.visualization.getColorByName(n.color)}),t===f)break}return v.push({value:+g.toFixed(e),color:a.visualization.getColorByName(f.color)}),v}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class el extends R.PureComponent{constructor(){super(...arguments),Xo(this,"canvasElement",void 0),Xo(this,"renderVisualization",(()=>{var e;const{width:t,value:n,height:a,onClick:s,text:i}=this.props,r=Jo(t,a,n.title);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{style:{height:`${r.gaugeHeight}px`,width:"100%"},ref:e=>this.canvasElement=e,onClick:s}),r.showLabel&&(0,B.jsx)("div",{style:{textAlign:"center",fontSize:null!==(e=null==i?void 0:i.titleSize)&&void 0!==e?e:r.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"},children:n.title})]})}))}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){var e,t,n,a,s;const{field:i,showThresholdLabels:r,showThresholdMarkers:o,width:l,height:d,theme:c,value:u}=this.props,h=Jo(l,d,u.title),p=Math.min(l,h.gaugeHeight),g=c.colors.bg2,m=r?1.5:1,f=Math.min(p/5.5,40)/m,v=f/5,b=(0,tt.formattedValueToString)(u),x=.9*Math.min(l,1.3*p)-(2*(f+(o?v:0)+(r?10:0))+10),y=null!==(e=null===(t=this.props.text)||void 0===t?void 0:t.valueSize)&&void 0!==e?e:(0,tr.MX)(b,x,p,1,1.7*f),w=Math.max(y/2.5,12);let j=null!==(n=i.min)&&void 0!==n?n:tt.GAUGE_DEFAULT_MINIMUM,S=null!==(a=i.max)&&void 0!==a?a:tt.GAUGE_DEFAULT_MAXIMUM,C=u.numeric;(null===(s=i.thresholds)||void 0===s?void 0:s.mode)===tt.ThresholdsMode.Percentage&&(j=0,S=100,C=void 0===u.percent?(C-j)/(S-j)*100:100*u.percent);const k=void 0===i.decimals?2:i.decimals;o&&(j=+j.toFixed(k),S=+S.toFixed(k));const T={series:{gauges:{gauge:{min:j,max:S,background:{color:g},border:{color:null},shadow:{show:!1},width:f},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:Yo(k,i,u,c),label:{show:r,margin:v+1,font:{size:w}},show:o,width:v},value:{color:u.color,formatter:()=>b,font:{size:y,family:c.typography.fontFamily.sansSerif}},show:!0}}},I={data:[[0,C]],label:u.title};try{Ko().plot(this.canvasElement,[I],T)}catch(e){console.error("Gauge rendering error",e,T,u)}}render(){return(0,B.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className,children:this.renderVisualization()})}}Xo(el,"defaultProps",{showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:Qo}});var tl=n(39016),nl=n(9513);const al=["getContextMenuSource","timeZone","itemsGroup","dimensions","contextDimensions"];const sl=e=>{let{getContextMenuSource:t,timeZone:n,itemsGroup:a,dimensions:s,contextDimensions:i}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,al);const o=t(),l=a?a.map((e=>{var t;return Object.assign({},e,{items:null===(t=e.items)||void 0===t?void 0:t.filter((e=>e.label))})})):[];return(0,B.jsx)(vr,Object.assign({},r,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,B.jsx)(Qt,{label:e.label,children:(e.items||[]).map((e=>(0,B.jsx)(sn,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},`${e.label}`)))},`${e.label}${t}`))),renderHeader:()=>{var e;if(!o)return null;let t;if(null!=s&&s.yAxis&&null!=i&&null!==(e=i.yAxis)&&void 0!==e&&e[1]){const e=(0,tt.getValueFromDimension)(s.yAxis,i.yAxis[0],i.yAxis[1]);t=(0,o.series.valueField.display)(e)}const a=(0,tt.dateTimeFormat)(o.datapoint[0],{defaultWithMS:o.series.hasMsResolution,timeZone:n});return(0,B.jsx)(il,{timestamp:a,seriesColor:o.series.color,displayName:o.series.alias||o.series.label,displayValue:t})}}))},il=e=>{let{timestamp:t,seriesColor:n,displayName:a,displayValue:s}=e;const i=(0,ie.Fg)();return(0,B.jsxs)("div",{className:M.css`
        padding: ${i.spacing.xs} ${i.spacing.sm};
        font-size: ${i.typography.size.sm};
        z-index: ${i.zIndex.tooltip};
      `,children:[(0,B.jsx)("strong",{children:t}),(0,B.jsxs)(Js.Lh,{children:[(0,B.jsxs)("div",{children:[(0,B.jsx)(nl.F,{color:n}),(0,B.jsx)("span",{className:M.css`
              white-space: nowrap;
              padding-left: ${i.spacing.xs};
            `,children:a})]}),s&&(0,B.jsx)(ar,{value:s})]})]})},rl=(e,t)=>{let n,a=0,s=e.values.length-1;for(;;){if(a>s)return Math.max(s,0);n=Math.floor((a+s)/2);const i=e.values.get(n);if(i===t)return n;i&&i<t?a=n+1:s=n-1}},ol=(e,t)=>{var n,a;return(0,tt.dateTimeFormat)(e,{format:null==t||null===(n=t.options)||void 0===n?void 0:n.timeformat,timeZone:null==t||null===(a=t.options)||void 0===a?void 0:a.timezone})},ll=(e,t,n)=>{if(t&&n&&e){const a=n-t,s=a/e/1e3,i=86400010,r=31536e6;return s<=10?tt.systemDateFormats.interval.millisecond:s<=45?tt.systemDateFormats.interval.second:a<=i?tt.systemDateFormats.interval.minute:s<=8e4?tt.systemDateFormats.interval.hour:a<=r?tt.systemDateFormats.interval.day:s<=31536e3?tt.systemDateFormats.interval.month:tt.systemDateFormats.interval.year}return tt.systemDateFormats.interval.minute},dl=e=>{let{dimensions:t,activeDimensions:n,pos:a,timeZone:s}=e,i=null;if(null===n.xAxis)return null;n.yAxis&&(i=n.yAxis[0]);const r=n.xAxis[1]?(0,tt.getValueFromDimension)(t.xAxis,n.xAxis[0],n.xAxis[1]):a.x,o=((e,t,n,a)=>{let s,i,r,o,l;const d=[];let c,u;for(s=0;s<e.length;s++){i=e[s];const a=t[s];r=rl(a,n),o=n-a.values.get(r),l=a.values.get(r),(void 0===c||o>=0&&(o<c||c<0)||o<0&&o>c)&&(c=o,u=a.display?(0,tt.formattedValueToString)(a.display(l)):l);const h=i.display(i.values.get(r));d.push({value:(0,tt.formattedValueToString)(h),datapointIndex:r,seriesIndex:s,color:h.color,label:(0,tt.getFieldDisplayName)(i),time:a.display?(0,tt.formattedValueToString)(a.display(l)):l})}return{results:d,time:u}})(t.yAxis.columns,t.xAxis.columns,r),l=o.time,d=o.results.map(((e,t)=>({color:e.color,label:e.label,value:e.value,isActive:i===t})));return(0,B.jsx)(tl.cS,{series:d,timestamp:l})};dl.displayName="MultiModeGraphTooltip";const cl=e=>{let{dimensions:t,activeDimensions:n,timeZone:a}=e;if(null===n.yAxis||void 0===n.yAxis[1]||null===n.xAxis||void 0===n.xAxis[1])return null;const s=(0,tt.getValueFromDimension)(t.xAxis,n.xAxis[0],n.xAxis[1]),i=(0,tt.getColumnFromDimension)(t.xAxis,n.xAxis[0]),r=i.display?(0,tt.formattedValueToString)(i.display(s)):s,o=(0,tt.getColumnFromDimension)(t.yAxis,n.yAxis[0]),l=(0,tt.getValueFromDimension)(t.yAxis,n.yAxis[0],n.yAxis[1]),d=(0,o.display)(l);return(0,B.jsx)(tl.cS,{series:[{color:d.color,label:(0,tt.getFieldDisplayName)(o),value:(0,tt.formattedValueToString)(d)}],timestamp:r})};cl.displayName="SingleModeGraphTooltip";const ul=e=>{let{mode:t="single",dimensions:n,activeDimensions:a,pos:s,timeZone:i}=e;return a&&a.xAxis?"single"===t?(0,B.jsx)(cl,{dimensions:n,activeDimensions:a,timeZone:i}):(0,B.jsx)(dl,{dimensions:n,activeDimensions:a,pos:s,timeZone:i}):null};var hl;function pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ul.displayName="GraphTooltip";class gl extends R.PureComponent{constructor(){super(...arguments),pl(this,"state",{isTooltipVisible:!1,isContextVisible:!1}),pl(this,"element",null),pl(this,"$element",void 0),pl(this,"onPlotSelected",((e,t)=>{const{onHorizontalRegionSelected:n}=this.props;n&&n(t.xaxis.from,t.xaxis.to)})),pl(this,"onPlotHover",((e,t,n)=>{this.setState({isTooltipVisible:!0,activeItem:n,pos:t})})),pl(this,"onPlotClick",((e,t,n)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:n,contextPos:t})})),pl(this,"renderTooltip",(()=>{const{children:e,series:t,timeZone:n}=this.props,{pos:a,activeItem:s,isTooltipVisible:i}=this.state;let r=null;if(!i||!a||0===t.length)return null;if(R.Children.forEach(e,(e=>{if(r)return;(e&&e.type&&(e.type.displayName||e.type.name))===tl.I5.displayName&&(r=e)})),!r)return null;const o=r.props,l=o.mode||"single";if(!s&&"single"===l)return null;const d=o.tooltipComponent||ul,c={xAxis:[s?s.series.seriesIndex:0,s?s.dataIndex:void 0],yAxis:s?[s.series.seriesIndex,s.dataIndex]:null},u={dimensions:{xAxis:(0,tt.createDimension)("xAxis",t.map((e=>e.timeField))),yAxis:(0,tt.createDimension)("yAxis",t.map((e=>e.valueField)))},activeDimensions:c,pos:a,mode:o.mode||mo.f3.Single,timeZone:n},h=R.createElement(d,Object.assign({},u));return R.cloneElement(r,{content:h,position:{x:a.pageX,y:a.pageY},offset:{x:10,y:10}})})),pl(this,"renderContextMenu",(()=>{const{series:e}=this.props,{contextPos:t,contextItem:n,isContextVisible:a}=this.state;if(!a||!t||!n||0===e.length)return null;const s={xAxis:[n?n.series.seriesIndex:0,n?n.dataIndex:void 0],yAxis:n?[n.series.seriesIndex,n.dataIndex]:null},i={xAxis:(0,tt.createDimension)("xAxis",e.map((e=>e.timeField))),yAxis:(0,tt.createDimension)("yAxis",e.map((e=>e.valueField)))},r={x:t.pageX,y:t.pageY,onClose:()=>this.setState({isContextVisible:!1}),getContextMenuSource:()=>({datapoint:n.datapoint,dataIndex:n.dataIndex,series:n.series,seriesIndex:n.series.seriesIndex,pageX:t.pageX,pageY:t.pageY}),timeZone:this.props.timeZone,dimensions:i,contextDimensions:s};return(0,B.jsx)(sl,Object.assign({},r))})),pl(this,"getBarWidth",(()=>{const{series:e}=this.props;return Math.min(...e.map((e=>e.timeStep)))}))}componentDidUpdate(e,t){e!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=Ko()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(e){return 0===e.length?[{show:!0,min:-1,max:1}]:(0,J.uniqBy)(e.map((e=>{const t=e.yAxis?e.yAxis.index:1;return{show:!0,index:t,position:1===t?"left":"right",min:e.yAxis&&!isNaN(e.yAxis.min)?e.yAxis.min:null,tickDecimals:e.yAxis&&!isNaN(e.yAxis.tickDecimals)?e.yAxis.tickDecimals:null}})),(e=>e.index))}draw(){if(null===this.element)return;const{width:e,series:t,timeRange:n,showLines:a,showBars:s,showPoints:i,isStacked:r,lineWidth:o,timeZone:l,onHorizontalRegionSelected:d}=this.props;if(!e)return;const c=e/100,u=n.from.valueOf(),h=n.to.valueOf(),p=this.getYAxes(t),g={legend:{show:!1},series:{stack:r,lines:{show:a,lineWidth:o,zero:!1},points:{show:i,fill:1,fillColor:!1,radius:2},bars:{show:s,fill:1,barWidth:s?this.getBarWidth()/1.5:1,zero:!1,lineWidth:o},shadowSize:0},xaxis:{timezone:l,show:!0,mode:"time",min:u,max:h,label:"Datetime",ticks:c,timeformat:ll(c,u,h),tickFormatter:ol},yaxes:p,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:d?"x":null,color:"#666"},crosshair:{mode:"x"}};try{Ko().plot(this.element,t.filter((e=>e.isVisible)),g)}catch(e){throw console.error("Graph rendering error",e,g,t),new Error("Error rendering panel")}}render(){const{ariaLabel:e,height:t,width:n,series:a}=this.props,s=0===a.length,i=this.renderTooltip(),r=this.renderContextMenu();return(0,B.jsxs)("div",{className:"graph-panel","aria-label":e,children:[(0,B.jsx)("div",{className:"graph-panel__chart",ref:e=>this.element=e,style:{height:t,width:n},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),s&&(hl||(hl=(0,B.jsx)("div",{className:"datapoints-warning",children:"No data"}))),i,r]})}}pl(gl,"defaultProps",{showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1});const ml=e=>{let{error:t,onClick:n}=e;const a=(0,ie.yK)(fl);return t?(0,B.jsx)(Y.u,{theme:"error",content:t,children:(0,B.jsx)(E.J,{onClick:n,className:(0,M.cx)(a.icon,{[a.clickable]:!!n}),size:"sm",name:"exclamation-triangle"})}):null},fl=e=>({clickable:M.css`
      cursor: pointer;
    `,icon:M.css`
      color: ${e.palette.red88};
    `});var vl=n(84276);const bl=e=>{let{title:t="",children:n,width:a,height:s,padding:i="md",leftItems:r=[]}=e;const o=(0,ie.l4)(),l=(0,ie.wW)(jl),d=yl(o,t,r),{contentStyle:c,innerWidth:u,innerHeight:h}=wl(i,o,a,d,s),p={height:d},g={width:a,height:s};return(0,B.jsxs)("div",{className:l.container,style:g,children:[(0,B.jsxs)("div",{className:l.header,style:p,children:[(0,B.jsx)("div",{className:l.headerTitle,children:t}),xl(r,(e=>(0,B.jsx)("div",{className:l.leftItems,children:e})))]}),(0,B.jsx)("div",{className:l.content,style:c,children:n(u,h)})]})},xl=(e,t)=>{const n=R.Children.toArray(e).filter(Boolean);return n.length>0?t(n):null},yl=(e,t,n)=>t.length>0||n.length>0?e.spacing.gridSize*e.components.panel.headerHeight:0,wl=(e,t,n,a,s)=>{const i=("md"===e?t.components.panel.padding:0)*t.spacing.gridSize;return{contentStyle:{padding:i},innerWidth:n-2*i-2,innerHeight:s-a-2*i-2}},jl=e=>{const{padding:t,background:n,borderColor:a}=e.components.panel;return{container:M.css`
      label: panel-container;
      background-color: ${n};
      border: 1px solid ${a};
      position: relative;
      border-radius: 3px;
      height: 100%;
      display: flex;
      flex-direction: column;
      flex: 0 0 0;
    `,content:M.css`
      label: panel-content;
      width: 100%;
      flex-grow: 1;
    `,header:M.css`
      label: panel-header;
      display: flex;
      align-items: center;
    `,headerTitle:M.css`
      label: panel-header;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      padding-left: ${e.spacing(t)};
      flex-grow: 1;
      font-weight: ${e.typography.fontWeightMedium};
    `,leftItems:M.css`
      display: flex;
      padding-right: ${e.spacing(t)};
    `}};var Sl=n(16712);let Cl;!function(e){e.ToggleSelection="select",e.AppendToSelection="append"}(Cl||(Cl={}));const kl=bl;kl.LoadingIndicator=vl.T,kl.ErrorIndicator=ml;var Tl=n(48662);class Il extends R.PureComponent{render(){return(0,B.jsx)(Tl.L,Object.assign({inline:!0},this.props))}}const Ol=e=>{let{seriesName:t,color:n,gradient:a,readonly:s}=e;const{onSeriesColorChange:i}=(0,Sl.R9)(),r=(0,R.useCallback)((e=>i(t,e)),[t,i]);return t&&i&&n&&!s?(0,B.jsx)(Pt,{color:n,onChange:r,enableNamedColors:!0,children:e=>{let{ref:t,showColorPicker:a,hideColorPicker:s}=e;return(0,B.jsx)(nl.F,{color:n,className:"pointer",ref:t,onClick:a,onMouseLeave:s})}}):(0,B.jsx)(nl.F,{color:n,gradient:a})};Ol.displayName="VizLegendSeriesIcon";const Nl=e=>{let{stats:t}=e;const n=(0,nt.yK)(Fl);return 0===t.length?null:(0,B.jsx)(Il,{className:n.list,items:t,renderItem:e=>(0,B.jsxs)("div",{className:n.item,title:e.description,children:[e.title&&`${(0,J.capitalize)(e.title)}:`," ",(0,tt.formattedValueToString)(e)]})})},Fl=()=>({list:M.css`
    flex-grow: 1;
    text-align: right;
  `,item:M.css`
    margin-left: 8px;
  `});Nl.displayName="VizLegendStatsList";const Dl=e=>{let{item:t,onLabelClick:n,onLabelMouseEnter:a,onLabelMouseOut:s,className:i,readonly:r}=e;const o=(0,ie.yK)(Pl),l=(0,R.useCallback)((e=>{a&&a(t,e)}),[t,a]),d=(0,R.useCallback)((e=>{s&&s(t,e)}),[t,s]),c=(0,R.useCallback)((e=>{n&&n(t,e)}),[t,n]);return(0,B.jsxs)("div",{className:(0,M.cx)(o.itemWrapper,t.disabled&&o.itemDisabled,i),"aria-label":Wt.wl.components.VizLegend.seriesName(t.label),children:[(0,B.jsx)(Ol,{seriesName:t.label,color:t.color,gradient:t.gradient,readonly:r}),(0,B.jsx)("div",{onMouseEnter:l,onMouseOut:d,onClick:r?void 0:c,className:(0,M.cx)(o.label,!r&&o.clickable),children:t.label}),t.getDisplayValues&&(0,B.jsx)(Nl,{stats:t.getDisplayValues()})]})};Dl.displayName="VizLegendListItem";const Pl=e=>({label:M.css`
    label: LegendLabel;
    white-space: nowrap;
  `,clickable:M.css`
    label: LegendClickabel;
    cursor: pointer;
  `,itemDisabled:M.css`
    label: LegendLabelDisabled;
    color: ${e.colors.linkDisabled};
  `,itemWrapper:M.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:M.css`
    text-align: right;
  `,yAxisLabel:M.css`
    color: ${e.palette.gray2};
  `}),Al=e=>{let{items:t,itemRenderer:n,onLabelMouseEnter:a,onLabelMouseOut:s,onLabelClick:i,placement:r,className:o,readonly:l}=e;const d=(0,ie.yK)(Ml);n||(n=e=>(0,B.jsx)(Dl,{item:e,onLabelClick:i,onLabelMouseEnter:a,onLabelMouseOut:s,readonly:l}));const c=e=>`${e.getItemKey?e.getItemKey():e.label}`;if("right"===r){const e=(e,t)=>(0,B.jsx)("span",{className:d.itemRight,children:n(e,t)});return(0,B.jsx)("div",{className:(0,M.cx)(d.rightWrapper,o),children:(0,B.jsx)(Ms.a,{items:t,renderItem:e,getItemKey:c})})}{const e=(e,t)=>(0,B.jsx)("span",{className:d.itemBottom,children:n(e,t)});return(0,B.jsxs)("div",{className:(0,M.cx)(d.bottomWrapper,o),children:[(0,B.jsx)("div",{className:d.section,children:(0,B.jsx)(Il,{items:t.filter((e=>1===e.yAxis)),renderItem:e,getItemKey:c})}),(0,B.jsx)("div",{className:(0,M.cx)(d.section,d.sectionRight),children:(0,B.jsx)(Il,{items:t.filter((e=>1!==e.yAxis)),renderItem:e,getItemKey:c})})]})}};Al.displayName="VizLegendList";const Ml=e=>{const t=M.css`
    padding-right: 10px;
    display: flex;
    font-size: ${e.typography.size.sm};
    white-space: nowrap;
  `;return{itemBottom:t,itemRight:(0,M.cx)(t,M.css`
        margin-bottom: ${e.spacing.xs};
      `),rightWrapper:M.css`
      padding-left: ${e.spacing.sm};
    `,bottomWrapper:M.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${e.spacing.md};
    `,section:M.css`
      display: flex;
    `,sectionRight:M.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}},Rl=e=>{let{item:t,onLabelClick:n,onLabelMouseEnter:a,onLabelMouseOut:s,className:i,readonly:r}=e;const o=(0,nt.wW)($l),l=(0,R.useCallback)((e=>{a&&a(t,e)}),[t,a]),d=(0,R.useCallback)((e=>{s&&s(t,e)}),[t,s]),c=(0,R.useCallback)((e=>{n&&n(t,e)}),[t,n]);return(0,B.jsxs)("tr",{className:(0,M.cx)(o.row,i),children:[(0,B.jsx)("td",{children:(0,B.jsxs)("span",{className:o.itemWrapper,children:[(0,B.jsx)(Ol,{color:t.color,seriesName:t.label,readonly:r}),(0,B.jsxs)("div",{onMouseEnter:l,onMouseOut:d,onClick:r?void 0:c,className:(0,M.cx)(o.label,t.disabled&&o.labelDisabled,!r&&o.clickable),children:[t.label," ",2===t.yAxis&&(0,B.jsx)("span",{className:o.yAxisLabel,children:"(right y-axis)"})]})]})}),t.getDisplayValues&&t.getDisplayValues().map(((e,t)=>(0,B.jsx)("td",{className:o.value,children:(0,tt.formattedValueToString)(e)},`${e.title}-${t}`)))]})};Rl.displayName="LegendTableItem";const $l=e=>{const t=ie.GU.hoverColor(e.colors.background.primary,e);return{row:M.css`
      label: LegendRow;
      font-size: ${e.v1.typography.size.sm};
      border-bottom: 1px solid ${e.colors.border.weak};
      td {
        padding: ${e.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${t};
      }
    `,label:M.css`
      label: LegendLabel;
      white-space: nowrap;
    `,labelDisabled:M.css`
      label: LegendLabelDisabled;
      color: ${e.colors.text.disabled};
    `,clickable:M.css`
      label: LegendClickable;
      cursor: pointer;
    `,itemWrapper:M.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:M.css`
      text-align: right;
    `,yAxisLabel:M.css`
      color: ${e.colors.text.secondary};
    `}};var Ll;const El=e=>{let{items:t,sortBy:n,sortDesc:a,itemRenderer:s,className:i,onToggleSort:r,onLabelClick:o,onLabelMouseEnter:l,onLabelMouseOut:d,readonly:c}=e;const u=(0,nt.wW)(Vl),h={};for(const e of t)if(e.getDisplayValues)for(const t of e.getDisplayValues()){var p;h[null!==(p=t.title)&&void 0!==p?p:"?"]=t}const g=n?(0,J.orderBy)(t,(e=>{if(e.getDisplayValues){const t=e.getDisplayValues().filter((e=>e.title===n))[0];return t&&t.numeric}}),a?"desc":"asc"):t;return s||(s=(e,t)=>(0,B.jsx)(Rl,{item:e,onLabelClick:o,onLabelMouseEnter:l,onLabelMouseOut:d,readonly:c},`${e.label}-${t}`)),(0,B.jsxs)("table",{className:(0,M.cx)(u.table,i),children:[(0,B.jsx)("thead",{children:(0,B.jsxs)("tr",{children:[Ll||(Ll=(0,B.jsx)("th",{})),Object.keys(h).map((e=>{const t=h[e];return(0,B.jsxs)("th",{title:t.description,className:(0,M.cx)(u.header,r&&u.headerSortable,{[u.withIcon]:n===e}),onClick:()=>{r&&r(e)},children:[e,n===e&&(0,B.jsx)(E.J,{size:"xs",name:a?"angle-down":"angle-up"})]},e)}))]})}),(0,B.jsx)("tbody",{children:g.map(s)})]})},Vl=e=>({table:M.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${e.colors.border.weak};
    }
  `,header:M.css`
    color: ${e.colors.primary.text};
    font-weight: ${e.typography.fontWeightMedium};
    border-bottom: 1px solid ${e.colors.border.weak};
    padding: ${e.spacing(.25,1,.25,1)};
    font-size: ${e.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:M.css`
    padding-right: 4px;
  `,headerSortable:M.css`
    cursor: pointer;
  `});let Bl;function zl(e){let{items:t,displayMode:n,sortBy:a,seriesVisibilityChangeBehavior:s=Bl.Isolate,sortDesc:i,onLabelClick:r,onToggleSort:o,placement:l,className:d,itemRenderer:c,readonly:u}=e;const{eventBus:h,onToggleSeriesVisibility:p,onToggleLegendSort:g}=(0,Sl.R9)(),m=(0,R.useCallback)(((e,t)=>{null==h||h.publish({type:tt.DataHoverEvent.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[h]),f=(0,R.useCallback)(((e,t)=>{null==h||h.publish({type:tt.DataHoverClearEvent.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[h]),v=(0,R.useCallback)(((e,t)=>{r&&r(e,t),p&&p(e.label,s===Bl.Hide?Cl.AppendToSelection:function(e){return e.ctrlKey||e.metaKey||e.shiftKey?Cl.AppendToSelection:Cl.ToggleSelection}(t))}),[p,r,s]);switch(n){case mo.jK.Table:return(0,B.jsx)(El,{className:d,items:t,placement:l,sortBy:a,sortDesc:i,onLabelClick:v,onToggleSort:o||g,onLabelMouseEnter:m,onLabelMouseOut:f,itemRenderer:c,readonly:u});case mo.jK.List:return(0,B.jsx)(Al,{className:d,items:t,placement:l,onLabelMouseEnter:m,onLabelMouseOut:f,onLabelClick:v,itemRenderer:c,readonly:u});default:return null}}!function(e){e[e.Isolate=0]="Isolate",e[e.Hide=1]="Hide"}(Bl||(Bl={})),zl.displayName="Legend";const _l=(0,ie.Bb)((e=>{let{placement:t}=e;return{wrapper:M.css`
    display: flex;
    flex-direction: ${"bottom"===t?"column":"row"};
  `,graphContainer:M.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:M.css`
    padding: 10px 0;
    max-height: ${"bottom"===t?"35%":"none"};
  `}})),Ul=e=>{const{series:t,timeRange:n,width:a,height:s,showBars:i,showLines:r,showPoints:o,sortLegendBy:l,sortLegendDesc:d,legendDisplayMode:c,legendVisibility:u,placement:h,onSeriesToggle:p,onToggleSort:g,hideEmpty:m,hideZero:f,isStacked:v,lineWidth:b,onHorizontalRegionSelected:x,timeZone:y,children:w,ariaLabel:j}=e,{graphContainer:S,wrapper:C,legendContainer:k}=_l(e),T=t.reduce(((e,t)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=0===e.reduce(((e,t)=>e+(t[1]||0)),0),s=!e.reduce(((e,t)=>e&&null!==t[1]),!0);return t&&s||n&&a}(t.data,m,f)?e:e.concat([{label:t.label,color:t.color||"",disabled:!t.isVisible,yAxis:t.yAxis.index,getDisplayValues:()=>t.info||[]}])),[]);return(0,B.jsxs)("div",{className:C,"aria-label":j,children:[(0,B.jsx)("div",{className:S,children:(0,B.jsx)(gl,{series:t,timeRange:n,timeZone:y,showLines:r,showPoints:o,showBars:i,width:a,height:s,isStacked:v,lineWidth:b,onHorizontalRegionSelected:x,children:w})}),u&&(0,B.jsx)("div",{className:k,children:(0,B.jsx)(ye.$,{hideHorizontalTrack:!0,children:(0,B.jsx)(zl,{items:T,displayMode:c,placement:h,sortBy:l,sortDesc:d,onLabelClick:(e,t)=>{p&&p(e.label,t)},onToggleSort:g})})})]})};function Hl(e,t,n){const a=Math.ceil(Math.sqrt(n*e/t));return Math.floor(a*t/e)*a<n?t/Math.ceil(a*t/e):e/a}class Wl extends R.PureComponent{constructor(e){super(e),this.state={values:e.getValues()}}componentDidUpdate(e){const{renderCounter:t,source:n}=this.props;t===e.renderCounter&&n===e.source||this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:e,width:t,height:n}=this.props;return e===tt.VizOrientation.Auto?t>n?tt.VizOrientation.Vertical:tt.VizOrientation.Horizontal:e}renderGrid(){const{renderValue:e,height:t,width:n,itemSpacing:a,getAlignmentFactors:s,orientation:i}=this.props,{values:r}=this.state,o=((e,t,n,a)=>{const s=Hl(e,t,a),i=Hl(t,e,a),r=Math.max(s,i);let o=Math.floor(e/r),l=Math.ceil(a/o);o=Math.ceil(a/l);const d=o-(o*l-a);return{width:e/o-n+n/o,height:t/l-n+n/l,widthOnLastRow:e/d-n+n/d,xCount:o,yCount:l}})(n,t,a,r.length),l=s?s(r,o.width,o.height):{};let d=0,c=0,u=[];for(let t=0;t<r.length;t++){const n=r[t],s=c===o.yCount-1?o.widthOnLastRow:o.width,h=o.height,p={position:"absolute",left:d*s+a*d,top:c*h+a*c,width:`${s}px`,height:`${h}px`};u.push((0,B.jsx)("div",{style:p,children:e({value:n,width:s,height:h,alignmentFactors:l,orientation:i,count:r.length})},t)),d++,d===o.xCount&&(d=0,c++)}return(0,B.jsx)("div",{style:{position:"relative"},children:u})}render(){const{renderValue:e,height:t,width:n,itemSpacing:a,getAlignmentFactors:s,autoGrid:i,orientation:r,minVizWidth:o,minVizHeight:l}=this.props,{values:d}=this.state;if(i&&r===tt.VizOrientation.Auto)return this.renderGrid();const c={display:"flex"},u={display:"flex",overflow:`${o?"auto":"hidden"} ${l?"auto":"hidden"}`};let h=t,p=n,g=this.getOrientation();switch(g){case tt.VizOrientation.Horizontal:u.flexDirection="column",u.height=`${t}px`,c.marginBottom=`${a}px`,p=n,h=Math.max(t/d.length-a+a/d.length,null!=l?l:0);break;case tt.VizOrientation.Vertical:u.flexDirection="row",u.justifyContent="space-between",c.marginRight=`${a}px`,h=t,p=Math.max(n/d.length-a+a/d.length,null!=o?o:0)}c.width=`${p}px`,c.height=`${h}px`;const m=s?s(d,p,h):{};return(0,B.jsx)("div",{style:u,children:d.map(((t,n)=>(0,B.jsx)("div",{style:ql(c,n,d.length),children:e({value:t,width:p,height:h,alignmentFactors:m,orientation:g,count:d.length})},n)))})}}function ql(e,t,n){return t===n-1?Object.assign({},e,{marginRight:0,marginBottom:0}):e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wl,"defaultProps",{itemSpacing:8});var Zl=n(84798),Gl=n(47426);class Kl extends R.Component{constructor(e){super(e),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:e.series}}componentDidUpdate(e){const{series:t}=this.props;(0,J.isEqual)(e.series,t)||this.setState({hiddenSeries:[],toggledSeries:t})}onSeriesToggle(e,t){const{series:n,onHiddenSeriesChanged:a}=this.props,{hiddenSeries:s}=this.state;if(t.ctrlKey||t.metaKey||t.shiftKey){const t=s.indexOf(e)>-1?s.filter((t=>t!==e)):s.concat([e]),i=n.map((e=>Object.assign({},e,{isVisible:-1===t.indexOf(e.label)})));return void this.setState({hiddenSeries:t,toggledSeries:i},(()=>a?a(t):void 0))}const i=n.map((e=>e.label)),r=s.length+1===i.length?[]:(0,J.difference)(i,[e]),o=n.map((e=>Object.assign({},e,{isVisible:-1===r.indexOf(e.label)})));this.setState({hiddenSeries:r,toggledSeries:o},(()=>a?a(r):void 0))}render(){const{children:e}=this.props,{toggledSeries:t}=this.state;return e({onSeriesToggle:this.onSeriesToggle,toggledSeries:t})}}const Ql=["isOpen","onToggle"];const Jl=e=>({collapse:M.css`
    label: collapse;
    margin-bottom: ${e.spacing(1)};
  `,collapseBody:M.css`
    label: collapse__body;
    padding: ${e.spacing(e.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:M.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:M.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${e.spacing(.5)};
  `,loaderActive:M.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${e.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:M.css`
    label: collapse__header;
    padding: ${e.spacing(1,2,1,2)};
    display: flex;
    cursor: inherit;
    transition: all 0.1s linear;
    cursor: pointer;
  `,headerCollapsed:M.css`
    label: collapse__header--collapsed;
    padding: ${e.spacing(1,2,1,2)};
  `,headerLabel:M.css`
    label: collapse__header-label;
    font-weight: ${e.typography.fontWeightMedium};
    margin-right: ${e.spacing(1)};
    font-size: ${e.typography.size.md};
  `,icon:M.css`
    label: collapse__icon;
    margin: ${e.spacing(0,1,0,-1)};
  `}),Yl=e=>{let{isOpen:t,onToggle:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Ql);const[s,i]=(0,R.useState)(t);return(0,B.jsx)(Xl,Object.assign({isOpen:s,collapsible:!0},a,{onToggle:()=>{i(!s),n&&n(!s)}}))},Xl=e=>{let{isOpen:t,label:n,loading:a,collapsible:s,onToggle:i,className:r,children:o}=e;const l=(0,nt.wW)(Jl),d=(0,M.cx)([l.collapse,"panel-container",r]),c=a?(0,M.cx)([l.loader,l.loaderActive]):(0,M.cx)([l.loader]),u=s?(0,M.cx)([l.header]):(0,M.cx)([l.headerCollapsed]);return(0,B.jsxs)("div",{className:d,children:[(0,B.jsxs)("div",{className:u,onClick:()=>{i&&i(!t)},children:[s&&(0,B.jsx)(E.J,{className:l.icon,name:t?"angle-down":"angle-right"}),(0,B.jsx)("div",{className:(0,M.cx)([l.headerLabel]),children:n})]}),t&&(0,B.jsxs)("div",{className:(0,M.cx)([l.collapseBody]),children:[(0,B.jsx)("div",{className:c}),(0,B.jsx)("div",{className:l.bodyContentWrapper,children:o})]})]})};Xl.displayName="Collapse";const ed=e=>{let{label:t,isOpen:n,onToggle:a,className:s,contentClassName:i,children:r,labelId:o,loading:l=!1}=e;const[d,c]=(0,R.useState)(n),u=(0,ie.wW)(td),h=e=>{e.target instanceof HTMLElement&&"A"===e.target.tagName||(e.preventDefault(),e.stopPropagation(),null==a||a(!d),c(!d))},{current:p}=(0,R.useRef)((0,J.uniqueId)()),g=null!=o?o:`collapse-label-${p}`;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{onClick:h,className:(0,M.cx)(u.header,s),children:[(0,B.jsx)("button",{id:`collapse-button-${p}`,className:u.button,onClick:h,"aria-expanded":d&&!l,"aria-controls":`collapse-content-${p}`,"aria-labelledby":g,children:l?(0,B.jsx)(Ke.$,{className:u.spinner}):(0,B.jsx)(E.J,{name:d?"angle-up":"angle-down",className:u.icon})}),(0,B.jsx)("div",{className:u.label,id:`collapse-label-${p}`,children:t})]}),d&&(0,B.jsx)("div",{id:`collapse-content-${p}`,className:(0,M.cx)(u.content,i),children:r})]})},td=e=>({header:(0,M.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:e.typography.size.lg,padding:`${e.spacing(.5)} 0`,"&:focus-within":(0,Yt.getFocusStyles)(e)}),button:(0,M.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,M.css)({color:e.colors.text.secondary}),content:(0,M.css)({padding:`${e.spacing(2)} 0`}),spinner:(0,M.css)({display:"flex",alignItems:"center",width:e.v1.spacing.md}),label:(0,M.css)({display:"flex"})}),nd=["level","lvl","filename"],ad=(0,ie.Bb)((e=>({logsLabels:M.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${e.typography.size.xs};
    `,logsLabel:M.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${e.colors.bg2};
      border-radius: ${e.border.radius};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:M.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `}))),sd=(0,nt.Zz)((e=>{let{labels:t,theme:n}=e;const a=ad(n),s=Object.keys(t).filter((e=>!e.startsWith("_")&&!nd.includes(e)));return 0===s.length?(0,B.jsx)("span",{className:(0,M.cx)([a.logsLabels]),children:(0,B.jsx)("span",{className:(0,M.cx)([a.logsLabel]),children:"(no unique labels)"})}):(0,B.jsx)("span",{className:(0,M.cx)([a.logsLabels]),children:s.sort().map((e=>{const n=t[e];if(!n)return;const s=`${e}: ${n}`;return(0,B.jsx)("span",{className:(0,M.cx)([a.logsLabel]),children:(0,B.jsx)("span",{className:(0,M.cx)([a.logsLabelValue]),title:s,children:n})},e)}))})}));sd.displayName="LogLabels";var id=n(11331);function rd(e){let{link:t,buttonProps:n}=e;return(0,B.jsx)("a",{href:t.href,target:t.target,rel:"noreferrer",onClick:t.onClick?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!t.onClick||(e.preventDefault(),t.onClick(e))}:void 0,children:(0,B.jsx)(re.zx,Object.assign({icon:"external-link-alt",variant:"primary",size:"sm"},n,{children:t.title}))})}const od=e=>({logsStatsRow:M.css`
    label: logs-stats-row;
    margin: ${parseInt(e.spacing.d,10)/1.75}px 0;
  `,logsStatsRowActive:M.css`
    label: logs-stats-row--active;
    color: ${e.colors.textBlue};
    position: relative;
  `,logsStatsRowLabel:M.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:M.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:M.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:M.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:M.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.textFaint};
  `,logsStatsRowInnerBar:M.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.bgBlue1};
  `}),ld=e=>{let{active:t,count:n,proportion:a,value:s}=e;const i=(0,nt.yK)(od),r=`${Math.round(100*a)}%`,o={width:r},l=t?(0,M.cx)([i.logsStatsRow,i.logsStatsRowActive]):(0,M.cx)([i.logsStatsRow]);return(0,B.jsxs)("div",{className:l,children:[(0,B.jsxs)("div",{className:(0,M.cx)([i.logsStatsRowLabel]),children:[(0,B.jsx)("div",{className:(0,M.cx)([i.logsStatsRowValue]),title:s,children:s}),(0,B.jsx)("div",{className:(0,M.cx)([i.logsStatsRowCount]),children:n}),(0,B.jsx)("div",{className:(0,M.cx)([i.logsStatsRowPercent]),children:r})]}),(0,B.jsx)("div",{className:(0,M.cx)([i.logsStatsRowBar]),children:(0,B.jsx)("div",{className:(0,M.cx)([i.logsStatsRowInnerBar]),style:o})})]})};ld.displayName="LogLabelStatsRow";const dd=(0,ie.Bb)((e=>({logsStats:M.css`
      label: logs-stats;
      background: inherit;
      color: ${e.colors.text};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:M.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${e.colors.border2};
      display: flex;
    `,logsStatsTitle:M.css`
      label: logs-stats__title;
      font-weight: ${e.typography.weight.semibold};
      padding-right: ${e.spacing.d};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:M.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:M.css`
      label: logs-stats__body;
      padding: 5px 0;
    `})));class cd extends R.PureComponent{render(){const{label:e,rowCount:t,stats:n,value:a,theme:s,isLabel:i}=this.props,r=dd(s),o=n.slice(0,5);let l=o.find((e=>e.value===a)),d=n.slice(5);const c=!l;c&&(l=d.find((e=>e.value===a)),d=d.filter((e=>e.value!==a)));const u=d.reduce(((e,t)=>e+t.count),0),h=o.reduce(((e,t)=>e+t.count),0)+u,p=u/h;return(0,B.jsxs)("div",{className:r.logsStats,"data-testid":"logLabelStats",children:[(0,B.jsx)("div",{className:r.logsStatsHeader,children:(0,B.jsxs)("div",{className:r.logsStatsTitle,children:[e,": ",h," of ",t," rows have that ",i?"label":"field"]})}),(0,B.jsxs)("div",{className:r.logsStatsBody,children:[o.map((e=>(0,B.jsx)(ld,Object.assign({},e,{active:e.value===a}),e.value))),c&&l&&(0,B.jsx)(ld,Object.assign({},l,{active:!0}),l.value),u>0&&(0,B.jsx)(ld,{count:u,value:"Other",proportion:p},"__OTHERS__")]})]})}}const ud=(0,ie.Zz)(cd);ud.displayName="LogLabelStats";var hd=n(50682);function pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gd extends R.PureComponent{constructor(){super(...arguments),pd(this,"state",{showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1}),pd(this,"showField",(()=>{const{onClickShowDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),pd(this,"hideField",(()=>{const{onClickHideDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),pd(this,"filterLabel",(()=>{const{onClickFilterLabel:e,parsedKey:t,parsedValue:n}=this.props;e&&e(t,n)})),pd(this,"filterOutLabel",(()=>{const{onClickFilterOutLabel:e,parsedKey:t,parsedValue:n}=this.props;e&&e(t,n)})),pd(this,"showStats",(()=>{const{showFieldsStats:e}=this.state;if(!e){const e=this.props.getStats(),t=e?e.reduce(((e,t)=>e+t.count),0):0;this.setState({fieldStats:e,fieldCount:t})}this.toggleFieldsStats()}))}toggleFieldsStats(){this.setState((e=>({showFieldsStats:!e.showFieldsStats})))}hoverValueCopy(){const e=!this.state.mouseOver;this.setState({mouseOver:e})}render(){const{theme:e,parsedKey:t,parsedValue:n,isLabel:a,links:s,showDetectedFields:i,wrapLogMessage:r,onClickShowDetectedField:o,onClickHideDetectedField:l,onClickFilterLabel:d,onClickFilterOutLabel:c}=this.props,{showFieldsStats:u,fieldStats:h,fieldCount:p,mouseOver:g}=this.state,m=(e=>({noHoverBackground:M.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:M.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:M.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:M.css`
      color: ${e.colors.primary.text};
    `,hoverValueCopy:M.css`
      margin: ${e.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: 20px;
      width: 26px;
      height: 26px;
    `,wrapLine:M.css`
      label: wrapLine;
      white-space: pre-wrap;
    `}))(e),f=(0,hd.h)(e),v=o&&l,b=d&&c,x=!a&&i&&i.includes(t)?(0,B.jsx)(se.h,{name:"eye",className:m.showingField,title:"Hide this field",onClick:this.hideField}):(0,B.jsx)(se.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return(0,B.jsxs)("tr",{className:(0,M.cx)(f.logDetailsValue,{[m.noHoverBackground]:u}),children:[(0,B.jsx)("td",{className:f.logsDetailsIcon,children:(0,B.jsx)(se.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})}),b&&a&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("td",{className:f.logsDetailsIcon,children:(0,B.jsx)(se.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})}),(0,B.jsx)("td",{className:f.logsDetailsIcon,children:(0,B.jsx)(se.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel})})]}),v&&!a&&(0,B.jsx)("td",{className:f.logsDetailsIcon,colSpan:2,children:x}),(0,B.jsx)("td",{className:f.logDetailsLabel,children:t}),(0,B.jsxs)("td",{className:(0,M.cx)(m.wordBreakAll,r&&m.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this),children:[n,g&&(0,B.jsx)(De,{getText:()=>n,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:m.hoverValueCopy}),null==s?void 0:s.map((e=>(0,B.jsxs)("span",{children:["Â ",(0,B.jsx)(rd,{link:e})]},e.title))),u&&(0,B.jsx)(ud,{stats:h,label:t,value:n,rowCount:p,isLabel:a})]})]})}}const md=(0,ie.HE)(gd);md.displayName="LogDetailsRow";var fd=n(88121);const vd=(0,Me.Z)(tt.getParser),bd=(0,Me.Z)(((e,t)=>{const n=xd(e.entry),a=[...yd(e,t),...n].reduce(((e,t)=>{const n=t.value.replace(/(^")|("$)/g,""),a=`${t.key}=${n}`;return e[a]?e[a].links=[...e[a].links||[],...t.links||[]]:e[a]=t,e}),{}),s=Object.values(a);return s.sort(wd),s})),xd=(0,Me.Z)((e=>{if(e.length>fd.n)return[];const t=vd(e);if(!t)return[];return t.getFields(e).map((e=>({key:t.getLabelFromField(e),value:t.getValueFromField(e)})))})),yd=(0,Me.Z)(((e,t)=>e.dataFrame.fields.map(((e,t)=>Object.assign({},e,{index:t}))).filter(((t,n)=>!function(e,t,n){var a;if("labels"===e.name&&e.type===tt.FieldType.other)return!0;if("id"===e.name)return!0;if(n.entryFieldIndex===t)return!0;if(null!==(a=e.config.custom)&&void 0!==a&&a.hidden)return!0;if(null==e.values.get(n.rowIndex))return!0;return!1}(t,n,e))).map((n=>{const a=t?t(n,e.rowIndex):[];return{key:n.name,value:n.values.get(e.rowIndex).toString(),links:a,fieldIndex:n.index}}))));function wd(e,t){var n,a,s,i;return null===(n=e.links)||void 0===n||!n.length||null!==(a=t.links)&&void 0!==a&&a.length?null!==(s=e.links)&&void 0!==s&&s.length||null===(i=t.links)||void 0===i||!i.length?e.key>t.key?1:e.key<t.key?-1:0:1:-1}var jd,Sd;function Cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kd extends R.PureComponent{constructor(){super(...arguments),Cd(this,"getParser",(0,Me.Z)(tt.getParser)),Cd(this,"getStatsForDetectedField",(e=>{const t=this.getParser(this.props.row.entry).buildMatcher(e);return(0,tt.calculateFieldStats)(this.props.getRows(),t)}))}render(){const{row:e,theme:t,hasError:n,onClickFilterOutLabel:a,onClickFilterLabel:s,getRows:i,showDuplicates:r,className:o,onClickShowDetectedField:l,onClickHideDetectedField:d,showDetectedFields:c,getFieldLinks:u,wrapLogMessage:h}=this.props,p=(0,hd.h)(t,e.logLevel),g=(e=>({logsRowLevelDetails:M.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:M.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${e.colors.background.primary};
      }
    `}))(t),m=e.labels?e.labels:{},f=Object.keys(m).length>0,v=bd(e,u),b=v&&v.length>0,x=(0,M.cx)(!n&&[p.logsRowLevel,g.logsRowLevelDetails]);return(0,B.jsxs)("tr",{className:(0,M.cx)(o,g.logDetails),children:[r&&(jd||(jd=(0,B.jsx)("td",{}))),(0,B.jsx)("td",{className:x,"aria-label":"Log level"}),(0,B.jsx)("td",{colSpan:4,children:(0,B.jsx)("div",{className:p.logDetailsContainer,children:(0,B.jsx)("table",{className:p.logDetailsTable,children:(0,B.jsxs)("tbody",{children:[f&&(0,B.jsx)("tr",{children:(0,B.jsx)("td",{colSpan:5,className:p.logDetailsHeading,"aria-label":"Log labels",children:"Log labels"})}),Object.keys(m).sort().map((e=>{const t=m[e];return(0,B.jsx)(md,{parsedKey:e,parsedValue:t,isLabel:!0,getStats:()=>(0,tt.calculateLogsLabelStats)(i(),e),onClickFilterOutLabel:a,onClickFilterLabel:s},`${e}=${t}`)})),b&&(0,B.jsx)("tr",{children:(0,B.jsxs)("td",{colSpan:5,className:p.logDetailsHeading,"aria-label":"Detected fields",children:["Detected fields",(0,B.jsx)(Y.u,{content:"Fields that are parsed from log message and detected by Grafana.",children:(0,B.jsx)(E.J,{name:"question-circle",size:"xs",className:M.css`
                            margin-left: 4px;
                          `})})]})}),v.sort().map((t=>{const{key:n,value:a,links:s,fieldIndex:i}=t;return(0,B.jsx)(md,{parsedKey:n,parsedValue:a,links:s,onClickShowDetectedField:l,onClickHideDetectedField:d,getStats:()=>void 0===i?this.getStatsForDetectedField(n):(0,tt.calculateStats)(e.dataFrame.fields[i].values.toArray()),showDetectedFields:c,wrapLogMessage:h},`${n}=${a}`)})),!b&&!f&&(Sd||(Sd=(0,B.jsx)("tr",{children:(0,B.jsx)("td",{colSpan:5,"aria-label":"No details",children:"No details available"})})))]})})})})]})}}const Td=(0,ie.HE)(kd);Td.displayName="LogDetails";var Id=n(66049);const Od=e=>{let{getRowContext:t,row:n,children:a,logsSortOrder:s}=e;const[i,r]=(0,R.useState)(10),[o,l]=(0,R.useState)(null),[d,c]=(0,R.useState)({before:!0,after:!0}),{value:u}=(0,Id.Z)((async()=>await(async(e,t,n,a)=>{const s=[e(t,{limit:n}),e(t,{limit:n+1,direction:"FORWARD"})],i=await Promise.all(s.map((e=>e.catch((e=>e))))),r=i.map((e=>{const n=e;if(!n.data)return[];const s=[];for(let e=0;e<n.data.length;e++){const a=(0,tt.toDataFrame)(n.data[e]),i=new tt.FieldCache(a),r=i.getFieldByName("ts"),o=i.getFieldByName("id");for(let e=0;e<r.values.length;e++){if(o){if(o.values.get(e)===t.uid)continue}else if(parseInt(r.values.get(e),10)===t.timeEpochMs)continue;const n=a.fields.filter((e=>"line"===e.name))[0].values.get(e);s.push(n)}}return a===tt.LogsSortOrder.Ascending?s.reverse():s})),o=i.map((e=>{const t=e;return t.message?t.message:""}));return{data:a===tt.LogsSortOrder.Ascending?r.reverse():r,errors:a===tt.LogsSortOrder.Ascending?o.reverse():o}})(t,n,i,s)),[i]);return(0,R.useEffect)((()=>{u&&l((e=>{let t=!0,n=!0;const a=null==e?void 0:e.data[0],s=null==e?void 0:e.data[1],i=u.data[0],r=u.data[1];return!e||i&&a.length!==i.length||(t=!1),!e||r&&s.length!==r.length||(n=!1),c({before:t,after:n}),u}))}),[u]),a({result:{before:o?o.data[0]:[],after:o?o.data[1]:[]},errors:{before:o?o.errors[0]:void 0,after:o?o.errors[1]:void 0},hasMoreContextRows:d,updateLimit:()=>r(i+10),limit:i})};class Nd extends R.PureComponent{render(){const{row:e,showDetectedFields:t,getFieldLinks:n,wrapLogMessage:a}=this.props,s=bd(e,n),i=a?"":M.css`
          white-space: nowrap;
        `,r=t.map((e=>{const t=s.find((t=>{const{key:n}=t;return n===e}));return t?`${e}=${t.value}`:null})).filter((e=>null!==e)).join(" ");return(0,B.jsx)("td",{className:i,children:r})}}const Fd=(0,ie.Zz)(Nd);function Dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Fd.displayName="LogRowMessageDetectedFields";class Pd extends R.PureComponent{constructor(){super(...arguments),Dd(this,"state",{showContext:!1,showDetails:!1}),Dd(this,"toggleContext",(()=>{this.setState((e=>({showContext:!e.showContext})))})),Dd(this,"toggleDetails",(()=>{this.props.enableLogDetails&&this.setState((e=>({showDetails:!e.showDetails})))}))}renderTimeStamp(e){return(0,tt.dateTimeFormat)(e,{timeZone:this.props.timeZone})}renderLogRow(e,t,n,a){const{getRows:s,onClickFilterLabel:i,onClickFilterOutLabel:r,onClickShowDetectedField:o,onClickHideDetectedField:l,enableLogDetails:d,row:c,showDuplicates:u,showContextToggle:h,showLabels:p,showTime:g,showDetectedFields:m,wrapLogMessage:f,prettifyLogMessage:v,theme:b,getFieldLinks:x,forceEscape:y,onLogRowHover:w}=this.props,{showDetails:j,showContext:S}=this.state,C=(0,hd.h)(b,c.logLevel),k=(e=>({topVerticalAlign:M.css`
      label: topVerticalAlign;
      margin-top: -${e.spacing(.9)};
      margin-left: -${e.spacing(.25)};
    `,detailsOpen:M.css`
      &:hover {
        background-color: ${ie.GU.hoverColor(e.colors.background.primary,e)};
      }
    `,errorLogRow:M.css`
      label: erroredLogRow;
      color: ${e.colors.text.secondary};
    `}))(b),{errorMessage:T,hasError:I}=(0,tt.checkLogsError)(c),O=(0,M.cx)(C.logsRow,{[k.errorLogRow]:I}),N=c.hasUnescapedContent&&y?Object.assign({},c,{entry:(0,tt.escapeUnescapedString)(c.entry),raw:(0,tt.escapeUnescapedString)(c.raw)}):c;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("tr",{className:O,onClick:this.toggleDetails,onMouseEnter:()=>{w&&w(c)},onMouseLeave:()=>{w&&w(void 0)},children:[u&&(0,B.jsx)("td",{className:C.logsRowDuplicates,children:N.duplicates&&N.duplicates>0?`${N.duplicates+1}x`:null}),(0,B.jsx)("td",{className:(0,M.cx)({[C.logsRowLevel]:!I}),children:I&&(0,B.jsx)(Y.u,{content:`Error: ${T}`,placement:"right",theme:"error",children:(0,B.jsx)(E.J,{className:C.logIconError,name:"exclamation-triangle",size:"xs"})})}),d&&(0,B.jsx)("td",{title:j?"Hide log details":"See log details",className:C.logsRowToggleDetails,children:(0,B.jsx)(E.J,{className:k.topVerticalAlign,name:j?"angle-down":"angle-right"})}),g&&(0,B.jsx)("td",{className:C.logsRowLocalTime,children:this.renderTimeStamp(c.timeEpochMs)}),p&&N.uniqueLabels&&(0,B.jsx)("td",{className:C.logsRowLabels,children:(0,B.jsx)(sd,{labels:N.uniqueLabels})}),m&&m.length>0?(0,B.jsx)(Fd,{row:N,showDetectedFields:m,getFieldLinks:x,wrapLogMessage:f}):(0,B.jsx)(fd.r,{row:N,getRows:s,errors:t,hasMoreContextRows:n,updateLimit:a,context:e,contextIsOpen:S,showContextToggle:h,wrapLogMessage:f,prettifyLogMessage:v,onToggleContext:this.toggleContext})]}),this.state.showDetails&&(0,B.jsx)(Td,{className:O,showDuplicates:u,getFieldLinks:x,onClickFilterLabel:i,onClickFilterOutLabel:r,onClickShowDetectedField:o,onClickHideDetectedField:l,getRows:s,row:N,wrapLogMessage:f,hasError:I,showDetectedFields:m})]})}render(){const{showContext:e}=this.state,{logsSortOrder:t,row:n,getRowContext:a}=this.props;return e?(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(Od,{row:n,getRowContext:a,logsSortOrder:t,children:e=>{let{result:t,errors:n,hasMoreContextRows:a,updateLimit:s}=e;return(0,B.jsx)(B.Fragment,{children:this.renderLogRow(t,n,a,s)})}})}):this.renderLogRow()}}const Ad=(0,ie.HE)(Pd);function Md(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ad.displayName="LogRow";class Rd extends R.PureComponent{constructor(){super(...arguments),Md(this,"renderAllTimer",null),Md(this,"state",{renderAll:!1}),Md(this,"makeGetRows",(0,Me.Z)((e=>()=>e))),Md(this,"sortLogs",(0,Me.Z)(((e,t)=>(0,tt.sortLogRows)(e,t))))}componentDidMount(){const{logRows:e,previewLimit:t}=this.props,n=(e?e.length:0)<=2*t;n?this.setState({renderAll:n}):this.renderAllTimer=window.setTimeout((()=>this.setState({renderAll:!0})),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:e,showContextToggle:t,showLabels:n,showTime:a,wrapLogMessage:s,prettifyLogMessage:i,logRows:r,deduplicatedRows:o,timeZone:l,onClickFilterLabel:d,onClickFilterOutLabel:c,theme:u,enableLogDetails:h,previewLimit:p,getFieldLinks:g,logsSortOrder:m,showDetectedFields:f,onClickShowDetectedField:v,onClickHideDetectedField:b,forceEscape:x,onLogRowHover:y}=this.props,{renderAll:w}=this.state,{logsRowsTable:j}=(0,hd.h)(u),S=o||r,C=r&&r.length>0,k=S?S.reduce(((e,t)=>t.duplicates?e+t.duplicates:e),0):0,T=e!==tt.LogsDedupStrategy.none&&k>0,I=S||[],O=m?this.sortLogs(I,m):I,N=O.slice(0,p),F=O.slice(p,O.length),D=this.makeGetRows(O),P=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return(0,B.jsx)("table",{className:j,children:(0,B.jsxs)("tbody",{children:[C&&N.map(((e,r)=>(0,B.jsx)(Ad,{getRows:D,getRowContext:P,row:e,showContextToggle:t,showDuplicates:T,showLabels:n,showTime:a,showDetectedFields:f,wrapLogMessage:s,prettifyLogMessage:i,timeZone:l,enableLogDetails:h,onClickFilterLabel:d,onClickFilterOutLabel:c,onClickShowDetectedField:v,onClickHideDetectedField:b,getFieldLinks:g,logsSortOrder:m,forceEscape:x,onLogRowHover:y},e.uid))),C&&w&&F.map(((e,r)=>(0,B.jsx)(Ad,{getRows:D,getRowContext:P,row:e,showContextToggle:t,showDuplicates:T,showLabels:n,showTime:a,showDetectedFields:f,wrapLogMessage:s,prettifyLogMessage:i,timeZone:l,enableLogDetails:h,onClickFilterLabel:d,onClickFilterOutLabel:c,onClickShowDetectedField:v,onClickHideDetectedField:b,getFieldLinks:g,logsSortOrder:m,forceEscape:x,onLogRowHover:y},e.uid))),C&&!w&&(0,B.jsx)("tr",{children:(0,B.jsxs)("td",{colSpan:5,children:["Rendering ",O.length-p," rows..."]})})]})})}}Md(Rd,"defaultProps",{previewLimit:100});const $d=(0,ie.HE)(Rd);var Ld;function Ed(e){let{links:t}=e;const n=(0,ie.yK)(Vd);if(1===t.length)return(0,B.jsx)(rd,{link:t[0]});const a=t.filter((e=>"_blank"===e.target)),s=t.filter((e=>"_self"===e.target));return(0,B.jsxs)(B.Fragment,{children:[s.map(((e,t)=>(0,B.jsx)(rd,{link:e},t))),(0,B.jsxs)("div",{className:n.wrapper,children:[(0,B.jsx)("p",{className:n.externalLinksHeading,children:"External links"}),a.map(((e,t)=>(0,B.jsxs)("a",{href:e.href,target:e.target,className:n.externalLink,children:[Ld||(Ld=(0,B.jsx)(E.J,{name:"external-link-alt"})),e.title]},t)))]})]})}$d.displayName="LogsRows";const Vd=e=>({wrapper:M.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${e.spacing.sm};
  `,externalLinksHeading:M.css`
    color: ${e.colors.textWeak};
    font-weight: ${e.typography.weight.regular};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,externalLink:M.css`
    color: ${e.colors.linkExternal};
    font-weight: ${e.typography.weight.regular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${e.spacing.sm};
    }
  `}),Bd=e=>{let{className:t,children:n}=e;const a=zd();return(0,B.jsx)("div",{className:(0,M.cx)(a,t),children:n})},zd=(0,ie.Bb)((()=>M.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)),_d=["override"],Ud=["mappings"];function Hd(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const Wd=["reduceOptions","orientation"];function qd(e,t,n){let a=e.options;if(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},"singlestat"===t&&n.angular)return function(e,t){const n=t.angular,a=tt.fieldReducers.getIfExists(n.valueName),s={reduceOptions:{calcs:[a?a.id:tt.ReducerID.mean]},orientation:tt.VizOrientation.Horizontal},i={};n.format&&(i.unit=n.format);n.tableColumn&&(s.reduceOptions.fields=`/^${n.tableColumn}$/`);n.nullPointMode&&(i.nullValueMode=n.nullPointMode);n.nullText&&(i.noValue=n.nullText);(n.decimals||0===n.decimals)&&(i.decimals=n.decimals);if(n.thresholds&&n.colors){const e=n.thresholds.split(",").map((e=>Number(e.trim()))),t=[];for(const a of n.colors){const n=t.length-1;n>=0?t.push({value:e[n],color:a}):t.push({value:-1/0,color:a})}i.thresholds={mode:tt.ThresholdsMode.Absolute,steps:t}}const r=(0,tt.convertOldAngularValueMappings)(n,i.thresholds);r&&r.length&&(i.mappings=r);n.gauge&&n.gauge.show&&(i.min=n.gauge.minValue,i.max=n.gauge.maxValue);return e.fieldConfig.defaults=i,s}(e,n);for(const e of Wd)n.hasOwnProperty(e)&&(a[e]=(0,J.cloneDeep)(n[e]));return a}function Zd(e){if(!e.options)return{};const t=parseFloat(e.pluginVersion||"6.1");let n=e.options;t<6.2&&(n=function(e){const{valueOptions:t}=e;if(!t)return e;const n={},a={};if(n.mappings=e.valueMappings,n.thresholds=e.thresholds,n.defaults=a,a.unit=t.unit,a.decimals=t.decimals,t.stat){const e=tt.fieldReducers.get(t.stat);e&&(n.calcs=[e.id])}a.min=e.minValue,a.max=e.maxValue;const s=Object.assign({},e,{fieldOptions:n});return(0,J.omit)(s,"valueMappings","thresholds","valueOptions","minValue","maxValue")}(n)),t<6.3&&(n=function(e){const{fieldOptions:t}=e;if(!t)return e;const n=e.fieldOptions,{mappings:a}=n,s=Hd(n,Ud);let i;e.thresholds&&(i={mode:tt.ThresholdsMode.Absolute,steps:Gd(e.thresholds)});return Object.assign({},e,{fieldOptions:Object.assign({},s,{defaults:Object.assign({},t.defaults,{mappings:a,thresholds:i})})})}(n));const{fieldOptions:a}=n;if(t<6.6&&a){var s;if(a&&a.override){const e=Hd(n.fieldOptions,_d);n=Object.assign({},n,{fieldOptions:Object.assign({},e,{overrides:[]})})}let e=null==a||null===(s=a.defaults)||void 0===s?void 0:s.thresholds;e?delete a.defaults.thresholds:(e=null==a?void 0:a.thresholds,delete a.thresholds),e&&(a.defaults.thresholds={mode:tt.ThresholdsMode.Absolute,steps:e});const{defaults:t}=a;t.color&&"string"==typeof t.color&&(t.color={mode:tt.FieldColorModeId.Fixed,fixedColor:t.color}),(0,tt.validateFieldConfig)(t)}if(t<7&&(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},e.fieldConfig={defaults:a&&a.defaults?Object.assign({},e.fieldConfig.defaults,a.defaults):e.fieldConfig.defaults,overrides:a&&a.overrides?[...e.fieldConfig.overrides,...a.overrides]:e.fieldConfig.overrides},a&&(n.reduceOptions={values:a.values,limit:a.limit,calcs:a.calcs}),delete n.fieldOptions),t<7.1){const t=e.fieldConfig.defaults.title;null!=t&&(e.fieldConfig.defaults.displayName=t,delete e.fieldConfig.defaults.title)}if(t<8){var i;const t=null===(i=e.fieldConfig)||void 0===i?void 0:i.defaults;let n=null==t?void 0:t.unit;"percent"===n?((0,J.isNumber)(t.min)||(t.min=0),(0,J.isNumber)(t.max)||(t.max=100)):"percentunit"===n&&((0,J.isNumber)(t.min)||(t.min=0),(0,J.isNumber)(t.max)||(t.max=1))}return n}function Gd(e){if(!e||!e.length)return;const t=e.map((e=>({value:null===e.value?-1/0:e.value,color:e.color})));return(0,tt.sortThresholds)(t),t[0].value=-1/0,t}function Kd(e){return(0,tt.convertOldAngularValueMappings)(e)}const Qd=e=>{let{message:t,callToActionElement:n,footer:a,className:s}=e;const i=(0,nt.wW)(Jd);return(0,B.jsxs)("div",{className:(0,M.cx)([i.wrapper,s]),children:[t&&(0,B.jsx)("div",{className:i.message,children:t}),n,a&&(0,B.jsx)("div",{className:i.footer,children:a})]})},Jd=e=>({wrapper:M.css`
    label: call-to-action-card;
    padding: ${e.spacing(3)};
    background: ${e.colors.background.secondary};
    border-radius: ${e.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:M.css`
    margin-bottom: ${e.spacing(3)};
    font-style: italic;
  `,footer:M.css`
    margin-top: ${e.spacing(3)}};
  `}),Yd=["value","checked","disabled","onChange","id"],Xd=["transparent","className","showLabel","label","value","id"];function ec(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const tc=R.forwardRef(((e,t)=>{let{value:n,checked:a,disabled:s,onChange:i,id:r}=e,o=ec(e,Yd);a&&(0,tt.deprecationWarning)("Switch","checked prop","value");const l=(0,ie.l4)(),d=ac(l),c=(0,R.useRef)(r||(0,J.uniqueId)("switch-"));return(0,B.jsxs)("div",{className:(0,M.cx)(d.switch),children:[(0,B.jsx)("input",Object.assign({type:"checkbox",disabled:s,checked:n,onChange:e=>{null==i||i(e)},id:c.current},o,{ref:t})),(0,B.jsx)("label",{htmlFor:c.current})]})}));tc.displayName="Switch";const nc=R.forwardRef(((e,t)=>{let{transparent:n,className:a,showLabel:s,label:i,value:r,id:o}=e,l=ec(e,Xd);const d=(0,ie.l4)(),c=ac(d,n);return(0,B.jsxs)("div",{className:(0,M.cx)(c.inlineContainer,a),children:[s&&(0,B.jsx)("label",{htmlFor:o,className:(0,M.cx)(c.inlineLabel,r&&c.inlineLabelEnabled,"inline-switch-label"),children:i}),(0,B.jsx)(tc,Object.assign({},l,{id:o,label:i,ref:t,value:r}))]})}));nc.displayName="Switch";const ac=(0,ie.Bb)(((e,t)=>({switch:M.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${e.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${e.colors.primary.main};
          border-color: ${e.colors.primary.main};

          &:hover {
            background: ${e.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${e.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,Yt.getFocusStyles)(e)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,Yt.getMouseFocusStyles)(e)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${e.components.input.background};
        border: 1px solid ${e.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${e.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${e.colors.text.secondary};
          box-shadow: ${e.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:M.css`
      padding: ${e.spacing(0,1)};
      height: ${e.spacing(e.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${t?"transparent":e.components.input.background};
      border: 1px solid ${t?"transparent":e.components.input.borderColor};
      border-radius: ${e.shape.borderRadius()};

      &:hover {
        border: 1px solid ${t?"transparent":e.components.input.borderHover};

        .inline-switch-label {
          color: ${e.colors.text.primary};
        }
      }
    `,inlineLabel:M.css`
      cursor: pointer;
      padding-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:M.css`
      color: ${e.colors.text.primary};
    `})));var sc=n(50539),ic=n.n(sc),rc=n(57648),oc=n(61210),lc=n(37129);const dc=["suggestions"];const cc=e=>({list:M.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:M.css`
      background: ${e.colors.background.primary};
      width: 250px;
    `,item:M.css`
      background: none;
      padding: 2px 8px;
      color: ${e.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${e.colors.action.hover};
      }
    `,label:M.css`
      color: ${e.colors.text.secondary};
    `,activeItem:M.css`
      background: ${e.colors.background.secondary};
      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,itemValue:M.css`
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.size.sm};
    `}),uc=e=>{let{suggestions:t}=e,n=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,dc);const a=(0,R.useRef)(null);(0,lc.Z)(a,(()=>{n.onClose&&n.onClose()}));const s=(0,R.useMemo)((()=>(0,J.groupBy)(t,(e=>e.origin))),[t]),i=(0,ie.wW)(cc);return(0,B.jsx)("div",{ref:a,className:i.wrapper,children:Object.keys(s).map(((e,t)=>{const a=0===t?0:Object.keys(s).reduce(((e,n,a)=>a>=t?e:e+s[n].length),0);return(0,R.createElement)(hc,Object.assign({},n,{suggestions:s[e],label:`${(0,J.capitalize)(e)}`,activeIndex:n.activeIndex,activeIndexOffset:a,key:e}))}))})};uc.displayName="DataLinkSuggestions";const hc=R.memo((e=>{let{activeIndex:t,activeIndexOffset:n,label:a,onClose:s,onSuggestionSelect:i,suggestions:r,activeRef:o}=e;const l=(0,ie.wW)(cc);return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(Ms.a,{className:l.list,items:r,renderItem:(e,s)=>{const r=s+n===t;return(0,B.jsx)("div",{className:(0,M.cx)(l.item,r&&l.activeItem),ref:r?o:void 0,onClick:()=>{i(e)},title:e.documentation,children:(0,B.jsxs)("span",{className:l.itemValue,children:[(0,B.jsx)("span",{className:l.label,children:a})," ",e.label]})})}})})}));hc.displayName="DataLinkSuggestionsList";class pc{getBoundingClientRect(){const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){return t.parentElement.getBoundingClientRect()}return{top:0,left:0,bottom:0,right:0,width:0,height:0}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const gc=[(0,ri.Ze)({onlyIn:e=>"code_block"===e.type,getSyntax:()=>"links"},Object.assign({},ic().languages,{links:{builtInVariable:{pattern:/(\${\S+?})/}}}))],mc=e=>({input:(0,$e.H)({theme:e,invalid:!1}).input,editor:M.css`
    .token.builtInVariable {
      color: ${e.colors.success.text};
    }
    .token.variable {
      color: ${e.colors.primary.text};
    }
  `,suggestionsWrapper:M.css`
    box-shadow: ${e.shadows.z2};
  `,wrapperOverrides:M.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),fc=(0,R.memo)((e=>{let{value:t,onChange:n,suggestions:a,placeholder:s="http://your-grafana.com/d/000000010/annotations"}=e;const i=(0,R.useRef)(),r=(0,ie.wW)(mc),[o,l]=(0,R.useState)(!1),[d,c]=(0,R.useState)(0),[u,h]=(0,R.useState)((0,we.makeValue)(t)),p=(0,rc.Z)(u),[g,m]=(0,R.useState)(0),f=(0,R.useRef)({showingSuggestions:o,suggestions:a,suggestionsIndex:d,linkUrl:u,onChange:n});f.current={showingSuggestions:o,suggestions:a,suggestionsIndex:d,linkUrl:u,onChange:n};const v=(0,R.useRef)(null);(0,R.useEffect)((()=>{var e,t,n;m((e=v.current,t=d,(null!==(n=null==e?void 0:e.clientHeight)&&void 0!==n?n:0)*t))}),[d]);const b=(0,R.useMemo)((()=>new pc),[]),x=R.useCallback(((e,t)=>{if(!f.current.showingSuggestions)return"="===e.key||"$"===e.key||32===e.keyCode&&e.ctrlKey?l(!0):t();switch(e.key){case"Backspace":case"Escape":return l(!1),c(0);case"Enter":return e.preventDefault(),w(f.current.suggestions[f.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":e.preventDefault();const n="ArrowDown"===e.key?1:-1;return c((e=>{return t=e+n,a=f.current.suggestions.length,t-a*Math.floor(t/a);var t,a}));default:return t()}}),[]);(0,R.useEffect)((()=>{p&&p.selection.isFocused&&!u.selection.isFocused&&f.current.onChange(si.Z.serialize(u))}),[u,p]);const y=R.useCallback((e=>{let{value:t}=e;h(t)}),[]),w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.current;const n="$"!==si.Z.serialize(t.value).slice(-1);e.origin!==tt.VariableOrigin.Template||e.value===tt.DataLinkBuiltInVars.includeVars?t.insertText(`${n?"$":""}{${e.value}}`):t.insertText(`\${${e.value}:queryparam}`),h(t.value),l(!1),c(0),f.current.onChange(si.Z.serialize(t.value))};return(0,B.jsx)("div",{className:r.wrapperOverrides,children:(0,B.jsx)("div",{className:"slate-query-field__wrapper",children:(0,B.jsxs)("div",{className:"slate-query-field",children:[o&&(0,B.jsx)(fe.h_,{children:(0,B.jsx)(ge.r,{referenceElement:b,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}],children:e=>{let{ref:t,style:n,placement:a}=e;return(0,B.jsx)("div",{ref:t,style:n,"data-placement":a,className:r.suggestionsWrapper,children:(0,B.jsx)(ye.Z,{scrollTop:g,autoHeightMax:"300px",setScrollTop:e=>{let{scrollTop:t}=e;return m(t)},children:(0,B.jsx)(uc,{activeRef:v,suggestions:f.current.suggestions,onSuggestionSelect:w,onClose:()=>l(!1),activeIndex:d})})})}})}),(0,B.jsx)(ii.ML,{schema:oc.Yi,ref:i,placeholder:s,value:f.current.linkUrl,onChange:y,onKeyDown:(e,t,n)=>x(e,n),plugins:gc,className:(0,M.cx)(r.editor,r.input,M.css`
                  padding: 3px 8px;
                `)})]})})})}));fc.displayName="DataLinkInput";const vc=e=>({listItem:M.css`
    margin-bottom: ${e.spacing()};
  `,infoText:M.css`
    padding-bottom: ${e.spacing(2)};
    margin-left: 66px;
    color: ${e.colors.text.secondary};
  `}),bc=R.memo((e=>{let{index:t,value:n,onChange:a,suggestions:s,isLast:i}=e;const r=(0,ie.wW)(vc);return(0,B.jsxs)("div",{className:r.listItem,children:[(0,B.jsx)(la.g,{label:"Title",children:(0,B.jsx)($e.I,{value:n.title,onChange:e=>{a(t,Object.assign({},n,{title:e.target.value}))},placeholder:"Show details"})}),(0,B.jsx)(la.g,{label:"URL",children:(0,B.jsx)(fc,{value:n.url,onChange:(e,s)=>{a(t,Object.assign({},n,{url:e}),s)},suggestions:s})}),(0,B.jsx)(la.g,{label:"Open in new tab",children:(0,B.jsx)(tc,{value:n.targetBlank||!1,onChange:()=>{a(t,Object.assign({},n,{targetBlank:!n.targetBlank}))}})}),i&&(0,B.jsx)("div",{className:r.infoText,children:"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."})]})}));bc.displayName="DataLinkEditor";const xc=e=>{let{link:t,index:n,getSuggestions:a,onSave:s,onCancel:i}=e;const[r,o]=(0,R.useState)(t);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(bc,{value:r,index:n,isLast:!1,suggestions:a(),onChange:(e,t)=>{o(t)}}),(0,B.jsxs)(ei.ButtonRow,{children:[(0,B.jsx)(re.zx,{variant:"secondary",onClick:()=>i(n),fill:"outline",children:"Cancel"}),(0,B.jsx)(re.zx,{onClick:()=>{s(n,r)},children:"Save"})]})]})},yc=e=>{let{link:t,onEdit:n,onRemove:a}=e;const s=(0,ie.l4)(),i=wc(s),{title:r="",url:o=""}=t,l=""!==r.trim(),d=""!==o.trim();return(0,B.jsx)("div",{className:i.wrapper,children:(0,B.jsxs)(Js.wc,{spacing:"xs",children:[(0,B.jsxs)(Js.Lh,{justify:"space-between",align:"flex-start",width:"100%",children:[(0,B.jsx)("div",{className:(0,M.cx)(i.title,!l&&i.notConfigured),children:l?r:"Data link title not provided"}),(0,B.jsxs)(Js.Lh,{children:[(0,B.jsx)(se.h,{name:"pen",onClick:n}),(0,B.jsx)(se.h,{name:"times",onClick:a})]})]}),(0,B.jsx)("div",{className:(0,M.cx)(i.url,!d&&i.notConfigured),title:o,children:d?o:"Data link url not provided"})]})})},wc=(0,ie.Bb)((e=>({wrapper:M.css`
      margin-bottom: ${e.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
    `,notConfigured:M.css`
      font-style: italic;
    `,title:M.css`
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    `,url:M.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `}))),jc=e=>{let{links:t,onChange:n,getSuggestions:a,data:s}=e;const i=(0,ie.l4)(),[r,o]=(0,R.useState)(null),[l,d]=(0,R.useState)(!1),c=Sc(i),u=null!=t?t:[],h=null!==r,p=(e,t)=>{if(l){if(""===t.title.trim()&&""===t.url.trim())return d(!1),void o(null);o(null),d(!1)}const a=(0,J.cloneDeep)(u);a[e]=t,n(a),o(null)},g=e=>{l&&d(!1),o(null)};return(0,B.jsxs)(B.Fragment,{children:[u.length>0&&(0,B.jsx)("div",{className:c.wrapper,children:u.map(((e,t)=>(0,B.jsx)(yc,{index:t,link:e,onChange:p,onEdit:()=>o(t),onRemove:()=>(e=>{const t=(0,J.cloneDeep)(u);t.splice(e,1),n(t)})(t),data:s},`${e.title}/${t}`)))}),h&&null!==r&&(0,B.jsx)(ei,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{g()},children:(0,B.jsx)(xc,{index:r,link:l?{title:"",url:""}:u[r],data:s,onSave:p,onCancel:g,getSuggestions:a})}),(0,B.jsx)(te.zx,{size:"sm",icon:"plus",onClick:()=>{let e=(0,J.cloneDeep)(u);o(e.length),d(!0)},variant:"secondary",children:"Add link"})]})},Sc=(0,ie.Bb)((e=>({wrapper:M.css`
      margin-bottom: ${e.spacing(2)};
    `})));var Cc;const kc=["title","className","children","branded","url","urlTitle","onDismiss","severity"];const Tc=R.memo(R.forwardRef(((e,t)=>{let{title:n,className:a,children:s,url:i,urlTitle:r,severity:o="info"}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,kc);const d=(0,ie.wW)(Ic);return(0,B.jsxs)(Gl.b,Object.assign({severity:o,className:a},l,{ref:t,title:n,children:[(0,B.jsx)("div",{children:s}),i&&(0,B.jsxs)("a",{href:i,className:(0,M.cx)("external-link",d.docsLink),target:"_blank",rel:"noreferrer",children:[Cc||(Cc=(0,B.jsx)(E.J,{name:"book"}))," ",r||"Read more"]})]}))})));Tc.displayName="InfoBox";const Ic=(0,ie.Bb)((e=>({docsLink:M.css`
      display: inline-block;
      margin-top: ${e.spacing(2)};
    `}))),Oc=["icon","color","text","tooltip","className"];const Nc=R.memo((e=>{let{icon:t,color:n,text:a,tooltip:s,className:i}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Oc);const o=(0,nt.Fg)(),l=Fc(o,n),d=(0,B.jsx)("div",Object.assign({className:(0,M.cx)(l.wrapper,i)},r,{children:(0,B.jsxs)(Js.Lh,{align:"center",spacing:"xs",children:[t&&(0,B.jsx)(E.J,{name:t,size:"sm"}),(0,B.jsx)("span",{children:a})]})}));return s?(0,B.jsx)(Y.u,{content:s,placement:"auto",children:d}):d}));Nc.displayName="Badge";const Fc=(0,Fn.B)(((e,t)=>{let n=e.visualization.getColorByName(t),a="",s="",i="";return e.isDark?(s=pt()(n).setAlpha(.15).toString(),a=pt()(n).darken(30).toString(),i=pt()(n).lighten(15).toString()):(s=pt()(n).setAlpha(.15).toString(),a=pt()(n).lighten(20).toString(),i=pt()(n).darken(15).toString()),{wrapper:M.css`
      font-size: ${e.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${s};
      border: 1px solid ${a};
      color: ${i};
      font-weight: ${e.typography.weight.regular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}})),Dc=["title","featureState"];const Pc=R.memo(R.forwardRef(((e,t)=>{let{title:n,featureState:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Dc);const i=(0,ie.yK)(Ac),r=a?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:i.badge,children:(0,B.jsx)(Mc,{featureState:a})}),(0,B.jsx)("h3",{children:n})]}):(0,B.jsx)("h3",{children:n});return(0,B.jsx)(Tc,Object.assign({branded:!0,title:r,urlTitle:"Read documentation",ref:t},s))})));Pc.displayName="FeatureInfoBox";const Ac=(0,ie.Bb)((e=>({badge:M.css`
      margin-bottom: ${e.spacing.sm};
    `}))),Mc=e=>{let{featureState:t,tooltip:n}=e;const a=function(e){if(e===tt.FeatureState.alpha)return{text:"Alpha",icon:"exclamation-triangle",color:"orange"};return{text:"Beta",icon:"rocket",color:"blue"}}(t);return(0,B.jsx)(Nc,{text:a.text,color:a.color,icon:a.icon,tooltip:n})};function Rc(e){return!!e&&"object"===typeof e}function $c(e){if(void 0===e)return"";if(null===e)return"Object";if("object"==typeof e&&!e.constructor)return"Object";const t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function Lc(e){return null===e?"null":typeof e}function Ec(e,t){const n=Lc(e);return"null"===n||"undefined"===n?n:("string"===n&&(t='"'+(t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"')),"function"===n?e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{â¦}":t)}function Vc(e){return`json-formatter-${e}`}function Bc(e,t,n){const a=document.createElement(e);return t&&a.classList.add(Vc(t)),void 0!==n&&(n instanceof Node?a.appendChild(n):a.appendChild(document.createTextNode(String(n)))),a}function zc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _c=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,Uc=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,Hc=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,Wc="undefined"!=typeof window&&window.requestAnimationFrame||(e=>(e(),0)),qc={animateOpen:!0,animateClose:!0};class Zc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qc,a=arguments.length>3?arguments[3]:void 0;zc(this,"_isOpen",null),zc(this,"element",null),zc(this,"skipChildren",!1),this.json=e,this.open=t,this.config=n,this.key=a}get isOpen(){return null!==this._isOpen?this._isOpen:this.open>0}set isOpen(e){this._isOpen=e}get isDate(){return"string"===this.type&&(_c.test(this.json)||Hc.test(this.json)||Uc.test(this.json))}get isUrl(){return"string"===this.type&&0===this.json.indexOf("http")}get isArray(){return Array.isArray(this.json)}get isObject(){return Rc(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return void 0!==this.key}get constructorName(){return $c(this.json)}get type(){return Lc(this.json)}get keys(){return this.isObject?Object.keys(this.json).map((e=>e||'""')):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(Vc("open")))}openAtDepth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e<0||(this.open=e,this.isOpen=0!==e,this.element&&(this.removeChildren(!1),0===e?this.element.classList.remove(Vc("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(Vc("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,J.isNumber)(this.json[0])||(0,J.isNumber)(this.json[1]))}renderArray(){const e=Bc("span");return e.appendChild(Bc("span","bracket","[")),this.isNumberArray()?(this.json.forEach(((t,n)=>{n>0&&e.appendChild(Bc("span","array-comma",",")),e.appendChild(Bc("span","number",t))})),this.skipChildren=!0):e.appendChild(Bc("span","number",this.json.length)),e.appendChild(Bc("span","bracket","]")),e}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.element=Bc("div","row");const t=Bc("a","toggler-link"),n=Bc("span","toggler");if(this.isObject&&t.appendChild(n),this.hasKey&&t.appendChild(Bc("span","key",`${this.key}:`)),this.isObject){const e=Bc("span","value"),n=Bc("span"),a=Bc("span","constructor-name",this.constructorName);if(n.appendChild(a),this.isArray){const e=this.renderArray();n.appendChild(e)}e.appendChild(n),t.appendChild(e)}else{const e=this.isUrl?Bc("a"):Bc("span");e.classList.add(Vc(this.type)),this.isDate&&e.classList.add(Vc("date")),this.isUrl&&(e.classList.add(Vc("url")),e.setAttribute("href",this.json));const n=Ec(this.json,this.json);e.appendChild(document.createTextNode(n)),t.appendChild(e)}const a=Bc("div","children");return this.isObject&&a.classList.add(Vc("object")),this.isArray&&a.classList.add(Vc("array")),this.isEmpty&&a.classList.add(Vc("empty")),this.config&&this.config.theme&&this.element.classList.add(Vc(this.config.theme)),this.isOpen&&this.element.classList.add(Vc("open")),e||this.element.appendChild(t),this.skipChildren?t.removeChild(n):this.element.appendChild(a),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.element&&this.element.querySelector(`div.${Vc("children")}`);if(t&&!this.isEmpty)if(e){let e=0;const n=()=>{const a=this.keys[e],s=new Zc(this.json[a],this.open-1,this.config,a);t.appendChild(s.render()),e+=1,e<this.keys.length&&(e>10?n():Wc(n))};Wc(n)}else this.keys.forEach((e=>{const n=new Zc(this.json[e],this.open-1,this.config,e);t.appendChild(n.render())}))}removeChildren(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.element&&this.element.querySelector(`div.${Vc("children")}`);if(e){let e=0;const n=()=>{t&&t.children.length&&(t.removeChild(t.children[0]),e+=1,e>10?n():Wc(n))};Wc(n)}else t&&(t.innerHTML="")}}function Gc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Kc extends R.PureComponent{constructor(){super(...arguments),Gc(this,"wrapperRef",(0,R.createRef)()),Gc(this,"renderJson",(()=>{const{json:e,config:t,open:n,onDidRender:a}=this.props,s=this.wrapperRef.current,i=new Zc(e,n,t);s.hasChildNodes()?s.replaceChild(i.render(),s.lastChild):s.appendChild(i.render()),a&&a(i.json)}))}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:e}=this.props;return(0,B.jsx)("div",{className:e,ref:this.wrapperRef})}}Gc(Kc,"defaultProps",{open:3,config:{animateOpen:!0}});var Qc,Jc=n(51882);const Yc=(0,ie.Bb)((()=>M.css`
    width: 500px;
    margin: 64px auto;
  `)),Xc=e=>{let{error:t,errorInfo:n,title:a}=e;return(0,B.jsxs)("div",{className:Yc(),children:[(0,B.jsx)("h2",{children:a}),(0,B.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[t&&t.toString(),Qc||(Qc=(0,B.jsx)("br",{})),n&&n.componentStack]})]})};var eu;function tu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Xc.displayName="ErrorWithStack";class nu extends R.PureComponent{constructor(){super(...arguments),tu(this,"state",{error:null,errorInfo:null})}componentDidCatch(e,t){(0,Jc.Tb)(e,{contexts:{react:{componentStack:t.componentStack}}}),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e)}componentDidUpdate(e){const{dependencies:t,onRecover:n}=this.props;if(this.state.error&&t&&e.dependencies)for(let a=0;a<t.length;a++)if(t[a]!==e.dependencies[a]){this.setState({error:null,errorInfo:null}),n&&n();break}}render(){const{children:e}=this.props,{error:t,errorInfo:n}=this.state;return e({error:t,errorInfo:n})}}class au extends R.PureComponent{render(){const{title:e,children:t,style:n,dependencies:a}=this.props;return(0,B.jsx)(nu,{dependencies:a,children:a=>{let{error:s,errorInfo:i}=a;return i?"alertbox"===n?(0,B.jsx)(Gl.b,{title:e||"",children:(0,B.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[s&&s.toString(),eu||(eu=(0,B.jsx)("br",{})),i.componentStack]})}):(0,B.jsx)(Xc,{title:e||"",error:s,errorInfo:i}):t}})}}function su(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=n=>(0,B.jsx)(au,Object.assign({},t,{children:(0,B.jsx)(e,Object.assign({},n))}));return n.displayName="WithErrorBoundary",n}tu(au,"defaultProps",{title:"An unexpected error happened",style:"alertbox"});var iu=n(18801),ru=n(57229);const ou=["children","className","tooltip","width","transparent","interactive","as"];const lu=e=>{let{children:t,className:n,tooltip:a,width:s,transparent:i,interactive:r,as:o="label"}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,ou);const d=(0,ie.Fg)(),c=du(d,i,s);return(0,B.jsxs)(o,Object.assign({className:(0,M.cx)(c.label,n)},l,{children:[t,a&&(0,B.jsx)(V.u,{interactive:r,placement:"top",content:a,theme:"info",children:(0,B.jsx)(E.J,{tabIndex:0,name:"info-circle",size:"sm",className:c.icon})})]}))},du=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return{label:M.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${e.spacing.sm};
      font-weight: ${e.typography.weight.semibold};
      font-size: ${e.typography.size.sm};
      background-color: ${t?"transparent":e.colors.bg2};
      height: ${e.height.md}px;
      line-height: ${e.height.md}px;
      margin-right: ${e.spacing.xs};
      border-radius: ${e.border.radius.md};
      border: none;
      width: ${n?"auto"!==n?8*n+"px":n:"100%"};
      color: ${e.colors.textHeading};
    `,icon:M.css`
      color: ${e.colors.textWeak};
      margin-left: 10px;

      :hover {
        color: ${e.colors.text};
      }
    `}},cu=["children","label","tooltip","labelWidth","invalid","loading","disabled","className","htmlFor","grow","shrink","error","transparent","interactive"];const uu=e=>{let{children:t,label:n,tooltip:a,labelWidth:s="auto",invalid:i,loading:r,disabled:o,className:l,htmlFor:d,grow:c,shrink:u,error:h,transparent:p,interactive:g}=e,m=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,cu);const f=(0,ie.l4)(),v=hu(f,c,u),b=null!=d?d:(0,iu.getChildId)(t),x="string"==typeof n?(0,B.jsx)(lu,{interactive:g,width:s,tooltip:a,htmlFor:b,transparent:p,children:n}):n;return(0,B.jsxs)("div",Object.assign({className:(0,M.cx)(v.container,l)},m,{children:[x,(0,B.jsxs)("div",{className:v.childContainer,children:[R.cloneElement(t,{invalid:i,disabled:o,loading:r}),i&&h&&(0,B.jsx)("div",{className:(0,M.cx)(v.fieldValidationWrapper),children:(0,B.jsx)(ru.S,{children:h})})]})]}))};uu.displayName="InlineField";const hu=(e,t,n)=>({container:M.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} ${n?1:0} auto;
      margin: 0 ${e.spacing(.5)} ${e.spacing(.5)} 0;
    `,childContainer:M.css`
      flex: ${t?1:0} ${n?1:0} auto;
    `,fieldValidationWrapper:M.css`
      margin-top: ${e.spacing(.5)};
    `}),pu=e=>{let{dataSourceConfig:t,onChange:n}=e;const a=t.secureJsonData?t.secureJsonData.basicAuthPassword:"";return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(we.InlineField,{children:(0,B.jsx)(H,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:t.basicAuthUser,onChange:e=>n(Object.assign({},t,{basicAuthUser:e.currentTarget.value}))})}),(0,B.jsx)(we.InlineField,{children:(0,B.jsx)(ae,{isConfigured:!(!t.secureJsonFields||!t.secureJsonFields.basicAuthPassword),value:a||"",inputWidth:18,labelWidth:10,onReset:()=>{n(Object.assign({},t,{secureJsonData:Object.assign({},t.secureJsonData,{basicAuthPassword:""}),secureJsonFields:Object.assign({},t.secureJsonFields,{basicAuthPassword:!1})}))},onChange:e=>{n(Object.assign({},t,{secureJsonData:Object.assign({},t.secureJsonData,{basicAuthPassword:e.currentTarget.value})}))}})})]})};var gu,mu;function fu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const vu=(0,ie.Bb)((()=>({layout:M.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `}))),bu=e=>{let{header:t,onBlur:n,onChange:a,onRemove:s,onReset:i}=e;const r=vu();return(0,B.jsxs)("div",{className:r.layout,children:[(0,B.jsx)(H,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:t.name||"",onChange:e=>a(Object.assign({},t,{name:e.target.value})),onBlur:n}),(0,B.jsx)(ae,{label:"Value","aria-label":"Value",name:"value",isConfigured:t.configured,value:t.value,labelWidth:5,inputWidth:t.configured?11:12,placeholder:"Header Value",onReset:()=>i(t.id),onChange:e=>a(Object.assign({},t,{value:e.target.value})),onBlur:n}),(0,B.jsx)(re.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:e=>s(t.id),children:gu||(gu=(0,B.jsx)(E.J,{name:"trash-alt"}))})]})};bu.displayName="CustomHeaderRow";class xu extends R.PureComponent{constructor(e){super(e),fu(this,"state",{headers:[]}),fu(this,"updateSettings",(()=>{const{headers:e}=this.state,t=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter((e=>{let[t,n]=e;return!t.startsWith("httpHeaderName")}))),n=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter((e=>{let[t,n]=e;return!t.startsWith("httpHeaderValue")})));for(const[a,s]of e.entries())t[`httpHeaderName${a+1}`]=s.name,s.configured||(n[`httpHeaderValue${a+1}`]=s.value);this.props.onChange(Object.assign({},this.props.dataSourceConfig,{jsonData:t,secureJsonData:n}))})),fu(this,"onHeaderAdd",(()=>{this.setState((e=>({headers:[...e.headers,{id:(0,J.uniqueId)(),name:"",value:"",configured:!1}]})))})),fu(this,"onHeaderChange",((e,t)=>{this.setState((n=>{let{headers:a}=n;return{headers:a.map(((n,a)=>e!==a?n:Object.assign({},t)))}}))})),fu(this,"onHeaderReset",(e=>{this.setState((t=>{let{headers:n}=t;return{headers:n.map(((t,n)=>t.id!==e?t:Object.assign({},t,{value:"",configured:!1})))}}))})),fu(this,"onHeaderRemove",(e=>{this.setState((t=>{let{headers:n}=t;return{headers:n.filter((t=>t.id!==e))}}),this.updateSettings)}));const{jsonData:t,secureJsonData:n,secureJsonFields:a}=this.props.dataSourceConfig;this.state={headers:Object.keys(t).sort().filter((e=>e.startsWith("httpHeaderName"))).map(((e,s)=>({id:(0,J.uniqueId)(),name:t[e],value:void 0!==n?n[e]:"",configured:a&&a[`httpHeaderValue${s+1}`]||!1})))}}render(){const{headers:e}=this.state;return(0,B.jsxs)("div",{className:"gf-form-group",children:[mu||(mu=(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)("h6",{children:"Custom HTTP Headers"})})),(0,B.jsx)("div",{children:e.map(((e,t)=>(0,B.jsx)(bu,{header:e,onChange:e=>{this.onHeaderChange(t,e)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset},e.id)))}),(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)(re.zx,{variant:"secondary",icon:"plus",type:"button",onClick:e=>{this.onHeaderAdd()},children:"Add header"})})]})}}const yu=e=>{let{dataSourceConfig:t,onChange:n,showForwardOAuthIdentityOption:a=!0}=e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"gf-form-inline",children:[(0,B.jsx)(uu,{label:"TLS Client Auth",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-tls-client-auth",value:t.jsonData.tlsAuth||!1,onChange:e=>n(Object.assign({},t.jsonData,{tlsAuth:e.currentTarget.checked}))})}),(0,B.jsx)(uu,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-ca-cert",value:t.jsonData.tlsAuthWithCACert||!1,onChange:e=>n(Object.assign({},t.jsonData,{tlsAuthWithCACert:e.currentTarget.checked}))})})]}),(0,B.jsx)("div",{className:"gf-form-inline",children:(0,B.jsx)(uu,{label:"Skip TLS Verify",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-skip-tls-verify",value:t.jsonData.tlsSkipVerify||!1,onChange:e=>n(Object.assign({},t.jsonData,{tlsSkipVerify:e.currentTarget.checked}))})})}),a&&(0,B.jsx)("div",{className:"gf-form-inline",children:(0,B.jsx)(uu,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-forward-oauth",value:t.jsonData.oauthPassThru||!1,onChange:e=>n(Object.assign({},t.jsonData,{oauthPassThru:e.currentTarget.checked}))})})})]})},wu=["children","className"];const ju=e=>{let{children:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,wu);const s=(0,ie.yK)(Su);return(0,B.jsx)("div",Object.assign({className:(0,M.cx)(s.container,n)},a,{children:t}))},Su=e=>({container:M.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${e.spacing.xs};
    `});var Cu;const ku=e=>{let{hasCert:t,label:n,onChange:a,onClick:s,placeholder:i}=e;return(0,B.jsxs)(ju,{children:[(0,B.jsx)(uu,{label:n,labelWidth:14,disabled:t,children:t?Cu||(Cu=(0,B.jsx)($e.I,{type:"text",value:"configured",width:24})):(0,B.jsx)(eo,{rows:7,onChange:a,placeholder:i,required:!0})}),t&&(0,B.jsx)(re.zx,{variant:"secondary",onClick:s,style:{marginLeft:4},children:"Reset"})]})};var Tu;const Iu=e=>{let{dataSourceConfig:t,onChange:n}=e;const a=t.secureJsonFields&&t.secureJsonFields.tlsCACert,s=t.secureJsonFields&&t.secureJsonFields.tlsClientCert,i=t.secureJsonFields&&t.secureJsonFields.tlsClientKey,r=t.jsonData&&t.jsonData.serverName,o=e=>a=>{a.preventDefault();const s=Object.assign({},t.secureJsonFields);s[e]=!1,n(Object.assign({},t,{secureJsonFields:s}))},l=e=>a=>{const s=Object.assign({},t.secureJsonData);s[e]=a.currentTarget.value,n(Object.assign({},t,{secureJsonData:s}))};return(0,B.jsxs)("div",{className:"gf-form-group",children:[(0,B.jsxs)("div",{className:(0,M.cx)("gf-form",M.css`
            align-items: baseline;
          `),children:[Tu||(Tu=(0,B.jsx)("h6",{children:"TLS/SSL Auth Details"})),(0,B.jsx)(Y.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info",children:(0,B.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,B.jsx)(E.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})})})]}),(0,B.jsxs)("div",{children:[t.jsonData.tlsAuthWithCACert&&(0,B.jsx)(ku,{hasCert:!!a,onChange:l("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:o("tlsCACert")}),t.jsonData.tlsAuth&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)(H,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:r&&t.jsonData.serverName,onChange:e=>{const a=Object.assign({},t.jsonData,{serverName:e.currentTarget.value});n(Object.assign({},t,{jsonData:a}))}})}),(0,B.jsx)(ku,{hasCert:!!s,label:"Client Cert",onChange:l("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:o("tlsClientCert")}),(0,B.jsx)(ku,{hasCert:!!i,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:l("tlsClientKey"),onClick:o("tlsClientKey")})]})]})]})};var Ou,Nu,Fu,Du,Pu,Au,Mu,Ru;const $u=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],Lu={label:"Server (default)",value:"proxy"},Eu=()=>Ou||(Ou=(0,B.jsxs)("div",{className:"grafana-info-box m-t-2",children:[(0,B.jsxs)("p",{children:["Access mode controls how requests to the data source will be handled.",(0,B.jsxs)("strong",{children:["Â ",(0,B.jsx)("i",{children:"Server"})]})," ","should be the preferred way if nothing else is stated."]}),(0,B.jsx)("div",{className:"alert-title",children:"Server access mode (Default):"}),(0,B.jsx)("p",{children:"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."}),(0,B.jsx)("div",{className:"alert-title",children:"Browser access mode:"}),(0,B.jsx)("p",{children:"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode."})]})),Vu=e=>{const{defaultUrl:t,dataSourceConfig:n,onChange:a,showAccessOptions:s,sigV4AuthToggleEnabled:i,showForwardOAuthIdentityOption:r,azureAuthSettings:o,renderSigV4Editor:l}=e;let d;const[c,u]=(0,R.useState)(!1),h=(0,ie.Fg)(),p=(0,R.useCallback)((e=>{a(Object.assign({},n,e))}),[n,a]);switch(n.access){case"direct":d=(0,B.jsxs)(B.Fragment,{children:["Your access method is ",Nu||(Nu=(0,B.jsx)("em",{children:"Browser"})),", this means the URL needs to be accessible from the browser."]});break;case"proxy":d=(0,B.jsxs)(B.Fragment,{children:["Your access method is ",Fu||(Fu=(0,B.jsx)("em",{children:"Server"})),", this means the URL needs to be accessible from the grafana backend/server."]});break;default:d="Specify a complete HTTP URL (for example http://your_server:8080)"}const g=(0,B.jsx)(Le.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:$u,value:$u.filter((e=>e.value===n.access))[0]||Lu,onChange:e=>p({access:e.value})}),m=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(n.url),f=M.css`
    box-shadow: inset 0 0px 5px ${h.palette.red};
  `,v=(0,M.cx)({"width-20":!0,[f]:!m}),b=(0,B.jsx)(Z.I,{className:v,placeholder:t,value:n.url,"aria-label":Wt.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:e=>p({url:e.currentTarget.value})}),x=(null==o?void 0:o.azureAuthSupported)&&o.getAzureAuthEnabled(n)||!1;return(0,B.jsxs)("div",{className:"gf-form-group",children:[(0,B.jsxs)(B.Fragment,{children:[Du||(Du=(0,B.jsx)("h3",{className:"page-heading",children:"HTTP"})),(0,B.jsxs)("div",{className:"gf-form-group",children:[(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)(H,{label:"URL",labelWidth:13,tooltip:d,inputEl:b})}),s&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"gf-form-inline",children:[(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)(H,{label:"Access",labelWidth:13,inputWidth:20,inputEl:g})}),(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsxs)("label",{className:"gf-form-label query-keyword pointer",onClick:()=>u((e=>!e)),children:["HelpÂ ",(0,B.jsx)(E.J,{name:c?"angle-down":"angle-right",style:{marginBottom:0}})]})})]}),c&&(Pu||(Pu=(0,B.jsx)(Eu,{})))]}),"proxy"===n.access&&(0,B.jsxs)("div",{className:"gf-form-group",children:[(0,B.jsxs)("div",{className:"gf-form",children:[Au||(Au=(0,B.jsx)(_,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",children:"Allowed cookies"})),(0,B.jsx)(Es,{tags:n.jsonData.keepCookies,width:40,onChange:e=>p({jsonData:Object.assign({},n.jsonData,{keepCookies:e})})})]}),(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)(H,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:n.jsonData.timeout,onChange:e=>{p({jsonData:Object.assign({},n.jsonData,{timeout:parseInt(e.currentTarget.value,10)})})}})})]})]})]}),(0,B.jsxs)(B.Fragment,{children:[Mu||(Mu=(0,B.jsx)("h3",{className:"page-heading",children:"Auth"})),(0,B.jsxs)("div",{className:"gf-form-group",children:[(0,B.jsxs)("div",{className:"gf-form-inline",children:[(0,B.jsx)(uu,{label:"Basic auth",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-basic-auth",value:n.basicAuth,onChange:e=>{p({basicAuth:e.currentTarget.checked})}})}),(0,B.jsx)(uu,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-with-credentials",value:n.withCredentials,onChange:e=>{p({withCredentials:e.currentTarget.checked})}})})]}),(null==o?void 0:o.azureAuthSupported)&&(0,B.jsx)("div",{className:"gf-form-inline",children:(0,B.jsx)(uu,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-azure-auth",value:x,onChange:e=>{p(o.setAzureAuthEnabled(n,e.currentTarget.checked))}})})}),i&&(0,B.jsx)("div",{className:"gf-form-inline",children:(0,B.jsx)(uu,{label:"SigV4 auth",labelWidth:26,children:(0,B.jsx)(nc,{id:"http-settings-sigv4-auth",value:n.jsonData.sigV4Auth||!1,onChange:e=>{p({jsonData:Object.assign({},n.jsonData,{sigV4Auth:e.currentTarget.checked})})}})})}),"proxy"===n.access&&(0,B.jsx)(yu,{dataSourceConfig:n,onChange:e=>p({jsonData:e}),showForwardOAuthIdentityOption:r})]}),n.basicAuth&&(0,B.jsxs)(B.Fragment,{children:[Ru||(Ru=(0,B.jsx)("h6",{children:"Basic Auth Details"})),(0,B.jsx)("div",{className:"gf-form-group",children:(0,B.jsx)(pu,Object.assign({},e))})]}),(null==o?void 0:o.azureAuthSupported)&&x&&o.azureSettingsUI&&(0,B.jsx)(o.azureSettingsUI,{dataSourceConfig:n,onChange:a}),n.jsonData.sigV4Auth&&i&&l,(n.jsonData.tlsAuth||n.jsonData.tlsAuthWithCACert)&&(0,B.jsx)(Iu,{dataSourceConfig:n,onChange:a}),"proxy"===n.access&&(0,B.jsx)(xu,{dataSourceConfig:n,onChange:a})]})]})};var Bu;function zu(e){let{alertmanagerDataSources:t,options:n,onOptionsChange:a}=e;const s=(0,R.useMemo)((()=>t.map((e=>({label:e.name,value:e.uid,imgUrl:e.meta.info.logos.small,meta:e.meta})))),[t]);return(0,B.jsxs)(B.Fragment,{children:[Bu||(Bu=(0,B.jsx)("h3",{className:"page-heading",children:"Alerting"})),(0,B.jsxs)("div",{className:"gf-form-group",children:[(0,B.jsx)("div",{className:"gf-form-inline",children:(0,B.jsx)("div",{className:"gf-form",children:(0,B.jsx)(uu,{labelWidth:26,label:"Manage alerts via Alerting UI",children:(0,B.jsx)(nc,{value:!1!==n.jsonData.manageAlerts,onChange:e=>a(Object.assign({},n,{jsonData:Object.assign({},n.jsonData,{manageAlerts:e.currentTarget.checked})}))})})})}),(0,B.jsx)(ju,{children:(0,B.jsx)(uu,{tooltip:"The alertmanager that manages alerts for this data source",label:"Alertmanager data source",labelWidth:26,children:(0,B.jsx)(Le.Ph,{width:29,options:s,onChange:e=>a(Object.assign({},n,{jsonData:Object.assign({},n.jsonData,{alertmanagerUid:null==e?void 0:e.value})})),value:n.jsonData.alertmanagerUid})})})]})]})}var _u=n(22285),Uu=n(18373);const Hu=e=>({segment:M.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:M.css`
      color: ${e.palette.gray2};
    `,disabled:M.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}),Wu=["options","value","onChange","Component","className","allowCustomValue","allowEmptyValue","placeholder","disabled","inputMinWidth","inputPlaceholder","onExpandedChange","autofocus"];function qu(e){let{options:t,value:n,onChange:a,Component:s,className:i,allowCustomValue:r,allowEmptyValue:o,placeholder:l,disabled:d,inputMinWidth:c,inputPlaceholder:u,onExpandedChange:h,autofocus:p=!1}=e,g=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Wu);const[m,f,v,b]=sh(p,h),x=c?Math.max(c,f):f,y=(0,ie.yK)(Hu);if(!v){const e=(0,J.isObject)(n)?n.label:n;return(0,B.jsx)(m,{disabled:d,Component:s||(0,B.jsx)(lu,{className:(0,M.cx)(y.segment,{[y.queryPlaceholder]:void 0!==l&&!n,[y.disabled]:d},i),children:e||l})})}return(0,B.jsx)(Ku,Object.assign({},g,{value:n&&!(0,J.isObject)(n)?{value:n}:n,placeholder:u,options:t,width:x,onClickOutside:()=>b(!1),allowCustomValue:r,allowEmptyValue:o,onChange:e=>{b(!1),a(e)}}))}var Zu=n(80027);const Gu=["value","placeholder","options","onChange","onClickOutside","loadOptions","width","noOptionsMessage","allowCustomValue","allowEmptyValue"];function Ku(e){let{value:t,placeholder:n="",options:a=[],onChange:s,onClickOutside:i,loadOptions:r,width:o,noOptionsMessage:l="",allowCustomValue:d=!1,allowEmptyValue:c=!1}=e,u=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Gu);const h=(0,R.useRef)(null),p=(0,nt.l4)();let g,m=o>0?o/p.spacing.gridSize:void 0,f={};return r?(g=Le.qb,f={loadOptions:r,defaultOptions:!0}):g=Le.Ph,(0,B.jsx)("div",Object.assign({},u,{ref:h,children:(0,B.jsx)(g,Object.assign({width:m,noOptionsMessage:l,placeholder:n,autoFocus:!0,isOpen:!0,onChange:s,options:a,value:t,closeMenuOnSelect:!1,onCloseMenu:()=>{if(h&&h.current){const e=h.current.querySelector('input[id^="react-select-"]');e&&(e.value||c)?s({value:e.value,label:e.value}):i()}},allowCustomValue:d},f))}))}const Qu=["value","onChange","loadOptions","reloadOptionsOnChange","Component","className","allowCustomValue","allowEmptyValue","disabled","placeholder","inputMinWidth","inputPlaceholder","autofocus","onExpandedChange","noOptionMessageHandler"];function Ju(e){var t;let{value:n,onChange:a,loadOptions:s,reloadOptionsOnChange:i=!1,Component:r,className:o,allowCustomValue:l,allowEmptyValue:d,disabled:c,placeholder:u,inputMinWidth:h,inputPlaceholder:p,autofocus:g=!1,onExpandedChange:m,noOptionMessageHandler:f=Yu}=e,v=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Qu);const[b,x]=(0,Zu.Z)(s,[s]),[y,w,j,S]=sh(g,m),C=h?Math.max(h,w):w,k=(0,ie.yK)(Hu);if(!j){const e=(0,J.isObject)(n)?n.label:n;return(0,B.jsx)(y,{onClick:i?void 0:x,disabled:c,Component:r||(0,B.jsx)(lu,{className:(0,M.cx)(k.segment,{[k.queryPlaceholder]:void 0!==u&&!n,[k.disabled]:c},o),children:e||u})})}return(0,B.jsx)(Ku,Object.assign({},v,{value:n&&!(0,J.isObject)(n)?{value:n}:n,placeholder:p,options:null!==(t=b.value)&&void 0!==t?t:[],loadOptions:i?x:void 0,width:C,noOptionsMessage:f(b),allowCustomValue:l,allowEmptyValue:d,onClickOutside:()=>{S(!1)},onChange:e=>{S(!1),a(e)}}))}function Yu(e){return e.loading?"Loading options...":e.error?"Failed to load options":Array.isArray(e.value)&&0!==e.value.length?"":"No options found"}const Xu=["value","onChange","Component","className","placeholder","inputPlaceholder","disabled","autofocus","onExpandedChange"];function eh(e){let{value:t,onChange:n,Component:a,className:s,placeholder:i,inputPlaceholder:r,disabled:o,autofocus:l=!1,onExpandedChange:d}=e,c=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Xu);const u=(0,R.useRef)(null),[h,p]=(0,R.useState)(t),[g,m]=(0,R.useState)((0,tr.X1)((t||"").toString(),14).width),[f,,v,b]=sh(l,d),x=(0,ie.yK)(Hu);if((0,lc.Z)(u,(()=>{b(!1),n(h)})),!v)return(0,B.jsx)(f,{disabled:o,Component:a||(0,B.jsx)(lu,{className:(0,M.cx)(x.segment,{[x.queryPlaceholder]:void 0!==i&&!h,[x.disabled]:o},s),children:t||i})});const y=M.css`
    width: ${Math.max(g+20,32)}px;
  `;return(0,B.jsx)("input",Object.assign({},c,{ref:u,autoFocus:!0,className:(0,M.cx)("gf-form gf-form-input",y),value:h,placeholder:r,onChange:e=>{const{width:t}=(0,tr.X1)(e.target.value,14);m(t),p(e.target.value)},onBlur:()=>{b(!1),n(h)},onKeyDown:e=>{[13,27].includes(e.keyCode)&&(b(!1),n(h))}}))}var th;const nh=e=>{let{label:t,htmlFor:n,children:a,fill:s}=e;const i=(0,ie.wW)(ah);return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(ju,{children:[(0,B.jsx)(lu,{htmlFor:n,width:12,className:i.label,children:t}),a,s&&(0,B.jsx)("div",{className:i.fill,children:th||(th=(0,B.jsx)(lu,{children:""}))})]})})},ah=e=>({label:M.css`
    color: ${e.colors.primary.text};
  `,fill:M.css`
    flex-grow: 1;
    margin-bottom: ${e.spacing(.5)};
  `}),sh=(e,t)=>{const n=(0,R.useRef)(null),[a,s]=(0,R.useState)(e),[i,r]=(0,R.useState)(0),o=e=>{s(e),t&&t(e)};return[e=>{let{Component:t,onClick:a,disabled:s}=e;return(0,B.jsx)("div",{ref:n,onClick:s?void 0:()=>{o(!0),n&&n.current&&r(1.25*n.current.clientWidth),a&&a()},children:t})},i,a,o]};var ih=n(88675);function rh(e){let{children:t,inline:n=!1,onClose:a,closeOnMaskClick:s=!0,scrollableContent:i=!1,title:r,subtitle:o,width:l="40%",expandable:d=!1,tabs:c}=e;const u=(0,ie.wW)(oh),[h,p]=(0,R.useState)(!1),[g,m]=(0,R.useState)(!1),f=h?"100%":l,v=R.useRef(null),{dialogProps:b,titleProps:x}=(0,On.R)({},v),{overlayProps:y}=(0,Nn.Ir)({isDismissable:!1,isOpen:g,onClose:a},v);(0,R.useEffect)((()=>{m(!0)}),[]);const w=(0,B.jsx)("div",{className:u.content,children:t});return(0,B.jsx)(ih.Z,{level:null,handler:!1,open:g,onClose:a,maskClosable:s,placement:"right",width:f,getContainer:n?void 0:"body",style:{position:`${n&&"absolute"}`},className:u.drawer,"aria-label":"string"==typeof r?Wt.wl.components.Drawer.General.title(r):Wt.wl.components.Drawer.General.title("no title"),children:(0,B.jsx)(et.MT,{restoreFocus:!0,contain:!0,autoFocus:!0,children:(0,B.jsxs)("div",Object.assign({className:u.container},y,b,{ref:v,children:["string"==typeof r&&(0,B.jsxs)("div",{className:u.header,children:[(0,B.jsxs)("div",{className:u.actions,children:[d&&!h&&(0,B.jsx)(se.h,{name:"angle-left",size:"xl",onClick:()=>p(!0),"aria-label":Wt.wl.components.Drawer.General.expand}),d&&h&&(0,B.jsx)(se.h,{name:"angle-right",size:"xl",onClick:()=>p(!1),"aria-label":Wt.wl.components.Drawer.General.contract}),(0,B.jsx)(se.h,{name:"times",size:"xl",onClick:a,"aria-label":Wt.wl.components.Drawer.General.close})]}),(0,B.jsxs)("div",{className:u.titleWrapper,children:[(0,B.jsx)("h3",Object.assign({},x,{children:r})),"string"==typeof o&&(0,B.jsx)("div",{className:"muted",children:o}),"string"!=typeof o&&o,c&&(0,B.jsx)("div",{className:u.tabsWrapper,children:c})]})]}),"string"!=typeof r&&r,(0,B.jsx)("div",{className:u.contentScroll,children:i?(0,B.jsx)(ye.$,{autoHeightMin:"100%",children:w}):w})]}))})})}const oh=e=>({container:M.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:M.css`
      .drawer-content {
        background-color: ${e.colors.background.primary};
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      &.drawer-open .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
        opacity: 1;
      }
      .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
      }
      .drawer-open .drawer-content-wrapper {
        box-shadow: ${e.shadows.z3};
      }
      z-index: ${e.zIndex.dropdown};
    `,header:M.css`
      background-color: ${e.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${e.spacing(.5)};
    `,actions:M.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:M.css`
      margin-bottom: ${e.spacing(3)};
      padding: ${e.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,M.css)({padding:e.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,M.css)({minHeight:0,flex:1}),tabsWrapper:(0,M.css)({paddingLeft:e.spacing(2),margin:e.spacing(3,-1,-3,-3)})});var lh=n(93214),dh=n(78890),ch=n(65303);const uh=e=>{let{min:t,max:n,onChange:a,onAfterChange:s,orientation:i="horizontal",reverse:r,step:o,value:l,ariaLabelForHandle:d,marks:c,included:u}=e;const h="horizontal"===i,p=(0,nt.l4)(),g=(0,ch.W)(p,h,Boolean(c)),m=dh.ZP,[f,v]=(0,R.useState)(null!=l?l:t),b=(0,R.useCallback)((e=>{v(e),a&&a(e)}),[v,a]),x=(0,R.useCallback)((e=>{let t=+e.target.value;Number.isNaN(t)&&(t=0),v(t),a&&a(t),s&&s(t)}),[a,s]),y=(0,R.useCallback)((e=>{const a=+e.target.value;a>n?v(n):a<t&&v(t)}),[n,t]),w=h?[]:[g.sliderInputVertical],j=h?[]:[g.sliderInputFieldVertical];return(0,B.jsxs)("div",{className:(0,M.cx)(g.container,g.slider),children:[(0,B.jsx)(lh.xB,{styles:g.tooltip}),(0,B.jsxs)("label",{className:(0,M.cx)(g.sliderInput,...w),children:[(0,B.jsx)(m,{min:t,max:n,step:o,defaultValue:l,value:f,onChange:b,onAfterChange:s,vertical:!h,reverse:r,ariaLabelForHandle:d,marks:c,included:u}),(0,B.jsx)($e.I,{type:"text",className:(0,M.cx)(g.sliderInputField,...j),value:`${f}`,onChange:x,onBlur:y,min:t,max:n})]})]})};uh.displayName="Slider";const hh=e=>{let{min:t,max:n,onChange:a,onAfterChange:s,orientation:i="horizontal",reverse:r,step:o,formatTooltipResult:l,value:d,tooltipAlwaysVisible:c=!0}=e;const u="horizontal"===i,h=(0,nt.l4)(),p=(0,ch.W)(h,u),g=(0,dh.u7)(dh.e6);return(0,B.jsxs)("div",{className:(0,M.cx)(p.container,p.slider),children:[(0,B.jsx)(lh.xB,{styles:p.tooltip}),(0,B.jsx)(g,{tipProps:{visible:c,placement:u?"top":"right"},min:t,max:n,step:o,defaultValue:d,tipFormatter:e=>l?l(e):e,onChange:a,onAfterChange:s,vertical:!u,reverse:r,tabIndex:[0,1]})]})};hh.displayName="Range";var ph=n(80916);const gh=["defaultValues","onSubmit","validateOnMount","validateFieldsOnMount","children","validateOn","maxWidth"],mh=["handleSubmit","trigger","formState"];function fh(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}function vh(e){let{defaultValues:t,onSubmit:n,validateOnMount:a=!1,validateFieldsOnMount:s,children:i,validateOn:r="onSubmit",maxWidth:o=600}=e,l=fh(e,gh);const d=(0,ph.cI)({mode:r,defaultValues:t}),{handleSubmit:c,trigger:u,formState:h}=d,p=fh(d,mh);return(0,R.useEffect)((()=>{a&&u(s)}),[u,s,a]),(0,B.jsx)("form",Object.assign({className:M.css`
        max-width: ${"none"!==o?o+"px":o};
        width: 100%;
      `,onSubmit:c(n)},l,{children:i(Object.assign({errors:h.errors,formState:h},p))}))}const bh=ph.Qr;function xh(e){let{label:t,icon:n,options:a,onChange:s,variant:i,minWidth:r=16,size:o="sm",isFullWidth:l=!0,menuPlacement:d}=e;const[c,u]=(0,R.useState)(!1),h=(0,ie.l4)();return(0,B.jsxs)(B.Fragment,{children:[!c&&(0,B.jsx)(re.zx,{size:o||"sm",icon:n||"plus",onClick:()=>u(!0),variant:i,fullWidth:l,"aria-label":Wt.wl.components.ValuePicker.button(t),children:t}),c&&(0,B.jsx)("span",{style:{minWidth:h.spacing(r),flexGrow:l?1:void 0},children:(0,B.jsx)(Le.Ph,{placeholder:t,options:a,"aria-label":Wt.wl.components.ValuePicker.select(t),isOpen:!0,onCloseMenu:()=>u(!1),autoFocus:!0,onChange:e=>{u(!1),s(e)},menuPlacement:d})})]})}const yh=(0,R.memo)((e=>{const{options:t,onChange:n}=e,a=(0,R.useCallback)((e=>n(e.target.value)),[n]);return(0,B.jsx)($e.I,{placeholder:"Enter regular expression",defaultValue:t,onBlur:a})}));yh.displayName="FieldNameByRegexMatcherEditor";const wh={id:tt.FieldMatcherID.byRegexp,component:yh,matcher:tt.fieldMatchers.get(tt.FieldMatcherID.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:e=>e};var jh=n(74562);const Sh=(0,R.memo)((e=>{const{data:t,options:n,onChange:a,id:s}=e,i=(0,jh.IX)(t),r=(0,jh.nw)(i,n),o=(0,R.useCallback)((e=>{if((0,jh.w3)(e.value,i))return a(e.value)}),[i,a]),l=r.find((e=>e.value===n));return(0,B.jsx)(Le.Ph,{value:l,options:r,onChange:o,inputId:s})}));Sh.displayName="FieldNameMatcherEditor";const Ch={id:tt.FieldMatcherID.byName,component:Sh,matcher:tt.fieldMatchers.get(tt.FieldMatcherID.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>e},kh=(0,R.memo)((e=>{const{data:t,options:n,onChange:a}=e,{readOnly:s,prefix:i}=n,r=(0,jh.IX)(t),o=(0,jh.nw)(r,void 0),l=(0,R.useCallback)((e=>{if(Array.isArray(e))return a(Object.assign({},n,{names:e.reduce(((e,t)=>(0,jh.w3)(t.value,r)?(e.push(t.value),e):e),[])}))}),[r,a,n]);if(s){var d;const e=(null!==(d=n.names)&&void 0!==d?d:[]).join(", ");return(0,B.jsx)($e.I,{value:e,readOnly:!0,disabled:!0,prefix:i})}return(0,B.jsx)(Le.NU,{value:n.names,options:o,onChange:l})}));kh.displayName="FieldNameMatcherEditor";const Th={id:tt.FieldMatcherID.byNames,component:kh,matcher:tt.fieldMatchers.get(tt.FieldMatcherID.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>{var t;return(null!==(t=e.names)&&void 0!==t?t:[]).join(", ")},excludeFromPicker:!0},Ih=(0,R.memo)((e=>{const{data:t,options:n,onChange:a,id:s}=e,i=Nh(t),r=Fh(i,n),o=(0,R.useCallback)((e=>a(e.value)),[a]),l=r.find((e=>e.value===n));return(0,B.jsx)(Le.Ph,{inputId:s,value:l,options:r,onChange:o})}));Ih.displayName="FieldTypeMatcherEditor";const Oh=[{value:tt.FieldType.number,label:"Numeric"},{value:tt.FieldType.string,label:"String"},{value:tt.FieldType.time,label:"Time"},{value:tt.FieldType.boolean,label:"Boolean"},{value:tt.FieldType.trace,label:"Traces"},{value:tt.FieldType.other,label:"Other"}],Nh=e=>(0,R.useMemo)((()=>{const t=new Map;for(const e of Oh)t.set(e.value,0);for(const n of e)for(const e of n.fields){const n=e.type||tt.FieldType.other;let a=t.get(n);a||(a=0),t.set(n,a+1)}return t}),[e]),Fh=(e,t)=>(0,R.useMemo)((()=>{let n=!1;const a=[];for(const s of Oh){const i=e.get(s.value),r=t===s.value;(i||r)&&a.push(Object.assign({},s,{label:`${s.label} (${e.get(s.value)})`})),r&&(n=!0)}return t&&!n&&a.push({value:t,label:`${t} (No matches)`}),a}),[e,t]),Dh={id:tt.FieldMatcherID.byType,component:Ih,matcher:tt.fieldMatchers.get(tt.FieldMatcherID.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:e=>e},Ph=(0,R.memo)((e=>{const{data:t,options:n,onChange:a}=e,s=Mh(t),i=Rh(s),r=(0,R.useCallback)((e=>{if(e.value&&s.has(e.value))return a(e.value)}),[s,a]),o=i.find((e=>e.value===n));return(0,B.jsx)(Le.Ph,{value:o,options:i,onChange:r})}));Ph.displayName="FieldsByFrameRefIdMatcher";const Ah={id:tt.FieldMatcherID.byFrameRefID,component:Ph,matcher:tt.fieldMatchers.get(tt.FieldMatcherID.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:e=>e},Mh=e=>(0,R.useMemo)((()=>{const t=new Set;for(const n of e)n.refId&&t.add(n.refId);return t}),[e]),Rh=e=>(0,R.useMemo)((()=>Array.from(e).map((e=>({value:e,label:e})))),[e]),$h=new tt.Registry((()=>[Ch,wh,Dh,Ah,Th]));var Lh=n(43397);const Eh=["href","children"];const Vh=(0,R.forwardRef)(((e,t)=>{let{href:n,children:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Eh);const i=tt.locationUtil.stripBaseFromUrl(tt.textUtil.sanitizeUrl(null!=n?n:""));return(0,B.jsx)(Lh.Link,Object.assign({ref:t,to:i},s,{children:a}))}));Vh.displayName="Link";var Bh=n(4126);const zh=["children","className"];const _h=(0,ie.Bb)((e=>({legend:M.css`
      font-size: ${e.typography.heading.h3};
      font-weight: ${e.typography.weight.regular};
      margin: 0 0 ${e.spacing.md} 0;
    `}))),Uh=e=>{let{children:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,zh);const s=(0,ie.Fg)(),i=_h(s);return(0,B.jsx)("legend",Object.assign({className:(0,M.cx)(i.legend,n)},a,{children:t}))},Hh=["label","children","className"];const Wh=e=>{let{label:t,children:n,className:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Hh);const i=(0,ie.l4)(),r=qh(i);return(0,B.jsxs)("fieldset",Object.assign({className:(0,M.cx)(r.wrapper,a)},s,{children:[t&&(0,B.jsx)(Uh,{children:t}),n]}))},qh=(0,ie.Bb)((e=>({wrapper:M.css`
      margin-bottom: ${e.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))),Zh=["children","className","grow"];const Gh=e=>{let{children:t,className:n,grow:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Zh);const i=(0,ie.Fg)(),r=Kh(i,a);return(0,B.jsx)("div",Object.assign({className:(0,M.cx)(r.container,n)},s,{children:t}))};Gh.displayName="InlineSegmentGroup";const Kh=(e,t)=>({container:M.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} 0 auto;
      margin-bottom: ${e.spacing.xs};
    `}),Qh=["name","control","children"];const Jh=e=>{let{name:t,control:n,children:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Qh);const{fields:i,append:r,prepend:o,remove:l,swap:d,move:c,insert:u}=(0,ph.Dq)(Object.assign({control:n,name:t},s));return a({fields:i,append:r,prepend:o,remove:l,swap:d,move:c,insert:u})};var Yh=n(90242),Xh=n(10941),ep=n(27586);const tp=R.forwardRef(((e,t)=>{let{children:n,active:a=!1,disabled:s=!1,size:i="md",onChange:r,onClick:o,id:l,name:d,description:c,fullWidth:u,"aria-label":h}=e;const p=(0,ie.l4)(),g=np(p,i,u);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("input",{type:"radio",className:g.radio,onChange:r,onClick:o,disabled:s,id:l,checked:a,name:d,"aria-label":h,ref:t}),(0,B.jsx)("label",{className:g.radioLabel,htmlFor:l,title:c,children:n})]})}));tp.displayName="RadioButton";const np=(0,ie.Bb)(((e,t,n)=>{const{fontSize:a,height:s,padding:i}=(0,us.iL)(t,e),r=e.colors.text.secondary,o=e.colors.text.primary,l=s*e.spacing.gridSize-4-2;return{radio:M.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,Yt.getFocusStyles)(e)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,Yt.getMouseFocusStyles)(e)}
      }

      &:disabled + label {
        color: ${e.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:M.css`
      display: inline-block;
      position: relative;
      font-size: ${a};
      height: ${l}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${l}px;
      color: ${r};
      padding: ${e.spacing(0,i)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${n?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${o};
      }
    `}}));function ap(e){let{options:t,value:n,onChange:a,onClick:s,disabled:i,disabledOptions:r,size:o="md",id:l,className:d,fullWidth:c=!1,autoFocus:u=!1}=e;const h=(0,R.useCallback)((e=>()=>{a&&a(e.value)}),[a]),p=(0,R.useCallback)((e=>()=>{s&&s(e.value)}),[s]),g=null!=l?l:(0,J.uniqueId)("radiogroup-"),m=(0,R.useRef)(g),f=(0,ie.wW)(sp),v=(0,R.useRef)(null);return(0,R.useEffect)((()=>{u&&v.current&&v.current.focus()}),[u]),(0,B.jsx)("div",{className:(0,M.cx)(f.radioGroup,c&&f.fullWidth,d),children:t.map(((e,t)=>{const a=r&&e.value&&r.includes(e.value);return(0,B.jsxs)(tp,{size:o,disabled:a||i,active:n===e.value,"aria-label":e.ariaLabel,onChange:h(e),onClick:p(e),id:`option-${e.value}-${g}`,name:m.current,description:e.description,fullWidth:c,ref:n===e.value?v:void 0,children:[e.icon&&(0,B.jsx)(E.J,{name:e.icon,className:f.icon}),e.imgUrl&&(0,B.jsx)("img",{src:e.imgUrl,alt:e.label,className:f.img}),e.label," ",e.component?(0,B.jsx)(e.component,{}):null]},`o.label-${t}`)}))})}ap.displayName="RadioButtonGroup";const sp=e=>({radioGroup:(0,M.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${e.components.input.borderColor}`,borderRadius:e.shape.borderRadius(),padding:"2px"}),fullWidth:(0,M.css)({display:"flex"}),icon:M.css`
      margin-right: 6px;
    `,img:M.css`
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      margin-right: ${e.spacing(1)};
    `}),ip=e=>{let{id:t,name:n,label:a,checked:s,disabled:i,description:r,onChange:o}=e;const l=(0,ie.wW)(rp);return(0,B.jsxs)("label",{title:r,className:l.label,children:[(0,B.jsx)("input",{id:t,name:n,type:"radio",checked:s,disabled:i,className:l.input,onChange:()=>o&&o(t)}),a]})},rp=e=>({input:M.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${e.colors.background.canvas};
    margin: 0;
    width: ${e.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same ð */
    height: ${e.spacing(2)};
    border: 1px solid ${e.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${e.v1.palette.white};
      border: 5px solid ${e.colors.primary.main};
    }

    :disabled {
      background-color: ${e.colors.action.disabledBackground} !important;
      border-color: ${e.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${e.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${e.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${e.colors.background.canvas}, 0 0 0 3px ${e.colors.primary.main};
    }
  `,label:M.css`
    font-size: ${e.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${e.spacing(2)} auto;
    gap: ${e.spacing(1)};
  `});function op(e){let{name:t,id:n,options:a,value:s,onChange:i,className:r,disabled:o,disabledOptions:l=[]}=e;const d=(0,ie.wW)(lp),c=null!=n?n:(0,J.uniqueId)("radiogroup-list-");return(0,B.jsx)("div",{id:n,className:(0,M.cx)(d.container,r),role:"radiogroup",children:a.map(((e,n)=>{const a=`${c}-${n}`,r=s&&s===e.value,d=o||l.some((t=>t===e.value));return(0,B.jsx)(ip,{id:a,name:t,label:e.label,description:e.description,checked:r,disabled:d,onChange:()=>i&&e.value&&i(e.value)},a)}))})}const lp=e=>({container:M.css`
    display: grid;
    gap: ${e.spacing(1)};
  `}),dp=["defaultValue","minWidth","maxWidth","onCommitChange","onKeyDown","onBlur"];const cp=R.forwardRef(((e,t)=>{const{defaultValue:n="",minWidth:a=10,maxWidth:s,onCommitChange:i,onKeyDown:r,onBlur:o}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,dp),[d,c]=R.useState(n),[u,h]=R.useState(a);return(0,R.useEffect)((()=>{h(function(e,t,n){if(!e)return t;const a=3,s=(0,tr.X1)(e.toString(),14).width/8+a;if(t&&s<t)return t;if(n&&s>n)return s;return s}(d.toString(),a,s))}),[d,s,a]),(0,B.jsx)($e.I,Object.assign({},l,{ref:t,value:d.toString(),onChange:e=>{c(e.currentTarget.value)},width:u,onBlur:e=>{o?o(e):i&&i(e)},onKeyDown:e=>{r?r(e):"Enter"===e.key&&i&&i(e)},"data-testid":"autosize-input"}))}));var up;cp.displayName="AutoSizeInput";const hp=["value","width","onChange"];const pp=R.forwardRef(((e,t)=>{let{value:n,width:a,onChange:s}=e,i=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,hp);const r=R.useRef(null),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=R.useRef(null);return R.useEffect((()=>{t.forEach((e=>{e&&("function"==typeof e?e(a.current):e.current=a.current)}))}),[t]),a}(t,r),l=""!==n?(0,B.jsx)(re.zx,{icon:"times",fill:"text",size:"sm",onClick:e=>{var t;null===(t=r.current)||void 0===t||t.focus(),s(""),e.stopPropagation()},children:"Clear"}):null;return(0,B.jsx)($e.I,Object.assign({prefix:up||(up=(0,B.jsx)(E.J,{name:"search"})),suffix:l,width:a,type:"text",value:n?(0,tt.unEscapeStringFromRegex)(n):"",onChange:e=>s((0,tt.escapeStringForRegex)(e.currentTarget.value))},i,{ref:o}))}));pp.displayName="FilterInput";const gp=["isConfigured","onReset"];const mp=e=>{let{isConfigured:t,onReset:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,gp);return(0,B.jsxs)(Js.Lh,{children:[!t&&(0,B.jsx)($e.I,Object.assign({},a,{type:"password"})),t&&(0,B.jsx)($e.I,Object.assign({},a,{type:"text",disabled:!0,value:"configured"})),t&&(0,B.jsx)(re.zx,{onClick:n,variant:"secondary",children:"Reset"})]})},fp=["isConfigured","onReset"];const vp=e=>({configuredStyle:M.css`
      min-height: ${e.spacing(e.components.height.md)};
      padding-top: ${e.spacing(.5)};
      resize: none;
    `}),bp=e=>{let{isConfigured:t,onReset:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,fp);const s=(0,nt.wW)(vp);return(0,B.jsxs)(Js.Lh,{children:[!t&&(0,B.jsx)(eo,Object.assign({},a)),t&&(0,B.jsx)(eo,Object.assign({},a,{rows:1,disabled:!0,value:"configured",className:(0,M.cx)(s.configuredStyle)})),t&&(0,B.jsx)(re.zx,{onClick:n,variant:"secondary",children:"Reset"})]})},xp=["label","description","value","htmlValue","onChange","disabled","className"];const yp=R.forwardRef(((e,t)=>{let{label:n,description:a,value:s,htmlValue:i,onChange:r,disabled:o,className:l}=e,d=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,xp);const c=(0,R.useCallback)((e=>{r&&r(e)}),[r]),u=(0,ie.wW)(wp);return(0,B.jsxs)("label",{className:(0,M.cx)(u.wrapper,l),children:[(0,B.jsx)("input",Object.assign({type:"checkbox",className:u.input,checked:s,disabled:o,onChange:c,value:i},d,{ref:t})),(0,B.jsx)("span",{className:u.checkmark}),n&&(0,B.jsx)("span",{className:u.label,children:n}),a&&(0,B.jsx)("span",{className:u.description,children:a})]})})),wp=(0,ie.Bb)((e=>{const t=(0,Bh.F)(e);return{wrapper:M.css`
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:M.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,Yt.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,Yt.getMouseFocusStyles)(e)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${e.colors.primary.main};
        border: none;

        &:hover {
          background: ${e.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${e.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${e.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${e.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${e.colors.action.disabledText};
        }
      }
    `,checkmark:M.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.components.input.background};
      border: 1px solid ${e.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${e.components.input.borderHover};
      }
    `,label:(0,M.cx)(t.label,M.css`
        position: relative;
        z-index: 2;
        padding-left: ${e.spacing(1)};
        white-space: nowrap;
        cursor: pointer;
        position: relative;
        top: -3px;
      `),description:(0,M.cx)(t.description,M.css`
        line-height: ${e.typography.bodySmall.lineHeight};
        padding-left: ${e.spacing(3)};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}}));function jp(e){const t=e.lastIndexOf("."),n=e.substring(t),a=e.substring(0,t);return a.length<16?e:`${a.substring(0,16)}...${n}`}yp.displayName="Checkbox";const Sp=e=>{let{onFileUpload:t,className:n,children:a="Upload file",accept:s="*",size:i="md"}=e;const r=(0,ie.wW)(Cp(i)),[o,l]=(0,R.useState)(""),d=(0,Fa.Z)(),c=(0,R.useCallback)((e=>{var n,a;const s=null===(n=e.currentTarget)||void 0===n||null===(a=n.files)||void 0===a?void 0:a[0];var i;s&&l(null!==(i=s.name)&&void 0!==i?i:"");t(e)}),[t]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("input",{type:"file",id:d,className:r.fileUpload,onChange:c,multiple:!1,accept:s,"data-testid":Wt.wl.components.FileUpload.inputField}),(0,B.jsxs)("label",{role:"button",htmlFor:d,className:(0,M.cx)(r.labelWrapper,n),children:[(0,B.jsx)(E.J,{name:"upload",className:r.icon}),a]}),o&&(0,B.jsx)("span",{"aria-label":"File name",className:r.fileName,"data-testid":Wt.wl.components.FileUpload.fileNameSpan,children:jp(o)})]})},Cp=e=>t=>{const n=(0,re.fW)({theme:t,variant:"primary",size:e,iconOnly:!1}),a=(0,Yt.getFocusStyles)(t);return{fileUpload:(0,M.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":a,"&:focus-visible + label":a}),labelWrapper:n.button,icon:n.icon,fileName:(0,M.css)({marginLeft:t.spacing(.5)})}};var kp,Tp=n(66149);const Ip="Remove file";function Op(e){var t,n;let{file:a,removeFile:s}=e;const i=(0,ie.wW)(Np),{file:r,progress:o,error:l,abortUpload:d,retryUpload:c}=a,u=(0,tt.getValueFormat)("decbytes")(r.size);return(0,B.jsxs)("div",{className:i.fileListContainer,children:[(0,B.jsxs)("span",{className:i.fileNameWrapper,children:[kp||(kp=(0,B.jsx)(E.J,{name:"file-blank",size:"lg","aria-hidden":!0})),(0,B.jsx)("span",{className:i.padding,children:jp(r.name)}),(0,B.jsx)("span",{children:(0,tt.formattedValueToString)(u)})]}),(0,B.jsx)("div",{className:i.fileNameWrapper,children:l?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("span",{className:i.error,children:l.message}),c&&(t||(t=(0,B.jsx)(se.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:c}))),s&&(0,B.jsx)(se.h,{className:c?i.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>s(a),tooltip:Ip,"aria-label":Ip})]}):o&&r.size>o?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("progress",{className:i.progressBar,max:r.size,value:o}),(0,B.jsxs)("span",{className:i.paddingLeft,children:[Math.round(o/r.size*100),"%"]}),d&&(n||(n=(0,B.jsx)(re.zx,{variant:"secondary",type:"button",fill:"text",onClick:d,children:"Cancel upload"})))]}):s&&(0,B.jsx)(se.h,{name:"trash-alt",onClick:()=>s(a),tooltip:Ip,"aria-label":Ip,type:"button",tooltipPlacement:"top"})})]})}function Np(e){return{fileListContainer:M.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${e.spacing(2)};
      border: 1px dashed ${e.colors.border.medium};
      background-color: ${e.colors.background.secondary};
      margin-top: ${e.spacing(1)};
    `,fileNameWrapper:M.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:M.css`
      padding: ${e.spacing(0,1)};
    `,paddingLeft:M.css`
      padding-left: ${e.spacing(2)};
    `,marginLeft:M.css`
      margin-left: ${e.spacing(1)};
    `,error:M.css`
      padding-right: ${e.spacing(2)};
      color: ${e.colors.error.text};
    `,progressBar:M.css`
      border-radius: ${e.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${e.colors.border.weak};
        border-radius: ${e.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${e.colors.primary.main};
        border-radius: ${e.spacing(1)};
      }
    `}}var Fp;function Dp(e){let{options:t,children:n,readAs:a,onLoad:s,fileListRenderer:i,onFileRemove:r}=e;const[o,l]=(0,R.useState)([]),[d,c]=(0,R.useState)([]),u=(0,R.useCallback)(((e,t)=>{l((n=>n.map((n=>n.id===e.id?(t(n),n):n))))}),[]),h=(0,R.useCallback)(((e,n,i)=>{let r=e.map(Lp);if(!1===(null==t?void 0:t.multiple)?l(r):l((e=>[...e,...r])),x(n),null!=t&&t.onDrop)t.onDrop(e,n,i);else for(const e of r){const t=new FileReader,n=()=>{a?t[a](e.file):t.readAsText(e.file)};u(e,(a=>{a.abortUpload=()=>{t.abort()},a.retryUpload=()=>{u(e,(e=>{e.error=null,e.progress=void 0})),n()}})),t.onabort=()=>{u(e,(e=>{e.error=new DOMException("Aborted")}))},t.onprogress=t=>{u(e,(e=>{e.progress=t.loaded}))},t.onload=()=>{null==s||s(t.result)},t.onerror=()=>{u(e,(e=>{e.error=t.error}))},n()}}),[s,t,a,u]),p=e=>{const t=o.filter((t=>e.id!==t.id));l(t),null==r||r(e)},{getRootProps:g,getInputProps:m,isDragActive:f}=(0,Tp.uI)(Object.assign({},t,{useFsAccessApi:!1,onDrop:h,accept:Ap(null==t?void 0:t.accept)})),v=Ep((0,ie.l4)(),f),b=o.map((e=>i?i(e,p):(0,B.jsx)(Op,{file:e,removeFile:p},e.id))),x=e=>{let t=[];e.map((e=>{e.errors.map((e=>{-1===t.indexOf(e.message)&&t.push(e.message)}))})),c(t)},y=()=>{c([])};return(0,B.jsxs)("div",{className:v.container,children:[(0,B.jsxs)("div",Object.assign({"data-testid":"dropzone"},g({className:v.dropzone}),{children:[(0,B.jsx)("input",Object.assign({},m())),null!=n?n:(0,B.jsx)(Mp,{primaryText:Rp(o,t)})]})),d.length>0&&(0,B.jsx)("div",{className:v.errorAlert,children:(0,B.jsx)(Gl.b,{title:"Upload failed",severity:"error",onRemove:y,children:d.map((e=>(0,B.jsx)("div",{children:e},e)))})}),(null==t?void 0:t.accept)&&(0,B.jsx)("small",{className:(0,M.cx)(v.small,v.acceptMargin),children:$p(t.accept)}),b]})}function Pp(e){return["txt","json","csv","xls","yml"].some((t=>e.match(t)))?"text/plain":"application/octet-stream"}function Ap(e){return(0,J.isString)(e)?{[Pp(e)]:[e]}:Array.isArray(e)?e.reduce(((e,t)=>{const n=Pp(t);return e[n]=e[n]?[...e[n],t]:[t],e}),{}):e}function Mp(e){let{primaryText:t="Upload file",secondaryText:n="Drag and drop here or browse"}=e;const a=Ep((0,ie.l4)());return(0,B.jsxs)("div",{className:a.iconWrapper,children:[Fp||(Fp=(0,B.jsx)(E.J,{name:"upload",size:"xxl"})),(0,B.jsx)("h3",{children:t}),(0,B.jsx)("small",{className:a.small,children:n})]})}function Rp(e,t){return void 0===(null==t?void 0:t.multiple)||null!=t&&t.multiple?"Upload file":e.length?"Replace file":"Upload file"}function $p(e){return(0,J.isString)(e)?`Accepted file type: ${e}`:Array.isArray(e)?`Accepted file types: ${e.join(", ")}`:`Accepted file types: ${Object.values(e).flat().join(", ")}`}function Lp(e){return{id:(0,J.uniqueId)("file"),file:e,error:null}}function Ep(e,t){return{container:M.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:M.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${e.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${e.colors.border.medium};
      background-color: ${t?e.colors.background.secondary:e.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:M.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:M.css`
      margin: ${e.spacing(2,0,1)};
    `,small:M.css`
      color: ${e.colors.text.secondary};
    `,errorAlert:M.css`
      padding-top: 10px;
    `}}const Vp=e=>tt.dateMath.isValid(e.from)&&tt.dateMath.isValid(e.to),Bp=()=>{},zp=e=>{let{value:t,onChange:n,onChangeTimeZone:a=Bp,clearable:s,hideTimeZone:i=!0,timeZone:r="browser",placeholder:o="Select time range",isReversed:l=!0,hideQuickRanges:d=!1,disabled:c=!1}=e;const[u,h]=(0,R.useState)(!1),p=(0,nt.l4)(),g=_p(p,c),m=()=>{h(!1)};return(0,B.jsxs)("div",{className:g.container,children:[(0,B.jsxs)("div",{tabIndex:0,className:g.pickerInput,"aria-label":Wt.wl.components.TimePicker.openButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),c||h(!u)},children:[Vp(t)?(0,B.jsx)(ss,{value:t,timeZone:r}):(0,B.jsx)("span",{className:g.placeholder,children:o}),!c&&(0,B.jsxs)("span",{className:g.caretIcon,children:[Vp(t)&&s&&(0,B.jsx)(E.J,{className:g.clearIcon,name:"times",size:"lg",onClick:e=>{e.stopPropagation();const t=(0,tt.dateTime)(null),a=(0,tt.dateTime)(null);n({from:t,to:a,raw:{from:t,to:a}})}}),(0,B.jsx)(E.J,{name:u?"angle-up":"angle-down",size:"lg"})]})]}),u&&(0,B.jsx)(Mt.L,{includeButtonPress:!1,onClick:m,children:(0,B.jsx)(Wa,{timeZone:r,value:Vp(t)?t:(0,tt.getDefaultTimeRange)(),onChange:e=>{m(),n(e)},quickOptions:ea,onChangeTimeZone:a,className:g.content,hideTimeZone:i,isReversed:l,hideQuickRanges:d})})]})},_p=(0,ie.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,$e.H)({theme:e,invalid:!1});return{container:M.css`
      display: flex;
      position: relative;
    `,content:M.css`
      margin-left: 0;
    `,pickerInput:(0,M.cx)(n.input,t&&n.inputDisabled,n.wrapper,M.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${e.v1.spacing.formInputHeight-2}px;
      `),caretIcon:(0,M.cx)(n.suffix,M.css`
        position: relative;
        top: -1px;
        margin-left: ${e.v1.spacing.xs};
      `),clearIcon:M.css`
      margin-right: ${e.v1.spacing.xs};
      &:hover {
        color: ${e.v1.colors.linkHover};
      }
    `,placeholder:M.css`
      color: ${e.v1.colors.formInputPlaceholderText};
      opacity: 1;
    `}})),Up=/^now$|^now\-(\d{1,10})([wdhms])$/,Hp=e=>({from:Zp(e.from),to:Zp(e.to)}),Wp=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();if(!qp(e))return{isValid:!1,errorMessage:"Value not in relative time format."};const n=Zp(e);return n>Math.ceil(t/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}},qp=e=>Up.test(e),Zp=e=>{const t=Up.exec(e);if(!t||3!==t.length)return 0;const[,n,a]=t,s=parseInt(n,10);return isNaN(s)?0:s*Gp[a]},Gp={w:604800,d:86400,h:3600,m:60,s:1},Kp=e=>e<=0?"now":e>=Gp.w&&e%Gp.w==0?`now-${e/Gp.w}w`:e>=Gp.d&&e%Gp.d==0?`now-${e/Gp.d}d`:e>=Gp.h&&e%Gp.h==0?`now-${e/Gp.h}h`:e>=Gp.m&&e%Gp.m==0?`now-${e/Gp.m}m`:`now-${e}s`;var Qp,Jp,Yp,Xp;const eg=ea.filter((e=>qp(e.from)));function tg(e){const{timeRange:t,onChange:n}=e,[a,s]=(0,R.useState)(!1),i=(0,R.useCallback)((()=>s(!1)),[]),r=(e=>{const t=Kp(e.from),n=Kp(e.to);return{from:t,to:n,display:`${t} to ${n}`}})(t),[o,l]=(0,R.useState)({value:r.from,validation:Wp(r.from)}),[d,c]=(0,R.useState)({value:r.to,validation:Wp(r.to)}),u=(0,ie.wW)(sg(o.validation.errorMessage,d.validation.errorMessage)),h=(0,R.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),s(!a)}),[a]);return(0,B.jsxs)("div",{className:u.container,children:[(0,B.jsxs)("div",{tabIndex:0,className:u.pickerInput,onClick:h,children:[(0,B.jsx)("span",{className:u.clockIcon,children:Qp||(Qp=(0,B.jsx)(E.J,{name:"clock-nine"}))}),(0,B.jsxs)("span",{children:[r.from," to ",r.to]}),(0,B.jsx)("span",{className:u.caretIcon,children:(0,B.jsx)(E.J,{name:a?"angle-up":"angle-down",size:"lg"})})]}),a&&(0,B.jsx)(Mt.L,{includeButtonPress:!1,onClick:i,children:(0,B.jsx)("div",{className:u.content,children:(0,B.jsxs)("div",{className:u.body,children:[(0,B.jsx)(ye.Z,{className:u.leftSide,hideHorizontalTrack:!0,children:(0,B.jsx)(Ra,{title:"Example time ranges",options:eg,onChange:e=>{const t=Hp(e);t&&(i(),l(Object.assign({},o,{value:e.from})),c(Object.assign({},d,{value:e.to})),n(t))},value:r})}),(0,B.jsxs)("div",{className:u.rightSide,children:[(0,B.jsx)("div",{className:u.title,children:Jp||(Jp=(0,B.jsx)(ia,{children:(0,B.jsx)(Y.u,{content:(0,B.jsx)(ng,{}),placement:"bottom",theme:"info",children:(0,B.jsxs)("div",{children:["Specify time range ",(0,B.jsx)(E.J,{name:"info-circle"})]})})}))}),(0,B.jsx)(la.g,{label:"From",invalid:!o.validation.isValid,error:o.validation.errorMessage,children:(0,B.jsx)($e.I,{onClick:e=>e.stopPropagation(),onBlur:()=>l(Object.assign({},o,{validation:Wp(o.value)})),onChange:e=>l(Object.assign({},o,{value:e.currentTarget.value})),value:o.value})}),(0,B.jsx)(la.g,{label:"To",invalid:!d.validation.isValid,error:d.validation.errorMessage,children:(0,B.jsx)($e.I,{onClick:e=>e.stopPropagation(),onBlur:()=>c(Object.assign({},d,{validation:Wp(d.value)})),onChange:e=>c(Object.assign({},d,{value:e.currentTarget.value})),value:d.value})}),(0,B.jsx)(re.zx,{"aria-label":"TimePicker submit button",onClick:e=>{if(e.preventDefault(),!d.validation.isValid||!o.validation.isValid)return;const t=Hp({from:o.value,to:d.value,display:""});t&&(n(t),s(!1))},children:"Apply time range"})]})]})})})]})}const ng=()=>{const e=(0,ie.wW)(ag);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:e.supported,children:["Supported formats: ",(0,B.jsx)("code",{className:e.tooltip,children:"now-[digit]s/m/h/d/w"})]}),Yp||(Yp=(0,B.jsx)("div",{children:"Example: to select a time range from 10 minutes ago to now"})),(0,B.jsx)("code",{className:e.tooltip,children:"From: now-10m To: now"}),(0,B.jsxs)("div",{className:e.link,children:["For more information see"," ",Xp||(Xp=(0,B.jsxs)("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/",children:["docs ",(0,B.jsx)(E.J,{name:"external-link-alt"})]})),"."]})]})},ag=e=>({supported:M.css`
    margin-bottom: ${e.spacing(1)};
  `,tooltip:M.css`
    margin: 0;
  `,link:M.css`
    margin-top: ${e.spacing(1)};
  `}),sg=(e,t)=>n=>{const a=(0,$e.H)({theme:n,invalid:!1}),s=250+ig(n,e)+ig(n,t);return{container:M.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,M.cx)(a.input,a.wrapper,M.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${n.v1.spacing.formInputHeight-2}px;
      `),caretIcon:(0,M.cx)(a.suffix,M.css`
        position: relative;
        margin-left: ${n.v1.spacing.xs};
      `),clockIcon:(0,M.cx)(a.prefix,M.css`
        position: relative;
        margin-right: ${n.v1.spacing.xs};
      `),content:M.css`
      background: ${n.colors.background.primary};
      box-shadow: ${n.shadows.z3};
      position: absolute;
      z-index: ${n.zIndex.dropdown};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${n.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:M.css`
      display: flex;
      height: ${s}px;
    `,description:M.css`
      color: ${n.colors.text.secondary};
      font-size: ${n.typography.size.sm};
    `,leftSide:M.css`
      width: 50% !important;
      border-right: 1px solid ${n.colors.border.medium};
    `,rightSide:M.css`
      width: 50%;
      padding: ${n.spacing(1)};
    `,title:M.css`
      margin-bottom: ${n.spacing(1)};
    `}};function ig(e,t){return t?t.length>34?6.5*e.spacing.gridSize:4*e.spacing.gridSize:0}const rg=["children","disableEvents","disableHover","isSelected","className","href"];const og=e=>{let{children:t,href:n}=e;const{inner:a}=(0,ie.wW)(lg);return n?(0,B.jsx)("a",{className:a,href:n,children:t}):(0,B.jsx)(B.Fragment,{children:t})},lg=e=>({inner:(0,M.css)({display:"flex",width:"100%",padding:e.spacing(2)})}),dg=e=>{let{children:t,disableEvents:n,disableHover:a,isSelected:s,className:i,href:r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,rg);const l=(0,ie.l4)(),{oldContainer:d}=cg(l,n,a,s);return(0,B.jsx)("div",Object.assign({},o,{className:(0,M.cx)(d,i),children:(0,B.jsx)(og,{href:r,children:t})}))},cg=(0,ie.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;const s=void 0!==a;return{container:(0,M.css)(Object.assign({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:'\n        "Figure Heading Tags"\n        "Figure Meta Tags"\n        "Figure Description Tags"\n        "Figure Actions Secondary"',width:"100%",padding:e.spacing(2),background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),marginBottom:"8px",pointerEvents:t?"none":"auto",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!n&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":ie.GU.getFocusStyles(e)},s&&{cursor:"pointer"},a&&{outline:`solid 2px ${e.colors.primary.border}`})),oldContainer:(0,M.css)(Object.assign({display:"flex",width:"100%",background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),position:"relative",pointerEvents:t?"none":"auto",marginBottom:e.spacing(1),transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!n&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":ie.GU.getFocusStyles(e)}))}}));var ug;const hg=["disabled","href","onClick","children","isSelected","className"];const pg=R.createContext(null),gg=e=>{let{disabled:t,href:n,onClick:a,children:s,isSelected:i,className:r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,hg);const l=(0,R.useMemo)((()=>R.Children.toArray(s).some((e=>R.isValidElement(e)&&e.type.displayName===mg.displayName))),[s]),d=t||!a&&!n,c=a&&!t?a:void 0,u=(0,ie.l4)(),h=cg(u,t,d,i);return(0,B.jsx)(dg,Object.assign({disableEvents:t,disableHover:d,isSelected:i,className:(0,M.cx)(h.container,r)},o,{children:(0,B.jsxs)(pg.Provider,{value:{href:n,onClick:c,disabled:t,isSelected:i},children:[!l&&(ug||(ug=(0,B.jsx)(mg,{}))),s]})}))},mg=e=>{let{children:t,className:n,"aria-label":a}=e;const s=(0,R.useContext)(pg),i=(0,ie.wW)(fg),{href:r,onClick:o,isSelected:l}=null!=s?s:{href:void 0,onClick:void 0,isSelected:void 0};return(0,B.jsxs)("h2",{className:(0,M.cx)(i.heading,n),children:[r?(0,B.jsx)("a",{href:r,className:i.linkHack,"aria-label":a,onClick:o,children:t}):o?(0,B.jsx)("button",{onClick:o,className:i.linkHack,"aria-label":a,children:t}):(0,B.jsx)(B.Fragment,{children:t}),void 0!==l&&(0,B.jsx)("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:l})]})};mg.displayName="Heading";const fg=e=>({heading:(0,M.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:e.typography.size.md,letterSpacing:"inherit",lineHeight:e.typography.body.lineHeight,color:e.colors.text.primary,fontWeight:e.typography.fontWeightMedium}),linkHack:(0,M.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:e.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":Object.assign({},(0,Yt.getFocusStyles)(e),{zIndex:1})}})}),vg=e=>{let{children:t,className:n}=e;const a=(0,ie.wW)(bg);return(0,B.jsx)("div",{className:(0,M.cx)(a.tagList,n),children:t})};vg.displayName="Tags";const bg=e=>({tagList:(0,M.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),xg=e=>{let{children:t,className:n}=e;const a=(0,ie.wW)(yg);return(0,B.jsx)("p",{className:(0,M.cx)(a.description,n),children:t})};xg.displayName="Description";const yg=e=>({description:(0,M.css)({width:"100%",gridArea:"Description",margin:e.spacing(1,0,0),color:e.colors.text.secondary,lineHeight:e.typography.body.lineHeight})}),wg=e=>{let{children:t,align:n="start",className:a}=e;const s=(0,ie.wW)(jg);return(0,B.jsx)("div",{className:(0,M.cx)(s.media,a,M.css`
          align-self: ${n};
        `),children:t})};wg.displayName="Figure";const jg=e=>({media:(0,M.css)({position:"relative",gridArea:"Figure",marginRight:e.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),Sg=(0,R.memo)((e=>{let{children:t,className:n,separator:a="|"}=e;const s=(0,ie.wW)(Cg);let i=t;const r=R.Children.toArray(t).filter(Boolean);return r.length?(i=r.map(((e,t)=>(0,B.jsx)("div",{className:s.metadataItem,children:e},`element_${t}`))),r.length>1&&a&&(i=r.reduce(((e,t,n)=>[e,(0,B.jsx)("span",{className:s.separator,children:a},`separator_${n}`),t]))),(0,B.jsx)("div",{className:(0,M.cx)(s.metadata,n),children:i})):null}));Sg.displayName="Meta";const Cg=e=>({metadata:(0,M.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:e.typography.size.sm,color:e.colors.text.secondary,margin:e.spacing(.5,0,0),lineHeight:e.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,M.css)({zIndex:0}),separator:(0,M.css)({margin:`0 ${e.spacing(1)}`})}),kg=e=>{let{children:t,disabled:n,variant:a,className:s}=e;const i=(0,ie.wW)(Tg),r=(0,R.useContext)(pg),o=(null==r?void 0:r.disabled)||n,l="primary"===a?i.actions:i.secondaryActions;return(0,B.jsx)("div",{className:(0,M.cx)(l,s),children:R.Children.map(t,(e=>R.isValidElement(e)?(0,R.cloneElement)(e,Object.assign({disabled:o},e.props)):null))})},Tg=e=>({actions:(0,M.css)({gridArea:"Actions",marginTop:e.spacing(2),"& > *":{marginRight:e.spacing(1)}}),secondaryActions:(0,M.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:e.colors.text.secondary,marginTtop:e.spacing(2),"& > *":{marginRight:`${e.spacing(1)} !important`}})}),Ig=e=>{let{children:t,disabled:n,className:a}=e;return(0,B.jsx)(kg,{variant:"primary",disabled:n,className:a,children:t})};Ig.displayName="Actions";const Og=e=>{let{children:t,disabled:n,className:a}=e;return(0,B.jsx)(kg,{variant:"secondary",disabled:n,className:a,children:t})};Og.displayName="SecondaryActions";const Ng=e=>Object.assign({inner:M.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `},fg(e),Cg(e),yg(e),jg(e),Tg(e),bg(e));gg.Heading=mg,gg.Tags=vg,gg.Figure=wg,gg.Meta=Sg,gg.Actions=Ig,gg.SecondaryActions=Og,gg.Description=xg;var Fg=n(59418),Dg=n(40284);const Pg=R.memo((e=>{let{children:t,overlay:n,placement:a}=e;const[s,i]=(0,R.useState)(!1),{getArrowProps:r,getTooltipProps:o,setTooltipRef:l,setTriggerRef:d,visible:c}=(0,Fg.O)({visible:s,placement:a,onVisibleChange:i,interactive:!0,delayHide:0,delayShow:0,offset:[0,8],trigger:["click"]}),u=Ag(150);return(0,B.jsxs)(B.Fragment,{children:[R.cloneElement(t,{ref:d}),c&&(0,B.jsx)(fe.h_,{children:(0,B.jsx)(et.MT,{autoFocus:!0,children:(0,B.jsxs)("div",Object.assign({ref:l},o(),{onClick:()=>{i(!1)},children:[(0,B.jsx)("div",Object.assign({},r({className:"tooltip-arrow"}))),(0,B.jsx)(Dg.Z,{appear:!0,in:!0,timeout:{appear:150,exit:0,enter:0},classNames:u,children:Rs.Ot.renderOrCallToRender(n)})]}))})})]})}));Pg.displayName="Dropdown";const Ag=e=>({appear:M.css`
      opacity: 0;
      position: relative;
      transform: scaleY(0.5);
      transform-origin: top;
    `,appearActive:M.css`
      opacity: 1;
      transform: scaleY(1);
      transition: transform ${e}ms cubic-bezier(0.2, 0, 0.2, 1),
        opacity ${e}ms cubic-bezier(0.2, 0, 0.2, 1);
    `}),Mg=["status"];const Rg=e=>{let{status:t}=e,n=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Mg);const a=function(e){e||(e=tt.PluginSignatureStatus.invalid);switch(e){case tt.PluginSignatureStatus.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case tt.PluginSignatureStatus.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case tt.PluginSignatureStatus.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case tt.PluginSignatureStatus.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case tt.PluginSignatureStatus.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}(t);return(0,B.jsx)(Nc,Object.assign({text:a.text,color:a.color,icon:a.icon,tooltip:a.tooltip},n))};Rg.displayName="PluginSignatureBadge";const $g={drawStyle:[{label:"Lines",value:mo.l8.Line},{label:"Bars",value:mo.l8.Bars},{label:"Points",value:mo.l8.Points}],lineInterpolation:[{description:"Linear",value:mo.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:mo.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:mo.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:mo.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:mo.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:mo.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:mo.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:mo.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:mo.Jp.Always},{label:"Never",value:mo.Jp.Never}],axisPlacement:[{label:"Auto",value:mo.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:mo.LB.Left},{label:"Right",value:mo.LB.Right},{label:"Hidden",value:mo.LB.Hidden}],fillGradient:[{label:"None",value:mo.FI.None},{label:"Opacity",value:mo.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:mo.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:mo.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:mo.o0.None},{label:"Normal",value:mo.o0.Normal},{label:"100%",value:mo.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:mo.i3.Off},{label:"As lines",value:mo.i3.Line},{label:"As filled regions",value:mo.i3.Area},{label:"As filled regions and lines",value:mo.i3.LineAndArea}]},Lg=["data","config","placement","calcs","displayMode"];const Eg=e=>null==e?"-":e.toFixed(1),Vg=e=>{let{data:t,config:n,placement:a,calcs:s,displayMode:i}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Lg);const o=(0,ie.l4)(),l=n.getSeries().map((e=>{var a,i,r,l;const d=e.props,c=d.dataFrameFieldIndex,u=n.getAxisPlacement(e.props.scaleKey);if(!c)return;const h=null===(a=t[c.frameIndex])||void 0===a?void 0:a.fields[c.fieldIndex];if(!h||null!==(i=h.config.custom)&&void 0!==i&&null!==(r=i.hideFrom)&&void 0!==r&&r.legend)return;const p=(0,tt.getFieldDisplayName)(h,t[c.frameIndex],t),g=(0,tt.getFieldSeriesColor)(h,o).color;return{disabled:!(null===(l=d.show)||void 0===l||l),fieldIndex:c,color:g,label:p,yAxis:u===mo.LB.Left?1:2,getDisplayValues:()=>{var e;if(null==s||!s.length)return[];const t=null!==(e=h.display)&&void 0!==e?e:Eg;let n=null;const a=(0,tt.reduceField)({field:h,reducers:s});return s.map((e=>{const s=tt.fieldReducers.get(e);let i=t;return s.id===tt.ReducerID.diffperc&&(i=(0,tt.getDisplayProcessor)({field:Object.assign({},h,{config:Object.assign({},h.config,{unit:"percent"})}),theme:o})),s.id!==tt.ReducerID.count&&s.id!==tt.ReducerID.changeCount&&s.id!==tt.ReducerID.distinctCount||(n||(n=(0,tt.getDisplayProcessor)({field:Object.assign({},h,{config:Object.assign({},h.config,{unit:"none"})}),theme:o})),i=n),Object.assign({},i(a[e]),{title:s.name,description:s.description})}))},getItemKey:()=>`${p}-${c.frameIndex}-${c.fieldIndex}`}})).filter((e=>void 0!==e));return(0,B.jsx)(Zl.AY.Legend,Object.assign({placement:a},r,{children:(0,B.jsx)(zl,{placement:a,items:l,displayMode:i,sortBy:r.sortBy,sortDesc:r.sortDesc})}))};Vg.displayName="PlotLegend";var Bg=n(96211);const zg=e=>{let{x:t,y:n,children:a}=e;return(0,B.jsx)("div",{style:{position:"absolute",top:`${n}px`,left:`${t}px`},children:a})},_g=e=>{let{children:t,left:n,top:a}=e;const s=(0,R.useMemo)((()=>M.css`
      position: absolute;
      overflow: visible;
      left: ${n}px;
      top: ${a}px;
    `),[n,a]);return(0,B.jsx)("div",{className:s,children:t})};function Ug(e){let{id:t,events:n,renderEventMarker:a,mapEventToXYCoords:s,config:i}=e;const r=(0,R.useRef)(),[o,l]=(0,R.useState)(0),d=(0,Bg.Z)();(0,R.useLayoutEffect)((()=>{i.addHook("init",(e=>{r.current=e})),i.addHook("draw",(()=>{d()&&l((e=>e+1))}))}),[i,l]);const c=(0,R.useMemo)((()=>{const e=[];if(!r.current||0===n.length)return e;for(let i=0;i<n.length;i++){const r=n[i];for(let n=0;n<r.length;n++){const o=s(r,{fieldIndex:n,frameIndex:i});o&&e.push((0,R.createElement)(zg,Object.assign({},o,{key:`${t}-marker-${i}-${n}`}),a(r,{fieldIndex:n,frameIndex:i})))}}return(0,B.jsx)(B.Fragment,{children:e})}),[n,a,o]);return r.current?(0,B.jsx)(_g,{left:r.current.bbox.left/window.devicePixelRatio,top:r.current.bbox.top/window.devicePixelRatio,children:c}):null}const Hg=e=>{let{onZoom:t,config:n}=e;const[a,s]=(0,R.useState)(null);return(0,R.useEffect)((()=>{if(a){if((0,bo.Zp)("ZoomPlugin",!1,"selected",a),a.bbox.width<5)return;t({from:a.min,to:a.max})}}),[a]),(0,R.useLayoutEffect)((()=>{n.addHook("setSelect",(e=>{const t=e.posToVal(e.select.left,"x"),n=e.posToVal(e.select.left+e.select.width,"x");s({min:t,max:n,bbox:{left:e.bbox.left/window.devicePixelRatio+e.select.left,top:e.bbox.top/window.devicePixelRatio,height:e.bbox.height/window.devicePixelRatio,width:e.select.width}}),e.setSelect({left:0,width:0},!1)}))}),[n]),null};var Wg=n(46245);const qg=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),Zg=e=>{let t=e.root.closest("[tabindex]"),n=new Set,a=null,s=null;if(!t)return;const i=t=>{var r;if(0===n.size||!e)return void(s=null);const o=.1*(t-(null!==(r=s)&&void 0!==r?r:t));let l=0,d=0;n.has("ArrowUp")&&(d-=o),n.has("ArrowDown")&&(d+=o),n.has("ArrowLeft")&&(l-=o),n.has("ArrowRight")&&(l+=o),n.has("Shift")&&(l*=2,d*=2),((t,n)=>{const{cursor:a}=e;if(void 0===a.left||void 0===a.top)return;const{width:s,height:i}=e.over.style,[r,o]=[Math.floor(parseFloat(s)),Math.floor(parseFloat(i))];e.setCursor({left:(0,J.clamp)(a.left+t,0,r),top:(0,J.clamp)(a.top+n,0,o)})})(l,d);const{cursor:c}=e;if(n.has(" ")&&c){var u;const t=Number(e.over.style.height.slice(0,-2));e.setSelect({left:c.left<a?c.left:a,top:0,width:Math.abs(c.left-(null!==(u=a)&&void 0!==u?u:c.left)),height:t},!1)}s=t,window.requestAnimationFrame(i)},r=t=>{if("Tab"===t.key)return void e.setCursor({left:-5,top:-5});if(!qg.has(t.key))return;t.preventDefault(),t.stopPropagation();if(!n.has(t.key)){const s=0===n.size;n.add(t.key),a=" "===t.key&&null===a?e.cursor.left:a,s&&window.requestAnimationFrame(i)}},o=t=>{qg.has(t.key)&&(n.delete(t.key)," "===t.key&&(t.preventDefault(),t.stopPropagation(),e.setSelect(e.select),a=null))},l=()=>{var n;if(null===(n=t)||void 0===n||!n.matches(":focus-visible"))return;const a=parseFloat(e.over.style.width),s=parseFloat(e.over.style.height);e.setCursor({left:a/2,top:s/2})},d=()=>{s=null,a=null,n.clear(),e.setSelect({left:0,top:0,width:0,height:0},!1)};t.addEventListener("keydown",r),t.addEventListener("keyup",o),t.addEventListener("focus",l),t.addEventListener("blur",d);(e.hooks.destroy??=[]).push((()=>{var e,n,a,s;null===(e=t)||void 0===e||e.removeEventListener("keydown",r),null===(n=t)||void 0===n||n.removeEventListener("keyup",o),null===(a=t)||void 0===a||a.removeEventListener("focus",l),null===(s=t)||void 0===s||s.removeEventListener("blur",d),t=null}))},Gg=e=>{let{config:t}=e;return(0,R.useLayoutEffect)((()=>t.addHook("init",Zg)),[t]),null};var Kg=n(90414),Qg=n(53180);const Jg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null==e?"-":e.toFixed(t)},Yg={drawStyle:mo.l8.Line,showPoints:mo.Jp.Auto,axisPlacement:mo.LB.Auto};function Xg(e,t){const n=new Map;return e.fields.forEach(((e,a)=>{var s;const i=null===(s=e.state)||void 0===s?void 0:s.origin;if(i){var r;const e=null===(r=t[i.frameIndex])||void 0===r?void 0:r.fields[i.fieldIndex];e&&n.set((0,tt.getFieldDisplayName)(e,t[i.frameIndex],t),a)}})),n}function em(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const tm=["legend","options"];class nm extends R.Component{constructor(){super(...arguments),em(this,"panelContext",{}),em(this,"prepConfig",((e,t,n)=>{const{eventBus:a,sync:s}=this.context,{theme:i,timeZone:r,renderers:o,tweakAxis:l,tweakScale:d}=this.props;return(e=>{var t,n,a;let{frame:s,theme:i,timeZones:r,getTimeRange:o,eventBus:l,sync:d,allFrames:c,renderers:u,tweakScale:h=(e=>e),tweakAxis:p=(e=>e)}=e;const g=new Do(r[0]);let m;g.setPrepData((e=>(m=e[0],(0,bo.Bj)(e[0],g.getStackingGroups()))));const f=s.fields[0];if(!f)return g;let v=0;const b="x";let x="_x",y="";const w=(null===(t=f.config.custom)||void 0===t?void 0:t.axisPlacement)!==mo.LB.Hidden?mo.LB.Bottom:mo.LB.Hidden,j=(null===(n=f.config.custom)||void 0===n?void 0:n.axisPlacement)!==mo.LB.Hidden;if(f.type===tt.FieldType.time){x="time",g.addScale({scaleKey:b,orientation:mo.wN.Horizontal,direction:mo.bQ.Right,isTime:!0,range:()=>{const e=o();return[e.from.valueOf(),e.to.valueOf()]}});const e=r.length>1?(e,t)=>t.map(((e,t)=>t<2?null:e)):void 0;for(let t=0;t<r.length;t++){var S,C;const n=r[t];g.addAxis({scaleKey:b,isTime:!0,placement:w,show:j,label:null===(S=f.config.custom)||void 0===S?void 0:S.axisLabel,timeZone:n,theme:i,grid:{show:0===t&&(null===(C=f.config.custom)||void 0===C?void 0:C.axisGridShow)},filter:e})}r.length>1&&g.addHook("drawAxes",(e=>{e.ctx.save(),e.ctx.fillStyle=i.colors.text.primary,e.ctx.textAlign="left",e.ctx.textBaseline="bottom";let t=0;e.axes.forEach((n=>{if(2===n.side){let a=n._pos+n._size;e.ctx.fillText(r[t],e.bbox.left,a*vo.Z.pxRatio),t++}})),e.ctx.restore()}))}else{var k,T;f.config.unit&&(x=f.config.unit),g.addScale({scaleKey:b,orientation:mo.wN.Horizontal,direction:mo.bQ.Right}),g.addAxis({scaleKey:b,placement:w,show:j,label:null===(k=f.config.custom)||void 0===k?void 0:k.axisLabel,theme:i,grid:{show:null===(T=f.config.custom)||void 0===T?void 0:T.axisGridShow}})}let I,O=null!==(a=null==u?void 0:u.flatMap((e=>Object.values(e.fieldMap).filter((t=>-1===e.indicesOnly.indexOf(t))))))&&void 0!==a?a:[];for(let e=1;e<s.fields.length;e++){var N,F,D,P,A,M,R,$,L,E;const t=s.fields[e],n=Object.assign({},t.config,{custom:Object.assign({},Yg,t.config.custom)}),a=n.custom;if(t===f||t.type!==tt.FieldType.number)continue;t.state.seriesIndex=v++;let r=null!==(N=t.display)&&void 0!==N?N:Jg;(null===(F=t.config.custom)||void 0===F||null===(D=F.stacking)||void 0===D?void 0:D.mode)===mo.o0.Percent&&(r=(0,tt.getDisplayProcessor)({field:Object.assign({},t,{config:Object.assign({},t.config,{unit:"percentunit"})}),theme:i}));const l=(0,Qg.z)(n),d=(0,tt.getFieldColorModeForField)(t),u=(0,tt.getFieldSeriesColor)(t,i).color;if(g.addScale(h({scaleKey:l,orientation:mo.wN.Vertical,direction:mo.bQ.Up,distribution:null===(P=a.scaleDistribution)||void 0===P?void 0:P.type,log:null===(A=a.scaleDistribution)||void 0===A?void 0:A.log,min:t.config.min,max:t.config.max,softMin:a.axisSoftMin,softMax:a.axisSoftMax,centeredZero:a.axisCenteredZero,range:(null===(M=a.stacking)||void 0===M?void 0:M.mode)===mo.o0.Percent?[0,1]:void 0,decimals:t.config.decimals},t)),y||(y=l),a.axisPlacement!==mo.LB.Hidden){var V;let e;var B;a.axisColorMode===mo.yK.Series&&(e=d.isByValue&&(null===(B=t.config.custom)||void 0===B?void 0:B.gradientMode)===mo.FI.Scheme&&d.id===tt.FieldColorModeId.Thresholds?Io(1,i,d,t.config.thresholds):u);let s={};e&&(s={border:{show:!0,width:1,stroke:e},ticks:{stroke:e},color:a.axisColorMode===mo.yK.Series?e:void 0}),g.addAxis(p(Object.assign({scaleKey:l,label:a.axisLabel,size:a.axisWidth,placement:null!==(V=a.axisPlacement)&&void 0!==V?V:mo.LB.Auto,formatValue:(e,t)=>{var a;return(0,tt.formattedValueToString)(r(e,null!==(a=n.decimals)&&void 0!==a?a:t))},theme:i,grid:{show:a.axisGridShow},decimals:t.config.decimals},s),t))}const b=a.drawStyle===mo.l8.Points?mo.Jp.Always:a.showPoints;let x=()=>null;!0!==a.spanNulls&&(x=(e,t,n,a)=>{let s=[],i=e.series[t];if(!n&&a&&a.length){const[n,r]=i.idxs,o=e.data[0],l=e.data[t],d=Math.round(e.valToPos(o[n],"x",!0)),c=Math.round(e.valToPos(o[r],"x",!0));a[0][0]===d&&s.push(n);for(let t=0;t<a.length;t++){let n=a[t],i=a[t+1];if(i&&n[1]===i[0]){let t=e.posToIdx(n[1],!0);if(null==l[t])for(let e=1;e<100;e++){if(null!=l[t+e]){t+=e;break}if(null!=l[t-e]){t-=e;break}}s.push(t)}}a[a.length-1][1]===c&&s.push(r)}return s.length?s:null});let w,{fillOpacity:j}=a,S=null,C=null;if(null!==(R=t.state)&&void 0!==R&&R.origin){I||(I=Xg(s,c));const e=c[t.state.origin.frameIndex],n=null==e?void 0:e.fields[t.state.origin.fieldIndex],i=(0,tt.getFieldDisplayName)(null!=n?n:t,e,c);if(O.indexOf(i)>=0)S=()=>null,C=()=>{};else if(a.transform===mo.pR.Constant){const e=vo.Z.paths.linear();S=(t,n)=>{const a=t._data,s=o();let i=[s.from.valueOf(),s.to.valueOf()],r=a[n].find((e=>null!=e)),l=[r,r],d=a.slice();return d[0]=i,d[n]=l,e(Object.assign({},t,{_data:d}),n,0,1)}}if(a.fillBelowTo){const e=I.get(i),t=I.get(a.fillBelowTo);(0,J.isNumber)(t)&&(0,J.isNumber)(e)?(g.addBand({series:[e,t],fill:void 0}),j||(j=35)):j=0}}var z;if(d.id===tt.FieldColorModeId.Thresholds&&(w=e=>(0,tt.getFieldSeriesColor)(m.fields[e],i).color),g.addSeries({pathBuilder:S,pointsBuilder:C,scaleKey:l,showPoints:b,pointsFilter:x,colorMode:d,fillOpacity:j,theme:i,dynamicSeriesColor:w,drawStyle:a.drawStyle,lineColor:null!==($=a.lineColor)&&void 0!==$?$:u,lineWidth:a.lineWidth,lineInterpolation:a.lineInterpolation,lineStyle:a.lineStyle,barAlignment:a.barAlignment,barWidthFactor:a.barWidthFactor,barMaxWidth:a.barMaxWidth,pointSize:a.pointSize,spanNulls:a.spanNulls||!1,show:!(null!==(L=a.hideFrom)&&void 0!==L&&L.viz),gradientMode:a.gradientMode,thresholds:n.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:a.axisSoftMin,softMax:a.axisSoftMax,dataFrameFieldIndex:null===(E=t.state)||void 0===E?void 0:E.origin}),a.thresholdsStyle&&n.thresholds)(null!==(z=a.thresholdsStyle.mode)&&void 0!==z?z:mo.i3.Off)!==mo.i3.Off&&g.addThresholds({config:a.thresholdsStyle,thresholds:n.thresholds,scaleKey:l,theme:i,hardMin:t.config.min,hardMax:t.config.max,softMin:a.axisSoftMin,softMax:a.axisSoftMax})}let _=(0,bo.i7)(s);g.setStackingGroups(_),null==u||u.forEach((e=>{I||(I=Xg(s,c));let t={};for(let n in e.fieldMap){let a=e.fieldMap[n];t[n]=I.get(a)}e.init(g,t)})),g.scaleKeys=[b,y];let U={dataIdx:(e,t,n,a)=>{let s=e.data[t];if(null==s[n]){let t,i=null,r=null;for(t=n;null==i&&t-- >0;)null!=s[t]&&(i=t);for(t=n;null==r&&t++<s.length;)null!=s[t]&&(r=t);let o=e.data[0],l=e.valToPos(a,"x"),d=null==r?1/0:e.valToPos(o[r],"x"),c=l-(null==i?-1/0:e.valToPos(o[i],"x")),u=d-l;c<=u?c<=15&&(n=i):u<=15&&(n=r)}return n}};if(d&&d()!==tt.DashboardCursorSync.Off){const e={point:{[b]:null,[y]:null},data:s},t=new tt.DataHoverEvent(e);U.sync={key:"__global_",filters:{pub:(n,a,s,i,r,o,c)=>!(d&&d()===tt.DashboardCursorSync.Off||(e.rowIndex=c,s<0&&i<0?(e.point[x]=null,e.point[y]=null,l.publish(new tt.DataHoverClearEvent)):(e.point[x]=a.posToVal(s,b),e.point[y]=a.posToVal(i,y),e.point.panelRelY=i>0?i/o:1,l.publish(t),t.payload.down=void 0),0))},scales:[b,y]}}return g.setSync(),g.setCursor(U),g})({frame:e,theme:i,timeZones:Array.isArray(r)?r:[r],getTimeRange:n,eventBus:a,sync:s,allFrames:t,renderers:o,tweakScale:d,tweakAxis:l})})),em(this,"renderLegend",(e=>{const{legend:t,frames:n}=this.props;return!e||t&&!t.showLegend?null:(0,B.jsx)(Vg,Object.assign({data:n,config:e},t))}))}render(){return(0,B.jsx)(Kg.d,Object.assign({},this.props,{prepConfig:this.prepConfig,propsToDiff:tm,renderLegend:this.renderLegend}))}}em(nm,"contextType",Sl.bb);const am=(0,nt.HE)(nm);am.displayName="TimeSeries";const sm=R.createContext({}),im=()=>{const{data:e,dimFields:t,mapSeriesIndexToDataFrameFieldIndex:n}=(0,R.useContext)(sm),a=(0,R.useCallback)((()=>{const n=t.x;let a=null;for(let t=0;t<e.fields.length;t++)if(n(e.fields[t],e,[e])){a=e.fields[t];break}return a}),[e,t]);return{dimFields:t,mapSeriesIndexToDataFrameFieldIndex:n,getXAxisField:a,alignedData:e}};var rm,om=n(95261);function lm(){return console.log("process.env.NODE_ENV","production"),rm||(rm=(0,om.BX)(Js.wc,{children:[(0,om.tZ)("div",{children:"Emotion performance tests"}),(0,om.tZ)(dm,{name:"No styles",Component:vm}),(0,om.tZ)(dm,{name:"inline emotion/css",Component:fm}),(0,om.tZ)(dm,{name:"useStyles no cx",Component:um}),(0,om.tZ)(dm,{name:"useStyles with conditional cx styles",Component:hm}),(0,om.tZ)(dm,{name:"useStyles with css prop",Component:gm}),(0,om.tZ)(dm,{name:"useStyles with conditional css prop",Component:mm}),(0,om.tZ)(dm,{name:"useStyles with conditional classnames",Component:pm})]}))}const dm=e=>{let{name:t,Component:n}=e;const[a,s]=(0,R.useState)(0);return(0,om.BX)("div",{children:[(0,om.tZ)(re.zx,{onClick:()=>s(a>2?0:a+1),children:t}),a>0&&(0,om.tZ)(bm,{id:t,children:cm(n)})]})};function cm(e){const t=[];for(let n=0;n<5e3;n++)t.push((0,om.tZ)(e,{index:n},n.toString()));return(0,om.tZ)("div",{style:{display:"flex",flexWrap:"wrap"},children:t})}function um(e){let{index:t}=e;const n=(0,ie.wW)(xm);return(0,om.tZ)("div",{className:n.main,children:(0,om.tZ)("div",{className:n.child,children:t})})}function hm(e){let{index:t}=e;const n=(0,ie.wW)(xm),a=(0,M.cx)(n.main,{[n.large]:t>10,[n.disabed]:t%10==0});return(0,om.tZ)("div",{className:a,children:(0,om.tZ)("div",{className:n.child,children:t})})}function pm(e){let{index:t}=e;const n=(0,ie.wW)(xm),a=L()(n.main,{[n.large]:t>10,[n.disabed]:t%10==0});return(0,om.tZ)("div",{className:a,children:(0,om.tZ)("div",{className:n.child,children:t})})}function gm(e){let{index:t}=e;const n=(0,ie.wW)(ym);return(0,om.tZ)("div",{css:n.main,children:(0,om.tZ)("div",{css:n.child,children:t})})}function mm(e){let{index:t}=e;const n=(0,ie.wW)(ym),a=[n.main,t>10&&n.large,t%10==0&&n.disabed];return(0,om.tZ)("div",{css:a,children:(0,om.tZ)("div",{css:n.child,children:t})})}function fm(e){let{index:t}=e;const n=(0,ie.l4)(),a=xm(n);return(0,om.tZ)("div",{className:a.main,children:(0,om.tZ)("div",{className:a.child,children:t})})}function vm(e){let{index:t}=e;return(0,om.tZ)("div",{className:"no-styles-main",children:(0,om.tZ)("div",{className:"no-styles-child",children:t})})}function bm(e){let{children:t,id:n}=e;return(0,om.tZ)(R.Profiler,{id:n,onRender:(e,t,n,a,s,i)=>{console.log("Profile "+e,n)},children:t})}dm.displayName="TestScenario";const xm=e=>({main:(0,M.css)(wm(e)),large:(0,M.css)({fontSize:"20px",color:"red"}),disabed:(0,M.css)({fontSize:"10px",color:"gray"}),child:(0,M.css)({padding:"2px",fontSize:"10px",boxShadow:"none",textAlign:"center",textDecoration:"none"})}),ym=e=>({main:wm(e),large:{fontSize:"20px",color:"red"},disabed:{fontSize:"10px",color:"gray"},child:{padding:"2px",fontSize:"10px",boxShadow:"none",textAlign:"center",textDecoration:"none"}});function wm(e){return{background:"blue",border:"1px solid red",color:"white",padding:e.spacing(1),shadow:e.shadows.z1,":hover":{background:e.colors.background.primary}}}var jm=n(9575),Sm=n.n(jm),Cm=n(88241);const km=["name","value","hidden","facets","onClick","className","loading","searchTerm","active","style","title","highlightParts"];const Tm=(0,R.forwardRef)(((e,t)=>{let{name:n,value:a,hidden:s,facets:i,onClick:r,className:o,loading:l,searchTerm:d,active:c,style:u,title:h,highlightParts:p}=e,g=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,km);const m=(0,ie.l4)(),f=Im(m),v=d?[d]:[],b=(0,R.useCallback)((e=>{r&&!s&&r(n,a,e)}),[r,n,s,a]);let x=a||n;return i&&(x=`${x} (${i})`),(0,B.jsx)("span",Object.assign({ref:t,onClick:b,style:u,title:h||x,role:"option","aria-selected":!!c,className:(0,M.cx)(f.base,c&&f.active,l&&f.loading,s&&f.hidden,o,r&&!s&&f.hover)},g,{children:void 0!==p?(0,B.jsx)(Cm.H,{text:x,highlightClassName:f.matchHighLight,highlightParts:p}):(0,B.jsx)(Sm(),{textToHighlight:x,searchWords:v,autoEscape:!0,highlightClassName:f.matchHighLight})}),x)}));Tm.displayName="Label";const Im=e=>({base:M.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.bodySmall.lineHeight};
    background-color: ${e.colors.background.secondary};
    color: ${e.colors.text};
    white-space: nowrap;
    text-shadow: none;
    padding: ${e.spacing(.5)};
    border-radius: ${e.shape.borderRadius()};
    margin-right: ${e.spacing(1)};
    margin-bottom: ${e.spacing(.5)};
  `,loading:M.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.shade};
    color: ${e.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${e.colors.text.primary};
      }
      50% {
        color: ${e.colors.text.secondary};
      }
      100% {
        color: ${e.colors.text.disabled};
      }
    }
  `,active:M.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `,matchHighLight:M.css`
    background: inherit;
    color: ${e.components.textHighlight.text};
    background-color: ${e.components.textHighlight.background};
  `,hidden:M.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:M.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `}),Om=["children","className"];const Nm=e=>{let{children:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Om);const s=(0,ie.wW)(Fm);return(0,B.jsx)("div",Object.assign({className:(0,M.cx)(s,n)},a,{children:t}))},Fm=e=>M.css`
    background-color: ${e.components.panel.background};
    border: 1px solid ${e.components.panel.borderColor};
    border-radius: 3px;
  `,Dm={SecretFormField:ae,FormField:H,Select:Q.Ph,AsyncSelect:Q.qb,IndicatorsContainer:G.B,NoOptionsMessage:K.P,Input:Z.I,Switch:ee}},22285:(e,t,n)=>{"use strict";n.d(t,{n:()=>l});var a=n(36636),s=(n(68404),n(40284)),i=n(49268),r=n(45916);const o=(0,i.Bb)((e=>({enter:a.css`
      label: enter;
      opacity: 0;
    `,enterActive:a.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${e}ms ease-out;
    `,exit:a.css`
      label: exit;
      opacity: 1;
    `,exitActive:a.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:n,duration:a=250}=e,i=o(a);return(0,r.jsx)(s.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:i,children:n})}},18373:(e,t,n)=>{"use strict";n.d(t,{R:()=>l});var a=n(36636),s=(n(68404),n(40284)),i=n(49268),r=n(45916);const o=(0,i.Bb)(((e,t,n)=>({enter:a.css`
      label: enter;
      ${t}: 0;
      opacity: 0;
    `,enterActive:a.css`
      label: enterActive;
      ${t}: ${n}px;
      opacity: 1;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `,exit:a.css`
      label: exit;
      ${t}: ${n}px;
      opacity: 1;
    `,exitActive:a.css`
      label: exitActive;
      opacity: 0;
      ${t}: 0;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:n,duration:a=250,horizontal:i,size:l}=e,d=o(a,i?"width":"height",l);return(0,r.jsx)(s.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:d,children:n})}},24731:(e,t,n)=>{"use strict";n.d(t,{N:()=>l});var a=n(68404),s=n(55860),i=n(55273),r=n(45916);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends a.Component{constructor(e){super(e),o(this,"plotContainer",(0,a.createRef)()),o(this,"plotCanvasBBox",(0,a.createRef)()),this.state={plot:null}}reinitPlot(){var e;let{width:t,height:n,plotRef:a}=this.props;if(null===(e=this.state.plot)||void 0===e||e.destroy(),0===t&&0===n)return;this.props.config.addHook("setSize",(e=>{e.over}));const r=Object.assign({width:this.props.width,height:this.props.height},this.props.config.getConfig());(0,i.Zp)("UPlot",!1,"Reinitializing plot",r);const o=new s.Z(r,this.props.data,this.plotContainer.current);a&&a(o),this.setState({plot:o})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;null===(e=this.state.plot)||void 0===e||e.destroy()}componentDidUpdate(e){let{plot:t}=this.state;!function(e,t){return t.width===e.width&&t.height===e.height}(e,this.props)?null==t||t.setSize({width:this.props.width,height:this.props.height}):!function(e,t){return t.config===e.config}(e,this.props)?this.reinitPlot():!function(e,t){return t.data===e.data}(e,this.props)?null==t||t.setData(this.props.data):function(e,t){let n=e.timeRange,a=t.timeRange;return n===a||a.from.valueOf()===n.from.valueOf()&&a.to.valueOf()===n.to.valueOf()}(e,this.props)||null==t||t.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()})}render(){return(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children]})}}},38007:(e,t,n)=>{"use strict";n.d(t,{ff:()=>d,gD:()=>l,mr:()=>g});var a=n(43215),s=n(97024),i=n(73514),r=n(85391),o=n(16079);const l=12;class d extends r.L{merge(e){this.props.size=(0,o.V)("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===s.LB.Auto&&(this.props.placement=e.placement)}calculateSpace(e,t,n,a,s){const r=e.axes[t],o=e.scales[r.scale];if(2!==r.side||!o)return 30;if(o.time){const r=g(e,[n],t,40,(a-n)/(s/40));return(0,i.X1)(r[0],l).width+18}return 40}calculateAxisSize(e,t,n){const a=e.axes[n];let s=a.ticks.size;if(2===a.side)s+=a.gap+l;else if(null!=t&&t.length){let n=t.reduce(((e,t)=>Math.max(e,(0,i.X1)(t,l).width)),0);const r=Math.min(.4*e.width,n);s+=a.gap+a.labelGap+r}return Math.ceil(s)}getConfig(){let{scaleKey:e,label:t,show:n=!0,placement:i=s.LB.Auto,grid:r={show:!0},ticks:o,space:d,filter:c,gap:u=5,formatValue:h,splits:p,values:f,isTime:v,timeZone:b,theme:x,tickLabelRotation:y,size:w,color:j,border:S,decimals:C}=this.props;const k=`${l}px ${x.typography.fontFamily}`,T=x.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,a.isBooleanUnit)(e)&&(p=[0,1]),0===C&&(c=(e,t)=>t.map((e=>Number.isInteger(e)?e:null)));let I={scale:e,show:n,stroke:null!=j?j:x.colors.text.primary,side:m(i),font:k,size:null!=w?w:(e,t,n)=>this.calculateAxisSize(e,t,n),rotate:y,gap:u,labelGap:0,grid:{show:r.show,stroke:T,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:T,width:1/devicePixelRatio,size:4},o),splits:p,values:f,space:null!=d?d:(e,t,n,a,s)=>this.calculateSpace(e,t,n,a,s),filter:c};return null!=S&&(I.border=S),null!=t&&t.length>0&&(I.label=t,I.labelSize=l+8,I.labelFont=k,I.labelGap=8),f?I.values=f:v?I.values=g:h&&(I.values=(e,t,n,s,i)=>{let r=(0,a.guessDecimals)((0,a.roundDecimals)(i,6));return t.map((e=>h(e,r>0?r:void 0)))}),I.timeZone=b,I}}const c=1e3,u=6e4,h=864e5,p=31536e6;function g(e,t,n,s,i){var r,o;const l=e.axes[n].timeZone,d=e.scales.x,g=(null!==(r=null==d?void 0:d.max)&&void 0!==r?r:0)-(null!==(o=null==d?void 0:d.min)&&void 0!==o?o:0),m=Math.round(p/h)*h,f=Math.round(i/h)*h;let v=a.systemDateFormats.interval.year;return i<c?v=a.systemDateFormats.interval.millisecond:i<=u?v=a.systemDateFormats.interval.second:g<=h?v=a.systemDateFormats.interval.minute:i<=h?v=a.systemDateFormats.interval.hour:g<p?v=a.systemDateFormats.interval.day:f===m?v=a.systemDateFormats.interval.year:i<=p&&(v=a.systemDateFormats.interval.month),t.map((e=>null==e?"":(0,a.dateTimeFormat)(e,{format:v,timeZone:l})))}function m(e){switch(e){case s.LB.Top:return 0;case s.LB.Right:return 1;case s.LB.Bottom:return 2;case s.LB.Left:}return 3}},16079:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,V:()=>l});var a=n(55860),s=n(43215),i=n(97024),r=n(85391);class o extends r.L{merge(e){this.props.min=l("min",this.props.min,e.min),this.props.max=l("max",this.props.max,e.max)}getConfig(){var e;let{isTime:t,scaleKey:n,min:r,max:o,softMin:l,softMax:d,range:c,direction:u,orientation:h,centeredZero:p,decimals:g}=this.props;const m=t?{}:{distr:this.props.distribution===i.wf.Log?3:this.props.distribution===i.wf.Ordinal?2:1,log:this.props.distribution===i.wf.Log?this.props.log||2:void 0};const f={min:{pad:.1,hard:null!=r?r:-1/0,soft:l||0,mode:null==l?3:1},max:{pad:.1,hard:null!=o?o:1/0,soft:d||0,mode:null==d?3:1}};let v=null==l&&null!=r,b=null==d&&null!=o,x=v&&b;let y=!t&&!x;return(0,s.isBooleanUnit)(n)&&(y=!1,c=[0,1]),{[n]:Object.assign({time:t,auto:y,range:null!==(e=c)&&void 0!==e?e:(e,t,n,i)=>{const l=e.scales[i];let d=[t,n];if(!x&&null==t&&null==n)return d;if(1===l.distr||2===l.distr){if(p){let e=Math.abs(t),a=Math.abs(n),s=Math.max(e,a);t=-s,n=s}d=a.Z.rangeNum(v?r:t,b?o:n,f)}else if(3===l.distr){var c;d=a.Z.rangeLog(t,n,null!==(c=l.log)&&void 0!==c?c:10,!0)}return 0===g&&(d[0]=(0,s.incrRoundDn)(d[0],1),d[1]=(0,s.incrRoundUp)(d[1],1)),v&&(d[0]=r),b&&(d[1]=o),d[0]>=d[1]&&(d[0]=0,d[1]=100),d},dir:u,ori:h},m)}}}function l(e,t,n){return!(null==t)?!(null==n)?"min"===e?t<n?t:n:t>n?t:n:t:n}},46245:(e,t,n)=>{"use strict";n.d(t,{_:()=>g,i:()=>p});var a=n(68404),s=n(96211),i=n(43215),r=n(97024),o=n(73512),l=n(10259),d=n(39016),c=n(55273),u=n(45916);const h=["mode","sortOrder","sync","timeZone","config","renderTooltip"];const p=e=>{let{mode:t=r.f3.Single,sortOrder:n=r.As.None,sync:p,timeZone:m,config:f,renderTooltip:v}=e,b=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,h);const x=(0,a.useRef)(),y=(0,o.l4)(),[w,j]=(0,a.useState)(null),[S,C]=(0,a.useState)(null),[k,T]=(0,a.useState)([]),[I,O]=(0,a.useState)(null),[N,F]=(0,a.useState)(!1),D=(0,s.Z)();if((0,a.useEffect)((()=>{(0,c.Zp)("TooltipPlugin",!0,`Focused series: ${w}, focused point: ${S}`)}),[S,w]),(0,a.useLayoutEffect)((()=>{let e;const t=()=>{var e;D()&&(F(!0),null===(e=x.current)||void 0===e||e.root.classList.add("plot-active"))},n=()=>{var e;D()&&(O(null),F(!1),null===(e=x.current)||void 0===e||e.root.classList.remove("plot-active"))};f.addHook("syncRect",((t,n)=>e=n)),f.addHook("init",(e=>{var a,s;x.current=e,null===(a=e.root.parentElement)||void 0===a||a.addEventListener("focus",t),e.over.addEventListener("mouseenter",t),null===(s=e.root.parentElement)||void 0===s||s.addEventListener("blur",n),e.over.addEventListener("mouseleave",n),p&&p()===i.DashboardCursorSync.Crosshair&&e.root.classList.add("shared-crosshair")}));const a=f.getTooltipInterpolator();return a?f.addHook("setCursor",(t=>{a(j,C,(n=>{if(n)return void O(null);if(!e)return;const{x:a,y:s}=g(t,e);void 0!==a&&void 0!==s&&O({x:a,y:s})}),t)})):(f.addHook("setLegend",(e=>{D()&&(C(e.legend.idx),T(e.legend.idxs.slice()))})),f.addHook("setCursor",(t=>{if(!e||!D())return;const{x:n,y:a}=g(t,e);O(void 0!==n&&void 0!==a?{x:n,y:a}:null)})),f.addHook("setSeries",((e,t)=>{D()&&j(t)}))),()=>{var e,a;(O(null),x.current)&&(x.current.over.removeEventListener("mouseleave",n),x.current.over.removeEventListener("mouseenter",t),null===(e=x.current.root.parentElement)||void 0===e||e.removeEventListener("focus",t),null===(a=x.current.root.parentElement)||void 0===a||a.removeEventListener("blur",n))}}),[f,O,F,C,T]),null===S||!N&&p&&p()===i.DashboardCursorSync.Crosshair)return null;let P=b.data.fields[0];if(!P)return null;const A=P.display||(0,i.getDisplayProcessor)({field:P,timeZone:m,theme:y});let M=null,R=A(P.values.get(S)).text;if(v)M=v(b.data,w,S);else{if(t===r.f3.Single&&null!==w){var $;const e=b.data.fields[w];if(!e)return null;const t=null!==($=null==k?void 0:k[w])&&void 0!==$?$:S;R=A(P.values.get(t)).text;const n=(e.display||(0,i.getDisplayProcessor)({field:e,timeZone:m,theme:y}))(e.values.get(t));M=(0,u.jsx)(d.cS,{series:[{color:n.color||i.FALLBACK_COLOR,label:(0,i.getFieldDisplayName)(e,b.data),value:n?(0,i.formattedValueToString)(n):null}],timestamp:R})}if(t===r.f3.Multi){let e=[];const t=b.data,a=t.fields,s=[];for(let n=0;n<a.length;n++){var L,E,V,B;const a=t.fields[n];if(!a||a===P||a.type===i.FieldType.time||a.type!==i.FieldType.number||null!==(L=a.config.custom)&&void 0!==L&&null!==(E=L.hideFrom)&&void 0!==E&&E.tooltip||null!==(V=a.config.custom)&&void 0!==V&&null!==(B=V.hideFrom)&&void 0!==B&&B.viz)continue;const r=b.data.fields[n].values.get(k[n]),o=a.display(r);s.push(r),e.push({color:o.color||i.FALLBACK_COLOR,label:(0,i.getFieldDisplayName)(a,t),value:o?(0,i.formattedValueToString)(o):null,isActive:w===n})}if(n!==r.As.None){const t=[...e],a=i.arrayUtils.sortValues(n);e.sort(((e,n)=>{const i=t.indexOf(e),r=t.indexOf(n);return a(s[i],s[r])}))}M=(0,u.jsx)(d.cS,{series:e,timestamp:R})}}return(0,u.jsx)(l.h_,{children:M&&I&&(0,u.jsx)(d.S$,{position:{x:I.x,y:I.y},offset:{x:10,y:10},children:M})})};function g(e,t){let n,a;const s=e.cursor.left||0,i=e.cursor.top||0;if(function(e,t){let{left:n,top:a}=e;return void 0!==n&&void 0!==a&&(n<0||n>t.width||a<0||a>t.height)}(e.cursor,t)){const r=e.posToIdx(s);if(i<0||i>t.height){let i=(0,c.ah)(e,r);i&&(a=t.top+i,s>=0&&s<=t.width&&(n=t.left+e.valToPos(e.data[0][e.posToIdx(s)],e.series[0].scale)))}}else n=t.left+s,a=t.top+i;return{x:n,y:a}}},85391:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});class a{constructor(e){this.props=e}}},55273:(e,t,n)=>{"use strict";n.d(t,{Bj:()=>p,Kq:()=>u,Zp:()=>f,ah:()=>g,i7:()=>h,qt:()=>d});var a=n(43215),s=n(97024),i=n(89409),r=n(86315),o=n(53180);const l=(e,t,n)=>{let a=t%2?n[0]||n[2]:n[1]||n[3];return n[t]||!a?0:8},d={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[l,l,l,l],series:[],hooks:{}};var c;function u(e){let t=[],{series:n,dir:a}=e,s=n.length-1,i=n.slice().reverse();return i.forEach(((e,n)=>{if(n!==s){let s=i[n+1];t.push({series:[e,s],dir:-1*a})}})),t}function h(e){let t=new Map;return e.fields.forEach(((e,n)=>{var a;let{config:i,values:r}=e;if(0===n)return;let{custom:l}=i;if(null==l)return;if(null!==(a=l.hideFrom)&&void 0!==a&&a.viz)return;let{stacking:d}=l;if(null==d)return;let{mode:u,group:h}=d;if(u===s.o0.None)return;let p=r.toArray(),g=l.transform,m=p.find((e=>null!=e)),f=g===s.pR.Constant?m>=0?c.Pos:c.Neg:g===s.pR.NegativeY?m>=0?c.Neg:c.Pos:m>=0?c.Pos:c.Neg,v=l.drawStyle,b=v===s.l8.Bars?l.barAlignment:v===s.l8.Line?l.lineInterpolation:null,x=`${f}|${u}|${h}|${(0,o.z)(i)}|${v}|${b}`,y=t.get(x);null==y&&(y={series:[],dir:f},t.set(x,y)),y.series.push(n)})),[...t.values()]}function p(e,t,n){let i=Array(e.fields.length),r=t.length,o=e.length,l=r>0?Array(o).fill(0):[],d=r>0?Array(o).fill(!1):[],c=Array.from({length:r},(()=>l.slice())),u=Array.from({length:r},(()=>d.slice()));if(t.forEach(((t,n)=>{let a=u[n];t.series.forEach((t=>{var n,s;let i=e.fields[t];if(null!==(n=i.config.custom)&&void 0!==n&&null!==(s=n.hideFrom)&&void 0!==s&&s.viz)return;let r=i.values.toArray();for(let e=0;e<o;e++)null!=r[e]&&(a[e]=!0)}))})),e.fields.forEach(((e,n)=>{var r,l;let d=e.values.toArray();if(0===n)return void(e.type===a.FieldType.time?i[n]=(0,a.ensureTimeField)(e).values.toArray():i[n]=d);let{custom:h}=e.config;if(!h||null!==(r=h.hideFrom)&&void 0!==r&&r.viz)return void(i[n]=d);if(h.transform===s.pR.Constant){let e=d.findIndex((e=>null!=e)),t=d[e];d=Array(d.length).fill(void 0),d[e]=t}else if(d=d.slice(),h.transform===s.pR.NegativeY)for(let e=0;e<d.length;e++)null!=d[e]&&(d[e]*=-1);let p=null===(l=h.stacking)||void 0===l?void 0:l.mode;if(p&&p!==s.o0.None){let e=t.findIndex((e=>e.series.indexOf(n)>-1)),a=c[e],s=u[e],r=i[n]=Array(o);for(let e=0;e<o;e++){let t=d[e];r[e]=null!=t?a[e]+=t:s[e]?a[e]:t}}else i[n]=d})),n){n({totals:i.map(((e,n)=>{let a=t.findIndex((e=>e.series.indexOf(n)>-1));return-1!==a?c[a]:e}))})}return e.fields.forEach(((e,n)=>{var a,r,l,d;if(0===n||null!==(a=e.config.custom)&&void 0!==a&&null!==(r=a.hideFrom)&&void 0!==r&&r.viz)return;if((null===(l=e.config.custom)||void 0===l||null===(d=l.stacking)||void 0===d?void 0:d.mode)===s.o0.Percent){let e=t.findIndex((e=>e.series.indexOf(n)>-1)),a=c[e],s=t[e],r=i[n];for(let e=0;e<o;e++){let t=r[e];null!=t&&(r[e]=0===a[e]?0:s.dir*(t/a[e]))}}})),i}function g(e,t){let n,a=1,s=1,i=e.data[1][t],r=e.data[1][t];for(let n=1;n<e.data.length;n++){const o=e.data[n][t];null!=o&&(null==i?i=o:o>i&&(i=e.data[n][t],a=n),null==r?r=o:o<r&&(r=e.data[n][t],s=n))}return n=null==r&&null==i?void 0:null!=r&&null!=i?(e.valToPos(r,e.series[s].scale)+e.valToPos(i,e.series[a].scale))/2:e.valToPos(r||i,e.series[a||s].scale),void 0!==n&&n<0&&(n=e.bbox.height/devicePixelRatio),n}!function(e){e[e.Pos=1]="Pos",e[e.Neg=-1]="Neg"}(c||(c={}));const m=(0,r.h)("uPlot"),f=m.logger;(0,i.xq)("graphng",void 0,m)},3490:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ALERTING_COLOR:()=>i.ns,ActionMeta:()=>s.fm,Alert:()=>a.bZj,AlertVariant:()=>a.Uxq,AlertingSettings:()=>a.O5T,AsyncMultiSelect:()=>a.M8I,AsyncSelect:()=>a.qbS,AutoSizeInput:()=>a.H6n,AxisConfig:()=>d.AxisConfig,AxisPlacement:()=>d.LB,Badge:()=>a.Cts,BadgeColor:()=>a.JVe,BadgeProps:()=>a.u8S,BarAlignment:()=>d.pu,BarConfig:()=>d.BarConfig,BarGauge:()=>a.xfx,BarGaugeDisplayMode:()=>a.QHm,BarValueVisibility:()=>d.Jp,BigValue:()=>a.w6I,BigValueColorMode:()=>a.pcF,BigValueGraphMode:()=>a.IGx,BigValueJustifyMode:()=>a.apN,BigValueTextMode:()=>a.jGm,BracesPlugin:()=>l.hP,BrowserLabel:()=>a.dI4,Button:()=>a.zxk,ButtonCascader:()=>a.OSz,ButtonGroup:()=>a.hE2,ButtonProps:()=>a.sBP,ButtonSelect:()=>a.doH,ButtonVariant:()=>a.Wu3,CallToActionCard:()=>a._d,Card:()=>a.Zbd,CardContainer:()=>a._L7,CardContainerProps:()=>a.jUt,CardProps:()=>a.dwY,Cascader:()=>a.vTp,CascaderOption:()=>a.iNw,CertificationKey:()=>a.WTJ,Checkbox:()=>a.XZJ,ClearPlugin:()=>l.Gp,ClickOutsideWrapper:()=>a.LVf,ClipboardButton:()=>a.mUV,ClipboardPlugin:()=>l.wl,CodeEditor:()=>a.pq4,CodeEditorMonacoOptions:()=>a.EGH,CodeEditorSuggestionItem:()=>a.L0D,CodeEditorSuggestionItemKind:()=>a.kwZ,CollapsableSection:()=>a.s2J,Collapse:()=>a.UO1,ColorPicker:()=>a.zH8,ColorPickerInput:()=>a.TkS,CompletionItemKind:()=>s.cm,ConfirmButton:()=>a.puI,ConfirmModal:()=>a.sm4,ConfirmModalProps:()=>a.feC,Container:()=>a.W20,ContextMenu:()=>a.xVl,ContextMenuProps:()=>a.CMg,ControlledCollapse:()=>a.ybu,Counter:()=>a.ATJ,CustomScrollbar:()=>a.$TT,DEFAULT_ANNOTATION_COLOR:()=>i.Jx,DOMUtil:()=>i.Qi,DataLinkButton:()=>a.kuP,DataLinkInput:()=>a.vmb,DataLinksContextMenu:()=>a.V5N,DataLinksInlineEditor:()=>a.dIl,DataSourceHttpSettings:()=>a.E1E,DatePicker:()=>a.Mtg,DatePickerProps:()=>a.kse,DatePickerWithInput:()=>a.d2U,DatePickerWithInputProps:()=>a.Qiu,DateTimePicker:()=>a.xZq,DeleteButton:()=>a.m1X,DrawStyle:()=>d.l8,Drawer:()=>a.dys,Dropdown:()=>a.Ltx,DropdownIndicator:()=>a.msj,DropzoneFile:()=>a.isR,EmotionPerfTest:()=>a.jye,EmptySearchResult:()=>a.KBh,ErrorBoundary:()=>a.SVk,ErrorBoundaryAlert:()=>a.z4Q,ErrorBoundaryAlertProps:()=>a.M_3,ErrorWithStack:()=>a.X2N,EventsCanvas:()=>a.TZ,EventsWithValidation:()=>i.JU,FIXED_UNIT:()=>a.jKV,FadeTransition:()=>a.nTT,FeatureBadge:()=>a.aXU,FeatureInfoBox:()=>a.ZjK,Field:()=>a.gNt,FieldArray:()=>a.F26,FieldLinkList:()=>a.Zjt,FieldSet:()=>a.C3N,FieldTextAlignment:()=>d.FieldTextAlignment,FieldValidationMessage:()=>a.S0X,FileDropzone:()=>a.YoT,FileDropzoneDefaultChildren:()=>a.A_i,FileDropzoneProps:()=>a.G1O,FileListItem:()=>a.K$w,FileListItemProps:()=>a.wEv,FileUpload:()=>a.p0f,FillConfig:()=>d.FillConfig,FilterInput:()=>a.HSx,FilterPill:()=>a.BmQ,Form:()=>a.l09,FormFieldErrors:()=>s.nj,FormInputSize:()=>a.YE$,FormattedValueDisplay:()=>a.WRj,FormsOnSubmit:()=>s.lD,FullWidthButtonContainer:()=>a.fiX,Gauge:()=>a.aCY,GlobalStyles:()=>r.nz,Graph:()=>a.kJb,GraphContextMenu:()=>a.wvn,GraphContextMenuHeader:()=>a.bpR,GraphFieldConfig:()=>d.GraphFieldConfig,GraphGradientMode:()=>d.FI,GraphNG:()=>a.drZ,GraphNGLegendEvent:()=>a.aSI,GraphNGProps:()=>a.E2j,GraphSeriesToggler:()=>a.UNL,GraphSeriesTogglerAPI:()=>a.pK4,GraphThresholdsStyleConfig:()=>d.GraphThresholdsStyleConfig,GraphTresholdsStyleMode:()=>d.i3,GraphWithLegend:()=>a.UAG,HideSeriesConfig:()=>d.HideSeriesConfig,HideableFieldConfig:()=>d.HideableFieldConfig,HorizontalGroup:()=>a.LhK,Icon:()=>a.JO$,IconButton:()=>a.hU,IconButtonVariant:()=>a.gZk,IndentationPlugin:()=>l.Rc,InfoBox:()=>a.vDh,InlineField:()=>a._9$,InlineFieldRow:()=>a.Z6t,InlineFormLabel:()=>a.cJ0,InlineLabel:()=>a.W4p,InlineSegmentGroup:()=>a.mOU,InlineSwitch:()=>a.x$6,InlineToast:()=>a.KEo,Input:()=>a.IIB,InputControl:()=>a.gs_,JSONFormatter:()=>a.gwK,JsonExplorer:()=>a.uC,KeyboardPlugin:()=>a.Cmj,Label:()=>a.__J,LegacyForms:()=>a.vw6,LegacyInputStatus:()=>a.Gdq,Legend:()=>a.DeQ,LegendDisplayMode:()=>d.jK,LegendPlacement:()=>d.LegendPlacement,LineConfig:()=>d.LineConfig,LineInterpolation:()=>d.KC,LineStyle:()=>d.LineStyle,Link:()=>a.rUS,LinkButton:()=>a.Qjf,List:()=>a.aVo,LoadingPlaceholder:()=>a.u3Z,LoadingPlaceholderProps:()=>a.c02,LogLabels:()=>a.jwW,LogMessageAnsi:()=>a.QNy,LogRows:()=>a.w3v,Marker:()=>a.JxD,Menu:()=>a.v2r,MenuGroup:()=>a.kSQ,MenuGroupProps:()=>a.VO7,MenuItem:()=>a.sNh,MenuItemProps:()=>a.T4d,MenuItemsGroup:()=>a.oOs,MenuProps:()=>a.ZyH,Modal:()=>a.u_l,ModalHeader:()=>a.xBx,ModalRoot:()=>a.Y0X,ModalTabContent:()=>a.QEF,ModalTabsHeader:()=>a.Han,ModalsContext:()=>a.krk,ModalsController:()=>a.JYt,ModalsProvider:()=>a.$iA,Monaco:()=>a.d$d,MonacoEditor:()=>a.rEm,MultiSelect:()=>a.NUq,NO_DATA_COLOR:()=>i._V,NewlinePlugin:()=>l.z2,NodeGraphDataFrameFieldNames:()=>i.zG,OK_COLOR:()=>i.te,OnTagClick:()=>a.k8K,OptionsWithLegend:()=>d.OptionsWithLegend,OptionsWithTextFormatting:()=>d.OptionsWithTextFormatting,OptionsWithTooltip:()=>d.OptionsWithTooltip,PENDING_COLOR:()=>i.f7,PageToolbar:()=>a.XDu,Pagination:()=>a.tlE,PanelChrome:()=>a.fmR,PanelChromeErrorIndicator:()=>a.qbG,PanelChromeErrorIndicatorProps:()=>a.QEv,PanelChromeLoadingIndicator:()=>a.E3Q,PanelChromeLoadingIndicatorProps:()=>a.oP_,PanelChromeProps:()=>a.vIs,PanelChromeType:()=>a.swS,PanelContainer:()=>a.lk7,PanelContext:()=>a.QPw,PanelContextProvider:()=>a._wC,PanelContextRoot:()=>a.bbH,PanelPadding:()=>a.jX4,PlotLegend:()=>a.lNn,PlotSelection:()=>a.isz,PlotTooltipInterpolator:()=>a.xyZ,PluginSignatureBadge:()=>a.oDb,PluginSignatureBadgeProps:()=>a.bvM,PointVisibility:()=>d.Jp,PointsConfig:()=>d.PointsConfig,Popover:()=>a.J2e,PopoverContent:()=>a.yky,PopoverController:()=>a.Dh5,Portal:()=>a.h_i,PortalContainer:()=>a.lO4,QueryField:()=>a.qjJ,REGION_FILL_ALPHA:()=>i.iV,RadioButtonGroup:()=>a.SYO,RadioButtonList:()=>a.xON,RangeSlider:()=>a.U2U,ReactMonacoEditor:()=>a.VR_,ReactUtils:()=>i.Ot,RefreshPicker:()=>a.dPd,RelativeTimeRangePicker:()=>a.xpf,RunnerPlugin:()=>l.dv,SCHEMA:()=>i.Yi,ScaleDirection:()=>d.bQ,ScaleDistribution:()=>a.wf3,ScaleDistributionConfig:()=>d.ScaleDistributionConfig,ScaleOrientation:()=>d.wN,ScrollbarPosition:()=>a.fqL,SearchFunctionType:()=>i.nu,SecretInput:()=>a.m4K,SecretTextArea:()=>a.Zkz,Segment:()=>a.XX7,SegmentAsync:()=>a.VXm,SegmentInput:()=>a.Xrl,SegmentSection:()=>a.fT$,SegmentSelect:()=>a.VBk,Select:()=>a.PhF,SelectContainer:()=>a.eI2,SelectContainerProps:()=>a.E0,SelectionShortcutsPlugin:()=>l.$L,SeriesColorPicker:()=>a.spA,SeriesColorPickerPopover:()=>a.jx7,SeriesColorPickerPopoverWithTheme:()=>a.qRd,SeriesIcon:()=>a.FiV,SeriesTable:()=>a.cS8,SeriesTableProps:()=>a.VbF,SeriesTableRow:()=>a.VtB,SeriesTableRowProps:()=>a.ha2,SeriesVisibilityChangeBehavior:()=>a.YvT,SeriesVisibilityChangeMode:()=>a.R8q,SetInterval:()=>a.FOj,SingleStatBaseOptions:()=>a.U_X,SlatePrism:()=>l.Ze,SlideOutTransition:()=>a.R9v,Slider:()=>a.iRW,Sparkline:()=>a.bju,Spinner:()=>a.$jN,StackableFieldConfig:()=>d.StackableFieldConfig,StackingConfig:()=>d.StackingConfig,StackingMode:()=>d.o0,StatsPicker:()=>a.mMX,SuggestionsPlugin:()=>l.bm,Switch:()=>a.rsf,TLSAuthSettings:()=>a.sHf,Tab:()=>a.OK9,TabConfig:()=>a.DJl,TabContent:()=>a.I5H,TabbedContainer:()=>a.WLI,Table:()=>a.iA_,TableCellDisplayMode:()=>a.h2q,TableFieldOptions:()=>d.TableFieldOptions,TableInputCSV:()=>a.wtM,TableSortByFieldState:()=>a.JAu,TabsBar:()=>a.J_V,Tag:()=>a.Vp9,TagList:()=>a.PST,TagsInput:()=>a.B7H,TextArea:()=>a.Kx8,ThemeContext:()=>r.Ni,TimeOfDayPicker:()=>a.yAm,TimeRangeInput:()=>a.K4x,TimeRangePicker:()=>a.XcI,TimeRangePickerProps:()=>a.WKf,TimeSeries:()=>a.pfI,TimeZonePicker:()=>a.OkK,Token:()=>l.WU,ToolbarButton:()=>a.hAV,ToolbarButtonRow:()=>a.RNy,Tooltip:()=>a.ua7,TooltipDisplayMode:()=>d.f3,TooltipPlugin:()=>a.iiT,UPLOT_AXIS_FONT_SIZE:()=>a.gDA,UPlotChart:()=>a.N$r,UPlotConfigBuilder:()=>a.UBi,UPlotConfigPrepFn:()=>a.ffP,UnitPicker:()=>a.nAu,ValuePicker:()=>a.b59,VerticalGroup:()=>a.wcK,VerticalTab:()=>a.L2y,VizLayout:()=>a.AYi,VizLayoutComponentType:()=>a.C9i,VizLayoutLegendProps:()=>a.Lxb,VizLayoutProps:()=>a.wIc,VizLegend:()=>a.ltB,VizLegendItem:()=>a.Jn8,VizLegendListItem:()=>a.eMh,VizLegendOptions:()=>d.VizLegendOptions,VizRepeater:()=>a.QBm,VizRepeaterRenderValueProps:()=>a.M9j,VizTextDisplayOptions:()=>d.VizTextDisplayOptions,VizTooltip:()=>a.I5C,VizTooltipContainer:()=>a.S$u,VizTooltipOptions:()=>d.VizTooltipOptions,WeekStartPicker:()=>a.zDr,WithContextMenu:()=>a.zH1,XYCanvas:()=>a.K2,ZoomPlugin:()=>a.Rbc,ansicolor:()=>i._J,attachDebugger:()=>i.xq,buildScaleKey:()=>a.z12,calculateFontSize:()=>i.MX,colors:()=>i.O9,commonOptionsBuilder:()=>o,convertOldAngularValueMapping:()=>a.PRL,createLogger:()=>i.hu,defaultIntervals:()=>a.o5O,fieldMatchersUI:()=>a.ivH,fuzzyMatch:()=>i.C6,getAvailableIcons:()=>s.BI,getCanvasContext:()=>i.AE,getCardStyles:()=>a.LyM,getCellLinks:()=>i.iu,getFieldTypeIcon:()=>s.e7,getInputStyles:()=>a.HxM,getLogRowStyles:()=>a.hIY,getPortalContainer:()=>a.RNS,getScrollbarWidth:()=>i.np,getSelectStyles:()=>a.D1k,getTagColor:()=>i.vm,getTagColorsFromName:()=>i.Bx,getTextColorForBackground:()=>i.Gc,getTheme:()=>r.gh,graphFieldOptions:()=>a.qVi,graphTickFormatter:()=>a.sVu,graphTimeFormat:()=>a.mcr,hasValidationEvent:()=>i.z3,linkModelToContextMenuItems:()=>i.Rc,makeFragment:()=>i.xl,makeValue:()=>i.l1,measureText:()=>i.X1,mockTheme:()=>r.Zu,mockThemeContext:()=>r.sJ,monacoTypes:()=>a.NFT,preparePlotFrame:()=>a.RnT,regexValidation:()=>i.FE,resetSelectStyles:()=>a.JpF,sharedInputStyle:()=>a.RKV,sharedSingleStatMigrationHandler:()=>a.rDf,sharedSingleStatPanelChangedHandler:()=>a.ZHc,sortedColors:()=>i.Wm,styleMixins:()=>r.GU,stylesFactory:()=>r.Bb,useForceUpdate:()=>i.NW,useGraphNGContext:()=>a.zrC,usePanelContext:()=>a.R9P,useStyles:()=>r.yK,useStyles2:()=>r.wW,useTheme:()=>r.Fg,useTheme2:()=>r.l4,validate:()=>i.Gu,variableSuggestionToCodeEditorSuggestion:()=>a.ThK,withErrorBoundary:()=>a.PfY,withTheme:()=>r.Zz,withTheme2:()=>r.HE});var a=n(29200),s=n(52410),i=n(89409),r=n(49268),o=n(95533),l=n(9676),d=n(97024)},95533:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ScaleDistributionEditor:()=>u,StackingEditor:()=>x,addAxisConfig:()=>l,addHideFrom:()=>g,addLegendOptions:()=>m,addStackingConfig:()=>y,addTextSizeOptions:()=>v,addTooltipOptions:()=>f});var a=n(68404),s=n(43215),i=n(97024),r=n(3490),o=n(45916);function l(e,t,n){const a=["Axis"];e.addRadio({path:"axisPlacement",name:"Placement",category:a,defaultValue:r.graphFieldOptions.axisPlacement[0].value,settings:{options:r.graphFieldOptions.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:a,defaultValue:"",settings:{placeholder:"Optional text"},showIf:e=>e.axisPlacement!==i.LB.Hidden,shouldApply:e=>e.type!==s.FieldType.time&&e.type!==s.FieldType.string}).addNumberInput({path:"axisWidth",name:"Width",category:a,settings:{placeholder:"Auto"},showIf:e=>e.axisPlacement!==i.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:a,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:a,defaultValue:i.yK.Text,settings:{options:[{value:i.yK.Text,label:"Text"},{value:i.yK.Series,label:"Series"}]}}),e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:a,editor:u,override:u,defaultValue:{type:i.wf.Linear},shouldApply:e=>e.type===s.FieldType.number,process:s.identityOverrideProcessor}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:a,defaultValue:!1,showIf:e=>{var t;return(null===(t=e.scaleDistribution)||void 0===t?void 0:t.type)!==i.wf.Log}}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:t.axisSoftMin,category:a,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:t.axisSoftMax,category:a,settings:{placeholder:"See: Standard options > Max"}})}const d=[{label:"Linear",value:i.wf.Linear},{label:"Logarithmic",value:i.wf.Log}],c=[{label:"2",value:2},{label:"10",value:10}],u=e=>{var t;let{value:n,onChange:a}=e;const s=null!==(t=null==n?void 0:n.type)&&void 0!==t?t:i.wf.Linear;return(0,o.jsxs)(r.HorizontalGroup,{children:[(0,o.jsx)(r.RadioButtonGroup,{value:s,options:d,onChange:e=>{a(Object.assign({},n,{type:e,log:e===i.wf.Linear?void 0:2}))}}),s===i.wf.Log&&(0,o.jsx)(r.Select,{options:c,value:n.log||2,prefix:"base",width:12,onChange:e=>{a(Object.assign({},n,{log:e.value}))}})]})};var h=n(82897);const p=e=>{const{value:t,onChange:n}=e,s=(0,a.useCallback)((e=>{n(Object.assign({},t,{[e]:!t[e]}))}),[t,n]);return(0,o.jsx)(r.HorizontalGroup,{spacing:"xs",children:Object.keys(t).map((e=>{const n=e;return(0,o.jsx)(r.FilterPill,{icon:t[n]?"eye-slash":"eye",onClick:()=>s(n),label:(0,h.startCase)(n),selected:t[n]},n)}))})};function g(e){e.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:p,override:p,shouldApply:()=>!0,hideFromDefaults:!0,process:e=>e})}function m(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:i.jK.List,settings:{options:[{value:i.jK.List,label:"List"},{value:i.jK.Table,label:"Table"}]},showIf:e=>e.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:e=>e.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:e=>e.legend.showLegend&&"right"===e.legend.placement}),t&&e.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:s.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:e=>!1!==e.legend.showLegend})}function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=["Tooltip"],a=t?[{value:i.f3.Single,label:"Single"},{value:i.f3.None,label:"Hidden"}]:[{value:i.f3.Single,label:"Single"},{value:i.f3.Multi,label:"All"},{value:i.f3.None,label:"Hidden"}],s=[{value:i.As.None,label:"None"},{value:i.As.Ascending,label:"Ascending"},{value:i.As.Descending,label:"Descending"}];e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:n,defaultValue:"single",settings:{options:a}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:n,defaultValue:i.As.None,showIf:e=>e.tooltip.mode===i.f3.Multi,settings:{options:s}})}function v(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&e.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),e.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}var b;const x=e=>{let{value:t,context:n,onChange:a,item:s}=e;return(0,o.jsxs)(r.HorizontalGroup,{children:[(0,o.jsx)(r.RadioButtonGroup,{value:(null==t?void 0:t.mode)||i.o0.None,options:s.settings.options,onChange:e=>{a(Object.assign({},t,{mode:e}))}}),n.isOverride&&(null==t?void 0:t.mode)&&(null==t?void 0:t.mode)!==i.o0.None&&(0,o.jsx)(r.Input,{type:"text",placeholder:"Group",suffix:b||(b=(0,o.jsx)(r.Tooltip,{content:"Name of the stacking group",placement:"top",children:(0,o.jsx)(r.IconButton,{name:"question-circle"})})),defaultValue:null==t?void 0:t.group,onChange:e=>{a(Object.assign({},t,{group:e.currentTarget.value.trim()}))}})]})};function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["Graph styles"];e.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:n,defaultValue:t,editor:x,override:x,settings:{options:r.graphFieldOptions.stacking},process:s.identityOverrideProcessor,shouldApply:e=>e.type===s.FieldType.number})}},9676:(e,t,n)=>{"use strict";n.d(t,{hP:()=>i,Gp:()=>r,wl:()=>l,Rc:()=>f,z2:()=>v,dv:()=>b,$L:()=>y,Ze:()=>w.Z,bm:()=>Y,WU:()=>w.Token});var a=n(34110);const s={"[":"]","{":"}","(":")"};function i(){return{onKeyDown(e,t,n){const{value:i}=t;switch(e.key){case"(":case"{":case"[":{const{start:{offset:n,key:r},end:{offset:o,key:l},focus:{offset:d}}=i.selection,c=i.focusText.text;if(i.selection.isExpanded)return e.preventDefault(),t.insertTextByKey(r,n,e.key).insertTextByKey(l,o+1,s[e.key]).moveEndBackward(1),!0;if(d===c.length||" "===c[d]||Object.values(s).includes(c[d])){e.preventDefault();const i=s[e.key],d={key:`brace_match-${(0,a.Z)()}`,type:`brace_match-${i}`,anchor:{key:r,offset:n,object:"point"},focus:{key:l,offset:o+1,object:"point"},object:"annotation"};return t.insertText(e.key).insertText(i).addAnnotation(d).moveBackward(1),!0}break}case")":case"}":case"]":{const n=i.anchorText.text[i.selection.anchor.offset],a=e.key,s=`brace_match-${a}`,r=i.annotations.find((e=>(null==e?void 0:e.type)===s&&e.anchor.key===i.anchorText.key));if(r&&n===a&&!i.selection.isExpanded)return e.preventDefault(),t.moveFocusForward(1).removeAnnotation(r).moveAnchorForward(1),!0;break}case"Backspace":{const n=i.anchorText.text,a=i.selection.anchor.offset,r=n[a-1],o=n[a];if(s[r]&&s[r]===o)return e.preventDefault(),t.deleteBackward(1).deleteForward(1).focus(),!0}}return n()}}}function r(){return{onKeyDown(e,t,n){const a=t.value;if(a.selection.isExpanded)return n();if("k"===e.key&&e.ctrlKey){e.preventDefault();const n=a.anchorText.text,s=a.selection.anchor.offset,i=n.length-s;return t.deleteForward(i),!0}return n()}}}const o=e=>null==e?void 0:e.replace(/[\uFEFF]/g,"");function l(){const e={onCopy(e,t,n){e.preventDefault();const{document:a,selection:s}=t.value,{start:{offset:i},end:{offset:r}}=s,l=a.getLeafBlocksAtRange(s).toArray().map((e=>e.text)),d=o(((e,t,n)=>{if(!e.length)return;const a=e.slice(0,-1).join("").length+e.length-1;return e.join("\n").slice(t,a+n)})(l,i,r));return d&&e.clipboardData&&e.clipboardData.setData("Text",d),!0},onPaste(e,t,n){if(e.preventDefault(),e.clipboardData){const n=o(e.clipboardData.getData("Text")),a=null==n?void 0:n.split("\n");if(a&&a.length){t.insertText(a[0]);for(const e of a.slice(1))t.splitBlock().insertText(e)}}return!0}};return Object.assign({},e,{onCut:(t,n,a)=>(e.onCopy(t,n,a),n.deleteAtRange(n.value.selection),!0)})}var d=n(59641),c=n(87280);const u=(0,d.TB)("mod+["),h=(0,d.TB)("shift+tab"),p=(0,d.TB)("mod+]"),g="  ",m=(e,t)=>{const n=e.value.selection,a=e.value.document.getLeafBlocksAtRange(n).toArray();if("left"===t)for(const t of a){const n=t.text.length-t.text.trimLeft().length,a=t.getFirstText().key,s={anchor:{key:a,offset:n,path:[]},focus:{key:a,offset:n,path:[]}};e.deleteBackwardAtRange(c.e6.create(s),Math.min(g.length,n))}else{const{startText:t}=e.value,s=t.text.slice(0,n.start.offset),i=/^\s*$/.test(s);for(const t of a)e.insertTextByKey(t.getFirstText().key,0,g);i&&e.moveStartBackward(g.length)}};function f(){return{onKeyDown(e,t,n){if(u(e)||h(e))e.preventDefault(),m(t,"left");else if(p(e))e.preventDefault(),m(t,"right");else{if("Tab"!==e.key)return n();e.preventDefault(),((e,t,n)=>{const{startBlock:a,endBlock:s,selection:{start:{offset:i,key:r},end:{offset:o,key:l}}}=t.value,d=a.getFirstText();d&&0===i&&r===d.key&&o===d.text.length&&l===d.key||!a.equals(s)?m(t,"right"):t.insertText(g)})(0,t)}return!0}}}function v(){return{onKeyDown(e,t,n){const a=t.value;if(a.selection.isExpanded)return n();if("Enter"===e.key){e.preventDefault();const{startBlock:n}=a,s=function(e){let t=e.length-e.trimLeft().length;if(t){let n=e[0];for(;--t;)n+=e[0];return n}return""}(n.text);return t.splitBlock().insertText(s).focus()}return n()}}}function b(e){let{handler:t}=e;return{onKeyDown:(e,n,a)=>t&&"Enter"===e.key&&(e.shiftKey||e.ctrlKey)?(e.preventDefault(),t(e),n):a()}}const x=(0,d.TB)("mod+l");function y(){return{onKeyDown(e,t,n){if(!x(e))return n();{e.preventDefault();const{focusBlock:n,document:a}=t.value;t.moveAnchorToStartOfBlock();a.getNextBlock(n.key)?t.moveFocusToStartOfNextBlock():t.moveFocusToEndOfText()}return!0}}}var w=n(79149),j=n(82897),S=n(68404),C=n(87524),k=n(62859),T=n(73512),I=n(13914),O=n(13265);const N=e=>e.reduce(((e,t)=>{let{items:n,label:a}=t;return e.push({label:a,kind:I.c.GroupTitle}),n.reduce(((e,t)=>(e.push(t),e)),e)}),[]),F=e=>e.reduce(((e,t)=>e.length<t.label.length?t.label:e),""),D=(e,t,n)=>{const a=(0,O.Z)(n,{font:e.typography.fontFamily.monospace,fontSize:e.typography.size.sm,fontWeight:"normal"}),s=A(a.width,e),i=P(a.height,e);return{listWidth:s,listHeight:M(i,t),itemHeight:i}},P=(e,t)=>e+2*parseInt(t.spacing.sm,10),A=(e,t)=>{const n=parseInt(t.spacing.sm,10)+parseInt(t.spacing.md,10);return Math.min(Math.max(e+n,200),800)},M=(e,t)=>{const n=Math.min(t.length,10)*e;return Math.max(n,100)};var R,$=n(36636),L=n(43215),E=n(45916);const V=e=>{let{item:t,height:n}=e;const a=t&&!!t.documentation,s=t?t.label:"",i=(0,L.renderMarkdown)(null==t?void 0:t.documentation),r=((e,t,n)=>({typeaheadItem:$.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.md};
      border-radius: ${e.border.radius.md};
      border: ${e.colors.border2};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${e.colors.bg2};
      color: ${e.colors.text};
      box-shadow: 0 0 20px ${e.colors.dropdownShadow};
      visibility: ${!0===n?"visible":"hidden"};
      width: 250px;
      min-height: ${t+parseInt(e.spacing.xxs,10)}px;
      position: relative;
      word-break: break-word;
    `}))((0,T.Fg)(),n,a);return(0,E.jsxs)("div",{className:(0,$.cx)([r.typeaheadItem]),children:[(0,E.jsx)("b",{children:s}),R||(R=(0,E.jsx)("hr",{})),(0,E.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})]})};var B=n(9575),z=n.n(B),_=n(88241);const U=e=>({typeaheadItem:$.css`
    label: type-ahead-item;
    height: auto;
    font-family: ${e.typography.fontFamily.monospace};
    padding: ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.md};
    font-size: ${e.typography.size.sm};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:$.css`
    label: type-ahead-item-selected;
    background-color: ${e.colors.bg2};
  `,typeaheadItemMatch:$.css`
    label: type-ahead-item-match;
    color: ${e.palette.yellow};
    border-bottom: 1px solid ${e.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:$.css`
    label: type-ahead-item-group-title;
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.lineHeight.md};
    padding: ${e.spacing.sm};
  `}),H=e=>{const t=(0,T.yK)(U),{isSelected:n,item:a,prefix:s,style:i,onMouseEnter:r,onMouseLeave:o,onClickItem:l}=e,d=n?(0,$.cx)([t.typeaheadItem,t.typeaheadItemSelected]):(0,$.cx)([t.typeaheadItem]),c=(0,$.cx)([t.typeaheadItemMatch]),u=(0,$.cx)([t.typeaheadItemGroupTitle]),h=a.label||"";return a.kind===I.c.GroupTitle?(0,E.jsx)("li",{className:u,style:i,children:(0,E.jsx)("span",{children:h})}):(0,E.jsx)("li",{className:d,style:i,onMouseDown:l,onMouseEnter:r,onMouseLeave:o,children:void 0!==a.highlightParts?(0,E.jsx)(_.H,{text:h,highlightClassName:c,highlightParts:a.highlightParts}):(0,E.jsx)(z(),{textToHighlight:h,searchWords:[null!=s?s:""],autoEscape:!0,highlightClassName:c})})};function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q=(e,t)=>e-t*Math.floor(e/t);class Z extends S.PureComponent{constructor(){super(...arguments),W(this,"context",void 0),W(this,"listRef",(0,S.createRef)()),W(this,"state",{hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1}),W(this,"componentDidMount",(()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const e=N(this.props.groupedItems),t=F(e),{listWidth:n,listHeight:a,itemHeight:s}=D(this.context.v1,e,t);this.setState({listWidth:n,listHeight:a,itemHeight:s,allItems:e})})),W(this,"componentWillUnmount",(()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)})),W(this,"handleSelectionChange",(()=>{this.forceUpdate()})),W(this,"componentDidUpdate",((e,t)=>{if(null!==this.state.typeaheadIndex&&t.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(1===this.state.typeaheadIndex)return void this.listRef.current.scrollToItem(0);this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if(!1===(0,j.isEqual)(e.groupedItems,this.props.groupedItems)){const e=N(this.props.groupedItems),t=F(e),{listWidth:n,listHeight:a,itemHeight:s}=D(this.context.v1,e,t);this.setState({listWidth:n,listHeight:a,itemHeight:s,allItems:e,typeaheadIndex:null})}})),W(this,"onMouseEnter",(e=>{this.setState({hoveredItem:e})})),W(this,"onMouseLeave",(()=>{this.setState({hoveredItem:null})})),W(this,"moveMenuIndex",(e=>{const t=this.state.allItems.length;if(t){const n=this.state.typeaheadIndex||0;let a=q(n+e,t);return this.state.allItems[a].kind===I.c.GroupTitle&&(a=q(a+e,t)),void this.setState({typeaheadIndex:a})}})),W(this,"insertSuggestion",(()=>{this.props.onSelectSuggestion&&null!==this.state.typeaheadIndex&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}))}get menuPosition(){if(!window.getSelection)return"";const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){const e=t.parentElement.getBoundingClientRect(),n=window.scrollX,a=window.scrollY;return`position: absolute; display: flex; top: ${e.top+a+e.height+6}px; left: ${e.left+n-2}px`}return""}render(){const{prefix:e,isOpen:t=!1,origin:n}=this.props,{allItems:a,listWidth:s,listHeight:i,itemHeight:r,hoveredItem:o,typeaheadIndex:l}=this.state,d=o||l,c=a[o||(l||0)];return(0,E.jsxs)(G,{origin:n,isOpen:t,style:this.menuPosition,children:[(0,E.jsx)("ul",{className:"typeahead","data-testid":"typeahead",children:(0,E.jsx)(k.t7,{ref:this.listRef,itemCount:a.length,itemSize:r,itemKey:e=>{const t=a&&a[e];return t?`${e}-${t.label}`:`${e}`},width:s,height:i,children:t=>{let{index:n,style:s}=t;const i=a&&a[n];return i?(0,E.jsx)(H,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(i):{},isSelected:null!==l&&a[l]===i,item:i,prefix:e,style:s,onMouseEnter:()=>this.onMouseEnter(n),onMouseLeave:this.onMouseLeave}):null}})}),d&&(0,E.jsx)(V,{height:i,item:c})]})}}W(Z,"contextType",T.Ni);class G extends S.PureComponent{constructor(e){super(e),W(this,"node",void 0);const{index:t=0,origin:n="query",style:a}=e;this.node=document.createElement("div"),this.node.setAttribute("style",a),this.node.classList.add("slate-typeahead",`slate-typeahead-${n}-${t}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),C.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var K=n(89409),Q=n(16101),J=n(48550);function Y(e){let t,{onTypeahead:n,cleanText:a,onWillApplySuggestion:s,portalOrigin:i}=e,r={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const o=(0,j.debounce)(X,250),l=e=>{r=Object.assign({},r,e)};return{onBlur:(e,t,n)=>(r=Object.assign({},r,{groupedItems:[]}),n()),onClick:(e,t,n)=>(r=Object.assign({},r,{groupedItems:[]}),n()),onKeyDown:(e,s,i)=>{const d=r.groupedItems.length;switch(e.key){case"Escape":if(d)return e.preventDefault(),r=Object.assign({},r,{groupedItems:[]}),s.insertText("");break;case"ArrowDown":case"ArrowUp":if(d)return e.preventDefault(),void t.moveMenuIndex("ArrowDown"===e.key?1:-1);break;case"Enter":if(!e.shiftKey&&!e.ctrlKey&&d)return e.preventDefault(),t.insertSuggestion();break;case"Tab":if(d)return e.preventDefault(),t.insertSuggestion();break;default:1===e.key.length&&o(s,l,n,a)}return i()},commands:{selectSuggestion:(e,t)=>{const s=r.groupedItems;if(!s||!s.length)return e;const i=e.applyTypeahead(t);return o(e,l,n,a),i},applyTypeahead:(e,t)=>{let n=t.insertText||t.label;const i="function"===t.kind,o=t.move||0,{typeaheadPrefix:l,typeaheadText:d,typeaheadContext:c}=r;s&&(n=s(n,{groupedItems:r.groupedItems,typeaheadContext:c,typeaheadPrefix:l,typeaheadText:d}));const u=t.deleteBackwards||l.length,h=(a?a(d):d).length-l.length,p=d.indexOf(l),g=l&&(h>0&&p>-1||n===d)&&!i?h+p:0;if(n.match(/\n/)){const t=(0,K.xl)(n);return e.deleteBackward(u).deleteForward(g).insertFragment(t).focus(),e}return r=Object.assign({},r,{groupedItems:[]}),e.snapshotSelection().deleteBackward(u).deleteForward(g).insertText(n).moveForward(o).focus(),e}},renderEditor(e,n,a){if(n.value.selection.isExpanded)return a();const s=a();return(0,E.jsxs)(E.Fragment,{children:[s,(0,E.jsx)(Z,{menuRef:e=>t=e,origin:i,prefix:r.typeaheadPrefix,isOpen:!!r.groupedItems.length,groupedItems:r.groupedItems,onSelectSuggestion:n.selectSuggestion})]})}}}const X=async(e,t,n,a)=>{if(!n)return;const{value:s}=e,{selection:i}=s,r=s.document.getClosestBlock(s.focusBlock.key),o=s.selection.start.offset-1,l=r&&r.getDecorations(e),d=l?l.filter((e=>e.start.offset<=o&&e.end.offset>o&&e.type===J.Z)).toArray():[],c=l&&l.filter((e=>e.end.offset<=o&&e.type===J.Z&&e.data.get("className").includes("label-key"))).last(),u=c&&s.focusText.text.slice(c.start.offset,c.end.offset),h=d.map((e=>e.data.get("className"))).join(" ").split(" ").filter((e=>e.length));let p=s.focusText.text,g=p.slice(0,i.focus.offset);d.length&&(p=s.focusText.text.slice(d[0].start.offset,d[0].end.offset),g=s.focusText.text.slice(d[0].start.offset,i.focus.offset));const m=g.match(/(?:!?=~?"?|")(.*)/);m?g=m[1]:a&&(g=a(g));const{suggestions:f,context:v}=await n({prefix:g,text:p,value:s,wrapperClasses:h,labelKey:u||void 0,editor:e});t({groupedItems:f.map((e=>{if(!e.items)return e;const t=e.searchFunctionType||(e.prefixMatch?K.nu.Prefix:K.nu.Word),n=Q.n[t];let a=Object.assign({},e);return g&&(e.skipFilter||(a.items=a.items.filter((e=>(e.filterText||e.label).length>=g.length)),a.items=n(a.items,g)),a.items=a.items.filter((e=>{var t;return!(e.insertText===g||(null!==(t=e.filterText)&&void 0!==t?t:e.label)===g)}))),e.skipSort||(a.items=(0,j.sortBy)(a.items,(e=>void 0===e.sortText?void 0!==e.sortValue?e.sortValue:e.label:e.sortText||e.label))),a})).filter((e=>e.items&&e.items.length)),typeaheadPrefix:g,typeaheadContext:v,typeaheadText:p}),e.blur().focus()}},48550:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a="prism-token"},79149:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g,a:()=>b});var a=n(50539),s=n.n(a),i=n(87280),r=n(48550),o=n(16565),l=(n(68404),n(45916));function d(e){return"block"===e.object&&"code_block"===e.type}function c(e){return"javascript"}function u(e,t,n){const{decoration:a}=e;if(a.type!==r.Z)return n();const s=a.data.get("className");return(0,l.jsx)("span",{className:s,children:e.children})}class h extends((0,o.Record)({onlyIn:d,getSyntax:c,renderDecoration:u})){constructor(e){super(e)}}const p=h;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s().languages;const n=new p(e);return{decorateNode:(e,a,r)=>{if(!n.onlyIn(e))return r();const o=i.gO.create(e),l=n.getSyntax(o),d=t[l];if(!d)return[];const c=o.getTexts().map((e=>e&&e.getText())).join("\n"),u=s().tokenize(c,d),h=b(u),p=a.value.data.set("tokens",h);return a.setData(p),m(n,u,o)},renderDecoration:(e,t,a)=>n.renderDecoration({children:e.children,decoration:e.decoration},t,a)}}function m(e,t,n){const a=n.getTexts(),s=[];let i=0,r=0;return a.forEach((e=>{r=i+e.getText().length;let a=0;t.forEach((function t(o,l){if("string"==typeof o){if(l){const t=f({text:e,textStart:i,textEnd:r,start:a,end:a+o.length,className:`prism-token token ${l}`,block:n});t&&s.push(t)}a+=o.length}else if(l=`${l} ${o.type}`,o.alias&&(l+=" "+o.alias),"string"==typeof o.content){const t=f({text:e,textStart:i,textEnd:r,start:a,end:a+o.content.length,className:`prism-token token ${l}`,block:n});t&&s.push(t),a+=o.content.length}else for(let e=0;e<o.content.length;e+=1)t(o.content[e],l)})),i=r+1})),s}function f(e){let{text:t,textStart:n,textEnd:a,start:s,end:i,className:o,block:l}=e;if(s>=a||i<=n)return null;s=Math.max(s,n),i=Math.min(i,a),s-=n,i-=n;return l.createDecoration({object:"decoration",anchor:{key:t.key,offset:s,object:"point"},focus:{key:t.key,offset:i,object:"point"},type:r.Z,data:{className:o}})}function v(e){return"string"==typeof e?[{content:e,types:[],aliases:[]}]:Array.isArray(e)?e.flatMap((e=>v(e))):e instanceof s().Token?v(e.content).flatMap((t=>{let n=[];var a;"string"==typeof e.alias?n=[e.alias]:n=null!==(a=e.alias)&&void 0!==a?a:[];return{content:t.content,types:[e.type,...t.types],aliases:[...n,...t.aliases]}})):[]}function b(e){const t=v(e);if(!t.length)return[];const n=t[0];n.prev=null,n.next=t.length>=2?t[1]:null,n.offsets={start:0,end:n.content.length};for(let e=1;e<t.length-1;e++)t[e].prev=t[e-1],t[e].next=t[e+1],t[e].offsets={start:t[e-1].offsets.end,end:t[e-1].offsets.end+t[e].content.length};const a=t[t.length-1];return a.prev=t.length>=2?t[t.length-2]:null,a.next=null,a.offsets={start:t.length>=2?t[t.length-2].offsets.end:0,end:t.length>=2?t[t.length-2].offsets.end+a.content.length:a.content.length},t}},73512:(e,t,n)=>{"use strict";n.d(t,{Fg:()=>g,HE:()=>p,Ni:()=>u,Zz:()=>h,l4:()=>m,sJ:()=>b,wW:()=>v,yK:()=>f});var a=n(24420),s=n.n(a),i=n(68404),r=n(43215),o=n(19229),l=n(45916);let d=null;const c=new WeakMap,u=i.createContext((0,r.createTheme)());u.displayName="ThemeContext";const h=e=>{const t=t=>{const n=d||u;return(0,l.jsx)(n.Consumer,{children:n=>(0,l.jsx)(e,Object.assign({},t,{theme:n.v1}))})};return t.displayName=`WithTheme(${e.displayName})`,s()(t,e),t},p=e=>{const t=t=>{const n=d||u;return(0,l.jsx)(n.Consumer,{children:n=>(0,l.jsx)(e,Object.assign({},t,{theme:n}))})};return t.displayName=`WithTheme(${e.displayName})`,s()(t,e),t};function g(){return(0,i.useContext)(d||u).v1}function m(){return(0,i.useContext)(d||u)}function f(e){const t=g();let n=c.get(e);return n||(n=(0,o.B)(e),c.set(e,n)),n(t)}function v(e){const t=m();let n=c.get(e);return n||(n=(0,o.B)(e),c.set(e,n)),n(t)}const b=e=>(d=i.createContext(e),()=>{d=null})},49268:(e,t,n)=>{"use strict";n.d(t,{nz:()=>v,Ni:()=>a.Ni,gh:()=>r,Zu:()=>o,sJ:()=>a.sJ,GU:()=>h,Bb:()=>l.B,yK:()=>a.yK,wW:()=>a.wW,Fg:()=>a.Fg,l4:()=>a.l4,Zz:()=>a.Zz,HE:()=>a.HE});var a=n(73512),s=n(43215);let i;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark";return i?i(e):(0,s.createTheme)({colors:{mode:e}}).v1},o=e=>(i=e,()=>{i=null});var l=n(19229),d=n(93214);n(68404);function c(e){return d.iv`
    .panel-options-group {
      border-bottom: 1px solid ${e.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${e.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${e.colors.text.primary};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${e.colors.text.secondary};
      margin-right: ${e.spacing(1)};
      padding: ${e.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${e.spacing(1,2,1,4)};
    }
  `}function u(e){return d.iv`
    .card-section {
      margin-bottom: ${e.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${e.colors.background.secondary};
      box-shadow: none;
      padding: ${e.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${e.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${e.spacing(2)};
    }

    .card-item-type {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${e.typography.size.sm};
    }

    .card-item-name {
      color: ${e.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${e.spacing(1)};
    }

    .card-item-sub-name {
      color: ${e.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${e.spacing(2)};
      font-size: ${e.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${e.typography.size.sm};
        display: inline-block;
        margin-left: ${e.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${e.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h3.fontSize};
      }

      ${e.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${e.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${e.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${e.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${e.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var h=n(29977);function p(e){return d.iv`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${e.typography.htmlFontSize}px;
      font-family: ${e.typography.fontFamily};
      line-height: ${e.typography.body.lineHeight};
      font-kerning: normal;
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.canvas};
      ${g(e.typography.body)}
    }

    h1,
    .h1 {
      ${g(e.typography.h1)}
    }
    h2,
    .h2 {
      ${g(e.typography.h2)}
    }
    h3,
    .h3 {
      ${g(e.typography.h3)}
    }
    h4,
    .h4 {
      ${g(e.typography.h4)}
    }
    h5,
    .h5 {
      ${g(e.typography.h5)}
    }
    h6,
    .h6 {
      ${g(e.typography.h6)}
    }

    p {
      margin: 0 0 ${e.spacing(2)};
    }

    button {
      letter-spacing: ${e.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,h.getFocusStyles)(e)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${e.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${e.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${e.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${e.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${e.colors.text.primary};
    }

    .text-warning {
      color: ${e.colors.warning.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${e.colors.error.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${e.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,h.getFocusStyles)(e)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${e.components.textHighlight.background};
      color: ${e.components.textHighlight.text};
      padding: 0;
    }
  `}function g(e){return`\n    margin: 0;\n    font-size: ${e.fontSize};    \n    line-height: ${e.lineHeight};\n    font-weight: ${e.fontWeight};\n    letter-spacing: ${e.letterSpacing};\n    font-family: ${e.fontFamily};\n    margin-bottom: 0.45em;\n  `}function m(e){const t=e.breakpoints.values.xxl+2*e.spacing.gridSize+e.components.sidemenu.width;return d.iv`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};

      ${e.breakpoints.up("sm")} {
        margin: ${e.spacing(0,1)};
      }

      ${e.breakpoints.up("md")} {
        margin: ${e.spacing(0,2)};
      }

      @media (min-width: ${t}px) {
        max-width: ${e.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${e.spacing(2)};
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};
    }

    .page-body {
      padding: ${e.spacing(1)};
      background: ${e.components.panel.background};
      border: 1px solid ${e.components.panel.borderColor};
      margin-bottom: 32px;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(2)};
      }

      ${e.breakpoints.up("lg")} {
        padding: ${e.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${e.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${e.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${e.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button {
        margin-left: ${e.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${e.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${e.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${e.spacing(1)};
      margin-top: ${e.spacing(.5)};
    }
  `}var f=n(45916);function v(){const e=(0,a.l4)();return(0,f.jsx)(d.xB,{styles:[p(e),m(e),u(e),c(e),d.iv`
    // TODO copy from _utils.scss
  `]})}},29977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{cardChrome:()=>i,focusCss:()=>c,getFocusStyles:()=>h,getMouseFocusStyles:()=>u,getTooltipContainerStyles:()=>p,hoverColor:()=>r,listItem:()=>o,listItemSelected:()=>l,mediaUp:()=>d});var a=n(35008),s=n.n(a);function i(e){return`\n    background: ${e.colors.background.secondary};\n    &:hover {\n      background: ${r(e.colors.background.secondary,e)};\n    }\n    box-shadow: ${e.components.panel.boxShadow};\n    border-radius: ${e.shape.borderRadius(2)};\n`}function r(e,t){return t.isDark?s()(e).brighten(2).toString():s()(e).darken(2).toString()}function o(e){return`\n  background: ${e.colors.background.secondary};\n  &:hover {\n    background: ${r(e.colors.background.secondary,e)};\n  }\n  box-shadow: ${e.components.panel.boxShadow};\n  border-radius: ${e.shape.borderRadius(2)};\n`}function l(e){return`\n    background: ${r(e.colors.background.secondary,e)};\n    color: ${e.colors.text.maxContrast};\n`}function d(e){return`only screen and (min-width: ${e})`}const c=e=>`\n  outline: 2px dotted transparent;\n  outline-offset: 2px;\n  box-shadow: 0 0 0 2px ${e.colors.bodyBg}, 0 0 0px 4px ${e.colors.formFocusOutline};\n  transition-property: outline, outline-offset, box-shadow;\n  transition-duration: 0.2s;\n  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);\n`;function u(e){return{outline:"none",boxShadow:"none"}}function h(e){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${e.colors.background.canvas}, 0 0 0px 4px ${e.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const p=e=>`\n  overflow: hidden;\n  background: ${e.colors.background.secondary};\n  box-shadow: ${e.shadows.z2};\n  max-width: 800px;\n  padding: ${e.spacing(1)};\n  border-radius: ${e.shape.borderRadius()};\n  z-index: ${e.zIndex.tooltip};\n`},19229:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var a=n(58635);function s(e){return(0,a.Z)(e)}},13914:(e,t,n)=>{"use strict";let a;n.d(t,{c:()=>a}),function(e){e.GroupTitle="GroupTitle"}(a||(a={}))},52410:(e,t,n)=>{"use strict";n.d(t,{fm:()=>a.ActionMeta,cm:()=>s.c,nj:()=>i.FieldErrors,lD:()=>i.SubmitHandler,BI:()=>o,e7:()=>l});var a={};n.r(a);var s=n(13914),i=n(80916),r=n(43215);const o=()=>["anchor","angle-double-down","angle-double-right","angle-double-up","angle-down","angle-left","angle-right","angle-up","apps","arrow","arrow-down","arrow-from-right","arrow-left","arrow-random","arrow-right","arrow-up","arrows-h","arrows-v","backward","bars","bell","bell-slash","bolt","book","bookmark","book-open","brackets-curly","building","bug","building","calculator-alt","calendar-alt","camera","capture","channel-add","chart-line","check","check-circle","circle","clipboard-alt","clock-nine","cloud","cloud-download","cloud-upload","code-branch","cog","columns","comment-alt","comment-alt-message","comment-alt-share","comments-alt","compass","copy","credit-card","cube","dashboard","database","document-info","download-alt","draggabledots","edit","ellipsis-v","envelope","exchange-alt","exclamation-triangle","exclamation-circle","external-link-alt","eye","eye-slash","ellipsis-h","fa fa-spinner","favorite","file-alt","file-blank","file-copy-alt","filter","folder","font","fire","folder-open","folder-plus","folder-upload","forward","gf-bar-alignment-after","gf-bar-alignment-before","gf-bar-alignment-center","gf-grid","gf-interpolation-linear","gf-interpolation-smooth","gf-interpolation-step-after","gf-interpolation-step-before","gf-landscape","gf-layout-simple","gf-logs","gf-portrait","grafana","graph-bar","heart","heart-break","history","home","home-alt","horizontal-align-center","horizontal-align-left","horizontal-align-right","hourglass","import","info","info-circle","key-skeleton-alt","keyboard","layer-group","library-panel","line-alt","link","list-ui-alt","list-ul","lock","map-marker","message","minus","minus-circle","mobile-android","monitor","palette","panel-add","pause","pen","percentage","play","plug","plus","plus-circle","plus-square","power","presentation-play","process","question-circle","record-audio","repeat","rocket","save","search","search-minus","search-plus","share-alt","shield","shield-exclamation","signal","signin","signout","sitemap","slack","sliders-v-alt","sort-amount-down","sort-amount-up","square-shape","star","step-backward","stopwatch-slash","sync","table","tag-alt","text-fields","times","toggle-on","trash-alt","unlock","upload","user","users-alt","vertical-align-bottom","vertical-align-center","vertical-align-top","wrap-text","rss","x"];function l(e){if(e)switch(e.type){case r.FieldType.time:return"clock-nine";case r.FieldType.string:return"font";case r.FieldType.number:return"calculator-alt";case r.FieldType.boolean:return"toggle-on";case r.FieldType.trace:return"info-circle";case r.FieldType.geo:return"map-marker";case r.FieldType.other:return"brackets-curly"}return"question-circle"}},32848:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});const a=(e,t)=>{"Tab"===e.key||e.altKey||e.ctrlKey||e.metaKey||(e.stopPropagation(),"Escape"===e.key&&t())}},84968:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});const a=e=>e().map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_blank"===e.target?"external-link-alt":"link"),onClick:e.onClick})))},52472:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});var a=n(82897);function s(e,t){let n=0,s=e.indexOf(t);t=t.replace(/\s/g,"");const i=[];if(-1!==s)return{distance:0,found:!0,ranges:[{start:s,end:s+t.length-1}]};for(const r of t){const t=e.indexOf(r,s);if(-1===t)return{distance:1/0,ranges:[],found:!1};if(-1!==s&&(n+=t-s),s=t+1,0===i.length)i.push({start:t,end:t});else{const e=(0,a.last)(i);t===e.end+1?e.end++:i.push({start:t,end:t})}}return{distance:n,ranges:i,found:!0}}},89409:(e,t,n)=>{"use strict";n.d(t,{ns:()=>h,Jx:()=>c,Qi:()=>a,JU:()=>y,_V:()=>p,zG:()=>_,te:()=>u,f7:()=>g,iV:()=>m,Ot:()=>r,Yi:()=>k.Yi,nu:()=>E.Z,_J:()=>V._J,xq:()=>z,MX:()=>R.MX,O9:()=>f,hu:()=>B.h,C6:()=>U.C,AE:()=>R.AE,iu:()=>M,np:()=>A,vm:()=>F,Bx:()=>N,Gc:()=>x,z3:()=>S,Rc:()=>T.R,xl:()=>k.xl,l1:()=>k.l1,X1:()=>R.X1,FE:()=>C,Wm:()=>w,NW:()=>L,Gu:()=>j});var a={};function s(e,t){let n,a=e.parentElement.previousSibling;for(;a;){if(n=a.querySelector(t),n)return n;a=a.previousSibling}}function i(e){const t=(e||window).getSelection();if(!t||!t.anchorNode)return null;const n=t.getRangeAt(0),a=t.anchorNode.textContent,s=n.startOffset;return a.slice(s,s+1)}n.r(a),n.d(a,{getNextCharacter:()=>i,getPreviousCousin:()=>s}),"undefined"!=typeof window&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n,a=this;do{for(n=t.length;--n>=0&&t.item(n)!==a;);a=a.parentElement}while(n<0&&a);return a});var r=n(18801),o=n(82897),l=n(35008),d=n.n(l);const c="rgba(0, 211, 255, 1)",u="rgba(11, 237, 50, 1)",h="rgba(237, 46, 24, 1)",p="rgba(150, 150, 150, 1)",g="rgba(247, 149, 32, 1)",m=.09,f=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function v(e){return d()(e).toHsl()}function b(e){return d()(e).toHexString()}function x(e){return d()(e).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let y,w=function(e){const t=(0,o.map)(e,v),n=(0,o.sortBy)(t,["h"]),a=(0,o.chunk)(n,4),s=(0,o.map)(a,(e=>(0,o.sortBy)(e,"l"))),i=(0,o.flattenDeep)((0,o.zip)(...s));return(0,o.map)(i,b)}(f);!function(e){e.onBlur="onBlur",e.onFocus="onFocus",e.onChange="onChange"}(y||(y={}));const j=(e,t)=>{const n=t.reduce(((t,n)=>n.rule(e)?t:t.concat(n.errorMessage)),[]);return n.length>0?n:null},S=(e,t)=>t&&t[e],C=(e,t)=>({rule:t=>!!t.match(e),errorMessage:t||"Value is not valid"});var k=n(61210),T=n(84968);const I=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],O=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=D(e.toLowerCase()),n=Math.abs(t%I.length);return F(n)}function F(e){return{color:I[e],borderColor:O[e]}}function D(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}let P=null;function A(){if(null!==P)return P;if("undefined"!=typeof document){const e=document.createElement("div"),t={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(t).map((n=>{e.style[n]=t[n]})),document.body.appendChild(e),P=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else P=0;return P||0}const M=(e,t)=>{let n;if(e.getLinks&&(n=e.getLinks({valueRowIndex:t.index})),n){for(let s=0;s<(null===(a=n)||void 0===a?void 0:a.length);s++){var a;if(n[s].onClick){const a=n[s].onClick;n[s].onClick=n=>{n.ctrlKey||n.metaKey||n.shiftKey||(n.preventDefault(),a(n,{field:e,rowIndex:t.index}))}}}return n}};var R=n(73514),$=n(68404);function L(){const[e,t]=(0,$.useState)(0);return()=>t((e=>e+1))}var E=n(16101),V=n(2525),B=n(86315);function z(e,t,n){}let _;!function(e){e.id="id",e.title="title",e.subTitle="subTitle",e.mainStat="mainStat",e.secondaryStat="secondaryStat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(_||(_={}));var U=n(52472)},86315:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var a=n(82897);(0,a.throttle)((function(){console.log(...arguments)}),500);const s=e=>{let t=!1;return{logger:function(e){},enable:()=>t=!0,disable:()=>t=!1,isEnabled:()=>t}}},73514:(e,t,n)=>{"use strict";let a;n.d(t,{AE:()=>r,MX:()=>l,X1:()=>o});const s=new Map;let i="";function r(){return a||(a=document.createElement("canvas").getContext("2d")),a}function o(e,t){const n=`${t}px 'Roboto'`,a=e+n,o=s.get(a);if(o)return o;const l=r();i!==n&&(l.font=i=n);const d=l.measureText(e);return 500===s.size&&s.clear(),s.set(a,d),d}function l(e,t,n,a,s){const i=t/(o(e,14).width+2)*14,r=n/a,l=Math.min(r,i);return Math.min(l,null!=s?s:l)}},18801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getChildId:()=>s,renderOrCallToRender:()=>i});var a=n(68404);function s(e){let t;const n=a.Children.only(e);return"id"in(null==n?void 0:n.props)?t=n.props.id:"inputId"in n.props&&(t=null==n?void 0:n.props.inputId),"string"==typeof t?t:void 0}function i(e,t){if(a.isValidElement(e)||"string"==typeof e||"number"==typeof e)return e;if("function"==typeof e)return e(t);throw new Error(`${e} is not a React element nor a function that returns React element`)}},16101:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,n:()=>i});var a=n(52472);let s;!function(e){e.Word="Word",e.Prefix="Prefix",e.Fuzzy="Fuzzy"}(s||(s={}));const i={[s.Word]:(e,t)=>e.filter((e=>(e.filterText||e.label).includes(t))),[s.Prefix]:(e,t)=>e.filter((e=>(e.filterText||e.label).startsWith(t))),[s.Fuzzy]:(e,t)=>(t=t.toLowerCase(),e.filter((e=>{const{distance:n,ranges:s,found:i}=(0,a.C)(e.label.toLowerCase(),t);return!!i&&(e.sortValue=n,e.highlightParts=s,!0)})))}},61210:(e,t,n)=>{"use strict";n.d(t,{Yi:()=>s,l1:()=>r,xl:()=>i});var a=n(87280);const s={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},i=(e,t)=>{const n=e.split("\n").map((e=>a.gO.create({type:"code_line",nodes:[a.xv.create(e)]}))),s=a.gO.create({data:{syntax:t},type:"code_block",nodes:n});return a.BB.create({nodes:[s]})},r=(e,t)=>{const n=i(e,t);return a.B4.create({document:n})}},15045:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var a=n(35008),s=n.n(a);function i(e,t,n){if(e.isLight)return t;{if(n){const e=s()(t);return s().mostReadable(n,[e.clone().lighten(25),e.clone().lighten(10),e,e.clone().darken(10),e.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const e=s()(t).toHsl();e.l=1-e.l;const a=s()(e);return a.isLight()?a.darken(5).toHex8String():a.lighten(5).toHex8String()}}},31741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(94593),s=n(23019),i=n.n(s),r=n(68404),o=n(3490),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends r.PureComponent{constructor(){super(...arguments),d(this,"clearUiFind",(()=>{this.props.onChange("")}))}render(){const{allowClear:e,inputProps:t,value:n}=this.props,a=(0,l.jsxs)(l.Fragment,{children:[t.suffix,e&&n&&n.length&&(0,l.jsx)(o.IconButton,{name:"times",onClick:this.clearUiFind})]});return(0,l.jsx)(o.Input,Object.assign({placeholder:"Find..."},t,{onChange:e=>this.props.onChange(e.currentTarget.value),suffix:a,value:n}))}}d(c,"defaultProps",{inputProps:{},trackFindFunction:void 0,value:void 0});var u=n(49566);const h=e=>({TracePageSearchBar:a.iv`
      label: TracePageSearchBar;
      float: right;
      position: sticky;
      top: 8px;
      right: 0;
      z-index: ${e.zIndex.navbarFixed};
      background: ${e.colors.background.primary};
      margin-top: 8px;
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: 4px;
      box-shadow: ${e.shadows.z2};
    `,TracePageSearchBarBar:a.iv`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:a.iv`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:a.iv`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:a.iv`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:a.iv`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),p=(0,r.memo)((function(e){const{navigable:t,setSearch:n,searchValue:a,searchBarSuffix:s,spanFindMatches:r,focusedSpanIdForSearch:d,setSearchBarSuffix:p,setFocusedSpanIdForSearch:g}=e,m=(0,o.useStyles2)(h),f=a?(0,l.jsx)("span",{className:m.TracePageSearchBarSuffix,"aria-label":"Search bar suffix",children:s}):null,v=i()(m.TracePageSearchBarBtn,{[m.TracePageSearchBarBtnDisabled]:!a}),b={className:i()(m.TracePageSearchBarBar,u.A4),name:"search",suffix:f},x=e=>null!=r&&r.size&&(null==r?void 0:r.size)>0?e+" of "+(null==r?void 0:r.size):"";return(0,l.jsx)("div",{className:m.TracePageSearchBar,children:(0,l.jsxs)("span",{className:u.NY,style:{display:"flex"},children:[(0,l.jsx)(c,{onChange:e=>{g(""),p(""),n(e)},value:a,inputProps:b,allowClear:!0}),(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Button,{className:v,variant:"secondary",disabled:!a,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:()=>{const e=Array.from(r),t=e.indexOf(d)?e.indexOf(d):0;if(-1===t||t===e.length-1)return g(e[0]),void p(x(1));g(e[t+1]),p(x(t+2))}}),(0,l.jsx)(o.Button,{className:v,variant:"secondary",disabled:!a,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:()=>{const e=Array.from(r),t=e.indexOf(d)?e.indexOf(d):0;if(-1===t||0===t)return g(e[e.length-1]),void p(x(e.length));g(e[t-1]),p(x(t))}})]})})]})})}))},91916:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(94593),s=n(23019),i=n.n(s),r=(n(68404),n(3490)),o=n(15045),l=n(94210),d=n(45916);const c=e=>({Ticks:a.iv`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:a.iv`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,o.h)(e,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:a.iv`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:a.iv`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function u(e){const{endTime:t,numTicks:n,showLabels:a,startTime:s}=e;let o;if(a){o=[];const e=(t||0)-(s||0);for(let t=0;t<n;t++){const a=(s||0)+t/(n-1)*e;o.push((0,l.LU)(a))}}const u=(0,r.useStyles2)(c),h=[];for(let e=0;e<n;e++){const t=e/(n-1);h.push((0,d.jsx)("div",{className:u.TicksTick,style:{left:100*t+"%"},children:o&&(0,d.jsx)("span",{className:i()(u.TicksTickLabel,{[u.TicksTickLabelEndAnchor]:t>=1}),children:o[e]})},t))}return(0,d.jsx)("div",{className:u.Ticks,children:h})}u.defaultProps={endTime:null,showLabels:null,startTime:null}},10019:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(94593),s=n(23019),i=n.n(s),r=(n(68404),n(3490)),o=n(49566),l=n(45916);const d=["children","className"],c=["children","className","width","style"];function u(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const h=()=>({flexRow:a.iv`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function p(e){const{children:t,className:n=""}=e,a=u(e,d),s=(0,r.useStyles2)(h);return(0,l.jsx)("div",Object.assign({className:i()(s.flexRow,n)},a,{children:t}))}function g(e){const{children:t,className:n="",width:a,style:s}=e,r=u(e,c),d=100*a+"%",h=Object.assign({},s,{flexBasis:d,maxWidth:d});return(0,l.jsx)("div",Object.assign({className:i()(o.WW,n),style:h},r,{children:t}))}p.defaultProps={className:""},g.defaultProps={className:"",style:{}},p.Cell=g},39306:(e,t,n)=>{"use strict";n.d(t,{l4:()=>at,ZP:()=>ut});var a=n(94593),s=n(82897),i=n(58635),r=n(68404),o=n(3490);var l=n(85891);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c{constructor(e){d(this,"bufferLen",void 0),d(this,"dataLen",void 0),d(this,"heights",void 0),d(this,"lastI",void 0),d(this,"ys",void 0),this.ys=[],this.heights=[],this.bufferLen=e,this.dataLen=-1,this.lastI=-1}profileData(e){e!==this.dataLen&&(this.dataLen=e,this.ys.length=e,this.heights.length=e,this.lastI>=e&&(this.lastI=e-1))}calcHeights(e,t,n){null!=n&&(this.lastI=n);let a=e+this.bufferLen;if(a<=this.lastI)return;a>=this.heights.length&&(a=this.heights.length-1);let s=this.lastI;for(-1===this.lastI&&(s=0,this.ys[0]=0);s<=a;){const e=this.heights[s]=t(s);this.ys[s+1]=this.ys[s]+e,s++}this.lastI=a}calcYs(e,t){for(;(null==this.ys[this.lastI]||e>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,t)}confirmHeight(e,t){let n=e;if(n>this.lastI)return void this.calcHeights(n,t);const a=t(n);if(a===this.heights[n])return;const s=a-this.heights[n];for(this.heights[n]=a;++n<=this.lastI;)this.ys[n]+=s;null!=this.ys[this.lastI+1]&&(this.ys[this.lastI+1]+=s)}findFloorIndex(e,t){this.calcYs(e,t);let n,a=0,s=this.lastI;if(this.ys.length<2||e<this.ys[1])return 0;if(e>this.ys[s])return s;for(;a<s;)if(n=a+.5*(s-a)|0,e>this.ys[n]){if(e<=this.ys[n+1])return n;a=n}else{if(!(e<this.ys[n]))return n;if(e>=this.ys[n-1])return n-1;s=n}throw new Error(`unable to find floor index for y=${e}`)}getRowPosition(e,t){return this.confirmHeight(e,t),{height:this.heights[e],y:this.ys[e]}}getEstimatedHeight(){const e=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?0|e:e/(this.lastI+1)*this.heights.length|0}}var u=n(45916);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=100;class g extends r.Component{constructor(e){super(e),h(this,"_yPositions",void 0),h(this,"_knownHeights",void 0),h(this,"_startIndexDrawn",void 0),h(this,"_endIndexDrawn",void 0),h(this,"_startIndex",void 0),h(this,"_endIndex",void 0),h(this,"_viewHeight",void 0),h(this,"_scrollTop",void 0),h(this,"_isScrolledOrResized",void 0),h(this,"_htmlTopOffset",void 0),h(this,"_windowScrollListenerAdded",void 0),h(this,"_htmlElm",void 0),h(this,"_wrapperElm",void 0),h(this,"_itemHolderElm",void 0),h(this,"getViewHeight",(()=>this._viewHeight)),h(this,"getBottomVisibleIndex",(()=>{const e=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(e,this._getHeight)})),h(this,"getTopVisibleIndex",(()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight))),h(this,"getRowPosition",(e=>this._yPositions.getRowPosition(e,this._getHeight))),h(this,"scrollToIndex",(e=>{var t,n;const{scrollElement:a}=this.props,s=(null==a?void 0:a.getBoundingClientRect().top)||0,i=((null==a?void 0:a.scrollTop)||0)+((null===(t=this._itemHolderElm)||void 0===t?void 0:t.getBoundingClientRect().top)||0)-s,r=this.getRowPosition(e).y;null===(n=this.props.scrollElement)||void 0===n||n.scrollTo({top:r+i-80})})),h(this,"_onScroll",(()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))})),h(this,"_positionList",(()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const e=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,t=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(e<this._startIndexDrawn||t>this._endIndexDrawn)&&this.forceUpdate()})),h(this,"_initWrapper",(e=>{this.props.windowScroller&&(this._wrapperElm=e,e&&(this._viewHeight=e.clientHeight))})),h(this,"_initItemHolder",(e=>{this._itemHolderElm=e,this._scanItemHeights()})),h(this,"_scanItemHeights",(()=>{const e=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let t=null,n=null,a=!1;const s=this._itemHolderElm.childNodes,i=s.length;for(let e=0;e<i;e++){const i=s[e],r=i.getAttribute("data-item-key");if(!r){console.warn("itemKey not found");continue}const o=(i.firstElementChild||i).clientHeight;o!==this._knownHeights.get(r)&&(this._knownHeights.set(r,o),a?n=r:(a=!0,t=n=r))}if(null!=t&&null!=n){const a=e(t),s=n===t?a:e(n);this._yPositions.calcHeights(s,this._getHeight,a),this.forceUpdate()}})),h(this,"_getHeight",(e=>{const t=this.props.getKeyFromIndex(e),n=this._knownHeights.get(t);return null!=n&&n==n?n:this.props.itemHeightGetter(e,t)})),this._yPositions=new c(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-1048576,this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:e}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=e+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else{var e;this._wrapperElm=this.props.scrollElement,null===(e=this._wrapperElm)||void 0===e||e.addEventListener("scroll",this._onScroll)}}componentDidUpdate(){this._itemHolderElm&&this._scanItemHeights()}componentWillUnmount(){var e;this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):null===(e=this._wrapperElm)||void 0===e||e.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const e=this.props.windowScroller,t=e?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,n=e?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return t!==this._viewHeight||n!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm)return this._viewHeight=-1,this._startIndex=0,void(this._endIndex=0);this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const e=this._scrollTop,t=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(e,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(t,this._getHeight)}render(){const{dataLength:e,getKeyFromIndex:t,initialDraw:n=p,itemRenderer:a,viewBuffer:s,viewBufferMin:i}=this.props,r=this._getHeight,o=[];let l,d;if(this._yPositions.profileData(e),this._wrapperElm){this._isViewChanged()&&this._calcViewIndexes();const t=i>this._startIndex?0:this._startIndex-i,n=i<e-this._endIndex?this._endIndex+i:e-1;t<this._startIndexDrawn||n>this._endIndexDrawn?(l=s>this._startIndex?0:this._startIndex-s,d=this._endIndex+s,d>=e&&(d=e-1)):(l=this._startIndexDrawn,d=this._endIndexDrawn>e-1?e-1:this._endIndexDrawn)}else l=0,d=(n<e?n:e)-1;this._yPositions.calcHeights(d,r,l||-1),this._startIndexDrawn=l,this._endIndexDrawn=d,o.length=d-l+1;for(let e=l;e<=d;e++){const{y:n,height:s}=this._yPositions.getRowPosition(e,r),i={height:s,top:n,position:"absolute"},l=t(e),d={"data-item-key":l};o.push(a(l,i,e,d))}const c={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(c.onScroll=this._onScroll,c.style.height="100%",c.style.overflowY="auto");const h={position:"relative",height:this._yPositions.getEstimatedHeight()};return(0,u.jsx)("div",Object.assign({},c,{children:(0,u.jsx)("div",{style:h,children:(0,u.jsx)("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder,children:o})})}))}}h(g,"defaultProps",{initialDraw:p,itemsWrapperClassName:"",windowScroller:!1});var m=n(23019),f=n.n(m),v=n(62969),b=n.n(v),x=n(29796),y=n.n(x),w=n(15045),j=n(45075),S=n(16695);function C(e){let{children:t,content:n,overlayClassName:a}=e;const s=(0,r.useRef)(null);return(0,u.jsx)(o.PopoverController,{content:n,hideAfter:300,children:(e,n,i)=>(0,u.jsxs)(u.Fragment,{children:[s.current&&(0,u.jsx)(o.Popover,Object.assign({},i,{referenceElement:s.current,wrapperClassName:a,onMouseLeave:n,onMouseEnter:e})),r.cloneElement(t,{ref:s,onMouseEnter:e,onMouseLeave:n})]})})}var k=n(65188),T=n.n(k),I=n(94961),O=n.n(I),N=n(49566),F=n(94210);var D=n(18440),P=n.n(D),A=n(81582),M=n.n(A);const R=()=>({CopyIcon:a.iv`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function $(e){const t=(0,o.useStyles2)(R),[n,a]=(0,r.useState)(!1);return(0,u.jsx)(o.Tooltip,{content:n?"Copied":e.tooltipTitle,children:(0,u.jsx)(o.Button,{className:f()(t.CopyIcon),type:"button",icon:e.icon,onClick:()=>{M()(e.copyText),a(!0)}})})}var L;$.defaultProps={icon:"copy",className:void 0};const E="copyIcon",V=e=>({KeyValueTable:a.iv`
      label: KeyValueTable;
      background: ${(0,w.h)(e,"#fff")};
      border: 1px solid ${(0,w.h)(e,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:a.iv`
      label: body;
      vertical-align: baseline;
    `,row:a.iv`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,w.h)(e,"#f5f5f5")};
      }
      &:not(:hover) .${E} {
        visibility: hidden;
      }
    `,keyColumn:a.iv`
      label: keyColumn;
      color: ${(0,w.h)(e,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:a.iv`
      label: copyColumn;
      text-align: right;
    `,linkIcon:a.iv`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),B=/^(\[|\{)/;function z(e){if("string"==typeof e&&B.test(e))try{return JSON.parse(e)}catch(e){}return e}const _=e=>(0,u.jsxs)("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",children:[e.children," ",L||(L=(0,u.jsx)(o.Icon,{name:"external-link-alt"}))]});function U(e){const{data:t,linksGetter:n}=e,a=(0,o.useStyles2)(V);return(0,u.jsx)("div",{className:f()(a.KeyValueTable),"data-testid":"KeyValueTable",children:(0,u.jsx)("table",{className:N.K9,children:(0,u.jsx)("tbody",{className:a.body,children:t.map(((e,s)=>{const i={__html:P()(z(e.value))},r=(0,u.jsx)("div",{className:N.b$,dangerouslySetInnerHTML:i}),o=n?n(t,s):null;let l;return l=o&&o.length?(0,u.jsx)("div",{children:(0,u.jsx)(_,{href:o[0].url,title:o[0].text,children:r})}):r,(0,u.jsxs)("tr",{className:a.row,children:[(0,u.jsx)("td",{className:a.keyColumn,"data-testid":"KeyValueTable--keyColumn",children:e.key}),(0,u.jsx)("td",{children:l}),(0,u.jsx)("td",{className:a.copyColumn,children:(0,u.jsx)($,{className:E,copyText:JSON.stringify(e,null,2),tooltipTitle:"Copy JSON"})})]},`${e.key}-${s}`)}))})})})}_.defaultProps={title:""};const H=e=>({header:a.iv`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,w.h)(e,"#e8e8e8")};
      }
    `,headerEmpty:a.iv`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:a.iv`
      label: headerHighContrast;
      &:hover {
        background: ${(0,w.h)(e,"#ddd")};
      }
    `,emptyIcon:a.iv`
      label: emptyIcon;
      color: ${(0,w.h)(e,"#aaa")};
    `,summary:a.iv`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:a.iv`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,w.h)(e,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:a.iv`
      label: summaryLabel;
      color: ${(0,w.h)(e,"#777")};
    `,summaryDelim:a.iv`
      label: summaryDelim;
      color: ${(0,w.h)(e,"#bbb")};
      padding: 0 0.2em;
    `});function W(e){const{data:t}=e,n=(0,o.useStyles2)(H);return Array.isArray(t)&&t.length?(0,u.jsx)("ul",{className:n.summary,children:t.map(((e,t)=>(0,u.jsxs)("li",{className:n.summaryItem,children:[(0,u.jsx)("span",{className:n.summaryLabel,children:e.key}),(0,u.jsx)("span",{className:n.summaryDelim,children:"="}),String(e.value)]},`${e.key}-${t}`)))}):null}function q(e){const{className:t,data:n,highContrast:a,interactive:s,isOpen:i,label:r,linksGetter:l,onToggle:d}=e,c=!Array.isArray(n)||!n.length,h=(0,o.useStyles2)(H),p=f()(N.Im,{[h.emptyIcon]:c});let g=null,m=null;return s&&(g=i?(0,u.jsx)(T(),{className:p}):(0,u.jsx)(O(),{className:p}),m={"aria-checked":i,onClick:c?null:d,role:"switch"}),(0,u.jsxs)("div",{className:f()(t,N.ty),children:[(0,u.jsxs)("div",Object.assign({className:f()(h.header,{[h.headerEmpty]:c,[h.headerHighContrast]:a&&!c})},m,{"data-testid":"AccordianKeyValues--header",children:[g,(0,u.jsxs)("strong",{"data-test":"label",children:[r,i||":"]}),!i&&(0,u.jsx)(W,{data:n})]})),i&&(0,u.jsx)(U,{data:n,linksGetter:l})]})}var Z,G,K;W.defaultProps={data:null},q.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Q=e=>({AccordianLogs:a.iv`
      label: AccordianLogs;
      border: 1px solid ${(0,w.h)(e,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:a.iv`
      label: AccordianLogsHeader;
      background: ${(0,w.h)(e,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,w.h)(e,"#dadada")};
      }
    `,AccordianLogsContent:a.iv`
      label: AccordianLogsContent;
      background: ${(0,w.h)(e,"#f0f0f0")};
      border-top: 1px solid ${(0,w.h)(e,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:a.iv`
      label: AccordianLogsFooter;
      color: ${(0,w.h)(e,"#999")};
    `});function J(e){const{interactive:t,isOpen:n,linksGetter:a,logs:i,openedItems:r,onItemToggle:l,onToggle:d,timestamp:c}=e;let h=null,p="span",g=null;t&&(h=n?Z||(Z=(0,u.jsx)(T(),{className:N.Im})):G||(G=(0,u.jsx)(O(),{className:"u-align-icon"})),p="a",g={"aria-checked":n,onClick:d,role:"switch"});const m=(0,o.useStyles2)(Q);return(0,u.jsxs)("div",{className:m.AccordianLogs,children:[(0,u.jsxs)(p,Object.assign({className:m.AccordianLogsHeader},g,{children:[h," ",K||(K=(0,u.jsx)("strong",{children:"Events"}))," (",i.length,")"]})),n&&(0,u.jsxs)("div",{className:m.AccordianLogsContent,children:[(0,s.sortBy)(i,"timestamp").map(((e,n)=>(0,u.jsx)(q,{className:n<i.length-1?N.bi:null,data:e.fields||[],highContrast:!0,interactive:t,isOpen:!!r&&r.has(e),label:`${(0,F.LU)(e.timestamp-c)}`,linksGetter:a,onToggle:t&&l?()=>l(e):null},`${e.timestamp}-${n}`))),(0,u.jsx)("small",{className:m.AccordianLogsFooter,children:"Log timestamps are relative to the start time of the full trace."})]})]})}J.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const Y=e=>({wrapper:a.iv`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:a.iv`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:a.iv`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:a.iv`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:a.iv`
      label: logMarker;
      background-color: ${(0,w.h)(e,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,w.h)(e,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function X(e){return`${(100*e).toFixed(1)}%`}function ee(e){let{viewEnd:t,viewStart:n,getViewedBounds:a,color:i,shortLabel:l,longLabel:d,onClick:c,rpc:h,traceStartTime:p,span:g,className:m,labelClassName:v}=e;const[b,x]=(0,r.useState)(l),y=(0,s.groupBy)(g.logs,(e=>{const t=a(e.timestamp,e.timestamp).start;return X(Math.round(500*t)/500)})),w=(0,o.useStyles2)(Y);return(0,u.jsxs)("div",{className:f()(w.wrapper,m),onClick:c,onMouseLeave:()=>x(l),onMouseOver:()=>x(d),"aria-hidden":!0,"data-testid":S.wl.components.TraceViewer.spanBar,children:[(0,u.jsx)("div",{"aria-label":b,className:w.bar,style:{background:i,left:X(n),width:X(t-n)},children:(0,u.jsx)("div",{className:f()(w.label,v),"data-testid":"SpanBar--label",children:b})}),(0,u.jsx)("div",{children:Object.keys(y).map((e=>(0,u.jsx)(C,{content:(0,u.jsx)(J,{interactive:!1,isOpen:!0,logs:y[e],timestamp:p}),children:(0,u.jsx)("div",{"data-testid":"SpanBar--logMarker",className:w.logMarker,style:{left:e}})},e)))}),h&&(0,u.jsx)("div",{className:w.rpc,style:{background:h.color,left:X(h.viewStart),width:X(h.viewEnd-h.viewStart)}})]})}const te=r.memo(ee),ne=e=>{let{links:t}=e;const n=(0,o.useStyles2)(ae),[a,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)({x:0,y:0}),d=()=>s(!1);return(0,u.jsxs)("div",{"data-testid":"SpanLinksMenu",children:[(0,u.jsx)("button",{onClick:e=>{s(!0),l({x:e.pageX,y:e.pageY})},className:n.button,children:(0,u.jsx)(o.Icon,{name:"link",className:n.button})}),a?(0,u.jsx)(o.ContextMenu,{onClose:()=>s(!1),renderMenuItems:()=>((e,t,n)=>{var a,s,i;return(0,u.jsxs)(u.Fragment,{children:[null!==(a=e.logLinks)&&void 0!==a&&a.length?(0,u.jsx)(o.MenuGroup,{label:"Logs",children:e.logLinks.map(((e,a)=>(0,u.jsx)(o.MenuItem,{label:"Logs for this span",onClick:e.onClick?t=>{null==t||t.preventDefault(),e.onClick(t),n()}:void 0,url:e.href,className:t.menuItem},a)))}):null,null!==(s=e.metricLinks)&&void 0!==s&&s.length?(0,u.jsx)(o.MenuGroup,{label:"Metrics",children:e.metricLinks.map(((e,a)=>{var s;return(0,u.jsx)(o.MenuItem,{label:null!==(s=e.title)&&void 0!==s?s:"Metrics for this span",onClick:e.onClick?t=>{null==t||t.preventDefault(),e.onClick(t),n()}:void 0,url:e.href,className:t.menuItem},a)}))}):null,null!==(i=e.traceLinks)&&void 0!==i&&i.length?(0,u.jsx)(o.MenuGroup,{label:"Traces",children:e.traceLinks.map(((e,a)=>{var s;return(0,u.jsx)(o.MenuItem,{label:null!==(s=e.title)&&void 0!==s?s:"View linked span",onClick:e.onClick?t=>{null==t||t.preventDefault(),e.onClick(t),n()}:void 0,url:e.href,className:t.menuItem},a)}))}):null]})})(t,n,d),focusOnOpen:!0,x:i.x,y:i.y}):null]})},ae=()=>({button:a.iv`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:a.iv`
      max-width: 60ch;
      overflow: hidden;
    `});var se,ie,re=n(51290),oe=n.n(re);function le(e){return(0,s.get)((0,s.find)(e.references,(e=>{let{span:t,refType:n}=e;return t&&t.spanID&&("CHILD_OF"===n||"FOLLOWS_FROM"===n)})),"span")}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ce=(0,o.stylesFactory)((e=>({SpanTreeOffset:a.iv`
      label: SpanTreeOffset;
      color: ${(0,w.h)(e,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:a.iv`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:a.iv`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,w.h)(e,"lightgrey")};
      }
    `,indentGuideActive:a.iv`
      label: indentGuideActive;
      border-color: ${(0,w.h)(e,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:a.iv`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `})));class ue extends r.PureComponent{constructor(e){super(e),de(this,"ancestorIds",void 0),de(this,"handleMouseLeave",((e,t)=>{e.relatedTarget instanceof HTMLSpanElement&&(0,s.get)(e,"relatedTarget.dataset.ancestorId")===t||this.props.removeHoverIndentGuideId(t)})),de(this,"handleMouseEnter",((e,t)=>{e.relatedTarget instanceof HTMLSpanElement&&(0,s.get)(e,"relatedTarget.dataset.ancestorId")===t||this.props.addHoverIndentGuideId(t)})),this.ancestorIds=function(e){const t=[];if(!e)return t;let n=le(e);for(;n;)t.push(n.spanID),n=le(n);return t}(e.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:e,onClick:t,showChildrenIcon:n,span:a,theme:s}=this.props,{hasChildren:i,spanID:r}=a,o=i?{onClick:t,role:"switch","aria-checked":e}:null,l=n&&i&&(e?se||(se=(0,u.jsx)(T(),{})):ie||(ie=(0,u.jsx)(oe(),{}))),d=ce(s);return(0,u.jsxs)("span",Object.assign({className:f()(d.SpanTreeOffset,{[d.SpanTreeOffsetParent]:i})},o,{children:[this.ancestorIds.map((e=>(0,u.jsx)("span",{className:f()(d.indentGuide,{[d.indentGuideActive]:this.props.hoverIndentGuideIds.has(e)}),"data-ancestor-id":e,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:t=>this.handleMouseEnter(t,e),onMouseLeave:t=>this.handleMouseLeave(t,e)},e))),l&&(0,u.jsx)("span",{className:d.iconWrapper,onMouseEnter:e=>this.handleMouseEnter(e,r),onMouseLeave:e=>this.handleMouseLeave(e,r),"data-testid":"icon-wrapper",children:l})]}))}}de(ue,"displayName","UnthemedSpanTreeOffset"),de(ue,"defaultProps",{childrenVisible:!1,showChildrenIcon:!0});const he=(0,o.withTheme2)(ue);var pe,ge,me=n(91916),fe=n(10019);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const be="spanBar",xe="spanBarLabel",ye="nameWrapper",we="nameWrapperMatchingFilter",je="jaegerView",Se="nameColumn",Ce=(0,o.stylesFactory)((e=>{const t=a.F4`
    label: flash;
    from {
      background-color: ${(0,w.h)(e,"#68b9ff")};
    }
    to {
      background-color: default;
    }
  `;return{nameWrapper:a.iv`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:a.iv`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,w.h)(e,"#fffce4")};
    `,nameColumn:a.iv`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:a.iv`
      label: endpointName;
      color: ${(0,w.h)(e,"#808080")};
    `,view:a.iv`
      label: view;
      position: relative;
    `,viewExpanded:a.iv`
      label: viewExpanded;
      background: ${(0,w.h)(e,"#f8f8f8")};
      outline: 1px solid ${(0,w.h)(e,"#ddd")};
    `,viewExpandedAndMatchingFilter:a.iv`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,w.h)(e,"#fff3d7")};
      outline: 1px solid ${(0,w.h)(e,"#ddd")};
    `,row:a.iv`
      label: row;
      &:hover .${be} {
        opacity: 1;
      }
      &:hover .${xe} {
        color: ${(0,w.h)(e,"#000")};
      }
      &:hover .${ye} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,w.h)(e,"#fafafa")},
          ${(0,w.h)(e,"#f8f8f8")} 75%,
          ${(0,w.h)(e,"#eee")}
        );
      }
      &:hover .${je} {
        background-color: ${(0,w.h)(e,"#f5f5f5")};
        outline: 1px solid ${(0,w.h)(e,"#ddd")};
      }
    `,rowClippingLeft:a.iv`
      label: rowClippingLeft;
      & .${Se}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,w.h)(e,"rgba(25, 25, 25, 0.25)")},
          ${(0,w.h)(e,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:a.iv`
      label: rowClippingRight;
      & .${je}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,w.h)(e,"rgba(25, 25, 25, 0.25)")},
          ${(0,w.h)(e,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:a.iv`
      label: rowExpanded;
      & .${be} {
        opacity: 1;
      }
      & .${xe} {
        color: ${(0,w.h)(e,"#000")};
      }
      & .${ye}, &:hover .${ye} {
        background: ${(0,w.h)(e,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,w.h)(e,"#ddd")};
      }
      & .${we} {
        background: ${(0,w.h)(e,"#fff3d7")};
      }
      &:hover .${je} {
        background: ${(0,w.h)(e,"#eee")};
      }
    `,rowMatchingFilter:a.iv`
      label: rowMatchingFilter;
      background-color: ${(0,w.h)(e,"#fffbde")};
      &:hover .${ye} {
        background: linear-gradient(
          90deg,
          ${(0,w.h)(e,"#fffbde")},
          ${(0,w.h)(e,"#fffbde")} 75%,
          ${(0,w.h)(e,"#f7f1c6")}
        );
      }
      &:hover .${je} {
        background-color: ${(0,w.h)(e,"#f7f1c6")};
        outline: 1px solid ${(0,w.h)(e,"#ddd")};
      }
    `,rowFocused:a.iv`
      label: rowFocused;
      background-color: ${(0,w.h)(e,"#cbe7ff")};
      animation: ${t} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${ye}, .${je}, .${we} {
        background-color: ${(0,w.h)(e,"#cbe7ff")};
        animation: ${t} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${be} {
        opacity: 1;
      }
      & .${xe} {
        color: ${(0,w.h)(e,"#000")};
      }
      &:hover .${ye}, :hover .${je} {
        background: ${(0,w.h)(e,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,w.h)(e,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:a.iv`
      label: rowExpandedAndMatchingFilter;
      &:hover .${je} {
        background: ${(0,w.h)(e,"#ffeccf")};
      }
    `,name:a.iv`
      label: name;
      color: ${(0,w.h)(e,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,w.h)(e,"#000")};
      }
    `,nameDetailExpanded:a.iv`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:a.iv`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:a.iv`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:a.iv`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,w.h)(e,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:a.iv`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:a.iv`
      label: labelRight;
      left: 100%;
    `,labelLeft:a.iv`
      label: labelLeft;
      right: 100%;
    `}}));class ke extends r.PureComponent{constructor(){super(...arguments),ve(this,"_detailToggle",(()=>{this.props.onDetailToggled(this.props.span.spanID)})),ve(this,"_childrenToggle",(()=>{this.props.onChildrenToggled(this.props.span.spanID)})),ve(this,"getSpanBarLabel",((e,t,n)=>{var a;const s=null!==(a=null==t?void 0:t.type)&&void 0!==a?a:"";if(s===j.Hn)return"";if(""===s||s===j.th)return`(${n})`;if(s===j.Kg){var i,r;const n=null!==(i=null==t||null===(r=t.tag)||void 0===r?void 0:r.trim())&&void 0!==i?i:"";if(""!==n&&e.tags){var o,l,d;const t=null===(o=e.tags)||void 0===o?void 0:o.find((e=>e.key===n)),a=null===(l=e.process)||void 0===l||null===(d=l.tags)||void 0===d?void 0:d.find((e=>e.key===n));if(t)return`(${t.value})`;if(a)return`(${a.value})`}}return""}))}render(){const{className:e,color:t,spanBarOptions:n,columnDivision:a,isChildrenExpanded:s,isDetailExpanded:i,isMatchingFilter:r,isFocused:o,numTicks:l,rpc:d,noInstrumentedServer:c,showErrorIcon:h,getViewedBounds:p,traceStartTime:g,span:m,hoverIndentGuideIds:v,addHoverIndentGuideId:x,removeHoverIndentGuideId:j,clippingLeft:S,clippingRight:C,theme:k,createSpanLink:T}=this.props,{duration:I,hasChildren:O,operationName:N,process:{serviceName:D}}=m,P=(0,F.LU)(I),A=p(m.startTime,m.startTime+m.duration),M=A.start,R=A.end,$=Ce(k),L=`${D}::${N}`;let E,V;M>1-R?(E=`${L} | ${P}`,V=$.labelLeft):(E=`${P} | ${L}`,V=$.labelRight);return(0,u.jsxs)(fe.Z,{className:f()($.row,{[$.rowExpanded]:i,[$.rowMatchingFilter]:r,[$.rowExpandedAndMatchingFilter]:r&&i,[$.rowFocused]:o,[$.rowClippingLeft]:S,[$.rowClippingRight]:C},e),children:[(0,u.jsx)(fe.Z.Cell,{className:f()($.nameColumn,Se),width:a,children:(0,u.jsxs)("div",{className:f()($.nameWrapper,ye,{[$.nameWrapperMatchingFilter]:r,nameWrapperMatchingFilter:r}),children:[(0,u.jsx)(he,{onClick:O?this._childrenToggle:void 0,childrenVisible:s,span:m,hoverIndentGuideIds:v,addHoverIndentGuideId:x,removeHoverIndentGuideId:j}),(0,u.jsxs)("a",{className:f()($.name,{[$.nameDetailExpanded]:i}),"aria-checked":i,title:L,onClick:this._detailToggle,role:"switch",style:{borderColor:t},tabIndex:0,children:[(0,u.jsxs)("span",{className:f()($.svcName,{[$.svcNameChildrenCollapsed]:O&&!s}),children:[h&&(0,u.jsx)(b(),{style:{backgroundColor:m.errorIconColor?(0,w.h)(k,m.errorIconColor):(0,w.h)(k,"#db2828")},className:$.errorIcon}),D," ",d&&(0,u.jsxs)("span",{children:[pe||(pe=(0,u.jsx)(y(),{}))," ",(0,u.jsx)("i",{className:$.rpcColorMarker,style:{background:d.color}}),d.serviceName]}),c&&(0,u.jsxs)("span",{children:[ge||(ge=(0,u.jsx)(y(),{}))," ",(0,u.jsx)("i",{className:$.rpcColorMarker,style:{background:c.color}}),c.serviceName]})]}),(0,u.jsx)("small",{className:$.endpointName,children:d?d.operationName:N}),(0,u.jsxs)("small",{className:$.endpointName,children:[" ",this.getSpanBarLabel(m,n,P)]})]}),T&&(()=>{const e=T(m),t=(e=>e?Object.values(e).reduce(((e,t)=>e+t.length),0):0)(e);if(e&&1===t){var n,a,s,i,r,o;const t=null!==(n=null!==(a=null!==(s=null===(i=e.logLinks)||void 0===i?void 0:i[0])&&void 0!==s?s:null===(r=e.metricLinks)||void 0===r?void 0:r[0])&&void 0!==a?a:null===(o=e.traceLinks)||void 0===o?void 0:o[0])&&void 0!==n?n:void 0;return t?(0,u.jsx)("a",{href:t.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:t.onClick?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!t.onClick||(e.preventDefault(),t.onClick(e))}:void 0,children:t.content}):null}return e&&t>1?(0,u.jsx)(ne,{links:e}):null})()]})}),(0,u.jsxs)(fe.Z.Cell,{className:f()($.view,je,{[$.viewExpanded]:i,[$.viewExpandedAndMatchingFilter]:r&&i}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-a,onClick:this._detailToggle,children:[(0,u.jsx)(me.Z,{numTicks:l}),(0,u.jsx)(te,{rpc:d,viewStart:M,viewEnd:R,getViewedBounds:p,color:t,shortLabel:P,longLabel:E,traceStartTime:g,span:m,labelClassName:`spanBarLabel ${V}`,className:be})]})]})}}ve(ke,"displayName","UnthemedSpanBarRow"),ve(ke,"defaultProps",{className:"",rpc:null});const Te=(0,o.withTheme2)(ke);var Ie=n(90962),Oe=n.n(Ie),Ne=n(43215);const Fe=e=>({Divider:a.iv`
      background: ${(0,w.h)(e,"#ddd")};
    `,DividerVertical:a.iv`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:a.iv`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function De(e){let{className:t,style:n,type:s}=e;const i=(0,o.useStyles2)(Fe);return(0,u.jsx)("div",{style:n,className:(0,a.cx)(i.Divider,"horizontal"===s?i.DividerHorizontal:i.DividerVertical,t)})}var Pe,Ae,Me,Re,$e=n(45176);function Le(e){const{reference:t,children:n,createFocusSpanLink:a}=e,s=a(t.traceID,t.spanID);return(0,u.jsx)("a",{href:s.href,target:s.target,rel:"noopener noreferrer",onClick:s.onClick?e=>{e.preventDefault(),s.onClick(e)}:void 0,children:n})}const Ee=e=>({AccordianReferenceItem:a.iv`
      border-bottom: 1px solid ${(0,w.h)(e,"#d8d8d8")};
    `,AccordianKeyValues:a.iv`
      margin-left: 10px;
    `,AccordianReferences:a.iv`
      label: AccordianReferences;
      border: 1px solid ${(0,w.h)(e,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:a.iv`
      label: AccordianReferencesHeader;
      background: ${(0,w.h)(e,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,w.h)(e,"#dadada")};
      }
    `,AccordianReferencesContent:a.iv`
      label: AccordianReferencesContent;
      background: ${(0,w.h)(e,"#f0f0f0")};
      border-top: 1px solid ${(0,w.h)(e,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:a.iv`
      label: AccordianReferencesFooter;
      color: ${(0,w.h)(e,"#999")};
    `,ReferencesList:a.iv`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:a.iv`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:a.iv`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:a.iv`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:a.iv`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:a.iv`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:a.iv`
      margin-right: 8px;
    `,title:a.iv`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Ve(e){const{data:t,createFocusSpanLink:n,openedItems:s,onItemToggle:i,interactive:r}=e,l=(0,o.useStyles2)(Ee);return(0,u.jsx)("div",{className:l.AccordianReferencesContent,children:t.map(((e,d)=>{var c;return(0,u.jsxs)("div",{className:d<t.length-1?l.AccordianReferenceItem:void 0,children:[(0,u.jsx)("div",{className:l.item,children:(0,u.jsx)(Le,{reference:e,createFocusSpanLink:n,children:(0,u.jsxs)("span",{className:l.itemContent,children:[e.span?(0,u.jsxs)("span",{children:[(0,u.jsx)("span",{className:(0,a.cx)("span-svc-name",l.serviceName),children:e.span.process.serviceName}),(0,u.jsx)("small",{className:"endpoint-name",children:e.span.operationName})]}):(0,u.jsxs)("span",{className:(0,a.cx)("span-svc-name",l.title),children:["View Linked Span ",Pe||(Pe=(0,u.jsx)(o.Icon,{name:"external-link-alt"}))]}),(0,u.jsxs)("small",{className:l.debugInfo,children:[(0,u.jsx)("span",{className:l.debugLabel,"data-label":"TraceID:",children:e.traceID}),(0,u.jsx)("span",{className:l.debugLabel,"data-label":"SpanID:",children:e.spanID})]})]})})},`${e.spanID}`),!(null===(c=e.tags)||void 0===c||!c.length)&&(0,u.jsx)("div",{className:l.AccordianKeyValues,children:(0,u.jsx)(q,{className:d<t.length-1?N.bi:null,data:e.tags||[],highContrast:!0,interactive:r,isOpen:!!s&&s.has(e),label:"attributes",linksGetter:null,onToggle:r&&i?()=>i(e):null})})]},d)}))})}const Be=e=>{let{data:t,interactive:n=!0,isOpen:a,onToggle:s,onItemToggle:i,openedItems:r,createFocusSpanLink:l}=e;const d=!Array.isArray(t)||!t.length;let c=null,h="span",p=null;n&&(c=a?Ae||(Ae=(0,u.jsx)(T(),{className:N.Im})):Me||(Me=(0,u.jsx)(O(),{className:N.Im})),h="a",p={"aria-checked":a,onClick:d?null:s,role:"switch"});const g=(0,o.useStyles2)(Ee);return(0,u.jsxs)("div",{className:g.AccordianReferences,children:[(0,u.jsxs)(h,Object.assign({className:g.AccordianReferencesHeader},p,{children:[c,Re||(Re=(0,u.jsx)("strong",{children:(0,u.jsx)("span",{children:"References"})}))," ","(",t.length,")"]})),a&&(0,u.jsx)(Ve,{data:t,openedItems:r,createFocusSpanLink:l,onItemToggle:i,interactive:n})]})},ze=r.memo(Be),_e=()=>({TextList:a.iv`
      max-height: 450px;
      overflow: auto;
    `,List:a.iv`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:a.iv`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Ue(e){const{data:t}=e,n=(0,o.useStyles2)(_e);return(0,u.jsx)("div",{className:f()(n.TextList),"data-testid":"TextList",children:(0,u.jsx)("ul",{className:n.List,children:t.map(((e,t)=>(0,u.jsx)("li",{className:n.item,children:e},`${t}`)))})})}const He=e=>({header:a.iv`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,w.h)(e,"#e8e8e8")};
      }
    `});function We(e){let{data:t}=e;return(0,u.jsx)(Ue,{data:t})}function qe(e){const{className:t,data:n,headerClassName:a,interactive:s,isOpen:i,label:r,onToggle:l,TextComponent:d=We}=e,c=!Array.isArray(n)||!n.length,h=(0,o.useStyles2)(H),p=f()(N.Im,{[h.emptyIcon]:c});let g=null,m=null;s&&(g=i?(0,u.jsx)(T(),{className:p}):(0,u.jsx)(O(),{className:p}),m={"aria-checked":i,onClick:c?null:l,role:"switch"});const v=(0,o.useStyles2)(He);return(0,u.jsxs)("div",{className:t||"",children:[(0,u.jsxs)("div",Object.assign({className:f()(v.header,a)},m,{"data-testid":"AccordianText--header",children:[g,(0,u.jsx)("strong",{children:r})," (",n.length,")"]})),i&&(0,u.jsx)(d,{data:n})]})}var Ze;qe.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const Ge=e=>({header:a.iv`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:a.iv`
      overflow: hidden;
    `,debugInfo:a.iv`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:a.iv`
      label: debugLabel;
      &::before {
        color: ${(0,w.h)(e,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:a.iv`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,w.h)(e,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,w.h)(e,"#333")};
      }
    `,AccordianWarnings:a.iv`
      label: AccordianWarnings;
      background: ${(0,w.h)(e,"#fafafa")};
      border: 1px solid ${(0,w.h)(e,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:a.iv`
      label: AccordianWarningsHeader;
      background: ${(0,w.h)(e,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,w.h)(e,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:a.iv`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,w.h)(e,"#e8e8e8")};
    `,AccordianWarningsLabel:a.iv`
      label: AccordianWarningsLabel;
      color: ${(0,w.h)(e,"#d36c08")};
    `,Textarea:a.iv`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:a.iv`
      font-size: 1.5em;
    `});function Ke(e){var t,n;const{detailState:a,linksGetter:s,logItemToggle:i,logsToggle:r,processToggle:l,span:d,tagsToggle:c,traceStartTime:h,warningsToggle:p,stackTracesToggle:g,referencesToggle:m,referenceItemToggle:v,createSpanLink:b,createFocusSpanLink:x,topOfViewRefType:y}=e,{isTagsOpen:w,isProcessOpen:j,logs:S,isWarningsOpen:C,references:k,isStackTracesOpen:T}=a,{operationName:I,process:O,duration:D,relativeStartTime:P,startTime:A,traceID:M,spanID:R,logs:$,tags:L,warnings:E,references:V,stackTraces:B}=d,{timeZone:z}=e,_=[{key:"svc",label:"Service:",value:O.serviceName},{key:"duration",label:"Duration:",value:(0,F.LU)(D)},{key:"start",label:"Start Time:",value:(0,F.LU)(P)+Qe(A,z)},...d.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:d.childSpanCount}]:[]],U=(0,o.useStyles2)(Ge),H=null==b?void 0:b(d),W=x(M,R);return(0,u.jsxs)("div",{"data-testid":"span-detail-component",children:[(0,u.jsxs)("div",{className:U.header,children:[(0,u.jsx)("h2",{className:f()(N.h2),children:I}),(0,u.jsx)("div",{className:U.listWrapper,children:(0,u.jsx)($e.Z,{className:N.xb,divider:!0,items:_})})]}),null!=H&&null!==(t=H.logLinks)&&void 0!==t&&t[0]?(0,u.jsx)(o.DataLinkButton,{link:Object.assign({},null==H||null===(n=H.logLinks)||void 0===n?void 0:n[0],{title:"Logs for this span"}),buttonProps:{icon:"gf-logs"}}):null,Ze||(Ze=(0,u.jsx)(De,{className:N.im,type:"horizontal"})),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(q,{data:L,label:"Attributes",linksGetter:s,isOpen:w,onToggle:()=>c(R)}),O.tags&&(0,u.jsx)(q,{className:N.bi,data:O.tags,label:"Resource",linksGetter:s,isOpen:j,onToggle:()=>l(R)})]}),$&&$.length>0&&(0,u.jsx)(J,{linksGetter:s,logs:$,isOpen:S.isOpen,openedItems:S.openedItems,onToggle:()=>r(R),onItemToggle:e=>i(R,e),timestamp:h}),E&&E.length>0&&(0,u.jsx)(qe,{className:U.AccordianWarnings,headerClassName:U.AccordianWarningsHeader,label:(0,u.jsx)("span",{className:U.AccordianWarningsLabel,children:"Warnings"}),data:E,isOpen:C,onToggle:()=>p(R)}),B&&B.length&&(0,u.jsx)(qe,{label:"Stack trace",data:B,isOpen:T,TextComponent:e=>{var t;let n;var a;(null===(t=e.data)||void 0===t?void 0:t.length)>1?n=e.data.map(((e,t)=>`StackTrace ${t+1}:\n${e}`)).join("\n"):n=null===(a=e.data)||void 0===a?void 0:a[0];return(0,u.jsx)(o.TextArea,{className:U.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:n})},onToggle:()=>g(R)}),V&&V.length>0&&(V.length>1||"CHILD_OF"!==V[0].refType)&&(0,u.jsx)(ze,{data:V,isOpen:k.isOpen,openedItems:k.openedItems,onToggle:()=>m(R),onItemToggle:e=>v(R,e),createFocusSpanLink:x}),y===at.Explore&&(0,u.jsxs)("small",{className:U.debugInfo,children:[(0,u.jsx)("a",Object.assign({},W,{onClick:e=>{!W.onClick||0!==e.button||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(e.preventDefault(),W.onClick(e))},children:(0,u.jsx)(Oe(),{className:f()(N.Im,U.LinkIcon)})})),(0,u.jsx)("span",{className:U.debugLabel,"data-label":"SpanID:"})," ",R]})]})]})}const Qe=(e,t)=>{const n=(0,Ne.dateTimeFormat)(e/1e3,{timeZone:t,defaultWithMS:!0}),a=n.split(" ");return` (${a[1]?a[1]:n})`};function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ye=(0,o.stylesFactory)((e=>({expandedAccent:a.iv`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:a.iv`
      label: infoWrapper;
      border: 1px solid ${(0,w.h)(e,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `})));class Xe extends r.PureComponent{constructor(){super(...arguments),Je(this,"_detailToggle",(()=>{this.props.onDetailToggled(this.props.span.spanID)})),Je(this,"_linksGetter",((e,t)=>{const{linksGetter:n,span:a}=this.props;return n(a,e,t)}))}render(){const{color:e,columnDivision:t,detailState:n,logItemToggle:a,logsToggle:s,processToggle:i,referenceItemToggle:r,referencesToggle:o,warningsToggle:l,stackTracesToggle:d,span:c,timeZone:h,tagsToggle:p,traceStartTime:g,hoverIndentGuideIds:m,addHoverIndentGuideId:f,removeHoverIndentGuideId:v,theme:b,createSpanLink:x,focusedSpanId:y,createFocusSpanLink:w,topOfViewRefType:j}=this.props,S=Ye(b);return(0,u.jsxs)(fe.Z,{children:[(0,u.jsxs)(fe.Z.Cell,{width:t,style:{overflow:"hidden"},children:[(0,u.jsx)(he,{span:c,showChildrenIcon:!1,hoverIndentGuideIds:m,addHoverIndentGuideId:f,removeHoverIndentGuideId:v}),(0,u.jsx)("span",{children:(0,u.jsx)("span",{className:S.expandedAccent,"aria-checked":"true",onClick:this._detailToggle,role:"switch",style:{borderColor:e},"data-testid":"detail-row-expanded-accent"})})]}),(0,u.jsx)(fe.Z.Cell,{width:1-t,children:(0,u.jsx)("div",{className:S.infoWrapper,style:{borderTopColor:e},children:(0,u.jsx)(Ke,{detailState:n,linksGetter:this._linksGetter,logItemToggle:a,logsToggle:s,processToggle:i,referenceItemToggle:r,referencesToggle:o,warningsToggle:l,stackTracesToggle:d,span:c,timeZone:h,tagsToggle:p,traceStartTime:g,createSpanLink:x,focusedSpanId:y,createFocusSpanLink:w,topOfViewRefType:j})})})]})}}const et=(0,o.withTheme2)(Xe);function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nt=(0,o.stylesFactory)((e=>{const{topOfViewRefType:t}=e,n=t===at.Explore?"fixed":"absolute";return{rowsWrapper:a.iv`
      width: 100%;
    `,row:a.iv`
      width: 100%;
    `,scrollToTopButton:a.iv`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${n};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}}));let at;!function(e){e.Explore="Explore",e.Panel="Panel"}(at||(at={}));const st=28,it=161,rt=197;const ot=(0,i.Z)((function(e,t,n){return e?function(e,t,n){if(!e)return[];let a=null;const s=[];for(let i=0;i<e.length;i++){const r=e[i],{spanID:o,depth:l}=r;let d=!1;null!=a&&(l>=a?d=!0:a=null),d||(t.has(o)&&(a=l+1),s.push({span:r,isDetail:!1,spanIndex:i}),n.has(o)&&s.push({span:r,isDetail:!0,spanIndex:i}))}return s}(e.spans,t,n):[]})),lt=(0,i.Z)(F._h,s.isEqual),dt=(0,i.Z)((function(e){const[t,n]=e;return{left:t>0,right:n<1}}),s.isEqual);class ct extends r.Component{constructor(e){super(e),tt(this,"listView",void 0),tt(this,"topTraceViewRef",(0,r.createRef)()),tt(this,"getViewRange",(()=>this.props.currentViewRangeTime)),tt(this,"getSearchedSpanIDs",(()=>this.props.findMatchesIDs)),tt(this,"getCollapsedChildren",(()=>this.props.childrenHiddenIDs)),tt(this,"mapRowIndexToSpanIndex",(e=>this.getRowStates()[e].spanIndex)),tt(this,"mapSpanIndexToRowIndex",(e=>{const t=this.getRowStates().length;for(let n=0;n<t;n++){const{spanIndex:t}=this.getRowStates()[n];if(t===e)return n}throw new Error(`unable to find row for span index: ${e}`)})),tt(this,"setListView",(e=>{const t=this.listView!==e;this.listView=e,e&&t&&this.props.registerAccessors(this.getAccessors())})),tt(this,"getKeyFromIndex",(e=>{const{isDetail:t,span:n}=this.getRowStates()[e];return`${n.traceID}--${n.spanID}--${t?"detail":"bar"}`})),tt(this,"getIndexFromKey",(e=>{const t=e.split("--"),n=t[0],a=t[1],s="detail"===t[2],i=this.getRowStates().length;for(let e=0;e<i;e++){const{span:t,isDetail:i}=this.getRowStates()[e];if(t.spanID===a&&t.traceID===n&&i===s)return e}return-1})),tt(this,"getRowHeight",(e=>{const{span:t,isDetail:n}=this.getRowStates()[e];return n?Array.isArray(t.logs)&&t.logs.length?rt:it:st})),tt(this,"renderRow",((e,t,n,a)=>{const{isDetail:s,span:i,spanIndex:r}=this.getRowStates()[n];return s?this.renderSpanDetailRow(i,e,t,a):this.renderSpanBarRow(i,r,e,t,a)})),tt(this,"scrollToSpan",(e=>{if(null==e)return;const t=this.getRowStates().findIndex((t=>t.span.spanID===e));var n;t>=0&&(null===(n=this.listView)||void 0===n||n.scrollToIndex(t))})),tt(this,"scrollToTop",(()=>{var e;const{topOfViewRef:t}=this.props;null==t||null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}));const{setTrace:t,trace:n,uiFind:a}=e;t(n,a)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(e){const t=Object.keys(e);for(let n=0;n<t.length;n+=1)if(e[t[n]]!==this.props[t[n]]){if("shouldScrollToFirstUiFindMatch"!==t[n])return!0;if(e[t[n]])return!0}return!1}componentDidUpdate(e){const{registerAccessors:t,trace:n}=e,{shouldScrollToFirstUiFindMatch:a,clearShouldScrollToFirstUiFindMatch:s,scrollToFirstVisibleSpan:i,registerAccessors:r,setTrace:o,trace:l,uiFind:d,focusedSpanId:c,focusedSpanIdForSearch:u}=this.props;n!==l&&o(l,d),this.listView&&t!==r&&r(this.getAccessors()),a&&(i(),s()),c!==e.focusedSpanId&&this.scrollToSpan(c),u!==e.focusedSpanIdForSearch&&this.scrollToSpan(u)}getRowStates(){const{childrenHiddenIDs:e,detailStates:t,trace:n}=this.props;return ot(n,e,t)}getClipping(){const{currentViewRangeTime:e}=this.props;return dt(e)}getViewedBounds(){const{currentViewRangeTime:e,trace:t}=this.props,[n,a]=e;return lt({min:t.startTime,max:t.endTime,viewStart:n,viewEnd:a})}getAccessors(){const e=this.listView;if(!e)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:e.getViewHeight,getBottomRowIndexVisible:e.getBottomVisibleIndex,getTopRowIndexVisible:e.getTopVisibleIndex,getRowPosition:e.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(e,t,n,a,s){const{spanID:i}=e,{serviceName:r}=e.process,{childrenHiddenIDs:o,childrenToggle:d,detailStates:c,detailToggle:h,findMatchesIDs:p,spanNameColumnWidth:g,trace:m,spanBarOptions:f,hoverIndentGuideIds:v,addHoverIndentGuideId:b,removeHoverIndentGuideId:x,theme:y,createSpanLink:w,focusedSpanId:j,focusedSpanIdForSearch:S}=this.props;if(!m)return null;const C=(0,l._K)(r,y),k=o.has(i),T=c.has(i),I=!!p&&p.has(i),O=i===j||i===S,N=(0,F.yM)(e)||k&&(0,F.Qx)(m.spans,t);let D=null;if(k){const e=(0,F.s2)(m.spans.slice(t));if(e){const t=this.getViewedBounds()(e.startTime,e.startTime+e.duration);D={color:(0,l._K)(e.process.serviceName,y),operationName:e.operationName,serviceName:e.process.serviceName,viewEnd:t.end,viewStart:t.start}}}const P=e.tags.find((e=>"peer.service"===e.key));let A=null;!e.hasChildren&&P&&(0,F.JE)(e)&&(A={serviceName:P.value,color:(0,l._K)(P.value,y)});const M=nt(this.props);return(0,u.jsx)("div",Object.assign({className:M.row,style:a},s,{children:(0,u.jsx)(Te,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:C,spanBarOptions:f,columnDivision:g,isChildrenExpanded:!k,isDetailExpanded:T,isMatchingFilter:I,isFocused:O,numTicks:5,onDetailToggled:h,onChildrenToggled:d,rpc:D,noInstrumentedServer:A,showErrorIcon:N,getViewedBounds:this.getViewedBounds(),traceStartTime:m.startTime,span:e,hoverIndentGuideIds:v,addHoverIndentGuideId:b,removeHoverIndentGuideId:x,createSpanLink:w})}),n)}renderSpanDetailRow(e,t,n,a){const{spanID:s}=e,{serviceName:i}=e.process,{detailLogItemToggle:r,detailLogsToggle:o,detailProcessToggle:d,detailReferencesToggle:c,detailReferenceItemToggle:h,detailWarningsToggle:p,detailStackTracesToggle:g,detailStates:m,detailTagsToggle:f,detailToggle:v,spanNameColumnWidth:b,trace:x,timeZone:y,hoverIndentGuideIds:w,addHoverIndentGuideId:j,removeHoverIndentGuideId:S,linksGetter:C,theme:k,createSpanLink:T,focusedSpanId:I,createFocusSpanLink:O,topOfViewRefType:N}=this.props,F=m.get(s);if(!x||!F)return null;const D=(0,l._K)(i,k),P=nt(this.props);return(0,u.jsx)("div",Object.assign({className:P.row,style:Object.assign({},n,{zIndex:1})},a,{children:(0,u.jsx)(et,{color:D,columnDivision:b,onDetailToggled:v,detailState:F,linksGetter:C,logItemToggle:r,logsToggle:o,processToggle:d,referenceItemToggle:h,referencesToggle:c,warningsToggle:p,stackTracesToggle:g,span:e,timeZone:y,tagsToggle:f,traceStartTime:x.startTime,hoverIndentGuideIds:w,addHoverIndentGuideId:j,removeHoverIndentGuideId:S,createSpanLink:T,focusedSpanId:I,createFocusSpanLink:O,topOfViewRefType:N})}),t)}render(){const e=nt(this.props),{scrollElement:t}=this.props;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:e.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:t}),(0,u.jsx)(o.ToolbarButton,{className:e.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"})]})}}const ut=(0,o.withTheme2)(ct)},94210:(e,t,n)=>{"use strict";n.d(t,{JE:()=>p,LU:()=>a.LU,Qx:()=>u,_h:()=>s,s2:()=>h,yM:()=>c});var a=n(20596);function s(e){const{min:t,max:n,viewStart:a,viewEnd:s}=e,i=n-t,r=t+a*i,o=n-(1-s)*i-r;return(e,t)=>({start:(e-r)/o,end:(t-r)/o})}function i(e,t,n){return!(!Array.isArray(n.tags)||!n.tags.length)&&n.tags.some((n=>n.key===e&&n.value===t))}const r=i.bind(null,"span.kind","client"),o=i.bind(null,"span.kind","server"),l=i.bind(null,"error",!0),d=i.bind(null,"error","true"),c=e=>l(e)||d(e);function u(e,t){const{depth:n}=e[t];let a=t+1;for(;a<e.length&&e[a].depth>n;a++)if(c(e[a]))return!0;return!1}function h(e){if(e.length<=1||!r(e[0]))return!1;const t=e[0].depth+1;let n=1;for(;n<e.length&&e[n].depth===t;){if(o(e[n]))return e[n];n++}return null}const p=e=>e.tags.some((e=>{let{key:t,value:n}=e;return"span.kind"===t&&"client"===n}))},45176:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(94593),s=n(23019),i=n.n(s),r=(n(68404),n(3490)),o=n(15045),l=n(45916);function d(e){const{className:t,divider:n=!1,items:s}=e,d=(0,r.useStyles2)((e=>t=>({LabeledList:a.iv`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${!0===e&&"\n        margin-right: -8px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: flex-end;\n      "}
    `,LabeledListItem:a.iv`
      label: LabeledListItem;
      display: inline-block;
      ${!0===e&&`\n        border-right: 1px solid ${(0,o.h)(t,"#ddd")};\n        padding: 0 8px;\n      `}
    `,LabeledListLabel:a.iv`
      label: LabeledListLabel;
      color: ${t.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:a.iv`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `}))(n));return(0,l.jsx)("ul",{className:i()(d.LabeledList,t),children:s.map((e=>{let{key:t,label:n,value:a}=e;return(0,l.jsxs)("li",{className:d.LabeledListItem,children:[(0,l.jsx)("span",{className:d.LabeledListLabel,children:n}),(0,l.jsx)("strong",{className:d.LabeledListValue,children:a})]},`${t}`)}))})}},11723:(e,t,n)=>{"use strict";n.d(t,{kt:()=>it,e6:()=>at.ZP,T2:()=>nt,Ox:()=>U,h2:()=>o.h,rZ:()=>Rt,R1:()=>Mt});var a=n(94593),s=n(68404),i=n(90923),r=n(3490),o=n(15045),l=n(21710),d=n.n(l);const c={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left â Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right â Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in â Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out â Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let u;function h(){if(u)return u;const e=new(d())(document.body);return u=e,e}var p=n(23019),g=n.n(p),m=n(49566),f=n(91916),v=n(10019),b=n(45916);const x=()=>({TimelineCollapser:a.iv`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function y(e){const{onExpandAll:t,onExpandOne:n,onCollapseAll:a,onCollapseOne:s}=e,i=(0,r.useStyles2)(x);return(0,b.jsxs)("div",{className:i.TimelineCollapser,"data-testid":"TimelineCollapser",children:[(0,b.jsx)(r.IconButton,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:n}),(0,b.jsx)(r.IconButton,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:s}),(0,b.jsx)(r.IconButton,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:t}),(0,b.jsx)(r.IconButton,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:a})]})}var w;!function(e){e.DragEnd="DragEnd",e.DragMove="DragMove",e.DragStart="DragStart",e.MouseEnter="MouseEnter",e.MouseLeave="MouseLeave",e.MouseMove="MouseMove"}(w||(w={}));const j=w;var S=n(82897);const C=["getBounds","tag","resetBoundsOnResize"];function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class T{constructor(e){let{getBounds:t,tag:n,resetBoundsOnResize:a=!0}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,C);k(this,"_bounds",void 0),k(this,"_isDragging",void 0),k(this,"_onMouseEnter",void 0),k(this,"_onMouseLeave",void 0),k(this,"_onMouseMove",void 0),k(this,"_onDragStart",void 0),k(this,"_onDragMove",void 0),k(this,"_onDragEnd",void 0),k(this,"_resetBoundsOnResize",void 0),k(this,"getBounds",void 0),k(this,"tag",void 0),k(this,"handleMouseEnter",void 0),k(this,"handleMouseMove",void 0),k(this,"handleMouseLeave",void 0),k(this,"handleMouseDown",void 0),k(this,"resetBounds",(()=>{this._bounds=void 0})),k(this,"_handleMinorMouseEvent",(e=>{const{button:t,clientX:n,type:a}=e;if(this._isDragging||0!==t)return;let s,i=null;if("mouseenter"===a)i=j.MouseEnter,s=this._onMouseEnter;else if("mouseleave"===a)i=j.MouseLeave,s=this._onMouseLeave;else{if("mousemove"!==a)throw new Error(`invalid event type: ${a}`);i=j.MouseMove,s=this._onMouseMove}if(!s)return;const{value:r,x:o}=this._getPosition(n);s({event:e,type:i,value:r,x:o,manager:this,tag:this.tag})})),k(this,"_handleDragEvent",(e=>{const{button:t,clientX:n,type:a}=e;let s,i=null;if("mousedown"===a){if(this._isDragging||0!==t)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const e=(0,S.get)(document,"body.style");e&&(e.userSelect="none"),this._isDragging=!0,i=j.DragStart,s=this._onDragStart}else if("mousemove"===a){if(!this._isDragging)return;i=j.DragMove,s=this._onDragMove}else{if("mouseup"!==a)throw new Error(`invalid event type: ${a}`);if(!this._isDragging)return;this._stopDragging(),i=j.DragEnd,s=this._onDragEnd}if(!s)return;const{value:r,x:o}=this._getPosition(n);s({event:e,type:i,value:r,x:o,manager:this,tag:this.tag})})),this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=t,this.tag=n,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(a),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=s.onMouseEnter,this._onMouseLeave=s.onMouseLeave,this._onMouseMove=s.onMouseMove,this._onDragStart=s.onDragStart,this._onDragMove=s.onDragMove,this._onDragEnd=s.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(e){const{clientXLeft:t,maxValue:n,minValue:a,width:s}=this._getBounds();let i=e-t,r=i/s;return null!=a&&r<a?(r=a,i=a*s):null!=n&&r>n&&(r=n,i=n*s),{value:r,x:i}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const e=(0,S.get)(document,"body.style");e&&(e.userSelect=null),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=(0,r.stylesFactory)((()=>({TimelineColumnResizer:a.iv`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:a.iv`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:a.iv`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:a.iv`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:a.iv`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:a.iv`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:a.iv`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:a.iv`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `})));class N extends s.PureComponent{constructor(e){super(e),I(this,"state",void 0),I(this,"_dragManager",void 0),I(this,"_rootElm",void 0),I(this,"_setRootElm",(e=>{this._rootElm=e})),I(this,"_getDraggingBounds",(()=>{if(!this._rootElm)throw new Error("invalid state");const{left:e,width:t}=this._rootElm.getBoundingClientRect(),{min:n,max:a}=this.props;return{clientXLeft:e,width:t,maxValue:a,minValue:n}})),I(this,"_handleDragUpdate",(e=>{let{value:t}=e;this.setState({dragPosition:t})})),I(this,"_handleDragEnd",(e=>{let{manager:t,value:n}=e;t.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(n)})),this._dragManager=new T({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let e,t;const{position:n,columnResizeHandleHeight:a}=this.props,{dragPosition:s}=this.state;e=100*n+"%";const i={left:e};let r=!1,o=!1;const l=O();if(this._dragManager.isDragging()&&this._rootElm&&null!=s){r=s<n,o=s>n,e=100*s+"%";t={left:100*Math.min(n,s)+"%",right:`calc(${100*(1-Math.max(n,s))}% - 1px)`}}else t=i;t.height=a;const d=r||o;return(0,b.jsxs)("div",{className:l.TimelineColumnResizer,ref:this._setRootElm,"data-test-id":"TimelineColumnResizer",children:[(0,b.jsx)("div",{className:g()(l.gripIcon,d&&l.gripIconDragging),style:i,"data-test-id":"TimelineColumnResizer--gripIcon"}),(0,b.jsx)("div",{"aria-hidden":!0,className:g()(l.dragger,d&&l.draggerDragging,o&&l.draggerDraggingRight,r&&l.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:t,"data-test-id":"TimelineColumnResizer--dragger"})]})}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const D=(0,r.stylesFactory)((()=>({TimelineViewingLayer:a.iv`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:a.iv`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:a.iv`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:a.iv`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:a.iv`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:a.iv`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:a.iv`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:a.iv`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `})));function P(e,t,n){return e+n*(t-e)}function A(e,t,n){return(n-e)/(t-e)}function M(e,t,n,s,i){const r=function(e,t){let[n,a]=e<t?[e,t]:[t,e];return n>=1||a<=0?{isOutOfView:!0}:(n<0&&(n=0),a>1&&(a=1),{isDraggingLeft:e>t,left:100*n+"%",width:100*(a-n)+"%"})}(A(e,t,n),A(e,t,s));if(function(e){return Reflect.has(e,"isOutOfView")}(r))return null;const{isDraggingLeft:o,left:l,width:d}=r,c=D(),u=(0,a.cx)({[c.TimelineViewingLayerDraggedDraggingRight]:!o,[c.TimelineViewingLayerDraggedReframeDrag]:!i,[c.TimelineViewingLayerDraggedShiftDrag]:i});return(0,b.jsx)("div",{className:(0,a.cx)(c.TimelineViewingLayerDragged,c.TimelineViewingLayerDraggedDraggingLeft,u),style:{left:l,width:d},"data-test-id":"Dragged"})}class R extends s.PureComponent{constructor(e){super(e),F(this,"_draggerReframe",void 0),F(this,"_root",void 0),F(this,"_setRoot",(e=>{this._root=e})),F(this,"_getDraggingBounds",(()=>{if(!this._root)throw new Error("invalid state");const{left:e,width:t}=this._root.getBoundingClientRect();return{clientXLeft:e,width:t}})),F(this,"_handleReframeMouseMove",(e=>{let{value:t}=e;const[n,a]=this.props.viewRangeTime.current,s=P(n,a,t);this.props.updateNextViewRangeTime({cursor:s})})),F(this,"_handleReframeMouseLeave",(()=>{this.props.updateNextViewRangeTime({cursor:void 0})})),F(this,"_handleReframeDragUpdate",(e=>{let{value:t}=e;const{current:n,reframe:a}=this.props.viewRangeTime,[s,i]=n,r=P(s,i,t),o={reframe:{anchor:a?a.anchor:r,shift:r}};this.props.updateNextViewRangeTime(o)})),F(this,"_handleReframeDragEnd",(e=>{let{manager:t,value:n}=e;const{current:a,reframe:s}=this.props.viewRangeTime,[i,r]=a,o=P(i,r,n),l=s?s.anchor:o,[d,c]=o<l?[o,l]:[l,o];t.resetBounds(),this.props.updateViewRangeTime(d,c,"timeline-header")})),this._draggerReframe=new T({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(e){const{boundsInvalidator:t}=this.props;t!==e.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:e}=this.props,{current:t,cursor:n,reframe:a,shiftEnd:s,shiftStart:i}=e,[r,o]=t;let l;!(null!=a||null!=s||null!=i)&&null!=n&&n>=r&&n<=o&&(l=100*A(r,o,n)+"%");const d=D();return(0,b.jsxs)("div",{"aria-hidden":!0,className:d.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-test-id":"TimelineViewingLayer",children:[null!=l&&(0,b.jsx)("div",{className:d.TimelineViewingLayerCursorGuide,style:{left:l},"data-test-id":"TimelineViewingLayer--cursorGuide"}),null!=a&&M(r,o,a.anchor,a.shift,!1),null!=s&&M(r,o,o,s,!0),null!=i&&M(r,o,r,i,!0)]})}}const $=e=>({TimelineHeaderRow:a.iv`
      label: TimelineHeaderRow;
      background: ${(0,o.h)(e,"#ececec")};
      border-bottom: 1px solid ${(0,o.h)(e,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:a.iv`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:a.iv`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function L(e){const{duration:t,nameColumnWidth:n,numTicks:a,onCollapseAll:s,onCollapseOne:i,onColummWidthChange:o,onExpandAll:l,onExpandOne:d,updateViewRangeTime:c,updateNextViewRangeTime:u,viewRangeTime:h,columnResizeHandleHeight:p}=e,[x,w]=h.current,j=(0,r.useStyles2)($);return(0,b.jsxs)(v.Z,{className:j.TimelineHeaderRow,"data-test-id":"TimelineHeaderRow",children:[(0,b.jsxs)(v.Z.Cell,{className:g()(m.oD,m.H3,j.TimelineHeaderWrapper),width:n,children:[(0,b.jsx)("h4",{className:j.TimelineHeaderRowTitle,children:"Service & Operation"}),(0,b.jsx)(y,{onCollapseAll:s,onExpandAll:l,onCollapseOne:i,onExpandOne:d})]}),(0,b.jsxs)(v.Z.Cell,{width:1-n,children:[(0,b.jsx)(R,{boundsInvalidator:n,updateNextViewRangeTime:u,updateViewRangeTime:c,viewRangeTime:h}),(0,b.jsx)(f.Z,{numTicks:a,startTime:x*t,endTime:w*t,showLabels:!0})]}),(0,b.jsx)(N,{columnResizeHandleHeight:p,position:n,onChange:o,min:.2,max:.85})]})}var E=n(39306);const V=["setSpanNameColumnWidth","updateNextViewRangeTime","updateViewRangeTime","viewRange","traceTimeline","theme","topOfViewRef","focusedSpanIdForSearch"];function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z=(0,r.stylesFactory)((e=>({TraceTimelineViewer:a.iv`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,o.h)(e,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,o.h)(e,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,o.h)(e,"teal")};
      }

      & .json-markup-null {
        color: ${(0,o.h)(e,"teal")};
      }

      & .json-markup-number {
        color: ${(0,o.h)(e,"blue","black")};
      }
    `})));class _ extends s.PureComponent{constructor(e){super(e),B(this,"collapseAll",(()=>{this.props.collapseAll(this.props.trace.spans),(0,i.reportInteraction)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"collapseAll"})})),B(this,"collapseOne",(()=>{this.props.collapseOne(this.props.trace.spans),(0,i.reportInteraction)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"collapseOne"})})),B(this,"expandAll",(()=>{this.props.expandAll(),(0,i.reportInteraction)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"expandAll"})})),B(this,"expandOne",(()=>{this.props.expandOne(this.props.trace.spans),(0,i.reportInteraction)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"expandOne"})})),this.state={height:0}}componentDidMount(){!function(e){const t=h();Object.keys(e).forEach((n=>{const a=e[n];a&&t.bind(c[n].binding,a)}))}({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const e=this.props,{setSpanNameColumnWidth:t,updateNextViewRangeTime:n,updateViewRangeTime:a,viewRange:s,traceTimeline:i,theme:r,topOfViewRef:o,focusedSpanIdForSearch:l}=e,d=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,V),{trace:c}=d,u=z(r);return(0,b.jsxs)("div",{className:u.TraceTimelineViewer,ref:e=>e&&this.setState({height:e.getBoundingClientRect().height}),children:[(0,b.jsx)(L,{duration:c.duration,nameColumnWidth:i.spanNameColumnWidth,numTicks:5,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:t,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:s.time,updateNextViewRangeTime:n,updateViewRangeTime:a,columnResizeHandleHeight:this.state.height}),(0,b.jsx)(E.ZP,Object.assign({},d,i,{setSpanNameColumnWidth:t,currentViewRangeTime:s.time.current,topOfViewRef:o,focusedSpanIdForSearch:l}))]})}}const U=(0,r.withTheme2)(_);var H=n(68485),W=n.n(H),q=n(43215),Z=n(977),G=n.n(Z);const K=["isLarge","className"];const Q=()=>({NewWindowIconLarge:a.iv`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function J(e){const{isLarge:t,className:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,K),s=(0,r.useStyles2)(Q),i=g()({[s.NewWindowIconLarge]:t},n);return(0,b.jsx)(G(),Object.assign({className:i},a))}var Y;J.defaultProps={isLarge:!1};const X=e=>(0,b.jsxs)("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",className:e.className,children:[e.children," ",Y||(Y=(0,b.jsx)(J,{}))]});function ee(e){const{links:t}=e;return(0,b.jsx)(X,{href:t[0].url,title:t[0].text,className:e.className})}var te=n(45176);const ne=()=>({BreakableText:a.iv`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),ae=/\W*\w+\W*/g;function se(e){const{className:t,text:n,wordRegexp:a=ae}=e,s=(0,r.useStyles2)(ne);if(!n)return"string"==typeof n?n:null;const i=[];a.exec("");let o=a.exec(n)||[n];for(;o;)i.push((0,b.jsx)("span",{className:t||s.BreakableText,children:o[0]},`${n}-${i.length}`)),o=a.exec(n);return i}se.defaultProps={wordRegexp:ae};const ie=e=>({TraceName:a.iv`
      label: TraceName;
      font-size: ${e.typography.size.lg};
    `});function re(e){const{className:t,traceName:n}=e,a=(0,r.useStyles2)(ie),s=String(n||"<trace-without-root-span>"),i=(0,b.jsx)(se,{text:s});return(0,b.jsx)("span",{className:g()(a.TraceName,t),children:i})}var oe=n(87855),le=n(9763);const de=n.n(le)()(Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:100,menuEnabled:!0},linkPatterns:[],menu:[{label:"About Jaeger",items:[{label:"GitHub",url:"https://github.com/uber/jaeger"},{label:"Docs",url:"http://jaeger.readthedocs.io/en/latest/"},{label:"Twitter",url:"https://twitter.com/JaegerTracing"},{label:"Discussion Group",url:"https://groups.google.com/forum/#!forum/jaeger-tracing"},{label:"Gitter.im",url:"https://gitter.im/jaegertracing/Lobby"},{label:"Blog",url:"https://medium.com/jaegertracing/"}]}],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]}));function ce(e){return(0,S.get)(de,e)}function ue(e){const t=e.references?e.references.find((e=>"CHILD_OF"===e.refType)):null;return t?t.span:null}const he=/#\{([^{}]*)\}/g;function pe(e){const t=new Set;return e.replace(he,((e,n)=>(t.add(n),e))),Array.from(t)}function ge(e,t,n){return e.replace(he,((e,a)=>{const s=n[a];return null==s?"":t(s)}))}function me(e,t){if("string"!=typeof e)throw new Error("Invalid template");return{parameters:pe(e),template:ge.bind(null,e,t)}}function fe(e){if("string"==typeof e)return t=>t===e;if(Array.isArray(e))return t=>e.indexOf(t)>-1;if(null==e)return()=>!0;throw new Error(`Invalid value: ${e}`)}const ve=e=>e;function be(e,t){if(t)return t.find((t=>t.key===e))}function xe(e,t){return e.template(t)}function ye(e,t,n,a){const s=n[a];let i="logs";const r=t.process.tags===n;r&&(i="process");t.tags===n&&(i="tags");const o=[];return e.forEach((e=>{if(e.type(i)&&e.key(s.key)&&e.value(s.value)){const a={},l=e.parameters.every((o=>{let l=be(o,n);return l||r||(l=function(e,t){let n=t;for(;n;){const t=be(e,n.tags)||be(e,n.process.tags);if(t)return t;n=ue(n)}}(o,t)),l?(a[o]=l.value,!0):(console.warn(`Skipping link pattern, missing parameter ${o} for key ${s.key} in ${i}.`,e.object),!1)}));l&&o.push({url:xe(e.url,a),text:xe(e.text,a)})}})),o}const we=(ce("linkPatterns")||[]).map((function(e){try{const t=me(e.url,encodeURIComponent),n=me(e.text,ve);return{object:e,type:fe(e.type),key:fe(e.key),value:fe(e.value),url:t,text:n,parameters:(0,S.uniq)(t.parameters.concat(n.parameters))}}catch(t){return console.error(`Ignoring invalid link pattern: ${t}`,e),null}})).filter(Boolean),je=(0,oe.Z)(10)((e=>{const t=[];return e?function(e,t){const n=[],a=Object.keys(t).filter((e=>"string"==typeof t[e]||"number"===t[e]));return e.filter((e=>e.type("traces"))).forEach((e=>{const s={};e.parameters.every((e=>{const n=e;return!!a.includes(n)&&(s[e]=t[n],!0)}))&&n.push({url:xe(e.url,s),text:xe(e.text,s)})})),n}(we,e):t}));Se=we,Ce=new WeakMap;var Se,Ce;const ke=(0,S.memoize)((function(e){let t;const n=new Set(e.map((e=>{let{spanID:t}=e;return t})));for(let a=0;a<e.length;a++){if(e[a].references&&e[a].references.some((t=>{let{traceID:s,spanID:i}=t;return s===e[a].traceID&&n.has(i)})))continue;if(!t){t=e[a];continue}const s=e[a].references&&e[a].references.length||0,i=t.references&&t.references.length||0;(s<i||s===i&&e[a].startTime<t.startTime)&&(t=e[a])}return t?`${t.process.serviceName}: ${t.operationName}`:""}),(e=>e.length?e[0].traceID:0));var Te=n(20596),Ie=n(58635),Oe=n(85891);function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fe=(0,r.stylesFactory)((e=>({CanvasSpanGraph:a.iv`
      label: CanvasSpanGraph;
      background: ${(0,o.h)(e,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `})));class De extends s.PureComponent{constructor(e){super(e),Ne(this,"_canvasElm",void 0),Ne(this,"getColor",(e=>(0,Oe.e6)(e,this.props.theme))),Ne(this,"_setCanvasRef",(e=>{this._canvasElm=e})),this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:e,items:t}=this.props;!function(e,t,n,a,s){const i=new Map,r=t.length<60?60:Math.min(t.length,200),o=2*window.innerWidth;e.width=o,e.height=r;const l=Math.min(6,Math.max(2,r/t.length)),d=r/t.length,c=e.getContext("2d",{alpha:!1});c.fillStyle=s,c.fillRect(0,0,o,r);for(let e=0;e<t.length;e++){const{valueWidth:s,valueOffset:r,serviceName:u}=t[e],h=r/n*o;let p=s/n*o;p<10&&(p=10);let g=i.get(u);g||(g=`rgba(${a(u).concat(.8).join()})`,i.set(u,g)),c.fillStyle=g,c.fillRect(h,e*d,p,l)}}(this._canvasElm,t,e,this.getColor,(0,o.h)(this.props.theme,"#fff"))}}render(){return(0,b.jsx)("canvas",{className:Fe(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef})}}const Pe=(0,r.withTheme2)(De),Ae=()=>({TickLabels:a.iv`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:a.iv`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Me(e){const{numTicks:t,duration:n}=e,a=(0,r.useStyles2)(Ae),s=[];for(let e=0;e<t+1;e++){const i=e/t,r=1===i?{right:"0%"}:{left:100*i+"%"};s.push((0,b.jsx)("div",{className:a.TickLabelsLabel,style:r,"data-test":"tick",children:(0,Te.LU)(n*i)},i))}return(0,b.jsx)("div",{className:a.TickLabels,children:s})}const Re=()=>({GraphTick:a.iv`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function $e(e){const{numTicks:t}=e,n=(0,r.useStyles2)(Re),a=[];for(let e=1;e<t;e++){const s=e/t*100+"%";a.push((0,b.jsx)("line",{className:n.GraphTick,x1:s,y1:"0%",x2:s,y2:"100%"},e/t))}return(0,b.jsx)("g",{"data-testid":"ticks","aria-hidden":"true",children:a})}const Le=()=>({ScrubberHandleExpansion:g()(a.iv`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:g()(a.iv`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:g()(a.iv`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:a.iv`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:a.iv`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function Ee(e){let{isDragging:t,onMouseDown:n,onMouseEnter:a,onMouseLeave:s,position:i}=e;const o=100*i+"%",l=(0,r.useStyles2)(Le),d=g()({[l.ScrubberDragging]:t});return(0,b.jsxs)("g",{className:d,children:[(0,b.jsxs)("g",{className:l.ScrubberHandles,onMouseDown:n,onMouseEnter:a,onMouseLeave:s,children:[(0,b.jsx)("rect",{x:o,className:l.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),(0,b.jsx)("rect",{x:o,className:l.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})]}),(0,b.jsx)("line",{className:l.ScrubberLine,y2:"100%",x1:o,x2:o})]})}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Be=(0,r.stylesFactory)((e=>{const t="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",n=a.iv`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:a.iv`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${t} {
        display: unset;
      }
    `,ViewingLayerGraph:a.iv`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,o.h)(e,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:a.iv`
      label: ViewingLayerInactive;
      fill: ${(0,o.h)(e,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:a.iv`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,o.h)(e,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:a.iv`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:a.iv`
      label: ViewingLayerDrag;
      fill: ${(0,o.h)(e,"#44f")};
    `,ViewingLayerFullOverlay:a.iv`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:n,ViewingLayerResetZoomHoverClassName:t}})),ze="SHIFT_END",_e="SHIFT_START",Ue="REFRAME";class He extends s.PureComponent{constructor(e){super(e),Ve(this,"state",void 0),Ve(this,"_root",void 0),Ve(this,"_draggerReframe",void 0),Ve(this,"_draggerStart",void 0),Ve(this,"_draggerEnd",void 0),Ve(this,"_setRoot",(e=>{this._root=e})),Ve(this,"_getDraggingBounds",(e=>{if(!this._root)throw new Error("invalid state");const{left:t,width:n}=this._root.getBoundingClientRect(),[a,s]=this.props.viewRange.time.current;let i=1,r=0;return e===_e?i=s:e===ze&&(r=a),{clientXLeft:t,maxValue:i,minValue:r,width:n}})),Ve(this,"_handleReframeMouseMove",(e=>{let{value:t}=e;this.props.updateNextViewRangeTime({cursor:t})})),Ve(this,"_handleReframeMouseLeave",(()=>{this.props.updateNextViewRangeTime({cursor:null})})),Ve(this,"_handleReframeDragUpdate",(e=>{let{value:t}=e;const n=t,{time:a}=this.props.viewRange,s={reframe:{anchor:a.reframe?a.reframe.anchor:n,shift:n}};this.props.updateNextViewRangeTime(s)})),Ve(this,"_handleReframeDragEnd",(e=>{let{manager:t,value:n}=e;const{time:a}=this.props.viewRange,s=a.reframe?a.reframe.anchor:n,[i,r]=n<s?[n,s]:[s,n];t.resetBounds(),this.props.updateViewRangeTime(i,r,"minimap")})),Ve(this,"_handleScrubberEnterLeave",(e=>{let{type:t}=e;const n=t===j.MouseEnter;this.setState({preventCursorLine:n})})),Ve(this,"_handleScrubberDragUpdate",(e=>{let{event:t,tag:n,type:a,value:s}=e;a===j.DragStart&&t.stopPropagation(),n===_e?this.props.updateNextViewRangeTime({shiftStart:s}):n===ze&&this.props.updateNextViewRangeTime({shiftEnd:s})})),Ve(this,"_handleScrubberDragEnd",(e=>{let{manager:t,tag:n,value:a}=e;const[s,i]=this.props.viewRange.time.current;let r;if(n===_e)r=[a,i];else{if(n!==ze)throw new Error("bad state");r=[s,a]}t.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(r[0],r[1],"minimap")})),Ve(this,"_resetTimeZoomClickHandler",(()=>{this.props.updateViewRangeTime(0,1)})),this._draggerReframe=new T({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:Ue}),this._draggerStart=new T({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:_e}),this._draggerEnd=new T({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:ze}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(e,t){const n=Be(this.props.theme),a=function(e,t){const[n,a]=e<t?[e,t]:[t,e];return{x:100*n+"%",width:100*(a-n)+"%",leadingX:100*t+"%"}}(e,t);return[(0,b.jsx)("rect",{className:g()(n.ViewingLayerDraggedShift,n.ViewingLayerDrag),x:a.x,y:"0",width:a.width,height:this.props.height-2},"fill"),(0,b.jsx)("rect",{className:g()(n.ViewingLayerDrag),x:a.leadingX,y:"0",width:"1",height:this.props.height-2},"edge")]}render(){const{height:e,viewRange:t,numTicks:n,theme:a}=this.props,{preventCursorLine:s}=this.state,{current:i,cursor:o,shiftStart:l,shiftEnd:d,reframe:c}=t.time,u=null!=l||null!=d||null!=c,[h,p]=i;let m=0;h&&(m=100*h);let f,v=100;p&&(v=100-100*p),u||null==o||s||(f=100*o+"%");const x=Be(a);return(0,b.jsxs)("div",{"aria-hidden":!0,className:x.ViewingLayer,style:{height:e},children:[(0!==h||1!==p)&&(0,b.jsx)(r.Button,{onClick:this._resetTimeZoomClickHandler,className:g()(x.ViewingLayerResetZoom,x.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary",children:"Reset Selection"}),(0,b.jsxs)("svg",{height:e,className:x.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,children:[m>0&&(0,b.jsx)("rect",{x:0,y:0,height:"100%",width:`${m}%`,className:x.ViewingLayerInactive}),v>0&&(0,b.jsx)("rect",{x:100-v+"%",y:0,height:"100%",width:`${v}%`,className:x.ViewingLayerInactive}),(0,b.jsx)($e,{numTicks:n}),f&&(0,b.jsx)("line",{className:x.ViewingLayerCursorGuide,x1:f,y1:"0",x2:f,y2:e-2,strokeWidth:"1"}),null!=l&&this._getMarkers(h,l),null!=d&&this._getMarkers(p,d),(0,b.jsx)(Ee,{isDragging:null!=l,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:h||0}),(0,b.jsx)(Ee,{isDragging:null!=d,position:p||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),null!=c&&this._getMarkers(c.anchor,c.shift)]}),u&&(0,b.jsx)("div",{className:x.ViewingLayerFullOverlay})]})}}const We=(0,r.withTheme2)(He);var qe;function Ze(e){return{valueOffset:e.relativeStartTime,valueWidth:e.duration,serviceName:e.process.serviceName}}const Ge=(0,Ie.Z)((function(e){return e.spans.map(Ze)}));class Ke extends s.PureComponent{render(){const{height:e,trace:t,viewRange:n,updateNextViewRangeTime:a,updateViewRangeTime:s}=this.props;if(!t)return qe||(qe=(0,b.jsx)("div",{}));const i=Ge(t);return(0,b.jsxs)("div",{className:g()(m.GL,m.H3),children:[(0,b.jsx)(Me,{numTicks:4,duration:t.duration}),(0,b.jsxs)("div",{className:m.WW,children:[(0,b.jsx)(Pe,{valueWidth:t.duration,items:i}),(0,b.jsx)(We,{viewRange:n,numTicks:4,height:e||60,updateViewRangeTime:s,updateNextViewRangeTime:a})]})]})}}var Qe,Je,Ye;Ye={height:60},(Je="defaultProps")in(Qe=Ke)?Object.defineProperty(Qe,Je,{value:Ye,enumerable:!0,configurable:!0,writable:!0}):Qe[Je]=Ye;const Xe=["renderer"];const et=e=>({TracePageHeader:a.iv`
      label: TracePageHeader;
      & > :first-child {
        border-bottom: 1px solid ${(0,o.h)(e,"#e8e8e8")};
      }
      & > :nth-child(2) {
        background-color: ${(0,o.h)(e,"#eee")};
        border-bottom: 1px solid ${(0,o.h)(e,"#e4e4e4")};
      }
      & > :last-child {
        border-bottom: 1px solid ${(0,o.h)(e,"#ccc")};
      }
    `,TracePageHeaderTitleRow:a.iv`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:a.iv`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitleLink:a.iv`
      label: TracePageHeaderTitleLink;
      align-items: center;
      display: flex;
      flex: 1;

      &:hover * {
        text-decoration: underline;
      }
      &:hover > *,
      &:hover small {
        text-decoration: none;
      }
    `,TracePageHeaderDetailToggle:a.iv`
      label: TracePageHeaderDetailToggle;
      font-size: 2.5rem;
      transition: transform 0.07s ease-out;
    `,TracePageHeaderDetailToggleExpanded:a.iv`
      label: TracePageHeaderDetailToggleExpanded;
      transform: rotate(90deg);
    `,TracePageHeaderTitle:a.iv`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.5em;
      padding-bottom: 0.5em;
    `,TracePageHeaderTitleCollapsible:a.iv`
      label: TracePageHeaderTitleCollapsible;
      margin-left: 0;
    `,TracePageHeaderOverviewItems:a.iv`
      label: TracePageHeaderOverviewItems;
      border-bottom: 1px solid #e4e4e4;
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:g()(a.iv`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:a.iv`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:a.iv`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:a.iv`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `}),tt=[{key:"timestamp",label:"Trace Start:",renderer(e,t,n){const a=(0,q.dateTimeFormat)(e.startTime/1e3,{timeZone:t,defaultWithMS:!0}),s=a.match(/^(.+)(:\d\d\.\d+)$/);return s?(0,b.jsxs)("span",{className:n.TracePageHeaderOverviewItemValue,children:[s[1],(0,b.jsx)("span",{className:n.TracePageHeaderOverviewItemValueDetail,children:s[2]})]}):a}},{key:"duration",label:"Duration:",renderer:e=>(0,Te.LU)(e.duration)},{key:"service-count",label:"Services:",renderer:e=>new Set((0,S.values)(e.processes).map((e=>e.serviceName))).size},{key:"depth",label:"Depth:",renderer:e=>(0,S.get)((0,S.maxBy)(e.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:e=>e.spans.length}];function nt(e){const{canCollapse:t,hideMap:n,hideSummary:a,onSlimViewClicked:i,slimView:o,trace:l,updateNextViewRangeTime:d,updateViewRangeTime:c,viewRange:u,timeZone:h}=e,p=(0,r.useStyles2)(et),f=s.useMemo((()=>l?je(l):[]),[l]);if(!l)return null;const v=!a&&!o&&tt.map((e=>{const{renderer:t}=e,n=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Xe);return Object.assign({},n,{value:t(l,h,p)})})),x=(0,b.jsxs)("h1",{className:g()(p.TracePageHeaderTitle,t&&p.TracePageHeaderTitleCollapsible),children:[(0,b.jsx)(re,{traceName:ke(l.spans)})," ",(0,b.jsx)("small",{className:g()(p.TracePageHeaderTraceId,m.pQ),children:l.traceID})]});return(0,b.jsxs)("header",{className:p.TracePageHeader,children:[(0,b.jsxs)("div",{className:p.TracePageHeaderTitleRow,children:[f&&f.length>0&&(0,b.jsx)(ee,{links:f,className:p.TracePageHeaderBack}),t?(0,b.jsxs)("a",{className:p.TracePageHeaderTitleLink,onClick:i,role:"switch","aria-checked":!o,children:[(0,b.jsx)(W(),{className:g()(p.TracePageHeaderDetailToggle,!o&&p.TracePageHeaderDetailToggleExpanded)}),x]}):x]}),v&&(0,b.jsx)(te.Z,{className:p.TracePageHeaderOverviewItems,items:v}),!n&&!o&&(0,b.jsx)(Ke,{trace:l,viewRange:u,updateNextViewRangeTime:d,updateViewRangeTime:c})]})}var at=n(45075);function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class it{constructor(e){st(this,"isTagsOpen",void 0),st(this,"isProcessOpen",void 0),st(this,"logs",void 0),st(this,"references",void 0),st(this,"isWarningsOpen",void 0),st(this,"isStackTracesOpen",void 0),st(this,"isReferencesOpen",void 0);const{isTagsOpen:t,isProcessOpen:n,isReferencesOpen:a,isWarningsOpen:s,isStackTracesOpen:i,logs:r,references:o}=e||{};this.isTagsOpen=Boolean(t),this.isProcessOpen=Boolean(n),this.isReferencesOpen=Boolean(a),this.isWarningsOpen=Boolean(s),this.isStackTracesOpen=Boolean(i),this.logs={isOpen:Boolean(r&&r.isOpen),openedItems:r&&r.openedItems?new Set(r.openedItems):new Set},this.references={isOpen:Boolean(o&&o.isOpen),openedItems:o&&o.openedItems?new Set(o.openedItems):new Set}}toggleTags(){const e=new it(this);return e.isTagsOpen=!this.isTagsOpen,e}toggleProcess(){const e=new it(this);return e.isProcessOpen=!this.isProcessOpen,e}toggleReferences(){const e=new it(this);return e.references.isOpen=!this.references.isOpen,e}toggleReferenceItem(e){const t=new it(this);return t.references.openedItems.has(e)?t.references.openedItems.delete(e):t.references.openedItems.add(e),t}toggleWarnings(){const e=new it(this);return e.isWarningsOpen=!this.isWarningsOpen,e}toggleStackTraces(){const e=new it(this);return e.isStackTracesOpen=!this.isStackTracesOpen,e}toggleLogs(){const e=new it(this);return e.logs.isOpen=!this.logs.isOpen,e}toggleLogItem(e){const t=new it(this);return t.logs.openedItems.has(e)?t.logs.openedItems.delete(e):t.logs.openedItems.add(e),t}}var rt=n(58565);class ot{static iterFunction(e,t=0){return n=>e(n.value,n,t)}static searchFunction(e){return"function"==typeof e?e:(t,n)=>e instanceof ot?n===e:t===e}constructor(e,t=[]){this.value=e,this.children=t}get depth(){return this.children.reduce(((e,t)=>Math.max(t.depth+1,e)),1)}get size(){let e=0;return this.walk((()=>e++)),e}addChild(e){return this.children.push(e instanceof ot?e:new ot(e)),this}find(e){if(ot.iterFunction(ot.searchFunction(e))(this))return this;for(let t=0;t<this.children.length;t++){const n=this.children[t].find(e);if(n)return n}return null}getPath(e){const t=ot.iterFunction(ot.searchFunction(e)),n=(e,a)=>{const s=a.concat([e]);if(t(e))return s;for(let t=0;t<e.children.length;t++){const a=e.children[t],i=n(a,s);if(i)return i}return null};return n(this,[])}walk(e,t=0){const n=[];let a=t;for(n.push({node:this,depth:a});n.length;){const{node:t,depth:s}=n.pop();e(t.value,t,s),a=s+1;let i=t.children.length-1;for(;i>=0;)n.push({node:t.children[i],depth:a}),i--}}}const lt=e=>e.serviceName;var dt=n(21817),ct=n.n(dt);const ut=e=>e.spanID,ht=e=>e.operationName,pt=e=>e.duration,gt=e=>e.startTime,mt=e=>e.processID,ft=(0,rt.P1)((0,rt.P1)((({span:e})=>e),(e=>e.references||[])),(({type:e})=>e),((e,t)=>e.find((e=>e.refType===t)))),vt=((0,rt.P1)((e=>ft({span:e,type:"CHILD_OF"})),(e=>e?e.spanID:null)),(0,rt.P1)((e=>{if(!e.process)throw new Error("\n      you must hydrate the spans with the processes, perhaps\n      using hydrateSpansWithProcesses(), before accessing a span's process\n    ");return e.process}),lt)),bt=((0,rt.P1)((({spans:e})=>e),(({leftBound:e})=>e),(({rightBound:e})=>e),((e,t,n)=>e.filter((e=>gt(e)>=t&&gt(e)<=n)))),(0,rt.P1)((({spans:e})=>e),(({text:e})=>e),((e,t)=>ct().filter(t,e,{extract:e=>`${vt(e)} ${ht(e)}`}).map((({original:e})=>e))))),xt=(0,rt.P1)(bt,(e=>e.reduce(((e,t)=>({...e,[ut(t)]:t})),{}))),yt=((0,rt.P1)((({spans:e})=>e),xt,((e,t)=>e.map((e=>({...e,muted:!t[ut(e)]}))))),e=>e.spans),wt=e=>e.processes,jt=(0,rt.P1)((e=>e.span),(e=>e.processes),((e,t)=>({...e,process:t[mt(e)]}))),St=(0,rt.P1)(yt,(e=>e.reduce(((e,t)=>e.set(ut(t),t)),new Map)));function Ct(e){const t=new Map(e.spans.map((e=>[e.spanID,new ot(e.spanID)]))),n=new Map(e.spans.map((e=>[e.spanID,e]))),a=new ot("__root__");e.spans.forEach((e=>{const n=t.get(e.spanID);if(Array.isArray(e.references)&&e.references.length){const{refType:s,spanID:i}=e.references[0];if("CHILD_OF"!==s&&"FOLLOWS_FROM"!==s)throw new Error(`Unrecognized ref type: ${s}`);(t.get(i)||a).children.push(n)}else a.children.push(n)}));const s=(e,t)=>{const a=n.get(e.value),s=n.get(t.value);return+(a.startTime>s.startTime)||+(a.startTime===s.startTime)-1};return e.spans.forEach((e=>{const n=t.get(e.spanID);n.children.length>1&&n.children.sort(s)})),a.children.sort(s),a}(0,rt.P1)(yt,(e=>e.length));const kt=(0,rt.P1)(yt,(e=>e.reduce(((e,t)=>e?Math.min(e,gt(t)):gt(t)),null))),Tt=(0,rt.P1)(yt,kt,((e,t)=>e.reduce(((e,n)=>e?Math.max(gt(n)-t+pt(n),e):pt(n)),null))),It=((0,rt.P1)(kt,Tt,((e,t)=>e+t)),(0,rt.P1)(Ct,St,((e,t)=>e.children.map((e=>t.get(e.value))).sort(((e,t)=>{return n=gt(e),a=gt(t),n-a;var n,a}))[0]))),Ot=((0,rt.P1)(Ct,(e=>e.depth-1)),(0,rt.P1)((0,rt.P1)((e=>e.trace),Ct),(0,rt.P1)((e=>e.span),ut),((e,t)=>e.getPath(t).length-1)),(0,rt.P1)(wt,(e=>Object.keys(e).reduce(((t,n)=>t.add(lt(e[n]))),new Set)))),Nt=((0,rt.P1)(Ot,(e=>e.size)),{ms:Te.Cz,s:Te.Gk}),Ft=(0,rt.P1)(Tt,(e=>e>=Te.WT?Nt.s:Nt.ms)),Dt=((0,rt.P1)((({duration:e})=>e),(({unit:e})=>Nt[e]),((e,t)=>t(e))),(0,rt.P1)((({duration:e})=>e),(0,rt.P1)((({trace:e})=>e),Ft),((e,t)=>t(e))),(0,rt.P1)((({trace:e})=>e),(({spans:e})=>e),(({sort:e})=>e),((e,t,{dir:n,comparator:a,selector:s})=>[...t].sort(((t,i)=>n*a(s(t,e),s(i,e)))))),(0,rt.P1)(Ct,(e=>{const t=new Map;let n=0;return e.walk((e=>t.set(e,n++))),t})));(0,rt.P1)((0,rt.P1)((e=>e.trace),Ct),(0,rt.P1)((e=>e.span),ut),((e,t)=>{const n=e.find(t);return n?n.size-1:-1})),(0,rt.P1)((0,rt.P1)((({trace:e})=>e),Dt),(({span:e})=>e),((e,t)=>e.get(ut(t)))),(0,rt.P1)((0,rt.P1)((0,rt.P1)((e=>{const t=yt(e),n=wt(e);return{...e,spans:t.map((e=>jt({span:e,processes:n})))}}),It),(0,rt.zB)({name:ht,serviceName:vt})),(({name:e,serviceName:t})=>`${t}: ${e}`)),(0,rt.P1)((({spans:e})=>e),(0,rt.P1)((({trace:e})=>e),Ct),(({collapsed:e})=>e),((e,t,n)=>{const a=n.reduce(((e,n)=>(t.find(n).walk((t=>t!==n&&e.add(t))),e)),new Set);return a.size>0?e.filter((e=>!a.has(ut(e)))):e})),(0,rt.P1)((({trace:e})=>e),(({interval:e=4})=>e),(({width:e=3})=>e),((e,t,n)=>[...Array(t+1).keys()].map((a=>({timestamp:kt(e)+Tt(e)*(a/t),width:n}))))),(0,rt.P1)((e=>e),yt,((e,t)=>{const n=new Map;return{...e,spans:t.reduce(((e,t)=>{const a=n.has(ut(t))?`${ut(t)}_${n.get(ut(t))}`:ut(t),s={...t,spanID:a};return a!==ut(t)&&console.warn("duplicate spanID in trace replaced",ut(t),"new:",a),n.set(ut(t),(n.get(ut(t))||0)+1),e.concat([s])}),[])}})),(0,rt.P1)((e=>e),yt,((e,t)=>({...e,spans:t.filter((e=>!!gt(e)))})));function Pt(e){const t=new Map;return{tags:e.reduce(((e,n)=>(e.some((e=>e.key===n.key&&e.value===n.value))?t.set(`${n.key}:${n.value}`,`Duplicate tag "${n.key}:${n.value}"`):e.push(n),e)),[]),warnings:Array.from(t.values())}}function At(e,t){var n;const a=null!==(n=null==e?void 0:e.slice())&&void 0!==n?n:[],s=(t||[]).map((e=>e.toLowerCase()));return a.sort(((e,t)=>{const n=e.key.toLowerCase(),a=t.key.toLowerCase();for(let e=0;e<s.length;e++){const t=s[e];if(n.startsWith(t)&&!a.startsWith(t))return-1;if(!n.startsWith(t)&&a.startsWith(t))return 1}return n>a?1:n<a?-1:0})),a}function Mt(e){if(null==e||!e.traceID)return null;const t=e.traceID.toLowerCase();let n=0,a=Number.MAX_SAFE_INTEGER;const s=new Map,i=new Map;e.spans=e.spans.filter((e=>Boolean(e.startTime))),e.processes=Object.entries(e.processes).reduce(((e,t)=>{let[n,a]=t;return e[n]=Object.assign({},a,{tags:At(a.tags)}),e}),{});const r=e.spans.length;for(let t=0;t<r;t++){const r=e.spans[t],{startTime:o,duration:l,processID:d}=r;let c=r.spanID;o<a&&(a=o),o+l>n&&(n=o+l);const u=s.get(c);null!=u?(console.warn(`Dupe spanID, ${u+1} x ${c}`,r,i.get(c)),(0,S.isEqual)(r,i.get(c))&&console.warn("\t two spans with same ID have `isEqual(...) === true`"),s.set(c,u+1),c=`${c}_${u}`,r.spanID=c):s.set(c,1),r.process=e.processes[d],i.set(c,r)}const o=Ct(e),l=[],d={};o.walk((function(e,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("__root__"===e)return;const r=i.get(e);if(!r)return;const{serviceName:o}=r.process;d[o]=(d[o]||0)+1,r.relativeStartTime=r.startTime-a,r.depth=s-1,r.hasChildren=n.children.length>0,r.childSpanCount=n.children.length,r.warnings=r.warnings||[],r.tags=r.tags||[],r.references=r.references||[];const c=Pt(r.tags);r.tags=At(c.tags,ce("topTagPrefixes")),r.warnings=r.warnings.concat(c.warnings),r.references.forEach(((n,a)=>{const s=i.get(n.spanID);s&&(n.span=s,a>0&&(s.subsidiarilyReferencedBy=s.subsidiarilyReferencedBy||[],s.subsidiarilyReferencedBy.push({spanID:e,traceID:t,span:r,refType:n.refType})))})),l.push(r)}));const c=ke(l);return{services:Object.keys(d).map((e=>({name:e,numberOfSpans:d[e]}))),spans:l,traceID:t,traceName:c,processes:e.processes,duration:n-a,startTime:a,endTime:n}}function Rt(e,t){if(!t)return;const n=[],a=[];e.split(/\s+/).filter(Boolean).forEach((e=>{"-"===e[0]?a.push(e.slice(1).toLowerCase()):n.push(e.toLowerCase())}));const s=(e,t)=>e.some((e=>t.toLowerCase().includes(e))),i=e=>!!e&&e.some((e=>!s(a,e.key)&&(s(n,e.key)||s(n,e.value.toString()))));return new Set(t.filter((e=>s(n,e.operationName)||s(n,e.process.serviceName)||i(e.tags)||null!==e.logs&&e.logs.some((e=>i(e.fields)))||i(e.process.tags)||n.some((t=>t===e.spanID)))).map((e=>e.spanID)))}},45075:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>l,Kg:()=>c,ZP:()=>u,th:()=>d});var a,s=n(94593),i=(n(68404),n(43215)),r=n(3490),o=n(45916);const l="None",d="Duration",c="Tag";function u(e){var t,n,u;let{options:p,onOptionsChange:g}=e;const m=(0,r.useStyles)(h),f=[l,d,c].map(i.toOption);return(0,o.jsxs)("div",{className:(0,s.iv)({width:"100%"}),children:[a||(a=(0,o.jsx)("h3",{className:"page-heading",children:"Span bar label"})),(0,o.jsx)("div",{className:m.infoText,children:"Span bar label lets you add additional info to the span bar row."}),(0,o.jsx)(r.InlineFieldRow,{className:m.row,children:(0,o.jsx)(r.InlineField,{label:"Label",labelWidth:26,grow:!0,children:(0,o.jsx)(r.Select,{inputId:"label",options:f,value:(null===(t=p.jsonData.spanBar)||void 0===t?void 0:t.type)||"",onChange:e=>{var t;(0,i.updateDatasourcePluginJsonDataOption)({onOptionsChange:g,options:p},"spanBar",Object.assign({},p.jsonData.spanBar,{type:null!==(t=null==e?void 0:e.value)&&void 0!==t?t:""}))},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:25})})}),(null===(n=p.jsonData.spanBar)||void 0===n?void 0:n.type)===c&&(0,o.jsx)(r.InlineFieldRow,{className:m.row,children:(0,o.jsx)(r.InlineField,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value",children:(0,o.jsx)(r.Input,{type:"text",placeholder:"Enter tag key",onChange:e=>(0,i.updateDatasourcePluginJsonDataOption)({onOptionsChange:g,options:p},"spanBar",Object.assign({},p.jsonData.spanBar,{tag:e.currentTarget.value})),value:(null===(u=p.jsonData.spanBar)||void 0===u?void 0:u.tag)||"",width:25})})})]})}const h=e=>({infoText:s.iv`
    label: infoText;
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `,row:s.iv`
    label: row;
    align-items: baseline;
  `})},49566:(e,t,n)=>{"use strict";n.d(t,{A4:()=>u,GL:()=>d,H3:()=>l,Im:()=>g,K9:()=>f,NY:()=>b,WW:()=>s,b$:()=>p,bi:()=>i,h2:()=>o,im:()=>r,oD:()=>c,pQ:()=>v,ty:()=>m,xb:()=>h});var a=n(94593);const s=a.iv`
  position: relative;
`,i=a.iv`
  margin-bottom: 0.25rem;
`,r=a.iv`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,o=a.iv`
  margin: 0;
`,l=a.iv`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,d=a.iv`
  padding-bottom: 0.5rem;
`,c=a.iv`
  display: flex;
`,u=(a.iv`
  align-items: center;
`,a.iv`
  align-items: start;
`,a.iv`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`),h=a.iv`
  text-align: right;
`,p=a.iv`
  display: inline-block;
`,g=a.iv`
  margin: -0.2rem 0.25rem 0 0;
`,m=a.iv`
  text-overflow: ellipsis;
`,f=a.iv`
  width: 100%;
`,v=a.iv`
  color: #aaa;
`,b=a.iv`
  justify-content: flex-end;
`},85891:(e,t,n)=>{"use strict";n.d(t,{_K:()=>u,e6:()=>h});var a=n(58635),s=n(35008),i=n.n(s),r=n(3490);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){if(7!==e.length)return[0,0,0];const t=e.slice(1,3),n=e.slice(3,5),a=e.slice(5);return[parseInt(t,16),parseInt(n,16),parseInt(a,16)]}class d{constructor(e,t){o(this,"colorsHex",void 0),o(this,"colorsRgb",void 0),o(this,"cache",void 0);const n=function(e,t){const n=e.indexOf("#E24D42");n>-1&&e.splice(n,1);let a=[];for(const n of e)i().readability(t.colors.background.primary,n)>=3&&a.push(n);return a}(e,t);this.colorsHex=n,this.colorsRgb=n.map(l),this.cache=new Map}_getColorIndex(e){let t=this.cache.get(e);if(null==t){const n=this.hashCode(e.toLowerCase()),a=Math.abs(n%this.colorsHex.length);t=4===a?a+1:a,this.cache.set(e,t)}return t}hashCode(e){let t,n,a=0;for(t=0;t<e.length;t++)n=e.charCodeAt(t),a=(a<<5)-a+n;return a}getColorByKey(e){const t=this._getColorIndex(e);return this.colorsHex[t]}getRgbColorByKey(e){const t=this._getColorIndex(e);return this.colorsRgb[t]}clear(){this.cache.clear()}}const c=(0,a.Z)(((e,t)=>new d(e,t)));function u(e,t){return c(r.colors,t).getColorByKey(e)}function h(e,t){return c(r.colors,t).getRgbColorByKey(e)}},20596:(e,t,n)=>{"use strict";n.d(t,{WT:()=>o,LU:()=>f,Cz:()=>g,Gk:()=>m});var a=n(82897),s=n(35853),i=n.n(s);const r=1e3,o=1e6,l=60*o,d=60*l,c=24*d,u=Math.log10(r),h=[{unit:"d",microseconds:c,ofPrevious:24},{unit:"h",microseconds:d,ofPrevious:60},{unit:"m",microseconds:l,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:r,ofPrevious:1e3},{unit:"Î¼s",microseconds:1,ofPrevious:1e3}];const p=(e,t,n)=>function(e,t){const n=t+(Math.floor(Math.log10(Math.abs(e)))+1);return n<=0?Math.trunc(e):Number(e.toPrecision(n))}(e/n,t)*n;function g(e){const t=p(e,u,r);return`${i().duration(t/r).asMilliseconds()}ms`}function m(e){const t=p(e,u,o);return`${i().duration(t/r).asSeconds()}s`}function f(e){const[t,n]=(0,a.dropWhile)(h,((t,n)=>{let{microseconds:a}=t;return n<h.length-1&&a>e}));if(1e3===t.ofPrevious)return`${(0,a.round)(e/t.microseconds,2)}${t.unit}`;const s=`${Math.floor(e/t.microseconds)}${t.unit}`,i=Math.round(e/n.microseconds%t.ofPrevious),r=`${i}${n.unit}`;return 0===i?s:`${s} ${r}`}},45193:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});const a=(0,n(35140).PH)("core/cleanUpState")},36537:(e,t,n)=>{"use strict";n.d(t,{$l:()=>a.$l,H7:()=>s.H7,RL:()=>s.RL,ad:()=>a.ad});var a=n(49842),s=n(87892)},5831:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,h:()=>a});const a=new(n(43215).EventBusSrv),s=a},83654:(e,t,n)=>{"use strict";n.d(t,{P:()=>N});var a=n(82897),s=n(68404),i=n(3490),r=n(72779),o=n(28659),l=n(6347),d=n(52871),c=n(28909),u=n(59834);let h;!function(e){e.None="None",e.Team="Team",e.User="User",e.BuiltInRole="builtInRole"}(h||(h={}));var p=n(45916);const g=e=>{let{title:t="Add Permission For",permissions:n,assignments:a,onAdd:r,onCancel:o}=e;const[g,m]=(0,s.useState)(h.None),[f,v]=(0,s.useState)(0),[b,x]=(0,s.useState)(0),[y,w]=(0,s.useState)(""),[j,S]=(0,s.useState)(""),C=(0,s.useMemo)((()=>{const e=[];return a.users&&e.push({value:h.User,label:"User"}),a.teams&&e.push({value:h.Team,label:"Team"}),a.builtInRoles&&e.push({value:h.BuiltInRole,label:"Role"}),e}),[a]);(0,s.useEffect)((()=>{n.length>0&&S(n[0])}),[n]);return(0,p.jsxs)("div",{className:"cta-form","aria-label":"Permissions slider",children:[(0,p.jsx)(l.P,{onClick:o}),(0,p.jsx)("h5",{children:t}),(0,p.jsx)(i.Form,{name:"addPermission",maxWidth:"none",onSubmit:()=>r({userId:b,teamId:f,builtInRole:y,permission:j,target:g}),children:()=>(0,p.jsxs)(i.HorizontalGroup,{children:[(0,p.jsx)(i.Select,{"aria-label":"Role to add new permission to",value:g,options:C,onChange:e=>m(e.value),disabled:0===C.length}),g===h.User&&(0,p.jsx)(c.f,{onSelected:e=>x(e.value||0),className:"width-20"}),g===h.Team&&(0,p.jsx)(d.c,{onSelected:e=>{var t;return v((null===(t=e.value)||void 0===t?void 0:t.id)||0)},className:"width-20"}),g===h.BuiltInRole&&(0,p.jsx)(i.Select,{"aria-label":"Built-in role picker",options:Object.values(u.B5).map((e=>({value:e,label:e}))),onChange:e=>w(e.value||""),width:40}),(0,p.jsx)(i.Select,{"aria-label":"Permission Level",width:25,value:n.find((e=>e===j)),options:n.map((e=>({label:e,value:e}))),onChange:e=>S(e.value||"")}),(0,p.jsx)(i.Button,{type:"submit",disabled:!(g===h.Team&&f>0||g===h.User&&b>0||h.BuiltInRole&&u.B5.hasOwnProperty(y)),children:"Save"})]})})]})};var m,f,v,b,x;const y=e=>{let{item:t,permissionLevels:n,canSet:a,onRemove:s,onChange:r}=e;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{style:{width:"1%"},children:w(t)}),(0,p.jsx)("td",{style:{width:"90%"},children:S(t)}),(0,p.jsx)("td",{children:t.isInherited&&(m||(m=(0,p.jsx)("em",{className:"muted no-wrap",children:"Inherited from folder"})))}),(0,p.jsx)("td",{children:(0,p.jsx)("div",{className:"gf-form",children:(0,p.jsx)(i.Select,{className:"width-20",disabled:!a||!t.isManaged,onChange:e=>r(t,e.value),value:n.find((e=>e===t.permission)),options:n.map((e=>({value:e,label:e})))})})}),(0,p.jsx)("td",{children:(0,p.jsx)(i.Tooltip,{content:C(t),children:f||(f=(0,p.jsx)(i.Icon,{name:"info-circle"}))})}),(0,p.jsx)("td",{children:t.isManaged?(0,p.jsx)(i.Button,{size:"sm",icon:"times",variant:"destructive",disabled:!a,onClick:()=>s(t),"aria-label":`Remove permission for ${j(t)}`}):(0,p.jsx)(i.Tooltip,{content:t.isInherited?"Inherited Permission":"Provisioned Permission",children:v||(v=(0,p.jsx)(i.Button,{size:"sm",icon:"lock"}))})})]})},w=e=>e.teamId?(0,p.jsx)("img",{className:"filter-table__avatar",src:e.teamAvatarUrl,alt:`Avatar for team ${e.teamId}`}):e.userId?(0,p.jsx)("img",{className:"filter-table__avatar",src:e.userAvatarUrl,alt:`Avatar for user ${e.userId}`}):b||(b=(0,p.jsx)(i.Icon,{size:"xl",name:"shield"})),j=e=>e.userId?e.userLogin:e.teamId?e.team:e.builtInRole,S=e=>e.userId?(0,p.jsxs)("span",{children:[e.userLogin," "]},"name"):e.teamId?(0,p.jsxs)("span",{children:[e.team," "]},"name"):e.builtInRole?(0,p.jsxs)("span",{children:[e.builtInRole," "]},"name"):x||(x=(0,p.jsx)("span",{},"name")),C=e=>`Actions: ${[...new Set(e.actions)].sort().join(" ")}`;var k;const T=e=>{let{title:t,items:n,compareKey:a,permissionLevels:i,canSet:r,onRemove:o,onChange:l}=e;const d=(0,s.useMemo)((()=>{const e={};for(let t of n){const n=t[a];e[n]?t.actions.length>e[n].actions.length&&(e[n]=t):e[n]=t}return Object.keys(e).map((t=>e[t]))}),[n,a]);return 0===d.length?null:(0,p.jsx)("div",{children:(0,p.jsxs)("table",{className:"filter-table gf-form-group",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{style:{width:"1%"}}),(0,p.jsx)("th",{children:t}),(0,p.jsx)("th",{style:{width:"1%"}}),k||(k=(0,p.jsx)("th",{children:"Permission"})),(0,p.jsx)("th",{style:{width:"1%"}}),(0,p.jsx)("th",{style:{width:"1%"}})]})}),(0,p.jsx)("tbody",{children:d.map(((e,t)=>(0,p.jsx)(y,{item:e,onRemove:o,onChange:l,canSet:r,permissionLevels:i},`${t}-${e.userId}`)))})]})})};var I;const O={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},N=e=>{let{title:t="Permissions",buttonLabel:n="Add a permission",resource:o,resourceId:l,canSetPermissions:d,addPermissionTitle:c}=e;const[u,m]=(0,s.useState)(!1),[f,v]=(0,s.useState)([]),[b,x]=(0,s.useState)(O),y=(0,s.useCallback)((()=>D(o,l).then((e=>v(e)))),[o,l]);(0,s.useEffect)((()=>{F(o).then((e=>(x(e),y())))}),[o,l,y]);const w=e=>{let t=null;e.target===h.User?t=P(o,l,e.userId,e.permission):e.target===h.Team?t=A(o,l,e.teamId,e.permission):e.target===h.BuiltInRole&&(t=M(o,l,e.builtInRole,e.permission)),null!==t&&t.then(y)},j=e=>{let t=null;e.userId?t=P(o,l,e.userId,""):e.teamId?t=A(o,l,e.teamId,""):e.builtInRole&&(t=M(o,l,e.builtInRole,"")),null!==t&&t.then(y)},S=(e,t)=>{e.permission!==t&&(e.userId?w({permission:t,userId:e.userId,target:h.User}):e.teamId?w({permission:t,teamId:e.teamId,target:h.Team}):e.builtInRole&&w({permission:t,builtInRole:e.builtInRole,target:h.BuiltInRole}))},C=(0,s.useMemo)((()=>(0,a.sortBy)(f.filter((e=>e.teamId)),["team","isManaged"])),[f]),k=(0,s.useMemo)((()=>(0,a.sortBy)(f.filter((e=>e.userId)),["userLogin","isManaged"])),[f]),N=(0,s.useMemo)((()=>(0,a.sortBy)(f.filter((e=>e.builtInRole)),["builtInRole","isManaged"])),[f]);return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"page-action-bar",children:[(0,p.jsx)("h3",{className:"page-sub-heading",children:t}),I||(I=(0,p.jsx)("div",{className:"page-action-bar__spacer"})),d&&(0,p.jsx)(i.Button,{variant:"primary",onClick:()=>m(!0),children:n},"add-permission")]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(r.s,{in:u,children:(0,p.jsx)(g,{title:c,onAdd:w,permissions:b.permissions,assignments:b.assignments,onCancel:()=>m(!1)})}),(0,p.jsx)(T,{title:"Role",items:N,compareKey:"builtInRole",permissionLevels:b.permissions,onChange:S,onRemove:j,canSet:d}),(0,p.jsx)(T,{title:"User",items:k,compareKey:"userLogin",permissionLevels:b.permissions,onChange:S,onRemove:j,canSet:d}),(0,p.jsx)(T,{title:"Team",items:C,compareKey:"team",permissionLevels:b.permissions,onChange:S,onRemove:j,canSet:d})]})]})},F=async e=>{try{return await(0,o.i)().get(`/api/access-control/${e}/description`)}catch(e){return console.error("failed to load resource description: ",e),O}},D=(e,t)=>(0,o.i)().get(`/api/access-control/${e}/${t}`),P=(e,t,n,a)=>R(e,t,"users",n,a),A=(e,t,n,a)=>R(e,t,"teams",n,a),M=(e,t,n,a)=>R(e,t,"builtInRoles",n,a),R=(e,t,n,a,s)=>(0,o.i)().post(`/api/access-control/${e}/${t}/${n}/${a}`,{permission:s})},72779:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});n(68404);var a=n(88917),s=n(45916);const i="200px",r={transition:"max-height 200ms ease-in-out",overflow:"hidden"},o=e=>{let{children:t,in:n,maxHeight:o=i,style:l=r}=e;const d={exited:{maxHeight:0},entering:{maxHeight:o},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return(0,s.jsx)(a.ZP,{in:n,timeout:200,children:e=>(0,s.jsx)("div",{style:Object.assign({},l,d[e]),children:t})})}},47496:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(68404),s=n(48063);const i=a.memo((e=>{let{pageNav:t,actions:n}=e;const{chrome:i}=(0,s.p)();return(0,a.useEffect)((()=>{i.update({pageNav:t,actions:n})})),null}));i.displayName="TopNavUpdate"},35845:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var a=n(36636),s=(n(68404),n(90923)),i=n(3490),r=n(45916);function o(e){let{leftActionsSeparator:t}=e;const n=(0,i.useStyles2)(l);return t?(0,r.jsx)("div",{className:n.leftActionsSeparator}):s.config.featureToggles.topnav?(0,r.jsx)("div",{className:n.line}):null}const l=e=>({leftActionsSeparator:(0,a.css)({display:"flex",flexGrow:1}),line:(0,a.css)({width:1,backgroundColor:e.colors.border.medium,height:24})})},70064:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var a=n(36636),s=(n(68404),n(43215)),i=n(3490),r=n(45916);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{}o(l,"LoginLogo",(e=>{let{className:t}=e;return(0,r.jsx)("img",{className:t,src:"public/img/grafana_icon.svg",alt:"Grafana"})})),o(l,"LoginBackground",(e=>{let{className:t,children:n}=e;const s=(0,i.useTheme2)(),o=a.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${s.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${i.styleMixins.mediaUp(s.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return(0,r.jsx)("div",{className:(0,a.cx)(o,t),children:n})})),o(l,"MenuLogo",(e=>{let{className:t}=e;return(0,r.jsx)("img",{className:t,src:"public/img/grafana_icon.svg",alt:"Grafana"})})),o(l,"LoginBoxBackground",(()=>{const e=(0,i.useTheme2)();return a.css`
    background: ${s.colorManipulator.alpha(e.colors.background.primary,.7)};
    background-size: cover;
  `})),o(l,"AppTitle","Grafana"),o(l,"LoginTitle","Welcome to Grafana"),o(l,"GetLoginSubTitle",(()=>null))},88959:(e,t,n)=>{"use strict";n.d(t,{x:()=>l});var a=n(36636),s=n(68404),i=n(3490),r=n(45916);const o=["icon","children","onClick"];const l=s.forwardRef(((e,t)=>{let{icon:n,children:a,onClick:s}=e,l=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,o);const c=(0,i.useStyles2)(d);return(0,r.jsxs)("button",Object.assign({},l,{className:c.action,onClick:s,children:[(0,r.jsx)(i.Icon,{name:n,size:"xl"}),a]}))}));l.displayName="CardButton";const d=e=>({action:a.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(1)};
      color: ${e.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `})},6347:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=e=>{let{onClick:t,"aria-label":n,style:a}=e;const r=(0,s.useStyles2)(o);return(0,i.jsx)(s.IconButton,{"aria-label":null!=n?n:"Close",className:r,name:"times",onClick:t,style:a})},o=e=>a.css`
    position: absolute;
    right: ${e.spacing(.5)};
    top: ${e.spacing(1)};
  `},28436:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a,s=n(36636),i=(n(68404),n(16695)),r=n(3490),o=n(45916);const l=s.css`
  text-align: center;
`,d=s.css`
  max-width: 700px;
  margin: 0 auto;
`,c=e=>{var t,n,c;let{title:u,buttonIcon:h,buttonLink:p,buttonTitle:g,buttonDisabled:m,onClick:f,proTip:v,proTipLink:b,proTipLinkTitle:x,proTipTarget:y,infoBox:w,infoBoxTitle:j}=e;const S=()=>(0,o.jsxs)(o.Fragment,{children:[v?(0,o.jsxs)("span",{children:[a||(a=(0,o.jsx)(r.Icon,{name:"rocket"})),(0,o.jsxs)(o.Fragment,{children:[" ProTip: ",v," "]}),b&&(t||(t=(0,o.jsx)("a",{href:b,target:y,className:"text-link",children:x})))]},"proTipFooter"):"",w?(0,o.jsxs)("div",{className:`grafana-info-box ${d}`,children:[j&&(n||(n=(0,o.jsx)("h5",{children:j}))),c||(c=(0,o.jsx)("div",{dangerouslySetInnerHTML:w}))]},"infoBoxHtml"):""]}),C=S()?"":s.css`
        margin-bottom: 20px;
      `,k=p?r.LinkButton:r.Button,T=(0,o.jsx)(k,{size:"lg",onClick:f,href:p,icon:h,className:C,"data-testid":i.wl.components.CallToActionCard.buttonV2(g),disabled:m,children:g});return(0,o.jsx)(r.CallToActionCard,{className:l,message:u,footer:S(),callToActionElement:T})}},63310:(e,t,n)=>{"use strict";n.d(t,{$_:()=>d,dP:()=>o});var a=n(68404),s=n(90923),i=n(3490),r=n(45916);let o=()=>[{text:"Documentation",icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer",target:"_blank"},{text:"Support",icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer",target:"_blank"},{text:"Community",icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer",target:"_blank"}],l=()=>{const{buildInfo:e,licenseInfo:t}=s.config,n=[],a=t.stateInfo?` (${t.stateInfo})`:"";return n.push({text:`${e.edition}${a}`,url:t.licenseUrl}),e.hideVersion||(n.push({text:`v${e.version} (${e.commit})`}),e.hasUpdate&&n.push({id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer",target:"_blank"})),n};const d=a.memo((()=>{const e=o().concat(l());return(0,r.jsx)("footer",{className:"footer",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("ul",{children:e.map((e=>(0,r.jsx)("li",{children:(0,r.jsxs)("a",{href:e.url,target:e.target,rel:"noopener",id:e.id,children:[e.icon&&(0,r.jsx)(i.Icon,{name:e.icon})," ",e.text]})},e.text)))})})})}));d.displayName="Footer"},23452:(e,t,n)=>{"use strict";n.d(t,{G:()=>d});n(68404);var a,s=n(16695),i=n(3490),r=n(26463),o=n(45653),l=n(45916);const d=e=>{let{onSubmit:t,onSkip:n}=e;return(0,l.jsx)(i.Form,{onSubmit:e=>{t(e.newPassword)},children:e=>{var t,d;let{errors:c,register:u,getValues:h}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Field,{label:"New password",invalid:!!c.newPassword,error:null==c||null===(t=c.newPassword)||void 0===t?void 0:t.message,children:(0,l.jsx)(o.Z,Object.assign({id:"new-password",autoFocus:!0,autoComplete:"new-password"},u("newPassword",{required:"New Password is required"})))}),(0,l.jsx)(i.Field,{label:"Confirm new password",invalid:!!c.confirmNew,error:null==c||null===(d=c.confirmNew)||void 0===d?void 0:d.message,children:(0,l.jsx)(o.Z,Object.assign({id:"confirm-new-password",autoComplete:"new-password"},u("confirmNew",{required:"Confirmed Password is required",validate:e=>e===h().newPassword||"Passwords must match!"})))}),(0,l.jsxs)(i.VerticalGroup,{children:[a||(a=(0,l.jsx)(i.Button,{type:"submit",className:r.F,children:"Submit"})),n&&(0,l.jsx)(i.Tooltip,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom",children:(0,l.jsx)(i.Button,{fill:"text",onClick:n,type:"button","aria-label":s.wl.pages.Login.skip,children:"Skip"})})]})]})}})}},53772:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});var a=n(68404),s=n(17421),i=n(45916);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends a.PureComponent{constructor(e){super(e),r(this,"onSaveToStore",(e=>{const{storageKey:t}=this.props;try{s.Z.setObject(t,e)}catch(e){console.error(e)}this.setState({value:e})})),r(this,"onDeleteFromStore",(()=>{const{storageKey:e,defaultValue:t}=this.props;try{s.Z.delete(e)}catch(e){console.log(e)}this.setState({value:t})}));const{storageKey:t,defaultValue:n}=e;this.state={value:s.Z.getObject(t,n)}}render(){const{children:e}=this.props,{value:t}=this.state;return(0,i.jsx)(i.Fragment,{children:e(t,this.onSaveToStore,this.onDeleteFromStore)})}}},62586:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(68404),s=n(43215),i=n(90923),r=n(5831),o=n(78837),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends a.PureComponent{constructor(e){super(e),d(this,"result",{}),d(this,"changePassword",(e=>{const t={newPassword:e,confirmNew:e,oldPassword:"admin"};if(this.props.resetCode){const t={code:this.props.resetCode,newPassword:e,confirmPassword:e};(0,i.getBackendSrv)().post("/api/user/password/reset",t).then((()=>{this.toGrafana()}))}else(0,i.getBackendSrv)().put("/api/user/password",t).then((()=>{this.toGrafana()})).catch((e=>console.error(e)))})),d(this,"login",(e=>{this.setState({isLoggingIn:!0}),(0,i.getBackendSrv)().post("/login",e).then((t=>{this.result=t,"admin"!==e.password||o.ZP.ldapEnabled||o.ZP.authProxyEnabled?this.toGrafana():this.changeView()})).catch((()=>{this.setState({isLoggingIn:!1})}))})),d(this,"changeView",(()=>{this.setState({isChangingPassword:!0})})),d(this,"toGrafana",(()=>{this.result.redirectUrl?""===o.ZP.appSubUrl||this.result.redirectUrl.startsWith(o.ZP.appSubUrl)?window.location.assign(this.result.redirectUrl):window.location.assign(o.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(o.ZP.appSubUrl+"/")})),this.state={isLoggingIn:!1,isChangingPassword:!1},o.ZP.loginError&&r.Z.emit(s.AppEvents.alertWarning,["Login Failed",o.ZP.loginError])}render(){const{children:e}=this.props,{isLoggingIn:t,isChangingPassword:n}=this.state,{login:a,toGrafana:s,changePassword:i}=this,{loginHint:r,passwordHint:d,disableLoginForm:c,ldapEnabled:u,authProxyEnabled:h,disableUserSignUp:p}=o.ZP;return(0,l.jsx)(l.Fragment,{children:e({isOauthEnabled:!!o.ZP.oauth&&Object.keys(o.ZP.oauth).length>0,loginHint:r,passwordHint:d,disableLoginForm:c,ldapEnabled:u,authProxyEnabled:h,disableUserSignUp:p,login:a,isLoggingIn:t,changePassword:i,skipPasswordChange:s,isChangingPassword:n})})}}const u=c},26463:(e,t,n)=>{"use strict";n.d(t,{F:()=>d,U:()=>c});var a=n(36636),s=(n(68404),n(16695)),i=n(3490),r=n(45653),o=n(45916);const l=a.css`
  width: 100%;
  padding-bottom: 16px;
`,d=a.css`
  justify-content: center;
  width: 100%;
`,c=e=>{let{children:t,onSubmit:n,isLoggingIn:a,passwordHint:c,loginHint:u}=e;return(0,o.jsx)("div",{className:l,children:(0,o.jsx)(i.Form,{onSubmit:n,validateOn:"onChange",children:e=>{var n,l;let{register:h,errors:p}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Field,{label:"Email or username",invalid:!!p.user,error:null===(n=p.user)||void 0===n?void 0:n.message,children:(0,o.jsx)(i.Input,Object.assign({},h("user",{required:"Email or username is required"}),{autoFocus:!0,autoCapitalize:"none",placeholder:u,"aria-label":s.wl.pages.Login.username}))}),(0,o.jsx)(i.Field,{label:"Password",invalid:!!p.password,error:null===(l=p.password)||void 0===l?void 0:l.message,children:(0,o.jsx)(r.Z,Object.assign({id:"current-password",autoComplete:"current-password",passwordHint:c},h("password",{required:"Password is required"})))}),(0,o.jsx)(i.Button,{type:"submit","aria-label":s.wl.pages.Login.submit,className:d,disabled:a,children:a?"Logging in...":"Log in"}),t]})}})})}},85040:(e,t,n)=>{"use strict";n.d(t,{$s:()=>c,dd:()=>u});var a,s=n(36636),i=n(68404),r=n(3490),o=n(70064),l=n(63310),d=n(45916);const c=e=>{let{children:t,enterAnimation:n=!0}=e;const a=(0,r.useStyles2)(p);return(0,d.jsx)("div",{className:(0,s.cx)(a.loginInnerBox,n&&a.enterAnimation),children:t})},u=e=>{let{children:t}=e;const n=(0,r.useStyles2)(p),c=o.c.GetLoginSubTitle(),[u,h]=(0,i.useState)(!1);return(0,i.useEffect)((()=>h(!0)),[]),(0,d.jsxs)(o.c.LoginBackground,{className:(0,s.cx)(n.container,u&&n.loginAnim),children:[(0,d.jsxs)("div",{className:(0,s.cx)(n.loginContent,o.c.LoginBoxBackground(),"login-content-box"),children:[(0,d.jsxs)("div",{className:n.loginLogoWrapper,children:[(0,d.jsx)(o.c.LoginLogo,{className:n.loginLogo}),(0,d.jsxs)("div",{className:n.titleWrapper,children:[(0,d.jsx)("h1",{className:n.mainTitle,children:o.c.LoginTitle}),c&&(0,d.jsx)("h3",{className:n.subTitle,children:o.c.GetLoginSubTitle()})]})]}),(0,d.jsx)("div",{className:n.loginOuterBox,children:t})]}),a||(a=(0,d.jsx)(l.$_,{}))]})},h=s.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,p=e=>({container:(0,s.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:s.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:s.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:s.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${r.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:s.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${e.spacing(3)};
    `,titleWrapper:s.css`
      text-align: center;
    `,mainTitle:s.css`
      font-size: 22px;

      @media ${r.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:s.css`
      font-size: ${e.typography.size.md};
      color: ${e.colors.text.secondary};
    `,loginContent:s.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${e.shape.borderRadius(4)};
      padding: ${e.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${r.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:s.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:s.css`
      padding: ${e.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:s.css`
      animation: ${h} ease-out 0.2s;
    `})},98356:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l});var a=n(82897),s=n(68404),i=n(3490),r=n(45916);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends s.PureComponent{constructor(){super(...arguments),o(this,"state",{text:"",inputCorrected:!1}),o(this,"inputRef",s.createRef()),o(this,"updateValue",(()=>{var e;let t;const n=null===(e=this.inputRef.current)||void 0===e?void 0:e.value;null!=n&&n.length&&(t=+n,isNaN(t))||(t!==this.props.value&&this.props.onChange(t),this.state.inputCorrected&&this.setState({inputCorrected:!1}))})),o(this,"updateValueDebounced",(0,a.debounce)(this.updateValue,500)),o(this,"onChange",(e=>{let t,n=!1;const a=this.props.min,s=this.props.max,i=e.currentTarget.valueAsNumber;Number.isNaN(i)||(null!=a&&i<a?(t=a.toString(),n=!0):null!=s&&i>s?(t=s.toString(),n=!0):t=e.currentTarget.value),this.setState({text:t||"",inputCorrected:n}),this.updateValueDebounced()})),o(this,"onKeyPress",(e=>{"Enter"===e.key&&this.updateValue()}))}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(e){if(this.props.value!==e.value){const e=isNaN(this.props.value)?"":`${this.props.value}`;e!==this.state.text&&this.setState({text:e})}}renderInput(){return(0,r.jsx)(i.Input,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:e}=this.state;if(e){let t="",{min:n,max:a}=this.props;return null==a?null!=n&&(t=`< ${n}`):t=null!=n?`${n} < > ${a}`:`> ${a}`,(0,r.jsx)(i.Field,{invalid:e,error:`Out of range ${t}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"},children:this.renderInput()})}return this.renderInput()}}},23604:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});var a=n(36636),s=(n(68404),n(3490)),i=n(93732),r=n(45916);const o=e=>{let{value:t,onChange:n}=e;const a=(0,s.useTheme2)(),o=(0,s.useStyles2)(l);return(0,r.jsx)(s.ColorPicker,{color:null!=t?t:"",onChange:n,enableNamedColors:!0,children:e=>{let{ref:n,showColorPicker:s,hideColorPicker:l}=e;return(0,r.jsx)("div",{className:o.spot,children:(0,r.jsx)("div",{className:o.colorPicker,children:(0,r.jsx)(i.b,{ref:n,onClick:s,onMouseLeave:l,color:t?a.visualization.getColorByName(t):a.components.input.borderColor})})})}})},l=e=>({spot:a.css`
      color: ${e.colors.text};
      background: ${e.components.input.background};
      padding: 3px;
      height: ${e.v1.spacing.formInputHeight}px;
      border: 1px solid ${e.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${e.components.input.borderHover};
      }
    `,colorPicker:a.css`
      padding: 0 ${e.spacing(1)};
    `,colorText:a.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:a.css`
      cursor: pointer;
      color: ${e.colors.text.secondary};
      &:hover {
        color: ${e.colors.text};
      }
    `})},26218:(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var a=n(68404),s=n(98356),i=n(45916);const r=e=>{let{value:t,onChange:n,item:r}=e;const{settings:o}=r,l=(0,a.useCallback)((e=>{n(null!=o&&o.integer&&void 0!==e?Math.floor(e):e)}),[n,null==o?void 0:o.integer]);return(0,i.jsx)(s.Y,{value:t,min:null==o?void 0:o.min,max:null==o?void 0:o.max,step:null==o?void 0:o.step,placeholder:null==o?void 0:o.placeholder,onChange:l})}},98878:(e,t,n)=>{"use strict";n.d(t,{u:()=>ne,l:()=>ae});var a=n(68404),s=n(43215),i=n(3490),r=n(25296),o=n(36636),l=n(82897),d=n(45916);const c=["key"];var u;function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=[{value:s.ThresholdsMode.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:s.ThresholdsMode.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class g extends a.PureComponent{constructor(e){super(e),h(this,"latestThresholdInputRef",void 0),h(this,"onAddThreshold",(()=>{const{steps:e}=this.state;let t=0;e.length>1&&(t=e[e.length-1].value+10);let n=i.colors.filter((t=>!e.some((e=>e.color===t))))[1];n||(n="#CCCCCC");const a={value:t,color:n,key:m++},r=[...e,a];(0,s.sortThresholds)(r),this.setState({steps:r},(()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()}))})),h(this,"onRemoveThreshold",(e=>{const{steps:t}=this.state;t.length&&e.key!==t[0].key&&this.setState({steps:t.filter((t=>t.key!==e.key))},this.onChange)})),h(this,"onChangeThresholdValue",((e,t)=>{const n=e.target.value.replace(/,/g,"."),a=parseFloat(n),i=isNaN(a)?"":a,r=this.state.steps.map((e=>(e.key===t.key&&(e=Object.assign({},e,{value:i})),e)));r.length&&(r[0].value=-1/0),(0,s.sortThresholds)(r),this.setState({steps:r})})),h(this,"onChangeThresholdColor",((e,t)=>{const{steps:n}=this.state,a=n.map((n=>(n.key===e.key&&(n=Object.assign({},n,{color:t})),n)));this.setState({steps:a},this.onChange)})),h(this,"onBlur",(()=>{const e=[...this.state.steps];(0,s.sortThresholds)(e),this.setState({steps:e},this.onChange)})),h(this,"onChange",(()=>{var e,t,n;this.props.onChange((e=this.props.thresholds,t=this.state.steps,{mode:null!==(n=e.mode)&&void 0!==n?n:s.ThresholdsMode.Absolute,steps:t.map((e=>function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,c)))}))})),h(this,"onModeChanged",(e=>{this.props.onChange(Object.assign({},this.props.thresholds,{mode:e}))}));const t=function(e){e&&0!==e.length||(e=[{value:-1/0,color:"green"}]);return e.filter(((e,t)=>(0,l.isNumber)(e.value)||0===t)).map((e=>({color:e.color,value:null===e.value?-1/0:e.value,key:m++})))}(e.thresholds.steps);t[0].value=-1/0,this.state={steps:t},this.latestThresholdInputRef=a.createRef()}renderInput(e,t,n){const a=this.props.thresholds.mode===s.ThresholdsMode.Percentage,r=`Threshold ${n+1}`;return isFinite(e.value)?(0,d.jsx)(i.Input,{type:"number",step:"0.0001",onChange:t=>this.onChangeThresholdValue(t,e),value:e.value,"aria-label":r,ref:0===n?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:(0,d.jsxs)("div",{className:t.inputPrefix,children:[(0,d.jsx)("div",{className:t.colorPicker,children:(0,d.jsx)(i.ColorPicker,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})}),a&&(0,d.jsx)("div",{className:t.percentIcon,children:"%"})]}),suffix:(0,d.jsx)(i.Icon,{className:t.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(e)})},a.toString()):(0,d.jsx)(i.Input,{type:"text",value:"Base","aria-label":r,disabled:!0,prefix:(0,d.jsx)("div",{className:t.colorPicker,children:(0,d.jsx)(i.ColorPicker,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})})})}render(){const{thresholds:e}=this.props,{steps:t}=this.state;return(0,d.jsx)(i.ThemeContext.Consumer,{children:n=>{const a=f(n.v1);return(0,d.jsxs)("div",{className:a.wrapper,children:[(0,d.jsx)(i.Button,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:a.addButton,fullWidth:!0,children:"Add threshold"}),(0,d.jsx)("div",{className:a.thresholds,children:t.slice(0).reverse().map(((e,t)=>(0,d.jsx)("div",{className:a.item,children:this.renderInput(e,a,t)},`${e.key}`)))}),(0,d.jsxs)("div",{children:[u||(u=(0,d.jsx)(i.Label,{description:"Percentage means thresholds relative to min & max",children:"Thresholds mode"})),(0,d.jsx)(i.RadioButtonGroup,{options:p,onChange:this.onModeChanged,value:e.mode})]})]})}})}}let m=100;const f=(0,i.stylesFactory)((e=>({wrapper:o.css`
      display: flex;
      flex-direction: column;
    `,thresholds:o.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${2*e.spacing.formSpacingBase}px;
    `,item:o.css`
      margin-bottom: ${e.spacing.sm};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:o.css`
      padding: 0 ${e.spacing.sm};
    `,addButton:o.css`
      margin-bottom: ${e.spacing.sm};
    `,percentIcon:o.css`
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
    `,inputPrefix:o.css`
      display: flex;
      align-items: center;
    `,trashIcon:o.css`
      color: ${e.colors.textWeak};
      cursor: pointer;

      &:hover {
        color: ${e.colors.text};
      }
    `})));class v extends a.PureComponent{constructor(e){super(e)}render(){const{onChange:e}=this.props;let t=this.props.value;return t||(t={mode:s.ThresholdsMode.Percentage,steps:[]}),(0,d.jsx)(g,{thresholds:t,onChange:e})}}var b,x=n(16386),y=n(10707),w=n(48435);function j(e){var t,n;let{mapping:r,index:o,onChange:l,onRemove:c,onDuplicate:u,showIconPicker:h}=e;const{key:p,result:g,id:m}=r,f=(0,i.useStyles2)(S),v=(0,a.useRef)(null),j=(0,a.useCallback)((e=>{const t=Object.assign({},r,{result:Object.assign({},r.result)});e(t),l(o,t)}),[r,o,l]);(0,a.useEffect)((()=>{v.current&&r.isNew&&(v.current.focus(),j((e=>{e.isNew=!1})))}),[r,v,j]);const C=e=>{j((t=>{t.result.color=e}))},k=()=>{j((e=>{e.result.color=void 0}))},T=e=>{j((t=>{t.result.icon=e}))},I=()=>{j((e=>{e.result.icon=void 0}))},O=e=>{j((t=>{t.key=e.currentTarget.value}))},N=e=>{j((t=>{t.result.text=e.currentTarget.value}))},F=e=>{j((t=>{t.from=parseFloat(e.currentTarget.value)}))},D=e=>{j((t=>{t.to=parseFloat(e.currentTarget.value)}))},P=e=>{j((t=>{t.pattern=e.currentTarget.value}))},A=e=>{j((t=>{t.specialMatch=e.value}))},M=[{label:"Null",value:s.SpecialValueMatch.Null,description:"Matches null and undefined values"},{label:"NaN",value:s.SpecialValueMatch.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:s.SpecialValueMatch.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:s.SpecialValueMatch.True,description:"Boolean true values"},{label:"False",value:s.SpecialValueMatch.False,description:"Boolean false values"},{label:"Empty",value:s.SpecialValueMatch.Empty,description:"Empty string"}];return(0,d.jsx)(w._l,{draggableId:m,index:o,children:e=>{var a,l,m,w;return(0,d.jsxs)("tr",Object.assign({className:f.dragRow,ref:e.innerRef},e.draggableProps,{children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",Object.assign({className:f.dragHandle},e.dragHandleProps,{children:b||(b=(0,d.jsx)(i.Icon,{name:"draggabledots",size:"lg"}))}))}),(0,d.jsx)("td",{className:f.typeColumn,children:r.type}),(0,d.jsxs)("td",{children:[r.type===s.MappingType.ValueToText&&(0,d.jsx)(i.Input,{ref:v,type:"text",value:null!=p?p:"",onChange:O,placeholder:"Exact value to match"}),r.type===s.MappingType.RangeToText&&(0,d.jsxs)("div",{className:f.rangeInputWrapper,children:[(0,d.jsx)(i.Input,{type:"number",value:null!==(a=r.from)&&void 0!==a?a:"",placeholder:"Range start",onChange:F,prefix:"From"}),(0,d.jsx)(i.Input,{type:"number",value:null!==(l=r.to)&&void 0!==l?l:"",placeholder:"Range end",onChange:D,prefix:"To"})]}),r.type===s.MappingType.RegexToText&&(0,d.jsx)(i.Input,{type:"text",value:null!==(m=r.pattern)&&void 0!==m?m:"",placeholder:"Regular expression",onChange:P}),r.type===s.MappingType.SpecialValue&&(0,d.jsx)(i.Select,{value:M.find((e=>e.value===r.specialMatch)),options:M,onChange:A})]}),(0,d.jsx)("td",{children:(0,d.jsx)(i.Input,{type:"text",value:null!==(w=g.text)&&void 0!==w?w:"",onChange:N,placeholder:"Optional display text"})}),(0,d.jsxs)("td",{className:f.textAlignCenter,children:[g.color&&(0,d.jsxs)(i.HorizontalGroup,{spacing:"sm",justify:"center",children:[(0,d.jsx)(i.ColorPicker,{color:g.color,onChange:C,enableNamedColors:!0}),t||(t=(0,d.jsx)(i.IconButton,{name:"times",onClick:k,tooltip:"Remove color",tooltipPlacement:"top"}))]}),!g.color&&(0,d.jsx)(i.ColorPicker,{color:"gray",onChange:C,enableNamedColors:!0,children:e=>(0,d.jsx)(i.Button,{variant:"primary",fill:"text",onClick:e.showColorPicker,ref:e.ref,size:"sm",children:"Set color"})})]}),h&&(0,d.jsx)("td",{className:f.textAlignCenter,children:(0,d.jsxs)(i.HorizontalGroup,{spacing:"sm",justify:"center",children:[(0,d.jsx)(y.E,{onChange:T,onClear:I,value:g.icon,size:x.zc.SMALL,folderName:x.QS.Icon,mediaType:x.DD.Icon,color:g.color}),g.icon&&(n||(n=(0,d.jsx)(i.IconButton,{name:"times",onClick:I,tooltip:"Remove icon",tooltipPlacement:"top"})))]})}),(0,d.jsx)("td",{className:f.textAlignCenter,children:(0,d.jsxs)(i.HorizontalGroup,{spacing:"sm",children:[(0,d.jsx)(i.IconButton,{name:"copy",onClick:()=>u(o),"data-testid":"duplicate-value-mapping"}),(0,d.jsx)(i.IconButton,{name:"trash-alt",onClick:()=>c(o),"data-testid":"remove-value-mapping"})]})})]}))}},m)}const S=e=>({dragRow:(0,o.css)({position:"relative"}),dragHandle:(0,o.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,o.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),regexInputWrapper:(0,o.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),typeColumn:(0,o.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,o.css)({textAlign:"center"})});function C(e){let{value:t,onChange:n,onClose:r,showIconPicker:o}=e;const l=(0,i.useStyles2)(k),[c,u]=(0,a.useState)([]);(0,a.useEffect)((()=>{u(N(t))}),[t]);const h=(e,t)=>{const n=[...c];n.splice(e,1,t),u(n)},p=e=>{const t=[...c];t.splice(e,1),u(t)},g=[{label:"Value",value:s.MappingType.ValueToText,description:"Match a specific text value"},{label:"Range",value:s.MappingType.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:s.MappingType.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:s.MappingType.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],m=e=>{u([...c,I({type:e.value,result:{},isNew:!0})])},f=e=>{const t=(n=c[e],Object.assign({},I(n),{id:T()}));var n;const a=[...c];a.splice(e,0,Object.assign({},t));for(let t=e;t<c.length;t++)a[t].result.index=t;u(a)};return(0,a.useEffect)((()=>{null!=t&&t.length||m({value:s.MappingType.ValueToText})}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:l.tableWrap,children:(0,d.jsxs)("table",{className:l.editTable,children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{width:"1%"}}),(0,d.jsx)("th",{style:{width:"40%",textAlign:"left"},colSpan:2,children:"Condition"}),(0,d.jsx)("th",{style:{textAlign:"left"},children:"Display text"}),(0,d.jsx)("th",{style:{width:"10%"},children:"Color"}),o&&(0,d.jsx)("th",{style:{width:"10%"},children:"Icon"}),(0,d.jsx)("th",{style:{width:"1%"}})]})}),(0,d.jsx)(w.Z5,{onDragEnd:e=>{if(!t||!e.destination)return;const n=[...c],a=n[e.source.index];n.splice(e.source.index,1),n.splice(e.destination.index,0,a),u(n)},children:(0,d.jsx)(w.bK,{droppableId:"sortable-field-mappings",direction:"vertical",children:e=>(0,d.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[c.map(((e,t)=>(0,d.jsx)(j,{mapping:e,index:t,onChange:h,onRemove:p,onDuplicate:f,showIconPicker:o},e.id))),e.placeholder]}))})})]})}),(0,d.jsxs)(i.Modal.ButtonRow,{leftItems:(0,d.jsx)(i.ValuePicker,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:g,onChange:m}),children:[(0,d.jsx)(i.Button,{variant:"secondary",fill:"outline",onClick:r,children:"Cancel"}),(0,d.jsx)(i.Button,{variant:"primary",onClick:()=>{n(O(c)),r()},children:"Update"})]})]})}const k=e=>({tableWrap:o.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,o.css)({width:"100%",marginBottom:e.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:e.colors.action.hover}," th, td":{padding:e.spacing(1)}})});function T(){return(0,l.uniqueId)("mapping-")}function I(e){return Object.assign({type:s.MappingType.ValueToText,result:{},id:T()},e)}function O(e){const t=[],n={type:s.MappingType.ValueToText,options:{}};return e.forEach(((e,a)=>{const i=Object.assign({},e.result,{index:a});switch(i.text&&0!==i.text.trim().length||(i.text=void 0),e.type){case s.MappingType.ValueToText:null!=e.key&&(n.options[e.key]=i);break;case s.MappingType.RangeToText:null!=e.from&&null!=e.to&&t.push({type:e.type,options:{from:e.from,to:e.to,result:i}});break;case s.MappingType.RegexToText:null!=e.pattern&&t.push({type:e.type,options:{pattern:e.pattern,result:i}});break;case s.MappingType.SpecialValue:t.push({type:e.type,options:{match:e.specialMatch,result:i}})}})),Object.keys(n.options).length>0&&t.unshift(n),t}function N(e){var t,n,a;const i=[];if(e)for(const r of e)switch(r.type){case s.MappingType.ValueToText:for(const e of Object.keys(r.options))i.push(I({type:r.type,result:r.options[e],key:e}));break;case s.MappingType.RangeToText:i.push(I({type:r.type,result:r.options.result,from:null!==(t=r.options.from)&&void 0!==t?t:0,to:null!==(n=r.options.to)&&void 0!==n?n:0}));break;case s.MappingType.RegexToText:i.push(I({type:r.type,result:r.options.result,pattern:r.options.pattern}));break;case s.MappingType.SpecialValue:i.push(I({type:r.type,result:r.options.result,specialMatch:null!==(a=r.options.match)&&void 0!==a?a:s.SpecialValueMatch.Null}))}return i.sort(((e,t)=>{var n,a;return(null!==(n=e.result.index)&&void 0!==n?n:0)>(null!==(a=t.result.index)&&void 0!==a?a:0)?1:-1})),i}var F,D,P;const A=a.memo((e=>{var t;const{value:n,onChange:r,item:o}=e,l=(0,i.useStyles2)(M),c=null===(t=o.settings)||void 0===t?void 0:t.icon,[u,h]=(0,a.useState)(!1),p=(0,a.useCallback)((()=>{h(!1)}),[h]),g=(0,a.useMemo)((()=>N(n)),[n]),m=(0,a.useCallback)(((e,t)=>{g[t].result.color=e,r(O(g))}),[g,r]),f=(0,a.useCallback)(((e,t)=>{g[t].result.icon=e,r(O(g))}),[g,r]);return(0,d.jsxs)(i.VerticalGroup,{children:[(0,d.jsx)("table",{className:l.compactTable,children:(0,d.jsx)("tbody",{children:g.map(((e,t)=>(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{children:[e.type===s.MappingType.ValueToText&&e.key,e.type===s.MappingType.RangeToText&&(0,d.jsxs)("span",{children:["[",e.from," - ",e.to,"]"]}),e.type===s.MappingType.RegexToText&&e.pattern,e.type===s.MappingType.SpecialValue&&e.specialMatch]}),F||(F=(0,d.jsx)("td",{children:(0,d.jsx)(i.Icon,{name:"arrow-right"})})),(0,d.jsx)("td",{children:e.result.text}),e.result.color&&(0,d.jsx)("td",{children:(0,d.jsx)(i.ColorPicker,{color:e.result.color,onChange:e=>m(e,t),enableNamedColors:!0})}),c&&e.result.icon&&(0,d.jsx)("td",{"data-testid":"iconPicker",children:(0,d.jsx)(y.E,{onChange:e=>f(e,t),value:e.result.icon,size:x.zc.SMALL,folderName:x.QS.Icon,mediaType:x.DD.Icon,color:e.result.color})})]},t.toString())))})}),(0,d.jsxs)(i.Button,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>h(!0),children:[g.length>0&&(D||(D=(0,d.jsx)("span",{children:"Edit value mappings"}))),0===g.length&&(P||(P=(0,d.jsx)("span",{children:"Add value mappings"})))]}),(0,d.jsx)(i.Modal,{isOpen:u,title:"Value mappings",onDismiss:p,className:l.modal,closeOnBackdropClick:!1,children:(0,d.jsx)(C,{value:n,onChange:r,onClose:p,showIconPicker:c})})]})}));A.displayName="ValueMappingsEditor";const M=e=>({modal:(0,o.css)({width:"980px"}),compactTable:(0,o.css)({width:"100%","tbody td":{padding:e.spacing(.5)}})});var R=n(49248);const $=e=>{var t;let{value:n,onChange:s,item:i}=e;const{placeholder:r,isClearable:o}=null!==(t=null==i?void 0:i.settings)&&void 0!==t?t:{},l=(0,a.useCallback)((e=>{var t;s(null==e||null===(t=e.value)||void 0===t?void 0:t.uid)}),[s]);return(0,d.jsx)(R.o,{isClearable:o,defaultOptions:!0,onChange:l,placeholder:r,value:n})};var L=n(23604);const E=e=>{var t,n,a;let{value:r,onChange:o,item:l,id:c}=e;const u=(0,i.useTheme2)(),h=(0,i.useStyles2)(B),p=(0,s.getFieldColorMode)(null==r?void 0:r.mode),g=(null!==(t=l.settings)&&void 0!==t&&t.byValueSupport?s.fieldColorModeRegistry.list():s.fieldColorModeRegistry.list().filter((e=>!e.isByValue))).map((e=>{var t;let n=e.isByValue?" (by value)":"";return{value:e.id,label:`${e.name}${n}`,description:e.description,isContinuous:e.isContinuous,isByValue:e.isByValue,component:()=>t||(t=(0,d.jsx)(V,{mode:e,theme:u}))}})),m=e=>{o(Object.assign({},r,{mode:e.value}))},f=e=>{o(Object.assign({},r,{mode:b,fixedColor:e}))},v=e=>{o(Object.assign({},r,{mode:b,seriesBy:e}))},b=null!==(n=null==r?void 0:r.mode)&&void 0!==n?n:s.FieldColorModeId.Thresholds;if(b===s.FieldColorModeId.Fixed)return(0,d.jsxs)("div",{className:h.group,children:[(0,d.jsx)(i.Select,{minMenuHeight:200,options:g,value:b,onChange:m,className:h.select,inputId:c}),(0,d.jsx)(L.B,{value:null==r?void 0:r.fixedColor,onChange:f})]});if(null!==(a=l.settings)&&void 0!==a&&a.bySeriesSupport&&p.isByValue){var x;const e=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{marginBottom:u.spacing(2)},children:(0,d.jsx)(i.Select,{minMenuHeight:200,options:g,value:b,onChange:m,inputId:c})}),(0,d.jsx)(i.Field,{label:"Color series by",children:(0,d.jsx)(i.RadioButtonGroup,{value:null!==(x=null==r?void 0:r.seriesBy)&&void 0!==x?x:"last",options:e,onChange:v})})]})}return(0,d.jsx)(i.Select,{minMenuHeight:200,options:g,value:b,onChange:m,inputId:c})},V=e=>{let{mode:t,theme:n}=e;if(!t.getColors)return null;const a=t.getColors(n).map(n.visualization.getColorByName),s={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(t.isContinuous)s.background=`linear-gradient(90deg, ${a.join(",")})`;else{let e="",t="";for(let n=0;n<a.length;n++){const s=a[n];if(""===e)e=`linear-gradient(90deg, ${s} 0%`;else{const i=100*(n/(a.length-1));e+=`, ${t} ${i}%, ${s} ${i}%`}t=s}s.background=e}return(0,d.jsx)("div",{style:s})},B=e=>({group:o.css`
      display: flex;
    `,select:o.css`
      margin-right: 8px;
      flex-grow: 1;
    `}),z=e=>{let{value:t,onChange:n,context:a}=e;return(0,d.jsx)(i.DataLinksInlineEditor,{links:t,onChange:n,data:a.data,getSuggestions:()=>a.getSuggestions?a.getSuggestions(s.VariableSuggestionsScope.Values):[]})};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class U extends a.PureComponent{constructor(){super(...arguments),_(this,"state",{isLoading:!0,options:[]}),_(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:n}=t;let a=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=n&&n.getOptions&&(a=await n.getOptions(this.props.context)),this.state.options!==a&&this.setState({isLoading:!1,options:a})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,n;const a=null===(t=e.item)||void 0===t?void 0:t.settings,s=null===(n=this.props.item)||void 0===n?void 0:n.settings;if(a!==s)this.updateOptions();else if(null!=s&&s.getOptions){var i,r;(null===(i=e.context)||void 0===i?void 0:i.data)!==(null===(r=this.props.context)||void 0===r?void 0:r.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:n,onChange:a,item:s}=this.props,{settings:r}=s;return(0,d.jsx)(i.MultiSelect,{isLoading:t,value:n,defaultValue:n,allowCustomValue:null==r?void 0:r.allowCustomValue,onChange:e=>{a(e.map((e=>e.value)).flatMap((e=>void 0!==e?[e]:[])))},options:e})}}var H=n(26218);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q extends a.PureComponent{constructor(){super(...arguments),W(this,"state",{isLoading:!0,options:[]}),W(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:n}=t;let a=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=n&&n.getOptions&&(a=await n.getOptions(this.props.context)),this.state.options!==a&&this.setState({isLoading:!1,options:a})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,n;const a=null===(t=e.item)||void 0===t?void 0:t.settings,s=null===(n=this.props.item)||void 0===n?void 0:n.settings;if(a!==s)this.updateOptions();else if(null!=s&&s.getOptions){var i,r;(null===(i=e.context)||void 0===i?void 0:i.data)!==(null===(r=this.props.context)||void 0===r?void 0:r.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:n,onChange:a,item:s}=this.props,{settings:r}=s;let o=e.find((e=>e.value===n));return!o&&n&&(o={label:`${n}`,value:n}),(0,d.jsx)(i.Select,{isLoading:t,value:o,defaultValue:n,allowCustomValue:null==r?void 0:r.allowCustomValue,isClearable:null==r?void 0:r.isClearable,onChange:e=>a(null==e?void 0:e.value),options:e})}}var Z=n(78132);const G=e=>{var t,n;let{value:a,onChange:s,item:r,id:o}=e;return(0,d.jsx)(i.StatsPicker,{stats:a,onChange:s,allowMultiple:!(null===(t=r.settings)||void 0===t||!t.allowMultiple),defaultStat:null===(n=r.settings)||void 0===n?void 0:n.defaultStat,inputId:o})};var K,Q=n(39041);function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Y extends a.PureComponent{constructor(){super(...arguments),J(this,"state",{showAdd:!1}),J(this,"onRemoveString",(e=>{const{value:t,onChange:n}=this.props,a=[...t];a.splice(e,1),n(a)})),J(this,"onValueChange",((e,t)=>{const n=e;if(e.hasOwnProperty("key")&&"Enter"!==n.key)return;const{value:a,onChange:s}=this.props,i=n.currentTarget.value.trim();if(t<0)return i&&(n.currentTarget.value="",s([...a,i])),void this.setState({showAdd:!1});if(!i)return this.onRemoveString(t);const r=[...a];r[t]=i,s(r)}))}render(){var e;const{value:t,item:n}=this.props,{showAdd:a}=this.state,s=X((0,i.getTheme)()),r=(null===(e=n.settings)||void 0===e?void 0:e.placeholder)||"Add text";return(0,d.jsxs)("div",{children:[t.map(((e,t)=>(0,d.jsx)(i.Input,{className:s.textInput,defaultValue:e||"",onBlur:e=>this.onValueChange(e,t),onKeyDown:e=>this.onValueChange(e,t),suffix:(0,d.jsx)(i.Icon,{className:s.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(t)})},`${t}/${e}`))),a?(0,d.jsx)(i.Input,{autoFocus:!0,className:s.textInput,placeholder:r,defaultValue:"",onBlur:e=>this.onValueChange(e,-1),onKeyDown:e=>this.onValueChange(e,-1),suffix:K||(K=(0,d.jsx)(i.Icon,{name:"plus-circle"}))}):(0,d.jsx)(i.Button,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0}),children:r})]})}}const X=(0,i.stylesFactory)((e=>({textInput:o.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${e.colors.formInputBorderHover};
      }
    `,trashIcon:o.css`
      color: ${e.colors.textWeak};
      cursor: pointer;

      &:hover {
        color: ${e.colors.text};
      }
    `})));function ee(e){var t;let{value:n,onChange:a,item:s}=e;const r=(0,i.useStyles2)(te);return null!=s&&null!==(t=s.settings)&&void 0!==t&&t.isClearable&&null!=n?(0,d.jsxs)("div",{className:r.wrapper,children:[(0,d.jsx)("span",{className:r.first,children:(0,d.jsx)(i.UnitPicker,{value:n,onChange:a})}),(0,d.jsx)(i.IconButton,{ariaLabel:"clear unit selection",name:"times",onClick:()=>a(void 0)})]}):(0,d.jsx)(i.UnitPicker,{value:n,onChange:a})}const te=e=>({wrapper:o.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:o.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),ne=()=>{const e={id:"number",name:"Number",description:"Allows numeric values input",editor:H.w},t={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Z.p},n={id:"text",name:"Text",description:"Allows string values input",editor:Q.A},a={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:U},s={id:"color",name:"Color",description:"Allows color selection",editor:e=>(0,d.jsx)(L.B,{value:e.value,onChange:e.onChange})},o={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:E};return[n,e,t,{id:"boolean",name:"Boolean",description:"Allows boolean values input",editor:e=>(0,d.jsx)(i.Switch,Object.assign({},e,{onChange:t=>e.onChange(t.currentTarget.checked)}))},{id:"radio",name:"Radio",description:"Allows option selection",editor(e){var t;return(0,d.jsx)(i.RadioButtonGroup,Object.assign({},e,{options:null===(t=e.item.settings)||void 0===t?void 0:t.options}))}},{id:"select",name:"Select",description:"Allows option selection",editor:q},{id:"unit",name:"Unit",description:"Allows unit input",editor:ee},{id:"links",name:"Links",description:"Allows defining data links",editor:z},{id:"stats-picker",name:"Stats Picker",editor:G,description:""},{id:"strings",name:"String array",description:"An array of strings",editor:Y},{id:"timezone",name:"Time zone",description:"Time zone selection",editor:i.TimeZonePicker},o,s,a,{id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:r.b},{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:$},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:A},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:v}]},ae=()=>{const e=["Standard options"],t={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:s.standardEditorsRegistry.get("text").editor,override:s.standardEditorsRegistry.get("text").editor,process:s.displayNameOverrideProcessor,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:e},n={id:"unit",path:"unit",name:"Unit",description:"",editor:s.standardEditorsRegistry.get("unit").editor,override:s.standardEditorsRegistry.get("unit").editor,process:s.stringOverrideProcessor,settings:{placeholder:"none"},shouldApply:()=>!0,category:e},a={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:s.standardEditorsRegistry.get("number").editor,override:s.standardEditorsRegistry.get("number").editor,process:s.numberOverrideProcessor,settings:{placeholder:"auto"},shouldApply:e=>e.type===s.FieldType.number,category:e},i={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:s.standardEditorsRegistry.get("number").editor,override:s.standardEditorsRegistry.get("number").editor,process:s.numberOverrideProcessor,settings:{placeholder:"auto"},shouldApply:e=>e.type===s.FieldType.number,category:e},r={id:"decimals",path:"decimals",name:"Decimals",editor:s.standardEditorsRegistry.get("number").editor,override:s.standardEditorsRegistry.get("number").editor,process:s.numberOverrideProcessor,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:e=>e.type===s.FieldType.number,category:e},o={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:s.standardEditorsRegistry.get("text").editor,override:s.standardEditorsRegistry.get("text").editor,process:s.stringOverrideProcessor,settings:{placeholder:"-"},shouldApply:()=>!0,category:e},l={id:"links",path:"links",name:"Data links",editor:s.standardEditorsRegistry.get("links").editor,override:s.standardEditorsRegistry.get("links").editor,process:s.dataLinksOverrideProcessor,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:e=>e?e.length:0};return[n,a,i,r,t,{id:"color",path:"color",name:"Color scheme",editor:s.standardEditorsRegistry.get("fieldColor").editor,override:s.standardEditorsRegistry.get("fieldColor").editor,process:s.identityOverrideProcessor,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:e},o,l,{id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:s.standardEditorsRegistry.get("mappings").editor,override:s.standardEditorsRegistry.get("mappings").editor,process:s.valueMappingsOverrideProcessor,settings:{},defaultValue:[],shouldApply:e=>e.type!==s.FieldType.time,category:["Value mappings"],getItemsCount:e=>e?e.length:0},{id:"thresholds",path:"thresholds",name:"Thresholds",editor:s.standardEditorsRegistry.get("thresholds").editor,override:s.standardEditorsRegistry.get("thresholds").editor,process:s.thresholdsOverrideProcessor,settings:{},defaultValue:{mode:s.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:e=>e?e.steps.length:0}]}},78132:(e,t,n)=>{"use strict";n.d(t,{p:()=>u});var a=n(36636),s=n(93214),i=n(78890),r=n(68404),o=n(3490),l=n(65303),d=n(98356),c=n(45916);const u=e=>{let{value:t,onChange:n,item:u}=e;const p=(0,r.useRef)(null),{settings:g}=u,m=(null==g?void 0:g.min)||0,f=(null==g?void 0:g.max)||100,v=null==g?void 0:g.step,b=(null==g?void 0:g.marks)||{[m]:m,[f]:f},x=null==g?void 0:g.included,y=null==g?void 0:g.ariaLabelForHandle,w=!0,j=(0,o.useTheme2)(),S=i.ZP,[C,k]=(0,r.useState)(null!=t?t:m),[T,I]=(0,r.useState)(75);(0,r.useEffect)((()=>{null!=t&&t!==C&&k(t)}),[t,C]),(0,r.useEffect)((()=>{const e=getComputedStyle(p.current),t=e.getPropertyValue("font-weight")||"normal",n=e.getPropertyValue("font-size")||"16px",a=e.getPropertyValue("font-family")||"Arial",s=Math.max((f+(v||0)).toString().length,(f-(v||0)).toString().length)+4,i=function(e,t){const n=document.createElement("canvas").getContext("2d");if(n){n.font=t;return n.measureText(e).width}return null}("0".repeat(s),`${t} ${n} ${a}`);i&&I(i+16)}),[f,v]);const O=(0,r.useCallback)((e=>{k(e),n&&n(e)}),[k,n]),N=(0,r.useCallback)((e=>{let t=e;!Number.isNaN(t)&&t||(t=0),k(t),n&&n(t)}),[n]),F=(0,l.W)(j,w,Boolean(b)),D=h(j,T),P=[];return(0,c.jsxs)("div",{className:(0,a.cx)(F.container,F.slider),children:[(0,c.jsx)(s.xB,{styles:F.slider}),(0,c.jsxs)("label",{className:(0,a.cx)(F.sliderInput,...P),children:[(0,c.jsx)(S,{min:m,max:f,step:v,defaultValue:t,value:C,onChange:O,vertical:!1,reverse:!1,ariaLabelForHandle:y,marks:b,included:x}),(0,c.jsx)("span",{className:D.numberInputWrapper,ref:p,children:(0,c.jsx)(d.Y,{value:C,onChange:N,max:f,min:m,step:v})})]})]})};const h=(e,t)=>({numberInputWrapper:a.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${t}px;
      min-width: ${t}px;
      overflow: visible;
      width: 100%;
    `})},39041:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(68404),s=n(3490),i=n(45916);const r=e=>{var t,n,r,o;let{value:l,onChange:d,item:c,suffix:u}=e;const h=null!==(t=c.settings)&&void 0!==t&&t.useTextarea?s.TextArea:s.Input,p=(0,a.useCallback)((e=>{let t=null!=l?l:"";if(e.hasOwnProperty("key")){var n;const a=e;"Enter"!==a.key||null!==(n=c.settings)&&void 0!==n&&n.useTextarea||(t=a.currentTarget.value.trim())}else{t=e.currentTarget.value.trim()}t!==l&&d(""===t?void 0:t)}),[l,null===(n=c.settings)||void 0===n?void 0:n.useTextarea,d]);return(0,i.jsx)(h,{placeholder:null===(r=c.settings)||void 0===r?void 0:r.placeholder,defaultValue:l||"",rows:(null===(o=c.settings)||void 0===o?void 0:o.useTextarea)&&c.settings.rows||5,onBlur:p,onKeyDown:p,suffix:u})}},69371:(e,t,n)=>{"use strict";n.d(t,{T:()=>M});var a=n(36636),s=n(68404),i=n(90923),r=n(3490),o=n(63310),l=n(11832),d=n(48063),c=n(52373),u=n(18745),h=n(58565),p=n(8674),g=n(56340);function m(e,t){return t||(e&&g.h?(0,u.useSelector)((0,h.P1)(f,(t=>(0,p.h)(t,null!=e?e:"home")))):void 0)}function f(e){return e.navIndex}var v=n(70064);function b(e,t){(0,s.useEffect)((()=>{const n=[];if(t){if(t.children){const e=t.children.find((e=>e.active));e&&n.push(e.text)}n.push(t.text)}e&&(e.node!==e.main&&n.push(e.node.text),n.push(e.main.text)),n.push(v.c.AppTitle),document.title=n.join(" - ")}),[e,t])}var x,y=n(22584),w=n(45916);function j(e){let{navItem:t,subTitle:n}=e;const a=(0,r.useStyles2)(S),s=null!=n?n:t.subTitle;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("h1",{className:a.pageTitle,children:[t.img&&(0,w.jsx)("img",{className:a.pageImg,src:t.img,alt:`logo for ${t.text}`}),t.text]}),s&&(0,w.jsx)("div",{className:a.pageSubTitle,children:s})]})}const S=e=>({pageTitle:(0,a.css)({display:"flex",marginBottom:e.spacing(3)}),pageSubTitle:(0,a.css)({marginBottom:e.spacing(2),position:"relative",top:e.spacing(-1),color:e.colors.text.secondary}),pageImg:(0,a.css)({width:"32px",height:"32px",marginRight:e.spacing(2)})});function C(e){let{navItem:t}=e;const n=(0,r.useStyles2)(k);return(0,w.jsx)("div",{className:n.tabsWrapper,children:(0,w.jsx)(r.TabsBar,{children:t.children.map(((e,t)=>!e.hideFromTabs&&(0,w.jsx)(r.Tab,{label:e.text,active:e.active,icon:e.icon,href:e.url,suffix:e.tabSuffix},`${e.url}-${t}`)))})})}const k=e=>({tabsWrapper:(0,a.css)({paddingBottom:e.spacing(3)})});function T(e){const t=(0,r.useStyles2)(I),n=e.model.main,a=e.model.main.children.filter((e=>!e.hideFromTabs&&!e.children)),s=e.model.main.children.filter((e=>e.children&&e.children.length));return(0,w.jsxs)("nav",{className:t.nav,children:[(0,w.jsxs)("h2",{className:t.sectionName,children:[n.icon&&(0,w.jsx)(r.Icon,{name:n.icon,size:"lg"}),n.img&&(0,w.jsx)("img",{className:t.sectionImg,src:n.img,alt:`logo of ${n.text}`}),e.model.main.text]}),(0,w.jsxs)("div",{className:t.items,children:[a.map(((e,t)=>!e.hideFromTabs&&!e.children&&(0,w.jsx)(r.VerticalTab,{label:e.text,active:e.active,href:e.url},`${e.url}-${t}`))),s.map((e=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:t.subSection,children:e.text}),e.children.map(((e,t)=>!e.hideFromTabs&&!e.children&&(0,w.jsx)(r.VerticalTab,{label:e.text,active:e.active,href:e.url},`${e.url}-${t}`)))]})))]})]})}const I=e=>({nav:(0,a.css)({display:"flex",flexDirection:"column",background:e.colors.background.canvas,padding:e.spacing(3,2),flexShrink:0,[e.breakpoints.up("md")]:{width:"250px"}}),sectionName:(0,a.css)({display:"flex",alignItems:"center",gap:e.spacing(1),padding:e.spacing(.5,0,3,.25),fontSize:e.typography.h4.fontSize,margin:0}),items:(0,a.css)({}),sectionImg:(0,a.css)({height:48}),subSection:(0,a.css)({padding:e.spacing(3,0,.5,1),fontWeight:500})});var O;const N=e=>{let{navId:t,navModel:n,pageNav:i,subTitle:l,children:u,className:h,layout:p=c.Q.Default,toolbar:g,scrollTop:f,scrollRef:v}=e;const x=(0,r.useStyles2)(F),y=m(t,n),{chrome:S}=(0,d.p)();b(y,i);const k=null!=i?i:null==y?void 0:y.node;return(0,s.useEffect)((()=>{y&&S.update(Object.assign({sectionNav:y.node},i&&{pageNav:i}))}),[y,i,S]),(0,w.jsxs)("div",{className:(0,a.cx)(x.wrapper,h),children:[p===c.Q.Default&&(0,w.jsxs)("div",{className:x.panes,children:[y&&y.main.children&&(0,w.jsx)(T,{model:y}),(0,w.jsx)("div",{className:x.pageContent,children:(0,w.jsxs)(r.CustomScrollbar,{autoHeightMin:"100%",scrollTop:f,scrollRefCallback:v,children:[(0,w.jsxs)("div",{className:x.pageInner,children:[k&&(0,w.jsx)(j,{navItem:k,subTitle:l}),i&&i.children&&(0,w.jsx)(C,{navItem:i}),u]}),O||(O=(0,w.jsx)(o.$_,{}))]})})]}),p===c.Q.Dashboard&&(0,w.jsx)(r.CustomScrollbar,{autoHeightMin:"100%",scrollTop:f,scrollRefCallback:v,children:(0,w.jsxs)("div",{className:x.dashboardContent,children:[g,u]})})]})};N.Header=j,N.Contents=e=>{let{isLoading:t,children:n}=e;return(0,w.jsx)(w.Fragment,{children:t?x||(x=(0,w.jsx)(y.Z,{})):n})},N.OldNavOnly=()=>null;const F=e=>{const t=e.isDark?"0 0.6px 1.5px -1px rgb(0 0 0),0 2px 4px -1px rgb(0 0 0 / 40%),0 5px 10px -1px rgb(0 0 0 / 23%)":"0 0.6px 1.5px -1px rgb(0 0 0 / 8%),0 2px 4px rgb(0 0 0 / 6%),0 5px 10px -1px rgb(0 0 0 / 5%)";return{wrapper:a.css`
      height: 100%;
      display: flex;
      flex: 1 1 0;
      flex-direction: column;
      min-height: 0;
    `,panes:(0,a.css)({display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}}),pageContent:(0,a.css)({flexGrow:1}),pageInner:(0,a.css)({padding:e.spacing(3),boxShadow:t,background:e.colors.background.primary,margin:e.spacing(2,2,2,1),display:"flex",flexDirection:"column",flexGrow:1}),dashboardContent:(0,a.css)({display:"flex",flexDirection:"column",padding:e.spacing(2),flexBasis:"100%",flexGrow:1})}};var D;var P;const A=e=>{let{navId:t,navModel:n,pageNav:s,children:i,className:d,toolbar:u,scrollRef:h,scrollTop:p,layout:g=c.Q.Default}=e;const f=(0,r.useStyles2)(R),v=m(t,n);b(v,s);const x=function(e,t){if(null!=t&&t.children&&t.children.length>0)return t;return null==e?void 0:e.main}(v,s);return(0,w.jsxs)("div",{className:(0,a.cx)(f.wrapper,d),children:[g===c.Q.Default&&(0,w.jsx)(r.CustomScrollbar,{autoHeightMin:"100%",scrollTop:p,scrollRefCallback:h,children:(0,w.jsxs)("div",{className:"page-scrollbar-content",children:[x&&(0,w.jsx)(l.m,{navItem:x}),i,P||(P=(0,w.jsx)(o.$_,{}))]})}),g===c.Q.Dashboard&&(0,w.jsxs)(w.Fragment,{children:[u,(0,w.jsx)("div",{className:f.scrollWrapper,children:(0,w.jsx)(r.CustomScrollbar,{autoHeightMin:"100%",scrollTop:p,scrollRefCallback:h,children:(0,w.jsx)("div",{className:(0,a.cx)(f.content,!u&&f.contentWithoutToolbar),children:i})})})]})]})};A.Header=l.m,A.Contents=e=>{let{isLoading:t,children:n,className:s}=e;return(0,w.jsx)("div",{className:(0,a.cx)("page-container","page-body",s),children:t?D||(D=(0,w.jsx)(y.Z,{})):n})},A.OldNavOnly=function(e){let{children:t}=e;return(0,w.jsx)(w.Fragment,{children:t})};const M=i.config.featureToggles.topnav?N:A,R=e=>({wrapper:(0,a.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,a.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,a.css)({display:"flex",flexDirection:"column",padding:e.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,a.css)({padding:e.spacing(2)})})},52373:(e,t,n)=>{"use strict";let a;n.d(t,{Q:()=>a}),function(e){e[e.Default=0]="Default",e[e.Dashboard=1]="Dashboard"}(a||(a={}))},11832:(e,t,n)=>{"use strict";n.d(t,{m:()=>c});var a=n(36636),s=(n(68404),n(3490)),i=n(38438),r=n(17963),o=n(45916);const l=e=>{let{children:t,customCss:n}=e;if(!t||0===t.length)return null;const a=t.find((e=>!0===e.active));return(0,o.jsx)("div",{className:`gf-form-select-wrapper width-20 ${n}`,children:(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsx)("div",{className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",children:null==a?void 0:a.text}),(0,o.jsx)("ul",{className:"dropdown-menu dropdown-menu--menu",children:t.map((e=>e.hideFromTabs?null:(0,o.jsx)(i.u,{iconClassName:e.icon,text:e.text,href:e.url},e.url)))})]})})},d=e=>{let{children:t}=e;return t&&0!==t.length?(0,o.jsxs)("nav",{children:[(0,o.jsx)(l,{customCss:"page-header__select-nav",children:t}),(0,o.jsx)(s.TabsBar,{className:"page-header__tabs",hideBorder:!0,children:t.map(((e,t)=>!e.hideFromTabs&&(0,o.jsx)(s.Tab,{label:e.text,active:e.active,icon:e.icon,href:e.url,suffix:e.tabSuffix},`${e.url}-${t}`)))})]}):null},c=e=>{let{navItem:t}=e;const n=(0,s.useStyles2)(p);return t?(0,o.jsx)("div",{className:n.headerCanvas,children:(0,o.jsx)("div",{className:"page-container",children:(0,o.jsxs)("div",{className:"page-header",children:[u(t),t.children&&t.children.length>0&&(0,o.jsx)(d,{children:t.children})]})})}):null};function u(e){var t;const n="grafana"===e.icon?12:14;return(0,o.jsxs)("div",{className:"page-header__inner",children:[(0,o.jsxs)("span",{className:"page-header__logo",children:[e.icon&&(0,o.jsx)(s.Icon,{name:e.icon,size:"xxxl",style:{marginTop:n}}),e.img&&(0,o.jsx)("img",{className:"page-header__img",src:e.img,alt:`logo of ${e.text}`})]}),(0,o.jsxs)("div",{className:"page-header__info-block",children:[h(e.text,null!==(t=e.breadcrumbs)&&void 0!==t?t:[],e.highlightText),e.subTitle&&(0,o.jsx)("div",{className:"page-header__sub-title",children:e.subTitle})]})]})}function h(e,t,n){if(!(e||t&&0!==t.length))return null;if(!t||0===t.length)return(0,o.jsxs)("h1",{className:"page-header__title",children:[e,n&&(0,o.jsx)(r.Z,{text:n,className:a.css`
              vertical-align: middle;
            `})]});const s=[];for(const e of t)e.url?s.push((0,o.jsx)("a",{className:"page-header__link",href:e.url,children:e.title},s.length)):s.push((0,o.jsxs)("span",{children:[" / ",e.title]},s.length));return s.push((0,o.jsxs)("span",{children:[" / ",e]},t.length+1)),(0,o.jsx)("h1",{className:"page-header__title",children:s})}const p=e=>({headerCanvas:a.css`
    background: ${e.colors.background.canvas};
  `})},22584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(68404);var a=n(3490),s=n(45916);const i=e=>{let{pageName:t=""}=e;const n=`Loading ${t}...`;return(0,s.jsx)("div",{className:"page-loader-wrapper",children:(0,s.jsx)(a.LoadingPlaceholder,{text:n})})}},45653:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(68404),s=n(16695),i=n(3490),r=n(45916);const o=["autoComplete","autoFocus","id","passwordHint"];const l=a.forwardRef(((e,t)=>{let{autoComplete:n,autoFocus:l,id:d,passwordHint:c}=e,u=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,o);const[h,p]=(0,a.useState)(!1);return(0,r.jsx)(i.Input,Object.assign({id:d,autoFocus:l,autoComplete:n},u,{type:h?"text":"password",placeholder:c,"aria-label":s.wl.pages.Login.password,ref:t,suffix:(0,r.jsx)(i.IconButton,{name:h?"eye-slash":"eye",type:"button","aria-controls":d,role:"switch","aria-checked":h,"aria-label":"Show password",onClick:()=>{p(!h)}})}))}));l.displayName="PasswordField"},93319:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a,s=n(36636),i=n(68404),r=n(3490),o=n(52871),l=n(28909),d=n(78837),c=n(59834),u=n(6347),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends i.Component{constructor(e){super(e),p(this,"onTypeChanged",(e=>{const t=e.value;switch(t){case c.pC.User:case c.pC.Team:this.setState({type:t,userId:0,teamId:0,role:void 0});break;case c.pC.Editor:this.setState({type:t,userId:0,teamId:0,role:c.B5.Editor});break;case c.pC.Viewer:this.setState({type:t,userId:0,teamId:0,role:c.B5.Viewer})}})),p(this,"onUserSelected",(e=>{this.setState({userId:e&&!Array.isArray(e)?e.id:0})})),p(this,"onTeamSelected",(e=>{var t;this.setState({teamId:null!==(t=e.value)&&void 0!==t&&t.id&&!Array.isArray(e.value)?e.value.id:0})})),p(this,"onPermissionChanged",(e=>{this.setState({permission:e.value})})),p(this,"onSubmit",(async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())})),this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:c.pC.Team,permission:c.V5.View}}isValid(){switch(this.state.type){case c.pC.Team:return this.state.teamId>0;case c.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:e}=this.props,t=this.state,n="min-width-20",s=this.isValid(),i=m(d.ZP.theme);return(0,h.jsxs)("div",{className:"cta-form",children:[(0,h.jsx)(u.P,{onClick:e}),a||(a=(0,h.jsx)("h5",{children:"Add Permission For"})),(0,h.jsx)(r.Form,{maxWidth:"none",onSubmit:this.onSubmit,children:()=>(0,h.jsxs)(r.HorizontalGroup,{children:[(0,h.jsx)(r.Select,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:c.BL,onChange:this.onTypeChanged}),t.type===c.pC.User?(0,h.jsx)(l.f,{onSelected:this.onUserSelected,className:n}):null,t.type===c.pC.Team?(0,h.jsx)(o.c,{onSelected:this.onTeamSelected,className:n}):null,(0,h.jsx)("span",{className:i.label,children:"Can"}),(0,h.jsx)(r.Select,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:c.vT,onChange:this.onPermissionChanged,width:25}),(0,h.jsx)(r.Button,{"data-save-permission":!0,type:"submit",disabled:!s,children:"Save"})]})})]})}}p(g,"defaultProps",{showPermissionLevels:!0});const m=(0,r.stylesFactory)((e=>({label:s.css`
    color: ${e.colors.textBlue};
    font-weight: bold;
  `}))),f=g},18778:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var a,s,i,r,o,l,d,c,u,h,p,g=n(68404),m=n(3490),f=n(59834),v=n(45916);class b extends g.Component{render(){const{item:e}=this.props,t=f.vT.find((t=>t.value===e.permission));return(0,v.jsxs)("tr",{className:"gf-form-disabled",children:[(0,v.jsx)("td",{style:{width:"1%"},children:a||(a=(0,v.jsx)(m.Icon,{size:"lg",name:"shield"}))}),(0,v.jsxs)("td",{style:{width:"90%"},children:[e.name,s||(s=(0,v.jsx)("span",{className:"filter-table__weak-italic",children:" (Role)"}))]}),i||(i=(0,v.jsx)("td",{})),r||(r=(0,v.jsx)("td",{className:"query-keyword",children:"Can"})),(0,v.jsx)("td",{children:(0,v.jsx)("div",{className:"gf-form",children:(0,v.jsx)(m.Select,{"aria-label":`Permission level for "${e.name}"`,options:f.vT,onChange:()=>{},disabled:!0,value:t})})}),(0,v.jsx)("td",{children:(0,v.jsx)(m.Button,{"aria-label":`Remove permission for "${e.name}"`,size:"sm",icon:"lock",disabled:!0})})]})}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){let{item:t}=e;return t.userAvatarUrl?(0,v.jsx)("img",{className:"filter-table__avatar",src:t.userAvatarUrl}):t.teamAvatarUrl?(0,v.jsx)("img",{className:"filter-table__avatar",src:t.teamAvatarUrl}):"Editor"===t.role?o||(o=(0,v.jsx)(m.Icon,{size:"lg",name:"edit"})):l||(l=(0,v.jsx)(m.Icon,{size:"lg",name:"eye"}))}function w(e){let{item:t}=e;return t.userId?d||(d=(0,v.jsx)("span",{className:"filter-table__weak-italic",children:"(User)"})):t.teamId?c||(c=(0,v.jsx)("span",{className:"filter-table__weak-italic",children:"(Team)"})):u||(u=(0,v.jsx)("span",{className:"filter-table__weak-italic",children:"(Role)"}))}class j extends g.PureComponent{constructor(){super(...arguments),x(this,"onPermissionChanged",(e=>{this.props.onPermissionChanged(this.props.item,e.value)})),x(this,"onRemoveItem",(()=>{this.props.onRemoveItem(this.props.item)}))}render(){const{item:e,folderInfo:t}=this.props,n=-1===e.dashboardId&&!e.inherited,a=f.vT.find((t=>t.value===e.permission));return(0,v.jsxs)("tr",{className:(s=Boolean(null==e?void 0:e.inherited),s?"gf-form-disabled":""),children:[(0,v.jsx)("td",{style:{width:"1%"},children:(0,v.jsx)(y,{item:e})}),(0,v.jsxs)("td",{style:{width:"90%"},children:[e.name," ",(0,v.jsx)(w,{item:e})]}),(0,v.jsxs)("td",{children:[e.inherited&&t&&(0,v.jsxs)("em",{className:"muted no-wrap",children:["Inherited from folder"," ",t.canViewFolderPermissions?(0,v.jsx)("a",{className:"text-link",href:`${t.url}/permissions`,children:t.title}):t.title]}),n&&(h||(h=(0,v.jsx)("em",{className:"muted no-wrap",children:"Default Permission"})))]}),p||(p=(0,v.jsx)("td",{className:"query-keyword",children:"Can"})),(0,v.jsx)("td",{children:(0,v.jsx)(m.Select,{"aria-label":`Permission level for "${e.name}"`,isSearchable:!1,options:f.vT,onChange:this.onPermissionChanged,disabled:e.inherited,value:a,width:25})}),(0,v.jsx)("td",{children:e.inherited?(0,v.jsx)(m.Button,{"aria-label":`Remove permission for "${e.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):(0,v.jsx)(m.Button,{"aria-label":`Remove permission for "${e.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})})]});var s}}var S,C;class k extends g.PureComponent{render(){const{items:e,onRemoveItem:t,onPermissionChanged:n,isFetching:a,folderInfo:s}=this.props;return(0,v.jsx)("table",{className:"filter-table gf-form-group",children:(0,v.jsxs)("tbody",{children:[(0,v.jsx)(b,{item:{name:"Admin",permission:4}},0),e.map(((e,a)=>(0,v.jsx)(j,{item:e,onRemoveItem:t,onPermissionChanged:n,folderInfo:s},a+1))),!0===a&&e.length<1?S||(S=(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:4,children:(0,v.jsx)("em",{children:"Loading permissions..."})})})):null,!1===a&&e.length<1?C||(C=(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:4,children:(0,v.jsx)("em",{children:"No permissions are set. Will only be accessible by admins."})})})):null]})})}}const T=k},25130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});n(68404);var a,s=n(45916);const i=()=>a||(a=(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{children:"What are Permissions?"}),(0,s.jsx)("p",{children:"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."})]}))},7259:(e,t,n)=>{"use strict";n.d(t,{h:()=>d});var a=n(36636),s=n(68404),i=n(43215),r=n(3490),o=n(45916);const l=["className","children","markdown","onRemove"];const d=s.memo(s.forwardRef(((e,t)=>{let{className:n,children:s,markdown:i}=e,d=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,l);const h=(0,r.useStyles2)(u);return(0,o.jsxs)("div",Object.assign({className:(0,a.cx)(h.wrapper,n)},d,{ref:t,children:[i&&c(i),s]}))})));function c(e){const t=(0,i.renderMarkdown)(e);return(0,o.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:t}})}d.displayName="OperationRowHelp";const u=e=>{const t=e.shape.borderRadius();return{wrapper:a.css`
      padding: ${e.spacing(2)};
      border: 2px solid ${e.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${t} ${t};
      position: relative;
      top: -4px;
    `}}},95448:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var a=n(36636),s=(n(68404),n(16695)),i=n(3490),r=n(45916);const o=e=>{let{icon:t,active:n,disabled:o,title:d,onClick:c}=e;const u=(0,i.useStyles2)(l);return(0,r.jsx)("div",{className:(0,a.cx)(u.icon,n&&u.active),children:(0,r.jsx)(i.IconButton,{name:t,title:d,className:u.icon,disabled:!!o,onClick:c,type:"button","aria-label":s.wl.components.QueryEditorRow.actionButton(d)})})};o.displayName="QueryOperationAction";const l=e=>({icon:a.css`
      display: flex;
      position: relative;
      color: ${e.colors.text.secondary};
    `,active:a.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `})},71623:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var a=n(36636),s=n(68404),i=n(48435),r=n(61336),o=n(90923),l=n(3490),d=n(45916);const c=e=>{let{actionsElement:t,disabled:n,draggable:s,dragHandleProps:i,headerElement:r,isContentVisible:o,onRowToggle:c,reportDragMousePosition:h,titleElement:p}=e;const g=(0,l.useStyles2)(u);return(0,d.jsxs)("div",{className:g.header,children:[(0,d.jsxs)("div",{className:g.column,children:[(0,d.jsx)(l.IconButton,{name:o?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:g.collapseIcon,onClick:c,type:"button"}),p&&(0,d.jsx)("div",{className:g.titleWrapper,onClick:c,"aria-label":"Query operation row title",children:(0,d.jsx)("div",{className:(0,a.cx)(g.title,n&&g.disabled),children:p})}),r]}),(0,d.jsxs)("div",{className:g.column,children:[t,s&&(0,d.jsx)(l.Icon,Object.assign({title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:g.dragIcon,onMouseMove:h},i))]})]})},u=e=>({header:a.css`
    label: Header;
    padding: ${e.spacing(.5,.5)};
    border-radius: ${e.shape.borderRadius(1)};
    background: ${e.colors.background.secondary};
    min-height: ${e.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:a.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:a.css`
    cursor: grab;
    color: ${e.colors.text.disabled};
    margin: ${e.spacing(0,.5)};
    &:hover {
      color: ${e.colors.text};
    }
  `,collapseIcon:a.css`
    margin-left: ${e.spacing(.5)};
    color: ${e.colors.text.disabled};
    }
  `,titleWrapper:a.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${e.spacing(.5)};
  `,title:a.css`
    font-weight: ${e.typography.fontWeightBold};
    color: ${e.colors.text.link};
    margin-left: ${e.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:a.css`
    color: ${e.colors.text.disabled};
  `});c.displayName="QueryOperationRowHeader";const h=e=>{let{children:t,actions:n,title:a,headerElement:u,onClose:h,onOpen:g,isOpen:m,disabled:f,draggable:v,index:b,id:x}=e;const[y,w]=(0,s.useState)(void 0===m||m),j=(0,l.useTheme)(),S=p(j),C=(0,s.useCallback)((()=>{w(!y)}),[y,w]),k=(0,s.useCallback)((e=>{if(e.defaultPrevented){const a=e.currentTarget.getBoundingClientRect();var t=e.clientX-a.left,n=e.clientY-a.top;(0,o.reportInteraction)("query_row_reorder_drag_position",{x:t/a.width,y:n/a.height,width:a.width,height:a.height})}}),[]);(0,r.Z)((()=>{y?g&&g():h&&h()}),[y]);const T={isOpen:y,onOpen:()=>{w(!0)},onClose:()=>{w(!1)}},I=a&&l.ReactUtils.renderOrCallToRender(a,T),O=n&&l.ReactUtils.renderOrCallToRender(n,T),N=u&&l.ReactUtils.renderOrCallToRender(u,T);return v?(0,d.jsx)(i._l,{draggableId:x,index:b,children:e=>(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",Object.assign({ref:e.innerRef,className:S.wrapper},e.draggableProps,{children:[(0,d.jsx)("div",{children:(0,d.jsx)(c,{actionsElement:O,disabled:f,draggable:!0,dragHandleProps:e.dragHandleProps,headerElement:N,isContentVisible:y,onRowToggle:C,reportDragMousePosition:k,titleElement:I})}),y&&(0,d.jsx)("div",{className:S.content,children:t})]}))})}):(0,d.jsxs)("div",{className:S.wrapper,children:[(0,d.jsx)(c,{actionsElement:O,disabled:f,draggable:!1,headerElement:N,isContentVisible:y,onRowToggle:C,reportDragMousePosition:k,titleElement:I}),y&&(0,d.jsx)("div",{className:S.content,children:t})]})},p=(0,l.stylesFactory)((e=>({wrapper:a.css`
      margin-bottom: ${e.spacing.md};
    `,content:a.css`
      margin-top: ${e.spacing.inlineFormMargin};
      margin-left: ${e.spacing.lg};
    `})));h.displayName="QueryOperationRow"},98638:(e,t,n)=>{"use strict";n.d(t,{I:()=>A});var a=n(68404),s=n(3490),i=n(36636),r=n(45916);const o=(0,a.forwardRef)(((e,t)=>{let{children:n,iconName:a}=e;const i=(0,s.useStyles2)(l);return(0,r.jsxs)("div",{className:i.container,ref:t,children:[a&&(0,r.jsx)(s.Icon,{name:a,size:"xs"}),n]})}));o.displayName="ValueContainer";const l=e=>{const{prefix:t}=(0,s.getInputStyles)({theme:e}),{multiValueContainer:n}=(0,s.getSelectStyles)(e);return{container:(0,i.cx)(t,n,i.css`
        position: relative;
        padding: ${e.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${e.spacing(.5)};
        }
      `)}};var d;const c=["appliedRoles","builtInRole","disabled","isFocused","query","showBuiltInRole","onOpen","onClose","onQueryChange"];const u=e=>e.stopPropagation(),h=e=>{let{appliedRoles:t,builtInRole:n,disabled:l,isFocused:d,query:h,showBuiltInRole:m,onOpen:f,onClose:v,onQueryChange:b}=e,x=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,c);const y=(0,s.useStyles2)((e=>g(e,!1,!!d,!!l,!1))),w=(0,a.useRef)(null);(0,a.useEffect)((()=>{var e;d&&(null===(e=w.current)||void 0===e||e.focus())}));const j=t.length;return d?(0,r.jsxs)("div",{className:y.wrapper,children:[m&&(0,r.jsx)(o,{children:n}),t.map((e=>(0,r.jsx)(o,{children:e.displayName},e.uid))),!l&&(0,r.jsx)("input",Object.assign({},x,{className:y.input,ref:w,onMouseDown:u,onChange:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;b(n)},"data-testid":"role-picker-input",placeholder:d?"Select role":"",value:h})),(0,r.jsx)("div",{className:y.suffix,children:(0,r.jsx)(s.Icon,{name:"angle-up",className:y.dropdownIndicator,onMouseDown:v})})]}):(0,r.jsxs)("div",{className:(0,i.cx)(y.wrapper,y.selectedRoles),onMouseDown:f,children:[m&&(0,r.jsx)(o,{children:n}),(0,r.jsx)(p,{appliedRoles:t,numberOfRoles:j,showBuiltInRole:m})]})};h.displayName="RolePickerInput";const p=e=>{let{showBuiltInRole:t,numberOfRoles:n,appliedRoles:a}=e;const i=(0,s.useStyles2)((e=>m(e)));return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)(s.Tooltip,{content:(0,r.jsx)("div",{className:i.tooltip,children:null==a?void 0:a.map((e=>(0,r.jsx)("p",{children:e.displayName},e.uid)))}),children:(0,r.jsx)(o,{children:`${t?"+":""}${n} role${n>1?"s":""}`})}):!t&&(d||(d=(0,r.jsx)(o,{children:"No roles assigned"})))})},g=(e,t,n,a,r)=>{const o=(0,s.getInputStyles)({theme:e,invalid:t});return{wrapper:(0,i.cx)(o.wrapper,(0,s.sharedInputStyle)(e,t),n&&i.css`
          ${s.styleMixins.focusCss(e.v1)}
        `,a&&o.inputDisabled,i.css`
        width: ${360}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,r&&i.css`
          padding-left: 0;
        `),input:(0,i.cx)((0,s.sharedInputStyle)(e,t),i.css`
        max-width: 120px;
        border: none;
        cursor: ${n?"default":"pointer"};
      `),suffix:o.suffix,dropdownIndicator:i.css`
      cursor: pointer;
    `,selectedRoles:i.css`
      display: flex;
      align-items: center;
      cursor: ${a?"not-allowed":"pointer"};
    `,tooltip:i.css`
      p {
        margin-bottom: ${e.spacing(.5)};
      }
    `}},m=e=>({tooltip:i.css`
    p {
      margin-bottom: ${e.spacing(.5)};
    }
  `});var f=n(27586),v=n(47570);const b=Object.values(v.B5).map((e=>({label:e,value:e}))),x={ldap:"LDAP",current:"Current org"},y=e=>{let{builtInRole:t,options:n,appliedRoles:o,showGroups:l,builtinRolesDisabled:d,showBuiltInRole:c,onSelect:u,onBuiltInRoleSelect:h,onUpdate:p,updateDisabled:g,offset:m,apply:v}=e;const[x,y]=(0,a.useState)(o),[O,P]=(0,a.useState)(t),[A,M]=(0,a.useState)(!1),[R,$]=(0,a.useState)(""),[L,E]=(0,a.useState)([]),V=(0,a.useRef)(null),B=(0,s.useTheme2)(),z=(0,f.D)(B),_=(0,s.useStyles2)(D);(0,a.useEffect)((()=>{u(x)}),[x,u]),(0,a.useEffect)((()=>{h&&O&&h(O)}),[O,h]);const U=n.filter(w).sort(N),H=n.filter(j).sort(N),W=S(n),q=e=>{const t=[];for(const n of x)I(n)===e&&t.push(n);return t},Z=e=>{const t=q(e),n=W.find((t=>t.value===e));return t.length>0&&t.length>=n.options.length},G=e=>{const t=q(e),n=W.find((t=>t.value===e));return t.length>0&&t.length<n.options.length},K=e=>{x.find((t=>t.uid===e.uid))?y(x.filter((t=>t.uid!==e.uid))):y([...x,e])},Q=e=>{const t=W.find((t=>t.value===e));if(Z(e)||G(e))t&&y(x.filter((e=>!t.options.find((t=>e.uid===t.uid)))));else if(t){const e=t.options.filter((e=>e.delegatable)),n=x.filter((e=>!t.options.find((t=>e.uid===t.uid))));y([...n,...e])}},J=e=>{$(e),M(!0);const t=W.find((t=>t.value===e));t&&E(t.options)},Y=e=>{M(!1),$(""),E([])},X=()=>{const e=x.filter((e=>I(e)!==R));y(e)};return(0,r.jsxs)("div",{className:(0,i.cx)(z.menu,_.menuWrapper,{[_.menuLeft]:m.horizontal>0},i.css`
          bottom: ${m.vertical>0?`${m.vertical}px`:"unset"};
          top: ${m.vertical<0?`${Math.abs(m.vertical)}px`:"unset"};
        `),children:[(0,r.jsxs)("div",{className:_.menu,"aria-label":"Role picker menu",children:[(0,r.jsxs)(s.CustomScrollbar,{autoHide:!1,autoHeightMax:"300px",hideHorizontalTrack:!0,hideVerticalTrack:!0,children:[c&&(0,r.jsxs)("div",{className:_.menuSection,children:[(0,r.jsx)("div",{className:_.groupHeader,children:"Basic roles"}),(0,r.jsx)(s.RadioButtonGroup,{className:_.builtInRoleSelector,options:b,value:O,onChange:e=>{P(e)},fullWidth:!0,disabled:d})]}),!!H.length&&(l&&W.length?(0,r.jsxs)("div",{className:_.menuSection,children:[(0,r.jsx)("div",{className:_.groupHeader,children:"Fixed roles"}),(0,r.jsx)("div",{className:z.optionBody,children:W.map(((e,t)=>{var n;return(0,r.jsx)(T,{data:e,isSelected:Z(e.value)||G(e.value),partiallySelected:G(e.value),disabled:null===(n=e.options)||void 0===n?void 0:n.every(F),onChange:Q,onOpenSubMenu:J,onCloseSubMenu:Y,root:null==V?void 0:V.current,isFocused:A&&R===e.value,children:A&&R===e.value&&(0,r.jsx)(C,{options:L,selectedOptions:x,onSelect:K,onClear:X,showOnLeft:m.horizontal>0})},t)}))})]}):(0,r.jsxs)("div",{className:_.menuSection,children:[(0,r.jsx)("div",{className:_.groupHeader,children:"Fixed roles"}),(0,r.jsx)("div",{className:z.optionBody,children:H.map(((e,t)=>(0,r.jsx)(k,{data:e,isSelected:!(!e.uid||!x.find((t=>t.uid===e.uid))),disabled:F(e),onChange:K,hideDescription:!0},t)))})]})),!!U.length&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:_.groupHeader,children:"Custom roles"}),(0,r.jsx)("div",{className:z.optionBody,children:U.map(((e,t)=>(0,r.jsx)(k,{data:e,isSelected:!(!e.uid||!x.find((t=>t.uid===e.uid))),disabled:F(e),onChange:K,hideDescription:!0},t)))})]})]}),(0,r.jsx)("div",{className:_.menuButtonRow,children:(0,r.jsxs)(s.HorizontalGroup,{justify:"flex-end",children:[(0,r.jsx)(s.Button,{size:"sm",fill:"text",onClick:async()=>{y([])},disabled:g,children:"Clear all"}),(0,r.jsx)(s.Button,{size:"sm",onClick:()=>{const e=[];for(const n in x){var t;const a=null===(t=x[n])||void 0===t?void 0:t.uid;e.push(a)}p(x,O)},disabled:g,children:v?"Apply":"Update"})]})})]}),(0,r.jsx)("div",{ref:V})]})},w=e=>{var t;return!(null!==(t=e.name)&&void 0!==t&&t.startsWith("fixed:"))},j=e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.startsWith("fixed:")},S=e=>{const t={};e.forEach((e=>{if(e.name.startsWith("fixed:")){const n=I(e);t[n]?t[n].push(e):t[n]=[e]}}));const n=[];for(const e of Object.keys(t)){const a=t[e].sort(N);n.push({name:x[e]||O(e),value:e,options:a})}return n.sort(((e,t)=>e.name.localeCompare(t.name)))},C=e=>{let{options:t,selectedOptions:n,disabledOptions:a,onSelect:o,onClear:l,showOnLeft:d}=e;const c=(0,s.useTheme2)(),u=(0,f.D)(c),h=(0,s.useStyles2)(D);return(0,r.jsxs)("div",{className:(0,i.cx)(h.subMenu,{[h.subMenuLeft]:d}),"aria-label":"Role picker submenu",children:[(0,r.jsx)(s.CustomScrollbar,{autoHide:!1,autoHeightMax:"300px",hideHorizontalTrack:!0,children:(0,r.jsx)("div",{className:u.optionBody,children:t.map(((e,t)=>(0,r.jsx)(k,{data:e,isSelected:!(!e.uid||!(n.find((t=>t.uid===e.uid))||null!=a&&a.find((t=>t.uid===e.uid)))),disabled:!(!e.uid||null==a||!a.find((t=>t.uid===e.uid)))||F(e),onChange:o,hideDescription:!0},t)))})}),(0,r.jsx)("div",{className:h.subMenuButtonRow,children:(0,r.jsx)(s.HorizontalGroup,{justify:"flex-end",children:(0,r.jsx)(s.Button,{size:"sm",fill:"text",onClick:async()=>{l&&l()},children:"Clear"})})})]})},k=a.forwardRef(((e,t)=>{let{data:n,isFocused:a,isSelected:o,disabled:l,onChange:d,hideDescription:c}=e;const u=(0,s.useTheme2)(),h=(0,f.D)(u),p=(0,s.useStyles2)(D),g=(0,i.cx)(h.option,a&&h.optionFocused,l&&p.menuOptionDisabled),m=e=>{l||(e.preventDefault(),e.stopPropagation(),d(n))};return(0,r.jsxs)("div",{ref:t,className:g,"aria-label":"Role picker option",onClick:m,children:[(0,r.jsx)(s.Checkbox,{value:o,className:p.menuOptionCheckbox,onChange:m,disabled:l}),(0,r.jsxs)("div",{className:(0,i.cx)(h.optionBody,p.menuOptionBody),children:[(0,r.jsx)("span",{children:n.displayName||n.name}),!c&&n.description&&(0,r.jsx)("div",{className:h.optionDescription,children:n.description})]}),n.description&&(0,r.jsx)(s.Tooltip,{content:n.description,children:(0,r.jsx)(s.Icon,{name:"info-circle",className:p.menuOptionInfoSign})})]})}));k.displayName="RoleMenuOption";const T=a.forwardRef(((e,t)=>{let{data:n,isFocused:a,isSelected:o,partiallySelected:l,disabled:d,onChange:c,onClick:u,onOpenSubMenu:h,onCloseSubMenu:p,children:g,root:m}=e;const v=(0,s.useTheme2)(),b=(0,f.D)(v),x=(0,s.useStyles2)(D),y=(0,i.cx)(b.option,a&&b.optionFocused,d&&x.menuOptionDisabled);return(0,r.jsx)("div",{onMouseEnter:()=>{h&&h(n.value)},onMouseLeave:()=>{p&&p(n.value)},children:(0,r.jsxs)("div",{ref:t,className:y,"aria-label":"Role picker option",onClick:e=>{u&&u(n.value)},children:[(0,r.jsx)(s.Checkbox,{value:o,className:(0,i.cx)(x.menuOptionCheckbox,{[x.checkboxPartiallyChecked]:l}),onChange:e=>{d||n.value&&c(n.value)},disabled:d}),(0,r.jsxs)("div",{className:(0,i.cx)(b.optionBody,x.menuOptionBody),children:[(0,r.jsx)("span",{children:n.displayName||n.name}),(0,r.jsx)("span",{className:x.menuOptionExpand})]}),m&&g&&(0,r.jsx)(s.Portal,{className:x.subMenuPortal,root:m,children:g})]})})}));T.displayName="RoleMenuGroupOption";const I=e=>{var t;return null!==(t=e.group)&&void 0!==t?t:"Other"},O=e=>e.slice(0,1).toUpperCase()+e.slice(1),N=(e,t)=>e.name.localeCompare(t.name),F=e=>void 0!==e.delegatable&&!e.delegatable,D=e=>({menuWrapper:i.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:i.css`
      min-width: 260px;

      & > div {
        padding-top: ${e.spacing(1)};
      }
    `,menuLeft:i.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:i.css`
      height: 100%;
      min-width: 260px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${e.components.input.borderColor};

      & > div {
        padding-top: ${e.spacing(1)};
      }
    `,subMenuLeft:i.css`
      border-right: 1px solid ${e.components.input.borderColor};
      border-left: unset;
    `,groupHeader:i.css`
      padding: ${e.spacing(0,4)};
      display: flex;
      align-items: center;
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightBold};
    `,container:i.css`
      padding: ${e.spacing(1)};
      border: 1px ${e.colors.border.weak} solid;
      border-radius: ${e.shape.borderRadius(1)};
      background-color: ${e.colors.background.primary};
      z-index: ${e.zIndex.modal};
    `,menuSection:i.css`
      margin-bottom: ${e.spacing(2)};
    `,menuOptionCheckbox:i.css`
      display: flex;
      margin: ${e.spacing(0,1,0,.25)};
    `,menuButtonRow:i.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,menuOptionBody:i.css`
      font-weight: ${e.typography.fontWeightRegular};
      padding: ${e.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:i.css`
      color: ${e.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:i.css`
      position: absolute;
      right: ${e.spacing(1.25)};
      color: ${e.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:i.css`
      color: ${e.colors.text.disabled};
    `,builtInRoleSelector:i.css`
      margin: ${e.spacing(1,1.25,1,1)};
    `,subMenuPortal:i.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:i.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,checkboxPartiallyChecked:i.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `});var P;const A=e=>{let{builtInRole:t,appliedRoles:n,roleOptions:i,disabled:o,isLoading:l,builtinRolesDisabled:d,showBuiltInRole:c,onRolesChange:u,onBuiltinRoleChange:p,canUpdateRoles:g=!0,apply:m=!1}=e;const[f,v]=(0,a.useState)(!1),[b,x]=(0,a.useState)(n),[w,j]=(0,a.useState)(t),[S,C]=(0,a.useState)(""),[k,T]=(0,a.useState)({vertical:0,horizontal:0}),I=(0,a.useRef)(null);(0,a.useEffect)((()=>{j(t),x(n)}),[n,t]),(0,a.useEffect)((()=>{var e;const t=null==I||null===(e=I.current)||void 0===e?void 0:e.getBoundingClientRect();if(!t||!f)return;const{bottom:n,top:a,left:s,right:i}=t,r=n-a+10,o=i-s;let l=-o,d=-r;window.innerHeight-n<320&&(d=r),window.innerWidth-i<360&&(l=o),T({horizontal:l,vertical:d})}),[f,b]);const O=(0,a.useCallback)((e=>{o||(e.preventDefault(),e.stopPropagation(),v(!0))}),[v,o]),N=(0,a.useCallback)((()=>{v(!1),C(""),x(n),j(t)}),[n,t]);return l?P||(P=(0,r.jsxs)(s.HorizontalGroup,{justify:"center",children:[(0,r.jsx)("span",{children:"Loading..."}),(0,r.jsx)(s.Spinner,{size:16})]})):(0,r.jsx)("div",{"data-testid":"role-picker",style:{position:"relative",width:360},ref:I,children:(0,r.jsxs)(s.ClickOutsideWrapper,{onClick:()=>f&&N(),children:[(0,r.jsx)(h,{builtInRole:w,appliedRoles:b,query:S,onQueryChange:e=>{C(e||"")},onOpen:O,onClose:N,isFocused:f,disabled:o,showBuiltInRole:c}),f&&(0,r.jsx)(y,{options:(()=>{const e=i.map((e=>Object.assign({},e,{delegatable:g&&e.delegatable})));return S&&""!==S.trim()?e.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(S.toLowerCase())})):e})(),builtInRole:w,appliedRoles:n,onBuiltInRoleSelect:e=>{j(e)},onSelect:e=>{x(e)},onUpdate:(e,n)=>{p&&n&&n!==t&&p(n),g&&u(e),C(""),v(!1)},showGroups:0===S.length||""===S.trim(),builtinRolesDisabled:d,showBuiltInRole:c,updateDisabled:d&&!g,apply:m,offset:k})]})})}},57497:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var a=n(68404),s=n(80027),i=n(98163),r=n(47570),o=n(98638),l=n(77058),d=n(45916);const c=e=>{let{builtInRole:t,userId:n,orgId:c,onBuiltinRoleChange:u,roleOptions:h,builtInRoles:p,disabled:g,builtinRolesDisabled:m,apply:f=!1,onApplyRoles:v,pendingRoles:b}=e;const[{loading:x,value:y=[]},w]=(0,s.Z)((async()=>{try{if(f&&(null==b?void 0:b.length)>0)return b;if(i.Vt.hasPermission(r.bW.ActionUserRolesList))return await(0,l.kt)(n,c)}catch(e){console.error("Error loading options")}return[]}),[c,n,b]);(0,a.useEffect)((()=>{c&&w()}),[c,w,b]);const j=i.Vt.hasPermission(r.bW.ActionUserRolesAdd)&&i.Vt.hasPermission(r.bW.ActionUserRolesRemove);return(0,d.jsx)(o.I,{appliedRoles:y,builtInRole:t,onRolesChange:async e=>{f?v&&v(e,n,c):(await(0,l.hB)(e,n,c),await w())},onBuiltinRoleChange:u,roleOptions:h,builtInRoles:p,isLoading:x,disabled:g,builtinRolesDisabled:m,showBuiltInRole:!0,apply:f,canUpdateRoles:j})}},77058:(e,t,n)=>{"use strict";n.d(t,{_C:()=>l,fh:()=>i,hB:()=>o,kt:()=>r,u7:()=>d,ul:()=>s});var a=n(90923);const s=async(e,t)=>{let n="/api/access-control/roles?delegatable=true";e&&(n+=`&targetOrgId=${e}`);const s=await(0,a.getBackendSrv)().get(n);return s&&s.length?s:[]},i=e=>{let t="/api/access-control/builtin-roles";return e&&(t+=`?targetOrgId=${e}`),(0,a.getBackendSrv)().get(t)},r=async(e,t)=>{let n=`/api/access-control/users/${e}/roles`;t&&(n+=`?targetOrgId=${t}`);try{const e=await(0,a.getBackendSrv)().get(n);return e&&e.length?e:[]}catch(e){return(0,a.isFetchError)(e)&&(e.isHandled=!0),[]}},o=(e,t,n)=>{let s=`/api/access-control/users/${t}/roles`;n&&(s+=`?targetOrgId=${n}`);const i=e.flatMap((e=>e.uid));return(0,a.getBackendSrv)().put(s,{orgId:n,roleUids:i})},l=async(e,t)=>{let n=`/api/access-control/teams/${e}/roles`;t&&(n+=`?targetOrgId=${t}`);try{const e=await(0,a.getBackendSrv)().get(n);return e&&e.length?e:[]}catch(e){return(0,a.isFetchError)(e)&&(e.isHandled=!0),[]}},d=(e,t,n)=>{let s=`/api/access-control/teams/${t}/roles`;n&&(s+=`?targetOrgId=${n}`);const i=e.flatMap((e=>e.uid));return(0,a.getBackendSrv)().put(s,{orgId:n,roleUids:i})}},49248:(e,t,n)=>{"use strict";n.d(t,{o:()=>h});var a=n(99151),s=n.n(a),i=n(68404),r=n(3490),o=n(28659),l=n(45916);const d=["value","onChange","placeholder","noOptionsMessage"];const c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"General",t=arguments.length>1?arguments[1]:void 0;return`${e}/${t}`},u=s()((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.ae.search({type:"dash-db",query:e,limit:100}).then((e=>e.map((e=>({value:{uid:e.uid,title:e.title,folderTitle:e.folderTitle,folderUid:e.folderUid},label:c(null==e?void 0:e.folderTitle,e.title)})))))}),300),h=e=>{let{value:t,onChange:n,placeholder:a="Select dashboard",noOptionsMessage:s="No dashboards found"}=e,h=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,d);const[p,g]=(0,i.useState)();(0,i.useEffect)((()=>{var e;t&&t!==(null==p||null===(e=p.value)||void 0===e?void 0:e.uid)&&(async()=>{var e;const n=await o.ae.getDashboardByUid(t);g({value:{uid:n.dashboard.uid,title:n.dashboard.title,folderTitle:n.meta.folderTitle,folderUid:n.meta.folderUid},label:c(null===(e=n.meta)||void 0===e?void 0:e.folderTitle,n.dashboard.title)})})()}),[t]);const m=(0,i.useCallback)((e=>{g(e),null==n||n(null==e?void 0:e.value)}),[n,g]);return(0,l.jsx)(r.AsyncSelect,Object.assign({loadOptions:u,onChange:m,placeholder:a,noOptionsMessage:s,value:p},h))}},95513:(e,t,n)=>{"use strict";n.d(t,{E:()=>g});var a=n(82897),s=n(68404),i=n(43215),r=n(16695),o=n(3490),l=n(61959),d=n(85189),c=n(47570),u=n(5831),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.PureComponent{constructor(e){super(e),p(this,"debouncedSearch",void 0),p(this,"componentDidMount",(async()=>{if(this.props.skipInitialLoad){const e=await async function(e){let{folderName:t,folderId:n,getFolder:a}=e;if(null==n||n<0)throw new Error("folderId should to be greater or equal to zero.");if(t)return{label:t,value:n};return{label:(await a(n)).title,value:n}}({getFolder:d.EW,folderId:this.props.initialFolderId,folderName:this.props.initialTitle});this.setState({folder:e})}else await this.loadInitialValue()})),p(this,"loadOptions",((e,t)=>{this.searchFolders(e).then(t)})),p(this,"searchFolders",(async e=>{const{rootName:t,enableReset:n,initialTitle:a,permissionLevel:s,filter:i,accessControlMetadata:r,initialFolderId:o,showRoot:u}=this.props,h=function(e,t){return(t?t(e):e).map((e=>({label:e.title,value:e.id})))}(await(0,d.ZL)(e,s,r),i);return(l.Vt.hasAccess(c.bW.DashboardsWrite,l.Vt.isEditor)||l.Vt.hasAccess(c.bW.DashboardsCreate,l.Vt.isEditor))&&null!=t&&t.toLowerCase().startsWith(e.toLowerCase())&&u&&h.unshift({label:t,value:0}),n&&""===e&&""!==a&&!h.find((e=>e.label===a))&&h.unshift({label:a,value:o}),h})),p(this,"onFolderChange",((e,t)=>{e||(e={value:0,label:this.props.rootName}),"clear"===t.action&&this.props.onClear?this.props.onClear():this.setState({folder:e},(()=>this.props.onChange({id:e.value,title:e.label})))})),p(this,"createNewFolder",(async e=>{const t=await(0,d.L6)({title:e});let n={value:-1,label:"Not created"};return t.id>-1?(u.Z.emit(i.AppEvents.alertSuccess,["Folder Created","OK"]),n={value:t.id,label:t.title},this.setState({folder:t},(()=>{this.onFolderChange(n,{action:"create-option",option:n})}))):u.Z.emit(i.AppEvents.alertError,["Folder could not be created"]),n})),p(this,"loadInitialValue",(async()=>{const{initialTitle:e,rootName:t,initialFolderId:n,enableReset:a,dashboardId:s}=this.props,i={label:e,value:void 0},r={label:t,value:0},o=await this.searchFolders("");let d=null;if(null!=n&&n>-1?d=o.find((e=>e.value===n))||null:a&&e?d=i:n&&(d=o.find((e=>e.id===n))||null),!d&&!this.props.allowEmpty)if(l.Vt.isEditor)d=r;else{d=!!s?i:o.length>0?o[0]:i}this.setState({folder:d},(()=>{d&&d.value!==n&&this.props.onChange({id:d.value,title:d.label})}))})),this.state={folder:null},this.debouncedSearch=(0,a.debounce)(this.loadOptions,300,{leading:!0,trailing:!0})}render(){const{folder:e}=this.state,{enableCreateNew:t,inputId:n,onClear:a}=this.props,s="function"==typeof a;return(0,h.jsx)("div",{"data-testid":r.wl.components.FolderPicker.containerV2,children:(0,h.jsx)(o.AsyncSelect,{inputId:n,"aria-label":r.wl.components.FolderPicker.input,loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:e,value:e,allowCustomValue:t,loadOptions:this.debouncedSearch,onChange:this.onFolderChange,onCreateOption:this.createNewFolder,isClearable:s})})}}p(g,"defaultProps",{rootName:"General",enableReset:!1,initialTitle:"",enableCreateNew:!1,permissionLevel:c.bf.Edit,allowEmpty:!1,showRoot:!0})},78603:(e,t,n)=>{"use strict";n.d(t,{P:()=>d});n(68404);var a=n(17614),s=n(3490),i=n(97621),r=n(18293),o=n(45916);const l=()=>(new r.i).getSortOptions().then((e=>{let{sortOptions:t}=e;return t.map((e=>({label:e.displayName,value:e.name})))}));function d(e){var t,n;let{onChange:r,value:d,placeholder:c,filter:u,getSortOptions:h,isClearable:p}=e;const g=(0,a.Z)((async()=>{const e=await(null!=h?h:l)();return u?e.filter((e=>u.includes(e.value))):e}),[h,u]);if(g.loading)return null;const m=Boolean((null==d?void 0:d.includes("desc"))||(null==d?void 0:d.startsWith("-")));return(0,o.jsx)(s.Select,{width:28,onChange:r,value:null!==(t=null===(n=g.value)||void 0===n?void 0:n.find((e=>e.value===d)))&&void 0!==t?t:null,options:g.value,"aria-label":"Sort",placeholder:null!=c?c:`Sort (Default ${i.yw.label})`,prefix:(0,o.jsx)(s.Icon,{name:m?"sort-amount-down":"sort-amount-up"}),isClearable:p},d)}},52871:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var a=n(82897),s=n(68404),i=n(90923),r=n(3490),o=n(45916);class l extends s.Component{constructor(e){var t,n,s;super(e),s=void 0,(n="debouncedSearch")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,a.isNil)(e)&&(e=""),(0,i.getBackendSrv)().get(`/api/teams/search?perpage=100&page=1&query=${e}`).then((e=>{const t=e.teams.map((e=>({value:e,label:e.name,imgUrl:e.avatarUrl})));return this.setState({isLoading:!1}),t}))}render(){const{onSelected:e,className:t}=this.props,{isLoading:n}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"teamPicker",children:(0,o.jsx)(r.AsyncSelect,{isLoading:n,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:e,className:t,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"})})}}},28909:(e,t,n)=>{"use strict";n.d(t,{f:()=>l});var a=n(82897),s=n(68404),i=n(90923),r=n(3490),o=n(45916);class l extends s.Component{constructor(e){var t,n,s;super(e),s=void 0,(n="debouncedSearch")in(t=this)?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,a.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,a.isNil)(e)&&(e=""),(0,i.getBackendSrv)().get(`/api/org/users/lookup?query=${e}&limit=100`).then((e=>e.map((e=>({id:e.userId,value:e.userId,label:e.login,imgUrl:e.avatarUrl,login:e.login}))))).finally((()=>{this.setState({isLoading:!1})}))}render(){const{className:e,onSelected:t,inputId:n}=this.props,{isLoading:a}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"userPicker",children:(0,o.jsx)(r.AsyncSelect,{isClearable:!0,className:e,inputId:n,isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:t,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"})})}}},87261:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var a,s=n(68404),i=n(3490),r=n(45916);class o extends s.Component{constructor(e){super(e)}render(){const{label:e,removeIcon:t,count:n}=this.props,{color:s}=(0,i.getTagColorsFromName)(e),o={backgroundColor:s},l=0!==n&&(0,r.jsx)("span",{className:"tag-count-label",children:`(${n})`});return(0,r.jsxs)("span",{className:"label label-tag",style:o,children:[t&&(a||(a=(0,r.jsx)(i.Icon,{name:"times"}))),e," ",l]})}}},67907:(e,t,n)=>{"use strict";n.d(t,{D:()=>g});var a=n(36636),s=n(68404),i=n(22585),r=n(43215),o=n(3490),l=n(87261),d=n(45916);const c=e=>{var t;let{data:n,className:s,label:i,isFocused:r,innerProps:c}=e;const h=(0,o.useTheme)(),p=u(h);return(0,d.jsx)("div",Object.assign({className:(0,a.cx)(p.option,r&&p.optionFocused),"aria-label":"Tag option"},c,{children:(0,d.jsx)("div",{className:`tag-filter-option ${s||""}`,children:"string"==typeof i?(0,d.jsx)(l.e,{label:i,removeIcon:!1,count:null!==(t=n.count)&&void 0!==t?t:0}):i})}))},u=(0,o.stylesFactory)((e=>({option:a.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${e.colors.dropdownOptionHoverBg};
      }
    `,optionFocused:a.css`
      background: ${e.colors.dropdownOptionHoverBg};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `})));var h;const p=(e,t)=>RegExp((0,r.escapeStringForRegex)(t),"i").test(e.value),g=e=>{let{allowCustomValue:t=!1,formatCreateLabel:n,hideValues:a,inputId:r,isClearable:u,onChange:g,placeholder:f="Filter by tag",tagOptions:v,tags:b,width:x}=e;const y=(0,o.useStyles2)(m),w=b.map((e=>({value:e,label:e,count:0}))),[j,S]=(0,s.useState)(w),[C,k]=(0,s.useState)(!1),[T,I]=(0,s.useState)(b),[O,N]=(0,s.useState)(w),F=(0,s.useMemo)((()=>b.join()),[b]),D=(0,s.useCallback)((async()=>(await v()).map((e=>b.includes(e.term)?{value:e.term,label:e.term,count:0}:{value:e.term,label:e.term,count:e.count}))),[v,b]),P=(0,s.useCallback)((async()=>{k(!0);const e=await D();t&&O.forEach((t=>e.push(t))),S(e),k(!1)}),[t,O,D]);(0,s.useEffect)((()=>{b.length>0&&0===j.length&&P()}),[P,j.length,b.length]),(0,s.useEffect)((()=>{b!==T&&(I(b),P())}),[P,T,b]);const A=e=>{e.forEach((e=>e.count=0)),g((e||[]).map((e=>e.value))),t&&N(e.filter((e=>!b.includes(e))))},M={key:F,onFocus:P,isLoading:C,options:j,allowCreateWhileLoading:!0,allowCustomValue:t,formatCreateLabel:n,defaultOptions:!0,filterOption:p,getOptionLabel:e=>e.label,getOptionValue:e=>e.value,inputId:r,isMulti:!0,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:A,placeholder:f,value:w,width:x,components:{Option:c,MultiValueLabel:()=>null,MultiValueRemove(e){const{data:t}=e;return(0,d.jsx)(i.c.MultiValueRemove,Object.assign({},e,{children:(0,d.jsx)(l.e,{label:t.label,removeIcon:!0,count:t.count},t.label)}))},MultiValueContainer:a?()=>null:i.c.MultiValueContainer}};return(0,d.jsxs)("div",{className:y.tagFilter,children:[u&&b.length>0&&(0,d.jsx)("span",{className:y.clear,onClick:()=>A([]),tabIndex:0,children:"Clear tags"}),(0,d.jsx)(o.MultiSelect,Object.assign({},M,{prefix:h||(h=(0,d.jsx)(o.Icon,{name:"tag-alt"})),"aria-label":"Tag filter"}))]})};g.displayName="TagFilter";const m=e=>({tagFilter:a.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:a.css`
    text-decoration: underline;
    font-size: 12px;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${e.colors.text.secondary};

    &:hover {
      color: ${e.colors.text.primary};
    }
  `})},43961:(e,t,n)=>{"use strict";n.d(t,{a:()=>o});n(68404);var a=n(43215),s=n(3490),i=n(53772),r=n(45916);const o=e=>(0,r.jsx)(i.G,{storageKey:"grafana.dashboard.timepicker.history",defaultValue:[],children:(t,n)=>{return(0,r.jsx)(s.TimeRangePicker,Object.assign({},e,{history:(i=t,i.map((e=>(0,a.isDateTime)(e.from)?e:{from:(0,a.toUtc)(e.from),to:(0,a.toUtc)(e.to),raw:e.raw}))),onChange:s=>{!function(e,t,n){if(!function(e){return(0,a.isDateTime)(e.raw.from)||(0,a.isDateTime)(e.raw.to)}(e))return;const s=function(e){return e.slice(0,4)}([e,...t]);n(s)}(s,t,n),e.onChange(s)}}));var i}})},17963:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(36636),s=n(68404),i=n(90923),r=n(3490),o=n(45916);const l=["text","className","experimentId","eventVariant"];const d=e=>{let{text:t="PRO",className:n,experimentId:d,eventVariant:u=""}=e,h=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,l);const p=(0,r.useStyles2)(c);return(0,s.useEffect)((()=>{d&&(0,i.reportExperimentView)(d,"test",u)}),[d,u]),(0,o.jsx)("span",Object.assign({className:(0,a.cx)(p.badge,n)},h,{children:t}))},c=e=>({badge:a.css`
      margin-left: ${e.spacing(1.25)};
      border-radius: ${e.shape.borderRadius(5)};
      background-color: ${e.colors.success.main};
      padding: ${e.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.pxToRem(10)};
    `})},67163:(e,t,n)=>{"use strict";n.d(t,{B:()=>l});var a,s=n(36636),i=(n(68404),n(3490)),r=n(45916);const o={Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["mod+k"],description:"Open command palette"}],Dashboard:[{keys:["mod+s"],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:["mod+o"],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","â"],description:"Move time range back"},{keys:["t","â"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]},l=e=>{let{onDismiss:t}=e;const n=(0,i.useStyles2)(d);return(0,r.jsxs)(i.Modal,{title:"Shortcuts",isOpen:!0,onDismiss:t,onClickBackdrop:t,children:[(0,r.jsxs)("div",{className:n.titleDescription,children:[(0,r.jsx)("span",{className:n.shortcutTableKey,children:"mod"})," =",a||(a=(0,r.jsx)("span",{children:" CTRL on windows or linux and CMD key on Mac"}))]}),(0,r.jsx)("div",{className:n.categories,children:Object.entries(o).map(((e,t)=>{let[a,s]=e;return(0,r.jsx)("div",{className:n.shortcutCategory,children:(0,r.jsx)("table",{className:n.shortcutTable,children:(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{children:(0,r.jsx)("th",{className:n.shortcutTableCategoryHeader,colSpan:2,children:a})}),s.map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:n.shortcutTableKeys,children:e.keys.map(((e,s)=>(0,r.jsx)("span",{className:n.shortcutTableKey,children:e},`${t}-${a}-${s}`)))}),(0,r.jsx)("td",{className:n.shortcutTableDescription,children:e.description})]},`${t}-${a}`)))]})})},t)}))})]})};function d(e){return{titleDescription:s.css`
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      color: ${e.colors.text.disabled};
      padding-bottom: ${e.spacing(2)};
    `,categories:s.css`
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:s.css`
      width: 50%;
      font-size: ${e.typography.bodySmall.fontSize};
    `,shortcutTable:s.css`
      margin-bottom: ${e.spacing(2)};
    `,shortcutTableCategoryHeader:s.css`
      font-weight: normal;
      font-size: ${e.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:s.css`
      text-align: left;
      color: ${e.colors.text.disabled};
      width: 99%;
      padding: ${e.spacing(1,2)};
    `,shortcutTableKeys:s.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${e.colors.text.primary};
    `,shortcutTableKey:s.css`
      display: inline-block;
      text-align: center;
      margin-right: ${e.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${e.colors.border.medium};
      border-radius: ${e.shape.borderRadius(3)};
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.secondary};
    `}}},78837:(e,t,n)=>{"use strict";n.d(t,{Oh:()=>c,ZP:()=>l,iE:()=>d,vc:()=>r.config});var a,s,i=n(43215),r=n(90923);let o=r.config;const l=o,d=()=>o,c=Boolean((null===(a=r.config.panels)||void 0===a||null===(s=a.debug)||void 0===s?void 0:s.state)===i.PluginState.alpha)},65747:(e,t,n)=>{"use strict";n.d(t,{AV:()=>c,FL:()=>g,K3:()=>a,OA:()=>r,QO:()=>h,b0:()=>d,cz:()=>i,gN:()=>p,hD:()=>s,kh:()=>l,yM:()=>o,zF:()=>u});const a=30,s=8,i=24,r="v",o="h",l=4,d=250,c=3*a,u="panel-copy",h=2,p=40,g="VisualizationSelectPane.ListMode"},48063:(e,t,n)=>{"use strict";n.d(t,{h:()=>s,p:()=>i});var a=n(68404);const s=a.createContext(void 0);function i(){const e=(0,a.useContext)(s);if(!e)throw new Error("No GrafanaContext found");return e}},58257:(e,t,n)=>{"use strict";n.d(t,{AT:()=>u,ZR:()=>p,iG:()=>g,t_:()=>h});var a=n(68404),s=n(34110),i=n(64822),r=n(47570),o=n(36537);const l={title:"",text:"",severity:r.F1.Success,icon:"check"},d={title:"",text:"",severity:r.F1.Warning,icon:"exclamation-triangle"},c={title:"",text:"",severity:r.F1.Error,icon:"exclamation-triangle"},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.assign({},l,{title:e,text:t,id:(0,s.Z)(),timestamp:Date.now(),showing:!0})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return Object.assign({},c,{text:(0,i.i)(t),title:e,id:(0,s.Z)(),traceId:n,component:a,timestamp:Date.now(),showing:!0})},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return Object.assign({},d,{title:e,text:t,traceId:n,id:(0,s.Z)(),timestamp:Date.now(),showing:!0})};function g(){const e=(0,r.I0)();return(0,a.useMemo)((()=>({success:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e((0,o.$l)(u(t,n)))},warning:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;e((0,o.$l)(p(t,n,a)))},error:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;e((0,o.$l)(h(t,n,a)))}})),[e])}},98163:(e,t,n)=>{"use strict";n.d(t,{Vt:()=>i.Vt,Wz:()=>r.W,h$:()=>a.Z,rv:()=>s.r});n(3490);var a=n(5831),s=n(5613),i=n(61959),r=(n(54819),n(9166))},57969:(e,t,n)=>{"use strict";n.d(t,{H6:()=>c,ZP:()=>u});var a=n(82897),s=n(17421),i=n(34072),r=n(90923);const o=e=>{const t=(0,r.getDataSourceSrv)().getInstanceSettings(e.datasourceName);return{id:e.ts.toString(),createdAt:e.ts,datasourceName:e.datasourceName,datasourceUid:(null==t?void 0:t.uid)||"",starred:e.starred,comment:e.comment,queries:e.queries}};var l=n(12226);const d="grafana.explore.richHistory",c=1e4;class u{async getRichHistory(e){const t=p().map(o),n=e.starred?t.filter((e=>!0===e.starred)):t,a=(0,l.ZX)(n,e.sortOrder,e.datasourceFilters,e.search,[e.from,e.to]);return{richHistory:a,total:a.length}}async addToRichHistory(e){const t=Date.now(),n=Object.assign({id:t.toString(),createdAt:t},e),o=(e=>{if(!(0,r.getDataSourceSrv)().getInstanceSettings({uid:e.datasourceUid}))throw new Error("Datasource not found.");return{ts:e.createdAt,datasourceName:e.datasourceName,starred:e.starred,comment:e.comment,queries:e.queries}})(n),u=function(e){const t=s.Z.getObject(l.hO.retentionPeriod,7),n=(0,l.Jo)(t,!1);return e.filter((e=>e.ts>n||!0===e.starred))||[]}(p()),h=o.queries.map((e=>(0,a.omit)(e,["key","refId"]))),g=u.length>0&&u[0].queries.map((e=>(0,a.omit)(e,["key","refId"])));if((0,a.isEqual)(h,g)){const e=new Error("Entry already exists");throw e.name=i.j.DuplicatedEntry,e}const{queriesToKeep:m,limitExceeded:f}=function(e){let t=!1,n=e.length-1;for(;n>=0&&e.length>=c;)e[n].starred||(e.splice(n,1),t=!0),n--;return{queriesToKeep:e,limitExceeded:t}}(u),v=[o,...m];try{s.Z.setObject(d,v)}catch(e){if(!(e instanceof Error&&"QuotaExceededError"===e.name))throw e;!function(e,t){const n=new Error(t);throw n.name=e,n}(i.j.StorageFull,`Saving rich history failed: ${e.message}`)}return f?{warning:{type:i.V.LimitExceeded,message:`Query history reached the limit of ${c}. Old, not-starred items have been removed.`},richHistoryQuery:n}:{richHistoryQuery:n}}async deleteAll(){s.Z.delete(d)}async deleteRichHistory(e){const t=parseInt(e,10),n=s.Z.getObject(d,[]).filter((e=>e.ts!==t));s.Z.setObject(d,n)}async updateStarred(e,t){return h(e,(e=>e.starred=t))}async updateComment(e,t){return h(e,(e=>e.comment=t))}async getSettings(){return{activeDatasourceOnly:s.Z.getObject(l.hO.activeDatasourceOnly,!1),retentionPeriod:s.Z.getObject(l.hO.retentionPeriod,7),starredTabAsFirstTab:s.Z.getBool(l.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:s.Z.getObject(l.hO.datasourceFilters,[]).map((e=>e.value))}}async updateSettings(e){s.Z.set(l.hO.activeDatasourceOnly,e.activeDatasourceOnly),s.Z.set(l.hO.retentionPeriod,e.retentionPeriod),s.Z.set(l.hO.starredTabAsFirstTab,e.starredTabAsFirstTab),s.Z.setObject(l.hO.datasourceFilters,(e.lastUsedDatasourceFilters||[]).map((e=>({value:e}))))}}function h(e,t){const n=parseInt(e,10),i=s.Z.getObject(d,[]),r=(0,a.find)(i,{ts:n});if(!r)throw new Error("Rich history item not found.");return t(r),s.Z.setObject(d,i),o(r)}function p(){return function(e){return e.map((e=>{const t=e.queries.map(((e,t)=>function(e,t,n){const a="ABCDEFGHIJKLMNOPQRSTUVXYZ";if("object"==typeof t)return t;if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(t))return JSON.parse(t);return{expr:t,refId:a[n]}}(0,e,t)));return Object.assign({},e,{queries:t})}))}(s.Z.getObject(d,[]))}},19075:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(58799),s=n(90923),i=n(76187),r=n(7963);const o=e=>{const t=(0,s.getDataSourceSrv)().getInstanceSettings({uid:e.datasourceUid});return{id:e.uid,createdAt:1e3*e.createdAt,datasourceName:(null==t?void 0:t.name)||"",datasourceUid:e.datasourceUid,starred:e.starred,comment:e.comment,queries:e.queries}},l=e=>({uid:e.id,createdAt:Math.floor(e.createdAt/1e3),datasourceUid:e.datasourceUid,starred:e.starred,comment:e.comment,queries:e.queries});class d{constructor(){var e,t,n;n=void 0,(t="preferenceService")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.preferenceService=new i.y("user")}async addToRichHistory(e){const{result:t}=await(0,s.getBackendSrv)().post("/api/query-history",{dataSourceUid:e.datasourceUid,queries:e.queries});return{richHistoryQuery:o(t)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(e){(0,s.getBackendSrv)().delete(`/api/query-history/${e}`)}async getRichHistory(e){const t=function(e){let t=`${e.datasourceFilters.map((e=>{const t=(0,s.getDataSourceSrv)().getInstanceSettings(e).uid;return`datasourceUid=${encodeURIComponent(t)}`})).join("&")}`;e.search&&(t+=`&searchString=${e.search}`);e.sortOrder&&(t=t+"&sort="+(e.sortOrder===r.A.Ascending?"time-asc":"time-desc"));const n=0===e.from?"now":`now-${e.from}d`,a=0===e.to?"now":`now-${e.to}d`;t+=`&to=${n}`,t+=`&from=${a}`,t+="&limit=100",t+=`&page=${e.page||1}`,e.starred&&(t+=`&onlyStarred=${e.starred}`);return t}(e),n=(await(0,a.n)((0,s.getBackendSrv)().fetch({method:"GET",url:`/api/query-history?${t}`,requestId:"query-history-get-all"}))).data;return{richHistory:(n.result.queryHistory||[]).map(o),total:n.result.totalCount||0}}async getSettings(){var e;return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:"starred"===(null===(e=(await this.preferenceService.load()).queryHistory)||void 0===e?void 0:e.homeTab)}}async updateComment(e,t){const n=await(0,s.getBackendSrv)().patch(`/api/query-history/${e}`,{comment:t});return o(n.result)}updateSettings(e){return this.preferenceService.patch({queryHistory:{homeTab:e.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(e,t){let n;return n=t?await(0,s.getBackendSrv)().post(`/api/query-history/star/${e}`):await(0,s.getBackendSrv)().delete(`/api/query-history/star/${e}`),o(n.result)}async migrate(e){await(0,a.n)((0,s.getBackendSrv)().fetch({url:"/api/query-history/migrate",method:"POST",data:{queries:e.map(l)},showSuccessAlert:!1}))}}},34072:(e,t,n)=>{"use strict";let a,s;n.d(t,{V:()=>s,j:()=>a}),function(e){e.StorageFull="StorageFull",e.DuplicatedEntry="DuplicatedEntry"}(a||(a={})),function(e){e.LimitExceeded="LimitExceeded"}(s||(s={}))},12226:(e,t,n)=>{"use strict";n.d(t,{Jo:()=>r,ZX:()=>i,hO:()=>l});var a=n(82897),s=n(7963);function i(e,t,n,s,i){const l=function(e,t){return t.length>0?e.filter((e=>t.includes(e.datasourceName))):e}(e,n),d=function(e,t){return e.filter((e=>{if(e.comment.includes(t))return!0;return e.queries.filter((e=>Object.values((0,a.omit)(e,["datasource","key","refId","hide","queryType"])).some((e=>null==e?void 0:e.toString().includes(t))))).length>0}))}(l,s),c=i?function(e,t){const n=r(t[0],!0),a=r(t[1],!1);return e.filter((e=>e.createdAt<n&&e.createdAt>a))}(d,i):d;return o(c,t)}const r=(e,t)=>{const n=new Date,a=new Date(n.setDate(n.getDate()-e));return t?a.setHours(24,0,0,0):a.setHours(0,0,0,0)};const o=(e,t)=>{let n;return t===s.A.Ascending&&(n=(e,t)=>e.createdAt<t.createdAt?-1:e.createdAt>t.createdAt?1:0),t===s.A.Descending&&(n=(e,t)=>e.createdAt<t.createdAt?1:e.createdAt>t.createdAt?-1:0),t===s.A.DatasourceZA&&(n=(e,t)=>e.datasourceName<t.datasourceName?-1:e.datasourceName>t.datasourceName?1:0),t===s.A.DatasourceAZ&&(n=(e,t)=>e.datasourceName<t.datasourceName?1:e.datasourceName>t.datasourceName?-1:0),e.sort(n)},l={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},36314:(e,t,n)=>{"use strict";n.d(t,{X:()=>u,b:()=>c});var a=n(90923),s=n(98163),i=n(7963),r=n(57969),o=n(19075);const l=new r.ZP,d=new o.Z,c=()=>a.config.queryHistoryEnabled?d:l,u=()=>a.config.queryHistoryEnabled?{availableFilters:[i.A.Descending,i.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:s.Vt.isSignedIn}:{availableFilters:[i.A.Descending,i.A.Ascending,i.A.DatasourceAZ,i.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},26011:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});var a=n(68404),s=n(42326),i=n(90923);function r(){const{search:e}=(0,s.TH)();return[(0,a.useMemo)((()=>(0,i.locationSearchToObject)(e||"")),[e]),(0,a.useCallback)(((e,t)=>i.locationService.partial(e,t)),[])]}},57512:(e,t,n)=>{"use strict";n.d(t,{Hc:()=>i,ZW:()=>r,cI:()=>o,cV:()=>a,jW:()=>s});const a="en-US",s="fr-FR",i="es-ES",r=a,o=[a,s,i]},28783:(e,t,n)=>{"use strict";n.d(t,{Qp:()=>p,aB:()=>k,UW:()=>j,nu:()=>S,Bz:()=>N});var a=n(82897),s=n(16976),i=n(10977),r=n(94396),o=n(43215),l=n(67670),d=n(97024),c=n(3490),u=n(78837);const h="Line limit",p="Common labels",g={[o.LogLevel.critical]:c.colors[7],[o.LogLevel.warning]:c.colors[1],[o.LogLevel.error]:c.colors[4],[o.LogLevel.info]:c.colors[0],[o.LogLevel.debug]:c.colors[5],[o.LogLevel.trace]:c.colors[2],[o.LogLevel.unknown]:(m="#8e8e8e",f="#bdc4cd",u.ZP.bootData.user.lightTheme?f:m)};var m,f;const v=1e3,b=6e4,x=36e5,y=24*x,w=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function j(e,t){return t===o.LogsDedupStrategy.none?e:e.reduce(((e,n,a)=>{const s=Object.assign({},n),i=e[e.length-1];return a>0&&function(e,t,n){switch(n){case o.LogsDedupStrategy.exact:return e.entry.replace(w,"")===t.entry.replace(w,"");case o.LogsDedupStrategy.numbers:return e.entry.replace(/\d/g,"")===t.entry.replace(/\d/g,"");case o.LogsDedupStrategy.signature:return e.entry.replace(/\w/g,"")===t.entry.replace(/\w/g,"");default:return!1}}(n,i,t)?i.duplicates++:(s.duplicates=0,e.push(s)),e}),[])}function S(e,t){return 0===t.size?e:e.filter((e=>!t.has(e.logLevel)))}function C(e){return e.fields.some((e=>e.type===o.FieldType.time))&&e.fields.some((e=>e.type===o.FieldType.string))}function k(e,t,n,s){const{logSeries:i}=function(e){const t=[],n=[];for(const a of e)!C(a)&&a.fields.length?a.length>0&&t.push(a):n.push(a);return{logSeries:n,metricSeries:t}}(e),r=function(e){if(0===e.length)return;const t=[];let n=[];const s=e.filter((e=>e.fields.length));s.length&&s.forEach((e=>{var a,s;const i=new o.FieldCache(e),r=i.getFirstFieldOfType(o.FieldType.string),l=i.getFirstFieldOfType(o.FieldType.time),d="LabeledTimeValues"===(null===(a=e.meta)||void 0===a||null===(s=a.custom)||void 0===s?void 0:s.frameType)?i.getFieldByName("labels"):void 0;if(void 0!==r&&void 0!==l){const a={series:e,timeField:l,labelsField:d,timeNanosecondField:i.getFieldByName("tsNs"),stringField:r,logLevelField:i.getFieldByName("level"),idField:I(i)};n.push(a);const s=function(e){const{stringField:t,labelsField:n}=e;var a;return void 0!==n?n.values.toArray():[null!==(a=t.labels)&&void 0!==a?a:{}]}(a);s.length>0&&t.push(s)}}));const i=t.flat(),r=i.length>0?(0,o.findCommonLabels)(i):{},d=[];let u=!1;for(const e of n){const{timeField:t,timeNanosecondField:n,stringField:a,logLevelField:s,idField:i,series:l}=e;for(let h=0;h<l.length;h++){var g;const p=t.values.get(h),m=(0,o.toUtc)(p),f=n?n.values.get(h):void 0,v=f||m.valueOf()+"000000",b=null!==(g=a.values.get(h))&&void 0!==g?g:"",x="string"==typeof b?b:JSON.stringify(b),y=o.textUtil.hasAnsiCodes(x),w=!!x.match(/\\n|\\t|\\r/),j=l.meta&&l.meta.searchWords?l.meta.searchWords:[],S=y?c.ansicolor.strip(x):x,C=T(e,h),k=(0,o.findUniqueLabels)(C,r);Object.keys(k).length>0&&(u=!0);let I=o.LogLevel.unknown;const O=s&&s.values.get(h)||C&&C.level;I=O?(0,o.getLogLevelFromKey)(O):(0,o.getLogLevel)(S),d.push({entryFieldIndex:a.index,rowIndex:h,dataFrame:l,logLevel:I,timeFromNow:(0,o.dateTimeFormatTimeAgo)(p),timeEpochMs:m.valueOf(),timeEpochNs:v,timeLocal:(0,o.dateTimeFormat)(p,{timeZone:"browser"}),timeUtc:(0,o.dateTimeFormat)(p,{timeZone:"utc"}),uniqueLabels:k,hasAnsi:y,hasUnescapedContent:w,searchWords:j,entry:S,raw:x,labels:C||{},uid:i?i.values.get(h):h.toString()})}}const m=[];(0,a.size)(r)>0&&m.push({label:p,value:r,kind:o.LogsMetaKind.LabelsMap});const f=e.filter((e=>e.meta&&e.meta.limit)).reduce(((e,t)=>{var n,a,s;return e[null!==(n=t.refId)&&void 0!==n?n:""]=null!==(a=null===(s=t.meta)||void 0===s?void 0:s.limit)&&void 0!==a?a:0,e}),{}),v=Object.values(f).reduce(((e,t)=>e+t),0);v>0&&m.push({label:h,value:v,kind:o.LogsMetaKind.Number});let b=0;const x={};let y=!1;for(const t of e){var w,j,S,C;const e=null===(w=t.meta)||void 0===w||null===(j=w.custom)||void 0===j?void 0:j.lokiQueryStatKey,{refId:n}=t;var k;if(!y&&null!==(S=t.meta)&&void 0!==S&&null!==(C=S.custom)&&void 0!==C&&C.error)m.push({label:"",value:null===(k=t.meta)||void 0===k?void 0:k.custom.error,kind:o.LogsMetaKind.Error}),y=!0;if(n&&!x[n]){var O;if(e&&null!==(O=t.meta)&&void 0!==O&&O.stats){const n=t.meta.stats.find((t=>t.displayName===e));n&&(b+=n.value)}x[n]=!0}}if(b>0){const{text:e,suffix:t}=(0,l.i7)("B")(b);m.push({label:"Total bytes processed",value:`${e} ${t}`,kind:o.LogsMetaKind.String})}return{hasUniqueLabels:u,meta:m,rows:d}}(i);if(r){if(t&&r.rows.length>0){const e=r.rows.sort(o.sortInAscendingOrder),{visibleRange:a,bucketSize:s,visibleRangeMs:i,requestedRangeMs:l}=function(e,t,n){let a,s,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=n,l=t,d=Math.max(l*i,r);if(n){const t=e[0].timeEpochMs;if(s=n.to-n.from,a=n.to-t,a>0){l*=a/s,d=Math.max(Math.ceil(l*i),r);o={from:Math.floor(t/d)*d,to:n.to}}else a=1}return{bucketSize:d,visibleRange:o,visibleRangeMs:a,requestedRangeMs:s}}(e,t,n);r.visibleRange=a,r.series=function(e,t){const n={},a=[];for(const s of e){let e=n[s.logLevel];e||(n[s.logLevel]=e={lastTs:null,datapoints:[],target:s.logLevel,color:g[s.logLevel]},a.push(e));const i=Math.floor(s.timeEpochMs/t)*t;i===e.lastTs?e.datapoints[e.datapoints.length-1][0]++:(e.datapoints.push([1,i]),e.lastTs=i);for(const t of a)t!==e&&t.lastTs!==i&&(t.datapoints.push([0,i]),t.lastTs=i)}return a.map(((e,t)=>{e.datapoints.sort(((e,t)=>e[1]-t[1]));const n=(0,o.toDataFrame)(e),a=new o.FieldCache(n).getFirstFieldOfType(o.FieldType.number);return n.fields[a.index].config.min=0,n.fields[a.index].config.decimals=0,n.fields[a.index].config.color={mode:o.FieldColorModeId.Fixed,fixedColor:e.color},n.fields[a.index].config.custom={drawStyle:d.l8.Bars,barAlignment:d.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:e.color,pointColor:e.color,fillColor:e.color,lineWidth:0,fillOpacity:100,stacking:{mode:d.o0.Normal,group:"A"}},n}))}(e,s),r.meta&&(r.meta=function(e,t,n){var a;let s=[...e.meta];const i=s.findIndex((e=>e.label===h)),r=i>=0&&(null===(a=s[i])||void 0===a?void 0:a.value);if(r&&r>0){let a;if(r===e.rows.length&&t&&n){a=`${r} reached, received logs cover ${(t/n*100).toFixed(2)}% (${o.rangeUtil.msRangeToTimeString(t)}) of your selected time range (${o.rangeUtil.msRangeToTimeString(n)})`}else a=`${r} (${e.rows.length} returned)`;s[i]={label:h,value:a,kind:o.LogsMetaKind.String}}return s}(r,i,l))}else r.series=[];return r.queries=s,r}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:s}}function T(e,t){const{stringField:n,labelsField:a}=e;return void 0!==a?a.values.get(t):null!==(s=n.labels)&&void 0!==s?s:{};var s}function I(e){const t=["id"];for(const n of t){const t=e.getFieldByName(n);if(t)return t}}function O(e,t){const n={};return e.forEach((e=>{const a=t(e);n[a]||(n[a]=[]),n[a].push(e)})),Object.keys(n).map((e=>function(e,t){const n=new o.MutableDataFrame;if(!e.length)return n;const a=e[0].length,s=new o.FieldCache(e[0]).getFirstFieldOfType(o.FieldType.time);if(!s)return n;return n.addField({name:"Time",type:o.FieldType.time},a),n.addField({name:"Value",type:o.FieldType.number,config:t},a),e.forEach((e=>{e.fields.forEach((e=>{if(e.type===o.FieldType.number)for(let t=0;t<a;t++){const a=n.get(t).Value,i=e.values.get(t),r=null===a&&null===i?null:(a||0)+(i||0);n.set(t,{Value:r,Time:s.values.get(t)})}}))})),n}(n[e],function(e,t){const n=t&&e===o.LogLevel.unknown?"logs":e,a=g[e];return{displayNameFromDS:n,color:{mode:o.FieldColorModeId.Fixed,fixedColor:a},custom:{drawStyle:d.l8.Bars,barAlignment:d.pu.Center,lineColor:a,pointColor:a,fillColor:a,lineWidth:1,fillOpacity:100,stacking:{mode:d.o0.Normal,group:"A"}}}}(e,1===Object.keys(n).length))))}function N(e,t,n){const a=n.range.to.valueOf()-n.range.from.valueOf(),l=function(e,t){if(e.__interval){let n=e.__interval_ms.value,a="";return t<5e3?(n=1,a="1ms"):n>x?(n=y,a="1d"):n>b?(n=x,a="1h"):n>v?(n=b,a="1m"):(n=v,a="1s"),{interval:a,intervalMs:n}}return{interval:"$__interval"}}(t.scopedVars,a);return t.interval=l.interval,t.scopedVars.__interval={value:l.interval,text:l.interval},void 0!==l.intervalMs&&(t.intervalMs=l.intervalMs,t.scopedVars.__interval_ms={value:l.intervalMs,text:l.intervalMs}),new s.y((a=>{let s=[];a.next({state:o.LoadingState.Loading,error:void 0,data:[]});const l=e.query(t),d=((0,i.b)(l)?l:(0,r.D)(l)).subscribe({complete:()=>{const e=O(s,n.extractLevel);e[0]&&(e[0].meta={custom:{targets:n.targets,absoluteRange:{from:n.range.from.valueOf(),to:n.range.to.valueOf()}}}),a.next({state:o.LoadingState.Done,error:void 0,data:e}),a.complete()},next:e=>{const{error:t}=e;void 0!==t?(a.next({state:o.LoadingState.Error,error:t,data:[]}),a.error(t)):s=s.concat(e.data.map(o.toDataFrame))},error:e=>{a.next({state:o.LoadingState.Error,error:e,data:[]}),a.error(e)}});return()=>{null==d||d.unsubscribe()}}))}},71290:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});var a=n(42326),s=n(90923);function i(){const e=(0,a.TH)();return[new URLSearchParams(e.search),(e,t)=>{s.locationService.partial(e,t)}]}},53144:(e,t,n)=>{"use strict";n.d(t,{U6:()=>d,ZC:()=>c,qk:()=>l});var a=n(19309),s=n(43215),i=n(90923),r=n(47570),o=n(5831);function l(){let e=i.locationService.getSearchObject().kiosk;switch(e){case"tv":e=!0,o.Z.emit(s.AppEvents.alertSuccess,[a.ag._({id:"navigation.kiosk.tv-alert",message:"Press ESC to exit Kiosk mode"})]);break;case"1":case!0:e=null;break;default:e="tv"}i.locationService.partial({kiosk:e})}function d(){switch(i.locationService.getSearchObject().kiosk){case"tv":return r.UX.TV;case"1":case!0:return r.UX.Full;default:return r.UX.Off}}function c(){i.locationService.partial({kiosk:null})}},5613:(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{r:()=>s});const s=new class{constructor(){a(this,"panelsRendered",0),a(this,"enabled",void 0)}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}},49842:(e,t,n)=>{"use strict";n.d(t,{$l:()=>d,Av:()=>m,F6:()=>h,Jk:()=>p,VW:()=>g,ad:()=>c,hS:()=>u,mE:()=>f,vo:()=>v});var a,s=n(35140),i=n(47570);const r="notifications",o={byId:function(){const e=window.localStorage.getItem(r);if(!e)return{};const t=JSON.parse(e);if(!Object.values(t).every((e=>{return"string"==typeof(t=e).id&&"string"==typeof t.icon&&"string"==typeof t.title&&"string"==typeof t.text;var t})))return{};return t}(),lastRead:Number.parseInt(null!==(a=window.localStorage.getItem("notifications/lastRead"))&&void 0!==a?a:`${Date.now()}`,10)},l=(0,s.oM)({name:"appNotifications",initialState:o,reducers:{notifyApp:(e,t)=>{let{payload:n}=t;Object.values(e.byId).some((e=>{return a=e,(t=n).icon===a.icon&&t.severity===a.severity&&t.text===a.text&&t.title===a.title&&e.showing;var t,a}))||(e.byId[n.id]=n,x(e.byId))},hideAppNotification:(e,t)=>{let{payload:n}=t;n in e.byId&&(e.byId[n].showing=!1,x(e.byId))},clearNotification:(e,t)=>{let{payload:n}=t;delete e.byId[n],x(e.byId)},clearAllNotifications:e=>{e.byId={},x(e.byId)},readAllNotifications:(e,t)=>{let{payload:n}=t;e.lastRead=n}}}),{notifyApp:d,hideAppNotification:c,clearNotification:u,clearAllNotifications:h,readAllNotifications:p}=l.actions,g=l.reducer,m=e=>e.lastRead,f=e=>(e=>Object.values(e.byId).sort(((e,t)=>t.timestamp-e.timestamp)))(e).filter(b),v=e=>Object.values(e.byId).filter((e=>e.showing));function b(e){return e.severity===i.F1.Warning||e.severity===i.F1.Error}function x(e){const t=Object.values(e).filter(b).sort(((e,t)=>t.timestamp-e.timestamp)).slice(0,25).reduce(((e,t)=>(e[t.id]={id:t.id,severity:t.severity,icon:t.icon,title:t.title,text:t.text,traceId:t.traceId,timestamp:t.timestamp,showing:t.showing},e)),{});try{window.localStorage.setItem(r,JSON.stringify(t))}catch(e){console.error("Unable to persist notifications to local storage"),console.error(e)}}},56501:(e,t,n)=>{"use strict";n.d(t,{OQ:()=>l,V4:()=>c,gd:()=>d});var a,s,i=n(35140);const r=null!==(a=null===(s=n(90923).config.bootData)||void 0===s?void 0:s.navTree)&&void 0!==a?a:[],o=(0,i.oM)({name:"navBarTree",initialState:r,reducers:{setStarred:(e,t)=>{const n=e.find((e=>"starred"===e.id)),{id:a,title:s,url:i,isStarred:r}=t.payload;if(n)if(r){n.children||(n.children=[]);const e={id:a,text:s,url:i};n.children.push(e),n.children.sort(((e,t)=>e.text.localeCompare(t.text)))}else{var o,l;const e=null!==(o=null===(l=n.children)||void 0===l?void 0:l.findIndex((e=>e.id===a)))&&void 0!==o?o:-1;var d;if(e>-1)null==n||null===(d=n.children)||void 0===d||d.splice(e,1)}},updateDashboardName:(e,t)=>{const{id:n,title:a,url:s}=t.payload,i=e.find((e=>"starred"===e.id));if(i){var r;const e=null===(r=i.children)||void 0===r?void 0:r.find((e=>e.id===n));var o;if(e)e.text=a,e.url=s,null===(o=i.children)||void 0===o||o.sort(((e,t)=>e.text.localeCompare(t.text)))}}}}),{setStarred:l,updateDashboardName:d}=o.actions,c=o.reducer},87892:(e,t,n)=>{"use strict";n.d(t,{Cu:()=>i,G4:()=>u,H7:()=>d,RL:()=>l});var a=n(35140),s=n(78837);function i(){const e={};return r(e,s.ZP.bootData.navTree),e}function r(e,t,n){for(const a of t){const t=Object.assign({},a,{parentItem:n});e[a.id]=t,a.children&&r(e,a.children,t)}e["not-found"]=Object.assign({},function(e,t){const n={text:e,subTitle:t,icon:"exclamation-triangle"};return{node:n,main:n}}("Page not found","404 Error").node)}const o={},l=(0,a.PH)("navIndex/updateNavIndex"),d=(0,a.PH)("navIndex/updateConfigurationSubtitle"),c=(e,t)=>{var n,a;return Object.assign({},e,{parentItem:Object.assign({},e.parentItem,{text:null!==(n=null===(a=e.parentItem)||void 0===a?void 0:a.text)&&void 0!==n?n:"",subTitle:t})})},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;if(l.match(t)){const n={},a=t.payload;for(const e of a.children)n[e.id]=Object.assign({},e,{parentItem:a});return Object.assign({},e,n)}if(d.match(t)){const n=`Organization: ${t.payload}`;return Object.assign({},e,{cfg:Object.assign({},e.cfg,{subTitle:n}),datasources:c(e.datasources,n),users:c(e.users,n),teams:c(e.teams,n),plugins:c(e.plugins,n),"org-settings":c(e["org-settings"],n),apikeys:c(e.apikeys,n)})}return e}},8674:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});const a=()=>{const e={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:e,main:e}},s=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e[t]){const n=r(e[t]);return{node:n,main:s?n:i(n)}}return n||a()};function i(e){return e.parentItem?i(e.parentItem):e}function r(e){const t=Object.assign({},e);if(t.parentItem){t.parentItem=Object.assign({},t.parentItem);const n=t.parentItem;n.children&&(n.children=n.children.map((n=>n.id===e.id?Object.assign({},t,{active:!0}):n))),t.parentItem=r(n)}return t}},76187:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var a=n(28659);class s{constructor(e){this.resourceUri=e}update(e){return a.ae.put(`/api/${this.resourceUri}/preferences`,e)}patch(e){return a.ae.patch(`/api/${this.resourceUri}/preferences`,e)}load(){return a.ae.get(`/api/${this.resourceUri}/preferences`)}}},28659:(e,t,n)=>{"use strict";n.d(t,{y$:()=>G,ae:()=>K,i:()=>Q});var a,s=n(72646),i=n(58799),r=n(16976),o=n(4203),l=n(3321),d=n(86558),c=n(71808),u=n(94396),h=n(2693),p=n(35778),g=n(61292),m=n(39419),f=n(14444),v=n(71114),b=n(2027),x=n(77809),y=n(40818),w=n(17774),j=n(34110),S=n(43215),C=n(90923),k=n(5831),T=n(78837),I=n(20881),O=n(13868),N=n(36636),F=(n(68404),n(3490)),D=n(94025),P=n(45916);const A=e=>{const t=(0,F.useTheme2)(),n=M(t),s=(0,D.J)(t),i=Boolean(e.maxConcurrentSessions);return(0,P.jsxs)(F.Portal,{children:[(0,P.jsx)("div",{className:s.modal,children:(0,P.jsxs)(F.InfoBox,{title:"You have been automatically signed out",severity:"warning",className:n.infobox,children:[(0,P.jsxs)("div",{className:n.text,children:[(0,P.jsxs)("p",{children:["Your session token was automatically revoked because you have reached",(0,P.jsx)("strong",{children:` the maximum number of ${i?e.maxConcurrentSessions:""} concurrent sessions `}),"for your account."]}),a||(a=(0,P.jsxs)("p",{children:[(0,P.jsx)("strong",{children:"To resume your session, sign in again."}),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically."]}))]}),(0,P.jsx)(F.Button,{size:"md",variant:"primary",onClick:()=>{window.location.reload()},children:"Sign in"})]})}),(0,P.jsx)("div",{className:(0,N.cx)(s.modalBackdrop,n.backdrop)})]})},M=(0,F.stylesFactory)((e=>({infobox:N.css`
      margin-bottom: 0;
    `,text:N.css`
      margin: ${e.spacing(1,0,2)};
    `,backdrop:N.css`
      background-color: ${e.colors.background.canvas};
      opacity: 0.8;
    `})));var R=n(21169),$=n(25857),L=n(65184);function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let V;!function(e){e[e.Pending=0]="Pending",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done"}(V||(V={}));class B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E(this,"state",{}),E(this,"queue",new s.x),E(this,"updates",new s.x),E(this,"add",((e,t)=>this.queue.next({id:e,options:t,state:V.Pending}))),E(this,"setInProgress",(e=>this.queue.next({id:e,state:V.InProgress}))),E(this,"setDone",(e=>this.queue.next({id:e,state:V.Done}))),E(this,"getUpdates",(()=>this.updates.asObservable())),E(this,"getUpdate",(e=>{const t=Object.keys(e).filter((t=>e[t].state===V.InProgress)).length;return{noOfPending:Object.keys(e).filter((t=>e[t].state===V.Pending)).length,noOfInProgress:t,state:e}})),E(this,"publishUpdate",((e,t)=>{this.printState(e,t),this.updates.next(e)})),E(this,"printState",((e,t)=>{if(!t)return;const n=Object.keys(e.state).reduce(((t,n)=>{const a={id:n,state:e.state[n].state};return t.push(a),t}),[]);console.log("FetchQueue noOfStarted",e.noOfInProgress),console.log("FetchQueue noOfNotStarted",e.noOfPending),console.log("FetchQueue state",n)})),this.queue.subscribe((t=>{const{id:n,state:a,options:s}=t;if(this.state[n]||(this.state[n]={state:V.Pending,options:{}}),a===V.Done){delete this.state[n];const t=this.getUpdate(this.state);return void this.publishUpdate(t,e)}this.state[n].state=a,s&&(this.state[n].options=s);const i=this.getUpdate(this.state);this.publishUpdate(i,e)}))}}var z=n(76747);class _{constructor(e,t,n){const a=null!=n&&n.http2Enabled?1e3:5;e.getUpdates().pipe((0,g.h)((e=>{let{noOfPending:t}=e;return t>0})),(0,z.b)((e=>{let{state:t,noOfInProgress:n}=e;const s=Object.keys(t).filter((e=>t[e].state===V.Pending&&!(0,L.mu)(t[e].options.url))).reduce(((e,n)=>{const a={id:n,options:t[n].options};return e.push(a),e}),[]),i=Object.keys(t).filter((e=>t[e].state===V.Pending&&(0,L.mu)(t[e].options.url))).reduce(((e,n)=>{const a={id:n,options:t[n].options};return e.push(a),e}),[]),r=Math.max(a-n-s.length,0),o=i.slice(0,r);return s.concat(o)}))).subscribe((e=>{let{id:n,options:a}=e;t.add(n,a)}))}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H{constructor(e,t){U(this,"queue",new s.x),U(this,"responses",new s.x),U(this,"add",((e,t)=>{this.queue.next({id:e,options:t})})),U(this,"getResponses",(e=>this.responses.asObservable().pipe((0,g.h)((t=>t.id===e))))),this.queue.subscribe((n=>{const{id:a,options:s}=n;e.setInProgress(a),this.responses.next({id:a,observable:t(s)})}))}}var W=n(61959);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z="cancel_all_requests_request_id";class G{constructor(e){q(this,"inFlightRequests",new s.x),q(this,"HTTP_REQUEST_CANCELED",-1),q(this,"noBackendCache",void 0),q(this,"inspectorStream",new s.x),q(this,"fetchQueue",void 0),q(this,"responseQueue",void 0),q(this,"dependencies",{fromFetch:h.U,appEvents:k.Z,contextSrv:W.Vt,logout:()=>{W.Vt.setLoggedOut(),window.location.reload()}}),e&&(this.dependencies=Object.assign({},this.dependencies,e)),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new B,this.responseQueue=new H(this.fetchQueue,this.internalFetch),new _(this.fetchQueue,this.responseQueue,(0,T.iE)())}async request(e){return await(0,i.n)(this.fetch(e).pipe((0,p.U)((e=>e.data))))}fetch(e){const t=(0,j.Z)(),n=this.fetchQueue;return new r.y((a=>{const s=new o.w0;return s.add(this.responseQueue.getResponses(t).subscribe((e=>{s.add(e.observable.subscribe(a))}))),this.fetchQueue.add(t,e),function(){n.setDone(t),s.unsubscribe()}}))}internalFetch(e){e.requestId&&this.inFlightRequests.next(e.requestId),e=this.parseRequestOptions(e);const t=(0,I.v)();null!==t&&""!==t&&(e.headers||(e.headers={}),C.config.jwtUrlLogin&&C.config.jwtHeaderName&&(e.headers[C.config.jwtHeaderName]=`${t}`));const n=this.getFromFetchStream(e),a=n.pipe(this.toFailureStream(e)),s=n.pipe((0,g.h)((e=>!0===e.ok)),(0,m.b)((e=>{this.showSuccessAlert(e),this.inspectorStream.next(e)})));return(0,l.T)(s,a).pipe((0,f.K)((t=>(0,d._)(this.processRequestError(e,t)))),this.handleStreamCancellation(e))}resolveCancelerIfExists(e){this.inFlightRequests.next(e)}cancelAllInFlightRequests(){this.inFlightRequests.next(Z)}async datasourceRequest(e){return(0,i.n)(this.fetch(e))}parseRequestOptions(e){var t,n;const a=null===(t=this.dependencies.contextSrv.user)||void 0===t?void 0:t.orgId;if(e.retry=null!==(n=e.retry)&&void 0!==n?n:0,(0,L.R8)(e.url)){var s,i,r;if(a)e.headers=null!==(i=e.headers)&&void 0!==i?i:{},e.headers["X-Grafana-Org-Id"]=a;if(e.url.startsWith("/")&&(e.url=e.url.substring(1)),null!==(s=e.headers)&&void 0!==s&&s.Authorization&&(e.headers["X-DS-Authorization"]=e.headers.Authorization,delete e.headers.Authorization),this.noBackendCache)e.headers=null!==(r=e.headers)&&void 0!==r?r:{},e.headers["X-Grafana-NoCache"]="true"}return void 0===e.hideFromInspector&&(e.hideFromInspector=(0,L.R8)(e.url)&&!(0,L.mu)(e.url)),e}getFromFetchStream(e){const t=(0,$.Xv)(e),n=(0,$.nS)(e);return this.dependencies.fromFetch(t,n).pipe((0,v.z)((async t=>{var n;const{status:a,statusText:s,ok:i,headers:r,url:o,type:l,redirected:d}=t,c=null!==(n=e.responseType)&&void 0!==n?n:(0,$.rZ)(r)?"json":void 0;return{status:a,statusText:s,ok:i,data:await(0,$.aO)(t,c),headers:r,url:o,type:l,redirected:d,config:e}})),(0,b.B)())}toFailureStream(e){const{isSignedIn:t}=this.dependencies.contextSrv.user;return n=>n.pipe((0,g.h)((e=>!1===e.ok)),(0,v.z)((t=>{const{status:n,statusText:a,data:s}=t,i={status:n,statusText:a,data:s,config:e};return(0,d._)(i)})),(0,x.a)((n=>n.pipe((0,v.z)(((n,a)=>{const s=0===a&&0===e.retry;var i,r,o,l;return 401===n.status&&(0,L.R8)(e.url)&&s&&t?"ERR_TOKEN_REVOKED"===(null===(i=n.data)||void 0===i||null===(r=i.error)||void 0===r?void 0:r.id)?(this.dependencies.appEvents.publish(new R.Dn({component:A,props:{maxConcurrentSessions:null===(o=n.data)||void 0===o||null===(l=o.error)||void 0===l?void 0:l.maxConcurrentSessions}})),(0,c.of)({})):(0,u.D)(this.loginPing()).pipe((0,f.K)((e=>401===e.status?(this.dependencies.logout(),(0,d._)(e)):(0,d._)(e)))):(0,d._)(n)}))))))}showApplicationErrorAlert(e){}showSuccessAlert(e){const{config:t}=e;if(!1===t.showSuccessAlert)return;if(void 0===t.showSuccessAlert&&("GET"===t.method||(0,L.mu)(t.url)||!(0,L.R8)(t.url)))return;const n=e.data;null!=n&&n.message&&this.dependencies.appEvents.emit(S.AppEvents.alertSuccess,[n.message])}showErrorAlert(e,t){if(!1===e.showErrorAlert)return;if(void 0===e.showErrorAlert&&((0,L.mu)(e.url)||!(0,L.R8)(e.url)))return;let n="",a=t.data.message;a.length>80&&(n=a,a="Error"),422===t.status&&(a="Validation failed"),this.dependencies.appEvents.emit(t.status<500?S.AppEvents.alertWarning:S.AppEvents.alertError,[a,n,t.data.traceID])}processRequestError(e,t){var n;return t.data=null!==(n=t.data)&&void 0!==n?n:{message:"Unexpected error"},"string"==typeof t.data&&(t.data={message:t.data,error:t.statusText,response:t.data}),t.data&&!t.data.message&&"string"==typeof t.data.error&&(t.data.message=t.data.error),t.data.message&&setTimeout((()=>{t.isHandled||this.showErrorAlert(e,t)}),50),this.inspectorStream.next(t),t}handleStreamCancellation(e){return t=>t.pipe((0,y.R)(this.inFlightRequests.pipe((0,g.h)((t=>{let n=!1;return e&&e.requestId&&e.requestId===t&&(n=!0),t===Z&&(n=!0),n})))),(0,w.T)((()=>({type:S.DataQueryErrorType.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:e}))))}getInspectorStream(){return this.inspectorStream}async get(e,t,n){return await this.request({method:"GET",url:e,params:t,requestId:n})}async delete(e,t){return await this.request({method:"DELETE",url:e,data:t})}async post(e,t){return await this.request({method:"POST",url:e,data:t})}async patch(e,t){return await this.request({method:"PATCH",url:e,data:t})}async put(e,t){return await this.request({method:"PUT",url:e,data:t})}withNoBackendCache(e){return this.noBackendCache=!0,e().finally((()=>{this.noBackendCache=!1}))}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(e){return this.get("/api/search",e)}getDashboardByUid(e){return e.indexOf("/")>0&&C.config.featureToggles.dashboardsFromStorage?(0,O.$)().getDashboard(e):this.get(`/api/dashboards/uid/${e}`)}getPublicDashboardByUid(e){return this.get(`/api/public/dashboards/${e}`)}getFolderByUid(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new URLSearchParams;return t.withAccessControl&&n.set("accesscontrol","true"),this.get(`/api/folders/${e}?${n.toString()}`)}}const K=new G,Q=()=>K},61959:(e,t,n)=>{"use strict";n.d(t,{Vt:()=>c});var a=n(82897),s=n(43215),i=n(90923),r=n(47570),o=n(78837);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d{constructor(){l(this,"isSignedIn",void 0),l(this,"id",void 0),l(this,"login",void 0),l(this,"email",void 0),l(this,"name",void 0),l(this,"externalUserId",void 0),l(this,"lightTheme",void 0),l(this,"orgCount",void 0),l(this,"orgId",void 0),l(this,"orgName",void 0),l(this,"orgRole",void 0),l(this,"isGrafanaAdmin",void 0),l(this,"gravatarUrl",void 0),l(this,"timezone",void 0),l(this,"weekStart",void 0),l(this,"locale",void 0),l(this,"helpFlags1",void 0),l(this,"hasEditPermissionInFolders",void 0),l(this,"permissions",void 0),l(this,"fiscalYearStartMonth",void 0),this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.lightTheme=!1,this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.weekStart="",this.gravatarUrl="",o.ZP.bootData.user&&(0,a.extend)(this,o.ZP.bootData.user)}}let c=new class{constructor(){l(this,"pinned",void 0),l(this,"version",void 0),l(this,"user",void 0),l(this,"isSignedIn",void 0),l(this,"isGrafanaAdmin",void 0),l(this,"isEditor",void 0),l(this,"sidemenuSmallBreakpoint",!1),l(this,"hasEditPermissionInFolders",void 0),l(this,"minRefreshInterval",void 0),o.ZP.bootData||(o.ZP.bootData={user:{},settings:{}}),this.user=new d,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=o.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,i.getBackendSrv)().get("/api/access-control/user/permissions",{reloadcache:!0}))}catch(e){console.error(e)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(e){return"ServerAdmin"===e?this.isGrafanaAdmin:this.user.orgRole===e}accessControlEnabled(){return o.ZP.rbacEnabled}accessControlBuiltInRoleAssignmentEnabled(){return o.ZP.rbacBuiltInRoleAssignmentEnabled}licensedAccessControlEnabled(){return(0,i.featureEnabled)("accesscontrol")&&o.ZP.rbacEnabled}hasPermissionInMetadata(e,t){var n;return!this.accessControlEnabled()||!(null===(n=t.accessControl)||void 0===n||!n[e])}hasPermission(e){var t;return!this.accessControlEnabled()||!(null===(t=this.user.permissions)||void 0===t||!t[e])}isGrafanaVisible(){return void 0===document.visibilityState||"visible"===document.visibilityState}isAllowedInterval(e){return!o.ZP.minRefreshInterval||s.rangeUtil.intervalToMs(e)>=s.rangeUtil.intervalToMs(o.ZP.minRefreshInterval)}getValidInterval(e){return this.isAllowedInterval(e)?e:o.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(r.bW.DataSourcesExplore):(this.isEditor||o.ZP.viewersCanEdit)&&o.ZP.exploreEnabled}hasAccess(e,t){return this.accessControlEnabled()?this.hasPermission(e):t}hasAccessInMetadata(e,t,n){return this.accessControlEnabled()?this.hasPermissionInMetadata(e,t):n}evaluatePermission(e,t){return this.accessControlEnabled()?t.some((e=>this.hasPermission(e)))?[]:["Reject"]:e()}}},61884:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(82897),s=n(78837),i=n(17421);const r=new class{constructor(){}addDashboardImpression(e){const t=this.impressionKey();let n=[];i.Z.exists(t)&&(n=JSON.parse(i.Z.get(t)),(0,a.isArray)(n)||(n=[])),n=n.filter((t=>e!==t)),n.unshift(e),n.length>50&&n.pop(),i.Z.set(t,JSON.stringify(n))}getDashboardOpened(){let e=i.Z.get(this.impressionKey())||"[]";return e=JSON.parse(e),e=(0,a.filter)(e,(e=>(0,a.isNumber)(e))),e}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}},54819:(e,t,n)=>{"use strict";n.d(t,{K:()=>y});var a=n(35582),s=n.n(a),i=(n(76767),n(93013),n(43215)),r=n(90923),o=n(5831),l=n(62236),d=n(72968),c=n(30969),u=n(75478),h=n(67436),p=n(21169),g=n(67163),m=n(98163),f=n(53144),v=n(78837),b=n(76187);async function x(e){const t=v.vc.theme,n=(0,i.createTheme)({colors:{mode:t.isDark?"light":"dark"}});if(o.Z.publish(new r.ThemeChangedEvent(n)),e)return;const a=document.createElement("link");a.rel="stylesheet",a.href=v.vc.bootData.themePaths[n.colors.mode],document.body.appendChild(a);const s=document.getElementsByTagName("link");for(let e=0;e<s.length;e++){const n=s[e];n.href&&n.href.indexOf(`build/grafana.${t.type}`)>0&&setTimeout((()=>n.remove()),500)}if(!m.Vt.isSignedIn)return;const l=new b.y("user"),d=await l.load();await l.update(Object.assign({},d,{theme:n.colors.mode}))}const y=new class{reset(){s().reset()}initGlobals(){"/login"!==r.locationService.getLocation().pathname&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("s o",this.openSearch),this.bind("t a",this.makeAbsoluteTime),this.bind("f",this.openSearch),this.bind("esc",this.exit),this.bindGlobal("esc",this.globalEsc)),this.bind("t t",(()=>x(!1))),this.bind("t r",(()=>x(!0)))}globalEsc(){const e=document,t=e.activeElement;document.querySelectorAll(".slate-typeahead--open").length>0||(t&&t.blur&&("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName||t.hasAttribute("data-slate-editor"))?e.activeElement.blur():this.exit())}toggleNav(){window.location.href=i.locationUtil.getUrlForPartial(r.locationService.getLocation(),{"__feature.topnav":(!r.config.featureToggles.topnav).toString()})}openSearch(){r.locationService.partial({search:"open"})}closeSearch(){r.locationService.partial({search:null})}openAlerting(){r.locationService.push("/alerting")}goToHome(){r.locationService.push("/")}goToProfile(){r.locationService.push("/profile")}makeAbsoluteTime(){o.Z.publish(new p.QI)}showHelpModal(){o.Z.publish(new p.Dn({component:g.B}))}exit(){const e=r.locationService.getSearchObject();e.editview?r.locationService.partial({editview:null}):e.inspect?r.locationService.partial({inspect:null,inspectTab:null}):e.editPanel?r.locationService.partial({editPanel:null,tab:null}):e.viewPanel?r.locationService.partial({viewPanel:null,tab:null}):(e.kiosk&&(0,f.ZC)(),e.search&&this.closeSearch())}showDashEditView(){r.locationService.partial({editview:"settings"})}bind(e,t){s().bind(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}bindGlobal(e,t){s().bindGlobal(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}unbind(e,t){s().unbind(e,t)}bindWithPanelId(e,t){this.bind(e,function(e){return()=>{const t=document.querySelectorAll(":hover");for(let s=t.length-1;s>0;s--){var n;const i=t[s];var a;null!==(n=i.dataset)&&void 0!==n&&n.panelid&&e(parseInt(null===(a=i.dataset)||void 0===a?void 0:a.panelid,10))}}}(t))}setupTimeRangeBindings(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.bind("t z",(()=>{o.Z.publish(new p.p8({scale:2,updateUrl:e}))})),this.bind("ctrl+z",(()=>{o.Z.publish(new p.p8({scale:2,updateUrl:e}))})),this.bind("t left",(()=>{o.Z.publish(new p.Qt({direction:p.Im.Left,updateUrl:e}))})),this.bind("t right",(()=>{o.Z.publish(new p.Qt({direction:p.Im.Right,updateUrl:e}))}))}setupDashboardBindings(e){this.bind("mod+o",(()=>{e.graphTooltip=(e.graphTooltip+1)%3,e.events.publish(new i.LegacyGraphHoverClearEvent),e.startRefresh()})),this.bind("mod+s",(()=>{e.meta.canSave&&o.Z.publish(new p.Dn({component:d.d,props:{dashboard:e}}))})),this.setupTimeRangeBindings(),this.bindWithPanelId("e",(t=>{if(e.canEditPanelById(t)){const e=void 0!==r.locationService.getSearchObject().editPanel;r.locationService.partial({editPanel:e?null:t})}})),this.bindWithPanelId("v",(e=>{const t=void 0!==r.locationService.getSearchObject().viewPanel;r.locationService.partial({viewPanel:t?null:e})})),this.bindWithPanelId("p l",(t=>{const n=e.getPanelById(t),a=Object.assign({},n.options);a.legend.showLegend?a.legend.showLegend=!1:a.legend.showLegend=!0,n.updateOptions(a)})),this.bindWithPanelId("i",(e=>{r.locationService.partial({inspect:e})})),m.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",(async t=>{const n=e.getPanelById(t),a=await(0,l.H6)({panel:n,datasourceSrv:(0,h.ak)(),timeSrv:(0,u.$t)()});if(a){const e=i.locationUtil.stripBaseFromUrl(a);e&&r.locationService.push(e)}})),this.bindWithPanelId("p r",(t=>{!e.canEditPanelById(t)||e.panelInView||e.panelInEdit||o.Z.publish(new p.Eb(t))})),this.bindWithPanelId("p d",(t=>{if(e.canEditPanelById(t)){const n=e.getPanelInfoById(t).index;e.duplicatePanel(e.panels[n])}})),this.bindWithPanelId("p s",(t=>{const n=e.getPanelInfoById(t);o.Z.publish(new p.Dn({component:c.V8,props:{dashboard:e,panel:null==n?void 0:n.panel}}))})),this.bind("d l",(()=>{e.toggleLegendsForAll()})),this.bind("d shift+c",(()=>{e.collapseRows()})),this.bind("d shift+e",(()=>{e.expandRows()})),this.bind("d n",(()=>{r.locationService.push("/dashboard/new")})),this.bind("d r",(()=>{e.startRefresh()})),this.bind("d s",(()=>{this.showDashEditView()})),this.bind("d k",(()=>{(0,f.qk)()})),this.bind("d a",(()=>{const e=r.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+e}))}}},18293:(e,t,n)=>{"use strict";n.d(t,{i:()=>u});var a=n(82897),s=n(61959),i=n(61884),r=n(17421),o=n(97621),l=n(97982),d=n(80455),c=n(28659);class u{getRecentDashboards(e){return this.queryForRecentDashboards().then((t=>{t.length>0&&(e.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:r.Z.getBool(`${o.qi}.recent`,!0),items:t,type:l.o.DashFolder})}))}queryForRecentDashboards(){const e=(0,a.take)(i.Z.getDashboardOpened(),30);return 0===e.length?Promise.resolve([]):c.ae.search({dashboardIds:e}).then((t=>e.map((e=>t.find((t=>t.id===e)))).filter((e=>e&&!e.isStarred))))}getStarred(e){return s.Vt.isSignedIn?c.ae.search({starred:!0,limit:30}).then((t=>{t.length>0&&(e.starred={title:"Starred",icon:"star",score:-2,expanded:r.Z.getBool(`${o.qi}.starred`,!0),items:t,type:l.o.DashFolder})})):Promise.resolve()}search(e){var t;const n={},s=[],i=(0,a.clone)(e),r=(0,d.L)(e)||(null===(t=i.folderIds)||void 0===t?void 0:t.length)>0;return i.folderIds=i.folderIds||[],i.layout===l.A.List?c.ae.search(Object.assign({},i,{type:l.o.DashDB})).then((e=>e.length?[{title:"",items:e}]:[])):(r||(i.folderIds=[0]),e.skipRecent||r||s.push(this.getRecentDashboards(n)),e.skipStarred||r||s.push(this.getStarred(n)),s.push(c.ae.search(i).then((e=>this.handleSearchResult(n,e)))),Promise.all(s).then((()=>(0,a.sortBy)((0,a.values)(n),"score"))))}handleSearchResult(e,t){if(0===t.length)return e;for(const n of t)"dash-folder"===n.type&&(e[n.id]={id:n.id,uid:n.uid,title:n.title,expanded:!1,items:[],url:n.url,icon:"folder",score:(0,a.keys)(e).length,type:n.type});for(const n of t){if("dash-folder"===n.type)continue;let t=e[n.folderId||0];t||(t=n.folderId?{id:n.folderId,uid:n.folderUid,title:n.folderTitle,url:n.folderUrl,items:[],icon:"folder-open",score:(0,a.keys)(e).length,type:l.o.DashFolder}:{id:0,title:"General",items:[],icon:"folder-open",score:(0,a.keys)(e).length,type:l.o.DashFolder},e[n.folderId||0]=t),t.expanded=!0,t.items&&t.items.push(n)}}getDashboardTags(){return c.ae.get("/api/dashboards/tags")}getSortOptions(){return c.ae.get("/api/search/sorting")}}},17421:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=new class{get(e){return window.localStorage[e]}set(e,t){window.localStorage[e]=t}getBool(e,t){return void 0===t||this.exists(e)?"true"===window.localStorage[e]:t}getObject(e,t){let n=t;if(this.exists(e)){const a=window.localStorage[e];try{n=JSON.parse(a)}catch(n){console.error(`Error parsing store object: ${e}. Returning default: ${t}. [${n}]`)}}return n}setObject(e,t){let n;try{n=JSON.stringify(t)}catch(t){throw new Error(`Could not stringify object: ${e}. [${t}]`)}try{this.set(e,n)}catch(t){const n=new Error(`Could not save item in localStorage: ${e}. [${t}]`);throw t instanceof Error&&(n.name=t.name),n}return!0}exists(e){return void 0!==window.localStorage[e]}delete(e){window.localStorage.removeItem(e)}}},65660:(e,t,n)=>{"use strict";n.d(t,{M:()=>o,Z:()=>i});var a=n(82897);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){if(s(this,"columns",void 0),s(this,"rows",void 0),s(this,"type",void 0),s(this,"columnMap",void 0),s(this,"refId",void 0),s(this,"meta",void 0),this.columns=[],this.columnMap={},this.rows=[],this.type="table",e){if(e.columns)for(const t of e.columns)this.addColumn(t);if(e.rows)for(const t of e.rows)this.addRow(t)}}sort(e){null===e.col||void 0===e.col||this.columns.length<=e.col||(this.rows.sort(((t,n)=>+(null==(t=t[e.col]))-+(null==(n=n[e.col]))||+(t>n)||-(t<n))),e.desc&&this.rows.reverse(),this.columns[e.col].sort=!0,this.columns[e.col].desc=e.desc)}addColumn(e){this.columnMap[e.text]||(this.columns.push(e),this.columnMap[e.text]=e)}addRow(e){this.rows.push(e)}}function r(e,t,n){let a=!1;for(let s=0;s<e.length;s++)if(void 0!==t[s]&&void 0!==n[s]){if(t[s]!==n[s])return!1}else void 0!==t[s]&&void 0!==n[s]||(a=!0);return a}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const o=e||new i;if(1===arguments.length)return o;if(2===arguments.length)return o.columns=n[0].hasOwnProperty("columns")?[...n[0].columns]:[],o.rows=n[0].hasOwnProperty("rows")?[...n[0].rows]:[],o;const l=n.filter((e=>!!e.columns)),d={},c=l.slice().reduce(((e,t)=>(t.columns.forEach((t=>{const{text:n}=t;void 0===d[n]&&(d[n]=e.length,e.push(t))})),e)),[]),u=l.map((e=>e.columns.map((e=>d[e.text])))),h=l.reduce(((e,t,n)=>{const a=u[n];return t.rows.forEach((t=>{const n=[];a.forEach(((e,a)=>{n[e]=t[a]})),e.push(n)})),e}),[]),p={},g=h.reduce(((e,t,n)=>{if(!p[n]){let s=n+1;for(;s<h.length;){const e=(0,a.findIndex)(h,(e=>r(c,t,e)),s);if(!(e>-1))break;{const n=h[e];for(let e=0;e<c.length;e++)void 0===t[e]&&void 0!==n[e]&&(t[e]=n[e]);p[e]=n,s=e+1}}e.push(t)}return e}),[]);return o.columns=c,o.rows=g,o}},9166:(e,t,n)=>{"use strict";n.d(t,{W:()=>o,Z:()=>l});var a=n(82897),s=n(43215);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!e)return!1;if("/"===e[0]){const n=(0,s.stringToJsRegex)(e);return null!=t.match(n)}return e===t}function o(e,t,n){for(let n=0;n<e.length;n++){const i=e[n],r=t.yaxes[(i.yaxis||1)-1],o=(0,s.getValueFormat)(r.format);(0,a.isNumber)(t.decimals)?i.updateLegendValues(o,t.decimals):(0,a.isNumber)(r.decimals)?i.updateLegendValues(o,r.decimals+1):i.updateLegendValues(o,null)}}class l{constructor(e){i(this,"datapoints",void 0),i(this,"id",void 0),i(this,"dataFrameIndex",void 0),i(this,"fieldIndex",void 0),i(this,"label",void 0),i(this,"alias",void 0),i(this,"aliasEscaped",void 0),i(this,"color",void 0),i(this,"valueFormater",void 0),i(this,"stats",void 0),i(this,"legend",void 0),i(this,"hideTooltip",void 0),i(this,"allIsNull",void 0),i(this,"allIsZero",void 0),i(this,"decimals",void 0),i(this,"hasMsResolution",void 0),i(this,"isOutsideRange",void 0),i(this,"lines",void 0),i(this,"hiddenSeries",void 0),i(this,"dashes",void 0),i(this,"bars",void 0),i(this,"points",void 0),i(this,"yaxis",void 0),i(this,"zindex",void 0),i(this,"stack",void 0),i(this,"nullPointMode",void 0),i(this,"fillBelowTo",void 0),i(this,"transform",void 0),i(this,"flotpairs",void 0),i(this,"unit",void 0),this.datapoints=e.datapoints,this.label=e.alias,this.id=e.alias,this.alias=e.alias,this.aliasEscaped=(0,a.escape)(e.alias),this.color=e.color,this.bars={fillColor:e.color},this.valueFormater=(0,s.getValueFormat)("none"),this.stats={},this.legend=!0,this.unit=e.unit,this.dataFrameIndex=e.dataFrameIndex,this.fieldIndex=e.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(e){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let a=0;a<e.length;a++){const s=e[a];r(s.alias,this.alias)&&(void 0!==s.lines&&(this.lines.show=s.lines),void 0!==s.dashes&&(this.dashes.show=s.dashes,this.lines.lineWidth=0),void 0!==s.points&&(this.points.show=s.points),void 0!==s.bars&&(this.bars.show=s.bars),void 0!==s.fill&&(this.lines.fill=0===(n=s.fill)?.001:n/10),void 0!==s.fillGradient&&(this.lines.fillColor=(t=s.fillGradient)?{colors:[{opacity:0},{opacity:t/10}]}:null),void 0!==s.stack&&(this.stack=s.stack),void 0!==s.linewidth&&(this.lines.lineWidth=this.dashes.show?0:s.linewidth,this.dashes.lineWidth=s.linewidth),void 0!==s.dashLength&&(this.dashes.dashLength[0]=s.dashLength),void 0!==s.spaceLength&&(this.dashes.dashLength[1]=s.spaceLength),void 0!==s.nullPointMode&&(this.nullPointMode=s.nullPointMode),void 0!==s.pointradius&&(this.points.radius=s.pointradius),void 0!==s.steppedLine&&(this.lines.steps=s.steppedLine),void 0!==s.zindex&&(this.zindex=s.zindex),void 0!==s.fillBelowTo&&(this.fillBelowTo=s.fillBelowTo),void 0!==s.color&&this.setColor(s.color),void 0!==s.transform&&(this.transform=s.transform),void 0!==s.legend&&(this.legend=s.legend),void 0!==s.hideTooltip&&(this.hideTooltip=s.hideTooltip),void 0!==s.yaxis&&(this.yaxis=s.yaxis),void 0!==s.hiddenSeries&&(this.hiddenSeries=s.hiddenSeries))}var t,n}getFlotPairs(e){const t=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const n="connected"===e,s="null as zero"===e;let i,r,o,l=0,d=0,c=!0;for(let e=0;e<this.datapoints.length;e++){if(r=this.datapoints[e][0],i=this.datapoints[e][1],void 0!==o){const e=i-o;e<this.stats.timeStep&&(this.stats.timeStep=e)}if(o=i,null===r){if(n)continue;s&&(r=0)}null!==r&&((0,a.isNumber)(r)&&(this.stats.total+=r,this.allIsNull=!1,l++),r>this.stats.max&&(this.stats.max=r),r<this.stats.min&&(this.stats.min=r),null===this.stats.first?this.stats.first=r:d>r?(c=!1,e===this.datapoints.length-1&&(this.stats.delta+=r)):(this.stats.delta+=c?r-d:r,c=!0),d=r,r<this.stats.logmin&&r>0&&(this.stats.logmin=r),0!==r&&(this.allIsZero=!1)),t.push([i,r])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),t.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/l,this.stats.current=t[t.length-1][1],null===this.stats.current&&t.length>1&&(this.stats.current=t[t.length-2][1])),null!==this.stats.max&&null!==this.stats.min&&(this.stats.range=this.stats.max-this.stats.min),null!==this.stats.current&&null!==this.stats.first&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=t.length,t}updateLegendValues(e,t){this.valueFormater=e,this.decimals=t}formatValue(e){return(0,a.isFinite)(e)||(e=null),(0,s.formattedValueToString)(this.valueFormater(e,this.decimals))}isMsResolutionNeeded(){for(let e=0;e<this.datapoints.length;e++)if(null!==this.datapoints[e][1]&&void 0!==this.datapoints[e][1]){const t=this.datapoints[e][1].toString();if(13===t.length&&t%1e3!=0)return!0}return!1}hideFromLegend(e){return!(!e.hideEmpty||!this.allIsNull)||(!this.legend||!(!e.hideZero||!this.allIsZero))}setColor(e){this.color=e,this.bars.fillColor=e}}},11622:(e,t,n)=>{"use strict";n.d(t,{E:()=>d,f:()=>l});var a=n(68404),s=n(90923),i=n(3490),r=n(98163),o=n(45916);const l=e=>{let{children:t,value:n}=e;const[l,d]=(0,a.useState)(n);return(0,a.useEffect)((()=>{const e=r.h$.subscribe(s.ThemeChangedEvent,(e=>{d(e.payload)}));return()=>e.unsubscribe()}),[]),(0,o.jsx)(i.ThemeContext.Provider,{value:l,children:t})},d=(e,t)=>function(n){return(0,o.jsx)(l,{value:t,children:a.createElement(e,Object.assign({},n))})}},32458:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});class a extends window.Worker{constructor(e,t){const n=e.toString(),a=n.split("/");a.pop();const s=`${a.join("/")}/`,i=`importScripts('${n}');`,r=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${s}'; ${i}`],{type:"application/javascript"}));super(r,t),URL.revokeObjectURL(r)}}},66728:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var a=n(78837);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.ZP.rbacEnabled?Object.assign({},e,{accesscontrol:!0}):e}},8590:(e,t,n)=>{"use strict";function a(e){return e.map(s).sort(((e,t)=>t.sortRank-e.sortRank||e.name.localeCompare(t.name)))}function s(e){const t=e;return t.sortRank=0,t.userId>0?(t.name=t.userLogin,t.sortRank=10):t.teamId>0?(t.name=t.team,t.sortRank=20):t.role&&(t.icon="fa fa-fw fa-street-view",t.name=t.role,t.sortRank=30,"Editor"===t.role&&(t.sortRank+=1)),t.inherited&&(t.sortRank+=100),t}n.d(t,{A:()=>a})},30034:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});const a=(e,t,n)=>(e.splice(n,0,e.splice(t,1)[0]),e)},64822:(e,t,n)=>{"use strict";n.d(t,{i:()=>s});var a=n(82897);function s(e){return e&&!(0,a.isString)(e)?e.message?e.message:e.data&&e.data.message?e.data.message:e.statusText?e.statusText:JSON.stringify(e):e}},62236:(e,t,n)=>{"use strict";n.d(t,{$$:()=>N,F3:()=>M,H6:()=>g,I$:()=>p,J5:()=>w,OQ:()=>F,Oy:()=>A,RZ:()=>R,UI:()=>h,Xh:()=>x,Xk:()=>S,Z8:()=>k,Zf:()=>m,_Q:()=>O,fR:()=>C,n9:()=>$,uC:()=>f,vP:()=>P,xq:()=>y,z_:()=>I});var a=n(82897),s=n(34110),i=n(43215),r=n(3490),o=n(17421),l=n(24994),d=n(78837),c=n(65184);const u=["key"];const h={from:"now-1h",to:"now"},p=(i.LogsDedupStrategy.none,e=>`grafana.explore.datasource.${e}`);async function g(e){var t;const{panel:n,datasourceSrv:s,timeSrv:r}=e;let o,l=await s.get(n.datasource),d=n.targets.map((e=>(0,a.omit)(e,"legendFormat")));if("mixed"===(null===(t=l.meta)||void 0===t?void 0:t.id)&&d)for(const e of d){const t=await s.get(e.datasource||void 0);if(t){l=t,d=n.targets.filter((e=>e.datasource===t.name));break}}if(l){let e={range:r.timeRangeForUrl()};if(l.interpolateVariablesInQueries){const t=n.scopedVars||{};e=Object.assign({},e,{datasource:l.name,context:"explore",queries:l.interpolateVariablesInQueries(d,t)})}else e=Object.assign({},e,{datasource:l.name,context:"explore",queries:d.map((e=>Object.assign({},e,{datasource:l.getRef()})))});const t=JSON.stringify(e);o=i.urlUtil.renderUrl("/explore",{left:t})}return o}function m(e,t,n,a,s,r){const o=t.reduce(((e,t)=>e+=t.key),""),{interval:l,intervalMs:d}=function(e,t,n){if(!n)return{interval:"1s",intervalMs:1e3};return i.rangeUtil.calculateInterval(e,n,t)}(a,n.minInterval,n.maxDataPoints),c=`${o}`;return{queries:t,request:{app:i.CoreApp.Explore,dashboardId:0,timezone:r||i.DefaultTimeZone,startTime:Date.now(),interval:l,intervalMs:d,panelId:c,targets:t,range:a,requestId:"explore_"+e,rangeRaw:a.raw,scopedVars:{__interval:{text:l,value:l},__interval_ms:{text:d,value:d}},maxDataPoints:n.maxDataPoints,liveStreaming:n.liveStreaming},scanning:s,id:j(),done:!1}}const f=e=>function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,u),v=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.some((t=>e.hasOwnProperty(t)))};var b;!function(e){e[e.RangeFrom=0]="RangeFrom",e[e.RangeTo=1]="RangeTo",e[e.Datasource=2]="Datasource",e[e.SegmentsStart=3]="SegmentsStart"}(b||(b={}));const x=(e,t)=>{if(!e)return"";try{return JSON.stringify(e,null,t)}catch(e){console.error(e)}return""},y=e=>{const t=l.f.find((t=>t===e));return null!=t?t:"lines"};function w(e){var t;const n=(e=>{if(e)try{return JSON.parse(e)}catch(e){console.error(e)}})(e),a={datasource:null,queries:[],range:h,mode:null};if(!n)return a;if(!Array.isArray(n))return n;if(n.length<=b.SegmentsStart)return console.error("Error parsing compact URL state for Explore."),a;const s={from:n[b.RangeFrom],to:n[b.RangeTo]},i=n[b.Datasource],r=n.slice(b.SegmentsStart);return{datasource:i,queries:r.filter((e=>!v(e,"ui","mode","__panelsState"))),range:s,panelsState:null===(t=r.find((e=>v(e,"__panelsState"))))||void 0===t?void 0:t.__panelsState}}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return`Q-${(0,s.Z)()}-${e}`}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{refId:(0,c.Hs)(e),key:j(t)}}const C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=j(n),s=e.refId||(0,c.Hs)(t);return Object.assign({},e,{refId:s,key:a})};function k(e){if(e&&"object"==typeof e&&e.length>0){const t=[];for(let n=0;n<e.length;n++){const a=e[n],s=j(n);let i=a.refId;i||(i=(0,c.Hs)(t)),t.push(Object.assign({},a,{refId:i,key:s}))}return t}return[Object.assign({},S(null!=e?e:[]))]}const T=["refId","key","context","datasource"];function I(e){return e&&e.some((e=>Object.keys(e).filter((e=>-1===T.indexOf(e))).map((t=>e[t])).filter((e=>e)).length>0))}function O(e,t,n){const a=Date.now();let s=e;n.forEach((e=>{s=[{query:e,ts:a},...s]})),s.length>100&&(s=s.slice(0,100));const i=`grafana.explore.history.${t}`;try{return o.Z.setObject(i,s),s}catch(t){return console.error(t),e}}const N=(e,t)=>e.reduce(((e,n,a)=>{const s=t&&t.name?t.name:n.key;return e.concat(`${s}-${a}`)}),[]),F=(e,t,n)=>{let a=i.rangeUtil.convertRawToRange(t,e,n);return a.to.isBefore(a.from)&&(a=i.rangeUtil.convertRawToRange({from:a.raw.to,to:a.raw.from},e,n)),a},D=e=>{if(null===e)return null;if((0,i.isDateTime)(e))return e;if(-1!==e.indexOf("now"))return e;if(8===e.length)return(0,i.toUtc)(e,"YYYYMMDD");if(15===e.length)return(0,i.toUtc)(e,"YYYYMMDDTHHmmss");if(19===e.length)return(0,i.toUtc)(e,"YYYY-MM-DD HH:mm:ss");if(e.match(/^\d+$/)){const t=parseInt(e,10);return(0,i.toUtc)(t)}const t=(0,i.toUtc)(e);return t.isValid()?t:null},P=(e,t,n)=>{const a={from:D(e.from),to:D(e.to)};return{from:i.dateMath.parse(a.from,!1,t),to:i.dateMath.parse(a.to,!0,t),raw:a}},A=e=>r.RefreshPicker.isLive(e)?i.LogsSortOrder.Ascending:i.LogsSortOrder.Descending,M=e=>{let t=`${"https:"===window.location.protocol?"wss://":"ws://"}${window.location.host}${d.vc.appSubUrl}`;return t.endsWith("/")&&(t=t.slice(0,-1)),`${t}${e}`},R=e=>{e&&e.unsubscribe()};const $=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},25857:(e,t,n)=>{"use strict";n.d(t,{Xv:()=>p,aO:()=>u,nS:()=>i,rZ:()=>d,tW:()=>h});var a=n(82897),s=n(43215);const i=e=>{const t=e.method,n=l(e),a=d(n);return{method:t,headers:n,body:c(e,a),credentials:g(e)}},r=e=>({canParse:t=>(null!=t&&t.method?null==t?void 0:t.method.toLowerCase():"")===e,parse:e=>(e.get("content-type")||e.set("content-type","application/json"),e)}),o=[r("post"),r("put"),r("patch"),{canParse:()=>!0,parse:e=>(e.get("accept")||e.set("accept","application/json, text/plain, */*"),e)}],l=e=>{const t=null!=e&&e.headers?new Headers(e.headers):new Headers;return o.filter((t=>t.canParse(e))).reduce(((e,t)=>t.parse(e)),t)},d=e=>{if(!e)return!1;const t=e.get("content-type");return!(!t||"application/json"!==t.toLowerCase())},c=(e,t)=>e?e.data&&"string"!=typeof e.data?t?JSON.stringify(e.data):new URLSearchParams(e.data):e.data:e;async function u(e,t){if(t)switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return"0"===e.headers.get("Content-Length")?(console.warn(`${e.url} returned an invalid JSON`),{}):await e.json();case"text":return e.text()}const n=await e.text();try{return JSON.parse(n)}catch{}return n}function h(e){return Object.keys(e).map((t=>{const n=e[t];return Array.isArray(n)?n.map((e=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"):`${encodeURIComponent(t)}=${encodeURIComponent(n)}`})).join("&")}const p=e=>{const t=h((0,a.omitBy)(e.params,(e=>void 0===e||e&&0===e.length)));return e.params&&t.length?`${e.url}?${t}`:e.url},g=e=>e?e.credentials?e.credentials:e.withCredentials?((0,s.deprecationWarning)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin":e},90845:(e,t,n)=>{"use strict";function a(e,t){const n=(t=t||{}).delimiter||".";let a=t.maxDepth||3,s=1;const i={};return function e(r,o){Object.keys(r).forEach((l=>{var d,c;const u=r[l],h=(null===(d=t)||void 0===d?void 0:d.safe)&&Array.isArray(u),p="[object Object]"===Object.prototype.toString.call(u),g=o?o+n+l:l;if(null!==(c=t)&&void 0!==c&&c.maxDepth||(a=s+1),!h&&p&&Object.keys(u).length&&s<a)return++s,e(u,g);i[g]=u}))}(e,null),i}n.r(t),n.d(t,{default:()=>a})},39132:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(43215);const s={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:e=>e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&"),roundInterval:e=>((0,a.deprecationWarning)("kbn.ts","kbn.roundInterval()","@grafana/data"),a.rangeUtil.roundInterval(e)),secondsToHms:e=>((0,a.deprecationWarning)("kbn.ts","kbn.secondsToHms()","@grafana/data"),a.rangeUtil.secondsToHms(e)),secondsToHhmmss:e=>{const t=[],n=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%3600%60);return n>9?t.push(""+n):t.push("0"+n),a>9?t.push(""+a):t.push("0"+a),s>9?t.push(""+s):t.push("0"+s),t.join(":")},toPercent:(e,t)=>Math.floor(e/t*1e4)/100+"%",addSlashes:e=>e.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:e=>((0,a.deprecationWarning)("kbn.ts","kbn.describeInterval()","@grafana/data"),a.rangeUtil.describeInterval(e)),intervalToSeconds:e=>((0,a.deprecationWarning)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),a.rangeUtil.intervalToSeconds(e)),intervalToMs:e=>((0,a.deprecationWarning)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),a.rangeUtil.intervalToMs(e)),calculateInterval:(e,t,n)=>((0,a.deprecationWarning)("kbn.ts","kbn.calculateInterval()","@grafana/data"),a.rangeUtil.calculateInterval(e,t,n)),queryColorDot:(e,t)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+e,"font-size:"+t+"px"].join(";")+'"></div>',slugifyForUrl:e=>e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:e=>((0,a.deprecationWarning)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,a.stringToJsRegex)(e)),toFixed:(e,t)=>{if(null===e)return"";const n=t?Math.pow(10,Math.max(0,t)):1,a=String(Math.round(e*n)/n);if(-1!==a.indexOf("e")||0===e)return a;if(null!=t){const e=a.indexOf("."),s=-1===e?0:a.length-e-1;if(s<t)return(s?a:a+".")+String(n).slice(1,t-s+1)}return a},toFixedScaled:(e,t,n,a,i)=>null===n?s.toFixed(e,t)+i:s.toFixed(e,n+a)+i,roundValue:(e,t)=>{if(null===e)return null;const n=Math.pow(10,t),a=(n*e).toFixed(t);return Math.round(parseFloat(a))/n},getUnitFormats:a.getValueFormats};"undefined"!=typeof Proxy?s.valueFormats=new Proxy(s.valueFormats,{get(e,t,n){if("string"!=typeof t)throw{message:`Value format ${String(t)} is not a string`};const s=(0,a.getValueFormat)(t);return s?(e,t,n,i)=>(0,a.formattedValueToString)(s(e,t,n,i?"utc":"browser")):Reflect.get(e,t,n)}}):s.valueFormats=(0,a.getValueFormatterIndex)();const i=s},65184:(e,t,n)=>{"use strict";n.d(t,{DI:()=>s,Hs:()=>a,R8:()=>r,mu:()=>i,sB:()=>l});const a=e=>{for(let t=0;;t++){const n=o(t);if(!e.some((e=>e.refId===n)))return n}};function s(e,t,n){const s=t||{};return s.refId=a(e),s.hide=!1,!s.datasource&&n&&(s.datasource=n),[...e,s]}function i(e){return-1!==e.indexOf("api/datasources/proxy")||-1!==e.indexOf("api/ds/query")}function r(e){return!e.match(/^http/)}function o(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e<t.length?t[e]:o(Math.floor(e/t.length)-1)+t[e%t.length]}function l(e){return e||void 0}},17763:(e,t,n)=>{"use strict";n.d(t,{As:()=>g.A,DR:()=>F,HK:()=>x,OH:()=>O,VI:()=>y,au:()=>m,bQ:()=>T,di:()=>b,gt:()=>w,k4:()=>N,kg:()=>v,rq:()=>C,rv:()=>S,t2:()=>k,ub:()=>f,y9:()=>j});var a=n(82897),s=n(43215),i=n(40245),r=n(90923),o=n(36537),l=n(58257),d=n(56340),c=n(57969),u=n(19075),h=n(34072),p=n(36314),g=n(7963);async function m(e,t,n,s,i,r,c){const u=n&&n.filter((e=>function(e){const t=(0,a.omit)(e,["key","refId","datasource"]);if(Object.keys(t).length>0)return!0;return!1}(e)));if(u.length>0){let n,a=!1,g=!1;try{n=(await(0,p.b)().addToRichHistory({datasourceUid:e,datasourceName:null!=t?t:"",queries:u,starred:s,comment:null!=i?i:""})).warning}catch(e){return e instanceof Error&&(e.name===h.j.StorageFull?(a=!0,r&&(0,d.WI)((0,o.$l)((0,l.t_)(e.message)))):e.name!==h.j.DuplicatedEntry&&(0,d.WI)((0,o.$l)((0,l.t_)("Rich History update failed",e.message)))),{richHistoryStorageFull:a,limitExceeded:g}}return n&&n.type===h.V.LimitExceeded&&(g=!0,c&&(0,d.WI)((0,o.$l)((0,l.ZR)(n.message)))),{richHistoryStorageFull:a,limitExceeded:g}}return{}}async function f(e){return await(0,p.b)().getRichHistory(e)}async function v(e){await(0,p.b)().updateSettings(e)}async function b(){return await(0,p.b)().getSettings()}async function x(){return(0,p.b)().deleteAll()}async function y(e,t){try{return await(0,p.b)().updateStarred(e,t)}catch(e){return void(e instanceof Error&&(0,d.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))))}}async function w(e,t){try{return await(0,p.b)().updateComment(e,t)}catch(e){return void(e instanceof Error&&(0,d.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))))}}async function j(e){try{return await(0,p.b)().deleteRichHistory(e),e}catch(e){return void(e instanceof Error&&(0,d.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))))}}let S;async function C(){const e=new c.ZP,t=new u.Z;try{const{richHistory:n}=await e.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:g.A.Descending,starred:!1,to:14});return 0===n.length?{status:S.NotNeeded}:(await t.migrate(n),(0,d.WI)((0,o.$l)((0,l.AT)("Query history successfully migrated from local storage"))),{status:S.Successful})}catch(e){const t=e instanceof Error?e:new Error("Uknown error occurred.");return(0,d.WI)((0,o.$l)((0,l.ZR)(`Query history migration failed. ${t.message}`))),{status:S.Failed,error:t}}}!function(e){e.Successful="successful",e.Failed="failed",e.NotNeeded="not-needed"}(S||(S={}));const k=e=>{const t={range:{from:"now-1h",to:"now"},datasource:e.datasourceName,queries:e.queries,context:"explore"},n=(0,i.S)(t),a=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return s.urlUtil.renderUrl(`${a}/explore`,{left:n})},T=e=>{let t;switch(e){case 0:t="today";break;case 1:t="yesterday";break;case 7:t="a week ago";break;case 14:t="two weeks ago";break;default:t=`${e} days ago`}return t};function I(e,t){let n="";var a;return t===g.A.DatasourceAZ||t===g.A.DatasourceZA?n=e.datasourceName:(a=e.createdAt,n=(0,s.dateTimeFormat)(a,{format:"MMMM D"})),n}function O(e,t){return null!=t&&t.getQueryDisplayText?t.getQueryDisplayText(e):function(e){const t=(0,a.omit)(e,["key","refId","datasource"]);return JSON.stringify(t)}(e)}function N(e,t){let n={};return e.forEach((e=>{let a=I(e,t);n[a]=a in n?[...n[a],e]:[e]})),n}function F(){return(0,r.getDataSourceSrv)().getList().map((e=>({name:e.name,uid:e.uid,imgUrl:e.meta.info.logos.small})))}},7963:(e,t,n)=>{"use strict";let a;n.d(t,{A:()=>a}),function(e){e.Descending="Descending",e.Ascending="Ascending",e.DatasourceAZ="Datasource A-Z",e.DatasourceZA="Datasource Z-A"}(a||(a={}))},74534:(e,t,n)=>{"use strict";n.d(t,{D:()=>c,L:()=>u});var a=n(58635),s=n(90923),i=n(36537),r=n(58257),o=n(56340),l=n(62236);function d(e){let t=e.replace(`${window.location.protocol}//${window.location.host}${s.config.appSubUrl}`,"");return t.startsWith("/")?t.substring(1,t.length):t}const c=(0,a.Z)((async function(e){try{return(await(0,s.getBackendSrv)().post("/api/short-urls",{path:d(e)})).url}catch(e){console.error("Error when creating shortened link: ",e),(0,o.WI)((0,i.$l)((0,r.t_)("Error generating shortened link")))}})),u=async e=>{const t=await c(e);t?((0,l.n9)(t),(0,o.WI)((0,i.$l)((0,r.AT)("Shortened link copied to clipboard")))):(0,o.WI)((0,i.$l)((0,r.t_)("Error generating shortened link")))}},63796:(e,t,n)=>{"use strict";function a(e,t,n){const a=Math.sqrt(50),s=Math.sqrt(10),i=Math.sqrt(2),r=Math.abs(t-e)/Math.max(0,n);let o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10));const l=r/o;return l>=a?o*=10:l>=s?o*=5:l>=i&&(o*=2),t<e?-o:o}function s(e,t){return e-Math.floor(Math.log(t)/Math.LN10)}function i(e,t,n,a){const s=(t-e)/n;let i=-Math.floor(Math.log(s)/Math.LN10);const r=a,o=Math.pow(10,-i),l=s/o;let d;return l<1.5?d=1:l<3?(d=2,l>2.25&&(null==r||i+1<=r)&&(d=2.5,++i)):d=l<7.5?5:10,d*=o,d}function r(e,t,n,a){let s=+(null!=e?e:n),i=+(null!=t?t:a);const r=i-s;if(0===r){const n=.25,a=Math.abs(0===i?1:i*n);null===e&&(s-=a),null!=t&&null==e||(i+=a)}else{const o=.02;null!=o&&(null==e&&(s-=r*o,s<0&&null!=n&&n>=0&&(s=0)),null==t&&(i+=r*o,i>0&&null!=a&&a<=0&&(i=0)))}return{min:s,max:i}}function o(e,t,n,a){const{min:s,max:i}=r(n.min,n.max,e,t),o=(i-s)/(.3*Math.sqrt(a)),l=-Math.floor(Math.log(o)/Math.LN10),d=Math.pow(10,-l),c=o/d;let u;c<1.5?u=1:c<3?(u=2,c>2.25&&(u=2.5)):u=c<7.5?5:10,u*=d;const h=Math.max(0,1-Math.floor(Math.log(o)/Math.LN10));return{tickDecimals:h,scaledDecimals:h-Math.floor(Math.log(u)/Math.LN10)}}function l(e,t,n){if(t&&n&&e){const a=n-t,s=a/e/1e3,i=864e5,r=31536e6;return s<=45?"HH:mm:ss":s<=7200||a<=i?"HH:mm":s<=8e4?"MM/DD HH:mm":s<=2419200||a<=r?"MM/DD":"YYYY-MM"}return"HH:mm"}function d(e,t){return Math.log(e)/Math.log(t)}function c(e){return u(e.toString())}function u(e){if(isNaN(e))return 0;const t=e.indexOf(".");return-1===t?0:e.length-t-1}n.r(t),n.d(t,{getFlotRange:()=>r,getFlotTickDecimals:()=>o,getFlotTickSize:()=>i,getPrecision:()=>c,getScaledDecimals:()=>s,getStringPrecision:()=>u,grafanaTimeFormat:()=>l,logp:()=>d,tickStep:()=>a})},10416:(e,t,n)=>{"use strict";n.d(t,{e:()=>s,h:()=>i});var a=n(43215);const s=(e,t)=>{const n={from:(0,a.toUtc)(t.from),to:(0,a.toUtc)(t.to)},s=(n.to.valueOf()-n.from.valueOf())/2;let i,r;return-1===e?(i=n.to.valueOf()-s,r=n.from.valueOf()-s):1===e?(i=n.to.valueOf()+s,r=n.from.valueOf()+s,i>Date.now()&&n.to.valueOf()<Date.now()&&(i=Date.now(),r=n.from.valueOf())):(i=n.to.valueOf(),r=n.from.valueOf()),{from:r,to:i}},i=(e,t)=>{const n=e.to.valueOf()-e.from.valueOf(),a=e.to.valueOf()-n/2,s=0===n?3e4:n*t;return{from:a-s/2,to:a+s/2}}},8936:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(68404);var a=n(43215),s=n(3490),i=n(45916);const r=["value","onChange","aria-label","inputId","autoFocus"];const o=Object.keys(a.OrgRole).map((e=>({label:e,value:e})));function l(e){let{value:t,onChange:n,"aria-label":a,inputId:l,autoFocus:d}=e,c=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);return(0,i.jsx)(s.Select,Object.assign({inputId:l,value:t,options:o,onChange:e=>n(e.value),placeholder:"Choose role...","aria-label":a,autoFocus:d},c))}},68671:(e,t,n)=>{"use strict";n.d(t,{B9:()=>g,CP:()=>k,Dx:()=>m,Fm:()=>S,IS:()=>N,Jk:()=>x,M6:()=>A,Nq:()=>h,PK:()=>u,R5:()=>P,V0:()=>O,Xx:()=>v,Y3:()=>T,_1:()=>j,bN:()=>b,b_:()=>I,h8:()=>f,j4:()=>C,oO:()=>M,tQ:()=>p,uV:()=>y,uh:()=>F});var a=n(82897),s=n(43215),i=n(90923),r=n(78837),o=n(98163),l=n(66728),d=n(47570),c=n(97979);function u(e){return async t=>{try{t((0,c.UA)(!1)),await t(function(e){return async t=>{const n=await(0,i.getBackendSrv)().get(`/api/users/${e}`,(0,l.y)());t((0,c.pm)(n))}}(e)),await t(function(e){return async t=>{const n=await(0,i.getBackendSrv)().get(`/api/users/${e}/orgs`);t((0,c.fm)(n))}}(e)),await t(w(e)),r.ZP.ldapEnabled&&(0,i.featureEnabled)("ldapsync")&&await t(C()),t((0,c.UA)(!0))}catch(e){if(console.error(e),(0,i.isFetchError)(e)){const n={title:e.data.message,body:e.data.error};t((0,c.sL)(n))}}}}function h(e){return async t=>{await(0,i.getBackendSrv)().put(`/api/users/${e.id}`,e),t(u(e.id))}}function p(e,t){return async n=>{const a={password:t};await(0,i.getBackendSrv)().put(`/api/admin/users/${e}/password`,a),n(u(e))}}function g(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/users/${e}/disable`),i.locationService.push("/admin/users")}}function m(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/users/${e}/enable`),t(u(e))}}function f(e){return async t=>{await(0,i.getBackendSrv)().delete(`/api/admin/users/${e}`),i.locationService.push("/admin/users")}}function v(e,t){return async n=>{const a={isGrafanaAdmin:t};await(0,i.getBackendSrv)().put(`/api/admin/users/${e}/permissions`,a),n(u(e))}}function b(e,t,n){return async a=>{const s={loginOrEmail:e.login,role:n};await(0,i.getBackendSrv)().post(`/api/orgs/${t}/users/`,s),a(u(e.id))}}function x(e,t,n){return async a=>{const s={role:n};await(0,i.getBackendSrv)().patch(`/api/orgs/${t}/users/${e}`,s),a(u(e))}}function y(e,t){return async n=>{await(0,i.getBackendSrv)().delete(`/api/orgs/${t}/users/${e}`),n(u(e))}}function w(e){return async t=>{if(!o.Vt.hasPermission(d.bW.UsersAuthTokenList))return;const n=await(0,i.getBackendSrv)().get(`/api/admin/users/${e}/auth-tokens`);n.reverse();const a=n.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,s.dateTimeFormatTimeAgo)(e.seenAt),createdAt:e.createdAt,clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device})));t((0,c.RC)(a))}}function j(e,t){return async n=>{const a={authTokenId:e};await(0,i.getBackendSrv)().post(`/api/admin/users/${t}/revoke-auth-token`,a),n(w(t))}}function S(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/users/${e}/logout`),t(w(e))}}function C(){return async e=>{const t=o.Vt.hasPermission(d.bW.LDAPStatusRead);if((0,i.featureEnabled)("ldapsync")&&t){const t=await(0,i.getBackendSrv)().get("/api/admin/ldap-sync-status");e((0,c.CY)(t))}}}function k(e){return async t=>{await(0,i.getBackendSrv)().post(`/api/admin/ldap/sync/${e}`),t(u(e))}}function T(){return async e=>{if(o.Vt.hasPermission(d.bW.LDAPStatusRead))try{const t=await(0,i.getBackendSrv)().get("/api/admin/ldap/status");e((0,c.Ls)(t))}catch(t){if((0,i.isFetchError)(t)){t.isHandled=!0;const n={title:t.data.message,body:t.data.error};e((0,c.y3)(n))}}}}function I(e){return async t=>{try{const n=await(0,i.getBackendSrv)().get(`/api/admin/ldap/${encodeURIComponent(e)}`),{name:a,surname:s,email:r,login:o,isGrafanaAdmin:l,isDisabled:d,roles:u,teams:h}=n,p={info:{name:a,surname:s,email:r,login:o},permissions:{isGrafanaAdmin:l,isDisabled:d},roles:u,teams:h};t((0,c.sJ)(p))}catch(e){if((0,i.isFetchError)(e)){e.isHandled=!0;const n={title:e.data.message,body:e.data.error};t((0,c.eq)()),t((0,c.VB)(n))}}}}function O(){return e=>{e((0,c.WO)())}}function N(){return e=>{e((0,c.WO)()),e((0,c.eq)())}}function F(){return async(e,t)=>{try{const{perPage:n,page:a,query:s,filters:r}=t().userListAdmin,o=await(0,i.getBackendSrv)().get(`/api/users/search?perpage=${n}&page=${a}&query=${s}&${(e=>e.map((e=>Array.isArray(e.value)?e.value.map((t=>`${e.name}=${t.value}`)).join("&"):`${e.name}=${e.value}`)).join("&"))(r)}`);e((0,c.xh)(o))}catch(e){(0,c.k7)(),console.error(e)}}}const D=(0,a.debounce)((e=>e(F())),500);function P(e){return async t=>{t((0,c.tZ)()),t((0,c.aj)(e)),D(t)}}function A(e){return async t=>{t((0,c.tZ)()),t((0,c.qz)(e)),D(t)}}function M(e){return async t=>{t((0,c.tZ)()),t((0,c.PJ)(e)),t(F())}}},97979:(e,t,n)=>{"use strict";n.d(t,{CY:()=>u,Ls:()=>d,PJ:()=>O,RC:()=>x,UA:()=>y,VB:()=>h,WO:()=>o,ZP:()=>F,aj:()=>I,eq:()=>l,fm:()=>b,k7:()=>T,pm:()=>v,qz:()=>N,sJ:()=>p,sL:()=>w,tZ:()=>k,xh:()=>C,y3:()=>c});var a=n(35140);const s=["totalCount","perPage"];const i={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},r=(0,a.oM)({name:"ldap",initialState:i,reducers:{ldapConnectionInfoLoadedAction:(e,t)=>Object.assign({},e,{ldapError:void 0,connectionInfo:t.payload}),ldapFailedAction:(e,t)=>Object.assign({},e,{ldapError:t.payload}),ldapSyncStatusLoadedAction:(e,t)=>Object.assign({},e,{syncInfo:t.payload}),userMappingInfoLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload,userError:void 0}),userMappingInfoFailedAction:(e,t)=>Object.assign({},e,{user:void 0,userError:t.payload}),clearUserMappingInfoAction:(e,t)=>Object.assign({},e,{user:void 0}),clearUserErrorAction:(e,t)=>Object.assign({},e,{userError:void 0})}}),{clearUserErrorAction:o,clearUserMappingInfoAction:l,ldapConnectionInfoLoadedAction:d,ldapFailedAction:c,ldapSyncStatusLoadedAction:u,userMappingInfoFailedAction:h,userMappingInfoLoadedAction:p}=r.actions,g=r.reducer,m={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},f=(0,a.oM)({name:"userAdmin",initialState:m,reducers:{userProfileLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload}),userOrgsLoadedAction:(e,t)=>Object.assign({},e,{orgs:t.payload}),userSessionsLoadedAction:(e,t)=>Object.assign({},e,{sessions:t.payload}),userAdminPageLoadedAction:(e,t)=>Object.assign({},e,{isLoading:!t.payload}),userAdminPageFailedAction:(e,t)=>Object.assign({},e,{error:t.payload,isLoading:!1})}}),{userProfileLoadedAction:v,userOrgsLoadedAction:b,userSessionsLoadedAction:x,userAdminPageLoadedAction:y,userAdminPageFailedAction:w}=f.actions,j=f.reducer,S=(0,a.oM)({name:"userListAdmin",initialState:{users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},reducers:{usersFetched:(e,t)=>{const n=t.payload,{totalCount:a,perPage:i}=n,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(n,s),o=Math.ceil(a/i);return Object.assign({},e,r,{totalPages:o,perPage:i,showPaging:o>1,isLoading:!1})},usersFetchBegin:e=>Object.assign({},e,{isLoading:!0}),usersFetchEnd:e=>Object.assign({},e,{isLoading:!1}),queryChanged:(e,t)=>Object.assign({},e,{query:t.payload,page:0}),pageChanged:(e,t)=>Object.assign({},e,{page:t.payload}),filterChanged:(e,t)=>{const{name:n,value:a}=t.payload;return e.filters.some((e=>e.name===n))?Object.assign({},e,{page:0,filters:e.filters.map((e=>e.name===n?Object.assign({},e,{value:a}):e))}):Object.assign({},e,{page:0,filters:[...e.filters,t.payload]})}}}),{usersFetched:C,usersFetchBegin:k,usersFetchEnd:T,queryChanged:I,pageChanged:O,filterChanged:N}=S.actions,F={ldap:g,userAdmin:j,userListAdmin:S.reducer}},45243:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,Z:()=>l});var a=n(82897),s=n(76355);const i=new s.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]});let r;!function(e){e.IsAbove="gt",e.IsBelow="lt",e.IsOutsideRange="outside_range",e.IsWithinRange="within_range",e.HasNoValue="no_value"}(r||(r={}));function o(e,t){return(0,a.reduce)(e,((e,t)=>(void 0!==t.metric&&void 0!==t.value&&e.push(t.metric+"="+t.value),void 0!==t.Metric&&void 0!==t.Value&&e.push(t.Metric+"="+t.Value),e)),[]).join(t)}const l={alertQueryDef:i,getStateDisplayModel:function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"").split(" ")[0]}(e);switch(t){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}},conditionTypes:[{text:"Query",value:"query"}],evalFunctions:[{value:r.IsAbove,text:"IS ABOVE"},{value:r.IsBelow,text:"IS BELOW"},{value:r.IsOutsideRange,text:"IS OUTSIDE RANGE"},{value:r.IsWithinRange,text:"IS WITHIN RANGE"},{value:r.HasNoValue,text:"HAS NO VALUE"}],evalOperators:[{text:"OR",value:"or"},{text:"AND",value:"and"}],noDataModes:[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],executionErrorModes:[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}],reducerTypes:[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],createReducerPart:function(e){const t=new s.zU({type:e.type,defaultParams:[]});return new s.XN(e,t)},getAlertAnnotationInfo:function(e){return(0,a.isArray)(e.data)?o(e.data,", "):(0,a.isArray)(e.data.evalMatches)?o(e.data.evalMatches,", "):e.data.error?"Error: "+e.data.error:""},alertStateSortScore:{alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5}}},76355:(e,t,n)=>{"use strict";n.d(t,{C7:()=>l,D:()=>o,XN:()=>r,zU:()=>i});var a=n(82897);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i{constructor(e){s(this,"type",void 0),s(this,"params",void 0),s(this,"defaultParams",void 0),s(this,"renderer",void 0),s(this,"category",void 0),s(this,"addStrategy",void 0),this.type=e.type,this.params=e.params,this.defaultParams=e.defaultParams,this.renderer=e.renderer,this.category=e.category,this.addStrategy=e.addStrategy}}class r{constructor(e,t){if(s(this,"part",void 0),s(this,"def",void 0),s(this,"params",void 0),s(this,"text",void 0),this.part=e,this.def=t,!this.def)throw{message:"Could not find query part "+e.type};e.params=e.params||(0,a.clone)(this.def.defaultParams),this.params=e.params,this.text="",this.updateText()}render(e){return this.def.renderer(this,e)}hasMultipleParamsInString(e,t){return-1!==e.indexOf(",")&&(this.def.params[t+1]&&this.def.params[t+1].optional)}updateParam(e,t){this.hasMultipleParamsInString(e,t)?(0,a.each)(e.split(","),((e,t)=>{this.updateParam(e.trim(),t)})):(""===e&&this.def.params[t].optional?this.params.splice(t,1):this.params[t]=e,this.part.params=this.params,this.updateText())}updateText(){if(0===this.params.length)return void(this.text=this.def.type+"()");let e=this.def.type+"(";e+=this.params.join(", "),e+=")",this.text=e}}function o(e,t){const n=e.def.type+"(",s=(0,a.map)(e.params,((t,n)=>{const a=e.def.params[n];return"time"===a.type&&"auto"===t&&(t="$__interval"),"single"===a.quote?"'"+t+"'":"double"===a.quote?'"'+t+'"':t}));return t&&s.unshift(t),n+s.join(", ")+")"}function l(e,t){return t+" "+e.params[0]}},61988:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>b,gz:()=>h,Oc:()=>p,K:()=>f,J0:()=>v,T2:()=>m,ql:()=>g});var a=n(35140),s=n(43215),i=n(31259),r=n(8455),o=n(83809);const l=(0,i.combineReducers)({dataSources:(0,r.jK)("dataSources",o.nw,(e=>{let{rulesSourceName:t}=e;return t})).reducer,promRules:(0,r.jK)("promRules",o.y6,(e=>{let{rulesSourceName:t}=e;return t})).reducer,rulerRules:(0,r.jK)("rulerRules",o.UR,(e=>{let{rulesSourceName:t}=e;return t})).reducer,amConfigs:(0,r.jK)("amConfigs",o.Yh,(e=>e)).reducer,silences:(0,r.jK)("silences",o.je,(e=>e)).reducer,ruleForm:(0,i.combineReducers)({saveRule:(0,r.i6)("saveRule",o.wy).reducer,existingRule:(0,r.i6)("existingRule",o.on).reducer}),grafanaNotifiers:(0,r.i6)("grafanaNotifiers",o.Vj).reducer,saveAMConfig:(0,r.i6)("saveAMConfig",o.mM).reducer,deleteAMConfig:(0,r.i6)("deleteAMConfig",o.Nc).reducer,updateSilence:(0,r.i6)("updateSilence",o.QY).reducer,amAlerts:(0,r.jK)("amAlerts",o.dB,(e=>e)).reducer,folders:(0,r.jK)("folders",o.vL,(e=>e)).reducer,amAlertGroups:(0,r.jK)("amAlertGroups",o.mS,(e=>e)).reducer,testReceivers:(0,r.i6)("testReceivers",o.D8).reducer,updateLotexNamespaceAndGroup:(0,r.i6)("updateLotexNamespaceAndGroup",o.hv).reducer,externalAlertmanagers:(0,i.combineReducers)({alertmanagerConfig:(0,r.i6)("alertmanagerConfig",o.wE).reducer,discoveredAlertmanagers:(0,r.i6)("discoveredAlertmanagers",o.zy).reducer}),managedAlertStateHistory:(0,r.i6)("managedAlertStateHistory",o.Ms).reducer});var d=n(45243);const c=(0,a.oM)({name:"alertRules",initialState:{items:[],searchQuery:"",isLoading:!1},reducers:{loadAlertRules:e=>Object.assign({},e,{isLoading:!0}),loadedAlertRules:(e,t)=>{const n=t.payload.map((e=>function(e,t){const n=d.Z.getStateDisplayModel(t),a=Object.assign({},e,{stateText:n.text,stateIcon:n.iconClass,stateClass:n.stateClass,stateAge:(0,s.dateTime)(e.newStateDate).fromNow(!0)});return"paused"!==a.state&&(a.executionError&&(a.info="Execution Error: "+a.executionError),a.evalData&&a.evalData.noData&&(a.info="Query returned no data")),a}(e,e.state)));return Object.assign({},e,{items:n,isLoading:!1})},setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload})}}),u=(0,a.oM)({name:"notificationChannel",initialState:{notificationChannelTypes:[],notificationChannel:{},notifiers:[]},reducers:{setNotificationChannels:(e,t)=>{return Object.assign({},e,{notificationChannelTypes:(n=t.payload,n.map((e=>Object.assign({value:e.type,label:e.name},e,{typeName:e.type}))).sort(((e,t)=>e.name>t.name?1:-1))),notifiers:t.payload});var n},notificationChannelLoaded:(e,t)=>{const n=t.payload,a=e.notifiers.find((e=>e.type===n.type)).options.filter((e=>e.secure));return a.length>0&&a.some((e=>""!==n.settings[e.propertyName]))?function(e,t,n){const a={},s={};return n.forEach((e=>{s[e.propertyName]=t.settings[e.propertyName],a[e.propertyName]=""})),Object.assign({},e,{notificationChannel:Object.assign({},t,{settings:Object.assign({},t.settings,a),secureSettings:Object.assign({},s)})})}(e,t.payload,a):Object.assign({},e,{notificationChannel:n})},resetSecureField:(e,t)=>Object.assign({},e,{notificationChannel:Object.assign({},e.notificationChannel,{secureFields:Object.assign({},e.notificationChannel.secureFields,{[t.payload]:!1})})})}}),{loadAlertRules:h,loadedAlertRules:p,setSearchQuery:g}=c.actions,{setNotificationChannels:m,notificationChannelLoaded:f,resetSecureField:v}=u.actions,b={alertRules:c.reducer,notificationChannel:u.reducer,unifiedAlerting:l}},15458:(e,t,n)=>{"use strict";n.d(t,{C:()=>u,W:()=>c});var a=n(58799),s=n(90923),i=n(51542),r=n(85464),o=n(19462),l=n(3259),d=n(26588);async function c(e){const{url:t,name:n,type:o}=e,c="prometheus"===o?await async function(e){const t=await(0,a.n)((0,s.getBackendSrv)().fetch({url:`${e}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch((e=>{if(!("status"in e)||404!==e.status)throw e}));return null==t?void 0:t.data}(t):void 0;if(!(void 0!==c)){if(!await async function(e){try{return await(0,l.j)(e),!0}catch(e){return!1}}(n))throw new Error(`Unable to fetch alert rules. Is the ${n} data source properly configured?`);const e=await async function(e){try{return await(0,d.jw)(e),!0}catch(e){if(t=e,(0,s.isFetchError)(t)&&((null===(n=t.data.message)||void 0===n?void 0:n.includes("GetRuleGroup unsupported in rule local store"))||(null===(a=t.data.message)||void 0===a?void 0:a.includes("page not found")))||(null===(i=t.message)||void 0===i?void 0:i.includes("404 from rules config endpoint"))||(null===(o=t.data.message)||void 0===o?void 0:o.includes(r.jZ)))return!1;throw e}var t,n,a,i,o}(n);return{application:i.T8.Lotex,features:{rulerApiEnabled:e}}}const{features:u}=c.data;return u?{application:i.T8.Mimir,features:{rulerApiEnabled:"true"===(null==u?void 0:u.ruler_config_api)}}:{application:i.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function u(e){const t=(0,o.c$)(e);if(!t)throw new Error(`Cannot find data source configuration for ${e}`);const{url:n,name:a,type:s}=t;if(!n)throw new Error("The data souce url cannot be empty.");if("prometheus"!==s&&"loki"!==s)throw new Error(`The build info request is not available for ${s}. Only 'prometheus' and 'loki' are supported`);return c({name:a,url:n,type:s})}},3259:(e,t,n)=>{"use strict";n.d(t,{hd:()=>r,j:()=>o});var a=n(58799),s=n(90923),i=n(19462);function r(e,t){return null!=t&&t.dashboardUID&&(e.set("dashboard_uid",t.dashboardUID),null!=t&&t.panelId&&e.set("panel_id",String(t.panelId))),Object.fromEntries(e)}async function o(e,t){if(null!=t&&t.dashboardUID&&e!==i.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:n,params:o}=function(e){const{dataSourceName:t}=e;return{rules:e=>{const n=r(new URLSearchParams,e);return{url:`/api/prometheus/${(0,i.gt)(t)}/api/v1/rules`,params:n}}}}({dataSourceName:e}).rules(t),l=await(0,a.n)((0,s.getBackendSrv)().fetch({url:n,params:o,showErrorAlert:!1,showSuccessAlert:!1})).catch((e=>{if("status"in e&&404===e.status)throw new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?");throw e})),d={};return l.data.data.groups.forEach((t=>{t.rules.forEach((e=>{e.query=e.query||""})),d[t.file]?d[t.file].groups.push(t):d[t.file]={dataSourceName:e,name:t.file,groups:[t]}})),Object.values(d)}},26588:(e,t,n)=>{"use strict";n.d(t,{BC:()=>p,P4:()=>d,jJ:()=>h,jw:()=>u,m6:()=>c,sz:()=>m});var a=n(58799),s=n(90923),i=n(85464),r=n(19462),o=n(3259);function l(e){const t=`${`/api/ruler/${(0,r.gt)(e.dataSourceName)}`}/api/v1/rules`,n=new URLSearchParams;return n.set("subtype","legacy"===e.apiVersion?"cortex":"mimir"),{rules:e=>{const a=(0,o.hd)(n,e);return{path:`${t}`,params:a}},namespace:e=>({path:`${t}/${encodeURIComponent(e)}`,params:Object.fromEntries(n)}),namespaceGroup:(e,a)=>({path:`${t}/${encodeURIComponent(e)}/${encodeURIComponent(a)}`,params:Object.fromEntries(n)})}}async function d(e,t,n){const{path:i,params:r}=l(e).namespace(t);await(0,a.n)((0,s.getBackendSrv)().fetch({method:"POST",url:i,data:n,showErrorAlert:!1,showSuccessAlert:!1,params:r}))}async function c(e,t){if(null!=t&&t.dashboardUID&&e.dataSourceName!==r.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:n,params:a}=l(e).rules(t);return g(n,{},a)}async function u(e){return g(`/api/ruler/${(0,r.gt)(e)}/api/v1/rules/test/test`,null)}async function h(e,t,n){const{path:a,params:s}=l(e).namespaceGroup(t,n);return g(a,null,s)}async function p(e,t,n){const{path:i,params:r}=l(e).namespaceGroup(t,n);await(0,a.n)((0,s.getBackendSrv)().fetch({url:i,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:r}))}async function g(e,t,n){try{return(await(0,a.n)((0,s.getBackendSrv)().fetch({url:e,showErrorAlert:!1,showSuccessAlert:!1,params:n}))).data}catch(e){if(!function(e){const t=null!=e.data;return Number.isFinite(e.status)&&t}(e))throw e;if(function(e){var t,n;return 404===e.status&&((null===(t=e.data.message)||void 0===t?void 0:t.includes("group does not exist"))||(null===(n=e.data.message)||void 0===n?void 0:n.includes("no rule groups found")))}(e))return t;if(function(e){var t;return 404===e.status||500===e.status&&(null===(t=e.data.message)||void 0===t?void 0:t.includes("unexpected content type from upstream. expected YAML, got text/html"))}(e))throw Object.assign({},e,{data:Object.assign({},e.data,{message:i.jZ})});throw e}}async function m(e,t){const{path:n,params:i}=l(e).namespace(t);await(0,a.n)((0,s.getBackendSrv)().fetch({method:"DELETE",url:n,showErrorAlert:!1,showSuccessAlert:!1,params:i}))}},23906:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=e=>{let{labelKey:t,value:n,operator:a="=",onRemoveLabel:r}=e;return(0,i.jsxs)("div",{className:(0,s.useStyles)(o),children:[t,a,n,!!r&&(0,i.jsx)(s.IconButton,{name:"times",size:"xs",onClick:r})]})},o=e=>a.css`
  padding: ${e.spacing.xs} ${e.spacing.sm};
  border-radius: ${e.border.radius.sm};
  border: solid 1px ${e.colors.border2};
  font-size: ${e.typography.size.sm};
  background-color: ${e.colors.bg2};
  font-weight: ${e.typography.weight.bold};
  color: ${e.colors.formLabel};
  display: inline-block;
  line-height: 1.2;
`},94322:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});n(68404);var a=n(3490),s=n(45916);const i=e=>{let{labels:t,className:n}=e;const i=Object.entries(t).filter((e=>{let[t]=e;return!(t.startsWith("__")&&t.endsWith("__"))}));return(0,s.jsx)("div",{className:n,children:(0,s.jsx)(a.TagList,{tags:Object.values(i).map((e=>{let[t,n]=e;return`${t}=${n}`}))})})}},50489:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var a=n(36636),s=n(68404),i=n(3490),r=n(19462),o=n(45916);const l=e=>{let{onChange:t,current:n,dataSources:a,disabled:l=!1}=e;const c=(0,i.useStyles2)(d),u=(0,s.useMemo)((()=>a.map((e=>{return{label:(t=e,t.name===r.GC?"Grafana":t.name.slice(0,37)),value:e.name,imgUrl:e.imgUrl,meta:e.meta};var t}))),[a]);return(0,o.jsx)(i.Field,{className:c.field,label:l?"Alertmanager":"Choose Alertmanager",disabled:l||1===u.length,"data-testid":"alertmanager-picker",children:(0,o.jsx)(i.Select,{"aria-label":l?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:e=>e.value&&t(e.value),options:u,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:n,getOptionLabel:e=>e.label})})},d=e=>({field:a.css`
    margin-bottom: ${e.spacing(4)};
  `})},212:(e,t,n)=>{"use strict";n.d(t,{a:()=>u});var a=n(36636),s=(n(68404),n(3490)),i=n(85464),r=n(52510),o=n(94410),l=n(38708),d=n(45916);const c=["message","description"],u=e=>{let{annotationKey:t,value:n}=e;const a=i.vY[t]?(0,d.jsx)(s.Tooltip,{content:t,placement:"top",theme:"info",children:(0,d.jsx)("span",{children:i.vY[t]})}):t;return(0,d.jsx)(r.C,{label:a,horizontal:!0,children:(0,d.jsx)(h,{annotationKey:t,value:n})})},h=e=>{let{annotationKey:t,value:n}=e;const a=(0,s.useStyles)(p),i=c.includes(t),r=n&&n.startsWith("http"),u=(0,d.jsx)(o.Z,{input:n,delimiter:["{{","}}"]});return i?(0,d.jsx)(l.t,{className:a.well,children:u}):r?(0,d.jsx)("a",{href:n,target:"__blank",className:a.link,children:n}):(0,d.jsx)(d.Fragment,{children:u})},p=e=>({well:a.css`
    word-break: break-word;
  `,link:a.css`
    word-break: break-all;
    color: ${e.colors.textBlue};
  `})},91045:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=["isCollapsed","onToggle","idControlled","className","text","size"];const o=e=>{let{isCollapsed:t,onToggle:n,idControlled:o,className:d,text:c,size:u="xl"}=e,h=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);const p=(0,s.useStyles2)(l);return(0,i.jsx)(s.Button,Object.assign({type:"button",fill:"text","aria-expanded":!t,"aria-controls":o,className:(0,a.cx)(p.expandButton,d),icon:t?"angle-right":"angle-down",onClick:()=>n(!t)},h,{children:c}))},l=e=>({expandButton:a.css`
    color: ${e.colors.text.secondary};
    margin-right: ${e.spacing(1)};
  `})},52510:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=e=>{let{className:t,label:n,horizontal:r,children:l}=e;const d=(0,s.useStyles2)(o);return(0,i.jsxs)("div",{className:(0,a.cx)(t,d.field,r?d.fieldHorizontal:d.fieldVertical),children:[(0,i.jsx)("div",{children:n}),(0,i.jsx)("div",{children:l})]})},o=e=>({fieldHorizontal:a.css`
    flex-direction: row;
    ${e.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:a.css`
    flex-direction: column;
  `,field:a.css`
    display: flex;
    margin: ${e.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${e.spacing(1)};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${e.colors.text.secondary};
    }
  `})},9019:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var a=n(36636),s=n(68404),i=n(3490),r=n(72965),o=n(37910),l=n(45916);const d=e=>{var t;let{cols:n,items:d,isExpandable:u=!1,onCollapse:h,onExpand:p,isExpanded:g,renderExpandedContent:m,testIdGenerator:f,pagination:v,paginationStyles:b,renderPrefixCell:x,renderPrefixHeader:y,footerRow:w}=e;const j=(0,i.useStyles2)(o.Z);if((h||p||g)&&!(h&&p&&g))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((u||m)&&(!u||!m))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const S=(0,i.useStyles2)(c(n,u,!!y)),[C,k]=(0,s.useState)([]),T=null!==(t=null==v?void 0:v.itemsPerPage)&&void 0!==t?t:d.length,{page:I,numberOfPages:O,onPageChange:N,pageItems:F}=(0,r.h)(d,1,T);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:S.container,"data-testid":"dynamic-table",children:[(0,l.jsxs)("div",{className:S.row,"data-testid":"header",children:[y&&y(),u&&(0,l.jsx)("div",{className:S.cell}),n.map((e=>(0,l.jsx)("div",{className:S.cell,children:e.label},e.id)))]}),F.map(((e,t)=>{var s;const r=g?g(e):C.includes(e.id);return(0,l.jsxs)("div",{className:S.row,"data-testid":null!==(s=null==f?void 0:f(e,t))&&void 0!==s?s:"row",children:[x&&x(e,t,d),u&&(0,l.jsx)("div",{className:(0,a.cx)(S.cell,S.expandCell),children:(0,l.jsx)(i.IconButton,{"aria-label":(r?"Collapse":"Expand")+" row",size:"xl","data-testid":"collapse-toggle",className:S.expandButton,name:r?"angle-down":"angle-right",onClick:()=>(e=>{g&&h&&p?g(e)?h(e):p(e):k(C.includes(e.id)?C.filter((t=>t!==e.id)):[...C,e.id])})(e),type:"button"})}),n.map((n=>(0,l.jsx)("div",{className:(0,a.cx)(S.cell,S.bodyCell),"data-column":n.label,children:n.renderCell(e,t)},`${e.id}-${n.id}`))),r&&m&&(0,l.jsx)("div",{className:S.expandedContentRow,"data-testid":"expanded-content",children:m(e,t,d)})]},`${e.id}-${t}`)})),w&&(0,l.jsx)("div",{className:(0,a.cx)(S.row,S.footerRow),children:w})]}),v&&(0,l.jsx)(i.Pagination,{className:(0,a.cx)(j,b),currentPage:I,numberOfPages:O,onNavigate:N,hideWhenSinglePage:!0})]})},c=(e,t,n)=>{const s=e.map((e=>e.size?"number"==typeof e.size?`${e.size}fr`:e.size:"auto"));return t&&s.unshift("calc(1em + 16px)"),n&&s.unshift("0"),e=>({container:a.css`
      border: 1px solid ${e.colors.border.strong};
      border-radius: 2px;
      color: ${e.colors.text.secondary};
    `,row:a.css`
      display: grid;
      grid-template-columns: ${s.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${e.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${e.colors.background.primary};
      }

      ${e.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${e.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${n?"\n            & > *:first-child {\n              display: none;\n            }\n          ":""}
      }
    `,footerRow:a.css`
      display: flex;
      padding: ${e.spacing(1)};
    `,cell:a.css`
      align-items: center;
      padding: ${e.spacing(1)};

      ${e.breakpoints.down("sm")} {
        padding: ${e.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:a.css`
      overflow: hidden;

      ${e.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${e.colors.text.primary};
        }
      }
    `,expandCell:a.css`
      justify-content: center;

      ${e.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:a.css`
      grid-column-end: ${s.length+1};
      grid-column-start: ${n?3:2};
      grid-row: 2;
      padding: 0 ${e.spacing(3)} 0 ${e.spacing(1)};
      position: relative;

      ${e.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${e.colors.border.strong};
        grid-row: auto;
        padding: ${e.spacing(1)} 0 0 0;
      }
    `,expandButton:a.css`
      margin-right: 0;
      display: block;
    `})}},49179:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=e=>{let{children:t,state:n}=e;const r=(0,s.useStyles2)(o);return(0,i.jsx)("span",{className:(0,a.cx)(r.common,r[n]),children:t||n})},o=e=>({common:a.css`
    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.size.sm};
    padding: ${e.spacing(.5,1)};
    text-transform: capitalize;
    line-height: 1.2;
    min-width: ${e.spacing(8)};
    text-align: center;
    font-weight: ${e.typography.fontWeightBold};
  `,good:a.css`
    background-color: ${e.colors.success.main};
    border: solid 1px ${e.colors.success.main};
    color: ${e.colors.success.contrastText};
  `,warning:a.css`
    background-color: ${e.colors.warning.main};
    border: solid 1px ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,bad:a.css`
    background-color: ${e.colors.error.main};
    border: solid 1px ${e.colors.error.main};
    color: ${e.colors.error.contrastText};
  `,neutral:a.css`
    background-color: ${e.colors.secondary.main};
    border: solid 1px ${e.colors.secondary.main};
    color: ${e.colors.secondary.contrastText};
  `,info:a.css`
    background-color: ${e.colors.primary.main};
    border: solid 1px ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `})},94410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(36636),s=n(68404),i=n(3490),r=n(23019),o=n.n(r),l=n(45916);const d=["children","content","wrapperClassName","disabled"];const c=e=>{let{children:t,content:n,wrapperClassName:a,disabled:r=!1}=e,c=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,d);const h=(0,s.useRef)(null),p=(0,i.useStyles2)(u);return r?t:(0,l.jsx)(i.PopoverController,{content:n,hideAfter:100,children:(e,n,r)=>(0,l.jsxs)(l.Fragment,{children:[h.current&&(0,l.jsx)(i.Popover,Object.assign({},r,c,{wrapperClassName:o()(p.popover,a),onMouseLeave:n,onMouseEnter:e,referenceElement:h.current})),s.cloneElement(t,{ref:h,onMouseEnter:e,onMouseLeave:n})]})})},u=e=>({popover:a.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};

    padding: ${e.spacing(1)};
  `});var h=n(4955);const p=["$",".",'"'];function g(e){let{input:t,delimiter:n=["{{","}}"]}=e;const a=(0,i.useStyles2)(v),[s,r]=n,o=new RegExp(`(?<before>.*?)(${s}(?<token>.*?)${r}|$)`,"gm"),d=t.split("\n"),c=[];return d.forEach(((e,t)=>{Array.from(e.matchAll(o)).forEach(((e,t)=>{var n,a,i;const o=null===(n=e.groups)||void 0===n?void 0:n.before,d=null===(a=e.groups)||void 0===a||null===(i=a.token)||void 0===i?void 0:i.trim();if(o&&c.push((0,l.jsx)("span",{children:o},`${t}-before`)),d){const e=function(e){let t;t=function(e){return p.some((t=>e.startsWith(t)))}(e)?m.Variable:function(e){return h.keywords.some((t=>e.startsWith(t)))}(e)?m.Keyword:function(e){return h.builtinFunctions.some((t=>e.startsWith(t)))}(e)?m.Function:m.Unknown;return t}(d),n=e===m.Variable?d:"",a=`${s} ${d} ${r}`;c.push((0,l.jsx)(f,{content:a,type:e,description:n},`${t}-token`))}})),c.push((0,l.jsx)("br",{},`${t}-newline`))})),(0,l.jsx)("span",{className:a.wrapper,children:c})}var m;function f(e){let{content:t,description:n,type:a}=e;const s=(0,i.useStyles2)(v),r=!1===Boolean(a);return(0,l.jsx)(c,{placement:"top-start",disabled:r,content:(0,l.jsxs)("div",{className:s.hoverTokenItem,children:[(0,l.jsx)(i.Badge,{text:(0,l.jsx)(l.Fragment,{children:a}),color:"blue"})," ",n&&(0,l.jsx)("code",{children:n})]}),children:(0,l.jsx)("span",{children:(0,l.jsx)(i.Badge,{className:s.token,text:t,color:"blue"})})})}!function(e){e.Variable="variable",e.Function="function",e.Keyword="keyword",e.Unknown="unknown"}(m||(m={}));const v=e=>({wrapper:a.css`
    white-space: pre-wrap;
  `,token:a.css`
    cursor: default;
    font-family: ${e.typography.fontFamilyMonospace};
  `,popover:a.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};

    padding: ${e.spacing(1)};
  `,hoverTokenItem:a.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${e.spacing(1)};
  `})},38708:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=e=>{let{children:t,className:n}=e;const r=(0,s.useStyles)(o);return(0,i.jsx)("div",{className:(0,a.cx)(r.wrapper,n),children:t})},o=e=>({wrapper:a.css`
    background-color: ${e.colors.panelBg};
    border: solid 1px ${e.colors.formInputBorder};
    border-radius: ${e.border.radius.sm};
    padding: ${e.spacing.xs} ${e.spacing.sm};
    font-family: ${e.typography.fontFamily.monospace};
  `})},8861:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(64681),s=n.n(a),i=(n(68404),n(3490)),r=n(63982),o=n(45916);const l=e=>{let{group:t}=e;const n=(0,i.useStyles2)(r.r),a=t.alerts.length,l=t.alerts.reduce(((e,t)=>(e[t.status.state]?e[t.status.state]+=1:e[t.status.state]=1,e)),{});return(0,o.jsxs)("div",{children:[`${a} ${s()("alert",a)}: `,Object.entries(l).map(((e,a)=>{let[s,i]=e;return(0,o.jsxs)("span",{className:n[s],children:[a>0&&", ",`${i} ${s}`]},`${JSON.stringify(t.labels)}-notifications-${a}`)}))]})}},4955:(e,t,n)=>{"use strict";var a;n.r(t),n.d(t,{availableAlertManagerFunctions:()=>s,builtinFunctions:()=>i,conf:()=>l,keywords:()=>r,language:()=>o}),function(e){e.Delimiter="delimiter",e.Keyword="keyword",e.Function="type.identifier",e.String="string",e.Variable="variable.name",e.Number="number",e.Comment="comment",e.Operator="operator",e.Identifier="idenfifier"}(a||(a={}));const s=["toUpper","toLower","title","join","match","safeHtml","reReplaceAll","stringSlice"],i=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery","eq","ne","lt","le","gt","ge"],r=["define","if","else","end","range","break","continue","template","block","with"],o={defaultToken:"",keywords:r,functions:[...i,...s],operators:["|"],tokenizer:{root:[[/"/,a.String,"@string"],[/`/,a.String,"@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,a.Number],[/\d/,a.Number],[/[;,.]/,a.Delimiter],[/{{-?/,a.Delimiter],[/-?}}/,a.Delimiter],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:a.Keyword},"@functions":{token:a.Function},"@default":a.Identifier}}],[/\/\*.*\*\//,a.Comment]],string:[[/[^\\"]+/,a.String],[/\\./,"string.escape.invalid"],[/"/,a.String,"@pop"]],rawstring:[[/[^\`]/,a.String],[/`/,a.String,"@pop"]]}},l={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},9290:(e,t,n)=>{"use strict";n.d(t,{o:()=>h});var a=n(68404),s=n(86647),i=n(94322),r=n(9019),o=n(212),l=n(52510),d=n(45916);const c=e=>{let{instance:t}=e;const n=(Object.entries(t.annotations||{})||[]).filter((e=>{let[t,n]=e;return!!n.trim()}));return(0,d.jsxs)("div",{children:[t.value&&(0,d.jsx)(l.C,{label:"Value",horizontal:!0,children:t.value}),n.map((e=>{let[t,n]=e;return(0,d.jsx)(o.a,{annotationKey:t,value:n},t)}))]})};var u=n(69357);const h=e=>{let{instances:t,pagination:n,footerRow:i}=e;const o=(0,a.useMemo)((()=>t.map((e=>({data:e,id:(0,s.pB)(e)})))),[t]);return(0,d.jsx)(r.t,{cols:p,isExpandable:!0,items:o,renderExpandedContent:e=>{let{data:t}=e;return(0,d.jsx)(c,{instance:t})},pagination:n,footerRow:i})},p=[{id:"state",label:"State",renderCell:e=>{let{data:{state:t}}=e;return(0,d.jsx)(u.l,{state:t})},size:"80px"},{id:"labels",label:"Labels",renderCell:e=>{let{data:{labels:t}}=e;return(0,d.jsx)(i.s,{labels:t})}},{id:"created",label:"Created",renderCell:e=>{let{data:{activeAt:t}}=e;return(0,d.jsx)(d.Fragment,{children:t.startsWith("0001")?"-":t.slice(0,19).replace("T"," ")})},size:"150px"}]},69357:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});n(68404);var a=n(86647),s=n(49179),i=n(45916);const r=e=>{let{state:t}=e;return(0,i.jsx)(s.i,{state:(0,a.Aq)(t),children:(0,a.SS)(t)})}},72965:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var a=n(68404);function s(e,t,n){const[s,i]=(0,a.useState)(t),r=Math.ceil(e.length/n),o=n*(s-1),l=(0,a.useMemo)((()=>e.slice(o,o+n)),[e,o,n]),d=(0,a.useCallback)((e=>{i(e)}),[i]);return(0,a.useEffect)((()=>i(1)),[r]),{page:s,onPageChange:d,numberOfPages:r,pageItems:l}}},33899:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var a=n(18745);function s(e,t){return(0,a.useSelector)((t=>e(t.unifiedAlerting)),t)}},83809:(e,t,n)=>{"use strict";n.d(t,{sx:()=>ce,QY:()=>ee,Nc:()=>re,r0:()=>oe,X4:()=>te,hS:()=>Z,oE:()=>q,S6:()=>ne,yO:()=>X,mS:()=>ie,Yh:()=>R,ei:()=>U,dV:()=>z,lB:()=>H,dB:()=>Y,on:()=>W,zy:()=>$,wE:()=>L,vL:()=>ae,sw:()=>se,Ms:()=>Q,Vj:()=>K,dn:()=>V,y6:()=>M,UR:()=>E,nw:()=>_,je:()=>B,wy:()=>G,D8:()=>le,mM:()=>J,hv:()=>de});var a=n(35140),s=n(82897),i=n(90923),r=n(48427),o=n(51542),l=n(28659),d=n(58799),c=n(43215),u=n(19462);async function h(e){try{var t,n,a;const s=await(0,d.n)((0,i.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,u.gt)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:null!==(t=s.data.template_files)&&void 0!==t?t:{},template_file_provenances:null!==(n=s.data.template_file_provenances)&&void 0!==n?n:{},alertmanager_config:null!==(a=s.data.alertmanager_config)&&void 0!==a?a:{}}}catch(t){var s,r;if(e===u.GC&&(0,i.isFetchError)(t)&&null!==(s=t.data)&&void 0!==s&&null!==(r=s.message)&&void 0!==r&&r.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw t}}async function p(e){return(await(0,d.n)((0,i.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,u.gt)(e)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function g(e,t,n){const a={receivers:t,alert:n};try{const t=await(0,d.n)((0,i.getBackendSrv)().fetch({method:"POST",data:a,url:`/api/alertmanager/${(0,u.gt)(e)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(m(t.data))throw new Error(f(t.data))}catch(e){if((0,i.isFetchError)(e)&&function(e){const t=null==e?void 0:e.receivers;if(Array.isArray(t))return t.every((e=>"string"==typeof e.name&&Array.isArray(e.grafana_managed_receiver_configs)));return!1}(e.data)&&m(e.data))throw new Error(f(e.data));throw e}}function m(e){return e.receivers.some((e=>e.grafana_managed_receiver_configs.some((e=>"failed"===e.status))))}function f(e){return e.receivers.flatMap((e=>e.grafana_managed_receiver_configs.filter((e=>"failed"===e.status)).map((e=>{var t;return null!==(t=e.error)&&void 0!==t?t:"Unknown error."})))).join("; ")}async function v(){return(await(0,d.n)((0,i.getBackendSrv)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function b(e){return e.replace(/"/g,'\\"')}function x(e,t){const n=(e,t)=>e>t?-1:t>e?1:0,a=n(e.timeEnd,t.timeEnd);if(a)return a;const s=n(e.time,t.time);return s||n(e.id,t.id)}var y=n(15458);var w=n(3259),j=n(26588),S=n(88414),C=n(82139),k=n(39357),T=n(8455),I=n(59940),O=n(50475),N=n(86647);function F(e){const t=async t=>{if((0,N.Kl)(t)){const n=await(0,j.m6)(e);for(const[e,a]of Object.entries(n))for(const n of a){const a=n.rules.find((e=>{var n;return(0,N.Pc)(e)&&(null===(n=e.grafana_alert)||void 0===n?void 0:n.uid)===t.uid}));if(a)return{group:n,ruleSourceName:u.GC,namespace:e,rule:a}}}if((0,N.E4)(t)){const{ruleSourceName:n,namespace:a,groupName:s}=t,i=await(0,j.jJ)(e,a,s);if(!i)return null;const r=i.rules.find((e=>{const s=I.Zk(n,a,i.name,e);return I.Dg(s,t)}));return r?{group:i,ruleSourceName:n,namespace:a,rule:r}:null}if((0,N.qE)(t))throw new Error("Native prometheus rules can not be edited in grafana.");return null},n=async t=>{const{namespace:n,group:a,rule:s}=t;1!==a.rules.length?await(0,j.P4)(e,n,Object.assign({},a,{rules:a.rules.filter((e=>e!==s))})):await(0,j.BC)(e,n,a.name)},a=async(t,n,a)=>{var s,i;const r=await(0,j.jJ)(e,t,n.name);if(!r)throw new Error(`No group found with name "${n.name}"`);const o={name:n.name,interval:n.interval,rules:(null!==(s=r.rules)&&void 0!==s?s:[]).concat(a)};return await(0,j.P4)(e,t,o),{uid:null!==(i=a.grafana_alert.uid)&&void 0!==i?i:"",ruleSourceName:u.GC}},s=async(e,t,n,s)=>{D(n,s);return await a(e,t,s)},i=async(t,n,a)=>{D(t,n);const s=t.group.rules.map((e=>(0,N.Pc)(e)&&e.grafana_alert.uid===t.rule.grafana_alert.uid?n:e));return await(0,j.P4)(e,t.namespace,{name:t.group.name,interval:a,rules:s}),{uid:t.rule.grafana_alert.uid,ruleSourceName:u.GC}};return{findEditableRule:t,deleteRule:n,saveLotexRule:async(a,s)=>{const{dataSourceName:i,group:r,namespace:o}=a,l=(0,O.yh)(a);if(i&&r&&o){if(s){const a=await t(I.CK(s));if(!a)throw new Error("Rule not found.");if(a.namespace===o&&a.group.name===r){const t=Object.assign({},a.group,{rules:a.group.rules.map((e=>e===a.rule?l:e))});return await(0,j.P4)(e,o,t),I.Zk(i,o,r,l)}await n(a)}const a=await(0,j.jJ)(e,o,r),d=a?Object.assign({},a,{rules:[...a.rules,l]}):{name:r,rules:[l]};return await(0,j.P4)(e,o,d),I.Zk(i,o,r,l)}throw new Error("Data source and location must be specified")},saveGrafanaRule:async(e,n)=>{const{folder:r,group:o,evaluateEvery:l}=e;if(!r)throw new Error("Folder must be specified");const d=(0,O.mI)(e),c=r.title,u={name:o,interval:l};if(!n)return a(c,u,d);const h=await t(I.CK(n));if(!h)throw new Error("Rule not found.");const p=h.namespace===c,g=h.group.name===e.group;return p&&g?i(h,d,l):s(c,u,h,d)}}}function D(e,t){if(!(0,N.Pc)(e.rule))throw new Error("The rule is not a Grafana managed rule");const n=e.rule.grafana_alert.uid;t.grafana_alert.uid=n}function P(e,t){var n;const a=null===(n=e().unifiedAlerting.dataSources[t])||void 0===n?void 0:n.result;if(!a)throw new Error(`Data source configuration is not available for "${t}" data source`);return a}function A(e,t){const n=P(e,t);if(!n.rulerConfig)throw new Error(`Ruler API is not available for ${t}`);return n.rulerConfig}const M=(0,a.hg)("unifiedalerting/fetchPromRules",(async(e,t)=>{let{rulesSourceName:n,filter:a}=e;return await t.dispatch(_({rulesSourceName:n})),await(0,T.$b)((0,w.j)(n,a))})),R=(0,a.hg)("unifiedalerting/fetchAmConfig",(e=>(0,T.$b)((async()=>(0,u.RY)(e)?p(e).then((e=>({alertmanager_config:e.config,template_files:{}}))):(0,k.fm)((()=>h(e)),(e=>{var t;return!(null===(t=(0,r.Z)(e))||void 0===t||!t.includes("alertmanager storage object not found"))}),3e4).then((t=>(0,s.isEmpty)(t.alertmanager_config)&&(0,s.isEmpty)(t.template_files)&&e!==u.GC?p(e).then((e=>({alertmanager_config:e.config,template_files:{},template_file_provenances:t.template_file_provenances}))):t)))()))),$=(0,a.hg)("unifiedAlerting/fetchExternalAlertmanagers",(()=>(0,T.$b)(async function(){return(await(0,d.n)((0,i.getBackendSrv)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}()))),L=(0,a.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",(()=>(0,T.$b)(v()))),E=(0,a.hg)("unifiedalerting/fetchRulerRules",(async(e,t)=>{let{rulesSourceName:n,filter:a}=e,{dispatch:s,getState:i}=t;await s(_({rulesSourceName:n}));const r=A(i,n);return await(0,T.$b)((0,j.m6)(r,a))}));function V(e){let{rulesSourceName:t}=e;return async(e,n)=>{await e(_({rulesSourceName:t}));const a=P(n,t);await e(M({rulesSourceName:t})),a.rulerConfig&&await e(E({rulesSourceName:t}))}}const B=(0,a.hg)("unifiedalerting/fetchSilences",(e=>(0,T.$b)(async function(e){return(await(0,d.n)((0,i.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,u.gt)(e)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e))));function z(){return async e=>{const t=(0,u.mA)().map((t=>e(_({rulesSourceName:t}))));await Promise.allSettled(t)}}const _=(0,a.hg)("unifiedalerting/fetchPromBuildinfo",(async e=>{let{rulesSourceName:t}=e;return(0,T.$b)((async()=>{if(t===u.GC)return{name:u.GC,id:u.GC,rulerConfig:{dataSourceName:u.GC,apiVersion:"legacy"}};const e=(0,u.VX)(t);if(!e)throw new Error(`Missing data source configuration for ${t}`);const{id:n,name:a}=e,s=await(0,y.C)(a);return{name:a,id:n,rulerConfig:s.features.rulerApiEnabled?{dataSourceName:a,apiVersion:s.application===o.T8.Lotex?"legacy":"config"}:void 0}})())}),{condition:(e,t)=>{var n,a;let{rulesSourceName:s}=e,{getState:i}=t;const r=i().unifiedAlerting.dataSources,o=Boolean(null===(n=r[s])||void 0===n?void 0:n.result),l=Boolean(null===(a=r[s])||void 0===a?void 0:a.error);return!(o||l)}});function U(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return async(t,n)=>Promise.all((0,u.mA)().map((async a=>{var s,i;await t(_({rulesSourceName:a}));const{promRules:r,rulerRules:o,dataSources:l}=n().unifiedAlerting,d=l[a].result;d&&(!e&&null!==(s=r[a])&&void 0!==s&&s.loading||t(M({rulesSourceName:a})),!e&&null!==(i=o[a])&&void 0!==i&&i.loading||!d.rulerConfig||t(E({rulesSourceName:a})))})))}function H(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return async(t,n)=>{const{promRules:a}=n().unifiedAlerting;(0,u.mA)().map((n=>{var s;!e&&null!==(s=a[n])&&void 0!==s&&s.loading||t(M({rulesSourceName:n}))}))}}const W=(0,a.hg)("unifiedalerting/fetchEditableRule",((e,t)=>{const n=A(t.getState,e.ruleSourceName);return(0,T.$b)(F(n).findEditableRule(e))}));function q(e,t){return async(n,a)=>{(0,T.Ez)((async()=>{const s=(0,u.EG)(e.rulesSource),i=A(a,s);await(0,j.BC)(i,e.name,t.name),await n(V({rulesSourceName:s}))})(),{successMessage:"Group deleted"})}}function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async(n,a)=>{(0,T.Ez)((async()=>{const s=F(A(a,e.ruleSourceName)),r=await s.findEditableRule(e);if(!r)throw new Error("Rule not found.");await s.deleteRule(r),await n(V({rulesSourceName:r.ruleSourceName})),t.navigateTo&&i.locationService.replace(t.navigateTo)})(),{successMessage:"Rule deleted."})}}const G=(0,a.hg)("unifiedalerting/saveRuleForm",((e,t)=>{let{values:n,existing:a,redirectOnSave:s}=e;return(0,T.Ez)((0,T.$b)((async()=>{const{type:e}=n;let r;if(e===S.$.cloudAlerting||e===S.$.cloudRecording){if(!n.dataSourceName)throw new Error("The Data source has not been defined.");const e=F(A(t.getState,n.dataSourceName));r=await e.saveLotexRule(n,a)}else{if(e!==S.$.grafana)throw new Error("Unexpected rule form type");{const e=F(A(t.getState,u.GC));r=await e.saveGrafanaRule(n,a)}}if(s)i.locationService.push(s);else{const e=I.$V(r);if(!e)return void i.locationService.push("/alerting/list");const n=`/alerting/${encodeURIComponent(e)}/edit`;i.locationService.getLocation().pathname!==n?i.locationService.replace(n):t.dispatch(W(r))}})()),{successMessage:a?`Rule "${n.name}" updated.`:`Rule "${n.name}" saved.`,errorMessage:"Failed to save rule"})})),K=(0,a.hg)("unifiedalerting/fetchGrafanaNotifiers",(()=>(0,T.$b)((0,i.getBackendSrv)().get("/api/alert-notifiers")))),Q=(0,a.hg)("unifiedalerting/fetchGrafanaAnnotations",(e=>(0,T.$b)(function(e){return(0,i.getBackendSrv)().get("/api/annotations",{alertId:e}).then((e=>null==e?void 0:e.sort(x)))}(e)))),J=(0,a.hg)("unifiedalerting/updateAMConfig",((e,t)=>{let{alertManagerSourceName:n,oldConfig:a,newConfig:r,successMessage:o,redirectPath:l,refetch:c}=e;return(0,T.Ez)((0,T.$b)((async()=>{const e=await h(n);if(!((0,s.isEmpty)(e.alertmanager_config)&&(0,s.isEmpty)(e.template_files)||JSON.stringify(e)===JSON.stringify(a)))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await async function(e,t){await(0,d.n)((0,i.getBackendSrv)().fetch({method:"POST",url:`/api/alertmanager/${(0,u.gt)(e)}/config/api/v1/alerts`,data:t,showErrorAlert:!1,showSuccessAlert:!1}))}(n,(0,C.X4)(r)),c&&await t.dispatch(R(n)),l&&i.locationService.push((0,k.eQ)(l,n))})()),{successMessage:o})})),Y=(0,a.hg)("unifiedalerting/fetchAmAlerts",(e=>(0,T.$b)(async function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const r=c.urlUtil.toUrlParams({silenced:n,active:a,inhibited:s})+(null==t?void 0:t.map((e=>`filter=${encodeURIComponent(`${b(e.name)}=${e.isRegex?"~":""}"${b(e.value)}"`)}`)).join("&"))||"";return(await(0,d.n)((0,i.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,u.gt)(e)}/api/v2/alerts`+(r?"?"+r:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}(e,[],!0,!0,!0)))),X=(e,t)=>async n=>{await(0,T.Ez)(async function(e,t){await(0,i.getBackendSrv)().delete(`/api/alertmanager/${(0,u.gt)(e)}/api/v2/silence/${encodeURIComponent(t)}`)}(e,t),{successMessage:"Silence expired."}),n(B(e)),n(Y(e))},ee=(0,a.hg)("unifiedalerting/updateSilence",(e=>{let{alertManagerSourceName:t,payload:n,exitOnSave:a,successMessage:s}=e;return(0,T.Ez)((0,T.$b)((async()=>{await async function(e,t){return(await(0,d.n)((0,i.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,u.gt)(e)}/api/v2/silences`,data:t,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}(t,n),a&&i.locationService.push("/alerting/silences")})()),{successMessage:s})})),te=(e,t)=>(n,a)=>{var s,i,r;const o=null===(s=a().unifiedAlerting.amConfigs)||void 0===s||null===(i=s[t])||void 0===i?void 0:i.result;if(!o)throw new Error(`Config for ${t} not found`);if(null===(r=o.alertmanager_config.receivers)||void 0===r||!r.find((t=>t.name===e)))throw new Error(`Cannot delete receiver ${e}: not found in config.`);const l=Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{receivers:o.alertmanager_config.receivers.filter((t=>t.name!==e))})});return n(J({newConfig:l,oldConfig:o,alertManagerSourceName:t,successMessage:"Contact point deleted.",refetch:!0}))},ne=(e,t)=>(n,a)=>{var s,i,r,o;const l=null===(s=a().unifiedAlerting.amConfigs)||void 0===s||null===(i=s[t])||void 0===i?void 0:i.result;if(!l)throw new Error(`Config for ${t} not found`);if("string"!=typeof(null===(r=l.template_files)||void 0===r?void 0:r[e]))throw new Error(`Cannot delete template ${e}: not found in config.`);const d=Object.assign({},l.template_files);delete d[e];const c=Object.assign({},l,{alertmanager_config:Object.assign({},l.alertmanager_config,{templates:null===(o=l.alertmanager_config.templates)||void 0===o?void 0:o.filter((t=>t!==e))}),template_files:d});return n(J({newConfig:c,oldConfig:l,alertManagerSourceName:t,successMessage:"Template deleted.",refetch:!0}))},ae=(0,a.hg)("unifiedalerting/fetchFolder",(e=>(0,T.$b)(l.ae.getFolderByUid(e,{withAccessControl:!0})))),se=e=>(t,n)=>{var a;null!==(a=n().unifiedAlerting.folders[e])&&void 0!==a&&a.dispatched||t(ae(e))},ie=(0,a.hg)("unifiedalerting/fetchAlertGroups",(e=>(0,T.$b)(async function(e){return(await(0,d.n)((0,i.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,u.gt)(e)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e)))),re=(0,a.hg)("unifiedalerting/deleteAlertManagerConfig",(async(e,t)=>(0,T.Ez)((0,T.$b)((async()=>{await async function(e){await(0,d.n)((0,i.getBackendSrv)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,u.gt)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}(e),await t.dispatch(R(e))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."}))),oe=(e,t)=>async(n,a)=>{var s,i,r;const o=a().unifiedAlerting.amConfigs[e].result,l=null!==(s=null==o||null===(i=o.alertmanager_config)||void 0===i||null===(r=i.mute_time_intervals)||void 0===r?void 0:r.filter((e=>{let{name:n}=e;return n!==t})))&&void 0!==s?s:[];var d;o&&(0,T.Ez)(n(J({alertManagerSourceName:e,oldConfig:o,newConfig:Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{route:o.alertmanager_config.route?(0,C.rU)(t,null===(d=o.alertmanager_config)||void 0===d?void 0:d.route):void 0,mute_time_intervals:l})}),refetch:!0})),{successMessage:`Deleted "${t}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},le=(0,a.hg)("unifiedalerting/testReceivers",(e=>{let{alertManagerSourceName:t,receivers:n,alert:a}=e;return(0,T.Ez)((0,T.$b)(g(t,n,a)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})})),de=(0,a.hg)("unifiedalerting/updateLotexNamespaceAndGroup",(async(e,t)=>(0,T.Ez)((0,T.$b)((async()=>{const{rulesSourceName:n,namespaceName:a,groupName:s,newNamespaceName:i,newGroupName:r,groupInterval:o}=e;if(e.rulesSourceName===u.GC)throw new Error("this action does not support Grafana rules");const l=A(t.getState,n),d=await(0,j.m6)(l);if(!d[a])throw new Error(`Namespace "${a}" not found.`);const c=d[a].find((e=>e.name===s));if(!c)throw new Error(`Group "${s}" not found.`);if(r!==s&&d[a].find((e=>e.name===r)))throw new Error(`Group "${r}" already exists.`);if(i!==a&&d[i])throw new Error(`Namespace "${i}" already exists.`);if(i===a&&s===r&&o===c.interval)throw new Error("Nothing changed.");if(i!==a){for(const e of d[a])await(0,j.P4)(l,i,e.name===s?Object.assign({},e,{name:r,interval:o}):e);await(0,j.sz)(l,a)}else await(0,j.P4)(l,a,Object.assign({},c,{name:r,interval:o})),r!==s&&await(0,j.BC)(l,a,s);await t.dispatch(E({rulesSourceName:n}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"}))),ce=(0,a.hg)("unifiedAlerting/addExternalAlertmanagers",(async(e,t)=>(0,T.Ez)((0,T.$b)((async()=>{await async function(e){await(0,d.n)((0,i.getBackendSrv)().fetch({method:"POST",data:e,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then((()=>{v()}))}(e),t.dispatch(L())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"})))},63982:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var a=n(36636),s=n(10331);const i=e=>({[s.Z9.Active]:a.css`
    color: ${e.colors.error.text};
  `,[s.Z9.Suppressed]:a.css`
    color: ${e.colors.primary.text};
  `,[s.Z9.Unprocessed]:a.css`
    color: ${e.colors.secondary.text};
  `})},37910:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(36636);const s=e=>a.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${e.spacing(2,0)};
  `},88414:(e,t,n)=>{"use strict";let a;n.d(t,{$:()=>a}),function(e){e.grafana="grafana",e.cloudAlerting="cloud-alerting",e.cloudRecording="cloud-recording"}(a||(a={}))},82969:(e,t,n)=>{"use strict";n.d(t,{Bz:()=>h,Fo:()=>l,Ko:()=>u,Ob:()=>o,QX:()=>c,Rv:()=>g,ql:()=>p});var a=n(61959),s=n(47570),i=n(19462);function r(e){return(0,i.HY)(e)?"grafana":"external"}const o={read:{grafana:s.bW.AlertingInstanceRead,external:s.bW.AlertingInstancesExternalRead},create:{grafana:s.bW.AlertingInstanceCreate,external:s.bW.AlertingInstancesExternalWrite},update:{grafana:s.bW.AlertingInstanceUpdate,external:s.bW.AlertingInstancesExternalWrite},delete:{grafana:s.bW.AlertingInstanceUpdate,external:s.bW.AlertingInstancesExternalWrite}},l={read:{grafana:s.bW.AlertingNotificationsRead,external:s.bW.AlertingNotificationsExternalRead},create:{grafana:s.bW.AlertingNotificationsWrite,external:s.bW.AlertingNotificationsExternalWrite},update:{grafana:s.bW.AlertingNotificationsWrite,external:s.bW.AlertingNotificationsExternalWrite},delete:{grafana:s.bW.AlertingNotificationsWrite,external:s.bW.AlertingNotificationsExternalWrite}},d={read:{grafana:s.bW.AlertingRuleRead,external:s.bW.AlertingRuleExternalRead},create:{grafana:s.bW.AlertingRuleCreate,external:s.bW.AlertingRuleExternalWrite},update:{grafana:s.bW.AlertingRuleUpdate,external:s.bW.AlertingRuleExternalWrite},delete:{grafana:s.bW.AlertingRuleDelete,external:s.bW.AlertingRuleExternalWrite}};function c(e){const t=r(e);return{read:o.read[t],create:o.create[t],update:o.update[t],delete:o.delete[t]}}function u(e){const t=r(e);return{read:l.read[t],create:l.create[t],update:l.update[t],delete:l.delete[t]}}function h(e){const t=r(e);return{read:d.read[t],create:d.create[t],update:d.update[t],delete:d.delete[t]}}function p(e,t){return()=>a.Vt.evaluatePermission((()=>t),e)}function g(){return{canCreateGrafanaRules:a.Vt.hasAccess(s.bW.FoldersRead,a.Vt.hasEditPermissionInFolders)&&a.Vt.hasAccess(d.create.grafana,a.Vt.hasEditPermissionInFolders),canCreateCloudRules:a.Vt.hasAccess(s.bW.DataSourcesRead,a.Vt.isEditor)&&a.Vt.hasAccess(d.create.external,a.Vt.isEditor),canEditRules:e=>{const t=e===i.GC?a.Vt.hasEditPermissionInFolders:a.Vt.isEditor;return a.Vt.hasAccess(h(e).update,t)}}}},82139:(e,t,n)=>{"use strict";n.d(t,{FM:()=>l,J8:()=>k,Tc:()=>y,X4:()=>r,Xy:()=>w,Zh:()=>b,_J:()=>p,cm:()=>h,eD:()=>x,m8:()=>T,nv:()=>c,oI:()=>g,qw:()=>I,rU:()=>o,tA:()=>m,tC:()=>v,u6:()=>S,uK:()=>j,v7:()=>C,zy:()=>u});var a=n(10331),s=n(91470),i=n(19462);function r(e){return e.alertmanager_config.receivers||(e.alertmanager_config.receivers=[{name:"default "}]),e.alertmanager_config.route||(e.alertmanager_config.route={receiver:e.alertmanager_config.receivers[0].name}),e.template_files||(e.template_files={}),e}function o(e,t){var n,a,s;return Object.assign({},t,{mute_time_intervals:null!==(n=null===(a=t.mute_time_intervals)||void 0===a?void 0:a.filter((t=>t!==e)))&&void 0!==n?n:[],routes:null===(s=t.routes)||void 0===s?void 0:s.map((t=>o(e,t)))})}function l(e,t,n){var a,s;return Object.assign({},n,{mute_time_intervals:null===(a=n.mute_time_intervals)||void 0===a?void 0:a.map((n=>n===t?e:n)),routes:null===(s=n.routes)||void 0===s?void 0:s.map((n=>l(e,t,n)))})}function d(e,t){var n,a;return null!==(n=t.receiver===e||(null===(a=t.routes)||void 0===a?void 0:a.some((t=>d(e,t)))))&&void 0!==n&&n}function c(e,t){var n;return null!==(n=t.alertmanager_config.route&&d(e,t.alertmanager_config.route))&&void 0!==n&&n}function u(e){return e.isEqual?e.isRegex?a._M.regex:a._M.equal:e.isRegex?a._M.notRegex:a._M.notEqual}function h(e){return{name:e.name,value:e.value,operator:u(e)}}function p(e){return Object.assign({name:e.name,value:e.value},function(e){switch(e){case a._M.equal:return{isEqual:!0,isRegex:!1};case a._M.notEqual:return{isEqual:!1,isRegex:!1};case a._M.regex:return{isEqual:!0,isRegex:!0};case a._M.notRegex:return{isEqual:!1,isRegex:!0}}}(e.operator))}function g(e){return`{${e.map(h).reduce(((e,t)=>{const n=`${t.name}${t.operator}"${t.value}"`;return e?`${e},${n}`:n}),"")}}`}const m=[{label:a._M.equal,description:"Equals",value:a._M.equal},{label:a._M.notEqual,description:"Does not equal",value:a._M.notEqual},{label:a._M.regex,description:"Matches regex",value:a._M.regex},{label:a._M.notRegex,description:"Does not match regex",value:a._M.notRegex}],f=[a._M.regex,a._M.notRegex,a._M.notEqual,a._M.equal];function v(e){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${t}`);const n=f.map((e=>[e,t.indexOf(e)])).filter((e=>{let[t,n]=e;return n>-1})).sort(((e,t)=>e[1]-t[1]));if(!n.length)throw new Error(`Invalid matcher: ${t}`);const[s,i]=n[0],r=t.slice(0,i).trim(),o=t.slice(i+s.length).trim();if(!r)throw new Error(`Invalid matcher: ${t}`);return{name:r,value:o,isRegex:s===a._M.regex||s===a._M.notRegex,isEqual:s===a._M.equal||s===a._M.regex}}function b(e){const t=[];return e.replace(/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,((e,n,s,i)=>{const r=s===a._M.equal||s===a._M.regex,o=s===a._M.regex||s===a._M.notRegex;return t.push({name:n,value:i,isEqual:r,isRegex:o}),""})),t}function x(e,t){return t.every((t=>{let{name:n,value:a,isRegex:s,isEqual:i}=t;return Object.entries(e).some((e=>{let[t,r]=e;const o=n===t;let l;return i&&!s&&(l=a===r),i||s||(l=a!==r),i&&s&&(l=new RegExp(a).test(r)),!i&&s&&(l=!new RegExp(a).test(r)),o&&l}))}))}function y(){return(0,s.x)().filter((e=>e.type===i.ye.Alertmanager))}function w(e){return y().find((t=>e===t.uid))}function j(e){const{times:t,weekdays:n,days_of_month:a,months:s,years:i}=e;return[S(t),C(n),k(a),T(s),I(i)].join(", ")}function S(e){return"Times: "+(e?null==e?void 0:e.map((e=>{let{start_time:t,end_time:n}=e;return`${t} - ${n} UTC`})).join(" and "):"All")}function C(e){var t;return"Weekdays: "+(null!==(t=null==e?void 0:e.map((e=>{if(e.includes(":"))return e.split(":").map((e=>{const t=e.slice(0,3);return t[0].toLocaleUpperCase()+t.slice(1)})).join("-");{const t=e.slice(0,3);return t[0].toLocaleUpperCase()+t.slice(1)}})).join(", "))&&void 0!==t?t:"All")}function k(e){var t;return"Days of the month: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function T(e){var t;return"Months: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function I(e){var t;return"Years: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}},91470:(e,t,n)=>{"use strict";n.d(t,{f:()=>r,x:()=>i});var a=n(43215),s=n(90923);function i(){return Object.values(s.config.datasources)}function r(e){if(!e)return{globalLimit:0,exceedsLimit:!1};if(!(0,a.isValidGoDuration)(s.config.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const t=a.rangeUtil.intervalToMs(e),n=a.rangeUtil.intervalToMs(s.config.unifiedAlerting.minInterval);return{globalLimit:n,exceedsLimit:n>t&&t>0}}},85464:(e,t,n)=>{"use strict";n.d(t,{Fe:()=>c,GC:()=>d,Kd:()=>u,c4:()=>i,cm:()=>o,de:()=>r,iF:()=>l,jZ:()=>a,p4:()=>s,q6:()=>h,vY:()=>p});const a="ruler not supported",s=2e4,i="alertmanager",r="alerting-alertmanager",o=2e4,l=2e4,d="timeseries",c="table",u="stat";let h;!function(e){e.description="description",e.summary="summary",e.runbookURL="runbook_url",e.alertId="__alertId__",e.dashboardUID="__dashboardUid__",e.panelID="__panelId__"}(h||(h={}));const p={[h.description]:"Description",[h.summary]:"Summary",[h.runbookURL]:"Runbook URL",[h.dashboardUID]:"Dashboard UID",[h.panelID]:"Panel ID",[h.alertId]:"Alert ID"}},19462:(e,t,n)=>{"use strict";n.d(t,{EG:()=>w,Eu:()=>p,GC:()=>d,HY:()=>k,JY:()=>c,LE:()=>b,P:()=>N,RY:()=>C,VX:()=>g,aM:()=>m,c$:()=>T,gt:()=>O,h_:()=>y,jq:()=>S,mA:()=>x,o_:()=>I,v_:()=>j,ye:()=>u,z3:()=>v});var a=n(90923),s=n(61959),i=n(10331),r=n(47570),o=n(82969),l=n(91470);const d="grafana",c="-- Grafana --";let u;!function(e){e.Alertmanager="alertmanager",e.Loki="loki",e.Prometheus="prometheus"}(u||(u={}));const h=[u.Loki,u.Prometheus];function p(){return s.Vt.hasPermission(r.bW.AlertingRuleExternalRead)?(0,l.x)().filter((e=>h.includes(e.type)&&!1!==e.jsonData.manageAlerts)).sort(((e,t)=>e.name.localeCompare(t.name))):[]}function g(e){return p().find((t=>t.name===e))}function m(){return(0,l.x)().filter((e=>e.type===u.Alertmanager)).sort(((e,t)=>e.name.localeCompare(t.name)))}const f={name:d,imgUrl:"public/img/grafana_icon.svg"};function v(){return[f,...m().map((e=>({name:e.name,displayName:e.name,imgUrl:e.meta.info.logos.small,meta:e.meta})))]}function b(e){const t=[],n={instance:o.Ob.read,notification:o.Fo.read};if(s.Vt.hasPermission(n[e].grafana)&&t.push(f),s.Vt.hasPermission(n[e].external)){const e=m().map((e=>({name:e.name,displayName:e.name,imgUrl:e.meta.info.logos.small,meta:e.meta})));t.push(...e)}return t}function x(){const e=p().map((e=>e.name));return s.Vt.hasPermission(r.bW.AlertingRuleRead)&&e.push(d),e}function y(){const e=p();return s.Vt.hasPermission(r.bW.AlertingRuleRead)&&e.push(d),e}function w(e){return S(e)?e.name:e}function j(e){return S(e)?e.uid:d}function S(e){return e!==d}function C(e){var t,n;return e!==d&&(null===(t=T(e))||void 0===t||null===(n=t.jsonData)||void 0===n?void 0:n.implementation)===i.sK.prometheus}function k(e){return e===d}function T(e){return(0,l.x)().find((t=>t.name===e))}function I(e){return e===d?d:T(e)}function O(e){if(e===d)return d;const t=T(e);if(!t)throw new Error(`Datasource "${e}" not found`);return t.uid}function N(){var e;const t=(0,a.getDataSourceSrv)().getInstanceSettings("default");return null!==(e=null==t?void 0:t.meta.alerting)&&void 0!==e&&e?t:p()[0]}},77048:(e,t,n)=>{"use strict";n.d(t,{RT:()=>r,TZ:()=>l,rz:()=>o});var a=n(82897),s=n(10331),i=n(82139);function r(e){const t=e.filter((e=>!!e.trim())).map((e=>(0,i.tC)(e.trim())));return(0,a.uniqBy)(t,(e=>e.name))}const o=e=>{const t=Object.entries(e).filter((e=>{let[t]=e;return!(t.startsWith("__")&&t.endsWith("__"))})),n=new URLSearchParams;return t.forEach((e=>{let[t,a]=e;return n.append("matcher",`${t}=${a}`)})),n},l=(e,t)=>{const n=e=>(e.startsWith("^")||(e="^"+e),e.endsWith("$")||(e+="$"),new RegExp(e));return e.filter((e=>t.every((t=>((e,t)=>Object.entries(e.labels).some((e=>{let[a,i]=e;if(!t.name||!t.value)return!1;if(t.name!==a)return!1;switch(t.operator){case s._M.equal:return t.value===i;case s._M.notEqual:return t.value!==i;case s._M.regex:return n(t.value).test(i);case s._M.notRegex:return!n(t.value).test(i);default:return!1}})))(e,t))))).map((e=>({id:`${e.activeAt}-${e.value}`,data:{matchedInstance:e}})))}},39357:(e,t,n)=>{"use strict";n.d(t,{$f:()=>v,J8:()=>x,S0:()=>m,V2:()=>p,VN:()=>j,Vv:()=>w,Zl:()=>T,__:()=>S,eQ:()=>y,fm:()=>C,lC:()=>f,mH:()=>g,pF:()=>b});var a=n(82897),s=n(43215),i=n(90923),r=n(86647),o=n(40206),l=n(51542),d=n(85464),c=n(19462),u=n(77048),h=n(59940);function p(e,t,n){const a=(0,c.EG)(e),r=h.Yd(a,t),o=encodeURIComponent(h.$V(r)),l=encodeURIComponent(a);return s.urlUtil.renderUrl(`${i.config.appSubUrl}/alerting/${l}/${o}/view`,{returnTo:n})}function g(e,t){return s.urlUtil.renderUrl(`${i.config.appSubUrl}/explore`,{left:JSON.stringify(["now-1h","now",e,{datasource:e,expr:t},{ui:[!0,!0,!0,"none"]}])})}function m(e){return e.reduce(((e,t)=>{let{key:n,value:a}=t;return e[n]=a,e}),{})}const f=e=>{const t=void 0===e.queryString?void 0:String(e.queryString),n=void 0===e.alertState?void 0:String(e.alertState),a=void 0===e.dataSource?void 0:String(e.dataSource),s=void 0===e.ruleType?void 0:String(e.ruleType);return{queryString:t,alertState:n,dataSource:a,groupBy:void 0===e.groupBy?void 0:String(e.groupBy).split(","),ruleType:s}},v=e=>{var t,n;return{queryString:null!==(t=e.get("queryString"))&&void 0!==t?t:void 0,contactPoint:null!==(n=e.get("contactPoint"))&&void 0!==n?n:void 0}},b=e=>({queryString:void 0===e.queryString?void 0:String(e.queryString),silenceState:void 0===e.silenceState?void 0:String(e.silenceState)});function x(e){return Object.entries(e).map((e=>{let[t,n]=e;return{key:t,value:n}}))}function y(e,t,n){const a=new URLSearchParams(n);return t&&a.append(d.c4,t),`${e}?${a.toString()}`}function w(e,t){return j(e,Object.assign({alertname:t.name},t.labels))}function j(e,t){const n=new URLSearchParams;n.append("alertmanager",e);return(0,u.rz)(t).forEach(((e,t)=>n.append(t,e))),`${i.config.appSubUrl}/alerting/silence/new?${n.toString()}`}function S(e){return`${i.config.appSubUrl}/datasources/edit/${e.uid}`}function C(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const s=(new Date).getTime(),i=()=>e().catch((e=>{if(t(e)&&(new Date).getTime()-s<n)return new Promise((e=>setTimeout(e,a))).then(i);throw e}));return i()}const k={[l.bj.Alerting]:1,[l.x_.Firing]:1,[l.bj.Error]:1,[l.bj.Pending]:2,[l.x_.Pending]:2,[l.x_.Inactive]:2,[l.bj.NoData]:3,[l.bj.Normal]:4};function T(e,t){if(e===o.As.Importance)return(0,a.sortBy)(t,(e=>[k[(0,l.ED)(e.state)],(0,r.pB)(e).toLocaleLowerCase()]));if(e===o.As.TimeAsc)return(0,a.sortBy)(t,(e=>[new Date(e.activeAt)||new Date,(0,r.pB)(e).toLocaleLowerCase()]));if(e===o.As.TimeDesc)return(0,a.sortBy)(t,(e=>[new Date(e.activeAt)||new Date,(0,r.pB)(e).toLocaleLowerCase()])).reverse();const n=(0,a.sortBy)(t,(e=>(0,r.pB)(e).toLocaleLowerCase()));return e===o.As.AlphaDesc&&n.reverse(),n}},8455:(e,t,n)=>{"use strict";n.d(t,{$b:()=>u,Ez:()=>h,ed:()=>g,i6:()=>d,jK:()=>c,kk:()=>p,op:()=>v,oq:()=>o,yR:()=>f});var a=n(35140),s=n(43215),i=n(90923),r=n(98163);const o=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2?arguments[2]:void 0;if(e.pending.match(n))return{result:t.result,loading:!0,error:t.error,dispatched:!0,requestId:n.meta.requestId};if(e.fulfilled.match(n)){if(void 0===t.requestId||t.requestId===n.meta.requestId)return Object.assign({},t,{result:n.payload,loading:!1,error:void 0})}else if(e.rejected.match(n)&&t.requestId===n.meta.requestId)return Object.assign({},t,{loading:!1,error:n.error});return t}function d(e,t){return(0,a.oM)({name:e,initialState:o,reducers:{},extraReducers:e=>e.addDefaultCase(((e,n)=>l(t,e,n)))})}function c(e,t,n){return(0,a.oM)({name:e,initialState:{},reducers:{},extraReducers:e=>e.addDefaultCase(((e,s)=>{if((0,a.Gx)(t)(s)){const a=s,i=n(a.meta.arg);return Object.assign({},e,{[i]:l(t,e[i],a)})}return e}))})}function u(e){return e.catch((e=>{throw{message:p(e),code:e.statusCode}}))}function h(e,t){return e.then((e=>(t.successMessage&&r.h$.emit(s.AppEvents.alertSuccess,[t.successMessage]),e))).catch((e=>{var n;const a=p(e);throw r.h$.emit(s.AppEvents.alertError,[`${null!==(n=t.errorMessage)&&void 0!==n?n:"Error"}: ${a}`]),e}))}function p(e){if((0,i.isFetchError)(e)){var t,n;if(null!==(t=e.data)&&void 0!==t&&t.message){var a,s;let t=null===(a=e.data)||void 0===a?void 0:a.message;return"string"==typeof(null===(s=e.data)||void 0===s?void 0:s.error)&&(t+=`; ${e.data.error}`),t}if(Array.isArray(e.data)&&e.data.length&&null!==(n=e.data[0])&&void 0!==n&&n.message)return e.data.map((e=>null==e?void 0:e.message)).filter((e=>!!e)).join(" ");if(e.statusText)return e.statusText}return(null==e?void 0:e.message)||String(e)}function g(e){return Object.values(e).every(m)}function m(e){return e.dispatched&&!e.loading&&!e.error}function f(e){return Object.values(e).some(v)}function v(e){return!!e&&(e.dispatched&&e.loading)}},50475:(e,t,n)=>{"use strict";n.d(t,{DQ:()=>j,WL:()=>S,aR:()=>I,lN:()=>C,mI:()=>w,s0:()=>k,uZ:()=>b,yh:()=>x});var a=n(43215),s=n(90923),i=n(20467),r=n(65184),o=n(24036),l=n(22912),d=n(51542),c=n(45243),u=n(88414),h=n(82969),p=n(85464),g=n(19462),m=n(39357),f=n(86647),v=n(66322);const b=()=>{const{canCreateGrafanaRules:e,canCreateCloudRules:t}=(0,h.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:p.q6.summary,value:""},{key:p.q6.description,value:""},{key:p.q6.runbookURL,value:""}],dataSourceName:null,type:e?u.$.grafana:t?u.$.cloudAlerting:void 0,group:"",folder:null,queries:[],condition:"",noDataState:d.g0.NoData,execErrState:d.g0.Alerting,evaluateEvery:"1m",evaluateFor:"5m",namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function x(e){const{name:t,expression:n,forTime:a,forTimeUnit:s,type:i}=e;if(i===u.$.cloudAlerting)return{alert:t,for:`${a}${s}`,annotations:(0,m.S0)(e.annotations||[]),labels:(0,m.S0)(e.labels||[]),expr:n};if(i===u.$.cloudRecording)return{record:t,labels:(0,m.S0)(e.labels||[]),expr:n};throw new Error(`unexpected rule type: ${i}`)}function y(e){return[...(0,m.J8)(e||{}),{key:"",value:""}]}function w(e){const{name:t,condition:n,noDataState:a,execErrState:s,evaluateFor:i,queries:r}=e;if(n)return{grafana_alert:{title:t,condition:n,no_data_state:a,exec_err_state:s,data:r},for:i,annotations:(0,m.S0)(e.annotations||[]),labels:(0,m.S0)(e.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function j(e){const{ruleSourceName:t,namespace:n,group:a,rule:s}=e,i=b();if((0,g.HY)(t)){if((0,f.Pc)(s)){const e=s.grafana_alert;return Object.assign({},i,{name:e.title,type:u.$.grafana,group:a.name,evaluateFor:s.for||"0",evaluateEvery:a.interval||i.evaluateEvery,noDataState:e.no_data_state,execErrState:e.exec_err_state,queries:e.data,condition:e.condition,annotations:y(s.annotations),labels:y(s.labels),folder:{title:n,id:e.namespace_id}})}throw new Error("Unexpected type of rule for grafana rules source")}if((0,f.cG)(s)){const e=S(s);return Object.assign({},i,e,{type:u.$.cloudAlerting,dataSourceName:t,namespace:n,group:a.name})}if((0,f.yF)(s)){const e=C(s);return Object.assign({},i,e,{type:u.$.cloudRecording,dataSourceName:t,namespace:n,group:a.name})}throw new Error("Unexpected type of rule for cloud rules source")}function S(e){const t=b(),[n,a]=e.for?(0,v.bG)(e.for):[t.forTime,t.forTimeUnit];return{name:e.alert,expression:e.expr,forTime:n,forTimeUnit:a,annotations:y(e.annotations),labels:y(e.labels)}}function C(e){return{name:e.record,expression:e.expr,labels:y(e.labels)}}const k=()=>{const e=(0,g.P)();if(!e)return[T("A")];const t=(0,a.getDefaultRelativeTimeRange)();return[{refId:"A",datasourceUid:e.uid,queryType:"",relativeTimeRange:t,model:{refId:"A",hide:!1}},T("B")]},T=e=>{const t={refId:e,hide:!1,type:l.Us.classic,datasource:{uid:o.Yq,type:i.hr.type},conditions:[{type:"query",evaluator:{params:[3],type:c.$.IsAbove},operator:{type:"and"},query:{params:["A"]},reducer:{params:[],type:"last"}}],expression:"A"};return{refId:e,datasourceUid:o.Yq,queryType:"",model:t}},I=async(e,t)=>{var n,i,l;const{targets:d}=e;if(!e.id||!t.uid)return;const c=a.rangeUtil.timeRangeToRelative(a.rangeUtil.convertRawToRange(t.time)),h=await(async(e,t,n,i,r,l)=>{const d=[];for(const h of e){var c;const e=await(0,s.getDataSourceSrv)().get(null!==(c=h.datasource)&&void 0!==c&&c.uid?h.datasource:i),p={uid:e.uid,type:e.type},g=a.rangeUtil.relativeToTimeRange(t),{interval:m,intervalMs:f}=O(g,null!=l?l:e.interval,r),v=Object.assign({__interval:{text:m,value:m},__interval_ms:{text:f,value:f}},n),b=e.interpolateVariablesInQueries?await e.interpolateVariablesInQueries([h],v)[0]:h;if(p.uid===o.Yq){const e={refId:b.refId,queryType:"",relativeTimeRange:t,datasourceUid:o.Yq,model:b};d.push(e)}else{const e=(0,s.getDataSourceSrv)().getInstanceSettings(p);if(e&&e.meta.alerting){var u;const n={refId:b.refId,queryType:null!==(u=b.queryType)&&void 0!==u?u:"",relativeTimeRange:t,datasourceUid:e.uid,model:Object.assign({},b,{maxDataPoints:r,intervalMs:f})};d.push(n)}}}return d})(d,c,e.scopedVars||{},null!==(n=e.datasource)&&void 0!==n?n:void 0,null!==(i=e.maxDataPoints)&&void 0!==i?i:void 0,null!==(l=e.interval)&&void 0!==l?l:void 0);if(!h.length||!h.find((e=>e.datasourceUid!==o.Yq)))return;h.find((e=>e.datasourceUid===o.Yq))||h.push(T((0,r.Hs)(h.map((e=>e.model)))));const{folderId:g,folderTitle:m}=t.meta;return{type:u.$.grafana,folder:g&&m?{id:g,title:m}:void 0,queries:h,name:e.title,condition:h[h.length-1].refId,annotations:[{key:p.q6.dashboardUID,value:t.uid},{key:p.q6.panelID,value:String(e.id)}]}};function O(e,t,n){return n?a.rangeUtil.calculateInterval(e,n,t):t&&a.rangeUtil.intervalToMs(t)>1e3?{interval:t,intervalMs:a.rangeUtil.intervalToMs(t)}:{interval:"1s",intervalMs:1e3}}},59940:(e,t,n)=>{"use strict";n.d(t,{$V:()=>m,CK:()=>o,Dg:()=>l,OA:()=>g,Yd:()=>r,Zk:()=>i,s0:()=>y});var a=n(19462),s=n(86647);function i(e,t,n,a){return(0,s.Pc)(a)?{uid:a.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:e,namespace:t,groupName:n,rulerRuleHash:v(a)}}function r(e,t){const n=t.namespace.name,a=t.group.name;if(t.rulerRule)return i(e,n,a,t.rulerRule);if(t.promRule)return function(e,t,n,a){return{ruleSourceName:e,namespace:t,groupName:n,ruleHash:b(a)}}(e,n,a,t.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function o(e){return i(e.ruleSourceName,e.namespace,e.group.name,e.rule)}function l(e,t){return(0,s.Kl)(e)&&(0,s.Kl)(t)?e.uid===t.uid:(0,s.E4)(e)&&(0,s.E4)(t)?e.groupName===t.groupName&&e.namespace===t.namespace&&e.rulerRuleHash===t.rulerRuleHash&&e.ruleSourceName===t.ruleSourceName:!(!(0,s.qE)(e)||!(0,s.qE)(t))&&(e.groupName===t.groupName&&e.namespace===t.namespace&&e.ruleHash===t.ruleHash&&e.ruleSourceName===t.ruleSourceName)}const d="cri",c="pri";function u(e){return e.replace(/\$/g,"_DOLLAR_")}function h(e){return e.replace(/\_DOLLAR\_/g,"$")}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?decodeURIComponent(e):e,a=n.split("$");if(1===a.length)return{uid:e,ruleSourceName:"grafana"};if(5===a.length){const[e,t,n,s,i]=a.map(h);if(e===d)return{ruleSourceName:t,namespace:n,groupName:s,rulerRuleHash:Number(i)};if(e===c)return{ruleSourceName:t,namespace:n,groupName:s,ruleHash:Number(i)}}throw new Error(`Failed to parse rule location: ${e}`)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{return p(e,t)}catch(e){return}}function m(e){return(0,s.Kl)(e)?e.uid:(0,s.E4)(e)?[d,e.ruleSourceName,e.namespace,e.groupName,e.rulerRuleHash].map(String).map(u).join("$"):[c,e.ruleSourceName,e.namespace,e.groupName,e.ruleHash].map(String).map(u).join("$")}function f(e){let t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function v(e){if((0,s.yF)(e))return f(JSON.stringify([e.record,e.expr,x(e.labels)]));if((0,s.cG)(e))return f(JSON.stringify([e.alert,e.expr,x(e.annotations),x(e.labels)]));throw new Error("only recording and alerting ruler rules can be hashed")}function b(e){if((0,s.OP)(e))return f(JSON.stringify([e.type,e.query,x(e.labels)]));if((0,s.x_)(e))return f(JSON.stringify([e.type,e.query,x(e.annotations),x(e.labels)]));throw new Error("only recording and alerting rules can be hashed")}function x(e){return JSON.stringify(Object.entries(e||{}).sort(((e,t)=>e[0].localeCompare(t[0]))))}function y(e){return(0,s.Kl)(e)?a.GC:e.ruleSourceName}},86647:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>x,E4:()=>m,Jq:()=>j,Kl:()=>g,OP:()=>l,Pc:()=>u,SS:()=>v,ZL:()=>b,cG:()=>d,m$:()=>p,pB:()=>h,qE:()=>f,ub:()=>w,x_:()=>o,yF:()=>c});var a=n(82897),s=n(43215),i=n(51542),r=n(85464);function o(e){return"object"==typeof e&&e.type===i.pz.Alerting}function l(e){return e.type===i.pz.Recording}function d(e){return"object"==typeof e&&"alert"in e}function c(e){return"object"==typeof e&&"record"in e}function u(e){return"object"==typeof e&&"grafana_alert"in e}function h(e){return JSON.stringify(e.labels)}function p(e){var t,n;return e.error&&(null===(t=e.error)||void 0===t||null===(n=t.message)||void 0===n?void 0:n.includes(r.jZ))}function g(e){return"uid"in e}function m(e){return"rulerRuleHash"in e}function f(e){return"ruleHash"in e}function v(e){return e===i.x_.Inactive?"Normal":(0,a.capitalize)(e)}const b=e=>e.reduce(((e,t)=>{let{dataSourceName:n,name:a,groups:s}=t;return s.forEach((t=>{let{name:s,rules:i}=t;i.forEach((t=>{o(t)&&e.push({dataSourceName:n,namespaceName:a,groupName:s,rule:t})}))})),e}),[]);function x(e){let t;return t=Object.values(s.AlertState).includes(e)?e:(0,i.ED)(e),y[t]}const y={[i.x_.Inactive]:"good",[i.x_.Firing]:"bad",[i.x_.Pending]:"warning",[i.bj.Alerting]:"bad",[i.bj.Error]:"bad",[i.bj.NoData]:"info",[i.bj.Normal]:"good",[i.bj.Pending]:"warning",[s.AlertState.NoData]:"info",[s.AlertState.Paused]:"warning",[s.AlertState.Alerting]:"bad",[s.AlertState.OK]:"good",[s.AlertState.Pending]:"warning",[s.AlertState.Unknown]:"info"};function w(e){return e.alerts?e.alerts.reduce(((e,t)=>{const n=(0,i.ED)(t.state)!==i.bj.Normal;if(t.activeAt&&n){const n=new Date(t.activeAt);if(null===e||e.getTime()>n.getTime())return n}return e}),null):null}function j(e){return Array.isArray(e.source_tenants)}},66322:(e,t,n)=>{"use strict";n.d(t,{lR:()=>l,pv:()=>d,bG:()=>i,O8:()=>o,qr:()=>r});var a=n(43215);n(52106);let s;function i(e){const t=e.match(/(\d+)(\w+)/);if(t)return[Number(t[1]),t[2]];throw new Error(`Invalid interval description: ${e}`)}!function(e){e.seconds="s",e.minutes="m",e.hours="h",e.days="d",e.weeks="w"}(s||(s={}));const r=Object.entries(s).map((e=>{let[t,n]=e;return{label:t[0].toUpperCase()+t.slice(1),value:n}})),o={value:new RegExp(`^\\d+(${Object.values(s).join("|")})$`),message:`Must be of format "(number)(unit)" , for example "1m". Available units: ${Object.values(s).join(", ")}`},l={value:new RegExp(`^\\d+(${Object.values(s).join("|")})|0$`),message:`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(s).join(", ")}`};function d(e){return(0,a.durationToMilliseconds)((0,a.parseDuration)(e))}},54361:(e,t,n)=>{"use strict";n.d(t,{Dl:()=>r,_E:()=>i,lK:()=>o,xD:()=>s});var a=n(90923);function s(e){return(0,a.getBackendSrv)().post("/api/annotations",e)}function i(e){return(0,a.getBackendSrv)().put(`/api/annotations/${e.id}`,e)}function r(e){return(0,a.getBackendSrv)().delete(`/api/annotations/${e.id}`)}async function o(){return(await(0,a.getBackendSrv)().get("/api/annotations/tags")).result.tags.map((e=>{let{tag:t,count:n}=e;return{term:t,count:n}}))}},345:(e,t,n)=>{"use strict";n.d(t,{r:()=>c});var a=n(71808),s=n(71114),i=n(35778),r=n(43215),o=n(392),l=n(17028);let d=100;function c(e,t,n){const c=Object.assign({},l.yA,t.annotations),u=c.prepareAnnotation(n);if(!u)return(0,a.of)({});const h=c.prepareQuery(u);if(!h)return(0,a.of)({});const p=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=r.rangeUtil.calculateInterval(e.range,p,t.interval),m={__interval:{text:g.interval,value:g.interval},__interval_ms:{text:g.intervalMs.toString(),value:g.intervalMs},__annotation:{text:u.name,value:u}},f=Object.assign({startTime:Date.now(),requestId:"AQ"+d++,range:e.range,maxDataPoints:p,scopedVars:m},g,{app:r.CoreApp.Dashboard,timezone:e.dashboard.timezone,targets:[Object.assign({},h,{refId:"Anno"})]});return(0,o.v7)(t,f).pipe((0,s.z)((e=>e.series?c.processEvents(u,e.series).pipe((0,i.U)((t=>({panelData:e,events:t})))):(0,a.of)({panelData:e,events:[]}))))}},17028:(e,t,n)=>{"use strict";n.d(t,{$w:()=>p,r0:()=>c,yA:()=>d,yr:()=>g});var a=n(82897),s=n(71808),i=n(71114),r=n(35778),o=n(43215);const l=["query"];const d={prepareAnnotation:e=>{if((0,a.isString)(null==e?void 0:e.query)){const{query:t}=e,n=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,l);return Object.assign({},n,{target:{refId:"annotation_query",query:t},mappings:{}})}return e},prepareQuery:e=>e.target,processEvents:(e,t)=>function(e,t){return(0,s.of)(e).pipe((e=>e.pipe((0,i.z)((e=>null!=e&&e.length?1===e.length?(0,s.of)(e[0]):(0,s.of)(e).pipe(o.standardTransformers.mergeTransformer.operator({}),(0,r.U)((e=>e[0]))):(0,s.of)(void 0))))),(0,r.U)((e=>{if(null==e||!e.length)return[];let n=!1,a=!1;const s={};for(const t of e.fields){s[(0,o.getFieldDisplayName)(t,e).toLowerCase()]=t}t||(t={});const i=[];for(const r of u){const l=t[r.key]||{};if(l.source===o.AnnotationEventFieldSource.Skip)continue;const d={key:r.key,split:r.split};if(l.source===o.AnnotationEventFieldSource.Text)d.text=l.value;else{const t=(l.value||r.key).toLowerCase();d.field=s[t],!d.field&&r.field&&(d.field=r.field(e))}(d.field||d.text)&&(i.push(d),"time"===d.key?n=!0:"text"===d.key&&(a=!0))}if(!n||!a)return[];const r=[];for(let t=0;t<e.length;t++){const e={type:"default",color:"red"};for(const n of i){let a;if(n.text)a=n.text;else if(n.field&&(a=n.field.values.get(t),void 0!==a&&n.regex)){const e=n.regex.exec(a);e&&(a=e[1]?e[1]:e[0])}null!=a&&(n.split&&"string"==typeof a&&(a=a.split(",")),e[n.key]=a)}r.push(e)}return r})))}(t,e.mappings)};const c=[{key:"time",field:e=>e.fields.find((e=>e.type===o.FieldType.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:e=>e.fields.find((e=>e.type===o.FieldType.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],u=[...c,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];const h=["prometheus","loki","elasticsearch","grafana-opensearch-datasource","grafana-splunk-datasource"];function p(e){const{type:t}=e;return!("datasource"===t||h.includes(t))}function g(e){const{type:t}=e;return h.includes(t)}},88467:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>d,cB:()=>l,dF:()=>r,iK:()=>s,j4:()=>i,ql:()=>o});const a=(0,n(35140).oM)({name:"apiKeys",initialState:{hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",apiKeysMigrated:!1},reducers:{apiKeysLoaded:(e,t)=>{const{keys:n,keysIncludingExpired:a}=t.payload,s=0===t.payload.keys.length&&t.payload.keysIncludingExpired.length>0||e.includeExpired;return Object.assign({},e,{hasFetched:!0,keys:n,keysIncludingExpired:a,includeExpired:s})},apiKeysMigrationStatusLoaded:(e,t)=>Object.assign({},e,{apiKeysMigrated:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload}),includeExpiredToggled:e=>Object.assign({},e,{includeExpired:!e.includeExpired}),isFetching:e=>Object.assign({},e,{hasFetched:!1})}}),{apiKeysLoaded:s,includeExpiredToggled:i,isFetching:r,setSearchQuery:o,apiKeysMigrationStatusLoaded:l}=a.actions,d={apiKeys:a.reducer}},17770:(e,t,n)=>{"use strict";n.d(t,{t:()=>m});var a=n(68404),s=n(43215),i=n(90923),r=n(36636),o=n(3490),l=n(54391),d=n(45916);const c=e=>{let{message:t}=e;const n=(0,o.useStyles2)(u);let a="#34BA18",i="System",r="/public/img/grafana_icon.svg";t.userId>0&&(a="#19a2e7",i=t.user.login,r=t.user.avatarUrl);const c=new Date(1e3*t.created).toLocaleTimeString(),h=(0,s.renderMarkdown)(t.content,{breaks:!0});return(0,d.jsxs)("div",{className:n.comment,children:[(0,d.jsx)("div",{className:n.avatarContainer,children:(0,d.jsx)("img",{src:r,alt:"User avatar",className:n.avatar})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{style:{color:a},children:i}),"Â ",(0,d.jsx)("span",{style:{color:"#898989"},children:c})]}),(0,d.jsx)("div",{children:(0,d.jsx)(l.Z,{html:h,className:n.content})})]})]})},u=e=>({comment:r.css`
    margin-bottom: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
    word-break: break-word;
    display: flex;
    flex-direction: row;
    align-items: top;

    :hover {
      background-color: #1e1f24;
    }

    blockquote {
      padding: 0 0 0 10px;
      margin: 0 0 10px;
    }
  `,avatarContainer:r.css`
    align-self: left;
    margin-top: 6px;
    margin-right: 10px;
  `,avatar:r.css`
    width: 30px;
    height: 30px;
  `,content:r.css`
    display: block;
    overflow: hidden;

    p {
      margin: 0;
      padding: 0;
    }

    blockquote p {
      font-size: 14px;
      padding-top: 4px;
    }

    a {
      color: #43c57e;
    }

    a:hover {
      text-decoration: underline;
    }
  `}),h=e=>{let{comments:t,packetCounter:n,addComment:s}=e;const i=(0,o.useStyles2)(p),[r,l]=(0,a.useState)(""),[u,h]=(0,a.useState)(0),g=(0,a.useRef)(null);(0,a.useLayoutEffect)((()=>{g.current?h(g.current.offsetHeight):h(0)}),[n]);return(0,d.jsx)(o.CustomScrollbar,{scrollTop:u,children:(0,d.jsxs)("div",{ref:g,className:i.commentViewContainer,children:[t.map((e=>(0,d.jsx)(c,{message:e},e.id))),(0,d.jsx)(o.TextArea,{placeholder:"Write a comment",value:r,onChange:e=>{const t=e.target;l(t.value)},onKeyPress:async e=>{if("Enter"===(null==e?void 0:e.key)&&(null==e||!e.shiftKey)&&(e.preventDefault(),r.length>0)){await s(r)&&l("")}},autoFocus:!0})]})})},p=e=>({commentViewContainer:r.css`
    margin: 5px;
  `});function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends a.PureComponent{constructor(e){super(e),g(this,"subscription",void 0),g(this,"packetCounter",0),g(this,"getLiveChannel",(()=>{const e=(0,i.getGrafanaLiveSrv)();if(!e)return void console.error('Grafana live not running, enable "live" feature toggle');const t=this.getLiveAddress();return t?e.getStream(t):void 0})),g(this,"getLiveAddress",(()=>({scope:s.LiveChannelScope.Grafana,namespace:"comment",path:`${this.props.objectType}/${this.props.objectId}`}))),g(this,"updateSubscription",(()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0);const e=this.getLiveChannel();e&&(this.subscription=e.subscribe({next:e=>{if((0,s.isLiveChannelMessageEvent)(e)){const{commentCreated:t}=e.message;t&&(this.setState((e=>({messages:[...e.messages,t]}))),this.packetCounter++)}}}))})),g(this,"addComment",(async e=>{const t=await(0,i.getBackendSrv)().post("/api/comments/create",{objectType:this.props.objectType,objectId:this.props.objectId,content:e});return console.log(t),!0})),this.state={messages:[],value:""}}async componentDidMount(){const e=await(0,i.getBackendSrv)().post("/api/comments/get",{objectType:this.props.objectType,objectId:this.props.objectId});this.packetCounter++,this.setState({messages:e.comments}),this.updateSubscription()}render(){return(0,d.jsx)(h,{comments:this.state.messages,packetCounter:this.packetCounter,addComment:this.addComment})}}},38434:(e,t,n)=>{"use strict";n.d(t,{E:()=>p});var a=n(82897),s=n(90923),i=n(78837),r=n(27777),o=n(89834),l=n(85239),d=n(39665);const c=["libraryPanel"],u=["gridPos","id"];function h(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}class p{async makeExportable(e){e.cleanUpRepeats();const t=e.getSaveModelClone();t.id=null,e.processRepeats();const n=[],p={},g={},m={},f=new Map;for(const e of t.getVariables())m[e.name]=e;const v=(e,t)=>{var n;if(void 0===e.datasource)return void(e.datasource=t);let a=e.datasource,i=null;const r=null===(n=a)||void 0===n?void 0:n.uid;return r&&0===r.indexOf("$")&&(i=m[r.substring(1)],i&&i.current&&(a=i.current.value)),(0,s.getDataSourceSrv)().get(a).then((t=>{var n,a,s,r;if(null!==(n=t.meta)&&void 0!==n&&n.builtIn)return;if(p["datasource"+(null===(a=t.meta)||void 0===a?void 0:a.id)]={type:"datasource",id:t.meta.id,name:t.meta.name,version:t.meta.info.version||"1.0.0"},i)return;const o="DS_"+t.name.replace(" ","_").toUpperCase();g[o]={name:o,label:t.name,description:"",type:"datasource",pluginId:null===(s=t.meta)||void 0===s?void 0:s.id,pluginName:null===(r=t.meta)||void 0===r?void 0:r.name},e.datasource={type:t.meta.id,uid:"${"+o+"}"}}))},b=async e=>{if("row"!==e.type){if(await v(e),e.targets)for(const t of e.targets)await v(t,e.datasource);const t=i.ZP.panels[e.type];t&&(p["panel"+t.id]={type:"panel",id:t.id,name:t.name,version:t.info.version})}},x=e=>{if((0,r.V)(e)){const{libraryPanel:t}=e,n=h(e,c),{name:a,uid:s}=t,i=h(n,u);f.has(s)||f.set(s,{name:a,uid:s,kind:o.V.Panel,model:i})}};try{for(const e of t.panels)if(await b(e),void 0!==e.collapsed&&!0===e.collapsed&&e.panels)for(const t of e.panels)await b(t);for(const e of t.getVariables())(0,l.Xh)(e)&&(await v(e),e.options=[],e.current={},e.refresh=e.refresh!==d.Bd.never?e.refresh:d.Bd.onDashboardLoad);for(const e of t.annotations.list)await v(e);p.grafana={type:"grafana",id:"grafana",name:"Grafana",version:i.ZP.buildInfo.version},(0,a.each)(g,(e=>{n.push(e)}));for(const e of t.panels)if(x(e),void 0!==e.collapsed&&!0===e.collapsed&&e.panels)for(const t of e.panels)x(t);for(const e of t.getVariables())if((0,l.VC)(e)){const t="VAR_"+e.name.replace(" ","_").toUpperCase();n.push({name:t,type:"constant",label:e.label||e.name,value:e.query,description:""}),e.query="${"+t+"}",e.current={value:e.query,text:e.query,selected:!1},e.options=[e.current]}const e=[...f.entries()].reduce(((e,t)=>{let[n,a]=t;return e[n]=a,e}),{}),s=(0,a.defaults)({__inputs:n,__elements:e,__requires:(0,a.sortBy)(p,["id"])},t);for(let e=0;e<s.panels.length;e++){const t=s.panels[e];(y=t).libraryPanel&&"string"==typeof y.libraryPanel.name&&"string"==typeof y.libraryPanel.uid&&(s.panels[e]={gridPos:t.gridPos,id:t.id,libraryPanel:{uid:t.libraryPanel.uid,name:t.libraryPanel.name}})}return s}catch(e){return console.error("Export failed:",e),{error:e}}var y}}},16461:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);const r=e=>{let{icon:t,iconType:n,iconSize:a,tooltip:r,onClick:l,children:d}=e;const c=(0,s.useTheme)(),u=o(c);return(0,i.jsxs)("div",{className:u.noBorderContainer,children:[t&&(0,i.jsx)(s.IconButton,{name:t,size:a,iconType:n,tooltip:r,tooltipPlacement:"bottom",onClick:l}),d]})},o=(0,s.stylesFactory)((e=>({noBorderContainer:a.css`
    padding: 0 ${e.spacing.xs};
    display: flex;
  `})))},50645:(e,t,n)=>{"use strict";n.d(t,{C:()=>g});var a=n(19309),s=n(68404),i=n(43215),r=n(90923),o=n(3490),l=n(43961),d=n(98163),c=n(75478),u=n(21169),h=n(45916);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.Component{constructor(){super(...arguments),p(this,"sub",void 0),p(this,"onChangeRefreshInterval",(e=>{(0,c.$t)().setAutoRefresh(e),this.forceUpdate()})),p(this,"onRefresh",(()=>((0,c.$t)().refreshTimeModel(),Promise.resolve()))),p(this,"onMoveBack",(()=>{d.h$.publish(new u.Qt({direction:u.Im.Left}))})),p(this,"onMoveForward",(()=>{d.h$.publish(new u.Qt({direction:u.Im.Right}))})),p(this,"onChangeTimePicker",(e=>{const{dashboard:t}=this.props,n=t.timepicker,a=n.nowDelay&&"now"===e.raw.to,s=i.dateMath.isMathString(e.raw.from)?e.raw.from:e.from,r=i.dateMath.isMathString(e.raw.to)?e.raw.to:e.to,o={from:s,to:a?"now-"+n.nowDelay:r};(0,c.$t)().setTime(o)})),p(this,"onChangeTimeZone",(e=>{this.props.dashboard.timezone=e,this.props.onChangeTimeZone(e),this.onRefresh()})),p(this,"onChangeFiscalYearStartMonth",(e=>{this.props.dashboard.fiscalYearStartMonth=e,this.onRefresh()})),p(this,"onZoom",(()=>{d.h$.publish(new u.p8({scale:2}))}))}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(r.TimeRangeUpdatedEvent,(()=>this.forceUpdate()))}componentWillUnmount(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}render(){var e;const{dashboard:t}=this.props,{refresh_intervals:n}=t.timepicker,s=(0,c.$t)().getValidIntervals(n||o.defaultIntervals),i=(0,c.$t)().timeRange(),r=t.getTimezone(),d=t.fiscalYearStartMonth,u=null===(e=t.panelInEdit)||void 0===e?void 0:e.isEditing;return(0,h.jsxs)(o.ToolbarButtonRow,{children:[(0,h.jsx)(l.a,{value:i,onChange:this.onChangeTimePicker,timeZone:r,fiscalYearStartMonth:d,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth}),(0,h.jsx)(o.RefreshPicker,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:t.refresh,intervals:s,tooltip:a.ag._({id:"dashboard.toolbar.refresh",message:"Refresh dashboard"}),noIntervalPicker:u,offDescriptionAriaLabelMsg:a.ag._({id:"dashboard.refresh-picker.off-description",message:"Auto refresh turned off. Choose refresh time interval"}),onDescriptionAriaLabelMsg:e=>a.ag._({id:"dashboard.refresh-picker.on-description",message:"Choose refresh time interval with current interval {durationAriaLabel} selected",values:{durationAriaLabel:e}}),offOptionLabelMsg:a.ag._({id:"dashboard.refresh-picker.off-label",message:"Off"}),offOptionAriaLabelMsg:a.ag._({id:"dashboard.refresh-picker.off-arialabel",message:"Turn off auto refresh"})})]})}}},33689:(e,t,n)=>{"use strict";n.d(t,{t:()=>E});var a=n(25235),s=n(19309),i=n(68404),r=n(18745),o=n(42326),l=n(43215),d=n(16695),c=n(90923),u=n(3490),h=n(47496),p=n(35845),g=n(78837),m=n(53144),f=n(36636),v=n(17770),b=n(45916);const x=e=>{let{dashboard:t,onDismiss:n}=e;const a=(0,u.useStyles2)(y);return(0,b.jsx)(u.Modal,{isOpen:!0,title:"Dashboard comments",icon:"save",onDismiss:n,className:a.modal,children:(0,b.jsx)(v.t,{objectType:"dashboard",objectId:t.uid})})},y=e=>({modal:f.css`
    width: 500px;
    height: 60vh;
  `});var w,j,S=n(72968),C=n(30969),k=n(9537),T=n(10603),I=n(47570),O=n(56501),N=n(22305),F=n(16461),D=n(50645);const P={setStarred:O.OQ,updateTimeZoneForSession:T.YT},A=(0,r.connect)(null,P),M=d.wl.pages.Dashboard.DashNav,R=[],$=[];const L=i.memo((e=>{var t;const n=(0,u.useForceUpdate)(),r=()=>{const t=(0,N.h4)(),{dashboard:a,setStarred:s}=e;t.starDashboard(a.id,a.meta.isStarred).then((e=>{var t;s({id:a.uid,title:a.title,url:null!==(t=a.meta.url)&&void 0!==t?t:"",isStarred:e}),a.meta.isStarred=e,n()}))},d=()=>{(0,m.qk)()},f=()=>{c.locationService.partial({editview:"settings"})},v=()=>{k.r0.prev()},y=()=>{k.r0.next()},T=()=>{k.r0.stop(),n()},O=(t,n)=>{t.map(((t,a)=>{const s=t.component,r=(0,i.createElement)(s,Object.assign({},e,{key:`button-custom-${a}`}));"number"==typeof t.index?n.splice(t.index,0,r):n.push(r)}))},P=()=>k.r0.isPlaying,A=()=>{const{dashboard:t,kioskMode:n}=e,{canStar:a,canShare:i,isStarred:o}=t.meta,l=[];if(n!==I.UX.Off||P())return[];if(a){let e=o?s.ag._({id:"dashboard.toolbar.unmark-favorite",message:"Unmark as favorite"}):s.ag._({id:"dashboard.toolbar.mark-favorite",message:"Mark as favorite"});l.push((0,b.jsx)(F.u,{tooltip:e,icon:o?"favorite":"star",iconType:o?"mono":"default",iconSize:"lg",onClick:r},"button-star"))}return i&&l.push((0,b.jsx)(u.ModalsController,{children:e=>{let{showModal:n,hideModal:a}=e;return(0,b.jsx)(F.u,{tooltip:s.ag._({id:"dashboard.toolbar.share",message:"Share dashboard or panel"}),icon:"share-alt",iconSize:"lg",onClick:()=>{n(C.V8,{dashboard:t,onDismiss:a})}})}},"button-share")),t.meta.publicDashboardEnabled&&l.push((0,b.jsx)(u.Tag,{name:"Public",colorIndex:5,"data-testid":M.publicDashboardTag})),t.uid&&g.ZP.featureToggles.dashboardComments&&l.push((0,b.jsx)(u.ModalsController,{children:e=>{let{showModal:n,hideModal:a}=e;return(0,b.jsx)(F.u,{tooltip:s.ag._({id:"dashboard.toolbar.comments-show",message:"Show dashboard comments"}),icon:"comment-alt-message",iconSize:"lg",onClick:()=>{n(x,{dashboard:t,onDismiss:a})}})}},"button-dashboard-comments")),O(R,l),l},L=()=>{const{dashboard:t,updateTimeZoneForSession:n,hideTimePicker:a}=e;return a?null:(0,b.jsx)(D.C,{dashboard:t,onChangeTimeZone:n},"time-controls")},E=()=>{const{dashboard:n,onAddPanel:i,isFullscreen:r,kioskMode:o}=e,{canSave:l,canEdit:c,showSettings:h}=n.meta,{snapshot:p}=n,g=p&&p.originalUrl,m=[],x=(0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.tv-button",message:"Cycle view mode"}),icon:"monitor",onClick:d},"tv-button");return P()?[(0,b.jsxs)(u.ButtonGroup,{children:[(0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.playlist-previous",message:"Go to previous dashboard"}),icon:"backward",onClick:v,narrow:!0}),t||(t=(0,b.jsx)(u.ToolbarButton,{onClick:T,children:w||(w=(0,b.jsx)(a.cC,{id:"dashboard.toolbar.playlist-stop"}))})),(0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.playlist-next",message:"Go to next dashboard"}),icon:"forward",onClick:y,narrow:!0})]},"playlist-buttons"),L()]:o===I.UX.TV?[L(),x]:(c&&!r&&m.push((0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.add-panel",message:"Add panel"}),icon:"panel-add",onClick:i},"button-panel-add")),l&&!r&&m.push((0,b.jsx)(u.ModalsController,{children:e=>{let{showModal:t,hideModal:a}=e;return(0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.save",message:"Save dashboard"}),icon:"save",onClick:()=>{t(S.d,{dashboard:n,onDismiss:a})}})}},"button-save")),g&&m.push((0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.open-original",message:"Open original dashboard"}),onClick:()=>V(g),icon:"link"},"button-snapshot")),h&&m.push((0,b.jsx)(u.ToolbarButton,{tooltip:s.ag._({id:"dashboard.toolbar.settings",message:"Dashboard settings"}),icon:"cog",onClick:f},"button-settings")),O($,m),m.push(L()),m.push(x),m)},V=e=>{window.location.href=l.textUtil.sanitizeUrl(e)},{isFullscreen:B,title:z,folderTitle:_}=e,U=(0,o.TH)(),H=l.locationUtil.getUrlForPartial(U,{search:"open"}),W=l.locationUtil.getUrlForPartial(U,{search:"open",folder:"current"}),q=B?()=>{c.locationService.partial({viewPanel:null})}:void 0;return g.ZP.featureToggles.topnav?(0,b.jsx)(h.A,{pageNav:{text:z},actions:(0,b.jsxs)(b.Fragment,{children:[A(),j||(j=(0,b.jsx)(p.M,{leftActionsSeparator:!0})),E()]})}):(0,b.jsx)(u.PageToolbar,{pageIcon:B?void 0:"apps",title:z,parent:_,titleHref:H,parentHref:W,onGoBack:q,leftItems:A(),children:E()})}));L.displayName="DashNav";const E=A(L)},24581:(e,t,n)=>{"use strict";n.d(t,{P:()=>g});var a=n(82897),s=n(68404),i=n(43215),r=n(16695),o=n(3490),l=n(75478),d=n(45916);const c=e=>{let{refreshIntervals:t,onRefreshIntervalChange:n,getIntervalsFunc:a=h,validateIntervalsFunc:i=u}=e;const[r,l]=(0,s.useState)(a(null!=t?t:o.defaultIntervals)),[c,p]=(0,s.useState)(null);(0,s.useEffect)((()=>{const e=a(null!=t?t:o.defaultIntervals);l(e)}),[a,t]);const g=(0,s.useMemo)((()=>Array.isArray(r)?r.join(","):""),[r]),m=(0,s.useCallback)((e=>{const t=e.currentTarget.value?e.currentTarget.value.split(","):[];l(t)}),[l]),f=(0,s.useCallback)((e=>{const t=i(r);null===t&&n(a(r)),p(t)}),[a,r,n,i]);return(0,d.jsx)(o.Field,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:c,invalid:!!c,children:(0,d.jsx)(o.Input,{id:"auto-refresh-input",invalid:!!c,value:g,onChange:m,onBlur:f})})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getTimeSrv:l.$t};try{return h(e,t),null}catch(e){return e instanceof Error?e.message:"Invalid intervals"}},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getTimeSrv:l.$t};const n=e.filter((e=>""!==e.trim())).map((e=>e.replace(/\s+/g,"")));return[...new Set(t.getTimeSrv().getValidIntervals(n))]};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.PureComponent{constructor(){super(...arguments),p(this,"state",{isNowDelayValid:!0}),p(this,"onNowDelayChange",(e=>{const t=e.currentTarget.value;return(0,a.isEmpty)(t)||i.rangeUtil.isValidTimeSpan(t)?(this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(t)):void this.setState({isNowDelayValid:!1})})),p(this,"onHideTimePickerChange",(()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)})),p(this,"onLiveNowChange",(()=>{this.props.onLiveNowChange(!this.props.liveNow)})),p(this,"onTimeZoneChange",(e=>{"string"==typeof e&&this.props.onTimeZoneChange(e)})),p(this,"onWeekStartChange",(e=>{this.props.onWeekStartChange(e)}))}render(){return(0,d.jsxs)(o.CollapsableSection,{label:"Time options",isOpen:!0,children:[(0,d.jsx)(o.Field,{label:"Time zone","data-testid":r.wl.components.TimeZonePicker.containerV2,children:(0,d.jsx)(o.TimeZonePicker,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})}),(0,d.jsx)(o.Field,{label:"Week start","data-testid":r.wl.components.WeekStartPicker.containerV2,children:(0,d.jsx)(o.WeekStartPicker,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})}),(0,d.jsx)(c,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),(0,d.jsx)(o.Field,{label:"Now delay",description:"Exclude recent data that may be incomplete.",children:(0,d.jsx)(o.Input,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})}),(0,d.jsx)(o.Field,{label:"Hide time picker",children:(0,d.jsx)(o.Switch,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})}),(0,d.jsx)(o.Field,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'",children:(0,d.jsx)(o.Switch,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})})]})}}},29483:(e,t,n)=>{"use strict";n.d(t,{D:()=>kn});var a=n(36636),s=n(50984),i=n(40059),r=n(63805),o=n(68404),l=n(43397),d=n(43215),c=n(90923),u=n(3490),h=n(78837),p=n(61959),g=n(47570),m=n(18745),f=n(31259),v=n(16695),b=n(56340),x=n(45916);const y=e=>{let{nodes:t,edges:a,direction:s,width:i,height:r,onDoubleClick:l}=e;const d=(0,o.useRef)(null),c=(0,o.useRef)(null),u=(0,o.useCallback)((e=>{l&&l(e.nodes[0])}),[l]);return(0,o.useEffect)((()=>((async()=>{var e;const i=await n.e(8271).then(n.t.bind(n,47137,23)),r={nodes:w(i,t),edges:j(i,a)},o={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:null!=s?s:"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};d.current=new i.Network(c.current,r,o),null===(e=d.current)||void 0===e||e.on("doubleClick",u)})(),()=>{d.current&&d.current.off("doubleClick")})),[s,a,t,u]),(0,x.jsx)("div",{children:(0,x.jsx)("div",{ref:c,style:{width:null!=i?i:"100%",height:null!=r?r:"60vh"}})})};function w(e,t){const n=t.map((e=>Object.assign({},e,{shape:"box"})));return new e.DataSet(n)}function j(e,t){const n=t.map((e=>Object.assign({},e,{arrows:"to",dashes:!0})));return new e.DataSet(n)}function S(e){let{edges:t,nodes:n,show:a,title:s,children:i}=e;const[r,l]=(0,o.useState)(a),d=(0,o.useCallback)((()=>l(!0)),[l]),c=(0,o.useCallback)((()=>l(!1)),[l]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Modal,{isOpen:r,title:s,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:c,onDismiss:c,children:(0,x.jsx)(y,{nodes:n,edges:t})}),i({showModal:d})]})}var C=n(79067);const k=e=>{let{variables:t}=e;const n=(0,o.useMemo)((()=>(0,C.GQ)(t)),[t]),a=(0,o.useMemo)((()=>(0,C.MJ)(t)),[t]);return a.length?(0,x.jsx)(S,{show:!1,title:"Dependencies",nodes:(0,C.Of)(n,a),edges:a,children:e=>{let{showModal:t}=e;return(0,x.jsx)(u.Button,{onClick:()=>{(0,c.reportInteraction)("Show variable dependencies"),t()},icon:"channel-add",variant:"secondary",children:"Show dependencies"})}}):null},T=e=>(0,x.jsx)(m.Provider,{store:b.h,children:(0,x.jsx)(k,Object.assign({},e))});var I=n(17614);const O=e=>{let{id:t,usages:n}=e;const a=(0,o.useMemo)((()=>n.find((e=>e.variable.id===t))),[t,n]);if(!a)return null;const s=a.nodes.map((e=>e.label.includes(`$${t}`)?Object.assign({},e,{color:"#FB7E81"}):e));return(0,x.jsx)(S,{show:!1,title:`Showing usages for: $${t}`,nodes:s,edges:a.edges,children:e=>{let{showModal:t}=e;return(0,x.jsx)(u.IconButton,{onClick:()=>t(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"})}})};var N,F,D,P,A;function M(e){let{variables:t,dashboard:n}=e;const[a,s]=(0,o.useState)(!1),[i,r]=(0,o.useState)(0),[l,d]=(0,o.useState)([]),h=(0,u.useStyles)(E);(0,o.useEffect)((()=>r((e=>e+1))),[t,n]);const{loading:p}=(0,I.Z)((async()=>{if(a&&i>0){const e=Date.now(),a=await(0,C.Yg)(t,n),s=Date.now()-e;return s>=1e3&&(0,c.reportInteraction)("Slow unknown variables expansion",{elapsed:s}),r(0),d(a),a}return[]}),[t,n,a,i]);return(0,x.jsx)("div",{className:h.container,children:(0,x.jsxs)(u.CollapsableSection,{label:N||(N=(0,x.jsx)(R,{})),isOpen:a,onToggle:e=>{e&&(0,c.reportInteraction)("Unknown variables section expanded"),s(e)},children:[p&&(F||(F=(0,x.jsx)(u.VerticalGroup,{justify:"center",children:(0,x.jsxs)(u.HorizontalGroup,{justify:"center",children:[(0,x.jsx)("span",{children:"Loading..."}),(0,x.jsx)(u.Spinner,{size:16})]})}))),!p&&l&&(0,x.jsxs)(x.Fragment,{children:[0===l.length&&(D||(D=(0,x.jsx)($,{}))),l.length>0&&(0,x.jsx)(L,{usages:l})]})]})})}function R(){const e=(0,u.useStyles)(E);return(0,x.jsxs)("h5",{children:["Renamed or missing variables",(0,x.jsx)(u.Tooltip,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard.",children:(0,x.jsx)(u.Icon,{name:"info-circle",className:e.infoIcon})})]})}function $(){return P||(P=(0,x.jsx)("span",{children:"No renamed or missing variables found."}))}function L(e){let{usages:t}=e;const n=(0,u.useStyles)(E);return(0,x.jsxs)("table",{className:"filter-table filter-table--hover",children:[A||(A=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Variable"}),(0,x.jsx)("th",{colSpan:5})]})})),(0,x.jsx)("tbody",{children:t.map((e=>{const{variable:a}=e,{id:s,name:i}=a;return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:n.firstColumn,children:(0,x.jsx)("span",{children:i})}),(0,x.jsx)("td",{className:n.defaultColumn}),(0,x.jsx)("td",{className:n.defaultColumn}),(0,x.jsx)("td",{className:n.defaultColumn}),(0,x.jsx)("td",{className:n.lastColumn,children:(0,x.jsx)(O,{id:a.id,usages:t})})]},s)}))})]})}const E=e=>({container:a.css`
    margin-top: ${e.spacing.xl};
    padding-top: ${e.spacing.xl};
  `,infoIcon:a.css`
    margin-left: ${e.spacing.sm};
  `,defaultColumn:a.css`
    width: 1%;
  `,firstColumn:a.css`
    width: 1%;
    vertical-align: top;
    color: ${e.colors.textStrong};
  `,lastColumn:a.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var V=n(5337),B=n(36586),z=n(30146),_=n(5970),U=n(82897),H=n(98163),W=n(91219),q=n(85239),Z=n(57358),G=n(1557),K=n(39665);const Q=[{label:"",value:K.bU.dontHide},{label:"Label",value:K.bU.hideLabel},{label:"Variable",value:K.bU.hideVariable}];function J(e){let{onChange:t,hide:n,type:a}=e;const s=(0,o.useMemo)((()=>{var e;return null!==(e=Q.find((e=>e.value===n)))&&void 0!==e?e:Q[0]}),[n]);return"constant"===a?null:(0,x.jsx)(G.u,{name:"Hide",value:s,options:Q,onChange:t,testId:v.wl.pages.Dashboard.Settings.Variables.Edit.General.generalHideSelectV2})}var Y,X=n(23334),ee=n(76874);function te(e){let{onChange:t,type:n}=e;const a=(0,o.useMemo)((()=>(0,_.bi)()),[]),s=(0,o.useMemo)((()=>{var e;return null!==(e=a.find((e=>e.value===n)))&&void 0!==e?e:a[0]}),[a,n]);return(0,x.jsx)(G.u,{name:"Type",value:s,options:a,onChange:t,tooltip:W.z.get(n).description,testId:v.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}const ne=e=>{let{variable:{options:t}}=e;const[n,a]=(0,o.useState)(20),[s,i]=(0,o.useState)([]),r=(0,o.useCallback)((e=>{e.preventDefault(),a(n+20)}),[n,a]),l=(0,u.useStyles)(ae);return(0,o.useEffect)((()=>i(t.slice(0,n))),[n,t]),s.length?(0,x.jsxs)(u.VerticalGroup,{spacing:"none",children:[Y||(Y=(0,x.jsx)("h5",{children:"Preview of values"})),(0,x.jsx)(u.InlineFieldRow,{children:s.map(((e,t)=>(0,x.jsx)(u.InlineFieldRow,{className:l.optionContainer,children:(0,x.jsx)(u.InlineLabel,{"aria-label":v.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption,children:(0,x.jsx)("div",{className:l.label,children:e.text})})},`${e.value}-${t}`)))}),t.length>n&&(0,x.jsx)(u.InlineFieldRow,{className:l.optionContainer,children:(0,x.jsx)(u.Button,{onClick:r,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link",children:"Show more"})})]}):null};function ae(e){return{optionContainer:a.css`
      margin-left: ${e.spacing.xs};
      margin-bottom: ${e.spacing.xs};
    `,label:a.css`
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 50vw;
    `}}ne.displayName="VariableValuesPreview";var se=n(22741),ie=n(83751);const re=e=>async t=>{const{rootStateKey:n}=e;t((0,V.mb)(n,(0,ie.wJ)({name:(0,B.E0)(e).name})))},oe=e=>async(t,n)=>{const{rootStateKey:a}=e;t((0,V.mb)(a,(0,ie.qe)((0,_.Y6)(e))))},le=e=>async t=>{await t((0,Z.Rk)(e)),t(pe(e.rootStateKey))},de=(e,t)=>(n,a)=>{const{id:s,rootStateKey:i}=e;let r=null;t.match(/^(?!__).*$/)||(r="Template names cannot begin with '__', that's reserved for Grafana's global variables"),t.match(/^\w+$/)||(r="Only word and digit characters are allowed in variable names");(0,B.gt)(i,a()).filter((e=>e.name===t&&e.id!==s)).length&&(r="Variable with the same name already exists"),n(r?(0,V.mb)(i,(0,ie.y8)({newName:t,errorText:r})):ce(e,t))},ce=(e,t)=>(n,a)=>{const{rootStateKey:s}=e,i=(0,B.E0)(e,a());if(i.name===t)return void n((0,V.mb)(s,(0,ie.Yo)((0,_.Y6)(e,{newName:t}))));const r=Object.assign({},(0,U.cloneDeep)(i),{name:t,id:t}),o=i.global,l=i.index,d=(0,_.yQ)(r);n((0,V.mb)(s,(0,z.VN)((0,_.Y6)(d,{global:o,index:l,model:r})))),n((0,V.mb)(s,(0,ie.Yo)((0,_.Y6)(d,{newName:t})))),n(he(d)),n((0,V.mb)(s,(0,z.mZ)((0,_.Y6)(e,{reIndex:!1}))))},ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"query";return(n,a)=>{const s=(0,_.mn)(e),i=ge(t,(0,B.gt)(s,a())),r={type:t,id:i},o=(0,B.Eo)(s,a()),l=(0,U.cloneDeep)(W.z.get(t).initialState);l.id=i,l.name=i,l.rootStateKey=s,n((0,V.mb)(s,(0,z.VN)((0,_.Y6)(r,{global:!1,model:l,index:o})))),n((0,V.mb)(s,(0,ie.lc)({id:r.id})))}},he=e=>t=>{const{rootStateKey:n}=e;t((0,V.mb)(n,(0,ie.lc)({id:e.id})))},pe=e=>(t,n)=>{const a=(0,_.mn)(e);t((0,V.mb)(a,(0,ie.Yu)()));const s=n(),i=(0,B.xD)(a,s),r=s.dashboard.getModel(),{usages:o}=(0,C.V)(i,r),l=(0,C.vI)(o);t((0,V.mb)(a,(0,se.j4)({usages:o,usagesNetwork:l})))};function ge(e,t){let n=0,a=`${e}${n}`;for(;t.find((e=>e.id===a));)a=`${e}${++n}`;return a}var me;function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ve=(0,m.connect)(((e,t)=>({editor:(0,B.AE)(t.identifier.rootStateKey,e).editor,variable:(0,B.E0)(t.identifier,e,!1)})),(e=>Object.assign({},(0,f.bindActionCreators)({variableEditorMount:re,variableEditorUnMount:oe,changeVariableName:de,onEditorUpdate:le,updateOptions:Z.Rk},e),{changeVariableProp:(t,n,a)=>e((0,V.mb)(t.rootStateKey,(0,z.Pl)((0,_.Y6)(t,{propName:n,propValue:a})))),changeVariableType:(t,n)=>e((0,V.mb)(t.rootStateKey,(0,z.Be)((0,_.Y6)(t,{newType:n}))))})));class be extends o.PureComponent{constructor(){super(...arguments),fe(this,"onNameChange",(e=>{e.preventDefault(),this.props.changeVariableName(this.props.identifier,e.currentTarget.value)})),fe(this,"onTypeChange",(e=>{e.value&&this.props.changeVariableType(this.props.identifier,e.value)})),fe(this,"onLabelChange",(e=>{e.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",e.currentTarget.value)})),fe(this,"onDescriptionChange",(e=>{this.props.changeVariableProp(this.props.identifier,"description",e.currentTarget.value)})),fe(this,"onHideChange",(e=>{this.props.changeVariableProp(this.props.identifier,"hide",e.value)})),fe(this,"onPropChanged",(async e=>{let{propName:t,propValue:n,updateOptions:a=!1}=e;this.props.changeVariableProp(this.props.identifier,t,n),a&&await this.props.updateOptions((0,_.yQ)(this.props.variable))})),fe(this,"onHandleSubmit",(async e=>{e.preventDefault(),this.props.editor.isValid&&await this.props.onEditorUpdate(this.props.identifier)}))}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentDidUpdate(e,t,n){(0,U.isEqual)(e.editor.errors,this.props.editor.errors)||Object.values(this.props.editor.errors).forEach((e=>{H.h$.emit(d.AppEvents.alertWarning,["Validation",e])}))}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){var e,t;const{variable:n}=this.props,a=W.z.get(this.props.variable.type).editor;if(!a)return null;const s=n.state===d.LoadingState.Loading;return(0,x.jsx)("div",{children:(0,x.jsx)("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit,children:(0,x.jsxs)(u.VerticalGroup,{spacing:"lg",children:[(0,x.jsxs)(u.VerticalGroup,{spacing:"none",children:[me||(me=(0,x.jsx)(X.e,{name:"General"})),(0,x.jsxs)(u.InlineFieldRow,{children:[(0,x.jsx)(ee.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"name",required:!0,testId:v.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2}),(0,x.jsx)(te,{onChange:this.onTypeChange,type:this.props.variable.type})]}),this.props.editor.errors.name&&(0,x.jsx)("div",{className:"gf-form",children:(0,x.jsx)("span",{className:"gf-form-label gf-form-label--error",children:this.props.editor.errors.name})}),(0,x.jsxs)(u.InlineFieldRow,{children:[(0,x.jsx)(ee.V,{value:null!==(e=this.props.variable.label)&&void 0!==e?e:"",onChange:this.onLabelChange,name:"Label",placeholder:"optional display name",testId:v.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),(0,x.jsx)(J,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type})]}),(0,x.jsx)(ee.V,{name:"Description",value:null!==(t=n.description)&&void 0!==t?t:"",placeholder:"descriptive text",onChange:this.onDescriptionChange,grow:!0})]}),a&&(0,x.jsx)(a,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,q.eL)(this.props.variable)?(0,x.jsx)(ne,{variable:this.props.variable}):null,(0,x.jsx)(u.VerticalGroup,{spacing:"none",children:(0,x.jsxs)(u.Button,{type:"submit","aria-label":v.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:s,children:["Update",s?(0,x.jsx)(u.Icon,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}}):null]})})]})})})}}const xe=ve(be);var ye=n(48435),we=n(28436);const je=e=>{let{id:t,usages:n,isAdhoc:a}=e;const s=(0,o.useMemo)((()=>n.find((e=>e.variable.id===t))),[n,t]);if(0===n.length||a||!s)return null;const i=s.nodes.map((e=>e.label.includes(`$${t}`)?Object.assign({},e,{color:"#FB7E81"}):e));return(0,x.jsx)(S,{show:!1,title:`Showing usages for: $${t}`,nodes:i,edges:s.edges,children:e=>{let{showModal:t}=e;return(0,x.jsx)(u.IconButton,{onClick:()=>{(0,c.reportInteraction)("Show variable usages"),t()},name:"code-branch",title:"Show usages"})}})};var Se,Ce,ke,Te;function Ie(e){var t;let{index:n,variable:a,usageTree:s,usagesNetwork:i,onEdit:r,onDuplicate:o,onDelete:l}=e;const d=(0,u.useTheme2)(),h=(0,u.useStyles2)(Ne),p=function(e){let t="";(0,q.Xh)(e)?e.definition?t=e.definition:"string"==typeof e.query&&(t=e.query):(0,q.eL)(e)&&(t=e.query);return t}(a),g=(0,C.Rv)(a.id,s)>0||(0,q.Kn)(a),m=(0,_.yQ)(a);return(0,x.jsx)(ye._l,{draggableId:JSON.stringify(m),index:n,children:(e,n)=>(0,x.jsxs)("tr",Object.assign({ref:e.innerRef},e.draggableProps,{style:Object.assign({userSelect:n.isDragging?"none":"auto",background:n.isDragging?d.colors.background.secondary:void 0},e.draggableProps.style),children:[(0,x.jsx)("td",{className:h.column,children:(0,x.jsx)(u.Button,{size:"xs",fill:"text",onClick:e=>{e.preventDefault(),r(m)},className:h.nameLink,"aria-label":v.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(a.name),children:a.name})}),(0,x.jsx)("td",{className:h.definitionColumn,onClick:e=>{e.preventDefault(),r(m)},"aria-label":v.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(a.name),children:p}),(0,x.jsx)("td",{className:h.column,children:t||(t=(0,x.jsx)(Oe,{passed:g}))}),(0,x.jsx)("td",{className:h.column,children:(0,x.jsx)(je,{id:a.id,isAdhoc:(0,q.Kn)(a),usages:i})}),(0,x.jsx)("td",{className:h.column,children:(0,x.jsx)(u.IconButton,{onClick:e=>{e.preventDefault(),(0,c.reportInteraction)("Duplicate variable"),o(m)},name:"copy",title:"Duplicate variable","aria-label":v.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(a.name)})}),(0,x.jsx)("td",{className:h.column,children:(0,x.jsx)(u.IconButton,{onClick:e=>{e.preventDefault(),(0,c.reportInteraction)("Delete variable"),l(m)},name:"trash-alt",title:"Remove variable","aria-label":v.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(a.name)})}),(0,x.jsx)("td",{className:h.column,children:(0,x.jsx)("div",Object.assign({},e.dragHandleProps,{className:h.dragHandle,children:Se||(Se=(0,x.jsx)(u.Icon,{name:"draggabledots",size:"lg"}))}))})]}))})}function Oe(e){let{passed:t}=e;const n=(0,u.useStyles2)(Ne);return t?(0,x.jsx)(u.Icon,{name:"check",className:n.iconPassed,title:"This variable is referenced by other variables or dashboard."}):(0,x.jsx)(u.Icon,{name:"exclamation-triangle",className:n.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Ne(e){return{dragHandle:a.css`
      cursor: grab;
    `,column:a.css`
      width: 1%;
    `,nameLink:a.css`
      cursor: pointer;
      color: ${e.colors.primary.text};
    `,definitionColumn:a.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:a.css`
      color: ${e.v1.palette.greenBase};
    `,iconFailed:a.css`
      color: ${e.v1.palette.orange};
    `}}function Fe(e){let{variables:t,usages:n,usagesNetwork:a,onChangeOrder:s,onAdd:i,onEdit:r,onDelete:o,onDuplicate:l}=e;return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{children:[0===t.length&&(0,x.jsx)(De,{onAdd:i}),t.length>0&&(0,x.jsx)("div",{children:(0,x.jsxs)("table",{className:"filter-table filter-table--hover","aria-label":v.wl.pages.Dashboard.Settings.Variables.List.table,children:[Ce||(Ce=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Variable"}),(0,x.jsx)("th",{children:"Definition"}),(0,x.jsx)("th",{colSpan:5})]})})),(0,x.jsx)(ye.Z5,{onDragEnd:e=>{if(!e.destination||!e.source)return;(0,c.reportInteraction)("Variable drag and drop");const t=JSON.parse(e.draggableId);s(t,e.source.index,e.destination.index)},children:(0,x.jsx)(ye.bK,{droppableId:"variables-list",direction:"vertical",children:e=>(0,x.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[t.map(((e,t)=>(0,x.jsx)(Ie,{index:t,variable:e,usageTree:n,usagesNetwork:a,onDelete:o,onDuplicate:l,onEdit:r},`${e.name}-${t}`))),e.placeholder]}))})})]})})]})})}function De(e){let{onAdd:t}=e;return(0,x.jsx)("div",{children:(0,x.jsx)(we.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:' <p>\n                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server\n                    or sensor names in your metric queries you can use variables in their place. Variables are shown as\n                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data\n                    being displayed in your dashboard. Check out the\n                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">\n                      Templates and variables documentation\n                    </a>\n                    for more information.\n                  </p>'},infoBoxTitle:"What do variables do?",onClick:e=>{e.preventDefault(),t()}})})}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ae=(0,m.connect)(((e,t)=>{const{uid:n}=t.dashboard,a=(0,B.AE)(n,e);return{variables:(0,B.xD)(n,e),idInEditor:a.editor.id,usagesNetwork:a.inspect.usagesNetwork,usages:a.inspect.usages}}),(e=>Object.assign({},(0,f.bindActionCreators)({switchToNewMode:ue,switchToEditMode:he,switchToListMode:pe},e),{changeVariableOrder:(t,n,a)=>e((0,V.mb)(t.rootStateKey,(0,z.gE)((0,_.Y6)(t,{fromIndex:n,toIndex:a})))),duplicateVariable:t=>e((0,V.mb)(t.rootStateKey,(0,z.Y9)((0,_.Y6)(t,{newId:void 0})))),removeVariable:t=>{e((0,V.mb)(t.rootStateKey,(0,z.mZ)((0,_.Y6)(t,{reIndex:!0}))))}})));class Me extends o.PureComponent{constructor(){super(...arguments),Pe(this,"onChangeToListMode",(e=>{e.preventDefault(),this.props.switchToListMode(this.props.dashboard.uid)})),Pe(this,"onEditVariable",(e=>{this.props.switchToEditMode(e)})),Pe(this,"onNewVariable",(()=>{this.props.switchToNewMode(this.props.dashboard.uid)})),Pe(this,"onChangeVariableOrder",((e,t,n)=>{this.props.changeVariableOrder(e,t,n)})),Pe(this,"onDuplicateVariable",(e=>{this.props.duplicateVariable(e)})),Pe(this,"onRemoveVariable",(e=>{this.props.removeVariable(e)}))}componentDidMount(){this.props.switchToListMode(this.props.dashboard.uid)}render(){var e;const t=null!==(e=this.props.variables.find((e=>e.id===this.props.idInEditor)))&&void 0!==e?e:null;return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"page-action-bar",children:[(0,x.jsxs)("h3",{className:"dashboard-settings__header",children:[(0,x.jsx)("a",{onClick:this.onChangeToListMode,"aria-label":v.wl.pages.Dashboard.Settings.Variables.Edit.General.headerLink,children:"Variables"}),this.props.idInEditor&&(ke||(ke=(0,x.jsxs)("span",{children:[(0,x.jsx)(u.Icon,{name:"angle-right"}),"Edit"]})))]}),Te||(Te=(0,x.jsx)("div",{className:"page-action-bar__spacer"})),this.props.variables.length>0&&null===t&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T,{variables:this.props.variables}),(0,x.jsx)(u.Button,{type:"button",onClick:this.onNewVariable,"aria-label":v.wl.pages.Dashboard.Settings.Variables.List.newButton,children:"New"})]})]}),!t&&(0,x.jsx)(Fe,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onRemoveVariable,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!t&&this.props.variables.length>0&&(0,x.jsx)(M,{variables:this.props.variables,dashboard:this.props.dashboard}),t&&(0,x.jsx)(xe,{identifier:(0,_.yQ)(t)})]})}}const Re=Ae(Me);var $e=n(83654);const Le=e=>{let{dashboard:t}=e;const n=H.Vt.hasPermission(g.bW.DashboardsPermissionsWrite);return(0,x.jsx)($e.P,{resource:"dashboards",resourceId:t.uid,canSetPermissions:n})};var Ee,Ve,Be,ze,_e=n(72779),Ue=n(93319),He=n(18778),We=n(25130),qe=n(87413),Ze=n(62736);function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ke={getDashboardPermissions:Ze.qm,addDashboardPermission:Ze.Yq,removeDashboardPermission:Ze.Qk,updateDashboardPermission:Ze.RF,checkFolderPermissions:qe.J6},Qe=(0,m.connect)((e=>({permissions:e.dashboard.permissions,canViewFolderPermissions:e.folder.canViewFolderPermissions})),Ke);class Je extends o.PureComponent{constructor(e){super(e),Ge(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),Ge(this,"onRemoveItem",(e=>{this.props.removeDashboardPermission(this.props.dashboard.id,e)})),Ge(this,"onPermissionChanged",((e,t)=>{this.props.updateDashboardPermission(this.props.dashboard.id,e,t)})),Ge(this,"onAddPermission",(e=>this.props.addDashboardPermission(this.props.dashboard.id,e))),Ge(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:e,canViewFolderPermissions:t}=this.props;return{id:e.meta.folderId,title:e.meta.folderTitle,url:e.meta.folderUrl,canViewFolderPermissions:t}}render(){const{permissions:e,dashboard:{meta:{hasUnsavedFolderChange:t}}}=this.props,{isAdding:n}=this.state;return t?Ee||(Ee=(0,x.jsx)("h5",{children:"You have changed a folder, please save to view permissions."})):(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"page-action-bar",children:[Ve||(Ve=(0,x.jsx)("h3",{className:"page-sub-heading",children:"Permissions"})),Be||(Be=(0,x.jsx)(u.Tooltip,{placement:"auto",content:(0,x.jsx)(We.Z,{}),children:(0,x.jsx)(u.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),ze||(ze=(0,x.jsx)("div",{className:"page-action-bar__spacer"})),(0,x.jsx)(u.Button,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:n,children:"Add permission"})]}),(0,x.jsx)(_e.s,{in:n,children:(0,x.jsx)(Ue.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,x.jsx)(He.Z,{items:e,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()})]})}}const Ye=Qe(Je);var Xe,et,tt,nt,at=n(12973),st=n(23604),it=n(58799),rt=n(22305),ot=n(75478),lt=n(74267),dt=n(345),ct=n(17028);function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ht extends o.PureComponent{constructor(e){super(e),ut(this,"updateFields",(()=>{var e,t;const n=null===(e=this.props.response)||void 0===e||null===(t=e.panelData)||void 0===t?void 0:t.series[0];if(n&&n.fields){const e=n.fields.map((e=>{const t=(0,d.getFieldDisplayName)(e,n);let a="";for(let t=0;t<n.length;t++){if(t>0&&(a+=", "),t>2){a+="...";break}a+=e.values.get(t)}return a.length>50&&(a=a.substring(0,50)+"..."),{label:`${t} (${e.type})`,value:t,description:a}}));this.setState({fieldNames:e})}})),ut(this,"onFieldSourceChange",((e,t)=>{const n=this.props.mappings||{},a=n[e]||{};this.props.change(Object.assign({},n,{[e]:Object.assign({},a,{source:t.value||d.AnnotationEventFieldSource.Field})}))})),ut(this,"onFieldNameChange",((e,t)=>{const n=this.props.mappings||{},a=n[e]||{};this.props.change(Object.assign({},n,{[e]:Object.assign({},a,{value:t.value,source:d.AnnotationEventFieldSource.Field})}))})),this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(e){e.response!==this.props.response&&this.updateFields()}renderRow(e,t,n){const{fieldNames:a}=this.state;let s=a;const i=t.value;let r=a.find((e=>i===e.value));i&&(s=[...a],r||s.push({label:i,value:i}));let o=n?n[e.key]:"";if(o&&e.key.startsWith("time")){const e=(0,d.getValueFormat)("dateTimeAsIso");o=(0,d.formattedValueToString)(e(o))}return null==o&&(o=""),(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{children:[e.key," ",e.help&&(0,x.jsx)(u.Tooltip,{content:e.help,children:Xe||(Xe=(0,x.jsx)(u.Icon,{name:"info-circle"}))})]}),(0,x.jsx)("td",{children:(0,x.jsx)(u.Select,{value:r,options:s,placeholder:e.placeholder||e.key,onChange:t=>{this.onFieldNameChange(e.key,t)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})}),(0,x.jsx)("td",{children:`${o}`})]},e.key)}render(){var e,t;const n=null===(e=this.props.response)||void 0===e||null===(t=e.events)||void 0===t?void 0:t[0],a=this.props.mappings||{};return(0,x.jsxs)("table",{className:"filter-table",children:[et||(et=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Annotation"}),(0,x.jsx)("th",{children:"From"}),(0,x.jsx)("th",{children:"First Value"})]})})),(0,x.jsx)("tbody",{children:ct.r0.map((e=>this.renderRow(e,a[e.key]||{},n)))})]})}}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gt extends o.PureComponent{constructor(){super(...arguments),pt(this,"state",{}),pt(this,"onRunQuery",(async()=>{const{datasource:e,annotation:t}=this.props;if((0,ct.yr)(e))return;const n=(0,rt.h4)().getCurrent();if(!n)return;this.setState({running:!0});const a=await(0,it.n)((0,dt.r)({range:(0,ot.$t)().timeRange(),panel:new lt.r({}),dashboard:n},e,t));this.setState({running:!1,response:a})})),pt(this,"onQueryChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{target:e}))})),pt(this,"onMappingChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{mappings:e}))})),pt(this,"onAnnotationChange",(e=>{this.props.onChange(e)}))}componentDidMount(){this.verifyDataSource()}componentDidUpdate(e){this.props.annotation===e.annotation||(0,ct.yr)(this.props.datasource)||this.verifyDataSource()}verifyDataSource(){const{datasource:e,annotation:t}=this.props,n=Object.assign({},ct.yA,e.annotations).prepareAnnotation(t);n!==t?this.props.onChange(n):this.onRunQuery()}renderStatus(){var e;const{response:t,running:n}=this.state;let s,i="alert-info",r="...";if(n||(null==t||null===(e=t.panelData)||void 0===e?void 0:e.state)===d.LoadingState.Loading||!t)r="loading...";else{const{events:e,panelData:n}=t;var o;if(null!=n&&n.error)i="alert-error",s="exclamation-triangle",r=null!==(o=n.error.message)&&void 0!==o?o:"error";else if(null!=e&&e.length){const t=null==n?void 0:n.series[0];r=`${e.length} events (from ${null==t?void 0:t.fields.length} fields)`}else i="alert-warning",s="exclamation-triangle",r="No events found"}return(0,x.jsxs)("div",{className:(0,a.cx)(i,a.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `),children:[(0,x.jsxs)("div",{children:[s&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Icon,{name:s}),"Â "]}),r]}),(0,x.jsx)("div",{children:n?tt||(tt=(0,x.jsx)(u.Spinner,{})):(0,x.jsx)(u.Button,{variant:"secondary",size:"xs",onClick:this.onRunQuery,children:"TEST"})})]})}render(){var e,t,n;const{datasource:a,annotation:s}=this.props,{response:i}=this.state;let r=(null===(e=a.annotations)||void 0===e?void 0:e.QueryEditor)||(null===(t=a.components)||void 0===t?void 0:t.QueryEditor);if(!r)return nt||(nt=(0,x.jsx)("div",{children:"Annotations are not supported. This datasource needs to export a QueryEditor"}));const o=null!==(n=s.target)&&void 0!==n?n:{refId:"Anno"};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r,{query:o,datasource:a,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:null==i?void 0:i.panelData,range:(0,ot.$t)().timeRange(),annotation:s,onAnnotationChange:this.onAnnotationChange},null==a?void 0:a.name),(0,ct.$w)(a)&&(0,x.jsxs)(x.Fragment,{children:[this.renderStatus(),(0,x.jsx)(ht,{response:i,mappings:s.mappings,change:this.onMappingChange})]})]})}}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ft extends o.PureComponent{constructor(){super(...arguments),mt(this,"ref",null),mt(this,"angularComponent",void 0),mt(this,"scopeProps",void 0)}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(e){var t;(e.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation)&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,null===(t=this.angularComponent)||void 0===t||t.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const e=(0,c.getAngularLoader)(),t={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=e.load(this.ref,t,'<plugin-component type="annotations-query-ctrl"> </plugin-component>'),this.angularComponent.digest(),this.angularComponent.getScope().$watch((()=>{t.ctrl.ignoreNextWatcherFiring?t.ctrl.ignoreNextWatcherFiring=!1:this.props.onChange(t.ctrl.currentAnnotation)})),this.scopeProps=t}render(){return(0,x.jsx)("div",{ref:e=>this.ref=e})}}const vt="New annotation",bt=e=>{let{editIdx:t,dashboard:n}=e;const[a,s]=(0,o.useState)(n.annotations.list[t]),{value:i}=(0,I.Z)((()=>(0,c.getDataSourceSrv)().get(a.datasource)),[a.datasource]),r=e=>{const a=[...n.annotations.list];a.splice(t,1,e),s(e),n.annotations.list=a},l=e=>{const t=e.currentTarget;r(Object.assign({},a,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},h=a.name===vt;return(0,x.jsxs)("div",{children:[(0,x.jsx)(u.Field,{label:"Name",children:(0,x.jsx)(u.Input,{"aria-label":v.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:h,value:a.name,onChange:e=>{r(Object.assign({},a,{name:e.currentTarget.value}))},width:50})}),(0,x.jsx)(u.Field,{label:"Data source",htmlFor:"data-source-picker",children:(0,x.jsx)(c.DataSourcePicker,{width:50,annotations:!0,variables:!0,current:a.datasource,onChange:e=>{r(Object.assign({},a,{datasource:(0,d.getDataSourceRef)(e)}))}})}),(0,x.jsx)(u.Field,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh",children:(0,x.jsx)(u.Checkbox,{name:"enable",id:"enable",value:a.enable,onChange:l})}),(0,x.jsx)(u.Field,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden.",children:(0,x.jsx)(u.Checkbox,{name:"hide",id:"hide",value:a.hide,onChange:l})}),(0,x.jsx)(u.Field,{label:"Color",description:"Color to use for the annotation event markers",children:(0,x.jsx)(u.HorizontalGroup,{children:(0,x.jsx)(st.B,{value:null==a?void 0:a.iconColor,onChange:e=>{r(Object.assign({},a,{iconColor:e}))}})})}),(0,x.jsxs)(u.CollapsableSection,{isOpen:!0,label:"Query",children:[(null==i?void 0:i.annotations)&&(0,x.jsx)(gt,{datasource:i,annotation:a,onChange:r}),i&&!i.annotations&&(0,x.jsx)(ft,{datasource:i,annotation:a,onChange:r})]})]})};bt.displayName="AnnotationSettingsEdit";const xt=["children"];const yt=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,xt);const a=(0,u.useStyles)(wt);return(0,x.jsx)("div",{className:a.buttonWrapper,children:(0,x.jsx)(u.Button,Object.assign({icon:"plus",variant:"secondary"},n,{children:t}))})},wt=e=>({buttonWrapper:a.css`
    padding: ${e.spacing.lg} 0;
  `});var jt,St,Ct;const kt=e=>{let{dashboard:t,onNew:n,onEdit:a}=e;const[s,i]=(0,o.useState)(t.annotations.list),r=(e,n)=>{t.annotations.list=d.arrayUtils.moveItemImmutably(s,e,e+n),i(t.annotations.list)},l=0===s.length||1===s.length&&s[0].builtIn,h=(0,c.getDataSourceSrv)();return(0,x.jsxs)(u.VerticalGroup,{children:[s.length>0&&(0,x.jsxs)("table",{className:"filter-table filter-table--hover",children:[jt||(jt=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Query name"}),(0,x.jsx)("th",{children:"Data source"}),(0,x.jsx)("th",{colSpan:3})]})})),(0,x.jsx)("tbody",{children:t.annotations.list.map(((e,n)=>{var o,l;return(0,x.jsxs)("tr",{children:[e.builtIn?(0,x.jsxs)("td",{style:{width:"90%"},className:"pointer",onClick:()=>a(n),children:[St||(St=(0,x.jsx)(u.Icon,{name:"comment-alt"}))," Â  ",(0,x.jsxs)("em",{className:"muted",children:[e.name," (Built-in)"]})]}):(0,x.jsxs)("td",{className:"pointer",onClick:()=>a(n),children:[Ct||(Ct=(0,x.jsx)(u.Icon,{name:"comment-alt"}))," Â  ",e.name]}),(0,x.jsx)("td",{className:"pointer",onClick:()=>a(n),children:(null===(o=h.getInstanceSettings(e.datasource))||void 0===o?void 0:o.name)||(null===(l=e.datasource)||void 0===l?void 0:l.uid)}),(0,x.jsx)("td",{style:{width:"1%"},children:0!==n&&(0,x.jsx)(u.IconButton,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>r(n,-1)})}),(0,x.jsx)("td",{style:{width:"1%"},children:t.annotations.list.length>1&&n!==t.annotations.list.length-1?(0,x.jsx)(u.IconButton,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>r(n,1)}):null}),(0,x.jsx)("td",{style:{width:"1%"},children:(0,x.jsx)(u.DeleteButton,{size:"sm",onConfirm:()=>(e=>{t.annotations.list=[...s.slice(0,e),...s.slice(e+1)],i(t.annotations.list)})(n),"aria-label":`Delete query with title "${e.name}"`})})]},`${e.name}-${n}`)}))})]}),l&&(0,x.jsx)(we.Z,{onClick:n,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:"<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines\n          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for\n          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or\n          drag region). These will be stored in Grafana's annotation database.\n        </p>\n        Checkout the\n        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'\n          >Annotations documentation</a\n        >\n        for more information."}}),!l&&(0,x.jsx)(yt,{onClick:n,children:"New query"})]})};var Tt;const It=e=>{let{onGoBack:t,isEditing:n,title:a}=e;return(0,x.jsx)("div",{className:"dashboard-settings__header",children:(0,x.jsx)(u.HorizontalGroup,{align:"center",justify:"space-between",children:(0,x.jsxs)("h3",{children:[(0,x.jsx)("span",{onClick:t,className:n?"pointer":"",children:a}),n&&(Tt||(Tt=(0,x.jsxs)("span",{children:[(0,x.jsx)(u.Icon,{name:"angle-right"})," Edit"]})))]})})})},Ot=e=>{let{dashboard:t}=e;const[n,a]=(0,o.useState)(null),s=null!==n;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(It,{title:"Annotations",onGoBack:()=>{a(null)},isEditing:s}),!s&&(0,x.jsx)(kt,{dashboard:t,onNew:()=>{const e={name:vt,enable:!0,datasource:(0,d.getDataSourceRef)((0,c.getDataSourceSrv)().getInstanceSettings(null)),iconColor:"red"};t.annotations.list=[...t.annotations.list,Object.assign({},e)],a(t.annotations.list.length-1)},onEdit:e=>{a(e)}}),s&&(0,x.jsx)(bt,{dashboard:t,editIdx:n})]})};var Nt=n(95513),Ft=n(33554),Dt=n(80027),Pt=n(58257),At=n(85189);var Mt,Rt,$t,Lt,Et;const Vt={cleanUpDashboardAndVariables:Ze.lw},Bt=(0,m.connect)(null,Vt),zt=(e,t)=>{const n=(0,U.sumBy)(e,(e=>e.alert?1:0));return n>0&&!h.vc.unifiedAlertingEnabled?(0,x.jsxs)(x.Fragment,{children:[Mt||(Mt=(0,x.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,x.jsxs)("p",{children:["This dashboard contains ",n," alert",n>1?"s":"",". Deleting this dashboard also deletes those alerts."]})]}):(0,x.jsxs)(x.Fragment,{children:[Rt||(Rt=(0,x.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,x.jsx)("p",{children:t})]})},_t=e=>{let{hideModal:t,provisionedId:n}=e;return(0,x.jsxs)(u.Modal,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:t,className:a.css`
      width: 500px;
    `,children:[$t||($t=(0,x.jsx)("p",{children:"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."})),(0,x.jsxs)("p",{children:[Lt||(Lt=(0,x.jsxs)("i",{children:["See"," ",(0,x.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),Et||(Et=(0,x.jsx)("br",{})),"File path: ",n]}),(0,x.jsx)(u.Modal.ButtonRow,{children:(0,x.jsx)(u.Button,{variant:"primary",onClick:t,children:"OK"})})]})},Ut=Bt((e=>{let{hideModal:t,cleanUpDashboardAndVariables:n,dashboard:a}=e;const s=a.meta.provisioned,{onDeleteDashboard:i}=((e,t)=>{const[n,a]=(0,Dt.Z)((()=>(0,At.iM)(e,!1)),[]),s=(0,Pt.iG)();return(0,o.useEffect)((()=>{n.value&&(t(),c.locationService.replace("/"),s.success("Dashboard Deleted",`${n.value.title} has been deleted`))}),[n,s,t]),{state:n,onDeleteDashboard:a}})(a.uid,n),[,r]=(0,Ft.default)((async()=>{await i(),t()}),[t]),l=zt(a.panels,a.title);return s?(0,x.jsx)(_t,{hideModal:t,provisionedId:a.meta.provisionedExternalId}):(0,x.jsx)(u.ConfirmModal,{isOpen:!0,body:l,onConfirm:r,onDismiss:t,title:"Delete",icon:"trash-alt",confirmText:"Delete"})})),Ht=e=>{let{dashboard:t}=e;return(0,x.jsx)(u.ModalsController,{children:e=>{let{showModal:n,hideModal:a}=e;return(0,x.jsx)(u.Button,{variant:"destructive",onClick:()=>{n(Ut,{dashboard:t,hideModal:a})},"aria-label":"Dashboard settings page delete dashboard button",children:"Delete Dashboard"})}})};var Wt,qt,Zt=n(28659),Gt=n(18084);function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qt extends o.PureComponent{constructor(){super(...arguments),Kt(this,"state",{}),Kt(this,"doUpload",((e,t)=>{const n=(null==e?void 0:e.files)&&e.files[0];if(!n)return void console.log("NOPE!",e);const a=(0,Gt.A)(this.props.uid,t),s=new FormData;s.append("file",n),fetch(a,{method:"POST",body:s}).then((e=>e.json())).then((e=>{console.log("Success:",e),location.reload()})).catch((e=>{console.error("Error:",e)}))})),Kt(this,"markAsStale",(e=>async()=>(0,Zt.i)().put((0,Gt.A)(this.props.uid,e),{state:"stale"})))}render(){const{uid:e}=this.props,t={maxWidth:300,maxHeight:300};return(0,x.jsxs)(u.CollapsableSection,{label:"Preview settings",isOpen:!0,children:[Wt||(Wt=(0,x.jsx)("div",{children:"DUMMY UI just so we have an upload button!"})),(0,x.jsxs)("table",{cellSpacing:"4",children:[qt||(qt=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"[DARK]"}),(0,x.jsx)("td",{children:"[LIGHT]"})]})})),(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)(u.Button,{type:"button",variant:"primary",onClick:this.markAsStale(!1),fill:"outline",children:"Mark as stale"})}),(0,x.jsx)("td",{children:(0,x.jsx)(u.Button,{type:"button",variant:"primary",onClick:this.markAsStale(!0),fill:"outline",children:"Mark as stale"})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("img",{src:(0,Gt.A)(e,!1),style:t})}),(0,x.jsx)("td",{children:(0,x.jsx)("img",{src:(0,Gt.A)(e,!0),style:t})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)(u.FileUpload,{accept:"image/png, image/webp",onFileUpload:e=>{let{currentTarget:t}=e;return this.doUpload(t,!1)},children:"Upload dark"})}),(0,x.jsx)("td",{children:(0,x.jsx)(u.FileUpload,{accept:"image/png, image/webp",onFileUpload:e=>{let{currentTarget:t}=e;return this.doUpload(t,!0)},children:"Upload light"})})]})]})]})]})}}var Jt=n(24581);const Yt=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];const Xt={updateTimeZone:Ze.tM,updateWeekStart:Ze.f4},en=(0,m.connect)(null,Xt)((function(e){let{dashboard:t,updateTimeZone:n,updateWeekStart:a}=e;const[s,i]=(0,o.useState)(0),r=e=>{t[e.currentTarget.name]=e.currentTarget.value};return(0,x.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,x.jsx)("h3",{className:"dashboard-settings__header","aria-label":v.wl.pages.Dashboard.Settings.General.title,children:"General"}),(0,x.jsxs)("div",{className:"gf-form-group",children:[(0,x.jsx)(u.Field,{label:"Name",children:(0,x.jsx)(u.Input,{id:"title-input",name:"title",onBlur:r,defaultValue:t.title})}),(0,x.jsx)(u.Field,{label:"Description",children:(0,x.jsx)(u.Input,{id:"description-input",name:"description",onBlur:r,defaultValue:t.description})}),(0,x.jsx)(u.Field,{label:"Tags",children:(0,x.jsx)(u.TagsInput,{id:"tags-input",tags:t.tags,onChange:e=>{t.tags=e,i(s+1)}})}),(0,x.jsx)(u.Field,{label:"Folder",children:(0,x.jsx)(Nt.E,{inputId:"dashboard-folder-input",initialTitle:t.meta.folderTitle,initialFolderId:t.meta.folderId,onChange:e=>{t.meta.folderId=e.id,t.meta.folderTitle=e.title,t.meta.hasUnsavedFolderChange=!0},enableCreateNew:!0,dashboardId:t.id,skipInitialLoad:!0})}),(0,x.jsx)(u.Field,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect",children:(0,x.jsx)(u.RadioButtonGroup,{value:t.editable,options:[{label:"Editable",value:!0},{label:"Read-only",value:!1}],onChange:e=>{t.editable=e,i(s+1)}})})]}),c.config.featureToggles.dashboardPreviews&&c.config.featureToggles.dashboardPreviewsAdmin&&(0,x.jsx)(Qt,{uid:t.uid}),(0,x.jsx)(Jt.P,{onTimeZoneChange:e=>{t.timezone=e,i(s+1),n(e)},onWeekStartChange:e=>{t.weekStart=e,i(s+1),a(e)},onRefreshIntervalChange:e=>{t.timepicker.refresh_intervals=e.filter((e=>""!==e.trim()))},onNowDelayChange:e=>{t.timepicker.nowDelay=e},onHideTimePickerChange:e=>{t.timepicker.hidden=e,i(s+1)},onLiveNowChange:e=>{t.liveNow=e,i(s+1)},refreshIntervals:t.timepicker.refresh_intervals,timePickerHidden:t.timepicker.hidden,nowDelay:t.timepicker.nowDelay,timezone:t.timezone,weekStart:t.weekStart,liveNow:t.liveNow}),(0,x.jsx)(u.CollapsableSection,{label:"Panel options",isOpen:!0,children:(0,x.jsx)(u.Field,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect",children:(0,x.jsx)(u.RadioButtonGroup,{onChange:e=>{t.graphTooltip=e,i(s+1)},options:Yt,value:t.graphTooltip})})}),(0,x.jsx)("div",{className:"gf-form-button-row",children:t.meta.canDelete&&(0,x.jsx)(Ht,{dashboard:t})})]})}));var tn,nn,an=n(87723),sn=n(67706);const rn=e=>{let{dashboard:t}=e;const[n,a]=(0,o.useState)(JSON.stringify(t.getSaveModelClone(),null,2)),s=e=>{a(e)},i=(0,u.useStyles2)(on);return(0,x.jsxs)("div",{children:[tn||(tn=(0,x.jsx)("h3",{className:"dashboard-settings__header",children:"JSON Model"})),nn||(nn=(0,x.jsx)("div",{className:"dashboard-settings__subheader",children:"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."})),(0,x.jsx)("div",{className:i.editWrapper,children:(0,x.jsx)(an.Z,{children:e=>{let{width:t,height:a}=e;return(0,x.jsx)(u.CodeEditor,{value:n,language:"json",width:t,height:a,showMiniMap:!0,showLineNumbers:!0,onBlur:s})}})}),t.meta.canSave&&(0,x.jsx)(u.HorizontalGroup,{children:(0,x.jsx)(u.Button,{type:"submit",onClick:()=>{(0,rt.h4)().saveJSONDashboard(n).then((()=>{sn.H.reloadPage()}))},children:"Save changes"})})]})},on=e=>({editWrapper:a.css`
    height: calc(100vh - 250px);
    margin-bottom: 10px;
  `});var ln,dn,cn=n(62564);const un=e=>{let{dashboard:t,onNew:n,onEdit:a}=e;const[s,i]=(0,o.useState)(t.links),r=(e,n)=>{t.links=d.arrayUtils.moveItemImmutably(s,e,e+n),i(t.links)};return 0===t.links.length?(0,x.jsx)(we.Z,{onClick:n,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("table",{className:"filter-table filter-table--hover",children:[ln||(ln=(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Type"}),(0,x.jsx)("th",{children:"Info"}),(0,x.jsx)("th",{colSpan:3})]})})),(0,x.jsx)("tbody",{children:s.map(((e,n)=>{var o;return(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{className:"pointer",onClick:()=>a(n),children:[dn||(dn=(0,x.jsx)(u.Icon,{name:"external-link-alt"}))," Â  ",e.type]}),(0,x.jsx)("td",{children:(0,x.jsxs)(u.HorizontalGroup,{children:[e.title&&(0,x.jsx)("span",{children:e.title}),"link"===e.type&&(0,x.jsx)("span",{children:e.url}),"dashboards"===e.type&&(0,x.jsx)(u.TagList,{tags:null!==(o=e.tags)&&void 0!==o?o:[]})]})}),(0,x.jsx)("td",{style:{width:"1%"},children:0!==n&&(0,x.jsx)(u.IconButton,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>r(n,-1)})}),(0,x.jsx)("td",{style:{width:"1%"},children:s.length>1&&n!==s.length-1?(0,x.jsx)(u.IconButton,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>r(n,1)}):null}),(0,x.jsx)("td",{style:{width:"1%"},children:(0,x.jsx)(u.IconButton,{"aria-label":"copy",name:"copy",onClick:()=>((e,n)=>{t.links=[...s,Object.assign({},e)],i(t.links)})(e)})}),(0,x.jsx)("td",{style:{width:"1%"},children:(0,x.jsx)(u.DeleteButton,{"aria-label":`Delete link with title "${e.title}"`,size:"sm",onConfirm:()=>(e=>{t.links=[...s.slice(0,e),...s.slice(e+1)],i(t.links)})(n)})})]},`${e.title}-${n}`)}))})]}),(0,x.jsx)(yt,{onClick:n,children:"New link"})]})},hn=e=>{let{dashboard:t}=e;const[n,a]=(0,o.useState)(null),s=()=>{a(null)},i=null!==n;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(It,{onGoBack:s,title:"Dashboard links",isEditing:i}),!i&&(0,x.jsx)(un,{dashboard:t,onNew:()=>{t.links=[...t.links,Object.assign({},cn.zA)],a(t.links.length-1)},onEdit:e=>{a(e)}}),i&&(0,x.jsx)(cn.fD,{dashboard:t,editLinkIdx:n,onGoBack:s})]})};var pn,gn,mn,fn,vn,bn=n(30528);function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class yn extends o.PureComponent{constructor(e){var t;super(e),t=this,xn(this,"limit",void 0),xn(this,"start",void 0),xn(this,"getVersions",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isAppending:e}),bn.K8.getHistoryList(t.props.dashboard,{limit:t.limit,start:t.start}).then((e=>{t.setState({isLoading:!1,versions:[...t.state.versions,...t.decorateVersions(e)]}),t.start+=t.limit})).catch((e=>console.log(e))).finally((()=>t.setState({isAppending:!1})))})),xn(this,"getDiff",(async()=>{const e=this.state.versions.filter((e=>e.checked)),[t,n]=e,a=t.version===this.props.dashboard.version;this.setState({isLoading:!0});const s=await bn.K8.getDashboardVersion(this.props.dashboard.uid,n.version),i=await bn.K8.getDashboardVersion(this.props.dashboard.uid,t.version);this.setState({baseInfo:n,isLoading:!1,isNewLatest:a,newInfo:t,viewMode:"compare",diffData:{lhs:s.data,rhs:i.data}})})),xn(this,"decorateVersions",(e=>e.map((e=>Object.assign({},e,{createdDateString:this.props.dashboard.formatDate(e.created),ageString:this.props.dashboard.getRelativeTime(e.created),checked:!1}))))),xn(this,"onCheck",((e,t)=>{this.setState({versions:this.state.versions.map((n=>n.id===t?Object.assign({},n,{checked:e.currentTarget.checked}):n))})})),xn(this,"reset",(()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map((e=>Object.assign({},e,{checked:!1}))),viewMode:"list"})})),this.limit=10,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find((e=>1===e.version))}render(){const{versions:e,viewMode:t,baseInfo:n,newInfo:a,isNewLatest:s,isLoading:i,diffData:r}=this.state,o=2===e.filter((e=>e.checked)).length,l=e.length>1,d=e.length>=this.limit;return"compare"===t?(0,x.jsxs)("div",{children:[(0,x.jsx)(bn.Cs,{isComparing:!0,onClick:this.reset,baseVersion:null==n?void 0:n.version,newVersion:null==a?void 0:a.version,isNewLatest:s}),i?pn||(pn=(0,x.jsx)(wn,{msg:"Fetching changesâ¦"})):(0,x.jsx)(bn.U$,{newInfo:a,baseInfo:n,isNewLatest:s,diffData:r})]}):(0,x.jsxs)("div",{children:[gn||(gn=(0,x.jsx)(bn.Cs,{})),i?mn||(mn=(0,x.jsx)(wn,{msg:"Fetching history listâ¦"})):(0,x.jsx)(bn.Sd,{versions:e,onCheck:this.onCheck,canCompare:o}),this.state.isAppending&&(fn||(fn=(0,x.jsx)(wn,{msg:"Fetching more entriesâ¦"}))),l&&(0,x.jsx)(bn.R1,{hasMore:d,canCompare:o,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()})]})}}const wn=e=>{let{msg:t}=e;return(0,x.jsxs)(u.HorizontalGroup,{children:[vn||(vn=(0,x.jsx)(u.Spinner,{})),(0,x.jsx)("em",{children:t})]})};var jn;const Sn=()=>c.locationService.partial({editview:null}),Cn=e=>(0,x.jsxs)("div",{children:[jn||(jn=(0,x.jsx)("div",{className:"dashboard-settings__header",children:"Dashboard not editable"})),(0,x.jsx)(u.Button,{type:"submit",onClick:e.onMakeEditable,children:"Make editable"})]});function kn(e){var t,n,m,f,v,b,y,w,j,S;let{dashboard:C,editview:k}=e;const T=(0,o.useRef)(null),{overlayProps:I}=(0,r.Ir)({isOpen:!0,onClose:Sn},T),{dialogProps:O}=(0,s.R)({"aria-label":"Dashboard settings"},T),N=(0,u.useForceUpdate)(),F=(0,o.useCallback)((()=>{C.editable=!0,C.meta.canMakeEditable=!1,C.meta.canEdit=!0,C.meta.canSave=!0,N()}),[C,N]),D=(0,o.useMemo)((()=>{const e=[];return C.meta.canEdit&&(e.push({title:"General",id:"settings",icon:"sliders-v-alt",component:t||(t=(0,x.jsx)(en,{dashboard:C}))}),e.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:n||(n=(0,x.jsx)(Ot,{dashboard:C}))}),e.push({title:"Variables",id:"templating",icon:"calculator-alt",component:m||(m=(0,x.jsx)(Re,{dashboard:C}))}),e.push({title:"Links",id:"links",icon:"link",component:f||(f=(0,x.jsx)(hn,{dashboard:C}))})),C.meta.canMakeEditable&&e.push({title:"General",icon:"sliders-v-alt",id:"settings",component:v||(v=(0,x.jsx)(Cn,{onMakeEditable:F}))}),C.id&&C.meta.canSave&&e.push({title:"Versions",id:"versions",icon:"history",component:b||(b=(0,x.jsx)(yn,{dashboard:C}))}),C.id&&C.meta.canAdmin&&(h.ZP.rbacEnabled?p.Vt.hasPermission(g.bW.DashboardsPermissionsRead)&&e.push({title:"Permissions",id:"permissions",icon:"lock",component:w||(w=(0,x.jsx)(Le,{dashboard:C}))}):e.push({title:"Permissions",id:"permissions",icon:"lock",component:y||(y=(0,x.jsx)(Ye,{dashboard:C}))})),e.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:j||(j=(0,x.jsx)(rn,{dashboard:C}))}),e}),[C,F]),P=()=>{C.meta.hasUnsavedFolderChange=!1},A=C.meta.folderTitle,M=null!==(S=D.find((e=>e.id===k)))&&void 0!==S?S:D[0],R=p.Vt.hasEditPermissionInFolders,$=C.meta.canSave,L=Tn(h.ZP.theme2);return(0,x.jsx)(i.MT,{contain:!0,autoFocus:!0,children:(0,x.jsxs)("div",Object.assign({className:"dashboard-settings",ref:T},I,O,{children:[(0,x.jsx)(u.PageToolbar,{className:L.toolbar,title:C.title,section:"Settings",parent:A,onGoBack:Sn}),(0,x.jsx)(u.CustomScrollbar,{children:(0,x.jsx)("div",{className:L.scrollInner,children:(0,x.jsxs)("div",{className:L.settingsWrapper,children:[(0,x.jsxs)("aside",{className:"dashboard-settings__aside",children:[D.map((e=>(0,x.jsxs)(l.Link,{onClick:()=>(0,c.reportInteraction)(`Dashboard settings navigation to ${e.id}`),to:t=>d.locationUtil.getUrlForPartial(t,{editview:e.id}),className:(0,a.cx)("dashboard-settings__nav-item",{active:e.id===k}),children:[(0,x.jsx)(u.Icon,{name:e.icon,style:{marginRight:"4px"}}),e.title]},e.id))),(0,x.jsxs)("div",{className:"dashboard-settings__aside-actions",children:[$&&(0,x.jsx)(at.i,{dashboard:C,onSaveSuccess:P}),R&&(0,x.jsx)(at.t,{dashboard:C,onSaveSuccess:P,variant:"secondary"})]})]}),(0,x.jsx)("div",{className:L.settingsContent,children:M.component})]})})})]}))})}const Tn=(0,u.stylesFactory)((e=>({scrollInner:a.css`
    min-width: 100%;
    display: flex;
  `,toolbar:a.css`
    width: 60vw;
    min-width: min-content;
  `,settingsWrapper:a.css`
    margin: ${e.spacing(0,2,2)};
    display: flex;
    flex-grow: 1;
  `,settingsContent:a.css`
    flex-grow: 1;
    height: 100%;
    padding: 32px;
    border: 1px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    border-radius: ${e.shape.borderRadius()};
  `})))},62564:(e,t,n)=>{"use strict";n.d(t,{fD:()=>c,xy:()=>l,zA:()=>r});var a=n(68404),s=n(3490),i=n(45916);const r={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},o=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],l={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},d=Object.keys(l).map((e=>({label:e,value:e}))),c=e=>{let{editLinkIdx:t,dashboard:n,onGoBack:l}=e;const[c,u]=(0,a.useState)(null!==t?n.links[t]:r),h=e=>{const a=[...n.links];a.splice(t,1,e),n.links=a,u(e)},p=e=>{const t=e.currentTarget;h(Object.assign({},c,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},g=c.title===r.title;return(0,i.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,i.jsx)(s.Field,{label:"Title",children:(0,i.jsx)(s.Input,{name:"title",id:"title",value:c.title,onChange:p,autoFocus:g})}),(0,i.jsx)(s.Field,{label:"Type",children:(0,i.jsx)(s.Select,{inputId:"link-type-input",value:c.type,options:o,onChange:e=>{const t=Object.assign({},c,{type:e.value});"dashboards"===t.type?(t.url="",t.tooltip=""):t.tags=[],h(t)}})}),"dashboards"===c.type&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.Field,{label:"With tags",children:(0,i.jsx)(s.TagsInput,{tags:c.tags,placeholder:"add tags",onChange:e=>{h(Object.assign({},c,{tags:e}))}})})}),"link"===c.type&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Field,{label:"URL",children:(0,i.jsx)(s.Input,{name:"url",value:c.url,onChange:p})}),(0,i.jsx)(s.Field,{label:"Tooltip",children:(0,i.jsx)(s.Input,{name:"tooltip",value:c.tooltip,onChange:p,placeholder:"Open dashboard"})}),(0,i.jsx)(s.Field,{label:"Icon",children:(0,i.jsx)(s.Select,{value:c.icon,options:d,onChange:e=>{h(Object.assign({},c,{icon:e.value}))}})})]}),(0,i.jsxs)(s.CollapsableSection,{label:"Options",isOpen:!0,children:["dashboards"===c.type&&(0,i.jsx)(s.Field,{children:(0,i.jsx)(s.Checkbox,{label:"Show as dropdown",name:"asDropdown",value:c.asDropdown,onChange:p})}),(0,i.jsx)(s.Field,{children:(0,i.jsx)(s.Checkbox,{label:"Include current time range",name:"keepTime",value:c.keepTime,onChange:p})}),(0,i.jsx)(s.Field,{children:(0,i.jsx)(s.Checkbox,{label:"Include current template variable values",name:"includeVars",value:c.includeVars,onChange:p})}),(0,i.jsx)(s.Field,{children:(0,i.jsx)(s.Checkbox,{label:"Open link in new tab",name:"targetBlank",value:c.targetBlank,onChange:p})})]}),(0,i.jsx)(s.Button,{onClick:l,children:"Apply"})]})}},37812:(e,t,n)=>{"use strict";n.d(t,{u:()=>p});var a=n(36636),s=n(68404),i=n(92115),r=n(16695),o=n(3490),l=n(26011),d=n(91045),c=n(81300),u=n(45916);const h="showCategory",p=s.memo((e=>{var t,n;let{id:c,title:p,children:f,forceOpen:v,isOpenDefault:b,renderTitle:x,className:y,itemsCount:w,isNested:j=!1}=e;const S=!1!==b,[C,k]=(0,i.Z)(m(c),{isExpanded:S}),T=(0,o.useStyles2)(g),[I,O]=(0,l.K)(),[N,F]=(0,s.useState)(null!==(t=null==C?void 0:C.isExpanded)&&void 0!==t?t:S),D=(0,s.useRef)(0),P=(0,s.useRef)(null),A=I.showCategory===c;(0,s.useEffect)((()=>{var e;D.current&&Date.now()-D.current<200||(A||v)&&(N||F(!0),A&&(null===(e=P.current)||void 0===e||e.scrollIntoView()))}),[v,N,A]);const M=(0,s.useCallback)((()=>{D.current=Date.now(),O({[h]:N?void 0:c},!0),k({isExpanded:!N}),F(!N)}),[k,F,O,N,c]);x||(x=function(e){return e||void 0===w||0===w?p:n||(n=(0,u.jsxs)("span",{children:[p," ",(0,u.jsx)(o.Counter,{value:w})]}))});const R=(0,a.cx)({[T.box]:!0,[T.boxNestedExpanded]:j&&N},y,"options-group"),$=(0,a.cx)(T.header,{[T.headerExpanded]:N,[T.headerNested]:j}),L=(0,a.cx)(T.body,{[T.bodyNested]:j});return(0,u.jsxs)("div",{className:R,"data-testid":"options-category","aria-label":r.wl.components.OptionsGroup.group(c),ref:P,children:[(0,u.jsxs)("div",{className:$,onClick:M,"aria-label":r.wl.components.OptionsGroup.toggle(c),children:[(0,u.jsx)(d.U,{isCollapsed:!N,idControlled:c,onToggle:M}),(0,u.jsx)("h6",{id:`button-${c}`,className:T.title,children:x(N)})]}),N&&(0,u.jsx)("div",{className:L,id:c,"aria-labelledby":`button-${c}`,children:f})]})}));p.displayName="OptionsPaneCategory";const g=e=>({box:a.css`
      border-top: 1px solid ${e.colors.border.weak};
    `,boxNestedExpanded:a.css`
      margin-bottom: ${e.spacing(2)};
    `,title:a.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      font-weight: ${e.typography.fontWeightMedium};
      margin: 0;
    `,header:a.css`
      display: flex;
      cursor: pointer;
      align-items: baseline;
      padding: ${e.spacing(.5)};
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightMedium};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    `,headerExpanded:a.css`
      color: ${e.colors.text.primary};
    `,headerNested:a.css`
      padding: ${e.spacing(.5,0,.5,0)};
    `,body:a.css`
      padding: ${e.spacing(1,2,1,4)};
    `,bodyNested:a.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${e.colors.border.weak};
      }
    `}),m=e=>`${c.jy}.optionGroup[${e}]`},35327:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});n(68404);var a=n(37812),s=n(45916);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class r{constructor(e){i(this,"items",[]),i(this,"categories",[]),i(this,"parent",void 0),this.props=e}addItem(e){return e.parent=this,this.items.push(e),this}addCategory(e){return e.props.isNested=!0,e.parent=this,this.categories.push(e),this}getCategory(e){let t=this.categories.find((t=>t.props.id===e));return t||(t=new r({title:e,id:e}),this.addCategory(t),t)}render(e){return this.props.customRender?this.props.customRender():(0,s.jsxs)(a.u,Object.assign({},this.props,{children:[this.items.map((t=>t.render(e))),this.categories.map((t=>t.render(e)))]}),this.props.title)}}},90318:(e,t,n)=>{"use strict";n.d(t,{a:()=>u});n(68404);var a=n(9575),s=n.n(a),i=n(16695),r=n(3490),o=n(36636),l=n(45916);function d(e){let{overrides:t}=e;const n=(0,r.useStyles2)(c);return(0,l.jsx)("div",{className:n.wrapper,children:t.map(((e,t)=>(0,l.jsx)(r.Tooltip,{content:e.tooltip,placement:"top",children:(0,l.jsx)("div",{"aria-label":e.description,className:n[e.type]})},t.toString())))})}const c=e=>{const t={width:8,height:8,borderRadius:"50%",marginLeft:e.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,o.css)({display:"flex"}),rule:(0,o.css)(Object.assign({},t,{backgroundColor:e.colors.primary.main})),data:(0,o.css)(Object.assign({},t,{backgroundColor:e.colors.warning.main}))}};class u{constructor(e){var t,n,a;a=void 0,(n="parent")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.props=e}getLabel(e){const{title:t,description:n,overrides:a}=this.props;if(!e)return this.parent.props.title!==t||null!=a&&a.length?(0,l.jsxs)(r.Label,{description:n,children:[t,a&&a.length>0&&(0,l.jsx)(d,{overrides:a})]}):null;const s=[];return this.parent.parent&&s.push(this.highlightWord(this.parent.parent.props.title,e)),this.parent.props.title!==t&&s.push(this.highlightWord(this.parent.props.title,e)),(0,l.jsxs)(r.Label,{description:n&&this.highlightWord(n,e),category:s,children:[this.highlightWord(t,e),a&&a.length>0&&(0,l.jsx)(d,{overrides:a})]})}highlightWord(e,t){return(0,l.jsx)(s(),{textToHighlight:e,searchWords:[t],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:e}=this.props;e&&e.length}render(e){const{title:t,description:n,render:a,showIf:s,skipField:o}=this.props,d=`${this.parent.props.id} ${t}`;return s&&!s()?null:o?a():(0,l.jsx)(r.Field,{label:this.getLabel(e),description:n,"aria-label":i.wl.components.PanelEditor.OptionsPane.fieldLabel(d),children:a()},d)}}},30090:(e,t,n)=>{"use strict";n.d(t,{HZ:()=>g,AL:()=>p});var a=n(82897),s=(n(68404),n(19151)),i=n(7929),r=n(35327),o=n(90318);const l="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",d="An override rule exists for this property";function c(e,t,n){const s=[];if(n)for(const t of n)for(const n of t.fields){if(null!=(0,a.get)(n.config,e.path)){s.push({type:"data",description:l,tooltip:l});break}}return t.overrides.some((t=>t.properties.some((t=>t.id===e.id))))&&s.push({type:"rule",description:d,tooltip:d}),s}var u=n(64593),h=n(45916);function p(e){const{plugin:t,panel:n,onPanelOptionsChanged:s,onFieldConfigsChange:l,data:d,dashboard:p,instanceState:m}=e,f=n.getOptions(),v=n.fieldConfig,b={},x=function(e){var t;let{data:n,replaceVariables:a,options:s,eventBus:r,instanceState:o}=e;const l=null!==(t=null==n?void 0:n.series)&&void 0!==t?t:[];return{data:l,replaceVariables:a,options:s,eventBus:r,getSuggestions:e=>(0,i.PW)(l,e),instanceState:o}}({data:d,replaceVariables:n.replaceVariables,options:f,eventBus:p.events,instanceState:m}),y=e=>{var n;const a=null!==(n=e&&e[0])&&void 0!==n?n:`${t.meta.name}`,s=b[a];return s||(b[a]=new r.j({title:a,id:a}))},w={getValue:e=>(0,a.get)(f,e),onChange:(e,t)=>{const n=(0,u.hs)(f,e,t);s(n)}};g(t.getPanelOptionsSupplier(),w,y,x);for(const e of t.fieldConfigRegistry.list()){if(e.isCustom&&e.showIf&&!e.showIf(v.defaults.custom,null==d?void 0:d.series))continue;if(e.hideFromDefaults)continue;const t=y(e.category),n=e.editor,s=v.defaults,i=e.isCustom?s.custom?(0,a.get)(s.custom,e.path):void 0:(0,a.get)(s,e.path);e.getItemsCount&&(t.props.itemsCount=e.getItemsCount(i)),t.addItem(new o.a({title:e.name,description:e.description,overrides:c(e,v,null==d?void 0:d.series),render:function(){return(0,h.jsx)(n,{value:i,onChange:t=>{l((0,u.uJ)(v,e.path,t,e.isCustom))},item:e,context:x,id:e.id})}}))}return Object.values(b)}function g(e,t,n,a,i){const r=new s.rt;e(r,a);for(const e of r.getItems()){var l,d;if(e.showIf&&!e.showIf(a.options,a.data))continue;let r=i;if(r?null!==(l=e.category)&&void 0!==l&&null!==(d=l[0])&&void 0!==d&&d.length&&(r=r.getCategory(e.category[0])):r=n(e.category),(0,s.j)(e)){const s=e.getNestedValueAccess(t),i=s.getContext?s.getContext(a):Object.assign({},a,{options:t.getValue(e.path)});g(e.getBuilder(),s,n,i,r);continue}const c=e.editor;r.addItem(new o.a({title:e.name,description:e.description,render:function(){return(0,h.jsx)(c,{value:t.getValue(e.path),onChange:n=>{t.onChange(e.path,n)},item:e,context:a,id:e.id})}}))}}},81300:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>u,K9:()=>m,OT:()=>v,ZP:()=>b,g_:()=>f,jy:()=>l,my:()=>g,yi:()=>p});var a=n(35140),s=n(43215),i=n(17421),r=n(28283),o=n(35943);const l="grafana.dashboard.editor.ui",d={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:o.d1.Fill},c=(0,a.oM)({name:"panelEditor",initialState:(()=>{const e=i.Z.getObject(l,d);let t=Object.assign({},e);return"string"==typeof e.topPaneSize&&(t=Object.assign({},e,{topPaneSize:parseFloat(e.topPaneSize)/100})),{getPanel:()=>new r.r({}),getSourcePanel:()=>new r.r({}),getData:()=>({state:s.LoadingState.NotStarted,series:[],timeRange:(0,s.getDefaultTimeRange)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:Object.assign({},d,t)}})(),reducers:{updateEditorInitState:(e,t)=>{e.getPanel=()=>t.payload.panel,e.getSourcePanel=()=>t.payload.sourcePanel,e.initDone=!0,e.isOpen=!0,e.shouldDiscardChanges=!1},setEditorPanelData:(e,t)=>{e.getData=()=>t.payload},setDiscardChanges:(e,t)=>{e.shouldDiscardChanges=t.payload},setPanelEditorUIState:(e,t)=>{e.ui=Object.assign({},e.ui,t.payload),!e.ui.isPanelOptionsVisible&&e.isVizPickerOpen&&(e.isVizPickerOpen=!1)},toggleVizPicker:(e,t)=>{e.isVizPickerOpen=t.payload,e.isVizPickerOpen&&(e.ui.isPanelOptionsVisible=!0)},toggleTableView(e){e.tableViewEnabled=!e.tableViewEnabled},closeEditor:e=>{e.isOpen=!1,e.initDone=!1,e.isVizPickerOpen=!1,e.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:h,setDiscardChanges:p,closeEditor:g,setPanelEditorUIState:m,toggleVizPicker:f,toggleTableView:v}=c.actions,b={panelEditor:c.reducer}},35943:(e,t,n)=>{"use strict";let a,s,i;n.d(t,{Ip:()=>a,Ok:()=>o,d1:()=>s,d7:()=>r}),function(e){e.Query="query",e.Transform="transform",e.Visualize="visualize",e.Alert="alert"}(a||(a={})),function(e){e[e.Fill=0]="Fill",e[e.Fit=1]="Fit",e[e.Exact=2]="Exact"}(s||(s={})),function(e){e[e.Off=0]="Off",e[e.Table=1]="Table"}(i||(i={}));const r=[{value:s.Fill,label:"Fill",description:"Use all available space"},{value:s.Exact,label:"Actual",description:"Make same size as on the dashboard"}];i.Off,i.Table;let o;!function(e){e[e.Visualizations=0]="Visualizations",e[e.LibraryPanels=1]="LibraryPanels",e[e.Suggestions=2]="Suggestions"}(o||(o={}))},64593:(e,t,n)=>{"use strict";n.d(t,{hs:()=>d,jF:()=>r,sY:()=>o,uJ:()=>l});var a=n(82897),s=n(65747),i=n(35943);function r(e,t,n,a){if(e===i.d1.Fill)return{width:t,height:n};const r=(window.innerWidth-60-4*s.hD)/s.cz*a.gridPos.w,o=s.K3*a.gridPos.h+48,l=Math.min(t/r,n/o);return r<=t&&o<=n?{width:r,height:o}:{width:r*l,height:o*l}}function o(e){return!1===(null==e?void 0:e.meta.skipDataQuery)}const l=(e,t,n,s)=>{let i=Object.assign({},e.defaults);const r=null==n||""===n;return s?i.custom?i.custom=r?(0,a.omit)(i.custom,t):d(i.custom,t,n):r||(i.custom=d(i.custom,t,n)):i=r?(0,a.omit)(i,t):d(i,t,n),Object.assign({},e,{defaults:i})};function d(e,t,n){const a=Array.isArray(t)?t:t.split("."),s=a.shift();if(s.endsWith("]")){const t=s.lastIndexOf("["),i=+s.substring(t+1,s.length-1),r=s.substring(0,t);let o=e[r];const l=Array.isArray(o)?[...o]:[];return a.length&&(o=l[i],null!=o&&"object"==typeof o||(o={}),n=d(o,a,n)),l[i]=n,Object.assign({},e,{[r]:l})}if(!a.length)return Object.assign({},e,{[s]:n});let i=e[s];return null!=i&&"object"==typeof i||(i={}),Object.assign({},e,{[s]:d(i,a,n)})}},12973:(e,t,n)=>{"use strict";n.d(t,{i:()=>o,t:()=>l});n(68404);var a=n(16695),s=n(3490),i=n(72968),r=n(45916);const o=e=>{let{dashboard:t,onSaveSuccess:n}=e;return(0,r.jsx)(s.ModalsController,{children:e=>{let{showModal:o,hideModal:l}=e;return(0,r.jsx)(s.Button,{onClick:()=>{o(i.d,{dashboard:t,onSaveSuccess:n,onDismiss:l})},"aria-label":a.wl.pages.Dashboard.Settings.General.saveDashBoard,children:"Save dashboard"})}})},l=e=>{let{dashboard:t,onSaveSuccess:n,variant:o}=e;return(0,r.jsx)(s.ModalsController,{children:e=>{let{showModal:l,hideModal:d}=e;return(0,r.jsx)(s.FullWidthButtonContainer,{children:(0,r.jsx)(s.Button,{onClick:()=>{l(i.d,{dashboard:t,onSaveSuccess:n,onDismiss:d,isCopy:!0})},variant:o,"aria-label":a.wl.pages.Dashboard.Settings.General.saveAsDashBoard,children:"Save As..."})})}})}},72968:(e,t,n)=>{"use strict";n.d(t,{d:()=>de});var a,s,i,r=n(68404),o=n(17614),l=n(90923),d=n(3490),c=n(28659),u=n(2667),h=n(36636),p=n(80001),g=n(67605),m=n(45916);const f=e=>{let{diff:t,oldValue:n,newValue:r}=e;const l=(0,d.useStyles2)(v),c=(0,o.Z)((async()=>{const e=JSON.stringify(null!=n?n:{},null,2),a=JSON.stringify(null!=r?r:{},null,2);let s;const i=[];let o=0;if(t)for(const[e,n]of Object.entries(t)){const t=(0,m.jsx)(p.B,{diffs:n,title:e},e);"schemaVersion"===e?s=t:i.push(t),o+=n.length}return{schemaChange:s,diffs:i,count:o,showDiffs:o<15,jsonView:(0,m.jsx)(g.Z,{oldValue:e,newValue:a})}}),[t,n,r]),{value:u}=c;return u&&n?u.count<1?s||(s=(0,m.jsx)("div",{children:"No changes in this dashboard"})):(0,m.jsxs)("div",{children:[u.schemaChange&&(0,m.jsx)("div",{className:l.spacer,children:u.schemaChange}),u.showDiffs&&(0,m.jsx)("div",{className:l.spacer,children:u.diffs}),i||(i=(0,m.jsx)("h4",{children:"JSON Model"})),u.jsonView]}):a||(a=(0,m.jsx)(d.Spinner,{}))},v=e=>({spacer:h.css`
    margin-bottom: ${e.v1.spacing.xl};
  `});var b=n(12973),x=n(18745),y=n(33554),w=n(43215),j=n(5831),S=n(58257),C=n(98163),k=n(56501),T=n(85189),I=n(21169);const O=e=>{const[t,n]=(0,y.default)((async(e,t,n)=>await(async(e,t,n)=>{let a=t.folderId;var s;void 0===a&&(a=null!==(s=n.meta.folderId)&&void 0!==s?s:e.folderId);const i=await(0,T.uC)(Object.assign({},t,{folderId:a,dashboard:e}));return await C.Vt.fetchUserPermissions(),i})(e,t,n)),[]),a=(0,x.useDispatch)(),s=(0,S.iG)();return(0,r.useEffect)((()=>{var n;t.error&&s.error(null!==(n=t.error.message)&&void 0!==n?n:"Error saving dashboard");if(t.value){e.version=t.value.version,e.clearUnsavedChanges(),j.Z.publish(new I.Jd),s.success("Dashboard saved"),(0,l.reportInteraction)("Dashboard "+(e.id?"saved":"created"),{name:e.title,url:t.value.url});const n=l.locationService.getLocation().pathname,i=w.locationUtil.stripBaseFromUrl(t.value.url);i!==n&&setTimeout((()=>l.locationService.replace(i))),e.meta.isStarred&&a((0,k.gd)({id:e.uid,title:e.title,url:i}))}}),[e,t,s,a]),{state:t,onDashboardSave:n}};var N,F,D,P;const A=e=>{let{dashboard:t,dashboardSaveModel:n,error:a,onDismiss:s}=e;const{onDashboardSave:i}=O(t);return(0,r.useEffect)((()=>{a.data&&R(a.data.status)&&(a.isHandled=!0)}),[a]),(0,m.jsxs)(m.Fragment,{children:[a.data&&"version-mismatch"===a.data.status&&(0,m.jsx)(d.ConfirmModal,{isOpen:!0,title:"Conflict",body:N||(N=(0,m.jsxs)("div",{children:["Someone else has updated this dashboard ",(0,m.jsx)("br",{})," ",(0,m.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await i(n,{overwrite:!0},t),s()},onDismiss:s}),a.data&&"name-exists"===a.data.status&&(0,m.jsx)(d.ConfirmModal,{isOpen:!0,title:"Conflict",body:F||(F=(0,m.jsxs)("div",{children:["A dashboard with the same name in selected folder already exists. ",(0,m.jsx)("br",{}),(0,m.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await i(n,{overwrite:!0},t),s()},onDismiss:s}),a.data&&"plugin-dashboard"===a.data.status&&(0,m.jsx)(M,{dashboard:t,onDismiss:s})]})},M=e=>{let{onDismiss:t,dashboard:n}=e;const a=(0,d.useTheme)(),{onDashboardSave:s}=O(n),i=$(a);return(0,m.jsxs)(d.Modal,{className:i.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:t,children:[(0,m.jsxs)("div",{className:i.modalText,children:["Your changes will be lost when you update the plugin.",D||(D=(0,m.jsx)("br",{})),P||(P=(0,m.jsxs)("small",{children:["Use ",(0,m.jsx)("strong",{children:"Save As"})," to create custom version."]}))]}),(0,m.jsxs)(d.Modal.ButtonRow,{children:[(0,m.jsx)(d.Button,{variant:"secondary",onClick:t,fill:"outline",children:"Cancel"}),(0,m.jsx)(b.t,{dashboard:n,onSaveSuccess:t}),(0,m.jsx)(d.Button,{variant:"destructive",onClick:async()=>{await s(n.getSaveModelClone(),{overwrite:!0},n),t()},children:"Overwrite"})]})]})},R=e=>{switch(e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},$=(0,d.stylesFactory)((e=>({modal:h.css`
    width: 500px;
  `,modalText:h.css`
    font-size: ${e.typography.heading.h4};
    color: ${e.colors.link};
    margin-bottom: calc(${e.spacing.d} * 2);
    padding-top: ${e.spacing.d};
  `,modalButtonRow:h.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${e.spacing.d};
    }
  `})));var L,E=n(95513),V=n(42235);const B=["ref"];const z=e=>{var t;let{dashboard:n,isNew:a,onSubmit:s,onCancel:i,onSuccess:r}=e;const o={title:a?n.title:`${n.title} Copy`,$folder:{id:n.meta.folderId,title:n.meta.folderTitle},copyTags:!1};return(0,m.jsx)(d.Form,{defaultValues:o,onSubmit:async e=>{if(!s)return;const t=(e=>{const t=e.getSaveModelClone();return t.id=null,t.uid="",t.title+=" Copy",t.editable=!0,e.id>0&&t.panels.forEach((e=>{"graph"===e.type&&e.alert&&delete e.thresholds,delete e.alert})),delete t.autoUpdate,t})(n);t.title=e.title,e.copyTags||(t.tags=[]);"success"===(await s(t,{folderId:e.$folder.id},n)).status&&r()},children:e=>{var s;let{register:r,control:o,errors:l,getValues:c}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Field,{label:"Dashboard name",invalid:!!l.title,error:null===(s=l.title)||void 0===s?void 0:s.message,children:(0,m.jsx)(d.Input,Object.assign({},r("title",{validate:(u=c,async e=>{var t;if(e&&e===(null===(t=u().$folder.title)||void 0===t?void 0:t.trim()))return"Dashboard name cannot be the same as folder name";try{return await V.t.validateNewDashboardName(u().$folder.id,e),!0}catch(e){return e instanceof Error?e.message:"Dashboard name is invalid"}})}),{"aria-label":"Save dashboard title field",autoFocus:!0}))}),(0,m.jsx)(d.Field,{label:"Folder",children:(0,m.jsx)(d.InputControl,{render:e=>{let{}=e,t=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e.field,B);return(0,m.jsx)(E.E,Object.assign({},t,{dashboardId:n.id,initialFolderId:n.meta.folderId,initialTitle:n.meta.folderTitle,enableCreateNew:!0}))},control:o,name:"$folder"})}),!a&&(0,m.jsx)(d.Field,{label:"Copy tags",children:(0,m.jsx)(d.Switch,Object.assign({},r("copyTags")))}),t||(t=(0,m.jsxs)(d.HorizontalGroup,{children:[(0,m.jsx)(d.Button,{type:"button",variant:"secondary",onClick:i,fill:"outline",children:"Cancel"}),L||(L=(0,m.jsx)(d.Button,{type:"submit","aria-label":"Save dashboard button",children:"Save"}))]}))]});var u}})};var _,U=n(16695),H=n(8072);const W=e=>{var t;let{dashboard:n,saveModel:a,options:s,onSubmit:i,onCancel:o,onSuccess:l,onOptionsChange:c}=e;const u=(0,r.useMemo)((()=>n.hasTimeChanged()),[n]),h=(0,r.useMemo)((()=>n.hasVariableValuesChanged()),[n]),[p,g]=(0,r.useState)(!1);return(0,m.jsx)(d.Form,{onSubmit:async e=>{if(!i)return;g(!0),s=Object.assign({},s,{message:e.message});"success"===(await i(a.clone,s,n)).status?(s.saveVariables&&n.resetOriginalVariables(),s.saveTimerange&&n.resetOriginalTime(),l()):g(!1)},children:e=>{let{register:n,errors:i}=e;const r=n("message");return(0,m.jsxs)(H.Stack,{direction:"column",gap:2,children:[u&&(0,m.jsx)(d.Checkbox,{checked:!!s.saveTimerange,onChange:()=>c(Object.assign({},s,{saveTimerange:!s.saveTimerange})),label:"Save current time range as dashboard default","aria-label":U.wl.pages.SaveDashboardModal.saveTimerange}),h&&(0,m.jsx)(d.Checkbox,{checked:!!s.saveVariables,onChange:()=>c(Object.assign({},s,{saveVariables:!s.saveVariables})),label:"Save current variable values as dashboard default","aria-label":U.wl.pages.SaveDashboardModal.saveVariables}),(0,m.jsx)(d.TextArea,Object.assign({},r,{"aria-label":"message",value:s.message,onChange:e=>{c(Object.assign({},s,{message:e.currentTarget.value})),r.onChange(e)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5})),(0,m.jsxs)(H.Stack,{alignItems:"center",children:[t||(t=(0,m.jsx)(d.Button,{variant:"secondary",onClick:o,fill:"outline",children:"Cancel"})),(0,m.jsx)(d.Button,{type:"submit",disabled:!a.hasChanges,icon:p?"fa fa-spinner":void 0,"aria-label":U.wl.pages.SaveDashboardModal.save,children:"Save"}),!a.hasChanges&&(_||(_=(0,m.jsx)("div",{children:"No changes to save"})))]})]})}})};var q,Z,G,K,Q,J=n(3574);const Y=e=>{let{dashboard:t,onCancel:n}=e;const a=(0,d.useTheme)(),[s,i]=(0,r.useState)((()=>{const e=t.getSaveModelClone();return delete e.id,JSON.stringify(e,null,2)})),o=(0,r.useCallback)((()=>{const e=new Blob([s],{type:"application/json;charset=utf-8"});(0,J.saveAs)(e,t.title+"-"+(new Date).getTime()+".json")}),[t.title,s]),l=X(a);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(H.Stack,{direction:"column",gap:2,children:[(0,m.jsxs)("div",{children:["This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",q||(q=(0,m.jsx)("br",{})),Z||(Z=(0,m.jsxs)("i",{children:["See"," ",(0,m.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),G||(G=(0,m.jsx)("br",{}))," ",K||(K=(0,m.jsx)("br",{})),Q||(Q=(0,m.jsx)("strong",{children:"File path: "}))," ",t.meta.provisionedExternalId]}),(0,m.jsx)(d.TextArea,{spellCheck:!1,value:s,onChange:e=>{i(e.currentTarget.value)},className:l.json}),(0,m.jsxs)(d.HorizontalGroup,{children:[(0,m.jsx)(d.Button,{variant:"secondary",onClick:n,fill:"outline",children:"Cancel"}),(0,m.jsx)(d.ClipboardButton,{icon:"copy",getText:()=>s,children:"Copy JSON to clipboard"}),(0,m.jsx)(d.Button,{type:"submit",onClick:o,children:"Save JSON to file"})]})]})})},X=(0,d.stylesFactory)((e=>({json:h.css`
      height: 400px;
      width: 100%;
      overflow: auto;
      resize: none;
      font-family: monospace;
    `})));var ee,te,ne,ae,se,ie=n(13868),re=n(57545);function oe(e){var t,n,a,s;const{dashboard:i,saveModel:c,onSubmit:u,onCancel:h,onSuccess:p,onOptionsChange:g,isNew:f,isCopy:v}=e,b=(0,r.useMemo)((()=>i.hasTimeChanged()),[i]),x=(0,r.useMemo)((()=>i.hasVariableValuesChanged()),[i]),[y,w]=(0,r.useState)(!1),[j,S]=(0,r.useState)(),[C,k]=(0,r.useState)(i.uid),[T,I]=(0,r.useState)(re.c.Save),O=(0,r.useMemo)((()=>{switch(T){case re.c.PR:return"Create PR";case re.c.Push:return"Push"}return console.log("???",T),"Save"}),[T]),N=(0,o.Z)((async()=>{var e,t;const n=await(0,ie.$)().getOptions(i.uid);return I(null!==(e=null===(t=n.workflows[0])||void 0===t?void 0:t.value)&&void 0!==e?e:re.c.Save),n}),[i.uid]);if(N.error)return ee||(ee=(0,m.jsx)("div",{children:"Error loading workflows"}));if(N.loading||!N.value)return te||(te=(0,m.jsx)(d.Spinner,{}));if(j)return(0,m.jsxs)("div",{children:[j.url&&(0,m.jsxs)("div",{children:[ne||(ne=(0,m.jsx)("h2",{children:"View pull request"})),(0,m.jsx)("a",{href:j.url,children:j.url})]}),(0,m.jsx)("pre",{children:JSON.stringify(j)}),(0,m.jsx)(d.HorizontalGroup,{children:(0,m.jsx)(d.Button,{variant:"secondary",onClick:h,children:"Close"})})]});let F=e.options;const D=null!==(t=null===(n=N.value)||void 0===n?void 0:n.workflows)&&void 0!==t?t:[],P=c.hasChanges||f||v;return(0,m.jsx)(d.Form,{onSubmit:async e=>{if(!u)return;w(!0);let t=c.clone.uid;(f||v)&&(t=C,t.endsWith("-dash.json")||(t+="-dash.json"));const n=await(0,ie.$)().write(t,{body:c.clone,kind:"dashboard",title:e.title,message:e.message,workflow:T});console.log("GOT",n),200===n.code?(F.saveVariables&&i.resetOriginalVariables(),F.saveTimerange&&i.resetOriginalTime(),n.pending||(p(),(f||v)&&l.locationService.push(`/g/${t}`))):w(!1),S(n)},children:e=>{let{register:t,errors:n}=e;return(0,m.jsxs)(H.Stack,{direction:"column",gap:1,children:[(0,m.jsxs)(H.Stack,{direction:"column",gap:1,children:[b&&(0,m.jsx)(d.Checkbox,{checked:!!F.saveTimerange,onChange:()=>g(Object.assign({},F,{saveTimerange:!F.saveTimerange})),label:"Save current time range as dashboard default","aria-label":U.wl.pages.SaveDashboardModal.saveTimerange}),x&&(0,m.jsx)(d.Checkbox,{checked:!!F.saveVariables,onChange:()=>g(Object.assign({},F,{saveVariables:!F.saveVariables})),label:"Save current variable values as dashboard default","aria-label":U.wl.pages.SaveDashboardModal.saveVariables})]}),(f||v)&&(0,m.jsx)(d.Field,{label:"Path",children:(0,m.jsx)(d.Input,{value:null!=C?C:"",required:!0,autoFocus:!0,placeholder:"Full path (todo, help validate)",onChange:e=>k(e.currentTarget.value)})}),!le(N.value)&&(a||(a=(0,m.jsx)(d.Field,{label:"Workflow",children:(0,m.jsx)(d.RadioButtonGroup,{value:T,options:D,onChange:I})}))),T===re.c.PR&&(0,m.jsx)(d.Field,{label:"PR Title",children:(0,m.jsx)(d.Input,Object.assign({},t("title"),{required:!0,placeholder:"Enter a PR title",autoFocus:!0}))}),(0,m.jsx)(d.Field,{label:"Message",children:(0,m.jsx)(d.TextArea,Object.assign({},t("message"),{placeholder:"Add a note to describe your changes.",rows:5}))}),(0,m.jsxs)(d.HorizontalGroup,{children:[s||(s=(0,m.jsx)(d.Button,{variant:"secondary",onClick:h,fill:"outline",children:"Cancel"})),(0,m.jsx)(d.Button,{type:"submit",disabled:!P,icon:y?"fa fa-spinner":void 0,"aria-label":U.wl.pages.SaveDashboardModal.save,children:O}),!P&&(ae||(ae=(0,m.jsx)("div",{children:"No changes to save"})))]})]})}})}function le(e){return 1===e.workflows.length&&null!=e.workflows.find((e=>e.value===re.c.Save))}const de=e=>{var t,n,a,s;let{dashboard:i,onDismiss:h,onSaveSuccess:p,isCopy:g}=e;const[v,b]=(0,r.useState)({}),x=l.config.featureToggles.dashboardsFromStorage&&i.uid.indexOf("/")>0,y=i.meta.provisioned&&!x,w=0===i.version&&!x,j=(0,o.Z)((async()=>{if(w)return;return(await c.ae.getDashboardByUid(i.uid)).dashboard}),[i,w]),S=(0,r.useMemo)((()=>{const e=i.getSaveModelClone({saveTimerange:Boolean(v.saveTimerange),saveVariables:Boolean(v.saveVariables)});if(!j.value)return{clone:e,diff:{},diffCount:0,hasChanges:!1};const t=JSON.stringify(e,null,2),n=JSON.parse(t),a=(0,u.Q$)(j.value,n);let s=0;for(const e of Object.values(a))s+=e.length;return{clone:e,diff:a,diffCount:s,hasChanges:s>0&&!w}}),[i,j.value,v,w]),[C,k]=(0,r.useState)(!1),{state:T,onDashboardSave:I}=O(i),N=p?()=>{h(),p()}:h;if(T.error)return(0,m.jsx)(A,{error:T.error,dashboard:i,dashboardSaveModel:S.clone,onDismiss:h});let F="Save dashboard";return g?F="Save dashboard copy":y&&(F="Provisioned dashboard"),(0,m.jsx)(d.Drawer,{title:F,onClose:h,width:"40%",subtitle:i.title,tabs:(0,m.jsxs)(d.TabsBar,{children:[(0,m.jsx)(d.Tab,{label:"Details",active:!C,onChangeTab:()=>k(!1)}),S.hasChanges&&(0,m.jsx)(d.Tab,{label:"Changes",active:C,onChangeTab:()=>k(!0),counter:S.diffCount})]}),expandable:!0,scrollableContent:!0,children:C?(0,m.jsx)(f,{diff:S.diff,oldValue:j.value,newValue:S.clone}):T.loading?se||(se=(0,m.jsx)("div",{children:(0,m.jsx)(d.Spinner,{})})):x?t||(t=(0,m.jsx)(oe,{dashboard:i,saveModel:S,onCancel:h,onSuccess:N,onSubmit:I,options:v,onOptionsChange:b,isNew:w,isCopy:g})):w||g?n||(n=(0,m.jsx)(z,{dashboard:i,onCancel:h,onSuccess:N,onSubmit:I,isNew:w})):y?a||(a=(0,m.jsx)(Y,{dashboard:i,onCancel:h,onSuccess:N})):s||(s=(0,m.jsx)(W,{dashboard:i,saveModel:S,onCancel:h,onSuccess:N,onSubmit:I,options:v,onOptionsChange:b}))})}},30969:(e,t,n)=>{"use strict";n.d(t,{V8:()=>Te});var a,s=n(68404),i=n(90923),r=n(3490),o=n(78837),l=n(98163),d=n(27777),c=n(58648),u=n(45916);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=[{label:"Current",value:"current"},{label:"Dark",value:"dark"},{label:"Light",value:"light"}];class g extends s.PureComponent{constructor(e){super(e),h(this,"buildIframeHtml",(()=>{const{panel:e,dashboard:t}=this.props,{useCurrentTimeRange:n,selectedTheme:a}=this.state,s=(0,c.S_)(n,t.uid,a,e);this.setState({iframeHtml:s})})),h(this,"onIframeHtmlChange",(e=>{this.setState({iframeHtml:e.currentTarget.value})})),h(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)})),h(this,"onThemeChange",(e=>{this.setState({selectedTheme:e},this.buildIframeHtml)})),h(this,"getIframeHtml",(()=>this.state.iframeHtml)),this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,i.reportInteraction)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:e,selectedTheme:t,iframeHtml:n}=this.state,s=!!this.props.dashboard&&"now"===this.props.dashboard.time.to;return(0,u.jsxs)(u.Fragment,{children:[a||(a=(0,u.jsx)("p",{className:"share-modal-info-text",children:"Generate HTML for embedding an iframe with this panel."})),(0,u.jsx)(r.Field,{label:"Current time range",description:s?"Transforms the current relative time range to an absolute time range":"",children:(0,u.jsx)(r.Switch,{id:"share-current-time-range",value:e,onChange:this.onUseCurrentTimeRangeChange})}),(0,u.jsx)(r.Field,{label:"Theme",children:(0,u.jsx)(r.RadioButtonGroup,{options:p,value:t,onChange:this.onThemeChange})}),(0,u.jsx)(r.Field,{label:"Embed HTML",description:"The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.",children:(0,u.jsx)(r.TextArea,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:n,onChange:this.onIframeHtmlChange})}),(0,u.jsx)(r.Modal.ButtonRow,{children:(0,u.jsx)(r.ClipboardButton,{icon:"copy",variant:"primary",getText:this.getIframeHtml,children:"Copy to clipboard"})})]})}}var m,f,v,b,x=n(25235),y=n(19309),w=n(3574),j=n(28659),S=n(38434),C=n(21169),k=n(87723);function T(e){let{json:t,onDismiss:n}=e;const a=(0,s.useCallback)((()=>t),[t]);return(0,u.jsxs)(r.Modal,{title:"JSON",onDismiss:n,onClickBackdrop:n,isOpen:!0,children:[(0,u.jsx)(k.Z,{disableHeight:!0,children:e=>{let{width:n}=e;return(0,u.jsx)(r.CodeEditor,{value:t,language:"json",showMiniMap:!1,height:"500px",width:n})}}),(0,u.jsx)(r.Modal.ButtonRow,{children:(0,u.jsx)(r.ClipboardButton,{icon:"copy",getText:a,children:"Copy to Clipboard"})})]})}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O extends s.PureComponent{constructor(e){super(e),I(this,"exporter",void 0),I(this,"onShareExternallyChange",(()=>{this.setState({shareExternally:!this.state.shareExternally})})),I(this,"onTrimDefaultsChange",(()=>{this.setState({trimDefaults:!this.state.trimDefaults})})),I(this,"onSaveAsFile",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:n}=this.state;t?this.exporter.makeExportable(e).then((e=>{n?(0,j.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e)})):n?(0,j.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e.getSaveModelClone())})),I(this,"onViewJson",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:n}=this.state;t?this.exporter.makeExportable(e).then((e=>{n?(0,j.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e)})):n?(0,j.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e.getSaveModelClone())})),I(this,"openSaveAsDialog",(e=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json;charset=utf-8"}),a=(new Date).getTime();(0,w.saveAs)(n,`${e.title}-${a}.json`)})),I(this,"openJsonModal",(e=>{var t,n;l.h$.publish(new C.Dn({props:{json:JSON.stringify(e,null,2)},component:T})),null===(t=(n=this.props).onDismiss)||void 0===t||t.call(n)})),this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new S.E}componentDidMount(){(0,i.reportInteraction)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:n}=this.state,a=y.ag._({id:"share-modal.export.share-externally-label",message:"Export for sharing externally"}),s=y.ag._({id:"share-modal.export.share-default-label",message:"Export with default values removed"});return(0,u.jsxs)(u.Fragment,{children:[m||(m=(0,u.jsx)("p",{className:"share-modal-info-text",children:(0,u.jsx)(x.cC,{id:"share-modal.export.info-text"})})),(0,u.jsx)(r.Field,{label:a,children:(0,u.jsx)(r.Switch,{id:"share-externally-toggle",value:t,onChange:this.onShareExternallyChange})}),i.config.featureToggles.trimDefaults&&(0,u.jsx)(r.Field,{label:s,children:(0,u.jsx)(r.Switch,{id:"trim-defaults-toggle",value:n,onChange:this.onTrimDefaultsChange})}),(0,u.jsxs)(r.Modal.ButtonRow,{children:[(0,u.jsx)(r.Button,{variant:"secondary",onClick:e,fill:"outline",children:f||(f=(0,u.jsx)(x.cC,{id:"share-modal.export.cancel-button"}))}),(0,u.jsx)(r.Button,{variant:"secondary",onClick:this.onViewJson,children:v||(v=(0,u.jsx)(x.cC,{id:"share-modal.export.view-button"}))}),(0,u.jsx)(r.Button,{variant:"primary",onClick:this.onSaveAsFile,children:b||(b=(0,u.jsx)(x.cC,{id:"share-modal.export.save-button"}))})]})]})}}var N,F=n(52595);const D=e=>{let{panel:t,initialFolderId:n,onDismiss:a}=e;return(0,s.useEffect)((()=>{(0,i.reportInteraction)("grafana_dashboards_library_panel_share_viewed")}),[]),t?(0,u.jsxs)(u.Fragment,{children:[N||(N=(0,u.jsx)("p",{className:"share-modal-info-text",children:"Create library panel."})),(0,u.jsx)(F.T,{panel:t,initialFolderId:n,onDismiss:a})]}):null};var P,A,M,R,$,L,E=n(16695);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class B extends s.PureComponent{constructor(e){super(e),V(this,"buildUrl",(async()=>{const{panel:e,dashboard:t}=this.props,{useCurrentTimeRange:n,useShortUrl:a,selectedTheme:s}=this.state,i=await(0,c.bl)(n,s,e,a),r=(0,c.Sc)(n,t.uid,s,e);this.setState({shareUrl:i,imageUrl:r})})),V(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})})),V(this,"onUrlShorten",(()=>{this.setState({useShortUrl:!this.state.useShortUrl})})),V(this,"onThemeChange",(e=>{this.setState({selectedTheme:e})})),V(this,"getShareUrl",(()=>this.state.shareUrl)),this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,i.reportInteraction)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(e,t){const{useCurrentTimeRange:n,useShortUrl:a,selectedTheme:s}=this.state;t.useCurrentTimeRange===n&&t.selectedTheme===s&&t.useShortUrl===a||this.buildUrl()}render(){const{panel:e,dashboard:t}=this.props,n=!!t&&"now"===t.time.to,{useCurrentTimeRange:a,useShortUrl:s,selectedTheme:i,shareUrl:l,imageUrl:d}=this.state,c=E.wl.pages.SharePanelModal,h=Boolean(t.id),p=y.ag._({id:"share-modal.link.time-range-label",message:"Lock time range"}),g=y.ag._({id:"share-modal.link.time-range-description",message:"Transforms the current relative time range to an absolute time range"}),m=y.ag._({id:"share-modal.link.shorten-url",message:"Shorten URL"}),f=y.ag._({id:"share-modal.link.link-url",message:"Link URL"}),v=[{label:y.ag._({id:"share-modal.link.theme-current",message:"Current"}),value:"current"},{label:y.ag._({id:"share-modal.link.theme-dark",message:"Dark"}),value:"dark"},{label:y.ag._({id:"share-modal.link.theme-light",message:"Light"}),value:"light"}];return(0,u.jsxs)(u.Fragment,{children:[P||(P=(0,u.jsx)("p",{className:"share-modal-info-text",children:(0,u.jsx)(x.cC,{id:"share-modal.link.info-text"})})),(0,u.jsxs)(r.FieldSet,{children:[(0,u.jsx)(r.Field,{label:p,description:n?g:"",children:(0,u.jsx)(r.Switch,{id:"share-current-time-range",value:a,onChange:this.onUseCurrentTimeRangeChange})}),(0,u.jsx)(r.Field,{label:y.ag._({id:"share-modal.link.theme",message:"Theme"}),children:(0,u.jsx)(r.RadioButtonGroup,{options:v,value:i,onChange:this.onThemeChange})}),(0,u.jsx)(r.Field,{label:m,children:(0,u.jsx)(r.Switch,{id:"share-shorten-url",value:s,onChange:this.onUrlShorten})}),(0,u.jsx)(r.Field,{label:f,children:(0,u.jsx)(r.Input,{id:"link-url-input",value:l,readOnly:!0,addonAfter:(0,u.jsx)(r.ClipboardButton,{icon:"copy",variant:"primary",getText:this.getShareUrl,children:A||(A=(0,u.jsx)(x.cC,{id:"share-modal.link.copy-link-button"}))})})})]}),e&&o.ZP.rendererAvailable&&(0,u.jsxs)(u.Fragment,{children:[h&&(0,u.jsx)("div",{className:"gf-form",children:(0,u.jsxs)("a",{href:d,target:"_blank",rel:"noreferrer","aria-label":c.linkToRenderedImage,children:[M||(M=(0,u.jsx)(r.Icon,{name:"camera"})),"Â ",R||(R=(0,u.jsx)(x.cC,{id:"share-modal.link.rendered-image"}))]})}),!h&&(0,u.jsx)(r.Alert,{severity:"info",title:y.ag._({id:"share-modal.link.save-alert",message:"Dashboard is not saved"}),bottomSpacing:0,children:$||($=(0,u.jsx)(x.cC,{id:"share-modal.link.save-dashboard"}))})]}),e&&!o.ZP.rendererAvailable&&(0,u.jsx)(r.Alert,{severity:"info",title:y.ag._({id:"share-modal.link.render-alert",message:"Image renderer plugin not installed"}),bottomSpacing:0,children:(0,u.jsx)(x.cC,{id:"share-modal.link.render-instructions",components:{0:L||(L=(0,u.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"}))}})})]})}}var z=n(36537),_=n(58257),U=n(56340);const H=e=>e.length>0,W=e=>""!==e.uid&&void 0!==e.uid,q=e=>`${window.location.origin}/public-dashboards/${e.accessToken}`;var Z,G,K,Q,J,Y,X,ee,te,ne,ae,se,ie,re,oe,le;const de=e=>{const t=e.dashboard.getVariables(),n=E.wl.pages.ShareDashboardModal.PublicDashboard,[a,o]=(0,s.useState)({isEnabled:!1,uid:"",dashboardUid:e.dashboard.uid}),[l,d]=(0,s.useState)({public:!1,datasources:!1,usage:!1});(0,s.useEffect)((()=>{(0,i.reportInteraction)("grafana_dashboards_public_share_viewed"),(async(e,t)=>{const n=`/api/dashboards/uid/${e}/public-config`;t(await(0,i.getBackendSrv)().get(n))})(e.dashboard.uid,o).catch()}),[e.dashboard.uid]),(0,s.useEffect)((()=>{W(a)&&d({public:!0,datasources:!0,usage:!0})}),[a]);const c=(0,s.useCallback)(((e,t)=>{d(Object.assign({},l,{[e]:t}))}),[l]);return(0,u.jsxs)(u.Fragment,{children:[Z||(Z=(0,u.jsx)("p",{children:"Welcome to Grafana public dashboards alpha!"})),H(t)?(0,u.jsx)(r.Alert,{severity:"warning",title:"dashboard cannot be public","data-testid":n.TemplateVariablesWarningAlert,children:"This dashboard cannot be made public because it has template variables"}):(0,u.jsxs)(u.Fragment,{children:[G||(G=(0,u.jsx)("p",{children:"To allow the current dashboard to be published publicly, toggle the switch. For now we do not support template variables or frontend datasources."})),"We'd love your feedback. To share, please comment on this"," ",K||(K=(0,u.jsx)("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:"text-link",children:"github discussion"})),Q||(Q=(0,u.jsx)("hr",{})),(0,u.jsxs)("div",{children:["Before you click Save, please acknowledge the following information: ",J||(J=(0,u.jsx)("br",{})),(0,u.jsxs)(r.FieldSet,{children:[Y||(Y=(0,u.jsx)("br",{})),(0,u.jsx)("div",{children:(0,u.jsx)(r.Checkbox,{label:"Your entire dashboard will be public",value:l.public,disabled:W(a),"data-testid":n.WillBePublicCheckbox,onChange:e=>c("public",e.currentTarget.checked)})}),X||(X=(0,u.jsx)("br",{})),(0,u.jsxs)("div",{children:[(0,u.jsx)(r.Checkbox,{label:"Publishing currently only works with a subset of datasources",value:l.datasources,disabled:W(a),"data-testid":n.LimitedDSCheckbox,onChange:e=>c("datasources",e.currentTarget.checked)}),ee||(ee=(0,u.jsx)(r.LinkButton,{variant:"primary",href:"https://grafana.com/docs/grafana/latest/datasources/",target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:"Learn more about public datasources"}))]}),te||(te=(0,u.jsx)("br",{})),(0,u.jsx)(r.Checkbox,{label:"Making your dashboard public will cause queries to run each time the dashboard is viewed which may increase costs",value:l.usage,disabled:W(a),"data-testid":n.CostIncreaseCheckbox,onChange:e=>c("usage",e.currentTarget.checked)}),ne||(ne=(0,u.jsx)(r.LinkButton,{variant:"primary",href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:"Learn more about query caching"})),ae||(ae=(0,u.jsx)("br",{})),se||(se=(0,u.jsx)("br",{}))]})]}),(0,u.jsxs)("div",{children:[ie||(ie=(0,u.jsx)("h4",{className:"share-modal-info-text",children:"Public Dashboard Configuration"})),(0,u.jsxs)(r.FieldSet,{children:[re||(re=(0,u.jsx)(r.Label,{description:"The public dashboard uses the default time settings of the dashboard",children:"Time Range"})),(0,u.jsxs)("div",{style:{padding:"5px"},children:[(0,u.jsx)(r.Input,{value:e.dashboard.getDefaultTime().from,disabled:!0,addonBefore:(0,u.jsx)("span",{style:{width:"50px",display:"flex",alignItems:"center",padding:"5px"},children:"From:"})}),(0,u.jsx)(r.Input,{value:e.dashboard.getDefaultTime().to,disabled:!0,addonBefore:(0,u.jsx)("span",{style:{width:"50px",display:"flex",alignItems:"center",padding:"5px"},children:"To:"})})]}),oe||(oe=(0,u.jsx)("br",{})),(0,u.jsx)(r.Field,{label:"Enabled",description:"Configures whether current dashboard can be available publicly",children:(0,u.jsx)(r.Switch,{disabled:H(t),"data-testid":n.EnableSwitch,value:null==a?void 0:a.isEnabled,onChange:()=>{(0,i.reportInteraction)("grafana_dashboards_public_enable_clicked",{action:null!=a&&a.isEnabled?"disable":"enable"}),o(Object.assign({},a,{isEnabled:!a.isEnabled}))}})}),W(a)&&a.isEnabled&&(0,u.jsx)(r.Field,{label:"Link URL",children:(0,u.jsx)(r.Input,{value:q(a),readOnly:!0,"data-testid":n.CopyUrlInput,addonAfter:(0,u.jsx)(r.ClipboardButton,{"data-testid":n.CopyUrlButton,variant:"primary",icon:"copy",getText:()=>q(a),children:"Copy"})})})]}),e.dashboard.hasUnsavedChanges()&&(le||(le=(0,u.jsx)(r.Alert,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}))),(0,u.jsx)(r.Button,{disabled:!(l.public&&l.datasources&&l.usage)||e.dashboard.hasUnsavedChanges(),onClick:()=>{(0,i.reportInteraction)("grafana_dashboards_public_create_clicked"),H(t)?(0,U.WI)((0,z.$l)((0,_.t_)("This dashboard cannot be made public because it has template variables"))):(async(e,t,n)=>{const a=`/api/dashboards/uid/${e}/public-config`,s=await(0,i.getBackendSrv)().post(a,t);delete s.orgId,(0,U.WI)((0,z.$l)((0,_.AT)("Dashboard sharing configuration saved"))),n(s)})(e.dashboard.uid,a,o).catch()},"data-testid":n.SaveConfigButton,children:"Save Sharing Configuration"})]})]})]})};var ce,ue,he,pe,ge,me,fe,ve,be,xe=n(75478),ye=n(39665);function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class je extends s.PureComponent{constructor(e){super(e),we(this,"dashboard",void 0),we(this,"expireOptions",void 0),we(this,"createSnapshot",(e=>()=>{const{timeoutSeconds:t}=this.state;this.dashboard.snapshot={timestamp:new Date},e||(this.dashboard.snapshot.originalUrl=window.location.href),this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout((()=>{this.saveSnapshot(this.dashboard,e)}),1e3*t)})),we(this,"saveSnapshot",(async(e,t)=>{const{snapshotExpires:n}=this.state,a=this.dashboard.getSaveModelClone();this.scrubDashboard(a);const s={dashboard:a,name:a.title,expires:n,external:t};try{const e=await(0,i.getBackendSrv)().post("/api/snapshots",s);this.setState({deleteUrl:e.deleteUrl,snapshotUrl:e.url,step:2})}finally{(0,i.reportInteraction)("grafana_dashboards_snapshot_created",{location:t?"raintank":"local"}),this.setState({isLoading:!1})}})),we(this,"scrubDashboard",(e=>{const{panel:t}=this.props,{snapshotName:n}=this.state;e.title=n,e.time=(0,xe.$t)().timeRange(),e.links=[],e.panels.forEach((e=>{e.targets=[],e.links=[],e.datasource=null}));const a=e.annotations.list.filter((e=>e.enable));if(e.annotations.list=a.map((e=>({name:e.name,enable:e.enable,iconColor:e.iconColor,snapshotData:e.snapshotData,type:e.type,builtIn:e.builtIn,hide:e.hide}))),e.getVariables().forEach((e=>{e.query="",e.options=e.current?[e.current]:[],e.refresh=ye.Bd.never})),t){const n=t.getSaveModel();n.gridPos.w=24,n.gridPos.x=0,n.gridPos.y=0,n.gridPos.h=20,e.panels=[n]}delete this.dashboard.snapshot,this.dashboard.forEachPanel((e=>{delete e.snapshotData})),this.dashboard.annotations.list.forEach((e=>{delete e.snapshotData}))})),we(this,"deleteSnapshot",(async()=>{const{deleteUrl:e}=this.state;await(0,i.getBackendSrv)().get(e),this.setState({step:3})})),we(this,"getSnapshotUrl",(()=>this.state.snapshotUrl)),we(this,"onSnapshotNameChange",(e=>{this.setState({snapshotName:e.target.value})})),we(this,"onTimeoutChange",(e=>{this.setState({timeoutSeconds:Number(e.target.value)})})),we(this,"onExpireChange",(e=>{this.setState({selectedExpireOption:e,snapshotExpires:e.value})})),this.dashboard=e.dashboard,this.expireOptions=[{label:y.ag._({id:"share-modal.snapshot.expire-never",message:"Never"}),value:0},{label:y.ag._({id:"share-modal.snapshot.expire-hour",message:"1 Hour"}),value:3600},{label:y.ag._({id:"share-modal.snapshot.expire-day",message:"1 Day"}),value:86400},{label:y.ag._({id:"share-modal.snapshot.expire-week",message:"7 Days"}),value:604800}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:e.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,i.reportInteraction)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const e=await(0,i.getBackendSrv)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:e.externalSnapshotName,externalEnabled:e.externalEnabled})}renderStep1(){const{onDismiss:e}=this.props,{snapshotName:t,selectedExpireOption:n,timeoutSeconds:a,isLoading:s,sharingButtonText:i,externalEnabled:o}=this.state,l=y.ag._({id:"share-modal.snapshot.name",message:"Snapshot name"}),d=y.ag._({id:"share-modal.snapshot.expire",message:"Expire"}),c=y.ag._({id:"share-modal.snapshot.timeout",message:"Timeout (seconds)"}),h=y.ag._({id:"share-modal.snapshot.timeout-description",message:"You might need to configure the timeout value if it takes a long time to collect your dashboard\nmetrics."});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[ce||(ce=(0,u.jsx)("p",{className:"share-modal-info-text",children:(0,u.jsx)(x.cC,{id:"share-modal.snapshot.info-text-1"})})),(0,u.jsx)("p",{className:"share-modal-info-text",children:(0,u.jsx)(x.cC,{id:"share-modal.snapshot.info-text-2",components:{0:ue||(ue=(0,u.jsx)("em",{}))}})})]}),(0,u.jsx)(r.Field,{label:l,children:(0,u.jsx)(r.Input,{id:"snapshot-name-input",width:30,value:t,onChange:this.onSnapshotNameChange})}),(0,u.jsx)(r.Field,{label:d,children:(0,u.jsx)(r.Select,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:n,onChange:this.onExpireChange})}),(0,u.jsx)(r.Field,{label:c,description:h,children:(0,u.jsx)(r.Input,{id:"timeout-input",type:"number",width:21,value:a,onChange:this.onTimeoutChange})}),(0,u.jsxs)(r.Modal.ButtonRow,{children:[(0,u.jsx)(r.Button,{variant:"secondary",onClick:e,fill:"outline",children:he||(he=(0,u.jsx)(x.cC,{id:"share-modal.snapshot.cancel-button"}))}),o&&(0,u.jsx)(r.Button,{variant:"secondary",disabled:s,onClick:this.createSnapshot(!0),children:i}),(0,u.jsx)(r.Button,{variant:"primary",disabled:s,onClick:this.createSnapshot(),children:pe||(pe=(0,u.jsx)(x.cC,{id:"share-modal.snapshot.local-button"}))})]})]})}renderStep2(){const{snapshotUrl:e}=this.state;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.Field,{label:"Snapshot URL",children:(0,u.jsx)(r.Input,{id:"snapshot-url-input",value:e,readOnly:!0,addonAfter:(0,u.jsx)(r.ClipboardButton,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl,children:ge||(ge=(0,u.jsx)(x.cC,{id:"share-modal.snapshot.copy-link-button"}))})})}),(0,u.jsxs)("div",{className:"pull-right",style:{padding:"5px"},children:[me||(me=(0,u.jsx)(x.cC,{id:"share-modal.snapshot.mistake-message"})),"Â ",(0,u.jsx)(r.LinkButton,{fill:"text",target:"_blank",onClick:this.deleteSnapshot,children:fe||(fe=(0,u.jsx)(x.cC,{id:"share-modal.snapshot.delete-button"}))})]})]})}renderStep3(){return ve||(ve=(0,u.jsx)("div",{className:"share-modal-header",children:(0,u.jsx)("p",{className:"share-modal-info-text",children:(0,u.jsx)(x.cC,{id:"share-modal.snapshot.deleted-message"})})}))}render(){const{isLoading:e,step:t}=this.state;return(0,u.jsxs)(u.Fragment,{children:[1===t&&this.renderStep1(),2===t&&this.renderStep2(),3===t&&this.renderStep3(),e&&(be||(be=(0,u.jsx)(r.Spinner,{inline:!0})))]})}}const Se=[],Ce=[];function ke(e){const{panel:t}=e,n=[{label:"Link",value:"link",component:B}];return l.Vt.isSignedIn&&n.push({label:"Snapshot",value:"snapshot",component:je}),t?(n.push({label:"Embed",value:"embed",component:g}),(0,d.V)(t)||n.push({label:"Library panel",value:"library_panel",component:D}),n.push(...Ce)):(n.push({label:"Export",value:"export",component:O}),n.push(...Se)),Boolean(o.vc.featureToggles.publicDashboards)&&n.push({label:"Public Dashboard",value:"share",component:de}),n}class Te extends s.Component{constructor(e){var t,n,a;super(e),a=e=>{this.setState({activeTab:e.value})},(n="onSelectTab")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.state=function(e){const t=ke(e);return{tabs:t,activeTab:t[0].value}}(e)}componentDidMount(){(0,i.reportInteraction)("grafana_dashboards_share_modal_viewed")}getTabs(){return ke(this.props)}getActiveTab(){const{tabs:e,activeTab:t}=this.state;return e.find((e=>e.value===t))}renderTitle(){const{panel:e}=this.props,{activeTab:t}=this.state,n=e?"Share Panel":"Share",a=this.getTabs();return(0,u.jsx)(r.ModalTabsHeader,{title:n,icon:"share-alt",tabs:a,activeTab:t,onChangeTab:this.onSelectTab})}render(){const{dashboard:e,panel:t}=this.props,n=this.getActiveTab().component;return(0,u.jsx)(r.Modal,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss,children:(0,u.jsx)(r.TabContent,{children:(0,u.jsx)(n,{dashboard:e,panel:t,onDismiss:this.props.onDismiss})})})}}},58648:(e,t,n)=>{"use strict";n.d(t,{OS:()=>l,S_:()=>h,Sc:()=>u,bl:()=>d});var a=n(43215),s=n(90923),i=n(74534),r=n(75478);function o(e){let{useCurrentTimeRange:t,selectedTheme:n,panel:a,search:i=window.location.search,range:o=(0,r.$t)().timeRange(),orgId:l=s.config.bootData.user.orgId}=e;const d=new URLSearchParams(i);return d.set("from",String(o.from.valueOf())),d.set("to",String(o.to.valueOf())),d.set("orgId",String(l)),t||(d.delete("from"),d.delete("to")),"current"!==n&&d.set("theme",n),a&&!d.has("editPanel")&&d.set("viewPanel",String(a.id)),d}function l(){let e=window.location.href;const t=e.indexOf("?");return-1!==t&&(e=e.substring(0,t)),e}async function d(e,t,n,s){const r=l(),d=o({useCurrentTimeRange:e,selectedTheme:t,panel:n}),c=a.urlUtil.appendQueryToUrl(r,d.toString());return s?await(0,i.D)(c):c}function c(e,t,n,i){var r,d;const c=l(),u=o({useCurrentTimeRange:e,selectedTheme:n,panel:i});let h=c.replace(s.config.appSubUrl+"/dashboard/",s.config.appSubUrl+"/dashboard-solo/");h=h.replace(s.config.appSubUrl+"/d/",s.config.appSubUrl+"/d-solo/");"/"===a.locationUtil.stripBaseFromUrl(c)&&(h=`${s.config.appUrl}d-solo/${t}`);const p=null!==(r=null!==(d=u.get("editPanel"))&&void 0!==d?d:u.get("viewPanel"))&&void 0!==r?r:"";return u.set("panelId",p),u.delete("editPanel"),u.delete("viewPanel"),a.urlUtil.appendQueryToUrl(h,u.toString())}function u(e,t,n,i){let r=c(e,t,n,i).replace(s.config.appSubUrl+"/dashboard-solo/",s.config.appSubUrl+"/render/dashboard-solo/");return r=r.replace(s.config.appSubUrl+"/d-solo/",s.config.appSubUrl+"/render/d-solo/"),r+="&width=1000&height=500"+function(){const e="&tz=UTC"+encodeURIComponent((0,a.dateTime)().format("Z"));if(!window.Intl)return e;const t=window.Intl.DateTimeFormat();if(!t.resolvedOptions)return e;const n=t.resolvedOptions();if(!n.timeZone)return e;return"&tz="+encodeURIComponent(n.timeZone)}(),r}function h(e,t,n,a){return'<iframe src="'+c(e,t,n,a)+'" width="450" height="200" frameborder="0"></iframe>'}},80001:(e,t,n)=>{"use strict";n.d(t,{B:()=>g});var a,s=n(36636),i=n(82897),r=(n(68404),n(3490)),o=n(45916);const l=e=>{let{diff:t}=e;const n=(0,r.useStyles2)(d),s=!(0,i.isUndefined)(t.originalValue)&&!(0,i.isArray)(t.originalValue)&&!(0,i.isObject)(t.originalValue),l=!(0,i.isUndefined)(t.value)&&!(0,i.isArray)(t.value)&&!(0,i.isObject)(t.value);return(0,o.jsxs)(o.Fragment,{children:[s&&(0,o.jsx)("span",{className:n,children:String(t.originalValue)}),s&&l?a||(a=(0,o.jsx)(r.Icon,{name:"arrow-right"})):null,l&&(0,o.jsx)("span",{className:n,children:String(t.value)})]})},d=e=>s.css`
  background-color: ${e.colors.action.hover};
  border-radius: ${e.shape.borderRadius()};
  color: ${e.colors.text.primary};
  font-size: ${e.typography.body.fontSize};
  margin: 0 ${e.spacing(.5)};
  padding: ${e.spacing(.5,1)};
`;var c=n(2667);const u={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},h=e=>{let{diff:t,title:n}=e;const a=(0,r.useStyles)(p);return t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Icon,{type:"mono",name:"circle",className:a[t.op]})," ",(0,o.jsx)("span",{className:a.embolden,children:n})," ",(0,o.jsx)("span",{children:(0,c.dW)(t,t.path.length>1)})," ",(0,o.jsx)(l,{diff:t})]}):(0,o.jsxs)("div",{className:a.withoutDiff,children:[(0,o.jsx)(r.Icon,{type:"mono",name:"circle",className:a.replace})," ",(0,o.jsx)("span",{className:a.embolden,children:n})," ",(0,o.jsx)("span",{children:(0,c.dW)(u,!1)})]})},p=e=>({embolden:s.css`
    font-weight: ${e.typography.weight.bold};
  `,add:s.css`
    color: ${e.palette.online};
  `,replace:s.css`
    color: ${e.palette.warn};
  `,move:s.css`
    color: ${e.palette.warn};
  `,copy:s.css`
    color: ${e.palette.warn};
  `,_get:s.css`
    color: ${e.palette.warn};
  `,test:s.css`
    color: ${e.palette.warn};
  `,remove:s.css`
    color: ${e.palette.critical};
  `,withoutDiff:s.css`
    margin-bottom: ${e.spacing.md};
  `}),g=e=>{let{diffs:t,title:n}=e;const a=(0,r.useStyles)(m);return 1===t.length?(0,o.jsx)("div",{className:a.container,"data-testid":"diffGroup",children:(0,o.jsx)(h,{title:n,diff:t[0]})}):(0,o.jsxs)("div",{className:a.container,"data-testid":"diffGroup",children:[(0,o.jsx)(h,{title:n}),(0,o.jsx)("ul",{className:a.list,children:t.map(((e,t)=>(0,o.jsxs)("li",{className:a.listItem,children:[(0,o.jsx)("span",{children:(0,c.dW)(e)})," ",(0,o.jsx)(l,{diff:e})]},`${(0,i.last)(e.path)}__${t}`)))})]})},m=e=>({container:s.css`
    background-color: ${e.colors.bg2};
    font-size: ${e.typography.size.md};
    margin-bottom: ${e.spacing.md};
    padding: ${e.spacing.md};
  `,list:s.css`
    margin-left: ${e.spacing.xl};
  `,listItem:s.css`
    margin-bottom: ${e.spacing.sm};
  `})},67605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(36636),s=(n(68404),n(28072)),i=n.n(s),r=n(35008),o=n.n(r),l=n(3490),d=n(45916);const c=e=>{let{oldValue:t,newValue:n}=e;const r=(0,l.useTheme)(),c={variables:{dark:{diffViewerBackground:r.colors.dashboardBg,diffViewerColor:r.colors.text,addedBackground:o()(r.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:o()(r.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:o()(r.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:o()(r.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:o()(r.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:o()(r.palette.redShade).setAlpha(.2).toString(),gutterBackground:r.colors.bg1,gutterBackgroundDark:r.colors.bg1,highlightBackground:o()(r.colors.bgBlue1).setAlpha(.4).toString(),highlightGutterBackground:o()(r.colors.bgBlue2).setAlpha(.2).toString(),codeFoldGutterBackground:r.colors.bg2,codeFoldBackground:r.colors.bg2,emptyLineBackground:r.colors.bg2,gutterColor:r.colors.textFaint,addedGutterColor:r.colors.text,removedGutterColor:r.colors.text,codeFoldContentColor:r.colors.textFaint,diffViewerTitleBackground:r.colors.bg2,diffViewerTitleColor:r.colors.textFaint,diffViewerTitleBorderColor:r.colors.border3}},codeFold:{fontSize:r.typography.size.sm},gutter:`\n      pre {\n        color: ${o()(r.colors.textFaint).setAlpha(1).toString()};\n        opacity: 0.61;\n      }\n    `};return(0,d.jsx)("div",{className:a.css`
        font-size: ${r.typography.size.sm};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `,children:(0,d.jsx)(i(),{styles:c,oldValue:t,newValue:n,splitView:!1,compareMethod:s.DiffMethod.CSS,useDarkTheme:r.isDark})})}},30528:(e,t,n)=>{"use strict";n.d(t,{U$:()=>O,Cs:()=>j,Sd:()=>b,R1:()=>C,K8:()=>i});var a=n(82897),s=n(90923);const i=new class{getHistoryList(e,t){const n=e&&e.uid?e.uid:void 0;return n?(0,s.getBackendSrv)().get(`api/dashboards/uid/${n}/versions`,t):Promise.resolve([])}getDashboardVersion(e,t){return(0,s.getBackendSrv)().get(`api/dashboards/uid/${e}/versions/${t}`)}restoreDashboard(e,t){const n=e&&e.uid?e.uid:void 0,i=`api/dashboards/uid/${n}/restore`;return n&&(0,a.isNumber)(t)?(0,s.getBackendSrv)().post(i,{version:t}):Promise.resolve({})}};var r=n(36636),o=n(68404),l=n(3490),d=n(18745),c=n(80027),u=n(43215),h=n(58257);const p=e=>{const t=(0,d.useSelector)((e=>e.dashboard.getModel())),[n,a]=(0,c.Z)((async()=>await(async(e,t)=>await i.restoreDashboard(t,e))(e,t)),[]),r=(0,h.iG)();return(0,o.useEffect)((()=>{if(n.value){var t;const a=s.locationService.getLocation(),i=u.locationUtil.stripBaseFromUrl(n.value.url),o=null===(t=a.state)||void 0===t?void 0:t.routeReloadCounter;s.locationService.replace(Object.assign({},a,{pathname:i,state:{routeReloadCounter:o?o+1:1}})),r.success("Dashboard restored",`Restored from version ${e}`)}}),[n,e,r]),{state:n,onRestoreDashboard:a}};var g=n(45916);const m=e=>{let{hideModal:t,version:n}=e;const{state:a,onRestoreDashboard:s}=p(n);return(0,o.useEffect)((()=>{!1===a.loading&&a.value&&t()}),[a,t]),(0,g.jsx)(l.ConfirmModal,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:t,onConfirm:s,body:(0,g.jsxs)("p",{children:["Are you sure you want to restore the dashboard to version ",n,"? All unsaved changes will be lost."]}),confirmText:`Yes, restore to version ${n}`})};var f,v;const b=e=>{let{versions:t,canCompare:n,onCheck:a}=e;return(0,g.jsxs)("table",{className:"filter-table gf-form-group",children:[f||(f=(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"width-4"}),(0,g.jsx)("th",{className:"width-4",children:"Version"}),(0,g.jsx)("th",{className:"width-14",children:"Date"}),(0,g.jsx)("th",{className:"width-10",children:"Updated by"}),(0,g.jsx)("th",{children:"Notes"}),(0,g.jsx)("th",{})]})})),(0,g.jsx)("tbody",{children:t.map(((e,t)=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsx)(l.Checkbox,{"aria-label":`Toggle selection of version ${e.version}`,className:r.css`
                display: inline;
              `,checked:e.checked,onChange:t=>a(t,e.id),disabled:!e.checked&&n})}),(0,g.jsx)("td",{children:e.version}),(0,g.jsx)("td",{children:e.createdDateString}),(0,g.jsx)("td",{children:e.createdBy}),(0,g.jsx)("td",{children:e.message}),(0,g.jsx)("td",{className:"text-right",children:0===t?v||(v=(0,g.jsx)(l.Tag,{name:"Latest",colorIndex:17})):(0,g.jsx)(l.ModalsController,{children:t=>{let{showModal:n,hideModal:a}=t;return(0,g.jsx)(l.Button,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{n(m,{version:e.version,hideModal:a})},children:"Restore"})}})})]},e.id)))})]})};var x,y,w;const j=e=>{let{isComparing:t=!1,onClick:n=a.noop,baseVersion:s=0,newVersion:i=0,isNewLatest:r=!1}=e;const o=(0,l.useStyles)(S);return(0,g.jsxs)("h3",{className:o.header,children:[(0,g.jsx)("span",{onClick:n,className:t?"pointer":"",children:"Versions"}),t&&(0,g.jsxs)("span",{children:[x||(x=(0,g.jsx)(l.Icon,{name:"angle-right"}))," Comparing ",s," ",y||(y=(0,g.jsx)(l.Icon,{name:"arrows-h"}))," ",i," ",r&&(w||(w=(0,g.jsx)("cite",{className:"muted",children:"(Latest)"})))]})]})},S=e=>({header:r.css`
    font-size: ${e.typography.heading.h3};
    margin-bottom: ${e.spacing.lg};
  `}),C=e=>{let{hasMore:t,canCompare:n,getVersions:a,getDiff:s,isLastPage:i}=e;return(0,g.jsxs)(l.HorizontalGroup,{children:[t&&(0,g.jsx)(l.Button,{type:"button",onClick:()=>a(!0),variant:"secondary",disabled:i,children:"Show more versions"}),(0,g.jsx)(l.Tooltip,{content:"Select two versions to start comparing",placement:"bottom",children:(0,g.jsx)(l.Button,{type:"button",disabled:!n,onClick:s,icon:"code-branch",children:"Compare versions"})})]})};var k=n(80001),T=n(67605),I=n(2667);const O=e=>{let{baseInfo:t,newInfo:n,diffData:a,isNewLatest:s}=e;const i=(0,I.Q$)(a.lhs,a.rhs),o=(0,l.useStyles)(N);return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:o.spacer,children:(0,g.jsxs)(l.HorizontalGroup,{justify:"space-between",align:"center",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{className:o.versionInfo,children:[(0,g.jsxs)("strong",{children:["Version ",n.version]})," updated by ",n.createdBy," ",n.ageString," -"," ",n.message]}),(0,g.jsxs)("p",{className:(0,r.cx)(o.versionInfo,o.noMarginBottom),children:[(0,g.jsxs)("strong",{children:["Version ",t.version]})," updated by ",t.createdBy," ",t.ageString," -"," ",t.message]})]}),s&&(0,g.jsx)(l.ModalsController,{children:e=>{let{showModal:n,hideModal:a}=e;return(0,g.jsxs)(l.Button,{variant:"destructive",icon:"history",onClick:()=>{n(m,{version:t.version,hideModal:a})},children:["Restore to version ",t.version]})}})]})}),(0,g.jsx)("div",{className:o.spacer,children:Object.entries(i).map((e=>{let[t,n]=e;return(0,g.jsx)(k.B,{diffs:n,title:t},t)}))}),(0,g.jsx)(l.CollapsableSection,{isOpen:!1,label:"View JSON Diff",children:(0,g.jsx)(T.Z,{oldValue:JSON.stringify(a.lhs,null,2),newValue:JSON.stringify(a.rhs,null,2)})})]})},N=e=>({spacer:r.css`
    margin-bottom: ${e.spacing.xl};
  `,versionInfo:r.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,noMarginBottom:r.css`
    margin-bottom: 0;
  `})},2667:(e,t,n)=>{"use strict";n.d(t,{Q$:()=>r,dW:()=>o});var a=n(92497),s=n(56070),i=n(82897);const r=(e,t)=>{const n=(0,a.qu)(e,t),r=s.stringify(e,null,2),o=s.stringify(t,null,2);return(0,i.flow)([t=>t.map((t=>{let n,a,s=0;const l=(0,i.tail)(t.path.split("/"));return"replace"===t.op&&(n=(0,i.get)(e,l),a=t.value,s=o.pointers[t.path].value.line),"add"===t.op&&(a=t.value,s=o.pointers[t.path].value.line),"remove"===t.op&&(n=(0,i.get)(e,l),s=r.pointers[t.path].value.line),{op:t.op,value:a,path:l,originalValue:n,startLineNumber:s}})),e=>(0,i.sortBy)(e,"startLineNumber"),e=>e.reduce(((e,t)=>{const n=t.path[0];return e[n]||(e[n]=[]),e[n].push(t),e}),{})])(n)},o=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,i.last)(e.path),a=l(n),s="remove"===e.op?e.originalValue:e.value;let r=d(e.op);return t&&(a?r+=` item ${n}`:(0,i.isArray)(s)&&!(0,i.isEmpty)(s)?r+=` ${s.length} ${n}`:r+=` ${n}`),r},l=e=>!(0,i.isNaN)((0,i.toNumber)(e)),d=e=>"add"===e?"added":"remove"===e?"deleted":"changed"},38438:(e,t,n)=>{"use strict";n.d(t,{u:()=>d});var a,s=n(36636),i=n(68404),r=n(16695),o=n(3490),l=n(45916);const d=e=>{const[t,n]=(0,i.useState)(null),d="submenu"===e.type,u="divider"===e.type,h=(0,o.useTheme)(),p=s.css`
    margin-right: ${h.spacing.sm};
    a::after {
      display: none;
    }
  `,g=s.css`
    position: absolute;
    top: 7px;
    right: ${h.spacing.xs};
    color: ${h.colors.textWeak};
  `;return u?a||(a=(0,l.jsx)("li",{className:"divider"})):(0,l.jsxs)("li",{className:d?`dropdown-submenu ${c(t)}`:void 0,ref:n,children:[(0,l.jsxs)("a",{onClick:e.onClick,href:e.href,children:[e.iconClassName&&(0,l.jsx)(o.Icon,{name:e.iconClassName,className:p}),(0,l.jsxs)("span",{className:"dropdown-item-text","aria-label":r.wl.components.Panels.Panel.headerItems(e.text),children:[e.text,d&&(0,l.jsx)(o.Icon,{name:"angle-right",className:g})]}),e.shortcut&&(0,l.jsxs)("span",{className:"dropdown-menu-item-shortcut",children:[(0,l.jsx)(o.Icon,{name:"keyboard",className:p})," ",e.shortcut]})]}),e.children]})};function c(e){if(!e)return"invisible";const t=e.parentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return 0===n.width?"invisible":t.right+n.width+10>window.innerWidth?"pull-left":"pull-right"}},80965:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(90291),s=n(43215);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=3e5;function o(e,t){const n=100*Math.ceil(e/t/100);return n>r?r:n}const l=new class{constructor(){i(this,"listeners",[]),i(this,"budget",1),i(this,"threshold",1.5),i(this,"ok",new a.X(!0)),i(this,"lastUpdate",Date.now()),i(this,"isLive",!1),i(this,"timeRange",void 0),i(this,"liveTimeOffset",0),i(this,"measure",(()=>{const e=Date.now();this.budget=(e-this.lastUpdate)/100;const t=this.ok.getValue(),n=this.budget<=this.threshold;if(t!==n&&this.ok.next(n),this.lastUpdate=e,this.isLive&&this.ok.getValue()&&this.timeRange){let t;for(const n of this.listeners){if(!n.panel.props.isInView)continue;if(e-n.last>=n.intervalMs){if(!t){const{raw:n}=this.timeRange;t={raw:n,from:(0,s.dateTime)(e-this.liveTimeOffset),to:(0,s.dateTime)(e)}}n.panel.liveTimeChanged(t),n.last=e}}}}))}setLiveTimeRange(e){var t;if(this.timeRange=e,this.isLive="now"===(null==e||null===(t=e.raw)||void 0===t?void 0:t.to),this.isLive){var n,a;const t=null===(n=s.dateMath.parse(e.raw.from,!1))||void 0===n?void 0:n.valueOf(),i=null===(a=s.dateMath.parse(e.raw.to,!0))||void 0===a?void 0:a.valueOf();this.liveTimeOffset=i-t;for(const e of this.listeners)e.intervalMs=o(this.liveTimeOffset,e.panel.props.width)}}listen(e){this.listeners.push({last:this.lastUpdate,panel:e,intervalMs:o(6e4,e.props.width)})}remove(e){this.listeners=this.listeners.filter((t=>t.panel!==e))}updateInterval(e){if(this.timeRange&&this.isLive)for(const t of this.listeners)if(t.panel===e)return void(t.intervalMs=o(this.liveTimeOffset,t.panel.props.width))}};setInterval(l.measure,100)},36103:(e,t,n)=>{"use strict";n.d(t,{Bg:()=>x,pD:()=>y});var a=n(98572),s=n.n(a),i=n(82897),r=n.n(i),o=n(36365),l=n.n(o),d=n(43215),c=n(90923),u=n(28659),h=n(61884),p=n(39132),g=n(67436),m=n(13868),f=n(47570),v=n(98163),b=n(22305);class x{constructor(){}_dashboardLoadFailed(e,t){return{meta:{canStar:!1,isSnapshot:t=t||!1,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:e}}}loadDashboard(e,t,n){let a;return a="script"===e?this._loadScriptedDashboard(t):"snapshot"===e?u.ae.get("/api/snapshots/"+t).catch((()=>this._dashboardLoadFailed("Snapshot not found",!0))):e===f.vq.Path?(0,m.$)().getDashboard(t):"ds"===e?this._loadFromDatasource(t):"public"===e?u.ae.getPublicDashboardByUid(n).then((e=>e)).catch((()=>this._dashboardLoadFailed("Public Dashboard Not found",!0))):u.ae.getDashboardByUid(n).then((e=>{if(e.meta.isFolder)throw v.h$.emit(d.AppEvents.alertError,["Dashboard not found"]),new Error("Dashboard not found");return e})).catch((()=>this._dashboardLoadFailed("Not found",!0))),a.then((e=>(!0!==e.meta.dashboardNotFound&&h.Z.addDashboardImpression(e.dashboard.id),e))),a}_loadScriptedDashboard(e){const t="public/dashboards/"+e.replace(/\.(?!js)/,"/")+"?"+(new Date).getTime();return(0,c.getBackendSrv)().get(t).then(this._executeScript.bind(this)).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e.data})),(e=>(console.error("Script dashboard error "+e),v.h$.emit(d.AppEvents.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard"))))}async _loadFromDatasource(e){const t=await(0,g.ak)().get(e);if(!t)return Promise.reject("can not find datasource: "+e);const n=new URLSearchParams(window.location.search),a=n.get("path");if(!a)return Promise.reject("expecting path parameter");const s={};return n.forEach(((e,t)=>{s[t]=e})),(0,c.getBackendSrv)().get(`/api/datasources/${t.id}/resources/${a}`,s).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e})))}_executeScript(e){const t={dashboardSrv:(0,b.h4)(),datasourceSrv:(0,g.ak)()},n=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",e)(c.locationService.getSearchObject(),p.Z,d.dateMath,r(),l(),window,document,s(),s(),t);return(0,i.isFunction)(n)?new Promise((e=>{n((t=>{e({data:t})}))})):{data:n}}}let y=new x},22305:(e,t,n)=>{"use strict";n.d(t,{h4:()=>p});var a=n(58799),s=n(5831),i=n(28659),r=n(85189),o=n(21169),l=n(41169),d=n(60301);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u{constructor(){c(this,"dashboard",void 0),c(this,"onRemovePanel",(e=>{const t=this.getCurrent();t&&(0,d.WJ)(t,t.getPanelById(e),!0)})),s.h.subscribe(o.Eb,(e=>this.onRemovePanel(e.payload)))}create(e,t){return new l.f(e,t)}setCurrent(e){this.dashboard=e}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(e){var t;const n=JSON.parse(e);return(0,r.uC)({dashboard:n,folderId:(null===(t=this.dashboard)||void 0===t?void 0:t.meta.folderId)||n.folderId})}saveDashboard(e,t){return(0,a.n)((0,i.i)().fetch(Object.assign({url:"/api/dashboards/db/",method:"POST",data:Object.assign({},e,{dashboard:e.dashboard.getSaveModelClone()})},t)))}starDashboard(e,t){const n=(0,i.i)();let a;return a=t?n.delete("/api/user/stars/dashboard/"+e).then((()=>!1)):n.post("/api/user/stars/dashboard/"+e).then((()=>!0)),a.then((t=>(this.dashboard&&this.dashboard.id===e&&(this.dashboard.meta.isStarred=t),t)))}}let h;function p(){return h||(h=new u),h}},75478:(e,t,n)=>{"use strict";n.d(t,{$t:()=>m});var a=n(82897),s=n(43215),i=n(90923),r=n(5831),o=n(78837),l=n(61959),d=n(10416),c=n(21169),u=n(3490);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p{constructor(e){h(this,"time",void 0),h(this,"refreshTimer",void 0),h(this,"refresh",void 0),h(this,"autoRefreshPaused",!1),h(this,"oldRefresh",void 0),h(this,"timeModel",void 0),h(this,"timeAtLoad",void 0),h(this,"autoRefreshBlocked",void 0),h(this,"timeRangeForUrl",(()=>{const e=this.timeRange().raw;return(0,s.isDateTime)(e.from)&&(e.from=e.from.valueOf().toString()),(0,s.isDateTime)(e.to)&&(e.to=e.to.valueOf().toString()),e})),this.contextSrv=e,this.time=(0,s.getDefaultTimeRange)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),r.Z.subscribe(c.p8,(e=>{this.zoomOut(e.payload.scale,e.payload.updateUrl)})),r.Z.subscribe(c.Qt,(e=>{this.shiftTime(e.payload.direction,e.payload.updateUrl)})),r.Z.subscribe(c.QI,(()=>{this.makeAbsoluteTime()})),document.addEventListener("visibilitychange",(()=>{this.autoRefreshBlocked&&"visible"===document.visibilityState&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())}))}init(e){var t,n;this.timeModel=e,this.time=e.time,this.refresh=e.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,a.cloneDeep)(this.time);const i=s.rangeUtil.convertRawToRange(this.time,null===(t=this.timeModel)||void 0===t?void 0:t.getTimezone(),null===(n=this.timeModel)||void 0===n?void 0:n.fiscalYearStartMonth);i.to.isBefore(i.from)&&this.setTime({from:i.raw.to,to:i.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(e){return this.contextSrv.minRefreshInterval?e.filter((e=>""!==e)).filter(this.contextSrv.isAllowedInterval):e}parseTime(){(0,a.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,s.dateTime)(this.time.from).utc()),(0,a.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,s.dateTime)(this.time.to).utc())}parseUrlParam(e){if(-1!==e.indexOf("now"))return e;if(8===e.length){const t=(0,s.toUtc)(e,"YYYYMMDD");if(t.isValid())return t}else if(15===e.length){const t=(0,s.toUtc)(e,"YYYYMMDDTHHmmss");if(t.isValid())return t}if(!isNaN(e)){const t=parseInt(e,10);return(0,s.toUtc)(t)}return null}getTimeWindow(e,t){const n=parseInt(e,10);let a;return a=t.match(/^\d+$/)&&parseInt(t,10)?parseInt(t,10):s.rangeUtil.intervalToMs(t),{from:(0,s.toUtc)(n-a/2),to:(0,s.toUtc)(n+a/2)}}initTimeFromUrl(){var e,t,n,a;const s=i.locationService.getSearch();s.get("time")&&s.get("time.window")&&(this.time=this.getTimeWindow(s.get("time"),s.get("time.window"))),s.get("from")&&(this.time.from=this.parseUrlParam(s.get("from"))||this.time.from),s.get("to")&&(this.time.to=this.parseUrlParam(s.get("to"))||this.time.to),s.get("to")&&-1===s.get("to").indexOf("now")&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=function(e){let{urlRefresh:t,currentRefresh:n,isAllowedIntervalFn:a,minRefreshInterval:s,refreshIntervals:i=u.defaultIntervals}=e;if(!t)return n;const r=a(t),o=i.find((e=>e===t));if(!r||!o){var l;const e=s?i.find((e=>e===s)):void 0,t=null!=i&&i.length?i[0]:void 0;return null!==(l=null!=e?e:t)&&void 0!==l?l:n}return t||n}({urlRefresh:s.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(null===(e=this.timeModel)||void 0===e||null===(t=e.timepicker)||void 0===t?void 0:t.refresh_intervals)?null===(n=this.timeModel)||void 0===n||null===(a=n.timepicker)||void 0===a?void 0:a.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const e=i.locationService.getSearch();if(e.get("left"))return;const t=this.timeRangeForUrl(),n=e.get("from"),a=e.get("to");n&&a?n===t.from&&a===t.to||(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(e){this.timeModel&&(this.timeModel.refresh=e),this.stopAutoRefresh();const t=i.locationService.getSearchObject();if(!e)return void(t.refresh&&i.locationService.partial({refresh:null},!0));const n=this.contextSrv.getValidInterval(e),a=s.rangeUtil.intervalToMs(n);this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(a),!this.autoRefreshPaused&&this.refreshTimeModel()}),a);const r=this.contextSrv.getValidInterval(e);t.refresh!==r&&i.locationService.partial({refresh:r},!0)}refreshTimeModel(){var e;null===(e=this.timeModel)||void 0===e||e.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(e){this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(e),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0}),e)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r;((0,a.extend)(this.time,e),(0,s.isDateTime)(e.to))?(this.oldRefresh=(null===(r=this.timeModel)||void 0===r?void 0:r.refresh)||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==(null===(t=this.timeModel)||void 0===t?void 0:t.refresh)&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null);if(!0===n){const e=this.timeRangeForUrl(),t=i.locationService.getSearchObject();if(t.from===e.from.toString()&&t.to===e.to.toString())return;t.from=e.from.toString(),t.to=e.to.toString(),i.locationService.partial(t)}this.refreshTimeModel()}timeRange(){var e,t;const n={from:(0,s.isDateTime)(this.time.from)?(0,s.dateTime)(this.time.from):this.time.from,to:(0,s.isDateTime)(this.time.to)?(0,s.dateTime)(this.time.to):this.time.to},a=this.timeModel?this.timeModel.getTimezone():void 0;return{from:s.dateMath.parse(n.from,!1,a,null===(e=this.timeModel)||void 0===e?void 0:e.fiscalYearStartMonth),to:s.dateMath.parse(n.to,!0,a,null===(t=this.timeModel)||void 0===t?void 0:t.fiscalYearStartMonth),raw:n}}zoomOut(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.timeRange(),{from:a,to:i}=(0,d.h)(n,e);this.setTime({from:(0,s.toUtc)(a),to:(0,s.toUtc)(i)},t)}shiftTime(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.timeRange(),{from:a,to:i}=(0,d.e)(e,n);this.setTime({from:(0,s.toUtc)(a),to:(0,s.toUtc)(i)},t)}makeAbsoluteTime(){if(i.locationService.getSearch().get("left"))return;const{from:e,to:t}=this.timeRange();this.setTime({from:e,to:t},!0)}isRefreshOutsideThreshold(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;const n=this.timeRange();if(s.dateMath.isMathString(n.raw.from)){const a=n.to.diff(n.from);return Date.now()-e>=a*t}return!1}}let g;function m(){return g||(g=new p(l.Vt)),g}},13011:(e,t,n)=>{"use strict";n.d(t,{o:()=>O,p:()=>A});var a=n(82897),s=n(43215),i=n(90923),r=n(3490),o=n(98878),l=n(78837),d=n(65747);var c=n(39132),u=n(67436),h=n(85239),p=n(46303),g=n(81127),m=n(95547),f=n(83481),v=n(37994),b=n(58988),x=n(65184),y=n(93889);const w=["statistics","name"];function j(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}function S(e,t){const n=[];if(null!=e&&e.statistics&&null!=e&&e.statistics.length){e.statistic=e.statistics[0];for(const t of e.statistics.splice(1))n.push(Object.assign({},e,{statistic:t}))}for(const e of n)e.refId=(0,x.Hs)(t),delete e.statistics,t.push(e);return delete e.statistics,n}function C(e){var t;const n=[];if(e&&"statistics"in e&&null!=e&&null!==(t=e.statistics)&&void 0!==t&&t.length){for(const t of e.statistics.splice(1)){const{name:a}=e,s=j(e,w);n.push(Object.assign({},s,{statistic:t,name:`${a} - ${t}`}))}e.statistic=e.statistics[0],0!==n.length&&(e.name=`${e.name} - ${e.statistic}`),delete e.statistics}return n}var k=n(39665),T=n(28283);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}s.standardEditorsRegistry.setInit(o.u),s.standardFieldConfigEditorRegistry.setInit(o.l);class O{constructor(e){I(this,"dashboard",void 0),this.dashboard=e,(0,i.getDataSourceSrv)()||(0,i.setDataSourceSrv)(new u.ND)}updateSchema(e){let t,n,r,o;const c=this.dashboard.schemaVersion,u=[];if(this.dashboard.schemaVersion=37,c!==this.dashboard.schemaVersion){if(c<2&&(e.services&&e.services.filter&&(this.dashboard.time=e.services.filter.time,this.dashboard.templating.list=e.services.filter.list||[]),u.push((e=>("graphite"===e.type&&(e.type="graph"),"graph"!==e.type||((0,a.isBoolean)(e.legend)&&(e.legend={show:e.legend}),e.grid&&(e.grid.min&&(e.grid.leftMin=e.grid.min,delete e.grid.min),e.grid.max&&(e.grid.leftMax=e.grid.max,delete e.grid.max)),e.y_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[0]=e.y_format,delete e.y_format),e.y2_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[1]=e.y2_format,delete e.y2_format)),e)))),c<3){let e=this.dashboard.getNextPanelId();u.push((t=>(t.id||(t.id=e,e+=1),t)))}if(c<4&&u.push((e=>("graph"!==e.type||((0,a.each)(e.aliasYAxis,((t,n)=>{e.seriesOverrides=[{alias:n,yaxis:t}]})),delete e.aliasYAxis),e))),c<6){const n=(0,a.find)(e.pulldowns,{type:"annotations"});for(n&&(this.dashboard.annotations={list:n.annotations||[]}),t=0;t<this.dashboard.templating.list.length;t++){const e=this.dashboard.templating.list[t];void 0===e.datasource&&(e.datasource=null),"filter"===e.type&&(e.type="query"),void 0===e.type&&(e.type="query"),void 0===e.allFormat&&(e.allFormat="glob")}}if(c<7&&(e.nav&&e.nav.length&&(this.dashboard.timepicker=e.nav[0]),u.push((e=>((0,a.each)(e.targets,(t=>{t.refId||(t.refId=e.getNextQueryLetter&&e.getNextQueryLetter())})),e)))),c<8&&u.push((e=>((0,a.each)(e.targets,(e=>{e.fields&&e.tags&&e.groupBy&&(e.rawQuery?(delete e.fields,delete e.fill):(e.select=(0,a.map)(e.fields,(e=>{const t=[];return t.push({type:"field",params:[e.name]}),t.push({type:e.func,params:[]}),e.mathExpr&&t.push({type:"math",params:[e.mathExpr]}),e.asExpr&&t.push({type:"alias",params:[e.asExpr]}),t})),delete e.fields,(0,a.each)(e.groupBy,(e=>{"time"===e.type&&e.interval&&(e.params=[e.interval],delete e.interval),"tag"===e.type&&e.key&&(e.params=[e.key],delete e.key)})),e.fill&&(e.groupBy.push({type:"fill",params:[e.fill]}),delete e.fill)))})),e))),c<9&&u.push((e=>{if("singlestat"!==e.type&&""!==e.thresholds)return e;if(e.thresholds){const t=e.thresholds.split(",");t.length>=3&&(t.shift(),e.thresholds=t.join(","))}return e})),c<10&&u.push((e=>("table"!==e.type||(0,a.each)(e.styles,(e=>{if(e.thresholds&&e.thresholds.length>=3){const t=e.thresholds;t.shift(),e.thresholds=t}})),e))),c<12&&(0,a.each)(this.dashboard.getVariables(),(e=>{e.refresh&&(e.refresh=1),e.refresh||(e.refresh=0),e.hideVariable?e.hide=2:e.hideLabel&&(e.hide=1)})),c<12&&u.push((e=>"graph"!==e.type?e:e.grid?(e.yaxes||(e.yaxes=[{show:e["y-axis"],min:e.grid.leftMin,max:e.grid.leftMax,logBase:e.grid.leftLogBase,format:e.y_formats[0],label:e.leftYAxisLabel},{show:e["y-axis"],min:e.grid.rightMin,max:e.grid.rightMax,logBase:e.grid.rightLogBase,format:e.y_formats[1],label:e.rightYAxisLabel}],e.xaxis={show:e["x-axis"]},delete e.grid.leftMin,delete e.grid.leftMax,delete e.grid.leftLogBase,delete e.grid.rightMin,delete e.grid.rightMax,delete e.grid.rightLogBase,delete e.y_formats,delete e.leftYAxisLabel,delete e.rightYAxisLabel,delete e["y-axis"],delete e["x-axis"]),e):e)),c<13&&u.push((e=>{if("graph"!==e.type)return e;if(!e.grid)return e;e.thresholds||(e.thresholds=[]);const t={},n={};return null!==e.grid.threshold1&&(t.value=e.grid.threshold1,e.grid.thresholdLine?(t.line=!0,t.lineColor=e.grid.threshold1Color,t.colorMode="custom"):(t.fill=!0,t.fillColor=e.grid.threshold1Color,t.colorMode="custom")),null!==e.grid.threshold2&&(n.value=e.grid.threshold2,e.grid.thresholdLine?(n.line=!0,n.lineColor=e.grid.threshold2Color,n.colorMode="custom"):(n.fill=!0,n.fillColor=e.grid.threshold2Color,n.colorMode="custom")),(0,a.isNumber)(t.value)&&((0,a.isNumber)(n.value)?t.value>n.value?(t.op=n.op="lt",e.thresholds.push(t),e.thresholds.push(n)):(t.op=n.op="gt",e.thresholds.push(t),e.thresholds.push(n)):(t.op="gt",e.thresholds.push(t))),delete e.grid.threshold1,delete e.grid.threshold1Color,delete e.grid.threshold2,delete e.grid.threshold2Color,delete e.grid.thresholdLine,e})),c<14&&(this.dashboard.graphTooltip=e.sharedCrosshair?1:0),c<16&&this.upgradeToGridLayout(e),c<17&&u.push((e=>{if(e.minSpan){const n=d.cz/e.minSpan,s=(t=d.cz,Array.from(new Array(t+1),((e,t)=>t)).filter((e=>t%e==0)));e.maxPerRow=s[(0,a.findIndex)(s,(e=>e>n))-1]}var t;return delete e.minSpan,e})),c<18&&u.push((e=>(e["options-gauge"]&&(e.options=e["options-gauge"],e.options.valueOptions={unit:e.options.unit,stat:e.options.stat,decimals:e.options.decimals,prefix:e.options.prefix,suffix:e.options.suffix},e.options.thresholds&&e.options.thresholds.reverse(),delete e.options.options,delete e.options.unit,delete e.options.stat,delete e.options.decimals,delete e.options.prefix,delete e.options.suffix,delete e["options-gauge"]),e))),c<19&&u.push((e=>(e.links&&(0,a.isArray)(e.links)&&(e.links=e.links.map(D)),e))),c<20){const e=e=>Object.assign({},e,{url:P(e.url)});u.push((t=>(t.options&&t.options.dataLinks&&(0,a.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&(t.options.fieldOptions.defaults.links&&(0,a.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t.options.fieldOptions.defaults.title&&(t.options.fieldOptions.defaults.title=P(t.options.fieldOptions.defaults.title))),t)))}if(c<21){const e=e=>Object.assign({},e,{url:e.url.replace(/__series.labels/g,"__field.labels")});u.push((t=>(t.options&&t.options.dataLinks&&(0,a.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&t.options.fieldOptions.defaults.links&&(0,a.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t)))}if(c<22&&u.push((e=>("table"!==e.type||(0,a.each)(e.styles,(e=>{e.align="auto"})),e))),c<23)for(const e of this.dashboard.templating.list){if(!(0,h.U4)(e))continue;const{multi:t,current:n}=e;e.current=(0,p.x)(n,t)}if(c<24&&u.push((e=>{const t="table"===e.type;if(t&&!e.styles)return e;const n="table2"===e.table;return!t||n||(e.type=t?"table-old":"table"),e})),c<26&&u.push((e=>"text2"===e.type?(e.type="text",delete e.options.angular,e):e)),c<27)for(const e of this.dashboard.templating.list){var x,y;(0,h.VC)(e)&&(e.hide!==k.bU.dontHide&&e.hide!==k.bU.hideLabel||(e.type="textbox"),e.current={selected:!0,text:null!==(x=e.query)&&void 0!==x?x:"",value:null!==(y=e.query)&&void 0!==y?y:""},e.options=[e.current])}if(c<28){u.push((e=>"singlestat"===e.type?function(e){var t;if(l.vc.panels["grafana-singlestat-panel"])return e.type="grafana-singlestat-panel",e;let n=!1;e.changePlugin||(n=!0,e=new T.r(e));e.plugin={angularPanelCtrl:{}},null!==(t=e.gauge)&&void 0!==t&&t.show?(m.plugin.meta=l.vc.panels.gauge,e.changePlugin(m.plugin)):(f.plugin.meta=l.vc.panels.stat,e.changePlugin(f.plugin));if(n)return e.getSaveModel();return e}(e):e));for(const e of this.dashboard.templating.list)e.tags&&delete e.tags,e.tagsQuery&&delete e.tagsQuery,e.tagValuesQuery&&delete e.tagValuesQuery,e.useTags&&delete e.useTags}if(c<29)for(const e of this.dashboard.templating.list){var w;"query"===e.type&&(1!==e.refresh&&2!==e.refresh&&(e.refresh=1),null!==(w=e.options)&&void 0!==w&&w.length&&(e.options=[]))}if(c<30&&(u.push(R),u.push(E)),c<31&&u.push((e=>{if(e.transformations)for(const t of e.transformations)if(t.id===v.r.id)return M(e,v.r.id,{id:b.R.id,options:{}});return e})),c<33&&u.push((e=>{if(e.datasource=A(e.datasource,{returnDefaultAsNull:!0}),!e.targets)return e;for(const t of e.targets){const e=A(t.datasource,{returnDefaultAsNull:!0});null!=e&&(t.datasource=e)}return e})),c<34&&(u.push((e=>(this.migrateCloudWatchQueries(e),e))),this.migrateCloudWatchAnnotationQuery()),c<35&&u.push(V),c<36){for(const e of this.dashboard.annotations.list)e.datasource=A(e.datasource,{returnDefaultAsNull:!1});const e=(0,i.getDataSourceSrv)().getInstanceSettings(null);if(e){for(const t of this.dashboard.templating.list)"query"===t.type&&null===t.datasource&&(t.datasource=(0,s.getDataSourceRef)(e));u.push((t=>{if(t.targets){let i=!1;null==t.datasource&&t.targets.length>0&&(t.datasource=(0,s.getDataSourceRef)(e),i=!0);for(const e of t.targets){var n,a;if(null==e.datasource||null==e.datasource.uid)(null===(a=t.datasource)||void 0===a?void 0:a.uid)!==g.D?e.datasource=Object.assign({},t.datasource):e.datasource=A(e.datasource,{returnDefaultAsNull:!1});i&&"__expr__"!==(null===(n=e.datasource)||void 0===n?void 0:n.uid)&&(t.datasource=e.datasource)}}return t}))}}if(c<37&&u.push((e=>{var t,n;if(null!==(t=e.options)&&void 0!==t&&t.legend&&"hidden"===e.options.legend.displayMode)e.options.legend.displayMode="list",e.options.legend.showLegend=!1;else if(null!==(n=e.options)&&void 0!==n&&n.legend){var a;e.options.legend=Object.assign({},null===(a=e.options)||void 0===a?void 0:a.legend,{showLegend:!0})}return e})),0!==u.length)for(n=0;n<this.dashboard.panels.length;n++)for(r=0;r<u.length;r++){this.dashboard.panels[n]=u[r].call(this,this.dashboard.panels[n]);const e=this.dashboard.panels[n].panels;if(e)for(o=0;o<e.length;o++)e[o]=u[r].call(this,e[o])}}}migrateCloudWatchQueries(e){for(const n of e.targets||[])if($(n)&&((t=n).hasOwnProperty("metricQueryType")||(t.metricQueryType=y.$5.Search),t.hasOwnProperty("metricEditorMode")||(t.metricQueryType===y.$5.Query?t.metricEditorMode=y.MQ.Code:t.metricEditorMode=t.expression?y.MQ.Code:y.MQ.Builder),n.hasOwnProperty("statistics"))){const t=S(n,[...e.targets]);for(const n of t)e.targets.push(n)}var t}migrateCloudWatchAnnotationQuery(){for(const t of this.dashboard.annotations.list)if((e=t).hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("prefixMatching")&&e.hasOwnProperty("statistics")){const e=C(t);for(const t of e)this.dashboard.annotations.list.push(t)}var e}upgradeToGridLayout(e){let t=0;const n=d.cz/12;let s=(0,a.max)((0,a.flattenDeep)((0,a.map)(e.rows,(e=>(0,a.map)(e.panels,"id")))))+1;if(!e.rows)return;const i=(0,a.some)(e.rows,(e=>e.collapse||e.showTitle||e.repeat));for(const a of e.rows){if(a.repeatIteration)continue;const e=N(a.height||d.b0),o={};let l;i&&(o.id=s,o.type="row",o.title=a.title,o.collapsed=a.collapse,o.repeat=a.repeat,o.panels=[],o.gridPos={x:0,y:t,w:d.cz,h:e},l=new T.r(o),s++,t++);const c=new F(e,d.cz,t);for(const s of a.panels){s.span=s.span||d.kh,s.minSpan&&(s.minSpan=Math.min(d.cz,d.cz/12*s.minSpan));const a=Math.floor(s.span)*n,i=s.height?N(s.height):e,u=c.getPanelPosition(i,a);var r;if(t=c.yPos,s.gridPos={x:u.x,y:t+u.y,w:a,h:i},c.addPanel(s.gridPos),delete s.span,l&&o.collapsed)null===(r=l.panels)||void 0===r||r.push(s);else this.dashboard.panels.push(new T.r(s))}l&&this.dashboard.panels.push(l),l&&o.collapsed||(t+=e)}}}function N(e){(0,a.isString)(e)&&(e=parseInt(e.replace("px",""),10)),e<d.AV&&(e=d.AV);return Math.ceil(e/(d.K3+d.hD))}class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.cz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;I(this,"area",void 0),I(this,"yPos",void 0),I(this,"height",void 0),this.area=new Array(t).fill(0),this.yPos=n,this.height=e}reset(){this.area.fill(0)}addPanel(e){for(let t=e.x;t<e.x+e.w;t++)(!this.area[t]||e.y+e.h-this.yPos>this.area[t])&&(this.area[t]=e.y+e.h-this.yPos);return this.area}getPanelPosition(e,t){let n,s,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let e=this.area.length-1;e>=0&&this.height-this.area[e]>0;e--)if(void 0===s)s=e;else{if(!(e<this.area.length-1&&this.area[e]<=this.area[e+1]))break;n=e}if(!(void 0!==n&&void 0!==s&&s-n>=t-1))return r?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(e,t,!0));i={x:n,y:(0,a.max)(this.area.slice(n))};return i}}function D(e){let t=e.url;return!t&&e.dashboard&&(t=`dashboard/db/${c.Z.slugifyForUrl(e.dashboard)}`),!t&&e.dashUri&&(t=`dashboard/${e.dashUri}`),t||(t="/"),e.keepTime&&(t=s.urlUtil.appendQueryToUrl(t,`$${s.DataLinkBuiltInVars.keepTime}`)),e.includeVars&&(t=s.urlUtil.appendQueryToUrl(t,`$${s.DataLinkBuiltInVars.includeVars}`)),e.params&&(t=s.urlUtil.appendQueryToUrl(t,e.params)),{url:t,title:e.title,targetBlank:e.targetBlank}}function P(e){return e.replace(/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g,((e,t,n,a,s,i)=>t?"__series.name":n?"${__series.name}":a?"__value.time":s?"__field.name":i?"${__field.name}":e))}function A(e,t){if(t.returnDefaultAsNull&&(null==e||"default"===e))return null;if((0,s.isDataSourceRef)(e))return e;const n=(0,i.getDataSourceSrv)().getInstanceSettings(e);return n?(0,s.getDataSourceRef)(n):{uid:e}}function M(e,t,n){if(e.transformations){const a=[];for(const s of e.transformations)a.push(s),s.id===t&&a.push(Object.assign({},n));e.transformations=a}return e}function R(e){const t=e.fieldConfig;if(!t)return e;if(t.defaults&&t.defaults.mappings&&(t.defaults.mappings=L(t.defaults.mappings,t.defaults.thresholds)),Array.isArray(t.overrides))for(const e of t.overrides)for(const t of e.properties)"mappings"===t.id&&(t.value=L(t.value));return e}function $(e){return e.hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("metricName")}function L(e,t){if(!e)return;const n={type:s.MappingType.ValueToText,options:{}},a=[];for(const i of e){if(i.type&&i.options){i.type===s.MappingType.ValueToText?n.options=Object.assign({},n.options,i.options):a.push(i);continue}let e;const r=parseFloat(i.text);if(t&&!isNaN(r)){const n=(0,s.getActiveThreshold)(r,t.steps);n&&n.color&&(e=n.color)}switch(i.type){case 1:null!=i.value&&("null"===i.value?a.push({type:s.MappingType.SpecialValue,options:{match:s.SpecialValueMatch.Null,result:{text:i.text,color:e}}}):n.options[String(i.value)]={text:i.text,color:e});break;case 2:a.push({type:s.MappingType.RangeToText,options:{from:+i.from,to:+i.to,result:{text:i.text,color:e}}})}}return Object.keys(n.options).length>0&&a.unshift(n),a}function E(e){return"timeseries"!==e.type&&"xychart"!==e.type||e.options.tooltipOptions&&(e.options=Object.assign({},e.options,{tooltip:e.options.tooltipOptions}),delete e.options.tooltipOptions),e}function V(e){var t,n;"timeseries"===e.type&&((null===(t=e.fieldConfig)||void 0===t||null===(n=t.defaults.custom)||void 0===n?void 0:n.axisPlacement)===r.AxisPlacement.Hidden&&(e.fieldConfig=Object.assign({},e.fieldConfig,{overrides:[...e.fieldConfig.overrides,{matcher:{id:s.FieldMatcherID.byType,options:s.FieldType.time},properties:[{id:"custom.axisPlacement",value:r.AxisPlacement.Auto}]}]})));return e}},41169:(e,t,n)=>{"use strict";n.d(t,{f:()=>O});var a=n(82897),s=n(4203),i=n(43215),r=n(90923),o=n(3490),l=n(65747),d=n(61959);function c(e){return(0,a.isArray)(e)?e.map(c):(0,a.isPlainObject)(e)?Object.keys(e).sort().reduce(((t,n)=>{const a=e[n];return null!=a&&(t[n]=c(a)),t}),{}):e}var u=n(91219),h=n(57358),p=n(36586),g=n(47570),m=n(21169),f=n(98163),v=n(56340),b=n(39665),x=n(5970),y=n(75478),w=n(74267);const j=new Set(["gridPos","title","description","transparent"]);function S(e,t){return null==e&&(t===1/0||t===-1/0||null==t)||(null==t&&(e===1/0||e===-1/0||null==e)||void 0)}function C(e){let t=0;for(const n of e)for(const e of n)e.id>t&&(t=e.id);return t+1}var k=n(13011),T=n(28283);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O{constructor(e,t){var n,r,o,l,d,c,u,h,g,m,v,x;let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.gt;I(this,"id",void 0),I(this,"uid",void 0),I(this,"title",void 0),I(this,"autoUpdate",void 0),I(this,"description",void 0),I(this,"tags",void 0),I(this,"style",void 0),I(this,"timezone",void 0),I(this,"weekStart",void 0),I(this,"editable",void 0),I(this,"graphTooltip",void 0),I(this,"time",void 0),I(this,"liveNow",void 0),I(this,"originalTime",void 0),I(this,"timepicker",void 0),I(this,"templating",void 0),I(this,"originalTemplating",void 0),I(this,"annotations",void 0),I(this,"refresh",void 0),I(this,"snapshot",void 0),I(this,"schemaVersion",void 0),I(this,"version",void 0),I(this,"revision",void 0),I(this,"links",void 0),I(this,"gnetId",void 0),I(this,"panels",void 0),I(this,"panelInEdit",void 0),I(this,"panelInView",void 0),I(this,"fiscalYearStartMonth",void 0),I(this,"panelsAffectedByVariableChange",void 0),I(this,"appEventsSubscription",void 0),I(this,"lastRefresh",void 0),I(this,"events",void 0),this.getVariablesFromState=y,e||(e={}),this.events=new i.EventBusSrv,this.id=e.id||null,this.uid=e.uid||null,this.revision=e.revision,this.title=null!==(n=e.title)&&void 0!==n?n:"No Title",this.autoUpdate=e.autoUpdate,this.description=e.description,this.tags=null!==(r=e.tags)&&void 0!==r?r:[],this.style=null!==(o=e.style)&&void 0!==o?o:"dark",this.timezone=null!==(l=e.timezone)&&void 0!==l?l:"",this.weekStart=null!==(d=e.weekStart)&&void 0!==d?d:"",this.editable=!1!==e.editable,this.graphTooltip=e.graphTooltip||0,this.time=null!==(c=e.time)&&void 0!==c?c:{from:"now-6h",to:"now"},this.timepicker=null!==(u=e.timepicker)&&void 0!==u?u:{},this.liveNow=Boolean(e.liveNow),this.templating=this.ensureListExist(e.templating),this.annotations=this.ensureListExist(e.annotations),this.refresh=e.refresh,this.snapshot=e.snapshot,this.schemaVersion=null!==(h=e.schemaVersion)&&void 0!==h?h:0,this.fiscalYearStartMonth=null!==(g=e.fiscalYearStartMonth)&&void 0!==g?g:0,this.version=null!==(m=e.version)&&void 0!==m?m:0,this.links=null!==(v=e.links)&&void 0!==v?v:[],this.gnetId=e.gnetId||null,this.panels=(0,a.map)(null!==(x=e.panels)&&void 0!==x?x:[],(e=>new T.r(e))),this.ensurePanelsHaveIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(t),this.updateSchema(e),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new s.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(f.h$.subscribe(b.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(f.h$.subscribe(b.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(f.h$.subscribe(b.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some((e=>1===e.builtIn))||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:o.DEFAULT_ANNOTATION_COLOR,enable:!0,hide:!0,builtIn:1})}initMeta(e){(e=e||{}).canShare=!1!==e.canShare,e.canSave=!1!==e.canSave,e.canStar=!1!==e.canStar,e.canEdit=!1!==e.canEdit,e.canDelete=!1!==e.canDelete,e.showSettings=e.canEdit,e.canMakeEditable=e.canSave&&!this.editable,e.hasUnsavedFolderChange=!1,this.editable||(e.canEdit=!1,e.canDelete=!1,e.canSave=!1),this.meta=e}getSaveModelClone(e){const t=(0,a.defaults)(e||{},{saveVariables:!0,saveTimerange:!0});let n={};for(const e in this)!O.nonPersistedProperties[e]&&this.hasOwnProperty(e)&&(n[e]=(0,a.cloneDeep)(this[e]));return this.updateTemplatingSaveModelClone(n,t),t.saveTimerange||(n.time=this.originalTime),n.panels=this.getPanelSaveModels(),n=c(n),n.getVariables=()=>n.templating.list,n}updatePanels(e){const t=function(e,t){const n=[],s={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:n};let i=0;const r=new Map;for(let n of t){let{id:a}=n;a||(i||(i=C([e,t])),a=i++,n=Object.assign({},n,{id:a})),r.set(a,n)}for(const t of e){const e=r.get(t.id);if(!e){s.changed=!0,s.actions.remove.push(t.id),t.destroy();continue}if(r.delete(t.id),e===t){n.push(t),s.actions.noop.push(t.id);continue}if(t.type===e.type){const i=t.getSaveModel();let r=!0,o=!1;for(const[n,l]of Object.entries(e))if(!(0,a.isEqualWith)(l,i[n],S)){if(s.changed=!0,r=!1,!j.has(n)){o=!1;break}t[n]=l,o=!0}if(r){n.push(t),s.actions.noop.push(t.id);continue}if(o){n.push(t),s.actions.update.push(t.id);continue}}t.destroy();const i=new w.r(e);i.key=`${i.id}-update-${Date.now()}`,n.push(i),s.changed=!0,s.actions.replace.push(t.id)}for(const e of r.values())n.push(new w.r(e)),s.changed=!0,s.actions.add.push(e.id);return s}(this.panels,null!=e?e:[]);var n;t.changed&&(this.panels=null!==(n=t.panels)&&void 0!==n?n:[],this.sortPanelsByGridPos(),this.events.publish(new m._B));return t}getPanelSaveModels(){return this.panels.filter((e=>this.isSnapshotTruthy()||!("add-panel"===e.type||e.repeatPanelId||e.repeatedByRow))).map((e=>this.panelInEdit&&this.panelInEdit.id===e.id?this.panelInEdit.getSaveModel():e.getSaveModel())).map((e=>(this.isSnapshotTruthy()||(delete e.scopedVars,"row"===e.type&&e.panels&&e.panels.length>0&&(e.panels=e.panels.filter((e=>!e.repeatPanelId)).map((e=>(delete e.scopedVars,e))))),e)))}updateTemplatingSaveModelClone(e,t){const n=this.originalTemplating,a=this.getVariablesFromState(this.uid);if(e.templating={list:a.map((e=>u.z.get(e.type).getSaveModel(e,t.saveVariables)))},!t.saveVariables)for(const t of e.templating.list){const e=n.find((e=>{let{name:n,type:a}=e;return n===t.name&&a===t.type}));e&&("adhoc"===t.type?t.filters=e.filters:t.current=e.current)}}timeRangeUpdated(e){this.events.publish(new r.TimeRangeUpdatedEvent(e)),(0,v.WI)((0,h.DU)(this.uid,e))}startRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{refreshAll:!0,panelIds:[]};if(this.events.publish(new r.RefreshEvent),this.lastRefresh=Date.now(),this.panelInEdit&&(e.refreshAll||e.panelIds.includes(this.panelInEdit.id)))this.panelInEdit.refresh();else for(const t of this.panels)this.otherPanelInFullscreen(t)||!e.refreshAll&&!e.panelIds.includes(t.id)||t.refresh()}render(){this.events.publish(new m._z);for(const e of this.panels)e.render()}panelInitialized(e){const t=e.getQueryRunner().getLastResult();this.otherPanelInFullscreen(e)||t||e.refresh()}otherPanelInFullscreen(e){return(this.panelInEdit||this.panelInView)&&!(e.isViewing||e.isEditing)}initEditPanel(e){return(0,y.$t)().pauseAutoRefresh(),this.panelInEdit=e.getEditClone(),this.panelInEdit}initViewPanel(e){this.panelInView=e,e.setIsViewing(!0)}exitViewPanel(e){this.panelInView=void 0,e.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,y.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveIds(){let e=this.getNextPanelId();for(const t of this.panelIterator())t.id??=e++}ensureListExist(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.list??=[],e}getNextPanelId(){let e=0;for(const t of this.panelIterator())t.id>e&&(e=t.id);return e+1}*panelIterator(){for(const t of this.panels){var e;yield t;const n=null!==(e=t.panels)&&void 0!==e?e:[];for(const e of n)yield e}}forEachPanel(e){for(let t=0;t<this.panels.length;t++)e(this.panels[t],t)}getPanelById(e){var t;return this.panelInEdit&&this.panelInEdit.id===e?this.panelInEdit:null!==(t=this.panels.find((t=>t.id===e)))&&void 0!==t?t:null}canEditPanel(e){return Boolean(this.meta.canEdit&&e&&!e.repeatPanelId&&"row"!==e.type)}canEditPanelById(e){return this.canEditPanel(this.getPanelById(e))}addPanel(e){e.id=this.getNextPanelId(),this.panels.unshift(new T.r(e)),this.sortPanelsByGridPos(),this.events.publish(new m._B)}sortPanelsByGridPos(){this.panels.sort(((e,t)=>e.gridPos.y===t.gridPos.y?e.gridPos.x-t.gridPos.x:e.gridPos.y-t.gridPos.y))}clearUnsavedChanges(){for(const e of this.panels)e.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const e=this.panels.find((e=>e.hasChanged));return Boolean(e)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;!function(e){for(const n of e){var t;if(delete n.scopedVars,null!==(t=n.panels)&&void 0!==t&&t.length)for(const e of n.panels)delete e.scopedVars}}(this.panels);const e=this.panels.filter((e=>(!e.repeat||e.repeatedByRow)&&e.repeatPanelId));(0,a.pull)(this.panels,...e),e.map((e=>e.destroy())),this.sortPanelsByGridPos()}processRepeats(){if(!this.isSnapshotTruthy()&&this.hasVariables()){this.cleanUpRepeats();for(let e=0;e<this.panels.length;e++){const t=this.panels[e];t.repeat&&this.repeatPanel(t,e)}this.sortPanelsByGridPos(),this.events.publish(new m._B)}}cleanUpRowRepeats(e){const t=e.map((e=>e.id)),n=e.filter((e=>!e.repeat&&e.repeatPanelId&&t.includes(e.repeatPanelId)));(0,a.pull)(e,...n),(0,a.pull)(this.panels,...n)}processRowRepeats(e){var t;if(this.isSnapshotTruthy()||!this.hasVariables())return;let n=null!==(t=e.panels)&&void 0!==t?t:[];if(!e.collapsed){const t=this.panels.findIndex((t=>t.id===e.id));n=this.getRowPanels(t)}this.cleanUpRowRepeats(n);for(const e of n)if(e.repeat){const t=this.panels.findIndex((t=>t.id===e.id));this.repeatPanel(e,t)}}getPanelRepeatClone(e,t,n){var a;if(0===t)return e;const s=e.getSaveModel();s.id=this.getNextPanelId();const i=new T.r(s);return this.panels.splice(n+t,0,i),i.repeatPanelId=e.id,i.repeat=void 0,(null===(a=this.panelInView)||void 0===a?void 0:a.id)===i.id&&(i.setIsViewing(!0),this.panelInView=i),i}getRowRepeatClone(e,t,n){if(0===t){if(!e.collapsed){const t=this.getRowPanels(n);e.panels=t}return e}const s=new T.r(e.getSaveModel());let i,r;var o;e.collapsed?(i=null!==(o=(0,a.cloneDeep)(e.panels))&&void 0!==o?o:[],s.panels=i,r=n+t):(i=this.getRowPanels(n),s.panels=i.map((e=>e.getSaveModel())),r=n+(i.length+1)*t);return this.panels.splice(r,0,s),this.updateRepeatedPanelIds(s),s}repeatPanel(e,t){const n=this.getPanelRepeatVariable(e);if(!n)return;if("row"===e.type)return void this.repeatRow(e,t,n);const a=this.getSelectedVariableOptions(n),s=e.maxPerRow||4;let i=0,r=e.gridPos.y;for(let o=0;o<a.length;o++){const d=a[o];let c;c=this.getPanelRepeatClone(e,o,t),c.scopedVars??={},c.scopedVars[n.name]=d,e.repeatDirection===l.OA?(o>0&&(r+=c.gridPos.h),c.gridPos.y=r):(c.gridPos.w=Math.max(l.cz/a.length,l.cz/s),c.gridPos.x=i,c.gridPos.y=r,i+=c.gridPos.w,i+c.gridPos.w>l.cz&&(i=0,r+=c.gridPos.h))}const o=r-e.gridPos.y;if(o>0){const n=t+a.length;for(const t of this.panels.slice(n))c=t,(d=e).repeatDirection!==l.yM&&c.gridPos.x>=d.gridPos.x+d.gridPos.w&&c.gridPos.y===d.gridPos.y||(t.gridPos.y+=o)}var d,c}repeatRow(e,t,n){const a=this.getSelectedVariableOptions(n);let s=e.gridPos.y;function i(e,t){e.scopedVars??={},e.scopedVars[n.name]=t}for(let n=0;n<a.length;n++){const r=a[n],o=this.getRowRepeatClone(e,n,t);i(o,r);const l=this.getRowHeight(o),d=o.panels||[];let c;if(e.collapsed){for(const e of d)i(e,r),n>0&&this.updateRepeatedPanelIds(e,!0);o.gridPos.y+=n,s+=n,c=t+n+1}else{const e=t+(d.length+1)*n+1;d.forEach(((t,a)=>{if(i(t,r),n>0){const s=new T.r(t);this.updateRepeatedPanelIds(s,!0),s.gridPos.y+=l*n,this.panels.splice(e+a,0,s)}})),o.panels=[],o.gridPos.y+=l*n,s+=l,c=e+d.length}if(a.length>1)for(const e of this.panels.slice(c))e.gridPos.y+=s}}updateRepeatedPanelIds(e,t){return e.repeatPanelId=e.id,e.id=this.getNextPanelId(),t?e.repeatedByRow=!0:e.repeat=void 0,e}getSelectedVariableOptions(e){let t;return t=(0,x.HY)(e)?e.options.slice(1,e.options.length):(0,a.filter)(e.options,{selected:!0}),t}getRowHeight(e){if(!e.panels||0===e.panels.length)return 0;const t=e.gridPos.y,n=(0,a.map)(e.panels,"gridPos"),s=(0,a.maxBy)(n,(e=>e.y+e.h));return s.y+s.h-t}removePanel(e){this.panels=this.panels.filter((t=>t!==e)),this.events.publish(new m._B)}removeRow(e,t){(!t&&e.collapsed||t&&!e.collapsed)&&this.toggleRow(e),this.removePanel(e)}expandRows(){const e=this.panels.filter((e=>"row"===e.type&&e.collapsed));for(const t of e)this.toggleRow(t)}collapseRows(){const e=this.panels.filter((e=>"row"===e.type&&!e.collapsed));for(const t of e)this.toggleRow(t)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some((e=>2!==e.hide))||this.annotations.list.some((e=>!e.hide))}getPanelInfoById(e){const t=this.panels.findIndex((t=>t.id===e));return t>=0?{panel:this.panels[t],index:t}:null}duplicatePanel(e){const t=e.getSaveModel();return t.id=this.getNextPanelId(),delete t.repeat,delete t.repeatIteration,delete t.repeatPanelId,delete t.scopedVars,t.alert&&delete t.thresholds,delete t.alert,e.gridPos.x+2*e.gridPos.w<=l.cz?t.gridPos.x+=e.gridPos.w:t.gridPos.y+=e.gridPos.h,this.addPanel(t),t}formatDate(e,t){return(0,i.dateTimeFormat)(e,{format:t,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const e of this.panels)e.destroy()}toggleRow(e){var t;const n=(0,a.indexOf)(this.panels,e);if(!e.collapsed){const t=this.getRowPanels(n);return(0,a.pull)(this.panels,...t),e.panels=t.map((e=>e.getSaveModel())),e.collapsed=!0,t.some((e=>e.hasChanged))&&e.configRev++,void this.events.publish(new m._B)}e.collapsed=!1;const s=null!==(t=e.panels)&&void 0!==t?t:[],i=s.some((e=>e.repeat));if(s.length>0){var r;const t=(null!==(r=s[0].gridPos.y)&&void 0!==r?r:e.gridPos.y)-(e.gridPos.y+e.gridPos.h);let a=n+1,l=e.gridPos.y;for(const n of s){var o;null!==(o=n.gridPos.y)&&void 0!==o||(n.gridPos.y=e.gridPos.y),n.gridPos.y-=t,this.panels.splice(a,0,new T.r(n)),a+=1,l=Math.max(l,n.gridPos.y+n.gridPos.h)}const d=l-e.gridPos.y-1;for(const e of this.panels.slice(a))e.gridPos.y+=d;e.panels=[],i&&this.processRowRepeats(e)}this.sortPanelsByGridPos(),this.events.publish(new m._B)}getRowPanels(e){const t=this.panels.slice(e+1),n=t.findIndex((e=>"row"===e.type));return t.slice(0,n>=0?n:this.panels.length)}on(e,t){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(e,t)}off(e,t){console.log("DashboardModel.off is deprecated"),this.events.off(e,t)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return 1===this.graphTooltip}getRelativeTime(e){return(0,i.dateTimeFormatTimeAgo)(e,{timeZone:this.getTimezone()})}isSnapshot(){return void 0!==this.snapshot}getTimezone(){var e;return this.timezone?this.timezone:null===d.Vt||void 0===d.Vt||null===(e=d.Vt.user)||void 0===e?void 0:e.timezone}updateSchema(e){new k.o(this).updateSchema(e)}resetOriginalTime(){this.originalTime=(0,a.cloneDeep)(this.time)}hasTimeChanged(){const{time:e,originalTime:t}=this;return!((0,a.isEqual)(e,t)||(0,a.isEqual)((0,i.dateTime)(null==e?void 0:e.from),(0,i.dateTime)(null==t?void 0:t.from))&&(0,a.isEqual)((0,i.dateTime)(null==e?void 0:e.to),(0,i.dateTime)(null==t?void 0:t.to)))}resetOriginalVariables(){this.originalTemplating=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.cloneVariablesFrom(this.templating.list):this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(e,t){const n=Math.max(...this.panels.map((e=>e.gridPos.h+e.gridPos.y)));let a=e-55-20;this.meta.submenuEnabled&&!t&&(a-=50),t&&t!==g.UX.TV&&(a+=55);const s=n/Math.floor(a/(l.K3+l.hD));for(const e of this.panels)e.gridPos.y=Math.round(e.gridPos.y/s)||1,e.gridPos.h=Math.round(e.gridPos.h/s)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(g.RW.nq)}getPanelByUrlId(e){const t=parseInt(null!=e?e:"0",10),n=this.panels.filter((e=>e.collapsed));for(const e of n){var a;(null===(a=e.panels)||void 0===a?void 0:a.some((e=>e.id===t)))&&this.toggleRow(e)}return this.getPanelById(t)}toggleLegendsForAll(){const e=this.panels.filter(N),t=e.filter((e=>e.legend.show)).length,n=t>=e.length-t;for(const t of e)t.legend.show=!n,t.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(e){let t=!0;var n,a;d.Vt.accessControlEnabled()&&(t=e?!(null===(n=this.meta.annotationsPermissions)||void 0===n||!n.dashboard.canEdit):!(null===(a=this.meta.annotationsPermissions)||void 0===a||!a.organization.canEdit));return this.canEditDashboard()&&t}canDeleteAnnotations(e){let t=!0;var n,a;d.Vt.accessControlEnabled()&&(t=e?!(null===(n=this.meta.annotationsPermissions)||void 0===n||!n.dashboard.canDelete):!(null===(a=this.meta.annotationsPermissions)||void 0===a||!a.organization.canDelete));return t&&this.canEditDashboard()}canAddAnnotations(){var e;const t=!d.Vt.accessControlEnabled()||Boolean(null===(e=this.meta.annotationsPermissions)||void 0===e?void 0:e.dashboard.canAdd);return this.canEditDashboard()&&t}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(e,t){!(0,a.isEqual)(null==e?void 0:e.gridPos,null==t?void 0:t.gridPos)&&this.events.publish(new m._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(e){return this.getVariablesFromState(this.uid).find((t=>t.name===e.repeat))}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(e,t){if(e.length!==t.length)return!1;const n=t.map((e=>({name:e.name,type:e.type,current:(0,a.cloneDeep)(e.current),filters:(0,a.cloneDeep)(e.filters)})));return!(0,a.isEqual)(n,e)}cloneVariablesFrom(e){return e.map((e=>({name:e.name,type:e.type,current:(0,a.cloneDeep)(e.current),filters:(0,a.cloneDeep)(e.filters)})))}variablesTimeRangeProcessDoneHandler(e){const t=e.payload.variableIds.length>0;this.variablesChangedHandler(new b.x9({panelIds:[],refreshAll:!0}),t)}variablesChangedHandler(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.processRepeats(),e.payload.refreshAll||(0,y.$t)().isRefreshOutsideThreshold(this.lastRefresh)?this.startRefresh({refreshAll:!0,panelIds:[]}):((this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=e.payload.panelIds.filter((e=>{var t,n,a;return e!==(null!==(t=null===(n=this.panelInEdit)||void 0===n?void 0:n.id)&&void 0!==t?t:null===(a=this.panelInView)||void 0===a?void 0:a.id)}))),this.startRefresh(e.payload))}variablesChangedInUrlHandler(e){this.templateVariableValueUpdated(),this.startRefresh(e.payload)}}function N(e){return Boolean(e.legend)}I(O,"nonPersistedProperties",{events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0})},28283:(e,t,n)=>{"use strict";n.d(t,{J:()=>w,r:()=>x});var a=n(82897),s=n(34110),i=n(43215),r=n(90923),o=n(78837),l=n(62236),d=n(65184),c=n(21169),u=n(78338),h=n(18397),p=n(75478),g=n(95225);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},v={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},b={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""};class x{constructor(e){m(this,"id",void 0),m(this,"gridPos",void 0),m(this,"type",void 0),m(this,"title",void 0),m(this,"alert",void 0),m(this,"scopedVars",void 0),m(this,"repeat",void 0),m(this,"repeatIteration",void 0),m(this,"repeatPanelId",void 0),m(this,"repeatDirection",void 0),m(this,"repeatedByRow",void 0),m(this,"maxPerRow",void 0),m(this,"collapsed",void 0),m(this,"panels",void 0),m(this,"transformations",void 0),m(this,"datasource",null),m(this,"thresholds",void 0),m(this,"pluginVersion",void 0),m(this,"snapshotData",void 0),m(this,"timeFrom",void 0),m(this,"timeShift",void 0),m(this,"hideTimeOverride",void 0),m(this,"maxDataPoints",void 0),m(this,"interval",void 0),m(this,"description",void 0),m(this,"links",void 0),m(this,"libraryPanel",void 0),m(this,"autoMigrateFrom",void 0),m(this,"isViewing",!1),m(this,"isEditing",!1),m(this,"isInView",!1),m(this,"configRev",0),m(this,"hasSavedPanelEditChange",void 0),m(this,"hasRefreshed",void 0),m(this,"cacheTimeout",void 0),m(this,"cachedPluginOptions",{}),m(this,"legend",void 0),m(this,"plugin",void 0),m(this,"key",void 0),m(this,"events",void 0),m(this,"queryRunner",void 0),this.events=new i.EventBusSrv,this.restoreModel(e),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,s.Z)()}restoreModel(e){var t;for(const t in this)!f[t]&&this.hasOwnProperty(t)&&(e[t]||"function"!=typeof this[t]&&"symbol"!=typeof this[t]&&delete this[t]);for(const t in e)this[t]=e[t];switch(this.type){case"graph":null!==o.ZP&&void 0!==o.ZP&&null!==(t=o.ZP.featureToggles)&&void 0!==t&&t.autoMigrateGraphPanels&&(this.autoMigrateFrom=this.type,this.type="timeseries");break;case"heatmap-new":this.autoMigrateFrom=this.type,this.type="heatmap"}(0,a.defaultsDeep)(this,(0,a.cloneDeep)(b)),this.ensureQueryIds()}generateNewKey(){this.key=(0,s.Z)()}ensureQueryIds(){if(this.targets&&(0,a.isArray)(this.targets))for(const e of this.targets)e.refId||(e.refId=(0,d.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(e){this.options=e,this.configRev++,this.events.publish(new c.Wj),this.render()}updateFieldConfig(e){this.fieldConfig=e,this.configRev++,this.events.publish(new c.Wj),this.resendLastResult(),this.render()}getSaveModel(){const e={};for(const t in this)!f[t]&&this.hasOwnProperty(t)&&((0,a.isEqual)(this[t],b[t])||(e[t]=(0,a.cloneDeep)(this[t])));return e}setIsViewing(e){this.isViewing=e}updateGridPos(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.x===this.gridPos.x&&e.y===this.gridPos.y&&e.h===this.gridPos.h&&e.w===this.gridPos.w||(this.gridPos.x=e.x,this.gridPos.y=e.y,this.gridPos.w=e.w,this.gridPos.h=e.h,t&&this.configRev++)}runAllPanelQueries(e,t,n,a,s){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:e,publicDashboardAccessToken:s,timezone:t,timeRange:n.timeRange,timeInfo:n.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(a),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations})}refresh(){this.hasRefreshed=!0,this.events.publish(new r.RefreshEvent)}render(){this.hasRefreshed?this.events.publish(new c._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce(((e,t)=>f[t]||v[t]?e:Object.assign({},e,{[t]:this[t]})),{})}restorePanelOptions(e){const t=this.cachedPluginOptions[e];t&&(Object.keys(t.properties).map((e=>{this[e]=t.properties[e]})),this.fieldConfig=(0,g.__)(this.fieldConfig,t.fieldConfig))}applyPluginOptionDefaults(e,t){const n=(0,g.d4)({plugin:e,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:t});this.fieldConfig=n.fieldConfig,this.options=n.options}pluginLoaded(e){this.plugin=e;const t=y(e);if(this.autoMigrateFrom){const t="graph"===this.autoMigrateFrom;this.callPanelTypeChangeHandler(e,this.autoMigrateFrom,this.getOptionsToRemember(),t),delete this.autoMigrateFrom}e.onPanelMigration&&t!==this.pluginVersion&&(this.options=e.onPanelMigration(this),this.pluginVersion=t),this.applyPluginOptionDefaults(e,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const e of(0,a.keys)(this))v[e]||delete this[e];this.options={},this.fieldConfig={defaults:Object.assign({},this.fieldConfig.defaults,{custom:{}}),overrides:(0,g.aS)(this.fieldConfig.overrides,g._k)}}callPanelTypeChangeHandler(e,t,n,a){if(e.onPanelTypeChanged){const s=a?{angular:n}:n.options;Object.assign(this.options,e.onPanelTypeChanged(this,t,s,this.fieldConfig))}}changePlugin(e){const t=e.meta.id,n=this.getOptionsToRemember(),a=this.fieldConfig,s=this.type,i=this.isAngularPlugin();this.cachedPluginOptions[s]={properties:n,fieldConfig:a},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(t),this.callPanelTypeChangeHandler(e,s,n,i),this.type=t,this.plugin=e,this.configRev++,this.applyPluginOptionDefaults(e,!0),e.onPanelMigration&&(this.pluginVersion=y(e))}updateQueries(e){var t,n,a;const{dataSource:s}=e;this.datasource={uid:s.uid,type:s.type},this.cacheTimeout=e.cacheTimeout,this.timeFrom=null===(t=e.timeRange)||void 0===t?void 0:t.from,this.timeShift=null===(n=e.timeRange)||void 0===n?void 0:n.shift,this.hideTimeOverride=null===(a=e.timeRange)||void 0===a?void 0:a.hide,this.interval=e.minInterval,this.maxDataPoints=e.maxDataPoints,this.targets=e.queries,this.configRev++,this.events.publish(new c.pO)}addQuery(e){(e=e||{refId:"A"}).refId=(0,d.Hs)(this.targets),this.targets.push(e),this.configRev++}changeQuery(e,t){e.refId=this.targets[t].refId,this.configRev++,this.targets=this.targets.map(((n,a)=>a===t?e:n))}getEditClone(){const e=this.getSaveModel(),t=new x(e);t.isEditing=!0,t.plugin=this.plugin;const n=this.getQueryRunner();return t.getQueryRunner().useLastResultFrom(n),t}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:o.ZP.theme2}}getDataSupport(){var e,t;return null!==(e=null===(t=this.plugin)||void 0===t?void 0:t.dataSupport)&&void 0!==e?e:{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new u.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return void 0!==(this.plugin&&this.plugin.angularPanelCtrl)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(e){this.transformations=e,this.resendLastResult(),this.configRev++,this.events.publish(new c.Xw)}setProperty(e,t){this[e]=t,this.configRev++,"repeat"===e&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(e,t,n){const a=this.getQueryRunner().getLastRequest(),s=Object.assign({},this.scopedVars,null==a?void 0:a.scopedVars,t),o=(0,h.c)(s),l=i.urlUtil.toUrlParams(o),d=i.urlUtil.toUrlParams((0,p.$t)().timeRangeForUrl());return s[i.DataLinkBuiltInVars.keepTime]={text:d,value:d},s[i.DataLinkBuiltInVars.includeVars]={text:l,value:l},(0,r.getTemplateSrv)().replace(e,s,n)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}}function y(e){return e&&e.meta.info.version?e.meta.info.version:o.ZP.buildInfo.version}function w(e){const t={};return Object.entries(e).filter((t=>{let[n,s]=t;return!f[n]&&e.hasOwnProperty(n)&&!(0,a.isEqual)(s,b[n])})).forEach((e=>{let[n,a]=e;t[n]=a})),(0,l.Xh)(t)}},62736:(e,t,n)=>{"use strict";n.d(t,{$j:()=>f,Qk:()=>g,RF:()=>p,Yq:()=>m,f4:()=>y,fG:()=>v,lw:()=>b,qm:()=>u,tM:()=>x});var a=n(90923),s=n(36537),i=n(58257),r=n(10603),o=n(72192),l=n(57358),d=n(75478),c=n(86380);function u(e){return async t=>{const n=await(0,a.getBackendSrv)().get(`/api/dashboards/id/${e}/permissions`);t((0,c.O0)(n))}}function h(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function p(e,t,n){return async(s,i)=>{const{dashboard:r}=i(),o=[];for(const e of r.permissions){if(e.inherited)continue;const a=h(e);t===e&&(a.permission=n),o.push(a)}await(0,a.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:o}),await s(u(e))}}function g(e,t){return async(n,s)=>{const i=s().dashboard,r=[];for(const e of i.permissions)e.inherited||e===t||r.push(h(e));await(0,a.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:r}),await n(u(e))}}function m(e,t){return async(n,s)=>{const{dashboard:i}=s(),r=[];for(const e of i.permissions)e.inherited||r.push(h(e));r.push({userId:t.userId,teamId:t.teamId,role:t.role,permission:t.permission}),await(0,a.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:r}),await n(u(e))}}function f(e,t){return async n=>{await(0,a.getBackendSrv)().post("/api/dashboards/import",e),n((0,s.$l)((0,i.AT)("Dashboard Imported",t))),n((0,o.m3)())}}function v(e){return async t=>{await(0,a.getBackendSrv)().delete(`/api/dashboards/uid/${e}`),t((0,o.m3)())}}const b=()=>(e,t)=>{const n=t().dashboard.getModel();n&&(n.destroy(),e((0,l.wX)(n.uid))),(0,d.$t)().stopAutoRefresh(),e((0,c.sG)())},x=e=>t=>{t((0,r.YT)(e)),(0,d.$t)().refreshTimeModel()},y=e=>t=>{t((0,r.zW)(e)),(0,d.$t)().refreshTimeModel()}},95225:(e,t,n)=>{"use strict";n.d(t,{__:()=>d,_k:()=>u,aS:()=>r,d4:()=>i});var a=n(82897),s=n(43215);function i(e){let{plugin:t,currentOptions:n,currentFieldConfig:i,isAfterPluginChange:d}=e;const c=(0,a.mergeWith)({},t.defaults,n||{},((e,t)=>{if((0,a.isArray)(t))return t})),u=function(e,t){var n;const s=t.fieldConfigDefaults,i={defaults:(0,a.mergeWith)({},s.defaults,e?e.defaults:{},((e,t)=>{if((0,a.isArray)(t))return t})),overrides:null!==(n=null==e?void 0:e.overrides)&&void 0!==n?n:[]};o(i.defaults,"",t.fieldConfigRegistry),i.defaults.thresholds&&l(i.defaults.thresholds);i.overrides=r(i.overrides,(e=>void 0!==t.fieldConfigRegistry.getIfExists(e.id)));for(const e of i.overrides)for(const t of e.properties)"thresholds"===t.id&&l(t.value);return i}(i,t),h=function(e,t,n){if(!n)return t;const a=e.fieldConfigRegistry.getIfExists(s.FieldConfigProperty.Color);if(a&&a.settings){var i;const e=a.settings,n=s.fieldColorModeRegistry.getIfExists(null===(i=t.defaults.color)||void 0===i?void 0:i.mode);if(!e.byValueSupport&&(!n||n.isByValue))return t.defaults.color={mode:s.FieldColorModeId.PaletteClassic},t;if(e.byValueSupport&&e.preferThresholdsMode&&(null==n?void 0:n.id)!==s.FieldColorModeId.Fixed&&(!n||!n.isByValue))return t.defaults.color={mode:s.FieldColorModeId.Thresholds},t;if(e.bySeriesSupport&&null!=n&&n.isByValue)return t.defaults.color={mode:s.FieldColorModeId.PaletteClassic},t}return t}(t,u,d);return{options:c,fieldConfig:h}}function r(e,t){return e.map((e=>{const n=e.properties.filter(t);return Object.assign({},e,{properties:n})})).filter((e=>e.properties.length>0))}function o(e,t,n){let s=!1;for(const i of Object.keys(e)){const r=e[i],l=`${t}${i}`,d=!!n.getIfExists(l);if(d)s=!0;else if((0,a.isArray)(r)||!(0,a.isObject)(r))d||(0,a.unset)(e,i);else{o(r,`${l}.`,n)||(0,a.unset)(e,i)}}return s}function l(e){e.mode||(e.mode=s.ThresholdsMode.Absolute),e.steps?e.steps.length&&(e.steps[0].value=-1/0):e.steps=[]}function d(e,t){const n={defaults:Object.assign({},e.defaults,{custom:t.defaults.custom}),overrides:[...e.overrides]};for(const e of t.overrides)for(const t of e.properties)if(c(t)){const s=n.overrides.find((t=>(0,a.isEqual)(t.matcher,e.matcher)));s?s!==e&&s.properties.push(t):n.overrides.push(e)}return n}function c(e){return e.id.startsWith("custom.")}function u(e){return!c(e)}},74267:(e,t,n)=>{"use strict";n.d(t,{r:()=>a.r});n(41169);var a=n(28283)},86380:(e,t,n)=>{"use strict";n.d(t,{Nv:()=>p,O0:()=>d,ZP:()=>f,dS:()=>h,jA:()=>u,sG:()=>g,sf:()=>c,tq:()=>m});var a=n(35140),s=n(8590),i=n(47570),r=n(41169);const o={initPhase:i.bG.NotStarted,getModel:()=>null,permissions:[],initError:null},l=(0,a.oM)({name:"dashboard",initialState:o,reducers:{loadDashboardPermissions:(e,t)=>{e.permissions=(0,s.A)(t.payload)},dashboardInitFetching:e=>{e.initPhase=i.bG.Fetching},dashboardInitServices:e=>{e.initPhase=i.bG.Services},dashboardInitCompleted:(e,t)=>{e.getModel=()=>t.payload,e.initPhase=i.bG.Completed},dashboardInitFailed:(e,t)=>{e.initPhase=i.bG.Failed,e.initError=t.payload,e.getModel=()=>new r.f({title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:e=>{e.initPhase=i.bG.NotStarted,e.initError=null,e.getModel=()=>null},addPanel:(e,t)=>{}}}),{loadDashboardPermissions:d,dashboardInitFetching:c,dashboardInitFailed:u,dashboardInitCompleted:h,dashboardInitServices:p,cleanUpDashboard:g,addPanel:m}=l.actions,f={dashboard:l.reducer}},60301:(e,t,n)=>{"use strict";n.d(t,{Kq:()=>w,Po:()=>y,W1:()=>C,WJ:()=>v,bY:()=>x,jN:()=>b,oe:()=>j,qw:()=>S});var a=n(82897),s=n(43215),i=n(90923),r=n(5831),o=n(78837),l=n(65747),d=n(17421),c=n(30969),u=n(28283),h=n(52595),p=n(36333),g=n(68897),m=n(56340),f=n(21169);const v=(e,t,n)=>{if(!1===n)e.removePanel(t),(0,m.WI)((0,g.qj)(t.key));else{const n=t.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,a=t.alert?"YES":void 0;r.Z.publish(new f.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:n,icon:"trash-alt",confirmText:a,yesText:"Remove",onConfirm:()=>v(e,t,!1)}))}},b=(e,t)=>{e.duplicatePanel(t)},x=e=>{let t=e;e instanceof u.r&&(t=e.getSaveModel()),d.Z.set(l.zF,JSON.stringify(t)),r.Z.emit(s.AppEvents.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},y=(e,t)=>{r.Z.publish(new f.Dn({component:c.V8,props:{dashboard:e,panel:t}}))},w=(e,t)=>{r.Z.publish(new f.Dn({component:h.c,props:{panel:t,initialFolderId:e.meta.folderId,isOpen:!0}}))},j=e=>{r.Z.publish(new f.Dn({component:p.i,props:{onConfirm:()=>{delete e.libraryPanel,e.render()},isOpen:!0}}))},S=e=>{const t=Object.assign({},e.options);!0===t.legend.showLegend?t.legend.showLegend=!1:t.legend.showLegend=!0,e.updateOptions(t)};function C(e,t){const n={timeInfo:"",timeRange:t};if(e.timeFrom){const r=(0,i.getTemplateSrv)().replace(e.timeFrom,e.scopedVars),o=s.rangeUtil.describeTextRange(r);if(o.invalid)return n.timeInfo="invalid time override",n;if((0,a.isString)(t.raw.from)){const e=s.dateMath.parse(o.from);n.timeInfo=o.display,n.timeRange={from:e,to:s.dateMath.parse(o.to),raw:{from:o.from,to:o.to}}}}if(e.timeShift){const t=(0,i.getTemplateSrv)().replace(e.timeShift,e.scopedVars);if(s.rangeUtil.describeTextRange(t).invalid)return n.timeInfo="invalid timeshift",n;const a="-"+t;n.timeInfo+=" timeshift "+a;const r=s.dateMath.parseDateMath(a,n.timeRange.from,!1),o=s.dateMath.parseDateMath(a,n.timeRange.to,!0);n.timeRange={from:r,to:o,raw:{from:r,to:o}}}return e.hideTimeOverride&&(n.timeInfo=""),n}},79383:(e,t,n)=>{"use strict";n.d(t,{D:()=>a,D3:()=>s,Z6:()=>i});const a="grafana-easystart-app",s="data-connections";let i;!function(e){e.DataSources="/data-connections/datasources",e.DataSourcesNew="/data-connections/datasources/new",e.DataSourcesEdit="/data-connections/datasources/edit/:uid",e.DataSourcesDashboards="/data-connections/datasources/edit/:uid/dashboards",e.Plugins="/data-connections/plugins",e.CloudIntegrations="/data-connections/cloud-integrations",e.RecordedQueries="/data-connections/recorded-queries"}(i||(i={}))},78507:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});const a={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},75375:(e,t,n)=>{"use strict";n.d(t,{Aq:()=>y,BX:()=>p,CT:()=>v,Ht:()=>h,Ww:()=>l,ZP:()=>w,be:()=>r,iZ:()=>f,jS:()=>o,j_:()=>b,ng:()=>x,rl:()=>i,wZ:()=>d,yr:()=>g,zT:()=>c});var a=n(35140);const s={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n(43215).LayoutModes.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{}},i=(0,a.PH)("dataSources/dataSourceLoaded"),r=(0,a.PH)("dataSources/dataSourcesLoaded"),o=(0,a.PH)("dataSources/dataSourceMetaLoaded"),l=(0,a.PH)("dataSources/dataSourcePluginsLoad"),d=(0,a.PH)("dataSources/dataSourcePluginsLoaded"),c=(0,a.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,a.PH)("dataSources/setDataSourcesLayoutMode"),h=(0,a.PH)("dataSources/setDataSourceTypeSearchQuery"),p=(0,a.PH)("dataSources/setDataSourceName"),g=(0,a.PH)("dataSources/setIsDefault"),m={testingStatus:{},loadError:null,loading:!0,plugin:null},f=(0,a.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),v=(0,a.PH)("dataSourceSettings/initDataSourceSettingsFailed"),b=(0,a.PH)("dataSourceSettings/testDataSourceStarting"),x=(0,a.PH)("dataSourceSettings/testDataSourceSucceeded"),y=(0,a.PH)("dataSourceSettings/testDataSourceFailed"),w={dataSources:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;return r.match(t)?Object.assign({},e,{hasFetched:!0,dataSources:t.payload,dataSourcesCount:t.payload.length}):i.match(t)?Object.assign({},e,{dataSource:t.payload}):c.match(t)?Object.assign({},e,{searchQuery:t.payload}):u.match(t)?Object.assign({},e,{layoutMode:t.payload}):l.match(t)?Object.assign({},e,{plugins:[],isLoadingDataSources:!0}):d.match(t)?Object.assign({},e,{plugins:t.payload.plugins,categories:t.payload.categories,isLoadingDataSources:!1}):h.match(t)?Object.assign({},e,{dataSourceTypeSearchQuery:t.payload}):o.match(t)?Object.assign({},e,{dataSourceMeta:t.payload}):p.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{name:t.payload})}):g.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{isDefault:t.payload})}):e},dataSourceSettings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return f.match(t)?Object.assign({},e,{plugin:t.payload,loadError:null,loading:!1}):v.match(t)?Object.assign({},e,{plugin:null,loadError:t.payload.message,loading:!1}):b.match(t)?Object.assign({},e,{testingStatus:{message:"Testing...",status:"info"}}):x.match(t)?Object.assign({},e,{testingStatus:{status:null===(n=t.payload)||void 0===n?void 0:n.status,message:null===(a=t.payload)||void 0===a?void 0:a.message,details:null===(s=t.payload)||void 0===s?void 0:s.details}}):y.match(t)?Object.assign({},e,{testingStatus:{status:"error",message:null===(i=t.payload)||void 0===i?void 0:i.message,details:null===(r=t.payload)||void 0===r?void 0:r.details}}):e;var n,a,s,i,r}}},40018:(e,t,n)=>{"use strict";n.d(t,{L:()=>d});var a=n(36636),s=n(68404),i=n(3490),r=n(74562),o=n(45916);const l={label:"Fixed color",value:"_____fixed_____"},d=e=>{var t;const{value:n,context:a,onChange:d}=e,u="dark-green",h=(0,i.useStyles2)(c),p=null==n?void 0:n.field,g=Boolean(!p),m=(0,r.IX)(a.data),f=(0,r.nw)(m,p,l),v=(0,s.useCallback)((e=>{const t=e.value;if(t&&t!==l.value)d(Object.assign({},n,{field:t}));else{var a;const e=null!==(a=null==n?void 0:n.fixed)&&void 0!==a?a:u;d(Object.assign({},n,{field:void 0,fixed:e}))}}),[d,n]),b=(0,s.useCallback)((e=>{d({field:void 0,fixed:null!=e?e:u})}),[d]),x=g?l:f.find((e=>e.value===p));return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:h.container,children:[(0,o.jsx)(i.Select,{value:x,options:f,onChange:v,noOptionsMessage:"No fields found"}),g&&(0,o.jsx)("div",{className:h.picker,children:(0,o.jsx)(i.ColorPicker,{color:null!==(t=null==n?void 0:n.fixed)&&void 0!==t?t:u,onChange:b,enableNamedColors:!0})})]})})},c=e=>({container:a.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:a.css`
    padding-left: 8px;
  `})},10707:(e,t,n)=>{"use strict";n.d(t,{E:()=>M});var a,s,i=n(36636),r=n(68404),o=n(17377),l=n(3490),d=n(32848),c=n(49906),u=n(16386),h=n(50984),p=n(40059),g=n(63805),m=n(90923),f=n(78837),v=n(45916);function b(e){let{secondaryText:t="Drag and drop here or browse"}=e;const n=(0,l.useStyles2)(y);return(0,v.jsxs)("div",{className:n.iconWrapper,children:[(0,v.jsx)("small",{className:n.small,children:t}),a||(a=(0,v.jsx)(l.Button,{type:"button",icon:"upload",children:"Upload"}))]})}const x=e=>{let{mediaType:t,setFormData:n,setUpload:a,error:i}=e;const d=(0,l.useStyles2)(y),[c,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),m=()=>(0,v.jsx)(l.Field,{label:"Preview",children:(0,v.jsxs)("div",{className:d.iconPreview,children:[t===u.DD.Icon&&(0,v.jsx)(o.Z,{src:p,className:d.img}),t===u.DD.Image&&(0,v.jsx)("img",{src:p,className:d.img})]})}),f="icon"===t?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return(0,v.jsx)(l.FileDropzone,{readAs:"readAsBinaryString",onFileRemove:e=>{fetch(`/api/storage/delete/upload/${e.file.name}`,{method:"DELETE"}).catch((e=>console.error("cannot delete file",e)))},options:{accept:f,multiple:!1,onDrop:e=>{let t=new FormData;t.append("file",e[0]),g(URL.createObjectURL(e[0])),h(!0),n(t),a(!0)}},children:""!==i.message&&c?(0,v.jsx)("p",{children:i.message}):c?(0,v.jsx)(m,{}):s||(s=(0,v.jsx)(b,{}))})};function y(e,t){return{container:i.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:i.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${e.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${e.colors.border.medium};
      background-color: ${t?e.colors.background.secondary:e.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:i.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:i.css`
      margin: ${e.spacing(2,0,1)};
    `,small:i.css`
      color: ${e.colors.text.secondary};
      margin-bottom: ${e.spacing(2)};
    `,iconContainer:i.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:i.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${e.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:i.css`
      width: 147px;
      height: 147px;
      fill: ${e.colors.text.primary};
    `}}var w=n(67436),j=n(87723),S=n(62859);function C(e){const{columnIndex:t,rowIndex:n,style:a,data:s}=e,{cards:r,columnCount:d,onChange:c,selected:u}=s,h=r[t+n*d],p=(0,l.useTheme2)(),g=k(p);return(0,v.jsx)("div",{style:a,children:h&&(0,v.jsxs)("div",{className:u===h.value?(0,i.cx)(g.card,g.selected):g.card,onClick:()=>c(h.value),children:[h.imgUrl.endsWith(".svg")?(0,v.jsx)(o.Z,{src:h.imgUrl,className:g.img}):(0,v.jsx)("img",{src:h.imgUrl,className:g.img}),(0,v.jsx)("h6",{className:g.text,children:h.label.slice(0,-4)})]},h.value)})}const k=(0,l.stylesFactory)((e=>({card:i.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${e.colors.action.hover};
        box-shadow: ${e.shadows.z2};
      }
    `,selected:i.css`
      border: 2px solid ${e.colors.primary.main};
      :hover {
        border-color: ${e.colors.primary.main};
      }
    `,img:i.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${e.colors.text.primary};
    `,text:i.css`
      color: ${e.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:i.css`
      border: 1px solid ${e.colors.border.medium};
    `}))),T=e=>{const{onChange:t,cards:n,value:a}=e,s=(0,l.useTheme2)(),i=k(s);return(0,v.jsx)(j.Z,{defaultWidth:680,children:e=>{let{width:s,height:o}=e;const l=Math.floor(s/90),d=Math.ceil(n.length/l);return(0,v.jsx)(S.Ym,{width:s,height:o,columnCount:l,columnWidth:90,rowCount:d,rowHeight:90,itemData:{cards:n,columnCount:l,onChange:t,selected:a},className:i.grid,children:(0,r.memo)(C,S.wy)})}})},I=e=>{const{value:t,mediaType:n,folderName:a,newValue:s,setNewValue:i}=e,o=(0,l.useStyles2)(O),d=(e=>e===u.DD.Icon?[u.QS.Icon,u.QS.IOT,u.QS.Marker]:[u.QS.BG])(n).map((e=>({label:e,value:e}))),[c,h]=(0,r.useState)(),[p,g]=(0,r.useState)(((e,t)=>{var n;return null!==(n=e.find((e=>t.startsWith(e.value))))&&void 0!==n?n:e[0]})(d,null!=t&&t.length?t:a)),[m,f]=(0,r.useState)([]),[b,x]=(0,r.useState)([]);return(0,r.useEffect)((()=>{const e=null==p?void 0:p.value;if(e){const t=n===u.DD.Icon?e=>e.name.endsWith(".svg"):e=>e.name.endsWith(".png")||e.name.endsWith(".gif");(0,w.ak)().get("-- Grafana --").then((n=>{n.listFiles(e).subscribe({next:n=>{const a=[];n.forEach((n=>{if(t(n)){const t=n.name.lastIndexOf(".");a.push({value:`${e}/${n.name}`,label:n.name,search:(t?n.name.substring(0,t):n.name).toLowerCase(),imgUrl:`public/${e}/${n.name}`})}})),f(a),x(a)}})}))}}),[n,p]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.Field,{children:(0,v.jsx)(l.Select,{options:d,onChange:g,value:p})}),(0,v.jsx)(l.Field,{children:(0,v.jsx)(l.FilterInput,{value:null!=c?c:"",placeholder:"Search",onChange:e=>{var t;(t=e)?(t=t.toLowerCase(),x(m.filter((e=>e.search.includes(t))))):x(m),h(e)}})}),b&&(0,v.jsx)("div",{className:o.cardsWrapper,children:(0,v.jsx)(T,{cards:b,onChange:e=>i(e),value:s})})]})},O=e=>({cardsWrapper:i.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `}),N=e=>{const{newValue:t,setNewValue:n,mediaType:a}=e,s=(0,l.useStyles2)(F),i=(0,c.t)(t);let r=null==t?void 0:t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));return r.length>20&&(r=r.substring(0,20)+"..."),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.Field,{children:(0,v.jsx)(l.Input,{onChange:e=>n(e.currentTarget.value),value:t})}),(0,v.jsxs)("div",{className:s.iconContainer,children:[(0,v.jsx)(l.Field,{label:"Preview",children:(0,v.jsxs)("div",{className:s.iconPreview,children:[a===u.DD.Icon&&(0,v.jsx)(o.Z,{src:i,className:s.img}),a===u.DD.Image&&t&&(0,v.jsx)("img",{src:i,className:s.img})]})}),(0,v.jsx)(l.Label,{children:r})]})]})},F=e=>({iconContainer:i.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:i.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${e.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:i.css`
    width: 147px;
    height: 147px;
    fill: ${e.colors.text.primary};
  `}),D=e=>{var t,n,a;const{value:s,onChange:i,mediaType:o,folderName:d}=e,c=(0,l.useStyles2)(P),b=()=>{i(s)},y=(0,r.createRef)(),{dialogProps:w}=(0,h.R)({},y),{overlayProps:j}=(0,g.Ir)({onClose:b,isDismissable:!0,isOpen:!0},y),[S,C]=(0,r.useState)(null!=s?s:""),[k,T]=(0,r.useState)(u.hQ.Folder),[O,F]=(0,r.useState)(new FormData),[D,A]=(0,r.useState)(!1),[M,R]=(0,r.useState)({message:""}),$=e=>`${c.resourcePickerPopoverTab} ${k===e&&c.resourcePickerPopoverActiveTab}`,L=()=>t||(t=(0,v.jsx)(I,{value:s,mediaType:o,folderName:d,newValue:S,setNewValue:C}));return(0,v.jsx)(p.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,v.jsx)("section",Object.assign({ref:y},j,w,{children:(0,v.jsxs)("div",{className:c.resourcePickerPopover,children:[(0,v.jsxs)("div",{className:c.resourcePickerPopoverTabs,children:[(0,v.jsx)("button",{className:$(u.hQ.Folder),onClick:()=>T(u.hQ.Folder),children:"Folder"}),(0,v.jsx)("button",{className:$(u.hQ.URL),onClick:()=>T(u.hQ.URL),children:"URL"})]}),(0,v.jsxs)("div",{className:c.resourcePickerPopoverContent,children:[(()=>{switch(k){case u.hQ.Folder:return L();case u.hQ.URL:return n||(n=(0,v.jsx)(N,{newValue:S,setNewValue:C,mediaType:o}));case u.hQ.Upload:return a||(a=(0,v.jsx)(x,{mediaType:o,setFormData:F,setUpload:A,newValue:S,error:M}));default:return L()}})(),(0,v.jsxs)(l.ButtonGroup,{className:c.buttonGroup,children:[(0,v.jsx)(l.Button,{className:c.button,variant:"secondary",onClick:()=>b(),children:"Cancel"}),(0,v.jsx)(l.Button,{className:c.button,variant:S&&S!==s?"primary":"secondary",onClick:()=>{D?fetch("/api/storage/upload",{method:"POST",body:O}).then((e=>e.status>=400?void e.json().then((e=>R(e))):e.json())).then((e=>{(0,m.getBackendSrv)().get(`api/storage/read/${e.path}`).then((()=>C(`${f.vc.appUrl}api/storage/read/${e.path}`))).then((()=>i(`${f.vc.appUrl}api/storage/read/${e.path}`)))})).catch((e=>console.error(e))):i(S)},children:"Select"})]})]})]})}))})},P=e=>({resourcePickerPopover:i.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};
  `,resourcePickerPopoverTab:i.css`
    width: 50%;
    text-align: center;
    padding: ${e.spacing(1,0)};
    background: ${e.colors.background.secondary};
    color: ${e.colors.text.secondary};
    font-size: ${e.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:i.css`
    color: ${e.colors.text.primary};
    font-weight: ${e.typography.fontWeightMedium};
    background: ${e.colors.background.primary};
  `,resourcePickerPopoverContent:i.css`
    width: 315px;
    font-size: ${e.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${e.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:i.css`
    display: flex;
    width: 100%;
    border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
  `,buttonGroup:i.css`
    align-self: center;
    flex-direction: row;
  `,button:i.css`
    margin: 12px 20px 5px;
  `});var A;const M=e=>{var t;const{value:n,src:a,name:s,placeholder:i,onChange:h,onClear:p,mediaType:g,folderName:m,size:f,color:b}=e,x=(0,l.useStyles2)(R),y=(0,l.useTheme2)(),w=(0,r.createRef)(),j=(0,v.jsx)(D,{onChange:h,value:n,mediaType:g,folderName:m});let S=a;!S&&n&&(S=(0,c.t)(n));const C=b&&{fill:y.visualization.getColorByName(b)};return(0,v.jsx)(l.PopoverController,{content:j,children:(e,a,r)=>(0,v.jsxs)(v.Fragment,{children:[w.current&&(0,v.jsx)(l.Popover,Object.assign({},r,{referenceElement:w.current,onMouseEnter:e,onKeyDown:e=>{(0,d.i)(e,a)}})),(0,v.jsxs)("div",{ref:w,onClick:e,className:x.pointer,children:[f===u.zc.SMALL&&(n&&S?(0,v.jsx)(o.Z,{src:S,className:x.icon,style:Object.assign({},C)}):A||(A=(0,v.jsx)(l.LinkButton,{variant:"primary",fill:"text",size:"sm",children:"Set icon"}))),f===u.zc.NORMAL&&(0,v.jsx)(l.InlineFieldRow,{children:(0,v.jsx)(l.InlineField,{label:null,grow:!0,children:(0,v.jsx)(l.Input,{value:s,placeholder:i,readOnly:!0,prefix:S&&(0,v.jsx)(o.Z,{src:S,className:x.icon,style:Object.assign({},C)}),suffix:t||(t=(0,v.jsx)(l.Button,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:p}))})})})]})]})})},R=e=>({pointer:i.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:i.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},31791:(e,t,n)=>{"use strict";n.d(t,{$:()=>h});var a=n(68404),s=n(3490),i=n(25296),r=n(39041),o=n(16386),l=n(45916);const d=[{label:"Fixed",value:o.xy.Fixed,description:"Fixed value"},{label:"Field",value:o.xy.Field,description:"Display field value"}],c={settings:{}},u={settings:{}},h=e=>{var t,n;const{value:h,context:p,onChange:g}=e,[m,f]=(0,a.useState)(0),v=(0,a.useCallback)((e=>{g(Object.assign({},h,{mode:e}))}),[g,h]),b=(0,a.useCallback)((e=>{g(Object.assign({},h,{field:e}))}),[g,h]),x=(0,a.useCallback)((e=>{g(Object.assign({},h,{fixed:e}))}),[g,h]),y=null!==(t=null==h?void 0:h.mode)&&void 0!==t?t:o.xy.Fixed;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.InlineFieldRow,{children:(0,l.jsx)(s.InlineField,{label:"Source",labelWidth:9,grow:!0,children:(0,l.jsx)(s.RadioButtonGroup,{value:y,options:d,onChange:v,fullWidth:!0})})}),y!==o.xy.Fixed&&(0,l.jsx)(s.InlineFieldRow,{children:(0,l.jsx)(s.InlineField,{label:"Field",labelWidth:9,grow:!0,children:(0,l.jsx)(i.b,{context:p,value:null!==(n=h.field)&&void 0!==n?n:"",onChange:b,item:c})})}),y===o.xy.Fixed&&(0,l.jsx)(s.InlineFieldRow,{children:(0,l.jsx)(s.InlineField,{label:"Value",labelWidth:9,grow:!0,children:(0,l.jsx)(r.A,{context:p,value:null==h?void 0:h.fixed,onChange:x,item:u,suffix:(null==h?void 0:h.fixed)&&(0,l.jsx)(s.Button,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:()=>{x(""),f(m+1)}})})})},m),y===o.xy.Template&&(0,l.jsx)(s.InlineFieldRow,{children:(0,l.jsx)(s.InlineField,{label:"Template",labelWidth:9,grow:!0,children:(0,l.jsx)(r.A,{context:p,value:null==h?void 0:h.fixed,onChange:x,item:u})})})]})}},85282:(e,t,n)=>{"use strict";n.d(t,{Lm:()=>a.L,Lv:()=>g,k9:()=>T,cL:()=>w,$2:()=>O.$});var a=n(40018),s=n(68404),i=(n(90923),n(3490)),r=n(45916);var o,l=n(25296),d=n(48567),c=n(16386),u=n(10707);const h=[{label:"Fixed",value:c.Q8.Fixed,description:"Fixed value"},{label:"Field",value:c.Q8.Field,description:"Use a string field result"}],p={settings:{}},g=e=>{var t,n,a,g,f,v,b,x,y,w,j;const{value:S,context:C,onChange:k,item:T}=e,I=(0,s.useCallback)((e=>{k(Object.assign({},S,{mode:e}))}),[k,S]),O=(0,s.useCallback)((e=>{k(Object.assign({},S,{field:e}))}),[k,S]),N=(0,s.useCallback)((e=>{k(Object.assign({},S,{fixed:null!=e?e:""}))}),[k,S]),F=null!==(t=null==S?void 0:S.mode)&&void 0!==t?t:c.Q8.Fixed,D=null===(n=null===(a=T.settings)||void 0===a?void 0:a.showSourceRadio)||void 0===n||n,P=null!==(g=null===(f=T.settings)||void 0===f?void 0:f.resourceType)&&void 0!==g?g:c.DD.Icon,A=null!==(v=null===(b=T.settings)||void 0===b?void 0:b.folderName)&&void 0!==v?v:d.QS.Icon;let M="";var R;P===c.DD.Icon&&(null!=S&&S.fixed?M=(0,d.t7)(S.fixed):null!==(R=T.settings)&&void 0!==R&&R.placeholderValue&&(M=(0,d.t7)(T.settings.placeholderValue)));return(0,r.jsxs)(r.Fragment,{children:[D&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Source",labelWidth:9,grow:!0,children:(0,r.jsx)(i.RadioButtonGroup,{value:F,options:h,onChange:I,fullWidth:!0})})}),F!==c.Q8.Fixed&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Field",labelWidth:9,grow:!0,children:(0,r.jsx)(l.b,{context:C,value:null!==(x=S.field)&&void 0!==x?x:"",onChange:O,item:p})})}),F===c.Q8.Fixed&&(0,r.jsx)(u.E,{onChange:N,onClear:e=>{e.stopPropagation(),k({mode:c.Q8.Fixed,fixed:"",field:""})},value:null==S?void 0:S.fixed,src:M,placeholder:null!==(y=null===(w=T.settings)||void 0===w?void 0:w.placeholderText)&&void 0!==y?y:"Select a value",name:null!==(j=m(null==S?void 0:S.fixed))&&void 0!==j?j:"",mediaType:P,folderName:A,size:c.zc.NORMAL}),F===c.Q8.Mapping&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Mappings",labelWidth:9,grow:!0,children:o||(o=(0,r.jsx)("div",{children:"TODO mappings editor!"}))})})]})};function m(e){if(!e)return;const t=e.lastIndexOf("/");return t>0?e.substring(t+1):e}var f=n(36636),v=n(98356),b=n(74562),x=n(62213);const y={label:"Fixed value",value:"_____fixed_____"},w=e=>{const{value:t,context:n,onChange:a,item:o}=e,{settings:l}=o,d=(0,i.useStyles2)(j),c=null==t?void 0:t.field,u=Boolean(!c),h=(0,b.IX)(n.data),p=(0,b.nw)(h,c,y),g=(0,s.useMemo)((()=>(0,x.x5)(l)),[l]),m=(0,s.useCallback)((e=>{a((0,x.C)(e,g))}),[a,g]),f=(0,s.useCallback)((e=>{const n=e.value;m(n&&n!==y.value?Object.assign({},t,{field:n}):Object.assign({},t,{field:void 0}))}),[m,t]),w=(0,s.useCallback)((e=>{void 0!==e&&m(Object.assign({},t,{min:e}))}),[m,t]),S=(0,s.useCallback)((e=>{void 0!==e&&m(Object.assign({},t,{max:e}))}),[m,t]),C=(0,s.useCallback)((e=>{void 0!==e&&m(Object.assign({},t,{fixed:e}))}),[m,t]),k=null!=t?t:{},T=u?y:p.find((e=>e.value===c));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.Select,{value:T,options:p,onChange:f,noOptionsMessage:"No fields found"})}),(0,r.jsxs)("div",{className:d.range,children:[u&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Value",labelWidth:8,grow:!0,children:(0,r.jsx)(v.Y,Object.assign({value:k.fixed},g,{onChange:C}))})}),!u&&!g.hideRange&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Min",labelWidth:8,grow:!0,children:(0,r.jsx)(v.Y,Object.assign({value:k.min},g,{onChange:w}))})}),(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Max",labelWidth:8,grow:!0,children:(0,r.jsx)(v.Y,Object.assign({value:k.max},g,{onChange:S}))})})]})]})]})},j=e=>({range:f.css`
    padding-top: 8px;
  `});var S=n(43215);const C={label:"Fixed value",value:"_____fixed_____"},k=[{label:"Mod",value:c.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:c.eK.Clamped,description:"Use field values, clamped to max and min"}],T=e=>{var t,n;const{value:a,context:o,onChange:l,item:d}=e,{settings:u}=d,h=null==a?void 0:a.field,p=Boolean(!h),g=(0,b.IX)(o.data),m=(0,b.nw)(g,h,C,S.FieldType.number),f=(0,i.useStyles2)(I),x=(0,s.useCallback)((e=>{const t=e.value;if(t&&t!==C.value)l(Object.assign({},a,{field:t}));else{var n;const e=null!==(n=a.fixed)&&void 0!==n?n:0;l(Object.assign({},a,{field:void 0,fixed:e}))}}),[l,a]),y=(0,s.useCallback)((e=>{l(Object.assign({},a,{mode:e}))}),[l,a]),w=(0,s.useCallback)((e=>{l(Object.assign({},a,{field:void 0,fixed:null!=e?e:0}))}),[l,a]),j=null!=a?a:{},T=null!==(t=null==a?void 0:a.mode)&&void 0!==t?t:c.eK.Mod,O=p?C:m.find((e=>e.value===h));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Limit",labelWidth:8,grow:!0,children:(0,r.jsx)(i.RadioButtonGroup,{value:T,options:k,onChange:y,fullWidth:!0})})}),(0,r.jsx)(i.Select,{value:O,options:m,onChange:x,noOptionsMessage:"No fields found"})]}),(0,r.jsx)("div",{className:f.range,children:p&&(0,r.jsx)(i.InlineFieldRow,{children:(0,r.jsx)(i.InlineField,{label:"Value",labelWidth:8,grow:!0,children:(0,r.jsx)(v.Y,{value:null!==(n=null==j?void 0:j.fixed)&&void 0!==n?n:0,onChange:w,max:null==u?void 0:u.max,min:null==u?void 0:u.min})})})})]})},I=e=>({range:f.css`
    padding-top: 8px;
  `});var O=n(31791)},48567:(e,t,n)=>{"use strict";n.d(t,{Q8:()=>a.Q8,QS:()=>a.QS,eK:()=>a.eK,B5:()=>a.B5,xy:()=>a.xy,PI:()=>i.PI,rj:()=>i.rj,PX:()=>r,FP:()=>i.FP,t7:()=>d.t,Im:()=>d.I,Qz:()=>i.Qz,yq:()=>c.y,z2:()=>i.z2,pb:()=>i.pb,W8:()=>o.W8,A:()=>o.A,Bw:()=>l,WO:()=>i.WO});var a=n(16386),s=n(43215),i=n(88036);function r(e,t,n){return function(e,t,n){var a;if(!e){var r,o;const e=n.visualization.getColorByName(null!==(r=t.fixed)&&void 0!==r?r:"grey");return{isAssumed:Boolean(null===(o=t.field)||void 0===o?void 0:o.length)||!t.fixed,fixed:e,value:()=>e,get:t=>e}}const l=(0,s.getFieldColorModeForField)(e);if(l.isByValue||null!==(a=e.config.mappings)&&void 0!==a&&a.length){const t=(0,s.getFieldConfigWithMinMax)(e,!0);t!==e.config&&(e=Object.assign({},e,{config:t}),e.state=void 0);const a=(0,s.getDisplayProcessor)({field:e,theme:n}),r=e=>{var t;return null!==(t=a(e).color)&&void 0!==t?t:"#ccc"};return{field:e,get:t=>r(e.values.get(t)),value:()=>r((0,i.cR)(e))}}const d=l.getCalculator(e,n)(0,0);return{fixed:d,value:()=>d,get:e=>d,field:e}}((0,i.PI)(e,t.field),t,n)}var o=n(62213);function l(e,t){return function(e,t){var n;let r=t.fixed;const o=null!==(n=t.mode)&&void 0!==n?n:a.xy.Fixed;if(o===a.xy.Fixed)return{isAssumed:!Boolean(r),fixed:r,value:()=>r,get:e=>r};if(o===a.xy.Template){const n=e=>`TEMPLATE[${t.fixed} // ${e}]`;return e?{field:e,get:t=>n(e.values.get(t)),value:()=>n((0,i.cR)(e))}:(r=n(""),{isAssumed:!0,fixed:r,value:()=>r,get:e=>r})}if(!e)return{isAssumed:!0,fixed:r,value:()=>r,get:e=>r};let l=t=>(0,s.formattedValueToString)(e.display(t));return{field:e,get:t=>l(e.values.get(t)),value:()=>l((0,i.cR)(e))}}(t.field?(0,i.PI)(e,t.field):null==e?void 0:e.fields.find((e=>e.type===s.FieldType.string)),t)}var d=n(49906),c=n(57894)},49906:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,t:()=>i});var a=n(16386),s=n(88036);function i(e){return e?e.indexOf(":/")>0?e:window.__grafana_public_path__+e:""}function r(e,t){var n;const r=null!==(n=t.mode)&&void 0!==n?n:a.Q8.Fixed;if(r===a.Q8.Fixed){const e=i(t.fixed);return{isAssumed:!Boolean(e),fixed:e,value:()=>e,get:t=>e}}const o=(0,s.PI)(e,t.field);if(!o){const e="";return{isAssumed:!0,fixed:e,value:()=>e,get:t=>e}}if(r===a.Q8.Mapping){const e=e=>i(`${e}`);return{field:o,get:t=>e(o.values.get(t)),value:()=>e((0,s.cR)(o))}}const l=e=>{var t;return i(null!==(t=(0,o.display)(e).icon)&&void 0!==t?t:"")};return{field:o,get:e=>l(o.values.get(e)),value:()=>l((0,s.cR)(o))}}},57894:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});var a=n(16386),s=n(88036);function i(e,t){return function(e,t){if(!e){var n,i;const e=null!==(n=t.fixed)&&void 0!==n?n:0;return{isAssumed:Boolean(null===(i=t.field)||void 0===i?void 0:i.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}let r=e=>e%t.max;t.mode===a.eK.Clamped&&(r=e=>e<t.min?t.min:e>t.max?t.max:e);const o=t=>{const n=e.values.get(t);return null===n||"number"!=typeof n?0:r(n)};return{field:e,get:o,value:()=>(0,s.cR)(e)}}((0,s.PI)(e,null==t?void 0:t.field),t)}},62213:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,C:()=>d,W8:()=>r,x5:()=>l});var a=n(36845),s=n(88036),i=n(48567);function r(e,t){return o((0,s.PI)(e,null==t?void 0:t.field),t)}function o(e,t,n){if(!e){var r,o;const e=null!==(r=t.fixed)&&void 0!==r?r:0;return{isAssumed:Boolean(null===(o=t.field)||void 0===o?void 0:o.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}const l=(0,a.dz)(e),d=t.max-t.min;if(e.values.length<1||d<=0||l.delta<=0)return{fixed:t.min,value:()=>t.min,get:()=>t.min};let c=e=>t.min+e*d;if(n===i.B5.Quadratic){const e=Math.PI*(t.max/2)**2,n=Math.PI*(t.min/2)**2,a=e-n;c=e=>{let t=n+a*e;return 2*Math.sqrt(t/Math.PI)}}const u=t=>{const n=e.values.get(t);let a=0;return n!==-1/0&&(a=(n-l.min)/l.delta),a>1?a=1:a<0&&(a=0),c(a)};return{get:u,value:()=>u((0,s.cR)(e)),field:e}}function l(e){return e||(e={min:0,max:1}),null==e.min&&(e.min=0),null==e.max&&(e.max=1),e}function d(e,t){let{min:n,max:a}=l(t);if(e||(e={}),null==e.max&&(e.max=a),null==e.min&&(e.min=n),e.min>e.max){const t=e.max;e.max=e.min,e.min=t}return e.min<n&&(e.min=n),e.max>a&&(e.max=a),null==e.fixed&&(e.fixed=e.min+(e.max-e.min)/2),e.field||(e.fixed>a?e.fixed=a:e.fixed<n&&(e.fixed=n)),e}},16386:(e,t,n)=>{"use strict";let a,s,i;n.d(t,{B5:()=>a,DD:()=>d,Q8:()=>o,QS:()=>l,eK:()=>s,hQ:()=>c,qj:()=>r,xy:()=>i,zc:()=>u}),function(e){e.Linear="linear",e.Quadratic="quad"}(a||(a={})),function(e){e.Mod="mod",e.Clamped="clamped"}(s||(s={})),function(e){e.Fixed="fixed",e.Field="field",e.Template="template"}(i||(i={}));const r=Object.freeze({fixed:"",mode:i.Field,field:""});let o,l,d,c,u;!function(e){e.Fixed="fixed",e.Field="field",e.Mapping="mapping"}(o||(o={})),function(e){e.Icon="img/icons/unicons",e.IOT="img/icons/iot",e.Marker="img/icons/marker",e.BG="img/bg"}(l||(l={})),function(e){e.Icon="icon",e.Image="image"}(d||(d={})),function(e){e.Folder="folder",e.URL="url",e.Upload="upload"}(c||(c={})),function(e){e.SMALL="small",e.NORMAL="normal"}(u||(u={}))},88036:(e,t,n)=>{"use strict";n.d(t,{FP:()=>o,PI:()=>h,Qz:()=>c,WO:()=>u,cR:()=>g,pb:()=>l,rj:()=>p,z2:()=>d});var a=n(43215),s=n(90923),i=n(48567),r=n(57894);function o(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const a=(0,i.PX)(n,t,s.config.theme2);if(!a.isAssumed||1===e.series.length)return a}return(0,i.PX)(void 0,t,s.config.theme2)}function l(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const a=(0,i.W8)(n,t);if(!a.isAssumed||1===e.series.length)return a}return(0,i.W8)(void 0,t)}function d(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const a=(0,r.y)(n,t);if(!a.isAssumed||1===e.series.length)return a}return(0,r.y)(void 0,t)}function c(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const a=(0,i.Im)(n,t);if(!a.isAssumed||1===e.series.length)return a}return(0,i.Im)(void 0,t)}function u(e,t){if(null!=e&&e.series&&t.field)for(const n of e.series){const a=(0,i.Bw)(n,t);if(!a.isAssumed||1===e.series.length)return a}return(0,i.Bw)(void 0,t)}function h(e,t){if(e&&null!=t&&t.length)for(const n of e.fields){if(t===n.name)return n;if(t===(0,a.getFieldDisplayName)(n,e))return n}}function p(e,t){if(e&&null!=t&&t.length)for(let n=0;n<e.fields.length;n++){const s=e.fields[n];if(t===s.name)return n;if(t===(0,a.getFieldDisplayName)(s,e))return n}}function g(e){var t;const n=null===(t=e.state)||void 0===t?void 0:t.calcs;if(n){const e=n[a.ReducerID.lastNotNull];if(null!=e)return e}const s=e.values;let i=s.length-1;for(;i>=0;){const e=s.get(i--);if(null!=e)return e}}},12579:(e,t,n)=>{"use strict";n.d(t,{m:()=>O});var a,s,i,r,o,l=n(36636),d=n(68404),c=n(18745),u=n(43215),h=n(90923),p=n(3490),g=n(11723),m=n(67436),f=n(78647),v=n(52765),b=n(67892),x=n(45916);function y(e){let{splitOpenFn:t,traceToLogsOptions:n,traceToMetricsOptions:l,dataFrame:d,createFocusSpanLink:c}=e;return d&&1!==d.fields.length&&d.fields.some((e=>{var t;return Boolean(null===(t=e.config.links)||void 0===t?void 0:t.length)}))?function(e){const n=d.fields.find((e=>{var t;return Boolean(null===(t=e.config.links)||void 0===t?void 0:t.length)}));try{const s=(0,b.a)({field:n,rowIndex:e.dataFrameRowIndex,splitOpenFn:t,range:j(e),dataFrame:d});return{logLinks:[{href:s[0].href,onClick:s[0].onClick,content:a||(a=(0,x.jsx)(p.Icon,{name:"gf-logs",title:"Explore the logs for this in split view"}))}]}}catch(e){return void console.error(e)}}:function(e,t,n,a){var l;let d;null!=t&&t.datasourceUid&&(d=(0,m.ak)().getInstanceSettings(t.datasourceUid));const c="grafana-splunk-datasource"===(null===(l=d)||void 0===l?void 0:l.type);let g;null!=n&&n.datasourceUid&&(g=(0,m.ak)().getInstanceSettings(n.datasourceUid));return function(l){var m;const f={traceLinks:[]};let v={};if(d&&t){switch(null===(m=d)||void 0===m?void 0:m.type){case"loki":v=function(e,t,n){const{tags:a,filterByTraceID:s,filterBySpanID:i,mapTagNamesEnabled:r,mappedTags:o}=t,l=r&&null!=o&&o.length?o:null!=a&&a.length?a:w,d=[...e.process.tags,...e.tags].reduce(((e,t)=>{if(r){const n=l.find((e=>e.key===t.key));n&&e.push(`${n.value?n.value:n.key}="${t.value}"`)}else l.includes(t.key)&&e.push(`${t.key}="${t.value}"`);return e}),[]);if(!d.length)return;let c=`{${d.join(", ")}}`;s&&e.traceID&&(c+=` |="${e.traceID}"`);i&&e.spanID&&(c+=` |="${e.spanID}"`);return{title:n.name,url:"",internal:{datasourceUid:n.uid,datasourceName:n.name,query:{expr:c,refId:""}}}}(l,t,d);break;case"grafana-splunk-datasource":v=function(e,t,n){const{tags:a,filterByTraceID:s,filterBySpanID:i,mapTagNamesEnabled:r,mappedTags:o}=t,l=r&&null!=o&&o.length?o:null!=a&&a.length?a:w,d=[...e.process.tags,...e.tags].reduce(((e,t)=>{if(r){const n=l.find((e=>e.key===t.key));n&&e.push(`${n.value?n.value:n.key}="${t.value}"`)}else l.includes(t.key)&&e.push(`${t.key}="${t.value}"`);return e}),[]);let c="";d.length>0&&(c+=`${d.join(" ")}`);s&&e.traceID&&(c+=` "${e.traceID}"`);i&&e.spanID&&(c+=` "${e.spanID}"`);return{title:n.name,url:"",internal:{datasourceUid:n.uid,datasourceName:n.name,query:{query:c,refId:""}}}}(l,t,d)}if(v){const n=(0,u.mapInternalLinkToExplore)({link:v,internalLink:v.internal,scopedVars:{},range:j(l,{startMs:t.spanStartTimeShift?u.rangeUtil.intervalToMs(t.spanStartTimeShift):0,endMs:t.spanEndTimeShift?u.rangeUtil.intervalToMs(t.spanEndTimeShift):0},c),field:{},onClickFn:e,replaceVariables:(0,h.getTemplateSrv)().replace.bind((0,h.getTemplateSrv)())});f.logLinks=[{href:n.href,onClick:n.onClick,content:s||(s=(0,x.jsx)(p.Icon,{name:"gf-logs",title:"Explore the logs for this in split view"}))}]}}if(g&&null!=n&&n.queries){f.metricLinks=[];for(const t of n.queries){const a=S(t,null==n?void 0:n.tags,l),s={title:g.name,url:"",internal:{datasourceUid:g.uid,datasourceName:g.name,query:{expr:a,refId:"A"}}},r=(0,u.mapInternalLinkToExplore)({link:s,internalLink:s.internal,scopedVars:{},range:j(l,{startMs:0,endMs:0}),field:{},onClickFn:e,replaceVariables:(0,h.getTemplateSrv)().replace.bind((0,h.getTemplateSrv)())});f.metricLinks.push({title:null==t?void 0:t.name,href:r.href,onClick:r.onClick,content:i||(i=(0,x.jsx)(p.Icon,{name:"chart-line",title:"Explore metrics for this span"}))})}}if(l.references&&a)for(const e of l.references){if("CHILD_OF"===e.refType)continue;const t=a(e.traceID,e.spanID);f.traceLinks.push({href:t.href,title:e.span?e.span.operationName:"View linked span",content:r||(r=(0,x.jsx)(p.Icon,{name:"link",title:"View linked span"})),onClick:t.onClick})}if(l.subsidiarilyReferencedBy&&a)for(const e of l.subsidiarilyReferencedBy){const t=a(e.traceID,e.spanID);f.traceLinks.push({href:t.href,title:e.span?e.span.operationName:"View linked span",content:o||(o=(0,x.jsx)(p.Icon,{name:"link",title:"View linked span"})),onClick:t.onClick})}return f}}(t,n,l,c)}const w=["cluster","hostname","namespace","pod"];function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startMs:0,endMs:0},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=Math.floor(e.startTime/1e3+t.startMs),s=(0,u.dateTime)(a),i=(e.startTime+e.duration)/1e3;let r=Math.floor(i+t.endMs);n&&r-a<1e3?r=a+1e3:a===r&&r++;const o=(0,u.dateTime)(r);return{from:s,to:o,raw:{from:s,to:o}}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(!e.query)return`histogram_quantile(0.5, sum(rate(tempo_spanmetrics_latency_bucket{operation="${n.operationName}"}[5m])) by (le))`;let a=e.query;if(t.length&&-1!==a.indexOf("$__tags")){const e=[...n.process.tags,...n.tags],s=t.reduce(((t,n)=>{var a;const s=null===(a=e.find((e=>e.key===n.key)))||void 0===a?void 0:a.value;return s&&t.push(`${n.value?n.value:n.key}="${s}"`),t}),[]),i=null==s?void 0:s.join(", ");a=a.replace("$__tags",i)}return a}function C(e,t){return e.filter((e=>e.hasChildren)).length===t.size}function k(e,t,n){return a=>{const s=t.get(a);if(!s)return;let i;i="tags"===e?s.toggleTags():"process"===e?s.toggleProcess():"warnings"===e?s.toggleWarnings():"references"===e?s.toggleReferences():"stackTraces"===e?s.toggleStackTraces():s.toggleLogs();const r=new Map(t);r.set(a,i),n(r)}}const T=e=>({noDataMsg:l.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${e.typography.h4.fontSize};
    color: ${e.colors.text.secondary};
  `});function I(){return{}}function O(e){var t,n,a,s,i,r,o;const{spanFindMatches:l,traceProp:b,datasource:w,topOfViewRef:j,topOfViewRefType:S}=e,{detailStates:O,toggleDetail:N,detailLogItemToggle:F,detailLogsToggle:D,detailProcessToggle:P,detailReferencesToggle:A,detailReferenceItemToggle:M,detailTagsToggle:R,detailWarningsToggle:$,detailStackTracesToggle:L}=function(e){const[t,n]=(0,d.useState)(new Map);(0,d.useEffect)((()=>{n(new Map)}),[e,n]);const a=(0,d.useCallback)((function(e){const a=new Map(t);a.has(e)?a.delete(e):a.set(e,new g.kt),n(a)}),[t]),s=(0,d.useCallback)((function(e,a){const s=t.get(e);if(!s)return;const i=s.toggleLogItem(a),r=new Map(t);return r.set(e,i),n(r)}),[t]),i=(0,d.useCallback)((function(e,a){const s=t.get(e);if(!s)return;const i=s.toggleReferenceItem(a),r=new Map(t);return r.set(e,i),n(r)}),[t]);return{detailStates:t,toggleDetail:a,detailLogItemToggle:s,detailLogsToggle:(0,d.useCallback)((e=>k("logs",t,n)(e)),[t]),detailWarningsToggle:(0,d.useCallback)((e=>k("warnings",t,n)(e)),[t]),detailStackTracesToggle:(0,d.useCallback)((e=>k("stackTraces",t,n)(e)),[t]),detailReferenceItemToggle:i,detailReferencesToggle:(0,d.useCallback)((e=>k("references",t,n)(e)),[t]),detailProcessToggle:(0,d.useCallback)((e=>k("process",t,n)(e)),[t]),detailTagsToggle:(0,d.useCallback)((e=>k("tags",t,n)(e)),[t])}}(e.dataFrames[0]),{removeHoverIndentGuideId:E,addHoverIndentGuideId:V,hoverIndentGuideIds:B}=function(){const[e,t]=(0,d.useState)(new Set);return{hoverIndentGuideIds:e,addHoverIndentGuideId:(0,d.useCallback)((function(e){t((t=>{const n=new Set(t);return n.add(e),n}))}),[]),removeHoverIndentGuideId:(0,d.useCallback)((function(e){t((t=>{const n=new Set(t);return n.delete(e),n}))}),[])}}(),{viewRange:z,updateViewRangeTime:_,updateNextViewRangeTime:U}=function(){const[e,t]=(0,d.useState)({time:{current:[0,1]}}),n=(0,d.useCallback)((function(e){t((t=>{const n=Object.assign({},t.time,e);return Object.assign({},t,{time:n})}))}),[]);return{viewRange:e,updateViewRangeTime:(0,d.useCallback)((function(e,n){const a={current:[e,n]};t((e=>Object.assign({},e,{time:a})))}),[]),updateNextViewRangeTime:n}}(),{expandOne:H,collapseOne:W,childrenToggle:q,collapseAll:Z,childrenHiddenIDs:G,expandAll:K}=function(){const[e,t]=(0,d.useState)(new Set),n=(0,d.useCallback)((function(n){if(0===e.size)return;let a=-1,s=!0;const i=n.reduce(((e,t)=>(t.depth<=a&&(s=!0),s&&e.has(t.spanID)&&(e.delete(t.spanID),s=!1,a=t.depth),e)),new Set(e));t(i)}),[e]),a=(0,d.useCallback)((function(n){if(C(n,e))return;let a;const s=n.reduce(((e,t)=>(a&&t.depth<=a.depth?(e.add(a.spanID),t.hasChildren&&(a=t)):t.hasChildren&&!e.has(t.spanID)&&(a=t),e)),new Set(e));a&&s.add(a.spanID),t(s)}),[e]),s=(0,d.useCallback)((function(){t(new Set)}),[]),i=(0,d.useCallback)((function(n){if(C(n,e))return;const a=n.reduce(((e,t)=>(t.hasChildren&&e.add(t.spanID),e)),new Set);t(a)}),[e]),r=(0,d.useCallback)((function(n){const a=new Set(e);e.has(n)?a.delete(n):a.add(n),t(a)}),[e]);return{childrenHiddenIDs:e,expandOne:n,collapseOne:a,expandAll:s,collapseAll:i,childrenToggle:r}}(),Q=(0,p.useStyles2)(T),[J,Y]=(0,d.useState)(.25),[X,ee]=(0,d.useState)(!1),[te,ne]=function(e){const t=(0,c.useSelector)((t=>{var n;return null===(n=t.explore[e.exploreId])||void 0===n?void 0:n.panelsState.trace})),n=null==t?void 0:t.spanId,a=(0,c.useDispatch)(),s=n=>a((0,v.km)(e.exploreId,"trace",Object.assign({},t,{spanId:n}))),i=(0,c.useSelector)((t=>{var n;return null===(n=t.explore[e.exploreId])||void 0===n?void 0:n.queries.find((t=>t.refId===e.refId))}));return[n,(t,a)=>{var r,o;const l={title:"Deep link to this span",url:"",internal:{datasourceUid:null===(r=e.datasource)||void 0===r?void 0:r.uid,datasourceName:null===(o=e.datasource)||void 0===o?void 0:o.name,query:Object.assign({},i,{query:t}),panelsState:{trace:{spanId:a}}}},d="traceId"===(null==i?void 0:i.queryType)&&i.query===t;return(0,u.mapInternalLinkToExplore)({link:l,internalLink:l.internal,scopedVars:{},range:{},field:{},onClickFn:d?()=>s(n===a?void 0:a):e.splitOpenFn?()=>{var n;return e.splitOpenFn({datasourceUid:null===(n=e.datasource)||void 0===n?void 0:n.uid,query:Object.assign({},i,{query:t}),panelsState:{trace:{spanId:a}}})}:void 0,replaceVariables:(0,h.getTemplateSrv)().replace.bind((0,h.getTemplateSrv)())})}]}({refId:null===(t=e.dataFrames[0])||void 0===t?void 0:t.refId,exploreId:e.exploreId,datasource:w,splitOpenFn:e.splitOpenFn}),ae=(0,d.useMemo)((()=>{var t;return{childrenHiddenIDs:G,detailStates:O,hoverIndentGuideIds:B,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:J,traceID:null===(t=e.traceProp)||void 0===t?void 0:t.traceID}}),[G,O,B,J,null===(n=e.traceProp)||void 0===n?void 0:n.traceID]),se=(0,m.ak)().getInstanceSettings(null==w?void 0:w.name),ie=null==se||null===(a=se.jsonData)||void 0===a?void 0:a.tracesToLogs,re=null==se||null===(s=se.jsonData)||void 0===s?void 0:s.tracesToMetrics,oe=null==se?void 0:se.jsonData,le=(0,d.useMemo)((()=>y({splitOpenFn:e.splitOpenFn,traceToLogsOptions:ie,traceToMetricsOptions:re,dataFrame:e.dataFrames[0],createFocusSpanLink:ne})),[e.splitOpenFn,ie,re,e.dataFrames,ne]),de=(0,d.useCallback)((()=>ee(!X)),[X]),ce=(0,c.useSelector)((e=>(0,f.Z)(e.user))),ue=w?null==w?void 0:w.type:"unknown";return(0,x.jsx)(x.Fragment,{children:null!==(i=e.dataFrames)&&void 0!==i&&i.length&&"trace"===(null===(r=e.dataFrames[0])||void 0===r||null===(o=r.meta)||void 0===o?void 0:o.preferredVisualisationType)&&b?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.T2,{canCollapse:!1,hideMap:!1,hideSummary:!1,onSlimViewClicked:de,onTraceGraphViewClicked:I,slimView:X,trace:b,updateNextViewRangeTime:U,updateViewRangeTime:_,viewRange:z,timeZone:ce}),(0,x.jsx)(g.Ox,{registerAccessors:I,scrollToFirstVisibleSpan:I,findMatchesIDs:l,trace:b,datasourceType:ue,spanBarOptions:null==oe?void 0:oe.spanBar,traceTimeline:ae,updateNextViewRangeTime:U,updateViewRangeTime:_,viewRange:z,timeZone:ce,setSpanNameColumnWidth:Y,collapseAll:Z,collapseOne:W,expandAll:K,expandOne:H,childrenToggle:q,clearShouldScrollToFirstUiFindMatch:I,detailLogItemToggle:F,detailLogsToggle:D,detailWarningsToggle:$,detailStackTracesToggle:L,detailReferencesToggle:A,detailReferenceItemToggle:M,detailProcessToggle:P,detailTagsToggle:R,detailToggle:N,setTrace:I,addHoverIndentGuideId:V,removeHoverIndentGuideId:E,linksGetter:I,uiFind:e.search,createSpanLink:le,scrollElement:e.scrollElement,focusedSpanId:te,focusedSpanIdForSearch:e.focusedSpanIdForSearch,createFocusSpanLink:ne,topOfViewRef:j,topOfViewRefType:S})]}):(0,x.jsx)("div",{className:Q.noDataMsg,children:"No data"})})}},61597:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var a=n(68404),s=n(11723);function i(e){const[t,n]=(0,a.useState)(""),i=(0,a.useMemo)((()=>t&&e?(0,s.rZ)(t,e):void 0),[t,e]);return{search:t,setSearch:n,spanFindMatches:i}}},91079:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var a=n(43215),s=n(11723);function i(e){if(!e)return null;let t=1===e.fields.length?e.fields[0].values.get(0):function(e){const t=new a.DataFrameView(e),n={};for(let e=0;e<t.length;e++){const a=t.get(e);n[a.spanID]||(n[a.spanID]={serviceName:a.serviceName,tags:a.serviceTags})}return{traceID:t.get(0).traceID,processes:n,spans:t.toArray().map(((e,t)=>{var n;const a=[];return e.parentSpanID&&a.push({refType:"CHILD_OF",spanID:e.parentSpanID,traceID:e.traceID}),e.references&&a.push(...e.references.map((e=>Object.assign({refType:"FOLLOWS_FROM"},e)))),Object.assign({},e,{duration:1e3*e.duration,startTime:1e3*e.startTime,processID:e.spanID,flags:0,references:a,logs:(null===(n=e.logs)||void 0===n?void 0:n.map((e=>Object.assign({},e,{timestamp:1e3*e.timestamp}))))||[],dataFrameRowIndex:t})}))}}(e);return(0,s.R1)(t)}},20120:(e,t,n)=>{"use strict";n.d(t,{eX:()=>u,zU:()=>c});var a=n(35140),s=n(3490),i=n(62236),r=n(70229),o=n(77377),l=n(83097);const d=(0,a.PH)("explore/updateDatasourceInstance");function c(e,t,n){return async(a,i)=>{const c=i().user.orgId,{history:u,instance:h}=await(0,l.r_)(c,{uid:t}),p=i().explore[e].datasourceInstance;if(a(d({exploreId:e,datasourceInstance:h,history:u})),null!=n&&n.importQueries){const t=i().explore[e].queries;await a((0,r.GJ)(e,t,p,h))}i().explore[e].isLive&&a((0,o.oz)(e,s.RefreshPicker.offOption.value)),null!=n&&n.importQueries&&a((0,r.aA)(e))}}const u=(e,t)=>{if(d.match(t)){const{datasourceInstance:n,history:a}=t.payload;return(0,i.RZ)(e.querySubscription),Object.assign({},e,{datasourceInstance:n,graphResult:null,tableResult:null,logsResult:null,logsVolumeDataProvider:void 0,logsVolumeData:void 0,queryResponse:(0,l.lp)(),loading:!1,queryKeys:[],history:a,datasourceMissing:!1})}return e}},52765:(e,t,n)=>{"use strict";n.d(t,{CK:()=>j,Om:()=>S,Rl:()=>w,iz:()=>C,km:()=>v,qN:()=>x});var a=n(35140),s=n(82897),i=n(90923),r=n(54819),o=n(62236),l=n(78647),d=n(20120),c=n(76223),u=n(72629),h=n(70229),p=n(77377),g=n(83097);const m=(0,a.PH)("explore/changeSize"),f=(0,a.PH)("explore/changePanels");function v(e,t,n){return async(a,s)=>{const i=s().explore[e];if(void 0===i)return;const{panelsState:r}=i;a(f({exploreId:e,panelsState:Object.assign({},r,{[t]:n})})),a((0,u.og)())}}const b=(0,a.PH)("explore/initializeExplore");(0,a.PH)("explore/setUrlReplaced");function x(e,t){let{height:n,width:a}=t;return m({exploreId:e,height:n,width:a})}const y=(0,a.PH)("explore/changeGraphStyle");function w(e,t){return async(n,a)=>{(0,g.FG)(t),n(y({exploreId:e,graphStyle:t}))}}function j(e,t,n,a,s,o,l){return async(d,c)=>{let u,m=[];if((0,i.getDataSourceSrv)().getList().length>=1){const e=c().user.orgId,n=await(0,g.r_)(e,t);u=n.instance,m=n.history}d(b({exploreId:e,containerWidth:s,eventBridge:o,queries:n,range:a,datasourceInstance:u,history:m})),void 0!==l&&d(f({exploreId:e,panelsState:l})),d((0,p.b3)({exploreId:e})),r.K.setupTimeRangeBindings(!1),u&&d((0,h.aA)(e,{replaceUrl:!0}))}}function S(e,t){return async(n,a)=>{const s=a().explore[e];if(!s.initialized)return;const i=(0,o.J5)(t),r=k(i,(0,g.D)(s)),{containerWidth:d,eventBridge:c}=s,{datasource:u,queries:m,range:v,panelsState:b}=i,x=[];for(let e=0;e<m.length;e++){const t=m[e];x.push((0,o.fR)(t,x,e))}const y=(0,l.Z)(a().user),w=(0,l.i)(a().user),S=(0,o.vP)(v,y,w);if(r.datasource){const t=(0,o.Z8)(m);await n(j(e,u,t,S,d,c,b))}else r.range&&n((0,p.b3)({exploreId:e,rawRange:S.raw})),r.queries&&n((0,h.SE)({exploreId:e,queries:x})),r.panelsState&&void 0!==b&&n(f({exploreId:e,panelsState:b})),(r.queries||r.range)&&n((0,h.aA)(e))}}const C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.t5)(),t=arguments.length>1?arguments[1]:void 0;if(e=(0,h.Y)(e,t),e=(0,d.eX)(e,t),e=(0,p.ok)(e,t),e=(0,c.Oo)(e,t),u.ZU.match(t)){const{richHistory:n,total:a}=t.payload.richHistoryResults;return Object.assign({},e,{richHistory:n,richHistoryTotal:a})}if(u.Zy.match(t)){const n=t.payload.filters;return Object.assign({},e,{richHistorySearchFilters:n})}if(m.match(t)){const n=t.payload.width;return Object.assign({},e,{containerWidth:n})}if(y.match(t)){const{graphStyle:n}=t.payload;return Object.assign({},e,{graphStyle:n})}if(f.match(t)){const{panelsState:n}=t.payload;return Object.assign({},e,{panelsState:n})}if(b.match(t)){const{containerWidth:n,eventBridge:a,queries:s,range:i,datasourceInstance:r,history:l}=t.payload;return Object.assign({},e,{containerWidth:n,eventBridge:a,range:i,queries:s,initialized:!0,queryKeys:(0,o.$$)(s,r),datasourceInstance:r,history:l,datasourceMissing:!r,queryResponse:(0,g.lp)(),cache:[]})}return e},k=(e,t)=>({datasource:!(0,s.isEqual)(null==t?void 0:t.datasource,null==e?void 0:e.datasource),queries:!(0,s.isEqual)(null==t?void 0:t.queries,null==e?void 0:e.queries),range:!(0,s.isEqual)((null==t?void 0:t.range)||o.UI,(null==e?void 0:e.range)||o.UI),panelsState:!(0,s.isEqual)(null==t?void 0:t.panelsState,null==e?void 0:e.panelsState)})},76223:(e,t,n)=>{"use strict";n.d(t,{Cs:()=>w,Ff:()=>f,KZ:()=>C,NV:()=>v,Oo:()=>k,TV:()=>x,WY:()=>g,ch:()=>S,ev:()=>m,fM:()=>u,ik:()=>b,io:()=>y,sO:()=>j});var a=n(35140),s=n(90923),i=n(12226),r=n(17421),o=n(17763),l=n(47570),d=n(36314),c=n(72629);const u=(0,a.PH)("explore/historyUpdated"),h=e=>{let{updatedQuery:t,deletedId:n}=e;return async(e,a)=>{p(a().explore,((a,s)=>{const i=a.richHistory.map((e=>e.id===(null==t?void 0:t.id)?t:e)).filter((e=>e.id!==n)),r=a.richHistory.length-i.length;e((0,c.ZU)({richHistoryResults:{richHistory:i,total:a.richHistoryTotal-r},exploreId:s}))}))}},p=(e,t)=>{t(e.left,l.Kd.left),e.right&&t(e.right,l.Kd.right)},g=(e,t,n)=>async(a,s)=>{const{richHistoryStorageFull:i,limitExceeded:r}=await(0,o.au)(e,t,n,!1,"",!s().explore.richHistoryStorageFull,!s().explore.richHistoryLimitExceededWarningShown);i&&a((0,c.fm)()),r&&a((0,c.QN)())},m=(e,t)=>async(n,a)=>{const s=await(0,o.VI)(e,t);n(h({updatedQuery:s}))},f=(e,t)=>async n=>{const a=await(0,o.gt)(e,t);n(h({updatedQuery:a}))},v=e=>async t=>{const n=await(0,o.y9)(e);t(h({deletedId:n}))},b=()=>async e=>{await(0,o.HK)(),e((0,c.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:l.Kd.left})),e((0,c.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:l.Kd.right}))},x=e=>async(t,n)=>{var a;const s=null===(a=n().explore[e])||void 0===a?void 0:a.richHistorySearchFilters;if(s){const n=await(0,o.ub)(s);t((0,c.ZU)({richHistoryResults:n,exploreId:e}))}},y=e=>async(t,n)=>{var a,s;const i=null===(a=n().explore[e])||void 0===a?void 0:a.richHistorySearchFilters,r=null===(s=n().explore[e])||void 0===s?void 0:s.richHistory;if(i&&r){const n=Object.assign({},i,{page:((null==i?void 0:i.page)||1)+1}),a=await(0,o.ub)(n),s=[...r,...a.richHistory];t((0,c.Zy)({filters:n,exploreId:e})),t((0,c.ZU)({richHistoryResults:{richHistory:s,total:a.total},exploreId:e}))}},w=e=>async t=>{t((0,c.Zy)({filters:void 0,exploreId:e})),t((0,c.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:e}))},j=()=>async(e,t)=>{const n=r.Z.getBool(i.hO.migrated,!1),a=t().explore.richHistoryMigrationFailed;if(s.config.queryHistoryEnabled&&!n&&!a){const t=await(0,o.rq)();t.status===o.rv.Failed?(e((0,c.CR)()),(0,s.logError)(t.error,{explore:{event:"QueryHistoryMigrationFailed"}})):r.Z.set(i.hO.migrated,!0)}let l=t().explore.richHistorySettings;l||(l=await(0,o.di)(),e((0,c.e8)(l)))},S=e=>async t=>{t((0,c.e8)(e)),await(0,o.kg)(e)},C=(e,t)=>async(n,a)=>{await n((0,c.Zy)({exploreId:e,filters:Object.assign({},t)}));const s=a().explore.richHistorySettings;(0,d.X)().lastUsedDataSourcesAvailable&&await n(S(Object.assign({},s,{lastUsedDatasourceFilters:t.datasourceFilters})))},k=(e,t)=>u.match(t)?Object.assign({},e,{history:t.payload.history}):e},72629:(e,t,n)=>{"use strict";n.d(t,{CR:()=>g,IS:()=>w,Jt:()=>x,QN:()=>p,WK:()=>v,YV:()=>S,ZP:()=>I,ZU:()=>u,Zy:()=>f,bW:()=>j,e8:()=>m,fm:()=>h,m$:()=>C,og:()=>y,tl:()=>c});var a=n(35140),s=n(43215),i=n(90923),r=n(62236),o=n(24994),l=n(52765),d=n(83097);const c=(0,a.PH)("explore/syncTimes"),u=(0,a.PH)("explore/richHistoryUpdated"),h=(0,a.PH)("explore/richHistoryStorageFullAction"),p=(0,a.PH)("explore/richHistoryLimitExceededAction"),g=(0,a.PH)("explore/richHistoryMigrationFailedAction"),m=(0,a.PH)("explore/richHistorySettingsUpdated"),f=(0,a.PH)("explore/richHistorySearchFiltersUpdatedAction"),v=(0,a.PH)("explore/resetExplore"),b=(0,a.PH)("explore/splitClose"),x=(0,a.PH)("explore/cleanupPane"),y=e=>(t,n)=>{const{left:a,right:r}=n().explore,o={orgId:n().user.orgId.toString()};o.left=(0,s.serializeStateToUrlParam)((0,d.D)(a)),o.right=r?(0,s.serializeStateToUrlParam)((0,d.D)(r)):null,w.right=o.right,w.left=o.left,i.locationService.partial(Object.assign({},o),null==e?void 0:e.replace)},w={},j=e=>async(t,n)=>{const a=n().explore[o.K.left];let r=(0,d.D)(a);e&&(r={datasource:e.datasourceUid,queries:[e.query],range:e.range||a.range,panelsState:e.panelsState});const l=(0,s.serializeStateToUrlParam)(r);i.locationService.partial({right:l},!0)};function S(e){return(t,n)=>{t(b({itemId:e})),t(y())}}const C=(e,t)=>async n=>{const{getDataSourceSrv:a,getTimeSrv:s,getExploreUrl:r,openInNewWindow:o}=t,l=a(),d=await r({panel:e,datasourceSrv:l,timeSrv:s()});o&&d?o(d):i.locationService.push(d)},k=(0,d.t5)(),T={syncedTimes:!1,left:k,right:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1},I={explore:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;if(b.match(t)){const{itemId:n}=t.payload,a={left:n===o.K.left?e.right:e.left,right:void 0};return Object.assign({},e,a)}if(x.match(t)){var n;const{exploreId:a}=t.payload;return null!==(n=e[a])&&void 0!==n&&n.initialized?a===o.K.left?Object.assign({},e,{[o.K.left]:e[o.K.right],[o.K.right]:void 0}):Object.assign({},e,{[o.K.right]:void 0}):e}if(c.match(t))return Object.assign({},e,{syncedTimes:t.payload.syncedTimes});if(h.match(t))return Object.assign({},e,{richHistoryStorageFull:!0});if(p.match(t))return Object.assign({},e,{richHistoryLimitExceededWarningShown:!0});if(g.match(t))return Object.assign({},e,{richHistoryMigrationFailed:!0});if(v.match(t)){const n=t.payload,a=e[o.K.left],s=e[o.K.right];return(0,r.RZ)(a.querySubscription),s&&(0,r.RZ)(s.querySubscription),n.force?T:Object.assign({},T,{left:Object.assign({},k,{queries:e.left.queries})})}if(m.match(t)){const n=t.payload;return Object.assign({},e,{richHistorySettings:n})}if(t.payload){const{exploreId:n}=t.payload;if(void 0!==n){const a=e[n];return Object.assign({},e,{[n]:(0,l.iz)(a,t)})}}return e}}},70229:(e,t,n)=>{"use strict";n.d(t,{CS:()=>Q,K8:()=>ae,ci:()=>J,PM:()=>A,LK:()=>se,GJ:()=>Y,QH:()=>ie,sK:()=>X,Y:()=>re,aA:()=>ee,EA:()=>ne,P4:()=>Z,sQ:()=>W,KO:()=>te,SE:()=>U});var a=n(35140),s=n(10322),i=n.n(s),r=n(71808),o=n(22468),l=n(71114),d=n(2168),c=n(43215),u=n(90923),h=n(62236),p=n(10416),g=n(78647),m=n(24994),f=n(36537),v=n(58257),b=n(392),x=n(82897),y=n(35778),w=n(28783);const j=e=>{var t;const n=[],a=[],s=[],i=[],r=[];for(const o of e.series)switch(null===(t=o.meta)||void 0===t?void 0:t.preferredVisualisationType){case"logs":s.push(o);break;case"graph":n.push(o);break;case"trace":i.push(o);break;case"table":a.push(o);break;case"nodeGraph":r.push(o);break;default:T(o)?(n.push(o),a.push(o)):a.push(o)}return Object.assign({},e,{graphFrames:n,tableFrames:a,logsFrames:s,traceFrames:i,nodeGraphFrames:r,graphResult:null,tableResult:null,logsResult:null})},S=e=>e.graphFrames.length?Object.assign({},e,{graphResult:e.graphFrames}):Object.assign({},e,{graphResult:null}),C=e=>{if(0===e.tableFrames.length)return(0,r.of)(Object.assign({},e,{tableResult:null}));e.tableFrames.sort(((e,t)=>{const n=e.refId,a=t.refId;return n>a?1:n<a?-1:0}));return(e.tableFrames.every((e=>T(e)))?(0,r.of)(e.tableFrames).pipe(c.standardTransformers.seriesToColumnsTransformer.operator({})):(0,r.of)(e.tableFrames).pipe(c.standardTransformers.mergeTransformer.operator({}))).pipe((0,y.U)((t=>{const n=t[0];for(const t of n.fields){var a,s,i;t.display=null!==(a=t.display)&&void 0!==a?a:(0,c.getDisplayProcessor)({field:t,theme:u.config.theme2,timeZone:null!==(s=null===(i=e.request)||void 0===i?void 0:i.timezone)&&void 0!==s?s:"browser"})}return Object.assign({},e,{tableResult:n})})))};function k(e,t,n,a,s,i){return(0,r.of)(e).pipe((0,y.U)((e=>(0,b.zR)(e,t))),(0,y.U)(j),(0,y.U)(S),(0,y.U)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{var n;if(0===t.logsFrames.length)return Object.assign({},t,{logsResult:null});const a=null===(n=t.request)||void 0===n?void 0:n.intervalMs,s=(0,w.aB)(t.logsFrames,a,e.absoluteRange,e.queries),i=(0,h.Oy)(e.refreshInterval),r=(0,c.sortLogsResult)(s,i),o=r.rows,l=e.fullRangeLogsVolumeAvailable?void 0:r.series,d=Object.assign({},r,{rows:o,series:l});return Object.assign({},t,{logsResult:d})}}({absoluteRange:n,refreshInterval:a,queries:s,fullRangeLogsVolumeAvailable:i})),(0,l.z)(C))}function T(e){var t;const n=(0,x.groupBy)(e.fields,(e=>e.type));return Boolean(2===Object.keys(n).length&&1===(null===(t=n[c.FieldType.time])||void 0===t?void 0:t.length)&&n[c.FieldType.number])}var I=n(76223),O=n(72629),N=n(77377),F=n(83097);const D=["datasource"];const P=(0,a.PH)("explore/addQueryRow"),A=(0,a.PH)("explore/changeQueries"),M=(0,a.PH)("explore/cancelQueries"),R=(0,a.PH)("explore/queriesImported"),$=(0,a.PH)("explore/modifyQueries"),L=(0,a.PH)("explore/queryStoreSubscription"),E=(0,a.PH)("explore/storeLogsVolumeDataProviderAction"),V=(0,a.PH)("explore/cleanLogsVolumeAction"),B=(0,a.PH)("explore/storeLogsVolumeDataSubscriptionAction"),z=(0,a.PH)("explore/updateLogsVolumeDataAction"),_=(0,a.PH)("explore/queryStreamUpdated"),U=(0,a.PH)("explore/setQueries"),H=(0,a.PH)("changeLoadingState"),W=(0,a.PH)("explore/setPausedState"),q=(0,a.PH)("explore/scanStart"),Z=(0,a.PH)("explore/scanStop"),G=(0,a.PH)("explore/addResultsToCache"),K=(0,a.PH)("explore/clearCache");function Q(e,t,n){return(a,s)=>{var i;const r=s().explore[e].queries,o=Object.assign({},null==n||null===(i=n.getDefaultQuery)||void 0===i?void 0:i.call(n,c.CoreApp.Explore),(0,h.Xk)(r,t));a(P({exploreId:e,index:t,query:o}))}}function J(e){return(t,n)=>{var a;t(Z({exploreId:e})),t(M({exploreId:e})),t(E({exploreId:e,logsVolumeDataProvider:void 0})),(null===(a=n().explore[e].logsVolumeData)||void 0===a?void 0:a.state)!==c.LoadingState.Done&&t(V({exploreId:e})),t((0,O.og)())}}const Y=(e,t,n,a)=>async s=>{var i,r;if(!n)return void s(R({exploreId:e,queries:t}));let o=t;if((null===(i=n.meta)||void 0===i?void 0:i.id)===(null===(r=a.meta)||void 0===r?void 0:r.id))o=t.map((e=>function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,D)));else if((0,c.hasQueryExportSupport)(n)&&(0,c.hasQueryImportSupport)(a)){const e=await n.exportToAbstractQueries(t);o=await a.importFromAbstractQueries(e)}else o=a.importQueries?await a.importQueries(t,n):(0,h.Z8)();const l=(0,h.Z8)(o);s(R({exploreId:e,queries:l}))};function X(e,t,n,a){return s=>{s($({exploreId:e,modification:t,index:a,modifier:n})),t.preventSubmit||s(ee(e))}}const ee=(e,t)=>(n,a)=>{n((0,N.b3)({exploreId:e}));!0===(null==t?void 0:t.preserveCache)||n(se(e));const s=a().explore[e],{datasourceInstance:x,containerWidth:y,isLive:w,range:j,scanning:S,queryResponse:C,querySubscription:T,refreshInterval:D,absoluteRange:P,cache:A}=s;let M;const R=s.queries.map((e=>Object.assign({},e,{datasource:e.datasource||(null==x?void 0:x.getRef())})));null!=x&&async function(e,t,n,a,s,i){const r=a.meta.id,o=(0,h._Q)(n,r,s);e((0,I.fM)({exploreId:i,history:o})),e((0,I.WY)(a.uid,a.name,s)),await e((0,I.TV)(m.K.left)),await e((0,I.TV)(m.K.right))}(n,a().explore,s.history,x,R,e),n((0,O.og)({replace:null==t?void 0:t.replaceUrl}));const $=(0,F.M0)(A,P);if($)M=(0,r.of)($).pipe((0,l.z)((e=>k(e,C,P,D,R,null!=x&&(0,c.hasLogsVolumeSupport)(x))))).subscribe((t=>{t.error||n((0,O.og)()),n(_({exploreId:e,response:t}))}));else{if(!(0,h.z_)(R))return void n((0,O.og)({replace:null==t?void 0:t.replaceUrl}));if(!x)return;const s=null==x?void 0:x.interval;(0,h.RZ)(T);const r={minInterval:s,maxDataPoints:y,liveStreaming:w},m=(0,g.Z)(a().user),I=(0,h.Zf)(e,R,r,j,S,m);if(n(H({exploreId:e,loadingState:c.LoadingState.Loading})),M=(0,b.v7)(x,I.request).pipe(w?(0,d.p)(500):o.y,(0,l.z)((e=>k(e,C,P,D,R,null!=x&&(0,c.hasLogsVolumeSupport)(x))))).subscribe({next(t){if(null!==t.logsResult&&(0,u.reportInteraction)("grafana_explore_logs_result_displayed",{datasourceType:x.type}),n(_({exploreId:e,response:t})),a().explore[e].scanning)if(t.state===c.LoadingState.Done&&0===t.series.length){const t=(0,p.e)(-1,a().explore[e].range);n((0,N.b3)({exploreId:e,absoluteRange:t})),n(ee(e))}else n(Z({exploreId:e}))},error(t){n((0,f.$l)((0,v.t_)("Query processing error",t))),n(H({exploreId:e,loadingState:c.LoadingState.Error})),console.error(t)},complete(){a().explore[e].queryResponse.state===c.LoadingState.Loading&&n(H({exploreId:e,loadingState:c.LoadingState.Done}))}}),w)n(E({exploreId:e,logsVolumeDataProvider:void 0})),n(V({exploreId:e}));else if((0,c.hasLogsVolumeSupport)(x)){const t=Object.assign({},I.request,{requestId:I.request.requestId+"_log_volume"}),s=x.getLogsVolumeDataProvider(t);n(E({exploreId:e,logsVolumeDataProvider:s}));const{logsVolumeData:r,absoluteRange:o}=a().explore[e];(function(e,t,n){if(e&&e.data[0]){var a,s,r,o;if(!i()(null===(a=e.data[0].meta)||void 0===a||null===(s=a.custom)||void 0===s?void 0:s.targets,t))return!1;const l=e&&e.data[0]&&(null===(r=e.data[0].meta)||void 0===r||null===(o=r.custom)||void 0===o?void 0:o.absoluteRange);if(l&&l.from<=n.from&&n.to<=l.to)return!0}return!1})(r,R,o)||(n(V({exploreId:e})),n(ie(e)))}else n(E({exploreId:e,logsVolumeDataProvider:void 0}))}n(L({exploreId:e,querySubscription:M}))};function te(e,t){return(n,a)=>{const s=a().explore[e].queries,i=t.map(((e,t)=>(0,h.fR)(e,s,t)));n(U({exploreId:e,queries:i})),n(ee(e))}}function ne(e){return(t,n)=>{t(q({exploreId:e}));const a=(0,p.e)(-1,n().explore[e].range);t((0,N.b3)({exploreId:e,absoluteRange:a})),t(ee(e))}}function ae(e){return(t,n)=>{const a=n().explore[e].queryResponse,s=n().explore[e].absoluteRange,i=(0,F.M7)(s);a.state===c.LoadingState.Done&&t(G({exploreId:e,cacheKey:i,queryResponse:a}))}}function se(e){return(t,n)=>{t(K({exploreId:e}))}}function ie(e){return(t,n)=>{const{logsVolumeDataProvider:a}=n().explore[e];if(a){const n=a.subscribe({next:n=>{t(z({exploreId:e,logsVolumeData:n}))}});t(B({exploreId:e,logsVolumeDataSubscription:n}))}}}const re=(e,t)=>{if(P.match(t)){const{queries:n}=e,{index:a,query:s}=t.payload,i=[...n.slice(0,a+1),Object.assign({},s),...n.slice(a+1)];return Object.assign({},e,{queries:i,queryKeys:(0,h.$$)(i,e.datasourceInstance)})}if(A.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n})}if(M.match(t))return(0,h.RZ)(e.querySubscription),Object.assign({},e,{loading:!1});if($.match(t)){const{queries:n}=e,{modification:a,index:s,modifier:i}=t.payload;let r;return r=void 0===s?n.map(((e,t)=>{const s=i(Object.assign({},e),a);return(0,h.fR)(s,n,t)})):n.map(((e,t)=>{if(t===s){const s=i(Object.assign({},e),a);return(0,h.fR)(s,n,t)}return e})),Object.assign({},e,{queries:r,queryKeys:(0,h.$$)(r,e.datasourceInstance)})}if(U.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n.slice(),queryKeys:(0,h.$$)(n,e.datasourceInstance)})}if(R.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n,queryKeys:(0,h.$$)(n,e.datasourceInstance)})}if(L.match(t)){const{querySubscription:n}=t.payload;return Object.assign({},e,{querySubscription:n})}if(E.match(t)){let{logsVolumeDataProvider:n}=t.payload;return e.logsVolumeDataSubscription&&e.logsVolumeDataSubscription.unsubscribe(),Object.assign({},e,{logsVolumeDataProvider:n,logsVolumeDataSubscription:void 0})}if(V.match(t))return Object.assign({},e,{logsVolumeData:void 0});if(B.match(t)){const{logsVolumeDataSubscription:n}=t.payload;return Object.assign({},e,{logsVolumeDataSubscription:n})}if(z.match(t)){let{logsVolumeData:n}=t.payload;return Object.assign({},e,{logsVolumeData:n})}if(_.match(t))return oe(e,t);if(R.match(t)){const{queries:n}=t.payload;return Object.assign({},e,{queries:n,queryKeys:(0,h.$$)(n,e.datasourceInstance)})}if(H.match(t)){const{loadingState:n}=t.payload;return Object.assign({},e,{queryResponse:Object.assign({},e.queryResponse,{state:n}),loading:n===c.LoadingState.Loading||n===c.LoadingState.Streaming})}if(W.match(t)){const{isPaused:n}=t.payload;return Object.assign({},e,{isPaused:n})}if(q.match(t))return Object.assign({},e,{scanning:!0});if(Z.match(t))return Object.assign({},e,{scanning:!1,scanRange:void 0});if(G.match(t)){const n=5,{cache:a}=e,{queryResponse:s,cacheKey:i}=t.payload;let r=[...a];if(!r.some((e=>e.key===i))){r=[{key:i,value:s},...r].slice(0,n)}return Object.assign({},e,{cache:r})}return K.match(t)?Object.assign({},e,{cache:[]}):e},oe=(e,t)=>{var n,a;const{response:s}=t.payload,{request:i,state:r,series:o,error:l,graphResult:d,logsResult:h,tableResult:p,traceFrames:g,nodeGraphFrames:m}=s;if(l){var f,v;if(l.type===c.DataQueryErrorType.Timeout)return Object.assign({},e,{queryResponse:s,loading:r===c.LoadingState.Loading||r===c.LoadingState.Streaming});if(l.type===c.DataQueryErrorType.Cancelled)return e;u.config.angularSupportEnabled&&null!==(f=e.datasourceInstance)&&void 0!==f&&null!==(v=f.components)&&void 0!==v&&v.QueryCtrl&&e.eventBridge.emit(c.PanelEvents.dataError,l)}if(!i)return Object.assign({},e);if(u.config.angularSupportEnabled&&null!==(n=e.datasourceInstance)&&void 0!==n&&null!==(a=n.components)&&void 0!==a&&a.QueryCtrl){const t=o.map((e=>(0,c.toLegacyResponseData)(e)));e.eventBridge.emit(c.PanelEvents.dataReceived,t)}return Object.assign({},e,{queryResponse:s,graphResult:d,tableResult:p,logsResult:h,loading:r===c.LoadingState.Loading||r===c.LoadingState.Streaming,showLogs:!!h,showMetrics:!!d,showTable:!!p,showTrace:!!g.length,showNodeGraph:!!m.length})}},77377:(e,t,n)=>{"use strict";n.d(t,{F9:()=>x,b3:()=>v,cD:()=>m,mG:()=>b,ok:()=>y,oz:()=>f});var a=n(35140),s=n(43215),i=n(90923),r=n(3490),o=n(62236),l=n(78647),d=n(24994),c=n(75478),u=n(72629),h=n(70229);const p=(0,a.PH)("explore/changeRange"),g=(0,a.PH)("explore/changeRefreshInterval"),m=e=>(t,n)=>{const{syncedTimes:a}=n().explore;a?(t(v(Object.assign({},e,{exploreId:d.K.left}))),t((0,h.aA)(d.K.left,{preserveCache:!0})),t(v(Object.assign({},e,{exploreId:d.K.right}))),t((0,h.aA)(d.K.right,{preserveCache:!0}))):(t(v(Object.assign({},e))),t((0,h.aA)(e.exploreId,{preserveCache:!0})))};function f(e,t){return g({exploreId:e,refreshInterval:t})}const v=e=>(t,n)=>{const{exploreId:a,absoluteRange:r,rawRange:d}=e,u=n().explore[a],h=(0,l.Z)(n().user),g=(0,l.i)(n().user),{range:f}=u;let v=f.raw;r&&(v={from:(0,s.dateTimeForTimeZone)(h,r.from),to:(0,s.dateTimeForTimeZone)(h,r.to)}),d&&(v=d);const b=(0,o.OQ)(h,v,g),x={from:b.from.valueOf(),to:b.to.valueOf()},y={time:b.raw,refresh:!1,timepicker:{},getTimezone:()=>h,timeRangeUpdated:e=>{t(m({exploreId:a,rawRange:e}))}};(0,c.$t)().init(y),(0,i.getTemplateSrv)().updateTimeRange((0,c.$t)().timeRange()),t(p({exploreId:a,range:b,absoluteRange:x}))};function b(e){return(t,n)=>{if(e===d.K.left){const e=n().explore.left;t(m({exploreId:d.K.right,rawRange:e.range.raw}))}else{const e=n().explore.right;t(m({exploreId:d.K.left,rawRange:e.range.raw}))}const a=n().explore.syncedTimes;t((0,u.tl)({syncedTimes:!a})),t((0,u.og)())}}function x(){return(e,t)=>{const n=(0,l.Z)(t().user),a=(0,l.i)(t().user),s=t().explore.left,i=(0,o.OQ)(n,s.range.raw,a),r={from:i.from.valueOf(),to:i.to.valueOf()};e(v({exploreId:d.K.left,absoluteRange:r}));const c=t().explore.right;if(c){const t=(0,o.OQ)(n,c.range.raw,a),s={from:t.from.valueOf(),to:t.to.valueOf()};e(v({exploreId:d.K.right,absoluteRange:s}))}e((0,u.og)())}}const y=(e,t)=>{if(g.match(t)){const{refreshInterval:n}=t.payload,a=r.RefreshPicker.isLive(n),i=(0,o.Oy)(n),l=(0,s.sortLogsResult)(e.logsResult,i);return r.RefreshPicker.isLive(e.refreshInterval)&&!a&&(0,o.RZ)(e.querySubscription),Object.assign({},e,{refreshInterval:n,queryResponse:Object.assign({},e.queryResponse,{state:a?s.LoadingState.Streaming:s.LoadingState.Done}),isLive:a,isPaused:!a&&e.isPaused,loading:a,logsResult:l})}if(p.match(t)){const{range:n,absoluteRange:a}=t.payload;return Object.assign({},e,{range:n,absoluteRange:a})}return e}},83097:(e,t,n)=>{"use strict";n.d(t,{M7:()=>b,lp:()=>g,M0:()=>x,D:()=>v,r_:()=>m,t5:()=>p,FG:()=>u});var a=n(82897),s=n(43215),i=n(17421),r=n(62236),o=n(67436);const l=e=>{let t=e.raw.from;(0,s.isDateTime)(t)&&(t=t.valueOf().toString(10));let n=e.raw.to;return(0,s.isDateTime)(n)&&(n=n.valueOf().toString(10)),{from:t,to:n}},d={from:"now-6h",to:"now"},c="grafana.explore.style.graph",u=e=>{i.Z.set(c,e)},h=()=>{const e=i.Z.get(c);return(0,r.xq)(e)},p=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:d},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:g(),tableResult:null,graphResult:null,logsResult:null,eventBridge:null,cache:[],richHistory:[],logsVolumeDataProvider:void 0,logsVolumeData:void 0,graphStyle:h(),panelsState:{}}),g=()=>({state:s.LoadingState.NotStarted,series:[],timeRange:(0,s.getDefaultTimeRange)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],tableFrames:[],graphResult:null,logsResult:null,tableResult:null});async function m(e,t){var n;let a;try{a=await(0,o.ak)().get(t)}catch(e){a=await(0,o.ak)().get()}if(a.init)try{a.init()}catch(e){console.error(e)}const s=`grafana.explore.history.${null===(n=a.meta)||void 0===n?void 0:n.id}`,l=i.Z.getObject(s,[]);return i.Z.set((0,r.I$)(e),a.uid),{history:l,instance:a}}function f(e){let t=(0,a.mapValues)(e,(e=>(0,a.isObject)(e)?f(e):e));if(t=(0,a.omitBy)(t,a.isEmpty),!(0,a.isEmpty)(t))return t}function v(e){var t;return{datasource:(null===(t=e.datasourceInstance)||void 0===t?void 0:t.uid)||"",queries:e.queries.map(r.uC),range:l(e.range),panelsState:f(e.panelsState)}}function b(e){const t={from:e.from,to:e.to};return Object.entries(t).map((e=>{let[t,n]=e;return`${encodeURIComponent(t)}=${encodeURIComponent(n.toString())}`})).join("&")}function x(e,t){const n=b(t),a=e.findIndex((e=>e.key===n));return a>=0?e[a].value:void 0}},67892:(e,t,n)=>{"use strict";n.d(t,{a:()=>l,u:()=>d});var a=n(68404),s=n(43215),i=n(90923),r=n(61959),o=n(7929);const l=e=>{const{field:t,vars:n,splitOpenFn:a,range:l,rowIndex:d,dataFrame:c}=e,u=Object.assign({},n||{});if(u.__value={value:{raw:t.values.get(d)},text:"Raw value"},c&&(u.__data={value:{name:c.name,refId:c.refId,fields:(0,s.getFieldDisplayValuesProxy)({frame:c,rowIndex:d})},text:"Data"}),t.config.links){const e=[];return r.Vt.hasAccessToExplore()?e.push(...t.config.links):e.push(...t.config.links.filter((e=>!e.internal))),e.map((e=>{if(e.internal)return(0,s.mapInternalLinkToExplore)({link:e,internalLink:e.internal,scopedVars:u,range:l,field:t,onClickFn:a,replaceVariables:(0,i.getTemplateSrv)().replace.bind((0,i.getTemplateSrv)())});{const n=(e,t)=>(0,i.getTemplateSrv)().replace(e,Object.assign({},t,u)),a=(0,o.Bq)().getDataLinkUIModel(e,n,t);return a.title||(a.title=function(e){e.indexOf("://")<0&&(e=`http://${e}`);let t;try{t=new URL(e).hostname}catch(n){t=e}return t}(a.href)),a}}))}return[]};function d(e,t){return(0,a.useCallback)(((n,a)=>n.fields.flatMap((s=>{var i,r;return null!==(i=s.config)&&void 0!==i&&i.links&&null!==(r=s.config)&&void 0!==r&&r.links.length?l({field:s,rowIndex:a,range:e,dataFrame:n,splitOpenFn:t}):[]}))),[e,t])}},24036:(e,t,n)=>{"use strict";n.d(t,{Yq:()=>W,mV:()=>Z,bE:()=>q});var a,s=n(94396),i=n(71114),r=n(43215),o=n(90923),l=n(20467),d=n(68404),c=n(3490),u=n(95450),h=n(36636),p=n(45243),g=n(45916);const m=p.Z.reducerTypes.map((e=>({label:e.text,value:e.value}))),f=p.Z.evalOperators.map((e=>({label:e.text,value:e.value}))),v=p.Z.evalFunctions.map((e=>({label:e.text,value:e.value}))),b=e=>{let{condition:t,index:n,onChange:s,onRemoveCondition:i,refIds:r}=e;const o=(0,c.useStyles)(x),l=(e,n)=>{const a=parseFloat(e.currentTarget.value),i=[...t.evaluator.params];i[n]=a,s(Object.assign({},t,{evaluator:Object.assign({},t.evaluator,{params:i})}))},d=h.css`
    width: 60px;
  `,u=t.evaluator.type===p.$.IsWithinRange||t.evaluator.type===p.$.IsOutsideRange;return(0,g.jsxs)(c.InlineFieldRow,{children:[0===n?(0,g.jsx)("div",{className:(0,h.cx)(o.button,d),children:"WHEN"}):(0,g.jsx)(c.ButtonSelect,{className:(0,h.cx)(o.buttonSelectText,d),options:f,onChange:e=>{s(Object.assign({},t,{operator:{type:e.value}}))},value:f.find((e=>e.value===t.operator.type))}),(0,g.jsx)(c.Select,{options:m,onChange:e=>{s(Object.assign({},t,{reducer:{type:e.value,params:[]}}))},width:20,value:m.find((e=>e.value===t.reducer.type))}),(0,g.jsx)("div",{className:o.button,children:"OF"}),(0,g.jsx)(c.Select,{onChange:e=>{s(Object.assign({},t,{query:{params:[e.value]}}))},options:r,width:15,value:r.find((e=>e.value===t.query.params[0]))}),(0,g.jsx)(c.ButtonSelect,{className:o.buttonSelectText,options:v,onChange:e=>{s(Object.assign({},t,{evaluator:{params:t.evaluator.params,type:e.value}}))},value:v.find((e=>e.value===t.evaluator.type))}),u?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Input,{type:"number",width:10,onChange:e=>l(e,0),value:t.evaluator.params[0]}),(0,g.jsx)("div",{className:o.button,children:"TO"}),(0,g.jsx)(c.Input,{type:"number",width:10,onChange:e=>l(e,1),value:t.evaluator.params[1]})]}):t.evaluator.type!==p.$.HasNoValue?(0,g.jsx)(c.Input,{type:"number",width:10,onChange:e=>l(e,0),value:t.evaluator.params[0]}):null,(0,g.jsx)(c.Button,{variant:"secondary",type:"button",onClick:()=>i(n),children:a||(a=(0,g.jsx)(c.Icon,{name:"trash-alt"}))})]})},x=e=>{const t=h.css`
    color: ${e.colors.textBlue};
    font-size: ${e.typography.size.sm};
  `;return{buttonSelectText:t,button:(0,h.cx)(h.css`
        display: flex;
        align-items: center;
        border-radius: ${e.border.radius.sm};
        font-weight: ${e.typography.weight.semibold};
        border: 1px solid ${e.colors.border1};
        white-space: nowrap;
        padding: 0 ${e.spacing.sm};
        background-color: ${e.colors.bodyBg};
      `,t)}};var y;const w=e=>{var t;let{onChange:n,query:a,refIds:s}=e;const i=e=>{if(a.conditions){const t=a.conditions[e],s=a.conditions.filter((e=>e!==t)).map(((e,t)=>0===t?Object.assign({},e,{operator:{type:"when"}}):e));n(Object.assign({},a,{conditions:s}))}};return(0,g.jsxs)("div",{children:[(0,g.jsx)(c.InlineFieldRow,{children:(0,g.jsx)(c.InlineField,{label:"Conditions",labelWidth:14,children:(0,g.jsx)("div",{children:null===(t=a.conditions)||void 0===t?void 0:t.map(((e,t)=>{if(e)return(0,g.jsx)(b,{index:t,condition:e,onChange:e=>((e,t)=>{a.conditions&&n(Object.assign({},a,{conditions:[...a.conditions.slice(0,t),e,...a.conditions.slice(t+1)]}))})(e,t),onRemoveCondition:i,refIds:s},t)}))})})}),(0,g.jsx)(c.Button,{variant:"secondary",type:"button",onClick:()=>{if(a.conditions){var e,t,s;const i=null!==(e=null===(t=a.conditions.at(-1))||void 0===t||null===(s=t.query)||void 0===s?void 0:s.params)&&void 0!==e?e:[],r=Object.assign({},u.R,{query:{params:i}});n(Object.assign({},a,{conditions:a.conditions.length>0?[...a.conditions,r]:[r]}))}},children:y||(y=(0,g.jsx)(c.Icon,{name:"plus-circle"}))})]})};var j,S,C,k,T,I,O,N,F,D,P,A,M,R=n(50962),$=n(8072);const L=e=>{let{labelWidth:t,onChange:n,query:a,onRunQuery:s}=e;const[i,r]=(0,R.Z)(!1),o=(0,c.useStyles2)((e=>V(e,i)));return(0,g.jsxs)($.Stack,{direction:"row",children:[(0,g.jsx)(c.InlineField,{label:"Expression",labelWidth:t,grow:!0,shrink:!0,className:h.css`
          align-items: flex-start;
          flex: 0.7;
        `,children:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.TextArea,{value:a.expression,onChange:e=>{n(Object.assign({},a,{expression:e.target.value}))},rows:5,placeholder:"Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",onBlur:()=>{a.expression&&s()}}),(0,g.jsxs)(c.Button,{variant:"secondary",size:"sm",onClick:r,children:[!1===i?"Show":"Hide"," help"]})]})}),(0,g.jsxs)("div",{className:o.documentationContainer,children:[(0,g.jsxs)("header",{className:o.documentationHeader,children:[j||(j=(0,g.jsx)(c.Icon,{name:"book-open"}))," Math operator"]}),S||(S=(0,g.jsxs)("div",{children:["Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",(0,g.jsx)("br",{}),"Example: ",(0,g.jsx)("code",{children:"$A + $B"})]})),(0,g.jsx)("header",{className:o.documentationHeader,children:"Available Math functions"}),(0,g.jsxs)("div",{className:o.documentationFunctions,children:[C||(C=(0,g.jsx)(E,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"})),k||(k=(0,g.jsx)(E,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."})),T||(T=(0,g.jsx)(E,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."})),I||(I=(0,g.jsx)(E,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."})),O||(O=(0,g.jsx)(E,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."})),N||(N=(0,g.jsx)(E,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"})),F||(F=(0,g.jsx)(E,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."})),D||(D=(0,g.jsx)(E,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."})),P||(P=(0,g.jsx)(E,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."})),A||(A=(0,g.jsx)(E,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))]}),(0,g.jsxs)("div",{children:["See our additional documentation on"," ",(0,g.jsxs)("a",{className:o.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer",children:[M||(M=(0,g.jsx)(c.Icon,{size:"xs",name:"external-link-alt"}))," Math expressions"]}),"."]})]})]})},E=e=>{let{name:t,description:n}=e;const a=(0,c.useStyles2)(B);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:a.name,children:t}),(0,g.jsx)("span",{className:a.description,children:n})]})},V=(e,t)=>({documentationHeader:h.css`
    font-size: ${e.typography.h5.fontSize};
    font-weight: ${e.typography.h5.fontWeight};
  `,documentationLink:h.css`
    color: ${e.colors.text.link};
  `,documentationContainer:h.css`
    display: ${t?"flex":"none"};
    flex: 1;
    flex-direction: column;
    gap: ${e.spacing(2)};
  `,documentationFunctions:h.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${e.spacing(2)};
  `}),B=e=>({name:h.css`
    font-weight: ${e.typography.fontWeightBold};
  `,description:h.css`
    font-size: ${e.typography.bodySmall.fontSize};
    color: ${e.colors.text.disabled};
  `});var z=n(22912);const _=e=>{var t,n;let{labelWidth:a,onChange:s,refIds:i,query:r}=e;const o=z.SQ.find((e=>e.value===r.reducer)),l=e=>{s(Object.assign({},r,{settings:e}))},d=e=>{const t=e.currentTarget.valueAsNumber;l({mode:z.kN.ReplaceNonNumbers,replaceWithValue:null!=t?t:0})},u=null!==(t=null===(n=r.settings)||void 0===n?void 0:n.mode)&&void 0!==t?t:z.kN.Strict;return(0,g.jsxs)(c.InlineFieldRow,{children:[(0,g.jsx)(c.InlineField,{label:"Function",labelWidth:a,children:(0,g.jsx)(c.Select,{options:z.SQ,value:o,onChange:e=>{s(Object.assign({},r,{reducer:e.value}))},width:25})}),(0,g.jsx)(c.InlineField,{label:"Input",labelWidth:a,children:(0,g.jsx)(c.Select,{onChange:e=>{s(Object.assign({},r,{expression:e.value}))},options:i,value:r.expression,width:20})}),(0,g.jsx)(c.InlineField,{label:"Mode",labelWidth:a,children:(0,g.jsx)(c.Select,{onChange:e=>{var t;let n;if(e.value===z.kN.ReplaceNonNumbers){let e=0;var a,s;(null===(t=r.settings)||void 0===t?void 0:t.mode)===z.kN.ReplaceNonNumbers&&(e=null!==(a=null===(s=r.settings)||void 0===s?void 0:s.replaceWithValue)&&void 0!==a?a:0),n={mode:z.kN.ReplaceNonNumbers,replaceWithValue:e}}else n={mode:e.value};l(n)},options:z.ev,value:u,width:25})}),(()=>{var e,t;if(u===z.kN.ReplaceNonNumbers)return(0,g.jsx)(c.InlineField,{label:"Replace With",labelWidth:a,children:(0,g.jsx)(c.Input,{type:"number",width:10,onChange:d,value:null!==(e=null===(t=r.settings)||void 0===t?void 0:t.replaceWithValue)&&void 0!==e?e:0})})})()]})},U=e=>{let{labelWidth:t,onChange:n,refIds:a,query:s}=e;const i=z.Fr.find((e=>e.value===s.downsampler)),r=z.r8.find((e=>e.value===s.upsampler));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.InlineFieldRow,{children:(0,g.jsx)(c.InlineField,{label:"Input",labelWidth:t,children:(0,g.jsx)(c.Select,{onChange:e=>{n(Object.assign({},s,{expression:e.value}))},options:a,value:s.expression,width:20})})}),(0,g.jsxs)(c.InlineFieldRow,{children:[(0,g.jsx)(c.InlineField,{label:"Resample to",labelWidth:t,tooltip:"10s, 1m, 30m, 1h",children:(0,g.jsx)(c.Input,{onChange:e=>{n(Object.assign({},s,{window:e.target.value}))},value:s.window,width:15})}),(0,g.jsx)(c.InlineField,{label:"Downsample",children:(0,g.jsx)(c.Select,{options:z.Fr,value:i,onChange:e=>{n(Object.assign({},s,{downsampler:e.value}))},width:25})}),(0,g.jsx)(c.InlineField,{label:"Upsample",children:(0,g.jsx)(c.Select,{options:z.r8,value:r,onChange:e=>{n(Object.assign({},s,{upsampler:e.value}))},width:25})})]})]})};class H extends o.DataSourceWithBackend{constructor(e){super(e),this.instanceSettings=e}applyTemplateVariables(e,t){const n=(0,o.getTemplateSrv)();return Object.assign({},e,{expression:n.replace(e.expression,t),window:n.replace(e.window,t)})}getCollapsedText(e){return`Expression: ${e.type}`}query(e){let t=e.targets.map((async t=>{const n=await(0,o.getDataSourceSrv)().get(t.datasource);return n.interpolateVariablesInQueries?null==n?void 0:n.interpolateVariablesInQueries([t],e.scopedVars)[0]:t}));return(0,s.D)(Promise.all(t)).pipe((0,i.z)((t=>super.query(Object.assign({},e,{targets:t})))))}newQuery(e){var t;return Object.assign({refId:"--",datasource:l.hr,type:null!==(t=null==e?void 0:e.type)&&void 0!==t?t:z.Us.math},e)}}const W="-100",q={id:-100,uid:W,name:l.hr.name,type:l.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:r.PluginType.datasource,name:l.hr.type,id:l.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{}},Z=new H(q);Z.meta={id:l.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},Z.components={QueryEditor:function(e){var t;const{query:n,queries:a,onRunQuery:s,onChange:i}=e,{getCachedExpression:r,setCachedExpression:o}=function(){const e=(0,d.useRef)({});return{getCachedExpression:(0,d.useCallback)((t=>{switch(t){case z.Us.math:case z.Us.reduce:case z.Us.resample:return e.current[t];case z.Us.classic:return}}),[]),setCachedExpression:(0,d.useCallback)(((t,n)=>{switch(t){case z.Us.math:e.current.math=n;break;case z.Us.reduce:case z.Us.resample:e.current.reduce=n,e.current.resample=n}}),[])}}();(0,d.useEffect)((()=>{o(n.type,n.expression)}),[n.expression,n.type,o]);const l=(0,d.useCallback)((e=>{const t=r(e.value),a=(0,u.J)(Object.assign({},n,{type:e.value}));i(Object.assign({},a,{expression:null!=t?t:a.expression}))}),[n,i,r]),h=z._M.find((e=>e.value===n.type));return(0,g.jsxs)("div",{children:[(0,g.jsx)(c.InlineField,{label:"Operation",labelWidth:14,children:(0,g.jsx)(c.Select,{options:z._M,value:h,onChange:l,width:25})}),(()=>{const e=a.filter((e=>n.refId!==e.refId)).map((e=>({value:e.refId,label:e.refId})));switch(n.type){case z.Us.math:return t||(t=(0,g.jsx)(L,{onChange:i,query:n,labelWidth:14,onRunQuery:s}));case z.Us.reduce:return(0,g.jsx)(_,{refIds:e,onChange:i,labelWidth:14,query:n});case z.Us.resample:return(0,g.jsx)(U,{query:n,labelWidth:14,onChange:i,refIds:e});case z.Us.classic:return(0,g.jsx)(w,{onChange:i,query:n,refIds:e})}})()]})}}},22912:(e,t,n)=>{"use strict";n.d(t,{Fr:()=>d,SQ:()=>r,Us:()=>s,_M:()=>i,ev:()=>l,kN:()=>o,r8:()=>c});var a=n(43215);let s;!function(e){e.math="math",e.reduce="reduce",e.resample="resample",e.classic="classic_conditions"}(s||(s={}));const i=[{value:s.math,label:"Math"},{value:s.reduce,label:"Reduce"},{value:s.resample,label:"Resample"},{value:s.classic,label:"Classic condition"}],r=[{value:a.ReducerID.min,label:"Min",description:"Get the minimum value"},{value:a.ReducerID.max,label:"Max",description:"Get the maximum value"},{value:a.ReducerID.mean,label:"Mean",description:"Get the average value"},{value:a.ReducerID.sum,label:"Sum",description:"Get the sum of all values"},{value:a.ReducerID.count,label:"Count",description:"Get the number of values"},{value:a.ReducerID.last,label:"Last",description:"Get the last value"}];let o;!function(e){e.Strict="",e.ReplaceNonNumbers="replaceNN",e.DropNonNumbers="dropNN"}(o||(o={}));const l=[{value:o.Strict,label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:o.DropNonNumbers,label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:o.ReplaceNonNumbers,label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],d=[{value:a.ReducerID.min,label:"Min",description:"Fill with the minimum value"},{value:a.ReducerID.max,label:"Max",description:"Fill with the maximum value"},{value:a.ReducerID.mean,label:"Mean",description:"Fill with the average value"},{value:a.ReducerID.sum,label:"Sum",description:"Fill with the sum of all values"}],c=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}]},95450:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,R:()=>o});var a=n(43215),s=n(45243),i=n(22912);const r=e=>{switch(e.type){case i.Us.reduce:e.reducer||(e.reducer=a.ReducerID.mean);break;case i.Us.resample:e.downsampler||(e.downsampler=a.ReducerID.mean),e.upsampler||(e.upsampler="fillna"),e.reducer=void 0;break;case i.Us.math:e.expression=void 0;break;case i.Us.classic:e.conditions||(e.conditions=[o]);break;default:e.reducer=void 0}return e},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:s.$.IsAbove}}},87413:(e,t,n)=>{"use strict";n.d(t,{Go:()=>g,J6:()=>f,OD:()=>p,Pb:()=>h,Uk:()=>x,W7:()=>w,a:()=>m,pz:()=>y,v7:()=>b});var a=n(58799),s=n(43215),i=n(90923),r=n(36537),o=n(58257),l=n(98163),d=n(28659),c=n(49545),u=n(11304);function h(e){return async t=>{const n=await d.ae.getFolderByUid(e);t((0,u.G3)(n)),t((0,r.RL)((0,c.B)(n)))}}function p(e){return async t=>{const n=await d.ae.put(`/api/folders/${e.uid}`,{title:e.title,version:e.version});t((0,r.$l)((0,o.AT)("Folder saved"))),i.locationService.push(`${n.url}/settings`)}}function g(e){return async()=>{await d.ae.delete(`/api/folders/${e}?forceDeleteRules=false`),i.locationService.push("/dashboards")}}function m(e){return async t=>{const n=await d.ae.get(`/api/folders/${e}/permissions`);t((0,u.R7)(n))}}function f(e){return async t=>{try{await(0,a.n)(d.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${e}/permissions`})),t((0,u.$$)(!0))}catch(e){var n;if((0,i.isFetchError)(e)&&403!==e.status)t((0,r.$l)((0,o.ZR)("Error checking folder permissions",null===(n=e.data)||void 0===n?void 0:n.message)));t((0,u.$$)(!1))}}}function v(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function b(e,t){return async(n,a)=>{const s=a().folder,i=[];for(const n of s.permissions){if(n.inherited)continue;const a=v(n);e===n&&(a.permission=t),i.push(a)}await d.ae.post(`/api/folders/${s.uid}/permissions`,{items:i}),await n(m(s.uid))}}function x(e){return async(t,n)=>{const a=n().folder,s=[];for(const t of a.permissions)t.inherited||t===e||s.push(v(t));await d.ae.post(`/api/folders/${a.uid}/permissions`,{items:s}),await t(m(a.uid))}}function y(e){return async(t,n)=>{const a=n().folder,s=[];for(const e of a.permissions)e.inherited||s.push(v(e));s.push({userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}),await d.ae.post(`/api/folders/${a.uid}/permissions`,{items:s}),await t(m(a.uid))}}function w(e){return async t=>{const n=await(0,i.getBackendSrv)().post("/api/folders",{title:e});await l.Vt.fetchUserPermissions(),t((0,r.$l)((0,o.AT)("Folder Created","OK"))),i.locationService.push(s.locationUtil.stripBaseFromUrl(n.url))}}},49545:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,_:()=>r});var a=n(61959),s=n(47570);function i(e){const t={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:e.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${e.uid}`,text:"Dashboards",url:e.url}]};return t.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${e.uid}`,text:"Panels",url:`${e.url}/library-panels`}),a.Vt.hasPermission(s.bW.AlertingRuleRead)&&t.children.push({active:!1,icon:"bell",id:`folder-alerting-${e.uid}`,text:"Alert rules",url:`${e.url}/alerting`}),e.canAdmin&&t.children.push({active:!1,icon:"lock",id:`folder-permissions-${e.uid}`,text:"Permissions",url:`${e.url}/permissions`}),e.canSave&&t.children.push({active:!1,icon:"cog",id:`folder-settings-${e.uid}`,text:"Settings",url:`${e.url}/settings`}),t}function r(e){const t=i({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return t.children[e].active=!0,{main:t,node:t.children[e]}}},11304:(e,t,n)=>{"use strict";n.d(t,{$$:()=>d,G3:()=>o,R7:()=>r,Ss:()=>l,ZP:()=>c});var a=n(35140),s=n(8590);const i=(0,a.oM)({name:"folder",initialState:{id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},reducers:{loadFolder:(e,t)=>Object.assign({},e,t.payload,{hasChanged:!1}),setFolderTitle:(e,t)=>Object.assign({},e,{title:t.payload,hasChanged:t.payload.trim().length>0}),loadFolderPermissions:(e,t)=>Object.assign({},e,{permissions:(0,s.A)(t.payload)}),setCanViewFolderPermissions:(e,t)=>(e.canViewFolderPermissions=t.payload,e)}}),{loadFolderPermissions:r,loadFolder:o,setFolderTitle:l,setCanViewFolderPermissions:d}=i.actions,c={folder:i.reducer}},85141:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var a=n(36636),s=n(68404),i=n(3490),r=n(60734),o=n(45916);const l=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:r.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],d=e=>{let{value:t,onChange:n,context:a,item:d}=e;const u=c((0,i.useTheme2)()),[h,p]=(0,s.useState)(),g=d.settings;(0,s.useEffect)((()=>{!async function(){const e=await(0,r.so)(t);p(e)}()}),[t,p]);const{current:m,options:f}=(0,s.useMemo)((()=>{let e=null!=g&&g.options?[...g.options]:[...l],t=null==e?void 0:e.find((e=>e.value===(null==h?void 0:h.path)));return!t&&h&&(t={label:h.path,value:h.path},e.push(t)),{options:e,current:t}}),[h,null==g?void 0:g.options]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Select,{value:m,options:f,onChange:e=>n(e.value),allowCustomValue:!0,formatCreateLabel:e=>`Load from URL: ${e}`}),h&&(0,o.jsxs)(o.Fragment,{children:[h.error&&(0,o.jsx)(i.Alert,{title:h.error,severity:"warning"}),h.count&&(0,o.jsxs)("div",{className:u.keys,children:[(0,o.jsxs)("b",{children:["(",h.count,")"]}),h.examples(10).map((e=>(0,o.jsxs)("span",{children:[e,","]},e))),h.count>10&&" ..."]})]})]})},c=(0,i.stylesFactory)((e=>({keys:a.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `})))},93067:(e,t,n)=>{"use strict";n.d(t,{C:()=>i});var a=n(43215),s=n(85141);function i(e,t,n,i){switch(n.addRadio({path:`${t}mode`,name:e,description:"",defaultValue:a.FrameGeometrySourceMode.Auto,settings:{options:[{value:a.FrameGeometrySourceMode.Auto,label:"Auto"},{value:a.FrameGeometrySourceMode.Coords,label:"Coords"},{value:a.FrameGeometrySourceMode.Geohash,label:"Geohash"},{value:a.FrameGeometrySourceMode.Lookup,label:"Lookup"}]}}),null==i?void 0:i.mode){case a.FrameGeometrySourceMode.Coords:n.addFieldNamePicker({path:`${t}latitude`,name:"Latitude field",settings:{filter:e=>e.type===a.FieldType.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${t}longitude`,name:"Longitude field",settings:{filter:e=>e.type===a.FieldType.number,noFieldsMessage:"No numeric fields found"}});break;case a.FrameGeometrySourceMode.Geohash:n.addFieldNamePicker({path:`${t}geohash`,name:"Geohash field",settings:{filter:e=>e.type===a.FieldType.string,noFieldsMessage:"No strings fields found"}});break;case a.FrameGeometrySourceMode.Lookup:n.addFieldNamePicker({path:`${t}lookup`,name:"Lookup field",settings:{filter:e=>e.type===a.FieldType.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${t}gazetteer`,name:"Gazetteer",editor:s.Q})}}},42329:(e,t,n)=>{"use strict";n.d(t,{EK:()=>p,Fh:()=>g,ie:()=>h,uZ:()=>c,zS:()=>u});var a=n(244),s=n(60459),i=n(46341),r=n(5368),o=n(43215),l=n(50525);function d(e,t,n){t&n?e[0]=(e[0]+e[1])/2:e[1]=(e[0]+e[1])/2}function c(e){var t;return{name:null!==(t=e.name)&&void 0!==t?t:"Point",type:o.FieldType.geo,values:new o.ArrayVector(e.values.toArray().map((e=>{const t=function(e){if(null==e||!e.length)return;const t=[16,8,4,2,1];let n=!0;const a=[],s=[];let i;a[0]=-90,a[1]=90,s[0]=-180,s[1]=180,e.split("").forEach((e=>{i="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(e),t.forEach((e=>{d(n?s:a,i,e),n=!n}))}));const r=(a[0]+a[1])/2;return[(s[0]+s[1])/2,r]}(e);if(t)return new a.Z((0,r.mi)(t))}))),config:m}}function u(e,t){const n=new Array(e.values.length);for(let s=0;s<e.values.length;s++){const i=e.values.get(s),o=t.values.get(s);null!==i&&null!==o&&(n[s]=new a.Z((0,r.mi)([i,o])))}return{name:"Point",type:o.FieldType.geo,values:new o.ArrayVector(n),config:m}}function h(e,t){const n=t.values.length,a=new Array(n);for(let i=0;i<n;i++){var s;a[i]=null===(s=e.find(t.values.get(i)))||void 0===s?void 0:s.geometry()}return{name:"Geometry",type:o.FieldType.geo,values:new o.ArrayVector(a),config:m}}function p(e,t){const n=e.values.toArray(),a=t.values.toArray();if(!n||!a)throw"missing src/dest";if(n.length!==a.length)throw"Source and destination field lengths do not match";const i=e.values.length,r=new Array(i);for(let e=0;e<i;e++){const t=n[e],i=a[e];t&&i?r[e]=new s.Z([t,i]):t?r[e]=t:i&&(r[e]=i)}return{name:"Geometry",type:o.FieldType.geo,values:new o.ArrayVector(r),config:m}}function g(e,t){const n=e.values.toArray(),a=t.values.toArray();if(!n||!a)throw"missing src/dest";if(n.length!==a.length)throw"Source and destination field lengths do not match";const s=e.values.length,r=new Array(s);for(let e=0;e<s;e++){const t=n[e],s=a[e];t&&s&&(r[e]=new i.Z([(0,l.Lb)(t),(0,l.Lb)(s)]))}return{name:"Geometry",type:o.FieldType.geo,values:new o.ArrayVector(r),config:m}}const m=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},60734:(e,t,n)=>{"use strict";n.d(t,{LI:()=>p,so:()=>g});var a=n(53901),s=n(244),i=n(43215),r=n(90923),o=n(67051);function l(e){return e.count<1?i.FieldType.other:e.types.size>1?(e.values=e.values.map((e=>null!=e?`${e}`:e)),i.FieldType.string):e.types.values().next().value}var d=n(42329),c=n(5368);function u(e,t){let n;if(Array.isArray(t)){const n=t[0];if(n.latitude&&n.longitude&&(n.key||n.keys))return function(e,t){let n=0;const a=new Map;for(const e of t){const t=new s.Z((0,c.mi)([e.longitude,e.latitude])),i={point:()=>t,geometry:()=>t};if(e.name&&(a.set(e.name,i),a.set(e.name.toUpperCase(),i)),e.key&&(a.set(e.key,i),a.set(e.key.toUpperCase(),i)),e.keys)for(const t of e.keys)a.set(t,i),a.set(t.toUpperCase(),i);n++}return{path:e,find:e=>{let t=a.get(e);return t||"string"!=typeof e||(t=a.get(e.toUpperCase())),t},count:n,examples:e=>{const t=[];if(a.size<1)t.push("no values found");else for(const n of a.keys())if(t.push(n),t.length>=e)break;return t}}}(e,t)}else Array.isArray(null==t?void 0:t.features)&&"FeatureCollection"===(null==t?void 0:t.type)&&(n=function(e){const t=(new o.Z).readFeatures(e,{featureProjection:"EPSG:3857"}),n=t.length,a=new Array(n).fill(null),s=[],r=new Map,d=e=>{let t=r.get(e);return t||(t={types:new Set,values:new Array(n).fill(null),count:0},s.push(e),r.set(e,t)),t},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const e of t)if(!r.has(e))return e;return"___"+t[0]},u={types:new Set,values:new Array(n).fill(null),count:0};for(let e=0;e<n;e++){const n=t[e];a[e]=n.getGeometry();const s=n.getId();null!=s&&(u.values[e]=s,u.types.add((0,i.getFieldTypeFromValue)(s)),u.count++);for(const t of n.getKeys()){const s=n.get(t);if(s===a[e]||null==s)continue;const r=d(t);r.values[e]=s,r.types.add((0,i.getFieldTypeFromValue)(s)),r.count++}}const h=[];if(u.count>0){const e=l(u);h.push({name:c("id","_id","__id"),type:e,values:new i.ArrayVector(u.values),config:{}})}h.push({name:c("geo","geometry"),type:i.FieldType.geo,values:new i.ArrayVector(a),config:{}});for(const e of s){const t=r.get(e);if(!t)continue;const n=l(t);h.push({name:e,type:n,values:new i.ArrayVector(t.values),config:{}})}return{fields:h,length:n}}(t));if(!n)try{n=(0,i.toDataFrame)(t)}catch(t){return{path:e,error:`${t}`,find:e=>{},examples:e=>[]}}return function(e,t){const n=[];let r,o,l,c,u;for(const a of e.fields)if(a.type===i.FieldType.geo&&(r=a),u||a.type!==i.FieldType.string||(u=a),a.name){t.keys&&t.keys.includes(a.name)&&n.push(a);const e=a.name.toUpperCase();switch(e){case"LAT":case"LATITUTE":o=a;break;case"LON":case"LNG":case"LONG":case"LONGITUE":l=a;break;case"GEOHASH":c=a;break;case"ID":case"UID":case"KEY":case"CODE":t.keys||n.push(a);break;default:t.keys||(e.endsWith("_ID")||e.endsWith("_CODE"))&&n.push(a)}}!n.length&&u&&n.push(u);let h=!1;r?h="Point"===r.values.get(0).getType():c?(r=(0,d.uZ)(c),h=!0):o&&l&&(r=(0,d.zS)(l,o),h=!0);const p=new Map;return n.forEach((e=>{e.values.toArray().forEach(((e,t)=>{const n=`${e}`;p.set(n.toUpperCase(),t),p.set(n,t)}))})),{path:t.path,find:t=>{const n=p.get(t);if(null!=n){var i;const t=null===(i=r)||void 0===i?void 0:i.values.get(n);return{frame:e,index:n,point:()=>!t||h?t:new s.Z((0,a.qg)(t.getExtent())),geometry:()=>t}}},examples:e=>{const t=[];for(let n of p.keys())if(t.push(n),t.length>e)break;return t},frame:()=>e,count:e.length}}(n,{path:e})}const h={},p="public/gazetteer/countries.json";async function g(e){e||(e=p);let t=h[e];if(!t){try{t=u(e,await(0,r.getBackendSrv)().get(e))}catch(n){console.warn("Error loading placename lookup",e,n),t={path:e,error:"Error loading URL",find:e=>{},examples:e=>[]}}h[e]=t}return t}},56536:(e,t,n)=>{"use strict";n.d(t,{cJ:()=>d,g6:()=>c});var a=n(43215),s=n(42329),i=n(60734);function r(e){return t=>{for(const n of t.fields)if(e(n,t,[]))return n}}function o(e){return t=>{for(const n of t.fields){if(e.has(n.name.toLowerCase()))return n;const s=(0,a.getFieldDisplayName)(n,t);if(e.has(s))return n}}}const l={mode:a.FrameGeometrySourceMode.Auto,geohash:o(new Set(["geohash"])),latitude:o(new Set(["latitude","lat"])),longitude:o(new Set(["longitude","lon","lng"])),h3:o(new Set(["h3"])),wkt:o(new Set(["wkt"])),lookup:o(new Set(["lookup"])),geo:e=>e.fields.find((e=>e.type===a.FieldType.geo))};async function d(e){var t;const n=Object.assign({},l,{mode:null!==(t=null==e?void 0:e.mode)&&void 0!==t?t:a.FrameGeometrySourceMode.Auto});switch(n.mode){case a.FrameGeometrySourceMode.Geohash:null!=e&&e.geohash&&(n.geohash=r((0,a.getFieldMatcher)({id:a.FieldMatcherID.byName,options:e.geohash})));break;case a.FrameGeometrySourceMode.Lookup:null!=e&&e.lookup&&(n.lookup=r((0,a.getFieldMatcher)({id:a.FieldMatcherID.byName,options:e.lookup}))),n.gazetteer=await(0,i.so)(null==e?void 0:e.gazetteer);break;case a.FrameGeometrySourceMode.Coords:null!=e&&e.latitude&&(n.latitude=r((0,a.getFieldMatcher)({id:a.FieldMatcherID.byName,options:e.latitude}))),null!=e&&e.longitude&&(n.longitude=r((0,a.getFieldMatcher)({id:a.FieldMatcherID.byName,options:e.longitude})))}return n}function c(e,t){const n=function(e,t){var n;const s={mode:null!==(n=t.mode)&&void 0!==n?n:a.FrameGeometrySourceMode.Auto};if(s.mode===a.FrameGeometrySourceMode.Auto){if(s.geo=t.geo(e),s.geo)return s;if(s.latitude=t.latitude(e),s.longitude=t.longitude(e),s.latitude&&s.longitude)return s.mode=a.FrameGeometrySourceMode.Coords,s;if(s.geohash=t.geohash(e),s.geohash)return s.mode=a.FrameGeometrySourceMode.Geohash,s;if(s.lookup=t.geohash(e),s.lookup)return s.mode=a.FrameGeometrySourceMode.Lookup,s}switch(s.mode){case a.FrameGeometrySourceMode.Coords:s.latitude=t.latitude(e),s.longitude=t.longitude(e);break;case a.FrameGeometrySourceMode.Geohash:s.geohash=t.geohash(e);break;case a.FrameGeometrySourceMode.Lookup:s.lookup=t.lookup(e)}return s}(e,t);switch(n.mode){case a.FrameGeometrySourceMode.Auto:return n.geo?{field:n.geo}:{warning:"Unable to find location fields"};case a.FrameGeometrySourceMode.Coords:return n.latitude&&n.longitude?{field:(0,s.zS)(n.longitude,n.latitude),derived:!0}:{warning:"Missing latitude/longitude fields"};case a.FrameGeometrySourceMode.Geohash:return n.geohash?{field:(0,s.uZ)(n.geohash),derived:!0}:{warning:"Missing geohash field"};case a.FrameGeometrySourceMode.Lookup:return n.lookup?t.gazetteer?{field:(0,s.ie)(t.gazetteer,n.lookup),derived:!0}:{warning:"Gazetteer not found"}:{warning:"Missing lookup field"}}return{warning:"unable to find geometry"}}},69778:(e,t,n)=>{"use strict";n.d(t,{GY:()=>l,MA:()=>o,nW:()=>r});var a=n(90923),s=n(98163),i=n(47570);const r=(0,i.hg)("users/fetchInvitees",(async()=>{if(!s.Vt.hasPermission(i.bW.UsersCreate))return[];return await(0,a.getBackendSrv)().get("/api/org/invites")})),o=(0,i.hg)("users/addInvitee",(async(e,t)=>{let{dispatch:n}=t;await(0,a.getBackendSrv)().post("/api/org/invites",e),await n(r())})),l=(0,i.hg)("users/revokeInvite",(async e=>(await(0,a.getBackendSrv)().patch(`/api/org/invites/${e}/revoke`,{}),e)))},73931:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,wl:()=>r});var a=n(35140),s=n(69778);const i=(0,a.HF)({selectId:e=>e.code}),r=i.getSelectors(),o=i.getInitialState({status:"idle"}),l={invites:(0,a.oM)({name:"invites",initialState:o,reducers:{},extraReducers:e=>{e.addCase(s.nW.pending,(e=>{e.status="loading"})).addCase(s.nW.fulfilled,((e,t)=>{let{payload:n}=t;i.setAll(e,n),e.status="succeeded"})).addCase(s.nW.rejected,(e=>{e.status="failed"})).addCase(s.GY.fulfilled,((e,t)=>{let{payload:n}=t;i.removeOne(e,n),e.status="succeeded"}))}}).reducer}},52595:(e,t,n)=>{"use strict";n.d(t,{T:()=>p,c:()=>g});var a=n(68404),s=n(93368),i=n(17614),r=n(90923),o=n(3490),l=n(95513),d=n(23078),c=n(94878),u=n(45916);const h=["isOpen","panel","initialFolderId"];const p=e=>{let{panel:t,initialFolderId:n,onDismiss:h}=e;const[p,g]=(0,a.useState)(n),[m,f]=(0,a.useState)(t.title),[v,b]=(0,a.useState)(t.title),[x,y]=(0,a.useState)(!1);(0,a.useEffect)((()=>y(!0)),[m]),(0,s.Z)((()=>b(m)),350,[m]);const{saveLibraryPanel:w}=(0,c.E)(),j=(0,a.useCallback)((()=>{t.libraryPanel={uid:void 0,name:m},w(t,p).then((e=>{e instanceof Error||h()}))}),[t,m,p,h,w]),S=(0,i.Z)((async()=>{try{return!(await(0,d.jh)(m)).some((e=>e.folderId===p))}catch(e){return(0,r.isFetchError)(e)&&(e.isHandled=!0),!0}finally{y(!1)}}),[v,p]),C=!(null!=S&&S.value||void 0===S.value||m!==v||x);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Field,{label:"Library panel name",invalid:C,error:C?"Library panel with this name already exists":"",children:(0,u.jsx)(o.Input,{id:"share-panel-library-panel-name-input",name:"name",value:m,onChange:e=>f(e.currentTarget.value)})}),(0,u.jsx)(o.Field,{label:"Save in folder",description:"Library panel permissions are derived from the folder permissions",children:(0,u.jsx)(l.E,{onChange:e=>{let{id:t}=e;return g(t)},initialFolderId:n,inputId:"share-panel-library-panel-folder-picker"})}),(0,u.jsxs)(o.Modal.ButtonRow,{children:[(0,u.jsx)(o.Button,{variant:"secondary",onClick:h,fill:"outline",children:"Cancel"}),(0,u.jsx)(o.Button,{onClick:j,disabled:C,children:"Create library panel"})]})]})},g=e=>{let{isOpen:t=!1,panel:n,initialFolderId:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,h);return(0,u.jsx)(o.Modal,{title:"Create library panel",isOpen:t,onDismiss:s.onDismiss,children:(0,u.jsx)(p,{panel:n,initialFolderId:a,onDismiss:s.onDismiss})})}},36333:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});n(68404);var a=n(3490),s=n(45916);const i=e=>{let{isOpen:t,onConfirm:n,onDismiss:i}=e;return(0,s.jsx)(a.ConfirmModal,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:"If you unlink this panel, you will be able to edit it without affecting any other dashboards. However, once you make a change you will not be able to revert to its original reusable panel.",confirmText:"Yes, unlink",onConfirm:()=>{n(),i()},onDismiss:i,isOpen:t})}},27777:(e,t,n)=>{"use strict";function a(e){var t;return Boolean(null===(t=e.libraryPanel)||void 0===t?void 0:t.uid)}n.d(t,{V:()=>a})},23078:(e,t,n)=>{"use strict";n.d(t,{E8:()=>p,Ef:()=>h,Kq:()=>d,Mh:()=>o,Ob:()=>c,Pq:()=>r,UO:()=>u,jh:()=>l});var a=n(58799),s=n(28659),i=n(89834);async function r(){let{searchString:e="",perPage:t=100,page:n=1,excludeUid:a="",sortDirection:r="",typeFilter:o=[],folderFilter:l=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=new URLSearchParams;d.append("searchString",e),d.append("sortDirection",r),d.append("typeFilter",o.join(",")),d.append("folderFilter",l.join(",")),d.append("excludeUid",a),d.append("perPage",t.toString(10)),d.append("page",n.toString(10)),d.append("kind",i.V.Panel.toString(10));const{result:c}=await(0,s.i)().get(`/api/library-elements?${d.toString()}`);return c}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=await(0,a.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${e}`,showSuccessAlert:!t,showErrorAlert:!t}));return n.data.result}async function l(e){const{result:t}=await(0,s.i)().get(`/api/library-elements/name/${e}`);return t}async function d(e,t){const{result:n}=await(0,s.i)().post("/api/library-elements",{folderId:t,name:e.libraryPanel.name,model:e,kind:i.V.Panel});return n}async function c(e){const{uid:t,name:n,version:a}=e.libraryPanel,r=i.V.Panel,o=e,{result:l}=await(0,s.i)().patch(`/api/library-elements/${t}`,{name:n,model:o,version:a,kind:r});return l}function u(e){return(0,s.i)().delete(`/api/library-elements/${e}`)}async function h(e){const{result:t}=await(0,s.i)().get(`/api/library-elements/${e}/connections`);return t}async function p(e){const t=await h(e);if(0===t.length)return[];return await(0,s.i)().search({dashboardIds:t.map((e=>e.connectionId))})}},89834:(e,t,n)=>{"use strict";let a,s;n.d(t,{V:()=>a}),function(e){e[e.Panel=1]="Panel",e[e.Variable=2]="Variable"}(a||(a={})),function(e){e[e.Dashboard=1]="Dashboard"}(s||(s={}))},70793:(e,t,n)=>{"use strict";n.d(t,{Pi:()=>o,bF:()=>r,i6:()=>l,rm:()=>i});var a=n(58257),s=n(23078);function i(e){return(0,a.t_)(e)}function r(e){return(0,a.AT)(e)}function o(e){const{uid:t,name:n,meta:a,version:s}=e;return{uid:t,name:n,meta:a,version:s}}async function l(e,t){const n=function(e){let t=e.getSaveModel();return t=Object.assign({libraryPanel:{name:e.title,uid:void 0}},t),t}(e),a=await function(e,t){if(!e.libraryPanel)return Promise.reject();if(e.libraryPanel&&void 0===e.libraryPanel.uid)return(0,s.Kq)(e,t);return(0,s.Ob)(e)}(n,t);return function(e,t){e.restoreModel(Object.assign({},t.model,{configRev:0,libraryPanel:o(t),title:e.title})),e.hasSavedPanelEditChange=!0,e.refresh()}(e,a),a}},94878:(e,t,n)=>{"use strict";n.d(t,{E:()=>d});var a=n(68404),s=n(18745),i=n(33554),r=n(90923),o=n(36537),l=n(70793);const d=()=>{const e=(0,s.useDispatch)(),[t,n]=(0,i.default)((async(e,t)=>{try{return await(0,l.i6)(e,t)}catch(e){if((0,r.isFetchError)(e))throw e.isHandled=!0,new Error(e.data.message);throw e}}),[]);return(0,a.useEffect)((()=>{t.error&&e((0,o.$l)((0,l.rm)(`Error saving library panel: "${t.error.message}"`))),t.value&&e((0,o.$l)((0,l.bF)("Library panel saved")))}),[e,t]),{state:t,saveLibraryPanel:n}}},67706:(e,t,n)=>{"use strict";n.d(t,{H:()=>j});var a=n(43215),s=n(90923),i=n(98163),r=n(19281),o=n(21169),l=n(22305),d=n(36636),c=n(68404),u=n(3490);let h;!function(e){e.Saved="saved",e.EditingStarted="editing-started",e.EditingCanceled="editing-cancelled",e.Deleted="deleted"}(h||(h={}));var p,g,m,f,v=n(45916);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends c.PureComponent{constructor(){super(...arguments),b(this,"state",{}),b(this,"discardAndReload",{label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{j.reloadPage(),this.onDismiss()}}),b(this,"continueEditing",{label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent chages",action:()=>{this.onDismiss()}}),b(this,"acceptDelete",{label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=s.config.appUrl}}),b(this,"onDismiss",(()=>{this.setState({dismiss:!0})}))}render(){const{event:e}=this.props,{dismiss:t}=this.state,n=y(s.config.theme),a=(null==e?void 0:e.action)===h.Deleted,i=a?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return(0,v.jsx)(u.Modal,{isOpen:!t,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:n.modal,children:(0,v.jsxs)("div",{children:[a?p||(p=(0,v.jsx)("div",{children:"This dashboard has been deleted by another session"})):g||(g=(0,v.jsx)("div",{children:"This dashboard has been modifed by another session"})),m||(m=(0,v.jsx)("br",{})),i.map((e=>(0,v.jsxs)("div",{onClick:e.action,className:n.radioItem,children:[(0,v.jsx)("h3",{children:e.label}),e.description]},e.label))),f||(f=(0,v.jsx)("br",{}))]})})}}const y=(0,u.stylesFactory)((e=>({modal:d.css`
      width: 500px;
    `,radioItem:d.css`
      margin: 0;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${e.colors.bgBlue1};
        color: ${e.colors.text};
      }
    `})));function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=new class{constructor(){w(this,"channel",void 0),w(this,"uid",void 0),w(this,"ignoreSave",void 0),w(this,"editing",!1),w(this,"lastEditing",void 0),w(this,"subscription",void 0),w(this,"hasSeenNotice",void 0),w(this,"observer",{next:e=>{if((0,a.isLiveChannelStatusEvent)(e)&&this.editing&&e.state===a.LiveChannelConnectionState.Connected&&this.sendEditingState(),(0,a.isLiveChannelMessageEvent)(e)){if(e.message.sessionId===r.W4)return;const{action:t}=e.message;switch(t){case h.EditingStarted:case h.Saved:{if(this.ignoreSave)return void(this.ignoreSave=!1);const n=(0,l.h4)().getCurrent();if((null==n?void 0:n.uid)!==e.message.uid)return void console.log("dashboard event for different dashboard?",e,n);const s=this.editing||n.hasUnsavedChanges();if(t===h.Saved)s?i.h$.publish(new o.Dn({component:x,props:{event:e}})):(i.h$.emit(a.AppEvents.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(s&&t===h.EditingStarted&&!this.hasSeenNotice){const t=e.message,n=this.getRecentEditingEvent();n&&n.message===t.message||(this.hasSeenNotice=!0,i.h$.emit(a.AppEvents.alertWarning,["Another session is editing this dashboard",t.message])),this.lastEditing=t}return}}}}})}setEditingState(e){const t=this.editing=e;this.editing=e,this.hasSeenNotice=!1,t&&i.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:e,uid:t}=this;e&&t&&(0,s.getGrafanaLiveSrv)().publish(e,{sessionId:r.W4,uid:t,action:this.editing?h.EditingStarted:h.EditingCanceled,timestamp:Date.now()})}watch(e){const t=(0,s.getGrafanaLiveSrv)();t&&e!==this.uid&&(this.channel={scope:a.LiveChannelScope.Grafana,namespace:"dashboard",path:`uid/${e}`},this.leave(),e&&(this.subscription=t.getStream(this.channel).subscribe(this.observer)),this.uid=e)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){if(this.lastEditing&&this.lastEditing.timestamp){Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0)}return this.lastEditing}reloadPage(){s.locationService.reload()}}},19323:(e,t,n)=>{"use strict";n.d(t,{Av:()=>c,MB:()=>p,_A:()=>u});var a=n(43215),s=n(76714),i=n(82961),r=n(18887);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l="__name__";var d;!function(e){e[e.wide=0]="wide",e[e.labels=1]="labels"}(d||(d={}));class c{constructor(e){o(this,"name",void 0),o(this,"refId",void 0),o(this,"meta",{}),o(this,"fields",[]),o(this,"length",0),o(this,"schemaFields",[]),o(this,"timeFieldIndex",-1),o(this,"pushMode",d.wide),o(this,"labels",new Set),o(this,"packetInfo",{schemaChanged:!0,number:0,action:i.T0.Replace,length:0}),o(this,"serialize",((e,t,n)=>{var s,i,r;const o=t?Object.assign({},Object.assign({},this.options,t)):this.options,l=(0,a.toFilteredDataFrameDTO)(this,e),d=f(l.fields.map((e=>e.values)),"number"==typeof(null==n?void 0:n.maxLength)?Math.min(n.maxLength,o.maxLength):o.maxLength,this.timeFieldIndex,o.maxDelta);l.fields=l.fields.map((e=>Object.assign({},e,{values:e.values.slice(d)})));const c=null!==(s=null===(i=l.fields[0])||void 0===i||null===(r=i.values)||void 0===r?void 0:r.length)&&void 0!==s?s:0;return Object.assign({},l,{labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:c,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:o})})),o(this,"initFromSerialized",(e=>{this.name=e.name,this.refId=e.refId,this.meta=e.meta,this.length=e.length,this.labels=e.labels,this.schemaFields=e.schemaFields,this.timeFieldIndex=e.timeFieldIndex,this.pushMode=e.pushMode,this.packetInfo.length=e.packetInfo.length,this.packetInfo.number=e.packetInfo.number,this.packetInfo.action=i.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=e.fields.map((e=>{var t,n;return Object.assign({},e,{type:null!==(t=e.type)&&void 0!==t?t:a.FieldType.other,config:null!==(n=e.config)&&void 0!==n?n:{},values:Array.isArray(e.values)?new a.ArrayVector(e.values):new a.ArrayVector})})),m(this.fields.map((e=>e.values.buffer)),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)})),o(this,"needsResizing",(e=>{let{maxLength:t,maxDelta:n}=e;const a=t&&this.options.maxLength<t,s=n&&this.options.maxDelta<n,i=n&&this.options.maxDelta===1/0;return Boolean(a||s||i)})),o(this,"resize",(e=>{let{maxLength:t,maxDelta:n}=e;n&&(this.options.maxDelta===1/0?this.options.maxDelta=n:this.options.maxDelta=Math.max(n,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,null!=t?t:0)})),o(this,"pushNewValues",(e=>{var t,n,a,s;if(null==e||!e.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=e[0].length,this.packetInfo.schemaChanged=!1,this.options.action===i.T0.Append?g(this.fields.map((e=>e.values.buffer)),e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(e.forEach(((e,t)=>{var n;null!==(n=this.fields[t])&&void 0!==n&&n.values&&(this.fields[t].values.buffer=e)})),m(this.fields.map((e=>e.values.buffer)),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const r=null===(t=this.fields)||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.values)||void 0===a||null===(s=a.buffer)||void 0===s?void 0:s.length;void 0!==r&&(this.length=r)})),o(this,"resetStateCalculations",(()=>{this.fields.forEach((e=>{var t;e.state=Object.assign({},null!==(t=e.state)&&void 0!==t?t:{},{calcs:void 0,range:void 0})}))})),o(this,"getMatchingFieldIndexes",(e=>this.fields.map(((t,n)=>e(t)?n:void 0)).filter((e=>void 0!==e)))),o(this,"getValuesFromLastPacket",(()=>this.fields.map((e=>{const t=e.values.buffer;return t.slice(Math.max(t.length-this.packetInfo.length))})))),o(this,"hasAtLeastOnePacket",(()=>Boolean(this.packetInfo.length))),o(this,"getOptions",(()=>this.options)),this.options=e,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===i.T0.Replace}push(e){const{schema:t,data:n}=e;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,t){this.pushMode=d.wide,this.timeFieldIndex=t.fields.findIndex((e=>e.type===a.FieldType.time));const e=t.fields[0];1!==this.timeFieldIndex||e.type!==a.FieldType.string||"labels"!==e.name&&"Labels"!==e.name||(this.pushMode=d.labels,this.timeFieldIndex=0);const n=this.pushMode===d.labels?t.fields.slice(1):t.fields;this.refId=t.refId,t.meta&&(this.meta=Object.assign({},t.meta));const{displayNameFormat:s}=this.options;if(function(e,t){if((null==e?void 0:e.length)!==t.length)return!1;for(let n=0;n<e.length;n++){const a=e[n],s=t[n];if(a.name!==s.name||a.type!==s.type)return!1}return!0}(this.schemaFields,n)){const e=n.length;this.fields.forEach(((t,a)=>{var s;const i=n[a%e];t.config=null!==(s=i.config)&&void 0!==s?s:{},t.labels=i.labels})),s&&this.fields.forEach((e=>{const t=Object.assign({[l]:e.name},e.labels);e.config.displayNameFromDS=(0,r.W)(s,t)}))}else{this.packetInfo.schemaChanged=!0;const e=this.pushMode===d.wide;this.fields=n.map((t=>{var n,i,o,d;const c=null!==(n=t.config)&&void 0!==n?n:{};if(s){const e=Object.assign({[l]:t.name},t.labels);c.displayNameFromDS=(0,r.W)(s,e)}return{config:c,name:t.name,labels:t.labels,type:null!==(i=t.type)&&void 0!==i?i:a.FieldType.other,values:e?null!==(o=null===(d=this.fields.find((e=>e.name===t.name&&t.type===e.type)))||void 0===d?void 0:d.values)&&void 0!==o?o:new a.ArrayVector(Array(this.length).fill(void 0)):new a.ArrayVector}}))}this.schemaFields=n}if(n&&n.values.length&&n.values[0].length){let{values:e,entities:t}=n;if(t&&t.forEach(((t,n)=>{t&&(0,a.decodeFieldValueEntities)(t,e[n])})),this.pushMode===d.labels){const t=function(e){let t=new Set(e[0]),n=new Map;t.forEach((t=>{let a=Array(e.length-1).fill(null).map((()=>[]));n.set(t,a)}));for(let t=0;t<e[0].length;t++){let a=n.get(e[0][t]);for(let n=1;n<e.length;n++)a[n-1].push(e[n][t])}return n}(e);for(const e of t.keys())this.labels.has(e)||(this.packetInfo.schemaChanged=!0,this.addLabel(e));let n=Array(this.schemaFields.length).fill([]),a=[];this.labels.forEach((e=>{var s;a.push(null!==(s=t.get(e))&&void 0!==s?s:n)})),e=(0,s.v_)(a)}if(e.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${e.length} (labels=${this.pushMode===d.labels})`);this.fields=e.map(((e,t)=>{let n=`Field ${t}`,s=(0,a.guessFieldTypeFromValue)(e[0]);return 0===t&&s===a.FieldType.number&&e[0]>1600016688632&&(s=a.FieldType.time,n="Time"),{name:n,type:s,config:{},values:new a.ArrayVector([])}}))}let r=e;this.packetInfo.length=e[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=i.T0.Replace:(this.packetInfo.action=i.T0.Append,r=this.fields.map((e=>e.values.buffer)),g(r,e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),r.forEach(((e,t)=>{const{state:n,values:a}=this.fields[t];a.buffer=e,n&&(n.calcs=void 0)})),this.length=r[0].length}return Object.assign({},this.packetInfo)}addLabel(e){const{displayNameFormat:t}=this.options,n=this.labels.size,s=function(e){if(!e.length)return{};if("{"===e.charAt(0))return(0,a.parseLabels)(e);const t={};return e.split(",").forEach((e=>{const[n,a]=e.trim().split("=");t[n]=a})),t}(e);if(0===n)this.fields.forEach(((e,n)=>{if(n>0&&(e.labels=s,t)){const n=Object.assign({[l]:e.name},s);e.config.displayNameFromDS=(0,r.W)(t,n)}}));else for(let e=1;e<this.schemaFields.length;e++){var i;let n=this.schemaFields[e];const o=null!==(i=n.config)&&void 0!==i?i:{};if(t){const e=Object.assign({[l]:n.name},s);o.displayNameFromDS=(0,r.W)(t,e)}this.fields.push(Object.assign({},n,{config:o,labels:s,values:new a.ArrayVector(Array(this.length).fill(void 0))}))}this.labels.add(e)}}function u(e){var t,n,a;return{maxLength:null!==(t=null==e?void 0:e.maxLength)&&void 0!==t?t:1e3,maxDelta:null!==(n=null==e?void 0:e.maxDelta)&&void 0!==n?n:1/0,action:null!==(a=null==e?void 0:e.action)&&void 0!==a?a:i.T0.Append,displayNameFormat:null==e?void 0:e.displayNameFormat}}function h(e,t,n,a){let s;n=n||0;let i=(a=a||t.length-1)<=2147483647;for(;a-n>1;)s=i?n+a>>1:Math.floor((n+a)/2),t[s]<e?n=s:a=s;return e-t[n]<=t[a]-e?n:a}function p(e){const t=e.packetInfo;return null!=t&&t.action?t:void 0}function g(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;for(let n=0;n<e.length;n++)for(let a=0;a<t[n].length;a++)e[n].push(t[n][a]);return m(e,n,a,s)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const s=f(e,t,n,a);if(s)for(let t=0;t<e.length;t++)e[t].splice(0,s);return s}function f(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null===(t=e[0])||void 0===t||!t.length)return 0;const i=e[0].length;let r=0;if(i>n&&(r=i-n),s!==1/0&&a>=0){const t=e[a],n=t[r],o=t[i-1];o-n>s&&(r=h(o-s,t,r))}return r}o(c,"deserialize",(e=>{const t=new c(e.options);return t.initFromSerialized(e),t})),o(c,"empty",(e=>new c(u(e)))),o(c,"fromDataFrameJSON",((e,t)=>{const n=new c(u(t));return n.push(e),n}))},91681:(e,t,n)=>{"use strict";n.d(t,{A1:()=>i,g0:()=>s,iL:()=>r});var a=n(43215);let s;!function(e){e.NewValuesSameSchema="NewValuesSameSchema",e.FullFrame="FullFrame"}(s||(s={}));const i=(e,t)=>"type"in e&&e.type===t,r=(Object.values(s),e=>(0,a.isDataFrame)(e)&&"packetInfo"in e)},19281:(e,t,n)=>{"use strict";n.d(t,{Bp:()=>N,W4:()=>O});var a=n(90923),s=n(80965),i=n(61959),r=n(57684),o=(n(25799),n(79702)),l=n(14528),d=n(56861),c=n(32458);var u=n(16976),h=n(94396),p=n(75250);const g=e=>(0,h.D)(e).pipe((0,p.w)((e=>{return t=e,new u.y((e=>{const n=t.subscribe(o.sj((t=>{e.next(t)})),o.sj((t=>{e.error(t)})),o.sj((()=>{e.complete()})));return{unsubscribe:()=>{n.then((e=>e.unsubscribe()))}}}));var t})));function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f{constructor(e){m(this,"centrifugeWorker",void 0),m(this,"getConnectionState",(()=>g(this.centrifugeWorker.getConnectionState()))),m(this,"getDataStream",(e=>g(this.centrifugeWorker.getDataStream(e)).pipe((0,l.Q)(d.z)))),m(this,"getQueryData",(async e=>{const t=JSON.parse(JSON.stringify(e));return this.centrifugeWorker.getQueryData(t)})),m(this,"getPresence",(e=>this.centrifugeWorker.getPresence(e))),m(this,"getStream",(e=>g(this.centrifugeWorker.getStream(e)))),this.centrifugeWorker=o.Ud(new c.q(new URL(n.p+n.u(8814),n.b))),this.centrifugeWorker.initialize(e,o.sj(e.dataStreamSubscriberReadiness))}}var v,b,x,y=n(35778),w=n(71808),j=n(43215),S=n(20467),C=n(19323),k=n(91681);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class I{constructor(e){T(this,"getConnectionState",(()=>this.deps.centrifugeSrv.getConnectionState())),T(this,"getDataStream",(e=>{let t;return this.deps.centrifugeSrv.getDataStream(e).pipe((0,y.U)((e=>{var n;return(e=>{const n=e.data[0];if(t||(0,k.A1)(n,k.g0.FullFrame))switch(n.type){case k.g0.FullFrame:return void(t=C.Av.deserialize(n.frame));case k.g0.NewValuesSameSchema:t.pushNewValues(n.values)}else console.warn(`expected first packet to contain a full frame, received ${null==n?void 0:n.type}`)})(e),Object.assign({},e,{data:[null!==(n=t)&&void 0!==n?n:C.Av.empty()]})})))})),T(this,"getStream",(e=>this.deps.centrifugeSrv.getStream(e))),T(this,"getQueryData",(e=>(0,h.D)(this.deps.centrifugeSrv.getQueryData(e)).pipe((0,p.w)((t=>{var n;const s=(0,a.toDataQueryResponse)(t,e.request.targets);return(null===(n=s.data)||void 0===n?void 0:n.length)&&s.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?(0,S.B9)(s,e.request,S.PI):(0,w.of)(s)}))))),T(this,"publish",(async(e,t)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,j.toLiveChannelId)(e),data:t}))),T(this,"getPresence",(e=>this.deps.centrifugeSrv.getPresence(e))),this.deps=e}}const O=(null===(v=window)||void 0===v||null===(b=v.grafanaBootData)||void 0===b||null===(x=b.user)||void 0===x?void 0:x.id)+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function N(){const e={appUrl:`${window.location.origin}${a.config.appSubUrl}`,orgId:i.Vt.user.orgId,orgRole:i.Vt.user.orgRole,liveEnabled:a.config.liveEnabled,sessionId:O,dataStreamSubscriberReadiness:s.A.ok.asObservable()},t=a.config.featureToggles["live-service-web-worker"]?new f(e):new r.R(e);(0,a.setGrafanaLiveSrv)(new I({centrifugeSrv:t,backendSrv:(0,a.getBackendSrv)()}))}},42235:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var a=n(28659);const s="dash-folder",i="dash-db";const r=new class{constructor(){var e,t,n;n="general",(t="rootName")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}validateNewDashboardName(e,t){return this.validate(e,t,"A dashboard or a folder with the same name already exists")}validateNewFolderName(e){return this.validate(0,e,"A folder or dashboard in the general folder with the same name already exists")}async validate(e,t,n){const r=(t=(t||"").trim()).toLowerCase();if(0===t.length)throw{type:"REQUIRED",message:"Name is required"};if(0===e&&r===this.rootName)throw{type:"EXISTING",message:"This is a reserved name and cannot be used for a folder."};const o=[];o.push(a.ae.search({type:s,folderIds:[e],query:t})),o.push(a.ae.search({type:i,folderIds:[e],query:t}));const l=await Promise.all(o);let d=[];l.length>0&&l[0].length>0&&(d=l[0]),l.length>1&&l[1].length>0&&(d=d.concat(l[1]));for(const e of d)if(r===e.title.toLowerCase())throw{type:"EXISTING",message:n}}}},85189:(e,t,n)=>{"use strict";n.d(t,{$j:()=>f,EW:()=>T,Fd:()=>w,L6:()=>C,ZL:()=>k,ct:()=>b,iM:()=>I,nQ:()=>h,q_:()=>u,uC:()=>j,ys:()=>m});var a=n(43215),s=n(90923),i=n(36537),r=n(58257),o=n(67706),l=n(23078),d=n(89834),c=n(77239);function u(e){return async t=>{try{t((0,c.AK)());const n=await(0,s.getBackendSrv)().get(`/api/gnet/dashboards/${e}`);t((0,c.S9)(n)),t(p(n.json)),t(g(n.json))}catch(e){t((0,c.eh)()),(0,s.isFetchError)(e)&&t((0,i.$l)((0,r.t_)(e.data.message||e)))}}}function h(e){return async t=>{t((0,c.Nw)(e)),t(p(e)),t(g(e))}}function p(e){return t=>{if(e&&e.__inputs){const n=[];e.__inputs.forEach((e=>{const t={name:e.name,label:e.label,info:e.description,value:e.value,type:e.type,pluginId:e.pluginId,options:[]};e.type===c.n$.DataSource?v(e,t):t.info||(t.info="Specify a string constant"),n.push(t)})),t((0,c.Zc)(n))}}}function g(e){return async function(t){if(!e||!e.__elements)return;const n=[];for(const t of Object.values(e.__elements)){if(t.kind!==d.V.Panel)continue;const e=t.model,{type:a,description:s}=e,{uid:i,name:r}=t,o={model:{model:e,uid:i,name:r,version:0,meta:{},id:0,type:a,kind:d.V.Panel,description:s},state:c.KQ.New};try{const e=await(0,l.Mh)(i,!0);o.state=c.KQ.Exists,o.model=e}catch(e){if(404!==e.status)throw e}n.push(o)}t((0,c.C2)(n))}}function m(){return e=>{e((0,c.MO)())}}function f(e){return async(t,n)=>{var i,r;const o=n().importDashboard.dashboard,l=n().importDashboard.inputs;let d=[];null===(i=e.dataSources)||void 0===i||i.forEach(((e,t)=>{const n=l.dataSources[t];d.push({name:n.name,type:n.type,pluginId:n.pluginId,value:e.uid})})),null===(r=e.constants)||void 0===r||r.forEach(((e,t)=>{const n=l.constants[t];d.push({value:e,name:n.name,type:n.type})}));const c=await(0,s.getBackendSrv)().post("api/dashboards/import",{dashboard:Object.assign({},o,{title:e.title,uid:e.uid||o.uid}),overwrite:!0,inputs:d,folderId:e.folder.id}),u=a.locationUtil.stripBaseFromUrl(c.importedUrl);s.locationService.push(u)}}const v=(e,t)=>{0===(0,s.getDataSourceSrv)().getList({pluginId:e.pluginId}).length?t.info="No data sources of type "+e.pluginName+" found":t.info||(t.info="Select a "+e.pluginName+" data source")};function b(e,t){const n=[];for(const a of e)n.push(y(x,!0,a,t));return O(n).then((e=>({totalCount:e.length,successCount:e.filter((e=>e.succeeded)).length,alreadyInFolderCount:e.filter((e=>e.alreadyInFolder)).length})))}async function x(e,t){const n=await(0,s.getBackendSrv)().get(`/api/dashboards/uid/${e}`);if(!n.meta.folderId&&0===t.id||n.meta.folderId===t.id)return{alreadyInFolder:!0};const a={dashboard:n.dashboard,folderId:t.id,overwrite:!1};try{return await j(a),{succeeded:!0}}catch(e){if((0,s.isFetchError)(e)){var i;if("plugin-dashboard"!==(null===(i=e.data)||void 0===i?void 0:i.status))return{succeeded:!1};e.isHandled=!0}a.overwrite=!0;try{return await j(a),{succeeded:!0}}catch(e){return{succeeded:!1}}}}function y(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];return async n=>{try{const t=await e(...a);return Array.prototype.concat(n,[t])}catch(e){if(t)return n;throw e}}}function w(e,t){const n=[];for(const t of e)n.push(y(S,!0,t,!0));for(const e of t)n.push(y(I,!0,e,!0));return O(n)}function j(e){var t,n;return o.H.ignoreNextSave(),(0,s.getBackendSrv)().post("/api/dashboards/db/",{dashboard:e.dashboard,message:null!==(t=e.message)&&void 0!==t?t:"",overwrite:null!==(n=e.overwrite)&&void 0!==n&&n,folderId:e.folderId})}function S(e,t){return(0,s.getBackendSrv)().request({method:"DELETE",url:`/api/folders/${e}?forceDeleteRules=false`,showSuccessAlert:t})}function C(e){return(0,s.getBackendSrv)().post("/api/folders",e)}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,s.getBackendSrv)().get("/api/search",{query:e,type:"dash-folder",permission:t,accesscontrol:n})}function T(e){return(0,s.getBackendSrv)().get(`/api/folders/id/${e}`)}function I(e,t){return(0,s.getBackendSrv)().request({method:"DELETE",url:`/api/dashboards/uid/${e}`,showSuccessAlert:t})}function O(e){return e.reduce(((e,t)=>Promise.resolve(e).then(t)),[])}},77239:(e,t,n)=>{"use strict";n.d(t,{AK:()=>f,C2:()=>g,G7:()=>i,KQ:()=>o,MO:()=>c,Nw:()=>p,S9:()=>h,ZP:()=>v,Zc:()=>u,eh:()=>m,n$:()=>r});var a=n(35140),s=n(43215);let i,r,o;!function(e){e[e.Gcom=0]="Gcom",e[e.Json=1]="Json"}(i||(i={})),function(e){e.DataSource="datasource",e.Constant="constant",e.LibraryPanel="libraryPanel"}(r||(r={})),function(e){e.New="new",e.Exists="exists",e.Different="different"}(o||(o={}));const l={meta:{updatedAt:"",orgName:""},dashboard:{},source:i.Json,inputs:{},state:s.LoadingState.NotStarted},d=(0,a.oM)({name:"manageDashboards",initialState:l,reducers:{setGcomDashboard:(e,t)=>{e.dashboard=Object.assign({},t.payload.json,{id:null}),e.meta={updatedAt:t.payload.updatedAt,orgName:t.payload.orgName},e.source=i.Gcom,e.state=s.LoadingState.Done},setJsonDashboard:(e,t)=>{e.dashboard=Object.assign({},t.payload,{id:null}),e.meta=l.meta,e.source=i.Json,e.state=s.LoadingState.Done},clearDashboard:e=>{e.dashboard={},e.state=s.LoadingState.NotStarted},setInputs:(e,t)=>{e.inputs={dataSources:t.payload.filter((e=>e.type===r.DataSource)),constants:t.payload.filter((e=>e.type===r.Constant)),libraryPanels:[]}},setLibraryPanelInputs:(e,t)=>{e.inputs.libraryPanels=t.payload},fetchFailed:e=>{e.dashboard={},e.state=s.LoadingState.Error},fetchDashboard:e=>{e.state=s.LoadingState.Loading}}}),{clearDashboard:c,setInputs:u,setGcomDashboard:h,setJsonDashboard:p,setLibraryPanelInputs:g,fetchFailed:m,fetchDashboard:f}=d.actions,v={importDashboard:d.reducer}},41078:(e,t,n)=>{"use strict";n.d(t,{IM:()=>r,ZP:()=>o,jR:()=>i,xR:()=>s});const a=(0,n(35140).oM)({name:"organization",initialState:{organization:{},userOrgs:[]},reducers:{organizationLoaded:(e,t)=>Object.assign({},e,{organization:t.payload}),setOrganizationName:(e,t)=>Object.assign({},e,{organization:Object.assign({},e.organization,{name:t.payload})}),userOrganizationsLoaded:(e,t)=>Object.assign({},e,{userOrgs:t.payload})}}),{setOrganizationName:s,organizationLoaded:i,userOrganizationsLoaded:r}=a.actions,o={organization:a.reducer}},93474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(36636),s=(n(68404),n(18745)),i=n(43215),r=n(3490),o=n(88959),l=n(65747),d=n(17421),c=n(81300),u=n(35943),h=n(22305),p=n(68897),g=n(45916);function m(e){const t=(0,r.useStyles2)(f),n=(0,r.usePanelContext)(),a=new i.VisualizationSuggestionsBuilder(e.data),{dataSummary:m}=a,v=function(e,t){let{data:n,fieldConfig:a,message:s,needsNumberField:i,needsTimeField:r,needsStringField:o}=e;if(s)return s;var l;if(!n.series||0===n.series.length||1===n.series.length&&0===n.series[0].length)return null!==(l=null==a?void 0:a.defaults.noValue)&&void 0!==l?l:"No data";if(o&&!t.hasStringField)return"Data is missing a string field";if(i&&!t.hasNumberField)return"Data is missing a number field";if(r&&!t.hasTimeField)return"Data is missing a time field";return"Cannot visualize data"}(e,m),b=(0,s.useDispatch)();return(0,g.jsxs)("div",{className:t.wrapper,children:[(0,g.jsx)("div",{className:t.message,children:v}),n.app===i.CoreApp.PanelEditor&&m.hasData&&(0,g.jsxs)("div",{className:t.actions,children:[(0,g.jsx)(o.x,{icon:"table",onClick:()=>{var t;const n=null===(t=(0,h.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.panelId);n&&b((0,p.Kc)({panel:n,pluginId:"table"}))},children:"Switch to table"}),(0,g.jsx)(o.x,{icon:"chart-line",onClick:()=>{d.Z.setObject(l.FL,u.Ok.Suggestions),b((0,c.g_)(!0))},children:"Open visualization suggestions"})]})]})}const f=e=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,a.css)({textAlign:"center",color:e.colors.text.secondary,fontSize:e.typography.size.lg,width:"100%"}),actions:(0,a.css)({marginTop:e.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:e.spacing(1),rowGap:e.spacing(1),width:"100%",maxWidth:"600px"})})},80672:(e,t,n)=>{"use strict";n.d(t,{F:()=>c,X:()=>u});var a,s=n(68404),i=n(43215),r=n(3490),o=n(47570),l=n(45916);class d extends s.PureComponent{constructor(e){super(e)}render(){return(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,l.jsx)(r.Alert,Object.assign({severity:o.F1.Error},this.props))})}}function c(e,t){const n=class extends s.PureComponent{render(){const t=(0,l.jsxs)(l.Fragment,{children:["Check the server startup logs for more information. ",a||(a=(0,l.jsx)("br",{})),"If this plugin was loaded from Git, then make sure it was compiled."]});return(0,l.jsx)(d,{title:`Error loading: ${e.id}`,text:t})}},r=new i.PanelPlugin(n);return r.meta=e,r.loadError=!0,r}function u(e,t){const n=class extends s.PureComponent{render(){return(0,l.jsx)(d,{title:`Panel plugin not found: ${e}`})}},a=new i.PanelPlugin(t?()=>null:n);return a.meta={id:e,name:e,sort:100,type:i.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},a}},57866:(e,t,n)=>{"use strict";n.d(t,{$:()=>g});var a,s,i,r=n(68404),o=n(43215),l=n(3490),d=n(98163),c=n(95225),u=n(75064),h=n(45916);const p={defaults:{},overrides:[]};function g(e){const{pluginId:t,data:n,timeZone:g=(0,o.getTimeZone)(),options:m={},width:f,height:v,title:b,onOptionsChange:x=(()=>{}),onChangeTimeRange:y=(()=>{}),onFieldConfigChange:w=(()=>{}),fieldConfig:j=p}=e,[S,C]=(0,r.useState)((0,u.q1)(t)),[k,T]=(0,r.useState)(),I=function(e,t,n){return(0,r.useMemo)((()=>{if(e)return(0,c.d4)({plugin:e,currentOptions:t,currentFieldConfig:n,isAfterPluginChange:!1})}),[e,n,t])}(S,m,j),O=function(e,t,n,a){const s=null==t?void 0:t.fieldConfig,i=null==n?void 0:n.series,d=null==e?void 0:e.fieldConfigRegistry,c=(0,l.useTheme2)(),u=(0,r.useRef)(0);return(0,r.useMemo)((()=>{if(d&&s&&n)return u.current=u.current+1,Object.assign({},n,{series:(0,o.applyFieldOverrides)({data:i,fieldConfig:s,fieldConfigRegistry:d,replaceVariables:e=>e,theme:c,timeZone:a}),structureRev:u.current})}),[d,s,n,i,a,c])}(S,I,n,g);if((0,r.useEffect)((()=>{S&&S.hasPluginId(t)||(0,u.Ub)(t).then((e=>C(e))).catch((e=>{T(e.message)}))}),[t,S]),k)return(0,h.jsxs)("div",{children:["Failed to load plugin: ",k]});if(!S||!S.hasPluginId(t))return a||(a=(0,h.jsx)("div",{children:"Loading plugin panel..."}));if(!S.panel)return s||(s=(0,h.jsx)("div",{children:"Seems like the plugin you are trying to load does not have a panel component."}));if(!O)return i||(i=(0,h.jsx)("div",{children:"No panel data"}));const N=S.panel;return(0,h.jsx)(l.ErrorBoundaryAlert,{dependencies:[S,n],children:(0,h.jsx)(N,{id:1,data:O,title:b,timeRange:O.timeRange,timeZone:g,options:I.options,fieldConfig:j,transparent:!1,width:f,height:v,renderCounter:0,replaceVariables:e=>e,onOptionsChange:x,onFieldConfigChange:w,onChangeTimeRange:y,eventBus:d.h$})})}},7929:(e,t,n)=>{"use strict";n.d(t,{Bq:()=>x,PR:()=>p,PW:()=>f});var a=n(82897),s=n(43215),i=n(90923),r=n(78837),o=n(75478),l=n(18397);const d=[{value:`${s.DataLinkBuiltInVars.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.VariableOrigin.BuiltIn},{value:`${s.DataLinkBuiltInVars.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.VariableOrigin.BuiltIn},{value:`${s.DataLinkBuiltInVars.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.VariableOrigin.BuiltIn}],c=[{value:`${s.DataLinkBuiltInVars.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.VariableOrigin.Series}],u=[{value:`${s.DataLinkBuiltInVars.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.VariableOrigin.Value},{value:`${s.DataLinkBuiltInVars.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.VariableOrigin.Value},{value:`${s.DataLinkBuiltInVars.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.VariableOrigin.Value}],h=e=>e.includes(".")||e.trim().includes(" ")?`["${e}"]`:`.${e}`,p=()=>[...(0,i.getTemplateSrv)().getVariables().map((e=>({value:e.name,label:e.name,origin:s.VariableOrigin.Template}))),{value:`${s.DataLinkBuiltInVars.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.VariableOrigin.Template},...d],g=e=>{const t=[];for(const n of e)for(const e of n.fields)if(e.labels)for(const n of Object.keys(e.labels))t.push(n);const n=(0,a.chain)(t).flatten().uniq().value();return[{value:`${s.DataLinkBuiltInVars.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.VariableOrigin.Field},...n.map((e=>({value:`__field.labels${h(e)}`,label:`labels.${e}`,documentation:`${e} label value`,origin:s.VariableOrigin.Field})))]},m=e=>{let t,n;const a=[],i={};if(1!==e.length)return[];const r=e[0];for(const o of r.fields){const l=(0,s.getFieldDisplayName)(o,r,e);i[l]||(a.push({value:`__data.fields${h(l)}`,label:`${l}`,documentation:`Formatted value for ${l} on the same row`,origin:s.VariableOrigin.Fields}),i[l]=!0,t||o.type!==s.FieldType.number||(t=Object.assign({},o,{name:l})),!n&&o.config.displayName&&o.config.displayName!==o.name&&(n=Object.assign({},o,{name:l})))}return a.length&&a.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.VariableOrigin.Fields}),t&&(a.push({value:`__data.fields${h(t.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.VariableOrigin.Fields}),a.push({value:`__data.fields${h(t.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.VariableOrigin.Fields})),n&&a.push({value:`__data.fields${h(n.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.VariableOrigin.Fields}),a},f=(e,t)=>{const n={value:`${s.DataLinkBuiltInVars.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.VariableOrigin.Value};return t===s.VariableSuggestionsScope.Values?[...c,...g(e),...u,n,...m(e),...p()]:[...c,...g(e),...m(e),...p()]};class v{constructor(){var e,t,n;n=(e,t,n)=>{var a;let i=e.url;e.onBuildUrl&&(i=e.onBuildUrl({origin:n,replaceVariables:t}));const o={href:s.locationUtil.assureBaseUrl(i.replace(/\n/g,"")),title:null!==(a=e.title)&&void 0!==a?a:"",target:e.targetBlank?"_blank":void 0,origin:n};return t&&(o.href=t(o.href),o.title=t(e.title)),e.onClick&&(o.onClick=a=>{e.onClick({origin:n,replaceVariables:t,e:a})}),o.href=(0,r.iE)().disableSanitizeHtml?o.href:s.textUtil.sanitizeUrl(o.href),o},(t="getDataLinkUIModel")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}getLinkUrl(e){let t=s.locationUtil.assureBaseUrl((0,i.getTemplateSrv)().replace(e.url||"")),n={};if(e.keepTime){const e=(0,o.$t)().timeRangeForUrl();n.from=e.from,n.to=e.to}return e.includeVars&&(n=Object.assign({},n,(0,l.c)())),t=s.urlUtil.appendQueryToUrl(t,s.urlUtil.toUrlParams(n)),(0,r.iE)().disableSanitizeHtml?t:s.textUtil.sanitizeUrl(t)}getAnchorInfo(e){const t=(0,i.getTemplateSrv)(),n={};return n.href=this.getLinkUrl(e),n.title=t.replace(e.title||""),n.tooltip=t.replace(e.tooltip||""),n}getPanelLinkAnchorInfo(e,t){(0,s.deprecationWarning)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");return this.getDataLinkUIModel(e,((e,n,a)=>(0,i.getTemplateSrv)().replace(e,Object.assign({},t,n),a)),{})}}let b;function x(){return b||(b=new v),b}},68897:(e,t,n)=>{"use strict";n.d(t,{JI:()=>d,Kc:()=>h,ih:()=>p,qj:()=>c,x:()=>u});var a=n(95225),s=n(70793),i=n(80672),r=n(72192),o=n(21169),l=n(10269);function d(e){return async(t,n)=>{let a=e.type,s=n().plugins.panels[a];if(!s)try{s=await t((0,r.Ro)(a))}catch(e){s=(0,i.X)(a,"row"===a)}e.plugin||e.pluginLoaded(s),t((0,l.bc)({key:e.key,plugin:s}))}}function c(e){return(t,n)=>{const a=n().panels;(0,l.Q2)(a[e]),t((0,l.WJ)({key:e}))}}function u(e){return(t,n)=>{const a=n().panels;for(const t of e)(0,l.Q2)(a[t]);t((0,l.yo)({keys:e}))}}function h(e){let{panel:t,pluginId:n,options:s,fieldConfig:i}=e;return async(e,o)=>{if(t.type===n&&!s&&!i)return;let d=o().plugins.panels[n];d||(d=await e((0,r.Ro)(n)));let c=t.key;if(t.type!==n&&t.changePlugin(d),s||i){const e=(0,a.d4)({plugin:d,currentOptions:s||t.options,currentFieldConfig:i||t.fieldConfig,isAfterPluginChange:!1});t.options=e.options,t.fieldConfig=e.fieldConfig,t.configRev++}t.generateNewKey(),e((0,l.bc)({key:t.key,plugin:d,cleanUpKey:c}))}}function p(e,t){return async(n,a)=>{const i=t.model.type,d=e.type;if(e.restoreModel(Object.assign({},t.model,{gridPos:e.gridPos,id:e.id,libraryPanel:(0,s.Pi)(t)})),e.getQueryRunner().clearLastResult(),d!==i){let t=a().plugins.panels[i];t||(t=await n((0,r.Ro)(i)));const s=e.key;e.pluginLoaded(t),e.generateNewKey(),await n((0,l.bc)({key:e.key,plugin:t,cleanUpKey:s}))}else{const t=e.key;e.generateNewKey(),n((0,l.mr)({oldKey:t,newKey:e.key}))}e.configRev=0,e.hasSavedPanelEditChange=!0,e.refresh(),e.events.publish(o.pO),e.events.publish(o.Wj)}}},10269:(e,t,n)=>{"use strict";n.d(t,{Q2:()=>s,WJ:()=>d,ZP:()=>u,bc:()=>i,mr:()=>l,o8:()=>r,pC:()=>o,yo:()=>c});const a=(0,n(35140).oM)({name:"panels",initialState:{},reducers:{panelModelAndPluginReady:(e,t)=>{t.payload.cleanUpKey&&(s(e[t.payload.cleanUpKey]),delete e[t.payload.cleanUpKey]),e[t.payload.key]={plugin:t.payload.plugin}},changePanelKey:(e,t)=>{e[t.payload.newKey]=e[t.payload.oldKey],delete e[t.payload.oldKey]},removePanel:(e,t)=>{delete e[t.payload.key]},removePanels:(e,t)=>{for(const n of t.payload.keys)delete e[n]},setPanelInstanceState:(e,t)=>{e[t.payload.key].instanceState=t.payload.value},setPanelAngularComponent:(e,t)=>{const n=e[t.payload.key];s(n),n.angularComponent=t.payload.angularComponent}}});function s(e){null!=e&&e.angularComponent&&e.angularComponent.destroy()}const{panelModelAndPluginReady:i,setPanelAngularComponent:r,setPanelInstanceState:o,changePanelKey:l,removePanel:d,removePanels:c}=a.actions,u={panels:a.reducer}},9537:(e,t,n)=>{"use strict";n.d(t,{r0:()=>l});var a=n(82897),s=n(43215),i=n(90923);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const o={kiosk:!0,autofitpanels:!0,orgId:!0};const l=new class{constructor(){r(this,"nextTimeoutId",void 0),r(this,"index",0),r(this,"numberOfLoops",0),r(this,"locationListenerUnsub",void 0),r(this,"isPlaying",!1),this.locationUpdated=this.locationUpdated.bind(this)}next(){clearTimeout(this.nextTimeoutId);if(this.index>this.dashboards.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3)return void(window.location.href=this.startUrl);this.index=0}const e=this.dashboards[this.index],t=i.locationService.getSearchObject(),n=(0,a.pickBy)(t,((e,t)=>o[t])),r=s.locationUtil.stripBaseFromUrl(e.url);this.index++,this.validPlaylistUrl=r,this.nextTimeoutId=setTimeout((()=>this.next()),this.interval),i.locationService.push(r+"?"+s.urlUtil.toUrlParams(n))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(e){e.pathname!==this.validPlaylistUrl&&this.stop()}start(e){return this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=i.locationService.getHistory().listen(this.locationUpdated),(0,i.getBackendSrv)().get(`/api/playlists/${e}`).then((t=>(0,i.getBackendSrv)().get(`/api/playlists/${e}/dashboards`).then((e=>{this.dashboards=e,this.interval=s.rangeUtil.intervalToMs(t.interval),this.next()}))))}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),i.locationService.getSearchObject().kiosk&&i.locationService.partial({kiosk:null}))}}},7784:(e,t,n)=>{"use strict";n.d(t,{$F:()=>l,E1:()=>h,GP:()=>g,GV:()=>o,P6:()=>m,Tk:()=>p,jL:()=>d});var a=n(43215),s=n(90923),i=n(18318),r=n(4936);async function o(e){var t,n,a,r;const o=await async function(e){try{return await(0,s.getBackendSrv)().get(`${i.tB}/plugins/${e}`,{})}catch(e){return void((0,s.isFetchError)(e)&&(e.isHandled=!0))}}(e),l=Boolean(o),[d,p,g]=await Promise.all([h(),c(e,l),u(e)]),m=d.find((t=>t.id===e)),f=(null==m?void 0:m.dependencies)||(null==o||null===(t=o.json)||void 0===t?void 0:t.dependencies);return{grafanaDependency:null!==(n=null!==(a=null==f?void 0:f.grafanaDependency)&&void 0!==a?a:null==f?void 0:f.grafanaVersion)&&void 0!==n?n:"",pluginDependencies:(null==f?void 0:f.plugins)||[],links:(null==m?void 0:m.info.links)||(null==o||null===(r=o.json)||void 0===r?void 0:r.info.links)||[],readme:g||(null==o?void 0:o.readme),versions:p}}async function l(){const{items:e}=await(0,s.getBackendSrv)().get(`${i.tB}/plugins`);return e.filter(r.wB)}async function d(){try{return await(0,s.getBackendSrv)().get(`${i.O2}/errors`)}catch(e){return[]}}async function c(e,t){try{if(!t)return[];return((await(0,s.getBackendSrv)().get(`${i.tB}/plugins/${e}/versions`)).items||[]).map((e=>({version:e.version,createdAt:e.createdAt,isCompatible:e.isCompatible,grafanaDependency:e.grafanaDependency})))}catch(e){return(0,s.isFetchError)(e)&&(e.isHandled=!0),[]}}async function u(e){try{const t=await(0,s.getBackendSrv)().get(`${i.O2}/${e}/markdown/help`);return t?(0,a.renderMarkdown)(t):""}catch(e){return(0,s.isFetchError)(e)&&(e.isHandled=!0),""}}async function h(){return(await(0,s.getBackendSrv)().get(`${i.O2}`,{embedded:0})).filter(r.EP)}async function p(e){return await(0,s.getBackendSrv)().post(`${i.O2}/${e}/install`)}async function g(e){return await(0,s.getBackendSrv)().post(`${i.O2}/${e}/uninstall`)}async function m(e,t){const n=await(0,s.getBackendSrv)().datasourceRequest({url:`/api/plugins/${e}/settings`,method:"POST",data:t});return null==n?void 0:n.data}},18318:(e,t,n)=>{"use strict";n.d(t,{O2:()=>a,tB:()=>s,uJ:()=>i});const a="/api/plugins",s="/api/gnet",i="plugins"},4936:(e,t,n)=>{"use strict";n.d(t,{AA:()=>c,EP:()=>f,Nh:()=>d,RU:()=>g,Uj:()=>l,XB:()=>p,fG:()=>m,uR:()=>r,wB:()=>v});var a=n(43215),s=n(90923),i=n(28659);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const a=[],s=u(n);return e.forEach((e=>{const n=t.find((t=>t.slug===e.id)),i=s[e.id];n||a.push(o(e,void 0,i))})),t.forEach((t=>{const n=e.find((e=>e.id===t.slug)),i=s[t.slug];a.push(o(n,t,i))})),a}function o(e,t,n){return!e&&t?function(e,t){const{name:n,slug:a,description:s,version:i,orgName:r,popularity:o,downloads:l,typeCode:d,updatedAt:c,createdAt:u,status:p}=e,g=!!t||x(d);return{description:s,downloads:l,id:a,info:{logos:{small:`https://grafana.com/api/plugins/${a}/versions/${i}/logos/small`,large:`https://grafana.com/api/plugins/${a}/versions/${i}/logos/large`}},name:n,orgName:r,popularity:o,publishedAt:u,signature:h({remote:e,error:t}),updatedAt:c,hasUpdate:!1,isPublished:!0,isInstalled:g,isDisabled:g,isCore:e.internal,isDev:!1,isEnterprise:"enterprise"===p,type:d,error:null==t?void 0:t.errorCode}}(t,n):e&&!t?function(e,t){const{name:n,info:{description:a,version:s,logos:i,updated:r,author:o},id:l,dev:d,type:c,signature:u,signatureOrg:p,signatureType:g,hasUpdate:m}=e,f=!!t||x(c);return{description:a,downloads:0,id:l,info:{logos:i},name:n,orgName:o.name,popularity:0,publishedAt:"",signature:h({local:e,error:t}),signatureOrg:p,signatureType:g,updatedAt:r,installedVersion:s,hasUpdate:m,isInstalled:!0,isDisabled:f,isCore:"internal"===u,isPublished:!1,isDev:Boolean(d),isEnterprise:!1,type:c,error:null==t?void 0:t.errorCode}}(e,n):function(e,t,n){const s=null==e?void 0:e.info.version,i=(null==t?void 0:t.slug)||(null==e?void 0:e.id)||"",r=(null==e?void 0:e.type)||(null==t?void 0:t.typeCode),o=!!n||x(r);let l={small:`/public/img/icn-${r}.svg`,large:`/public/img/icn-${r}.svg`};t?l={small:`https://grafana.com/api/plugins/${i}/versions/${t.version}/logos/small`,large:`https://grafana.com/api/plugins/${i}/versions/${t.version}/logos/large`}:e&&e.info.logos&&(l=e.info.logos);return{description:(null==e?void 0:e.info.description)||(null==t?void 0:t.description)||"",downloads:(null==t?void 0:t.downloads)||0,hasUpdate:(null==e?void 0:e.hasUpdate)||!1,id:i,info:{logos:l},isCore:Boolean((null==t?void 0:t.internal)||(null==e?void 0:e.signature)===a.PluginSignatureStatus.internal),isDev:Boolean(null==e?void 0:e.dev),isEnterprise:"enterprise"===(null==t?void 0:t.status),isInstalled:Boolean(e)||o,isDisabled:o,isPublished:!0,name:(null==t?void 0:t.name)||(null==e?void 0:e.name)||"",orgName:(null==t?void 0:t.orgName)||(null==e?void 0:e.info.author.name)||"",popularity:(null==t?void 0:t.popularity)||0,publishedAt:(null==t?void 0:t.createdAt)||"",type:r,signature:h({local:e,remote:t,error:n}),signatureOrg:(null==e?void 0:e.signatureOrg)||(null==t?void 0:t.versionSignedByOrgName),signatureType:(null==e?void 0:e.signatureType)||(null==t?void 0:t.versionSignatureType)||(null==t?void 0:t.signatureType)||void 0,updatedAt:(null==t?void 0:t.updatedAt)||(null==e?void 0:e.info.updated)||"",installedVersion:s,error:null==n?void 0:n.errorCode}}(e,t,n)}const l=e=>`${s.config.pluginCatalogURL}${e}`;let d;!function(e){e.nameAsc="nameAsc",e.nameDesc="nameDesc",e.updated="updated",e.published="published",e.downloads="downloads"}(d||(d={}));const c=(e,t)=>{const n={nameAsc:(e,t)=>e.name.localeCompare(t.name),nameDesc:(e,t)=>t.name.localeCompare(e.name),updated:(e,t)=>(0,a.dateTimeParse)(t.updatedAt).valueOf()-(0,a.dateTimeParse)(e.updatedAt).valueOf(),published:(e,t)=>(0,a.dateTimeParse)(t.publishedAt).valueOf()-(0,a.dateTimeParse)(e.publishedAt).valueOf(),downloads:(e,t)=>t.downloads-e.downloads};return n[t]?e.sort(n[t]):e};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>(e[t.pluginId]=t,e)),{})}function h(e){const{error:t,local:n,remote:s}=e;if(t)switch(t.errorCode){case a.PluginErrorCode.invalidSignature:return a.PluginSignatureStatus.invalid;case a.PluginErrorCode.missingSignature:return a.PluginSignatureStatus.missing;case a.PluginErrorCode.modifiedSignature:return a.PluginSignatureStatus.modified}return null!=n&&n.signature?n.signature:null!=s&&s.signatureType||null!=s&&s.versionSignatureType?a.PluginSignatureStatus.valid:a.PluginSignatureStatus.missing}const p=()=>(0,i.i)().get("/api/frontend/settings").then((e=>{s.config.panels=e.panels}));function g(e){if(!e)return;const[t]=e.filter((e=>Boolean(e.isCompatible)));return t}const m=()=>s.config.pluginAdminEnabled,f=e=>b(e.id),v=e=>b(e.slug);function b(e){const{pluginCatalogHiddenPlugins:t}=s.config;return!t.includes(e)}function x(e){return e===a.PluginType.secretsmanager&&!s.config.secretsManagerPluginEnabled}},41266:(e,t,n)=>{"use strict";n.d(t,{Gg:()=>l,RN:()=>o,bO:()=>r});var a=n(78837),s=n(61959),i=n(47570);function r(){return a.vc.bootData.user.isGrafanaAdmin}function o(){return s.Vt.hasRole("Admin")}function l(){return s.Vt.hasPermission(i.bW.DataSourcesCreate)&&s.Vt.hasPermission(i.bW.DataSourcesWrite)}},72192:(e,t,n)=>{"use strict";n.d(t,{DD:()=>h,LP:()=>f,N9:()=>p,Qd:()=>c,Ro:()=>v,Tz:()=>g,m3:()=>m,tQ:()=>u});var a=n(35140),s=n(90923),i=n(75064),r=n(48722),o=n(7784),l=n(18318),d=n(4936);const c=(0,a.hg)(`${l.uJ}/fetchAll`,(async(e,t)=>{try{const{dispatch:e}=t,[n,a,{payload:s}]=await Promise.all([(0,o.E1)(),(0,o.jL)(),e(u())]);return(0,d.uR)(n,s,a)}catch(e){return t.rejectWithValue("Unknown error.")}})),u=(0,a.hg)(`${l.uJ}/fetchRemotePlugins`,(async(e,t)=>{try{return await(0,o.$F)()}catch(e){return(0,s.isFetchError)(e)&&(e.isHandled=!0),t.rejectWithValue([])}})),h=(0,a.hg)(`${l.uJ}/fetchDetails`,(async(e,t)=>{try{return{id:e,changes:{details:await(0,o.GV)(e)}}}catch(e){return t.rejectWithValue("Unknown error.")}})),p=(0,a.hg)(`${l.uJ}/install`,(async(e,t)=>{let{id:n,version:a,isUpdating:s=!1}=e;const i=s?{isInstalled:!0,installedVersion:a,hasUpdate:!1}:{isInstalled:!0,installedVersion:a};try{return await(0,o.Tk)(n),await(0,d.XB)(),s&&(0,r.Hl)(n),{id:n,changes:i}}catch(e){return console.error(e),t.rejectWithValue("Unknown error.")}})),g=(0,a.hg)(`${l.uJ}/uninstall`,(async(e,t)=>{try{return await(0,o.GP)(e),await(0,d.XB)(),(0,r.Hl)(e),{id:e,changes:{isInstalled:!1,installedVersion:void 0}}}catch(e){return console.error(e),t.rejectWithValue("Unknown error.")}})),m=(0,a.hg)(`${l.uJ}/loadPluginDashboards`,(async(e,t)=>{const n=`api/plugins/${t.getState().dataSources.dataSource.type}/dashboards`;return(0,s.getBackendSrv)().get(n)})),f=(0,a.PH)(`${l.uJ}/panelPluginLoaded`),v=e=>async(t,n)=>{let a=n().plugins.panels[e];return a||(a=await(0,i.Ub)(e),n().plugins.panels[e]||t(f(a))),a}},1250:(e,t,n)=>{"use strict";n.d(t,{CD:()=>o,I6:()=>m,UC:()=>g});var a=n(35140),s=n(18318),i=n(79729),r=n(72192);const o=(0,a.HF)(),l=e=>new RegExp(`${s.uJ}/(.*)/pending`).test(e.type),d=e=>new RegExp(`${s.uJ}/(.*)/fulfilled`).test(e.type),c=e=>new RegExp(`${s.uJ}/(.*)/rejected`).test(e.type),u=e=>{const t=e.lastIndexOf("/");return e.substring(0,t)},h={items:o.getInitialState(),requests:{},settings:{displayMode:i.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},p=(0,a.oM)({name:"plugins",initialState:h,reducers:{setDisplayMode(e,t){e.settings.displayMode=t.payload}},extraReducers:e=>e.addCase(r.Qd.fulfilled,((e,t)=>{o.upsertMany(e.items,t.payload)})).addCase(r.DD.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(r.N9.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(r.Tz.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(r.LP,((e,t)=>{e.panels[t.payload.meta.id]=t.payload})).addCase(r.m3.pending,((e,t)=>{e.isLoadingPluginDashboards=!0,e.dashboards=[]})).addCase(r.m3.fulfilled,((e,t)=>{e.isLoadingPluginDashboards=!1,e.dashboards=t.payload})).addMatcher(l,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Pending}})).addMatcher(d,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Fulfilled}})).addMatcher(c,((e,t)=>{e.requests[u(t.type)]={status:i.eE.Rejected,error:t.payload}}))}),{setDisplayMode:g}=p.actions,m=p.reducer},79729:(e,t,n)=>{"use strict";let a,s,i,r,o,l,d;n.d(t,{Co:()=>i,cd:()=>s,eE:()=>d,lL:()=>a,tu:()=>l,vF:()=>r,xc:()=>o}),function(e){e.Grid="grid",e.List="list"}(a||(a={})),function(e){e.Home="plugins-home",e.Browse="plugins-browse",e.Details="plugins-details",e.HomeAdmin="plugins-home-admin",e.BrowseAdmin="plugins-browse-admin",e.DetailsAdmin="plugins-details-admin"}(s||(s={})),function(e){e.app="apps",e.datasource="database",e.panel="credit-card",e.renderer="capture",e.secretsmanager="key-skeleton-alt"}(i||(i={})),function(e){e.INSTALL="INSTALL",e.UNINSTALL="UNINSTALL",e.UPDATE="UPDATE",e.REINSTALL="REINSTALL"}(r||(r={})),function(e){e.OVERVIEW="Overview",e.VERSIONS="Version history",e.CONFIG="Config",e.DASHBOARDS="Dashboards",e.USAGE="Usage"}(o||(o={})),function(e){e.OVERVIEW="overview",e.VERSIONS="version-history",e.CONFIG="config",e.DASHBOARDS="dashboards",e.USAGE="usage"}(l||(l={})),function(e){e.Pending="Pending",e.Fulfilled="Fulfilled",e.Rejected="Rejected"}(d||(d={}))},67436:(e,t,n)=>{"use strict";n.d(t,{ND:()=>h,ak:()=>g});var a=n(43215),s=n(90923),i=n(20467),r=n(5831),o=n(78837),l=n(24036),d=n(85239),c=n(33566);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.getTemplateSrv)();u(this,"datasources",{}),u(this,"settingsMapByName",{}),u(this,"settingsMapByUid",{}),u(this,"settingsMapById",{}),u(this,"defaultName",""),this.templateSrv=e}init(e,t){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=e,this.defaultName=t;for(const t of Object.values(e))t.uid||(t.uid=t.name),this.settingsMapByUid[t.uid]=t,this.settingsMapById[t.id]=t;this.datasources[i.hr.type]=l.mV,this.datasources[l.Yq]=l.mV,this.settingsMapByUid[i.hr.uid]=l.bE,this.settingsMapByUid[l.Yq]=l.bE}getDataSourceSettingsByUid(e){return this.settingsMapByUid[e]}getInstanceSettings(e,t){var n;const a="string"==typeof e;let s=a?e:null==e?void 0:e.uid;if("default"===s||null==s){var r;if(!a&&e){const t=null==e?void 0:e.type;if(t===i.hr.type)return l.mV.instanceSettings;t&&console.log("FIND Default instance for datasource type?",e)}return null!==(r=this.settingsMapByUid[this.defaultName])&&void 0!==r?r:this.settingsMapByName[this.defaultName]}if("$"===s[0]){const e=this.templateSrv.replace(s,t,p);let n;var o;if("default"===e)n=this.settingsMapByName[this.defaultName];else n=null!==(o=this.settingsMapByUid[e])&&void 0!==o?o:this.settingsMapByName[e];if(!n)return;return Object.assign({},n,{isDefault:!1,name:s,uid:s,rawRef:{type:n.type,uid:n.uid}})}return null!==(n=this.settingsMapByUid[s])&&void 0!==n?n:this.settingsMapByName[s]}get(e,t){let n="string"==typeof e?e:null==e?void 0:e.uid;if(!n)return this.get(this.defaultName);const a=this.settingsMapByName[n];return a&&(n=a.uid),this.datasources[n]?Promise.resolve(this.datasources[n]):(n=this.templateSrv.replace(n,t,p),"default"===n&&"default"!==this.defaultName?this.get(this.defaultName):this.datasources[n]?Promise.resolve(this.datasources[n]):this.loadDatasource(n))}async loadDatasource(e){var t,n;if(this.datasources[e])return Promise.resolve(this.datasources[e]);const i=null!==(t=null!==(n=this.settingsMapByUid[e])&&void 0!==n?n:this.settingsMapByName[e])&&void 0!==t?t:this.settingsMapById[e];if(!i)return Promise.reject({message:`Datasource ${e} was not found`});try{const t=await(0,c.nL)(i.meta);if(this.datasources[e])return this.datasources[e];let n;if(n=1!==t.DataSourceClass.length?(0,s.getLegacyAngularInjector)().instantiate(t.DataSourceClass,{instanceSettings:i}):new t.DataSourceClass(i),n.components=t.components,!(n instanceof a.DataSourceApi)){const e=n;e.name=i.name,e.id=i.id,e.type=i.type,e.meta=i.meta,e.uid=i.uid,n.getRef=a.DataSourceApi.prototype.getRef}return this.datasources[e]=n,this.datasources[n.uid]=n,n}catch(t){return t instanceof Error&&r.Z.emit(a.AppEvents.alertError,[i.name+" plugin failed",t.toString()]),Promise.reject({message:`Datasource: ${e} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.values(this.settingsMapByName).filter((t=>"grafana"!==t.meta.id&&"mixed"!==t.meta.id&&"dashboard"!==t.meta.id&&(!(e.metrics&&!t.meta.metrics)&&(!(e.tracing&&!t.meta.tracing)&&(!(e.logs&&"logging"!==t.meta.category&&!t.meta.logs)&&(!(e.annotations&&!t.meta.annotations)&&(!(e.alerting&&!t.meta.alerting)&&((!e.pluginId||t.meta.id===e.pluginId)&&(!(e.filter&&!e.filter(t))&&(!(e.type&&!(Array.isArray(e.type)?e.type.includes(t.type):e.type===t.type))&&!(!e.all&&!0!==t.meta.metrics&&!0!==t.meta.annotations&&!0!==t.meta.tracing&&!0!==t.meta.logs&&!0!==t.meta.alerting)))))))))));if(e.variables)for(const e of this.templateSrv.getVariables()){if(!(0,d.Z9)(e))continue;let n="default"===e.current.value?this.defaultName:e.current.value;Array.isArray(n)&&1===n.length&&(n=n[0]);const a=!Array.isArray(n)&&this.settingsMapByName[n];if(a){const n=`\${${e.name}}`;t.push(Object.assign({},a,{name:n,uid:n}))}}const n=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));if(!e.pluginId&&!e.alerting){if(e.mixed){const e=this.getInstanceSettings("-- Mixed --");e&&t.push(e)}if(e.dashboard){const e=this.getInstanceSettings("-- Dashboard --");e&&t.push(e)}if(!e.tracing){const e=this.getInstanceSettings("-- Grafana --");e&&t.push(e)}}return n}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map((e=>({name:e.name,value:e.name,meta:e.meta})))}getMetricSources(e){return this.getList({metrics:!0,variables:!(null!=e&&e.skipVariables)}).map((e=>({name:e.name,value:e.name,meta:e.meta})))}async reload(){const e=await(0,s.getBackendSrv)().get("/api/frontend/settings");o.ZP.datasources=e.datasources,o.ZP.defaultDatasource=e.defaultDatasource,this.init(e.datasources,e.defaultDatasource)}}function p(e){return Array.isArray(e)?e[0]:e}const g=()=>(0,s.getDataSourceSrv)()},75064:(e,t,n)=>{"use strict";n.d(t,{Ub:()=>d,_2:()=>c,q1:()=>u});var a=n(43215),s=n(78837),i=n(80672),r=n(33566);const o={},l={};function d(e){const t=o[e];if(t)return t;const n=s.ZP.panels[e];if(!n)throw new Error(`Plugin ${e} not found`);return o[e]=h(n),o[e]}function c(e){return h(e)}function u(e){return l[e]}function h(e){var t;return(0,r.N$)(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((e=>{if(e.plugin)return e.plugin;if(e.PanelCtrl){const t=new a.PanelPlugin(null);return t.angularPanelCtrl=e.PanelCtrl,t}throw new Error("missing export: plugin or PanelCtrl")})).then((t=>(t.meta=e,l[e.id]=t,t))).catch((t=>(console.warn("Error loading panel plugin: "+e.id,t),(0,i.F)(e,t))))}},48722:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>o,Vf:()=>r,hf:()=>l});var a=n(32569);const s={},i=Date.now();function r(e){let{path:t,version:n}=e;s[t]||(s[t]=encodeURI(n))}function o(e){const t=`plugins/${e}/module`;s[t]&&delete s[t],(0,a.Z)(e)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;const{address:n}=e,a=d(n);if(!a)return`${n}?_cache=${t}`;const r=s[a],o=r||t;return`${n}?_cache=${o}`}function d(e){const t=/\/public\/(plugins\/.+\/module)\.js/i.exec(e);if(!t)return;const[n,a]=t;return a||void 0}},32569:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r,a:()=>i});var a=n(90923);const s={};function i(e){const t=s[e];return t?Promise.resolve(t):(0,a.getBackendSrv)().get(`/api/plugins/${e}/settings`).then((t=>(s[e]=t,t))).catch((e=>Promise.reject(new Error("Unknown Plugin"))))}const r=e=>e?delete s[e]:Object.keys(s).forEach((e=>delete s[e]))},33566:(e,t,n)=>{"use strict";n.d(t,{kY:()=>Lo,Av:()=>zo,nL:()=>Bo,N$:()=>Vo});var a={};n.r(a),n.d(a,{plugin:()=>ye});var s={};n.r(s),n.d(s,{plugin:()=>ut});var i={};n.r(i),n.d(i,{plugin:()=>Rt});var r={};n.r(r),n.d(r,{plugin:()=>cn});var o={};n.r(o),n.d(o,{plugin:()=>gn});var l={};n.r(l),n.d(l,{plugin:()=>Oa});var d={};n.r(d),n.d(d,{plugin:()=>Ea});var c={};n.r(c),n.d(c,{plugin:()=>Ya});var u={};n.r(u),n.d(u,{plugin:()=>Ss});var h={};n.r(h),n.d(h,{plugin:()=>As});var p={};n.r(p),n.d(p,{plugin:()=>ii});var g={};n.r(g),n.d(g,{plugin:()=>di});var m={};n.r(m),n.d(m,{plugin:()=>bi});var f={};n.r(f),n.d(f,{plugin:()=>Ti});var v={};n.r(v),n.d(v,{plugin:()=>er});var b={};n.r(b),n.d(b,{plugin:()=>ur});var x={};n.r(x),n.d(x,{plugin:()=>br});var y={};n.r(y),n.d(y,{plugin:()=>Nr});var w={};n.r(w),n.d(w,{plugin:()=>Er});var j={};n.r(j),n.d(j,{plugin:()=>Wr});var S={};n.r(S),n.d(S,{plugin:()=>Xr});var C={};n.r(C),n.d(C,{plugin:()=>no});var k={};n.r(k),n.d(k,{plugin:()=>Po});var T=n(36636),I=n(24314),O=n(98572),N=n.n(O),F=n(82897),D=n.n(F),P=n(36365),A=n.n(P),M=n(50539),R=n.n(M),$=n(68404),L=n(87524),E=n(18745),V=n(43397),B=n(31259),z=n(58657),_=n(20321),U=n(87280),H=n(84453),W=n(35380),q=n(43215),Z=n(90923),G=n(3490),K=n(78837),Q=n(98163),J=n(28659),Y=n(61884),X=n(65660),ee=n(9166),te=n(90845),ne=n(39132),ae=n(63796),se=n(50489),ie=n(19462),re=n(33899),oe=n(83809),le=n(82139),de=n(85464),ce=n(8455),ue=n(94322),he=n(91045),pe=n(8861),ge=n(63982),me=n(39357),fe=n(10331),ve=n(45916);const be=e=>{let{alertManagerSourceName:t,group:n,expandAll:a}=e;const[s,i]=(0,$.useState)(a),r=(0,G.useStyles2)(xe),o=(0,G.useStyles2)(ge.r);return(0,$.useEffect)((()=>i(a)),[a]),(0,ve.jsxs)("div",{className:r.group,"data-testid":"alert-group",children:[Object.keys(n.labels).length>0?(0,ve.jsx)(ue.s,{labels:n.labels}):(0,ve.jsx)("div",{className:r.noGroupingText,children:"No grouping"}),(0,ve.jsxs)("div",{className:r.row,children:[(0,ve.jsx)(he.U,{isCollapsed:!s,onToggle:()=>i(!s)})," ",(0,ve.jsx)(pe.Z,{group:n})]}),s&&(0,ve.jsx)("div",{className:r.alerts,children:n.alerts.map(((e,n)=>{const a=e.status.state.toUpperCase(),s=(0,q.intervalToAbbreviatedDurationString)({start:new Date(e.startsAt),end:Date.now()});return(0,ve.jsxs)("div",{"data-testid":"alert-group-alert",className:r.alert,children:[(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("span",{className:o[e.status.state],children:[a," "]}),"for ",s]}),(0,ve.jsx)("div",{children:(0,ve.jsx)(ue.s,{labels:e.labels})}),(0,ve.jsxs)("div",{className:r.actionsRow,children:[e.status.state===fe.Z9.Suppressed&&(0,ve.jsx)(G.LinkButton,{href:`${(0,me.eQ)("/alerting/silences",t)}&silenceIds=${e.status.silencedBy.join(",")}`,className:r.button,icon:"bell",size:"sm",children:"Manage silences"}),e.status.state===fe.Z9.Active&&(0,ve.jsx)(G.LinkButton,{href:(0,me.VN)(t,e.labels),className:r.button,icon:"bell-slash",size:"sm",children:"Silence"}),e.generatorURL&&(0,ve.jsx)(G.LinkButton,{className:r.button,href:e.generatorURL,icon:"chart-line",size:"sm",children:"See source"})]})]},`${e.fingerprint}-${n}`)}))})]})},xe=e=>({noGroupingText:T.css`
    height: ${e.spacing(4)};
  `,group:T.css`
    background-color: ${e.colors.background.secondary};
    margin: ${e.spacing(.5,1,.5,1)};
    padding: ${e.spacing(1)};
  `,row:T.css`
    display: flex;
    flex-direction: row;
    align-items: center;
  `,alerts:T.css`
    margin: ${e.spacing(0,2,0,4)};
  `,alert:T.css`
    padding: ${e.spacing(1,0)};
    & + & {
      border-top: 1px solid ${e.colors.border.medium};
    }
  `,button:T.css`
    & + & {
      margin-left: ${e.spacing(1)};
    }
  `,actionsRow:T.css`
    padding: ${e.spacing(1,0)};
  `}),ye=new q.PanelPlugin((e=>{var t;const n=(0,E.useDispatch)(),a=Z.config.unifiedAlertingEnabled,s=e.options.expandAll,i=e.options.alertmanager,r=((e,t)=>(0,$.useMemo)((()=>e.filter((e=>(0,le.eD)(e.labels,t)||e.alerts.some((e=>(0,le.eD)(e.labels,t)))))),[e,t]))((null===(t=((0,re._)((e=>e.amAlertGroups))||ce.oq)[i||""])||void 0===t?void 0:t.result)||[],e.options.labels?(0,le.Zh)(e.options.labels):[]);(0,$.useEffect)((()=>{function e(){i&&n((0,oe.mS)(i))}e();const t=setInterval(e,de.iF);return()=>{clearInterval(t)}}),[n,i]);const o=r.length>0;return(0,ve.jsx)(G.CustomScrollbar,{autoHeightMax:"100%",autoHeightMin:"100%",children:a&&(0,ve.jsxs)("div",{children:[o&&r.map((e=>(0,ve.jsx)(be,{alertManagerSourceName:i,group:e,expandAll:s},JSON.stringify(e.labels)))),!o&&"No alerts"]})})})).setPanelOptions((e=>e.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:ie.GC,category:["Options"],editor:function(e){const t=(0,$.useMemo)(ie.z3,[]);return(0,ve.jsx)(se.P,{current:e.value,onChange:t=>e.onChange(t),dataSources:t})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]})));var we=n(95513),je=n(99151),Se=n.n(je),Ce=n(16695),ke=n(97621),Te=n(47570),Ie=n(85189);async function Oe(e){let{query:t,permissionLevel:n,extraFolders:a}=e;const s=await async function(e){let{query:t,permissionLevel:n}=e;return(await(0,Ie.ZL)(t,n)).map((e=>({id:e.id,title:e.title,url:e.url})))}({query:t,permissionLevel:n}),i=null!=a?a:[],r=t?i.filter((e=>{var n;return null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase())})):i;return s?r.concat(s):r}function Ne(e,t){return null==e?void 0:e.find((e=>{var n;return(null===(n=e.value)||void 0===n?void 0:n.id)===t}))}const Fe={id:void 0,title:"All"},De={id:ke.pW,title:ke.fy};function Pe(e){let{onChange:t,extraFolders:n=[],initialFolderId:a,permissionLevel:s=Te.bf.View}=e;const[i,r]=(0,$.useState)(!1),[o,l]=(0,$.useState)(void 0),[d,c]=(0,$.useState)(void 0),u=(0,$.useCallback)((async e=>{let n=Ne(e,a);var s;n||(n=null!==(s=await async function(e){if(null!=e)try{const{id:t,title:n}=await(0,Ie.EW)(e);return{value:{id:t,title:n},label:n}}catch(t){console.error(`Could not find folder with id:${e}`)}}(a))&&void 0!==s?s:e[0],t(n.value));r(!0),c(e),l(n)}),[a,t]),h=(0,$.useCallback)((async e=>{const t=await async function(e){let{query:t,permissionLevel:n=Te.bf.View,extraFolders:a=[]}=e;return(await Oe({query:t,permissionLevel:n,extraFolders:a})).map((e=>({value:e,label:e.title})))}({query:e,permissionLevel:s,extraFolders:n});return i||await u(t),t}),[s,n,i,u]),p=Se()(h,300,{leading:!0}),g=(0,$.useCallback)((e=>{let{value:n}=e;const a=Ne(d,null==n?void 0:n.id);l(a),t(n)}),[d,t]);return(0,ve.jsx)("div",{"data-testid":Ce.wl.components.ReadonlyFolderPicker.container,children:(0,ve.jsx)(G.AsyncSelect,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:o,value:o,loadOptions:p,onChange:g})})}var Ae=n(17614),Me=n(45243),Re=n(22305),$e=n(40206);function Le(e,t){if(e===$e.As.Importance)return(0,F.sortBy)(t,(e=>Me.Z.alertStateSortScore[e.state||e.newState]));if(e===$e.As.TimeAsc)return(0,F.sortBy)(t,(e=>new Date(e.newStateDate||e.time)));if(e===$e.As.TimeDesc)return(0,F.sortBy)(t,(e=>new Date(e.newStateDate||e.time))).reverse();const n=(0,F.sortBy)(t,(e=>(e.name||e.alertName).toLowerCase()));return e===$e.As.AlphaDesc&&n.reverse(),n}function Ee(e){return Object.entries(e).filter((e=>{let[t,n]=e;return n})).map((e=>{let[t,n]=e;return t}))}const Ve=(0,G.stylesFactory)((e=>({cardContainer:T.css`
    padding: ${e.spacing.xs} 0 ${e.spacing.xxs} 0;
    line-height: ${e.typography.lineHeight.md};
    margin-bottom: 0px;
  `,container:T.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:T.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:T.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.colors.bg2};
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.md};
    margin-bottom: ${e.spacing.xs};
  `,alertRuleItemIcon:T.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${e.spacing.xl};
    padding: 0 ${e.spacing.xs} 0 ${e.spacing.xxs};
    margin-right: 0px;
  `,alertRuleItemText:T.css`
    font-weight: ${e.typography.weight.bold};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:T.css`
    color: ${e.colors.textWeak};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:T.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:T.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:T.css`
    margin-right: ${e.spacing.xs};
  `})));var Be,ze=n(51542);function _e(e,t){return(0,ze.ED)(e.state)===t}function Ue(e,t){const{stateFilter:n}=e;return(0,F.isEmpty)(n)?t:t.filter((e=>n.firing&&(_e(e,ze.bj.Alerting)||_e(e,ze.x_.Firing))||n.pending&&(_e(e,ze.bj.Pending)||_e(e,ze.x_.Pending))||n.noData&&_e(e,ze.bj.NoData)||n.normal&&_e(e,ze.bj.Normal)||n.error&&_e(e,ze.bj.Error)||n.inactive&&_e(e,ze.x_.Inactive)))}function He(e){return!(e.startsWith("__")&&e.endsWith("__"))}const We=e=>{const{onChange:t,id:n,defaultValue:a}=e,s=(0,E.useDispatch)();(0,$.useEffect)((()=>{s((0,oe.lB)())}),[s]);const i=(0,re._)((e=>e.promRules)),r=(0,$.useMemo)(ie.mA,[]),o=(0,ce.ed)(i),l=(0,ce.yR)(i),d=(0,$.useMemo)((()=>{if((0,F.isEmpty)(i))return[];if(!o)return[];const e=r.flatMap((e=>{var t;return null!==(t=i[e].result)&&void 0!==t?t:[]})).flatMap((e=>e.groups)).flatMap((e=>e.rules.filter((e=>e.type===ze.pz.Alerting)))).flatMap((e=>{var t;return null!==(t=e.alerts)&&void 0!==t?t:[]})).map((e=>{var t;return Object.keys(null!==(t=e.labels)&&void 0!==t?t:{})})).flatMap((e=>e.filter(He)));return(0,F.uniq)(e)}),[o,i,r]);return(0,ve.jsx)(G.MultiSelect,{id:n,isLoading:l,defaultValue:a,"aria-label":"group by label keys",placeholder:"Group by",prefix:Be||(Be=(0,ve.jsx)(G.Icon,{name:"tag-alt"})),onChange:e=>{t(e.map((e=>{var t;return null!==(t=e.value)&&void 0!==t?t:""})))},options:d.map((e=>({label:e,value:e})))})};var qe=n(61959),Ze=n(86647),Ge=n(23906),Ke=n(64681),Qe=n.n(Ke),Je=n(9290),Ye=n(65747);const Xe=e=>{let{alerts:t,options:n}=e;const a=n.groupMode===$e.LM.Custom||n.showInstances,[s,i]=(0,$.useState)(a),r=(0,G.useStyles2)(et),o=(0,$.useCallback)((()=>{i((e=>!e))}),[]),l=(0,$.useMemo)((()=>{var e;return null!==(e=Ue(n,(0,me.Zl)(n.sortOrder,t)))&&void 0!==e?e:[]}),[t,n]),d=t.length-l.length,c=l.length>0,u=c?o:F.noop;return(0,$.useEffect)((()=>{0===l.length&&i(!1)}),[l]),(0,ve.jsxs)("div",{children:[n.groupMode===$e.LM.Default&&(0,ve.jsxs)("div",{className:c?r.clickable:"",onClick:()=>u(),children:[c&&(0,ve.jsx)(G.Icon,{name:s?"angle-down":"angle-right",size:"md"}),(0,ve.jsx)("span",{children:`${l.length} ${Qe()("instance",l.length)}`}),d>0&&(0,ve.jsxs)("span",{children:[", ",`${d} hidden by filters`]})]}),s&&(0,ve.jsx)(Je.o,{instances:l,pagination:{itemsPerPage:2*Ye.gN}})]})},et=e=>({clickable:T.css`
    cursor: pointer;
  `});function tt(e){return[...new URLSearchParams(e)]}const nt=e=>{let{rules:t,options:n}=e;const a=(0,G.useStyles2)(ot),s=n.groupBy,i=(0,$.useMemo)((()=>{const e=new Map;t.filter((e=>!s||function(e,t){return t.every((t=>{var n;return(null!==(n=e.rule.alerts)&&void 0!==n?n:[]).some((e=>e.labels[t]))}))}(e,s))).forEach((t=>{var n;(null!==(n=t.rule.alerts)&&void 0!==n?n:[]).forEach((t=>{var n;const a=function(e,t){return new URLSearchParams(e.map((e=>[e,t[e]]))).toString()}(s,t.labels),i=null!==(n=e.get(a))&&void 0!==n?n:[];e.set(a,[...i,t])}))}));return Array.from(e.entries()).reduce(((e,t)=>{let[a,s]=t;const i=Ue(n,s);return i.length>0&&e.set(a,i),e}),new Map)}),[s,t,n]);return(0,ve.jsx)(ve.Fragment,{children:Array.from(i).map((e=>{let[t,s]=e;return(0,ve.jsx)("li",{className:a.alertRuleItem,children:(0,ve.jsxs)("div",{children:[(0,ve.jsx)("div",{className:a.customGroupDetails,children:(0,ve.jsxs)("div",{className:a.alertLabels,children:[t&&tt(t).map((e=>{let[t,n]=e;return(0,ve.jsx)(Ge.i,{labelKey:t,value:n},t)})),!t&&"No grouping"]})}),(0,ve.jsx)(Xe,{alerts:s,options:n})]})},t)}))})},at=e=>({common:T.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.v1.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:T.css`
    margin-top: ${e.spacing(2.5)};
    align-self: flex-start;
  `,good:T.css`
    color: ${e.colors.success.main};
  `,bad:T.css`
    color: ${e.colors.error.main};
  `,warning:T.css`
    color: ${e.colors.warning.main};
  `,neutral:T.css`
    color: ${e.colors.secondary.main};
  `,info:T.css`
    color: ${e.colors.primary.main};
  `}),st=e=>{let{rules:t,options:n}=e;const a=(0,G.useStyles2)(ot),s=(0,G.useStyles2)(at),i=t.length<=n.maxItems?t:t.slice(0,n.maxItems);return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)("ol",{className:a.alertRuleList,children:i.map(((e,t)=>{var i;const{rule:r,namespaceName:o,groupName:l}=e,d=(0,Ze.ub)(r);return(0,ve.jsxs)("li",{className:a.alertRuleItem,children:[(0,ve.jsx)("div",{className:s.icon,children:(0,ve.jsx)(G.Icon,{name:Me.Z.getStateDisplayModel(r.state).iconClass,className:s[(0,Ze.Aq)(r.state)],size:"lg"})}),(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("div",{className:a.instanceDetails,children:[(0,ve.jsx)("div",{className:a.alertName,title:r.name,children:r.name}),(0,ve.jsxs)("div",{className:a.alertDuration,children:[(0,ve.jsx)("span",{className:s[(0,Ze.Aq)(r.state)],children:(0,Ze.SS)(r.state)})," ",d&&r.state!==ze.x_.Inactive&&(0,ve.jsxs)(ve.Fragment,{children:["for"," ",(0,ve.jsx)("span",{children:(0,q.intervalToAbbreviatedDurationString)({start:d,end:Date.now()})})]})]})]}),(0,ve.jsx)(Xe,{alerts:null!==(i=e.rule.alerts)&&void 0!==i?i:[],options:n})]})]},`alert-${o}-${l}-${r.name}-${t}`)}))})})};var it,rt;const ot=e=>({cardContainer:T.css`
    padding: ${e.v1.spacing.xs} 0 ${e.v1.spacing.xxs} 0;
    line-height: ${e.v1.typography.lineHeight.md};
    margin-bottom: 0px;
  `,container:T.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:T.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:T.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.v1.colors.bg2};
    padding: ${e.v1.spacing.xs} ${e.v1.spacing.sm};
    border-radius: ${e.v1.border.radius.md};
    margin-bottom: ${e.v1.spacing.xs};

    & > * {
      margin-right: ${e.v1.spacing.sm};
    }
  `,alertName:T.css`
    font-size: ${e.v1.typography.size.md};
    font-weight: ${e.v1.typography.weight.bold};
  `,alertLabels:T.css`
    > * {
      margin-right: ${e.v1.spacing.xs};
    }
  `,alertDuration:T.css`
    font-size: ${e.v1.typography.size.sm};
  `,alertRuleItemText:T.css`
    font-weight: ${e.v1.typography.weight.bold};
    font-size: ${e.v1.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:T.css`
    color: ${e.v1.colors.textWeak};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:T.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:T.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:T.css`
    margin-right: ${e.v1.spacing.xs};
  `,instanceDetails:T.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:T.css`
    margin-bottom: ${e.v1.spacing.xs};
  `});function lt(e){return e.showOptions===$e.kx.Current}const dt=new q.PanelPlugin((function(e){const[t,n]=(0,$.useState)(""),a=(0,Ae.Z)((async()=>{var t;if(e.options.showOptions!==$e.kx.Current)return;const a={state:Ee(e.options.stateFilter)},s=null===(t=(0,Re.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.id);var i;(e.options.alertName&&(a.query=(0,Z.getTemplateSrv)().replace(e.options.alertName,s.scopedVars)),e.options.folderId>=0&&(a.folderId=e.options.folderId),e.options.dashboardTitle&&(a.dashboardQuery=e.options.dashboardTitle),e.options.dashboardAlerts)&&(a.dashboardId=null===(i=(0,Re.h4)().getCurrent())||void 0===i?void 0:i.id);e.options.tags&&(a.dashboardTag=e.options.tags);const r=await(0,Z.getBackendSrv)().get("/api/alerts",a,`alert-list-get-current-alert-state-${e.id}`);let o=Le(e.options.sortOrder,r.map((e=>Object.assign({},e,{stateModel:Me.Z.getStateDisplayModel(e.state),newStateDateAgo:(0,q.dateTime)(e.newStateDate).locale("en").fromNow(!0)}))));return o.length>e.options.maxItems&&(o=o.slice(0,e.options.maxItems)),n(0===o.length?"No alerts":""),o}),[e.options.showOptions,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.maxItems,e.options.tags,e.options.dashboardAlerts,e.options.dashboardTitle,e.options.folderId,e.options.alertName,e.options.sortOrder,e.timeRange]),s=(0,Ae.Z)((async()=>{if(e.options.showOptions!==$e.kx.RecentChanges)return;const t={limit:e.options.maxItems,type:"alert",newState:Ee(e.options.stateFilter)},a=(0,Re.h4)().getCurrent();e.options.dashboardAlerts&&(t.dashboardId=null==a?void 0:a.id),t.from=1e3*q.dateMath.parse(null==a?void 0:a.time.from).unix(),t.to=1e3*q.dateMath.parse(null==a?void 0:a.time.to).unix();const s=await(0,Z.getBackendSrv)().get("/api/annotations",t,`alert-list-get-state-changes-${e.id}`),i=Le(e.options.sortOrder,s.map((e=>Object.assign({},e,{time:null==a?void 0:a.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),stateModel:Me.Z.getStateDisplayModel(e.newState),info:Me.Z.getAlertAnnotationInfo(e)}))));return n(0===i.length?"No alerts in current time range":""),i}),[e.options.showOptions,e.options.maxItems,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.dashboardAlerts,e.options.sortOrder]),i=(0,G.useStyles)(Ve);return(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,ve.jsxs)("div",{className:i.container,children:[t&&(0,ve.jsx)("div",{className:i.noAlertsMessage,children:t}),(0,ve.jsx)("section",{children:(0,ve.jsx)("ol",{className:i.alertRuleList,children:e.options.showOptions===$e.kx.Current?!a.loading&&a.value&&a.value.map((e=>(0,ve.jsx)("li",{className:i.alertRuleItem,children:(0,ve.jsxs)(G.Card,{href:`${e.url}?viewPanel=${e.panelId}`,className:i.cardContainer,children:[(0,ve.jsx)(G.Card.Heading,{children:e.name}),(0,ve.jsx)(G.Card.Figure,{className:(0,T.cx)(i.alertRuleItemIcon,e.stateModel.stateClass),children:(0,ve.jsx)(G.Icon,{name:e.stateModel.iconClass,size:"xl",className:i.alertIcon})}),(0,ve.jsx)(G.Card.Meta,{children:(0,ve.jsxs)("div",{className:i.alertRuleItemText,children:[(0,ve.jsx)("span",{className:e.stateModel.stateClass,children:e.stateModel.text}),(0,ve.jsxs)("span",{className:i.alertRuleItemTime,children:[" for ",e.newStateDateAgo]})]})})]})},`alert-${e.id}`))):!s.loading&&s.value&&s.value.map((e=>(0,ve.jsx)("li",{className:i.alertRuleItem,children:(0,ve.jsxs)(G.Card,{className:i.cardContainer,children:[(0,ve.jsx)(G.Card.Heading,{children:e.alertName}),(0,ve.jsx)(G.Card.Figure,{className:(0,T.cx)(i.alertRuleItemIcon,e.stateModel.stateClass),children:(0,ve.jsx)(G.Icon,{name:e.stateModel.iconClass,size:"xl"})}),(0,ve.jsxs)(G.Card.Meta,{children:[(0,ve.jsx)("span",{className:(0,T.cx)(i.alertRuleItemText,e.stateModel.stateClass),children:e.stateModel.text}),(0,ve.jsx)("span",{children:e.time}),e.info&&(0,ve.jsx)("span",{className:i.alertRuleItemInfo,children:e.info})]})]})},`alert-${e.id}`)))})})]})})})).setPanelOptions((e=>{e.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:$e.kx.Current},{label:"Recent state changes",value:$e.kx.RecentChanges}]},defaultValue:$e.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:$e.As.AlphaAsc},{label:"Alphabetical (desc)",value:$e.As.AlphaDesc},{label:"Importance",value:$e.As.Importance},{label:"Time (asc)",value:$e.As.TimeAsc},{label:"Time (desc)",value:$e.As.TimeDesc}]},defaultValue:$e.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:lt}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:lt}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function(e){let{value:t,onChange:n}=e;return(0,ve.jsx)(Pe,{initialFolderId:t,onChange:e=>n(null==e?void 0:e.id),extraFolders:[Fe,De]})},category:["Filter"],showIf:lt}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor:e=>(0,ve.jsx)(G.TagsInput,{tags:e.value,onChange:e.onChange}),category:["Filter"],showIf:lt}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:lt}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:lt}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:lt}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:lt}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:lt}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:lt})})).setMigrationHandler((e=>{var t,n,a,s,i,r,o,l,d,c,u,h,p,g,m,f,v,b;const x={showOptions:null!==(t=null!==(n=e.options.showOptions)&&void 0!==n?n:e.show)&&void 0!==t?t:$e.kx.Current,maxItems:null!==(a=null!==(s=e.options.maxItems)&&void 0!==s?s:e.limit)&&void 0!==a?a:10,sortOrder:null!==(i=null!==(r=e.options.sortOrder)&&void 0!==r?r:e.sortOrder)&&void 0!==i?i:$e.As.AlphaAsc,dashboardAlerts:null!==(o=null!==(l=e.options.dashboardAlerts)&&void 0!==l?l:e.onlyAlertsOnDashboard)&&void 0!==o&&o,alertName:null!==(d=null!==(c=e.options.alertName)&&void 0!==c?c:e.nameFilter)&&void 0!==d?d:"",dashboardTitle:null!==(u=null!==(h=e.options.dashboardTitle)&&void 0!==h?h:e.dashboardFilter)&&void 0!==u?u:"",folderId:null!==(p=e.options.folderId)&&void 0!==p?p:e.folderId,tags:null!==(g=null!==(m=e.options.tags)&&void 0!==m?m:e.dashboardTags)&&void 0!==g?g:[],stateFilter:null!==(f=null!==(v=e.options.stateFilter)&&void 0!==v?v:null===(b=e.stateFilter)||void 0===b?void 0:b.reduce(((e,t)=>Object.assign({},e,{[t]:!0})),{}))&&void 0!==f?f:{}};if(parseFloat(e.pluginVersion||"7.4")<7.5){["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach((t=>delete e[t]))}return x})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(t.hasData)return;e.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}),ct=new q.PanelPlugin((function(e){const t=(0,E.useDispatch)(),n=(0,$.useMemo)(ie.mA,[]);(0,$.useEffect)((()=>{!0===e.options.stateFilter.inactive&&(e.options.stateFilter.normal=!0),e.options.stateFilter.inactive=void 0}),[e.options.stateFilter]),(0,$.useEffect)((()=>{t((0,oe.lB)());const e=setInterval((()=>t((0,oe.lB)())),de.p4);return()=>{clearInterval(e)}}),[t]);const a=(0,re._)((e=>e.promRules)),s=n.some((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.dispatched})),i=n.some((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.loading})),r=n.some((e=>{var t,n,s;return(null===(t=a[e])||void 0===t||null===(n=t.result)||void 0===n?void 0:n.length)&&!(null!==(s=a[e])&&void 0!==s&&s.error)})),o=(0,G.useStyles2)(ot),l=(0,$.useMemo)((()=>function(e,t){const{options:n,replaceVariables:a}=e;let s=[...t];if(n.dashboardAlerts){var i;const e=null===(i=(0,Re.h4)().getCurrent())||void 0===i?void 0:i.uid;s=s.filter((t=>{let{rule:{annotations:n={}}}=t;return Object.entries(n).some((t=>{let[n,a]=t;return n===de.q6.dashboardUID&&a===e}))}))}if(n.alertName){const e=a(n.alertName);s=s.filter((t=>{let{rule:{name:n}}=t;return n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))}if(s=s.filter((e=>n.stateFilter.firing&&e.rule.state===ze.x_.Firing||n.stateFilter.pending&&e.rule.state===ze.x_.Pending||n.stateFilter.normal&&e.rule.state===ze.x_.Inactive)),n.alertInstanceLabelFilter){const e=a(n.alertInstanceLabelFilter),t=(0,le.Zh)(e);s=s.reduce(((e,n)=>{var a;const s=(null!==(a=n.rule.alerts)&&void 0!==a?a:[]).filter((e=>{let{labels:n}=e;return(0,le.eD)(n,t)}));return s.length&&e.push(Object.assign({},n,{rule:Object.assign({},n.rule,{alerts:s})})),e}),[])}n.folder&&(s=s.filter((e=>e.namespaceName===n.folder.title)));if(n.datasource){const e=n.datasource===ie.JY;s=s.filter(e?e=>{let{dataSourceName:t}=e;return t===ie.GC}:e=>{let{dataSourceName:t}=e;return t===n.datasource})}return s=s.reduce(((e,t)=>{var a;return Ue(n,null!==(a=t.rule.alerts)&&void 0!==a?a:[]).length&&e.push(t),e}),[]),s}(e,function(e,t){if(e===$e.As.Importance)return(0,F.sortBy)(t,(e=>Me.Z.alertStateSortScore[e.state]));if(e===$e.As.TimeAsc)return(0,F.sortBy)(t,(e=>(0,Ze.ub)(e.rule)||new Date));if(e===$e.As.TimeDesc)return(0,F.sortBy)(t,(e=>(0,Ze.ub)(e.rule)||new Date)).reverse();const n=(0,F.sortBy)(t,(e=>e.rule.name.toLowerCase()));e===$e.As.AlphaDesc&&n.reverse();return n}(e.options.sortOrder,Object.values(a).flatMap((e=>{let{result:t=[]}=e;return(0,Ze.ZL)(t)}))))),[e,a]),d=0===l.length?"No alerts matching filters":void 0;return qe.Vt.hasPermission(Te.bW.AlertingRuleRead)||qe.Vt.hasPermission(Te.bW.AlertingRuleExternalRead)?(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,ve.jsxs)("div",{className:o.container,children:[s&&i&&!r&&(rt||(rt=(0,ve.jsx)(G.LoadingPlaceholder,{text:"Loading..."}))),d&&(0,ve.jsx)("div",{className:o.noAlertsMessage,children:d}),(0,ve.jsxs)("section",{children:[e.options.groupMode===$e.LM.Custom&&r&&(0,ve.jsx)(nt,{rules:l,options:e.options}),e.options.groupMode===$e.LM.Default&&r&&(0,ve.jsx)(st,{rules:l,options:e.options})]})]})}):it||(it=(0,ve.jsx)(G.Alert,{title:"Permission required",children:"Sorry, you do not have the required permissions to read alert rules"}))})).setPanelOptions((e=>{e.addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:$e.LM.Default,settings:{options:[{value:$e.LM.Default,label:"Default grouping"},{value:$e.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:e=>e.groupMode===$e.LM.Custom,category:["Options"],editor:e=>{var t;return(0,ve.jsx)(We,{id:null!==(t=e.id)&&void 0!==t?t:"groupBy",defaultValue:e.value.map((e=>({label:e,value:e}))),onChange:e.onChange})}}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:$e.As.AlphaAsc},{label:"Alphabetical (desc)",value:$e.As.AlphaDesc},{label:"Importance",value:$e.As.Importance},{label:"Time (asc)",value:$e.As.TimeAsc},{label:"Time (desc)",value:$e.As.TimeDesc}]},defaultValue:$e.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder",id:"folder",defaultValue:null,editor:function(e){var t,n;return(0,ve.jsx)(we.E,Object.assign({enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:null===(t=e.value)||void 0===t?void 0:t.title,initialFolderId:null===(n=e.value)||void 0===n?void 0:n.id,permissionLevel:Te.bf.View,onClear:()=>e.onChange("")},e))},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(e){return(0,ve.jsx)(Z.DataSourcePicker,Object.assign({},e,{type:["prometheus","loki","grafana"],noDefault:!0,current:e.value,onChange:t=>e.onChange(t.name),onClear:()=>e.onChange("")}))},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})})),ut=Z.config.unifiedAlertingEnabled?ct:dt;var ht,pt=n(40059),gt=n(4203),mt=n(48662),ft=n(5831);const vt=e=>{let{options:t,annotation:n,formatDate:a,onClick:s,onAvatarClick:i,onTagClick:r}=e;const o=(0,G.useStyles2)(yt),{showUser:l,showTags:d,showTime:c}=t,{text:u,login:h,email:p,avatarUrl:g,tags:m,time:f,timeEnd:v}=n,b=h&&l,x=f&&c,y=v&&v!==f&&c;return(0,ve.jsxs)(G.Card,{className:o.card,onClick:()=>{s(n)},children:[(0,ve.jsx)(G.Card.Heading,{children:(0,ve.jsx)("span",{children:u})}),x&&(0,ve.jsxs)(G.Card.Description,{className:o.timestamp,children:[(0,ve.jsx)(xt,{formatDate:a,time:f}),y&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("span",{className:o.time,children:"-"}),(0,ve.jsx)(xt,{formatDate:a,time:v})," "]})]}),b&&(0,ve.jsx)(G.Card.Meta,{className:o.meta,children:(0,ve.jsx)(bt,{email:p,login:h,avatarUrl:g,onClick:()=>{i(n)}})}),d&&m&&(0,ve.jsx)(G.Card.Tags,{children:(0,ve.jsx)(G.TagList,{tags:m,onClick:e=>r(e,!1)})})]})},bt=e=>{let{onClick:t,avatarUrl:n,login:a,email:s}=e;const i=(0,G.useStyles2)(yt),r=(0,ve.jsxs)("span",{children:["Created by:",ht||(ht=(0,ve.jsx)("br",{}))," ",s]});return(0,ve.jsx)(G.Tooltip,{content:r,theme:"info",placement:"top",children:(0,ve.jsx)("button",{onClick:e=>{e.stopPropagation(),t()},className:i.avatar,"aria-label":`Created by ${s}`,children:(0,ve.jsx)("img",{src:n,alt:"avatar icon"})})})},xt=e=>{let{time:t,formatDate:n}=e;const a=(0,G.useStyles2)(yt);return(0,ve.jsx)("span",{className:a.time,children:(0,ve.jsx)("span",{children:n(t)})})};function yt(e){return{card:(0,T.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:e.spacing(1),margin:e.spacing(.5),width:"inherit"}),meta:(0,T.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,T.css)({margin:0,alignSelf:"center"}),time:(0,T.css)({marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary}),avatar:(0,T.css)({border:"none",background:"inherit",margin:0,padding:e.spacing(.5),img:{borderRadius:"50%",width:e.spacing(2),height:e.spacing(2)}})}}var wt,jt;function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ct extends $.PureComponent{constructor(e){super(e),St(this,"style",kt(Z.config.theme)),St(this,"subs",new gt.w0),St(this,"tagListRef",$.createRef()),St(this,"onAnnoClick",(async e=>{var t;if(!e.time)return;const{options:n}=this.props,a=(0,Re.h4)().getCurrent(),s={from:this._timeOffset(e.time,n.navigateBefore,!0),to:this._timeOffset(null!==(t=e.timeEnd)&&void 0!==t?t:e.time,n.navigateAfter,!1)};if(n.navigateToPanel&&(s.viewPanel=e.panelId),(null==a?void 0:a.uid)===e.dashboardUID)return void Z.locationService.partial(s);const i=await(0,Z.getBackendSrv)().get("/api/search",{dashboardUIDs:e.dashboardUID});if(i&&i.length&&i[0].uid===e.dashboardUID){const e=i[0],t=new URL(e.url,window.location.origin);return t.searchParams.set("from",s.from),t.searchParams.set("to",s.to),void Z.locationService.push(q.locationUtil.stripBaseFromUrl(t.toString()))}ft.Z.emit(q.AppEvents.alertWarning,["Unknown Dashboard: "+e.dashboardUID])})),St(this,"onTagClick",((e,t)=>{if(!t&&this.state.queryTags.includes(e))return;const n=t?this.state.queryTags.filter((t=>t!==e)):[...this.state.queryTags,e];let a;if(t){var s;const e=document.activeElement,t=null==e?void 0:e.getAttribute("data-tag-id");if(null!==(s=this.tagListRef.current)&&void 0!==s&&s.contains(e)&&t){var i;const e=Number.parseInt(t,10),n=null!==(i=this.tagListRef.current.querySelector(`[data-tag-id="${e+1}"]`))&&void 0!==i?i:this.tagListRef.current.querySelector(`[data-tag-id="${e-1}"]`);n instanceof HTMLElement&&(a=n)}}this.setState({queryTags:n},(()=>{var e;return null===(e=a)||void 0===e?void 0:e.focus()}))})),St(this,"onUserClick",(e=>{this.setState({queryUser:{id:e.userId,login:e.login,email:e.email}})})),St(this,"onClearUser",(()=>{this.setState({queryUser:void 0})})),St(this,"renderItem",((e,t)=>{const{options:n}=this.props,a=(0,Re.h4)().getCurrent();return a?(0,ve.jsx)(vt,{annotation:e,formatDate:a.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:n}):(0,ve.jsx)(ve.Fragment,{})})),this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(q.AnnotationChangeEvent).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(e,t){const{options:n,timeRange:a}=this.props;(n!==e.options||this.state.queryTags!==t.queryTags||this.state.queryUser!==t.queryUser||n.onlyInTimeRange&&a!==e.timeRange)&&this.doSearch()}async doSearch(){const{options:e}=this.props,{queryUser:t,queryTags:n}=this.state,a={tags:e.tags,limit:e.limit,type:"annotation"};var s;e.onlyFromThisDashboard&&(a.dashboardUID=null===(s=(0,Re.h4)().getCurrent())||void 0===s?void 0:s.uid);let i="";if(e.onlyInTimeRange){const{timeRange:e}=this.props;a.from=e.from.valueOf(),a.to=e.to.valueOf()}else i="All Time";t&&(a.userId=t.id),e.tags&&e.tags.length&&(a.tags=e.tags.map((e=>this.props.replaceVariables(e)))),n.length&&(a.tags=a.tags?[...a.tags,...n]:n);const r=await(0,Z.getBackendSrv)().get("/api/annotations",a,`anno-list-panel-${this.props.id}`);this.setState({annotations:r,timeInfo:i,loaded:!0})}_timeOffset(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=5,s="m";const i=/^(\d+)(\w)/.exec(t);i&&3===i.length&&(a=parseInt(i[1],10),s=i[2]);return n&&(a*=-1),(0,q.dateTime)(e).add(a,s).valueOf()}render(){const{loaded:e,annotations:t,queryUser:n,queryTags:a}=this.state;if(!e)return wt||(wt=(0,ve.jsx)("div",{children:"loading..."}));const s=n||a.length>0;return(0,ve.jsxs)(G.CustomScrollbar,{autoHeightMin:"100%",children:[s&&(0,ve.jsxs)("div",{className:this.style.filter,children:[jt||(jt=(0,ve.jsx)("b",{children:"Filter:"})),n&&(0,ve.jsx)("span",{onClick:this.onClearUser,className:"pointer",children:n.email}),a.length>0&&(0,ve.jsx)(pt.MT,{restoreFocus:!0,children:(0,ve.jsx)(G.TagList,{icon:"times",tags:a,onClick:e=>this.onTagClick(e,!0),getAriaLabel:e=>`Remove ${e} tag`,className:this.style.tagList,ref:this.tagListRef})})]}),t.length<1&&(0,ve.jsx)("div",{className:this.style.noneFound,children:"No Annotations Found"}),(0,ve.jsx)(mt.L,{items:t,renderItem:this.renderItem,getItemKey:e=>`${e.id}`})]})}}const kt=(0,G.stylesFactory)((e=>({noneFound:T.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,T.css)({display:"flex",padding:`0px ${e.spacing.xs}`,b:{paddingRight:e.spacing.sm}}),tagList:(0,T.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})}))),Tt=(Object.freeze([0,0]),10),It="10m",Ot="10m",Nt=!0,Ft=!1,Dt=!1,Pt=!0,At=!0,Mt=!0,Rt=new q.PanelPlugin(Ct).setPanelOptions((e=>{e.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Ft,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Dt,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor:e=>(0,ve.jsx)(G.TagsInput,{tags:e.value,onChange:e.onChange})}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Tt}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Mt}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:At}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Pt}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Nt,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Ot,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:It,description:""})})).setPanelChangeHandler(((e,t,n)=>"ryantxu-annolist-panel"===t?n:e.options));var $t=n(97024),Lt=n(46245);const Et=e=>{let{config:t,onUPlotClick:n,setFocusedSeriesIdx:a,setFocusedPointIdx:s,setCoords:i,setHover:r,isToolTipOpen:o}=e;o.current=!1;const l=()=>{o.current||i(null)};let d=null,c=null;t.addHook("init",(e=>{var t;d=e.root.parentElement,c=e.over,null===(t=d)||void 0===t||t.addEventListener("click",n),c.addEventListener("mouseleave",l)}));const u=()=>{o.current&&(i(null),n())};let h;t.addHook("drawClear",u),t.addHook("destroy",(()=>{var e,t;null===(e=d)||void 0===e||e.removeEventListener("click",n),null===(t=c)||void 0===t||t.removeEventListener("mouseleave",l),u()})),t.addHook("syncRect",((e,t)=>{h=t}));const p=t.getTooltipInterpolator();return p&&t.addHook("setCursor",(e=>{o.current||p(a,s,(t=>{if(t)return void i(null);if(!h)return;const{x:n,y:a}=(0,Lt._)(e,h);void 0!==n&&void 0!==a&&i({canvas:{x:e.cursor.left,y:e.cursor.top},viewport:{x:n,y:a}})}),e)})),t.addHook("setLegend",(e=>{if(o.current||p||s(e.legend.idx),null!=e.cursor.idxs)for(let t=0;t<e.cursor.idxs.length;t++){const n=e.cursor.idxs[t];if(null!=n){const t={xIndex:n,yIndex:0,pageX:h.left+e.cursor.left,pageY:h.top+e.cursor.top};return void(o.current&&t||r(t))}}})),t.addHook("setSeries",((e,t)=>{o.current||a(t)})),t};var Vt=n(6347),Bt=n(95716),zt=n(48628),_t=n(55860),Ut=n(76714),Ht=n(55273),Wt=n(48567),qt=n(23457),Zt=n(38007),Gt=n(15243),Kt=n(39256);const Qt=Gt.Gj,Jt=Gt.Gj;function Yt(e,t){var n,a,s;const{xOri:i,xDir:r,rawValue:o,getColor:l,formatValue:d,fillOpacity:c=1,showValue:u,xSpacing:h=0}=e,p=i===$t.wN.Horizontal,g=!Boolean(null===(n=e.text)||void 0===n?void 0:n.valueSize),m=e.stacking!==$t.o0.None,f=e.stacking===$t.o0.Percent;let v,b,{groupWidth:x,barWidth:y,barRadius:w=0}=e;m&&([x,y]=[y,x]);const j=p?.1:.15,S=p?5:10;let C,k=[],T=[],I=1,O=null!==(a=null===(s=e.text)||void 0===s?void 0:s.valueSize)&&void 0!==a?a:30,N=S,F=1/0,D=1/0,P=null!=l,A=P?{fill:{unit:3,values:(e,t)=>T[t].fill},stroke:{unit:3,values:(e,t)=>T[t].stroke}}:{},M=_t.Z.paths.bars({radius:w,disp:Object.assign({x0:{unit:2,values:(e,t)=>k[t].offs},size:{unit:2,values:(e,t)=>k[t].size}},A),each:(e,t,n,a,s,i,r)=>{a-=e.bbox.left,s-=e.bbox.top;let l=e.data[t][n];p?(F=Math.min(F,l<0?e.bbox.height-(s+r):s),D=i):(F=r,D=Math.min(D,l<0?a:e.bbox.width-(a+i)));let c={x:a,y:s,w:i,h:r,sidx:t,didx:n};if(v.add(c),u!==$t.Jp.Never){const l=o(t,n);let c=1;f&&R[t][n]&&(c=R[t][n]);const u=d(t,0===c?0:l/c);if(N=Math.min(N,Math.round(j*(p?i:r))),void 0===C[n]&&(C[n]={}),C[n][t]={text:u,value:o(t,n),hidden:!1},g){const{fontSize:e,textMetrics:a}=function(e,t,n,a,s){const i=(0,G.measureText)(e,14),r=t/(i.width+2)*14,o=n/a,l=Math.min(o,r);return{fontSize:Math.min(l,null!=s?s:l),textMetrics:i}}(C[n][t].text,D*(p?.65:1)-(p?0:N),F*(p?1:.65)-(p?N:0),1);C[n][t].textMetrics=a;let s=Math.round(Math.min(O,30,e));I=s/O*(s/14),O=s}else C[n][t].textMetrics=(0,G.measureText)(C[n][t].text,O);let h=p?0:-Math.round(.1*O),m=o(t,n);if(null!=m){const o=e.bbox.left+(p?a+i/2:m<0?a-N:a+i+N),l=e.bbox.top+(p?m<0?s+r+N:s-N:s+r/2-h),{textMetrics:d={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=C[n][t];let c=0,u=0;p?(c=d.width*I/2,u=m>0?(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)*I:0):(u=(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)*I/2,c=m<0?d.width*I:0),C[n][t].x=o,C[n][t].y=l,C[n][t].bbox={x:o-c,y:l-u,w:d.width*I,h:(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)*I}}}}});let R=null;return{cursor:{x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(e,t)=>{if(1===t){b=null;let t=e.cursor.left*devicePixelRatio,n=e.cursor.top*devicePixelRatio;v.get(t,n,1,1,(e=>{(0,Kt.Pn)(t,n,e.x,e.y,e.x+e.w,e.y+e.h)&&(b=e)}))}return b&&t===b.sidx?b.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(e,t)=>{let n=b&&t===b.sidx;return{left:n?b.x/devicePixelRatio:-10,top:n?b.y/devicePixelRatio:-10,width:n?b.w/devicePixelRatio:0,height:n?b.h/devicePixelRatio:0}}}},xRange:(e,t,n)=>{t=0,n=Math.max(1,e.data[0].length-1);let a=0;(0,Gt.Qm)(e.data[0].length,x,Qt,0,((e,t,n)=>{a=t+n/2}));let s=n-t;if(.5===a)t-=s;else{let e=(1/(1-2*a)*s-s)/2;t-=e,n+=e}return[t,n]},xValues:(t,n,a,s,i)=>{if(e.xTimeAuto){let e=t.scales.x,r=e.min,o=e.max;e.min=t.data[0][0],e.max=t.data[0][t.data[0].length-1];let l=(0,Zt.mr)(t,n,a,s,i);return e.min=r,e.max=o,l}return n.map((e=>d(0,e)))},xSplits:e=>{const t=p?e.bbox.width:e.bbox.height,n=r*(p?1:-1);let a=e.data[0].length,s=a-1,i=0;if(0!==h){let e=t/devicePixelRatio,n=Math.abs(Math.floor(e/h));i=a<n?0:Math.ceil(a/n)}let o=[];return e.data[0].forEach(((e,t)=>{0!==i&&(h>0?t:s-t)%i>0||o.push(t)})),1===n?o:o.reverse()},barsBuilder:M,init:e=>{e.over.style.overflow="hidden",e.root.querySelectorAll(".u-cursor-pt").forEach((e=>{e.style.borderRadius="0"}))},drawClear:t=>{var n,a;if(v=v||new Kt.lW(0,0,t.bbox.width,t.bbox.height),v.clear(),t.series.forEach((e=>{e._paths=null})),k=[null].concat(m?((e,t)=>{let n=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,Gt.Qm)(e,x,Qt,null,((e,a,s)=>{(0,Gt.Qm)(t,y,Jt,null,((t,i,r)=>{n[t].offs[e]=a,n[t].size[e]=s}))})),n})(t.data[0].length,t.data.length-1):((e,t)=>{let n=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,Gt.Qm)(e,x,Qt,null,((e,a,s)=>{(0,Gt.Qm)(t,y,Jt,null,((t,i,r)=>{n[t].offs[e]=a+s*i,n[t].size[e]=s*r}))})),n})(t.data[0].length,t.data.length-1)),P){T=[null];for(let e=1;e<t.data.length;e++){let n=t.data[e].map(((t,n)=>null!=t?l(e,n,t):null));T.push({fill:c<1?n.map((e=>null!=e?(0,qt.alpha)(e,c):null)):n,stroke:n})}}C={},O=null!==(n=null===(a=e.text)||void 0===a?void 0:a.valueSize)&&void 0!==n?n:30,N=S,F=D=1/0},draw:e=>{if(u===$t.Jp.Never||O<8)return;let n,a;e.ctx.save(),e.ctx.fillStyle=t.colors.text.primary,e.ctx.font=`${O}px ${t.typography.fontFamily}`;for(const t in C){let s=!0;for(const i in C[t]){const r=C[t][i],{text:o,value:l,x:d=0,y:c=0}=r;let h=p?"center":null!==l&&l<0?"right":"left",g=p?null!==l&&l<0?"top":"alphabetic":"middle";if(h!==n&&(e.ctx.textAlign=n=h),g!==a&&(e.ctx.textBaseline=a=g),u===$t.Jp.Always)e.ctx.fillText(o,d,c);else if(u===$t.Jp.Auto){let{bbox:n}=r,a=!1;if(null==n)a=!0,r.hidden=!0;else if(!s)for(const e in C[t]){if(e===i)continue;const s=C[t][e],{bbox:o,hidden:l}=s;if(!l&&o&&(0,Kt.kK)(n,o)){a=!0,r.hidden=!0;break}}s=!1,!a&&e.ctx.fillText(o,d,c)}}}e.ctx.restore()},interpolateTooltip:(e,t,n,a)=>{b?(e(b.sidx),t(b.didx),n()):n(!0)},prepData:function(e,t){return R=null,(0,Ht.Bj)(e[0],t,(e=>{let{totals:t}=e;R=t}))}}}const Xt={stacking:$t.o0.None,orientation:q.VizOrientation.Auto,xTickLabelRotation:0,xTickLabelSpacing:0,showValue:$t.Jp.Auto,groupWidth:.7,barWidth:.97,barRadius:0},en={lineWidth:1,fillOpacity:80,gradientMode:$t.FI.None};const tn=e=>{var t,n,a,s,i;let{frame:r,theme:o,orientation:l,showValue:d,groupWidth:c,barWidth:u,barRadius:h=0,stacking:p,text:g,rawValue:m,getColor:f,fillOpacity:v,allFrames:b,xTickLabelRotation:x,xTickLabelMaxLength:y,xTickLabelSpacing:w=0,legend:j}=e;const S=new G.UPlotConfigBuilder,C=function(e){return e===q.VizOrientation.Vertical?{xOri:$t.wN.Horizontal,xDir:$t.bQ.Right,yOri:$t.wN.Vertical,yDir:$t.bQ.Up}:{xOri:$t.wN.Vertical,xDir:$t.bQ.Down,yOri:$t.wN.Horizontal,yDir:$t.bQ.Right}}(l),k=(e,t)=>nn((0,q.formattedValueToString)(r.fields[e].display(t)),y);2===r.fields.length&&(c=u,u=1);const T=Yt({xOri:C.xOri,xDir:C.xDir,groupWidth:c,barWidth:u,barRadius:h,stacking:p,rawValue:m,getColor:f,fillOpacity:v,formatValue:k,text:g,showValue:d,legend:j,xSpacing:w,xTimeAuto:(null===(t=r.fields[0])||void 0===t?void 0:t.type)===q.FieldType.time&&!(null!==(n=r.fields[0].config.unit)&&void 0!==n&&n.startsWith("time:"))},o);S.setCursor(T.cursor),S.addHook("init",T.init),S.addHook("drawClear",T.drawClear),S.addHook("draw",T.draw),S.setTooltipInterpolator(T.interpolateTooltip),C.xOri===$t.wN.Horizontal&&0!==x&&S.setPadding(function(e,t,n){var a;const s=e.fields[0].values,i=G.UPLOT_AXIS_FONT_SIZE,r=null!==(a=e.fields[0].display)&&void 0!==a?a:e=>e;let o=0;for(let e=0;e<s.length;e++){let t=(0,G.measureText)(nn((0,q.formattedValueToString)(r(s.get(e))),n),i);o=t.width>o?t.width:o}const l=t>0?Math.cos(t*Math.PI/180)*(0,G.measureText)(nn((0,q.formattedValueToString)(r(s.get(s.length-1))),n),i).width:0,d=t<0?Math.cos(-1*t*Math.PI/180)*(0,G.measureText)(nn((0,q.formattedValueToString)(r(s.get(0))),n),i).width:0,c=Math.sin((t>=0?t:-1*t)*Math.PI/180)*o;return[Math.round(G.UPLOT_AXIS_FONT_SIZE*_t.Z.pxRatio),l,c,d]}(r,x,y)),S.setPrepData(T.prepData),S.addScale({scaleKey:"x",isTime:!1,range:T.xRange,distribution:$t.wf.Ordinal,orientation:C.xOri,direction:C.xDir});const I=(null===(a=r.fields[0].config.custom)||void 0===a?void 0:a.axisPlacement)!==$t.LB.Hidden?C.xOri===$t.wN.Horizontal?$t.LB.Bottom:$t.LB.Left:$t.LB.Hidden,O=(null===(s=r.fields[0].config.custom)||void 0===s?void 0:s.axisPlacement)!==$t.LB.Hidden;S.addAxis({scaleKey:"x",isTime:!1,placement:I,label:null===(i=r.fields[0].config.custom)||void 0===i?void 0:i.axisLabel,splits:T.xSplits,values:T.xValues,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:-1*x,theme:o,show:O});let N=0;const F=sn(j);for(let e=1;e<r.fields.length;e++){var D,P,A;const t=r.fields[e];N++;const n=Object.assign({},en,t.config.custom),a=t.config.unit||G.FIXED_UNIT,s=(0,q.getFieldColorModeForField)(t),i=(0,q.getFieldSeriesColor)(t,o).color;let l=n.axisSoftMin,d=n.axisSoftMax;if(null==l&&null==t.config.min&&(l=0),null==d&&null==t.config.max&&(d=0),S.addSeries({scaleKey:a,pxAlign:!0,lineWidth:n.lineWidth,lineColor:i,fillOpacity:n.fillOpacity,theme:o,colorMode:s,pathBuilder:T.barsBuilder,show:!(null!==(D=n.hideFrom)&&void 0!==D&&D.viz),gradientMode:n.gradientMode,thresholds:t.config.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:l,softMax:d,dataFrameFieldIndex:{fieldIndex:F?e:b[0].fields.findIndex((e=>{var t;return e.type===q.FieldType.number&&(null===(t=e.state)||void 0===t?void 0:t.seriesIndex)===N-1})),frameIndex:0}}),S.addScale({scaleKey:a,min:t.config.min,max:t.config.max,softMin:l,softMax:d,orientation:C.yOri,direction:C.yDir,distribution:null===(P=n.scaleDistribution)||void 0===P?void 0:P.type,log:null===(A=n.scaleDistribution)||void 0===A?void 0:A.log}),n.axisPlacement!==$t.LB.Hidden){let e=n.axisPlacement;e&&e!==$t.LB.Auto||(e=$t.LB.Left),1===C.xOri&&(e===$t.LB.Left&&(e=$t.LB.Bottom),e===$t.LB.Right&&(e=$t.LB.Top)),S.addAxis({scaleKey:a,label:n.axisLabel,size:n.axisWidth,placement:e,formatValue:(e,n)=>{var a;return(0,q.formattedValueToString)(t.display(e,null!==(a=t.config.decimals)&&void 0!==a?a:n))},theme:o,grid:{show:n.axisGridShow}})}}let M=(0,Ht.i7)(r);return S.setStackingGroups(M),S};function nn(e,t){return e.length>t?e.substring(0,t).concat("..."):e}function an(e,t,n){if(null==e||!e.length)return{warn:"No data in response"};const a=1===e.length?(0,Ut.Y3)(e[0],e[0].fields.findIndex((e=>e.type===q.FieldType.time))):(0,q.outerJoinDataFrames)({frames:e});if(!a)return{warn:"Unable to join data"};let s,i,r,o;if(n.colorByField&&(s=(0,Wt.PI)(a,n.colorByField),!s))return{warn:"Color field not found"};if(n.xField&&(i=(0,Wt.PI)(a,n.xField),!i))return{warn:"Configured x field not found"};let l=[];for(const e of a.fields)if(e!==i)switch(e.type){case q.FieldType.string:r||(r=e);break;case q.FieldType.time:o||(o=e);break;case q.FieldType.number:{const a=Object.assign({},e,{state:Object.assign({},e.state,{seriesIndex:l.length}),config:Object.assign({},e.config,{custom:Object.assign({},e.config.custom,{stacking:{group:"_",mode:n.stacking}})}),values:new q.ArrayVector(e.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))});n.stacking===$t.o0.Percent&&(a.config.unit="percentunit",a.display=(0,q.getDisplayProcessor)({field:a,theme:t})),l.push(a)}}let d=i;if(d||(d=r||o),!d)return{warn:"Bar charts requires a string or time field"};if(!l.length)return{warn:"No numeric fields found"};if(s&&l.length>1){const e=l.find((e=>e!==s));e&&(l=[e])}if(sn(n.legend)){var c;const e=n.legend.sortBy.toLowerCase(),t=null!==(c=n.legend.calcs)&&void 0!==c?c:[e];l=(0,F.orderBy)(l,(n=>(0,q.reduceField)({field:n,reducers:t})[e]),n.legend.sortDesc?"desc":"asc")}return l.unshift(d),{aligned:a,colorByField:s,viz:[{length:d.values.length,fields:l}]}}const sn=e=>Boolean((null==e?void 0:e.sortBy)&&null!==e.sortDesc),rn=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(e,t)=>{var n,a;return(null===(n=t.text)||void 0===n?void 0:n.valueSize)===(null===(a=e.text)||void 0===a?void 0:a.valueSize)}],on=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],ln=e=>{var t;let n=null!==(t=e.value)&&void 0!==t?t:0;const a=n<0;a&&(n*=-1);let s=on[0];for(const e of on)if(s=e,n<=s.value)break;return(0,ve.jsxs)(G.HorizontalGroup,{children:[(0,ve.jsx)(G.RadioButtonGroup,{value:s.value,options:on,onChange:t=>{e.onChange(t*(a?-1:1))}}),0!==n&&(0,ve.jsx)(G.Tooltip,{content:"Require space from the right side",placement:"top",children:(0,ve.jsx)("div",{children:(0,ve.jsx)(G.Checkbox,{value:a,onChange:()=>{e.onChange(-1*e.value)},label:"RTL"})})})]})};var dn=n(8554);const cn=new q.PanelPlugin((e=>{let{data:t,options:n,fieldConfig:a,width:s,height:i,timeZone:r,id:o}=e;const l=(0,G.useTheme2)(),{eventBus:d}=(0,G.usePanelContext)(),c=(0,$.useRef)(void 0),u=(0,$.useRef)(!1),[h,p]=(0,$.useState)(void 0),[g,m]=(0,$.useState)(null),[f,v]=(0,$.useState)(null),[b,x]=(0,$.useState)(null),[y,w]=(0,$.useState)(!1),j=()=>{u.current=!1,m(null),w(!1)},S=()=>{u.current=!u.current,w(u.current)},C=(0,$.useRef)(),k=(0,$.useRef)(),T=(0,$.useMemo)((()=>an(null==t?void 0:t.series,l,n)),[t,l,n]),I="viz"in T?T:null;k.current=null==I?void 0:I.colorByField;const O=(0,$.useRef)(1e4);(0,$.useMemo)((()=>{O.current++}),[n]);const N=(0,$.useMemo)((()=>{var e;const n=null==I?void 0:I.viz[0],a=C.current;return n&&a&&(0,q.compareDataFrameStructures)(n,a,!0)||O.current++,C.current=n,(null!==(e=t.structureRev)&&void 0!==e?e:0)+O.current}),[I,t.structureRev]),F=(0,$.useMemo)((()=>n.orientation&&n.orientation!==q.VizOrientation.Auto?n.orientation:s<i?q.VizOrientation.Horizontal:q.VizOrientation.Vertical),[s,i,n.orientation]),D=(0,$.useMemo)((()=>{if(n.xTickLabelMaxLength)return n.xTickLabelMaxLength;{const e=n.xTickLabelRotation,t=(0,G.measureText)("M",G.UPLOT_AXIS_FONT_SIZE).width;return i/2/(Math.sin((e>=0?e:-1*e)*Math.PI/180)*t)-3}}),[i,n.xTickLabelRotation,n.xTickLabelMaxLength]);if("warn"in T)return(0,ve.jsx)(Z.PanelDataErrorView,{panelId:o,fieldConfig:a,data:t,message:T.warn,needsNumberField:!0});const P=(e,t,a)=>{const s=null==t?null:e.fields[t];if(s){const n=(0,q.getFieldDisplayName)(s,e);t=T.aligned.fields.findIndex((e=>n===(0,q.getFieldDisplayName)(e,T.aligned)))}return(0,ve.jsxs)(ve.Fragment,{children:[y&&(0,ve.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,ve.jsx)(Vt.P,{onClick:j,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,ve.jsx)(Bt.H,{data:T.aligned,rowIndex:a,columnIndex:t,sortOrder:n.tooltip.sort,mode:n.tooltip.mode})]})},A=(e,t)=>C.current.fields[e].values.get(t);let M,R=1;if(T.colorByField){var L;const e=T.colorByField,t=e.display;R=(null!==(L=e.config.custom.fillOpacity)&&void 0!==L?L:100)/100,M=(e,n)=>{var a;return t(null===(a=k.current)||void 0===a?void 0:a.values.get(n)).color}}return(0,ve.jsx)(G.GraphNG,{theme:l,frames:T.viz,prepConfig:(e,t,a)=>{const{barWidth:s,barRadius:i=0,showValue:o,groupWidth:c,stacking:u,legend:h,tooltip:p,text:g,xTickLabelRotation:m,xTickLabelSpacing:f}=n;return tn({frame:e,getTimeRange:a,theme:l,timeZones:[r],eventBus:d,orientation:F,barWidth:s,barRadius:i,showValue:o,groupWidth:c,xTickLabelRotation:m,xTickLabelMaxLength:D,xTickLabelSpacing:f,stacking:u,legend:h,tooltip:p,text:g,rawValue:A,getColor:M,fillOpacity:R,allFrames:T.viz})},propsToDiff:rn,preparePlotFrame:e=>e[0],renderLegend:e=>{const{legend:t}=n;if(!e||!1===t.showLegend)return null;if(T.colorByField){const e=(0,zt.$m)([T.colorByField],l);if(null!=e&&e.length)return(0,ve.jsx)(G.VizLayout.Legend,{placement:t.placement,children:(0,ve.jsx)(G.VizLegend,{placement:t.placement,items:e,displayMode:t.displayMode})})}return(0,ve.jsx)(G.PlotLegend,Object.assign({data:T.viz,config:e,maxHeight:"35%",maxWidth:"60%"},n.legend))},legend:n.legend,timeZone:r,timeRange:{from:1,to:1},structureRev:N,width:s,height:i,children:e=>(c.current!==e&&(c.current=Et({config:e,onUPlotClick:S,setFocusedSeriesIdx:v,setFocusedPointIdx:x,setCoords:m,setHover:p,isToolTipOpen:u})),n.tooltip.mode===G.TooltipDisplayMode.None?null:(0,ve.jsx)(G.Portal,{children:h&&g&&(0,ve.jsx)(G.VizTooltipContainer,{position:{x:g.viewport.x,y:g.viewport.y},offset:{x:10,y:10},allowPointerEvents:u.current,children:P(T.aligned,f,b)})}))})})).useFieldConfig({standardOptions:{[q.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:q.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{const t=en;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:G.graphFieldOptions.fillGradient[0].value,settings:{options:G.graphFieldOptions.fillGradient}}),G.commonOptionsBuilder.addAxisConfig(e,t,!1),G.commonOptionsBuilder.addHideFrom(e)}}).setPanelOptions(((e,t)=>{var n,a;const s=an(t.data,Z.config.theme2,null!==(n=t.options)&&void 0!==n?n:{});let i="First string or time field";const r="viz"in s?s.viz[0]:void 0;if(null!=r&&null!==(a=r.fields)&&void 0!==a&&a.length){const e=r.fields[0];i+=` (${(0,q.getFieldDisplayName)(e,r)})`}e.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:i}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:q.VizOrientation.Auto,label:"Auto"},{value:q.VizOrientation.Horizontal,label:"Horizontal"},{value:q.VizOrientation.Vertical,label:"Vertical"}]},defaultValue:Xt.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate bar labels",defaultValue:Xt.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90Â°","-45":"-45Â°",0:"0Â°",45:"45Â°",90:"90Â°"},included:!1},showIf:e=>e.orientation===q.VizOrientation.Auto||e.orientation===q.VizOrientation.Vertical}).addNumberInput({path:"xTickLabelMaxLength",name:"Bar label max length",description:"Bar labels will be truncated to the length provided",settings:{placeholder:"None",min:0}}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"Bar labels minimum spacing",defaultValue:Xt.xTickLabelSpacing,editor:ln}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:$t.Jp.Auto,label:"Auto"},{value:$t.Jp.Always,label:"Always"},{value:$t.Jp.Never,label:"Never"}]},defaultValue:Xt.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:G.graphFieldOptions.stacking},defaultValue:Xt.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Xt.groupWidth,settings:{min:0,max:1,step:.01},showIf:(e,t)=>(!e.stacking||e.stacking===$t.o0.None)&&1!==function(e){let t=0;if(e)for(const n of e)for(const e of n.fields)e.type===q.FieldType.number&&t++;return t}(t)}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Xt.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Xt.barRadius,settings:{min:0,max:.5,step:.05}}),e.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),G.commonOptionsBuilder.addTooltipOptions(e),G.commonOptionsBuilder.addLegendOptions(e),G.commonOptionsBuilder.addTextSizeOptions(e,!1)})).setSuggestionsSupplier(new class{getListWithDefaults(e){return e.getListAppender({name:dn.y.BarChart,pluginId:"barchart",options:{showValue:$t.Jp.Never,legend:{showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.barWidth=.8}}})}getSuggestionsForData(e){const t=this.getListWithDefaults(e),{dataSummary:n}=e;1===n.frameCount&&n.hasNumberField&&n.hasStringField&&(n.rowCountTotal>50||(t.append({name:dn.y.BarChart}),n.numberFieldCount>1&&(t.append({name:dn.y.BarChartStacked,options:{stacking:$t.o0.Normal}}),t.append({name:dn.y.BarChartStackedPercent,options:{stacking:$t.o0.Percent}})),t.append({name:dn.y.BarChartHorizontal,options:{orientation:q.VizOrientation.Horizontal}}),n.numberFieldCount>1&&(t.append({name:dn.y.BarChartHorizontalStacked,options:{stacking:$t.o0.Normal,orientation:q.VizOrientation.Horizontal}}),t.append({name:dn.y.BarChartHorizontalStackedPercent,options:{orientation:q.VizOrientation.Horizontal,stacking:$t.o0.Percent}}))))}});var un=n(38231);var hn=n(15146);Object.freeze([0,0]);const pn={displayMode:$t.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0};const gn=new q.PanelPlugin(hn.M).useFieldConfig().setPanelOptions((e=>{(0,un.j)(e),(0,un.h)(e),G.commonOptionsBuilder.addTextSizeOptions(e),e.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:$t.QH.Gradient,label:"Gradient"},{value:$t.QH.Lcd,label:"Retro LCD"},{value:$t.QH.Basic,label:"Basic"}]},defaultValue:pn.displayMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:pn.showUnfilled,showIf:e=>"lcd"!==e.displayMode}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:pn.minVizWidth,showIf:e=>e.orientation===q.VizOrientation.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:pn.minVizHeight,showIf:e=>e.orientation===q.VizOrientation.Horizontal})})).setPanelChangeHandler(G.sharedSingleStatPanelChangedHandler).setMigrationHandler((e=>(0,G.sharedSingleStatMigrationHandler)(e))).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData||!t.hasNumberField)return;const n=e.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});t.numberFieldCount>50||(t.hasStringField&&1===t.frameCount&&t.rowCountTotal<30?(n.append({name:dn.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:G.BarGaugeDisplayMode.Basic,orientation:q.VizOrientation.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),n.append({name:dn.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:G.BarGaugeDisplayMode.Lcd,orientation:q.VizOrientation.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(n.append({name:dn.y.BarGaugeBasic,options:{displayMode:G.BarGaugeDisplayMode.Basic,orientation:q.VizOrientation.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),n.append({name:dn.y.BarGaugeLCD,options:{displayMode:G.BarGaugeDisplayMode.Lcd,orientation:q.VizOrientation.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}});var mn=n(40325),fn=n(67892),vn=n(96211),bn=n(13767);const xn=e=>t=>{const n=e.visualization.getColorByName((null==t?void 0:t.color)||G.DEFAULT_ANNOTATION_COLOR);return{markerTriangle:T.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${n};
      `,markerBar:T.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${n};
      `}};var yn=n(33554),wn=n(37129),jn=n(67907),Sn=n(54361);const Cn=["annotation","onSave","onDismiss","timeFormatter","className"],kn=["ref","onChange"];function Tn(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const In=$.forwardRef(((e,t)=>{var n;let{annotation:a,onSave:s,onDismiss:i,timeFormatter:r,className:o}=e,l=Tn(e,Cn);const d=(0,G.useStyles2)(On),c=(0,G.usePanelContext)(),u=(0,$.useRef)(null);(0,wn.Z)(u,(()=>{i()}));const[h,p]=(0,yn.default)((async e=>{const t=await c.onAnnotationCreate(e);return s&&s(),t})),[g,m]=(0,yn.default)((async e=>{const t=await c.onAnnotationUpdate(e);return s&&s(),t})),f=void 0!==a.id,v=a.time!==a.timeEnd,b=f?m:p,x=f?g:h,y=v?`${r(a.time)} - ${r(a.timeEnd)}`:r(a.time),w=(0,ve.jsxs)("div",Object.assign({ref:t,className:(0,T.cx)(d.editor,o)},l,{children:[(0,ve.jsx)("div",{className:d.header,children:(0,ve.jsxs)(G.HorizontalGroup,{justify:"space-between",align:"center",children:[(0,ve.jsx)("div",{className:d.title,children:"Add annotation"}),(0,ve.jsx)("div",{className:d.ts,children:y})]})}),(0,ve.jsx)("div",{className:d.editorForm,children:(0,ve.jsx)(G.Form,{onSubmit:e=>{let{tags:t,description:n}=e;b({id:a.id,tags:t,description:n,from:Math.round(a.time),to:Math.round(a.timeEnd)})},defaultValues:{description:null==a?void 0:a.text,tags:(null==a?void 0:a.tags)||[]},children:e=>{var t;let{register:a,errors:s,control:r}=e;return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.Field,{label:"Description",invalid:!!s.description,error:null==s||null===(t=s.description)||void 0===t?void 0:t.message,children:(0,ve.jsx)(G.TextArea,Object.assign({},a("description",{required:"Annotation description is required"})))}),(0,ve.jsx)(G.Field,{label:"Tags",children:(0,ve.jsx)(G.InputControl,{control:r,name:"tags",render:e=>{let{field:{onChange:t}}=e,n=Tn(e.field,kn);return(0,ve.jsx)(jn.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:t,tagOptions:Sn.lK,tags:n.value})}})}),(0,ve.jsxs)(G.HorizontalGroup,{justify:"flex-end",children:[n||(n=(0,ve.jsx)(G.Button,{size:"sm",variant:"secondary",onClick:i,fill:"outline",children:"Cancel"})),(0,ve.jsx)(G.Button,{size:"sm",type:"submit",disabled:null==x?void 0:x.loading,children:null!=x&&x.loading?"Saving":"Save"})]})]})}})})]}));return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{className:d.backdrop}),(0,ve.jsx)("div",{ref:u,children:w})]})}));In.displayName="AnnotationEditorForm";const On=e=>({backdrop:T.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${e.zIndex.navbarFixed};
    `,editorContainer:T.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:T.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      z-index: ${e.zIndex.dropdown};
      border: 1px solid ${e.colors.border.weak};
      border-radius: ${e.shape.borderRadius()};
      width: 460px;
    `,editorForm:T.css`
      padding: ${e.spacing(1)};
    `,header:T.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: ${e.spacing(1.5,1)};
    `,title:T.css`
      font-weight: ${e.typography.fontWeightMedium};
    `,ts:T.css`
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `}),Nn=e=>{let{onDismiss:t,onSave:n,timeZone:a,data:s,selection:i,annotation:r,style:o}=e;const l=(0,G.useTheme2)(),d=(0,G.useStyles2)(Fn),c=(0,G.useStyles2)(xn),[u,h]=(0,$.useState)(null),[p,g]=(0,$.useState)(null),m=(0,bn.D)(u,p,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let f=s.fields[0];if(!f)return null;const v=f.display||(0,q.getDisplayProcessor)({field:f,timeZone:a,theme:l}),b=i.min!==i.max;return(0,ve.jsx)(G.Portal,{children:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{style:o,children:(0,ve.jsx)("div",{className:(0,T.cx)(T.css`
                position: absolute;
                top: ${i.bbox.top}px;
                left: ${i.bbox.left}px;
                width: ${i.bbox.width}px;
                height: ${i.bbox.height}px;
              `,b?d.overlayRange(r):d.overlay(r)),children:(0,ve.jsx)("div",{ref:h,className:b?(0,T.cx)(c(r).markerBar,d.markerBar):(0,T.cx)(c(r).markerTriangle,d.markerTriangle)})})}),(0,ve.jsx)(In,Object.assign({annotation:r||{time:i.min,timeEnd:i.max},timeFormatter:e=>v(e).text,onSave:n,onDismiss:t,ref:g,style:m.styles.popper},m.attributes.popper))]})})},Fn=e=>({overlay:t=>{const n=e.visualization.getColorByName((null==t?void 0:t.color)||G.DEFAULT_ANNOTATION_COLOR);return T.css`
        border-left: 1px dashed ${n};
      `},overlayRange:t=>{const n=e.visualization.getColorByName((null==t?void 0:t.color)||G.DEFAULT_ANNOTATION_COLOR);return T.css`
        background: ${q.colorManipulator.alpha(n,.1)};
        border-left: 1px dashed ${n};
        border-right: 1px dashed ${n};
      `},markerTriangle:T.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:T.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),Dn=e=>{let{data:t,timeZone:n,config:a,children:s}=e;const i=(0,$.useRef)(),[r,o]=(0,$.useState)(),[l,d]=(0,$.useState)(!1),[c,u]=(0,$.useState)(null),h=(0,vn.Z)(),p=(0,$.useCallback)((()=>{u(null),i.current&&i.current.setSelect({top:0,left:0,width:0,height:0}),d(!1)}),[d,u]);(0,$.useLayoutEffect)((()=>{let e=!1;a.addHook("init",(n=>{i.current=n;const a=n.hooks.setSelect;if(a)for(let n=0;n<a.length;n++){const s=a[n];s!==t&&(a[n]=function(){!e&&s(...arguments)})}})),a.addHook("syncRect",((e,t)=>{h()&&o(t)}));const t=t=>{e&&(d(!0),u({min:t.posToVal(t.select.left,"x"),max:t.posToVal(t.select.left+t.select.width,"x"),bbox:{left:t.select.left,top:0,height:t.select.height,width:t.select.width}}),e=!1)};a.addHook("setSelect",t),a.setCursor({bind:{mousedown:(t,n,a)=>t=>(e=0===t.button&&(t.metaKey||t.ctrlKey),a(t),null),mouseup:(t,n,a)=>n=>(e&&0===t.select.width&&(t.select.left=t.cursor.left,t.select.height=t.bbox.height/window.devicePixelRatio),a(n),null)}})}),[a,o,h]);const g=(0,$.useCallback)((e=>{let{coords:t}=e;if(!i.current||!r||!t)return;const n=i.current.posToVal(t.plotCanvas.x,"x");n&&(u({min:n,max:n,bbox:{left:t.plotCanvas.x,top:0,height:r.height,width:0}}),d(!0))}),[r]);return(0,ve.jsxs)(ve.Fragment,{children:[l&&c&&r&&(0,ve.jsx)(Nn,{selection:c,onDismiss:p,onSave:p,data:t,timeZone:n,style:{position:"absolute",top:`${r.top}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${r.height}px`}}),s?s({startAnnotating:g}):null]})};var Pn=n(29977),An=n(17770);const Mn=e=>{let{annotation:t,timeFormatter:n,canEdit:a,canDelete:s,onEdit:i,onDelete:r}=e;const o=(0,G.useStyles2)(Rn),l=n(t.time),d=n(t.timeEnd);let c=t.text;const u=t.tags;let h,p,g="",m=null;const f=(0,ve.jsx)("span",{className:o.time,children:Boolean(t.isRegion)?`${l} - ${d}`:l});if(t.login&&t.avatarUrl&&(h=(0,ve.jsx)("img",{className:o.avatar,src:t.avatarUrl})),void 0!==t.alertId&&t.newState){const e=Me.Z.getStateDisplayModel(t.newState);m=(0,ve.jsx)("div",{className:o.alertState,children:(0,ve.jsx)("i",{className:e.stateClass,children:e.text})}),g=Me.Z.getAlertAnnotationInfo(t)}else t.title&&(c=t.title+"<br />"+("string"==typeof c?c:""));(a||s)&&(p=(0,ve.jsxs)("div",{className:o.editControls,children:[a&&(0,ve.jsx)(G.IconButton,{name:"pen",size:"sm",onClick:i}),s&&(0,ve.jsx)(G.IconButton,{name:"trash-alt",size:"sm",onClick:r})]}));const v=K.ZP.featureToggles.annotationComments;return(0,ve.jsxs)("div",{className:o.wrapper,style:v?{minWidth:"300px"}:{},children:[(0,ve.jsx)("div",{className:o.header,children:(0,ve.jsxs)(G.HorizontalGroup,{justify:"space-between",align:"center",spacing:"md",children:[(0,ve.jsxs)("div",{className:o.meta,children:[(0,ve.jsxs)("span",{children:[h,m]}),f]}),p]})}),(0,ve.jsxs)("div",{className:o.body,children:[c&&(0,ve.jsx)("div",{dangerouslySetInnerHTML:{__html:q.textUtil.sanitize(c)}}),g,(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(G.HorizontalGroup,{spacing:"xs",wrap:!0,children:null==u?void 0:u.map(((e,t)=>(0,ve.jsx)(G.Tag,{name:e},`${e}-${t}`)))})}),v&&(0,ve.jsx)("div",{className:o.commentWrapper,children:(0,ve.jsx)(An.t,{objectType:"annotation",objectId:t.id.toString()})})]})]})};Mn.displayName="AnnotationTooltip";const Rn=e=>({wrapper:T.css`
      max-width: 400px;
    `,commentWrapper:T.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:T.css`
      padding: ${e.spacing(.5,1)};
      border-bottom: 1px solid ${e.colors.border.weak};
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
    `,meta:T.css`
      display: flex;
      justify-content: space-between;
    `,editControls:T.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:T.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,alertState:T.css`
      padding-right: ${e.spacing(1)};
      font-weight: ${e.typography.fontWeightMedium};
    `,time:T.css`
      color: ${e.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:T.css`
      padding: ${e.spacing(1)};

      a {
        color: ${e.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),$n=["canAddAnnotations","canEditAnnotations","canDeleteAnnotations"];const Ln={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function En(e){let{annotation:t,timeZone:n,width:a}=e;const s=(0,G.usePanelContext)(),{canEditAnnotations:i,canDeleteAnnotations:r}=s,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(s,$n),l=(0,G.useStyles2)(xn),d=(0,G.useStyles2)(Vn),[c,u]=(0,$.useState)(!1),[h,p]=(0,$.useState)(!1),[g,m]=(0,$.useState)(null),[f,v]=(0,$.useState)(null),[b,x]=(0,$.useState)(null),y=(0,$.useRef)(),w=(0,bn.D)(g,f,Ln),j=(0,bn.D)(g,b,Ln),S=(0,$.useCallback)((()=>{p(!0),u(!1)}),[p,u]),C=(0,$.useCallback)((()=>{o.onAnnotationDelete&&o.onAnnotationDelete(t.id)}),[t,o]),k=(0,$.useCallback)((()=>{y.current&&clearTimeout(y.current),u(!0)}),[u]),T=(0,$.useCallback)((()=>{y.current&&clearTimeout(y.current)}),[]),I=(0,$.useCallback)((()=>{y.current=setTimeout((()=>{u(!1)}),100)}),[u]),O=(0,$.useCallback)((e=>(0,q.dateTimeFormat)(e,{format:q.systemDateFormats.fullDate,timeZone:n})),[n]),N=(0,$.useCallback)((()=>(0,ve.jsx)(Mn,{annotation:t,timeFormatter:O,onEdit:S,onDelete:C,canEdit:i(t.dashboardUID),canDelete:r(t.dashboardUID)})),[i,r,C,S,O,t]),F=Boolean(t.isRegion)&&a>6;let D=a/2+"px",P=(0,ve.jsx)("div",{className:l(t).markerTriangle,style:{left:D,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return F&&(P=(0,ve.jsx)("div",{className:l(t).markerBar,style:{width:`${a}px`,transform:"translate3d(0,-50%, 0)"}})),(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{ref:m,onMouseEnter:k,onMouseLeave:I,className:F?void 0:d.markerWrapper,children:P}),c&&(0,ve.jsx)(G.Portal,{children:(0,ve.jsx)("div",Object.assign({ref:v,style:w.styles.popper},w.attributes.popper,{className:d.tooltip,onMouseEnter:T,onMouseLeave:I,children:N()}))}),h&&(0,ve.jsx)(G.Portal,{children:(0,ve.jsx)(In,Object.assign({onDismiss:()=>p(!1),onSave:()=>p(!1),timeFormatter:O,annotation:t,ref:x,style:j.styles.popper},j.attributes.popper))})]})}const Vn=e=>({markerWrapper:T.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:T.css`
      max-width: 400px;
    `,tooltip:T.css`
      ${(0,Pn.getTooltipContainerStyles)(e)};
      padding: 0;
    `}),Bn=e=>{let{annotations:t,timeZone:n,config:a}=e;const s=(0,G.useTheme2)(),i=(0,$.useRef)(),r=(0,$.useRef)();(0,$.useEffect)((()=>{const e=[];for(const n of t)e.push(new q.DataFrameView(n));r.current=e}),[t]),(0,$.useLayoutEffect)((()=>{a.addHook("init",(e=>{i.current=e})),a.addHook("draw",(e=>{if(!r.current)return null;const t=e.ctx;if(!t)return;t.save(),t.beginPath(),t.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),t.clip();const n=(n,a)=>{t.beginPath(),t.lineWidth=2,t.strokeStyle=a,t.setLineDash([5,5]),t.moveTo(n,e.bbox.top),t.lineTo(n,e.bbox.top+e.bbox.height),t.stroke(),t.closePath()};for(let a=0;a<r.current.length;a++){const i=r.current[a];for(let a=0;a<i.length;a++){const r=i.get(a);if(!r.time)continue;let o=e.valToPos(r.time,"x",!0);const l=s.visualization.getColorByName(r.color);if(n(o,l),r.isRegion&&r.timeEnd){let a=e.valToPos(r.timeEnd,"x",!0);n(a,l),t.fillStyle=q.colorManipulator.alpha(l,.1),t.rect(o,e.bbox.top,a-o,e.bbox.height),t.fill()}}}t.restore()}))}),[a,s]);const o=(0,$.useCallback)(((e,t)=>{const n=new q.DataFrameView(e).get(t.fieldIndex);if(!n.time||!i.current)return;let a=i.current.valToPos(n.time,"x");return a<0&&(a=0),{x:a,y:i.current.bbox.height/window.devicePixelRatio+4}}),[]),l=(0,$.useCallback)(((e,t)=>{let a=0;const s=new q.DataFrameView(e).get(t.fieldIndex);if(Boolean(s.isRegion)&&i.current){let e=i.current.valToPos(s.time,"x"),t=i.current.valToPos(s.timeEnd,"x");e<0&&(e=0),t>i.current.bbox.width/window.devicePixelRatio&&(t=i.current.bbox.width/window.devicePixelRatio),a=t-e}return(0,ve.jsx)(En,{annotation:s,timeZone:n,width:a})}),[n]);return(0,ve.jsx)(G.EventsCanvas,{id:"annotations",config:a,events:t,renderEventMarker:l,mapEventToXYCoords:o})};var zn=n(93214),_n=n(35993);const Un=["data","config","onClose","timeZone","replaceVariables"],Hn=["selection","timeZone","defaultItems","replaceVariables","data"];function Wn(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const qn=e=>{let{data:t,config:n,onClose:a,timeZone:s,replaceVariables:i}=e,r=Wn(e,Un);const o=(0,$.useRef)(),[l,d]=(0,$.useState)(null),[c,u]=(0,$.useState)(null),[h,p]=(0,$.useState)(!1),g=(0,$.useCallback)((()=>{p(!0)}),[p]),m=(0,$.useCallback)((()=>{p(!1)}),[p]),f=(0,$.useCallback)((()=>{(0,Ht.Zp)("ContextMenuPlugin",!1,"clearing click selection"),u(null)}),[u]);(0,$.useLayoutEffect)((()=>{let e;const t=t=>{let n={viewport:{x:t.clientX,y:t.clientY},plotCanvas:{x:0,y:0}};e&&(n=Object.assign({},n,{plotCanvas:{x:t.clientX-e.left,y:t.clientY-e.top}})),d(n)};n.addHook("syncRect",((t,n)=>{e=n})),n.addHook("init",(e=>{var n,a,s,i;const r=e.over;o.current=r||void 0,null===(n=o.current)||void 0===n||n.addEventListener("mousedown",t),(0,Ht.Zp)("ContextMenuPlugin",!1,"init");let l=!1,d=Array.from(e.root.querySelectorAll(".u-cursor-pt"));null===(a=o.current)||void 0===a||a.addEventListener("mousedown",(()=>{l=!0})),null===(s=o.current)||void 0===s||s.addEventListener("mousemove",(()=>{l=!1})),null===(i=o.current)||void 0===i||i.addEventListener("mouseup",(e=>{if(!l||e.metaKey||e.ctrlKey)u(null);else{if(l=!0,e.target){e.target.classList.contains("u-cursor-pt")||((0,Ht.Zp)("ContextMenuPlugin",!1,"canvas click"),u({seriesIdx:null,dataIdx:null}))}g()}})),d.length>0&&d.forEach(((t,n)=>{t.addEventListener("click",(()=>{const t=n+1,a=e.cursor.idx;(0,Ht.Zp)("ContextMenuPlugin",!1,t,a),u({seriesIdx:t,dataIdx:null!=a?a:null})}))}))}))}),[n,g,d,u]);const v=(0,$.useMemo)((()=>r.defaultItems?r.defaultItems.map((e=>Object.assign({},e,{items:e.items.map((e=>Object.assign({},e,{onClick:t=>{l&&e.onClick&&e.onClick(t,{coords:l})}})))}))):[]),[l,r.defaultItems]);return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(zn.xB,{styles:zn.iv`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),h&&l&&(0,ve.jsx)(Zn,{data:t,defaultItems:v,timeZone:s,selection:{point:c,coords:l},replaceVariables:i,onClose:()=>{f(),m(),a&&a()}})]})},Zn=e=>{let{selection:t,defaultItems:n,data:a}=e,s=Wn(e,Hn);const i=(0,$.useRef)(null),r=()=>{s.onClose&&s.onClose()};(0,_n.Z)(i,(()=>{r()}));const o=a.fields[0];if(!o)return null;const l=n?[...n]:[];let d=()=>null;if(t.point){const{seriesIdx:e,dataIdx:n}=t.point,s=o.display;if(e&&null!==n){const t=a.fields[e],i=t.display(t.values.get(n));t.config.links&&t.config.links.length>0&&t.getLinks&&l.push({items:t.getLinks({valueRowIndex:n}).map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))}),d=()=>(0,ve.jsx)(G.GraphContextMenuHeader,{timestamp:s(o.values.get(n)).text,displayValue:i,seriesColor:i.color,displayName:(0,q.getFieldDisplayName)(t,a)})}}return(0,ve.jsx)(G.ContextMenu,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,ve.jsx)(G.MenuGroup,{label:e.label,children:(e.items||[]).map((e=>(0,ve.jsx)(G.MenuItem,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),renderHeader:d,x:t.coords.viewport.x,y:t.coords.viewport.y,onClose:r})};var Gn,Kn,Qn,Jn,Yn,Xn;const ea=e=>{var t;let{timeZone:n,dataFrame:a,dataFrameFieldIndex:s,config:i,getFieldLinks:r}=e;const o=(0,G.useStyles)(ta),[l,d]=(0,$.useState)(!1),[c,u]=$.useState(null),[h,p]=$.useState(null),{styles:g,attributes:m}=(0,bn.D)(c,h),f=(0,$.useRef)(),v=(0,$.useCallback)((()=>{f.current&&clearTimeout(f.current),d(!0)}),[d]),b=(0,$.useCallback)((()=>{f.current=setTimeout((()=>{d(!1)}),100)}),[d]),x=(0,$.useCallback)((()=>{const e=e=>(0,q.dateTimeFormat)(e,{format:q.systemDateFormats.fullDate,timeZone:n});return(0,ve.jsx)("div",Object.assign({onMouseEnter:v,onMouseLeave:b,className:o.tooltip,ref:p,style:g.popper},m.popper,{children:(0,ve.jsxs)("div",{className:o.wrapper,children:[(0,ve.jsx)("div",{className:o.header,children:(0,ve.jsx)("span",{className:o.title,children:"Exemplar"})}),(0,ve.jsx)("div",{className:o.body,children:(0,ve.jsx)("div",{children:(0,ve.jsx)("table",{className:o.exemplarsTable,children:(0,ve.jsx)("tbody",{children:a.fields.map(((t,n)=>{var a;const i=t.values.get(s.fieldIndex),l=null!==(a=t.config.links)&&void 0!==a&&a.length?r(t,s.fieldIndex):void 0;return(0,ve.jsxs)("tr",{children:[(0,ve.jsx)("td",{valign:"top",children:t.name}),(0,ve.jsx)("td",{children:(0,ve.jsxs)("div",{className:o.valueWrapper,children:[(0,ve.jsx)("span",{children:t.type===q.FieldType.time?e(i):i}),l&&(0,ve.jsx)(G.FieldLinkList,{links:l})]})})]},n)}))})})})})]})}))}),[m.popper,a.fields,r,s,v,b,g.popper,o,n]),y=null===(t=i.getSeries().find((e=>{var t;return(null===(t=e.props.dataFrameFieldIndex)||void 0===t?void 0:t.frameIndex)===s.frameIndex})))||void 0===t?void 0:t.props.lineColor;return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{ref:u,onMouseEnter:v,onMouseLeave:b,className:o.markerWrapper,"aria-label":Ce.wl.components.DataSource.Prometheus.exemplarMarker,children:(0,ve.jsx)("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:y},className:(0,T.cx)(o.marble,l&&o.activeMarble),children:(()=>{const e=[Gn||(Gn=(0,ve.jsx)("rect",{x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"},"diamond")),Kn||(Kn=(0,ve.jsx)("path",{d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"},"x")),Qn||(Qn=(0,ve.jsx)("path",{d:"M4 0L7.4641 6H0.535898L4 0Z"},"triangle")),Jn||(Jn=(0,ve.jsx)("rect",{width:"5",height:"5"},"rectangle")),Yn||(Yn=(0,ve.jsx)("path",{d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"},"pentagon")),Xn||(Xn=(0,ve.jsx)("path",{d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"},"plus"))];return e[s.frameIndex%e.length]})()})}),l&&(0,ve.jsx)(G.Portal,{children:x()})]})},ta=e=>{const t=e.isDark?e.palette.dark2:e.palette.white,n=e.isDark?e.palette.dark9:e.palette.gray5,a=e.isDark?e.palette.black:e.palette.white,s=e.isDark?e.palette.dark3:e.palette.gray6;return{markerWrapper:T.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:T.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${e.palette.red};
      pointer-events: none;
    `,wrapper:T.css`
      background: ${t};
      border: 1px solid ${n};
      border-radius: ${e.border.radius.md};
      box-shadow: 0 0 20px ${a};
    `,exemplarsTable:T.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${e.colors.panelBg};
      }

      tr {
        background-color: ${e.colors.bg1};
        &:nth-child(even) {
          background-color: ${s};
        }
      }
    `,valueWrapper:T.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${e.spacing.sm};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:T.css`
      background: none;
      padding: 0;
    `,header:T.css`
      background: ${n};
      padding: 6px 10px;
      display: flex;
    `,title:T.css`
      font-weight: ${e.typography.weight.semibold};
      padding-right: ${e.spacing.md};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:T.css`
      padding: ${e.spacing.sm};
      font-weight: ${e.typography.weight.semibold};
    `,marble:T.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:T.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},na=e=>{let{exemplars:t,timeZone:n,getFieldLinks:a,config:s}=e;const i=(0,$.useRef)();(0,$.useLayoutEffect)((()=>{s.addHook("init",(e=>{i.current=e}))}),[s]);const r=(0,$.useCallback)(((e,t)=>{var n;const a=e.fields.find((e=>e.name===q.TIME_SERIES_TIME_FIELD_NAME)),s=e.fields.find((e=>e.name===q.TIME_SERIES_VALUE_FIELD_NAME));if(!a||!s||!i.current)return;const r=null!==(n=Object.keys(i.current.scales).find((e=>!["x","y"].some((t=>t===e)))))&&void 0!==n?n:G.FIXED_UNIT,o=i.current.scales[r].min,l=i.current.scales[r].max;let d=s.values.get(t.fieldIndex);return null!=o&&d<o&&(d=o),null!=l&&d>l&&(d=l),{x:i.current.valToPos(a.values.get(t.fieldIndex),"x"),y:i.current.valToPos(d,r)}}),[]),o=(0,$.useCallback)(((e,t)=>(0,ve.jsx)(ea,{timeZone:n,getFieldLinks:a,dataFrame:e,dataFrameFieldIndex:t,config:s})),[s,n,a]);return(0,ve.jsx)(G.EventsCanvas,{config:s,id:"exemplars",events:t,renderEventMarker:o,mapEventToXYCoords:r})};var aa;const sa=e=>{let{config:t,onChangeTimeRange:n}=e;const a=(0,$.useRef)(),[s,i]=(0,$.useState)([]),[r,o]=(0,$.useState)();if((0,$.useLayoutEffect)((()=>{t.addHook("init",(e=>{a.current=e})),t.addHook("setScale",(e=>{var t,n,a;i(null!==(t=null===(n=e.data)||void 0===n?void 0:n[0])&&void 0!==t?t:[]),o(null!==(a=e.scales.x)&&void 0!==a?a:void 0)}))}),[t]),s.length<2||!n)return null;if(!(r&&r.time&&r.min&&r.max))return null;const l=s[0],d=s[s.length-1],c=r.min,u=r.max;return l<=u&&d>=c?null:(0,ve.jsx)("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"},children:(0,ve.jsxs)("div",{children:[aa||(aa=(0,ve.jsx)("div",{children:"Data outside time range"})),(0,ve.jsx)(G.Button,{onClick:e=>n({from:l,to:d}),variant:"secondary",children:"Zoom to data"})]})})};sa.displayName="OutsideRangePlugin";var ia=n(53004),ra=n.n(ia);const oa=e=>{var t,n;let{step:a,y:s,dragBounds:i,mapPositionToValue:r,formatValue:o,onChange:l}=e;const d=(0,G.useTheme2)();let c=s,u="none";var h,p;(s<(null!==(t=i.top)&&void 0!==t?t:0)&&(u="top"),s>(null!==(n=i.bottom)&&void 0!==n?n:0)+22&&(u="bottom"),"bottom"===u)&&(c=null!==(h=i.bottom)&&void 0!==h?h:s);"top"===u&&(c=null!==(p=i.top)&&void 0!==p?p:s);const g=(0,G.useStyles2)((e=>la(e,a,u))),[m,f]=(0,$.useState)(a.value),v=(0,$.useMemo)((()=>d.colors.getContrastText(d.visualization.getColorByName(a.color))),[a.color,d]);return(0,ve.jsx)(ra(),{axis:"y",grid:[1,1],onStop:(e,t)=>(l(r(t.lastY)),!1),onDrag:(e,t)=>f(r(t.lastY)),position:{x:0,y:c},bounds:i,children:(0,ve.jsx)("div",{className:g.handle,style:{color:v},children:(0,ve.jsx)("span",{className:g.handleText,children:o(m)})})})};oa.displayName="ThresholdDragHandle";const la=(e,t,n)=>{const a=e.visualization.getColorByName(t.color),s=function(e){const t=e=>T.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${e}px;
    border-right-color: inherit;
    border-top: ${e}px solid transparent;
    border-bottom: ${e}px solid transparent;
  `;if("none"===e)return T.css`
      ${t(9)};
      left: -9px;
    `;if("top"===e)return T.css`
      ${t(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `;if("bottom"===e)return T.css`
      ${t(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `;return""}(n),i="none"!==n;return{handle:T.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${a};
      cursor: grab;
      border-top-right-radius: ${e.shape.borderRadius(1)};
      border-bottom-right-radius: ${e.shape.borderRadius(1)};
      ${i&&T.css`
        margin-top: 0;
        border-radius: ${e.shape.borderRadius(1)};
      `}
      background: ${a};
      font-size: ${e.typography.bodySmall.fontSize};
      &:before {
        ${s};
      }
    `,handleText:T.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};const da=e=>{let{config:t,fieldConfig:n,onThresholdsChange:a}=e;const s=(0,$.useRef)(),[i,r]=(0,$.useState)(0);(0,$.useLayoutEffect)((()=>{t.setPadding([0,60,0,0]),t.addHook("init",(e=>{s.current=e})),t.addHook("draw",(()=>{r((e=>e+1))}))}),[t]);const o=(0,$.useMemo)((()=>{const e=s.current;if(!e)return null;const t=n.defaults.thresholds;if(!t)return null;const i=(0,G.buildScaleKey)(n.defaults),r=n.defaults.decimals,o=[];for(let n=0;n<t.steps.length;n++){const s=t.steps[n],l=e.valToPos(s.value,i);if(Number.isNaN(l)||!Number.isFinite(l))continue;const d=e.bbox.height/window.devicePixelRatio,c=(0,ve.jsx)(oa,{step:s,y:l,dragBounds:{top:0,bottom:d},mapPositionToValue:t=>e.posToVal(t,i),formatValue:e=>(0,q.getValueFormat)(i)(e,r).text,onChange:e=>{const s=[...t.steps.slice(0,n),...t.steps.slice(n+1),Object.assign({},t.steps[n],{value:e})].sort(((e,t)=>e.value-t.value));a(Object.assign({},t,{steps:s}))}},`${s.value}-${n}`);o.push(c)}return o}),[i,n,a]);return s.current?(0,ve.jsx)("div",{style:{position:"absolute",overflow:"visible",left:(s.current.bbox.left+s.current.bbox.width)/window.devicePixelRatio+"px",top:s.current.bbox.top/window.devicePixelRatio+"px",width:"60px",height:s.current.bbox.height/window.devicePixelRatio+"px"},children:o}):null};da.displayName="ThresholdControlsPlugin";var ca=n(72710),ua=n(33564);function ha(e,t,n){var a,s;if(null==e||!e.length)return null;let i;const r=[];for(let o of e){const e=[];let l=!1,d=!1,c=(0,ca.w)({frame:o,refFieldPseudoMin:null==n?void 0:n.from.valueOf(),refFieldPseudoMax:null==n?void 0:n.to.valueOf()});for(const n of(0,ua.I)(c).fields)switch(n.type){case q.FieldType.time:l=!0,e.push(n);break;case q.FieldType.number:d=!0,i=Object.assign({},n,{values:new q.ArrayVector(n.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))}),e.push(i);break;case q.FieldType.boolean:d=!0;const r=null!==(a=null===(s=n.config)||void 0===s?void 0:s.custom)&&void 0!==a?a:{},o=Object.assign({},n.config,{max:1,min:0,custom:r});r.lineInterpolation!==$t.KC.StepBefore&&(r.lineInterpolation=$t.KC.StepAfter),i=Object.assign({},n,{config:o,type:q.FieldType.number,values:new q.ArrayVector(n.values.toArray().map((e=>null==e?e:Boolean(e)?1:0)))}),(0,q.isBooleanUnit)(o.unit)||(o.unit="bool",i.display=(0,q.getDisplayProcessor)({field:i,theme:t})),e.push(i)}l&&d&&r.push(Object.assign({},o,{length:c.length,fields:e}))}return r.length?r:null}function pa(e,t){return e&&e.length?e.map((e=>null!=e&&e.length?e:t)):[t]}Object.freeze([1,0]);let ga,ma,fa;!function(e){e.CandlesVolume="candles+volume",e.Candles="candles",e.Volume="volume"}(ga||(ga={})),function(e){e.Candles="candles",e.OHLCBars="ohlcbars"}(ma||(ma={})),function(e){e.OpenClose="open-close",e.CloseClose="close-close"}(fa||(fa={}));const va={up:"green",down:"red",flat:"gray"},ba={mode:ga.CandlesVolume,candleStyle:ma.Candles,colorStrategy:fa.OpenClose,colors:va,fields:{},legend:{displayMode:$t.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},xa={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function ya(e,t,n){const a=(0,Wt.PI)(e,n[t.key]);if(!a)for(const n of e.fields){const a=(0,q.getFieldDisplayName)(n,e).toLowerCase();if(t.defaults.includes(a)||t.defaults.includes(n.name))return n}return a}function wa(e,t,n,a){var s;if(null==e||!e.length)return null;const i=null!==(s=t.fields)&&void 0!==s?s:{},r=1===e.length?(0,Ut.Y3)(e[0],e[0].fields.findIndex((e=>e.type===q.FieldType.time))):(0,q.outerJoinDataFrames)({frames:e});if(null==r||!r.length)return null;const o={aligned:r,frame:r,names:{}},l=ha([r],n,a);if(!l)return null;const d=o.frame=l[0],c=d.fields.findIndex((e=>e.type===q.FieldType.time));if(c<0)return null;const u=new Set;for(const e of Object.values(xa)){const t=ya(d,e,i);t&&(o[e.key]=t,u.add(t))}if(o.open||o.close||(o.open=d.fields.find((e=>e.type===q.FieldType.number)),o.open&&u.add(o.open)),o.open&&!o.close&&!i.close){const e=o.open.values.toArray().slice(1);e.push(e[e.length-1]),o.close=Object.assign({},o.open,{values:new q.ArrayVector(e),name:"Next open",state:void 0}),u.add(o.close),d.fields.push(o.close),o.autoOpenClose=!0}if(o.close&&!o.open&&!i.open){const e=o.close.values.toArray().slice();e.unshift(e[0]),e.length=d.length,o.open=Object.assign({},o.close,{values:new q.ArrayVector(e),name:"Previous close",state:void 0}),u.add(o.open),d.fields.push(o.open),o.autoOpenClose=!0}o.high||i.high||(o.high=o.open),o.low||i.low||(o.low=o.open),t.mode===ga.Volume?(o.high&&(o.high!==o.open&&u.delete(o.high),o.high=void 0),o.low&&(o.low!==o.open&&u.delete(o.low),o.low=void 0)):t.mode===ga.Candles&&o.volume&&(u.delete(o.volume),o.volume=void 0);for(const e of Object.values(xa)){const t=o[e.key];t&&(o.names[e.key]=(0,q.getFieldDisplayName)(t,o.frame))}const h=d.fields[c],p=[h];t.includeAllFields?p.push(...d.fields.filter((e=>e!==h))):p.push(...u),o.frame=Object.assign({},o.frame,{fields:p});for(let e=0;e<o.frame.fields.length;e++){const t=o.frame.fields[e];t.state=Object.assign({},t.state,{seriesIndex:e-1,origin:{fieldIndex:e,frameIndex:0}})}return o}const{alpha:ja}=q.colorManipulator;const Sa=[{label:"Candles",value:ga.Candles},{label:"Volume",value:ga.Volume},{label:"Both",value:ga.CandlesVolume}],Ca=[{label:"Candles",value:ma.Candles},{label:"OHLC Bars",value:ma.OHLCBars}],ka=[{label:"Since Open",value:fa.OpenClose},{label:"Since Prior Close",value:fa.CloseClose}],Ta=e=>e.type===q.FieldType.number;function Ia(e,t,n){let a="Auto ";if(n){const e=n[t.key];null!=e&&e.config?(a+="= "+(0,q.getFieldDisplayName)(e),e===(null==n?void 0:n.open)&&"open"!==t.key&&(a+=` (${t.defaults.join(",")})`)):a+=`(${t.defaults.join(",")})`}e.addFieldNamePicker({path:`fields.${t.key}`,name:t.name,description:t.description,settings:{filter:Ta,placeholderText:a}})}const Oa=new q.PanelPlugin((e=>{let{data:t,id:n,timeRange:a,timeZone:s,width:i,height:r,options:o,fieldConfig:l,onChangeTimeRange:d,replaceVariables:c}=e;const{sync:u,canAddAnnotations:h,onThresholdsChange:p,canEditThresholds:g,onSplitOpen:m}=(0,G.usePanelContext)(),f=(e,t)=>(0,fn.a)({field:e,rowIndex:t,splitOpenFn:m,range:a}),v=(0,G.useTheme2)(),b=(0,$.useMemo)((()=>wa(null==t?void 0:t.series,o,v,a)),[t,o,v,a]),{renderers:x,tweakScale:y,tweakAxis:w}=(0,$.useMemo)((()=>{let e=(e,t)=>e,t=(e,t)=>e,n={renderers:[],tweakScale:e,tweakAxis:t};if(!b)return n;const a=b.names;if(!Object.keys(a).length)return n;const{mode:s,candleStyle:i,colorStrategy:r}=o,l=Object.assign({},va,o.colors);let{open:d,high:c,low:u,close:h,volume:p}=a;if(null==d||null==h)return n;let g=.5,m=-1,f=!1;if(null!=p&&s!==ga.Candles){let n=b.volume;if(null!=n){f=!0;let{fillOpacity:a}=n.config.custom;a&&(g=a/100),s!==ga.Volume&&(n.config=Object.assign({},n.config),n.config.unit="short",n.display=(0,q.getDisplayProcessor)({field:n,theme:K.vc.theme2}),t=(e,t)=>{var n;if(t.name===(null===(n=b.volume)||void 0===n?void 0:n.name)){let t=(e,t)=>{let n=[],a=e.series[m].max;for(let e=0;e<t.length&&(n.push(t[e]),!(t[e]>a));e++);return n};e.space=20,e.filter=t,e.ticks=Object.assign({},e.ticks,{filter:t})}return e},e=(e,t)=>{var n;return t.name===(null===(n=b.volume)||void 0===n?void 0:n.name)&&(e.range=(e,t,n)=>[0,7*n]),e})}}let v=s!==ga.Volume&&null!=c&&null!=u;if(!v&&!f)return n;let x={},y=[];if(v){x={open:d,high:c,low:u,close:h};for(let e in x){let t=b[e];t.config=Object.assign({},t.config,{custom:Object.assign({},t.config.custom,{hideFrom:{legend:!0,tooltip:!1,viz:!1}})})}}else y.push(d,h);return f&&(x.volume=p,x.open=d,x.close=h),{renderers:[{fieldMap:x,indicesOnly:y,init:(e,t)=>{m=t.volume,e.addHook("drawAxes",function(e){let{mode:t,candleStyle:n,fields:a,colorStrategy:s,upColor:i,downColor:r,flatColor:o,volumeAlpha:l,flatAsUp:d=!0}=e;const c=t!==ga.Volume&&null!=a.high&&null!=a.low,u=c&&n===ma.Candles,h=t!==ga.Candles&&null!=a.volume;function p(e,t,n,a,s){return e>0?n:e<0?a:s?n:t}let g=a.open,m=a.high,f=a.low,v=a.close,b=a.volume;return e=>{let t,n,a,x,y,w;c&&(a=new Path2D,n=new Path2D,t=new Path2D),h&&(x=new Path2D,y=new Path2D,w=new Path2D);let j=new Path2D,S=e.ctx,C=e.data[0],k=e.data[g],T=e.data[v],I=c?e.data[m]:null,O=c?e.data[f]:null,N=h?e.data[b]:null,F=null!=b?Math.round(e.valToPos(0,e.series[b].scale,!0)):null,[D,P]=e.series[0].idxs,A=e.data[0],M=k,R=e.bbox.width;if(A.length>1){let t=null;for(let n=0,a=1/0;n<A.length;n++)if(void 0!==M[n]){if(null!=t){let s=Math.abs(A[n]-A[t]);s<a&&(a=s,R=Math.abs(e.valToPos(A[n],"x")-e.valToPos(A[t],"x")))}t=n}}let $=Math.round(.6*R),L=2,E=2;$<=12&&(L=E=1);let V=Math.floor($/2);for(let i=D;i<=P;i++){let r=Math.round(e.valToPos(C[i],"x",!0)),o=i===D?0:Math.sign(T[i]-T[i-1]),l=Math.sign(T[i]-k[i]);if(h){let t=p(s===fa.CloseClose?o:l,w,y,x,(i!==D||!fa.CloseClose)&&d),n=Math.round(e.valToPos(N[i],e.series[b].scale,!0));t.rect(r-V,n,$,F-n)}if(c){let c=p(s===fa.CloseClose?o:l,a,n,t,(i!==D||!fa.CloseClose)&&d),h=Math.round(e.valToPos(I[i],e.series[m].scale,!0)),b=Math.round(e.valToPos(O[i],e.series[f].scale,!0));c.rect(r-Math.floor(L/2),h,L,b-h);let x=Math.round(e.valToPos(k[i],e.series[g].scale,!0)),y=Math.round(e.valToPos(T[i],e.series[v].scale,!0));if(u){let e=Math.min(x,y),t=Math.max(x,y),n=Math.max(1,t-e);c.rect(r-V,e,$,n),s===fa.CloseClose&&l>=0&&n>2*E&&j.rect(r-V+E,e+E,$-2*E,n-2*E)}else c.rect(r-V,x,V,L),c.rect(r,y,V,L)}}S.save(),S.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),S.clip(),h&&(S.fillStyle=ja(i,l),S.fill(y),S.fillStyle=ja(r,l),S.fill(x),S.fillStyle=ja(o,l),S.fill(w)),c&&(S.fillStyle=i,S.fill(n),S.fillStyle=r,S.fill(t),S.fillStyle=o,S.fill(a),S.globalCompositeOperation="destination-out",S.fill(j)),S.restore()}}({mode:s,fields:t,upColor:K.vc.theme2.visualization.getColorByName(l.up),downColor:K.vc.theme2.visualization.getColorByName(l.down),flatColor:K.vc.theme2.visualization.getColorByName(l.flat),volumeAlpha:g,colorStrategy:r,candleStyle:i,flatAsUp:!0}))}}],tweakScale:e,tweakAxis:t}}),[o,t.structureRev]);if(!b)return(0,ve.jsx)(Z.PanelDataErrorView,{panelId:n,fieldConfig:l,data:t,needsTimeField:!0,needsNumberField:!0});const j=Boolean(h&&h());return(0,ve.jsx)(G.TimeSeries,{frames:[b.frame],structureRev:t.structureRev,timeRange:a,timeZone:s,width:i,height:r,legend:o.legend,renderers:x,tweakAxis:w,tweakScale:y,options:o,children:(e,n)=>(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.ZoomPlugin,{config:e,onZoom:d}),(0,ve.jsx)(G.TooltipPlugin,{data:n,config:e,mode:$t.f3.Multi,sync:u,timeZone:s}),t.annotations&&(0,ve.jsx)(Bn,{annotations:t.annotations,config:e,timeZone:s}),j?(0,ve.jsx)(Dn,{data:n,timeZone:s,config:e,children:t=>{let{startAnnotating:a}=t;return(0,ve.jsx)(qn,{data:n,config:e,timeZone:s,replaceVariables:c,defaultItems:j?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(e,t)=>{t&&a({coords:t.coords})}}]}]:[]})}}):(0,ve.jsx)(qn,{data:n,config:e,timeZone:s,replaceVariables:c,defaultItems:[]}),t.annotations&&(0,ve.jsx)(na,{config:e,exemplars:t.annotations,timeZone:s,getFieldLinks:f}),g&&p&&(0,ve.jsx)(da,{config:e,fieldConfig:l,onThresholdsChange:p}),(0,ve.jsx)(sa,{config:e,onChangeTimeRange:d})]})})})).useFieldConfig((0,mn.F)(mn.r)).setPanelOptions(((e,t)=>{var n;const a=null!==(n=t.options)&&void 0!==n?n:ba,s=wa(t.data,a,Z.config.theme2);e.addRadio({path:"mode",name:"Mode",description:"",defaultValue:ba.mode,settings:{options:Sa}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:ba.candleStyle,settings:{options:Ca},showIf:e=>e.mode!==ga.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:ba.colorStrategy,settings:{options:ka}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:va.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:va.down}),Ia(e,xa.open,s),a.mode!==ga.Volume&&(Ia(e,xa.high,s),Ia(e,xa.low,s)),Ia(e,xa.close,s),a.mode!==ga.Candles&&Ia(e,xa.volume,s),e.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:ba.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),G.commonOptionsBuilder.addLegendOptions(e)})).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new class{getSuggestionsForData(e){var t;const{dataSummary:n}=e;if(null===(t=e.data)||void 0===t||!t.series||!n.hasData||n.timeFieldCount<1||n.numberFieldCount<2||n.numberFieldCount>10)return;const a=wa(e.data.series,ba,Z.config.theme2);if(!a)return;if(a.open===a.high&&a.open===a.low)return;e.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:dn.y.Candlestick,options:ba,fieldConfig:{defaults:{},overrides:[]},score:a.autoOpenClose?q.VisualizationSuggestionScore.Good:q.VisualizationSuggestionScore.Best})}});var Na=n(19873),Fa=n(56501),Da=n(18084);Object.freeze([0,0]);let Pa;!function(e){e.List="list",e.Previews="previews"}(Pa||(Pa={}));const Aa={layout:Pa.List,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Ma=e=>({dashlistSectionHeader:T.css`
    margin-bottom: ${e.spacing(2)};
    color: ${e.colors.secondary.text};
  `,dashlistSection:T.css`
    margin-bottom: ${e.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:T.css`
    ${G.styleMixins.listItem(e)}
    display: flex;
    cursor: pointer;
    margin: 3px;
    padding: 7px;
  `,dashlistStar:T.css`
    align-self: center;
    margin-right: 0px;
    color: ${e.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:T.css`
    color: ${e.colors.secondary.text};
    font-size: ${e.typography.bodySmall.fontSize};
    line-height: ${e.typography.body.lineHeight};
  `,dashlistTitle:T.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:T.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:T.css`
    position: relative;
    list-style: none;
  `,gridContainer:T.css`
    display: grid;
    gap: ${e.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${e.spacing(1)};
  `}),Ra=["enabled","disabled","checked","onClick","className","aria-label"];function $a(e){let{enabled:t,disabled:n,checked:a,onClick:s,className:i,"aria-label":r}=e,o=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Ra);const l=(0,$.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),null==s||s(e)}),[s]),d=a?t:n,c=Object.assign({},o,d),u=(0,G.useStyles2)(La);return(0,ve.jsxs)("label",{className:u.wrapper,children:[(0,ve.jsx)("input",{type:"checkbox",defaultChecked:a,onClick:l,className:u.checkBox,"aria-label":r}),(0,ve.jsx)(Na.J,Object.assign({className:(0,T.cx)(u.icon,i)},c))]})}const La=(0,G.stylesFactory)((e=>({wrapper:(0,T.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,T.css)({appearance:"none","&:focus-visible + *":Object.assign({},(0,Pn.getFocusStyles)(e),{borderRadius:e.shape.borderRadius(1)})}),icon:(0,T.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})}))),Ea=new q.PanelPlugin((function(e){const[t,n]=(0,$.useState)(new Map),a=(0,E.useDispatch)();(0,$.useEffect)((()=>{(async function(e,t){let n=Promise.resolve([]);if(e.showStarred){const t={limit:e.maxItems,starred:"true"};n=(0,J.i)().search(t)}let a=Promise.resolve([]),s=[];e.showRecentlyViewed&&(s=(0,F.take)(Y.Z.getDashboardOpened(),e.maxItems),a=(0,J.i)().search({dashboardIds:s,limit:e.maxItems}));let i=Promise.resolve([]);if(e.showSearch){const n={limit:e.maxItems,query:t(e.query,{},"text"),folderIds:e.folderId,tag:e.tags.map((e=>t(e,{},"text"))),type:"dash-db"};i=(0,J.i)().search(n)}const[r,o,l]=await Promise.all([n,i,a]);let d=new Map;for(const e of s){const t=l.find((t=>t.id===e));t&&d.set(e,Object.assign({},t,{isRecent:!0}))}return o.forEach((e=>{d.has(e.id)?d.get(e.id).isSearchResult=!0:d.set(e.id,Object.assign({},e,{isSearchResult:!0}))})),r.forEach((e=>{d.has(e.id)?d.get(e.id).isStarred=!0:d.set(e.id,Object.assign({},e,{isStarred:!0}))})),d})(e.options,e.replaceVariables).then((e=>{n(e)}))}),[e.options,e.replaceVariables,e.renderCounter]);const s=async(e,s)=>{const{uid:i,title:r,url:o}=s;e.preventDefault(),e.stopPropagation();const l=await(0,Re.h4)().starDashboard(s.id.toString(),s.isStarred),d=new Map(t);d.set(s.id,Object.assign({},s,{isStarred:l})),n(d),a((0,Fa.OQ)({id:null!=i?i:"",title:r,url:o,isStarred:l}))},[i,r,o]=(0,$.useMemo)((()=>{const e=[...t.values()];return[e.filter((e=>e.isStarred)).sort(((e,t)=>e.title.localeCompare(t.title))),e.filter((e=>e.isRecent)),e.filter((e=>e.isSearchResult)).sort(((e,t)=>e.title.localeCompare(t.title)))]}),[t]),{showStarred:l,showRecentlyViewed:d,showHeadings:c,showSearch:u,layout:h}=e.options,p=[{header:"Starred dashboards",dashboards:i,show:l},{header:"Recently viewed dashboards",dashboards:r,show:d},{header:"Search",dashboards:o,show:u}],g=(0,G.useStyles2)(Ma),m=e=>(0,ve.jsx)("ul",{children:e.map((e=>(0,ve.jsx)("li",{className:g.dashlistItem,children:(0,ve.jsxs)("div",{className:g.dashlistLink,children:[(0,ve.jsxs)("div",{className:g.dashlistLinkBody,children:[(0,ve.jsx)("a",{className:g.dashlistTitle,href:e.url,children:e.title}),e.folderTitle&&(0,ve.jsx)("div",{className:g.dashlistFolder,children:e.folderTitle})]}),(0,ve.jsx)($a,{"aria-label":`Star dashboard "${e.title}".`,className:g.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:e.isStarred,onClick:t=>s(t,e)})]})},`dash-${e.id}`)))}),f=e=>(0,ve.jsx)("ul",{className:g.gridContainer,children:e.map((e=>(0,ve.jsx)("li",{children:(0,ve.jsx)(Da.K,{item:e})},e.uid)))});return(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:p.map(((e,t)=>{let{show:n,header:a,dashboards:s}=e;return n&&(0,ve.jsxs)("div",{className:g.dashlistSection,children:[c&&(0,ve.jsx)("h6",{className:g.dashlistSectionHeader,children:a}),h===Pa.Previews?f(s):m(s)]},`dash-group-${t}`)}))})})).setPanelOptions((e=>{Z.config.featureToggles.dashboardPreviews&&e.addRadio({path:"layout",name:"Layout",defaultValue:Pa.List,settings:{options:[{value:Pa.List,label:"List"},{value:Pa.Previews,label:"Preview"}]}}),e.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Aa.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Aa.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Aa.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Aa.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Aa.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Aa.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function(e){let{value:t,onChange:n}=e;return(0,ve.jsx)(Pe,{initialFolderId:t,onChange:e=>n(null==e?void 0:e.id),extraFolders:[Fe,De]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Aa.tags,editor:e=>(0,ve.jsx)(G.TagsInput,{tags:e.value,onChange:e.onChange})})})).setMigrationHandler((e=>{var t,n,a,s,i,r,o,l;const d={showStarred:null!==(t=e.options.showStarred)&&void 0!==t?t:e.starred,showRecentlyViewed:null!==(n=e.options.showRecentlyViewed)&&void 0!==n?n:e.recent,showSearch:null!==(a=e.options.showSearch)&&void 0!==a?a:e.search,showHeadings:null!==(s=e.options.showHeadings)&&void 0!==s?s:e.headings,maxItems:null!==(i=e.options.maxItems)&&void 0!==i?i:e.limit,query:null!==(r=e.options.query)&&void 0!==r?r:e.query,folderId:null!==(o=e.options.folderId)&&void 0!==o?o:e.folderId,tags:null!==(l=e.options.tags)&&void 0!==l?l:e.tags};if(parseFloat(e.pluginVersion||"6.1")<6.3){["starred","recent","search","headings","limit","query","folderId"].forEach((t=>delete e[t]))}return d}));var Va;function Ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class za extends $.Component{constructor(){super(...arguments),Ba(this,"subscription",new gt.w0),Ba(this,"state",{})}componentDidMount(){const{eventBus:e}=this.props;this.subscription.add(e.subscribe(q.DataHoverEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(q.DataHoverClearEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(q.LegacyGraphHoverEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(q.LegacyGraphHoverClearEvent,(e=>{this.setState({event:e})})))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:e}=this.state;if(!e)return Va||(Va=(0,ve.jsx)("div",{children:"no events yet"}));const{type:t,payload:n,origin:a}=e;return(0,ve.jsxs)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:[(0,ve.jsxs)("h3",{children:["Origin: ",null==a?void 0:a.path]}),(0,ve.jsxs)("span",{children:["Type: ",t]}),Boolean(n)&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("pre",{children:JSON.stringify(n.point,null,"  ")}),n.data&&(0,ve.jsx)(Bt.H,{data:n.data,rowIndex:n.rowIndex,columnIndex:n.columnIndex})]})]})}}function _a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Ua=100;class Ha extends $.PureComponent{constructor(e){super(e),_a(this,"history",new q.CircularVector({capacity:40,append:"head"})),_a(this,"subs",void 0),_a(this,"eventObserver",{next:e=>{const t=e.origin;this.history.add({key:Ua++,type:e.type,path:null==t?void 0:t.path,payload:e.payload}),this.setState({counter:Ua})}}),this.state={counter:Ua};const t=[];t.push(e.eventBus.getStream(q.DataHoverEvent).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(q.DataHoverClearEvent).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(q.DataSelectEvent).subscribe(this.eventObserver)),this.subs=t}componentWillUnmount(){for(const e of this.subs)e.unsubscribe()}render(){return(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.history.map(((e,t)=>(0,ve.jsxs)("div",{children:[JSON.stringify(e.path)," ",e.type," / X:",JSON.stringify(e.payload.x)," / Y:",JSON.stringify(e.payload.y)]},e.key)))})}}var Wa;function qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Za extends $.Component{constructor(){super(...arguments),qa(this,"lastRender",Date.now()),qa(this,"counters",{render:0,dataChanged:0,schemaChanged:0}),qa(this,"resetCounters",(()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}))}shouldComponentUpdate(e){const{data:t,options:n}=this.props;var a;if(e.data!==t&&(this.counters.dataChanged++,null!==(a=n.counters)&&void 0!==a&&a.schemaChanged)){var s;const n=null===(s=e.data)||void 0===s?void 0:s.series,a=t.series;if(a&&n){(0,q.compareArrayValues)(a,n,q.compareDataFrameStructures)||this.counters.schemaChanged++}}return!0}render(){var e;const{data:t,options:n}=this.props,a=null!==(e=n.counters)&&void 0!==e?e:{};this.counters.render++;const s=Date.now(),i=s-this.lastRender;this.lastRender=s;const r=q.fieldReducers.get(q.ReducerID.lastNotNull);return(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("div",{children:[(0,ve.jsx)(G.IconButton,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),(0,ve.jsxs)("span",{children:[a.render&&(0,ve.jsxs)("span",{children:["Render: ",this.counters.render,"Â "]}),a.dataChanged&&(0,ve.jsxs)("span",{children:["Data: ",this.counters.dataChanged,"Â "]}),a.schemaChanged&&(0,ve.jsxs)("span",{children:["Schema: ",this.counters.schemaChanged,"Â "]}),(0,ve.jsxs)("span",{children:["TIME: ",i,"ms"]})]})]}),t.series&&t.series.map(((e,n)=>(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("h4",{children:[(0,q.getFrameDisplayName)(e,n)," (",e.length,")"]}),(0,ve.jsxs)("table",{className:"filter-table",children:[Wa||(Wa=(0,ve.jsx)("thead",{children:(0,ve.jsxs)("tr",{children:[(0,ve.jsx)("td",{children:"Field"}),(0,ve.jsx)("td",{children:"Type"}),(0,ve.jsx)("td",{children:"Last"})]})})),(0,ve.jsx)("tbody",{children:e.fields.map(((n,a)=>{const s=r.reduce(n,!1,!1)[r.id];return(0,ve.jsxs)("tr",{children:[(0,ve.jsx)("td",{children:(0,q.getFieldDisplayName)(n,e,t.series)}),(0,ve.jsx)("td",{children:n.type}),(0,ve.jsx)("td",{children:`${s}`})]},`${a}/${n.name}`)}))})]})]},`${n}/${e.refId}`)))]})}}function Ga(e){var t,n;const a=(0,G.usePanelContext)();return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(G.Field,{label:"State name",children:(0,ve.jsx)(G.Input,{value:null!==(t=null===(n=a.instanceState)||void 0===n?void 0:n.name)&&void 0!==t?t:"",onChange:e=>{a.onInstanceStateChange({name:e.currentTarget.value})}})})})}function Ka(e){var t;let{value:n,context:a,onChange:s,item:i}=e;return(0,ve.jsxs)("div",{children:["Current value: ",null===(t=a.instanceState)||void 0===t?void 0:t.name," "]})}let Qa;!function(e){e.Render="render",e.Events="events",e.Cursor="cursor",e.State="State",e.ThrowError="ThrowError"}(Qa||(Qa={}));class Ja extends $.Component{render(){const{options:e}=this.props;switch(e.mode){case Qa.Events:return(0,ve.jsx)(Ha,{eventBus:this.props.eventBus});case Qa.Cursor:return(0,ve.jsx)(za,{eventBus:this.props.eventBus});case Qa.State:return(0,ve.jsx)(Ga,Object.assign({},this.props));case Qa.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return(0,ve.jsx)(Za,Object.assign({},this.props))}}}const Ya=new q.PanelPlugin(Ja).useFieldConfig().setPanelOptions((e=>{e.addSelect({path:"mode",name:"Mode",defaultValue:Qa.Render,settings:{options:[{label:"Render",value:Qa.Render},{label:"Events",value:Qa.Events},{label:"Cursor",value:Qa.Cursor},{label:"Cursor",value:Qa.Cursor},{label:"Share state",value:Qa.State},{label:"Throw error",value:Qa.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:e=>{let{mode:t}=e;return t===Qa.State},editor:Ka}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Qa.Render}}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Qa.Render}}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Qa.Render}}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})}));var Xa=n(95547);const es=(0,G.stylesFactory)(((e,t)=>{const n="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",a=t?n:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",s=t?n:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",i=e.isDark?a:s;return`\n      background-color: ${e.colors.bg2};\n      margin-right: ${e.spacing.xl};\n      border: 1px solid ${e.colors.border1};\n      border-bottom-left-radius: ${e.border.radius.md};\n      border-bottom-right-radius: ${e.border.radius.md};\n      position: relative;\n      max-height: 230px;\n\n      @media only screen and (max-width: ${e.breakpoints.xxl}) {\n        margin-right: ${e.spacing.md};\n      }\n      &::before {\n        display: block;\n        content: ' ';\n        position: absolute;\n        left: 0;\n        right: 0;\n        height: 2px;\n        top: 0;\n        background-image: ${i};\n      }\n`})),ts=(0,G.stylesFactory)(((e,t)=>T.css`
    color: ${t?e.palette.blue95:e.colors.textWeak};

    @media only screen and (max-width: ${e.breakpoints.sm}) {
      display: none;
    }
  `)),ns=T.css`
  padding: 16px;
`;var as;const ss=e=>{let{card:t}=e;const n=(0,G.useTheme)(),a=is(n,t.done);return(0,ve.jsxs)("div",{className:a.card,children:[(0,ve.jsx)("div",{className:ns,children:(0,ve.jsxs)("a",{href:`${t.href}?utm_source=grafana_gettingstarted`,className:a.url,children:[(0,ve.jsx)("div",{className:a.heading,children:t.done?"complete":t.heading}),(0,ve.jsx)("h4",{className:a.title,children:t.title}),(0,ve.jsx)("div",{children:(0,ve.jsx)(G.Icon,{className:ts(n,t.done),name:t.icon,size:"xxl"})})]})}),(0,ve.jsxs)("a",{href:`${t.learnHref}?utm_source=grafana_gettingstarted`,className:a.learnUrl,target:"_blank",rel:"noreferrer",children:["Learn how in the docs ",as||(as=(0,ve.jsx)(G.Icon,{name:"external-link-alt"}))]})]})},is=(0,G.stylesFactory)(((e,t)=>({card:T.css`
      ${es(e,t)}

      min-width: 230px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        min-width: 192px;
      }
    `,heading:T.css`
      text-transform: uppercase;
      color: ${t?e.palette.blue95:"#FFB357"};
      margin-bottom: ${e.spacing.md};
    `,title:T.css`
      margin-bottom: ${e.spacing.md};
    `,url:T.css`
      display: inline-block;
    `,learnUrl:T.css`
      border-top: 1px solid ${e.colors.border1};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `})));var rs=n(17421);const os=e=>{let{card:t}=e;const n=(0,G.useTheme)(),a=ds(n,t.done);return(0,ve.jsx)("a",{className:a.card,onClick:e=>ls(e,t),children:(0,ve.jsxs)("div",{className:ns,children:[(0,ve.jsx)("div",{className:a.type,children:t.type}),(0,ve.jsx)("div",{className:a.heading,children:t.done?"complete":t.heading}),(0,ve.jsx)("h4",{className:a.cardTitle,children:t.title}),(0,ve.jsx)("div",{className:a.info,children:t.info}),(0,ve.jsx)(G.Icon,{className:ts(n,t.done),name:t.icon,size:"xxl"})]})})},ls=(e,t)=>{e.preventDefault();rs.Z.get(t.key)||rs.Z.set(t.key,!0),window.open(`${t.href}?utm_source=grafana_gettingstarted`,"_blank")},ds=(0,G.stylesFactory)(((e,t)=>({card:T.css`
      ${es(e,t)}
      width: 460px;
      min-width: 460px;

      @media only screen and (max-width: ${e.breakpoints.xl}) {
        min-width: 368px;
      }

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        min-width: 272px;
      }
    `,type:T.css`
      color: ${e.colors.textBlue};
      text-transform: uppercase;
    `,heading:T.css`
      text-transform: uppercase;
      color: ${e.colors.textBlue};
      margin-bottom: ${e.spacing.sm};
    `,cardTitle:T.css`
      margin-bottom: ${e.spacing.md};
    `,info:T.css`
      margin-bottom: ${e.spacing.md};
    `,status:T.css`
      display: flex;
      justify-content: flex-end;
    `}))),cs=e=>{let{step:t}=e;const n=(0,G.useTheme)(),a=us(n);return(0,ve.jsxs)("div",{className:a.setup,children:[(0,ve.jsxs)("div",{className:a.info,children:[(0,ve.jsx)("h2",{className:a.title,children:t.title}),(0,ve.jsx)("p",{children:t.info})]}),(0,ve.jsx)("div",{className:a.cards,children:t.cards.map(((e,t)=>{const n=`${e.title}-${t}`;return"tutorial"===e.type?(0,ve.jsx)(os,{card:e},n):(0,ve.jsx)(ss,{card:e},n)}))})]})},us=(0,G.stylesFactory)((e=>({setup:T.css`
      display: flex;
      width: 95%;
    `,info:T.css`
      width: 172px;
      margin-right: 5%;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        margin-right: ${e.spacing.xl};
      }
      @media only screen and (max-width: ${e.breakpoints.sm}) {
        display: none;
      }
    `,title:T.css`
      color: ${e.palette.blue95};
    `,cards:T.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        justify-content: flex-start;
      }
    `})));var hs=n(67436);const ps="Grafana fundamentals",gs="getting.started.",ms=`${gs}${ps.replace(" ","-").trim().toLowerCase()}`,fs=`${gs}${"Create users and teams".replace(" ","-").trim().toLowerCase()}`;var vs,bs,xs;function ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ws extends $.PureComponent{constructor(){super(...arguments),ys(this,"state",{checksDone:!1,currentStep:0,steps:[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:ps,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the âData sourceâ and âDashboardsâ steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(rs.Z.get(ms)),key:ms,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise((e=>{e((0,hs.ak)().getMetricSources().filter((e=>!0!==e.meta.builtIn)).length>0)})),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,J.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard â it is, after all, a fully customizable dashboard â and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:fs,check:()=>Promise.resolve(rs.Z.get(fs)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const e=await(0,J.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(e.length>0)},done:!1}]}]}),ys(this,"onForwardClick",(()=>{this.setState((e=>({currentStep:e.currentStep+1})))})),ys(this,"onPreviousClick",(()=>{this.setState((e=>({currentStep:e.currentStep-1})))})),ys(this,"dismiss",(()=>{const{id:e}=this.props,t=(0,Re.h4)().getCurrent(),n=null==t?void 0:t.getPanelById(e);null==t||t.removePanel(n),J.ae.request({method:"PUT",url:"/api/user/helpflags/1",showSuccessAlert:!1}).then((e=>{Q.Vt.user.helpFlags1=e.helpFlags1}))}))}async componentDidMount(){const{steps:e}=this.state,t=e.map((async e=>{const t=e.cards.map((e=>e.check().then((t=>Object.assign({},e,{done:t}))))),n=await Promise.all(t);return Object.assign({},e,{done:n.every((e=>e.done)),cards:n})})),n=await Promise.all(t);this.setState({currentStep:n[0].done?1:0,steps:n,checksDone:!0})}render(){const{checksDone:e,currentStep:t,steps:n}=this.state,a=js(),s=n[t];return(0,ve.jsx)("div",{className:a.container,children:e?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{className:a.dismiss,children:(0,ve.jsx)("div",{onClick:this.dismiss,children:"Remove this panel"})}),t===n.length-1&&(0,ve.jsx)("div",{className:(0,T.cx)(a.backForwardButtons,a.previous),onClick:this.onPreviousClick,children:bs||(bs=(0,ve.jsx)(G.Button,{"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}))}),(0,ve.jsx)("div",{className:a.content,children:(0,ve.jsx)(cs,{step:s})}),t<n.length-1&&(0,ve.jsx)("div",{className:(0,T.cx)(a.backForwardButtons,a.forward),onClick:this.onForwardClick,children:xs||(xs=(0,ve.jsx)(G.Button,{"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"}))})]}):(0,ve.jsxs)("div",{className:a.loading,children:[(0,ve.jsx)("div",{className:a.loadingText,children:"Checking completed setup steps"}),vs||(vs=(0,ve.jsx)(G.Spinner,{size:24,inline:!0}))]})})}}const js=(0,G.stylesFactory)((()=>{const{theme:e}=Z.config;return{container:T.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${e.type}.svg) no-repeat;
      background-size: cover;
      padding: ${e.spacing.xl} ${e.spacing.md} 0;
    `,content:T.css`
      label: content;
      display: flex;
      justify-content: center;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        margin-left: ${e.spacing.lg};
        justify-content: flex-start;
      }
    `,header:T.css`
      label: header;
      margin-bottom: ${e.spacing.lg};
      display: flex;
      flex-direction: column;

      @media only screen and (min-width: ${e.breakpoints.lg}) {
        flex-direction: row;
      }
    `,headerLogo:T.css`
      height: 58px;
      padding-right: ${e.spacing.md};
      display: none;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        display: block;
      }
    `,heading:T.css`
      label: heading;
      margin-right: ${e.spacing.lg};
      margin-bottom: ${e.spacing.lg};
      flex-grow: 1;
      display: flex;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        margin-bottom: 0;
      }
    `,backForwardButtons:T.css`
      position: absolute;
      bottom: 50%;
      top: 50%;
      height: 50px;
    `,previous:T.css`
      left: 10px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        left: 0;
      }
    `,forward:T.css`
      right: 10px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        right: 0;
      }
    `,dismiss:T.css`
      display: flex;
      justify-content: flex-end;
      cursor: pointer;
      text-decoration: underline;
      margin-right: ${e.spacing.md};
      margin-bottom: ${e.spacing.sm};
    `,loading:T.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:T.css`
      margin-right: ${e.spacing.sm};
    `}})),Ss=new q.PanelPlugin(ws).setNoPadding();var Cs=n(93478);function ks(e){return e.fields[1].values.get(0)-e.fields[0].values.get(0)}const Ts=(e,t)=>{let n=new G.UPlotConfigBuilder,a=ks(e);n.addScale({scaleKey:"x",isTime:!1,distribution:$t.wf.Linear,orientation:$t.wN.Horizontal,direction:$t.bQ.Right,range:(e,t,n)=>{let s=e.data[0][0];var i,r;return n===e.data[0][e.data[0].length-1]?n+=a:(i=n,r=a,n=Math.ceil(i/r)*r),t>s&&(t=function(e,t){return Math.floor(e/t)*t}(t,a)),[t,n]}}),n.addScale({scaleKey:"y",isTime:!1,distribution:$t.wf.Linear,orientation:$t.wN.Vertical,direction:$t.bQ.Up});const s=e.fields[0].display,i=e=>(0,q.formattedValueToString)(s(e));n.addAxis({scaleKey:"x",isTime:!1,placement:$t.LB.Bottom,incrs:Cs.Zi,splits:(e,t,n,s,i,r)=>{let o=e.axes[t]._space,l=e.valToPos(e.data[0][0]+a,"x")-e.valToPos(e.data[0][0],"x"),d=e.data[0][0],c=e.data[0][e.data[0].length-1]+a,u=[],h=Math.ceil(o/l);for(let e=0,t=d;t<=c;e++,t+=a)!(e%h)&&u.push(t);return u},values:(e,t)=>{const n=t.map(i),a=n.reduce(((e,t)=>Math.max((0,G.measureText)(t,G.UPLOT_AXIS_FONT_SIZE).width,e)),0),s=e.bbox.width/((a+10)*devicePixelRatio),r=Math.ceil(n.length/s);return n.map(((e,t)=>t%r==0?e:null))},theme:t});let r=e.fields[2],o=r.display;n.addAxis({scaleKey:"y",isTime:!1,placement:$t.LB.Left,formatValue:(e,t)=>{var n;return(0,q.formattedValueToString)(o(e,null!==(n=r.config.decimals)&&void 0!==n?n:t))},theme:t}),n.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let l=_t.Z.paths.bars({align:1,size:[1,1/0]}),d=0;for(let a=2;a<e.fields.length;a++){var c,u;const s=e.fields[a];s.state=null!==(c=s.state)&&void 0!==c?c:{},s.state.seriesIndex=d++;const i=Object.assign({},s.config.custom),r="y",o=(0,q.getFieldColorModeForField)(s),h=(0,q.getFieldSeriesColor)(s,t).color;n.addSeries({scaleKey:r,lineWidth:i.lineWidth,lineColor:h,fillOpacity:i.fillOpacity,theme:t,colorMode:o,pathBuilder:l,show:!(null!==(u=i.hideFrom)&&void 0!==u&&u.viz),gradientMode:i.gradientMode,thresholds:s.config.thresholds,hardMin:s.config.min,hardMax:s.config.max,softMin:i.axisSoftMin,softMax:i.axisSoftMax,dataFrameFieldIndex:{fieldIndex:1,frameIndex:a-2}})}return n},Is=e=>{let t=[];for(const n of e.fields)n.name!==Cs.cO&&t.push(n.values.toArray());for(let e=1;e<t.length;e++){let n=t[e];for(let e=0;e<n.length;e++)0===n[e]&&(n[e]=null)}return t};class Os extends $.Component{constructor(e){super(e),this.state=this.prepState(e)}prepState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null;const{alignedFrame:a}=e;return a&&(n={alignedData:Is(a)},t&&(n.config=Ts(a,this.props.theme))),n}renderLegend(e){const{legend:t}=this.props;return e&&!1!==t.showLegend&&this.props.rawSeries?(0,ve.jsx)(G.PlotLegend,Object.assign({data:this.props.rawSeries,config:e,maxHeight:"35%",maxWidth:"60%"},t)):null}componentDidUpdate(e){const{structureRev:t,alignedFrame:n,bucketSize:a}=this.props;if(n!==e.alignedFrame){let s=this.prepState(this.props,!1);if(s){(a!==e.bucketSize||this.props.options!==e.options||void 0===this.state.config||t!==e.structureRev||!t)&&(s.config=Ts(n,this.props.theme))}s&&this.setState(s)}}render(){const{width:e,height:t,children:n,alignedFrame:a}=this.props,{config:s}=this.state;return s?(0,ve.jsx)(G.VizLayout,{width:e,height:t,legend:this.renderLegend(s),children:(e,t)=>(0,ve.jsx)(G.UPlotChart,{config:this.state.config,data:this.state.alignedData,width:e,height:t,timeRange:null,children:n?n(s,a):null})}):null}}var Ns;Object.freeze([1,0]);const Fs={bucketOffset:0,legend:{displayMode:$t.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:$t.f3.Multi,sort:$t.As.None}},Ds={lineWidth:1,fillOpacity:80};function Ps(e){if(1!==(null==e?void 0:e.length))return!1;const t=e[0];if(t.fields.length<3)return!1;if(t.fields[0].name!==Cs.wL||t.fields[1].name!==Cs.cO)return!1;for(const e of t.fields)if(e.type!==q.FieldType.number)return!1;return!0}const As=new q.PanelPlugin((e=>{let{data:t,options:n,width:a,height:s}=e;const i=(0,G.useTheme2)(),r=(0,$.useMemo)((()=>{var e;if(null==t||null===(e=t.series)||void 0===e||!e.length)return;if(1===t.series.length){const e=(0,q.getHistogramFields)(t.series[0]);if(e)return(0,Cs.zM)(e)}const a=(0,q.buildHistogram)(t.series,n);return a?(0,Cs.zM)(a,i):void 0}),[t.series,n,i]);if(!r||!r.fields.length)return Ns||(Ns=(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsx)("p",{children:"No histogram found in response"})}));const o=ks(r);return(0,ve.jsx)(Os,{options:n,theme:i,legend:n.legend,rawSeries:t.series,structureRev:t.structureRev,width:a,height:s,alignedFrame:r,bucketSize:o,children:(e,t)=>null})})).setPanelOptions((e=>{e.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(e,t)=>Ps(t)}).addNumberInput({path:"bucketSize",name:Cs.py.bucketSize.name,description:Cs.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Fs.bucketSize,showIf:(e,t)=>!Ps(t)}).addNumberInput({path:"bucketOffset",name:Cs.py.bucketOffset.name,description:Cs.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:Fs.bucketOffset,showIf:(e,t)=>!Ps(t)}).addBooleanSwitch({path:"combine",name:Cs.py.combine.name,description:Cs.py.combine.description,defaultValue:Fs.combine,showIf:(e,t)=>!Ps(t)}),G.commonOptionsBuilder.addLegendOptions(e)})).useFieldConfig({standardOptions:{[q.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:q.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{const t=Ds;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:G.graphFieldOptions.fillGradient[0].value,settings:{options:G.graphFieldOptions.fillGradient}}),G.commonOptionsBuilder.addHideFrom(e)}});var Ms,Rs,$s,Ls;function Es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Vs=[{label:"Grafana",value:q.LiveChannelScope.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:q.LiveChannelScope.DataSource,description:"Data sources with live support"},{label:"Plugins",value:q.LiveChannelScope.Plugin,description:"Plugins with live support"}];class Bs extends $.PureComponent{constructor(){super(...arguments),Es(this,"state",{namespaces:[],paths:[]}),Es(this,"onScopeChanged",(e=>{e.value&&this.props.onChange({scope:e.value,namespace:void 0,path:void 0})})),Es(this,"onNamespaceChanged",(e=>{var t;const n={scope:null===(t=this.props.value)||void 0===t?void 0:t.scope,path:void 0};e.value&&(n.namespace=e.value),this.props.onChange(n)})),Es(this,"onPathChanged",(e=>{const{value:t,onChange:n}=this.props,a={scope:t.scope,namespace:t.namespace};e.value&&(a.path=e.value),n(a)}))}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(e){this.props.value!==e.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){var e;const{namespaces:t,paths:n}=this.state,{scope:a,namespace:s,path:i}=this.props.value,r=_s(K.vc.theme);return(0,ve.jsxs)(ve.Fragment,{children:[Ms||(Ms=(0,ve.jsx)(G.Alert,{title:"Grafana Live",severity:"info",children:"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."})),(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("div",{className:r.dropWrap,children:[Rs||(Rs=(0,ve.jsx)(G.Label,{children:"Scope"})),(0,ve.jsx)(G.Select,{options:Vs,value:Vs.find((e=>e.value===a)),onChange:this.onScopeChanged})]}),a&&(0,ve.jsxs)("div",{className:r.dropWrap,children:[$s||($s=(0,ve.jsx)(G.Label,{children:"Namespace"})),(0,ve.jsx)(G.Select,{options:t,value:null!==(e=t.find((e=>e.value===s)))&&void 0!==e?e:s?{label:s,value:s}:void 0,onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]}),a&&s&&(0,ve.jsxs)("div",{className:r.dropWrap,children:[Ls||(Ls=(0,ve.jsx)(G.Label,{children:"Path"})),(0,ve.jsx)(G.Select,{options:n,value:zs(n,i),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]})]})]})}}function zs(e,t){const n=e.find((e=>e.value===t));return n||(t?{label:t,value:t}:void 0)}const _s=(0,G.stylesFactory)((e=>({dropWrap:T.css`
    margin-bottom: ${e.spacing.sm};
  `})));var Us=n(19323),Hs=n(28380),Ws=n(56340);function qs(e,t){var n;const a=null!==(n=e.display)&&void 0!==n?n:(0,q.getDisplayProcessor)({field:e,theme:K.vc.theme2}),s=t[0],i=(0,q.reduceField)({field:e,reducers:t})[s];return(0,q.formattedValueToString)(a(i))}function Zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Gs extends $.Component{constructor(e){super(e),Zs(this,"onColumnResize",((e,t)=>{const{fieldConfig:n}=this.props,{overrides:a}=n,s=q.FieldMatcherID.byName,i="custom.width",r=a.find((t=>t.matcher.id===s&&t.matcher.options===e));if(r){const e=r.properties.find((e=>e.id===i));e?e.value=t:r.properties.push({id:i,value:t})}else a.push({matcher:{id:s,options:e},properties:[{id:i,value:t}]});this.props.onFieldConfigChange(Object.assign({},n,{overrides:a}))})),Zs(this,"onSortByChange",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{sortBy:e}))})),Zs(this,"onChangeTableSelection",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{frameIndex:e.value||0})),this.forceUpdate()})),Zs(this,"onCellFilterAdded",(e=>{var t;const{key:n,value:a,operator:s}=e,i=null===(t=(0,Re.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(this.props.id);if(!i)return;const r=(0,hs.ak)().getInstanceSettings(i.datasource),o=r&&(0,q.getDataSourceRef)(r);o&&(0,Ws.WI)((0,Hs.m2)({datasource:o,key:n,operator:s,value:a}))}))}renderTable(e,t,n){var a,s;const{options:i}=this.props,r=null!==(a=i.footer)&&void 0!==a&&a.show?function(e,t){return e.fields.map(((e,n)=>e.type===q.FieldType.number?null!=t&&t.fields&&t.fields.length>0?t.fields.find((t=>t===e.name))?qs(e,t.reducer):void 0:qs(e,(null==t?void 0:t.reducer)||[]):0===n&&t&&t.reducer.length>0?q.fieldReducers.get(t.reducer[0]).name:void 0))}(e,i.footer):void 0;return(0,ve.jsx)(G.Table,{height:n,width:t,data:e,noHeader:!i.showHeader,showTypeIcons:i.showTypeIcons,resizable:!0,initialSortBy:i.sortBy,onSortByChange:this.onSortByChange,onColumnResize:this.onColumnResize,onCellFilterAdded:this.onCellFilterAdded,footerValues:r,enablePagination:null===(s=i.footer)||void 0===s?void 0:s.enablePagination})}getCurrentFrameIndex(e,t){return t.frameIndex>0&&t.frameIndex<e.length?t.frameIndex:0}render(){var e;const{data:t,height:n,width:a,options:s,fieldConfig:i,id:r}=this.props,o=t.series,l=null==o?void 0:o.length,d=null===(e=o[0])||void 0===e?void 0:e.fields.length;if(!l||!d)return(0,ve.jsx)(Z.PanelDataErrorView,{panelId:r,fieldConfig:i,data:t});if(l>1){const e=K.vc.theme.spacing.formInputHeight,i=16,r=this.getCurrentFrameIndex(o,s),l=o.map(((e,t)=>({label:(0,q.getFrameDisplayName)(e),value:t})));return(0,ve.jsxs)("div",{className:Ks.wrapper,children:[this.renderTable(t.series[r],a,n-e-i),(0,ve.jsx)("div",{className:Ks.selectWrapper,children:(0,ve.jsx)(G.Select,{options:l,value:l[r],onChange:this.onChangeTableSelection})})]})}return this.renderTable(t.series[0],a,n)}}const Ks={wrapper:T.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:T.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:T.css`
    padding: 8px;
  `};let Qs;var Js,Ys,Xs,ei,ti;function ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Raw="raw",e.JSON="json",e.Auto="auto",e.None="none"}(Qs||(Qs={}));class ai extends $.PureComponent{constructor(e){super(e),ni(this,"isValid",void 0),ni(this,"subscription",void 0),ni(this,"styles",si(Z.config.theme)),ni(this,"streamObserver",{next:e=>{(0,q.isLiveChannelStatusEvent)(e)?this.setState({status:e,changed:Date.now()}):(0,q.isLiveChannelMessageEvent)(e)?this.setState({message:e.message,changed:Date.now()}):console.log("ignore",e)}}),ni(this,"unsubscribe",(()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)})),ni(this,"onSaveJSON",(e=>{const{options:t,onOptionsChange:n}=this.props;try{const a=JSON.parse(e);n(Object.assign({},t,{json:a}))}catch(e){console.log("Error reading JSON",e)}})),ni(this,"onPublishClicked",(async()=>{var e;const{addr:t}=this.state;if(!t)return void console.log("invalid address");const n=null===(e=this.props.options)||void 0===e?void 0:e.json;if(!n)return void console.log("nothing to publish");const a=await(0,Z.getGrafanaLiveSrv)().publish(t,n);console.log("onPublishClicked (response from publish)",a)})),this.isValid=!!(0,Z.getGrafanaLiveSrv)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(e){var t,n;(null===(t=this.props.options)||void 0===t?void 0:t.channel)!==(null===(n=e.options)||void 0===n?void 0:n.channel)&&this.loadChannel()}async loadChannel(){var e;const t=null===(e=this.props.options)||void 0===e?void 0:e.channel;if(!(0,q.isValidLiveChannelAddress)(t))return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});if((0,F.isEqual)(t,this.state.addr))return void console.log("Same channel",this.state.addr);const n=(0,Z.getGrafanaLiveSrv)();if(!n)return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});this.unsubscribe(),console.log("LOAD",t);try{this.subscription=n.getStream(t).subscribe(this.streamObserver),this.setState({addr:t,error:void 0})}catch(e){this.setState({addr:void 0,error:e})}}renderNotEnabled(){return(0,ve.jsxs)(G.Alert,{title:"Grafana Live",severity:"info",children:[Js||(Js=(0,ve.jsx)("p",{children:"Grafana live requires a feature flag to run"})),Ys||(Ys=(0,ve.jsx)("b",{children:"custom.ini:"})),(0,ve.jsx)("pre",{children:"[feature_toggles]\n    enable = live"})]})}renderMessage(e){const{options:t}=this.props,{message:n}=this.state;var a,s,i;if(!n)return(0,ve.jsxs)("div",{children:[Xs||(Xs=(0,ve.jsx)("h4",{children:"Waiting for data:"})),null===(a=t.channel)||void 0===a?void 0:a.scope,"/",null===(s=t.channel)||void 0===s?void 0:s.namespace,"/",null===(i=t.channel)||void 0===i?void 0:i.path]});if(t.message===Qs.JSON)return(0,ve.jsx)(G.JSONFormatter,{json:n,open:5});if(t.message===Qs.Auto&&n instanceof Us.Av){const t={series:(0,q.applyFieldOverrides)({data:[n],theme:Z.config.theme2,replaceVariables:e=>e,fieldConfig:{defaults:{},overrides:[]}}),state:q.LoadingState.Streaming},a=Object.assign({},this.props,{options:{frameIndex:0,showHeader:!0}});return(0,ve.jsx)(Gs,Object.assign({},a,{data:t,height:e}))}return(0,ve.jsx)("pre",{children:JSON.stringify(n)})}renderPublish(e){const{options:t}=this.props;return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.CodeEditor,{height:e-32,language:"json",value:t.json?JSON.stringify(t.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),(0,ve.jsx)("div",{style:{height:32},children:(0,ve.jsx)(G.Button,{onClick:this.onPublishClicked,children:"Publish"})})]})}renderStatus(){const{status:e}=this.state;if((null==e?void 0:e.state)===q.LiveChannelConnectionState.Connected)return;let t="";return e&&(t=this.styles.status[e.state]),(0,ve.jsx)("div",{className:(0,T.cx)(t,this.styles.statusWrap),children:null==e?void 0:e.state})}renderBody(){const{status:e}=this.state,{options:t,height:n}=this.props;if(t.publish){if(t.message===Qs.None)return(0,ve.jsx)("div",{children:this.renderPublish(n)});const e=n/2;return(0,ve.jsxs)("div",{children:[(0,ve.jsx)("div",{style:{height:e,overflow:"hidden"},children:(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(e)})}),(0,ve.jsx)("div",{children:this.renderPublish(e)})]})}return t.message===Qs.None?(0,ve.jsx)("pre",{children:JSON.stringify(e)}):(0,ve.jsx)("div",{style:{overflow:"hidden",height:n},children:(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(n)})})}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:e,error:t}=this.state;return e?t?(0,ve.jsxs)("div",{children:[ti||(ti=(0,ve.jsx)("h2",{children:"ERROR"})),(0,ve.jsx)("div",{children:JSON.stringify(t)})]}):(0,ve.jsxs)(ve.Fragment,{children:[this.renderStatus(),this.renderBody()]}):ei||(ei=(0,ve.jsx)(G.Alert,{title:"Grafana Live",severity:"info",children:"Use the panel editor to pick a channel"}))}}const si=(0,G.stylesFactory)((e=>({statusWrap:T.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.panelBg};
    padding: 10px;
    z-index: ${e.zIndex.modal};
  `,status:{[q.LiveChannelConnectionState.Pending]:T.css`
      border: 1px solid ${e.palette.brandPrimary};
    `,[q.LiveChannelConnectionState.Connected]:T.css`
      border: 1px solid ${e.palette.brandSuccess};
    `,[q.LiveChannelConnectionState.Disconnected]:T.css`
      border: 1px solid ${e.palette.brandWarning};
    `,[q.LiveChannelConnectionState.Shutdown]:T.css`
      border: 1px solid ${e.palette.brandDanger};
    `,[q.LiveChannelConnectionState.Invalid]:T.css`
      border: 1px solid red;
    `}}))),ii=new q.PanelPlugin(ai).setPanelOptions((e=>{e.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Bs,defaultValue:{}}),e.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Qs.Raw,label:"Raw Text"},{value:Qs.JSON,label:"JSON"},{value:Qs.Auto,label:"Auto"},{value:Qs.None,label:"None"}]},defaultValue:Qs.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})}));var ri=n(28783),oi=n(93474);const li=(e,t)=>n=>({container:T.css`
    margin-bottom: ${n.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${n.spacing(e?0:2.5)};
  `,labelContainer:T.css`
    margin: ${t?n.spacing(.5,0,.5,0):n.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:T.css`
    margin-right: ${n.spacing(.5)};
    font-size: ${n.typography.bodySmall.fontSize};
    font-weight: ${n.typography.fontWeightMedium};
  `});const di=new q.PanelPlugin((e=>{let{data:t,timeZone:n,fieldConfig:a,options:{showLabels:s,showTime:i,wrapLogMessage:r,showCommonLabels:o,prettifyLogMessage:l,sortOrder:d,dedupStrategy:c,enableLogDetails:u},title:h,id:p}=e;const g=d===q.LogsSortOrder.Ascending,m=(0,G.useStyles2)(li(h,g)),[f,v]=(0,$.useState)(0),b=(0,$.useRef)(null),{eventBus:x}=(0,G.usePanelContext)(),y=(0,$.useCallback)((e=>{e?x.publish(new q.DataHoverEvent({point:{time:e.timeEpochMs}})):x.publish(new q.DataHoverClearEvent)}),[x]),[w,j,S]=(0,$.useMemo)((()=>{var e,n;const a=t?(0,ri.aB)(t.series,null===(e=t.request)||void 0===e?void 0:e.intervalMs):null,s=(null==a?void 0:a.rows)||[],i=null==a||null===(n=a.meta)||void 0===n?void 0:n.find((e=>e.label===ri.Qp));return[s,(0,ri.UW)(s,c),i]}),[t,c]);(0,$.useLayoutEffect)((()=>{g&&b.current?v(b.current.offsetHeight):v(0)}),[g,w]);const C=(0,$.useCallback)(((e,n)=>(0,fn.a)({field:e,rowIndex:n,range:t.timeRange})),[t]);if(!t||0===w.length)return(0,ve.jsx)(oi.Z,{fieldConfig:a,panelId:p,data:t,needsStringField:!0});const k=()=>(0,ve.jsxs)("div",{className:m.labelContainer,children:[(0,ve.jsx)("span",{className:m.label,children:"Common labels:"}),(0,ve.jsx)(G.LogLabels,{labels:S?S.value:{labels:"(no common labels)"}})]});return(0,ve.jsx)(G.CustomScrollbar,{autoHide:!0,scrollTop:f,children:(0,ve.jsxs)("div",{className:m.container,ref:b,children:[o&&!g&&k(),(0,ve.jsx)(G.LogRows,{logRows:w,deduplicatedRows:j,dedupStrategy:c,showLabels:s,showTime:i,wrapLogMessage:r,prettifyLogMessage:l,timeZone:n,getFieldLinks:C,logsSortOrder:d,enableLogDetails:u,previewLimit:g?w.length:void 0,onLogRowHover:y}),o&&g&&k()]})})})).setPanelOptions((e=>{e.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:q.LogsDedupStrategy.none,label:"None",description:q.LogsDedupDescription[q.LogsDedupStrategy.none]},{value:q.LogsDedupStrategy.exact,label:"Exact",description:q.LogsDedupDescription[q.LogsDedupStrategy.exact]},{value:q.LogsDedupStrategy.numbers,label:"Numbers",description:q.LogsDedupDescription[q.LogsDedupStrategy.numbers]},{value:q.LogsDedupStrategy.signature,label:"Signature",description:q.LogsDedupDescription[q.LogsDedupStrategy.signature]}]},defaultValue:q.LogsDedupStrategy.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:q.LogsSortOrder.Descending,label:"Newest first"},{value:q.LogsSortOrder.Ascending,label:"Oldest first"}]},defaultValue:q.LogsSortOrder.Descending})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:n}=e;n.hasData&&n.hasTimeField&&n.hasStringField&&("logs"===n.preferredVisualisationType?t.append({name:dn.y.Logs,score:q.VisualizationSuggestionScore.Best}):t.append({name:dn.y.Logs}))}}),ci="https://grafana.com/blog/news.xml";function ui(e,t){var n;const a=e.querySelector(t);return null!==(n=null==a?void 0:a.textContent)&&void 0!==n?n:""}async function hi(e){const t=await async function(e){const t=await fetch(e);return await t.text()}(e);var n;return n=t,null!==(new DOMParser).parseFromString(n,"text/xml").querySelector("feed")?function(e){const t=(new DOMParser).parseFromString(e,"text/xml");return{items:Array.from(t.querySelectorAll("entry")).map((e=>{var t,n,a;return{title:ui(e,"title"),link:null!==(t=null===(n=e.querySelector("link"))||void 0===n?void 0:n.getAttribute("href"))&&void 0!==t?t:"",content:ui(e,"content"),pubDate:ui(e,"published"),ogImage:null===(a=e.querySelector("meta[property='og:image']"))||void 0===a?void 0:a.getAttribute("content")}}))}}(t):function(e){const t=(new DOMParser).parseFromString(e,"text/xml");return{items:Array.from(t.querySelectorAll("item")).map((e=>{var t;return{title:ui(e,"title"),link:ui(e,"link"),content:ui(e,"description"),pubDate:ui(e,"pubDate"),ogImage:null===(t=e.querySelector("meta[property='og:image']"))||void 0===t?void 0:t.getAttribute("content")}}))}}(t)}var pi,gi;class mi extends $.PureComponent{constructor(e){var t,n,a;super(e),a=void 0,(n="refreshSubscription")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.refreshSubscription=this.props.eventBus.subscribe(Z.RefreshEvent,this.loadChannel.bind(this)),this.state={}}componentDidMount(){this.loadChannel()}componentWillUnmount(){this.refreshSubscription.unsubscribe()}componentDidUpdate(e){this.props.options.feedUrl!==e.options.feedUrl&&this.loadChannel()}async loadChannel(){const{options:e}=this.props;try{const t=e.feedUrl||ci,n=function(e){const t=new q.ArrayVector([]),n=new q.ArrayVector([]),a=new q.ArrayVector([]),s=new q.ArrayVector([]),i=new q.ArrayVector([]);for(const r of e.items){const e=(0,q.dateTime)(r.pubDate);try{if(t.buffer.push(e.valueOf()),n.buffer.push(r.title),a.buffer.push(r.link),i.buffer.push(r.ogImage),r.content){const e=r.content.replace(/<\/?[^>]+(>|$)/g,"");s.buffer.push(e)}}catch(e){console.warn("Error reading news item:",e,r)}}return{fields:[{name:"date",type:q.FieldType.time,config:{displayName:"Date"},values:t},{name:"title",type:q.FieldType.string,config:{},values:n},{name:"link",type:q.FieldType.string,config:{},values:a},{name:"content",type:q.FieldType.string,config:{},values:s},{name:"ogImage",type:q.FieldType.string,config:{},values:i}],length:t.length}}(await hi(t));this.setState({news:new q.DataFrameView(n),isError:!1})}catch(e){console.error("Error Loading News",e),this.setState({news:void 0,isError:!0})}}render(){const{width:e}=this.props,{showImage:t}=this.props.options,{isError:n,news:a}=this.state,s=fi(K.ZP.theme2),i=e>600;return n?pi||(pi=(0,ve.jsx)("div",{children:"Error loading RSS feed."})):a?(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:a.map(((e,n)=>(0,ve.jsxs)("article",{className:(0,T.cx)(s.item,i&&s.itemWide),children:[t&&e.ogImage&&(0,ve.jsx)("a",{tabIndex:-1,href:q.textUtil.sanitizeUrl(e.link),target:"_blank",rel:"noopener noreferrer",className:(0,T.cx)(s.socialImage,i&&s.socialImageWide),"aria-hidden":!0,children:(0,ve.jsx)("img",{src:e.ogImage,alt:e.title})}),(0,ve.jsxs)("div",{className:s.body,children:[(0,ve.jsxs)("time",{className:s.date,dateTime:(0,q.dateTimeFormat)(e.date,{format:"MMM DD"}),children:[(0,q.dateTimeFormat)(e.date,{format:"MMM DD"})," "]}),(0,ve.jsx)("a",{className:s.link,href:q.textUtil.sanitizeUrl(e.link),target:"_blank",rel:"noopener noreferrer",children:(0,ve.jsx)("h3",{className:s.title,children:e.title})}),(0,ve.jsx)("div",{className:s.content,dangerouslySetInnerHTML:{__html:q.textUtil.sanitize(e.content)}})]})]},n)))}):gi||(gi=(0,ve.jsx)("div",{children:"Loading..."}))}}const fi=(0,G.stylesFactory)((e=>({container:T.css`
    height: 100%;
  `,item:T.css`
    display: flex;
    padding: ${e.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${e.spacing(1)};
    border-bottom: 2px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:T.css`
    flex-direction: row;
  `,body:T.css`
    display: flex;
    flex-direction: column;
  `,socialImage:T.css`
    display: flex;
    align-items: center;
    margin-bottom: ${e.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${e.shape.borderRadius(2)} ${e.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:T.css`
    margin-right: ${e.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${e.shape.borderRadius()};
    }
  `,link:T.css`
    color: ${e.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${e.colors.text.link};
      text-decoration: underline;
    }
  `,title:T.css`
    font-size: 16px;
    margin-bottom: ${e.spacing(.5)};
  `,content:T.css`
    p {
      margin-bottom: 4px;
      color: ${e.colors.text};
    }
  `,date:T.css`
    margin-bottom: ${e.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${e.colors.text.secondary};
  `}))),vi=(Object.freeze([0,0]),{showImage:!0}),bi=new q.PanelPlugin(mi).setPanelOptions((e=>{e.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:ci},defaultValue:vi.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:vi.showImage})}));var xi,yi=n(58635),wi=n(87900),ji=n(30804);var Si=n(25296);const Ci=e=>{let{value:t,onChange:n,context:a}=e;const s=(0,G.useStyles2)(ki),i=(e,a,s)=>{var i;let r=null!==(i=null==t?void 0:t.slice())&&void 0!==i?i:[];r[e][a]=s,n(r)};return(0,ve.jsxs)(ve.Fragment,{children:[null==t?void 0:t.map(((e,r)=>{var o;return(0,ve.jsxs)("div",{className:s.section,children:[(0,ve.jsx)(Si.b,{context:a,value:null!==(o=e.field)&&void 0!==o?o:"",onChange:e=>{i(r,"field",e)},item:{settings:{filter:e=>e.name.includes("arc__")},id:`arc-field-${r}`,name:`arc-field-${r}`,editor:()=>null}}),(0,ve.jsx)(G.ColorPicker,{color:e.color||"#808080",onChange:e=>{i(r,"color",e)}}),(0,ve.jsx)(G.Button,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>(e=>{const a=null==t?void 0:t.slice();a.splice(e,1),n(a)})(r),title:"Remove arc"})]},r)})),(0,ve.jsx)(G.Button,{size:"sm",icon:"plus",onClick:()=>{const e={field:"",color:""};n(t?[...t,e]:[e])},variant:"secondary",children:"Add arc"})]})},ki=()=>({section:T.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),Ti=new q.PanelPlugin((e=>{let{width:t,height:n,data:a,options:s}=e;const i=(0,fn.u)(a.timeRange);if(!a||!a.series.length)return xi||(xi=(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsx)("p",{children:"No data found in response"})}));const r=(0,yi.Z)(ji.Ee);return(0,ve.jsx)("div",{style:{width:t,height:n},children:(0,ve.jsx)(wi.E,{dataFrames:r(a.series,s),getLinks:i})})})).setPanelOptions(((e,t)=>{e.addNestedOptions({category:["Nodes"],path:"nodes",build:e=>{e.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),e.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),e.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:Ci})}}),e.addNestedOptions({category:["Edges"],path:"edges",build:e=>{e.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),e.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})}));var Ii=n(50300),Oi=n(42365),Ni=n(78668),Fi=n(46151),Di=n(38359),Pi=n(51459),Ai=n(35008),Mi=n.n(Ai);let Ri=0;function $i(e){const t=(0,$.useRef)(null);return null===t.current&&(t.current=e+Ri++),t.current.toString()}let Li,Ei,Vi;function Bi(e){var t,n;return!(null!==(t=e.field.custom)&&void 0!==t&&null!==(n=t.hideFrom)&&void 0!==n&&n.viz||isNaN(e.display.numeric))}function zi(e,t){return t.display.numeric+e}!function(e){e.Pie="pie",e.Donut="donut"}(Li||(Li={})),function(e){e.Value="value",e.Percent="percent"}(Ei||(Ei={})),function(e){e.Name="name",e.Value="value",e.Percent="percent"}(Vi||(Vi={}));const _i=e=>{let{fieldDisplayValues:t,pieType:n,width:a,height:s,highlightedTitle:i,displayLabels:r=[],tooltipOptions:o}=e;const l=(0,G.useTheme2)(),d=$i("PieChart"),c=(0,G.useStyles2)(Ji),u=(0,Di.Z)(),{containerRef:h,TooltipInPortal:p}=(0,Pi.Z)({detectBounds:!0,scroll:!0}),g=t.filter(Bi),m=e=>`${d}-${Mi()(e).toHex()}`,f=e=>`url(#${m(e)})`,v=r.length>0,b="none"!==o.mode&&u.tooltipOpen,x=g.reduce(zi,0),y=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;const s=Math.min(t,e),i=(s-2*a)/2,r=n===Li.Pie?i:Math.max(i/3,20),o=i-r;return{position:(s-2*a)/2+a,size:s,outerRadius:i,innerRadius:o,gradientFromOffset:1-(i-o)/i}}(a,s,n),w=[...new Set(g.map((e=>{var t;return null!==(t=e.display.color)&&void 0!==t?t:q.FALLBACK_COLOR})))];return(0,ve.jsxs)("div",{className:c.container,children:[(0,ve.jsx)("svg",{width:y.size,height:y.size,ref:h,children:(0,ve.jsxs)(Ni.Z,{top:y.position,left:y.position,children:[w.map((e=>(0,ve.jsx)(Oi.Z,{id:m(e),from:qi(e,l),to:Zi(e,l),fromOffset:y.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:y.outerRadius},e))),(0,ve.jsx)(Fi.Z,{data:g,pieValue:e=>e.display.numeric,outerRadius:y.outerRadius,innerRadius:y.innerRadius,cornerRadius:3,padAngle:.005,children:e=>(0,ve.jsxs)(ve.Fragment,{children:[e.arcs.map((t=>{var n;const a=null!==(n=t.data.display.color)&&void 0!==n?n:q.FALLBACK_COLOR,s=Ki(i,t);return t.data.hasLinks&&t.data.getLinks?(0,ve.jsx)(G.DataLinksContextMenu,{links:t.data.getLinks,children:n=>(0,ve.jsx)(Ui,{tooltip:u,highlightState:s,arc:t,pie:e,fill:f(a),openMenu:n.openMenu,tooltipOptions:o})},t.index):(0,ve.jsx)(Ui,{highlightState:s,tooltip:u,arc:t,pie:e,fill:f(a),tooltipOptions:o},t.index)})),v&&e.arcs.map((e=>{const t=Ki(i,e);return(0,ve.jsx)(Hi,{arc:e,highlightState:t,outerRadius:y.outerRadius,innerRadius:y.innerRadius,displayLabels:r,total:x,color:l.colors.text.primary},e.index)}))]})})]})}),b?(0,ve.jsx)(p,{top:u.tooltipTop,className:c.tooltipPortal,left:u.tooltipLeft,unstyled:!0,applyPositionStyle:!0,children:(0,ve.jsx)(G.SeriesTable,{series:u.tooltipData})},Math.random()):null]})};function Ui(e){let{arc:t,pie:n,highlightState:a,openMenu:s,fill:i,tooltip:r,tooltipOptions:o}=e;const l=(0,G.useTheme2)(),d=(0,G.useStyles2)(Ji),{eventBus:c}=(0,G.usePanelContext)(),u=(0,$.useCallback)((e=>{null==c||c.publish({type:q.DataHoverClearEvent.type,payload:{raw:e,x:0,y:0,dataId:t.data.display.title}}),r.hideTooltip()}),[c,t,r]),h=(0,$.useCallback)((e=>{null==c||c.publish({type:q.DataHoverEvent.type,payload:{raw:e,x:0,y:0,dataId:t.data.display.title}});const a=(0,Ii.Z)(e.target.ownerSVGElement,e);r.showTooltip({tooltipLeft:a.x,tooltipTop:a.y,tooltipData:Wi(n,t,o)})}),[c,t,r,n,o]),p=Qi(a,d);return(0,ve.jsx)("g",{className:p,onMouseMove:"none"!==o.mode?h:void 0,onMouseOut:u,onClick:s,"aria-label":Ce.wl.components.Panels.Visualization.PieChart.svgSlice,children:(0,ve.jsx)("path",{d:n.path(Object.assign({},t)),fill:i,stroke:l.colors.background.primary,strokeWidth:1})},t.data.display.title)}function Hi(e){var t;let{arc:n,outerRadius:a,innerRadius:s,displayLabels:i,total:r,color:o,highlightState:l}=e;const d=(0,G.useStyles2)(Ji),c=0===s?a/6:s,[u,h]=function(e,t,n){const a=(t+n)/2,s=(+e.startAngle+ +e.endAngle)/2-Math.PI/2;return[Math.cos(s)*a,Math.sin(s)*a]}(n,a,c);if(!(n.endAngle-n.startAngle>=.3))return null;let p=i.includes(Vi.Name)?Math.min(Math.max(a/150*14,12),30):Math.min(Math.max(a/100*14,12),36);return(0,ve.jsx)("g",{className:Qi(l,d),children:(0,ve.jsxs)("text",{fill:o,x:u,y:h,dy:".33em",fontSize:p,fontWeight:500,textAnchor:"middle",pointerEvents:"none",children:[i.includes(Vi.Name)&&(0,ve.jsx)("tspan",{x:u,dy:"1.2em",children:n.data.display.title}),i.includes(Vi.Value)&&(0,ve.jsx)("tspan",{x:u,dy:"1.2em",children:(0,q.formattedValueToString)(n.data.display)}),i.includes(Vi.Percent)&&(0,ve.jsx)("tspan",{x:u,dy:"1.2em",children:(n.data.display.numeric/r*100).toFixed(null!==(t=n.data.field.decimals)&&void 0!==t?t:0)+"%"})]})})}function Wi(e,t,n){var a;return"multi"===n.mode?e.arcs.filter((e=>{var t,n,a,s;const i=e.data.field;return i&&!(null!==(t=i.custom)&&void 0!==t&&null!==(n=t.hideFrom)&&void 0!==n&&n.tooltip)&&!(null!==(a=i.custom)&&void 0!==a&&null!==(s=a.hideFrom)&&void 0!==s&&s.viz)})).map((e=>{var n;return{color:null!==(n=e.data.display.color)&&void 0!==n?n:q.FALLBACK_COLOR,label:e.data.display.title,value:(0,q.formattedValueToString)(e.data.display),isActive:e.index===t.index}})):[{color:null!==(a=t.data.display.color)&&void 0!==a?a:q.FALLBACK_COLOR,label:t.data.display.title,value:(0,q.formattedValueToString)(t.data.display)}]}function qi(e,t){return Mi()(e).darken(20*(t.isDark?1:-.7)).spin(4).toRgbString()}function Zi(e,t){return Mi()(e).darken(10*(t.isDark?1:-.7)).spin(-4).toRgbString()}var Gi;function Ki(e,t){return e?e===t.data.display.title?Gi.Highlighted:Gi.Deemphasized:Gi.Normal}function Qi(e,t){switch(e){case Gi.Highlighted:return t.svgArg.highlighted;case Gi.Deemphasized:return t.svgArg.deemphasized;case Gi.Normal:default:return t.svgArg.normal}}!function(e){e[e.Highlighted=0]="Highlighted",e[e.Deemphasized=1]="Deemphasized",e[e.Normal=2]="Normal"}(Gi||(Gi={}));const Ji=e=>({container:T.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:T.css`
        transition: all 200ms ease-in-out;
      `,highlighted:T.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:T.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:T.css`
      ${(0,Pn.getTooltipContainerStyles)(e)}
    `}),Yi={displayMode:$t.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Ei.Percent]};function Xi(e,t){var n;const a=null!==(n=e.options.legend)&&void 0!==n?n:Yi;if(!1===a.showLegend)return;const s=t.filter(Bi).reduce(zi,0),i=t.sort(((e,t)=>isNaN(e.display.numeric)?1:isNaN(t.display.numeric)?-1:t.display.numeric-e.display.numeric)).map(((t,n)=>{var i,r,o,l;const d=null!==(i=null===(r=t.field.custom)||void 0===r?void 0:r.hideFrom)&&void 0!==i?i:{};if(d.legend)return;const c=Boolean(d.viz),u=t.display;return{label:null!==(o=u.title)&&void 0!==o?o:"",color:null!==(l=u.color)&&void 0!==l?l:q.FALLBACK_COLOR,yAxis:1,disabled:c,getItemKey:()=>{var e;return(null!==(e=u.title)&&void 0!==e?e:"")+n},getDisplayValues:()=>{var n;const i=null!==(n=a.values)&&void 0!==n?n:[];let r=[];if(i.includes(Ei.Value)&&r.push({numeric:u.numeric,text:(0,q.formattedValueToString)(u),title:"Value"}),i.includes(Ei.Percent)){var o,l;const n=c?0:u.numeric/s,a=100*n;r.push({numeric:n,percent:a,text:c||isNaN(n)?null!==(o=e.fieldConfig.defaults.noValue)&&void 0!==o?o:"-":a.toFixed(null!==(l=t.field.decimals)&&void 0!==l?l:0)+"%",title:i.length>1?"Percent":""})}return r}}})).filter((e=>!!e));return(0,ve.jsx)(G.VizLegend,{items:i,seriesVisibilityChangeBehavior:G.SeriesVisibilityChangeBehavior.Hide,placement:a.placement,displayMode:a.displayMode})}const er=new q.PanelPlugin((function(e){const{data:t,timeZone:n,fieldConfig:a,replaceVariables:s,width:i,height:r,options:o,id:l}=e,d=(0,G.useTheme2)(),c=function(){const[e,t]=(0,$.useState)(),{eventBus:n}=(0,G.usePanelContext)();return(0,$.useEffect)((()=>{const e=e=>{t(e.payload.dataId)},a=e=>{t(void 0)},s=new gt.w0;return s.add(n.getStream(q.DataHoverEvent).subscribe({next:e})),s.add(n.getStream(q.DataHoverClearEvent).subscribe({next:a})),()=>{s.unsubscribe()}}),[t,n]),e}(),u=(0,q.getFieldDisplayValues)({fieldConfig:a,reduceOptions:o.reduceOptions,data:t.series,theme:d,replaceVariables:s,timeZone:n});return function(e){return e.some((e=>{var t;return null===(t=e.view)||void 0===t?void 0:t.dataFrame.length}))}(u)?(0,ve.jsx)(G.VizLayout,{width:i,height:r,legend:Xi(e,u),children:(e,t)=>(0,ve.jsx)(_i,{width:e,height:t,highlightedTitle:c,fieldDisplayValues:u,tooltipOptions:o.tooltip,pieType:o.pieType,displayLabels:o.displayLabels})}):(0,ve.jsx)(Z.PanelDataErrorView,{panelId:l,fieldConfig:a,data:t})})).setPanelChangeHandler(((e,t,n)=>{if("grafana-piechart-panel"===t&&n.angular){const t=n.angular,a=[];let s=e.options;if(t.aliasColors)for(const e of Object.keys(t.aliasColors)){const n=t.aliasColors[e];n&&a.push({matcher:{id:q.FieldMatcherID.byName,options:e},properties:[{id:q.FieldConfigProperty.Color,value:{mode:q.FieldColorModeId.Fixed,fixedColor:n}}]})}if(e.fieldConfig={overrides:a,defaults:{unit:t.format,decimals:t.decimals?t.decimals:0}},s.legend={placement:"right",values:[],displayMode:$t.jK.Table,showLegend:!0,calcs:[]},t.valueName)switch(s.reduceOptions={calcs:[]},t.valueName){case"current":s.reduceOptions.calcs=["lastNotNull"];break;case"min":s.reduceOptions.calcs=["min"];break;case"max":s.reduceOptions.calcs=["max"];break;case"avg":s.reduceOptions.calcs=["mean"];break;case"total":s.reduceOptions.calcs=["sum"]}switch(t.legendType){case"Under graph":s.legend.placement="bottom";break;case"Right side":s.legend.placement="right"}switch(t.pieType){case"pie":s.pieType=Li.Pie;break;case"donut":s.pieType=Li.Donut}return t.legend&&(t.legend.show||(s.legend.showLegend=!1),t.legend.values&&s.legend.values.push(Ei.Value),t.legend.percentage&&s.legend.values.push(Ei.Percent),t.legend.percentage||t.legend.values||(s.legend.showLegend=!1)),"On graph"===t.legendType&&(s.legend.showLegend=!1,s.displayLabels=[Vi.Name],t.legend.values&&s.displayLabels.push(Vi.Value),t.legend.percentage&&s.displayLabels.push(Vi.Percent)),s}return{}})).useFieldConfig({disableStandardOptions:[q.FieldConfigProperty.Thresholds],standardOptions:{[q.FieldConfigProperty.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:q.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{G.commonOptionsBuilder.addHideFrom(e)}}).setPanelOptions((e=>{(0,un.j)(e),e.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Li.Pie,label:"Pie"},{value:Li.Donut,label:"Donut"}]},defaultValue:Li.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Vi.Percent,label:"Percent"},{value:Vi.Name,label:"Name"},{value:Vi.Value,label:"Value"}]}}),G.commonOptionsBuilder.addTooltipOptions(e),G.commonOptionsBuilder.addLegendOptions(e,!1),e.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Ei.Percent,label:"Percent"},{value:Ei.Value,label:"Value"}]},showIf:e=>!1!==e.legend.showLegend})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:dn.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Vi.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:e=>{e.options.legend.showLegend=!1}}}),{dataSummary:n}=e;if(n.hasNumberField){if(n.hasStringField&&1===n.frameCount){if(n.rowCountTotal>30||n.rowCountTotal<2)return;return t.append({name:dn.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),void t.append({name:dn.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Li.Donut}})}n.numberFieldCount>30||n.numberFieldCount<2||(t.append({name:dn.y.PieChart}),t.append({name:dn.y.PieChartDonut,options:{pieType:Li.Donut}}))}}});var tr,nr,ar,sr=n(83481),ir=n(67680);const rr=e=>{var t;let{data:n,alignedData:a,seriesIdx:s,datapointIdx:i,timeZone:r,onAnnotationAdd:o}=e;const l=(0,G.useTheme2)();if(!n||null==i)return null;const d=a.fields[s],c=[],u=new Set;if(d.getLinks){const e=d.values.get(i),t=d.display?d.display(e):{text:`${e}`,numeric:+e};d.getLinks({calculatedValue:t,valueRowIndex:i}).forEach((e=>{const t=`${e.title}/${e.href}`;u.has(t)||(c.push(e),u.add(t))}))}const h=a.fields[0],p=h.display||(0,q.getDisplayProcessor)({field:h,timeZone:r,theme:l}),g=null===(t=d.state)||void 0===t?void 0:t.origin,m=(d.display||(0,q.getDisplayProcessor)({field:d,timeZone:r,theme:l}))(d.values.get(i)),f=g?(0,q.getFieldDisplayName)(n[g.frameIndex].fields[g.fieldIndex],n[g.frameIndex],n):null,v=(0,zt.iK)(d,i);let b;v&&(b=h.values.get(v));const x=h.values.get(i);let y=null,w=null;if(b){const e=b&&(0,zt.Y)(b-x);w=(0,ve.jsxs)(ve.Fragment,{children:[tr||(tr=(0,ve.jsx)("br",{})),nr||(nr=(0,ve.jsx)("strong",{children:"Duration:"}))," ",e]}),y=(0,ve.jsxs)(ve.Fragment,{children:[" to"," ",(0,ve.jsx)("strong",{children:p(h.values.get(v)).text})]})}return(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("div",{style:{fontSize:l.typography.bodySmall.fontSize},children:[f,ar||(ar=(0,ve.jsx)("br",{})),(0,ve.jsx)(G.SeriesTableRow,{label:m.text,color:m.color||q.FALLBACK_COLOR,isActive:!0}),"From ",(0,ve.jsx)("strong",{children:p(h.values.get(i)).text}),y,w]}),(0,ve.jsxs)("div",{style:{margin:l.spacing(1,-1,-1,-1),borderTop:`1px solid ${l.colors.border.weak}`},children:[o&&(0,ve.jsx)(G.MenuItem,{label:"Add annotation",icon:"comment-alt",onClick:o}),c.length>0&&c.map(((e,t)=>(0,ve.jsx)(G.MenuItem,{icon:"external-link-alt",target:e.target,label:e.title,url:e.href,onClick:e.onClick},t)))]})]})};function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}rr.displayName="StateTimelineTooltip";const lr=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class dr extends $.Component{constructor(){super(...arguments),or(this,"panelContext",{}),or(this,"getValueColor",((e,t,n)=>{const a=this.props.frames[e].fields[t];if(a.display){const e=a.display(n);if(e.color)return e.color}return q.FALLBACK_COLOR})),or(this,"prepConfig",((e,t,n)=>{this.panelContext=this.context;const{eventBus:a,sync:s}=this.panelContext;return(0,zt.Nj)(Object.assign({frame:e,getTimeRange:n,eventBus:a,sync:s,allFrames:this.props.frames},this.props,{timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:e.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor}))})),or(this,"renderLegend",(e=>{const{legend:t,legendItems:n}=this.props;return e&&n&&t&&!1!==t.showLegend?(0,ve.jsx)(G.VizLayout.Legend,{placement:t.placement,children:(0,ve.jsx)(G.VizLegend,{placement:t.placement,items:n,displayMode:t.displayMode,readonly:!0})}):null}))}render(){return(0,ve.jsx)(G.GraphNG,Object.assign({},this.props,{fields:{x:e=>e.type===q.FieldType.time,y:e=>e.type===q.FieldType.number||e.type===q.FieldType.boolean||e.type===q.FieldType.string},prepConfig:this.prepConfig,propsToDiff:lr,renderLegend:this.renderLegend}))}}or(dr,"contextType",G.PanelContextRoot);var cr=n(84934);const ur=new q.PanelPlugin((e=>{let{data:t,timeRange:n,timeZone:a,options:s,width:i,height:r,replaceVariables:o,onChangeTimeRange:l}=e;const d=(0,G.useTheme2)(),c=(0,$.useRef)(void 0),u=(0,$.useRef)(!1),[h,p]=(0,$.useState)(void 0),[g,m]=(0,$.useState)(null),[f,v]=(0,$.useState)(null),[b,x]=(0,$.useState)(null),[y,w]=(0,$.useState)(!1),{canAddAnnotations:j}=(0,G.usePanelContext)(),S=()=>{u.current=!1,m(null),w(!1)},C=()=>{u.current=!u.current,w(u.current)},{frames:k,warn:T}=(0,$.useMemo)((()=>{var e;return(0,zt.AR)(null==t?void 0:t.series,null===(e=s.mergeValues)||void 0===e||e,n,d)}),[t,s.mergeValues,n,d]),I=(0,$.useMemo)((()=>(0,zt.SA)(k,s.legend,d)),[k,s.legend,d]),O=(0,$.useMemo)((()=>pa(s.timezone,a)),[s.timezone,a]),N=(0,$.useCallback)(((e,t,n,s)=>{var i,r;const o=null!=k?k:[],l=o.reduce(((e,t)=>e+t.fields.filter((e=>e.type!==q.FieldType.time)).length),0);return null===t||null===n?null:(null!==(i=e.meta)&&void 0!==i&&null!==(r=i.transformations)&&void 0!==r&&r.length||e.fields.length-1===l)&&e.fields[t]?(0,ve.jsxs)(ve.Fragment,{children:[y&&(0,ve.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,ve.jsx)(Vt.P,{onClick:S,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,ve.jsx)(rr,{data:o,alignedData:e,seriesIdx:t,datapointIdx:n,timeZone:a,onAnnotationAdd:s})]}):null}),[a,k,y]);if(!k||T)return(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsx)("p",{children:null!=T?T:"No data found in response"})});if(1===k.length){(0,Us.MB)(k[0])}const F=Boolean(j&&j());return(0,ve.jsx)(dr,Object.assign({theme:d,frames:k,structureRev:t.structureRev,timeRange:n,timeZone:O,width:i,height:r,legendItems:I},s,{mode:cr.KN.Changes,children:(e,n)=>(c.current!==e&&(c.current=Et({config:e,onUPlotClick:C,setFocusedSeriesIdx:v,setFocusedPointIdx:x,setCoords:m,setHover:p,isToolTipOpen:u})),(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.ZoomPlugin,{config:e,onZoom:l}),(0,ve.jsx)(sa,{config:e,onChangeTimeRange:l}),t.annotations&&(0,ve.jsx)(Bn,{annotations:t.annotations,config:e,timeZone:a}),F?(0,ve.jsx)(Dn,{data:n,timeZone:a,config:e,children:e=>{let{startAnnotating:t}=e;return s.tooltip.mode===G.TooltipDisplayMode.None?null:(0,ve.jsx)(G.Portal,{children:h&&g&&(0,ve.jsx)(G.VizTooltipContainer,{position:{x:g.viewport.x,y:g.viewport.y},offset:{x:10,y:10},allowPointerEvents:u.current,children:N(n,f,b,(()=>{t({coords:{plotCanvas:g.canvas,viewport:g.viewport}}),S()}))})})}}):(0,ve.jsx)(G.Portal,{children:s.tooltip.mode!==G.TooltipDisplayMode.None&&h&&g&&(0,ve.jsx)(G.VizTooltipContainer,{position:{x:g.viewport.x,y:g.viewport.y},offset:{x:10,y:10},allowPointerEvents:u.current,children:N(n,f,b)})})]}))}))})).setPanelChangeHandler(((e,t,n)=>{var a;let s=null!==(a=e.options)&&void 0!==a?a:{};if("natel-discrete-panel"===t&&n.angular){var i;const t=n.angular,a=null!==(i=e.fieldConfig)&&void 0!==i?i:{defaults:{},overrides:[]};t.units&&(a.defaults.unit=t.units);const r={fillOpacity:100,lineWidth:0};a.defaults.custom=r,s.mergeValues=!0;const o={type:q.MappingType.ValueToText,options:{}};if(a.defaults.mappings=[o],(0,F.isArray)(t.colorMaps))for(const e of t.colorMaps){const t=e.color;t&&(o.options[e.text]={color:t})}if((0,F.isArray)(t.valueMaps))for(const e of t.valueMaps){const t=e.text,n=e.value;if(t&&n){let e=o.options[n];e?e.text=t:o.options[n]={text:t}}}if((0,F.isArray)(t.rangeMaps))for(const e of t.rangeMaps){let t=+e.from,n=+e.to;const s=e.text;s&&a.defaults.mappings.push({type:q.MappingType.RangeToText,options:{from:t,to:n,result:{text:s}}})}e.fieldConfig=a}return s})).useFieldConfig({standardOptions:{[q.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:q.FieldColorModeId.ContinuousGrYlRd}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:cr.Uv.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:cr.Uv.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:ir.c,override:ir.c,shouldApply:e=>e.type!==q.FieldType.time,process:q.identityOverrideProcessor})}}).setPanelOptions((e=>{e.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:cr.mP.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:$t.Jp.Auto,label:"Auto"},{value:$t.Jp.Always,label:"Always"},{value:$t.Jp.Never,label:"Never"}]},defaultValue:cr.mP.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:cr.mP.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:cr.mP.rowHeight}),G.commonOptionsBuilder.addLegendOptions(e,!1),G.commonOptionsBuilder.addTooltipOptions(e,!0)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;if(!t.hasTimeField||!t.hasStringField&&!t.hasNumberField)return;if(t.numberFieldCount>=30)return;if("logs"===t.preferredVisualisationType)return;e.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:dn.y.StateTimeline})}}).setDataSupport({annotations:!0});var hr;const pr=e=>{var t;let{data:n,alignedData:a,seriesIdx:s,datapointIdx:i,timeZone:r}=e;const o=(0,G.useTheme2)();if(!n||null==i)return null;const l=a.fields[s],d=[],c=new Set;if(l.getLinks){const e=l.values.get(i),t=l.display?l.display(e):{text:`${e}`,numeric:+e};l.getLinks({calculatedValue:t,valueRowIndex:i}).forEach((e=>{const t=`${e.title}/${e.href}`;c.has(t)||(d.push(e),c.add(t))}))}const u=null===(t=l.state)||void 0===t?void 0:t.origin,h=(l.display||(0,q.getDisplayProcessor)({field:l,timeZone:r,theme:o}))(l.values.get(i)),p=u?(0,q.getFieldDisplayName)(n[u.frameIndex].fields[u.fieldIndex],n[u.frameIndex],n):null;return(0,ve.jsxs)("div",{children:[(0,ve.jsxs)("div",{style:{fontSize:o.typography.bodySmall.fontSize},children:[p,hr||(hr=(0,ve.jsx)("br",{})),(0,ve.jsx)(G.SeriesTableRow,{label:h.text,color:h.color||q.FALLBACK_COLOR,isActive:!0})]}),d.length>0&&(0,ve.jsx)("div",{style:{margin:o.spacing(1,-1,-1,-1),borderTop:`1px solid ${o.colors.border.weak}`},children:d.map(((e,t)=>(0,ve.jsx)(G.MenuItem,{icon:"external-link-alt",target:e.target,label:e.title,url:e.href,onClick:e.onClick},t)))})]})};var gr,mr;pr.displayName="StatusHistoryTooltip";const fr=1,vr=70,br=new q.PanelPlugin((e=>{let{data:t,timeRange:n,timeZone:a,options:s,width:i,height:r,onChangeTimeRange:o}=e;const l=(0,G.useTheme2)(),d=(0,$.useRef)(void 0),c=(0,$.useRef)(!1),[u,h]=(0,$.useState)(void 0),[p,g]=(0,$.useState)(null),[m,f]=(0,$.useState)(null),[v,b]=(0,$.useState)(null),[x,y]=(0,$.useState)(!1),w=()=>{c.current=!1,g(null),y(!1)},j=()=>{c.current=!c.current,y(c.current)},{frames:S,warn:C}=(0,$.useMemo)((()=>(0,zt.AR)(null==t?void 0:t.series,!1,n,l)),[t,n,l]),k=(0,$.useMemo)((()=>(0,zt.SA)(S,s.legend,l)),[S,s.legend,l]),T=(0,$.useCallback)(((e,t,n)=>{var s,i;const r=null!=S?S:[],o=r.reduce(((e,t)=>e+t.fields.filter((e=>e.type!==q.FieldType.time)).length),0);return null===t||null===n?null:(null!==(s=e.meta)&&void 0!==s&&null!==(i=s.transformations)&&void 0!==i&&i.length||e.fields.length-1===o)&&e.fields[t]?(0,ve.jsxs)(ve.Fragment,{children:[x&&(0,ve.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"},children:(0,ve.jsx)(Vt.P,{onClick:w,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})}),(0,ve.jsx)(pr,{data:r,alignedData:e,seriesIdx:t,datapointIdx:n,timeZone:a})]}):null}),[a,S,x]),I=(0,$.useMemo)((()=>pa(s.timezone,a)),[s.timezone,a]);return!S||C?(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsx)("p",{children:null!=C?C:"No data found in response"})}):S[0].length>i/2?(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsxs)("p",{children:["Too many points to visualize properly. ",gr||(gr=(0,ve.jsx)("br",{})),"Update the query to return fewer points. ",mr||(mr=(0,ve.jsx)("br",{})),"(",S[0].length," points received)"]})}):(0,ve.jsx)(dr,Object.assign({theme:l,frames:S,structureRev:t.structureRev,timeRange:n,timeZone:I,width:i,height:r,legendItems:k},s,{mode:cr.KN.Samples,children:(e,t)=>(d.current!==e&&(d.current=Et({config:e,onUPlotClick:j,setFocusedSeriesIdx:f,setFocusedPointIdx:b,setCoords:g,setHover:h,isToolTipOpen:c})),s.tooltip.mode===G.TooltipDisplayMode.None?null:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.ZoomPlugin,{config:e,onZoom:o}),(0,ve.jsx)(G.Portal,{children:u&&p&&(0,ve.jsx)(G.VizTooltipContainer,{position:{x:p.viewport.x,y:p.viewport.y},offset:{x:10,y:10},allowPointerEvents:c.current,children:T(t,m,v)})}),(0,ve.jsx)(sa,{config:e,onChangeTimeRange:o})]}))}))})).useFieldConfig({standardOptions:{[q.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:q.FieldColorModeId.Thresholds}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:fr,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:vr,settings:{min:0,max:100,step:1}})}}).setPanelOptions((e=>{e.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:$t.Jp.Auto,label:"Auto"},{value:$t.Jp.Always,label:"Always"},{value:$t.Jp.Never,label:"Never"}]},defaultValue:$t.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),G.commonOptionsBuilder.addLegendOptions(e,!1),G.commonOptionsBuilder.addTooltipOptions(e,!0)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;if(!t.hasTimeField||!t.hasStringField&&!t.hasNumberField)return;if(t.numberFieldCount>=30)return;if(t.rowCountMax>100)return;if("logs"===t.preferredVisualisationType)return;e.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:q.FieldColorModeId.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.colWidth=.7}}}).append({name:dn.y.StatusHistory})}});function xr(e){let{onChange:t,value:n,context:a}=e;return(0,ve.jsx)(G.Switch,{value:Boolean(n),onChange:e=>{null!=e&&e.currentTarget.checked&&(a.options.footer.show=!1),t(null==e?void 0:e.currentTarget.checked)}})}const yr={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},wr={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},jr={cell:"color-background",row:"color-background",value:"color-text"},Sr=(e,t)=>[-1/0,...e].map(((e,n)=>({color:t[n],value:(0,F.isNumber)(e)?e:parseInt(e,10)}))),Cr=e=>{var t;const n={matcher:{id:/^\/.*\/$/.test(e.pattern)?q.FieldMatcherID.byRegexp:q.FieldMatcherID.byName,options:e.pattern},properties:[]};return e.alias&&n.properties.push({id:"displayName",value:e.alias}),e.unit&&n.properties.push({id:"unit",value:e.unit}),e.decimals&&n.properties.push({id:"decimals",value:e.decimals}),"date"===e.type&&n.properties.push({id:"unit",value:`time: ${e.dateFormat}`}),e.link&&n.properties.push({id:"links",value:[{title:(0,F.defaultTo)(e.linkTooltip,""),url:(0,F.defaultTo)(e.linkUrl,""),targetBlank:(0,F.defaultTo)(e.linkTargetBlank,!1)}]}),e.colorMode&&n.properties.push({id:"custom.displayMode",value:jr[e.colorMode]}),e.align&&n.properties.push({id:"custom.align",value:"auto"===e.align?null:e.align}),null!==(t=e.thresholds)&&void 0!==t&&t.length&&n.properties.push({id:"thresholds",value:{mode:q.ThresholdsMode.Absolute,steps:Sr(e.thresholds,e.colors)}}),n},kr=(Object.freeze([1,0]),!0),Tr={show:!1,reducer:[]},Ir={displayMode:G.TableCellDisplayMode.Auto,align:"auto",inspect:!1};const Or="Table footer",Nr=new q.PanelPlugin(Gs).setPanelChangeHandler(((e,t,n)=>{if("table-old"===t&&n.angular){const t=n.angular,a=((e,t)=>{var n;const a=null!==(n=e.transformations)&&void 0!==n?n:[];if(Object.keys(yr).includes(t.transform)){const e={reducers:[]};"timeseries_aggregations"===t.transform&&(e.includeTimeField=!1,e.reducers=t.columns.map((e=>wr[e.value]))),a.push({id:yr[t.transform],options:e})}return a})(e,t),s=(e=>{let t={custom:{}};if(e&&(t=(0,F.omitBy)({unit:e.unit,decimals:e.decimals,displayName:e.alias,custom:{align:"auto"===e.align?null:e.align,displayMode:jr[e.colorMode]}},F.isNil),e.thresholds.length)){const n={mode:q.ThresholdsMode.Absolute,steps:Sr(e.thresholds,e.colors)};t.thresholds=n}return t})(t.styles.find((e=>"/.*/"===e.pattern))),i=t.styles.filter((e=>"/.*/"!==e.pattern)).map(Cr);e.transformations=a,e.fieldConfig={defaults:s,overrides:i}}return{}})).setMigrationHandler((e=>(!e.pluginVersion&&e.columns&&console.log("Was angular table",e),e.options))).setNoPadding().useFieldConfig({useCustomConfig:e=>{e.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Ir.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Ir.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Ir.align}).addSelect({path:"displayMode",name:"Cell display mode",description:"Color text, background, show as gauge, etc",settings:{options:[{value:G.TableCellDisplayMode.Auto,label:"Auto"},{value:G.TableCellDisplayMode.ColorText,label:"Color text"},{value:G.TableCellDisplayMode.ColorBackground,label:"Color background (gradient)"},{value:G.TableCellDisplayMode.ColorBackgroundSolid,label:"Color background (solid)"},{value:G.TableCellDisplayMode.GradientGauge,label:"Gradient gauge"},{value:G.TableCellDisplayMode.LcdGauge,label:"LCD gauge"},{value:G.TableCellDisplayMode.BasicGauge,label:"Basic gauge"},{value:G.TableCellDisplayMode.JSONView,label:"JSON View"},{value:G.TableCellDisplayMode.Image,label:"Image"}]},defaultValue:Ir.displayMode}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,showIf:e=>e.displayMode===G.TableCellDisplayMode.Auto||e.displayMode===G.TableCellDisplayMode.JSONView||e.displayMode===G.TableCellDisplayMode.ColorText||e.displayMode===G.TableCellDisplayMode.ColorBackground||e.displayMode===G.TableCellDisplayMode.ColorBackgroundSolid}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Ir.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions((e=>{var t;e.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:kr}).addBooleanSwitch({path:"footer.show",category:[Or],name:"Show table footer",defaultValue:null===(t=Tr)||void 0===t?void 0:t.show}).addCustomEditor({id:"footer.reducer",category:[Or],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:q.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[q.ReducerID.sum],showIf:e=>{var t;return null===(t=e.footer)||void 0===t?void 0:t.show}}).addMultiSelect({path:"footer.fields",category:[Or],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async e=>{const t=[];if(e&&e.data&&e.data.length>0){const n=e.data[0];for(const a of n.fields)if(a.type===q.FieldType.number){const s=(0,q.getFieldDisplayName)(a,n,e.data),i=a.name;t.push({value:i,label:s})}}return t}},defaultValue:"",showIf:e=>{var t;return null===(t=e.footer)||void 0===t?void 0:t.show}}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:xr})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:dn.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.fieldConfig.defaults.custom.minWidth=50}}});0===e.dataSummary.fieldCount?t.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):t.append({})}});var Fr=n(54391);Object.freeze([0,0]);let Dr;!function(e){e.HTML="html",e.Markdown="markdown"}(Dr||(Dr={}));const Pr={content:"# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)",mode:Dr.Markdown};class Ar extends $.PureComponent{constructor(e){var t,n,a;super(e),t=this,n="updateHTML",a=(0,F.debounce)((()=>{const e=this.processContent(this.props.options);e!==this.state.html&&this.setState({html:e})}),150),n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.state={html:this.processContent(e.options)}}componentDidUpdate(e){this.updateHTML()}prepareHTML(e){const t=this.interpolateString(e);return K.ZP.disableSanitizeHtml?t:this.sanitizeString(t)}prepareMarkdown(e){let t=this.interpolateString(e);return K.ZP.disableSanitizeHtml?(t=(0,q.renderTextPanelMarkdown)(t,{noSanitize:!0}),t):(t=(0,q.renderTextPanelMarkdown)(t),this.sanitizeString(t))}interpolateString(e){const{replaceVariables:t}=this.props;return t(e,{},"html")}sanitizeString(e){return q.textUtil.sanitizeTextPanelContent(e)}processContent(e){const{mode:t,content:n}=e;return n?t===Dr.HTML?this.prepareHTML(n):this.prepareMarkdown(n):""}render(){const{html:e}=this.state,t=Mr();return(0,ve.jsx)(G.CustomScrollbar,{autoHeightMin:"100%",children:(0,ve.jsx)(Fr.Z,{html:e,className:(0,T.cx)("markdown-html",t.content),"data-testid":"TextPanel-converted-content"})})}}const Mr=(0,G.stylesFactory)((()=>({content:T.css`
      height: 100%;
    `})));var Rr=n(87723);const $r=e=>{let{value:t,onChange:n,context:a}=e;const s=(0,$.useMemo)((()=>{var e,t;return null!==(e=null===(t=a.options)||void 0===t?void 0:t.mode)&&void 0!==e?e:Dr.Markdown}),[a]),i=(0,G.useTheme)(),r=Lr(i),o=()=>a.getSuggestions?a.getSuggestions().map((e=>(0,G.variableSuggestionToCodeEditorSuggestion)(e))):[];return(0,ve.jsx)("div",{className:(0,T.cx)(r.editorBox),children:(0,ve.jsx)(Rr.Z,{disableHeight:!0,children:e=>{let{width:a}=e;return 0===a?null:(0,ve.jsx)(G.CodeEditor,{value:t,onBlur:n,onSave:n,language:s,width:a,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:o})}})})},Lr=(0,G.stylesFactory)((e=>({editorBox:T.css`
    label: editorBox;
    border: ${e.border.width.sm} solid ${e.colors.border2};
    border-radius: ${e.border.radius.sm};
    margin: ${e.spacing.xs} 0;
    width: 100%;
  `}))),Er=new q.PanelPlugin(Ar).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",description:"text mode of the panel",settings:{options:[{value:Dr.Markdown,label:"Markdown"},{value:Dr.HTML,label:"HTML"}]},defaultValue:Pr.mode}).addCustomEditor({id:"content",path:"content",name:"Content",description:"Content of the panel",editor:$r,defaultValue:Pr.content})})).setMigrationHandler((e=>{const t=parseFloat(e.pluginVersion||"6.1");let n=e.options;if(e.hasOwnProperty("content")&&e.hasOwnProperty("mode")){const a=e,s=a.content,i=a.mode;delete a.content,delete a.mode,t<7.1&&(n={content:s,mode:i})}return"html"!==n.mode&&"markdown"!==n.mode&&(n=Object.assign({},n,{mode:Dr.Markdown})),n})),Vr=e=>{var t;let{value:n,onChange:a}=e;const s=(0,G.useStyles2)(Br);(!n||n.length<1)&&(n=[""]);const i=()=>{a([...n,q.InternalTimeZones.default])};return(0,ve.jsx)("div",{children:n.map(((e,r)=>(0,ve.jsxs)("div",{className:s.wrapper,children:[(0,ve.jsx)("span",{className:s.first,children:(0,ve.jsx)(G.TimeZonePicker,{onChange:e=>((e,t)=>{const s=n.slice();s[e]=null!=t?t:q.InternalTimeZones.default,0===s.length||1===s.length&&""===s[0]?a(void 0):a(s)})(r,e),includeInternal:!0,value:null!=e?e:q.InternalTimeZones.default})}),r===n.length-1?t||(t=(0,ve.jsx)(G.IconButton,{ariaLabel:"Add timezone",name:"plus",onClick:i})):(0,ve.jsx)(G.IconButton,{ariaLabel:"Remove timezone",name:"times",onClick:()=>(e=>{const t=n.slice();t.splice(e,1),a(t)})(r)})]},`${r}.${e}`)))})},Br=e=>({wrapper:T.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:T.css`
    margin-right: 8px;
    flex-grow: 2;
  `});function zr(e){return"critical"===e.colorMode?"red":"warning"===e.colorMode?"orange":"custom"===e.colorMode?e.fillColor||e.lineColor:"red"}function _r(e){if(!e)return{};const t={axisPlacement:e.show?$t.LB.Auto:$t.LB.Hidden};if(e.label&&(t.axisLabel=e.label),e.logBase){const n=e.logBase;2!==n&&10!==n||(t.scaleDistribution={type:$t.wf.Log,log:n})}return(0,F.omitBy)({unit:e.format,decimals:Hr(e.decimals),min:Hr(e.min),max:Hr(e.max),custom:t},F.isNil)}function Ur(e,t,n){var a,s;for(const a of Object.keys(t)){const s=t[a];"custom"!==a&&s!==e[a]&&n.push({id:a,value:s})}const i=null!==(a=e.custom)&&void 0!==a?a:{},r=null!==(s=t.custom)&&void 0!==s?s:{};for(const e of Object.keys(r)){const t=r[e];t!==i[e]&&n.push({id:`custom.${e}`,value:t})}}function Hr(e){if((0,F.isNumber)(e))return e;if((0,F.isString)(e)){const t=Number(e);if(!isNaN(t))return t}}const Wr=new q.PanelPlugin((e=>{let{data:t,timeRange:n,timeZone:a,width:s,height:i,options:r,fieldConfig:o,onChangeTimeRange:l,replaceVariables:d,id:c}=e;const{sync:u,canAddAnnotations:h,onThresholdsChange:p,canEditThresholds:g,onSplitOpen:m}=(0,G.usePanelContext)(),f=(e,t)=>(0,fn.a)({field:e,rowIndex:t,splitOpenFn:m,range:n}),v=(0,$.useMemo)((()=>ha(t.series,K.vc.theme2,n)),[t,n]),b=(0,$.useMemo)((()=>pa(r.timezone,a)),[r.timezone,a]);if(!v)return(0,ve.jsx)(Z.PanelDataErrorView,{panelId:c,fieldConfig:o,data:t,needsTimeField:!0,needsNumberField:!0});const x=Boolean(h&&h());return(0,ve.jsx)(G.TimeSeries,{frames:v,structureRev:t.structureRev,timeRange:n,timeZone:b,width:s,height:i,legend:r.legend,options:r,children:(e,n)=>(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.KeyboardPlugin,{config:e}),(0,ve.jsx)(G.ZoomPlugin,{config:e,onZoom:l}),r.tooltip.mode===$t.f3.None||(0,ve.jsx)(G.TooltipPlugin,{data:n,config:e,mode:r.tooltip.mode,sortOrder:r.tooltip.sort,sync:u,timeZone:a}),t.annotations&&(0,ve.jsx)(Bn,{annotations:t.annotations,config:e,timeZone:a}),x?(0,ve.jsx)(Dn,{data:n,timeZone:a,config:e,children:t=>{let{startAnnotating:s}=t;return(0,ve.jsx)(qn,{data:n,config:e,timeZone:a,replaceVariables:d,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(e,t)=>{t&&s({coords:t.coords})}}]}]})}}):(0,ve.jsx)(qn,{data:n,config:e,timeZone:a,replaceVariables:d,defaultItems:[]}),t.annotations&&(0,ve.jsx)(na,{config:e,exemplars:t.annotations,timeZone:a,getFieldLinks:f}),g&&p&&(0,ve.jsx)(da,{config:e,fieldConfig:o,onThresholdsChange:p}),(0,ve.jsx)(sa,{config:e,onChangeTimeRange:l})]})})})).setPanelChangeHandler(((e,t,n,a)=>{if("graph"===t&&n.angular){const{fieldConfig:t,options:s}=function(e){var t,n,a,s,i,r,o,l;const d=null!==(t=null===(n=e.fieldConfig)||void 0===n?void 0:n.overrides)&&void 0!==t?t:[],c=null!==(a=e.yaxes)&&void 0!==a?a:[];let u=_r(c[0]);var h;null!==(s=e.fieldConfig)&&void 0!==s&&s.defaults&&(u=Object.assign({},null===(h=e.fieldConfig)||void 0===h?void 0:h.defaults,u));const p={fill:e.dashes?"dash":"solid",dash:[null!==(i=e.dashLength)&&void 0!==i?i:10,null!==(r=e.spaceLength)&&void 0!==r?r:10]};if(e.aliasColors)for(const t of Object.keys(e.aliasColors)){const n=e.aliasColors[t];n&&d.push({matcher:{id:q.FieldMatcherID.byName,options:t},properties:[{id:q.FieldConfigProperty.Color,value:{mode:q.FieldColorModeId.Fixed,fixedColor:n}}]})}let g=!1;if(null!==(o=e.seriesOverrides)&&void 0!==o&&o.length)for(const t of e.seriesOverrides){if(!t.alias)continue;const e={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(t.alias)?q.FieldMatcherID.byRegexp:q.FieldMatcherID.byName,options:t.alias},properties:[]};let n;for(const a of Object.keys(t)){const s=t[a];switch(a){case"alias":case"$$hashKey":break;case"yaxis":if(2===s){Ur(u,_r(c[1]),e.properties)}break;case"fill":e.properties.push({id:"custom.fillOpacity",value:10*s});break;case"fillBelowTo":g=!0,e.properties.push({id:"custom.fillBelowTo",value:s});break;case"fillGradient":s&&(e.properties.push({id:"custom.fillGradient",value:"opacity"}),e.properties.push({id:"custom.fillOpacity",value:10*s}));break;case"points":e.properties.push({id:"custom.showPoints",value:s?$t.Jp.Always:$t.Jp.Never});break;case"bars":s?(e.properties.push({id:"custom.drawStyle",value:$t.l8.Bars}),e.properties.push({id:"custom.fillOpacity",value:100})):e.properties.push({id:"custom.drawStyle",value:$t.l8.Line});break;case"lines":e.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":e.properties.push({id:"custom.lineWidth",value:s});break;case"pointradius":e.properties.push({id:"custom.pointSize",value:2+2*s});break;case"dashLength":case"spaceLength":case"dashes":switch(n||(n={fill:p.fill,dash:[...p.dash]}),a){case"dashLength":n.dash[0]=s;break;case"spaceLength":n.dash[1]=s;break;case"dashes":n.fill=s?"dash":"solid"}break;case"stack":e.properties.push({id:"custom.stacking",value:{mode:$t.o0.Normal,group:s}});break;case"color":e.properties.push({id:"color",value:{fixedColor:s,mode:q.FieldColorModeId.Fixed}});break;case"transform":e.properties.push({id:"custom.transform",value:"negative-Y"===s?$t.pR.NegativeY:$t.pR.Constant});break;default:console.log("Ignore override migration:",t.alias,a,s)}}n&&e.properties.push({id:"custom.lineStyle",value:n}),e.properties.length&&d.push(e)}const m=null!==(l=u.custom)&&void 0!==l?l:{};m.drawStyle=e.bars?$t.l8.Bars:e.lines?$t.l8.Line:$t.l8.Points,e.points?(m.showPoints=$t.Jp.Always,(0,F.isNumber)(e.pointradius)&&(m.pointSize=2+2*e.pointradius)):m.drawStyle!==$t.l8.Points&&(m.showPoints=$t.Jp.Never);m.lineWidth=e.linewidth,"solid"!==p.fill&&(m.lineStyle=p);g?m.fillOpacity=35:(0,F.isNumber)(e.fill)&&(m.fillOpacity=10*e.fill);(0,F.isNumber)(e.fillGradient)&&e.fillGradient>0&&(m.gradientMode=$t.FI.Opacity,m.fillOpacity=10*e.fillGradient);m.spanNulls=e.nullPointMode===q.NullValueMode.Ignore,e.steppedLine&&(m.lineInterpolation=$t.KC.StepAfter);m.drawStyle===$t.l8.Bars&&(m.fillOpacity=100);e.stack&&(m.stacking={mode:$t.o0.Normal,group:mn.r.stacking.group});u.custom=(0,F.omitBy)(m,F.isNil),u.nullValueMode=e.nullPointMode;const f={legend:{displayMode:$t.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:$t.f3.Single,sort:$t.As.None}},v=e.legend;if(v){if(v.show?f.legend.displayMode=v.alignAsTable?$t.jK.Table:$t.jK.List:f.legend.showLegend=!1,v.rightSide&&(f.legend.placement="right"),e.legend.values){const t=(0,F.pickBy)(e.legend);f.legend.calcs=function(e){const t=[];for(const n of Object.keys(e)){const e=q.fieldReducers.getIfExists(n);e&&t.push(e.id)}return t}(t)}e.legend.sideWidth&&(f.legend.width=e.legend.sideWidth)}const b=e.tooltip;if(b&&(void 0!==b.shared&&(f.tooltip.mode=b.shared?$t.f3.Multi:$t.f3.Single),void 0!==b.sort&&b.shared))switch(b.sort){case 1:f.tooltip.sort=$t.As.Ascending;break;case 2:f.tooltip.sort=$t.As.Descending;break;default:f.tooltip.sort=$t.As.None}if(e.thresholds&&e.thresholds.length>0){let t=[],n=!1,a=!1;const s=e.thresholds.sort(((e,t)=>e.value>t.value?1:-1));for(let e=0;e<s.length;e++){const i=s[e],r=s.length>e+1?s[e+1]:null;i.fill&&(n=!0),i.line&&(a=!0),"gt"===i.op&&t.push({value:i.value,color:zr(i)}),"lt"===i.op&&(0===t.length&&t.push({value:-1/0,color:zr(i)}),r&&"gt"===r.op&&r.value>i.value?t.push({value:i.value,color:"transparent"}):r&&"lt"===r.op?t.push({value:i.value,color:zr(r)}):t.push({value:i.value,color:"transparent"}))}t.length>0&&t[0].value!==-1/0&&t.unshift({color:"transparent",value:-1/0});let i=n?$t.i3.Area:$t.i3.Line;a&&n&&(i=$t.i3.LineAndArea),u.custom.thresholdsStyle={mode:i},u.thresholds={mode:q.ThresholdsMode.Absolute,steps:t}}e.xaxis&&!1===e.xaxis.show&&"time"===e.xaxis.mode&&d.push({matcher:{id:q.FieldMatcherID.byType,options:q.FieldType.time},properties:[{id:"custom.axisPlacement",value:$t.LB.Hidden}]});return{fieldConfig:{defaults:(0,F.omitBy)(u,F.isNil),overrides:d},options:f}}(Object.assign({},n.angular,{fieldConfig:a}));return e.fieldConfig=t,e.alert=n.angular.alert,s}return function(e){var t,n,a,s,i;void 0!==(null===(t=e.fieldConfig)||void 0===t||null===(n=t.defaults)||void 0===n||null===(a=n.custom)||void 0===a||null===(s=a.hideFrom)||void 0===s?void 0:s.graph)&&(e.fieldConfig.defaults.custom.hideFrom.viz=e.fieldConfig.defaults.custom.hideFrom.graph,delete e.fieldConfig.defaults.custom.hideFrom.graph);null!==(i=e.fieldConfig)&&void 0!==i&&i.overrides&&(e.fieldConfig.overrides=e.fieldConfig.overrides.map((e=>(e.properties=e.properties.map((e=>("custom.hideFrom"===e.id&&e.value.graph&&(e.value.viz=e.value.graph,delete e.value.graph),e))),e))))}(e),{}})).useFieldConfig((0,mn.F)(mn.r)).setPanelOptions((e=>{G.commonOptionsBuilder.addTooltipOptions(e),G.commonOptionsBuilder.addLegendOptions(e),e.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Vr,defaultValue:void 0})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasTimeField||!t.hasNumberField||t.rowCountTotal<2)return;const n=e.getListAppender({name:dn.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{var t,n,a;(e.options.legend.showLegend=!1,(null===(t=e.fieldConfig)||void 0===t||null===(n=t.defaults.custom)||void 0===n?void 0:n.drawStyle)!==$t.l8.Bars)&&(e.fieldConfig.defaults.custom.lineWidth=Math.max(null!==(a=e.fieldConfig.defaults.custom.lineWidth)&&void 0!==a?a:1,2))}}});if(n.append({name:dn.y.LineChart}),t.rowCountMax<200&&n.append({name:dn.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:$t.KC.Smooth}},overrides:[]}}),1===t.numberFieldCount)return n.append({name:dn.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),n.append({name:dn.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:q.FieldColorModeId.ContinuousGrYlRd},custom:{gradientMode:$t.FI.Scheme,lineInterpolation:$t.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),void(t.rowCountMax<100&&(n.append({name:dn.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:$t.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:$t.FI.Hue}},overrides:[]}}),n.append({name:dn.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:q.FieldColorModeId.ContinuousGrYlRd},custom:{drawStyle:$t.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:$t.FI.Scheme}},overrides:[]}})));n.append({name:dn.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:$t.o0.Normal,group:"A"}}},overrides:[]}}),n.append({name:dn.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:$t.o0.Percent,group:"A"}}},overrides:[]}}),t.rowCountTotal/t.numberFieldCount<100&&(n.append({name:dn.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:$t.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:$t.FI.Hue,stacking:{mode:$t.o0.Normal,group:"A"}}},overrides:[]}}),n.append({name:dn.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:$t.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:$t.FI.Hue,stacking:{mode:$t.o0.Percent,group:"A"}}},overrides:[]}}))}}).setDataSupport({annotations:!0,alertStates:!0});var qr,Zr=n(31741),Gr=n(39306),Kr=n(12579),Qr=n(61597),Jr=n(91079);const Yr={wrapper:T.css`
    height: 100%;
    overflow: scroll;
  `},Xr=new q.PanelPlugin((e=>{var t,n;let{data:a}=e;const s=(0,$.createRef)(),i=(0,$.useMemo)((()=>(0,Jr.N)(a.series[0])),[a.series]),{search:r,setSearch:o,spanFindMatches:l}=(0,Qr.R)(null==i?void 0:i.spans),[d,c]=(0,$.useState)(""),[u,h]=(0,$.useState)(""),p=(0,Ae.Z)((async()=>{var e,t;return await(0,Z.getDataSourceSrv)().get(null===(e=a.request)||void 0===e||null===(t=e.targets[0].datasource)||void 0===t?void 0:t.uid)})),g=document.getElementsByClassName(Yr.wrapper)[0];return a&&a.series.length&&i?(0,ve.jsxs)("div",{className:Yr.wrapper,children:[(0,ve.jsx)("div",{ref:s}),"trace"===(null===(t=a.series[0])||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.preferredVisualisationType)?(0,ve.jsx)(Zr.Z,{navigable:!0,searchValue:r,setSearch:o,spanFindMatches:l,searchBarSuffix:u,setSearchBarSuffix:h,focusedSpanIdForSearch:d,setFocusedSpanIdForSearch:c}):null,(0,ve.jsx)(Kr.m,{dataFrames:a.series,scrollElement:g,traceProp:i,spanFindMatches:l,search:r,focusedSpanIdForSearch:d,queryResponse:a,datasource:p.value,topOfViewRef:s,topOfViewRefType:Gr.l4.Panel})]}):qr||(qr=(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsx)("p",{children:"No data found in response"})}))})),eo=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],to=(0,G.stylesFactory)((e=>({container:T.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${e.spacing.lg};

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        padding: 0 ${e.spacing.sm};
      }
    `,title:T.css`
      margin-bottom: 0;

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        margin-bottom: ${e.spacing.sm};
      }

      @media only screen and (max-width: ${e.breakpoints.md}) {
        font-size: ${e.typography.heading.h2};
      }
      @media only screen and (max-width: ${e.breakpoints.sm}) {
        font-size: ${e.typography.heading.h3};
      }
    `,help:T.css`
      display: flex;
      align-items: baseline;
    `,helpText:T.css`
      margin-right: ${e.spacing.md};
      margin-bottom: 0;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        font-size: ${e.typography.heading.h4};
      }

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        display: none;
      }
    `,helpLinks:T.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:T.css`
      margin-right: ${e.spacing.md};
      text-decoration: underline;
      text-wrap: no-wrap;

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        margin-right: 8px;
      }
    `}))),no=new q.PanelPlugin((()=>{const e=to((0,G.useTheme)());return(0,ve.jsxs)("div",{className:e.container,children:[(0,ve.jsx)("h1",{className:e.title,children:"Welcome to Grafana"}),(0,ve.jsxs)("div",{className:e.help,children:[(0,ve.jsx)("h3",{className:e.helpText,children:"Need help?"}),(0,ve.jsx)("div",{className:e.helpLinks,children:eo.map(((t,n)=>(0,ve.jsx)("a",{className:e.helpLink,href:`${t.href}?utm_source=grafana_gettingstarted`,children:t.label},`${t.label}-${n}`)))})]})]})})).setNoPadding();var ao=n(85282);class so extends $.PureComponent{constructor(){var e,t,n;super(...arguments),e=this,t="style",n=ro(K.vc.theme2),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const{series:e,data:t,rowIndex:n}=this.props;if(!e||null==n)return null;const a=e.frame(t);return(0,ve.jsx)("table",{className:this.style.infoWrap,children:(0,ve.jsx)("tbody",{children:a.fields.map(((e,t)=>(0,ve.jsxs)("tr",{className:undefined===e?this.style.highlight:"",children:[(0,ve.jsxs)("th",{children:[(0,q.getFieldDisplayName)(e,a),":"]}),(0,ve.jsx)("td",{children:io(e,n)})]},`${t}/${n}`)))})})}}function io(e,t){const n=e.values.get(t);return e.display?(0,q.formattedValueToString)(e.display(n)):`${n}`}const ro=(0,G.stylesFactory)((e=>({infoWrap:T.css`
    padding: 8px;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:T.css`
    background: ${e.colors.action.hover};
  `})));let oo,lo;function co(e){return e.type===q.FieldType.number}function uo(e){return e?t=>e===t||!(!e.state||e.state!==t.state):()=>!1}function ho(e){if(!e)return()=>!1;const t=uo(e);return e=>!t(e,void 0,void 0)}!function(e){e[e.NoData=0]="NoData",e[e.BadFrameSelection=1]="BadFrameSelection",e[e.XNotFound=2]="XNotFound"}(oo||(oo={})),function(e){e.None="none",e.Linear="linear"}(lo||(lo={}));const po={line:lo.None,lineWidth:1,lineStyle:{fill:"solid"},point:$t.Jp.Auto,pointSize:{fixed:5,min:1,max:20},axisPlacement:$t.LB.Auto};function go(e,t,n,a){let s,i;try{s=function(e,t){var n,a;let s=0;if(!t.length)throw"missing data";var i;if("explicit"===e.mode&&null!==(i=e.series)&&void 0!==i&&i.length)for(const n of e.series){if(null==n||!n.x)throw"Select X dimension";if(null==n||!n.y)throw"Select Y dimension";for(let e=0;e<t.length;e++){const a=t[e],i=(0,Wt.rj)(a,n.x);if(null!=i){var r,o,l;const d=(0,Wt.rj)(a,n.y);if(null==d)throw"Y must be in the same frame as X";const c={pointColorFixed:null===(r=n.pointColor)||void 0===r?void 0:r.fixed,pointColorIndex:(0,Wt.rj)(a,null===(o=n.pointColor)||void 0===o?void 0:o.field),pointSizeConfig:n.pointSize,pointSizeIndex:(0,Wt.rj)(a,null===(l=n.pointSize)||void 0===l?void 0:l.field)};return[mo(s++,t,e,i,d,c)]}}}const d=null!==(n=e.dims)&&void 0!==n?n:{},c=null!==(a=d.frame)&&void 0!==a?a:0,u=t[c],h=[];let p=(0,Wt.rj)(u,d.x);for(let e=0;e<u.fields.length;e++)if(co(u.fields[e])){if(null==p||e===p){p=e;continue}if(d.exclude&&d.exclude.includes((0,q.getFieldDisplayName)(u.fields[e],u,t)))continue;h.push(e)}if(null==p)throw"Missing X dimension";if(!h.length)throw"No Y values";return h.map((e=>mo(s++,t,c,p,e,{})))}(e,t()),i=fo(t,s,n,a)}catch(e){console.log("prepScatter ERROR",e);return{error:e instanceof Error?e.message:"Unknown error in prepScatter",series:[]}}return{series:s,builder:i}}function mo(e,t,n,a,s,i){var r,o,l,d,c,u,h,p;const g=t[n],m=g.fields[s];let f=null!==(r=m.state)&&void 0!==r?r:{};f.seriesIndex=e,m.state=f;let v=i.pointColorFixed?Z.config.theme2.visualization.getColorByName(i.pointColorFixed):(0,q.getFieldSeriesColor)(m,Z.config.theme2).color,b=()=>v;const x=Object.assign({},po,m.config.custom);let y=q.fieldColorModeRegistry.get(q.FieldColorModeId.PaletteClassic);if(i.pointColorIndex){const e=t[n].fields[i.pointColorIndex];if(e){var w;const t=null!==(w=e.display)&&void 0!==w?w:(0,q.getDisplayProcessor)({field:e,theme:Z.config.theme2});if(y=(0,q.getFieldColorModeForField)(m),y.isByValue){const e=i.pointColorIndex;b=n=>n.fields[e].values.toArray().map((e=>t(e).color))}else v=y.getCalculator(e,Z.config.theme2)(e.values.get(0),1),b=()=>v}}let j=i.pointSizeConfig,S=null!==(o=null!==(l=null===(d=i.pointSizeConfig)||void 0===d?void 0:d.fixed)&&void 0!==l?l:null===(c=m.config.custom)||void 0===c||null===(u=c.pointSizeConfig)||void 0===u?void 0:u.fixed)&&void 0!==o?o:5,C=()=>S;i.pointSizeIndex?C=e=>{const t=(0,Wt.A)(e.fields[i.pointSizeIndex],i.pointSizeConfig,Wt.B5.Quadratic),n=Array(e.length);for(let a=0;a<e.length;a++)n[a]=t.get(a);return n}:j={fixed:S,min:S,max:S};const k=(0,q.getFieldDisplayName)(m,g,t);return{name:k,frame:e=>e[n],x:e=>e.fields[a],y:e=>e.fields[s],legend:e=>[{label:k,color:v,getItemKey:()=>k,yAxis:s}],line:null!==(h=x.line)&&void 0!==h?h:lo.None,lineWidth:null!==(p=x.lineWidth)&&void 0!==p?p:2,lineStyle:x.lineStyle,lineColor:()=>v,point:x.point,pointSize:C,pointColor:b,pointSymbol:(e,t)=>"circle",label:$t.Jp.Never,labelValue:()=>"",hints:{pointSize:j,pointColor:{mode:y}}}}const fo=(e,t,n,a)=>{var s,i;let r,o;let l=(d={disp:{size:{values:(e,t)=>e.data[t][2]},color:{values:(e,t)=>e.data[t][3],alpha:(e,t)=>e.data[t][4]}},each:(e,t,n,a,s,i,o)=>{a-=e.bbox.left,s-=e.bbox.top,r.add({x:a,y:s,w:i,h:o,sidx:t,didx:n})}},(n,a,s,i)=>(_t.Z.orient(n,a,((s,i,r,o,l,c,u,h,p,g,m,f,v,b,x)=>{var y;const w=t[a-1];let j=n.data[a],S=w.line!==lo.None,C=w.point===$t.Jp.Always;C||w.point!==$t.Jp.Auto||(C=j[0].length<1e3),C||S||(S=!0),n.ctx.save(),n.ctx.rect(n.bbox.left,n.bbox.top,n.bbox.width,n.bbox.height),n.ctx.clip(),n.ctx.fillStyle=s.fill(),n.ctx.strokeStyle=s.stroke(),n.ctx.lineWidth=1;let k=2*Math.PI,T=o.key,I=l.key,O=w.hints.pointSize;const N=w.hints.pointColor.mode.isByValue;let F=(null!==(y=O.max)&&void 0!==y?y:O.fixed)*devicePixelRatio,D=n.posToVal(-F/2,T),P=n.posToVal(n.bbox.width/devicePixelRatio+F/2,T),A=n.posToVal(n.bbox.height/devicePixelRatio+F/2,I),M=n.posToVal(-F/2,I),R=d.disp.size.values(n,a),$=d.disp.color.values(n,a),L=d.disp.color.alpha(n,a),E=S?new Path2D:null;for(let e=0;e<j[0].length;e++){let t=j[0][e],s=j[1][e],i=R[e]*devicePixelRatio;if(t>=D&&t<=P&&s>=A&&s<=M){let r=c(t,o,g,h),f=u(s,l,m,p);S&&E.lineTo(r,f),C&&(n.ctx.moveTo(r+i/2,f),n.ctx.beginPath(),n.ctx.arc(r,f,i/2,0,k),N&&(n.ctx.fillStyle=L[e],n.ctx.strokeStyle=$[e]),n.ctx.fill(),n.ctx.stroke(),d.each(n,a,e,r-i/2-.5,f-i/2-.5,i+1,i+1))}}if(S){let t=w.frame(e());n.ctx.strokeStyle=w.lineColor(t),n.ctx.lineWidth=w.lineWidth*devicePixelRatio;const{lineStyle:a}=w;var V;a&&"solid"!==a.fill&&("dot"===a.fill&&(n.ctx.lineCap="round"),n.ctx.setLineDash(null!==(V=a.dash)&&void 0!==V?V:[10,10])),n.ctx.stroke(E)}n.ctx.restore()})),null));var d;const c=new G.UPlotConfigBuilder;let u;c.setCursor({drag:{setScale:!0},dataIdx:(e,t)=>{if(1===t){o=null;let t=1/0,n=e.cursor.left*devicePixelRatio,a=e.cursor.top*devicePixelRatio;r.get(n,a,1,1,(e=>{if((0,Kt.Pn)(n,a,e.x,e.y,e.x+e.w,e.y+e.h)){let s=e.x+e.w/2,i=e.y+e.h/2,r=s-n,l=i-a,d=Math.sqrt(r**2+l**2);d<=e.w/2&&d<=t&&(t=d,o=e)}}))}return o&&t===o.sidx?o.didx:null},points:{size:(e,t)=>o&&t===o.sidx?o.w/devicePixelRatio:0,fill:(e,t)=>"rgba(255,255,255,0.4)"}}),c.addHook("init",((e,t)=>{e.over.style.overflow="hidden"})),c.addHook("syncRect",((e,t)=>{u=t})),c.addHook("setLegend",(e=>{if(null!=e.cursor.idxs)for(let t=0;t<e.cursor.idxs.length;t++){const n=e.cursor.idxs[t];if(null!=n)return void a({scatterIndex:t-1,xIndex:n,pageX:u.left+e.cursor.left,pageY:u.top+e.cursor.top})}a(void 0)})),c.addHook("drawClear",(e=>{r=r||new Kt.lW(0,0,e.bbox.width,e.bbox.height),r.clear(),e.series.forEach(((e,t)=>{t>0&&(e._paths=null)}))})),c.setMode(2);const h=e();let p=t[0].x(t[0].frame(h));return c.addScale({scaleKey:"x",isTime:!1,orientation:$t.wN.Horizontal,direction:$t.bQ.Right,range:(e,t,n)=>[t,n]}),c.addAxis({scaleKey:"x",placement:(null===(s=p.config.custom)||void 0===s?void 0:s.axisPlacement)!==$t.LB.Hidden?$t.LB.Bottom:$t.LB.Hidden,show:(null===(i=p.config.custom)||void 0===i?void 0:i.axisPlacement)!==$t.LB.Hidden,theme:n,label:p.config.custom.axisLabel}),t.forEach((e=>{var t,a;let s=e.frame(h),i=e.y(s);const r=e.lineColor(s),o=function(e,t){const n=t(e);if(Array.isArray(n))return n[0];return n}(s,e.pointColor);let d=null!==(t=i.config.unit)&&void 0!==t?t:"y";var u;(c.addScale({scaleKey:d,orientation:$t.wN.Vertical,direction:$t.bQ.Up,range:(e,t,n)=>[t,n]}),(null===(a=i.config.custom)||void 0===a?void 0:a.axisPlacement)!==$t.LB.Hidden)&&c.addAxis({scaleKey:d,theme:n,placement:null===(u=i.config.custom)||void 0===u?void 0:u.axisPlacement,label:i.config.custom.axisLabel,values:(e,t)=>t.map((e=>i.display(e).text))});c.addSeries({facets:[{scale:"x",auto:!0},{scale:d,auto:!0}],pathBuilder:l,theme:n,scaleKey:"",lineColor:r,fillColor:(0,qt.alpha)(o,.5)})})),c};function vo(e,t,n){return e.error?[null]:[null,...e.series.map(((e,n)=>{const a=e.frame(t);let s,i;const r=e.pointColor(a);return Array.isArray(r)?(s=r,i=r.map((e=>(0,qt.alpha)(e,.5)))):(s=Array(a.length).fill(r),i=Array(a.length).fill((0,qt.alpha)(r,.5))),[e.x(a).values.toArray(),e.y(a).values.toArray(),bo(a,e.pointSize),s,i]}))]}function bo(e,t){const n=t(e);return Array.isArray(n)?n:Array(e.length).fill(n)}function xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class yo extends $.PureComponent{constructor(){super(...arguments),xo(this,"state",{series:[]}),xo(this,"scatterHoverCallback",(e=>{this.setState({hover:e})})),xo(this,"getData",(()=>this.props.data.series)),xo(this,"initSeries",(()=>{const{options:e,data:t}=this.props,n=go(e,this.getData,Z.config.theme2,this.scatterHoverCallback);n.series.length&&t.series&&(n.facets=vo(n,t.series),n.error=void 0),this.setState(n)})),xo(this,"initFacets",(()=>{this.setState({facets:vo(this.state,this.props.data.series)})})),xo(this,"renderLegend",(()=>{const{data:e}=this.props,{series:t}=this.state,n=[];for(const a of t){const t=a.frame(e.series);if(t)for(const e of a.legend(t))n.push(e)}return(0,ve.jsx)(G.VizLayout.Legend,{placement:"bottom",children:(0,ve.jsx)(G.VizLegend,{placement:"bottom",items:n,displayMode:G.LegendDisplayMode.List})})}))}componentDidMount(){this.initSeries()}componentDidUpdate(e){const{options:t,data:n}=this.props;t!==e.options||n.structureRev!==e.data.structureRev?this.initSeries():n!==e.data&&this.initFacets()}render(){const{width:e,height:t,timeRange:n,data:a}=this.props,{error:s,facets:i,builder:r,hover:o,series:l}=this.state;return s||!r?(0,ve.jsx)("div",{className:"panel-empty",children:(0,ve.jsx)("p",{children:s})}):(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(G.VizLayout,{width:e,height:t,legend:this.renderLegend(),children:(e,t)=>(0,ve.jsx)(G.UPlotChart,{config:r,data:i,width:e,height:t,timeRange:n})}),(0,ve.jsx)(G.Portal,{children:o&&(0,ve.jsx)(G.VizTooltipContainer,{position:{x:o.pageX,y:o.pageY},offset:{x:10,y:10},children:(0,ve.jsx)(so,{series:l[o.scatterIndex],rowIndex:o.xIndex,data:a.series})})})]})}}var wo,jo,So,Co,ko,To,Io;const Oo=e=>{var t;let{value:n,onChange:a,context:s}=e;const i=(0,$.useMemo)((()=>{var e;return null!=s&&null!==(e=s.data)&&void 0!==e&&e.length?s.data.map(((e,t)=>({value:t,label:(0,q.getFrameDisplayName)(e,t)}))):[{value:0,label:"First result"}]}),[s.data]),r=(0,$.useMemo)((()=>function(e,t){var n;if(!t||!t.length)return{error:oo.NoData};e||(e={frame:0});let a=t[null!==(n=e.frame)&&void 0!==n?n:0];if(!a)return{error:oo.BadFrameSelection};let s=-1;for(let n=0;n<a.fields.length;n++){const i=a.fields[n];if(e.x&&e.x===(0,q.getFieldDisplayName)(i,a,t)){s=n;break}if(co(i)&&!e.x){s=n;break}}let i=!1;const r=a.fields[s],o=[r];for(const n of a.fields)if(n.type===q.FieldType.time&&(i=!0),n!==r&&co(n)){if(e.exclude){const s=(0,q.getFieldDisplayName)(n,a,t);if(e.exclude.includes(s))continue}o.push(n)}return{x:r,fields:{x:uo(r),y:ho(r)},frame:Object.assign({},a,{fields:o}),hasData:a.fields.length>0,hasTime:i}}(n,s.data)),[s.data,n]),o=(0,$.useMemo)((()=>{var e;const t={label:"?",value:void 0},a={numberFields:[t],yFields:[],xAxis:null!=n&&n.x?{label:`${n.x} (Not found)`,value:n.x}:t},i=s.data?s.data[null!==(e=null==n?void 0:n.frame)&&void 0!==e?e:0]:void 0;if(i){const e=r.x?(0,q.getFieldDisplayName)(r.x,r.frame,s.data):void 0;for(let r of i.fields)if(co(r)){const l=(0,q.getFieldDisplayName)(r,i,s.data),d={label:l,value:l};var o;if(a.numberFields.push(d),"?"===t.label&&(t.label=`${l} (First)`),null!=n&&n.x&&l===n.x&&(a.xAxis=d),e!==l)a.yFields.push({label:l,value:null==n||null===(o=n.exclude)||void 0===o?void 0:o.includes(l)})}}return a}),[r,s.data,n]),l=(0,G.useTheme)(),d=No(l);return s.data?(0,ve.jsxs)("div",{children:[(0,ve.jsx)(G.Select,{options:i,value:null!==(t=i.find((e=>e.value===(null==n?void 0:n.frame))))&&void 0!==t?t:i[0],onChange:e=>{a(Object.assign({},n,{frame:e.value}))}}),jo||(jo=(0,ve.jsx)("br",{})),So||(So=(0,ve.jsx)(G.Label,{children:"X Field"})),(0,ve.jsx)(G.Select,{options:o.numberFields,value:o.xAxis,onChange:e=>{a(Object.assign({},n,{x:e.value}))}}),Co||(Co=(0,ve.jsx)("br",{})),ko||(ko=(0,ve.jsx)(G.Label,{children:"Y Fields"})),(0,ve.jsx)("div",{children:o.yFields.map((e=>(0,ve.jsxs)("div",{className:d.row,children:[(0,ve.jsx)(G.IconButton,{name:e.value?"eye-slash":"eye",onClick:()=>{const t=null!=n&&n.exclude?[...n.exclude]:[];let s=t.indexOf(e.label);s<0?t.push(e.label):t.splice(s,1),a(Object.assign({},n,{exclude:t}))}}),e.label]},e.label)))}),To||(To=(0,ve.jsx)("br",{}))," ",Io||(Io=(0,ve.jsx)("br",{}))]}):wo||(wo=(0,ve.jsx)("div",{children:"No data..."}))},No=(0,G.stylesFactory)((e=>({sorter:T.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:T.css`
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.sm};
    background: ${e.colors.bg2};
    min-height: ${e.spacing.formInputHeight}px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${e.colors.formInputBorder};
  `})));var Fo=n(69783);const Do=void 0;const Po=new q.PanelPlugin(yo).useFieldConfig((Ao=po,{standardOptions:{[q.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:q.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{var t;e.addRadio({path:"point",name:"Points",category:Do,defaultValue:Ao.point,settings:{options:G.graphFieldOptions.showPoints}}).addSliderInput({path:"pointSize.fixed",name:"Point size",category:Do,defaultValue:null===(t=Ao.pointSize)||void 0===t?void 0:t.fixed,settings:{min:1,max:100,step:1},showIf:e=>e.point!==$t.Jp.Never}).addRadio({path:"line",name:"Lines",category:Do,defaultValue:Ao.line,settings:{options:[{label:"None",value:lo.None},{label:"Linear",value:lo.Linear}]}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:Do,showIf:e=>e.line!==lo.None,editor:Fo.j,override:Fo.j,process:q.identityOverrideProcessor,shouldApply:e=>e.type===q.FieldType.number}).addSliderInput({path:"lineWidth",name:"Line width",category:Do,defaultValue:Ao.lineWidth,settings:{min:0,max:10,step:1},showIf:e=>e.line!==lo.None}),G.commonOptionsBuilder.addAxisConfig(e,Ao),G.commonOptionsBuilder.addHideFrom(e)}})).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",defaultValue:"single",settings:{options:[{value:"xy",label:"XY",description:"No changes to saved model since 8.0"},{value:"explicit",label:"Explicit"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"Data",editor:Oo,showIf:e=>"xy"===e.mode}).addFieldNamePicker({path:"series[0].x",name:"X Field",showIf:e=>"explicit"===e.mode}).addFieldNamePicker({path:"series[0].y",name:"Y Field",showIf:e=>"explicit"===e.mode}).addCustomEditor({id:"seriesZerox.pointColor",path:"series[0].pointColor",name:"Point color",editor:ao.Lm,settings:{},defaultValue:{},showIf:e=>"explicit"===e.mode}).addCustomEditor({id:"seriesZerox.pointSize",path:"series[0].pointSize",name:"Point size",editor:ao.cL,settings:{min:1,max:50},defaultValue:{fixed:5,min:1,max:50},showIf:e=>"explicit"===e.mode}),G.commonOptionsBuilder.addTooltipOptions(e),G.commonOptionsBuilder.addLegendOptions(e)}));var Ao;if(Z.config.featureToggles.useLegacyHeatmapPanel){const e=Z.config.panels.heatmap,t=Z.config.panels["heatmap-old"];t.id=e.id,t.module=e.module,t.state=e.state,Z.config.panels.heatmap=t}delete Z.config.panels["heatmap-old"];const Mo={"app/plugins/datasource/graphite/module":async()=>await n.e(7494).then(n.bind(n,67276)),"app/plugins/datasource/cloudwatch/module":async()=>await n.e(8831).then(n.bind(n,25090)),"app/plugins/datasource/dashboard/module":async()=>await n.e(3394).then(n.bind(n,43394)),"app/plugins/datasource/elasticsearch/module":async()=>await n.e(9897).then(n.bind(n,22695)),"app/plugins/datasource/opentsdb/module":async()=>await Promise.all([n.e(3964),n.e(3168)]).then(n.bind(n,29078)),"app/plugins/datasource/grafana/module":async()=>await n.e(7537).then(n.bind(n,94115)),"app/plugins/datasource/influxdb/module":async()=>await n.e(5783).then(n.bind(n,7462)),"app/plugins/datasource/loki/module":async()=>await Promise.all([n.e(5704),n.e(516),n.e(1410),n.e(1598)]).then(n.bind(n,17882)),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([n.e(611),n.e(890)]).then(n.bind(n,20481)),"app/plugins/datasource/zipkin/module":async()=>await Promise.all([n.e(611),n.e(4023)]).then(n.bind(n,1275)),"app/plugins/datasource/mixed/module":async()=>await n.e(2001).then(n.bind(n,96862)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([n.e(3459),n.e(4251)]).then(n.bind(n,38667)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([n.e(3459),n.e(534)]).then(n.bind(n,67001)),"app/plugins/datasource/mssql/module":async()=>await n.e(5032).then(n.bind(n,33171)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([n.e(516),n.e(7004)]).then(n.bind(n,42120)),"app/plugins/datasource/testdata/module":async()=>await n.e(319).then(n.bind(n,23665)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([n.e(9137),n.e(3549)]).then(n.bind(n,44141)),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await Promise.all([n.e(6350),n.e(2364)]).then(n.bind(n,66350)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([n.e(8876),n.e(611),n.e(1410),n.e(4156)]).then(n.bind(n,86396)),"app/plugins/datasource/alertmanager/module":async()=>await n.e(6795).then(n.bind(n,69473)),"app/plugins/panel/text/module":w,"app/plugins/panel/timeseries/module":j,"app/plugins/panel/state-timeline/module":b,"app/plugins/panel/status-history/module":x,"app/plugins/panel/candlestick/module":l,"app/plugins/panel/graph/module":async()=>await Promise.all([n.e(3964),n.e(271),n.e(1260)]).then(n.bind(n,8717)),"app/plugins/panel/xychart/module":k,"app/plugins/panel/geomap/module":async()=>await Promise.all([n.e(8626),n.e(8096)]).then(n.bind(n,48443)),"app/plugins/panel/canvas/module":async()=>await Promise.all([n.e(7638),n.e(6324),n.e(3330)]).then(n.bind(n,47737)),"app/plugins/panel/icon/module":async()=>await Promise.all([n.e(6324),n.e(53)]).then(n.bind(n,94646)),"app/plugins/panel/dashlist/module":d,"app/plugins/panel/alertlist/module":s,"app/plugins/panel/annolist/module":i,"app/plugins/panel/heatmap/module":Z.config.featureToggles.useLegacyHeatmapPanel?async()=>await Promise.all([n.e(3964),n.e(271),n.e(5745)]).then(n.bind(n,45680)):async()=>await n.e(6987).then(n.bind(n,90991)),"app/plugins/panel/table/module":y,"app/plugins/panel/table-old/module":async()=>await n.e(6784).then(n.bind(n,75983)),"app/plugins/panel/news/module":m,"app/plugins/panel/live/module":p,"app/plugins/panel/stat/module":sr,"app/plugins/panel/debug/module":c,"app/plugins/panel/gettingstarted/module":u,"app/plugins/panel/gauge/module":Xa,"app/plugins/panel/piechart/module":v,"app/plugins/panel/bargauge/module":o,"app/plugins/panel/barchart/module":r,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":S,"app/plugins/panel/welcome/module":C,"app/plugins/panel/nodeGraph/module":f,"app/plugins/panel/histogram/module":h,"app/plugins/panel/alertGroups/module":a};var Ro=n(48722);n(89377),n(4027),n(59554),n(65103),n(85095),n(28844),n(26189),n(47825),n(7540);const $o=G;function Lo(e,t){Z.SystemJS.registerDynamic(e,[],!0,((e,n,a)=>{a.exports=t}))}$o.PanelPlugin=q.PanelPlugin,$o.DataSourcePlugin=q.DataSourcePlugin,$o.AppPlugin=q.AppPlugin,$o.DataSourceApi=q.DataSourceApi,Z.SystemJS.registry.set("plugin-loader",Z.SystemJS.newModule({locate:Ro.hf})),Z.SystemJS.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js",css:"vendor/plugin-css/css.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"}}}),Lo("@grafana/data",q),Lo("@grafana/ui",$o),Lo("@grafana/runtime",Z),Lo("lodash",D()),Lo("moment",A()),Lo("jquery",N()),Lo("d3",I),Lo("rxjs",z),Lo("rxjs/operators",_),Lo("react-router-dom",V),Lo("prismjs",R()),Lo("slate",U.ZP),Lo("slate-react",W.ZP),Lo("@grafana/slate-react",W.ZP),Lo("slate-plain-serializer",H.Z),Lo("react",$),Lo("react-dom",L),Lo("react-redux",E),Lo("redux",B),Lo("emotion",T),Lo("@emotion/css",T),Lo("app/features/dashboard/impression_store",{impressions:Y.Z,__esModule:!0}),Lo("app/core/services/backend_srv",{BackendSrv:J.y$,getBackendSrv:J.i}),Lo("app/core/utils/datemath",q.dateMath),Lo("app/core/utils/flatten",te),Lo("app/core/utils/kbn",ne.Z),Lo("app/core/utils/ticks",ae),Lo("app/core/config",K.ZP),Lo("app/core/time_series",ee.Z),Lo("app/core/time_series2",ee.Z),Lo("app/core/table_model",X.Z),Lo("app/core/app_events",Q.h$),Lo("app/core/core",{appEvents:Q.h$,contextSrv:Q.Vt,__esModule:!0});const Eo=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const e of Eo)Lo(e,{fakeDep:1});async function Vo(e,t){t&&(0,Ro.Vf)({path:e,version:t});const n=Mo[e];return n?"function"==typeof n?await n():n:Z.SystemJS.import(e)}function Bo(e){var t;return Vo(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((t=>{if(t.plugin){const n=t.plugin;return n.meta=e,n}if(t.Datasource){const n=new q.DataSourcePlugin(t.Datasource);return n.setComponentsFromLegacyExports(t),n.meta=e,n}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")}))}function zo(e){var t;return Vo(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((t=>{const n=t.plugin?t.plugin:new q.AppPlugin;return n.init(e),n.meta=e,n.setComponentsFromLegacyExports(t),n}))}},67220:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var a=n(90923);const s={changePassword:async function(e){try{await(0,a.getBackendSrv)().put("/api/user/password",e)}catch(e){console.error(e)}},revokeUserSession:async function(e){await(0,a.getBackendSrv)().post("/api/user/revoke-auth-token",{authTokenId:e})},loadUser:function(){return(0,a.getBackendSrv)().get("/api/user")},loadSessions:function(){return(0,a.getBackendSrv)().get("/api/user/auth-tokens")},loadOrgs:function(){return(0,a.getBackendSrv)().get("/api/user/orgs")},loadTeams:function(){return(0,a.getBackendSrv)().get("/api/user/teams")},setUserOrg:async function(e){await(0,a.getBackendSrv)().post("/api/user/using/"+e.orgId,{})},updateUserProfile:async function(e){try{await(0,a.getBackendSrv)().put("/api/user",e)}catch(e){console.error(e)}}}},10603:(e,t,n)=>{"use strict";n.d(t,{$S:()=>g,Ns:()=>m,PL:()=>v,Uk:()=>y,YT:()=>u,ZP:()=>k,aw:()=>b,p$:()=>x,qD:()=>f,rf:()=>c,z0:()=>w,zW:()=>h,zc:()=>p});var a=n(35140),s=n(82897),i=n(43215),r=n(78837),o=n(98163);const l={orgId:r.ZP.bootData.user.orgId,timeZone:r.ZP.bootData.user.timezone,weekStart:r.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},d=(0,a.oM)({name:"user/profile",initialState:l,reducers:{updateTimeZone:(e,t)=>{e.timeZone=t.payload.timeZone},updateWeekStart:(e,t)=>{e.weekStart=t.payload.weekStart},updateFiscalYearStartMonth:(e,t)=>{e.fiscalYearStartMonth=t.payload.fiscalYearStartMonth},setUpdating:(e,t)=>{e.isUpdating=t.payload.updating},userLoaded:(e,t)=>{e.user=t.payload.user},initLoadTeams:(e,t)=>{e.teamsAreLoading=!0},teamsLoaded:(e,t)=>{e.teams=t.payload.teams,e.teamsAreLoading=!1},initLoadOrgs:(e,t)=>{e.orgsAreLoading=!0},orgsLoaded:(e,t)=>{e.orgs=t.payload.orgs,e.orgsAreLoading=!1},initLoadSessions:(e,t)=>{e.sessionsAreLoading=!0},sessionsLoaded:(e,t)=>{const n=t.payload.sessions.sort(((e,t)=>Number(t.isActive)-Number(e.isActive)));e.sessions=n.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,i.dateTimeFormatTimeAgo)(e.seenAt),createdAt:e.createdAt,clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device}))),e.sessionsAreLoading=!1},userSessionRevoked:(e,t)=>{e.sessions=e.sessions.filter((e=>e.id!==t.payload.tokenId)),e.isUpdating=!1}}}),c=e=>async t=>{(0,s.set)(o.Vt,"user.fiscalYearStartMonth",e),t(C({fiscalYearStartMonth:e}))},u=e=>async t=>{var n,a;(0,s.isString)(e)&&!(0,s.isEmpty)(e)||(e=null===r.ZP||void 0===r.ZP||null===(n=r.ZP.bootData)||void 0===n||null===(a=n.user)||void 0===a?void 0:a.timezone);(0,s.set)(o.Vt,"user.timezone",e),t(j({timeZone:e}))},h=e=>async t=>{var n,a;(0,s.isString)(e)&&!(0,s.isEmpty)(e)||(e=null===r.ZP||void 0===r.ZP||null===(n=r.ZP.bootData)||void 0===n||null===(a=n.user)||void 0===a?void 0:a.weekStart);(0,s.set)(o.Vt,"user.weekStart",e),t(S({weekStart:e})),(0,i.setWeekStart)(e)},{setUpdating:p,initLoadOrgs:g,orgsLoaded:m,initLoadTeams:f,teamsLoaded:v,userLoaded:b,userSessionRevoked:x,initLoadSessions:y,sessionsLoaded:w,updateTimeZone:j,updateWeekStart:S,updateFiscalYearStartMonth:C}=d.actions,k=(d.reducer,{user:d.reducer})},78647:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,i:()=>s});const a=e=>e.timeZone,s=e=>e.fiscalYearStartMonth},42463:(e,t,n)=>{"use strict";n.d(t,{S:()=>s,f:()=>i});class a{constructor(){var e,t,n;n=[],(t="extraRenderActions")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}addExtraRenderAction(e){this.extraRenderActions=this.extraRenderActions.concat(e)}getAllExtraRenderAction(){return this.extraRenderActions}}const s=new a,i=new a},359:(e,t,n)=>{"use strict";n.d(t,{x:()=>F,t:()=>D});var a=n(23019),s=n.n(a),i=n(82897),r=n(64681),o=n.n(r),l=n(68404),d=n(43215),c=n(16695),u=n(90923),h=n(3490),p=n(7259),g=n(95448),m=n(71623),f=n(75478),v=n(28283),b=n(67436),x=n(42463),y=n(36636),w=n(45916);const j=e=>{const{query:t,queries:n,onClick:a,onChange:s,collapsedText:i,renderExtras:r,disabled:o}=e,d=(0,h.useStyles)(C),[u,p]=(0,l.useState)(!1),[g,m]=(0,l.useState)(null),f=e=>{p(!1),g?m(null):t.refId!==e&&s(Object.assign({},t,{refId:e}))};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:d.wrapper,children:[!u&&(0,w.jsxs)("button",{className:d.queryNameWrapper,"aria-label":c.wl.components.QueryEditorRow.title(t.refId),title:"Edit query name",onClick:e=>{p(!0)},"data-testid":"query-name-div",children:[(0,w.jsx)("span",{className:d.queryName,children:t.refId}),(0,w.jsx)(h.Icon,{name:"pen",className:d.queryEditIcon,size:"sm"})]}),u&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.Input,{type:"text",defaultValue:t.refId,onBlur:e=>{f(e.currentTarget.value.trim())},autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&f(e.target.value)},onFocus:e=>{e.target.select()},invalid:null!==g,onChange:e=>{const a=e.currentTarget.value.trim();if(0!==a.length){for(const e of n)if(e!==t&&a===e.refId)return void m("Query name already exists");g&&m(null)}else m("An empty query name is not allowed")},className:d.queryNameInput,"data-testid":"query-name-input"}),g&&(0,w.jsx)(h.FieldValidationMessage,{horizontal:!0,children:g})]}),S(e,d),r&&(0,w.jsx)("div",{className:d.itemWrapper,children:r()}),o&&(0,w.jsx)("em",{className:d.contextInfo,children:"Disabled"})]}),i&&(0,w.jsx)("div",{className:d.collapsedText,onClick:a,children:i})]})},S=(e,t)=>{const{alerting:n,dataSource:a,onChangeDataSource:s}=e;return s?(0,w.jsx)("div",{className:t.itemWrapper,children:(0,w.jsx)(u.DataSourcePicker,{variables:!0,alerting:n,current:a.name,onChange:s})}):(0,w.jsxs)("em",{className:t.contextInfo,children:["(",a.name,")"]})},C=e=>({wrapper:y.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${e.spacing.xs};
    `,queryNameWrapper:y.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${e.border.radius.md};
      align-items: center;
      padding: 0 0 0 ${e.spacing.xs};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${e.colors.bg3};
        border: 1px dashed ${e.colors.border3};
      }

      &:focus {
        border: 2px solid ${e.colors.formInputBorderActive};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:y.css`
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.textBlue};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${e.spacing.xs};
    `,queryEditIcon:(0,y.cx)(y.css`
        margin-left: ${e.spacing.md};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:y.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:y.css`
      font-weight: ${e.typography.weight.regular};
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      padding-left: ${e.spacing.sm};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:y.css`
      font-size: ${e.typography.size.sm};
      font-style: italic;
      color: ${e.colors.textWeak};
      padding-left: 10px;
    `,itemWrapper:y.css`
      display: flex;
      margin-left: 4px;
    `});var k;function T(e){var t,n,a;let{error:s}=e;const i=(0,h.useStyles2)(I),r=null!==(t=null!==(n=null==s?void 0:s.message)&&void 0!==n?n:null==s||null===(a=s.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Query error";return(0,w.jsxs)("div",{className:i.wrapper,children:[(0,w.jsx)("div",{className:i.icon,children:k||(k=(0,w.jsx)(h.Icon,{name:"exclamation-triangle"}))}),(0,w.jsx)("div",{className:i.message,children:r})]})}const I=e=>({wrapper:(0,y.css)({marginTop:e.spacing(.5),background:e.colors.background.secondary,display:"flex"}),icon:(0,y.css)({background:e.colors.error.main,color:e.colors.error.contrastText,padding:e.spacing(1)}),message:(0,y.css)({fontSize:e.typography.bodySmall.fontSize,fontFamily:e.typography.fontFamilyMonospace,padding:e.spacing(1)})});var O;function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F extends l.PureComponent{constructor(){super(...arguments),N(this,"element",null),N(this,"angularScope",null),N(this,"angularQueryEditor",null),N(this,"state",{datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1}),N(this,"renderAngularQueryEditor",(()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const e=(0,u.getAngularLoader)(),t={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=e.load(this.element,t,'<plugin-component type="query-ctrl" />'),this.angularScope=t.ctrl})),N(this,"onOpen",(()=>{this.renderAngularQueryEditor()})),N(this,"renderPluginEditor",(()=>{var e;const{query:t,onChange:n,queries:a,onRunQuery:s,app:i=d.CoreApp.PanelEditor,history:r}=this.props,{datasource:o,data:l}=this.state;if(null!=o&&null!==(e=o.components)&&void 0!==e&&e.QueryCtrl)return(0,w.jsx)("div",{ref:e=>this.element=e});if(o){let e=this.getReactQueryEditor(o);if(e)return(0,w.jsx)(e,{query:t,datasource:o,onChange:n,onRunQuery:s,data:l,range:(0,f.$t)().timeRange(),queries:a,app:i,history:r},null==o?void 0:o.name)}return O||(O=(0,w.jsx)("div",{children:"Data source plugin does not export any Query Editor component"}))})),N(this,"onToggleEditMode",((e,t)=>{var n;(e.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode)&&(this.angularScope.toggleEditorMode(),null===(n=this.angularQueryEditor)||void 0===n||n.digest(),t.isOpen||t.onOpen())})),N(this,"onRemoveQuery",(()=>{this.props.onRemoveQuery(this.props.query)})),N(this,"onCopyQuery",(()=>{const e=(0,i.cloneDeep)(this.props.query);this.props.onAddQuery(e)})),N(this,"onDisableQuery",(()=>{const{query:e}=this.props;this.props.onChange(Object.assign({},e,{hide:!e.hide})),this.props.onRunQuery()})),N(this,"onToggleHelp",(()=>{this.setState((e=>({showingHelp:!e.showingHelp})))})),N(this,"onClickExample",(e=>{this.props.onChange(Object.assign({},e,{refId:this.props.query.refId})),this.onToggleHelp()})),N(this,"renderWarnings",(()=>{var e,t;const{data:n,query:a}=this.props,s=(null!==(e=null===(t=D(n,a.refId))||void 0===t?void 0:t.series)&&void 0!==e?e:[]).reduce(((e,t)=>{var n,a;if(null===(n=t.meta)||void 0===n||!n.notices)return e;const s=null!==(a=(0,i.filter)(t.meta.notices,{severity:"warning"}))&&void 0!==a?a:[];return e.concat(s)}),[]),r=(0,i.uniqBy)(s,"text");if(!(r.length>0))return null;const l=r.map((e=>e.text)).join("\n");return(0,w.jsx)(h.Badge,{color:"orange",icon:"exclamation-triangle",text:(0,w.jsxs)(w.Fragment,{children:[r.length," ",o()("warning",r.length)]}),tooltip:l})})),N(this,"renderExtraActions",(()=>{const{query:e,queries:t,data:n,onAddQuery:a,dataSource:s}=this.props,i=x.f.getAllExtraRenderAction().map(((i,r)=>i({query:e,queries:t,timeRange:n.timeRange,onAddQuery:a,dataSource:s,key:r}))).filter(Boolean);return i.push(this.renderWarnings()),i})),N(this,"renderActions",(e=>{var t;const{query:n,hideDisableQuery:a=!1}=this.props,{hasTextEditMode:s,datasource:i,showingHelp:r}=this.state,o=n.hide,l=null==i||null===(t=i.components)||void 0===t?void 0:t.QueryEditorHelp;return(0,w.jsxs)(h.HorizontalGroup,{width:"auto",children:[l&&(0,w.jsx)(g.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:r}),s&&(0,w.jsx)(g.y,{title:"Toggle text edit mode",icon:"pen",onClick:t=>{this.onToggleEditMode(t,e)}}),this.renderExtraActions(),(0,w.jsx)(g.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),a?null:(0,w.jsx)(g.y,{title:"Disable/enable query",icon:o?"eye-slash":"eye",active:o,onClick:this.onDisableQuery}),(0,w.jsx)(g.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery})]})})),N(this,"renderHeader",(e=>{const{alerting:t,query:n,dataSource:a,onChangeDataSource:s,onChange:i,queries:r,renderHeaderExtras:o}=this.props;return(0,w.jsx)(j,{query:n,queries:r,onChangeDataSource:s,dataSource:a,disabled:n.hide,onClick:t=>this.onToggleEditMode(t,e),onChange:i,collapsedText:e.isOpen?null:this.renderCollapsedText(),renderExtras:o,alerting:t})}))}componentDidMount(){const{data:e,query:t}=this.props,n=D(e,t.refId);this.setState({data:n}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:e,queries:t}=this.props,{datasource:n}=this.state,a=new v.r({targets:t}),s=this;return{datasource:n,target:e,panel:a,dashboard:{},refresh:()=>{e.hide!==s.props.query.hide&&(e.hide=s.props.query.hide),this.props.onChange(e),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new d.EventBusSrv,range:(0,f.$t)().timeRange()}}getQueryDataSourceIdentifier(){var e,t;const{query:n,dataSource:a}=this.props;return null!==(e=null===(t=n.datasource)||void 0===t?void 0:t.uid)&&void 0!==e?e:a.uid}async loadDatasource(){const e=(0,b.ak)();let t;const n=this.getQueryDataSourceIdentifier();try{t=await e.get(n)}catch(n){t=await e.get()}this.setState({datasource:t,loadedDataSourceIdentifier:n,hasTextEditMode:(0,i.has)(t,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(e){const{datasource:t,loadedDataSourceIdentifier:n}=this.state,{data:a,query:s}=this.props;if(a!==e.data){const e=D(a,s.refId);this.setState({data:e}),this.angularScope&&(this.angularScope.range=(0,f.$t)().timeRange()),this.angularQueryEditor&&e&&function(e,t,n){if(t.state===d.LoadingState.Done){const n=t.series.map((e=>(0,d.toLegacyResponseData)(e)));e.events.emit(d.PanelEvents.dataReceived,n)}else t.state===d.LoadingState.Error&&e.events.emit(d.PanelEvents.dataError,t.error);setTimeout(n.digest)}(this.angularScope,e,this.angularQueryEditor)}if(t&&n!==this.getQueryDataSourceIdentifier())return this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),void this.loadDatasource();this.element&&!this.angularQueryEditor&&this.renderAngularQueryEditor()}getReactQueryEditor(e){var t,n,a,s,i;if(e)switch(this.props.app){case d.CoreApp.Explore:return(null===(t=e.components)||void 0===t?void 0:t.ExploreMetricsQueryField)||(null===(n=e.components)||void 0===n?void 0:n.ExploreLogsQueryField)||(null===(a=e.components)||void 0===a?void 0:a.ExploreQueryField)||(null===(s=e.components)||void 0===s?void 0:s.QueryEditor);case d.CoreApp.PanelEditor:case d.CoreApp.Dashboard:default:return null===(i=e.components)||void 0===i?void 0:i.QueryEditor}}renderCollapsedText(){const{datasource:e}=this.state;return null!=e&&e.getQueryDisplayText?e.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){var e;const{query:t,id:n,index:a,visualization:i}=this.props,{datasource:r,showingHelp:o,data:l}=this.state,d=t.hide,u=s()("query-editor-row",{"query-editor-row--disabled":d,"gf-form-disabled":d});if(!r)return null;const g=this.renderPluginEditor(),f=null===(e=r.components)||void 0===e?void 0:e.QueryEditorHelp;return(0,w.jsx)("div",{"aria-label":c.wl.components.QueryEditorRows.rows,children:(0,w.jsx)(m.t,{id:n,draggable:!0,index:a,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen,children:(0,w.jsxs)("div",{className:u,children:[(0,w.jsxs)(h.ErrorBoundaryAlert,{children:[o&&f&&(0,w.jsx)(p.h,{children:(0,w.jsx)(f,{onClickExample:e=>this.onClickExample(e),query:this.props.query,datasource:r})}),g]}),(null==l?void 0:l.error)&&l.error.refId===t.refId&&(0,w.jsx)(T,{error:l.error}),i]})})})}}function D(e,t){const n=e.series.filter((e=>e.refId===t));if(e.error&&!e.series.length)return Object.assign({},e,{state:d.LoadingState.Error});let a=e.state;const s=e.error&&e.error.refId===t?e.error:void 0;s?a=d.LoadingState.Error:s||e.state!==d.LoadingState.Error||(a=d.LoadingState.Done);const i=e.timeRange;return Object.assign({},e,{state:a,series:n,error:s,timeRange:i})}},70930:(e,t,n)=>{"use strict";n.d(t,{Tl:()=>Z,kt:()=>q});var a=n(25918),s=n(72646),i=n(4203),r=n(3321),o=n(46089),l=n(35778),d=n(40818),c=n(58669),u=n(87801),h=n(24298),p=n(2027),g=n(48099),m=n(90923),f=n(78837),v=n(82897);function b(e){let t=[];const n=(0,v.partition)(e,"id"),a=(0,v.groupBy)(n[0],"id");return t=(0,v.map)(a,(e=>e.length>1&&!(0,v.every)(e,x)?(0,v.find)(e,(e=>"panel-alert"!==e.eventType)):(0,v.head)(e))),t=(0,v.concat)(t,n[1]),t}function x(e){return"panel-alert"===e.eventType}var y=n(75478),w=n(94396),j=n(14444),S=n(70686);class C{canWork(e){let{dashboard:t,range:n}=e;return!!t.id&&("now"===n.raw.to&&!!t.panels.find((e=>!!e.alert)))}work(e){if(!this.canWork(e))return(0,S.H_)();const{dashboard:t}=e;return(0,w.D)((0,m.getBackendSrv)().get("/api/alerts/states-for-dashboard",{dashboardId:t.id},`dashboard-query-runner-alert-states-${t.id}`)).pipe((0,l.U)((e=>({alertStates:e,annotations:[]}))),(0,j.K)(S.Rc))}}var k=n(71808),T=n(71114),I=n(61292),O=n(21169),N=n(345);class F{canRun(e){return!!e&&Boolean(!e.annotationQuery||e.annotations)}run(e){let{annotation:t,datasource:n,dashboard:a,range:s}=e;if(!this.canRun(n))return(0,k.of)([]);return(0,N.r)({dashboard:a,range:s,panel:{}},n,t).pipe((0,l.U)((e=>{var t;return null!==(t=e.events)&&void 0!==t?t:[]})),(0,j.K)(S.h1))}}var D=n(17028);class P{canRun(e){return!!e&&(!!(0,D.yr)(e)||Boolean(e.annotationQuery&&!e.annotations))}run(e){let{annotation:t,datasource:n,dashboard:a,range:s}=e;return this.canRun(n)?(0,w.D)(n.annotationQuery({range:s,rangeRaw:s.raw,annotation:t,dashboard:a})).pipe((0,j.K)(S.h1)):(0,k.of)([])}}class A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new P,new F];this.runners=e}canWork(e){let{dashboard:t}=e;const n=t.annotations.list.find(A.getAnnotationsToProcessFilter);return Boolean(n)&&!this.publicDashboardViewMode(t)}work(e){if(!this.canWork(e))return(0,S.H_)();const{dashboard:t,range:n}=e,a=t.annotations.list.filter(A.getAnnotationsToProcessFilter).map((e=>(0,w.D)((0,m.getDataSourceSrv)().get(e.datasource)).pipe((0,j.K)(S.hs)).pipe((0,T.z)((a=>{const s=this.runners.find((e=>e.canRun(a)));return s?(t.events.publish(new O.z(e)),s.run({annotation:e,datasource:a,dashboard:t,range:n}).pipe((0,d.R)(q().cancellations().pipe((0,I.h)((t=>t===e)))),(0,l.U)((n=>(t.snapshot&&(e.snapshotData=(0,v.cloneDeep)(n)),(0,S.pG)(e,n)))),(0,h.x)((()=>{t.events.publish(new O.RB(e))})))):(0,k.of)([])})))));return(0,r.T)(a).pipe((0,c.J)(),(0,u.u)(((e,t)=>e.concat(t))),(0,l.U)((e=>({annotations:e,alertStates:[]}))))}static getAnnotationsToProcessFilter(e){return e.enable&&!Boolean(e.snapshotData)}publicDashboardViewMode(e){return void 0!==e.meta.publicDashboardAccessToken&&""!==e.meta.publicDashboardAccessToken}}var M=n(81644),R=n(43215),$=n(61959),L=n(85464),E=n(86647),V=n(47570),B=n(51542);class z{constructor(){var e,t,n;n={},(t="hasAlertRules")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}canWork(e){let{dashboard:t,range:n}=e;if(!t.uid)return!1;if("now"!==n.raw.to)return!1;if(!1===this.hasAlertRules[t.uid])return!1;return!(!$.Vt.hasPermission(V.bW.AlertingRuleRead)||!$.Vt.hasPermission(V.bW.AlertingRuleExternalRead))}work(e){if(!this.canWork(e))return(0,S.H_)();const{dashboard:t}=e;return(0,w.D)((0,m.getBackendSrv)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:t.uid},`dashboard-query-runner-unified-alert-states-${t.id}`)).pipe((0,l.U)((e=>{if("success"===e.status){this.hasAlertRules[t.uid]=!1;const n={};return e.data.groups.forEach((e=>e.rules.forEach((e=>{if((0,E.x_)(e)&&e.annotations&&e.annotations[L.q6.panelID]){this.hasAlertRules[t.uid]=!0;const a=Number(e.annotations[L.q6.panelID]),s=function(e){if(e===B.x_.Firing)return R.AlertState.Alerting;if(e===B.x_.Pending)return R.AlertState.Pending;return R.AlertState.OK}(e.state);n[a]?s===R.AlertState.Alerting&&n[a].state!==R.AlertState.Alerting?n[a].state=R.AlertState.Alerting:s===R.AlertState.Pending&&n[a].state!==R.AlertState.Alerting&&n[a].state!==R.AlertState.Pending&&(n[a].state=R.AlertState.Pending):n[a]={state:s,id:Object.keys(n).length,panelId:a,dashboardId:t.id}}})))),{alertStates:Object.values(n),annotations:[]}}throw new Error("Unexpected alert rules response.")})),(0,j.K)(S.Rc))}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class U{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,y.$t)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[f.vc.unifiedAlertingEnabled?new z:new C,new M.g,new A];_(this,"results",void 0),_(this,"runs",void 0),_(this,"cancellationStream",void 0),_(this,"runsSubscription",void 0),_(this,"eventsSubscription",void 0),this.dashboard=e,this.timeSrv=t,this.workers=n,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new a.t(1),this.runs=new s.x,this.cancellationStream=new s.x,this.runsSubscription=this.runs.subscribe((e=>this.executeRun(e))),this.eventsSubscription=e.events.subscribe(m.RefreshEvent,(e=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})}))}run(e){this.runs.next(e)}getResult(e){return this.results.asObservable().pipe((0,l.U)((t=>{const n=(0,S.tD)(t.annotations,e),a=t.alertStates.find((t=>Boolean(e)&&t.panelId===e));return{annotations:b(n),alertState:a}})))}executeRun(e){const t=this.workers.filter((t=>t.canWork(e))).map((t=>t.work(e))),n=new i.w0,a=(0,r.T)(t).pipe((0,d.R)(this.runs.asObservable()),(0,c.J)(),(0,u.u)(((e,t)=>(e.annotations=e.annotations.concat(t.annotations),e.alertStates=e.alertStates.concat(t.alertStates),e))),(0,h.x)((()=>{n.unsubscribe()})),(0,p.B)()),s=new i.w0,l=(0,o.H)(200).pipe((0,g.h)({annotations:[],alertStates:[]}),(0,d.R)(a),(0,h.x)((()=>{s.unsubscribe()})));s.add(l.subscribe((e=>{this.results.next(e)}))),n.add(a.subscribe((e=>{this.results.next(e)})))}cancel(e){this.cancellationStream.next(e)}cancellations(){return this.cancellationStream.asObservable().pipe((0,p.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let H,W;function q(){if(!H)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return H}function Z(e){W||(W=e=>{let{dashboard:t,timeSrv:n,workers:a}=e;return new U(t,n,a)});const t=W(e);return function(e){H&&H.destroy(),H=e}(t),t}},81644:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var a=n(71808),s=n(70686);class i{canWork(e){var t,n;let{dashboard:a}=e;return null==a||null===(t=a.annotations)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.some((e=>e.enable&&Boolean(e.snapshotData)))}work(e){if(!this.canWork(e))return(0,s.H_)();const t=this.getAnnotationsFromSnapshot(e.dashboard);return(0,a.of)({annotations:t,alertStates:[]})}getAnnotationsFromSnapshot(e){var t,n;return(null==e||null===(t=e.annotations)||void 0===t||null===(n=t.list)||void 0===n?void 0:n.filter((e=>e.enable))).filter((e=>Boolean(e.snapshotData))).reduce(((e,t)=>e.concat((0,s.pG)(t,t.snapshotData))),[])}getAnnotationsInSnapshot(e,t){const n=this.getAnnotationsFromSnapshot(e);return(0,s.tD)(n,t)}}},70686:(e,t,n)=>{"use strict";n.d(t,{H_:()=>h,Rc:()=>p,em:()=>v,h1:()=>c,hs:()=>u,pG:()=>f,tD:()=>m});var a=n(82897),s=n(71808),i=n(43215),r=n(90923),o=n(56340),l=n(58257),d=n(49842);function c(e){return e.cancelled||g("AnnotationQueryRunner failed",e),(0,s.of)([])}function u(e){return g("Failed to retrieve datasource",e),(0,s.of)(void 0)}const h=()=>(0,s.of)({annotations:[],alertStates:[]});function p(e){return e.cancelled||g("DashboardQueryRunner failed",e),h()}function g(e,t){const n=(0,r.toDataQueryError)(t);console.error("handleAnnotationQueryRunnerError",n);const a=(0,l.t_)(e,n.message);(0,o.WI)((0,d.$l)(a))}function m(e,t){return e.filter((e=>{var n;return void 0===t||!e.panelId||"dashboard"!==(null===(n=e.source)||void 0===n?void 0:n.type)||e.panelId===t}))}function f(e,t){var n;e.snapshotData&&delete(e=(0,a.cloneDeep)(e)).snapshotData;for(const a of t)switch(a.source=e,a.color=r.config.theme2.visualization.getColorByName(e.iconColor),a.type=e.name,a.isRegion=Boolean(a.timeEnd&&a.time!==a.timeEnd),null===(n=a.newState)||void 0===n?void 0:n.toLowerCase()){case"pending":a.color="yellow";break;case"alerting":a.color="red";break;case"ok":case"normal":a.color="green";break;case"no_data":case"nodata":a.color="gray"}return t}function v(e){if(!e||!e.length)return[];const t=[];for(const n of e){const e=new i.DataFrameView(n);for(let s=0;s<n.length;s++){const n=(0,a.cloneDeep)(e.get(s));t.push(n)}}return t}},78338:(e,t,n)=>{"use strict";n.d(t,{o:()=>C,t:()=>S});var a=n(82897),s=n(71808),i=n(25918),r=n(71114),o=n(35778),l=n(43215),d=n(90923),c=n(20467),u=n(91681),h=n(67436),p=n(1808),g=n(75250),m=n(14444),f=n(81127);class v extends l.DataSourceApi{constructor(e){let t={};v.isMixedDatasource(e)&&(t.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:t,uid:v.resolveUid(e),jsonData:{},access:"proxy"}),this.interval="1min"}static resolveUid(e){var t;return"string"==typeof e?e:null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:"-- Public --"}static isMixedDatasource(e){return"string"!=typeof e&&null!==e&&(null==e?void 0:e.uid)===f.D}query(e){const{intervalMs:t,maxDataPoints:n,range:a,requestId:i,publicDashboardAccessToken:r,panelId:o}=e;const l=e.targets.map((e=>Object.assign({},e,{publicDashboardAccessToken:r,intervalMs:t,maxDataPoints:n})));if(!l.length)return(0,s.of)({data:[]});const c={queries:l,publicDashboardAccessToken:r,panelId:o};return a&&(c.range=a,c.from=a.from.valueOf().toString(),c.to=a.to.valueOf().toString()),(0,d.getBackendSrv)().fetch({url:`/api/public/dashboards/${r}/panels/${o}/query`,method:"POST",data:c,requestId:i}).pipe((0,g.w)((e=>(0,s.of)((0,d.toDataQueryResponse)(e,l)))),(0,m.K)((e=>(0,s.of)((0,d.toDataQueryResponse)(e)))))}testDatasource(){return Promise.resolve(null)}}var b=n(70930),x=n(63172);var y=n(392);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let j=100;function S(){return"Q"+j++}class C{constructor(e){w(this,"subject",void 0),w(this,"subscription",void 0),w(this,"lastResult",void 0),w(this,"dataConfigSource",void 0),w(this,"lastRequest",void 0),w(this,"getTransformationsStream",(e=>t=>t.pipe((0,r.z)((t=>{if(!e)return(0,s.of)(t);const n=this.dataConfigSource.getTransformations();if(!n||0===n.length)return(0,s.of)(t);const a=e=>{var n;return(0,d.getTemplateSrv)().replace(e,null==t||null===(n=t.request)||void 0===n?void 0:n.scopedVars)};return n.forEach((e=>{e.replace=a})),(0,l.transformDataFrame)(n,t.series).pipe((0,o.U)((e=>Object.assign({},t,{series:e}))))}))))),w(this,"resendLastResult",(()=>{this.lastResult&&this.subject.next(this.lastResult)})),this.subject=new i.t(1),this.dataConfigSource=e}getData(e){const{withFieldConfig:t,withTransforms:n}=e;let a=1,i=[],r=!0,d=-1;if(this.dataConfigSource.snapshotData){const e={state:l.LoadingState.Done,series:this.dataConfigSource.snapshotData.map((e=>(0,l.toDataFrame)(e))),timeRange:(0,l.getDefaultTimeRange)()};return(0,s.of)(e)}return this.subject.pipe(this.getTransformationsStream(n),(0,o.U)((e=>{var n;let s=e,o=!1;if(t&&null!==(n=e.series)&&void 0!==n&&n.length){if(d===this.dataConfigSource.configRev){const t=e.series.find((e=>(0,u.iL)(e)));t&&!t.packetInfo.schemaChanged&&i[0].fields.length===t.fields.length&&(s=Object.assign({},s,{series:i.map(((t,n)=>Object.assign({},t,{length:e.series[n].length,fields:t.fields.map(((t,a)=>Object.assign({},t,{values:e.series[n].fields[a].values,state:Object.assign({},t.state,{calcs:void 0,range:void 0})})))})))}),o=!0)}let t=this.dataConfigSource.getFieldOverrideOptions();var c,h;if(null!=t&&(r||!o))d=this.dataConfigSource.configRev,s=Object.assign({},s,{series:(0,l.applyFieldOverrides)(Object.assign({timeZone:null!==(c=null===(h=e.request)||void 0===h?void 0:h.timezone)&&void 0!==c?c:"browser",data:s.series},t))}),r=!1}return o||(0,l.compareArrayValues)(i,s.series,l.compareDataFrameStructures)||a++,i=s.series,Object.assign({},s,{structureRev:a})})))}async run(e){const{queries:t,timezone:n,datasource:s,panelId:i,dashboardId:r,publicDashboardAccessToken:o,timeRange:u,timeInfo:g,cacheTimeout:m,maxDataPoints:f,scopedVars:b,minInterval:x}=e;if((0,p.yl)(s))return void this.pipeToSubject((0,p.AK)(e),i);const w={app:l.CoreApp.Dashboard,requestId:S(),timezone:n,panelId:i,dashboardId:r,publicDashboardAccessToken:o,range:u,timeInfo:g,interval:"",intervalMs:0,targets:(0,a.cloneDeep)(t),maxDataPoints:f,scopedVars:b||{},cacheTimeout:m,startTime:Date.now()};w.rangeRaw=u.raw;try{var j;const e=await async function(e,t,n){if(n)return new v(e);if(e&&e.query)return e;return await(0,h.ak)().get(e,t)}(s,w.scopedVars,o),t=null===(j=e.meta)||void 0===j?void 0:j.mixed;w.targets=w.targets.map((n=>{var a;const s=(null===(a=n.datasource)||void 0===a?void 0:a.type)===c.hr.type;return n.datasource&&(n.datasource.uid===e.uid||t||s)||(n.datasource=e.getRef()),n}));const n=x?(0,d.getTemplateSrv)().replace(x,w.scopedVars):e.interval,a=l.rangeUtil.calculateInterval(u,f,n);w.scopedVars=Object.assign({},w.scopedVars,{__interval:{text:a.interval,value:a.interval},__interval_ms:{text:a.intervalMs.toString(),value:a.intervalMs}}),w.interval=a.interval,w.intervalMs=a.intervalMs,this.lastRequest=w,this.pipeToSubject((0,y.v7)(e,w),i)}catch(e){console.error("PanelQueryRunner Error",e)}}pipeToSubject(e,t){this.subscription&&this.subscription.unsubscribe();let n=e;const a=this.dataConfigSource.getDataSupport();if(a.alertStates||a.annotations){const t=this.dataConfigSource;i=e,o=(0,b.kt)().getResult(t.id),n=(0,x.a)([i,o]).pipe((0,r.z)((e=>{var t;const[n,a]=e;if(Boolean(null===(t=a.annotations)||void 0===t?void 0:t.length)||Boolean(a.alertState)){n.annotations||(n.annotations=[]);const e=n.annotations.concat(new l.ArrayDataFrame(a.annotations)),t=a.alertState;return(0,s.of)(Object.assign({},n,{annotations:e,alertState:t}))}return(0,s.of)(n)})))}var i,o;this.subscription=n.subscribe({next:e=>{this.lastResult=(0,y.zR)(e,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===l.LoadingState.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:l.LoadingState.Done})))}clearLastResult(){this.lastResult=void 0,this.subject=new i.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(e){this.lastResult=e.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}},45418:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var a=n(24298);function s(e,t){return(0,a.x)((()=>{t&&e.resolveCancelerIfExists(t)}))}},86452:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});var a=n(43215);const s=(e,t)=>{let n=1;if(null!=t&&t.structureRev&&t.series){n=t.structureRev;(0,a.compareArrayValues)(e.series,t.series,a.compareDataFrameStructures)||n++}return e.structureRev=n,e}},392:(e,t,n)=>{"use strict";n.d(t,{F9:()=>C,zR:()=>k,v7:()=>j});var a=n(82897),s=n(71808),i=n(3321),r=n(46089),o=n(94396),l=n(35778),d=n(14444),c=n(39419),u=n(2027),h=n(48099),p=n(40818),g=n(43215),m=n(90923),f=n(20467),v=n(28659),b=n(24036),x=n(45418),y=n(22305);function w(e,t){var n,s,i,r;const o=t.panelData.request,l=Object.assign({},t.packets);l[null!==(n=null!==(s=e.key)&&void 0!==s?s:null===(i=e.data)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.refId)&&void 0!==n?n:"A"]=e;let d,c=e.state||g.LoadingState.Done;const u=[],h=[];for(const e in l){const t=l[e];if(t.error&&(c=g.LoadingState.Error,d=t.error),t.data&&t.data.length)for(const e of t.data){var p;(null===(p=e.meta)||void 0===p?void 0:p.dataTopic)!==g.DataTopic.Annotations?u.push(e):h.push(e)}}const m=function(e,t){const n=e.range;if(!(0,a.isString)(n.raw.from)||t!==g.LoadingState.Streaming)return n;return Object.assign({},n,{from:g.dateMath.parse(n.raw.from,!1),to:g.dateMath.parse(n.raw.to,!0)})}(o,c);return{packets:l,panelData:{state:c,series:u,annotations:h,error:d,request:o,timeRange:m}}}function j(e,t,n){let j={panelData:{state:g.LoadingState.Loading,series:[],request:t,timeRange:t.range},packets:{}};if(!t.targets.length)return t.endTime=Date.now(),j.panelData.state=g.LoadingState.Done,(0,s.of)(j.panelData);const S=function(e,t,n){for(const e of t.targets)if((0,f.Pr)(e.datasource))return b.mV.query(t);const a=n?n(t):e.query(t);return(0,o.D)(a)}(e,t,n).pipe((0,l.U)((e=>{if(!(0,a.map)(e.data))throw new Error(`Expected response data to be array, got ${typeof e.data}.`);return t.endTime=Date.now(),j=w(e,j),j.panelData})),(0,d.K)((e=>{const t="string"==typeof e?e:JSON.stringify(e);return console.error("runRequest.catchError",t),(0,s.of)(Object.assign({},j.panelData,{state:g.LoadingState.Error,error:(0,m.toDataQueryError)(e)}))})),(0,c.b)(function(e){let t=!1;return n=>{if(!n.request||t||n.request.app===g.CoreApp.Explore)return;if(null!=g.urlUtil.getUrlSearchParams().editPanel)return;if(n.state!==g.LoadingState.Done&&n.state!==g.LoadingState.Error)return;const a={};for(let e=0;e<n.series.length;e++){const t=n.series[e].refId;var s,i;t&&!a[t]&&(a[t]=null!==(s=null===(i=n.series[e].meta)||void 0===i?void 0:i.isCachedResponse)&&void 0!==s&&s)}const r=Object.keys(a).length,o=Object.values(a).filter((e=>!0===e)).length,l={eventName:m.MetaAnalyticsEventName.DataRequest,datasourceName:e.name,datasourceId:e.id,datasourceType:e.type,panelId:n.request.panelId,dashboardId:n.request.dashboardId,dataSize:0,duration:n.request.endTime-n.request.startTime,totalQueries:r,cachedQueries:o},d=(0,y.h4)().getCurrent();d&&(l.dashboardId=d.id,l.dashboardName=d.title,l.dashboardUid=d.uid,l.folderName=d.meta.folderTitle),n.series&&n.series.length>0&&(l.dataSize=n.series.length),n.error&&(l.error=n.error.message),(0,m.reportMetaAnalytics)(l),t=!0}}(e)),(0,x.V)(v.ae,t.requestId),(0,u.B)());return(0,i.T)((0,r.H)(200).pipe((0,h.h)(j.panelData),(0,p.R)(S)),S)}function S(e){const t=(0,g.guessFieldTypes)((0,g.toDataFrame)(e));if(t.fields&&t.fields.length)for(const e of t.fields)e.state=null;return t}function C(e){return e&&(0,a.map)(e)?e.map((e=>S(e))):[]}function k(e,t){const{series:n,annotations:a}=e;if(e.state===g.LoadingState.Loading&&0===n.length)return t||(t=e),Object.assign({},t,{state:g.LoadingState.Loading,request:e.request});const s=performance.now(),i=n.map((e=>S(e))),r=C(a),o=performance.now();return Object.assign({},e,{series:i,annotations:r,timings:{dataProcessingTime:o-s}})}},18084:(e,t,n)=>{"use strict";n.d(t,{K:()=>j,A:()=>w});var a,s,i,r,o=n(36636),l=n(68404),d=n(17377),c=n(13767),u=n(16695),h=n(3490),p=n(28659),g=n(23019),m=n.n(g),f=n(45916);function v(e){let{className:t,imageHeight:n,imageWidth:o,item:c,lastUpdated:u,onClick:p}=e;const g=(0,h.useTheme2)(),[v,x]=(0,l.useState)(!0),y=w(c.uid,g.isLight),j=b(g,n,o),S=c.folderTitle||"General";return(0,f.jsxs)("a",{className:m()(t,j.card),href:c.url,onClick:p,children:[(0,f.jsx)("div",{className:j.imageContainer,children:v?(0,f.jsx)("img",{loading:"lazy",className:j.image,src:y,onLoad:()=>x(!0),onError:()=>x(!1)}):(0,f.jsx)("div",{className:j.imagePlaceholder,children:c.icon?(0,f.jsx)(d.Z,{src:c.icon,width:36,height:36,title:c.title}):a||(a=(0,f.jsx)(h.Icon,{name:"apps",size:"xl"}))})}),(0,f.jsxs)("div",{className:j.info,children:[(0,f.jsxs)("div",{className:j.infoHeader,children:[(0,f.jsxs)("div",{className:j.titleContainer,children:[(0,f.jsx)("div",{children:c.title}),(0,f.jsxs)("div",{className:j.folder,children:[s||(s=(0,f.jsx)(h.Icon,{name:"folder"})),S]})]}),null!==u&&(0,f.jsxs)("div",{className:j.updateContainer,children:[i||(i=(0,f.jsx)("div",{children:"Last updated"})),u?(0,f.jsx)("div",{className:j.update,children:u}):r||(r=(0,f.jsx)(h.Spinner,{}))]})]}),(0,f.jsx)("div",{children:(0,f.jsx)(h.TagList,{className:j.tagList,tags:c.tags})})]})]},c.uid)}const b=(e,t,n)=>{const a=e.spacing(4);return{card:o.css`
      background-color: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${e.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${n}px + (${a} * 2))};
      width: 100%;
    `,folder:o.css`
      align-items: center;
      color: ${e.colors.text.secondary};
      display: flex;
      font-size: ${e.typography.size.sm};
      gap: ${e.spacing(.5)};
    `,image:o.css`
      box-shadow: ${e.shadows.z2};
      height: ${t}px;
      margin: ${e.spacing(1)} calc(${a} - 1px) 0;
      width: ${n}px;
    `,imageContainer:o.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${e.spacing(1)} calc(${a} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:o.css`
      align-items: center;
      color: ${e.colors.text.secondary};
      display: flex;
      height: ${t}px;
      justify-content: center;
      margin: ${e.spacing(1)} ${a} 0;
      width: ${n}px;
    `,info:o.css`
      background-color: ${e.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${e.spacing(7)};
      gap: ${e.spacing(1)};
      padding: ${e.spacing(1)} ${e.spacing(2)};
      z-index: 1;
    `,infoHeader:o.css`
      display: flex;
      gap: ${e.spacing(1)};
      justify-content: space-between;
    `,tagList:o.css`
      justify-content: flex-start;
    `,titleContainer:o.css`
      display: flex;
      flex-direction: column;
      gap: ${e.spacing(.5)};
    `,updateContainer:o.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${e.typography.bodySmall.fontSize};
      gap: ${e.spacing(.5)};
    `,update:o.css`
      color: ${e.colors.text.secondary};
      text-align: right;
    `}};var x,y=n(26556);function w(e,t){return`/api/dashboards/uid/${e}/img/thumb/${t?"light":"dark"}`}function j(e){let{editable:t,item:n,onTagSelected:a,onToggleChecked:s,onClick:i}=e;const[r,o]=(0,l.useState)(!0),[g,m]=(0,l.useState)(null),[b,j]=(0,l.useState)(!1),C=(0,l.useRef)(null),k=(0,l.useCallback)((e=>{let{placement:t,reference:n,popper:a}=e,s=[0,0];return"bottom"===t||"top"===t?s=[0,-(n.height+a.height)/2]:"left"!==t&&"right"!==t||(s=[-(n.width+a.width)/2,0]),s}),[]),[T,I]=l.useState(null),[O,N]=l.useState(null),{styles:F,attributes:D}=(0,c.D)(T,O,{modifiers:[{name:"offset",options:{offset:k}}]}),P=(0,h.useTheme2)(),A=w(n.uid,P.isLight),M=S(P,null==T?void 0:T.getBoundingClientRect().width,null==O?void 0:O.getBoundingClientRect().width),R=async()=>{if(j(!0),n.uid&&!g){const e=await p.ae.getDashboardByUid(n.uid),{updated:t}=e.meta;m(t?new Date(t).toLocaleString():null)}};return(0,f.jsxs)("a",{"data-testid":u.wl.components.Search.dashboardCard(n.title),className:M.card,href:n.url,ref:e=>I(e),onMouseEnter:()=>{C.current=window.setTimeout(R,500)},onMouseLeave:()=>{C.current&&window.clearTimeout(C.current),j(!1)},onMouseMove:()=>{C.current&&window.clearTimeout(C.current),C.current=window.setTimeout(R,500)},onClick:i,children:[(0,f.jsxs)("div",{className:M.imageContainer,children:[(0,f.jsx)(y.R,{className:M.checkbox,"aria-label":`Select dashboard ${n.title}`,editable:t,checked:n.checked,onClick:e=>{e.stopPropagation(),e.preventDefault(),null==s||s(n)}}),r?(0,f.jsx)("img",{loading:"lazy",className:M.image,src:A,onError:()=>o(!1)}):(0,f.jsx)("div",{className:M.imagePlaceholder,children:n.icon?(0,f.jsx)(d.Z,{src:n.icon,width:36,height:36,title:n.title}):x||(x=(0,f.jsx)(h.Icon,{name:"apps",size:"xl"}))})]}),(0,f.jsxs)("div",{className:M.info,children:[(0,f.jsx)("div",{className:M.title,children:n.title}),(0,f.jsx)(h.TagList,{displayMax:1,tags:n.tags,onClick:(e,t)=>{t.stopPropagation(),t.preventDefault(),null==a||a(e)}})]}),b&&(0,f.jsx)(h.Portal,{className:M.portal,children:(0,f.jsx)("div",Object.assign({ref:N,style:F.popper},D.popper,{children:(0,f.jsx)(v,{className:M.expandedView,imageHeight:240,imageWidth:320,item:n,lastUpdated:g,onClick:i})}))})]},n.uid)}const S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=e.spacing(4);return{card:o.css`
      background-color: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }
    `,checkbox:o.css`
      left: 0;
      margin: ${e.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:o.css`
      @keyframes expand {
        0% {
          transform: scale(${t/n});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${e.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${e.colors.emphasize(e.colors.background.secondary,.03)};
    `,image:o.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${e.shadows.z1};
      margin: ${e.spacing(1)} ${a} 0;
      width: calc(100% - (2 * ${a}));
    `,imageContainer:o.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${e.spacing(1)} ${a} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:o.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${e.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${e.spacing(1)} ${a} 0;
      width: calc(100% - (2 * ${a}));
    `,info:o.css`
      align-items: center;
      background-color: ${e.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${e.spacing(7)};
      gap: ${e.spacing(1)};
      padding: 0 ${e.spacing(2)};
      z-index: 1;
    `,portal:o.css`
      pointer-events: none;
    `,title:o.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},26556:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var a=n(68404),s=n(3490),i=n(45916);const r=(0,a.memo)((e=>{let{onClick:t,className:n,checked:a=!1,editable:r=!1,"aria-label":o}=e;return r?(0,i.jsx)("div",{onClick:t,className:n,children:(0,i.jsx)(s.Checkbox,{value:a,"aria-label":o})}):null}));r.displayName="SearchCheckbox"},77810:(e,t,n)=>{"use strict";n.d(t,{T:()=>p});var a,s=n(36636),i=n(68404),r=n(16695),o=n(3490),l=n(97621),d=n(26556),c=n(45916);const u=r.wl.components.Search,h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new Map([["errors","info-circle"],["views","eye"]]);return t.has(e)?t.get(e):"sort-amount-down"},p=e=>{let{item:t,editable:n,onToggleChecked:s,onTagSelected:r,onClickItem:p}=e;const m=(0,o.useStyles2)(g),f=(0,i.useCallback)(((e,t)=>{t.stopPropagation(),t.preventDefault(),r(e)}),[r]),v=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),s&&s(t)}),[t,s]),b=t.folderTitle||"General";return(0,c.jsxs)(o.Card,{"data-testid":u.dashboardItem(t.title),href:t.url,style:{minHeight:l.CN},className:m.container,onClick:p,children:[(0,c.jsx)(o.Card.Heading,{children:t.title}),(0,c.jsx)(o.Card.Figure,{align:"center",className:m.checkbox,children:(0,c.jsx)(d.R,{"aria-label":"Select dashboard",editable:n,checked:t.checked,onClick:v})}),(0,c.jsxs)(o.Card.Meta,{separator:"",children:[(0,c.jsxs)("span",{className:m.metaContainer,children:[a||(a=(0,c.jsx)(o.Icon,{name:"folder","aria-hidden":!0})),b]}),t.sortMetaName&&(0,c.jsxs)("span",{className:m.metaContainer,children:[(0,c.jsx)(o.Icon,{name:h(t.sortMetaName)}),t.sortMeta," ",t.sortMetaName]})]}),(0,c.jsx)(o.Card.Tags,{children:(0,c.jsx)(o.TagList,{tags:t.tags,onClick:f,getAriaLabel:e=>`Filter by tag "${e}"`})})]})},g=e=>({container:s.css`
      margin-bottom: ${e.spacing(.75)};
      padding: ${e.spacing(1)} ${e.spacing(2)};
    `,metaContainer:s.css`
      display: flex;
      align-items: center;
      margin-right: ${e.spacing(1)};

      svg {
        margin-right: ${e.spacing(.5)};
      }
    `,checkbox:s.css`
      margin-right: 0;
    `})},97621:(e,t,n)=>{"use strict";n.d(t,{CN:()=>s,E_:()=>p,YQ:()=>l,fy:()=>d,pW:()=>o,qi:()=>r,rh:()=>u,to:()=>c,xb:()=>h,yw:()=>i});var a=n(97982);const s=58,i={label:"AâZ",value:"alpha-asc"},r="search.sections",o=0,l="general",d="General",c="grafana.search.include.panels",u="grafana.search.layout",h={dashboard:a.o.DashDB,folder:a.o.DashFolder,home:a.o.DashHome},p=1e3},51189:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,v:()=>l});var a=n(68404),s=n(72646),i=n(43215),r=n(90923);function o(){const e=(0,a.useRef)(new s.x);return{keyboardEvents:e.current,onKeyDown:t=>{switch(t.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":e.current.next(t)}}}}function l(e,t,n){const s=(0,a.useRef)({x:0,y:-1}),[o,l]=(0,a.useState)({x:0,y:-1}),d=(0,a.useRef)();return(0,a.useEffect)((()=>{d.current=n.view.fields.url,s.current.x=0,s.current.y=-1,l(Object.assign({},s.current))}),[n]),(0,a.useEffect)((()=>{const n=e.subscribe({next:e=>{var n;switch(null==e?void 0:e.code){case"ArrowDown":s.current.y++,l(Object.assign({},s.current));break;case"ArrowUp":s.current.y=Math.max(0,s.current.y-1),l(Object.assign({},s.current));break;case"ArrowRight":t>0&&(s.current.x=Math.min(t,s.current.x+1),l(Object.assign({},s.current)));break;case"ArrowLeft":t>0&&(s.current.x=Math.max(0,s.current.x-1),l(Object.assign({},s.current)));break;case"Enter":if(!d.current)break;const e=s.current.x*t+s.current.y;if(e<0){s.current.x=0,s.current.y=0,l(Object.assign({},s.current));break}const a=null===(n=d.current.values)||void 0===n?void 0:n.get(e);a&&r.locationService.push(i.locationUtil.stripBaseFromUrl(a))}}});return()=>n.unsubscribe()}),[e,t]),o}},71625:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(82897),s=n(68404),i=n(90923),r=n(97621),o=n(92674),l=n(67476),d=n(97982),c=n(80455);const u=(0,a.debounce)((e=>i.locationService.partial(e,!0)),300),h=e=>{var t;const n=(0,c.vj)(i.locationService.getSearchObject()),a=Object.assign({},l.wi,e,n),h=localStorage.getItem(r.rh);null!==(t=n.layout)&&void 0!==t&&t.length||null==h||!h.length||(a.layout=h);const[p,g]=(0,s.useReducer)(l.Y,a),m=(0,s.useCallback)((e=>{g({type:o.MC,payload:e}),u({query:e})}),[]),f=(0,s.useCallback)((e=>{g({type:o.Fe,payload:e}),u({tag:e})}),[]),v=(0,s.useCallback)((e=>{g({type:o.$1,payload:e}),u({datasource:e})}),[]),b=(0,s.useCallback)((e=>{g({type:o.Iy,payload:e}),u({tag:[...p.tag,e]})}),[p.tag]),x=(0,s.useCallback)((()=>{g({type:o.Gs}),u(l.xi)}),[]),y=(0,s.useCallback)((e=>{const t=e.target.checked;g({type:o.EF,payload:t}),u({starred:t||null})}),[]),w=(0,s.useCallback)((()=>{g({type:o.EF,payload:!1}),u({starred:null})}),[]),j=(0,s.useCallback)((e=>{g({type:o.NJ,payload:e}),u({sort:null==e?void 0:e.value,layout:d.A.List})}),[]),S=(0,s.useCallback)((e=>{g({type:o.Mj,payload:e}),e!==d.A.Folders?u({layout:e}):u({layout:e,sort:null})}),[]);return{query:p,hasFilters:(0,c.L)(p),onQueryChange:m,onClearFilters:x,onTagFilterChange:f,onStarredFilterChange:y,onClearStarred:w,onTagAdd:b,onSortChange:j,onLayoutChange:S,onDatasourceChange:v}}},5730:(e,t,n)=>{"use strict";n.d(t,{T:()=>a.T,_:()=>x});var a=n(77810),s=n(68404),i=n(71290),r=n(67476),o=n(36636),l=n(92115),d=n(93368),c=n(90923),u=n(3490),h=n(97621),p=n(51189),g=n(71625),m=n(12568),f=n(45916);function v(e){var t;let{onCloseSearch:n}=e;const a=(0,u.useStyles2)(b),{query:i,onQueryChange:r}=(0,g.A)({});let[o,v]=(0,l.Z)(h.to,!0);c.config.featureToggles.panelTitleSearch||(o=!1);const[x,y]=(0,s.useState)(null!==(t=i.query)&&void 0!==t?t:"");(0,d.Z)((()=>r(x)),200,[x]);const{onKeyDown:w,keyboardEvents:j}=(0,p.A)();return(0,f.jsx)("div",{tabIndex:0,className:a.overlay,children:(0,f.jsxs)("div",{className:a.container,children:[(0,f.jsxs)("div",{className:a.searchField,children:[(0,f.jsx)("div",{children:(0,f.jsx)("input",{type:"text",placeholder:o?"Search dashboards and panels by name":"Search dashboards by name",value:x,onChange:e=>{e.preventDefault(),y(e.currentTarget.value)},onKeyDown:w,tabIndex:0,spellCheck:!1,className:a.input,autoFocus:!0})}),(0,f.jsx)("div",{className:a.closeBtn,children:(0,f.jsx)(u.IconButton,{name:"times",onClick:n,size:"xxl",tooltip:"Close search"})})]}),(0,f.jsx)("div",{className:a.search,children:(0,f.jsx)(m.Z,{onQueryTextChange:e=>{y(e)},showManage:!1,queryText:i.query,includePanels:o,setIncludePanels:v,keyboardEvents:j})})]})})}const b=(0,u.stylesFactory)((e=>({overlay:o.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${e.zIndex.sidemenu};
      position: fixed;
      background: ${e.colors.background.canvas};
      padding: ${e.spacing(1)};

      ${e.breakpoints.up("md")} {
        left: ${e.components.sidemenu.width}px;
        z-index: ${e.zIndex.navbarFixed+1};
        padding: ${e.spacing(2)};
      }
    `,container:o.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${e.spacing(1)};
      background: ${e.colors.background.primary};
      border: 1px solid ${e.components.panel.borderColor};
      height: 100%;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(3)};
      }
    `,closeBtn:o.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:o.css`
      position: relative;
    `,search:o.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${e.spacing(2,0,3,0)};
    `,input:o.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${e.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${e.v1.colors.textWeak};
      }
    `}))),x=(0,s.memo)((()=>{const[e,t]=(0,i.H)(),n="open"===e.get("search");return n?(0,f.jsx)(v,{onCloseSearch:()=>{n&&t(Object.assign({search:null,folder:null},r.xi))}}):null}));x.displayName="SearchWrapper"},49075:(e,t,n)=>{"use strict";n.d(t,{Q:()=>O});var a=n(36636),s=n(68404),i=n(54944),r=n(62859),o=n(47535),l=n(3490),d=n(40936),c=n(97060),u=n(51189),h=n(17377),p=n(43215),g=n(90923),m=n(5831),f=n(79729),v=n(21169),b=n(95716),x=n(45916);const y=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function w(e){let{name:t,explain:n,frame:a,row:i}=e;const[r,o]=(0,s.useState)(!0),[d,c]=(0,s.useState)("score"),u=(0,x.jsx)(l.ModalTabsHeader,{title:t,icon:"info",tabs:y,activeTab:d,onChangeTab:e=>{c(e.value)}});return(0,x.jsx)(l.Modal,{title:u,isOpen:r,onDismiss:()=>o(!1),closeOnBackdropClick:!0,closeOnEscape:!0,children:(0,x.jsxs)(l.TabContent,{children:[d===y[0].value&&(0,x.jsx)(l.CodeEditor,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(n,null,2),readOnly:!1}),d===y[1].value&&(0,x.jsx)("div",{children:(0,x.jsx)(b.H,{data:a,rowIndex:i})}),d===y[2].value&&(0,x.jsx)(l.CodeEditor,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{var e,t,n,s;const r=null===(e=a.fields.find((e=>"allowed_actions"===e.name)))||void 0===e||null===(t=e.values)||void 0===t?void 0:t.get(i),o=null===(n=a.fields.find((e=>"ds_uid"===e.name)))||void 0===n||null===(s=n.values)||void 0===s?void 0:s.get(i);return JSON.stringify({dsUids:null!=o?o:[],allowedActions:null!=r?r:[]},null,2)})(),readOnly:!1})]})})}const j=(e,t,n,s,i,r,o,d,c)=>{var u,b,y;const j=[],k=e.view.fields,T=k.uid,I=k.kind;let O=0;const N=k[null===(u=e.view.dataFrame.meta)||void 0===u||null===(b=u.custom)||void 0===b?void 0:b.sortBy];N&&(O=175,N.type===p.FieldType.time&&(O+=25),t-=O),k.explain&&k.score&&(t-=100);let F=50;n&&s&&(F=30,j.push({id:"column-checkbox",width:F,Header:()=>n("*","*")?(0,x.jsx)("div",{className:r.checkboxHeader,children:(0,x.jsx)(l.IconButton,{name:"check-square",onClick:i})}):(0,x.jsx)("div",{className:r.checkboxHeader,children:(0,x.jsx)(l.Checkbox,{checked:!1,onChange:t=>{t.stopPropagation(),t.preventDefault();const{view:a}=e,i=Math.min(a.length,50);for(let e=0;e<i;e++){const t=a.get(e);t.uid&&t.kind&&(n(t.kind,t.uid)||s(t.kind,t.uid))}}})}),Cell:e=>{const t=T.values.get(e.row.index),a=I?I.values.get(e.row.index):"dashboard",i=n(a,t),o=null!=t;return(0,x.jsx)("div",Object.assign({},e.cellProps,{children:(0,x.jsx)("div",{className:r.checkbox,children:(0,x.jsx)(l.Checkbox,{disabled:!o,value:i&&o,onChange:e=>{s(a,t)}})})}))},field:T}),t-=F),F=Math.max(.2*t,300),j.push({Cell:t=>{var n;let s=(0,a.cx)(r.nameCellStyle),i=k.name.values.get(t.row.index);if(null===(n=i)||void 0===n||!n.length){i=t.row.index>=e.view.dataFrame.length?"Loading...":"Missing title",s+=" "+r.missingTitleText}return(0,x.jsx)("a",Object.assign({},t.cellProps,{href:t.userProps.href,onClick:t.userProps.onClick,className:s,title:i,children:i}))},id:"column-name",field:k.name,Header:()=>(0,x.jsx)("div",{className:r.headerNameStyle,children:"Name"}),width:F}),t-=F,F=175,j.push(function(e,t,n,a){return{id:"column-type",field:null!=e?e:t,Header:"Type",Cell:n=>{var s;const i=n.row.index,r=null!==(s=null==e?void 0:e.values.get(i))&&void 0!==s?s:"dashboard";let o="public/img/icons/unicons/apps.svg",l="Dashboard";if(r)switch(l=r,l){case"dashboard":l="Dashboard";break;case"folder":o="public/img/icons/unicons/folder.svg",l="Folder";break;case"panel":o=`public/img/icons/unicons/${f.Co.panel}.svg`;const e=t.values.get(i);if(e){l=e;const t=g.config.panels[l];if(null!=t&&t.name)l=t.name;else switch(e){case"row":l="Row",o="public/img/icons/unicons/bars.svg";break;case"singlestat":l="Singlestat";break;default:o="public/img/icons/unicons/question.svg"}}}return(0,x.jsxs)("div",Object.assign({},n.cellProps,{className:a.typeText,children:[(0,x.jsx)(h.Z,{src:o,width:14,height:14,title:l,className:a.typeIcon}),l]}))},width:n}}(k.kind,k.panel_type,F,r)),t-=F,k.ds_uid&&d&&(F=Math.min(t/2.5,200),j.push(function(e,t,n,s,i,r){const o=(0,g.getDataSourceSrv)();return{id:"column-datasource",field:e,Header:"Data source",Cell:t=>{const l=e.values.get(t.row.index);return null!=l&&l.length?(0,x.jsx)("div",Object.assign({},t.cellProps,{className:(0,a.cx)(s),children:l.map(((e,t)=>{var a,s,l;const d=o.getInstanceSettings(e),c=null==d||null===(a=d.meta)||void 0===a||null===(s=a.info)||void 0===s||null===(l=s.logos)||void 0===l?void 0:l.small;return c?(0,x.jsxs)("span",{onClick:e=>{e.stopPropagation(),e.preventDefault(),r(d.uid)},children:[(0,x.jsx)("img",{src:c,width:14,height:14,title:d.type,className:n}),d.name]},t):(0,x.jsx)("span",{className:i,children:e},t)}))})):null},width:t}}(k.ds_uid,F,r.typeIcon,r.datasourceItem,r.invalidDatasourceItem,d)),t-=F);const D=!c||function(e){for(let t=0;t<e.values.length;t++)if(null!=e.values.get(t))return!0;return!1}(e.view.fields.tags),P=null===(y=e.view.dataFrame.meta)||void 0===y?void 0:y.custom;var A;null!=P&&P.locationInfo&&t>0&&(F=D?Math.max(t/1.75,300):t,t-=F,j.push({Cell:e=>{var t,n;const s=(null!==(t=null===(n=k.location)||void 0===n?void 0:n.values.get(e.row.index))&&void 0!==t?t:"").split("/");return(0,x.jsx)("div",Object.assign({},e.cellProps,{className:(0,a.cx)(r.locationCellStyle),children:s.map((e=>{const t=P.locationInfo[e];return t?(0,x.jsxs)("a",{href:t.url,className:r.locationItem,children:[(0,x.jsx)(l.Icon,{name:S(t.kind)})," ",t.name]},e):(0,x.jsx)("span",{children:e},e)}))}))},id:"column-location",field:null!==(A=k.location)&&void 0!==A?A:k.url,Header:"Location",width:F}));if(t>0&&D&&j.push(function(e,t,n,a){return{Cell:t=>{const s=e.values.get(t.row.index);return s?(0,x.jsx)("div",Object.assign({},t.cellProps,{children:(0,x.jsx)(l.TagList,{className:n,tags:s,onClick:a})})):null},id:"column-tags",field:e,Header:"Tags",width:t}}(k.tags,t,r.tagList,o)),N&&O){var M;const e=null!==(M=N.display)&&void 0!==M?M:(0,p.getDisplayProcessor)({field:N,theme:g.config.theme2});j.push({Header:()=>(0,x.jsx)("div",{className:r.sortedHeader,children:(0,p.getFieldDisplayName)(N)}),Cell:t=>(0,x.jsx)("div",Object.assign({},t.cellProps,{className:r.sortedItems,children:C({sortField:N,getDisplay:e,index:t.row.index,kind:k.kind})})),id:"column-sort-field",field:N,width:O})}if(k.explain&&k.score){const t=k.score.values,n=t=>{m.Z.publish(new v.Dn({component:w,props:{name:k.name.values.get(t),explain:k.explain.values.get(t),frame:e.view.dataFrame,row:t}}))};j.push({Header:()=>(0,x.jsx)("div",{className:r.sortedHeader,children:"Score"}),Cell:e=>(0,x.jsx)("div",Object.assign({},e.cellProps,{className:r.explainItem,onClick:()=>n(e.row.index),children:t.get(e.row.index)})),id:"column-score-field",field:k.score,width:100})}return j};function S(e){return"dashboard"===e?"apps":"folder"===e?"folder":"question-circle"}function C(e){let{kind:t,sortField:n,index:a,getDisplay:s}=e;const i=n.values.get(a);return["folder","panel"].includes(t.values.get(a))&&0===i?"-":(0,p.formattedValueToString)(s(i))}const k=["key"],T=["key"];function I(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const O=s.memo((e=>{var t;let{response:n,width:a,height:h,selection:p,selectionToggle:g,clearSelection:m,onTagSelected:f,onDatasourceChange:v,onClickItem:b,keyboardEvents:y}=e;const w=(0,l.useStyles2)(N),S=(0,l.useStyles2)(F),C=(0,l.useStyles2)(c.V),O=(0,s.useRef)(null),[D,P]=(0,s.useState)(null),A=(0,u.v)(y,0,n),M=(0,s.useMemo)((()=>{var e;return null!=n&&null!==(e=n.view)&&void 0!==e&&e.dataFrame.fields.length?Array(n.totalRows).fill(0):[]}),[n]);(0,s.useEffect)((()=>{O.current&&O.current.resetloadMoreItemsCache(),D&&D.scrollTo(0)}),[M,D]);const R=(0,s.useMemo)((()=>{var e;return j(n,a,p,g,m,S,f,v,(null===(e=n.view)||void 0===e?void 0:e.length)>=n.totalRows)}),[n,a,S,p,g,m,f,v]),$=(0,s.useMemo)((()=>({columns:R,data:M})),[R,M]),{getTableProps:L,getTableBodyProps:E,headerGroups:V,rows:B,prepareRow:z}=(0,i.useTable)($,i.useAbsoluteLayout),_=(0,s.useCallback)((e=>{var t;let{index:a,style:s}=e;const i=B[a];z(i);const r=null===(t=n.view.fields.url)||void 0===t?void 0:t.values.get(a);let o=w.rowContainer;return a===A.y&&(o+=" "+w.selectedRow),(0,x.jsx)("div",Object.assign({},i.getRowProps({style:s}),{className:o,children:i.cells.map(((e,t)=>(0,x.jsx)(d.p,{tableStyles:C,cell:e,columnIndex:t,columnCount:i.cells.length,userProps:{href:r,onClick:b}},t)))}))}),[B,z,null===(t=n.view.fields.url)||void 0===t?void 0:t.values,A,w,C,b]);return B.length?(0,x.jsxs)("div",Object.assign({},L(),{"aria-label":"Search results table",role:"table",children:[(0,x.jsx)("div",{children:V.map((e=>{const t=e.getHeaderGroupProps(),{key:n}=t,a=I(t,k);return(0,x.jsx)("div",Object.assign({},a,{className:w.headerRow,children:e.headers.map((e=>{const t=e.getHeaderProps(),{key:n}=t,a=I(t,T);return(0,x.jsx)("div",Object.assign({},a,{role:"columnheader",className:w.headerCell,children:e.render("Header")}),n)}))}),n)}))}),(0,x.jsx)("div",Object.assign({},E(),{children:(0,x.jsx)(o.Z,{ref:O,isItemLoaded:n.isItemLoaded,itemCount:B.length,loadMoreItems:n.loadMoreItems,children:e=>{let{onItemsRendered:t,ref:n}=e;return(0,x.jsx)(r.t7,{ref:e=>{n(e),P(e)},onItemsRendered:t,height:h-36,itemCount:B.length,itemSize:C.rowHeight,width:"100%",style:{overflow:"hidden auto"},children:_})}})}))]})):(0,x.jsx)("div",{className:w.noData,children:"No data"})}));O.displayName="SearchResultsTable";const N=e=>{const t=e.colors.emphasize(e.colors.background.primary,.03);return{noData:a.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:a.css`
      padding: ${e.spacing(1)};
    `,headerRow:a.css`
      background-color: ${e.colors.background.secondary};
      height: ${36}px;
      align-items: center;
    `,selectedRow:a.css`
      background-color: ${t};
      box-shadow: inset 3px 0px ${e.colors.primary.border};
    `,rowContainer:a.css`
      label: row;
      &:hover {
        background-color: ${t};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},F=e=>({nameCellStyle:a.css`
      border-right: none;
      padding: ${e.spacing(1)} ${e.spacing(1)} ${e.spacing(1)} ${e.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:a.css`
      padding-left: ${e.spacing(1)};
    `,typeIcon:a.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${e.v1.spacing.xxs};
      fill: ${e.colors.text.secondary};
    `,datasourceItem:a.css`
      span {
        &:hover {
          color: ${e.colors.text.link};
        }
      }
    `,missingTitleText:a.css`
      color: ${e.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:a.css`
      color: ${e.colors.error.main};
      text-decoration: line-through;
    `,typeText:a.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
    `,locationItem:a.css`
      color: ${e.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:a.css`
      text-align: right;
      padding-right: ${e.spacing(2)};
    `,sortedItems:a.css`
      text-align: right;
      padding: ${e.spacing(1)} ${e.spacing(3)} ${e.spacing(1)} ${e.spacing(1)};
    `,explainItem:a.css`
      text-align: right;
      padding: ${e.spacing(1)} ${e.spacing(3)} ${e.spacing(1)} ${e.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:a.css`
      padding-top: ${e.spacing(1)};
      padding-right: ${e.spacing(1)};
    `,checkboxHeader:a.css`
      margin-left: 2px;
    `,checkbox:a.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:a.css`
      padding-top: ${e.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},12568:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ue});var a,s,i=n(36636),r=n(68404),o=n(93368),l=n(17614),d=n(87723),c=n(3490),u=n(28436),h=n(90923),p=n(45916);const g=e=>{let{text:t}=e;return(0,p.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:t})},m=e=>{let{requiredImageRendererPluginVersion:t}=e;return t?(0,p.jsxs)(p.Fragment,{children:["You must update the ",a||(a=(0,p.jsx)(g,{text:"Grafana image renderer plugin"}))," to version"," ",t," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."]}):(0,p.jsxs)(p.Fragment,{children:["You must install the ",s||(s=(0,p.jsx)(g,{text:"Grafana image renderer plugin"}))," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."]})},f=e=>{let{showPreviews:t,onRemove:n,topSpacing:a,bottomSpacing:s}=e;const i=(0,c.useStyles2)(v),r=h.config.featureToggles.dashboardPreviews,o=h.config.rendererAvailable,{systemRequirements:{met:l,requiredImageRendererPluginVersion:d},thumbnailsExist:u}=h.config.dashboardPreviews,g=r&&t&&!(o&&l||u),f=d?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return(0,p.jsx)(p.Fragment,{children:g&&(0,p.jsx)("div",{className:i.wrapper,children:(0,p.jsx)(c.Alert,{className:i.alert,topSpacing:a,bottomSpacing:s,severity:"info",title:f,onRemove:n,children:(0,p.jsx)(m,{requiredImageRendererPluginVersion:d})})})})},v=()=>({wrapper:i.css`
      display: flex;
      justify-content: center;
    `,alert:i.css`
      max-width: 800px;
    `});var b=n(71625),x=n(32665),y=n(97982);const w=["error"];const j=(e,t)=>{let{error:n}=t,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,w);(0,h.reportInteraction)(`${e}_query_failed`,Object.assign({},S(a),{error:n}))},S=e=>{var t,n,a,s,i,r;const o=e.layout===y.A.Grid;return{previews:Boolean(h.config.featureToggles.panelTitleSearch)?o?"on":"off":"feature_disabled",layout:e.layout,starredFilter:null!==(t=e.starred)&&void 0!==t&&t,sort:null!==(n=e.sortValue)&&void 0!==n?n:"",tagCount:null!==(a=e.tagCount)&&void 0!==a?a:0,queryLength:null!==(s=null===(i=e.query)||void 0===i?void 0:i.length)&&void 0!==s?s:0,includePanels:null!==(r=e.includePanels)&&void 0!==r&&r}};var C=n(78603),k=n(67907),T=n(97621);const I=[{value:y.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:y.A.List,icon:"list-ul",ariaLabel:"View as list"}];function O(e){var t;const n=null!==(t=e.layout)&&void 0!==t?t:y.A.Folders;return n===y.A.Folders&&(e.query||e.sort||e.starred)?y.A.List:n!==y.A.Grid||h.config.featureToggles.dashboardPreviews?n:y.A.List}h.config.featureToggles.dashboardPreviews&&I.push({value:y.A.Grid,icon:"apps",ariaLabel:"Grid view"});const N=e=>{var t;let{onLayoutChange:n,onSortChange:a,onStarredFilterChange:s=(()=>{}),onTagFilterChange:i,getTagOptions:o,getSortOptions:l,onDatasourceChange:d,query:u,showStarredFilter:g,hideLayout:m,includePanels:f,setIncludePanels:v}=e;const b=(0,c.useStyles2)(F),x=O(u),w=u.query?[y.A.Folders]:[];return(0,r.useEffect)((()=>{f&&x===y.A.Folders&&v(!1)}),[x,f,v]),(0,p.jsxs)("div",{className:b.actionRow,children:[(0,p.jsxs)(c.HorizontalGroup,{spacing:"md",width:"auto",children:[(0,p.jsx)(k.D,{isClearable:!1,tags:u.tag,tagOptions:o,onChange:i}),h.config.featureToggles.panelTitleSearch&&(0,p.jsx)(c.Checkbox,{"data-testid":"include-panels",disabled:x===y.A.Folders,value:f,onChange:()=>v(!f),label:"Include panels"}),g&&(0,p.jsx)("div",{className:b.checkboxWrapper,children:(0,p.jsx)(c.Checkbox,{label:"Starred",onChange:s,value:u.starred})}),u.datasource&&(0,p.jsxs)(c.Button,{icon:"times",variant:"secondary",onClick:()=>d(void 0),children:["Datasource: ",u.datasource]})]}),(0,p.jsx)("div",{className:b.rowContainer,children:(0,p.jsxs)(c.HorizontalGroup,{spacing:"md",width:"auto",children:[!m&&(0,p.jsx)(c.RadioButtonGroup,{options:I,disabledOptions:w,onChange:e=>{localStorage.setItem(T.rh,e),n(e)},value:x}),(0,p.jsx)(C.P,{onChange:a,value:null===(t=u.sort)||void 0===t?void 0:t.value,getSortOptions:l,isClearable:!0})]})})]})};N.displayName="ActionRow";const F=e=>({actionRow:i.css`
      display: none;

      ${e.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${e.spacing(2)};
        width: 100%;
      }
    `,rowContainer:i.css`
      margin-right: ${e.v1.spacing.md};
    `,checkboxWrapper:i.css`
      label {
        line-height: 1.2;
      }
    `});var D,P,A=n(92115),M=n(80455),R=n(68366),$=n(5730);const L=e=>{let{section:t,selectionToggle:n,onClickItem:a,onTagSelected:s,selection:i,renderStandaloneBody:r,tags:o}=e;const d=null!=n,u=(0,c.useTheme)(),h=E(u,t.selected,d),[g,m]=(0,A.Z)((0,M.tT)(t.title),!1),f=(0,l.Z)((async()=>{if(!g&&!r)return Promise.resolve([]);let e=t.uid,n=t.title,a={query:"*",kind:["dashboard"],location:t.uid,sort:"name_sort",limit:1e3};t.itemsUIDs&&(a={uid:t.itemsUIDs},e=void 0,n=void 0);return(await(0,x.O)().search(Object.assign({},a,{tags:o}))).view.map((t=>{var a;return{uid:t.uid,title:t.name,url:t.url,uri:t.url,type:"folder"===t.kind?y.o.DashFolder:y.o.DashDB,id:666,isStarred:!1,tags:null!==(a=t.tags)&&void 0!==a?a:[],folderUid:e,folderTitle:n}}))}),[g,t,o]),v=`section-header-label-${(0,R.L)()}`;let b=t.icon;b||(b=g?"folder-open":"folder");const w=()=>f.value?0!==f.value.length||f.loading?f.value.map((e=>{if(i&&n){const t=e.type===y.o.DashFolder?"folder":"dashboard";e=Object.assign({},e,{checked:i(t,e.uid)})}return(0,p.jsx)($.T,{item:e,onTagSelected:s,onToggleChecked:e=>{n&&n("dashboard",e.uid)},editable:Boolean(null!=i),onClickItem:a},e.uid)})):D||(D=(0,p.jsx)(c.Card,{children:(0,p.jsx)(c.Card.Heading,{children:"No results found"})})):null;var j;return r?(0,p.jsx)("div",{className:h.folderViewResults,children:null!==(j=f.value)&&void 0!==j&&j.length||!f.loading?w():(0,p.jsx)(c.Spinner,{className:h.spinner})}):(0,p.jsx)(c.CollapsableSection,{isOpen:null!=g&&g,onToggle:()=>{m(!g)},className:h.wrapper,contentClassName:h.content,loading:f.loading,labelId:v,label:(0,p.jsxs)(p.Fragment,{children:[n&&i&&(0,p.jsx)("div",{className:h.checkbox,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),n&&i){var a;const e=!i(t.kind,t.uid);n(t.kind,t.uid);const s=null!==(a=f.value)&&void 0!==a?a:[];for(const t of s)i("dashboard",t.uid)!==e&&n("dashboard",t.uid)}},children:(0,p.jsx)(c.Checkbox,{value:i(t.kind,t.uid),"aria-label":"Select folder"})}),(0,p.jsx)("div",{className:h.icon,children:(0,p.jsx)(c.Icon,{name:b})}),(0,p.jsxs)("div",{className:h.text,children:[(0,p.jsx)("span",{id:v,children:t.title}),t.url&&"general"!==t.uid&&(0,p.jsxs)("a",{href:t.url,className:h.link,children:[(0,p.jsx)("span",{className:h.separator,children:"|"})," ",P||(P=(0,p.jsx)(c.Icon,{name:"folder-upload"}))," Go to folder"]})]})]}),children:f.value&&(0,p.jsx)("ul",{className:h.sectionItems,children:w()})})},E=(0,c.stylesFactory)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{sm:a}=e.spacing;return{wrapper:(0,i.cx)(i.css`
        align-items: center;
        font-size: ${e.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${e.colors.textWeak};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${e.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:t}),sectionItems:i.css`
      margin: 0 24px 0 32px;
    `,checkbox:i.css`
      padding: 0 ${a} 0 0;
    `,icon:i.css`
      padding: 0 ${a} 0 ${n?0:a};
    `,folderViewResults:i.css`
      overflow: auto;
    `,text:i.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:i.css`
      padding: 2px 10px 0;
      color: ${e.colors.textWeak};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:i.css`
      margin-right: 6px;
    `,content:i.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:i.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}}));var V=n(16695),B=n(61959),z=n(61884);const _=e=>{let{selection:t,selectionToggle:n,onTagSelected:a,tags:s,hidePseudoFolders:i,onClickItem:r}=e;const o=(0,c.useStyles2)(U),d=(0,l.Z)((async()=>{const e=[];if(!i){if(B.Vt.isSignedIn){const t=await(0,h.getBackendSrv)().get("api/user/stars");t.length>0&&e.push({title:"Starred",icon:"star",kind:"query-star",uid:"__starred",itemsUIDs:t})}const t=z.Z.getDashboardOpened();if(t.length){const n=await(0,h.getBackendSrv)().get(`/api/dashboards/ids/${t.slice(0,30).join(",")}`);n.length&&e.push({title:"Recent",icon:"clock-nine",kind:"query-recent",uid:"__recent",itemsUIDs:n})}}e.push({title:"General",url:"/dashboards",kind:"folder",uid:T.YQ});const t=await(0,x.O)().search({query:"*",kind:["folder"]});for(const n of t.view)e.push({title:n.name,url:n.url,uid:n.uid,kind:n.kind});return e}),[]);return(0,p.jsx)("div",{className:o.wrapper,children:d.loading?(0,p.jsx)(c.Spinner,{className:o.spinner}):d.value?d.value.map((e=>(0,p.jsx)("div",{"data-testid":V.wl.components.Search.sectionV2,className:o.section,children:e.title&&(0,p.jsx)(L,{selection:t,selectionToggle:n,onTagSelected:a,section:e,tags:s,onClickItem:r})},e.title))):(0,p.jsx)(c.Alert,{className:o.error,title:d.error?d.error.message:"Something went wrong"})})},U=e=>({wrapper:i.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${e.v1.colors.border2};
    `,section:i.css`
      display: flex;
      flex-direction: column;
      background: ${e.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${e.v1.colors.border2};
      }
    `,spinner:i.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:i.css`
      margin: ${e.spacing(4)} auto;
    `});var H=n(85189);const W=e=>{var t,n;let{results:a,onDeleteItems:s,isOpen:i,onDismiss:r}=e;const o=(0,c.useTheme)(),l=q(o),d=Array.from(null!==(t=a.get("dashboard"))&&void 0!==t?t:[]),u=Array.from(null!==(n=a.get("folder"))&&void 0!==n?n:[]),h=u.length,g=d.length;let m,f="Do you want to delete the ";const v=1===g?"":"s",b=1===h?"":"s";h>0&&g>0?(f+=`selected folder${b} and dashboard${v}?\n`,m=`All dashboards and alerts of the selected folder${b} will also be deleted`):f+=h>0?`selected folder${b} and all ${1===h?"its":"their"} dashboards and alerts?`:`${g} selected dashboard${v}?`;return i?(0,p.jsx)(c.ConfirmModal,{isOpen:i,title:"Delete",body:(0,p.jsxs)(p.Fragment,{children:[f," ",m&&(0,p.jsx)("div",{className:l.subtitle,children:m})]}),confirmText:"Delete",onConfirm:()=>{(0,H.Fd)(u,d).then((()=>{s(),r()}))},onDismiss:r}):null},q=(0,c.stylesFactory)((e=>({subtitle:i.css`
      font-size: ${e.typography.size.base};
      padding-top: ${e.spacing.md};
    `})));var Z=n(95513),G=n(58257);const K=e=>{var t;let{results:n,onMoveItems:a,isOpen:s,onDismiss:i}=e;const[o,l]=(0,r.useState)(null),d=(0,c.useTheme)(),u=Q(d),h=(0,G.iG)(),g=Array.from(null!==(t=n.get("dashboard"))&&void 0!==t?t:[]),[m,f]=(0,r.useState)(!1);return s?(0,p.jsx)(c.Modal,{className:u.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:s,onDismiss:i,children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:u.content,children:[(0,p.jsxs)("p",{children:["Move the ",g.length," selected dashboard",1===g.length?"":"s"," to the following folder:"]}),(0,p.jsx)(Z.E,{onChange:e=>l(e)})]}),(0,p.jsxs)(c.HorizontalGroup,{justify:"center",children:[(0,p.jsx)(c.Button,{icon:m?"fa fa-spinner":void 0,variant:"primary",onClick:()=>{if(o&&g.length){var e;const t=null!==(e=o.title)&&void 0!==e?e:"General";f(!0),(0,H.ct)(g,o).then((e=>{if(e.successCount>0){const n=1===e.successCount?"":"s",a=`Dashboard${n} Moved`,s=`${e.successCount} dashboard${n} moved to ${t}`;h.success(a,s)}e.totalCount===e.alreadyInFolderCount?h.error("Error",`Dashboard already belongs to folder ${t}`):a(),f(!1),i()}))}},children:"Move"}),(0,p.jsx)(c.Button,{variant:"secondary",onClick:i,children:"Cancel"})]})]})}):null},Q=(0,c.stylesFactory)((e=>({modal:i.css`
      width: 500px;
    `,content:i.css`
      margin-bottom: ${e.spacing.lg};
    `})));function J(e){var t;let{items:n,folder:a,onChange:s,clearSelection:i}=e;const o=(0,c.useStyles2)(F),l=null==a?void 0:a.canSave,d=a?l:B.Vt.hasEditPermissionInFolders,u=d,h=Array.from(null!==(t=n.get("folder"))&&void 0!==t?t:[]).find((e=>e===T.YQ)),g=d&&!h,[m,f]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1);return(0,p.jsxs)("div",{className:o.actionRow,"data-testid":"manage-actions",children:[(0,p.jsx)("div",{className:o.rowContainer,children:(0,p.jsxs)(c.HorizontalGroup,{spacing:"md",width:"auto",children:[(0,p.jsx)(c.IconButton,{name:"check-square",onClick:i,title:"Uncheck everything"}),(0,p.jsx)(c.Button,{disabled:!u,onClick:()=>{f(!0)},icon:"exchange-alt",variant:"secondary",children:"Move"}),(0,p.jsx)(c.Button,{disabled:!g,onClick:()=>{b(!0)},icon:"trash-alt",variant:"destructive",children:"Delete"})]})}),(0,p.jsx)(W,{onDeleteItems:s,results:n,isOpen:v,onDismiss:()=>b(!1)}),(0,p.jsx)(K,{onMoveItems:s,results:n,isOpen:m,onDismiss:()=>f(!1)})]})}var Y=n(62859),X=n(47535),ee=n(77810),te=n(51189);const ne=r.memo((e=>{let{response:t,width:n,height:a,selection:s,selectionToggle:i,onTagSelected:o,keyboardEvents:l,onClickItem:d}=e;const u=(0,c.useStyles2)(ae),h=(0,r.useRef)(null),[g,m]=(0,r.useState)(null),f=(0,te.v)(l,0,t);(0,r.useEffect)((()=>{h.current&&h.current.resetloadMoreItemsCache(),g&&g.scrollTo(0)}),[t,g]);const v=(0,r.useCallback)((e=>{var n,a;let{index:r,style:l}=e;const c=null===(n=t.view.dataFrame.meta)||void 0===n?void 0:n.custom;let h="";r===f.y&&(h+=" "+u.selectedRow);const g=t.view.get(r);let m={uid:g.uid,title:g.name,url:g.url,uri:g.url,type:"folder"===g.kind?y.o.DashFolder:y.o.DashDB,id:666,isStarred:!1,tags:null!==(a=g.tags)&&void 0!==a?a:[]};if(g.location){const e=g.location.split("/")[0],t=c.locationInfo[e];t&&(m.folderUid=g.location,m.folderTitle=t.name)}if(s&&i){const e=m.type===y.o.DashFolder?"folder":"dashboard";m=Object.assign({},m,{checked:s(e,m.uid)})}return(0,p.jsx)("div",{style:l,className:h,role:"row",children:(0,p.jsx)(ee.T,{item:m,onTagSelected:o,onToggleChecked:e=>{i&&i("dashboard",e.uid)},editable:Boolean(null!=s),onClickItem:d})},g.uid)}),[t.view,f,u,o,s,i,d]);return t.totalRows?(0,p.jsx)("div",{"aria-label":"Search results list",style:{width:n},role:"list",children:(0,p.jsx)(X.Z,{ref:h,isItemLoaded:t.isItemLoaded,itemCount:t.totalRows,loadMoreItems:t.loadMoreItems,children:e=>{let{onItemsRendered:n,ref:s}=e;return(0,p.jsx)(Y.t7,{ref:e=>{s(e),m(e)},onItemsRendered:n,height:a,itemCount:t.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"},children:v})}})}):(0,p.jsx)("div",{className:u.noData,style:{width:n},children:"No data"})}));ne.displayName="SearchResultsCards";const ae=e=>({noData:i.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:i.css`
      border-left: 3px solid ${e.colors.primary.border};
    `});var se=n(18084);const ie=e=>{var t;let{response:n,width:a,height:s,selection:i,selectionToggle:r,onTagSelected:o,onClickItem:l,keyboardEvents:d}=e;const u=(0,c.useStyles2)(re),g={editable:null!=i,onToggleChecked:e=>{const t=e,n=t.type===y.o.DashFolder?"folder":"dashboard";r&&r(n,t.uid)},onTagSelected:o,onClick:l},m=null!==(t=n.totalRows)&&void 0!==t?t:n.view.length,f=n.view,v=Math.ceil(a/320),b=a/v,x=.75*(b-64)+56+8,w=Math.ceil(m/v),j=(0,te.v)(d,v,n);return(0,p.jsx)(X.Z,{isItemLoaded:n.isItemLoaded,itemCount:m,loadMoreItems:n.loadMoreItems,children:e=>{let{onItemsRendered:t,ref:n}=e;return(0,p.jsx)(Y.Ym,{ref:n,onItemsRendered:e=>{t({visibleStartIndex:e.visibleRowStartIndex*v,visibleStopIndex:e.visibleRowStopIndex*v,overscanStartIndex:e.overscanRowStartIndex*v,overscanStopIndex:e.overscanColumnStopIndex*v})},columnCount:v,columnWidth:b,rowCount:w,rowHeight:x,className:u.wrapper,innerElementType:"ul",height:s,width:a-2,children:e=>{var t,n;let{columnIndex:a,rowIndex:s,style:r}=e;const o=s*v+a;if(o>=f.length)return null;const l=f.get(o),d=null!==(t=l.kind)&&void 0!==t?t:"dashboard",c={uid:l.uid,title:l.name,url:l.url,uri:l.url,type:"folder"===d?y.o.DashFolder:y.o.DashDB,id:666,isStarred:!1,tags:null!==(n=l.tags)&&void 0!==n?n:[],checked:!!i&&i(d,l.uid)};if("panel"===d){const e=l.panel_type;if(c.icon="public/img/icons/unicons/graph-bar.svg",e){const t=h.config.panels[e];if(null!=t&&t.name){var m;const e=null===(m=t.info)||void 0===m?void 0:m.logos.small;e&&e.endsWith(".svg")&&(c.icon=e)}}}let b=u.virtualizedGridItemWrapper;return s===j.y&&a===j.x&&(b+=" "+u.selectedItem),l?(0,p.jsx)("li",{style:r,className:b,children:(0,p.jsx)(se.K,Object.assign({},g,{item:c}),l.uid)}):null}})}})},re=e=>({virtualizedGridItemWrapper:i.css`
    padding: 4px;
  `,wrapper:i.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:i.css`
    box-shadow: inset 1px 1px 3px 3px ${e.colors.primary.border};
  `});var oe,le,de,ce=n(49075);const ue=e=>{var t;let{showManage:n,folderDTO:a,queryText:s,onQueryTextChange:i,hidePseudoFolders:g,includePanels:m,setIncludePanels:v,keyboardEvents:w}=e;const C=(0,c.useStyles2)(he),{query:k,onTagFilterChange:T,onStarredFilterChange:I,onTagAdd:F,onDatasourceChange:D,onSortChange:P,onLayoutChange:A,onClearStarred:M}=(0,b.A)({});k.query=s;const[R,$]=(0,r.useState)(function(){const e=new Map;return{items:e,isSelected:(t,n)=>{var a;return Boolean(null===(a=e.get(t))||void 0===a?void 0:a.has(n))}}}()),E=O(k),V=E===y.A.Folders,[B,z]=(0,r.useState)(Date.now()),U=a?"manage_dashboards":"dashboard_search",H=(0,r.useMemo)((()=>{var e,t,n,i;const r={query:s,tags:k.tag,ds_uid:k.datasource,location:null==a?void 0:a.uid,sort:null===(e=k.sort)||void 0===e?void 0:e.value,explain:k.explain,withAllowedActions:k.explain,starred:k.starred};return null!==(t=r.sort)&&void 0!==t&&t.length&&!r.sort.includes("name")&&(r.kind=["dashboard","folder"]),null!==(n=r.query)&&void 0!==n&&n.length||(r.query="*",r.location||(r.kind=["dashboard","folder"])),m||r.kind||(r.kind=["dashboard","folder"]),"*"!==r.query||null!==(i=r.sort)&&void 0!==i&&i.length||(r.sort="name_sort"),r}),[k,s,a,m]);(0,o.Z)((()=>{var e,t;((e,t)=>{(0,h.reportInteraction)(`${e}_viewed`,S(t))})(U,{layout:k.layout,starred:k.starred,sortValue:null===(e=k.sort)||void 0===e?void 0:e.value,query:k.query,tagCount:null===(t=k.tag)||void 0===t?void 0:t.length,includePanels:m})}),1e3,[]);const W=()=>{var e,t;((e,t)=>{(0,h.reportInteraction)(`${e}_result_clicked`,S(t))})(U,{layout:k.layout,starred:k.starred,sortValue:null===(e=k.sort)||void 0===e?void 0:e.value,query:k.query,tagCount:null===(t=k.tag)||void 0===t?void 0:t.length,includePanels:m})},q=(0,l.Z)((()=>{var e,t;const n={layout:k.layout,starred:k.starred,sortValue:null===(e=k.sort)||void 0===e?void 0:e.value,query:k.query,tagCount:null===(t=k.tag)||void 0===t?void 0:t.length,includePanels:m};return((e,t)=>{(0,h.reportInteraction)(`${e}_query_submitted`,S(t))})(U,n),H.starred?(0,x.O)().starred(H).catch((e=>j(U,Object.assign({},n,{error:null==e?void 0:e.message})))):(0,x.O)().search(H).catch((e=>j(U,Object.assign({},n,{error:null==e?void 0:e.message}))))}),[H]),Z=(0,r.useCallback)((()=>{R.items.clear(),$(Object.assign({},R))}),[R]),G=(0,r.useCallback)(((e,t)=>{const n=R.isSelected(e,t);$(function(e,t,n,a){const s=e.items;if(a.length){const e=s.get(n);if(e){for(const n of a)t?e.add(n):e.delete(n);e.size<1&&s.delete(n)}else t&&s.set(n,new Set(a))}return{items:s,isSelected:(e,t)=>{var n;if("*"===t){var a;if("*"===e){for(const e of s.keys()){var i;if(null!==(i=s.get(e))&&void 0!==i&&i.size)return!0}return!1}return Boolean(null===(a=s.get(e))||void 0===a?void 0:a.size)}return Boolean(null===(n=s.get(e))||void 0===n?void 0:n.has(t))}}}(R,!n,e,[t]))}),[R]),K=(0,r.useCallback)((e=>{I(e)}),[I]);return!a||q.loading||null!==(t=q.value)&&void 0!==t&&t.totalRows||s.length?(0,p.jsxs)(p.Fragment,{children:[Boolean(R.items.size>0)?(0,p.jsx)(J,{items:R.items,onChange:async()=>{Z(),z(Date.now()),i(k.query)},clearSelection:Z}):(0,p.jsx)(N,{onLayoutChange:e=>{e===y.A.Folders&&(k.query&&i(""),k.starred&&M()),A(e)},showStarredFilter:g,onStarredFilterChange:g?K:void 0,onSortChange:P,onTagFilterChange:T,getTagOptions:()=>(0,x.O)().tags(H),getSortOptions:(0,x.O)().getSortOptions,onDatasourceChange:D,query:k,includePanels:m,setIncludePanels:v}),E===y.A.Grid&&(0,p.jsx)(f,{bottomSpacing:3,showPreviews:!0,onRemove:()=>A(y.A.List)}),(()=>{const e=q.value;if(!(e&&e.totalRows||V))return q.loading&&!e?oe||(oe=(0,p.jsx)(c.Spinner,{})):(0,p.jsxs)("div",{className:C.noResults,children:[le||(le=(0,p.jsx)("div",{children:"No results found for your query."})),de||(de=(0,p.jsx)("br",{})),(0,p.jsx)(c.Button,{variant:"secondary",onClick:()=>{var e;k.query&&i(""),null!==(e=k.tag)&&void 0!==e&&e.length&&T([]),k.datasource&&D(void 0)},children:"Clear search and filters"})]});const t=n?R.isSelected:void 0;return E===y.A.Folders?a?(0,p.jsx)(L,{section:{uid:a.uid,kind:"folder",title:a.title},selection:t,selectionToggle:G,onTagSelected:F,renderStandaloneBody:!0,tags:k.tag,onClickItem:W},B):(0,p.jsx)(_,{selection:t,selectionToggle:G,tags:k.tag,onTagSelected:F,hidePseudoFolders:g,onClickItem:W},B):(0,p.jsx)("div",{style:{height:"100%",width:"100%"},children:(0,p.jsx)(d.Z,{children:n=>{let{width:a,height:s}=n;const i={response:e,selection:t,selectionToggle:G,clearSelection:Z,width:a,height:s,onTagSelected:F,keyboardEvents:w,onDatasourceChange:k.datasource?D:void 0,onClickItem:W};return E===y.A.Grid?(0,p.jsx)(ie,Object.assign({},i)):a<800?(0,p.jsx)(ne,Object.assign({},i)):(0,p.jsx)(ce.Q,Object.assign({},i))}})})})()]}):(0,p.jsx)(u.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderId=${a.id}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""})},he=e=>({searchInput:i.css`
    margin-bottom: 6px;
    min-height: ${e.spacing(4)};
  `,unsupported:i.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:i.css`
    padding: ${e.v1.spacing.md};
    background: ${e.v1.colors.bg2};
    font-style: italic;
    margin-top: ${e.v1.spacing.md};
  `})},92674:(e,t,n)=>{"use strict";n.d(t,{$1:()=>r,EF:()=>a,Fe:()=>d,Gs:()=>l,Iy:()=>c,MC:()=>i,Mj:()=>h,NJ:()=>u,QT:()=>s,ji:()=>o});const a="TOGGLE_STARRED",s="REMOVE_STARRED",i="QUERY_CHANGE",r="DATASOURCE_CHANGE",o="REMOVE_TAG",l="CLEAR_FILTERS",d="SET_TAGS",c="ADD_TAG",u="TOGGLE_SORT",h="LAYOUT_CHANGE"},67476:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o,wi:()=>i,xi:()=>r});var a=n(97982),s=n(92674);const i={query:"",tag:[],starred:!1,sort:null,layout:a.A.Folders,prevSort:null},r={sort:null,starred:null,query:null,tag:null,layout:null},o=(e,t)=>{switch(t.type){case s.MC:return Object.assign({},e,{query:t.payload});case s.ji:return Object.assign({},e,{tag:e.tag.filter((e=>e!==t.payload))});case s.Fe:return Object.assign({},e,{tag:t.payload});case s.Iy:{const n=t.payload;return n&&!e.tag.includes(n)?Object.assign({},e,{tag:[...e.tag,n]}):e}case s.$1:return Object.assign({},e,{datasource:t.payload});case s.EF:return Object.assign({},e,{starred:t.payload});case s.QT:return Object.assign({},e,{starred:!1});case s.Gs:return Object.assign({},e,{query:"",tag:[],starred:!1,sort:null});case s.NJ:{const n=t.payload;return e.layout===a.A.Folders?Object.assign({},e,{sort:n,layout:a.A.List}):Object.assign({},e,{sort:n})}case s.Mj:{const n=t.payload;return e.sort&&n===a.A.Folders?Object.assign({},e,{layout:n,sort:null,prevSort:e.sort}):Object.assign({},e,{layout:n,sort:e.prevSort})}default:return e}}},32665:(e,t,n)=>{"use strict";n.d(t,{O:()=>S});var a=n(90923),s=n(58799),i=n(43215),r=n(63686),o=n(29937),l=n(22305);async function d(e){var t;e.query&&e.query.indexOf("folder:current")>=0&&(null!==(t=(e=Object.assign({},e,{location:await c(),query:e.query.replace("folder:current","").trim()})).query)&&void 0!==t&&t.length||(e.query="*"));return Promise.resolve(e)}async function c(){try{var e,t;let a=(0,l.h4)().getCurrent();return a||(await(n=500,new Promise((e=>setTimeout(e,n)))),a=(0,l.h4)().getCurrent()),Promise.resolve(null===(e=a)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.folderUid)}catch(e){console.error(e)}var n}const u="Loading";class h{constructor(e){this.fallbackSearcher=e}async search(e){var t;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");return this.doSearchQuery(e)}async starred(e){var t,n;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");const s={uid:await(0,a.getBackendSrv)().get("api/user/stars"),query:null!==(n=e.query)&&void 0!==n?n:"*"};return this.doSearchQuery(s)}async tags(e){var t,n;const a=await(0,r.e)(),i={refId:"TagsQuery",queryType:o.hR.Search,search:Object.assign({},e,{query:null!==(t=e.query)&&void 0!==t?t:"*",sort:void 0,facet:[{field:"tag"}],limit:1})},l=(await(0,s.n)(a.query({targets:[i]}))).data;if((null==l||null===(n=l[0])||void 0===n?void 0:n.name)===u)return this.fallbackSearcher.tags(e);for(const e of l)if("tag"===e.fields[0].name)return m(e);return[]}getSortOptions(){const e=[{value:"name_sort",label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(a.config.licenseInfo.enabledFeatures.analytics){for(const t of f)e.push({value:`-${t.name}`,label:`${t.display} (most)`}),e.push({value:`${t.name}`,label:`${t.display} (least)`});for(const t of v)e.push({value:`-${t.name}`,label:`${t.display} (recent)`}),e.push({value:`${t.name}`,label:`${t.display} (oldest)`})}return Promise.resolve(e)}async doSearchQuery(e){var t,n,l,c,h,m,b;e=await d(e);const x=await(0,r.e)(),y={refId:"Search",queryType:o.hR.Search,search:Object.assign({},e,{query:null!==(t=e.query)&&void 0!==t?t:"*",limit:null!==(n=e.limit)&&void 0!==n?n:p})},w=null!==(l=null===(c=(await(0,s.n)(x.query({targets:[y]}))).data)||void 0===c?void 0:c[0])&&void 0!==l?l:{fields:[],length:0};if(w.name===u)return this.fallbackSearcher.search(e);for(const e of w.fields)e.display=(0,i.getDisplayProcessor)({field:e,theme:a.config.theme2});null!==(h=w.meta)&&void 0!==h&&h.custom||(w.meta=Object.assign({},w.meta,{custom:{count:w.length,max_score:1}}));const j=w.meta.custom;if(j.locationInfo||(j.locationInfo={}),null!==(m=j.sortBy)&&void 0!==m&&m.length){const e=w.fields.find((e=>e.name===j.sortBy));if(e){const t=function(e){for(const t of f)if(t.name===e)return t.display;for(const t of v)if(t.name===e)return t.display;return e}(e.name);j.sortBy=t,e.name=t}}let S,C=0;const k=new i.DataFrameView(w);return{totalRows:null!==(b=j.count)&&void 0!==b?b:w.length,view:k,loadMoreItems:async(e,t)=>(C=Math.max(C,t),S||(S=(async()=>{for(;C>k.dataFrame.length;){var e,t,n;const a=k.dataFrame.length;if(a>=j.count)return;const i=null===(e=(await(0,s.n)(x.query({targets:[Object.assign({},y,{search:Object.assign({},null!==(t=null==y?void 0:y.search)&&void 0!==t?t:{},{from:a,limit:g}),refId:"Page",facet:void 0})]}))).data)||void 0===e?void 0:e[0];if(!i)return void console.log("no results",i);if(i.fields.length!==k.dataFrame.fields.length)return void console.log("invalid shape",i,k.dataFrame);const r=i.length+k.dataFrame.length;for(let e=0;e<i.fields.length;e++)k.dataFrame.fields[e].values.buffer.push(...i.fields[e].values.toArray());k.dataFrame.length=r;const o=null===(n=i.meta)||void 0===n?void 0:n.custom;if(null!=o&&o.locationInfo&&j)for(const[e,t]of Object.entries(o.locationInfo))j.locationInfo[e]=t}S=void 0})()),S),isItemLoaded:e=>e<k.dataFrame.length}}}const p=50,g=100;function m(e){const t=e.fields[0].values,n=e.fields[1].values,a=[];for(let s=0;s<e.length;s++)a.push({term:t.get(s),count:n.get(s)});return a}const f=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],v=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];var b=n(28659),x=n(97621),y=n(97982);class w{constructor(){var e,t,n;n={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},(t="locationInfo")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}async composeQuery(e,t){var n,a;const s=await d(t);var i;"*"===s.query?1===(null===(i=s.kind)||void 0===i?void 0:i.length)&&x.xb[s.kind[0]]&&(e.type=x.xb[s.kind[0]]):null!==(n=s.query)&&void 0!==n&&n.length&&(e.query=s.query);if(s.uid)e.dashboardUID=s.uid;else if(null!==(a=s.location)&&void 0!==a&&a.length){var r,o;let t=this.locationInfo[s.location];t||(await this.doAPIQuery({type:y.o.DashFolder,limit:999}),t=this.locationInfo[s.location]),e.folderIds=[null!==(r=null===(o=t)||void 0===o?void 0:o.folderId)&&void 0!==r?r:0]}return e}async search(e){var t,n;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");const a=await this.composeQuery({limit:null!==(n=e.limit)&&void 0!==n?n:x.E_,tag:e.tags,sort:e.sort},e);return this.doAPIQuery(a)}async starred(e){var t,n;if(null!==(t=e.facet)&&void 0!==t&&t.length)throw new Error("facets not supported!");const a=await this.composeQuery({limit:null!==(n=e.limit)&&void 0!==n?n:x.E_,tag:e.tags,sort:e.sort,starred:e.starred},e);return this.doAPIQuery(a)}async getSortOptions(){return(await b.ae.get("/api/search/sorting")).sortOptions.map((e=>({value:e.name,label:e.displayName})))}async tags(e){return(await b.ae.get("/api/dashboards/tags")).sort(((e,t)=>t.count-e.count))}async doAPIQuery(e){var t;const n=await b.ae.get("/api/search",e),s=[],r=[],o=[],l=[],d=[],c=[],u=[];let h;for(let e of n){var p;const t="dash-folder"===e.type?"folder":"dashboard";s.push(t),r.push(e.title),o.push(e.uid),l.push(e.url),d.push(e.tags),u.push(e.sortMeta);let n=e.folderUid;n||"dashboard"!==t||(n="general"),c.push(n),null!==(p=e.sortMetaName)&&void 0!==p&&p.length&&(h=e.sortMetaName),e.folderUid&&e.folderTitle?this.locationInfo[e.folderUid]={kind:"folder",name:e.folderTitle,url:e.folderUrl,folderId:e.folderId}:"folder"===t&&(this.locationInfo[e.uid]={kind:t,name:e.title,url:e.url,folderId:e.id})}const g={fields:[{name:"kind",type:i.FieldType.string,config:{},values:new i.ArrayVector(s)},{name:"name",type:i.FieldType.string,config:{},values:new i.ArrayVector(r)},{name:"uid",type:i.FieldType.string,config:{},values:new i.ArrayVector(o)},{name:"url",type:i.FieldType.string,config:{},values:new i.ArrayVector(l)},{name:"tags",type:i.FieldType.other,config:{},values:new i.ArrayVector(d)},{name:"location",type:i.FieldType.string,config:{},values:new i.ArrayVector(c)}],length:r.length,meta:{custom:{count:r.length,max_score:1,locationInfo:this.locationInfo}}};null!==(t=h)&&void 0!==t&&t.length&&u.length&&(g.meta.custom.sortBy=h,g.fields.push({name:h,type:i.FieldType.number,config:{},values:new i.ArrayVector(u)}));for(const e of g.fields)e.display=(0,i.getDisplayProcessor)({field:e,theme:a.config.theme2});const m=new i.DataFrameView(g);return{totalRows:g.length,view:m,loadMoreItems:async(e,t)=>{},isItemLoaded:e=>!0}}}let j;function S(){const e=new w;if(!j){const t=a.config.featureToggles.panelTitleSearch;j=t?new h(e):e}return j}},97982:(e,t,n)=>{"use strict";let a,s;n.d(t,{A:()=>s,o:()=>a}),function(e){e.DashDB="dash-db",e.DashHome="dash-home",e.DashFolder="dash-folder"}(a||(a={})),function(e){e.List="list",e.Folders="folders",e.Grid="grid"}(s||(s={}))},80455:(e,t,n)=>{"use strict";n.d(t,{L:()=>s,tT:()=>i,vj:()=>r});var a=n(97621);const s=e=>{var t;return!!e&&Boolean(e.query||(null===(t=e.tag)||void 0===t?void 0:t.length)>0||e.starred||e.sort)},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"General";return`${a.qi}.${e.toLowerCase()}`},r=e=>{const t=Object.entries(e).reduce(((e,t)=>{let[n,a]=t;return a?"tag"!==n||Array.isArray(a)?"sort"===n?Object.assign({},e,{sort:{value:a}}):Object.assign({},e,{[n]:a}):Object.assign({},e,{tag:[a]}):e}),{});if(e.folder){var n;const a=`folder:${e.folder}`;return Object.assign({},t,{query:`${a} ${(null!==(n=t.query)&&void 0!==n?n:"").replace(a,"")}`})}return Object.assign({},t)}},26343:(e,t,n)=>{"use strict";n.d(t,{m:()=>d});var a=n(36636),s=n(68404),i=n(34110),r=n(3490),o=n(45916);const l=[{label:"No expiration",value:!1},{label:"Set expiration date",value:!0}],d=e=>{let{isOpen:t,token:n,serviceAccountLogin:a,onCreateToken:d,onClose:h}=e,p=new Date;p.setDate(p.getDate()+1);const[g,m]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[b,x]=(0,s.useState)(!1),[y,w]=(0,s.useState)(p),[j,S]=(0,s.useState)(""!==y),C=(0,r.useStyles2)(u);(0,s.useEffect)((()=>{t&&m(`${a}-${(0,i.Z)()}`)}),[a,t]);const k=()=>{v(""),m(""),x(!1),w(p),S(""!==y),h()},T=n?"Service account token created":"Add service account token";return(0,o.jsx)(r.Modal,{isOpen:t,title:T,onDismiss:k,className:C.modal,contentClassName:C.modalContent,children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Field,{label:"Token",description:"Copy the token now as you will not be able to see it again. Loosing a token requires creating a new one.",children:(0,o.jsxs)("div",{className:C.modalTokenRow,children:[(0,o.jsx)(r.Input,{name:"tokenValue",value:n,readOnly:!0}),(0,o.jsx)(r.ClipboardButton,{className:C.modalCopyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>n,children:"Copy clipboard"})]})}),(0,o.jsxs)(r.Modal.ButtonRow,{children:[(0,o.jsx)(r.ClipboardButton,{variant:"primary",getText:()=>n,onClipboardCopy:k,children:"Copy to clipboard and close"}),(0,o.jsx)(r.Button,{variant:"secondary",onClick:k,children:"Close"})]})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)(r.Field,{label:"Display name",description:"Name to easily identify the token",required:!0,children:(0,o.jsx)(r.Input,{name:"tokenName",value:f,placeholder:g,onChange:e=>{v(e.currentTarget.value)}})}),(0,o.jsx)(r.Field,{label:"Expiration",children:(0,o.jsx)(r.RadioButtonGroup,{options:l,value:b,onChange:x,size:"md"})}),b&&(0,o.jsx)(r.Field,{label:"Expiration date",children:(0,o.jsx)(r.DatePickerWithInput,{onChange:e=>{S(""!==e),w(e)},value:y,placeholder:"",minDate:p})}),(0,o.jsx)(r.Modal.ButtonRow,{children:(0,o.jsx)(r.Button,{onClick:()=>{d({name:f||g,secondsToLive:b?c(y):void 0})},disabled:b&&!j,children:"Generate token"})})]})})},c=e=>{const t=new Date(e),n=new Date;return Math.ceil((t.getTime()-n.getTime())/1e3)},u=e=>({modal:a.css`
      width: 550px;
    `,modalContent:a.css`
      overflow: visible;
    `,modalTokenRow:a.css`
      display: flex;
    `,modalCopyToClipboardButton:a.css`
      margin-left: ${e.spacing(.5)};
    `})},89847:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});const a="grafana.serviceaccounts.showApiKeysMigrationInfo"},79710:(e,t,n)=>{"use strict";n.d(t,{R5:()=>y,TL:()=>f,XE:()=>w,Xd:()=>g,bX:()=>h,f3:()=>S,fT:()=>b,hv:()=>p,xi:()=>j,yN:()=>v});var a=n(82897),s=n(90923),i=n(77058),r=n(61959),o=n(17421),l=n(47570),d=n(89847),c=n(88001);const u="/api/serviceaccounts";function h(){return async e=>{try{if(r.Vt.licensedAccessControlEnabled()&&r.Vt.hasPermission(l.bW.ActionRolesList)){const t=await(0,i.ul)();e((0,c.Dn)(t))}if(r.Vt.accessControlBuiltInRoleAssignmentEnabled()&&r.Vt.licensedAccessControlEnabled()&&r.Vt.hasPermission(l.bW.ActionBuiltinRolesList)){const t=await(0,i.fh)();e((0,c.V0)(t))}}catch(e){console.error(e)}}}function p(){return async e=>{if(r.Vt.hasPermission(l.bW.ServiceAccountsRead)){const t=await(0,s.getBackendSrv)().get("/api/serviceaccounts/migrationstatus");e((0,c.cB)(!(null==t||!t.migrated)))}}}function g(){let{withLoadingIndicator:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withLoadingIndicator:!1};return async(t,n)=>{try{if(r.Vt.hasPermission(l.bW.ServiceAccountsRead)){e&&t((0,c.pN)());const{perPage:a,page:i,query:r,serviceAccountStateFilter:o}=n().serviceAccounts,l=await(0,s.getBackendSrv)().get(`/api/serviceaccounts/search?perpage=${a}&page=${i}&query=${r}${x(o)}&accesscontrol=true`);t((0,c.Ub)(l))}}catch(e){console.error(e)}finally{t((0,c.dt)())}}}const m=(0,a.debounce)((e=>e(g())),500,{leading:!0});function f(e){return async t=>{await(0,s.getBackendSrv)().patch(`${u}/${e.id}?accesscontrol=true`,Object.assign({},e)),t(g())}}function v(e){return async t=>{await(0,s.getBackendSrv)().delete(`${u}/${e}`),t(g())}}function b(e,t,n){return async a=>{const i=await(0,s.getBackendSrv)().post(`${u}/${e}/tokens`,t);n(i.key),a(g())}}const x=e=>{switch(e){case l.Wc.WithExpiredTokens:return"&expiredTokens=true";case l.Wc.Disabled:return"&disabled=true";default:return""}};function y(e){return async t=>{t((0,c.aj)(e)),m(t)}}function w(e){return async t=>{t((0,c.M4)(e)),t(g())}}function j(){return async e=>{const t=o.Z.getBool(d.t,!1);e((0,c.gl)(t))}}function S(){return async e=>{o.Z.set(d.t,!1),e(j())}}},88001:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>b,LA:()=>u,M4:()=>S,P4:()=>l,Ub:()=>v,V0:()=>x,ZP:()=>k,aj:()=>C,cB:()=>y,dt:()=>f,e7:()=>d,gl:()=>w,pN:()=>m,s3:()=>c});var a=n(35140),s=n(47570);const i=["totalCount","perPage"];const r=(0,a.oM)({name:"serviceaccount",initialState:{serviceAccount:{},isLoading:!0,tokens:[]},reducers:{serviceAccountFetchBegin:e=>Object.assign({},e,{isLoading:!0}),serviceAccountFetchEnd:e=>Object.assign({},e,{isLoading:!1}),serviceAccountLoaded:(e,t)=>Object.assign({},e,{serviceAccount:t.payload,isLoading:!1}),serviceAccountTokensLoaded:(e,t)=>Object.assign({},e,{tokens:t.payload,isLoading:!1})}}),o=r.reducer,{serviceAccountLoaded:l,serviceAccountTokensLoaded:d,serviceAccountFetchBegin:c,serviceAccountFetchEnd:u}=r.actions,h={serviceAccounts:[],isLoading:!0,builtInRoles:{},roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:s.Wc.All,apiKeysMigrated:!1,showApiKeysMigrationInfo:!1},p=(0,a.oM)({name:"serviceaccounts",initialState:h,reducers:{serviceAccountsFetched:(e,t)=>{const n=t.payload,{totalCount:a,perPage:s}=n,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(n,i),o=Math.ceil(a/s);return Object.assign({},e,r,{totalPages:o,perPage:s,showPaging:o>1,isLoading:!1})},serviceAccountsFetchBegin:e=>Object.assign({},e,{isLoading:!0}),serviceAccountsFetchEnd:e=>Object.assign({},e,{isLoading:!1}),acOptionsLoaded:(e,t)=>Object.assign({},e,{roleOptions:t.payload}),builtInRolesLoaded:(e,t)=>Object.assign({},e,{builtInRoles:t.payload}),apiKeysMigrationStatusLoaded:(e,t)=>Object.assign({},e,{apiKeysMigrated:t.payload}),showApiKeysMigrationInfoLoaded:(e,t)=>Object.assign({},e,{showApiKeysMigrationInfo:t.payload}),queryChanged:(e,t)=>Object.assign({},e,{query:t.payload,page:0}),pageChanged:(e,t)=>Object.assign({},e,{page:t.payload}),stateFilterChanged:(e,t)=>Object.assign({},e,{serviceAccountStateFilter:t.payload})}}),g=p.reducer,{serviceAccountsFetchBegin:m,serviceAccountsFetchEnd:f,serviceAccountsFetched:v,acOptionsLoaded:b,builtInRolesLoaded:x,apiKeysMigrationStatusLoaded:y,showApiKeysMigrationInfoLoaded:w,pageChanged:j,stateFilterChanged:S,queryChanged:C}=p.actions,k={serviceAccountProfile:o,serviceAccounts:g}},13868:(e,t,n)=>{"use strict";n.d(t,{$:()=>d,J:()=>o});var a=n(43215),s=n(90923),i=n(28659);class r{constructor(){}async get(e){const t=`api/storage/read/${e}`.replace("//","/");return(0,s.getBackendSrv)().get(t)}async list(e){let t="api/storage/list/";e&&(t+=e+"/");const n=await(0,s.getBackendSrv)().get(t);if(null!=n&&n.data){const e=(0,a.dataFrameFromJSON)(n);for(const t of e.fields)t.display=(0,a.getDisplayProcessor)({field:t,theme:s.config.theme2});return e}}async createFolder(e){const t=await(0,s.getBackendSrv)().post("/api/storage/createFolder",JSON.stringify({path:e}));var n;return t.success?{}:{error:null!==(n=t.message)&&void 0!==n?n:"unknown error"}}async deleteFolder(e){const t=await(0,s.getBackendSrv)().post("/api/storage/deleteFolder",JSON.stringify(e));var n;return t.success?{}:{error:null!==(n=t.message)&&void 0!==n?n:"unknown error"}}async deleteFile(e){const t=await(0,s.getBackendSrv)().post(`/api/storage/delete/${e.path}`);var n;return t.success?{}:{error:null!==(n=t.message)&&void 0!==n?n:"unknown error"}}async delete(e){return e.isFolder?this.deleteFolder({path:e.path,force:!0}):this.deleteFile({path:e.path})}async upload(e,t,n){const a=new FormData;a.append("folder",e),a.append("file",t),a.append("overwriteExistingFile",String(n));const s=await fetch("/api/storage/upload",{method:"POST",body:a});let i=await s.json();return i||(i={}),i.status=s.status,i.statusText=s.statusText,200===s.status||i.err||(i.err=!0),i}async getDashboard(e){if(!s.config.featureToggles.dashboardsFromStorage)return Promise.reject("Dashboards from storage is not enabled");e.endsWith(".json")||(e+=".json");const t=await i.ae.get(`/api/storage/read/${e}`);return t.uid=e,delete t.id,{meta:{uid:e,slug:e,canEdit:!0,canSave:!0,canStar:!1},dashboard:t}}async write(e,t){return i.ae.post(`/api/storage/write/${e}`,t)}async getConfig(){return(0,s.getBackendSrv)().get("/api/storage/config")}async getOptions(e){return(0,s.getBackendSrv)().get(`/api/storage/options/${e}`)}}function o(e,t){const n=e.toLowerCase().trim();return t.map((e=>e.trim().toLowerCase())).includes(n)}let l;function d(){return l||(l=new r),l}},57545:(e,t,n)=>{"use strict";let a,s;n.d(t,{c:()=>s,i:()=>a}),function(e){e.Data="data",e.Config="config",e.Perms="perms",e.Export="export",e.History="history",e.AddRoot="add"}(a||(a={})),function(e){e.Save="save",e.PR="pr",e.Push="push"}(s||(s={}))},99574:(e,t,n)=>{"use strict";n.d(t,{PL:()=>r,UD:()=>g,ZP:()=>m,iI:()=>h,n2:()=>p,ot:()=>l,ql:()=>o,y$:()=>u});var a=n(35140);const s={teams:[],searchQuery:"",searchPage:1,hasFetched:!1},i=(0,a.oM)({name:"teams",initialState:s,reducers:{teamsLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,teams:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:s.searchPage}),setTeamsSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{teamsLoaded:r,setSearchQuery:o,setTeamsSearchPage:l}=i.actions,d=i.reducer,c=(0,a.oM)({name:"team",initialState:{team:{},members:[],groups:[],searchMemberQuery:""},reducers:{teamLoaded:(e,t)=>Object.assign({},e,{team:t.payload}),teamMembersLoaded:(e,t)=>Object.assign({},e,{members:t.payload}),setSearchMemberQuery:(e,t)=>Object.assign({},e,{searchMemberQuery:t.payload}),teamGroupsLoaded:(e,t)=>Object.assign({},e,{groups:t.payload})}}),{teamLoaded:u,teamGroupsLoaded:h,teamMembersLoaded:p,setSearchMemberQuery:g}=c.actions,m={teams:d,team:c.reducer}},7166:(e,t,n)=>{"use strict";n.d(t,{J:()=>w});var a=n(82897),s=n(43215),i=n(90923),r=n(91219),o=n(62413),l=n(85239),d=n(36586),c=n(5970),u=n(39132),h=n(93285);let p;!function(e){e.lucene="lucene",e.raw="raw",e.regex="regex",e.pipe="pipe",e.distributed="distributed",e.csv="csv",e.html="html",e.json="json",e.percentEncode="percentencode",e.singleQuote="singlequote",e.doubleQuote="doublequote",e.sqlString="sqlstring",e.date="date",e.glob="glob",e.text="text",e.queryParam="queryparam"}(p||(p={}));const g=new s.Registry((()=>[{id:p.lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>{let{value:t}=e;if("string"==typeof t)return m(t);if(t instanceof Array&&0===t.length)return"__empty__";return"("+(0,a.map)(t,(e=>'"'+m(e)+'"')).join(" OR ")+")"}},{id:p.raw,name:"raw",description:"Keep value as is",formatter:e=>{let{value:t}=e;return t}},{id:p.regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:e=>{let{value:t}=e;if("string"==typeof t)return u.Z.regexEscape(t);const n=(0,a.map)(t,u.Z.regexEscape);return 1===n.length?n[0]:"("+n.join("|")+")"}},{id:p.pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>{let{value:t}=e;return"string"==typeof t?t:t.join("|")}},{id:p.distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t)=>{let{value:n}=e;return"string"==typeof n?n:(n=(0,a.map)(n,((e,n)=>0!==n?t.name+"="+e:e)),n.join(","))}},{id:p.csv,name:"Csv",description:"Comma-separated values",formatter:e=>{let{value:t}=e;return(0,a.isArray)(t)?t.join(","):t}},{id:p.html,name:"HTML",description:"HTML escaping of values",formatter:e=>{let{value:t}=e;return(0,a.isArray)(t)?s.textUtil.escapeHtml(t.join(", ")):s.textUtil.escapeHtml(t)}},{id:p.json,name:"JSON",description:"JSON stringify valu",formatter:e=>{let{value:t}=e;return JSON.stringify(t)}},{id:p.percentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>{let{value:t}=e;return(0,a.isArray)(t)?f("{"+t.join(",")+"}"):f(t)}},{id:p.singleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{let{value:t}=e;const n=new RegExp("'","g");return(0,a.isArray)(t)?(0,a.map)(t,(e=>`'${(0,a.replace)(e,n,"\\'")}'`)).join(","):`'${(0,a.replace)(t,n,"\\'")}'`}},{id:p.doubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{let{value:t}=e;const n=new RegExp('"',"g");return(0,a.isArray)(t)?(0,a.map)(t,(e=>`"${(0,a.replace)(e,n,'\\"')}"`)).join(","):`"${(0,a.replace)(t,n,'\\"')}"`}},{id:p.sqlString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:e=>{let{value:t}=e;const n=new RegExp("'","g");return(0,a.isArray)(t)?(0,a.map)(t,(e=>`'${(0,a.replace)(e,n,"''")}'`)).join(","):`'${(0,a.replace)(t,n,"''")}'`}},{id:p.date,name:"Date",description:"Format date in different ways",formatter:e=>{var t;let{value:n,args:a}=e;const i=null!==(t=a[0])&&void 0!==t?t:"iso";switch(i){case"ms":return n;case"seconds":return`${Math.round(parseInt(n,10)/1e3)}`;case"iso":return(0,s.dateTime)(parseInt(n,10)).toISOString();default:return(0,s.dateTime)(parseInt(n,10)).format(i)}}},{id:p.glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>{let{value:t}=e;return(0,a.isArray)(t)&&t.length>1?"{"+t.join(",")+"}":t}},{id:p.text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t)=>{if("string"==typeof e.text)return e.value===o.r2?o.xk:e.text;return(null==t?void 0:t.current)?(0,h.y)(t):e.value}},{id:p.queryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t)=>{const{value:n}=e,{name:a}=t;return Array.isArray(n)?n.map((e=>v(a,e))).join("&"):v(a,n)}}]));function m(e){return e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function f(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))}function v(e,t){return`var-${e}=${f(t)}`}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x={getFilteredVariables:d.Q4,getVariables:d.ng,getVariableWithName:d._K};const y=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;b(this,"_variables",void 0),b(this,"regex",c.J7),b(this,"index",{}),b(this,"grafanaVariables",{}),b(this,"timeRange",null),b(this,"fieldAccessorCache",{}),this.dependencies=e,this._variables=[]}init(e,t){this._variables=e,this.timeRange=t,this.updateIndex()}get variables(){return(0,s.deprecationWarning)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){if(this.index=this._variables.reduce(((e,t)=>{var n;return t.current&&(t.current.isNone||((n=t.current.value)||""===n))&&(e[t.name]=t),e}),{}),this.timeRange){const e=this.timeRange.from.valueOf().toString(),t=this.timeRange.to.valueOf().toString();this.index=Object.assign({},this.index,{__from:{current:{value:e,text:e}},__to:{current:{value:t,text:t}}})}}updateTimeRange(e){this.timeRange=e,this.updateIndex()}variableInitialized(e){this.index[e.name]=e}getAdhocFilters(e){let t=[],n=(0,i.getDataSourceSrv)().getInstanceSettings(e);if(!n)return[];for(const s of this.getAdHocVariables()){var a;const i=null===(a=s.datasource)||void 0===a?void 0:a.uid;(i===n.uid||0===(null==i?void 0:i.indexOf("$"))&&this.replace(i)===e)&&(t=t.concat(s.filters))}return t}formatValue(e,t,n,a){if(n=n||{},null==e)return"";if((0,l.Kn)(n)&&t!==p.queryParam)return"";if(Array.isArray(e)||"object"!=typeof e||(e=`${e}`),"function"==typeof t)return t(e,n,this.formatValue);t||(t=p.glob);let s=t.split(":");s.length>1?(t=s[0],s=s.slice(1)):s=[];let i=g.getIfExists(t);i||(console.error(`Variable format ${t} not found. Using glob format as fallback.`),i=g.get(p.glob));const r={value:e,args:s,text:null!=a?a:e};return i.formatter(r,n)}setGrafanaVariable(e,t){this.grafanaVariables[e]=t}setGlobalVariable(e,t){(0,s.deprecationWarning)("template_srv.ts","setGlobalVariable",""),this.index=Object.assign({},this.index,{[e]:{current:t}})}getVariableName(e){this.regex.lastIndex=0;const t=this.regex.exec(e);if(!t)return null;return t.slice(1).find((e=>void 0!==e))}containsTemplate(e){if(!e)return!1;const t=this.getVariableName(e),n=t&&this.getVariableAtIndex(t);return null!=n}variableExists(e){return(0,s.deprecationWarning)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(e)}highlightVariablesAsHtml(e){return e&&(0,a.isString)(e)?(e=(0,a.escape)(e),this.regex.lastIndex=0,e.replace(this.regex,((e,t,n,a,s)=>this.getVariableAtIndex(t||n||s)?'<span class="template-variable">'+e+"</span>":e))):e}getAllValue(e){if(e.allValue)return e.allValue;const t=[];for(let n=1;n<e.options.length;n++)t.push(e.options[n].value);return t}getFieldAccessor(e){const t=this.fieldAccessorCache[e];return t||(this.fieldAccessorCache[e]=(0,a.property)(e))}getVariableValue(e,t,n){const a=n[e];return a?t?this.getFieldAccessor(t)(a.value):a.value:null}getVariableText(e,t,n){const a=n[e];return a?a.value===t||"string"!=typeof t?a.text:t:null}replace(e,t,n){return e?(this.regex.lastIndex=0,e.replace(this.regex,((e,a,s,i,d,c,u)=>{const h=a||s||d,g=this.getVariableAtIndex(h),m=i||u||n;if(t){const e=this.getVariableValue(h,c,t),n=this.getVariableText(h,e,t);if(null!=e)return this.formatValue(e,m,g,n)}if(!g)return e;if(m===p.queryParam||(0,l.Kn)(g)){const e=r.z.get(g.type).getValueForUrl(g),t=(0,l.Kn)(g)?g.id:g.current.text;return this.formatValue(e,m,g,t)}const f=this.grafanaVariables[g.current.value];if(f)return this.formatValue(f,m,g);let v=g.current.value,b=g.current.text;if(this.isAllValue(v)&&(v=this.getAllValue(g),b=o.xk,g.allValue&&m!==p.text))return this.replace(v);if(c){const e=this.getVariableValue(h,c,{[h]:{value:v,text:b}});if(null!=e)return this.formatValue(e,m,g,b)}return this.formatValue(v,m,g,b)}))):null!=e?e:""}isAllValue(e){return e===o.r2||Array.isArray(e)&&e[0]===o.r2}replaceWithText(e,t){return(0,s.deprecationWarning)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(e,t,"text")}getVariableAtIndex(e){if(e)return this.index[e]?this.index[e]:this.dependencies.getVariableWithName(e)}getAdHocVariables(){return this.dependencies.getFilteredVariables(l.Kn)}};(0,i.setTemplateSrv)(y);const w=()=>y},2798:(e,t,n)=>{"use strict";n.d(t,{J:()=>u});var a=n(97024),s=n(95533),i=n(15908),r=(n(68404),n(3490)),o=n(45916);const l=[{label:"Size",value:i.k.Size,description:"Split the buckets based on size"},{label:"Count",value:i.k.Count,description:"Split the buckets based on count"}],d=[{label:"Split",value:i.k.Size,description:"Split the buckets based on size"}],c=e=>{var t,n;let{value:a,onChange:s,item:c}=e;return(0,o.jsxs)(r.HorizontalGroup,{children:[(0,o.jsx)(r.RadioButtonGroup,{value:(null==a?void 0:a.mode)||i.k.Size,options:(null==a||null===(t=a.scale)||void 0===t?void 0:t.type)===r.ScaleDistribution.Log?d:l,onChange:e=>{s(Object.assign({},a,{mode:e}))}}),(0,o.jsx)(r.Input,{value:null!==(n=null==a?void 0:a.value)&&void 0!==n?n:"",placeholder:"Auto",onChange:e=>{s(Object.assign({},a,{value:e.currentTarget.value}))}})]})};function u(e,t,n,r){t.addCustomEditor({id:"xBuckets",path:`${e}xBuckets`,name:"X Bucket",editor:c,category:r,defaultValue:{mode:i.k.Size}}),t.addCustomEditor({id:"yBuckets",path:`${e}yBuckets`,name:"Y Bucket",editor:c,category:r,defaultValue:{mode:i.k.Size}}),t.addCustomEditor({id:"yBuckets-scale",path:`${e}yBuckets.scale`,name:"Y Bucket scale",category:r,editor:s.ScaleDistributionEditor,defaultValue:{type:a.wf.Linear}})}},49423:(e,t,n)=>{"use strict";n.d(t,{xf:()=>T,Oy:()=>j,qJ:()=>C,d8:()=>S,Cj:()=>k});var a=n(35778),s=n(43215),i=n(97024),r=n(15908);const{abs:o,pow:l}=Math,d=new Map;function c(e,t,n,a){let i=[],r=a.map(s.guessDecimals);for(let c=t;c<n;c++){let t=o(c),n=(0,s.roundDecimals)(l(e,c),t);for(let e=0;e<a.length;e++){let o=a[e]*n,l=(o>=0&&c>=0?0:t)+(c>=r[e]?0:r[e]),u=(0,s.roundDecimals)(o,l);i.push(u),d.set(u,l)}}return i}const u=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],h=c(10,-16,0,u),p=c(10,0,16,u),g=p.filter((e=>e%1==0)),m=(h.concat(p),h.concat(g)),f=1e3,v=6e4,b=60*v,x=24*b,y=365*x,w=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,f,2e3,4e3,5e3,1e4,15e3,2e4,3e4,v,2*v,4*v,5*v,6e5,9e5,20*v,30*v,b,2*b,4*b,6*b,8*b,12*b,18*b,x,2*x,3*x,4*x,5*x,6*x,7*x,10*x,15*x,30*x,45*x,60*x,90*x,180*x,y,2*y,3*y,4*y,5*y,6*y,7*y,8*y,9*y,10*y],j={id:s.DataTransformerID.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:e=>t=>t.pipe((0,a.U)((t=>j.transformer(e)(t)))),transformer:e=>t=>{const n=T(t,e);return e.keepOriginalData?[n,...t]:[n]}};function S(e){var t,n;return null!==(t=null==e||null===(n=e.meta)||void 0===n?void 0:n.custom)&&void 0!==t?t:{}}function C(e){let t=!1;for(let n of e.fields)switch(n.name){case"y":case"yMin":case"yMax":if(t)return!1;t=!0}return t}function k(e){var t,n,a,i;const o=e.frame.fields[0],l=o.values.toArray(),d=e.frame.fields.filter(((e,t)=>e.type===s.FieldType.number&&t>0)),c=l.length*d.length,u=new Array(c),h=new Array(c),p=new Array(c),g=d.map((e=>e.values.toArray().slice()));g.forEach(((e,t)=>{for(let n=0;n<e.length;n++)p[g.length*n+t]=e[n]}));const m=Array.from({length:d.length},((e,t)=>t));for(let e=0,t=0,n=0;e<c;t=++e%m.length)h[e]=m[t],0===t&&e>=m.length&&n++,u[e]=l[n];let f=null!=(null===(t=d[0].labels)||void 0===t?void 0:t.le)?"yMax":"y";switch(e.layout){case r.D.le:f="yMax";break;case r.D.ge:f="yMin";break;case r.D.unknown:f="y"}const v={yOrdinalDisplay:d.map((t=>(0,s.getFieldDisplayName)(t,e.frame))),yMatchWithLabel:Object.keys(null!==(n=d[0].labels)&&void 0!==n?n:{})[0]};if(v.yMatchWithLabel&&(v.yOrdinalLabel=d.map((e=>{var t,n;return null!==(t=null===(n=e.labels)||void 0===n?void 0:n[v.yMatchWithLabel])&&void 0!==t?t:""})),"le"===v.yMatchWithLabel&&(v.yMinDisplay="0.0")),null!==(a=e.unit)&&void 0!==a&&a.length||null!=e.decimals){var b;const t=(0,s.getValueFormat)(null!==(b=e.unit)&&void 0!==b?b:"short");v.yMinDisplay&&(v.yMinDisplay=(0,s.formattedValueToString)(t(0,e.decimals))),v.yOrdinalDisplay=v.yOrdinalDisplay.map((n=>{let a=+n;return Number.isNaN(a)?n:(0,s.formattedValueToString)(t(a,e.decimals))}))}return{length:u.length,refId:e.frame.refId,meta:{type:s.DataFrameType.HeatmapCells,custom:v},fields:[{name:"xMax",type:o.type,values:new s.ArrayVector(u),config:o.config},{name:f,type:s.FieldType.number,values:new s.ArrayVector(h),config:{unit:"short"}},{name:null!==(i=e.value)&&void 0!==i&&i.length?e.value:"Value",type:s.FieldType.number,values:new s.ArrayVector(p),config:d[0].config,display:d[0].display}]}}function T(e,t){var n,a,o,l,d,c;let u,h,p=0;for(let t of e){t.fields.find((e=>e.type===s.FieldType.time))&&(p+=t.length)}let g=Array(p),f=Array(p),v=0;for(let t of e){const e=t.fields.find((e=>e.type===s.FieldType.time));if(!e)continue;u||(u=e);const n=e.values.toArray();for(let a of t.fields)if(a!==e&&a.type===s.FieldType.number){const e=a.values.toArray();for(let t=0;t<n.length;t++,v++)g[v]=n[t],f[v]=e[t];h||(h=a)}}if(!u||!h)throw"no heatmap fields found";if(!g.length||!f.length)throw"no values found";const b=null!==(n=t.xBuckets)&&void 0!==n?n:{},x=null!==(a=t.yBuckets)&&void 0!==a?a:{};if((null===(o=b.scale)||void 0===o?void 0:o.type)===i.wf.Log)throw"X axis only supports linear buckets";const y=null!==(l=null===(d=t.yBuckets)||void 0===d?void 0:d.scale)&&void 0!==l?l:{type:i.wf.Linear},j=function(e,t,n){var a,i,o,l;let d=e.length,c=null!==(a=null==n?void 0:n.xSorted)&&void 0!==a&&a,u=null!==(i=null==n?void 0:n.ySorted)&&void 0!==i&&i,h=c?e[0]:1/0,p=u?t[0]:1/0,g=c?e[d-1]:-1/0,f=u?t[d-1]:-1/0,v=null==n?void 0:n.yLog;for(let n=0;n<d;n++)c||(h=Math.min(h,e[n]),g=Math.max(g,e[n])),u||(!v||t[n]>0)&&(p=Math.min(p,t[n]),f=Math.max(f,t[n]));let b=null!==(o=null==n?void 0:n.xSize)&&void 0!==o?o:0,x=null!==(l=null==n?void 0:n.ySize)&&void 0!==l?l:0,y=null==n?void 0:n.xMode,j=null==n?void 0:n.yMode;(!Number.isFinite(b)||b<=0)&&(y=r.k.Count,b=20);(!Number.isFinite(x)||x<=0)&&(j=r.k.Count,x=10);if(y===r.k.Count){let e=(g-h)/Math.max(b-1,1),t=null!=n&&n.xTime?w:m,a=t.findIndex((t=>t>e))-1;b=t[Math.max(a,0)]}if(j===r.k.Count){let e=(f-p)/Math.max(x-1,1),t=null!=n&&n.yTime?w:m,a=t.findIndex((t=>t>e))-1;x=t[Math.max(a,0)]}let S=null!=n&&n.xCeil?e=>(0,s.incrRoundUp)(e,b):e=>(0,s.incrRoundDn)(e,b),C=null!=n&&n.yCeil?e=>(0,s.incrRoundUp)(e,x):e=>(0,s.incrRoundDn)(e,x);if(v){var k;x=1/(null!==(k=null==n?void 0:n.ySize)&&void 0!==k?k:1);let e=2===v?Math.log2:Math.log10;C=null!=n&&n.yCeil?t=>(0,s.incrRoundUp)(e(t),x):t=>(0,s.incrRoundDn)(e(t),x)}let T=S(h),I=S(g),O=C(p),N=C(f),F=Math.round((I-T)/b)+1,D=Math.round((N-O)/x)+1,[P,A,M]=function(e,t,n,a,s,i,r){const o=e*t,l=new Array(o),d=new Array(o),c=new Array(o);for(let e=0,u=0,h=n;e<o;u=++e%t)c[e]=0,d[e]=r?r**(s+u*i):s+u*i,0===u&&e>=t&&(h+=a),l[e]=h;return[l,d,c]}(F,D,T,b,O,x,v);for(let n=0;n<d;n++){if(v&&t[n]<=0)continue;M[(S(e[n])-T)/b*D+(C(t[n])-O)/x]++}return{x:P,y:A,count:M}}(g,f,{xSorted:!0,xTime:u.type===s.FieldType.time,xMode:b.mode,xSize:b.mode===r.k.Size?(0,s.durationToMilliseconds)((0,s.parseDuration)(null!==(c=b.value)&&void 0!==c?c:"")):b.value?+b.value:void 0,yMode:x.mode,ySize:x.value?+x.value:void 0,yLog:(null==y?void 0:y.type)===i.wf.Log?null==y?void 0:y.log:void 0});return{length:j.x.length,name:(0,s.getFieldDisplayName)(h),meta:{type:s.DataFrameType.HeatmapCells},fields:[{name:"xMin",type:u.type,values:new s.ArrayVector(j.x),config:u.config},{name:"yMin",type:s.FieldType.number,values:new s.ArrayVector(j.y),config:Object.assign({},h.config,{custom:{scaleDistribution:y}})},{name:"Count",type:s.FieldType.number,values:new s.ArrayVector(j.count),config:{unit:"short"}}]}}},15908:(e,t,n)=>{"use strict";let a,s;n.d(t,{D:()=>s,k:()=>a}),function(e){e.Size="size",e.Count="count"}(a||(a={})),function(e){e.le="le",e.ge="ge",e.unknown="unknown",e.auto="auto"}(s||(s={}))},34362:(e,t,n)=>{"use strict";n.d(t,{Ii:()=>i,JJ:()=>s,ac:()=>r});var a=n(43215);let s,i,r;!function(e){e.Prepare="prepare",e.Calculate="calculate",e.Modify="modify"}(s||(s={})),function(e){e.Heading="heading",e.Distance="distance",e.Area="area"}(i||(i={})),function(e){e.AsLine="asLine",e.LineBuilder="lineBuilder"}(r||(r={}));s.Prepare,a.FrameGeometrySourceMode.Auto},50525:(e,t,n)=>{"use strict";n.d(t,{Lb:()=>h,Lp:()=>c,N7:()=>g});var a=n(53901),s=n(46341),i=n(244),r=n(5368),o=n(47656),l=n(43215),d=n(34362);function c(e){const t=[];for(const n of e.values.toArray())n&&t.push(h(n));return new s.Z(t)}function u(e){const t=new Array(e.length);if(e.length>1){let n=p(e[0]);for(let a=1;a<e.length;a++){let s=p(e[a]);if(n&&s){let e=180*Math.atan2(s[0]-n[0],s[1]-n[1])/Math.PI;e<0&&(e+=360),t[a-1]=t[a]=e}}}else t.fill(0);return t}function h(e){return e instanceof i.Z?e.getCoordinates():(0,a.qg)(e.getExtent())}function p(e){if(e)return(0,r.bU)(h(e))}function g(e,t){var n,a;const s=e.values.toArray(),i=new Array(e.values.length),r=null!==(n=t.calc)&&void 0!==n?n:d.Ii.Heading,c=null!==(a=t.field)&&void 0!==a?a:r;switch(r){case d.Ii.Area:for(let e=0;e<s.length;e++){const t=s[e];t&&(i[e]=(0,o.bg)(t))}return{name:c,type:l.FieldType.number,config:{unit:"areaM2"},values:new l.ArrayVector(i)};case d.Ii.Distance:for(let e=0;e<s.length;e++){const t=s[e];t&&(i[e]=(0,o.xA)(t))}return{name:c,type:l.FieldType.number,config:{unit:"lengthm"},values:new l.ArrayVector(i)};case d.Ii.Heading:default:return{name:c,type:l.FieldType.number,config:{unit:"degree"},values:new l.ArrayVector(u(s))}}}},28911:(e,t,n)=>{"use strict";n.d(t,{TQ:()=>l,ZP:()=>c,eT:()=>d,oX:()=>o});var a=n(35140),s=n(78837);const i={users:[],searchQuery:"",searchPage:1,canInvite:!s.ZP.externalUserMngLinkName,externalUserMngInfo:s.ZP.externalUserMngInfo,externalUserMngLinkName:s.ZP.externalUserMngLinkName,externalUserMngLinkUrl:s.ZP.externalUserMngLinkUrl,hasFetched:!1},r=(0,a.oM)({name:"users",initialState:i,reducers:{usersLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,users:t.payload}),setUsersSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:i.searchPage}),setUsersSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{setUsersSearchQuery:o,setUsersSearchPage:l,usersLoaded:d}=r.actions,c={users:r.reducer}},91219:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});const a=new(n(43215).Registry)},28380:(e,t,n)=>{"use strict";n.d(t,{KJ:()=>v,M6:()=>m,Ue:()=>b,Z$:()=>x,ku:()=>f,m2:()=>g});var a=n(82897),s=n(67436),i=n(83751),r=n(85239),o=n(57358),l=n(5337),d=n(36586),c=n(30146),u=n(5970),h=n(42993);const p="Filters",g=e=>async(t,n)=>{let a=w(e,n());if(!a&&(t(y(e)),a=w(e,n()),!a))return;const s=a.filters.findIndex((t=>t.key===e.key&&t.value===e.value));if(-1===s){const{value:n,key:s,operator:i}=e,r={value:n,key:s,operator:i,condition:""};return await t(v((0,u.yQ)(a),r))}const i=Object.assign({},a.filters[s],{operator:e.operator});return await t(m((0,u.yQ)(a),{index:s,filter:i}))},m=(e,t)=>async(n,a)=>{const s=(0,d.E0)(e,a());n((0,l.mb)(e.rootStateKey,(0,h.e_)((0,u.Y6)(s,t)))),await n((0,o.MB)((0,u.yQ)(s),!0))},f=(e,t)=>async(n,a)=>{const s=(0,d.E0)(e,a());n((0,l.mb)(e.rootStateKey,(0,h.DO)((0,u.Y6)(s,t)))),await n((0,o.MB)((0,u.yQ)(s),!0))},v=(e,t)=>async(n,a)=>{const s=(0,d.E0)(e,a());n((0,l.mb)(e.rootStateKey,(0,h.QL)((0,u.Y6)(s,t)))),await n((0,o.MB)((0,u.yQ)(s),!0))},b=(e,t)=>async(n,a)=>{const s=(0,d.E0)(e,a());n((0,l.mb)(e.rootStateKey,(0,h.aM)((0,u.Y6)(s,t)))),await n((0,o.MB)((0,u.yQ)(s),!0))},x=(e,t)=>async(n,a)=>{const r=(0,d.E0)(e,a());n((0,l.mb)(e.rootStateKey,(0,c.Pl)((0,u.Y6)(r,{propName:"datasource",propValue:t}))));const o=await(0,s.ak)().get(t),h=null!=o&&o.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";n((0,l.mb)(e.rootStateKey,(0,i.z7)({infoText:h})))},y=e=>(t,n)=>{const s=(0,d.S_)(n()),i=Object.assign({},(0,a.cloneDeep)(h.Js),{datasource:e.datasource,name:p,id:p,rootStateKey:s}),r=(0,d.Eo)(s,n()),o={type:"adhoc",id:i.id,rootStateKey:s};t((0,l.mb)(s,(0,c.VN)((0,u.Y6)(o,{global:!1,model:i,index:r}))))},w=(e,t)=>{const n=(0,d.S_)(t),a=(0,d.AE)(n,t);return Object.values(a.variables).find((t=>{var n;return(0,r.Kn)(t)&&(null===(n=t.datasource)||void 0===n?void 0:n.uid)===e.datasource.uid}))}},34366:(e,t,n)=>{"use strict";n.d(t,{F:()=>j});var a=n(68404),s=n(3490),i=n(67436),r=n(45916);const o=e=>{let{datasource:t,onChange:n,disabled:a,filterKey:i,getTagKeysOptions:o}=e;const l=()=>u(t,o);return null===i?(0,r.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,r.jsx)(s.SegmentAsync,{disabled:a,className:"query-segment-key",Component:c,value:i,onChange:n,loadOptions:l,inputMinWidth:90})}):(0,r.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,r.jsx)(s.SegmentAsync,{disabled:a,className:"query-segment-key",value:i,onChange:n,loadOptions:()=>h(t,o),inputMinWidth:90})})},l="-- remove filter --",d={label:l,value:l},c=(0,r.jsx)("a",{className:"gf-form-label query-part","aria-label":"Add Filter",children:(0,r.jsx)(s.Icon,{name:"plus"})}),u=async(e,t)=>{const n=await(0,i.ak)().get(e);if(!n||!n.getTagKeys)return[];return(await n.getTagKeys(t)).map((e=>({label:e.text,value:e.text})))},h=async(e,t)=>{const n=await u(e,t);return[d,...n]},p=e=>{let{datasource:t,disabled:n,onChange:a,filterKey:i,filterValue:o,placeHolder:l}=e;return(0,r.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,r.jsx)(s.SegmentAsync,{className:"query-segment-value",disabled:n,placeholder:l,value:o,onChange:a,loadOptions:()=>g(t,i)})})},g=async(e,t)=>{const n=await(0,i.ak)().get(e);if(!n||!n.getTagValues)return[];return(await n.getTagValues({key:t})).map((e=>({label:e.text,value:e.text})))},m=["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e}))),f=e=>{let{value:t,disabled:n,onChange:a}=e;return(0,r.jsx)(s.Segment,{className:"query-segment-operator",value:t,disabled:n,options:m,onChange:a})},v=e=>{let{datasource:t,filter:{key:n,operator:a,value:s},onKeyChange:i,onOperatorChange:l,onValueChange:d,placeHolder:c,getTagKeysOptions:u,disabled:h}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{disabled:h,datasource:t,filterKey:n,onChange:i,getTagKeysOptions:u}),(0,r.jsx)("div",{className:"gf-form",children:(0,r.jsx)(f,{disabled:h,value:a,onChange:l})}),(0,r.jsx)(p,{disabled:h,datasource:t,filterKey:n,filterValue:s,onChange:d,placeHolder:c})]})},b=e=>{let{datasource:t,appendBefore:n,onCompleted:s,getTagKeysOptions:i}=e;const[d,c]=(0,a.useState)(null),[u,h]=(0,a.useState)("="),p=(0,a.useCallback)((e=>{var t;e.value===l?c(null):c(null!==(t=e.value)&&void 0!==t?t:"")}),[c]),g=(0,a.useCallback)((e=>{var t;return h(null!==(t=e.value)&&void 0!==t?t:"")}),[h]),m=(0,a.useCallback)((e=>{var t;s({value:null!==(t=e.value)&&void 0!==t?t:"",operator:u,condition:"",key:d}),c(null),h("=")}),[s,u,d]);return null===d?(0,r.jsx)(o,{datasource:t,filterKey:d,onChange:p,getTagKeysOptions:i}):(0,r.jsxs)(a.Fragment,{children:[n,(0,r.jsx)(v,{datasource:t,filter:{key:d,value:"",operator:u,condition:""},placeHolder:"select value",onKeyChange:p,onOperatorChange:g,onValueChange:m,getTagKeysOptions:i})]},"filter-builder")},x=e=>{let{label:t}=e;return(0,r.jsx)("div",{className:"gf-form",children:(0,r.jsx)("span",{className:"gf-form-label query-keyword",children:t})})};var y;function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends a.PureComponent{constructor(){super(...arguments),w(this,"onChange",((e,t)=>n=>{const{filters:a}=this.props,{value:s}=n;return n.value===l?this.props.removeFilter(e):this.props.changeFilter(e,Object.assign({},a[e],{[t]:s}))})),w(this,"appendFilterToVariable",(e=>{this.props.addFilter(e)}))}render(){const{filters:e,disabled:t}=this.props;return(0,r.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(e,t),!t&&(0,r.jsx)(b,{datasource:this.props.datasource,appendBefore:e.length>0?y||(y=(0,r.jsx)(x,{label:"AND"})):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions})]})}renderFilters(e,t){return 0===e.length&&t?(0,r.jsx)(s.Segment,{disabled:t,value:"No filters",options:[],onChange:()=>{}}):e.reduce(((e,n,a)=>(e.length>0&&e.push((0,r.jsx)(x,{label:"AND"},`condition-${a}`)),e.push(this.renderFilterSegments(n,a,t)),e)),[])}renderFilterSegments(e,t,n){return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(v,{disabled:n,datasource:this.props.datasource,filter:e,onKeyChange:this.onChange(t,"key"),onOperatorChange:this.onChange(t,"operator"),onValueChange:this.onChange(t,"value"),getTagKeysOptions:this.props.getTagKeysOptions})},`filter-${t}`)}}},42993:(e,t,n)=>{"use strict";n.d(t,{DO:()=>c,Js:()=>o,QL:()=>d,aM:()=>h,e_:()=>u,jo:()=>p});var a=n(35140),s=n(39665),i=n(36586),r=n(11895);const o=Object.assign({},s.Eg,{type:"adhoc",datasource:null,filters:[]}),l=(0,a.oM)({name:"templating/adhoc",initialState:r.s,reducers:{filterAdded:(e,t)=>{(0,i.ir)(e,t.payload.id).filters.push(t.payload.data)},filterRemoved:(e,t)=>{const n=(0,i.ir)(e,t.payload.id),a=t.payload.data;n.filters.splice(a,1)},filterUpdated:(e,t)=>{const n=(0,i.ir)(e,t.payload.id),{filter:a,index:s}=t.payload.data;n.filters[s]=a},filtersRestored:(e,t)=>{(0,i.ir)(e,t.payload.id).filters=t.payload.data}}}),{filterAdded:d,filterRemoved:c,filterUpdated:u,filtersRestored:h}=l.actions,p=l.reducer},62413:(e,t,n)=>{"use strict";n.d(t,{BH:()=>r,QX:()=>o,UY:()=>a,r2:()=>i,xk:()=>s});const a="00000000-0000-0000-0000-000000000000",s="All",i="$__all",r="None",o=""},7852:(e,t,n)=>{"use strict";n.d(t,{R:()=>c,z:()=>d});var a=n(36636),s=n(68404),i=n(16695),r=n(3490),o=n(93850),l=n(45916);const d="Grafana-LegacyVariableQueryEditor",c=e=>{let{onChange:t,query:n}=e;const a=(0,r.useStyles)(u),[d,c]=(0,s.useState)(n),h=(0,s.useCallback)((e=>{t(e.currentTarget.value,e.currentTarget.value)}),[t]);return(0,l.jsx)("div",{className:a.container,children:(0,l.jsx)(o.W,{name:"Query",value:d,placeholder:"metric name or tags query",width:100,onChange:e=>{c(e.currentTarget.value)},onBlur:h,required:!0,labelWidth:20,ariaLabel:i.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput})})};function u(e){return{container:a.css`
      margin-bottom: ${e.spacing.xs};
    `}}c.displayName=d},23334:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var a=n(36636),s=(n(68404),n(3490)),i=n(45916);function r(e){let{name:t}=e;const n=(0,s.useStyles)(o);return(0,i.jsx)("h5",{className:n.sectionHeading,children:t})}function o(e){return{sectionHeading:a.css`
      label: sectionHeading;
      font-size: ${e.typography.size.md};
      margin-bottom: ${e.spacing.sm};
    `}}},1557:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var a=n(36636),s=(n(68404),n(3490)),i=n(68366),r=n(45916);function o(e){let{name:t,value:n,options:a,tooltip:o,onChange:d,testId:c,width:u,labelWidth:h}=e;const p=(0,s.useStyles)(l),g=`variable-select-input-${t}-${(0,i.L)()}`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.InlineFormLabel,{width:null!=h?h:6,tooltip:o,htmlFor:g,children:t}),(0,r.jsx)("div",{"data-testid":c,children:(0,r.jsx)(s.Select,{inputId:g,onChange:d,value:n,width:null!=u?u:25,options:a,className:p.selectContainer})})]})}function l(e){return{selectContainer:a.css`
      margin-right: ${e.spacing.xs};
    `}}},93850:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var a=n(36636),s=n(68404),i=n(3490),r=n(45916);function o(e){let{name:t,value:n,placeholder:a,tooltip:o,onChange:d,onBlur:c,ariaLabel:u,required:h,width:p,labelWidth:g,testId:m}=e;const f=(0,i.useStyles)(l),v=(0,s.useCallback)((e=>e&&"string"==typeof e?e.split("\n").length:1),[]);return(0,r.jsx)(i.InlineField,{label:t,labelWidth:null!=g?g:12,tooltip:o,children:(0,r.jsx)(i.TextArea,{rows:v(n),value:n,onChange:d,onBlur:c,placeholder:a,required:h,"aria-label":u,cols:p,className:f.textarea,"data-testid":m})})}function l(e){return{textarea:a.css`
      white-space: pre-wrap;
      min-height: 32px;
      height: auto;
      overflow: auto;
      padding: 6px 8px;
    `}}},76874:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});n(68404);var a=n(3490),s=n(45916);function i(e){let{value:t,name:n,placeholder:i,onChange:r,testId:o,width:l,labelWidth:d,required:c,onBlur:u,tooltip:h,grow:p,interactive:g}=e;return(0,s.jsx)(a.InlineField,{interactive:g,label:n,labelWidth:null!=d?d:12,tooltip:h,grow:p,children:(0,s.jsx)(a.Input,{type:"text",id:n,name:n,placeholder:i,value:t,onChange:r,onBlur:u,width:p?void 0:null!=l?l:25,"data-testid":o,required:c})})}},83751:(e,t,n)=>{"use strict";n.d(t,{PF:()=>s,PV:()=>m,QR:()=>f,Sg:()=>g,Yo:()=>d,Yu:()=>l,gl:()=>r,lc:()=>o,qe:()=>h,wJ:()=>u,y8:()=>c,z7:()=>p});var a=n(35140);const s={id:"",isValid:!0,errors:{},name:"",extended:null},i=(0,a.oM)({name:"templating/editor",initialState:s,reducers:{setIdInEditor:(e,t)=>{e.id=t.payload.id},clearIdInEditor:(e,t)=>{e.id=""},variableEditorMounted:(e,t)=>{e.name=t.payload.name},variableEditorUnMounted:(e,t)=>s,changeVariableNameSucceeded:(e,t)=>{e.name=t.payload.data.newName,delete e.errors.name,e.isValid=0===Object.keys(e.errors).length},changeVariableNameFailed:(e,t)=>{e.name=t.payload.newName,e.errors.name=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},addVariableEditorError:(e,t)=>{e.errors[t.payload.errorProp]=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},removeVariableEditorError:(e,t)=>{delete e.errors[t.payload.errorProp],e.isValid=0===Object.keys(e.errors).length},changeVariableEditorExtended:(e,t)=>{e.extended=Object.assign({},e.extended,t.payload)},cleanEditorState:()=>s}}),r=i.reducer,{setIdInEditor:o,clearIdInEditor:l,changeVariableNameSucceeded:d,changeVariableNameFailed:c,variableEditorMounted:u,variableEditorUnMounted:h,changeVariableEditorExtended:p,addVariableEditorError:g,removeVariableEditorError:m,cleanEditorState:f}=i.actions},18397:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var a=n(90923),s=n(91219);function i(e){const t={},n=(0,a.getTemplateSrv)().getVariables();for(let a=0;a<n.length;a++){const i=n[a];if(e&&void 0!==e[i.name]){if(e[i.name].skipUrlSync)continue;t["var-"+i.name]=e[i.name].value}else{if(i.skipUrlSync)continue;t["var-"+i.name]=s.z.get(i.type).getValueForUrl(i)}}return t}},85239:(e,t,n)=>{"use strict";n.d(t,{$7:()=>b,Ju:()=>g,Kn:()=>r,Kr:()=>u,NX:()=>v,R:()=>p,U4:()=>d,VC:()=>o,X7:()=>f,Xh:()=>i,Z9:()=>l,d7:()=>m,eL:()=>c});var a=n(43215),s=n(7852);const i=e=>"query"===e.type,r=e=>"adhoc"===e.type,o=e=>"constant"===e.type,l=e=>"datasource"===e.type,d=e=>{const t=e;return t.hasOwnProperty("multi")&&"boolean"==typeof t.multi},c=e=>h(e,"options"),u=e=>h(e,"current");function h(e,t){if(!e)return!1;const n=e;return n.hasOwnProperty(t)&&"object"==typeof n[t]}const p=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),g=e=>{if(!e.variables)return!1;if(e.variables.getType()!==a.VariableSupportType.Standard)return!1;const t=e.variables;return Boolean(t.toDataQuery)},m=e=>{if(!e.variables)return!1;if(e.variables.getType()!==a.VariableSupportType.Custom)return!1;const t=e.variables;return Boolean(t.query)&&Boolean(t.editor)},f=e=>!!e.variables&&e.variables.getType()===a.VariableSupportType.Datasource;function v(e,t){return!!e&&(e.displayName===s.z||p(t))}function b(e,t){return!!e&&(e.displayName!==s.z&&(f(t)||g(t)||m(t)))}},22741:(e,t,n)=>{"use strict";n.d(t,{Kf:()=>s,iV:()=>r,j4:()=>o});var a=n(35140);const s={usages:[],usagesNetwork:[]},i=(0,a.oM)({name:"templating/inspect",initialState:s,reducers:{initInspect:(e,t)=>{const{usages:n,usagesNetwork:a}=t.payload;e.usages=n,e.usagesNetwork=a}}}),r=i.reducer,{initInspect:o}=i.actions},79067:(e,t,n)=>{"use strict";n.d(t,{MJ:()=>u,GQ:()=>d,V:()=>m,Of:()=>c,PQ:()=>v,dH:()=>j,Yg:()=>f,Rv:()=>w,vI:()=>x});var a=n(43215);var s=n(28283),i=n(62236),r=(n(74267),n(91219)),o=n(85239),l=n(5970);const d=e=>{const t=[];for(const n of e)t.push({id:n.id,label:`${n.id}`});return t},c=(e,t)=>e.filter((e=>t.some((t=>t.from===e.id||t.to===e.id)))),u=e=>{const t=[];for(const n of e)for(const a of e){if(n===a)continue;r.z.get(n.type).dependsOn(n,a)&&t.push({from:n.id,to:a.id})}return t};function h(e){const t=(0,l.a9)(e);if(!t)return;return t.slice(1).find((e=>void 0!==e))}const p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},g=(e,t,n)=>{const a=Object.keys(t.value).reduce(((n,a)=>{const s=t.value[a];if(!s||"string"!=typeof s)return n;const i=p[a]?p[a].find((t=>t.test(e))):void 0;let r=(0,l.QI)(s,e);return"repeat"===a&&s===e&&(r=!0),!i&&r&&(n=Object.assign({},n,{[a]:s})),n}),{}),s=Object.keys(t.value).reduce(((n,a)=>{const s=t.value[a];if(s&&"object"==typeof s&&Object.keys(s).length){let i=s.title||s.name||s.id||a;Array.isArray(t.value)&&"panels"===t.key&&(i=`${i}[${s.id}]`);const r=g(e,{key:a,value:s},{});Object.keys(r).length&&(n=Object.assign({},n,{[i]:r}))}return n}),{});return(Object.keys(a).length||Object.keys(s).length)&&(n=Object.assign({},n,a,s)),n},m=(e,t)=>{if(!t)return{unUsed:[],usages:[]};const n=[];let a=[];const s=t.getSaveModelClone();for(const t of e){const e=t.id,i=g(e,{key:"model",value:s},{});Object.keys(i).length||(0,o.Kn)(t)||n.push(t),Object.keys(i).length&&a.push({variable:t,tree:i})}return{unUsed:n,usages:a}};async function f(e,t){return new Promise(((n,a)=>{setTimeout((()=>{try{const a=function(e,t){if(!t)return[];let n=[];const a=t.getSaveModelClone(),s=((e,t)=>{l.J7.lastIndex=0;const n=[],a=(0,i.Xh)(t,2).match(l.J7);if(!a)return n;for(const t of a){if(!t)continue;if(-1!==t.indexOf("$__"))continue;if(-1!==t.indexOf("${__"))continue;if(-1!==t.indexOf("$hashKey"))continue;const a=h(t);e.some((e=>e.id===a))||n.find((e=>e===a))||a&&n.push(a)}return n})(e,a);for(const e of s){const t=g(e,{key:"model",value:a},{});if(Object.keys(t).length){const a={id:e,name:e};n.push({variable:a,tree:t})}}return n}(e,t);n(x(a))}catch(e){a(e)}}),200)}))}function v(e,t,n){const s=function(e,t){const n=new Set;for(const a of e)n.add(t(a));return n}(t.descendants(e),(e=>e.name));s.add(a.DataLinkBuiltInVars.includeVars);for(const t of e)s.add(t);return function(e,t){const n=[];for(const a of e)t[a]&&n.push(...t[a]);return new Set(n)}([...s],n)}const b=(e,t)=>{const{id:n,value:a}=t,{nodes:s,edges:i}=e;if(a&&"string"==typeof a){const r=`${t.id}-${a}`;return s.push({id:r,label:a}),i.push({from:r,to:n}),e}if(a&&"object"==typeof a){const r=Object.keys(a);for(const o of r){const r=`${t.id}-${o}`;s.push({id:r,label:o}),i.push({from:r,to:n}),e=b(e,{id:r,value:a[o]})}return e}return e},x=e=>{const t=[];for(const n of e){const{variable:e,tree:a}=n,s={variable:e,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};t.push(b(s,{id:"dashboard",value:a}))}return t},y=e=>Object.values(e).reduce(((e,t)=>"object"==typeof t?e+y(t):e+1),0),w=(e,t)=>{const n=t.find((t=>t.variable.id===e));return n?y(n.tree):0};function j(e){const t={};for(const i of e){var n,a;const e=(0,s.J)(i),r=[...[...e.matchAll(/"repeat":"([^"]+)"/g)].map((e=>e[1])),...null!==(n=null===(a=e.match(l.J7))||void 0===a?void 0:a.map((e=>h(e))))&&void 0!==n?n:[]];for(const e of r)e in t?t[e].add(i.id):t[e]=new Set([i.id])}return t}},231:(e,t,n)=>{"use strict";n.d(t,{XJ:()=>S,nn:()=>v,yy:()=>d,Ew:()=>b,cv:()=>C,aN:()=>f,iQ:()=>x,_M:()=>m,ss:()=>w,wF:()=>j,Ug:()=>y});var a=n(35140),s=n(82897);const i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.reduce(((e,t)=>t(e)),e)};var r=n(62413),o=n(85239),l=n(5970);const d={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},c=e=>{if(!Array.isArray(e.options))return e.options=[],e;const t=(n=e.selectedValues,Array.isArray(n)?n.reduce(((e,t)=>((0,s.isString)(t.value)&&(e[t.value]=t),e)),{}):{});var n;return e.selectedValues=Object.values(t),e.options=e.options.map((e=>{if(!(0,s.isString)(e.value))return e;const n=!!t[e.value];return e.selected===n?e:Object.assign({},e,{selected:n})})),e.options=u(e.options),e},u=e=>Array.isArray(e)?e.length<=1e3?e:e.slice(0,1e3):[],h=e=>{const{options:t,selectedValues:n}=e;return 0===t.length||n.length>0?e:t[0]&&t[0].value===r.r2?(e.selectedValues=[Object.assign({},t[0],{selected:!0})],e):e},p=e=>{const{selectedValues:t}=e;return t.length>1&&(e.selectedValues=t.filter((e=>e.value!==r.r2))),e},g=(0,a.oM)({name:"templating/optionsPicker",initialState:d,reducers:{showOptions:(e,t)=>{const{query:n,options:a}=t.payload;var r;(e.highlightIndex=-1,e.options=(0,s.cloneDeep)(a),e.id=t.payload.id,e.queryValue="",e.multi=!1,(0,o.U4)(t.payload))&&(e.multi=null!==(r=t.payload.multi)&&void 0!==r&&r);if((0,o.Xh)(t.payload)){const{queryValue:a}=t.payload,s=(0,l.bf)(n);e.queryValue=s&&a?a:""}return e.selectedValues=e.options.filter((e=>e.selected)),i(e,h,c)},hideOptions:(e,t)=>Object.assign({},d),toggleOption:(e,t)=>{const{option:n,clearOthers:a,forceSelect:s}=t.payload,{multi:o,selectedValues:l}=e;if(n){const t=!l.find((e=>e.value===n.value&&e.text===n.text));if(n.value===r.r2||!o||a)return e.selectedValues=t||s?[Object.assign({},n,{selected:!0})]:[],i(e,h,p,c);if(s||t)return e.selectedValues.push(Object.assign({},n,{selected:!0})),i(e,h,p,c);e.selectedValues=l.filter((e=>e.value!==n.value&&e.text!==n.text))}else e.selectedValues=[];return i(e,h,p,c)},moveOptionsHighlight:(e,t)=>{let n=e.highlightIndex+t.payload;return n<0?n=0:n>=e.options.length&&(n=e.options.length-1),Object.assign({},e,{highlightIndex:n})},toggleAllOptions:(e,t)=>e.selectedValues.length>0?(e.selectedValues=[],i(e,c)):(e.selectedValues=e.options.filter((e=>e.value!==r.r2)).map((e=>Object.assign({},e,{selected:!0}))),i(e,c)),updateSearchQuery:(e,t)=>(e.queryValue=t.payload,e),updateOptionsAndFilter:(e,t)=>{var n;const a=(0,s.trim)((null!==(n=e.queryValue)&&void 0!==n?n:"").toLowerCase());return e.options=t.payload.filter((e=>{var t;const n=null!==(t=e.text)&&void 0!==t?t:"";return-1!==(Array.isArray(n)?n.toString():n).toLowerCase().indexOf(a)})),e.highlightIndex=0,i(e,h,c)},updateOptionsFromSearch:(e,t)=>(e.options=t.payload,e.highlightIndex=0,i(e,h,c)),cleanPickerState:()=>d}}),{toggleOption:m,showOptions:f,hideOptions:v,moveOptionsHighlight:b,toggleAllOptions:x,updateSearchQuery:y,updateOptionsAndFilter:w,updateOptionsFromSearch:j,cleanPickerState:S}=g.actions,C=g.reducer},93285:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});const a=e=>{if(!s(e))return e.name;const{current:t}=e;return Array.isArray(t.text)?t.text.join(" + "):t.text},s=e=>Array.isArray(null==e?void 0:e.options)||"object"==typeof(null==e?void 0:e.current)},46303:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});const a=(e,t)=>e?t&&!Array.isArray(e.value)?Object.assign({},e,{value:i(e.value),text:i(e.text)}):!t&&Array.isArray(e.value)?Object.assign({},e,{value:s(e.value),text:s(e.text)}):e:e,s=e=>Array.isArray(e)?e.length>0?e[0]:"":e,i=e=>Array.isArray(e)?e:[e]},57358:(e,t,n)=>{"use strict";n.d(t,{wX:()=>J,Z7:()=>M,LX:()=>K,DU:()=>H,Fz:()=>z,Ci:()=>V,xs:()=>q,Rk:()=>Y,xQ:()=>B,MB:()=>U});var a=n(82897),s=n(43215),i=n(90923),r=n(36537),o=n(61959),l=n(75478),d=n(56340),c=n(58257),u=n(98163),h=n(28659);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g{constructor(){p(this,"inputNode",void 0),p(this,"outputNode",void 0)}_linkTo(e,t){t<=0&&e.inputEdges.push(this),t>=0&&e.outputEdges.push(this),e.edges.push(this)}link(e,t){if(!e)throw Error("inputNode is required");if(!t)throw Error("outputNode is required");return this.unlink(),this.inputNode=e,this.outputNode=t,this._linkTo(e,1),this._linkTo(t,-1),this}unlink(){let e;const t=this.inputNode,n=this.outputNode;t&&n&&(e=t.edges.indexOf(this),e>-1&&t.edges.splice(e,1),e=n.edges.indexOf(this),e>-1&&n.edges.splice(e,1),e=t.outputEdges.indexOf(this),e>-1&&t.outputEdges.splice(e,1),e=n.inputEdges.indexOf(this),e>-1&&n.inputEdges.splice(e,1))}}class m{constructor(e){p(this,"name",void 0),p(this,"edges",void 0),p(this,"inputEdges",void 0),p(this,"outputEdges",void 0),this.name=e,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(e){return e?"object"==typeof e?this.inputEdges.find((t=>{var n;return(null===(n=t.inputNode)||void 0===n?void 0:n.name)===e.name})):this.inputEdges.find((t=>{var n;return(null===(n=t.inputNode)||void 0===n?void 0:n.name)===e})):null}getEdgeTo(e){return e?"object"==typeof e?this.outputEdges.find((t=>{var n;return(null===(n=t.outputNode)||void 0===n?void 0:n.name)===e.name})):this.outputEdges.find((t=>{var n;return(null===(n=t.outputNode)||void 0===n?void 0:n.name)===e})):null}getOptimizedInputEdges(){const e=[];return this.inputEdges.forEach((t=>{var n;const a=null===(n=t.inputNode)||void 0===n?void 0:n.inputEdges.map((e=>e.inputNode));null==a||a.forEach((t=>{const n=null==t?void 0:t.getEdgeTo(this.name);n&&e.push(n)}))})),this.inputEdges.filter((t=>-1===e.indexOf(t)))}}class f{constructor(){p(this,"nodes",{})}createNode(e){const t=new m(e);return this.nodes[e]=t,t}createNodes(e){const t=[];return e.forEach((e=>{t.push(this.createNode(e))})),t}link(e,t){let n=[],a=[];const s=[],i=[];n=e instanceof Array?e:[e],a=t instanceof Array?t:[t];for(let e=0;e<n.length;e++){const t=n[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link input node named ${t} since it doesn't exist in graph`);s.push(e)}else s.push(t)}for(let e=0;e<a.length;e++){const t=a[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link output node named ${t} since it doesn't exist in graph`);i.push(e)}else i.push(t)}const r=[];return s.forEach((e=>{i.forEach((t=>{r.push(this.createEdge().link(e,t))}))})),r}descendants(e){if(!e.length)return new Set;const t=new Set((n=e).length>0&&"string"==typeof n[0]?e.map((e=>this.nodes[e])).filter((e=>void 0!==e)):e);var n;return this.descendantsRecursive(t)}descendantsRecursive(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const n of e){const e=new Set;for(const{inputNode:a}of n.inputEdges)a&&!t.has(a)&&(t.add(a),e.add(a));this.descendantsRecursive(e,t)}return t}createEdge(){return new g}getNode(e){return this.nodes[e]}}var v=n(67436),b=n(7166),x=n(91219),y=n(62413),w=n(83751),j=n(85239),S=n(79067),C=n(231),k=n(46303),T=n(39665),I=n(5970),O=n(5337),N=n(36586),F=n(30146),D=n(40249),P=n(10080);function A(e){if(!(0,j.eL)(e))return e;let t=!1;for(const n of e.options)if(n.selected=!1,Array.isArray(e.current.value))for(const a of e.current.value)n.value===a&&(n.selected=t=!0);else n.value===e.current.value&&(n.selected=t=!0);return!t&&e.options.length&&(e.options[0].selected=!0),e}const M=(e,t)=>(n,a)=>{const{rootStateKey:s}=e,i=(0,N.E0)(e,a()),r=(0,k.x)(i.current,t);n((0,O.mb)(s,(0,F.Pl)((0,I.Y6)(e,{propName:"multi",propValue:t})))),n((0,O.mb)(s,(0,F.Pl)((0,I.Y6)(e,{propName:"current",propValue:r}))))},R=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return!!n.has(e.id)||(n=new Set([...n,e.id]),$(e,t).some((e=>R(e,t,n))))},$=(e,t)=>{if(!e.rootStateKey)return[];const n=[];for(const a of(0,N.gt)(e.rootStateKey,t))e!==a&&x.z.getIfExists(e.type)&&x.z.get(e.type).dependsOn(e,a)&&n.push(a);return n},L=(e,t,n)=>{if(0===t.length)return!1;const a=(0,N.gt)(e,n);return t.filter((e=>a.some((t=>t.id===e.id&&(t.state===s.LoadingState.NotStarted||t.state===s.LoadingState.Loading))))).length>0},E=(e,t)=>async(n,a)=>{const s=(0,N.E0)(e,a());await(async(e,t)=>{if(!e.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${e.id}`);if(R(e,t))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const n=$(e,t);L(e.rootStateKey,n,t)&&await new Promise((t=>{const a=d.h.subscribe((()=>{if(!e.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${e.id}`);L(e.rootStateKey,n,d.h.getState())||(a(),t())}))}))})(s,a());const i=t["var-"+s.name];if(void 0===i){if(s.hasOwnProperty("refresh")){const e=s;if(e.refresh===T.Bd.onDashboardLoad||e.refresh===T.Bd.onTimeRangeChanged)return void await n(Y((0,I.yQ)(e)))}n(ee(e))}else{const e=(0,I.Hi)(i);await x.z.get(s.type).setValueFromUrl(s,e)}},V=(e,t)=>async(n,s)=>{const i=(0,I.Hi)(t),r=(0,N.E0)(e,s());(0,I.iD)(r)!==T.Bd.never&&await n(Y((0,I.yQ)(r)));const o=(0,N.E0)((0,I.yQ)(r),s());if(!o)throw new Error(`Couldn't find variable with name: ${r.name}`);let l=o.options.find((e=>e.text===i||e.value===i));if(!l&&(0,j.U4)(o)&&o.allValue&&i===o.allValue&&(l={text:y.xk,value:y.r2,selected:!1}),!l){let e=i;const t=i;Array.isArray(i)&&(e=i.reduce(((e,t)=>{const n=o.options.find((e=>e.value===t));return[].concat(e,n?[n.text]:[t])}),[])),l={text:e,value:t,selected:!1}}(0,j.U4)(o)&&(l=(0,k.x)({text:(0,a.castArray)(l.text),value:(0,a.castArray)(l.value),selected:!1},o.multi)),await x.z.get(r.type).setValue(o,l)},B=(e,t)=>(n,a)=>{var s;const i=(0,N.E0)(e,a()),r=i.current||{},o=x.z.get(i.type).setValue;if(Array.isArray(r.value)){const e=(e=>{let t,n,a,s;const i=[];for(t=0;t<e.options.length;t++)if(s=Object.assign({},e.options[t]),s.selected=!1,Array.isArray(e.current.value))for(n=0;n<e.current.value.length;n++)a=e.current.value[n],s.value===a&&(s.selected=!0,i.push(s));else s.value===e.current.value&&(s.selected=!0,i.push(s));return i})(i);if(0===e.length){return o(i,i.options[0])}return o(i,{value:e.map((e=>e.value)),text:e.map((e=>e.text)),selected:!0})}let l=null;const d=(0,I.Tt)(i);if(l=null===(s=i.options)||void 0===s?void 0:s.find((e=>e.text===d)),l)return o(i,l);var c;if(t&&(l=null===(c=i.options)||void 0===c?void 0:c.find((e=>e.text===t)),l))return o(i,l);if(i.options){const e=i.options[0];if(e)return o(i,e)}return Promise.resolve()},z=(e,t,n)=>async a=>{const{rootStateKey:s}=e;return a((0,O.mb)(s,(0,F.Q8)((0,I.Y6)(e,{option:t})))),await a(U(e,n))},_=e=>{const t=new f;return e.forEach((e=>{t.createNode(e.name)})),e.forEach((n=>{e.forEach((e=>{n!==e&&x.z.get(n.type).dependsOn(n,e)&&t.link(n.name,e.name)}))})),t},U=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.h$;return async(a,s)=>{var r,o,l;const d=s(),{rootStateKey:c}=e,u=(0,N.E0)(e,d);if((0,N.AE)(c,d).transaction.status===T.LN.Fetching)return(0,I.iD)(u)===T.Bd.never&&(await a(te((0,I.yQ)(u))),a(ee(e))),Promise.resolve();const h=(0,N.gt)(c,d),p=_(h),g=null!==(r=null===(o=d.dashboard)||void 0===o||null===(l=o.getModel())||void 0===l?void 0:l.panels)&&void 0!==r?r:[],m=(0,S.dH)(g),f=(0,j.Kn)(u)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,S.PQ)([u.id],p,m))},v=p.getNode(u.name);let b=[];return v&&(b=v.getOptimizedInputEdges().map((e=>{const t=h.find((t=>{var n;return t.name===(null===(n=e.inputNode)||void 0===n?void 0:n.name)}));return t?a(Y((0,I.yQ)(t))):Promise.resolve()}))),Promise.all(b).then((()=>{t&&(n.publish(new T.x9(f)),i.locationService.partial(G(c,s)))}))}},H=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{templateSrv:(0,b.J)(),events:u.h$};return async(a,s)=>{n.templateSrv.updateTimeRange(t);const i=(0,N.gt)(e,s()).filter((e=>{if(e.hasOwnProperty("refresh")&&e.hasOwnProperty("options")){return e.refresh===T.Bd.onTimeRangeChanged}return!1})),o=i.map((e=>e.id)),l=i.map((e=>a(W((0,I.yQ)(e)))));try{await Promise.all(l),n.events.publish(new T.eq({variableIds:o}))}catch(e){console.error(e),a((0,r.$l)(X("Template variable service failed",e)))}}},W=e=>async(t,n)=>{const a=(0,N.E0)(e,n()),s=a.options.slice();await t(Y((0,I.yQ)(a),!0));const i=(0,N.E0)(e,n()).options;if(JSON.stringify(s)!==JSON.stringify(i)){const e=n().dashboard.getModel();null==e||e.templateVariableValueUpdated()}},q=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.h$;return async(a,s)=>{var i;const r=[],o=s().dashboard.getModel(),l=(0,N.gt)(e,s());for(const e of l){const n=`var-${e.name}`;if(!t.hasOwnProperty(n))continue;if(!Z(e,t[n].value))continue;let a=t[n].value;if(t[n].removed){const t=null==o?void 0:o.templating.list.find((t=>t.name===e.name));t&&(0,j.Kr)(t)&&(a=t.current.value),t&&(0,j.VC)(t)&&(a=t.query)}const s=x.z.get(e.type).setValueFromUrl(e,a);r.push(s)}const d=l.filter((e=>{const n=`var-${e.name}`;return t.hasOwnProperty(n)&&Z(e,t[n].value)&&!(0,j.Kn)(e)})),c=_(l),u=(0,S.dH)(null!==(i=null==o?void 0:o.panels)&&void 0!==i?i:[]),h=(0,S.PQ)(d.map((e=>e.id)),c,u);r.length&&(await Promise.all(r),n.publish(new T.Wy({refreshAll:0===h.size,panelIds:Array.from(h)})))}};function Z(e,t){const n=x.z.get(e.type).getValueForUrl(e);let s=(0,I.Hi)(t);return Array.isArray(n)&&!Array.isArray(s)&&(s=[s]),!(0,a.isEqual)(n,s)}const G=(e,t)=>{const n=i.locationService.getSearchObject(),a=Object.keys(n).filter((e=>-1===e.indexOf("var-"))).reduce(((e,t)=>(e[t]=n[t],e)),{});for(const n of(0,N.gt)(e,t())){if(n.skipUrlSync)continue;const e=x.z.get(n.type);a["var-"+n.name]=e.getValueForUrl(n)}return a},K=(e,t)=>async(n,a)=>{try{const r=(0,I.mn)(e),c=a(),u=(0,N.cp)(c);if(u){(0,N.AE)(u,c).transaction.status===T.LN.Fetching&&n(J(u))}n((0,O.mb)(r,(0,D.Z9)({uid:r}))),n(((e,t)=>n=>{const a=Object.assign({},T.Eg,{id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:T.bU.hideVariable,current:{value:{name:t.title,uid:t.uid,toString:()=>t.title}}});n((0,O.mb)(e,(0,F.VN)((0,I.Y6)(a,{global:a.global,index:a.index,model:a}))));const s=Object.assign({},T.Eg,{id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:T.bU.hideVariable,current:{value:{name:o.Vt.user.orgName,id:o.Vt.user.orgId,toString:()=>o.Vt.user.orgId.toString()}}});n((0,O.mb)(e,(0,F.VN)((0,I.Y6)(s,{global:s.global,index:s.index,model:s}))));const i=Object.assign({},T.Eg,{id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:T.bU.hideVariable,current:{value:{login:o.Vt.user.login,id:o.Vt.user.id,email:o.Vt.user.email,toString:()=>o.Vt.user.id.toString()}}});n((0,O.mb)(e,(0,F.VN)((0,I.Y6)(i,{global:i.global,index:i.index,model:i}))))})(r,t)),n(((e,t)=>(n,a)=>{let s=0;const i=t.templating.list;for(let t=0;t<i.length;t++){const a=A(i[t]);a.rootStateKey=e,x.z.getIfExists(a.type)&&n((0,O.mb)(e,(0,F.VN)((0,I.Y6)(a,{global:!1,index:s++,model:a}))))}(0,b.J)().updateTimeRange((0,l.$t)().timeRange());const r=(0,N.gt)(e,a());for(const t of r)n((0,O.mb)(e,(0,F.Mn)((0,I.Y6)(t))))})(r,t)),n(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.ak;return(n,a)=>{const i=(0,N.gt)(e,a());for(const a of i){if(!(0,j.Kn)(a)&&!(0,j.Xh)(a))continue;const{datasource:i}=a;if((0,s.isDataSourceRef)(i))continue;const r=t().getInstanceSettings(i),o=r?(0,s.getDataSourceRef)(r):{uid:i};n((0,O.mb)(e,(0,F.Pl)((0,I.Y6)(a,{propName:"datasource",propValue:o}))))}}}(r)),await n((d=r,async(e,t)=>{const n=i.locationService.getSearchObject(),a=(0,N.gt)(d,t()).map((async t=>await e(E((0,I.yQ)(t),n))));await Promise.all(a)})),n((0,O.mb)(r,(0,D.iv)({uid:r})))}catch(e){n((0,r.$l)(X("Templating init failed",e))),console.error(e)}var d};const Q=e=>t=>{t((0,O.mb)(e,(0,P.S)())),t((0,O.mb)(e,(0,w.QR)())),t((0,O.mb)(e,(0,C.XJ)())),t((0,O.mb)(e,(0,D.p3)()))},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getBackendSrv:h.i};return n=>{t.getBackendSrv().cancelAllInFlightRequests(),n(Q(e))}},Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(n,a)=>{const{rootStateKey:s}=e;try{if(!(0,I.A3)(s,a()))return;const t=(0,N.E0)(e,a());n((0,O.mb)(s,(0,F.$M)((0,I.Y6)(t)))),await n(te((0,I.yQ)(t))),await x.z.get(t.type).updateOptions(t),n(ee(e))}catch(a){if(n((0,O.mb)(s,(0,F.Le)((0,I.Y6)(e,{error:a})))),t||(console.error(a),n((0,r.$l)(X("Error updating options:",a,e)))),t)throw a}}},X=(e,t,n)=>(0,c.t_)(""+(n?`Templating [${n.id}]`:"Templating"),`${e} ${t.message}`),ee=e=>(t,n)=>{const{rootStateKey:a}=e;if(!(0,I.A3)(a,n()))return;const i=(0,N.E0)(e,n());i.state!==s.LoadingState.Done&&t((0,O.mb)(e.rootStateKey,(0,F.qQ)((0,I.Y6)(i))))};function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.ak;return async function(n,a){const{id:s,rootStateKey:i}=e;if(!(0,I.A3)(i,a()))return;const o=(0,N.E0)(e,a());if((0,j.Xh)(o))try{var l;const a=await t().get(null!==(l=o.datasource)&&void 0!==l?l:"");if((0,j.R)(a))return;if(!(0,j.Ju)(a))return;if(ne(o.query))return;const r={refId:`${a.name}-${s}-Variable-Query`,query:o.query};n((0,O.mb)(i,(0,F.Pl)((0,I.Y6)(e,{propName:"query",propValue:r}))))}catch(e){n((0,r.$l)(X("Failed to upgrade legacy queries",e))),console.error(e)}}}function ne(e){return!!e&&(e.hasOwnProperty("refId")&&"string"==typeof e.refId)}},5337:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>d,mb:()=>o,qM:()=>r});var a=n(5970),s=n(77222),i=n(40249);const r={keys:{}};function o(e,t){const n=(0,a.mn)(e);return{type:`templating/keyed/${(s={key:n,action:t}).action.type.replace(/^templating\//,"")}`,payload:s};var s}const l=e=>"string"==typeof e.type&&e.type.startsWith("templating/keyed")&&"payload"in e&&"string"==typeof e.payload.key;const d={templating:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;if(l(t)){const{key:n,action:r}=t.payload,o=(0,a.mn)(n),l=i.Z9.match(r)?o:e.lastKey,d=(0,s.Q)()(e.keys[o],r);return Object.assign({},e,{lastKey:l,keys:Object.assign({},e.keys,{[o]:d})})}return e}}},77222:(e,t,n)=>{"use strict";n.d(t,{L:()=>h,Q:()=>u});var a=n(31259),s=n(83751),i=n(22741),r=n(231),o=n(40249),l=n(11895),d=n(10080);let c;function u(){return c||(c=(0,a.combineReducers)({editor:s.gl,variables:d.L,optionsPicker:r.cv,transaction:o.vw,inspect:i.iV})),c}function h(){return{editor:s.PF,variables:l.s,optionsPicker:r.yy,transaction:o.xO,inspect:i.Kf}}},36586:(e,t,n)=>{"use strict";n.d(t,{AE:()=>d,E0:()=>o,Eo:()=>g,IV:()=>h,Q4:()=>b,QT:()=>m,S_:()=>v,_K:()=>y,cp:()=>f,gt:()=>c,ir:()=>w,ng:()=>x,xD:()=>p});var a=n(58635),s=n(56340),i=n(5970),r=n(77222);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)(),n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{id:a,rootStateKey:i}=e,r=d(i,t);if(r.variables[a])return r.variables[a];if(n)throw new Error(`Couldn't find variable with id:${a}`)};function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,s.y0)();return Object.values(d(t,n).variables).filter(e).sort(((e,t)=>e.index-t.index))}function d(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();return null!==(t=n.templating.keys[(0,i.mn)(e)])&&void 0!==t?t:(0,r.L)()}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();return l(u,e,t)}function u(e){return"system"!==e.type}const h=(0,a.Z)(((e,t)=>c(e,(0,s.y0)()))),p=(e,t)=>c(e,t);function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();return m(Object.values(d(e,t).variables))}function m(e){const t=e.filter(u).sort(((e,t)=>e.index-t.index));return t.length>0?t[t.length-1].index+1:0}function f(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.y0)();return null===(e=t.templating)||void 0===e?void 0:e.lastKey}function v(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.y0)();if(null===(e=t.templating)||void 0===e||!e.lastKey)throw new Error("Accessing lastKey without initializing it variables");return t.templating.lastKey}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();const n=f(t);return n?l(e,n,t):[]}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.y0)();const t=f(e);return t?c(t,e):[]}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();const n=f(t);if(n)return o({id:e,rootStateKey:n,type:"query"},t,!1)}function w(e,t){return e[t]}},30146:(e,t,n)=>{"use strict";n.d(t,{$M:()=>w,Be:()=>x,Le:()=>S,Mn:()=>y,Pl:()=>m,Q8:()=>b,VN:()=>g,Y9:()=>v,b5:()=>h,gE:()=>f,mZ:()=>p,qQ:()=>j});var a=n(35140),s=n(82897),i=n(43215),r=n(91219),o=n(83751),l=n(5970),d=n(36586),c=n(11895);const u=(0,a.oM)({name:"templating/shared",initialState:c.s,reducers:{addVariable:(e,t)=>{var n;const a=null!==(n=t.payload.id)&&void 0!==n?n:t.payload.data.model.name,i=r.z.get(t.payload.type),o=(0,s.cloneDeep)(i.initialState),l=i.beforeAdding?i.beforeAdding(t.payload.data.model):(0,s.cloneDeep)(t.payload.data.model),d=Object.assign({},(0,s.defaults)({},l,o),{id:a,index:t.payload.data.index,global:t.payload.data.global});e[a]=d},variableStateNotStarted:(e,t)=>{const n=(0,d.ir)(e,t.payload.id);n.state=i.LoadingState.NotStarted,n.error=null},variableStateFetching:(e,t)=>{const n=(0,d.ir)(e,t.payload.id);n.state=i.LoadingState.Loading,n.error=null},variableStateCompleted:(e,t)=>{const n=(0,d.ir)(e,t.payload.id);n&&(n.state=i.LoadingState.Done,n.error=null)},variableStateFailed:(e,t)=>{const n=(0,d.ir)(e,t.payload.id);n&&(n.state=i.LoadingState.Error,n.error=t.payload.data.error)},removeVariable:(e,t)=>{if(delete e[t.payload.id],!t.payload.data.reIndex)return;const n=Object.values(e);for(let e=0;e<n.length;e++)n[e].index=e},duplicateVariable:(e,t)=>{var n,a;const i=(0,s.cloneDeep)(e[t.payload.id]),o=`copy_of_${i.name}`,l=null!==(n=null===(a=t.payload.data)||void 0===a?void 0:a.newId)&&void 0!==n?n:o,c=(0,d.QT)(Object.values(e));e[l]=Object.assign({},(0,s.cloneDeep)(r.z.get(t.payload.type).initialState),i,{id:l,name:o,index:c})},changeVariableOrder:(e,t)=>{const{toIndex:n,fromIndex:a}=t.payload.data,s=Object.values(e);for(let e=0;e<s.length;e++){const t=s[e];t.index===a?t.index=n:t.index>a&&t.index<=n?t.index--:t.index<a&&t.index>=n&&t.index++}},changeVariableType:(e,t)=>{const{id:n}=t.payload,{label:a,name:i,index:o,description:l,rootStateKey:d}=e[n];e[n]=Object.assign({},(0,s.cloneDeep)(r.z.get(t.payload.data.newType).initialState),{id:n,rootStateKey:d,label:a,name:i,index:o,description:l})},setCurrentVariableValue:(e,t)=>{if(!t.payload.data.option)return;const n=(0,d.ir)(e,t.payload.id),{option:a}=t.payload.data,s=Object.assign({},a,{text:(0,l.Hi)(null==a?void 0:a.text),value:(0,l.Hi)(null==a?void 0:a.value)});n.current=s,n.options=n.options.map((e=>{e.value=(0,l.Hi)(e.value),e.text=(0,l.Hi)(e.text);let t=!1;if(Array.isArray(s.value))for(let n=0;n<s.value.length;n++){const a=s.value[n];if(e.value===a){t=!0;break}}else e.value===s.value&&(t=!0);return e.selected=t,e}))},changeVariableProp:(e,t)=>{(0,d.ir)(e,t.payload.id)[t.payload.data.propName]=t.payload.data.propValue}},extraReducers:e=>e.addCase(o.Yo,((e,t)=>{(0,d.ir)(e,t.payload.id).name=t.payload.data.newName}))}),h=u.reducer,{removeVariable:p,addVariable:g,changeVariableProp:m,changeVariableOrder:f,duplicateVariable:v,setCurrentVariableValue:b,changeVariableType:x,variableStateNotStarted:y,variableStateFetching:w,variableStateCompleted:j,variableStateFailed:S}=u.actions},40249:(e,t,n)=>{"use strict";n.d(t,{Z9:()=>d,iv:()=>u,p3:()=>c,vw:()=>h,xO:()=>r});var a=n(35140),s=n(39665),i=n(30146);const r={uid:null,status:s.LN.NotStarted,isDirty:!1},o=(0,a.oM)({name:"templating/transaction",initialState:r,reducers:{variablesInitTransaction:(e,t)=>{e.uid=t.payload.uid,e.status=s.LN.Fetching},variablesCompleteTransaction:(e,t)=>{e.uid===t.payload.uid&&(e.status=s.LN.Completed)},variablesClearTransaction:(e,t)=>{e.uid=null,e.status=s.LN.NotStarted,e.isDirty=!1}},extraReducers:e=>e.addMatcher(l,((e,t)=>{e.status===s.LN.Completed&&(e.isDirty=!0)}))});function l(e){return i.mZ.match(e)||i.VN.match(e)||i.Pl.match(e)||i.gE.match(e)||i.Y9.match(e)||i.Be.match(e)}const{variablesInitTransaction:d,variablesClearTransaction:c,variablesCompleteTransaction:u}=o.actions,h=o.reducer},11895:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});const a={}},10080:(e,t,n)=>{"use strict";n.d(t,{L:()=>l,S:()=>o});var a=n(35140),s=n(91219),i=n(30146),r=n(11895);const o=(0,a.PH)("templating/cleanVariables"),l=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.s,a=arguments.length>1?arguments[1]:void 0;if(o.match(a)){const e=Object.values(n).filter((e=>e.global));if(!e)return r.s;const t=e.reduce(((e,t)=>(e[t.id]=t,e)),{});return t}return null!=a&&null!==(e=a.payload)&&void 0!==e&&e.type&&s.z.getIfExists(null==a||null===(t=a.payload)||void 0===t?void 0:t.type)?s.z.get(a.payload.type).reducer((0,i.b5)(n,a),a):n}},39665:(e,t,n)=>{"use strict";n.d(t,{$U:()=>d,Bd:()=>o,Eg:()=>c,LN:()=>r,Wy:()=>p,bU:()=>l,eq:()=>h,x9:()=>u});var a=n(43215),s=n(62413);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let r,o,l,d;!function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Completed="Completed"}(r||(r={})),function(e){e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged"}(o||(o={})),function(e){e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable"}(l||(l={})),function(e){e[e.disabled=0]="disabled",e[e.alphabeticalAsc=1]="alphabeticalAsc",e[e.alphabeticalDesc=2]="alphabeticalDesc",e[e.numericalAsc=3]="numericalAsc",e[e.numericalDesc=4]="numericalDesc",e[e.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",e[e.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc"}(d||(d={}));const c={id:s.UY,rootStateKey:null,name:"",type:"",global:!1,index:-1,hide:l.dontHide,skipUrlSync:!1,state:a.LoadingState.NotStarted,error:null,description:null};class u extends a.BusEventWithPayload{}i(u,"type","variables-changed");class h extends a.BusEventWithPayload{}i(h,"type","variables-time-range-process-done");class p extends a.BusEventWithPayload{}i(p,"type","variables-changed-in-url")},5970:(e,t,n)=>{"use strict";n.d(t,{A3:()=>I,AQ:()=>w,HY:()=>v,Hi:()=>T,J7:()=>h,N9:()=>x,QI:()=>f,Tt:()=>b,Y6:()=>F,_6:()=>m,a9:()=>p,bf:()=>g,bi:()=>S,gR:()=>y,iD:()=>j,mn:()=>O,xT:()=>k,yQ:()=>N});var a=n(82897),s=n(90923),i=n(62236),r=n(56340),o=n(75478),l=n(91219),d=n(62413),c=n(36586),u=n(39665);const h=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,p=e=>(h.lastIndex=0,h.exec(e)),g=e=>!(!e||"string"!=typeof e)&&-1!==e.indexOf("__searchFilter"),m=e=>{const{query:t,wildcardChar:n}=e;if(!g(t))return{};let{options:a}=e;a=a||{searchFilter:""};return{__searchFilter:{value:a.searchFilter?`${a.searchFilter}${n}`:`${n}`,text:""}}};function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t[t.length-1];t[0]="string"==typeof t[0]?t[0]:(0,i.Xh)(t[0]);const s=t.slice(0,-1).join(" "),r=s.match(h),o=null!==r&&r.find((e=>{const t=p(e);return null!==t&&t.indexOf(a)>-1}));return!!o}const v=e=>{if(!e)return!1;if(!e.current)return!1;if(e.current.value){const t=Array.isArray(e.current.value);if(t&&e.current.value.length&&e.current.value[0]===d.r2)return!0;if(!t&&e.current.value===d.r2)return!0}if(e.current.text){const t=Array.isArray(e.current.text);if(t&&e.current.text.length&&e.current.text[0]===d.xk)return!0;if(!t&&e.current.text===d.xk)return!0}return!1},b=e=>e&&e.current&&e.current.text?Array.isArray(e.current.text)?e.current.text.toString():"string"!=typeof e.current.text?"":e.current.text:"",x=e=>e&&e.current&&void 0!==e.current.value&&null!==e.current.value?Array.isArray(e.current.value)?e.current.value.toString():"string"!=typeof e.current.value?null:e.current.value:null;function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.getTemplateSrv)();return e&&e.regex?t.replace(e.regex,{},"regex"):""}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.$t)();const a={range:void 0,variable:e,searchFilter:t};return e.refresh!==u.Bd.onTimeRangeChanged&&e.refresh!==u.Bd.onDashboardLoad||(a.range=n.timeRange()),a}function j(e){if(!e||!e.hasOwnProperty("refresh"))return u.Bd.never;const t=e;return t.refresh!==u.Bd.onTimeRangeChanged&&t.refresh!==u.Bd.onDashboardLoad&&t.refresh!==u.Bd.never?u.Bd.never:t.refresh}function S(){return l.z.list().filter((e=>"system"!==e.id)).map((e=>{let{id:t,name:n}=e;return{label:n,value:t}}))}function C(e){return(0,a.isArray)(e)&&(0===e.length?e=void 0:1===e.length&&(e=e[0])),e}function k(e,t){let n=0;const s={};for(const i in e){if(!i.startsWith("var-"))continue;let r=C(t[i]),o=C(e[i]);(0,a.isEqual)(o,r)||(s[i]={value:e[i]},n++)}for(const i in t){if(!i.startsWith("var-"))continue;const r=t[i];(0,a.isArray)(r)&&0===r.length||(e.hasOwnProperty(i)||(s[i]={value:"",removed:!0},n++))}return n?s:void 0}function T(e){return Array.isArray(e)?e.map(String):null==e?"":"number"==typeof e?e.toString(10):"string"==typeof e?e:"boolean"==typeof e?e.toString():""}function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.y0)();return(0,c.AE)(e,t).transaction.status!==u.LN.NotStarted}function O(e){return String(e)}const N=e=>{if(!e.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${e.id}`);return{type:e.type,id:e.id,rootStateKey:e.rootStateKey}};function F(e,t){return{type:e.type,id:e.id,data:t}}},36151:(e,t,n)=>{"use strict";n(32478),n(88273),n(60324),n(44032),n(45371),n(3574);var a=n(98572),s=n.n(a),i=n(67436),r=(n(36103),n(22305)),o=(n(38434),n(33689),n(30528),n(29483),n(82897)),l=n.n(o),d=n(68404),c=n(87524),u=n(43215),h=n(90923),p=n(82653),g=n(35364),m=n(3490),f=n(78837),v=n(30034),b=n(36636),x=n(23043);function y(e,t){switch(t.type){case u.FieldType.boolean:return!(0,o.isUndefined)(e)&&w(e);case u.FieldType.number:return isNaN(e)?0:parseFloat(e);case u.FieldType.string:return e?String(e):"";default:return e}}const w=e=>(0,o.isString)(e)?!("F"===e[0]||"f"===e[0]||"0"===e[0]):!!e;var j=n(45916);function S(e){return function(t){let{options:n,onChange:a,field:s}=t;const{validator:i,converter:r=y}=e,{value:o}=n,[l,c]=(0,d.useState)(!i(o)),u=(0,d.useCallback)((e=>{c(!i(e.currentTarget.value))}),[c,i]),h=(0,d.useCallback)((e=>{if(l)return;const{value:t}=e.currentTarget;a(Object.assign({},n,{value:r(t,s)}))}),[n,a,l,s,r]);return(0,j.jsx)(m.Input,{className:"flex-grow-1",invalid:l,defaultValue:String(n.value),placeholder:"Value",onChange:u,onBlur:h})}}const C=()=>null;var k;function T(e){return function(t){let{options:n,onChange:a,field:s}=t;const{validator:i}=e,[r,o]=(0,d.useState)({from:!i(n.from),to:!i(n.to)}),l=(0,d.useCallback)(((e,t)=>{o(Object.assign({},r,{[t]:!i(e.currentTarget.value)}))}),[o,i,r]),c=(0,d.useCallback)(((e,t)=>{if(r[t])return;const{value:i}=e.currentTarget;a(Object.assign({},n,{[t]:y(i,s)}))}),[n,a,r,s]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Input,{className:"flex-grow-1 gf-form-spacing",invalid:r.from,defaultValue:String(n.from),placeholder:"From",onChange:e=>l(e,"from"),onBlur:e=>c(e,"from")}),k||(k=(0,j.jsx)("div",{className:"gf-form-label",children:"and"})),(0,j.jsx)(m.Input,{className:"flex-grow-1",invalid:r.to,defaultValue:String(n.to),placeholder:"To",onChange:e=>l(e,"to"),onBlur:e=>c(e,"to")})]})}}const I=new u.Registry((()=>[{name:"Is greater",id:u.ValueMatcherID.greater,component:S({validator:e=>!isNaN(e)})},{name:"Is greater or equal",id:u.ValueMatcherID.greaterOrEqual,component:S({validator:e=>!isNaN(e)})},{name:"Is lower",id:u.ValueMatcherID.lower,component:S({validator:e=>!isNaN(e)})},{name:"Is lower or equal",id:u.ValueMatcherID.lowerOrEqual,component:S({validator:e=>!isNaN(e)})},{name:"Is equal",id:u.ValueMatcherID.equal,component:S({validator:()=>!0})},{name:"Is not equal",id:u.ValueMatcherID.notEqual,component:S({validator:()=>!0})},{name:"Regex",id:u.ValueMatcherID.regex,component:S({validator:()=>!0,converter:e=>String(e)})},{name:"Is null",id:u.ValueMatcherID.isNull,component:C},{name:"Is not null",id:u.ValueMatcherID.isNotNull,component:C},{name:"Is between",id:u.ValueMatcherID.between,component:T({validator:e=>!isNaN(e)})}]));var O,N,F;const D=e=>{var t,n;const{onDelete:a,onChange:s,filter:i,fieldsInfo:r}=e,{fieldsAsOptions:o,fieldByDisplayName:l}=r,c=l[null!==(t=M(i,o))&&void 0!==t?t:""],h=c?P(c):[],p=A(i,h),g=I.getIfExists(p),f=(0,d.useCallback)((e=>{null!=e&&e.value&&s(Object.assign({},i,{fieldName:e.value}))}),[s,i]),v=(0,d.useCallback)((e=>{if(null==e||!e.value)return;const t=e.value,n=u.valueMatchers.get(t).getDefaultOptions(c);s(Object.assign({},i,{config:{id:t,options:n}}))}),[s,i,c]),b=(0,d.useCallback)((e=>{s(Object.assign({},i,{config:Object.assign({},i.config,{options:e})}))}),[s,i]);return c&&g&&g.component?(0,j.jsxs)("div",{className:"gf-form-inline",children:[(0,j.jsxs)("div",{className:"gf-form gf-form-spacing",children:[O||(O=(0,j.jsx)("div",{className:"gf-form-label width-7",children:"Field"})),(0,j.jsx)(m.Select,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:o,value:i.fieldName,onChange:f})]}),(0,j.jsxs)("div",{className:"gf-form gf-form-spacing",children:[N||(N=(0,j.jsx)("div",{className:"gf-form-label",children:"Match"})),(0,j.jsx)(m.Select,{className:"width-12",placeholder:"Select test",options:h,value:p,onChange:v})]}),(0,j.jsxs)("div",{className:"gf-form gf-form--grow gf-form-spacing",children:[F||(F=(0,j.jsx)("div",{className:"gf-form-label",children:"Value"})),(0,j.jsx)(g.component,{field:c,options:null!==(n=i.config.options)&&void 0!==n?n:{},onChange:b})]}),(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)(m.Button,{icon:"times",onClick:a,variant:"secondary"})})]}):null},P=e=>{const t=[];for(const n of u.valueMatchers.list()){if(!n.isApplicable(e))continue;I.getIfExists(n.id)&&t.push({value:n.id,label:n.name,description:n.description})}return t},A=(e,t)=>{var n;const a=t.find((t=>t.value===e.config.id));return a&&a.value?a.value:null!==(n=t[0])&&void 0!==n&&n.value?null===(s=t[0])||void 0===s?void 0:s.value:void 0;var s},M=(e,t)=>{var n;const a=t.find((t=>t.value===e.fieldName));return a&&a.value?a.value:null!==(n=t[0])&&void 0!==n&&n.value?null===(s=t[0])||void 0===s?void 0:s.value:void 0;var s};var R,L;const E=[{label:"Include",value:x.PQ.include},{label:"Exclude",value:x.PQ.exclude}],V=[{label:"Match all",value:x.ER.all},{label:"Match any",value:x.ER.any}],B={id:u.DataTransformerID.filterByValue,editor:e=>{const{input:t,options:n,onChange:a}=e,s=z(),i=_(t),r=(0,d.useCallback)((()=>{const e=t[0],s=e.fields.find((e=>e.type!==u.FieldType.time));if(!s)return;const i=(0,o.cloneDeep)(n.filters),r=u.valueMatchers.get(u.ValueMatcherID.greater);i.push({fieldName:(0,u.getFieldDisplayName)(s,e,t),config:{id:r.id,options:r.getDefaultOptions(s)}}),a(Object.assign({},n,{filters:i}))}),[a,n,t]),l=(0,d.useCallback)((e=>{let t=(0,o.cloneDeep)(n.filters);t.splice(e,1),a(Object.assign({},n,{filters:t}))}),[n,a]),c=(0,d.useCallback)(((e,t)=>{let s=(0,o.cloneDeep)(n.filters);s[t]=e,a(Object.assign({},n,{filters:s}))}),[n,a]),h=(0,d.useCallback)((e=>{a(Object.assign({},n,{type:null!=e?e:x.PQ.include}))}),[n,a]),p=(0,d.useCallback)((e=>{a(Object.assign({},n,{match:null!=e?e:x.ER.all}))}),[n,a]);return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"gf-form gf-form-inline",children:[R||(R=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Filter type"})),(0,j.jsx)("div",{className:"width-15",children:(0,j.jsx)(m.RadioButtonGroup,{options:E,value:n.type,onChange:h,fullWidth:!0})})]}),(0,j.jsxs)("div",{className:"gf-form gf-form-inline",children:[L||(L=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Conditions"})),(0,j.jsx)("div",{className:"width-15",children:(0,j.jsx)(m.RadioButtonGroup,{options:V,value:n.match,onChange:p,fullWidth:!0})})]}),(0,j.jsxs)("div",{className:s.conditions,children:[n.filters.map(((e,t)=>(0,j.jsx)(D,{filter:e,fieldsInfo:i,onChange:e=>c(e,t),onDelete:()=>l(t)},t))),(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)(m.Button,{icon:"plus",size:"sm",onClick:r,variant:"secondary",children:"Add condition"})})]})]})},transformation:u.standardTransformers.filterByValueTransformer,name:u.standardTransformers.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},z=(0,m.stylesFactory)((()=>({conditions:b.css`
    padding-left: 16px;
  `}))),_=e=>(0,d.useMemo)((()=>{const t={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(e)?e.reduce(((t,n)=>n.fields.reduce(((t,a)=>{const s=(0,u.getFieldDisplayName)(a,n,e);return t.fieldByDisplayName[s]||(t.fieldsAsOptions.push({label:s,value:s,type:a.type}),t.fieldByDisplayName[s]=a),t}),t)),t):t}),[e]);var U=n(35327),H=n(30090),W=n(64593);function q(e,t){const n={data:e.input,options:e.options},a=new U.j({id:"root",title:"root"}),s={getValue:t=>(0,o.get)(e.options,t),onChange:(t,n)=>{e.onChange((0,W.hs)(e.options,t,n))}};return(0,H.HZ)(t,s,(e=>{if(null!=e&&e.length){const t=e[0];let n=a.categories.find((e=>e.props.id===t));return n||(n=new U.j({id:t,title:t}),a.categories.push(n)),n}return a}),n),a}function Z(e){const t={},n=new u.PanelOptionsEditorBuilder;e(n,{data:[],options:{}});for(const e of n.getItems())null!=e.defaultValue&&(0,o.set)(t,e.path,e.defaultValue);return t}var G=n(2798),K=n(49423);const Q=(e,t)=>{var n;const a=null!==(n=t.options)&&void 0!==n?n:{};(0,G.J)("",e,a)},J={id:K.Oy.id,editor:e=>{(0,d.useEffect)((()=>{var t;if(null===(t=e.options.xBuckets)||void 0===t||!t.mode){const t=Z(Q);e.onChange(Object.assign({},t,e.options)),console.log("geometry useEffect",t)}}));const t=q(e,Q);return(0,j.jsx)("div",{children:(0,j.jsx)("div",{children:t.items.map((e=>e.render()))})})},transformation:K.Oy,name:K.Oy.name,description:K.Oy.description,state:u.PluginState.alpha};function Y(e,t,n){const a={},s={};for(const r of e.fields){const o=(0,u.getFieldDisplayName)(r,e),l=n.index[o].handler;if(!l)continue;const d=r.values.get(t);if(null==d)continue;const c=l.processor(d,a,s);var i;if(null!=c)a[null!==(i=l.targetProperty)&&void 0!==i?i:l.key]=c}return s.mappingValues&&(a.mappings=function(e){const t={type:u.MappingType.ValueToText,options:{}};if(!e.mappingValues)return[];for(let n=0;n<e.mappingValues.length;n++){const a=e.mappingValues[n];null!=a&&(t.options[a.toString()]={color:e.mappingColors&&e.mappingColors[n],text:e.mappingTexts&&e.mappingTexts[n],index:n})}return[t]}(s)),a}let X;!function(e){e.Name="field.name",e.Value="field.value",e.Label="field.label",e.Ignore="__ignore"}(X||(X={}));const ee=[{key:X.Name,name:"Field name",processor:()=>{}},{key:X.Value,name:"Field value",processor:()=>{}},{key:X.Label,name:"Field label",processor:()=>{}},{key:X.Ignore,name:"Ignore",processor:()=>{}},{key:"max",processor:ne},{key:"min",processor:ne},{key:"unit",processor:e=>e.toString()},{key:"decimals",processor:ne},{key:"displayName",name:"Display name",processor:e=>e.toString()},{key:"color",processor:e=>({fixedColor:e,mode:u.FieldColorModeId.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(e,t)=>{const n=(0,u.anyToNumber)(e);if(!isNaN(n))return t.thresholds||(t.thresholds={mode:u.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"}]}),t.thresholds.steps.push({value:n,color:"red"}),t.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:u.ReducerID.allValues,processor:(e,t,n)=>{if((0,o.isArray)(e))return n.mappingValues=e,t.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:u.ReducerID.allValues,processor:(e,t,n)=>{if((0,o.isArray)(e))return n.mappingColors=e,t.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:u.ReducerID.allValues,processor:(e,t,n)=>{if((0,o.isArray)(e))return n.mappingTexts=e,t.mappings}}];let te=null;function ne(e){const t=(0,u.anyToNumber)(e);if(!isNaN(t))return t}function ae(e){return e?function(){if(null===te){te={};for(const e of ee)te[e.key]=e}return te}()[e]:null}function se(e,t,n){const a={index:{}};let s=t.find((e=>e.handlerKey===X.Name)),i=t.find((e=>e.handlerKey===X.Value));for(const d of e.fields){var r,o,l;const c=(0,u.getFieldDisplayName)(d,e),h=t.find((e=>e.fieldName===c));let p=ae(h?h.handlerKey:c.toLowerCase());n&&(p?(p.key===X.Name&&(a.nameField=d),p.key===X.Value&&(a.valueField=d)):h||(a.nameField||s||d.type!==u.FieldType.string||(a.nameField=d,p=ae(X.Name)),a.valueField||i||d.type!==u.FieldType.number||(a.valueField=d,p=ae(X.Value)))),!p&&n&&(p=ae(X.Label)),a.index[c]={automatic:!h,handler:p,reducerId:null!==(r=null!==(o=null==h?void 0:h.reducerId)&&void 0!==o?o:null===(l=p)||void 0===l?void 0:l.defaultReducer)&&void 0!==r?r:u.ReducerID.lastNotNull}}return a}var ie,re,oe;function le(e){let{frame:t,mappings:n,onChange:a,withReducers:s,withNameAndValue:i}=e;const r=(0,m.useStyles2)(ce),o=function(e,t,n){const a=[],s=se(e,null!=t?t:[],n);for(const t of e.fields){var i,r;const n=(0,u.getFieldDisplayName)(t,e),o=s.index[n],l=de(o.handler,o.automatic);a.push({fieldName:n,configOption:o.automatic?null:l,placeholder:o.automatic?null==l?void 0:l.label:"Choose",handlerKey:null!==(i=null===(r=o.handler)||void 0===r?void 0:r.key)&&void 0!==i?i:null,reducerId:o.reducerId})}for(const e of t)if(!a.find((t=>t.fieldName===e.fieldName))){var o;const t=ae(e.handlerKey);a.push({fieldName:e.fieldName,handlerKey:e.handlerKey,configOption:de(t,!1),missingInFrame:!0,reducerId:null!==(o=e.reducerId)&&void 0!==o?o:u.ReducerID.lastNotNull})}return Object.values(a)}(t,n,i),l=ee.map((e=>de(e,!1)));return(0,j.jsxs)("table",{className:r.table,children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[ie||(ie=(0,j.jsx)("th",{children:"Field"})),re||(re=(0,j.jsx)("th",{children:"Use as"})),s&&(oe||(oe=(0,j.jsx)("th",{children:"Select"})))]})}),(0,j.jsx)("tbody",{children:o.map((e=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:r.labelCell,children:e.fieldName}),(0,j.jsx)("td",{className:r.selectCell,"data-testid":`${e.fieldName}-config-key`,children:(0,j.jsx)(m.Select,{options:l,value:e.configOption,placeholder:e.placeholder,isClearable:!0,onChange:t=>((e,t)=>{const s=n.findIndex((t=>t.fieldName===e.fieldName));if(t)if(-1!==s){const e=[...n];e.splice(s,1,Object.assign({},n[s],{handlerKey:t.value})),a(e)}else a([...n,{fieldName:e.fieldName,handlerKey:t.value}]);else a(-1!==s?n.filter(((e,t)=>t!==s)):[...n,{fieldName:e.fieldName,handlerKey:"__ignore"}])})(e,t)})}),s&&(0,j.jsx)("td",{"data-testid":`${e.fieldName}-reducer`,className:r.selectCell,children:(0,j.jsx)(m.StatsPicker,{stats:[e.reducerId],defaultStat:e.reducerId,onChange:t=>((e,t)=>{const s=n.findIndex((t=>t.fieldName===e.fieldName));if(-1!==s){const e=[...n];e.splice(s,1,Object.assign({},n[s],{reducerId:t})),a(e)}else a([...n,{fieldName:e.fieldName,handlerKey:e.handlerKey,reducerId:t}])})(e,t[0])})})]},e.fieldName)))})]})}function de(e,t){var n;if(!e)return null;let a=null!==(n=e.name)&&void 0!==n?n:(0,o.capitalize)(e.key);return t&&(a=`${a} (auto)`),{label:a,value:e.key}}const ce=e=>({table:b.css`
    margin-top: ${e.spacing(1)};

    td,
    th {
      border-right: 4px solid ${e.colors.background.primary};
      border-bottom: 4px solid ${e.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${e.typography.bodySmall.fontSize};
      line-height: ${e.spacing(4)};
      padding: ${e.spacing(0,1)};
    }
  `,labelCell:b.css`
    font-size: ${e.typography.bodySmall.fontSize};
    background: ${e.colors.background.secondary};
    padding: ${e.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:b.css`
    padding: 0;
    min-width: 161px;
  `});var ue=n(35778);const he={id:u.DataTransformerID.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:e=>t=>t.pipe((0,ue.U)((t=>function(e,t){var n;let a=null;for(const n of t)if(n.refId===e.configRefId){a=n;break}if(!a)return t;const s={fields:[],length:1},i=se(a,null!==(n=e.mappings)&&void 0!==n?n:[],!1);for(const e of a.fields){const t=Object.assign({},e),n=(0,u.getFieldDisplayName)(e,a),r=i.index[n],o=(0,u.reduceField)({field:e,reducers:[r.reducerId]});t.values=new u.ArrayVector([o[r.reducerId]]),s.fields.push(t)}const r=[],o=(0,u.getFieldMatcher)(e.applyTo||{id:u.FieldMatcherID.numeric});for(const e of t){if(e===a&&t.length>1)continue;const n={fields:[],length:e.length};for(const a of e.fields)if(o(a,e,t)){const e=Y(s,0,i);n.fields.push(Object.assign({},a,{config:Object.assign({},a.config,e)}))}else n.fields.push(a);r.push(n)}return r}(e,t))))};const pe={id:he.id,editor:function(e){var t;let{input:n,onChange:a,options:s}=e;const i=(0,m.useStyles2)(ge),r=n.map((e=>e.refId)).filter((e=>null!=e)).map((e=>({label:e,value:e}))),o=s.configRefId||"config",l=null!==(t=s.applyTo)&&void 0!==t?t:{id:u.FieldMatcherID.byType,options:"number"},d=m.fieldMatchersUI.get(l.id),c=n.find((e=>e.refId===o)),h=m.fieldMatchersUI.list().filter((e=>!e.excludeFromPicker)).map((e=>({label:e.name,value:e.id,description:e.description})));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Config query",labelWidth:20,children:(0,j.jsx)(m.Select,{onChange:e=>{a(Object.assign({},s,{configRefId:e.value||"config"}))},options:r,value:o,width:30})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Apply to",labelWidth:20,children:(0,j.jsx)(m.Select,{onChange:e=>{a(Object.assign({},s,{applyTo:{id:e.value}}))},options:h,value:l.id,width:30})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Apply to options",labelWidth:20,className:i.matcherOptions,children:(0,j.jsx)(d.component,{matcher:d.matcher,data:n,options:l.options,onChange:e=>{a(Object.assign({},s,{applyTo:{id:l.id,options:e}}))}})})}),(0,j.jsx)(m.InlineFieldRow,{children:c&&(0,j.jsx)(le,{frame:c,mappings:s.mappings,onChange:e=>a(Object.assign({},s,{mappings:e})),withReducers:!0})})]})},transformation:he,name:he.name,description:he.description,state:u.PluginState.beta,help:"\n### Use cases\n\nThis transformation allows you select one query and from it extract standard options such as\n**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.\nThis enables dynamic query driven visualization configuration.\n\n### Options\n\n- **Config query**: Selet the query that returns the data you want to use as configuration.\n- **Apply to**: Select what fields or series to apply the configuration to.\n- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.\n\n### Field mapping table\n\nBelow the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.\n\n## Example\n\nInput[0] (From query: A, name: ServerA)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 10    |\n| 1626178119129 | 30    |\n\nInput[1] (From query: B)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 100   |\n| 1626178119129 | 100   |\n\nOutput (Same as Input[0] but now with config on the Value field)\n\n| Time          | Value (config: Max=100) |\n| ------------- | ----------------------- |\n| 1626178119127 | 10                      |\n| 1626178119129 | 30                      |\n\nEach row in the source data becomes a separate field. Each field now also has a maximum\nconfiguration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.\nin the panel editor options pane.\n\n## Value mappings\n\nYou can also transform a query result into value mappings. This is is a bit different because every\nrow in the configuration query result is used to define a single value mapping row. See the following example.\n\nConfig query result:\n\n| Value | Text   | Color |\n| ----- | ------ | ----- |\n| L     | Low    | blue  |\n| M     | Medium | green |\n| H     | High   | red   |\n\nIn the field mapping specify:\n\n| Field | Use as                  | Select     |\n| ----- | ----------------------- | ---------- |\n| Value | Value mappings / Value  | All values |\n| Text  | Value mappings / Text   | All values |\n| Color | Value mappings / Ciolor | All values |\n\nGrafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.\n"},ge=e=>({matcherOptions:b.css`
    min-width: 404px;
  `});var me,fe,ve,be,xe,ye=n(71808),we=n(20794);function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Se=[{value:we.ie.BinaryOperation,label:"Binary operation"},{value:we.ie.ReduceRow,label:"Reduce row"}],Ce=new Set([u.FieldType.time,u.FieldType.number,u.FieldType.string]);class ke extends d.PureComponent{constructor(e){var t,n;super(e),je(this,"onToggleReplaceFields",(()=>{const{options:e}=this.props;this.props.onChange(Object.assign({},e,{replaceFields:!e.replaceFields}))})),je(this,"onModeChanged",(e=>{var t;const{options:n,onChange:a}=this.props,s=null!==(t=e.value)&&void 0!==t?t:we.ie.BinaryOperation;a(Object.assign({},n,{mode:s}))})),je(this,"onAliasChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{alias:e.target.value}))})),je(this,"updateReduceOptions",(e=>{const{options:t,onChange:n}=this.props;n(Object.assign({},t,{mode:we.ie.ReduceRow,reduce:e}))})),je(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),je(this,"onChange",(e=>{this.setState({selected:e});const{reduce:t}=this.props.options;this.updateReduceOptions(Object.assign({},t,{include:e}))})),je(this,"onStatsChange",(e=>{const t=e.length?e[0]:u.ReducerID.sum,{reduce:n}=this.props.options;this.updateReduceOptions(Object.assign({},n,{reducer:t}))})),je(this,"updateBinaryOptions",(e=>{const{options:t,onChange:n}=this.props;n(Object.assign({},t,{mode:we.ie.BinaryOperation,binary:e}))})),je(this,"onBinaryLeftChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{left:e.value}))})),je(this,"onBinaryRightChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{right:e.value}))})),je(this,"onBinaryOperationChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{operator:e.value}))})),this.state={include:(null===(t=e.options)||void 0===t||null===(n=t.reduce)||void 0===n?void 0:n.include)||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e;const{options:t}=this.props,n=(null==t||null===(e=t.reduce)||void 0===e?void 0:e.include)||[],a=(0,ye.of)(this.props.input).pipe(u.standardTransformers.ensureColumnsTransformer.operator(null),this.extractAllNames(),this.extractNamesAndSelected(n)).subscribe((e=>{let{selected:t,names:n}=e;this.setState({names:n,selected:t},(()=>a.unsubscribe()))}))}extractAllNames(){return e=>e.pipe((0,ue.U)((e=>{const t=[],n={};for(const a of e)for(const s of a.fields){if(!Ce.has(s.type))continue;const i=(0,u.getFieldDisplayName)(s,a,e);n[i]||(n[i]=!0,t.push(i))}return t})))}extractNamesAndSelected(e){return t=>t.pipe((0,ue.U)((t=>{if(!e.length)return{names:t,selected:[]};const n=[],a=[];for(const s of t)e.includes(s)&&a.push(s),n.push(s);return{names:n,selected:a}})))}renderReduceRow(e){const{names:t,selected:n}=this.state;return e=(0,o.defaults)(e,{reducer:u.ReducerID.sum}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[me||(me=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,j.jsx)(m.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:t.map(((e,t)=>(0,j.jsx)(m.FilterPill,{onClick:()=>{this.onFieldToggle(e)},label:e,selected:n.indexOf(e)>-1},`${e}/${t}`)))})]})}),(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form",children:[fe||(fe=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Calculation"})),(0,j.jsx)(m.StatsPicker,{allowMultiple:!1,className:"width-18",stats:[e.reducer],onChange:this.onStatsChange,defaultStat:u.ReducerID.sum})]})})]})}renderBinaryOperation(e){var t,n,a,s,i,r,l,d,c;let h=!(null!==(t=e=(0,o.defaults)(e,{reducer:u.ReducerID.sum}))&&void 0!==t&&t.left),p=!(null!==(n=e)&&void 0!==n&&n.right);const g=this.state.names.map((t=>{var n,a;return t===(null===(n=e)||void 0===n?void 0:n.left)&&(h=!0),t===(null===(a=e)||void 0===a?void 0:a.right)&&(p=!0),{label:t,value:t}})),f=h?g:[...g,{label:null===(a=e)||void 0===a?void 0:a.left,value:null===(s=e)||void 0===s?void 0:s.left}],v=p?g:[...g,{label:null===(i=e)||void 0===i?void 0:i.right,value:null===(r=e)||void 0===r?void 0:r.right}],b=u.binaryOperators.list().map((e=>({label:e.id,value:e.id})));return(0,j.jsxs)("div",{className:"gf-form-inline",children:[ve||(ve=(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Operation"})})),(0,j.jsxs)("div",{className:"gf-form",children:[(0,j.jsx)(m.Select,{allowCustomValue:!0,placeholder:"Field or number",options:f,className:"min-width-18 gf-form-spacing",value:null===(l=e)||void 0===l?void 0:l.left,onChange:this.onBinaryLeftChanged}),(0,j.jsx)(m.Select,{className:"width-8 gf-form-spacing",options:b,value:null!==(d=e.operator)&&void 0!==d?d:b[0].value,onChange:this.onBinaryOperationChanged}),(0,j.jsx)(m.Select,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:v,value:null===(c=e)||void 0===c?void 0:c.right,onChange:this.onBinaryRightChanged})]})]})}render(){var e,t;const{options:n}=this.props,a=null!==(e=n.mode)&&void 0!==e?e:we.ie.BinaryOperation;return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form",children:[be||(be=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Mode"})),(0,j.jsx)(m.Select,{className:"width-18",options:Se,value:Se.find((e=>e.value===a)),onChange:this.onModeChanged})]})}),a===we.ie.BinaryOperation&&this.renderBinaryOperation(n.binary),a===we.ie.ReduceRow&&this.renderReduceRow(n.reduce),(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form",children:[xe||(xe=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Alias"})),(0,j.jsx)(m.Input,{className:"width-18",value:null!==(t=n.alias)&&void 0!==t?t:"",placeholder:(0,we.h)(n),onChange:this.onAliasChanged})]})}),(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)(m.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!n.replaceFields,onChange:this.onToggleReplaceFields})})})]})}}const Te={id:u.DataTransformerID.calculateField,editor:ke,transformation:u.standardTransformers.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var Ie,Oe,Ne=n(69269);function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const De=[{value:Ne.HO.FieldName,label:"Copy frame name to field name"},{value:Ne.HO.Label,label:"Add a label with the frame name"},{value:Ne.HO.Drop,label:"Ignore the frame name"}];class Pe extends d.PureComponent{constructor(e){super(e),Fe(this,"onModeChanged",(e=>{var t;const{options:n,onChange:a}=this.props,s=null!==(t=e.value)&&void 0!==t?t:Ne.HO.FieldName;a(Object.assign({},n,{frameNameMode:s}))})),Fe(this,"onLabelChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{frameNameLabel:e.target.value}))}))}render(){var e,t;const{options:n}=this.props,a=null!==(e=n.frameNameMode)&&void 0!==e?e:Ne.HO.FieldName;return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form",children:[Ie||(Ie=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Name"})),(0,j.jsx)(m.Select,{className:"width-18",options:De,value:De.find((e=>e.value===a)),onChange:this.onModeChanged})]})}),a===Ne.HO.Label&&(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form",children:[Oe||(Oe=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Label"})),(0,j.jsx)(m.Input,{className:"width-18",value:null!==(t=n.frameNameLabel)&&void 0!==t?t:"",placeholder:"frame",onChange:this.onLabelChanged})]})})]})}}const Ae={id:u.DataTransformerID.concatenate,editor:Pe,transformation:u.standardTransformers.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Me=n(25296);const Re={settings:{width:24}},$e={id:u.DataTransformerID.convertFieldType,editor:e=>{let{input:t,options:n,onChange:a}=e;const s=[{value:u.FieldType.number,label:"Numeric"},{value:u.FieldType.string,label:"String"},{value:u.FieldType.time,label:"Time"},{value:u.FieldType.boolean,label:"Boolean"},{value:u.FieldType.other,label:"JSON"}],i=(0,d.useCallback)((e=>t=>{const s=n.conversions;s[e]=Object.assign({},s[e],{targetField:null!=t?t:""}),a(Object.assign({},n,{conversions:s}))}),[a,n]),r=(0,d.useCallback)((e=>t=>{const s=n.conversions;s[e]=Object.assign({},s[e],{destinationType:t.value}),a(Object.assign({},n,{conversions:s}))}),[a,n]),o=(0,d.useCallback)((e=>t=>{const s=n.conversions;s[e]=Object.assign({},s[e],{dateFormat:t.currentTarget.value}),a(Object.assign({},n,{conversions:s}))}),[a,n]),l=(0,d.useCallback)((()=>{a(Object.assign({},n,{conversions:[...n.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]}))}),[a,n]),c=(0,d.useCallback)((e=>{const t=n.conversions;t.splice(e,1),a(Object.assign({},n,{conversions:t}))}),[a,n]);return(0,j.jsxs)(j.Fragment,{children:[n.conversions.map(((e,n)=>{var a;return(0,j.jsxs)(m.InlineFieldRow,{children:[(0,j.jsx)(m.InlineField,{label:"Field",children:(0,j.jsx)(Me.b,{context:{data:t},value:null!==(a=e.targetField)&&void 0!==a?a:"",onChange:i(n),item:Re})}),(0,j.jsx)(m.InlineField,{label:"as",children:(0,j.jsx)(m.Select,{options:s,value:e.destinationType,placeholder:"Type",onChange:r(n),width:18})}),e.destinationType===u.FieldType.time&&(0,j.jsx)(m.InlineField,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly.",children:(0,j.jsx)(m.Input,{value:e.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:o(n),width:24})}),(0,j.jsx)(m.Button,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>c(n),"aria-label":"Remove convert field type transformer"})]},`${e.targetField}-${n}`)})),(0,j.jsx)(m.Button,{size:"sm",icon:"plus",onClick:l,variant:"secondary","aria-label":"Add a convert field type transformer",children:"Convert field type"})]})},transformation:u.standardTransformers.convertFieldTypeTransformer,name:u.standardTransformers.convertFieldTypeTransformer.name,description:u.standardTransformers.convertFieldTypeTransformer.description};var Le;function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ve extends d.PureComponent{constructor(e){var t,n;super(e),Ee(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),Ee(this,"onChange",(e=>{const{regex:t,isRegexValid:n}=this.state,a=Object.assign({},this.props.options,{include:{names:e}});var s;t&&n&&(a.include=null!==(s=a.include)&&void 0!==s?s:{},a.include.pattern=t);this.setState({selected:e},(()=>{this.props.onChange(a)}))})),Ee(this,"onInputBlur",(e=>{const{selected:t,regex:n}=this.state;let a=!0;try{n&&(0,u.stringToJsRegex)(n)}catch(e){a=!1}a?this.props.onChange(Object.assign({},this.props.options,{include:{pattern:n}})):this.props.onChange(Object.assign({},this.props.options,{include:{names:t}})),this.setState({isRegexValid:a})})),this.state={include:(null===(t=e.options.include)||void 0===t?void 0:t.names)||[],regex:null===(n=e.options.include)||void 0===n?void 0:n.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e,t,n;const{input:a,options:s}=this.props,i=Array.from(null!==(e=null===(t=s.include)||void 0===t?void 0:t.names)&&void 0!==e?e:[]),r=[],o={};for(const e of a)for(const t of e.fields){const n=(0,u.getFieldDisplayName)(t,e,a);let s=o[n];s||(s=o[n]={name:n,count:0},r.push(s)),s.count++}if(null!==(n=s.include)&&void 0!==n&&n.pattern)try{const e=(0,u.stringToJsRegex)(s.include.pattern);for(const t of r)e.test(t.name)&&i.push(t.name)}catch(e){console.error(e)}if(i.length){var l;const e=r.filter((e=>i.includes(e.name)));this.setState({options:r,selected:e.map((e=>e.name)),regex:null===(l=s.include)||void 0===l?void 0:l.pattern})}else{var d;this.setState({options:r,selected:r.map((e=>e.name)),regex:null===(d=s.include)||void 0===d?void 0:d.pattern})}}render(){const{options:e,selected:t,isRegexValid:n}=this.state;return(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[Le||(Le=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Identifier"})),(0,j.jsxs)(m.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:[(0,j.jsx)(m.Field,{invalid:!n,error:n?void 0:"Invalid pattern",className:b.css`
                margin-bottom: 0;
              `,children:(0,j.jsx)(m.Input,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:e=>this.setState({regex:e.currentTarget.value}),onBlur:this.onInputBlur,width:25})}),e.map(((e,n)=>{const a=`${e.name}${e.count>1?" ("+e.count+")":""}`,s=t.indexOf(e.name)>-1;return(0,j.jsx)(m.FilterPill,{onClick:()=>{this.onFieldToggle(e.name)},label:a,selected:s},`${e.name}/${n}`)}))]})]})})}}const Be={id:u.DataTransformerID.filterFieldsByName,editor:Ve,transformation:u.standardTransformers.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var ze;function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ue extends d.PureComponent{constructor(e){super(e),_e(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),_e(this,"onChange",(e=>{this.setState({selected:e}),this.props.onChange(Object.assign({},this.props.options,{include:e.join("|")}))})),this.state={include:e.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){const{input:e,options:t}=this.props,n=t.include?t.include.split("|"):[],a=[],s={};for(const t of e)if(t.refId){let e=s[t.refId];e||(e=s[t.refId]={refId:t.refId,count:0},a.push(e)),e.count++}if(n.length){const e=[],t=[];for(const s of a)n.includes(s.refId)&&t.push(s),e.push(s);this.setState({options:e,selected:t.map((e=>e.refId))})}else this.setState({options:a,selected:[]})}render(){const{options:e,selected:t}=this.state;return(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[ze||(ze=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Series refId"})),(0,j.jsx)(m.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:e.map(((e,n)=>{const a=`${e.refId}${e.count>1?" ("+e.count+")":""}`,s=t.indexOf(e.refId)>-1;return(0,j.jsx)(m.FilterPill,{onClick:()=>{this.onFieldToggle(e.refId)},label:a,selected:s},`${e.refId}/${n}`)}))})]})})}}const He={id:u.DataTransformerID.filterByRefId,editor:Ue,transformation:u.standardTransformers.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var We=n(24671);function qe(e){return(0,d.useMemo)((()=>Array.isArray(e)?Object.keys(e.reduce(((t,n)=>n&&Array.isArray(n.fields)?n.fields.reduce(((t,a)=>(t[(0,u.getFieldDisplayName)(a,n,e)]=!0,t)),t):t),{})):[]),[e])}function Ze(e){const t=new Set;for(const n of e)for(const e of n.fields)if(e.labels)for(const n of Object.keys(e.labels))t.add(n);return t}const Ge=[{label:"Group by",value:We.x.groupBy},{label:"Calculate",value:We.x.aggregate}],Ke=e=>{let{fieldName:t,config:n,onConfigChange:a}=e;const s=Qe(),i=(0,d.useCallback)((e=>{var t,s;a({aggregations:null!==(t=null==n?void 0:n.aggregations)&&void 0!==t?t:[],operation:null!==(s=null==e?void 0:e.value)&&void 0!==s?s:null})}),[n,a]);return(0,j.jsxs)("div",{className:(0,b.cx)("gf-form-inline",s.row),children:[(0,j.jsx)("div",{className:(0,b.cx)("gf-form",s.fieldName),children:(0,j.jsx)("div",{className:(0,b.cx)("gf-form-label",s.rowSpacing),children:t})}),(0,j.jsx)("div",{className:(0,b.cx)("gf-form",s.cell),children:(0,j.jsx)("div",{className:(0,b.cx)("gf-form-spacing",s.rowSpacing),children:(0,j.jsx)(m.Select,{className:"width-12",options:Ge,value:null==n?void 0:n.operation,placeholder:"Ignored",onChange:i,isClearable:!0})})}),(null==n?void 0:n.operation)===We.x.aggregate&&(0,j.jsx)("div",{className:(0,b.cx)("gf-form","gf-form--grow",s.calculations),children:(0,j.jsx)(m.StatsPicker,{className:(0,b.cx)("flex-grow-1",s.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:n.aggregations,onChange:e=>{a(Object.assign({},n,{aggregations:e}))}})})]})},Qe=(0,m.stylesFactory)((()=>{const e=b.css`
    display: table-cell;
  `;return{row:b.css`
      display: table-row;
    `,cell:e,rowSpacing:b.css`
      margin-bottom: 4px;
    `,fieldName:b.css`
      ${e}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:b.css`
      ${e}
      width: 99%;
    `}})),Je={id:u.DataTransformerID.groupBy,editor:e=>{let{input:t,options:n,onChange:a}=e;const s=qe(t),i=(0,d.useCallback)((e=>t=>{a(Object.assign({},n,{fields:Object.assign({},n.fields,{[e]:t})}))}),[a]);return(0,j.jsx)("div",{children:s.map((e=>(0,j.jsx)(Ke,{onConfigChange:i(e),fieldName:e,config:n.fields[e]},e)))})},transformation:u.standardTransformers.groupByTransformer,name:u.standardTransformers.groupByTransformer.name,description:u.standardTransformers.groupByTransformer.description},Ye={id:u.DataTransformerID.groupingToMatrix,editor:e=>{let{input:t,options:n,onChange:a}=e;const s=qe(t).map((e=>({label:e,value:e}))),i=(0,d.useCallback)((e=>{a(Object.assign({},n,{columnField:e.value}))}),[a,n]),r=(0,d.useCallback)((e=>{a(Object.assign({},n,{rowField:e.value}))}),[a,n]),o=(0,d.useCallback)((e=>{a(Object.assign({},n,{valueField:e.value}))}),[a,n]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(m.InlineFieldRow,{children:[(0,j.jsx)(m.InlineField,{label:"Column",labelWidth:8,children:(0,j.jsx)(m.Select,{options:s,value:n.columnField,onChange:i,isClearable:!0})}),(0,j.jsx)(m.InlineField,{label:"Row",labelWidth:8,children:(0,j.jsx)(m.Select,{options:s,value:n.rowField,onChange:r,isClearable:!0})}),(0,j.jsx)(m.InlineField,{label:"Cell Value",labelWidth:10,children:(0,j.jsx)(m.Select,{options:s,value:n.valueField,onChange:o,isClearable:!0})})]})})},transformation:u.standardTransformers.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var Xe=n(93478),et=n(98356);const tt={id:u.DataTransformerID.histogram,editor:e=>{var t;let{input:n,options:a,onChange:s}=e;const i=(0,d.useCallback)((e=>{s(Object.assign({},a,{bucketSize:e}))}),[s,a]),r=(0,d.useCallback)((e=>{s(Object.assign({},a,{bucketOffset:e}))}),[s,a]),o=(0,d.useCallback)((()=>{s(Object.assign({},a,{combine:!a.combine}))}),[s,a]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{labelWidth:18,label:Xe.py.bucketSize.name,tooltip:Xe.py.bucketSize.description,children:(0,j.jsx)(et.Y,{value:a.bucketSize,placeholder:"auto",onChange:i,min:0})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{labelWidth:18,label:Xe.py.bucketOffset.name,tooltip:Xe.py.bucketOffset.description,children:(0,j.jsx)(et.Y,{value:a.bucketOffset,placeholder:"none",onChange:r,min:0})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{labelWidth:18,label:Xe.py.combine.name,tooltip:Xe.py.combine.description,children:(0,j.jsx)(m.InlineSwitch,{value:null!==(t=a.combine)&&void 0!==t&&t,onChange:o})})})]})},transformation:u.standardTransformers.histogramTransformer,name:u.standardTransformers.histogramTransformer.name,description:u.standardTransformers.histogramTransformer.description};var nt=n(37994),at=n(8072);const st=["keepLabels"];const it=[{value:nt.k.Columns,label:"Columns"},{value:nt.k.Rows,label:"Rows"}],rt={id:u.DataTransformerID.labelsToFields,editor:e=>{var t;let{input:n,options:a,onChange:s}=e;const{labelNames:i,selected:r}=(0,d.useMemo)((()=>{var e;let t=[],s={};for(const e of n)for(const n of e.fields)if(n.labels)for(const e of Object.keys(n.labels))s[e]||(t.push({value:e,label:e}),s[e]=!0);return{labelNames:t,selected:new Set(null!==(e=a.keepLabels)&&void 0!==e&&e.length?a.keepLabels:Object.keys(s))}}),[a.keepLabels,n]),o=e=>{if(r.has(e)?r.delete(e):r.add(e),r.size!==i.length&&r.size)s(Object.assign({},a,{keepLabels:[...r]}));else{const e=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(a,st);s(e)}};return(0,j.jsxs)("div",{children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Mode",labelWidth:20,children:(0,j.jsx)(m.RadioButtonGroup,{options:it,value:null!==(t=a.mode)&&void 0!==t?t:nt.k.Columns,onChange:e=>s(Object.assign({},a,{mode:e}))})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Labels",labelWidth:20,children:(0,j.jsx)(at.Stack,{gap:1,wrap:!0,children:i.map(((e,t)=>{const n=e.label;return(0,j.jsx)(m.FilterPill,{onClick:()=>o(n),label:n,selected:r.has(n)},`${n}/${t}`)}))})})}),a.mode!==nt.k.Rows&&(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name",children:(0,j.jsx)(m.Select,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:i,value:null==a?void 0:a.valueLabel,onChange:e=>{s(Object.assign({},a,{valueLabel:null==e?void 0:e.value}))},className:"min-width-16"})})})]})},transformation:u.standardTransformers.labelsToFieldsTransformer,name:"Labels to fields",description:"Groups series by time and return labels or tags as fields.\n                Useful for showing time series with labels in a table where each label key becomes a separate column"},ot={id:u.DataTransformerID.limit,editor:e=>{let{options:t,onChange:n}=e;const a=(0,d.useCallback)((e=>{n(Object.assign({},t,{limitField:Number(e.currentTarget.value)}))}),[n,t]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Limit",labelWidth:8,children:(0,j.jsx)(m.Input,{placeholder:"Limit count",pattern:"[0-9]*",value:t.limitField,onChange:a,width:25})})})})},transformation:u.standardTransformers.limitTransformer,name:"Limit",description:"Limit the number of items displayed."};var lt;const dt={id:u.DataTransformerID.merge,editor:e=>{let{input:t,options:n,onChange:a}=e;return t.length<=1?lt||(lt=(0,j.jsx)(m.FieldValidationMessage,{children:"Merge has no effect when applied on a single frame."})):null},transformation:u.standardTransformers.mergeTransformer,name:"Merge",description:"Merge many series/tables and return a single table where mergeable values will be combined into the same row.\n                Useful for showing multiple series, tables or a combination of both visualized in a table."};var ct,ut=n(48435),ht=n(64073);const pt=e=>{const{options:t,input:n,onChange:a}=e,{indexByName:s,excludeByName:i,renameByName:r}=t,o=qe(n),l=(0,d.useMemo)((()=>vt(o,s)),[o,s]),c=(0,d.useCallback)(((e,n)=>{a(Object.assign({},t,{excludeByName:Object.assign({},i,{[e]:n})}))}),[a,t,i]),u=(0,d.useCallback)((e=>{if(!e||!e.destination)return;const n=e.source.index,s=e.destination.index;n!==s&&a(Object.assign({},t,{indexByName:ft(o,n,s)}))}),[a,t,o]),h=(0,d.useCallback)(((e,n)=>{a(Object.assign({},t,{renameByName:Object.assign({},t.renameByName,{[e]:n})}))}),[a,t]);return n.length>1?ct||(ct=(0,j.jsx)(m.FieldValidationMessage,{children:"Organize fields only works with a single frame. Consider applying a join transformation first."})):(0,j.jsx)(ut.Z5,{onDragEnd:u,children:(0,j.jsx)(ut.bK,{droppableId:"sortable-fields-transformer",direction:"vertical",children:e=>(0,j.jsxs)("div",Object.assign({ref:e.innerRef},e.droppableProps,{children:[l.map(((e,t)=>(0,j.jsx)(gt,{fieldName:e,renamedFieldName:r[e],index:t,onToggleVisibility:c,onRenameField:h,visible:!i[e]},e))),e.placeholder]}))})})};pt.displayName="OrganizeFieldsTransformerEditor";const gt=e=>{let{fieldName:t,renamedFieldName:n,index:a,visible:s,onToggleVisibility:i,onRenameField:r}=e;const o=(0,m.useTheme)(),l=mt(o);return(0,j.jsx)(ut._l,{draggableId:t,index:a,children:e=>(0,j.jsx)("div",Object.assign({className:"gf-form-inline",ref:e.innerRef},e.draggableProps,{children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,j.jsxs)("div",{className:"gf-form-label gf-form-label--justify-left width-30",children:[(0,j.jsx)(m.Icon,Object.assign({name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:l.draggable},e.dragHandleProps)),(0,j.jsx)(m.IconButton,{className:l.toggle,size:"md",name:s?"eye":"eye-slash",onClick:()=>i(t,s)}),(0,j.jsx)("span",{className:l.name,title:t,children:t})]}),(0,j.jsx)(m.Input,{className:"flex-grow-1",defaultValue:n||"",placeholder:`Rename ${t}`,onBlur:e=>r(t,e.currentTarget.value)})]})}))})};gt.displayName="DraggableFieldName";const mt=(0,m.stylesFactory)((e=>({toggle:b.css`
    margin: 0 8px;
    color: ${e.colors.textWeak};
  `,draggable:b.css`
    opacity: 0.4;
    &:hover {
      color: ${e.colors.textStrong};
    }
  `,name:b.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${e.typography.size.sm};
    font-weight: ${e.typography.weight.semibold};
  `}))),ft=(e,t,n)=>{const a=Array.from(e),[s]=a.splice(t,1);return a.splice(n,0,s),a.reduce(((e,t,n)=>(e[t]=n,e)),{})},vt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||0===Object.keys(t).length)return e;const n=(0,ht.$)(t);return e.sort(n)},bt={id:u.DataTransformerID.organize,editor:pt,transformation:u.standardTransformers.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var xt=n(45461),yt=n(16695);const wt={id:u.DataTransformerID.reduce,editor:e=>{let{options:t,onChange:n}=e;const a=[{label:"Series to rows",value:xt.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:xt.AL.ReduceFields,description:"Collapse each field into a single value"}],s=(0,d.useCallback)((e=>{const a=e.value;n(Object.assign({},t,{mode:a,includeTimeField:a===xt.AL.ReduceFields&&!!t.includeTimeField}))}),[n,t]),i=(0,d.useCallback)((()=>{n(Object.assign({},t,{includeTimeField:!t.includeTimeField}))}),[n,t]),r=(0,d.useCallback)((()=>{n(Object.assign({},t,{labelsToFields:!t.labelsToFields}))}),[n,t]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,j.jsx)("div",{className:"gf-form-label width-8","aria-label":yt.wl.components.Transforms.Reduce.modeLabel,children:"Mode"}),(0,j.jsx)(m.Select,{options:a,value:a.find((e=>e.value===t.mode))||a[0],onChange:s,className:"flex-grow-1"})]})}),(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,j.jsx)("div",{className:"gf-form-label width-8","aria-label":yt.wl.components.Transforms.Reduce.calculationsLabel,children:"Calculations"}),(0,j.jsx)(m.StatsPicker,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:t.reducers||[],onChange:e=>{n(Object.assign({},t,{reducers:e}))}})]})}),t.mode===xt.AL.ReduceFields&&(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)(m.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!t.includeTimeField,onChange:i})})}),t.mode!==xt.AL.ReduceFields&&(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)(m.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!t.labelsToFields,onChange:r})})})]})},transformation:u.standardTransformers.reduceTransformer,name:u.standardTransformers.reduceTransformer.name,description:u.standardTransformers.reduceTransformer.description};var jt,St;function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kt extends d.PureComponent{constructor(e){super(e),Ct(this,"handleRegexChange",(e=>{const t=e.currentTarget.value;let n=!0;if(t)try{t&&(0,u.stringToJsRegex)(t)}catch(e){n=!1}this.setState((e=>Object.assign({},e,{regex:t,isRegexValid:n})))})),Ct(this,"handleRenameChange",(e=>{const t=e.currentTarget.value;this.setState((e=>Object.assign({},e,{renamePattern:t})))})),Ct(this,"handleRegexBlur",(e=>{const t=e.currentTarget.value;let n=!0;try{t&&(0,u.stringToJsRegex)(t)}catch(e){n=!1}this.setState({isRegexValid:n},(()=>{n&&this.props.onChange(Object.assign({},this.props.options,{regex:t}))}))})),Ct(this,"handleRenameBlur",(e=>{const t=e.currentTarget.value;this.setState({renamePattern:t},(()=>this.props.onChange(Object.assign({},this.props.options,{renamePattern:t}))))})),this.state={regex:e.options.regex,renamePattern:e.options.renamePattern,isRegexValid:!0}}render(){const{regex:e,renamePattern:t,isRegexValid:n}=this.state;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[jt||(jt=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Match"})),(0,j.jsx)(m.Field,{invalid:!n,error:n?void 0:"Invalid pattern",className:b.css`
                margin-bottom: 0;
              `,children:(0,j.jsx)(m.Input,{placeholder:"Regular expression pattern",value:e||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})})]})}),(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[St||(St=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Replace"})),(0,j.jsx)(m.Field,{className:b.css`
                margin-bottom: 0;
              `,children:(0,j.jsx)(m.Input,{placeholder:"Replacement pattern",value:t||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})})]})})]})}}const Tt={id:u.DataTransformerID.renameByRegex,editor:kt,transformation:u.standardTransformers.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."};var It;const Ot={id:u.DataTransformerID.seriesToColumns,editor:e=>{let{input:t,options:n,onChange:a}=e;const s=qe(t).map((e=>({label:e,value:e}))),i=(0,d.useCallback)((e=>{a(Object.assign({},n,{byField:e.value}))}),[a,n]);return(0,j.jsx)("div",{className:"gf-form-inline",children:(0,j.jsxs)("div",{className:"gf-form gf-form--grow",children:[It||(It=(0,j.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,j.jsx)(m.Select,{options:s,value:n.byField,onChange:i,isClearable:!0})]})})},transformation:u.standardTransformers.seriesToColumnsTransformer,name:"Outer join",description:"Joins many time series/tables by a field. This can be used to outer join multiple time series on the _time_ field to show many time series in one table."},Nt={id:u.DataTransformerID.seriesToRows,editor:e=>{let{input:t,options:n,onChange:a}=e;return null},transformation:u.standardTransformers.seriesToRowsTransformer,name:"Series to rows",description:"Merge many series and return a single series with time, metric and value as columns.\n                Useful for showing multiple time series visualized in a table."},Ft={id:u.DataTransformerID.sortBy,editor:e=>{var t;let{input:n,options:a,onChange:s}=e;const i=qe(n).map((e=>({label:e,value:e}))),r=(0,d.useCallback)(((e,t)=>{s(Object.assign({},a,{sort:[t]}))}),[s,a]),o=null!==(t=a.sort)&&void 0!==t&&t.length?a.sort:[{}];return(0,j.jsx)("div",{children:o.map(((e,t)=>(0,j.jsxs)(m.InlineFieldRow,{children:[(0,j.jsx)(m.InlineField,{label:"Field",labelWidth:10,grow:!0,children:(0,j.jsx)(m.Select,{options:i,value:e.field,placeholder:"Select field",onChange:n=>{r(t,Object.assign({},e,{field:n.value}))}})}),(0,j.jsx)(m.InlineField,{label:"Reverse",children:(0,j.jsx)(m.InlineSwitch,{value:!!e.desc,onChange:()=>{r(t,Object.assign({},e,{desc:!e.desc}))}})})]},`${e.field}/${t}`)))})},transformation:u.standardTransformers.sortByTransformer,name:u.standardTransformers.sortByTransformer.name,description:u.standardTransformers.sortByTransformer.description};var Dt=n(48567);let Pt;!function(e){e.JSON="json",e.KeyValues="kvp",e.Auto="auto"}(Pt||(Pt={}));const At=[{id:Pt.JSON,name:"JSON",description:"Parse JSON string",parse:e=>JSON.parse(e)},{id:Pt.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:function(e){const t=[];let n="",a="";const s={};for(let i=0;i<e.length;i++){let r=e[i];r===n&&(n="",r=e[++i]);const o="\\"===r;if(o&&(r=e[++i]),o||n.length)t.push(r);else switch('"'!==r&&"'"!==r||(n=r),r){case":":case"=":t.length&&(a&&(s[a]=""),a=t.join(""),t.length=0);break;case'"':case"'":case" ":case"\n":case"\t":case"\r":case"\n":t.length&&""===a&&(s[t.join("")]="",t.length=0);case",":case";":case"&":case"{":case"}":if(t.length){const e=t.join("");a.length?(s[a]=e,a=""):a=e,t.length=0}break;default:t.push(r),i===e.length-1&&""===a&&t.length&&(s[t.join("")]="",t.length=0)}}return a.length&&(s[a]=t.join("")),s}}],Mt={id:Pt.Auto,name:"Auto",description:"parse new fields automatically",parse:e=>{for(const t of At)try{const n=t.parse(e);if(null!=n)return n}catch{}}},Rt=new u.Registry((()=>[...At,Mt])),$t={id:u.DataTransformerID.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:e=>t=>t.pipe((0,ue.U)((t=>$t.transformer(e)(t)))),transformer:e=>t=>t.map((t=>function(e,t){var n;if(!t.source)return e;const a=(0,Dt.PI)(e,t.source);if(!a)return e;const s=Rt.getIfExists(null!==(n=t.format)&&void 0!==n?n:Pt.Auto);if(!s)throw new Error("unkonwn extractor");const i=e.length,r=[],l=new Map;for(let e=0;e<i;e++){let t=a.values.get(e);if((0,o.isString)(t))try{t=s.parse(t)}catch{t={}}for(const[n,a]of Object.entries(t)){let t=l.get(n);null==t&&(t=new Array(i),l.set(n,t),r.push(n)),t[e]=a}}const d=r.map((e=>{const t=l.get(e);return{name:e,values:new u.ArrayVector(t),type:t?(0,u.getFieldTypeFromValue)(t.find((e=>null!=e))):u.FieldType.other,config:{}}}));t.replace||d.unshift(...e.fields);return Object.assign({},e,{fields:d})}(t,e)))};const Lt={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},Et={id:u.DataTransformerID.extractFields,editor:e=>{var t,n;let{input:a,options:s,onChange:i}=e;const r=Rt.selectOptions(s.format?[s.format]:void 0);return(0,j.jsxs)("div",{children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Source",labelWidth:16,children:(0,j.jsx)(Me.b,{context:{data:a},value:null!==(t=s.source)&&void 0!==t?t:"",onChange:e=>{i(Object.assign({},s,{source:e}))},item:Lt})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Format",labelWidth:16,children:(0,j.jsx)(m.Select,{value:r.current[0],options:r.options,onChange:e=>{i(Object.assign({},s,{format:null==e?void 0:e.value}))},width:24,placeholder:"Auto"})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Replace all fields",labelWidth:16,children:(0,j.jsx)(m.InlineSwitch,{value:null!==(n=s.replace)&&void 0!==n&&n,onChange:()=>{i(Object.assign({},s,{replace:!s.replace}))}})})})]})},transformation:$t,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"},Vt={id:u.DataTransformerID.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:e=>t=>t.pipe((0,ue.U)((t=>Vt.transformer(e)(t)))),transformer:e=>t=>t&&t.length?[Bt(e,t)]:t};function Bt(e,t){var n,a;if(null===(n=e.value)||void 0===n||!n.length)return zt("No value labele configured");const s=Ze(t);if(s.size<1)return zt("No labels in result");if(!s.has(e.value))return zt("Value label not found");let i=null!==(a=e.join)&&void 0!==a&&a.length?e.join:Array.from(s);i=i.filter((t=>t!==e.value));const r=new Set,o=new Map,l={};for(const n of t)for(const t of n.fields)if(t.labels&&t.type!==u.FieldType.time){const n=i.map((e=>t.labels[e])),a=n.join(",");let s=o.get(a);s||(s={keys:n,values:{}},o.set(a,s));const d=t.labels[e.value],c=t.values.toArray(),u=s.values[d];s.values[d]=u?u.concat(c):c,l[d]||(l[d]=t),r.add(d)}const d=Array.from(r),c=i.map((()=>[])),h=d.map((()=>[]));for(const e of o.values()){let t=-1,n=!1;for(;!n;){t++,n=!0;for(let t=0;t<i.length;t++)c[t].push(e.keys[t]);for(let a=0;a<d.length;a++){var p;const s=d[a],i=null!==(p=e.values[s])&&void 0!==p?p:[];h[a].push(i[t]),i.length>t+1&&(n=!1)}}}const g={fields:[],length:h[0].length};for(let e=0;e<i.length;e++)g.fields.push({name:i[e],config:{},type:u.FieldType.string,values:new u.ArrayVector(c[e])});for(let e=0;e<d.length;e++){var m;const t=l[d[e]];g.fields.push({name:d[e],config:{},type:null!==(m=t.type)&&void 0!==m?m:u.FieldType.number,values:new u.ArrayVector(h[e])})}return g}function zt(e){return{meta:{notices:[{severity:"error",text:e}]},fields:[{name:"Error",type:u.FieldType.string,config:{},values:new u.ArrayVector([e])}],length:0}}var _t,Ut;const Ht={id:Vt.id,editor:function(e){var t;let{input:n,options:a,onChange:s}=e;const i=(0,d.useMemo)((()=>{var e;let t;const s=Ze(n),i=Array.from(s).map((e=>({label:e,value:e})));let r=i.find((e=>e.value===a.value));!r&&a.value&&(r={label:`${a.value} (not found)`,value:a.value},i.push(r)),n.length?0===s.size&&(t=Ut||(Ut=(0,j.jsx)(m.Alert,{title:"No labels found",children:"The input does not contain any labels"}))):t=_t||(_t=(0,j.jsx)(m.Alert,{title:"No input found",children:"No input (or labels) found"})),s.delete(a.value);const o=Array.from(s).map((e=>({label:e,value:e})));let l=o;const d=Boolean(null===(e=a.join)||void 0===e?void 0:e.length);let c="Join";return d?l=o.filter((e=>!a.join.includes(e.value))):c=o.map((e=>e.value)).join(", "),{warn:t,valueOptions:i,valueOption:r,joinOptions:o,addOptions:l,addText:c,hasJoin:d,key:Date.now()}}),[a,n]),r=e=>{const t=null==e?void 0:e.value;if(!t)return;const n=a.join?a.join.slice():[];n.push(t),s(Object.assign({},a,{join:n}))},o="No labels found";return(0,j.jsxs)("div",{children:[i.warn,(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{error:"required",invalid:!Boolean(null===(t=a.value)||void 0===t?void 0:t.length),label:"Value",labelWidth:10,tooltip:"Select the label indicating the values name",children:(0,j.jsx)(m.Select,{options:i.valueOptions,value:i.valueOption,onChange:e=>s(Object.assign({},a,{value:e.value})),noOptionsMessage:o})})}),i.hasJoin?a.join.map(((e,t)=>(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Join",labelWidth:10,error:"Unable to join by the value label",invalid:e===a.value,children:(0,j.jsxs)(m.HorizontalGroup,{children:[(0,j.jsx)(m.Select,{options:i.joinOptions,value:i.joinOptions.find((t=>t.value===e)),isClearable:!0,onChange:e=>((e,t)=>{if(!a.join)return;const n=a.join.slice();if(t)n[e]=t;else if(n.splice(e,1),!n.length)return void s(Object.assign({},a,{join:void 0}));const i=new Set(n);a.value&&i.delete(a.value),s(Object.assign({},a,{join:Array.from(i)}))})(t,null==e?void 0:e.value),noOptionsMessage:o}),Boolean(i.addOptions.length&&t===a.join.length-1)&&(0,j.jsx)(m.ValuePicker,{icon:"plus",label:"",options:i.addOptions,onChange:r,variant:"secondary"})]})})},e+t))):(0,j.jsx)(j.Fragment,{children:Boolean(i.addOptions.length)&&(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Join",labelWidth:10,children:(0,j.jsx)(m.Select,{options:i.addOptions,placeholder:i.addText,onChange:r,noOptionsMessage:o})})})})]})},transformation:Vt,name:Vt.name,description:Vt.description,state:u.PluginState.beta};var Wt=n(85141),qt=n(71114),Zt=n(94396),Gt=n(60734);const Kt={id:u.DataTransformerID.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:e=>t=>t.pipe((0,qt.z)((t=>(0,Zt.D)(async function(e,t){var n;const a=u.fieldMatchers.get(u.FieldMatcherID.byName).get(null==t?void 0:t.lookupField),s=await(0,Gt.so)(null!==(n=null==t?void 0:t.gazetteer)&&void 0!==n?n:Gt.LI);if(!s.frame)return Promise.reject("missing frame in gazetteer");return function(e,t,n){var a;const s=null===(a=t.frame())||void 0===a?void 0:a.fields;if(!s)return e;return e.map((a=>{const i=a.length,r=[];for(const o of a.fields)if(r.push(o),n(o,a,e)){const e=o.values.toArray(),n=[];for(const e of s){const t=new Array(i);n.push(t),r.push(Object.assign({},e,{values:new u.ArrayVector(t)}))}for(let a=0;a<n.length;a++){const i=t.find(e[a]);if(null!=(null==i?void 0:i.index))for(let e=0;e<s.length;e++)n[e][a]=s[e].values.get(i.index)}}return Object.assign({},a,{fields:r})}))}(e,s,a)}(t,e)))))};const Qt={settings:{width:30,filter:e=>e.type===u.FieldType.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Jt={settings:{}},Yt={id:u.DataTransformerID.fieldLookup,editor:e=>{var t,n;let{input:a,options:s,onChange:i}=e;const r=(0,d.useCallback)((e=>{i(Object.assign({},s,{lookupField:e}))}),[i,s]),o=(0,d.useCallback)((e=>{i(Object.assign({},s,{gazetteer:e}))}),[i,s]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Field",labelWidth:12,children:(0,j.jsx)(Me.b,{context:{data:a},value:null!==(t=null==s?void 0:s.lookupField)&&void 0!==t?t:"",onChange:r,item:Qt})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Lookup",labelWidth:12,children:(0,j.jsx)(Wt.Q,{value:null!==(n=null==s?void 0:s.gazetteer)&&void 0!==n?n:"",context:{data:a},item:Jt,onChange:o})})})]})},transformation:Kt,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:u.PluginState.alpha};let Xt;function en(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const n of tn(e)){const e=n.fields[0];if(!e||e.type!==u.FieldType.time)continue;const a=[],s=[];for(const e of n.fields)switch(e.type){case u.FieldType.number:case u.FieldType.boolean:a.push(e);break;case u.FieldType.string:s.push(e)}for(const i of a)if(s.length){const a=new Map;for(let t=0;t<n.length;t++){const n=e.values.get(t),r=i.values.get(t);if(void 0===r||null==n)continue;const o=s.map((e=>e.values.get(t))).join("/");let l=a.get(o);if(!l){l={key:o,time:[],value:[],labels:{}};for(const e of s)l.labels[e.name]=e.values.get(t);a.set(o,l)}l.time.push(n),l.value.push(r)}for(const s of a.values())t.push({name:n.name,refId:n.refId,meta:Object.assign({},n.meta,{type:u.DataFrameType.TimeSeriesMany}),fields:[Object.assign({},e,{values:new u.ArrayVector(s.time)}),Object.assign({},i,{values:new u.ArrayVector(s.value),labels:s.labels})],length:s.time.length})}else t.push({name:n.name,refId:n.refId,meta:Object.assign({},n.meta,{type:u.DataFrameType.TimeSeriesMany}),fields:[e,i],length:n.length})}return t}function tn(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const n of e){let e;const a=[],s={},i={},r={},o={};for(let t=0;t<n.fields.length;t++){const l=n.fields[t];switch(l.type){case u.FieldType.string:case u.FieldType.boolean:l.name in o||(o[l.name]=t,i[l.name]=!0);break;case u.FieldType.time:if(!e){e=l;break}default:if(l.name in s){const e=s[l.name];if(l.type!==e)continue}else s[l.name]=l.type,a.push(l.name);const n=JSON.stringify(l.labels),d=r[n];if(void 0!==d?d.push(t):r[n]=[t],null!=l.labels)for(const e in l.labels)i[e]=!0}}if(!e)continue;const l=[],d=[],c=[],h=[];for(let t=0;t<n.length;t++)l.push({time:e.values.get(t),wideRowIndex:t});for(const e in r)d.push(e);for(const e in i)c.push(e);for(const e in o)h.push(e);l.sort(((e,t)=>e.time-t.time)),d.sort(),c.sort(),a.sort();const p=new u.MutableDataFrame(Object.assign({},n,{meta:Object.assign({},n.meta,{type:u.DataFrameType.TimeSeriesLong}),fields:[{name:e.name,type:e.type}]}));for(const e of a)p.addField({name:e,type:s[e]});for(const e of c)p.addField({name:e,type:u.FieldType.string});for(const t of l){const{time:a,wideRowIndex:s}=t;for(const t of d){const i={};for(const e of h)i[e]=n.fields[o[e]].values.get(s);let l=0;for(const e of r[t]){const t=n.fields[e];if(0==l++&&null!=t.labels)for(const e in t.labels)i[e]=t.labels[e];i[t.name]=t.values.get(s)}i[e.name]=a,p.add(i)}}t.push(p)}return t}!function(e){e.TimeSeriesWide="wide",e.TimeSeriesMany="many",e.TimeSeriesLong="long"}(Xt||(Xt={}));const nn={id:u.DataTransformerID.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:e=>t=>t.pipe((0,ue.U)((t=>nn.transformer(e)(t)))),transformer:e=>{var t;const n=null!==(t=null==e?void 0:e.format)&&void 0!==t?t:Xt.TimeSeriesWide;return n===Xt.TimeSeriesMany?en:n===Xt.TimeSeriesLong?tn:e=>{const t=(0,u.outerJoinDataFrames)({frames:e,joinBy:u.fieldMatchers.get(u.FieldMatcherID.firstTimeField).get({}),keepOriginIndices:!0});return t?[t]:[]}}},an=[{label:"Wide time series",value:Xt.TimeSeriesWide,description:"Creates a single frame joined by time",info:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:"Single frame"}),(0,j.jsx)("li",{children:"1st field is shared time field"}),(0,j.jsx)("li",{children:"Time in ascending order"}),(0,j.jsx)("li",{children:"Multiple value fields of any type"})]})},{label:"Multi-frame time series",value:Xt.TimeSeriesMany,description:"Creates a new frame for each time/number pair",info:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:"Multiple frames"}),(0,j.jsx)("li",{children:"Each frame has two fields: time, value"}),(0,j.jsx)("li",{children:"Time in ascending order"}),(0,j.jsx)("li",{children:"String values are represented as labels"}),(0,j.jsx)("li",{children:"All values are numeric"})]})},{label:"Long time series",value:Xt.TimeSeriesLong,description:"Convert each frame to long format",info:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:"Single frame"}),(0,j.jsx)("li",{children:"1st field is time field"}),(0,j.jsx)("li",{children:"Time in ascending order, but may have duplictes"}),(0,j.jsx)("li",{children:"String values are represented as separate fields rather than as labels"}),(0,j.jsx)("li",{children:"Multiple value fields may exist"})]})}];const sn=e=>({info:b.css`
    margin-left: 20px;
  `}),rn={id:nn.id,editor:function(e){const{options:t,onChange:n}=e,a=(0,m.useStyles2)(sn),s=(0,d.useCallback)((e=>{n(Object.assign({},t,{format:e.value}))}),[n,t]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Format",labelWidth:12,children:(0,j.jsx)(m.Select,{width:35,options:an,value:an.find((e=>e.value===t.format))||an[0],onChange:s,className:"flex-grow-1"})})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Info",labelWidth:12,children:(0,j.jsx)("div",{className:a.info,children:(an.find((e=>e.value===t.format))||an[0]).info})})})]})},transformation:nn,name:nn.name,description:nn.description,help:"\n  ### Use cases\n\n  This takes query results and transforms them into a predictable timeseries format.\n  This transformer may be especially useful when using old panels that only expect the\n  many-frame timeseries format.\n  "},on={id:u.DataTransformerID.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:e=>t=>t.pipe((0,ue.U)((t=>t.map((t=>function(e,t){var n;const a=se(t,null!==(n=e.mappings)&&void 0!==n?n:[],!0),{nameField:s,valueField:i}=a;if(!s||!i)return t;const r=[];for(let e=0;e<s.values.length;e++){const n=s.values.get(e),o=i.values.get(e),l=Y(t,e,a),d=ln(t,e,a),c={name:`${n}`,type:i.type,values:new u.ArrayVector([o]),config:l,labels:d};r.push(c)}return{fields:r,length:1}}(e,t))))))};function ln(e,t,n){const a=Object.assign({},n.nameField.labels);for(let s=0;s<e.fields.length;s++){const i=e.fields[s],r=(0,u.getFieldDisplayName)(i,e),o=n.index[r];if(o.handler&&o.handler.key!==X.Label)continue;const l=i.values.get(t);null!=l&&(a[r]=l)}return a}const dn={id:on.id,editor:function(e){var t;let{input:n,options:a,onChange:s}=e;return 0===n.length?null:(0,j.jsx)("div",{children:(0,j.jsx)(le,{frame:n[0],mappings:null!==(t=a.mappings)&&void 0!==t?t:[],onChange:e=>s(Object.assign({},a,{mappings:e})),withNameAndValue:!0})})},transformation:on,name:on.name,description:on.description,state:u.PluginState.beta,help:"\n### Use cases \n\nThis transforms rows into separate fields. This can be useful as fields can be styled and configured \nindividually, something rows cannot. It can also use additional fields as sources for dynamic field \nconfiguration or map them to field labels. The additional labels can then be used to define better \ndisplay names for the resulting fields.\n\nUseful when visualization data in:\n- Gauge\n- Stat\n- Pie chart\n\n## Example\n\nInput:\n\n| Name    | Value | Max |\n| ------- | ----- | --- |\n| ServerA | 10    | 100 |\n| ServerB | 20    | 200 |\n| ServerC | 30    | 300 |\n\nOutput:\n\n| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |\n| ------------------------- | ------------------------- | ------------------------- |\n| 10                        | 20                        | 30                        |\n\nAs you can see each row in the source data becomes a separate field. Each field now also has a max \nconfig option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field \nconfiguration and if set like this will be used by the visualization instead of any options manually \nconfigured in the panel editor options pane.\n\n"};var cn=n(93067),un=n(34362),hn=n(42329),pn=n(56536),gn=n(50525);const mn={id:u.DataTransformerID.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:e=>t=>t.pipe((0,qt.z)((t=>(0,Zt.D)(async function(e,t){const n=await(0,pn.cJ)(t.source);if(fn(t)){var a;const s=await(0,pn.cJ)(null===(a=t.modify)||void 0===a?void 0:a.target);return e.map((e=>{const t=(0,pn.g6)(e,n),a=(0,pn.g6)(e,s);if(t.field&&a.field){const n=[...e.fields],s=(0,hn.Fh)(t.field,a.field),i=n[0];return i.type===u.FieldType.geo&&i!==t.field&&i!==a.field?n[0]=(0,hn.EK)(i,s):n.unshift(s),Object.assign({},e,{fields:n})}return e}))}return e.map((e=>{var a;let s=(0,pn.g6)(e,n);if(s.field){if(t.action===un.JJ.Modify){if((null===(a=t.modify)||void 0===a?void 0:a.op)===un.ac.AsLine){let t=s.field.name;return t&&"Point"!==t||(t="Line"),Object.assign({},e,{length:1,fields:[Object.assign({},s.field,{name:t,type:u.FieldType.geo,values:new u.ArrayVector([(0,gn.Lp)(s.field)])})]})}return e}const n=s.derived?[s.field,...e.fields]:e.fields.slice(0);var i;if(t.action===un.JJ.Calculate)n.push((0,gn.N7)(s.field,null!==(i=t.calculate)&&void 0!==i?i:{})),s.derived=!0;if(s.derived)return Object.assign({},e,{fields:n})}return e}))}(t,e)))))};function fn(e){var t;return e.action===un.JJ.Modify&&(null===(t=e.modify)||void 0===t?void 0:t.op)===un.ac.LineBuilder}const vn=(e,t)=>{var n;const a=null!==(n=t.options)&&void 0!==n?n:{};e.addSelect({path:"action",name:"Action",description:"",defaultValue:un.JJ.Prepare,settings:{options:[{value:un.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:un.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:un.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),a.action===un.JJ.Calculate?e.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:un.Ii.Heading,settings:{options:[{value:un.Ii.Heading,label:"Heading"},{value:un.Ii.Area,label:"Area"},{value:un.Ii.Distance,label:"Distance"}]}}):a.action===un.JJ.Modify&&e.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:un.ac.AsLine,settings:{options:[{value:un.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:un.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),fn(a)?(e.addNestedOptions({category:["Source"],path:"source",build:(e,t)=>{var n;const s=null!==(n=a.source)&&void 0!==n?n:{};s.mode||(s.mode=u.FrameGeometrySourceMode.Auto),(0,cn.C)("Point","",e,s)}}),e.addNestedOptions({category:["Target"],path:"modify",build:(e,t)=>{var n,s;const i=null!==(n=null===(s=a.modify)||void 0===s?void 0:s.target)&&void 0!==n?n:{};i.mode||(i.mode=u.FrameGeometrySourceMode.Auto),(0,cn.C)("Point","target.",e,i)}})):(0,cn.C)("Location","source.",e,a.source)},bn=e=>({wrap:b.css`
      margin-bottom: 20px;
    `,item:b.css`
      border-left: 4px solid ${e.colors.border.strong};
      padding-left: 10px;
    `}),xn={id:u.DataTransformerID.spatial,editor:e=>{(0,d.useEffect)((()=>{var t;if(null===(t=e.options.source)||void 0===t||!t.mode){const t=Z(vn);e.onChange(Object.assign({},t,e.options)),console.log("geometry useEffect",t)}}));const t=bn((0,m.useTheme2)()),n=q(e,vn);return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:n.items.map((e=>e.render()))}),(0,j.jsx)("div",{children:n.categories.map((e=>(0,j.jsxs)("div",{className:t.wrap,children:[(0,j.jsx)("h5",{children:e.props.title}),(0,j.jsx)("div",{className:t.item,children:e.items.map((e=>e.render()))})]},e.props.id)))})]})},transformation:mn,name:mn.name,description:mn.description,state:u.PluginState.alpha},yn=()=>[wt,Be,Tt,He,B,bt,Ot,Nt,Ae,Te,rt,Je,Ft,dt,tt,dn,pe,rn,$e,xn,Yt,Et,J,Ye,ot,Ht];var wn;const jn=(null!==(wn=window.__grafana_public_path__)&&void 0!==wn?wn:"public/")+"lib/monaco/min/vs",Sn=[[`${jn}/language/kusto/bridge.min.js`],[`${jn}/language/kusto/kusto.javascript.client.min.js`,`${jn}/language/kusto/newtonsoft.json.min.js`,`${jn}/language/kusto/Kusto.Language.Bridge.min.js`]];async function Cn(){let e=Promise.resolve();for(const t of Sn){await e;const n=t.filter((e=>!document.querySelector(`script[src="${e}"]`))).map((e=>{return t=e,new Promise(((e,n)=>{let a;"string"==typeof t?(a=document.createElement("script"),a.src=t):a=t,a.onload=()=>e(),a.onerror=e=>n(e),document.body.appendChild(a)}));var t}));await Promise.all(n)}await new Promise((e=>{window.__monacoKustoResolvePromise=e;const t=document.createElement("script");return t.innerHTML="require(['vs/language/kusto/monaco.contribution'], function() {\n      window.__monacoKustoResolvePromise();\n    });",document.body.appendChild(t)}))}function kn(){return[{id:"kusto",name:"kusto",init:Cn}]}var Tn,In,On,Nn,Fn,Dn,Pn=n(55560),An=n(18745),Mn=n(42326),Rn=n(5730),$n=n(8674),Ln=n(69371);class En extends d.PureComponent{render(){const{navModel:e}=this.props;return(0,j.jsx)(Ln.T,{navModel:e,children:(0,j.jsx)(Ln.T.Contents,{children:(0,j.jsx)("div",{className:"page-container page-body",children:(0,j.jsxs)("div",{className:"panel-container error-container",children:[Tn||(Tn=(0,j.jsx)("div",{className:"error-column graph-box",children:(0,j.jsxs)("div",{className:"error-row",children:[(0,j.jsxs)("div",{className:"error-column error-space-between graph-percentage",children:[(0,j.jsx)("p",{children:"100%"}),(0,j.jsx)("p",{children:"80%"}),(0,j.jsx)("p",{children:"60%"}),(0,j.jsx)("p",{children:"40%"}),(0,j.jsx)("p",{children:"20%"}),(0,j.jsx)("p",{children:"0%"})]}),(0,j.jsxs)("div",{className:"error-column image-box",children:[(0,j.jsx)("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),(0,j.jsxs)("div",{className:"error-row error-space-between",children:[(0,j.jsx)("p",{className:"graph-text",children:"Then"}),(0,j.jsx)("p",{className:"graph-text",children:"Now"})]})]})]})})),(0,j.jsxs)("div",{className:"error-column info-box",children:[In||(In=(0,j.jsx)("div",{className:"error-row current-box",children:(0,j.jsx)("p",{className:"current-text",children:"current"})})),(0,j.jsxs)("div",{className:"error-row",style:{flex:1},children:[On||(On=(0,j.jsx)(m.Icon,{name:"minus-circle",className:"error-minus"})),(0,j.jsxs)("div",{className:"error-column error-space-between error-full-width",children:[Nn||(Nn=(0,j.jsxs)("div",{className:"error-row error-space-between",children:[(0,j.jsx)("p",{children:"Chances you are on the page you are looking for."}),(0,j.jsx)("p",{className:"left-margin",children:"0%"})]})),(0,j.jsxs)("div",{children:[Fn||(Fn=(0,j.jsx)("h3",{children:"Sorry for the inconvenience"})),(0,j.jsxs)("p",{children:["Please go back to your"," ",(0,j.jsx)("a",{href:h.config.appSubUrl,className:"error-link",children:"home dashboard"})," ","and try again."]}),Dn||(Dn=(0,j.jsxs)("p",{children:["If the error persists, seek help on the"," ",(0,j.jsx)("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link",children:"community site"}),"."]}))]})]})]})]})]})})})})}}const Vn=(0,An.connect)((e=>({navModel:(0,$n.h)(e.navIndex,"not-found")})))(En);var Bn,zn,_n,Un=n(70064),Hn=n(23452),Wn=n(62586),qn=n(26463),Zn=n(85040);const Gn=e=>({button:b.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:b.css`
      position: absolute;
      left: ${e.spacing.sm};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:b.css`
        color: ${e.colors.text};
        display: flex;
        margin-bottom: ${e.spacing.sm};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:b.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${e.colors.text};
      `}}),Kn=()=>{const e=(0,m.useStyles)(Gn);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:e.divider.base,children:[(0,j.jsx)("div",{children:(0,j.jsx)("div",{className:e.divider.line})}),(0,j.jsx)("div",{children:(0,j.jsx)("span",{children:!f.ZP.disableLoginForm&&(Bn||(Bn=(0,j.jsx)("span",{children:"or"})))})}),(0,j.jsx)("div",{children:(0,j.jsx)("div",{className:e.divider.line})})]}),zn||(zn=(0,j.jsx)("div",{className:"clearfix"}))]})};function Qn(e,t,n){return(0,b.cx)(t.button,b.css`
      background-color: ${e.bgColor};
      color: ${n.colors.getContrastText(e.bgColor)};

      &:hover {
        background-color: ${n.colors.emphasize(e.bgColor,.15)};
        box-shadow: ${n.shadows.z1};
      }
    `)}const Jn=()=>{const e=(0,o.pickBy)((()=>{var e,t,n,a,s,i,r,o;const l=!!f.ZP.oauth;return{saml:{bgColor:"#464646",enabled:f.ZP.samlEnabled,name:f.ZP.samlName||u.DEFAULT_SAML_NAME,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:l&&Boolean(f.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:l&&Boolean(f.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:l&&Boolean(f.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:l&&Boolean(f.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:l&&Boolean(f.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:l&&Boolean(f.ZP.oauth.okta),name:(null===(e=f.ZP.oauth)||void 0===e||null===(t=e.okta)||void 0===t?void 0:t.name)||"Okta",icon:(null===(n=f.ZP.oauth)||void 0===n||null===(a=n.okta)||void 0===a?void 0:a.icon)||"okta"},oauth:{bgColor:"#262628",enabled:l&&Boolean(f.ZP.oauth.generic_oauth),name:(null===(s=f.ZP.oauth)||void 0===s||null===(i=s.generic_oauth)||void 0===i?void 0:i.name)||"OAuth",icon:(null===(r=f.ZP.oauth)||void 0===r||null===(o=r.generic_oauth)||void 0===o?void 0:o.icon)||"signin",hrefName:"generic_oauth"}}})(),(e=>e.enabled)),t=Object.keys(e).length>0,n=(0,m.useTheme2)(),a=(0,m.useStyles)(Gn);return t?(0,j.jsxs)(m.VerticalGroup,{children:[_n||(_n=(0,j.jsx)(Kn,{})),Object.entries(e).map((e=>{let[t,s]=e;return(0,j.jsxs)(m.LinkButton,{className:Qn(s,a,n),href:`login/${s.hrefName?s.hrefName:t}`,target:"_self",fullWidth:!0,children:[(0,j.jsx)(m.Icon,{className:a.buttonIcon,name:s.icon}),"Sign in with ",s.name]},t)}))]}):null},Yn=()=>{const e=(0,f.iE)().verifyEmailEnabled?`${(0,f.iE)().appSubUrl}/verify`:`${(0,f.iE)().appSubUrl}/signup`,t=(0,b.css)({paddingTop:"16px"});return(0,j.jsxs)(m.VerticalGroup,{children:[(0,j.jsx)("div",{className:t,children:"New to Grafana?"}),(0,j.jsx)(m.LinkButton,{className:b.css`
          width: 100%;
          justify-content: center;
        `,href:e,variant:"secondary",fill:"outline",children:"Sign up"})]})};var Xn,ea;const ta=b.css`
  padding: 0;
  margin-top: 4px;
`,na=()=>(document.title=Un.c.AppTitle,(0,j.jsx)(Zn.dd,{children:(0,j.jsx)(Wn.Z,{children:e=>{let{loginHint:t,passwordHint:n,ldapEnabled:a,authProxyEnabled:s,disableLoginForm:i,disableUserSignUp:r,login:o,isLoggingIn:l,changePassword:d,skipPasswordChange:c,isChangingPassword:u}=e;return(0,j.jsxs)(j.Fragment,{children:[!u&&(0,j.jsxs)(Zn.$s,{children:[!i&&(0,j.jsx)(qn.U,{onSubmit:o,loginHint:t,passwordHint:n,isLoggingIn:l,children:a||s?(0,j.jsx)(j.Fragment,{}):(0,j.jsx)(m.HorizontalGroup,{justify:"flex-end",children:(0,j.jsx)(m.LinkButton,{className:ta,fill:"text",href:`${f.ZP.appSubUrl}/user/password/send-reset-email`,children:"Forgot your password?"})})}),Xn||(Xn=(0,j.jsx)(Jn,{})),!r&&(ea||(ea=(0,j.jsx)(Yn,{})))]}),u&&(0,j.jsx)(Zn.$s,{children:(0,j.jsx)(Hn.G,{onSubmit:d,onSkip:()=>c()})})]})}})}));var aa,sa,ia,ra,oa,la=n(61959),da=n(98163),ca=n(47570);class ua extends d.PureComponent{constructor(){var e,t,n;super(...arguments),n=()=>{this.props.onUserSync()},(t="onUserSync")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}render(){const{ldapSyncInfo:e,user:t}=this.props,n=e&&e.nextSync?(0,u.dateTimeFormat)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"}):"",a=`/admin/ldap?user=${t&&t.login}`,s=da.Vt.hasPermission(ca.bW.LDAPUsersRead),i=da.Vt.hasPermission(ca.bW.LDAPUsersSync);return(0,j.jsxs)(j.Fragment,{children:[aa||(aa=(0,j.jsx)("h3",{className:"page-heading",children:"LDAP Synchronisation"})),(0,j.jsxs)("div",{className:"gf-form-group",children:[(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("table",{className:"filter-table form-inline",children:(0,j.jsxs)("tbody",{children:[sa||(sa=(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:"External sync"}),(0,j.jsx)("td",{children:"User synced via LDAP. Some changes must be done in LDAP or mappings."}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"label label-tag",children:"LDAP"})})]})),(0,j.jsx)("tr",{children:e.enabled?(0,j.jsxs)(j.Fragment,{children:[ia||(ia=(0,j.jsx)("td",{children:"Next scheduled synchronization"})),(0,j.jsx)("td",{colSpan:2,children:n})]}):(0,j.jsxs)(j.Fragment,{children:[ra||(ra=(0,j.jsx)("td",{children:"Next scheduled synchronization"})),oa||(oa=(0,j.jsx)("td",{colSpan:2,children:"Not enabled"}))]})})]})})}),(0,j.jsxs)("div",{className:"gf-form-button-row",children:[i&&(0,j.jsx)(m.Button,{variant:"secondary",onClick:this.onUserSync,children:"Sync user"}),s&&(0,j.jsx)(m.LinkButton,{variant:"secondary",href:a,children:"Debug LDAP Mapping"})]})]})]})}}var ha=n(57497),pa=n(77058),ga=n(80027),ma=n(28659);function fa(e){let{onSelected:t,className:n,inputId:a,autoFocus:s,excludeOrgs:i}=e;(0,d.useEffect)((()=>{var e;s&&a&&(null===(e=document.getElementById(a))||void 0===e||e.focus())}),[s,a]);const[r,o]=(0,ga.Z)((async()=>{const e=(await(0,ma.i)().get("/api/orgs")).map((e=>({value:{id:e.id,name:e.name},label:e.name})));if(i){let t=i.map((e=>e.orgId));return e.filter((e=>!t.includes(e.value.id)))}return e}));return(0,j.jsx)(m.AsyncSelect,{inputId:a,className:n,isLoading:r.loading,defaultOptions:!0,isSearchable:!1,loadOptions:o,onChange:t,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var va,ba,xa,ya,wa=n(8936);function ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sa extends d.PureComponent{constructor(){super(...arguments),ja(this,"addToOrgButtonRef",d.createRef()),ja(this,"state",{showAddOrgModal:!1}),ja(this,"showOrgAddModal",(()=>{this.setState({showAddOrgModal:!0})})),ja(this,"dismissOrgAddModal",(()=>{this.setState({showAddOrgModal:!1},(()=>{var e;null===(e=this.addToOrgButtonRef.current)||void 0===e||e.focus()}))}))}render(){const{user:e,orgs:t,isExternalUser:n,onOrgRoleChange:a,onOrgRemove:s,onOrgAdd:i}=this.props,{showAddOrgModal:r}=this.state,o=b.css`
      margin-top: 0.8rem;
    `,l=da.Vt.hasPermission(ca.bW.OrgUsersAdd)&&!n;return(0,j.jsxs)(j.Fragment,{children:[va||(va=(0,j.jsx)("h3",{className:"page-heading",children:"Organizations"})),(0,j.jsxs)("div",{className:"gf-form-group",children:[(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("table",{className:"filter-table form-inline",children:(0,j.jsx)("tbody",{children:t.map(((t,i)=>(0,j.jsx)(Ta,{isExternalUser:n,user:e,org:t,onOrgRoleChange:a,onOrgRemove:s},`${t.orgId}-${i}`)))})})}),(0,j.jsx)("div",{className:o,children:l&&(0,j.jsx)(m.Button,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef,children:"Add user to organization"})}),(0,j.jsx)(Oa,{user:e,userOrgs:t,isOpen:r,onOrgAdd:i,onDismiss:this.dismissOrgAddModal})]})]})}}const Ca=(0,m.stylesFactory)((e=>({removeButton:b.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${e.palette.blue95};
    `,label:b.css`
      font-weight: 500;
    `,disabledTooltip:b.css`
      display: flex;
    `,tooltipItem:b.css`
      margin-left: 5px;
    `,tooltipItemLink:b.css`
      color: ${e.palette.blue95};
    `,rolePickerWrapper:b.css`
      display: flex;
    `,rolePicker:b.css`
      flex: auto;
      margin-right: ${e.spacing.sm};
    `})));class ka extends d.PureComponent{constructor(){super(...arguments),ja(this,"state",{currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[],builtInRoles:{}}),ja(this,"onOrgRemove",(async()=>{const{org:e,user:t}=this.props;this.props.onOrgRemove(e.orgId),da.Vt.licensedAccessControlEnabled()&&da.Vt.hasPermission(ca.bW.ActionUserRolesRemove)&&da.Vt.hasPermission(ca.bW.ActionUserRolesAdd)&&t&&await(0,pa.hB)([],t.id,e.orgId)})),ja(this,"onChangeRoleClick",(()=>{const{org:e}=this.props;this.setState({isChangingRole:!0,currentRole:e.role})})),ja(this,"onOrgRoleChange",(e=>{this.setState({currentRole:e})})),ja(this,"onOrgRoleSave",(()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)})),ja(this,"onCancelClick",(()=>{this.setState({isChangingRole:!1})})),ja(this,"onBuiltinRoleChange",(e=>{this.props.onOrgRoleChange(this.props.org.orgId,e)}))}componentDidMount(){da.Vt.licensedAccessControlEnabled()&&da.Vt.hasPermission(ca.bW.ActionRolesList)&&(0,pa.ul)(this.props.org.orgId).then((e=>this.setState({roleOptions:e}))).catch((e=>console.error(e)))}render(){const{user:e,org:t,isExternalUser:n,theme:a}=this.props,{currentRole:s,isChangingRole:i}=this.state,r=Ca(a),o=(0,b.cx)("width-16",r.label),l=da.Vt.hasPermission(ca.bW.OrgUsersWrite),d=da.Vt.hasPermission(ca.bW.OrgUsersRemove),c=n||!l,u=`${t.name}-input`;return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:o,children:(0,j.jsx)("label",{htmlFor:u,children:t.name})}),da.Vt.licensedAccessControlEnabled()?(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:r.rolePickerWrapper,children:[(0,j.jsx)("div",{className:r.rolePicker,children:(0,j.jsx)(ha.R,{userId:(null==e?void 0:e.id)||0,orgId:t.orgId,builtInRole:t.role,roleOptions:this.state.roleOptions,builtInRoles:this.state.builtInRoles,onBuiltinRoleChange:this.onBuiltinRoleChange,builtinRolesDisabled:c})}),n&&(ba||(ba=(0,j.jsx)(Da,{})))]})}):(0,j.jsxs)(j.Fragment,{children:[i?(0,j.jsx)("td",{children:(0,j.jsx)(wa.A,{inputId:u,value:s,onChange:this.onOrgRoleChange,autoFocus:!0})}):(0,j.jsx)("td",{className:"width-25",children:t.role}),(0,j.jsx)("td",{colSpan:1,children:(0,j.jsx)("div",{className:"pull-right",children:l&&(0,j.jsx)(Fa,{isExternalUser:n,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})})})]}),(0,j.jsx)("td",{colSpan:1,children:(0,j.jsx)("div",{className:"pull-right",children:d&&(0,j.jsx)(m.ConfirmButton,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0,children:"Remove from organization"})})})]})}}const Ta=(0,m.withTheme)(ka),Ia=(0,m.stylesFactory)((()=>({modal:b.css`
    width: 500px;
  `,buttonRow:b.css`
    text-align: center;
  `,modalContent:b.css`
    overflow: visible;
  `})));class Oa extends d.PureComponent{constructor(){super(...arguments),ja(this,"state",{selectedOrg:null,role:ca.B5.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]}),ja(this,"onOrgSelect",(e=>{const t=this.props.userOrgs.find((t=>{var n;return t.orgId===(null===(n=e.value)||void 0===n?void 0:n.id)}));var n;(this.setState({selectedOrg:e.value,role:(null==t?void 0:t.role)||ca.B5.Viewer}),da.Vt.licensedAccessControlEnabled())&&(da.Vt.hasPermission(ca.bW.ActionRolesList)&&(0,pa.ul)(null===(n=e.value)||void 0===n?void 0:n.id).then((e=>this.setState({roleOptions:e}))).catch((e=>console.error(e))))})),ja(this,"onOrgRoleChange",(e=>{this.setState({role:e})})),ja(this,"onAddUserToOrg",(async()=>{const{selectedOrg:e,role:t}=this.state;this.props.onOrgAdd(e.id,t),da.Vt.licensedAccessControlEnabled()&&da.Vt.hasPermission(ca.bW.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,pa.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.state.pendingOrgId=null,this.state.pendingRoles=[],this.state.pendingUserId=null)})),ja(this,"onCancel",(()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()})),ja(this,"onRoleUpdate",(async(e,t,n)=>{this.setState({pendingRoles:e,pendingOrgId:n,pendingUserId:t})}))}render(){const{isOpen:e,user:t,userOrgs:n}=this.props,{role:a,roleOptions:s,selectedOrg:i}=this.state,r=Ia();return(0,j.jsxs)(m.Modal,{className:r.modal,contentClassName:r.modalContent,title:"Add to an organization",isOpen:e,onDismiss:this.onCancel,children:[(0,j.jsx)(m.Field,{label:"Organization",children:(0,j.jsx)(fa,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:n,autoFocus:!0})}),(0,j.jsx)(m.Field,{label:"Role",disabled:null===i,children:da.Vt.accessControlEnabled()?(0,j.jsx)(ha.R,{userId:(null==t?void 0:t.id)||0,orgId:null==i?void 0:i.id,builtInRole:a,onBuiltinRoleChange:this.onOrgRoleChange,builtinRolesDisabled:!1,roleOptions:s,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):(0,j.jsx)(wa.A,{inputId:"new-org-role-input",value:a,onChange:this.onOrgRoleChange})}),(0,j.jsx)(m.Modal.ButtonRow,{children:(0,j.jsxs)(m.HorizontalGroup,{spacing:"md",justify:"center",children:[(0,j.jsx)(m.Button,{variant:"secondary",fill:"outline",onClick:this.onCancel,children:"Cancel"}),(0,j.jsx)(m.Button,{variant:"primary",disabled:null===i,onClick:this.onAddUserToOrg,children:"Add to organization"})]})})]})}}const Na=e=>({disabledTooltip:b.css`
    display: flex;
  `,tooltipItemLink:b.css`
    color: ${e.v1.palette.blue95};
  `});function Fa(e){let{onChangeRoleClick:t,isExternalUser:n,onOrgRoleSave:a,onCancelClick:s}=e;const i=(0,m.useStyles2)(Na);return(0,j.jsxs)("div",{className:i.disabledTooltip,children:[(0,j.jsx)(m.ConfirmButton,{confirmText:"Save",onClick:t,onCancel:s,onConfirm:a,disabled:n,children:"Change role"}),n&&(0,j.jsx)(m.Tooltip,{placement:"right-end",content:(0,j.jsxs)("div",{children:["This user's role is not editable because it is synchronized from your auth provider. Refer to theÂ ",(0,j.jsx)("a",{className:i.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank",children:"Grafana authentication docs"}),"Â for details."]}),children:xa||(xa=(0,j.jsx)(m.Icon,{name:"question-circle"}))})]})}const Da=()=>{const e=(0,m.useTheme)(),t=Pa(e);return(0,j.jsx)("div",{className:t.disabledTooltip,children:(0,j.jsx)(m.Tooltip,{placement:"right-end",content:(0,j.jsxs)("div",{children:["This user's built-in role is not editable because it is synchronized from your auth provider. Refer to theÂ ",(0,j.jsx)("a",{className:t.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank",children:"Grafana authentication docs"}),"Â for details."]}),children:ya||(ya=(0,j.jsx)(m.Icon,{name:"question-circle"}))})})},Pa=(0,m.stylesFactory)((e=>({disabledTooltip:b.css`
    display: flex;
  `,tooltipItemLink:b.css`
    color: ${e.palette.blue95};
  `})));var Aa,Ma,Ra;const $a=[{label:"Yes",value:!0},{label:"No",value:!1}];function La(e){let{isGrafanaAdmin:t,onGrafanaAdminChange:n}=e;const[a,s]=(0,d.useState)(!1),[i,r]=(0,d.useState)(t),o=da.Vt.hasPermission(ca.bW.UsersPermissionsUpdate);return(0,j.jsxs)(j.Fragment,{children:[Aa||(Aa=(0,j.jsx)("h3",{className:"page-heading",children:"Permissions"})),(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("table",{className:"filter-table form-inline",children:(0,j.jsx)("tbody",{children:(0,j.jsxs)("tr",{children:[Ma||(Ma=(0,j.jsx)("td",{className:"width-16",children:"Grafana Admin"})),a?(0,j.jsx)("td",{colSpan:2,children:(0,j.jsx)(m.RadioButtonGroup,{options:$a,value:i,onChange:r,autoFocus:!0})}):(0,j.jsx)("td",{colSpan:2,children:t?(0,j.jsxs)(j.Fragment,{children:[Ra||(Ra=(0,j.jsx)(m.Icon,{name:"shield"}))," Yes"]}):(0,j.jsx)(j.Fragment,{children:"No"})}),(0,j.jsx)("td",{children:o&&(0,j.jsx)(m.ConfirmButton,{onClick:()=>s(!0),onConfirm:()=>n(i),onCancel:()=>{s(!1),r(t)},confirmText:"Change",children:"Change"})})]})})})})})]})}var Ea;function Va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ba(e){var t;let{user:n,onUserUpdate:a,onUserDelete:s,onUserDisable:i,onUserEnable:r,onPasswordChange:o}=e;const[l,c]=(0,d.useState)(!1),[u,h]=(0,d.useState)(!1),p=(0,d.useRef)(null),g=e=>()=>{c(e),!e&&p.current&&p.current.focus()},v=(0,d.useRef)(null),b=e=>()=>{h(e),!e&&v.current&&v.current.focus()},x=(null===(t=n.authLabels)||void 0===t?void 0:t.length)&&n.authLabels[0],y=x?`Synced via ${x}`:"",w=za(f.vc.theme),S=n.isExternal||!da.Vt.hasPermissionInMetadata(ca.bW.UsersWrite,n),C=n.isExternal||!da.Vt.hasPermissionInMetadata(ca.bW.UsersPasswordUpdate,n),k=da.Vt.hasPermissionInMetadata(ca.bW.UsersDelete,n),T=da.Vt.hasPermissionInMetadata(ca.bW.UsersDisable,n),I=da.Vt.hasPermissionInMetadata(ca.bW.UsersEnable,n);return(0,j.jsxs)(j.Fragment,{children:[Ea||(Ea=(0,j.jsx)("h3",{className:"page-heading",children:"User information"})),(0,j.jsxs)("div",{className:"gf-form-group",children:[(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("table",{className:"filter-table form-inline",children:(0,j.jsxs)("tbody",{children:[(0,j.jsx)(_a,{label:"Name",value:n.name,locked:S,lockMessage:y,onChange:e=>{a(Object.assign({},n,{name:e}))}}),(0,j.jsx)(_a,{label:"Email",value:n.email,locked:S,lockMessage:y,onChange:e=>{a(Object.assign({},n,{email:e}))}}),(0,j.jsx)(_a,{label:"Username",value:n.login,locked:S,lockMessage:y,onChange:e=>{a(Object.assign({},n,{login:e}))}}),(0,j.jsx)(_a,{label:"Password",value:"********",inputType:"password",locked:C,lockMessage:y,onChange:o})]})})}),(0,j.jsxs)("div",{className:w.buttonRow,children:[k&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Button,{variant:"destructive",onClick:g(!0),ref:p,children:"Delete user"}),(0,j.jsx)(m.ConfirmModal,{isOpen:l,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:()=>s(n.id),onDismiss:g(!1)})]}),n.isDisabled&&I&&(0,j.jsx)(m.Button,{variant:"secondary",onClick:()=>r(n.id),children:"Enable user"}),!n.isDisabled&&T&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(m.Button,{variant:"secondary",onClick:b(!0),ref:v,children:"Disable user"}),(0,j.jsx)(m.ConfirmModal,{isOpen:u,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:()=>i(n.id),onDismiss:b(!1)})]})]})]})]})}const za=(0,m.stylesFactory)((e=>({buttonRow:b.css`
      margin-top: 0.8rem;
      > * {
        margin-right: 16px;
      }
    `})));class _a extends d.PureComponent{constructor(){super(...arguments),Va(this,"inputElem",void 0),Va(this,"state",{editing:!1,value:this.props.value||""}),Va(this,"setInputElem",(e=>{this.inputElem=e})),Va(this,"onEditClick",(()=>{"password"===this.props.inputType?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)})),Va(this,"onCancelClick",(()=>{this.setState({editing:!1,value:this.props.value||""})})),Va(this,"onInputChange",((e,t)=>{t!==m.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),Va(this,"onInputBlur",((e,t)=>{t!==m.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),Va(this,"focusInput",(()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()})),Va(this,"onSave",(()=>{this.props.onChange&&this.props.onChange(this.state.value)}))}render(){const{label:e,locked:t,lockMessage:n,inputType:a}=this.props,{value:s}=this.state,i=(0,b.cx)("width-16",b.css`
        font-weight: 500;
      `);if(t)return(0,j.jsx)(Ua,{label:e,value:s,lockMessage:n});const r=`${e}-input`;return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:i,children:(0,j.jsx)("label",{htmlFor:r,children:e})}),(0,j.jsx)("td",{className:"width-25",colSpan:2,children:this.state.editing?(0,j.jsx)(m.Input,{id:r,type:a,defaultValue:s,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):(0,j.jsx)("span",{children:this.props.value})}),(0,j.jsx)("td",{children:(0,j.jsx)(m.ConfirmButton,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick,children:"Edit"})})]})}}Va(_a,"defaultProps",{value:"",locked:!1,lockMessage:"",inputType:"text"});const Ua=e=>{let{label:t,value:n,lockMessage:a}=e;const s=b.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,i=(0,b.cx)("width-16",b.css`
      font-weight: 500;
    `);return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:i,children:t}),(0,j.jsx)("td",{className:"width-25",colSpan:2,children:n}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:s,children:a})})]})};var Ha,Wa,qa=n(25235);function Za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ga extends d.PureComponent{constructor(){super(...arguments),Za(this,"forceAllLogoutButton",d.createRef()),Za(this,"state",{showLogoutModal:!1}),Za(this,"showLogoutConfirmationModal",(()=>{this.setState({showLogoutModal:!0})})),Za(this,"dismissLogoutConfirmationModal",(()=>{this.setState({showLogoutModal:!1},(()=>{var e;null===(e=this.forceAllLogoutButton.current)||void 0===e||e.focus()}))})),Za(this,"onSessionRevoke",(e=>()=>{this.props.onSessionRevoke(e)})),Za(this,"onAllSessionsRevoke",(()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}))}render(){const{sessions:e,i18n:t}=this.props,{showLogoutModal:n}=this.state,a=b.css`
      margin-top: 0.8rem;
    `,s=da.Vt.hasPermission(ca.bW.UsersLogout);return(0,j.jsxs)(j.Fragment,{children:[Ha||(Ha=(0,j.jsx)("h3",{className:"page-heading",children:"Sessions"})),(0,j.jsxs)("div",{className:"gf-form-group",children:[(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[Wa||(Wa=(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"Last seen"}),(0,j.jsx)("th",{children:"Logged on"}),(0,j.jsx)("th",{children:"IP address"}),(0,j.jsx)("th",{colSpan:2,children:"Browser and OS"})]})})),(0,j.jsx)("tbody",{children:e&&e.map(((e,n)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:e.isActive?"Now":e.seenAt}),(0,j.jsx)("td",{children:t.date(e.createdAt,{dateStyle:"long"})}),(0,j.jsx)("td",{children:e.clientIp}),(0,j.jsx)("td",{children:`${e.browser} on ${e.os} ${e.osVersion}`}),(0,j.jsx)("td",{children:(0,j.jsx)("div",{className:"pull-right",children:s&&(0,j.jsx)(m.ConfirmButton,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(e.id),autoFocus:!0,children:"Force logout"})})})]},`${e.id}-${n}`)))})]})}),(0,j.jsxs)("div",{className:a,children:[s&&e.length>0&&(0,j.jsx)(m.Button,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton,children:"Force logout from all devices"}),(0,j.jsx)(m.ConfirmModal,{isOpen:n,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal})]})]})]})}}const Ka=(0,qa.GV)()(Ga);var Qa=n(68671);function Ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ya extends d.PureComponent{constructor(){super(...arguments),Ja(this,"onUserUpdate",(e=>{this.props.updateUser(e)})),Ja(this,"onPasswordChange",(e=>{const{user:t,setUserPassword:n}=this.props;t&&n(t.id,e)})),Ja(this,"onUserDelete",(e=>{this.props.deleteUser(e)})),Ja(this,"onUserDisable",(e=>{this.props.disableUser(e)})),Ja(this,"onUserEnable",(e=>{this.props.enableUser(e)})),Ja(this,"onGrafanaAdminChange",(e=>{const{user:t,updateUserPermissions:n}=this.props;t&&n(t.id,e)})),Ja(this,"onOrgRemove",(e=>{const{user:t,deleteOrgUser:n}=this.props;t&&n(t.id,e)})),Ja(this,"onOrgRoleChange",((e,t)=>{const{user:n,updateOrgUserRole:a}=this.props;n&&a(n.id,e,t)})),Ja(this,"onOrgAdd",((e,t)=>{const{user:n,addOrgUser:a}=this.props;n&&a(n,e,t)})),Ja(this,"onSessionRevoke",(e=>{const{user:t,revokeSession:n}=this.props;t&&n(e,t.id)})),Ja(this,"onAllSessionsRevoke",(()=>{const{user:e,revokeAllSessions:t}=this.props;e&&t(e.id)})),Ja(this,"onUserSync",(()=>{const{user:e,syncLdapUser:t}=this.props;e&&t(e.id)}))}async componentDidMount(){const{match:e,loadAdminUserPage:t}=this.props;t(parseInt(e.params.id,10))}render(){const{navModel:e,user:t,orgs:n,sessions:a,ldapSyncInfo:s,isLoading:i}=this.props,r=t&&t.isExternal&&t.authLabels&&t.authLabels.includes("LDAP"),o=da.Vt.hasPermission(ca.bW.UsersAuthTokenList),l=da.Vt.hasPermission(ca.bW.LDAPStatusRead);return(0,j.jsx)(Ln.T,{navModel:e,children:(0,j.jsxs)(Ln.T.Contents,{isLoading:i,children:[t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ba,{user:t,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),r&&(0,h.featureEnabled)("ldapsync")&&s&&l&&(0,j.jsx)(ua,{ldapSyncInfo:s,user:t,onUserSync:this.onUserSync}),(0,j.jsx)(La,{isGrafanaAdmin:t.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})]}),n&&(0,j.jsx)(Sa,{user:t,orgs:n,isExternalUser:null==t?void 0:t.isExternal,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),a&&o&&(0,j.jsx)(Ka,{sessions:a,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})]})})}}const Xa={loadAdminUserPage:Qa.PK,updateUser:Qa.Nq,setUserPassword:Qa.tQ,disableUser:Qa.B9,enableUser:Qa.Dx,deleteUser:Qa.h8,updateUserPermissions:Qa.Xx,addOrgUser:Qa.bN,updateOrgUserRole:Qa.Jk,deleteOrgUser:Qa.uV,revokeSession:Qa._1,revokeAllSessions:Qa.Fm,syncLdapUser:Qa.CP},es=(0,An.connect)((e=>({navModel:(0,$n.h)(e.navIndex,"global-users"),user:e.userAdmin.user,sessions:e.userAdmin.sessions,orgs:e.userAdmin.orgs,ldapSyncInfo:e.ldap.syncInfo,isLoading:e.userAdmin.isLoading,error:e.userAdmin.error})),Xa)(Ya);var ts,ns,as,ss,is,rs,os;const ls=e=>{let{ldapConnectionInfo:t}=e;return(0,j.jsxs)(j.Fragment,{children:[ts||(ts=(0,j.jsx)("h3",{className:"page-heading",children:"LDAP Connection"})),(0,j.jsxs)("div",{className:"gf-form-group",children:[(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[ns||(ns=(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"Host"}),(0,j.jsx)("th",{colSpan:2,children:"Port"})]})})),(0,j.jsx)("tbody",{children:t&&t.map(((e,t)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:e.host}),(0,j.jsx)("td",{children:e.port}),(0,j.jsx)("td",{children:e.available?as||(as=(0,j.jsx)(m.Icon,{name:"check",className:"pull-right"})):ss||(ss=(0,j.jsx)(m.Icon,{name:"exclamation-triangle",className:"pull-right"}))})]},t)))})]})}),(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)(ds,{ldapConnectionInfo:t})})]})]})},ds=e=>{let{ldapConnectionInfo:t}=e;if(!t.some((e=>e.error)))return null;const n=[];t.forEach((e=>{e.error&&n.push(e)}));const a=n.map(((e,t)=>(0,j.jsxs)("div",{children:[(0,j.jsxs)("span",{style:{fontWeight:500},children:[e.host,":",e.port,is||(is=(0,j.jsx)("br",{}))]}),(0,j.jsx)("span",{children:e.error}),t!==n.length-1&&(0,j.jsxs)(j.Fragment,{children:[rs||(rs=(0,j.jsx)("br",{})),os||(os=(0,j.jsx)("br",{}))]})]},t)));return(0,j.jsx)(m.Alert,{title:"Connection error",severity:ca.F1.Error,children:a})};var cs,us,hs,ps,gs;function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fs extends d.PureComponent{constructor(){super(...arguments),ms(this,"state",{isSyncing:!1}),ms(this,"handleSyncClick",(()=>{this.setState({isSyncing:!this.state.isSyncing})}))}render(){const{ldapSyncInfo:e}=this.props,{isSyncing:t}=this.state,n=(0,u.dateTimeFormat)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("h3",{className:"page-heading",children:["LDAP Synchronisation",(0,j.jsxs)(m.Button,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0,children:[cs||(cs=(0,j.jsx)("span",{className:"btn-title",children:"Bulk-sync now"})),t&&(us||(us=(0,j.jsx)(m.Spinner,{inline:!0})))]})]}),(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("table",{className:"filter-table form-inline",children:(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{children:[hs||(hs=(0,j.jsx)("td",{children:"Active synchronisation"})),(0,j.jsx)("td",{colSpan:2,children:e.enabled?"Enabled":"Disabled"})]}),(0,j.jsxs)("tr",{children:[ps||(ps=(0,j.jsx)("td",{children:"Scheduled"})),(0,j.jsx)("td",{children:e.schedule})]}),(0,j.jsxs)("tr",{children:[gs||(gs=(0,j.jsx)("td",{children:"Next scheduled synchronisation"})),(0,j.jsx)("td",{children:n})]})]})})})})]})}}var vs,bs,xs,ys,ws;const js=e=>{let{groups:t,showAttributeMapping:n}=e;const a=n?t:t.filter((e=>e.orgRole));return(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[n&&(vs||(vs=(0,j.jsx)("th",{children:"LDAP Group"}))),bs||(bs=(0,j.jsxs)("th",{children:["Organization",(0,j.jsx)(m.Tooltip,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info",children:(0,j.jsx)("span",{className:"gf-form-help-icon",children:(0,j.jsx)(m.Icon,{name:"info-circle"})})})]})),xs||(xs=(0,j.jsx)("th",{children:"Role"}))]})}),(0,j.jsx)("tbody",{children:a.map(((e,t)=>(0,j.jsxs)("tr",{children:[n&&(0,j.jsx)("td",{children:e.groupDN}),e.orgName&&e.orgRole?(0,j.jsx)("td",{children:e.orgName}):ys||(ys=(0,j.jsx)("td",{})),e.orgRole?(0,j.jsx)("td",{children:e.orgRole}):ws||(ws=(0,j.jsx)("td",{children:(0,j.jsxs)("span",{className:"text-warning",children:["No match",(0,j.jsx)(m.Tooltip,{placement:"top",content:"No matching groups found",theme:"info",children:(0,j.jsx)("span",{className:"gf-form-help-icon",children:(0,j.jsx)(m.Icon,{name:"info-circle"})})})]})}))]},`${e.orgId}-${t}`)))})]})})})};var Ss,Cs,ks,Ts,Is,Os;const Ns=e=>{let{info:t,showAttributeMapping:n}=e;return(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[Ss||(Ss=(0,j.jsx)("th",{colSpan:2,children:"User information"})),n&&(Cs||(Cs=(0,j.jsx)("th",{children:"LDAP attribute"})))]})}),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{children:[ks||(ks=(0,j.jsx)("td",{className:"width-16",children:"First name"})),(0,j.jsx)("td",{children:t.name.ldapValue}),n&&(0,j.jsx)("td",{children:t.name.cfgAttrValue})]}),(0,j.jsxs)("tr",{children:[Ts||(Ts=(0,j.jsx)("td",{className:"width-16",children:"Surname"})),(0,j.jsx)("td",{children:t.surname.ldapValue}),n&&(0,j.jsx)("td",{children:t.surname.cfgAttrValue})]}),(0,j.jsxs)("tr",{children:[Is||(Is=(0,j.jsx)("td",{className:"width-16",children:"Username"})),(0,j.jsx)("td",{children:t.login.ldapValue}),n&&(0,j.jsx)("td",{children:t.login.cfgAttrValue})]}),(0,j.jsxs)("tr",{children:[Os||(Os=(0,j.jsx)("td",{className:"width-16",children:"Email"})),(0,j.jsx)("td",{children:t.email.ldapValue}),n&&(0,j.jsx)("td",{children:t.email.cfgAttrValue})]})]})]})})})};var Fs,Ds,Ps,As,Ms,Rs;const $s=e=>{let{permissions:t}=e;return(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[Fs||(Fs=(0,j.jsx)("thead",{children:(0,j.jsx)("tr",{children:(0,j.jsx)("th",{colSpan:1,children:"Permissions"})})})),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{children:[Ds||(Ds=(0,j.jsx)("td",{className:"width-16",children:" Grafana admin"})),(0,j.jsx)("td",{children:t.isGrafanaAdmin?(0,j.jsxs)(j.Fragment,{children:[Ps||(Ps=(0,j.jsx)(m.Icon,{name:"shield"}))," Yes"]}):"No"})]}),(0,j.jsxs)("tr",{children:[As||(As=(0,j.jsx)("td",{className:"width-16",children:"Status"})),(0,j.jsx)("td",{children:t.isDisabled?(0,j.jsxs)(j.Fragment,{children:[Ms||(Ms=(0,j.jsx)(m.Icon,{name:"times"}))," Inactive"]}):(0,j.jsxs)(j.Fragment,{children:[Rs||(Rs=(0,j.jsx)(m.Icon,{name:"check"}))," Active"]})})]})]})]})})})};var Ls,Es,Vs,Bs,zs;const _s=e=>{let{teams:t,showAttributeMapping:n}=e;const a=n?t:t.filter((e=>e.teamName));return(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[n&&(Ls||(Ls=(0,j.jsx)("th",{children:"LDAP Group"}))),Es||(Es=(0,j.jsx)("th",{children:"Organisation"})),Vs||(Vs=(0,j.jsx)("th",{children:"Team"}))]})}),(0,j.jsx)("tbody",{children:a.map(((e,t)=>(0,j.jsxs)("tr",{children:[n&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{children:e.groupDN}),!e.orgName&&(0,j.jsxs)(j.Fragment,{children:[Bs||(Bs=(0,j.jsx)("td",{})),zs||(zs=(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"text-warning",children:["No match",(0,j.jsx)(m.Tooltip,{placement:"top",content:"No matching teams found",theme:"info",children:(0,j.jsx)("span",{className:"gf-form-help-icon",children:(0,j.jsx)(m.Icon,{name:"info-circle"})})})]})}))]})]}),e.orgName&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{children:e.orgName}),(0,j.jsx)("td",{children:e.teamName})]})]},`${e.teamName}-${t}`)))})]})})})};var Us;const Hs=e=>{let{ldapUser:t,showAttributeMapping:n}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ns,{info:t.info,showAttributeMapping:n}),(0,j.jsx)($s,{permissions:t.permissions}),t.roles&&t.roles.length>0&&(0,j.jsx)(js,{groups:t.roles,showAttributeMapping:n}),t.teams&&t.teams.length>0?(0,j.jsx)(_s,{teams:t.teams,showAttributeMapping:n}):Us||(Us=(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("table",{className:"filter-table form-inline",children:(0,j.jsx)("tbody",{children:(0,j.jsx)("tr",{children:(0,j.jsx)("td",{children:"No teams found via LDAP"})})})})})}))]})};var Ws,qs;function Zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{FormField:Gs}=m.LegacyForms;class Ks extends d.PureComponent{constructor(){super(...arguments),Zs(this,"state",{isLoading:!0}),Zs(this,"search",(e=>{e.preventDefault();const t=e.target.elements.username.value;t&&this.fetchUserMapping(t)})),Zs(this,"onClearUserError",(()=>{this.props.clearUserError()}))}async componentDidMount(){const{clearUserMappingInfo:e,queryParams:t}=this.props;await e(),await this.fetchLDAPStatus(),t.username&&await this.fetchUserMapping(t.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:e,loadLdapSyncStatus:t}=this.props;return Promise.all([e(),t()])}async fetchUserMapping(e){const{loadUserMapping:t}=this.props;return await t(e)}render(){const{ldapUser:e,userError:t,ldapError:n,ldapSyncInfo:a,ldapConnectionInfo:s,navModel:i,queryParams:r}=this.props,{isLoading:o}=this.state,l=da.Vt.hasPermission(ca.bW.LDAPUsersRead);return(0,j.jsx)(Ln.T,{navModel:i,children:(0,j.jsx)(Ln.T.Contents,{isLoading:o,children:(0,j.jsxs)(j.Fragment,{children:[n&&n.title&&(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)(m.Alert,{title:n.title,severity:ca.F1.Error,children:n.body})}),(0,j.jsx)(ls,{ldapConnectionInfo:s}),(0,h.featureEnabled)("ldapsync")&&a&&(0,j.jsx)(fs,{ldapSyncInfo:a}),l&&(0,j.jsxs)(j.Fragment,{children:[Ws||(Ws=(0,j.jsx)("h3",{className:"page-heading",children:"Test user mapping"})),(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsxs)("form",{onSubmit:this.search,className:"gf-form-inline",children:[(0,j.jsx)(Gs,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:r.username}),qs||(qs=(0,j.jsx)(m.Button,{type:"submit",children:"Run"}))]})}),t&&t.title&&(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)(m.Alert,{title:t.title,severity:ca.F1.Error,onRemove:this.onClearUserError,children:t.body})}),e&&(0,j.jsx)(Hs,{ldapUser:e,showAttributeMapping:!0})]})]})})})}}const Qs={loadLdapState:Qa.Y3,loadLdapSyncStatus:Qa.j4,loadUserMapping:Qa.b_,clearUserError:Qa.V0,clearUserMappingInfo:Qa.IS},Js=(0,An.connect)((e=>({navModel:(0,$n.h)(e.navIndex,"ldap"),ldapConnectionInfo:e.ldap.connectionInfo,ldapUser:e.ldap.user,ldapSyncInfo:e.ldap.syncInfo,userError:e.ldap.userError,ldapError:e.ldap.ldapError})),Qs)(Ks);var Ys,Xs,ei,ti,ni,ai=n(72573),si=n.n(ai),ii=n(71290);const ri=(0,m.stylesFactory)((()=>b.css`
    width: 508px;
    margin: 128px auto;
  `)),oi=e=>{let{error:t}=e;const[n,a]=(0,ii.H)();return n.get("chunkNotFound")||(a({chunkNotFound:!0},!0),window.location.reload()),(0,j.jsxs)("div",{className:ri(),children:[Ys||(Ys=(0,j.jsx)("h2",{children:"Unable to find application file"})),Xs||(Xs=(0,j.jsx)("br",{})),ei||(ei=(0,j.jsx)("h2",{className:"page-heading",children:"Grafana has likely been updated. Please try reloading the page."})),ti||(ti=(0,j.jsx)("br",{})),(0,j.jsx)("div",{className:"gf-form-group",children:(0,j.jsx)(m.Button,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload(),children:"Reload"})}),(0,j.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[t&&t.message?t.message:"Unexpected error occurred",ni||(ni=(0,j.jsx)("br",{})),t&&t.stack?t.stack:null]})]})};var li;oi.displayName="ErrorLoadingChunk";const di=d.memo((()=>li||(li=(0,j.jsx)("div",{className:"preloader",children:(0,j.jsx)(m.LoadingPlaceholder,{text:"Loading..."})}))));var ci;di.displayName="LoadingChunkPlaceHolder";const ui=e=>{const{error:t,pastDelay:n}=e;return t?(0,j.jsx)(oi,{error:t}):n?ci||(ci=(0,j.jsx)(di,{})):null},hi=e=>si()({loader:e,loading:ui});var pi,gi=n(82969);const mi=[{path:"/alerting",component:()=>pi||(pi=(0,j.jsx)(Mn.l_,{to:"/alerting/list"}))}],fi=[...mi,{path:"/alerting/list",component:hi((()=>Promise.all([n.e(5704),n.e(7062),n.e(2461)]).then(n.bind(n,10029))))},{path:"/alerting/ng/list",component:hi((()=>n.e(4286).then(n.bind(n,10029))))},{path:"/alerting/notifications",roles:f.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:hi((()=>n.e(6618).then(n.bind(n,80892))))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:hi((()=>n.e(6618).then(n.bind(n,80892))))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:hi((()=>n.e(6618).then(n.bind(n,80892))))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:hi((()=>n.e(6618).then(n.bind(n,80892))))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:hi((()=>n.e(6618).then(n.bind(n,80892))))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:hi((()=>n.e(6618).then(n.bind(n,80892))))},{path:"/alerting/notification/new",component:hi((()=>n.e(476).then(n.bind(n,77264))))},{path:"/alerting/notification/:id/edit",component:hi((()=>n.e(7384).then(n.bind(n,13239))))}],vi=[...mi,{path:"/alerting/list",roles:(0,gi.ql)([ca.bW.AlertingRuleRead,ca.bW.AlertingRuleExternalRead],[u.OrgRole.Viewer,u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>Promise.all([n.e(5704),n.e(7062),n.e(2461)]).then(n.bind(n,53838))))},{path:"/alerting/routes",roles:(0,gi.ql)([ca.bW.AlertingNotificationsRead,ca.bW.AlertingNotificationsExternalRead],[u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>n.e(8648).then(n.bind(n,89905))))},{path:"/alerting/routes/mute-timing/new",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(9355).then(n.bind(n,13730))))},{path:"/alerting/routes/mute-timing/edit",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(9355).then(n.bind(n,13730))))},{path:"/alerting/silences",roles:(0,gi.ql)([ca.bW.AlertingInstanceRead,ca.bW.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:hi((()=>n.e(1783).then(n.bind(n,43298))))},{path:"/alerting/silence/new",roles:(0,gi.ql)([ca.bW.AlertingInstanceCreate,ca.bW.AlertingInstancesExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(1783).then(n.bind(n,43298))))},{path:"/alerting/silence/:id/edit",roles:(0,gi.ql)([ca.bW.AlertingInstanceUpdate,ca.bW.AlertingInstancesExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(1783).then(n.bind(n,43298))))},{path:"/alerting/notifications",roles:(0,gi.ql)([ca.bW.AlertingNotificationsRead,ca.bW.AlertingNotificationsExternalRead],["Editor","Admin"]),component:hi((()=>n.e(6618).then(n.bind(n,24136))))},{path:"/alerting/notifications/templates/new",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(6618).then(n.bind(n,24136))))},{path:"/alerting/notifications/templates/:id/edit",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(6618).then(n.bind(n,24136))))},{path:"/alerting/notifications/receivers/new",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(6618).then(n.bind(n,24136))))},{path:"/alerting/notifications/receivers/:id/edit",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(6618).then(n.bind(n,24136))))},{path:"/alerting/notifications/global-config",roles:(0,gi.ql)([ca.bW.AlertingNotificationsWrite,ca.bW.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:hi((()=>n.e(6618).then(n.bind(n,24136))))},{path:"/alerting/groups/",roles:(0,gi.ql)([ca.bW.AlertingInstanceRead,ca.bW.AlertingInstancesExternalRead],[u.OrgRole.Viewer,u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>n.e(2415).then(n.bind(n,2842))))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,gi.ql)([ca.bW.AlertingRuleCreate,ca.bW.AlertingRuleExternalWrite],[u.OrgRole.Viewer,u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>n.e(5372).then(n.bind(n,65183))))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,gi.ql)([ca.bW.AlertingRuleUpdate,ca.bW.AlertingRuleExternalWrite],[u.OrgRole.Viewer,u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>n.e(5372).then(n.bind(n,65183))))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,gi.ql)([ca.bW.AlertingRuleRead,ca.bW.AlertingRuleExternalRead],[u.OrgRole.Viewer,u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>Promise.all([n.e(5704),n.e(7062),n.e(4679)]).then(n.bind(n,84987))))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,gi.ql)([ca.bW.AlertingRuleRead,ca.bW.AlertingRuleExternalRead],[u.OrgRole.Viewer,u.OrgRole.Editor,u.OrgRole.Admin]),component:hi((()=>n.e(7918).then(n.bind(n,20293))))},{path:"/alerting/admin",roles:()=>["Admin"],component:hi((()=>Promise.all([n.e(4643),n.e(7680)]).then(n.bind(n,18673))))}];function bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.vc;if(e.unifiedAlertingEnabled)return vi;if(e.alertingEnabled)return fi;const t=(0,o.uniq)([...fi,...vi].map((e=>e.path)));return t.map((e=>({path:e,component:hi((()=>n.e(1333).then(n.bind(n,83819))))})))}var xi=n(79383);var yi=n(78507),wi=n(41266);const ji=[{path:"/live",component:hi((()=>n.e(2120).then(n.bind(n,6006))))},{path:"/live/pipeline",component:hi((()=>n.e(2651).then(n.bind(n,42509))))},{path:"/live/cloud",component:hi((()=>n.e(5310).then(n.bind(n,20238))))}];function Si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.vc;return(0,wi.bO)()?e.featureToggles["live-pipeline"]?ji:ji.map((e=>Object.assign({},e,{component:hi((()=>n.e(7586).then(n.bind(n,67471))))}))):[]}var Ci=n(79729);const ki=[{path:"/plugins",navId:"plugins",routeName:Ci.cd.Home,component:hi((()=>n.e(94).then(n.bind(n,62591))))},{path:"/plugins/browse",navId:"plugins",routeName:Ci.cd.Browse,component:hi((()=>n.e(94).then(n.bind(n,62591))))},{path:"/plugins/:pluginId/",navId:"plugins",routeName:Ci.cd.Details,component:hi((()=>Promise.all([n.e(4643),n.e(2417)]).then(n.bind(n,23090))))}],Ti=[{path:"/admin/plugins",navId:"admin-plugins",routeName:Ci.cd.HomeAdmin,component:hi((()=>n.e(94).then(n.bind(n,62591))))},{path:"/admin/plugins/browse",navId:"admin-plugins",routeName:Ci.cd.BrowseAdmin,component:hi((()=>n.e(94).then(n.bind(n,62591))))},{path:"/admin/plugins/:pluginId/",navId:"admin-plugins",routeName:Ci.cd.DetailsAdmin,component:hi((()=>Promise.all([n.e(4643),n.e(2417)]).then(n.bind(n,23090))))}];const Ii=[{path:"/profile",component:hi((()=>n.e(7323).then(n.bind(n,92795))))},{path:"/profile/password",component:hi((()=>n.e(6788).then(n.bind(n,26788))))},{path:"/profile/select-org",component:hi((()=>n.e(1456).then(n.bind(n,44706))))},{path:"/profile/notifications",component:hi((()=>n.e(743).then(n.bind(n,73810))))}];function Oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.vc;if(e.profileEnabled)return Ii;const t=(0,o.uniq)(Ii.map((e=>e.path)));return t.map((e=>({path:e,component:hi((()=>n.e(3395).then(n.bind(n,97217))))})))}var Ni=n(83654);const Fi=e=>{const t=la.Vt.hasPermissionInMetadata(ca.bW.ServiceAccountsPermissionsWrite,e.serviceAccount);return(0,j.jsx)(Ni.P,{title:"Permissions",addPermissionTitle:"Add permission",buttonLabel:"Add permission",resource:"serviceaccounts",resourceId:e.serviceAccount.id,canSetPermissions:t})};var Di=n(26343);const Pi=e=>{let{label:t,value:n,inputType:a,disabled:s,onChange:i}=e;const r=(0,d.useRef)(null),[o,l]=(0,d.useState)(n),[c,u]=(0,d.useState)(!1),h=(0,m.useStyles2)(Ai),p=`${t}-input`;(0,d.useEffect)((()=>{c&&g()}),[c]);const g=()=>{var e;null==r||null===(e=r.current)||void 0===e||e.focus()};return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsx)(m.Label,{htmlFor:p,children:t})}),(0,j.jsx)("td",{className:"width-25",colSpan:2,children:!s&&c?(0,j.jsx)(m.Input,{id:p,type:a,defaultValue:n,onBlur:(e,t)=>{t!==m.LegacyInputStatus.Invalid&&l(e.target.value)},onChange:(e,t)=>{t!==m.LegacyInputStatus.Invalid&&l(e.target.value)},ref:r,width:30}):(0,j.jsx)("span",{className:(0,b.cx)({[h.disabled]:s}),children:n})}),(0,j.jsx)("td",{children:i&&(0,j.jsx)(m.ConfirmButton,{closeOnConfirm:!0,confirmText:"Save",onConfirm:()=>{u(!1),i&&i(o)},onClick:()=>{u(!0)},onCancel:()=>{u(!1),l(n||"")},disabled:s,children:"Edit"})})]})},Ai=e=>({disabled:b.css`
      color: ${e.colors.text.secondary};
    `});var Mi;const Ri=e=>{let{label:t,serviceAccount:n,roleOptions:a,builtInRoles:s,onRoleChange:i}=e;const r=`${t}-input`,o=da.Vt.hasPermissionInMetadata(ca.bW.ServiceAccountsWrite,n);return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsx)(m.Label,{htmlFor:r,children:t})}),da.Vt.licensedAccessControlEnabled()?(0,j.jsx)("td",{className:"width-25",colSpan:3,children:(0,j.jsx)(ha.R,{userId:n.id,orgId:n.orgId,builtInRole:n.role,onBuiltinRoleChange:i,roleOptions:a,builtInRoles:s,builtinRolesDisabled:!o,disabled:n.isDisabled})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{children:(0,j.jsx)(wa.A,{width:24,inputId:r,"aria-label":"Role",value:n.role,disabled:n.isDisabled,onChange:i})}),Mi||(Mi=(0,j.jsx)("td",{colSpan:2}))]})]})};var $i;function Li(e){let{serviceAccount:t,timeZone:n,roleOptions:a,builtInRoles:s,onChange:i}=e;const r=(0,m.useStyles2)(Ei),o=da.Vt.hasPermission(ca.bW.ServiceAccountsWrite);return(0,j.jsxs)("div",{className:r.section,children:[$i||($i=(0,j.jsx)("h3",{children:"Information"})),(0,j.jsx)("table",{className:"filter-table",children:(0,j.jsxs)("tbody",{children:[(0,j.jsx)(Pi,{label:"Name",value:t.name,onChange:e=>{i(Object.assign({},t,{name:e}))},disabled:!o||t.isDisabled}),(0,j.jsx)(Pi,{label:"ID",value:t.login,disabled:t.isDisabled}),(0,j.jsx)(Ri,{label:"Roles",serviceAccount:t,onRoleChange:e=>{i(Object.assign({},t,{role:e}))},builtInRoles:s,roleOptions:a}),(0,j.jsx)(Pi,{label:"Creation date",value:(0,u.dateTimeFormat)(t.createdAt,{timeZone:n}),disabled:t.isDisabled})]})})]})}const Ei=e=>({section:b.css`
    margin-bottom: ${e.spacing(4)};
  `});var Vi;const Bi=e=>{let{tokens:t,timeZone:n,tokenActionsDisabled:a,onDelete:s}=e;const i=(0,m.useTheme2)(),r=Wi(i);return(0,j.jsxs)("table",{className:(0,b.cx)(r.section,"filter-table"),children:[Vi||(Vi=(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"Name"}),(0,j.jsx)("th",{children:"Expires"}),(0,j.jsx)("th",{children:"Created"}),(0,j.jsx)("th",{children:"Last used at"}),(0,j.jsx)("th",{})]})})),(0,j.jsx)("tbody",{children:t.map((e=>(0,j.jsxs)("tr",{className:r.tableRow(e.hasExpired),children:[(0,j.jsx)("td",{children:e.name}),(0,j.jsx)("td",{children:(0,j.jsx)(Hi,{timeZone:n,token:e})}),(0,j.jsx)("td",{children:_i(n,e.created)}),(0,j.jsx)("td",{children:zi(n,e.lastUsedAt)}),(0,j.jsx)("td",{children:(0,j.jsx)(m.DeleteButton,{"aria-label":`Delete service account token ${e.name}`,size:"sm",onConfirm:()=>s(e),disabled:a})})]},e.id)))})]})};function zi(e,t){return t?(0,u.dateTimeFormat)(t,{timeZone:e}):"Never"}function _i(e,t){return t?(0,u.dateTimeFormat)(t,{timeZone:e}):"No expiration date"}function Ui(e){const t=Math.ceil(e/86400);return`Expires in ${t>1?`${t} days`:`${t} day`}`}const Hi=e=>{let{timeZone:t,token:n}=e;const a=(0,m.useStyles2)(Wi);return n.expiration?n.secondsUntilExpiration?(0,j.jsx)("span",{className:a.secondsUntilExpiration,children:Ui(n.secondsUntilExpiration)}):n.hasExpired?(0,j.jsxs)("span",{className:a.hasExpired,children:["Expired",(0,j.jsx)("span",{className:a.tooltipContainer,children:(0,j.jsx)(m.Tooltip,{content:"This token has expired",children:(0,j.jsx)(m.Icon,{name:"exclamation-triangle",className:a.toolTipIcon})})})]}):(0,j.jsx)("span",{children:_i(t,n.expiration)}):(0,j.jsx)("span",{className:a.neverExpire,children:"Never"})},Wi=e=>({tableRow:t=>b.css`
    color: ${t?e.colors.text.secondary:e.colors.text.primary};
  `,tooltipContainer:b.css`
    margin-left: ${e.spacing(1)};
  `,toolTipIcon:b.css`
    color: ${e.colors.error.text};
  `,secondsUntilExpiration:b.css`
    color: ${e.colors.warning.text};
  `,hasExpired:b.css`
    color: ${e.colors.error.text};
  `,neverExpire:b.css`
    color: ${e.colors.text.secondary};
  `,section:b.css`
    margin-bottom: ${e.spacing(4)};
  `});var qi=n(79710),Zi=n(66728),Gi=n(88001);const Ki="/api/serviceaccounts";function Qi(e){return async t=>{t((0,Gi.s3)());try{const n=await(0,h.getBackendSrv)().get(`${Ki}/${e}`,(0,Zi.y)());t((0,Gi.P4)(n))}catch(e){console.error(e)}finally{t((0,Gi.LA)())}}}function Ji(e){return async t=>{try{const n=await(0,h.getBackendSrv)().get(`${Ki}/${e}/tokens`);t((0,Gi.e7)(n))}catch(e){console.error(e)}}}var Yi;const Xi={createServiceAccountToken:function(e,t,n){return async a=>{const s=await(0,h.getBackendSrv)().post(`${Ki}/${e}/tokens`,t);n(s.key),a(Ji(e))}},deleteServiceAccount:function(e){return async()=>{await(0,h.getBackendSrv)().delete(`${Ki}/${e}`),h.locationService.push("/org/serviceaccounts")}},deleteServiceAccountToken:function(e,t){return async n=>{await(0,h.getBackendSrv)().delete(`${Ki}/${e}/tokens/${t}`),n(Ji(e))}},loadServiceAccount:Qi,loadServiceAccountTokens:Ji,updateServiceAccount:function(e){return async t=>{await(0,h.getBackendSrv)().patch(`${Ki}/${e.id}?accesscontrol=true`,Object.assign({},e)),t(Qi(e.id))}}},er=(0,An.connect)((function(e){return{serviceAccount:e.serviceAccountProfile.serviceAccount,tokens:e.serviceAccountProfile.tokens,isLoading:e.serviceAccountProfile.isLoading,roleOptions:e.serviceAccounts.roleOptions,builtInRoles:e.serviceAccounts.builtInRoles,timezone:(0,u.getTimeZone)(e.user)}}),Xi),tr=e=>({headerContainer:b.css`
      display: flex;
      margin-bottom: ${e.spacing(2)};
      align-items: center;

      h3 {
        margin-bottom: ${e.spacing(.5)};
        flex-grow: 1;
      }
    `,headerAvatar:b.css`
      margin-right: ${e.spacing(1)};
      margin-bottom: ${e.spacing(.6)};
      img {
        width: 25px;
        height: 25px;
        border-radius: 50%;
      }
    `,returnButton:b.css`
      margin-right: ${e.spacing(1)};
    `,buttonRow:b.css`
      > * {
        margin-right: ${e.spacing(2)};
      }
    `,pageBody:b.css`
      padding-left: ${e.spacing(5.5)};
    `,tokensListHeader:b.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
    `}),nr=er((e=>{let{match:t,serviceAccount:n,tokens:a,timezone:s,isLoading:i,roleOptions:r,builtInRoles:o,createServiceAccountToken:l,deleteServiceAccount:c,deleteServiceAccountToken:u,loadServiceAccount:h,loadServiceAccountTokens:p,updateServiceAccount:g}=e;const[f,v]=(0,d.useState)(""),[b,x]=(0,d.useState)(!1),[y,w]=(0,d.useState)(!1),[S,C]=(0,d.useState)(!1),k=(0,m.useStyles2)(tr),T=parseInt(t.params.id,10),I=!da.Vt.hasPermission(ca.bW.ServiceAccountsWrite)||n.isDisabled,O=da.Vt.hasPermission(ca.bW.ServiceAccountsWrite),N=da.Vt.hasAccessInMetadata(ca.bW.ServiceAccountsPermissionsRead,n,!1);(0,d.useEffect)((()=>{h(T),p(T),da.Vt.licensedAccessControlEnabled()&&(0,qi.bX)()}),[h,p,T]);const F=e=>()=>{w(e)},D=e=>()=>{C(e)};return(0,j.jsx)(Ln.T,{navId:"serviceaccounts",children:(0,j.jsxs)(Ln.T.Contents,{isLoading:i,children:[n&&(0,j.jsxs)("div",{className:k.headerContainer,children:[(0,j.jsx)("a",{href:"org/serviceaccounts",children:(0,j.jsx)(m.IconButton,{size:"xxl",variant:"secondary",name:"arrow-left",className:k.returnButton,"aria-label":"Back to service accounts list"})}),(0,j.jsx)("div",{className:k.headerAvatar,children:(0,j.jsx)("img",{src:n.avatarUrl,alt:`Avatar for user ${n.name}`})}),(0,j.jsx)("h3",{children:n.name}),(0,j.jsxs)("div",{className:k.buttonRow,children:[(0,j.jsx)(m.Button,{type:"button",variant:"destructive",onClick:F(!0),disabled:!da.Vt.hasPermission(ca.bW.ServiceAccountsDelete),children:"Delete service account"}),n.isDisabled?(0,j.jsx)(m.Button,{type:"button",variant:"secondary",onClick:()=>{g(Object.assign({},n,{isDisabled:!1}))},disabled:!O,children:"Enable service account"}):(0,j.jsx)(m.Button,{type:"button",variant:"secondary",onClick:D(!0),disabled:!O,children:"Disable service account"})]})]}),(0,j.jsxs)("div",{className:k.pageBody,children:[n&&(0,j.jsx)(Li,{serviceAccount:n,timeZone:s,roleOptions:r,builtInRoles:o,onChange:e=>{g(e)}}),(0,j.jsxs)("div",{className:k.tokensListHeader,children:[Yi||(Yi=(0,j.jsx)("h3",{children:"Tokens"})),(0,j.jsx)(m.Button,{onClick:()=>x(!0),disabled:I,children:"Add service account token"})]}),a&&(0,j.jsx)(Bi,{tokens:a,timeZone:s,onDelete:e=>{u(null==n?void 0:n.id,e.id)},tokenActionsDisabled:I}),N&&(0,j.jsx)(Fi,{serviceAccount:n})]}),(0,j.jsx)(m.ConfirmModal,{isOpen:y,title:"Delete service account",body:"Are you sure you want to delete this service account?",confirmText:"Delete service account",onConfirm:()=>{c(n.id)},onDismiss:F(!1)}),(0,j.jsx)(m.ConfirmModal,{isOpen:S,title:"Disable service account",body:"Are you sure you want to disable this service account?",confirmText:"Disable service account",onConfirm:()=>{g(Object.assign({},n,{isDisabled:!0})),C(!1)},onDismiss:D(!1)}),(0,j.jsx)(Di.m,{isOpen:b,token:f,serviceAccountLogin:n.login,onCreateToken:e=>{l(null==n?void 0:n.id,e,v)},onClose:()=>{x(!1),v("")}})]})})}));var ar,sr,ir;const rr=[];function or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.ZP;return e.featureToggles.dashboardsFromStorage?[{path:"/g/:slug*.json",pageClass:"page-dashboard",routeName:ca.vq.Path,component:hi((()=>Promise.all([n.e(5704),n.e(8876),n.e(7062),n.e(9586),n.e(7638),n.e(97),n.e(6549),n.e(3833),n.e(5296)]).then(n.bind(n,16145))))},{path:"/g/:slug*",component:hi((()=>n.e(6092).then(n.bind(n,98536))))}]:[]}function lr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.ZP;return e.featureToggles.scenes?[{path:"/scenes",component:hi((()=>n.e(207).then(n.bind(n,54531))))},{path:"/scenes/:name",component:hi((()=>n.e(207).then(n.bind(n,11471))))}]:[]}var dr=n(56340);const cr=d.forwardRef(((e,t)=>(0,j.jsx)("div",{id:"ngRoot",ref:t,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}})));cr.displayName="AngularRoot";var ur=n(48063),hr=n(21169),pr=n(5831),gr=n(63310),mr=n(67163);const fr=(e,t,n)=>{const{isSignedIn:a,user:s}=la.Vt,i=()=>{pr.Z.publish(new hr.Dn({component:mr.B}))};if(s&&s.orgCount>1){const t=e.find((e=>"profile"===e.id));t&&(t.showOrgSwitcher=!0,t.subTitle=`Current Org.: ${null==s?void 0:s.orgName}`)}if(!a){const n=(e=>{const t=new URLSearchParams(e.split("?")[1]);return t.append("forceLogin","true"),`${(0,f.iE)().appSubUrl}${e.split("?")[0]}?${t.toString()}`})(t.pathname+t.search);e.unshift({icon:"signout",id:"signin",section:u.NavSection.Config,target:"_self",text:"Sign in",url:n})}return e.forEach(((e,t)=>{let a=e.children||[];"help"===e.id&&(e.children=[...(0,gr.dP)(),{id:"keyboard-shortcuts",text:"Keyboard shortcuts",icon:"keyboard",onClick:i}]),e.showOrgSwitcher&&(e.children=[...a,{id:"switch-organization",text:"Switch organization",icon:"arrow-random",onClick:n}])})),e},vr=(e,t)=>{const n=e.onClick;return e.onClick=()=>{var a;(0,h.reportInteraction)("grafana_navigation_item_clicked",{path:null!==(a=e.url)&&void 0!==a?a:e.id,state:t?"expanded":"collapsed"}),null==n||n()},e.children&&(e.children=e.children.map((e=>vr(e,t)))),e},br=(e,t)=>{var n;return Boolean(e===t||(null===(n=e.children)||void 0===n?void 0:n.some((e=>e===t))))},xr=e=>{var t;return null!==(t=null==e?void 0:e.split("?")[0])&&void 0!==t?t:""},yr=(e,t)=>{const n=xr(null==t?void 0:t.url),a=xr(e.url);return a&&a.length>(null==n?void 0:n.length)},wr=(e,t,n)=>{for(const s of e){var a;const e=xr(s.url),i=u.locationUtil.stripBaseFromUrl(e);if(i){if(i===t){n=s;break}if("/"!==i&&t.startsWith(i))yr(s,n)&&(n=s);else{if("/alerting/list"===i&&t.startsWith("/alerting/notification/")){n=s;break}"/dashboards"===i&&t.startsWith("/d/")&&yr(s,n)&&(n=s)}}if(s.children&&(n=wr(s.children,t,n)),xr(null===(a=n)||void 0===a?void 0:a.url)===t)return n}return n};function jr(e){var t;return null!==(t=e.id)&&void 0!==t?t:e.text}var Sr=n(50984),Cr=n(40059),kr=n(63805),Tr=n(40284);const Ir=40;var Or=n(92115);const Nr=e=>{let{children:t}=e;const n=(0,m.useStyles2)(Fr);return(0,j.jsxs)("div",{children:[t,(0,j.jsx)("span",{className:n.highlight})]})},Fr=e=>({highlight:b.css`
      background-color: ${e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function Dr(e){var t,n,a;let{label:s,children:i,url:r,target:o,isActive:l=!1,onClick:d,highlightText:c,className:u,elClassName:h}=e;const p=Pr((0,m.useTheme2)(),l),g=c?(0,j.jsx)(Nr,{children:(0,j.jsx)("div",{className:p.icon,children:i})}):(0,j.jsx)("div",{className:p.icon,children:i}),f=(0,b.cx)(p.element,h);return(0,j.jsx)("div",{className:(0,b.cx)(p.container,u),children:r?!o&&r.startsWith("/")?n||(n=(0,j.jsx)(m.Link,{className:f,href:r,target:o,"aria-label":s,onClick:d,"aria-haspopup":"true",children:g})):a||(a=(0,j.jsx)("a",{href:r,target:o,className:f,onClick:d,"aria-label":s,children:g})):t||(t=(0,j.jsx)("button",{className:f,onClick:d,"aria-label":s,children:g}))})}function Pr(e,t){return{container:(0,b.css)({position:"relative",color:t?e.colors.text.primary:e.colors.text.secondary,display:"grid","&:hover":{backgroundColor:e.colors.action.hover,color:e.colors.text.primary}}),element:(0,b.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:t?"block":"none",content:"' '",position:"absolute",left:e.spacing(1),top:e.spacing(1.5),bottom:e.spacing(1.5),width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:e.colors.action.hover,boxShadow:"none",color:e.colors.text.primary,outline:`${e.shape.borderRadius(1)} solid ${e.colors.primary.main}`,outlineOffset:`-${e.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,b.css)({height:"100%",width:"100%",img:{borderRadius:"50%",height:e.spacing(3),width:e.spacing(3)}})}}function Ar(e){let{icon:t,isActive:n,isDivider:a,onClick:s,styleOverrides:i,target:r,text:o,url:l,isMobile:d=!1}=e;const c=(0,m.useTheme2)(),u=Mr(c,n),h=(0,b.cx)(u.element,i),p=(0,j.jsxs)("div",{className:u.linkContent,children:[t&&(0,j.jsx)(m.Icon,{"data-testid":"dropdown-child-icon",name:t}),(0,j.jsx)("div",{className:u.linkText,children:o}),"_blank"===r&&(0,j.jsx)(m.Icon,{"data-testid":"external-link-icon",name:"external-link-alt",className:u.externalLinkIcon})]});let g=(0,j.jsx)("button",{className:h,onClick:s,tabIndex:-1,children:p});return l&&(g=!r&&l.startsWith("/")?(0,j.jsx)(m.Link,{className:h,href:l,target:r,onClick:s,tabIndex:d?0:-1,children:p}):(0,j.jsx)("a",{href:l,target:r,className:h,onClick:s,tabIndex:d?0:-1,children:p})),d?a?(0,j.jsx)("li",{"data-testid":"dropdown-child-divider",className:u.divider,tabIndex:-1,"aria-disabled":!0}):(0,j.jsx)("li",{className:u.listItem,children:g}):a?(0,j.jsx)("div",{"data-testid":"dropdown-child-divider",className:u.divider,tabIndex:-1,"aria-disabled":!0}):(0,j.jsx)("div",{style:{position:"relative"},children:g})}Ar.displayName="NavBarMenuItem";const Mr=(e,t)=>({linkContent:(0,b.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,b.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,b.css)({color:e.colors.text.secondary,gridColumnStart:3}),element:(0,b.css)({alignItems:"center",background:"none",border:"none",color:t?e.colors.text.primary:e.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:e.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:e.colors.action.hover,color:e.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:t?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical}}),listItem:(0,b.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:e.colors.text.primary,"> *:first-child::after":{backgroundColor:e.colors.action.hover}}}),divider:(0,b.css)({borderBottom:`1px solid ${e.colors.border.weak}`,height:"1px",margin:`${e.spacing(1)} 0`,overflow:"hidden"})});var Rr=n(23019),$r=n.n(Rr);const Lr=e=>{let{className:t,isExpanded:n,onClick:a}=e;const s=(0,m.useTheme2)(),i=Er(s);return(0,j.jsx)(m.IconButton,{"aria-label":n?"Close navigation menu":"Open navigation menu",name:n?"angle-left":"angle-right",className:$r()(t,i.icon),size:"xl",onClick:a})};Lr.displayName="NavBarToggle";const Er=e=>({icon:(0,b.css)({backgroundColor:e.colors.background.secondary,border:`1px solid ${e.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:e.zIndex.sidemenu+1,[e.breakpoints.down("md")]:{display:"none"}})});var Vr=n(19309);const Br={home:{id:"nav.home",message:"Home"},create:{id:"nav.create",message:"Create"},"create-dashboard":{id:"nav.create-dashboard",message:"Dashboard"},folder:{id:"nav.create-folder",message:"Folder"},import:{id:"nav.create-import",message:"Import"},alert:{id:"nav.create-alert",message:"New alert rule"},starred:{id:"nav.starred",message:"Starred"},"starred-empty":{id:"nav.starred-empty",message:"Your starred dashboards will appear here"},dashboards:{id:"nav.dashboards",message:"Dashboards"},"dashboards/browse":{id:"nav.manage-dashboards",message:"Browse"},"dashboards/playlists":{id:"nav.playlists",message:"Playlists"},"dashboards/snapshots":{id:"nav.snapshots",message:"Snapshots"},"dashboards/library-panels":{id:"nav.library-panels",message:"Library panels"},"dashboards/new":{id:"nav.new-dashboard",message:"New dashboard"},"dashboards/folder/new":{id:"nav.new-folder",message:"New folder"},explore:{id:"nav.explore",message:"Explore"},alerting:{id:"nav.alerting",message:"Alerting"},"alerting-legacy":{id:"nav.alerting-legacy",message:"Alerting (legacy)"},"alert-list":{id:"nav.alerting-list",message:"Alert rules"},receivers:{id:"nav.alerting-receivers",message:"Contact points"},"am-routes":{id:"nav.alerting-am-routes",message:"Notification policies"},channels:{id:"nav.alerting-channels",message:"Notification channels"},silences:{id:"nav.alerting-silences",message:"Silences"},groups:{id:"nav.alerting-groups",message:"Groups"},"alerting-admin":{id:"nav.alerting-admin",message:"Admin"},cfg:{id:"nav.config",message:"Configuration"},datasources:{id:"nav.datasources",message:"Data sources"},users:{id:"nav.users",message:"Users"},teams:{id:"nav.teams",message:"Teams"},plugins:{id:"nav.plugins",message:"Plugins"},"org-settings":{id:"nav.org-settings",message:"Preferences"},apikeys:{id:"nav.api-keys",message:"API keys"},serviceaccounts:{id:"nav.service-accounts",message:"Service accounts"},live:{id:"nav.live",message:"Event streaming"},"live-status":{id:"nav.live-status",message:"Status"},"live-pipeline":{id:"nav.live-pipeline",message:"Pipeline"},"live-cloud":{id:"nav.live-cloud",message:"Cloud"},help:{id:"nav.help",message:"Help"},"profile-settings":{id:"nav.profile/settings",message:"Preferences"},"change-password":{id:"nav.profile/password",message:"Change password"},"sign-out":{id:"nav.sign-out",message:"Sign out"}};var zr,_r;const Ur="350px";function Hr(e){let{activeItem:t,isOpen:n,navItems:a,onClose:s,setMenuAnimationInProgress:i}=e;const r=(0,m.useTheme2)(),o=Wr(r),l=r.transitions.duration.standard,c=qr(r,l),u=(0,d.useRef)(null),{dialogProps:p}=(0,Sr.R)({},u),{overlayProps:g,underlayProps:f}=(0,kr.Ir)({isDismissable:!0,isOpen:n,onClose:s},u);return(0,j.jsxs)(kr.Xj,{children:[(0,j.jsx)(Cr.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,j.jsx)(Tr.Z,{onEnter:()=>i(!0),onExited:()=>i(!1),appear:n,in:n,classNames:c.overlay,timeout:l,children:(0,j.jsxs)("div",Object.assign({"data-testid":"navbarmenu",ref:u},g,p,{className:o.container,children:[(0,j.jsxs)("div",{className:o.mobileHeader,children:[zr||(zr=(0,j.jsx)(m.Icon,{name:"bars",size:"xl"})),(0,j.jsx)(m.IconButton,{"aria-label":"Close navigation menu",name:"times",onClick:s,size:"xl",variant:"secondary"})]}),(0,j.jsx)(Lr,{className:o.menuCollapseIcon,isExpanded:n,onClick:()=>{(0,h.reportInteraction)("grafana_navigation_collapsed"),s()}}),(0,j.jsx)("nav",{className:o.content,children:(0,j.jsx)(m.CustomScrollbar,{hideHorizontalTrack:!0,children:(0,j.jsx)("ul",{className:o.itemList,children:a.map((e=>(0,j.jsx)(Zr,{link:e,onClose:s,activeItem:t},e.text)))})})})]}))})}),(0,j.jsx)(Tr.Z,{appear:n,in:n,classNames:c.backdrop,timeout:l,children:(0,j.jsx)("div",Object.assign({className:o.backdrop},f))})]})}Hr.displayName="NavBarMenu";const Wr=e=>({backdrop:(0,b.css)({backdropFilter:"blur(1px)",backgroundColor:e.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:e.zIndex.modalBackdrop}),container:(0,b.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:e.spacing(1),marginRight:e.spacing(1.5),right:0,zIndex:e.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[e.breakpoints.up("md")]:{borderRight:`1px solid ${e.colors.border.weak}`,right:"unset"}}),content:(0,b.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,b.css)({borderBottom:`1px solid ${e.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:e.spacing(1,2,2),[e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,b.css)({display:"grid",gridAutoRows:`minmax(${e.spacing(6)}, auto)`,minWidth:Ur}),menuCollapseIcon:(0,b.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),qr=(e,t)=>{const n={transitionDuration:`${t}ms`,transitionTimingFunction:e.transitions.easing.easeInOut,[e.breakpoints.down("md")]:{overflow:"hidden"}},a=Object.assign({},n,{transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}}),s=Object.assign({},n,{transitionProperty:"opacity"}),i={backgroundColor:e.colors.background.canvas,boxShadow:e.shadows.z3,width:"100%",[e.breakpoints.up("md")]:{width:Ur}},r={boxShadow:"none",width:0,[e.breakpoints.up("md")]:{backgroundColor:e.colors.background.primary,width:e.spacing(7)}},o={opacity:1},l={opacity:0};return{backdrop:{appear:(0,b.css)(l),appearActive:(0,b.css)(s,o),appearDone:(0,b.css)(o),exit:(0,b.css)(o),exitActive:(0,b.css)(s,l)},overlay:{appear:(0,b.css)(r),appearActive:(0,b.css)(a,i),appearDone:(0,b.css)(i),exit:(0,b.css)(i),exitActive:(0,b.css)(a,r)}}};function Zr(e){let{link:t,activeItem:n,onClose:a}=e;const{i18n:s}=(0,qa.mV)(),i=(0,m.useStyles2)(Gr);if(function(e){return Boolean(e.children&&e.children.length>0)}(t))return(0,j.jsx)(Kr,{onClose:a,link:t,isActive:br(t,n),children:(0,j.jsx)("ul",{className:i.children,children:t.children.map((e=>!e.divider&&(0,j.jsx)(Ar,{isActive:n===e,isDivider:e.divider,icon:e.showIconInNavbar?e.icon:void 0,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),a()},styleOverrides:i.item,target:e.target,text:e.text,url:e.url,isMobile:!0},`${t.text}-${e.text}`)))})});if(t.emptyMessageId){const e=s._(Br[t.emptyMessageId]);return(0,j.jsx)(Kr,{onClose:a,link:t,isActive:br(t,n),children:(0,j.jsx)("ul",{className:i.children,children:(0,j.jsx)("div",{className:i.emptyMessage,children:e})})})}{const e=t.highlightText?Nr:d.Fragment;return(0,j.jsx)("li",{className:i.flex,children:(0,j.jsx)(Dr,{className:i.itemWithoutMenu,elClassName:i.fullWidth,label:t.text,url:t.url,target:t.target,onClick:()=>{var e;null===(e=t.onClick)||void 0===e||e.call(t),a()},isActive:t===n,children:(0,j.jsxs)("div",{className:i.itemWithoutMenuContent,children:[(0,j.jsx)("div",{className:i.iconContainer,children:(0,j.jsx)(e,{children:Jr(t)})}),(0,j.jsx)("span",{className:i.linkText,children:t.text})]})})})}}const Gr=e=>({children:(0,b.css)({display:"flex",flexDirection:"column"}),item:(0,b.css)({padding:`${e.spacing(1)} ${e.spacing(1.5)}`,width:`calc(100% - ${e.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,b.css)({display:"flex"}),itemWithoutMenu:(0,b.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,b.css)({height:"100%",width:"100%"}),iconContainer:(0,b.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,b.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${e.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,b.css)({fontSize:e.typography.pxToRem(14),justifySelf:"start",padding:e.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,b.css)({color:e.colors.text.secondary,fontStyle:"italic",padding:e.spacing(1,1.5)})});function Kr(e){let{link:t,isActive:n,children:a,className:s,onClose:i}=e;const r=(0,m.useStyles2)(Qr),[o,l]=(0,Or.Z)(`grafana.navigation.expanded[${t.text}]`,!1),c=t.highlightText?Nr:d.Fragment;return(0,j.jsxs)("li",{className:(0,b.cx)(r.menuItem,s),children:[(0,j.jsx)(Dr,{isActive:n,label:t.text,url:t.url,target:t.target,onClick:()=>{var e;null===(e=t.onClick)||void 0===e||e.call(t),i()},className:r.collapsibleMenuItem,elClassName:r.collapsibleIcon,children:(0,j.jsx)(c,{children:Jr(t)})}),(0,j.jsx)("div",{className:r.collapsibleSectionWrapper,children:(0,j.jsx)(m.CollapsableSection,{isOpen:Boolean(o),onToggle:e=>l(e),className:r.collapseWrapper,contentClassName:r.collapseContent,label:(0,j.jsx)("div",{className:(0,b.cx)(r.labelWrapper,{[r.primary]:n}),children:(0,j.jsx)("span",{className:r.linkText,children:t.text})}),children:a})})]})}const Qr=e=>({menuItem:(0,b.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${e.spacing(7)} minmax(calc(350px - ${e.spacing(7)}), auto)`}),collapsibleMenuItem:(0,b.css)({height:e.spacing(6),width:e.spacing(7),display:"grid"}),collapsibleIcon:(0,b.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,b.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,b.css)({paddingLeft:e.spacing(.5),paddingRight:e.spacing(4.25),minHeight:e.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:e.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:e.colors.action.hover,color:e.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${e.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,b.css)({padding:0}),labelWrapper:(0,b.css)({fontSize:"15px"}),primary:(0,b.css)({color:e.colors.text.primary}),linkText:(0,b.css)({fontSize:e.typography.pxToRem(14),justifySelf:"start"})});function Jr(e){return"grafana"===e.icon?_r||(_r=(0,j.jsx)(Un.c.MenuLogo,{})):e.icon?(0,j.jsx)(m.Icon,{name:e.icon,size:"xl"}):(0,j.jsx)("img",{src:e.img,alt:`${e.text} logo`,height:"24",width:"24",style:{borderRadius:"50%"}})}var Yr;const Xr="350px";function eo(e){let{activeItem:t,navItems:n,searchBarHidden:a,onClose:s}=e;const i=(0,m.useTheme2)(),r=to(i,a),o=i.transitions.duration.shortest,l=no(i,o),c=(0,d.useRef)(null),{dialogProps:u}=(0,Sr.R)({},c),{overlayProps:p,underlayProps:g}=(0,kr.Ir)({isDismissable:!0,isOpen:!0,onClose:s},c);return(0,j.jsx)(kr.Xj,{children:(0,j.jsxs)(Cr.MT,{contain:!0,autoFocus:!0,children:[(0,j.jsx)(Tr.Z,{appear:!0,in:!0,classNames:l.overlay,timeout:o,children:(0,j.jsxs)("div",Object.assign({"data-testid":"navbarmenu",ref:c},p,u,{className:r.container,children:[(0,j.jsxs)("div",{className:r.mobileHeader,children:[Yr||(Yr=(0,j.jsx)(m.Icon,{name:"bars",size:"xl"})),(0,j.jsx)(m.IconButton,{"aria-label":"Close navigation menu",name:"times",onClick:s,size:"xl",variant:"secondary"})]}),(0,j.jsx)(Lr,{className:r.menuCollapseIcon,isExpanded:!0,onClick:()=>{(0,h.reportInteraction)("grafana_navigation_collapsed"),s()}}),(0,j.jsx)("nav",{className:r.content,children:(0,j.jsx)(m.CustomScrollbar,{hideHorizontalTrack:!0,children:(0,j.jsx)("ul",{className:r.itemList,children:n.map((e=>(0,j.jsx)(Zr,{link:e,onClose:s,activeItem:t},e.text)))})})})]}))}),(0,j.jsx)(Tr.Z,{appear:!0,in:!0,classNames:l.backdrop,timeout:o,children:(0,j.jsx)("div",Object.assign({className:r.backdrop},g))})]})})}eo.displayName="NavBarMenu";const to=(e,t)=>{const n=(t?Ir:80)+1;return{backdrop:(0,b.css)({backdropFilter:"blur(1px)",backgroundColor:e.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:n,zIndex:e.zIndex.navbarFixed-2}),container:(0,b.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:e.spacing(1),marginRight:e.spacing(1.5),right:0,zIndex:e.zIndex.navbarFixed-1,position:"fixed",top:n,boxSizing:"content-box",[e.breakpoints.up("md")]:{borderRight:`1px solid ${e.colors.border.weak}`,right:"unset"}}),content:(0,b.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,b.css)({borderBottom:`1px solid ${e.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:e.spacing(1,2,2),[e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,b.css)({display:"grid",gridAutoRows:`minmax(${e.spacing(6)}, auto)`,minWidth:Xr}),menuCollapseIcon:(0,b.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}},no=(e,t)=>{const n={transitionDuration:`${t}ms`,transitionTimingFunction:e.transitions.easing.easeInOut,[e.breakpoints.down("md")]:{overflow:"hidden"}},a=Object.assign({},n,{transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}}),s=Object.assign({},n,{transitionProperty:"opacity"}),i={backgroundColor:e.colors.background.primary,boxShadow:e.shadows.z3,width:"100%",[e.breakpoints.up("md")]:{width:Xr}},r={boxShadow:"none",width:0,[e.breakpoints.up("md")]:{backgroundColor:e.colors.background.primary,width:e.spacing(7)}},o={opacity:1},l={opacity:0};return{backdrop:{appear:(0,b.css)(l),appearActive:(0,b.css)(s,o),appearDone:(0,b.css)(o),exit:(0,b.css)(o),exitActive:(0,b.css)(s,l)},overlay:{appear:(0,b.css)(r),appearActive:(0,b.css)(a,i),appearDone:(0,b.css)(i),exit:(0,b.css)(i),exitActive:(0,b.css)(a,r)}}},ao=d.memo((e=>{let{onClose:t,searchBarHidden:n}=e;const a=(0,An.useSelector)((e=>e.navBarTree)),s=(0,m.useTheme2)(),i=so(s),r=(0,Mn.TH)(),[l,c]=(0,d.useState)(!1),p=vr({id:"home",text:"Home",url:h.config.appSubUrl||"/",icon:"home-alt"},!0),g=(0,o.cloneDeep)(a),f=g.filter((e=>e.section===u.NavSection.Core)).map((e=>vr(e,!0))),v=g.filter((e=>e.section===u.NavSection.Plugin)).map((e=>vr(e,!0))),b=fr(g.filter((e=>e.section===u.NavSection.Config&&e&&"help"!==e.id&&"profile"!==e.id)),r,(()=>{c(!l)})).map((e=>vr(e,!0))),x=wr(g,r.pathname);return(0,j.jsx)("div",{className:i.menuWrapper,children:(0,j.jsx)(eo,{activeItem:x,navItems:[p,...f,...v,...b],onClose:t,searchBarHidden:n})})}));ao.displayName="MegaMenu";const so=e=>({menuWrapper:(0,b.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:e.zIndex.sidemenu})});var io;function ro(e){let{sectionNav:t,pageNav:n}=e;const a=(0,m.useStyles2)(oo),s=[{icon:"home-alt",href:"/"}];function i(e){e.parentItem&&i(e.parentItem),s.push({text:e.text,href:e.url})}return i(t),n&&i(n),(0,j.jsx)("ul",{className:a.breadcrumbs,children:s.map(((e,t)=>(0,j.jsxs)("li",{className:a.breadcrumb,children:[e.href&&(0,j.jsxs)("a",{className:a.breadcrumbLink,href:e.href,children:[e.text,e.icon&&(0,j.jsx)(m.Icon,{name:e.icon})]}),!e.href&&(0,j.jsx)("span",{className:a.breadcrumbLink,children:e.text}),t+1<s.length&&(0,j.jsx)("div",{className:a.separator,children:io||(io=(0,j.jsx)(m.Icon,{name:"angle-right"}))})]},t)))})}const oo=e=>({breadcrumbs:(0,b.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",fontWeight:e.typography.fontWeightMedium}),breadcrumb:(0,b.css)({display:"flex",alignItems:"center"}),separator:(0,b.css)({color:e.colors.text.secondary,padding:e.spacing(0,.5)}),breadcrumbLink:(0,b.css)({color:e.colors.text.primary,whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var lo,co=n(35845);function uo(e){let{actions:t,searchBarHidden:n,sectionNav:a,pageNav:s,onToggleMegaMenu:i,onToggleSearchBar:r}=e;const o=(0,m.useStyles2)(ho);return(0,j.jsxs)("div",{className:o.pageToolbar,children:[(0,j.jsx)("div",{className:o.menuButton,children:(0,j.jsx)(m.IconButton,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:i})}),(0,j.jsx)(ro,{sectionNav:a,pageNav:s}),(0,j.jsxs)("div",{className:o.actions,children:[t,t&&(lo||(lo=(0,j.jsx)(co.M,{}))),(0,j.jsx)(m.ToolbarButton,{onClick:r,narrow:!0,tooltip:"Toggle top search bar",children:(0,j.jsx)(m.Icon,{name:n?"angle-down":"angle-up",size:"xl"})})]})]})}const ho=e=>({pageToolbar:(0,b.css)({height:Ir,display:"flex",padding:e.spacing(0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,b.css)({display:"flex",alignItems:"center",paddingRight:e.spacing(1)}),actions:(0,b.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:e.spacing(1),flexGrow:1,gap:e.spacing(.5)})});var po,go,mo,fo;function vo(){const e=(0,m.useStyles2)(xo);return(0,j.jsxs)("div",{className:e.searchBar,children:[(0,j.jsx)("a",{className:e.logo,href:"/",title:"Go to home",children:po||(po=(0,j.jsx)(m.Icon,{name:"grafana",size:"xl"}))}),(0,j.jsx)("div",{className:e.searchWrapper,children:(0,j.jsx)(m.FilterInput,{width:50,placeholder:"Search grafana",value:"",onChange:()=>{},className:e.searchInput})}),(0,j.jsxs)("div",{className:e.actions,children:[(0,j.jsx)(m.Tooltip,{placement:"bottom",content:"Help menu (todo)",children:(0,j.jsx)("button",{className:e.actionItem,children:go||(go=(0,j.jsx)(m.Icon,{name:"question-circle",size:"lg"}))})}),(0,j.jsx)(m.Tooltip,{placement:"bottom",content:"Grafana news (todo)",children:(0,j.jsx)("button",{className:e.actionItem,children:mo||(mo=(0,j.jsx)(m.Icon,{name:"rss",size:"lg"}))})}),(0,j.jsx)(m.Tooltip,{placement:"bottom",content:"User profile (todo)",children:(0,j.jsx)(m.Dropdown,{overlay:bo,children:(0,j.jsx)("button",{className:e.actionItem,children:(0,j.jsx)("img",{src:da.Vt.user.gravatarUrl})})})})]})]})}function bo(){return fo||(fo=(0,j.jsxs)(m.Menu,{children:[(0,j.jsx)(m.MenuItem,{url:"profile",label:"Your profile"}),(0,j.jsx)(m.MenuItem,{url:"profile/notifications",label:"Your notifications"}),(0,j.jsx)(m.MenuItem,{url:"logout",label:"Sign out"})]}))}const xo=e=>({searchBar:(0,b.css)({height:Ir,display:"flex",padding:e.spacing(0,2),alignItems:"center",justifyContent:"space-between",border:`1px solid ${e.colors.border.weak}`}),logo:(0,b.css)({display:"flex"}),searchWrapper:(0,b.css)({}),searchInput:(0,b.css)({}),actions:(0,b.css)({display:"flex",flexGrow:0,gap:e.spacing(1),position:"relative",width:25,left:-83}),actionItem:(0,b.css)({display:"flex",flexGrow:0,border:"none",boxShadow:"none",background:"none",alignItems:"center",color:e.colors.text.secondary,"&:hover":{background:e.colors.background.secondary},img:{borderRadius:"50%",width:"24px",height:"24px"}})});var yo;function wo(e){let{children:t}=e;const n=(0,m.useStyles2)(jo),{chrome:a}=(0,ur.p)(),s=a.useState();return s.chromeless||!h.config.featureToggles.topnav?(0,j.jsxs)("main",{className:"main-view",children:[t," "]}):(0,j.jsxs)("main",{className:"main-view",children:[(0,j.jsxs)("div",{className:n.topNav,children:[!s.searchBarHidden&&(yo||(yo=(0,j.jsx)(vo,{}))),(0,j.jsx)(uo,{searchBarHidden:s.searchBarHidden,sectionNav:s.sectionNav,pageNav:s.pageNav,actions:s.actions,onToggleSearchBar:a.toggleSearchBar,onToggleMegaMenu:a.toggleMegaMenu})]}),(0,j.jsx)("div",{className:(0,b.cx)(n.content,s.searchBarHidden&&n.contentNoSearchBar),children:t}),s.megaMenuOpen&&(0,j.jsx)(ao,{searchBarHidden:s.searchBarHidden,onClose:a.toggleMegaMenu})]})}const jo=e=>{const t=e.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,b.css)({display:"flex",flexDirection:"column",paddingTop:80,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,b.css)({paddingTop:Ir}),topNav:(0,b.css)({display:"flex",position:"fixed",zIndex:e.zIndex.navbarFixed,left:0,right:0,boxShadow:t,background:e.colors.background.primary,flexDirection:"column"})}};var So=n(36537),Co=n(49842),ko=n(58257),To=n(76687);function Io(e){let{appNotification:t,onClearNotification:n}=e;const a=(0,m.useStyles2)(Oo);(0,To.Z)((()=>{setTimeout((()=>{n(t.id)}),ca.Bi[t.severity])}));const s=h.config.featureToggles.tracing&&t.traceId;return(0,j.jsx)(m.Alert,{severity:t.severity,title:t.title,onRemove:()=>n(t.id),elevated:!0,children:(0,j.jsxs)("div",{className:a.wrapper,children:[(0,j.jsx)("span",{children:t.component||t.text}),s&&(0,j.jsxs)("span",{className:a.trace,children:["Trace ID: ",t.traceId]})]})})}function Oo(e){return{wrapper:(0,b.css)({display:"flex",flexDirection:"column"}),trace:(0,b.css)({fontSize:e.typography.pxToRem(10)})}}const No={notifyApp:So.$l,hideAppNotification:So.ad},Fo=(0,An.connect)(((e,t)=>({appNotifications:(0,Co.vo)(e.appNotifications)})),No);class Do extends d.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{this.props.hideAppNotification(e)},(t="onClearAppNotification")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}componentDidMount(){const{notifyApp:e}=this.props;pr.Z.on(u.AppEvents.alertWarning,(t=>e((0,ko.ZR)(...t)))),pr.Z.on(u.AppEvents.alertSuccess,(t=>e((0,ko.AT)(...t)))),pr.Z.on(u.AppEvents.alertError,(t=>e((0,ko.t_)(...t))))}render(){const{appNotifications:e}=this.props;return(0,j.jsx)("div",{className:"page-alert-list",children:(0,j.jsx)(m.VerticalGroup,{children:e.map(((e,t)=>(0,j.jsx)(Io,{appNotification:e,onClearNotification:e=>this.onClearAppNotification(e)},`${e.id}-${t}`)))})})}}const Po=Fo(Do);var Ao,Mo,Ro=n(53144),$o=n(17614),Lo=n(67220);function Eo(e){let{onDismiss:t}=e;const{value:n=[]}=(0,$o.Z)((()=>Lo.h.loadOrgs()),[]),a=la.Vt.user.orgId,s=(0,b.css)({display:"flex",maxHeight:"calc(85vh - 42px)"});return(0,j.jsx)(m.Modal,{title:"Switch Organization",icon:"arrow-random",onDismiss:t,isOpen:!0,contentClassName:s,children:(0,j.jsx)(m.CustomScrollbar,{autoHeightMin:"100%",children:(0,j.jsxs)("table",{className:"filter-table form-inline",children:[Ao||(Ao=(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"Name"}),(0,j.jsx)("th",{children:"Role"}),(0,j.jsx)("th",{})]})})),(0,j.jsx)("tbody",{children:n.map((e=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:e.name}),(0,j.jsx)("td",{children:e.role}),(0,j.jsx)("td",{className:"text-right",children:e.orgId===a?Mo||(Mo=(0,j.jsx)(m.Button,{size:"sm",children:"Current"})):(0,j.jsx)(m.Button,{variant:"secondary",size:"sm",onClick:()=>(async e=>{await Lo.h.setUserOrg(e),window.location.href=`${f.ZP.appSubUrl}${f.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${e.orgId}`})(e),children:"Switch to"})})]},e.orgId)))})]})})})}var Vo=n(32200),Bo=n(10063),zo=n(15372),_o=n(9195),Uo=n(42093);const Ho=(0,d.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function Wo(){return(0,d.useContext)(Ho)}const qo=(0,d.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function Zo(){return(0,d.useContext)(qo)}function Go(e){let{item:t,state:n,onNavigate:a}=e;const{onClose:s,onLeft:i}=Wo(),{setMenuIdOpen:r}=Zo(),{key:o,rendered:l}=t,c=(0,d.useRef)(null),u=n.disabledKeys.has(o),[h,p]=(0,d.useState)(!1),{focusProps:g}=(0,Uo.KK)({onFocusChange:p,isDisabled:u}),f=function(e,t,n){let a="transparent";t?a=e.colors.action.hover:n&&(a=e.colors.background.secondary);return{menuItem:b.css`
      background-color: ${a};
      color: ${e.colors.text.primary};

      &:focus-visible {
        background-color: ${e.colors.action.hover};
        box-shadow: none;
        color: ${e.colors.text.primary};
        outline: 2px solid ${e.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}((0,m.useTheme2)(),h,"section"===t.value.menuItemType);let{menuItemProps:v}=(0,Bo.iX)({isDisabled:u,"aria-label":t["aria-label"],key:o,closeOnSelect:!0,onClose:s,onAction:()=>{r(void 0),a(t.value),s()}},n,c);const{keyboardProps:x}=(0,Uo.v5)({onKeyDown:e=>{"ArrowLeft"===e.key&&i(),e.continuePropagation()}});return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("li",Object.assign({},(0,zo.dG)(v,g,x),{ref:c,className:f.menuItem,children:l}))})}const Ko=e=>{let{children:t}=e;const[n,a]=(0,d.useState)(!1),[s,i]=(0,d.useState)(!1),r=(0,d.useRef)(null),o=(0,d.useRef)(null),l=(0,m.useTheme2)(),c=Qo(l);return(0,d.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>{e.target===r.current?a(!e.isIntersecting):e.target===o.current&&i(!e.isIntersecting)}))}));return[r,o].forEach((t=>{t.current&&e.observe(t.current)})),()=>e.disconnect()}),[]),(0,j.jsxs)(m.CustomScrollbar,{className:c.scrollContainer,hideVerticalTrack:!0,hideHorizontalTrack:!0,children:[(0,j.jsx)("div",{className:(0,b.cx)(c.scrollTopIndicator,{[c.scrollIndicatorVisible]:n}),children:(0,j.jsx)(m.Icon,{className:c.scrollTopIcon,name:"angle-up"})}),(0,j.jsxs)("div",{className:c.scrollContent,children:[(0,j.jsx)("div",{className:c.scrollTopMarker,ref:r}),t,(0,j.jsx)("div",{className:c.scrollBottomMarker,ref:o})]}),(0,j.jsx)("div",{className:(0,b.cx)(c.scrollBottomIndicator,{[c.scrollIndicatorVisible]:s}),children:(0,j.jsx)(m.Icon,{className:c.scrollBottomIcon,name:"angle-down"})})]})};Ko.displayName="NavBarScrollContainer";const Qo=e=>({"scrollTopMarker, scrollBottomMarker":(0,b.css)({height:e.spacing(1),left:0,position:"absolute",pointerEvents:"none",right:0}),scrollTopMarker:(0,b.css)({top:0}),scrollBottomMarker:(0,b.css)({bottom:0}),scrollContent:(0,b.css)({flex:1,position:"relative"}),scrollContainer:b.css`
    .scrollbar-view {
      position: static !important;
    }
  `,scrollTopIndicator:(0,b.css)({background:`linear-gradient(0deg, transparent, ${e.colors.background.canvas})`,height:e.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,top:0,transition:e.transitions.create("opacity"),zIndex:e.zIndex.sidemenu}),scrollBottomIndicator:(0,b.css)({background:`linear-gradient(0deg, ${e.colors.background.canvas}, transparent)`,bottom:0,height:e.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:e.transitions.create("opacity"),zIndex:e.zIndex.sidemenu}),scrollIndicatorVisible:(0,b.css)({opacity:1}),scrollTopIcon:(0,b.css)({left:"50%",position:"absolute",top:0,transform:"translateX(-50%)"}),scrollBottomIcon:(0,b.css)({bottom:0,left:"50%",position:"absolute",transform:"translateX(-50%)"})}),Jo=["reverseMenuDirection","adjustHeightForBorder","disabledKeys","onNavigate"];function Yo(e){const{reverseMenuDirection:t,disabledKeys:n,onNavigate:a}=e,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Jo),{i18n:i}=(0,qa.mV)(),r=Wo(),o=Object.assign({},(0,zo.dG)(r,s)),{menuHasFocus:l,menuProps:c={}}=r,h=function(e,t){return{menu:b.css`
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.components.panel.borderColor};
      box-shadow: ${e.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${e.transitions.create("opacity")};
      z-index: ${e.zIndex.sidemenu};
    `,subtitle:b.css`
      background-color: transparent;
      border-${t?"bottom":"top"}: 1px solid ${e.colors.border.weak};
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      padding: ${e.spacing(1)} ${e.spacing(2)} ${e.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:b.css`
      font-style: italic;
      padding: ${e.spacing(.5,2)};
    `}}((0,m.useTheme2)(),t),p=(0,_o.D)(Object.assign({},s,{disabledKeys:n})),g=(0,d.useRef)(null),{menuProps:f}=(0,Bo.H9)(o,Object.assign({},p),g),v=[...p.collection],x=v.filter((e=>e.value.menuItemType===u.NavMenuItemType.Item)),y=v.find((e=>e.value.menuItemType===u.NavMenuItemType.Section));if((0,d.useEffect)((()=>{var e;l&&!p.selectionManager.isFocused?(p.selectionManager.setFocusedKey(null!==(e=null==y?void 0:y.key)&&void 0!==e?e:""),p.selectionManager.setFocused(!0)):l||(p.selectionManager.setFocused(!1),p.selectionManager.setFocusedKey(""),p.selectionManager.clearSelection())}),[l,p.selectionManager,t,null==y?void 0:y.key]),!y)return null;const w=y.value.subTitle,S=(0,j.jsx)(Go,{item:y,state:p,onNavigate:a},y.key),C=x.map((e=>(0,j.jsx)(Go,{item:e,state:p,onNavigate:a},jr(e.value))));if(0===C.length&&y.value.emptyMessageId){const e=i._(Br[y.value.emptyMessageId]);C.push((0,j.jsx)("div",{className:h.emptyMessage,children:e},"empty-message"))}const k=[C,w&&(0,j.jsx)("li",{className:h.subtitle,children:w},w)],T=[S,(0,j.jsx)(Ko,{children:t?k.reverse():k},"scrollContainer")];return(0,j.jsx)("ul",Object.assign({className:h.menu,ref:g},(0,zo.dG)(f,c),{tabIndex:l?0:-1,children:t?T.reverse():T}))}var Xo=n(99295),el=n(2526);const tl="navbar-menu-portal-container",nl=()=>{const e=(0,m.useTheme2)(),t=al(e);return(0,j.jsx)("div",{className:t.menuPortalContainer,id:tl})};nl.displayName="NavBarMenuPortalContainer";const al=e=>({menuPortalContainer:(0,b.css)({left:0,position:"fixed",right:0,top:0,zIndex:e.zIndex.sidemenu})}),sl=["item","isActive","label","children","reverseMenuDirection"];function il(e){const{item:t,isActive:n,label:a,children:s,reverseMenuDirection:i}=e,r=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,sl),[o,l]=(0,d.useState)(!1),{menuIdOpen:c,setMenuIdOpen:u}=Zo(),p=(0,m.useTheme2)(),g=rl(p,n),f=(0,el.W)(Object.assign({},r)),v=d.useRef(null),{menuTriggerProps:x,menuProps:y}=(0,Bo.u4)({},f,v);(0,d.useEffect)((()=>{t.highlightId&&(0,h.reportExperimentView)(`feature-highlights-${t.highlightId}-nav`,"test","")}),[t.highlightId]);const{hoverProps:w}=(0,Uo.XI)({onHoverChange:e=>{e?(f.open(),u(t.id)):(f.close(),u(void 0))}});(0,d.useEffect)((()=>{c!==t.id?(f.close(),l(!1)):f.open()}),[c,f,t.id]);const{keyboardProps:S}=(0,Uo.v5)({onKeyDown:e=>{switch(e.key){case"ArrowRight":f.isOpen||(f.open(),u(t.id)),l(!0);break;case"Tab":u(void 0)}}}),{buttonProps:C}=(0,Xo.U)(x,v),k=t.highlightText?Nr:d.Fragment,T=(0,j.jsx)(k,{children:(0,j.jsxs)("span",{className:g.icon,children:[(null==t?void 0:t.icon)&&(0,j.jsx)(m.Icon,{name:t.icon,size:"xl"}),(null==t?void 0:t.img)&&(0,j.jsx)("img",{src:t.img,alt:`${t.text} logo`})]})});let I=(0,j.jsx)("button",Object.assign({className:g.element},C,S,w,{ref:v,onClick:null==t?void 0:t.onClick,"aria-label":a,children:T}));null!=t&&t.url&&(I=!t.target&&t.url.startsWith("/")?(0,j.jsx)(m.Link,Object.assign({},C,S,w,{ref:v,href:t.url,target:t.target,onClick:null==t?void 0:t.onClick,className:g.element,"aria-label":a,children:T})):(0,j.jsx)("a",Object.assign({href:t.url,target:t.target,onClick:null==t?void 0:t.onClick},C,S,w,{ref:v,className:g.element,"aria-label":a,children:T})));const O=d.useRef(null),{dialogProps:N}=(0,Sr.R)({},O),{overlayProps:F}=(0,kr.Ir)({onClose:()=>{f.close(),u(void 0)},isOpen:f.isOpen,isDismissable:!0},O);let{overlayProps:D}=(0,kr.tN)({targetRef:v,overlayRef:O,placement:i?"right bottom":"right top",isOpen:f.isOpen});const{focusWithinProps:P}=(0,Uo.L_)({onFocusWithin:e=>{var n,a,s;e.target.id===(null===(n=v.current)||void 0===n?void 0:n.id)&&(u(t.id),f.open()),null===(a=(s=e.target).scrollIntoView)||void 0===a||a.call(s,{block:"nearest"})},onBlurWithin:e=>{var t,n;"menuitem"!==(null===(t=e.target)||void 0===t?void 0:t.getAttribute("role"))||null!==(n=O.current)&&void 0!==n&&n.contains(e.relatedTarget)||u(void 0)}});return(0,j.jsxs)("div",Object.assign({className:(0,b.cx)(g.element,"dropdown")},P,{children:[I,f.isOpen&&(0,j.jsx)(kr.Xj,{portalContainer:null!==(A=document.getElementById(tl))&&void 0!==A?A:document.body,children:(0,j.jsx)(Ho.Provider,{value:{menuProps:y,menuHasFocus:o,onClose:()=>f.close(),onLeft:()=>{var e;l(!1),null===(e=v.current)||void 0===e||e.focus()}},children:(0,j.jsx)(Cr.MT,{restoreFocus:!0,children:(0,j.jsxs)("div",Object.assign({},F,D,N,w,{ref:O,children:[(0,j.jsx)(kr.U4,{onDismiss:()=>f.close()}),s,(0,j.jsx)(kr.U4,{onDismiss:()=>f.close()})]}))})})})]}));var A}const rl=(e,t)=>({element:(0,b.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:e.spacing(6),width:e.spacing(7),"&::before":{display:t?"block":"none",content:'" "',position:"absolute",left:e.spacing(1),top:e.spacing(1.5),bottom:e.spacing(1.5),width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:e.colors.action.hover,boxShadow:"none",color:e.colors.text.primary,outline:`${e.shape.borderRadius(1)} solid ${e.colors.primary.main}`,outlineOffset:`-${e.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,b.css)({height:"100%",width:"100%",img:{borderRadius:"50%",height:e.spacing(3),width:e.spacing(3)}})}),ol=e=>{var t;let{isActive:n=!1,className:a,reverseMenuDirection:s=!1,link:i}=e;const{i18n:r}=(0,qa.mV)(),o=(0,m.useTheme2)(),l=null!==(t=i.children)&&void 0!==t?t:[],{menuIdOpen:d}=Zo(),c=(s?[...l].reverse():l).filter((e=>!e.hideFromMenu)).map((e=>Object.assign({},e,{menuItemType:u.NavMenuItemType.Item}))),p=0===c.length,g=ll(o,p,n),f=Object.assign({},i,{children:c,menuItemType:u.NavMenuItemType.Section}),v=[f].concat(c),x=i.id&&Br[i.id],y=x?r._(x):i.text;return(0,j.jsx)("li",{className:(0,b.cx)(g.container,{[g.containerHover]:f.id===d},a),children:(0,j.jsx)(il,{item:f,isActive:n,label:y,reverseMenuDirection:s,children:(0,j.jsx)(Yo,{items:v,reverseMenuDirection:s,adjustHeightForBorder:p,disabledKeys:["divider","subtitle"],"aria-label":f.text,onNavigate:e=>{const{url:t,target:n,onClick:a}=e;null==a||a(),t&&(!n&&t.startsWith("/")?h.locationService.push(u.locationUtil.stripBaseFromUrl(t)):window.open(t,n))},children:e=>{const t=e.id&&Br[e.id],n=t?r._(t):e.text,a=e.menuItemType===u.NavMenuItemType.Section,s=e.showIconInNavbar&&!a?e.icon:void 0;return(0,j.jsx)(Vo.ck,{textValue:e.text,children:(0,j.jsx)(Ar,{isDivider:!a&&e.divider,icon:s,target:e.target,text:n,url:e.url,onClick:e.onClick,styleOverrides:(0,b.cx)(g.primaryText,{[g.header]:a})})},jr(e))}})})})},ll=(e,t,n)=>Object.assign({},Pr(e,n),{containerHover:(0,b.css)({backgroundColor:e.colors.action.hover,color:e.colors.text.primary}),primaryText:(0,b.css)({color:e.colors.text.primary}),header:(0,b.css)({height:`calc(${e.spacing(6)} - ${t?2:1}px)`,fontSize:e.typography.h4.fontSize,fontWeight:e.typography.h4.fontWeight,padding:`${e.spacing(1)} ${e.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var dl,cl,ul;const hl=()=>{h.locationService.partial({search:"open"})},pl=d.memo((()=>{const e=(0,An.useSelector)((e=>e.navBarTree)),t=(0,m.useTheme2)(),n=gl(t),a=(0,Mn.TH)(),s=(0,Ro.U6)(),[i,r]=(0,d.useState)(!1),[l,c]=(0,d.useState)(!1),[p,g]=(0,d.useState)(!1),[f,v]=(0,d.useState)(void 0),x=()=>{r(!i)},y=vr({id:"search",onClick:hl,text:"Search dashboards",icon:"search"},l),w=vr({id:"home",text:"Home",url:h.config.appSubUrl||"/",icon:"grafana"},l),S=(0,o.cloneDeep)(e),C=S.filter((e=>e.section===u.NavSection.Core)).map((e=>vr(e,l))),k=S.filter((e=>e.section===u.NavSection.Plugin)).map((e=>vr(e,l))),T=fr(S.filter((e=>e.section===u.NavSection.Config)),a,x).map((e=>vr(e,l))),I=(e=>"open"===new URLSearchParams(e.search).get("search"))(a)?y:wr(S,a.pathname);return s!==ca.UX.Off?null:(0,j.jsxs)("div",{className:n.navWrapper,children:[(0,j.jsx)("nav",{className:(0,b.cx)(n.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu",children:(0,j.jsx)(qo.Provider,{value:{menuIdOpen:f,setMenuIdOpen:v},children:(0,j.jsxs)(Cr.MT,{children:[(0,j.jsx)("div",{className:n.mobileSidemenuLogo,onClick:()=>c(!l),children:dl||(dl=(0,j.jsx)(m.Icon,{name:"bars",size:"xl"}))},"hamburger"),(0,j.jsx)(Lr,{className:n.menuExpandIcon,isExpanded:l,onClick:()=>{(0,h.reportInteraction)("grafana_navigation_expanded"),c(!0)}}),cl||(cl=(0,j.jsx)(nl,{})),(0,j.jsx)(Dr,{elClassName:n.grafanaLogoInner,label:w.text,className:n.grafanaLogo,url:w.url,onClick:w.onClick,children:ul||(ul=(0,j.jsx)(Un.c.MenuLogo,{}))}),(0,j.jsx)(Ko,{children:(0,j.jsxs)("ul",{className:n.itemList,children:[(0,j.jsx)(ol,{className:n.search,isActive:I===y,link:y}),C.map(((e,t)=>(0,j.jsx)(ol,{isActive:br(e,I),link:Object.assign({},e,{subTitle:void 0})},`${e.id}-${t}`))),k.length>0&&k.map(((e,t)=>(0,j.jsx)(ol,{isActive:br(e,I),link:e},`${e.id}-${t}`))),T.map(((e,t)=>(0,j.jsx)(ol,{isActive:br(e,I),reverseMenuDirection:!0,link:e,className:(0,b.cx)({[n.verticalSpacer]:0===t})},`${e.id}-${t}`)))]})})]})})}),i&&(0,j.jsx)(Eo,{onDismiss:x}),(l||p)&&(0,j.jsx)("div",{className:n.menuWrapper,children:(0,j.jsx)(Hr,{activeItem:I,isOpen:l,setMenuAnimationInProgress:g,navItems:[w,y,...C,...k,...T],onClose:()=>c(!1)})})]})}));pl.displayName="NavBar";const gl=e=>({navWrapper:(0,b.css)({position:"relative",display:"flex",".sidemenu-hidden &":{display:"none"}}),sidemenu:(0,b.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:e.colors.background.primary,zIndex:e.zIndex.sidemenu,padding:`${e.spacing(1)} 0`,position:"relative",width:e.components.sidemenu.width,borderRight:`1px solid ${e.colors.border.weak}`,[e.breakpoints.down("md")]:{height:e.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,b.css)({alignItems:"center",cursor:"pointer",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:e.spacing(2),[e.breakpoints.up("md")]:{display:"none"}}),itemList:(0,b.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[e.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,b.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:e.spacing(6),justifyContent:"stretch",[e.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,b.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,b.css)({display:"none",marginTop:0,[e.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,b.css)({marginTop:"auto"}),hideFromMobile:(0,b.css)({[e.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,b.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:e.zIndex.sidemenu}),menuExpandIcon:(0,b.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,b.css)({zIndex:e.zIndex.sidemenu})});var ml=n(34572),fl=n(57512);let vl;function bl(e){let{children:t}=e;return(0,d.useEffect)((()=>{let e;if(f.ZP.featureToggles.internationalization)switch(f.ZP.bootData.user.weekStart){case"saturday":e=fl.Hc;break;case"sunday":e=fl.jW;break;default:e=fl.ZW}!async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl.ZW;if(vl)return vl;const t=fl.cI.includes(e)?e:fl.ZW,a=f.ZP.featureToggles.internationalization&&await n(23221)(`./${t}/messages`).catch((e=>e));Vr.ag.load(t,(null==a?void 0:a.messages)||ml.messages);if("Intl"in window&&"PluralRules"in Intl){const e=new Intl.PluralRules(t,{type:"ordinal"}),n=new Intl.PluralRules(t,{type:"cardinal"});Vr.ag.loadLocaleData(t,{plurals:(t,a)=>(a?e:n).select(t)})}Vr.ag.activate(t),vl=Vr.ag}(e)}),[]),(0,j.jsx)(qa.bd,{i18n:Vr.ag,forceRenderOnLocaleChange:!1,children:t})}var xl=n(13426),yl=n.n(xl),wl=n(54819);function jl(e){const{chrome:t}=(0,ur.p)();return t.registerRouteRender(e.route),(0,d.useEffect)((()=>(Cl(e.route),kl(),(0,h.reportPageview)(),(0,h.navigationLogger)("GrafanaRoute",!1,"Mounted",e.match),()=>{(0,h.navigationLogger)("GrafanaRoute",!1,"Unmounted",e.route),Cl(e.route,!0)})),[]),(0,d.useEffect)((()=>{wl.K.reset(),wl.K.initGlobals()}),[t,e.route]),(0,d.useEffect)((()=>{kl(),(0,h.reportPageview)(),(0,h.navigationLogger)("GrafanaRoute",!1,"Updated",e)})),(0,h.navigationLogger)("GrafanaRoute",!1,"Rendered",e.route),(0,j.jsx)(e.route.component,Object.assign({},e,{queryParams:(0,h.locationSearchToObject)(e.location.search)}))}function Sl(e){return e.pageClass?e.pageClass.split(" "):[]}function Cl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const n of Sl(e))t?document.body.classList.remove(n):document.body.classList.add(n)}function kl(){var e;document.body.classList.remove("sidemenu-open--xs");const t=document.getElementById("tooltip");null==t||null===(e=t.parentElement)||void 0===e||e.removeChild(t);const n=document.querySelectorAll(".tooltip");for(let e=0;e<n.length;e++){var a;const t=n[e];null===(a=t.parentElement)||void 0===a||a.removeChild(t)}for(const e of yl().drops)e.destroy()}var Tl=n(11622);const Il=d.forwardRef(((e,t)=>{var n;let{action:a,active:s,currentRootActionId:i}=e;const r=d.useMemo((()=>{if(!i)return a.ancestors;const e=a.ancestors.findIndex((e=>e.id===i));return a.ancestors.slice(e+1)}),[a.ancestors,i]),o=(0,m.useTheme2)(),l=Ol(o,s);return(0,j.jsxs)("div",{ref:t,className:l.row,children:[(0,j.jsxs)("div",{className:l.actionContainer,children:[a.icon,(0,j.jsx)("div",{className:l.textContainer,children:(0,j.jsxs)("div",{children:[r.length>0&&r.map((e=>(0,j.jsxs)(d.Fragment,{children:[(0,j.jsx)("span",{className:l.breadcrumbAncestor,children:e.name}),(0,j.jsx)("span",{className:l.breadcrumbAncestor,children:"âº"})]},e.id))),(0,j.jsx)("span",{children:a.name})]})}),a.subtitle&&(0,j.jsx)("span",{className:l.subtitleText,children:a.subtitle})]}),null!==(n=a.shortcut)&&void 0!==n&&n.length?(0,j.jsx)("div",{"aria-hidden":!0,className:l.shortcutContainer,children:a.shortcut.map((e=>(0,j.jsx)("kbd",{className:l.shortcut,children:e},e)))}):null]})}));Il.displayName="ResultItem";const Ol=(e,t)=>{const n=t?e.colors.text.maxContrast:e.colors.text.primary,a=t?e.colors.background.primary:"transparent",s=t?e.colors.background.secondary:e.colors.background.primary;return{row:(0,b.css)({color:n,padding:e.spacing(1,2),background:a,display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer","&:before":{display:t?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1),backgroundImage:e.colors.gradients.brandVertical}}),actionContainer:(0,b.css)({display:"flex",gap:e.spacing(2),alignitems:"center",fontsize:e.typography.fontSize}),textContainer:(0,b.css)({display:"flex",flexDirection:"column"}),shortcut:(0,b.css)({padding:e.spacing(0,1),background:s,borderRadius:e.shape.borderRadius(),fontsize:e.typography.fontSize}),breadcrumbAncestor:(0,b.css)({opacity:.5,marginRight:e.spacing(1)}),subtitleText:(0,b.css)({fontSize:e.typography.fontSize-2}),shortcutContainer:(0,b.css)({display:"grid",gridAutoFlow:"column",gap:e.spacing(1)})}};var Nl=n(32665);const Fl=async e=>{const t=await async function(e){return(await(0,Nl.O)().search({kind:["dashboard"],query:"*",limit:500})).view.map((t=>{const{url:n,name:a}=t;return{parent:e,id:`go/dashboard/${n}`,name:`${a}`,perform:()=>{h.locationService.push(u.locationUtil.stripBaseFromUrl(n))}}}))}(e);return t},Dl=[{url:"/alerting/list",actions:[{id:"go/alerting",name:"Go to alerting",keywords:"alerting navigate",perform:()=>h.locationService.push("/alerting"),section:"Navigation",priority:Pn.Priority.NORMAL}]},{url:"/alerting/list",actions:[{id:"go/alerting/rules",name:"Go to alert rules",keywords:"alerting navigate rules",perform:()=>h.locationService.push("/alerting/list"),section:"Navigation",parent:"go/alerting"}]},{url:"/alerting/notifications",actions:[{id:"go/alerting/contact-points",name:"Go to contact points",keywords:"alerting navigate contact-points",perform:()=>h.locationService.push("/alerting/notifications"),parent:"go/alerting"}]},{url:"/alerting/routes",actions:[{id:"go/alerting/notification-policies",name:"Go to notification policies",keywords:"alerting navigate notification-policies",perform:()=>h.locationService.push("/alerting/routes"),parent:"go/alerting"}]},{url:"/alerting/silences",actions:[{id:"go/alerting/silences",name:"Go to silences",keywords:"alerting navigate silences",perform:()=>h.locationService.push("/alerting/silences"),parent:"go/alerting"}]}];var Pl;const Al=()=>{const e=(0,m.useStyles2)(Rl),[t,n]=(0,d.useState)([]),[a,s]=(0,d.useState)([]),{query:i,showing:r}=(0,Pn.useKBar)((e=>({showing:e.visualState===Pn.VisualState.showing}))),l="/login"!==h.locationService.getLocation().pathname,{navBarTree:c}=(0,An.useSelector)((e=>({navBarTree:e.navBarTree})));return(0,d.useEffect)((()=>{if(l){const e=(e=>{const t=[{id:"go/search",name:"Go to dashboard search",keywords:"navigate",perform:()=>h.locationService.push("?search=open"),section:"Navigation",shortcut:["s","o"]},{id:"go/dashboard",name:"Go to dashboard...",keywords:"navigate",section:"Navigation",priority:Pn.Priority.NORMAL},{id:"preferences/theme",name:"Change theme...",keywords:"interface color dark light",section:"Preferences"},{id:"preferences/dark-theme",name:"Dark",keywords:"dark theme",section:"",perform:()=>{h.locationService.push({search:"?theme=dark"}),location.reload()},parent:"preferences/theme"},{id:"preferences/light-theme",name:"Light",keywords:"light theme",section:"",perform:()=>{h.locationService.push({search:"?theme=light"}),location.reload()},parent:"preferences/theme"}],n=[{url:"/dashboard/new",actions:[{id:"management/create-folder",name:"Create folder",keywords:"new add",perform:()=>h.locationService.push("/dashboards/folder/new"),section:"Management"},{id:"management/create-dashboard",name:"Create dashboard",keywords:"new add",perform:()=>h.locationService.push("/dashboard/new"),section:"Management"}]},{url:"/",actions:[{id:"go/home",name:"Go to home",keywords:"navigate",perform:()=>h.locationService.push("/"),section:"Navigation",shortcut:["g","h"],priority:Pn.Priority.HIGH}]},{url:"/explore",actions:[{id:"go/explore",name:"Go to explore",keywords:"navigate",perform:()=>h.locationService.push("/explore"),section:"Navigation",priority:Pn.Priority.NORMAL}]},...Dl,{url:"/profile",actions:[{id:"go/profile",name:"Go to profile",keywords:"navigate preferences",perform:()=>h.locationService.push("/profile"),section:"Navigation",shortcut:["g","p"],priority:Pn.Priority.LOW}]},{url:"/datasources",actions:[{id:"go/configuration",name:"Go to data sources configuration",keywords:"navigate settings ds",perform:()=>h.locationService.push("/datasources"),section:"Navigation"}]}],a=[],s=(0,o.flatMapDeep)(e,(e=>e.children)).map((e=>null==e?void 0:e.url)).filter((e=>void 0!==e));return n.forEach((e=>{s.find((t=>e.url===t))&&a.push(...e.actions)})),[...t,...a]})(c);s(e),n([...e])}}),[l,c]),(0,d.useEffect)((()=>(r&&((0,h.reportInteraction)("commandPalette_opened"),Fl("go/dashboard").then((e=>{n([...a,...e])})),wl.K.bindGlobal("esc",(()=>{i.setVisualState(Pn.VisualState.animatingOut)}))),()=>{wl.K.bindGlobal("esc",(()=>{wl.K.globalEsc()}))})),[r]),(0,Pn.useRegisterActions)(t,[t]),t.length>0?(0,j.jsx)(Pn.KBarPortal,{children:(0,j.jsx)(Pn.KBarPositioner,{className:e.positioner,children:(0,j.jsx)(Pn.KBarAnimator,{className:e.animator,children:(0,j.jsxs)(Cr.MT,{contain:!0,children:[(0,j.jsx)(Pn.KBarSearch,{className:e.search}),Pl||(Pl=(0,j.jsx)(Ml,{}))]})})})}):null},Ml=()=>{const{results:e,rootActionId:t}=(0,Pn.useMatches)(),n=(0,m.useStyles2)(Rl);return(0,j.jsx)("div",{className:n.resultsContainer,children:(0,j.jsx)(Pn.KBarResults,{items:e,onRender:e=>{let{item:a,active:s}=e;return"string"==typeof a?(0,j.jsx)("div",{className:n.sectionHeader,children:a}):(0,j.jsx)(Il,{action:a,active:s,currentRootActionId:t})}})})},Rl=e=>({positioner:(0,b.css)({zIndex:e.zIndex.portal,marginTop:"0px","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:e.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,b.css)({maxWidth:e.breakpoints.values.sm,width:"100%",background:e.colors.background.canvas,color:e.colors.text.primary,borderRadius:e.shape.borderRadius(4),overflow:"hidden",boxShadow:e.shadows.z3}),search:(0,b.css)({padding:e.spacing(2,3),fontSize:e.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",background:e.colors.background.canvas,color:e.colors.text.primary,borderBottom:`1px solid ${e.colors.border.weak}`}),sectionHeader:(0,b.css)({padding:e.spacing(1,2),fontSize:e.typography.h6.fontSize,fontWeight:e.typography.body.fontWeight,color:e.colors.text.secondary}),resultsContainer:(0,b.css)({padding:e.spacing(2,0)})});function $l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ll extends d.PureComponent{constructor(){super(...arguments),$l(this,"subscription",void 0),$l(this,"styles",El(h.config.theme2)),$l(this,"state",{}),$l(this,"initListener",(()=>{const e=(0,h.getGrafanaLiveSrv)();e&&(this.subscription=e.getConnectionState().subscribe({next:e=>{this.setState({show:!e})}}))}))}componentDidMount(){0}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:e}=this.state;return e&&la.Vt.isSignedIn&&h.config.liveEnabled&&""!==la.Vt.user.orgRole?(0,j.jsx)("div",{className:this.styles.foot,children:(0,j.jsx)(m.Alert,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})}):null}}const El=(0,m.stylesFactory)((e=>({foot:b.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:b.css`
      border: 2px solid ${e.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `})));var Vl,Bl,zl,_l,Ul,Hl,Wl,ql,Zl,Gl;let Kl=[],Ql=[];class Jl extends d.Component{constructor(e){var t,n,a;super(e),a=e=>{const t=e.roles?e.roles():[];return(0,j.jsx)(Mn.AW,{exact:void 0===e.exact||e.exact,path:e.path,render:n=>((0,h.navigationLogger)("AppWrapper",!1,"Rendering route",e,"with match",n.location),null!=t&&t.length&&!t.some((e=>la.Vt.hasRole(e)))?Vl||(Vl=(0,j.jsx)(Mn.l_,{to:"/"})):(0,j.jsx)(jl,Object.assign({},n,{route:e})))},e.path)},(n="renderRoute")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,this.state={}}async componentDidMount(){await async function(){if(h.config.angularSupportEnabled){const{AngularApp:e}=await Promise.all([n.e(3964),n.e(9137),n.e(3749),n.e(4704)]).then(n.bind(n,33749)),t=new e;t.init(),t.bootstrap()}else(0,h.setAngularLoader)({load:(e,t,n)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return(0,j.jsx)(Mn.rs,{children:[{path:"/",pageClass:"page-dashboard",routeName:ca.vq.Home,component:hi((()=>Promise.all([n.e(5704),n.e(8876),n.e(7062),n.e(9586),n.e(7638),n.e(97),n.e(6549),n.e(3833),n.e(5296)]).then(n.bind(n,16145))))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:ca.vq.Normal,component:hi((()=>Promise.all([n.e(5704),n.e(8876),n.e(7062),n.e(9586),n.e(7638),n.e(97),n.e(6549),n.e(3833),n.e(5296)]).then(n.bind(n,16145))))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:ca.vq.Normal,component:hi((()=>Promise.all([n.e(5704),n.e(8876),n.e(7062),n.e(9586),n.e(7638),n.e(97),n.e(6549),n.e(3833),n.e(5296)]).then(n.bind(n,16145))))},{path:"/dashboard/new",pageClass:"page-dashboard",routeName:ca.vq.New,component:hi((()=>Promise.all([n.e(5704),n.e(8876),n.e(7062),n.e(9586),n.e(7638),n.e(97),n.e(6549),n.e(3833),n.e(5296)]).then(n.bind(n,16145))))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:ca.vq.Normal,chromeless:!0,component:hi((()=>Promise.all([n.e(97),n.e(1034)]).then(n.bind(n,64134))))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:ca.vq.Normal,chromeless:!0,component:hi((()=>Promise.all([n.e(97),n.e(1034)]).then(n.bind(n,64134))))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:ca.vq.Normal,chromeless:!0,component:hi((()=>Promise.all([n.e(97),n.e(1034)]).then(n.bind(n,64134))))},{path:"/dashboard/import",component:hi((()=>n.e(8808).then(n.bind(n,54948))))},{path:yi.n.List,component:hi((()=>Promise.all([n.e(4643),n.e(4620)]).then(n.bind(n,86731))))},{path:yi.n.Edit,component:hi((()=>Promise.all([n.e(4643),n.e(5477),n.e(1477)]).then(n.bind(n,60714))))},{path:yi.n.Dashboards,component:hi((()=>Promise.all([n.e(4643),n.e(2929)]).then(n.bind(n,7243))))},{path:yi.n.New,component:hi((()=>Promise.all([n.e(4643),n.e(4253)]).then(n.bind(n,66558))))},{path:"/dashboards",component:hi((()=>n.e(4074).then(n.bind(n,72794))))},{path:"/dashboards/folder/new",component:hi((()=>n.e(8932).then(n.bind(n,30936))))},{path:"/dashboards/f/:uid/:slug/permissions",component:f.ZP.rbacEnabled&&la.Vt.hasPermission(ca.bW.FoldersPermissionsRead)?hi((()=>n.e(8431).then(n.bind(n,65229)))):hi((()=>n.e(8431).then(n.bind(n,29577))))},{path:"/dashboards/f/:uid/:slug/settings",component:hi((()=>n.e(4827).then(n.bind(n,96225))))},{path:"/dashboards/f/:uid/:slug",component:hi((()=>n.e(4074).then(n.bind(n,72794))))},{path:"/dashboards/f/:uid",component:hi((()=>n.e(4074).then(n.bind(n,72794))))},{path:"/explore",pageClass:"page-explore",roles:()=>la.Vt.evaluatePermission((()=>f.ZP.viewersCanEdit?[]:["Editor","Admin"]),[ca.bW.DataSourcesExplore]),component:hi((()=>f.ZP.exploreEnabled?Promise.all([n.e(8876),n.e(6549),n.e(9782)]).then(n.bind(n,1842)):n.e(172).then(n.bind(n,53324))))},{path:"/a/:pluginId/",exact:!1,component:hi((()=>Promise.all([n.e(3964),n.e(295)]).then(n.bind(n,25309))))},{path:"/org",component:hi((()=>n.e(529).then(n.bind(n,36199))))},{path:"/org/new",component:hi((()=>n.e(950).then(n.bind(n,13540))))},{path:"/org/users",component:hi((()=>n.e(8039).then(n.bind(n,86129))))},{path:"/org/users/invite",component:hi((()=>n.e(7707).then(n.bind(n,51767))))},{path:"/org/apikeys",roles:()=>la.Vt.evaluatePermission((()=>["Admin"]),[ca.bW.ActionAPIKeysRead]),component:hi((()=>n.e(3082).then(n.bind(n,10106))))},{path:"/org/serviceaccounts",roles:()=>la.Vt.evaluatePermission((()=>["Admin"]),[ca.bW.ServiceAccountsRead,ca.bW.ServiceAccountsCreate]),component:hi((()=>n.e(1337).then(n.bind(n,7352))))},{path:"/org/serviceaccounts/create",component:hi((()=>n.e(9738).then(n.bind(n,20374))))},{path:"/org/serviceaccounts/:id",component:nr},{path:"/org/teams",roles:()=>la.Vt.evaluatePermission((()=>f.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[ca.bW.ActionTeamsRead,ca.bW.ActionTeamsCreate]),component:hi((()=>n.e(9671).then(n.bind(n,53213))))},{path:"/org/teams/new",roles:()=>la.Vt.evaluatePermission((()=>f.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[ca.bW.ActionTeamsCreate]),component:hi((()=>n.e(8715).then(n.bind(n,93365))))},{path:"/org/teams/edit/:id/:page?",roles:()=>la.Vt.evaluatePermission((()=>f.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[ca.bW.ActionTeamsRead,ca.bW.ActionTeamsCreate]),component:hi((()=>n.e(8612).then(n.bind(n,85642))))},{path:"/admin",component:()=>ar||(ar=(0,j.jsx)(Mn.l_,{to:"/admin/users"}))},{path:"/admin/settings",component:hi((()=>n.e(9603).then(n.bind(n,64816))))},{path:"/admin/upgrading",component:hi((()=>n.e(3675).then(n.bind(n,23675))))},{path:"/admin/users",component:hi((()=>n.e(8580).then(n.bind(n,37128))))},{path:"/admin/users/create",component:hi((()=>n.e(2508).then(n.bind(n,89260))))},{path:"/admin/users/edit/:id",component:es},{path:"/admin/orgs",component:hi((()=>n.e(3798).then(n.bind(n,77280))))},{path:"/admin/orgs/edit/:id",component:hi((()=>n.e(2721).then(n.bind(n,52657))))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:hi((()=>n.e(7675).then(n.bind(n,19891))))},{path:"/admin/stats",component:hi((()=>n.e(7641).then(n.bind(n,83331))))},{path:"/admin/ldap",component:Js},{path:"/login",component:na,pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/invite/:code",component:hi((()=>n.e(7429).then(n.bind(n,42012)))),pageClass:"sidemenu-hidden",chromeless:!0},{path:"/verify",component:f.ZP.verifyEmailEnabled?hi((()=>n.e(7456).then(n.bind(n,79355)))):()=>sr||(sr=(0,j.jsx)(Mn.l_,{to:"/signup"})),pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/signup",component:f.ZP.disableUserSignUp?()=>ir||(ir=(0,j.jsx)(Mn.l_,{to:"/login"})):hi((()=>n.e(3392).then(n.bind(n,43392)))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",chromeless:!0,component:hi((()=>n.e(133).then(n.bind(n,14511))))},{path:"/user/password/reset",component:hi((()=>n.e(6848).then(n.bind(n,62111)))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/dashboard/snapshots",component:hi((()=>n.e(5295).then(n.bind(n,17821))))},{path:"/playlists",component:hi((()=>n.e(9218).then(n.bind(n,11168))))},{path:"/playlists/play/:uid",component:hi((()=>n.e(3090).then(n.bind(n,41354))))},{path:"/playlists/new",component:hi((()=>n.e(9975).then(n.bind(n,39493))))},{path:"/playlists/edit/:uid",component:hi((()=>n.e(2341).then(n.bind(n,68196))))},{path:"/sandbox/benchmarks",component:hi((()=>n.e(4908).then(n.bind(n,26480))))},{path:"/sandbox/test",component:hi((()=>Promise.all([n.e(3833),n.e(8595)]).then(n.bind(n,14870))))},{path:"/dashboards/f/:uid/:slug/library-panels",component:hi((()=>Promise.all([n.e(9586),n.e(3778)]).then(n.bind(n,29249))))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>la.Vt.evaluatePermission((()=>["Viewer","Editor","Admin"]),[ca.bW.AlertingRuleRead]),component:hi((()=>n.e(1324).then(n.bind(n,95766))))},{path:"/library-panels",component:hi((()=>Promise.all([n.e(9586),n.e(7878)]).then(n.bind(n,7708))))},{path:"/notifications",component:hi((()=>n.e(743).then(n.bind(n,73810))))},...or(),...lr(),...(0,wi.bO)()?[...ki,...Ti]:ki,...Si(),...bi(),...Oi(),...rr,...f.vc.featureToggles.publicDashboards?[{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:ca.vq.Public,component:hi((()=>Promise.all([n.e(5704),n.e(8876),n.e(7062),n.e(9586),n.e(7638),n.e(97),n.e(6549),n.e(3833),n.e(5296),n.e(2613)]).then(n.bind(n,77452))))}]:[],...f.vc.featureToggles.dataConnectionsConsole?[{path:`/${xi.D3}`,exact:!1,component:hi((()=>Promise.all([n.e(3964),n.e(4643),n.e(5477),n.e(1919)]).then(n.bind(n,62527))))}]:[],{path:"/*",component:Vn}].map((e=>this.renderRoute(e)))})}renderNavBar(){return h.config.isPublicDashboardView||!this.state.ready||h.config.featureToggles.topnav?null:Bl||(Bl=(0,j.jsx)(pl,{}))}commandPaletteEnabled(){return h.config.featureToggles.commandPalette&&!h.config.isPublicDashboardView}searchBarEnabled(){return!h.config.isPublicDashboardView}render(){const{app:e}=this.props,{ready:t}=this.state;(0,h.navigationLogger)("AppWrapper",!1,"rendering");return(0,j.jsx)(An.Provider,{store:dr.h,children:(0,j.jsx)(bl,{children:(0,j.jsx)(m.ErrorBoundaryAlert,{style:"page",children:(0,j.jsx)(ur.h.Provider,{value:e.context,children:(0,j.jsx)(Tl.f,{value:h.config.theme2,children:(0,j.jsx)(Pn.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:e=>{(0,h.reportInteraction)("commandPalette_action_selected",{actionId:e.id,actionName:e.name})}}},children:(0,j.jsxs)(m.ModalsProvider,{children:[zl||(zl=(0,j.jsx)(m.GlobalStyles,{})),this.commandPaletteEnabled()&&(_l||(_l=(0,j.jsx)(Al,{}))),(0,j.jsx)("div",{className:"grafana-app",children:(0,j.jsxs)(Mn.F0,{history:h.locationService.getHistory(),children:[this.renderNavBar(),(0,j.jsxs)(wo,{children:[Ql.map(((e,t)=>(0,j.jsx)(e,{},t.toString()))),Ul||(Ul=(0,j.jsx)(cr,{})),Hl||(Hl=(0,j.jsx)(Po,{})),this.searchBarEnabled()&&(Wl||(Wl=(0,j.jsx)(Rn._,{}))),t&&this.renderRoutes(),Kl.map(((e,t)=>(0,j.jsx)(e,{},t.toString())))]})]})}),ql||(ql=(0,j.jsx)(Ll,{})),Zl||(Zl=(0,j.jsx)(m.ModalRoot,{})),Gl||(Gl=(0,j.jsx)(m.PortalContainer,{}))]})})})})})})})}}var Yl=n(12990),Xl=n(90291),ed=n(17421);function td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nd={text:"Grafana"};class ad{constructor(){td(this,"searchBarStorageKey","SearchBar_Hidden"),td(this,"currentRoute",void 0),td(this,"routeChangeHandled",void 0),td(this,"state",new Xl.X({chromeless:!0,sectionNav:nd,searchBarHidden:ed.Z.getBool(this.searchBarStorageKey,!1)})),td(this,"toggleMegaMenu",(()=>{this.update({megaMenuOpen:!this.state.getValue().megaMenuOpen})})),td(this,"toggleSearchBar",(()=>{const e=!this.state.getValue().searchBarHidden;ed.Z.set(this.searchBarStorageKey,e),this.update({searchBarHidden:e})}))}registerRouteRender(e){this.currentRoute!==e&&(this.currentRoute=e,this.routeChangeHandled=!1)}update(e){const t=this.state.getValue(),n=Object.assign({},t);var a;this.routeChangeHandled||(n.actions=void 0,n.pageNav=void 0,n.sectionNav=nd,n.chromeless=null===(a=this.currentRoute)||void 0===a?void 0:a.chromeless,this.routeChangeHandled=!0);Object.assign(n,e),function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;var n=Object.keys(e),a=n.length;for(let e=0;e<a;e++)if(!(n[e]in t))return!1;for(let s=0;s<a;s++)if(e[n[s]]!==t[n[s]])return!1;return a===Object.keys(t).length}(t,n)||this.state.next(n)}useState(){return(0,Yl.Z)(this.state,this.state.getValue())}}var sd=n(98878);function id(e){const t=function(e){for(;null!==e&&e.tagName;){if("A"===e.tagName.toUpperCase())return e;e=e.parentNode}return null}(e.target);if(!(e.ctrlKey||e.metaKey||e.defaultPrevented)&&t){let n=t.getAttribute("href");const a=t.getAttribute("target");if(n&&!a){if((0,h.navigationLogger)("utils",!1,"intercepting link click",e),e.preventDefault(),n=u.locationUtil.stripBaseFromUrl(n),"/"!==n[0]){if(n.indexOf("://")>0||0===n.indexOf("mailto:"))return void(window.location.href=n);if(0===n.indexOf("#"))return void(window.location.hash=n);n=`/${n}`}h.locationService.push(n)}}}var rd,od=n(60301);const ld=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const s=(0,An.connect)(...n)(e);return e=>(0,j.jsx)(An.Provider,{store:dr.h,children:(0,j.jsx)(s,Object.assign({},e,{store:dr.h}))})}((e=>(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(m.ModalsProvider,Object.assign({},e,{children:rd||(rd=(0,j.jsx)(m.ModalRoot,{}))}))})));function dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class cd{constructor(){dd(this,"reactModalRoot",document.body),dd(this,"reactModalNode",document.createElement("div")),dd(this,"onReactModalDismiss",(()=>{c.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}))}init(){pr.Z.subscribe(hr.VJ,(e=>this.showConfirmModal(e.payload))),pr.Z.subscribe(hr.Dn,(e=>this.showModalReact(e.payload))),pr.Z.subscribe(h.CopyPanelEvent,(e=>(0,od.bY)(e.payload)))}showModalReact(e){const{component:t,props:n}=e,a={component:t,props:Object.assign({},n,{isOpen:!0,onDismiss:this.onReactModalDismiss})},s=d.createElement((i=(0,Tl.E)(ld,h.config.theme2),e=>(0,j.jsx)(bl,{children:(0,j.jsx)(i,Object.assign({},e))})),a);var i;this.reactModalRoot.appendChild(this.reactModalNode),c.render(s,this.reactModalNode)}showConfirmModal(e){const{confirmText:t,onConfirm:n=(()=>{}),text2:a,altActionText:s,onAltAction:i,noText:r,text:o,text2htmlBind:l,yesText:p="Yes",icon:g,title:f="Confirm"}=e,v={confirmText:p,confirmationText:t,icon:g,title:f,body:o,description:a&&l?u.textUtil.sanitize(a):a,isOpen:!0,dismissText:r,onConfirm:()=>{n(),this.onReactModalDismiss()},onDismiss:this.onReactModalDismiss,onAlternative:i?()=>{i(),this.onReactModalDismiss()}:void 0,alternativeText:s},b={component:m.ConfirmModal,props:v},x=d.createElement((0,Tl.E)(ld,h.config.theme2),b);this.reactModalRoot.appendChild(this.reactModalNode),c.render(x,this.reactModalNode)}}const ud=(0,m.createLogger)("EchoSrv"),hd=ud.logger;function pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,m.attachDebugger)("echo",void 0,ud);class gd{constructor(e){pd(this,"config",{flushInterval:1e4,debug:!1}),pd(this,"backends",[]),pd(this,"flush",(()=>{for(const e of this.backends)e.flush()})),pd(this,"addBackend",(e=>{hd("Adding backend",!1,e),this.backends.push(e)})),pd(this,"addEvent",((e,t)=>{const n=this.getMeta(),a=Object.assign({},e,{meta:Object.assign({},n,t)});for(const e of this.backends)(0===e.supportedEvents.length||e.supportedEvents.indexOf(a.type)>-1)&&e.addEvent(a);hd("Reporting event",!1,a)})),pd(this,"getMeta",(()=>({sessionId:"",userId:la.Vt.user.id,userLogin:la.Vt.user.login,userSignedIn:la.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:(new Date).getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}))),this.config=Object.assign({},this.config,e),setInterval(this.flush,this.config.flushInterval)}}const md=(e,t)=>{(0,h.getEchoSrv)().addEvent({type:h.EchoEventType.Performance,payload:{name:e,value:t}})};function fd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class vd{constructor(e){fd(this,"buffer",[]),fd(this,"supportedEvents",[h.EchoEventType.Performance]),fd(this,"addEvent",(e=>{this.buffer.push(e.payload)})),fd(this,"flush",(()=>{0!==this.buffer.length&&(ma.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])})),this.options=e}}function bd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class xd{constructor(e){bd(this,"supportedEvents",[h.EchoEventType.Pageview,h.EchoEventType.Interaction]),bd(this,"addEvent",(e=>{window.applicationInsights&&((0,h.isPageviewEvent)(e)&&window.applicationInsights.trackPageView(),(0,h.isInteractionEvent)(e)&&window.applicationInsights.trackEvent({name:e.payload.interactionName,properties:e.payload.properties}))})),bd(this,"flush",(()=>{})),this.options=e,s().ajax({url:"https://js.monitor.azure.com/scripts/b/ai.2.min.js",dataType:"script",cache:!0}).done((function(){var t={config:{connectionString:e.connectionString,endpointUrl:e.endpointUrl}},n=new window.Microsoft.ApplicationInsights.ApplicationInsights(t);window.applicationInsights=n.loadAppInsights()}))}}function yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class wd{constructor(e){yd(this,"supportedEvents",[h.EchoEventType.Pageview]),yd(this,"trackedUserId",null),yd(this,"addEvent",(e=>{if(!window.ga)return;window.ga("set",{page:e.payload.page}),window.ga("send","pageview");const{userSignedIn:t,userId:n}=e.meta;t&&n!==this.trackedUserId&&(this.trackedUserId=n,window.ga("set","userId",n))})),yd(this,"flush",(()=>{})),this.options=e;const t=`https://www.google-analytics.com/analytics${e.debug?"_debug":""}.js`;s().ajax({url:t,dataType:"script",cache:!0});const n=window.ga=window.ga||function(){(n.q=n.q||[]).push(arguments)};n.l=+new Date,n("create",e.googleAnalyticsId,"auto"),n("set","anonymizeIp",!0)}}function jd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sd{constructor(e){jd(this,"supportedEvents",[h.EchoEventType.Pageview,h.EchoEventType.Interaction,h.EchoEventType.ExperimentView]),jd(this,"addEvent",(e=>{window.rudderanalytics&&((0,h.isPageviewEvent)(e)&&window.rudderanalytics.page(),(0,h.isInteractionEvent)(e)&&window.rudderanalytics.track(e.payload.interactionName,e.payload.properties),(0,h.isExperimentViewEvent)(e)&&window.rudderanalytics.track("experiment_viewed",{experiment_id:e.payload.experimentId,experiment_group:e.payload.experimentGroup,experiment_variant:e.payload.experimentVariant}))})),jd(this,"flush",(()=>{})),this.options=e;const t=e.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";s().ajax({url:t,dataType:"script",cache:!0});const n=window.rudderanalytics=[];var a,i=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let e=0;e<i.length;e++){const t=i[e];n[t]=function(e){return function(){n.push([e].concat(Array.prototype.slice.call(arguments)))}}(t)}if(n.load(e.writeKey,e.dataPlaneUrl,{configUrl:e.configUrl}),e.user){const t=(a=e.user).externalUserId.length?a.externalUserId:a.email;n.identify(t,{email:e.user.email,orgId:e.user.orgId})}}}var Cd=n(93834),kd=n(96304),Td=n(88005),Id=n(76315),Od=n(78019),Nd=n(78471);class Fd extends Nd.d{send(e){(0,h.getEchoSrv)().addEvent({type:h.EchoEventType.GrafanaJavascriptAgent,payload:e})}getIgnoreUrls(){return[]}}function Dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pd{constructor(e){Dd(this,"supportedEvents",[h.EchoEventType.GrafanaJavascriptAgent]),Dd(this,"agentInstance",void 0),Dd(this,"transports",void 0),Dd(this,"addEvent",(e=>{this.transports.forEach((t=>t.send(e.payload)))})),Dd(this,"flush",(()=>{})),this.options=e;const t=[];this.transports=[],e.customEndpoint&&this.transports.push(new Cd.V({url:e.customEndpoint,apiKey:e.apiKey})),e.errorInstrumentalizationEnabled&&t.push(new kd.w),e.consoleInstrumentalizationEnabled&&t.push(new Td.J),e.webVitalsInstrumentalizationEnabled&&t.push(new Id.P);const n={globalObjectKey:e.globalObjectKey||"grafanaAgent",preventGlobalExposure:e.preventGlobalExposure||!1,app:{version:e.buildInfo.version,environment:e.buildInfo.env},instrumentations:t,transports:[new Fd],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};this.agentInstance=(0,Od.E)(n),e.user&&this.agentInstance.api.setUser({email:e.user.email,id:e.user.id,attributes:{orgId:String(e.user.orgId)||""}})}}var Ad=n(51882),Md=n(81534),Rd=n(34785),$d=n(48606),Ld=n(51401),Ed=n(51499),Vd=n(76501),Bd=n(28466),zd=n(3469);function _d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Ud{constructor(e){var t;_d(this,"_disabledUntil",new Date(Date.now())),_d(this,"_buffer",void 0),this.options=e,this._buffer=(0,Ld.x)(null!==(t=e.maxConcurrentRequests)&&void 0!==t?t:3)}sendEvent(e){var t,n,a;if(new Date(Date.now())<this._disabledUntil){const t="Dropping frontend event due to too many requests.";return console.warn(t),Promise.resolve({event:e,reason:t,status:"skipped"})}const s={body:JSON.stringify(Object.assign({},e,{level:null!==(t=e.level)&&void 0!==t?t:e.exception?$d.z.Error:$d.z.Info,exception:e.exception?{values:null===(n=e.exception.values)||void 0===n?void 0:n.map((e=>Object.assign({},e,{value:Wd(e.value)})))}:e.exception,breadcrumbs:null===(a=e.breadcrumbs)||void 0===a?void 0:a.map((e=>Object.assign({},e,{timestamp:Hd(e.timestamp)}))),timestamp:Hd(e.timestamp)})),url:this.options.endpoint},i={body:s.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,Ed.hv)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(i,this.options.fetchParameters),this._buffer.add((()=>new Vd.cW(((e,t)=>{window.fetch(s.url,i).then((n=>{if(200!==n.status){if(429===n.status){const e=Date.now(),t=n.headers.get("Retry-After");this._disabledUntil=t?new Date(e+(0,Bd.JY)(t,e)):new Date(e+5e3),zd.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}t(n)}else e({status:"success"})})).catch(t)})))).then(void 0,(t=>{if("Not adding Promise due to buffer limit reached."===t.message){const t="Dropping frontend log event due to too many requests in flight.";return console.warn(t),{event:e,reason:t,status:"skipped"}}throw t}))}}function Hd(e){return e?new Date(1e3*e).toISOString():(new Date).toISOString()}function Wd(e){return"string"==typeof e||void 0===e?e:e&&"object"==typeof e&&0===Object.keys(e).length?"":String(e)}class qd extends Rd.d8{sendEvent(e){return(0,h.getEchoSrv)().addEvent({type:h.EchoEventType.Sentry,payload:e}),Promise.resolve({status:"success",event:e})}sendSession(e){return Promise.resolve({status:"skipped"})}_sendRequest(e,t){throw new Error("should not happen")}}function Zd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Gd{constructor(e){Zd(this,"supportedEvents",[h.EchoEventType.Sentry]),Zd(this,"transports",void 0),Zd(this,"addEvent",(e=>{this.transports.forEach((t=>t.sendEvent(e.payload)))})),Zd(this,"flush",(()=>{})),this.options=e,this.transports=[],e.dsn&&this.transports.push(new Rd.Vh({dsn:e.dsn},fetch)),e.customEndpoint&&this.transports.push(new Ud({endpoint:e.customEndpoint}));const t={release:e.buildInfo.version,environment:e.buildInfo.env,dsn:e.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:e.sampleRate,transport:qd,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};e.user&&(0,Ad.av)({email:e.user.email,id:String(e.user.id)}),(0,Md.S1)(t)}}var Kd=n(75478),Qd=n(93474),Jd=n(57866),Yd=n(33566);async function Xd(e){const{path:t,version:n}=e;try{await(0,Yd.N$)(t,n)}catch(e){console.error(`Failed to load plugin: ${t} (version: ${n})`,e)}}var ec=n(25918),tc=n(82931),nc=n(78338),ac=n(86452),sc=n(392);function ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rc{constructor(){ic(this,"subject",void 0),ic(this,"subscription",void 0),ic(this,"lastResult",void 0),this.subject=new ec.t(1)}get(){return this.subject.asObservable()}run(e){const{queries:t,timezone:n,datasource:a,panelId:s,app:r,dashboardId:l,timeRange:d,timeInfo:c,cacheTimeout:p,maxDataPoints:g,scopedVars:m,minInterval:f}=e;this.subscription&&this.subscription.unsubscribe();const v={app:null!=r?r:u.CoreApp.Unknown,requestId:(0,nc.t)(),timezone:n,panelId:s,dashboardId:l,range:d,timeInfo:c,interval:"",intervalMs:0,targets:(0,o.cloneDeep)(t),maxDataPoints:g,scopedVars:m||{},cacheTimeout:p,startTime:Date.now()};v.rangeRaw=d.raw,(0,Zt.D)(async function(e,t){if(e&&"query"in e)return e;return(0,i.ak)().get(e,t)}(a,v.scopedVars)).pipe((0,tc.P)()).subscribe({next:e=>{v.targets=v.targets.map((t=>(t.datasource||(t.datasource=e.getRef()),t)));const t=f?(0,h.getTemplateSrv)().replace(f,v.scopedVars):e.interval,n=u.rangeUtil.calculateInterval(d,g,t);v.scopedVars=Object.assign({},v.scopedVars,{__interval:{text:n.interval,value:n.interval},__interval_ms:{text:n.intervalMs.toString(),value:n.intervalMs}}),v.interval=n.interval,v.intervalMs=n.intervalMs,this.subscription=(0,sc.v7)(e,v).subscribe({next:e=>{const t=(0,sc.zR)(e,this.lastResult);this.lastResult=(0,ac.C)(t,this.lastResult),this.subject.next(this.lastResult)}})},error:e=>console.error("PanelQueryRunner Error",e)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===u.LoadingState.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:u.LoadingState.Done})))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}var oc=n(91219),lc=n(5970),dc=n(23334),cc=n(83751);function uc(e){return e.extended&&"infoText"in e.extended?e.extended:null}function hc(e){return e.extended&&"dataSourceTypes"in e.extended?e.extended:null}function pc(e){return e.extended&&"dataSource"in e.extended?e.extended:null}var gc,mc=n(36586),fc=n(28380);const vc={changeVariableDatasource:fc.Z$},bc=(0,An.connect)(((e,t)=>{const{rootStateKey:n}=t.variable;if(!n)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:uc(cc.PF)};const{editor:a}=(0,mc.AE)(n,e);return{extended:uc(a)}}),vc);class xc extends d.PureComponent{constructor(){var e,t,n;super(...arguments),n=e=>{this.props.changeVariableDatasource((0,lc.yQ)(this.props.variable),(0,u.getDataSourceRef)(e))},(t="onDatasourceChanged")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}componentDidMount(){const{rootStateKey:e}=this.props.variable;e||console.error("AdHocVariableEditor: variable has no rootStateKey")}render(){var e;const{variable:t,extended:n}=this.props,a=null!==(e=null==n?void 0:n.infoText)&&void 0!==e?e:null;return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[gc||(gc=(0,j.jsx)(dc.e,{name:"Options"})),(0,j.jsxs)(m.VerticalGroup,{spacing:"sm",children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(m.InlineField,{label:"Data source",labelWidth:20,htmlFor:"data-source-picker",children:(0,j.jsx)(h.DataSourcePicker,{current:t.datasource,onChange:this.onDatasourceChanged,noDefault:!0})})}),a?(0,j.jsx)(m.Alert,{title:a,severity:"info"}):null]})]})}}const yc=bc(xc);var wc=n(34366);function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Sc={addFilter:fc.KJ,removeFilter:fc.ku,changeFilter:fc.M6},Cc=(0,An.connect)(null,Sc);class kc extends d.PureComponent{constructor(){super(...arguments),jc(this,"addFilter",(e=>{this.props.addFilter((0,lc.yQ)(this.props.variable),e)})),jc(this,"removeFilter",(e=>{this.props.removeFilter((0,lc.yQ)(this.props.variable),e)})),jc(this,"changeFilter",((e,t)=>{this.props.changeFilter((0,lc.yQ)(this.props.variable),{index:e,filter:t})}))}render(){const{filters:e,datasource:t}=this.props.variable;return(0,j.jsx)(wc.F,{datasource:t,filters:e,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Tc=Cc(kc);Tc.displayName="AdHocPicker";var Ic=n(42993);function Oc(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function Nc(e){return null==e?"":/__gfp__/g[Symbol.replace](e,"|")}function Fc(e){if(!(0,o.isString)(e)||0===e.length)return null;const t=e.split("|").map(Nc);return{key:t[0],operator:t[1],value:t[2],condition:""}}function Dc(e){return null!==e&&(0,o.isString)(e.value)}const Pc=["index","id","state","global","rootStateKey"];const Ac=async()=>{},Mc=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Ic.Js,reducer:Ic.jo,picker:Tc,editor:yc,dependsOn:()=>!1,setValue:Ac,setValueFromUrl:async(e,t)=>{const n=(e=>{if((0,o.isArray)(e))return e.map(Fc).filter(Dc);const t=Fc(e);return null===t?[]:[t]})(t);await(0,dr.WI)((0,fc.Ue)((0,lc.yQ)(e),n))},updateOptions:Ac,getSaveModel:e=>function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}((0,o.cloneDeep)(e),Pc),getValueForUrl:e=>{var t;return(e=>e.map((e=>function(e){return[e.key,e.operator,e.value]}(e).map(Oc).join("|"))))(null!==(t=null==e?void 0:e.filters)&&void 0!==t?t:[])}});var Rc=n(31259),$c=n(85239),Lc=n(72646),Ec=n(86558),Vc=n(3321),Bc=n(61292),zc=n(41585),_c=n(40818),Uc=n(14444),Hc=n(24298),Wc=n(34110),qc=n(39665),Zc=n(57358),Gc=n(5337),Kc=n(35140),Qc=n(62413),Jc=n(11895);const Yc=Object.assign({},qc.Eg,{type:"query",datasource:null,query:"",regex:"",sort:qc.$U.disabled,refresh:qc.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""}),Xc=(e,t)=>{const n=[];let a=null;t.lastIndex=0;do{a=t.exec(e),a&&n.push(a)}while(t.global&&a&&""!==a[0]&&void 0!==a[0]);return n},eu=(e,t,n)=>{let a,s=[];e&&(a=(0,u.stringToJsRegex)(e));for(let e=0;e<n.length;e++){const t=n[e];let u=void 0===t.text||null===t.text?t.value:t.text,p=void 0===t.value||null===t.value?t.text:t.value;if((0,o.isNumber)(p)&&(p=p.toString()),(0,o.isNumber)(u)&&(u=u.toString()),a){const e=Xc(p,a);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),n=e.find((e=>e.groups&&e.groups.text)),o=e.find((e=>e.length>1)),g=e.length>1&&o;if(t||n){var i,r,l,d,c,h;p=null!==(i=null==t||null===(r=t.groups)||void 0===r?void 0:r.value)&&void 0!==i?i:null==n||null===(l=n.groups)||void 0===l?void 0:l.text,u=null!==(d=null==n||null===(c=n.groups)||void 0===c?void 0:c.text)&&void 0!==d?d:null==t||null===(h=t.groups)||void 0===h?void 0:h.value}else{if(g){for(let t=0;t<e.length;t++){const n=e[t];s.push({text:n[1],value:n[1],selected:!1})}continue}o&&(u=o[1],p=o[1])}}s.push({text:u,value:p,selected:!1})}return s=(0,o.uniqBy)(s,"value"),((e,t)=>{if(t===qc.$U.disabled)return e;const n=Math.ceil(t/2),a=t%2==0;return 1===n?e=(0,o.sortBy)(e,"text"):2===n?e=(0,o.sortBy)(e,(e=>{if(!e.text)return-1;const t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)})):3===n&&(e=(0,o.sortBy)(e,(e=>(0,o.toLower)(e.text)))),a&&(e=e.reverse()),e})(s,t)},tu=(0,Kc.oM)({name:"templating/query",initialState:Jc.s,reducers:{updateVariableOptions:(e,t)=>{const{results:n,templatedRegex:a}=t.payload.data,s=(0,mc.ir)(e,t.payload.id),{includeAll:i,sort:r}=s,o=eu(a,r,n);i&&o.unshift({text:Qc.xk,value:Qc.r2,selected:!1}),o.length||o.push({text:Qc.BH,value:Qc.QX,isNone:!0,selected:!1}),s.options=o}}}),nu=tu.reducer,{updateVariableOptions:au}=tu.actions;function su(){return e=>e.pipe((0,ue.U)((e=>{const t=e.series;if(!t||!t.length)return[];if(function(e){if(!e)return!1;if(!e.length)return!0;const t=e[0];if((0,u.isDataFrame)(t))return!1;for(const e in t){if(!t.hasOwnProperty(e))continue;if(null!==t[e]&&"string"!=typeof t[e]&&"number"!=typeof t[e])continue;const n=e.toLowerCase();if("text"===n||"value"===n)return!0}return!1}(t))return t;const n=(0,sc.F9)(t),a=[];let s=-1,i=-1,r=-1,o=-1;for(const e of n)for(let n=0;n<e.fields.length;n++){const a=e.fields[n],l=(0,u.getFieldDisplayName)(a,e,t).toLowerCase();a.type===u.FieldType.string&&-1===r&&(r=n),"text"===l&&a.type===u.FieldType.string&&-1===i&&(i=n),"value"===l&&a.type===u.FieldType.string&&-1===s&&(s=n),"expandable"!==l||a.type!==u.FieldType.boolean&&a.type!==u.FieldType.number||-1!==o||(o=n)}if(-1===r)throw new Error("Couldn't find any field of type string in the results.");for(const e of t)for(let t=0;t<e.length;t++){const n=-1!==o?e.fields[o].values.get(t):void 0,l=e.fields[r].values.get(t),d=-1!==i?e.fields[i].values.get(t):null,c=-1!==s?e.fields[s].values.get(t):null;-1!==s||-1!==i?-1!==s||-1===i?-1===s||-1!==i?a.push({text:d,value:c,expandable:n}):a.push({text:c,value:c,expandable:n}):a.push({text:d,value:d,expandable:n}):a.push({text:l,value:l,expandable:n})}return a})))}function iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ru{constructor(){iu(this,"runners",void 0),this.runners=[new ou,new lu,new du,new cu]}getRunnerForDatasource(e){const t=this.runners.find((t=>t.canRun(e)));if(t)return t;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class ou{constructor(){iu(this,"type",u.VariableSupportType.Legacy)}canRun(e){return(0,$c.R)(e)}getTarget(e){let{datasource:t,variable:n}=e;if((0,$c.R)(t))return n.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,variable:a,searchFilter:s,timeSrv:i}=e;if(!(0,$c.R)(n))return uu();const r=(0,lc.AQ)(a,s,i);return(0,Zt.D)(n.metricFindQuery(a.query,r)).pipe((0,qt.z)((e=>{if(!e||!e.length)return uu();const t=e;return(0,ye.of)({series:t,state:u.LoadingState.Done,timeRange:r.range})})))}}class lu{constructor(){iu(this,"type",u.VariableSupportType.Standard)}canRun(e){return(0,$c.Ju)(e)}getTarget(e){let{datasource:t,variable:n}=e;if((0,$c.Ju)(t))return t.variables.toDataQuery(n.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,runRequest:a}=e;return(0,$c.Ju)(n)?n.variables.query?a(n,t,n.variables.query):a(n,t):uu()}}class du{constructor(){iu(this,"type",u.VariableSupportType.Custom)}canRun(e){return(0,$c.d7)(e)}getTarget(e){let{datasource:t,variable:n}=e;if((0,$c.d7)(t))return n.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,runRequest:a}=e;return(0,$c.d7)(n)?a(n,t,n.variables.query):uu()}}class cu{constructor(){iu(this,"type",u.VariableSupportType.Datasource)}canRun(e){return(0,$c.X7)(e)}getTarget(e){let{datasource:t,variable:n}=e;var a;if((0,$c.X7)(t))return Object.assign({},n.query,{refId:null!==(a=n.query.refId)&&void 0!==a?a:"variable-query"});throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:n,runRequest:a}=e;return(0,$c.X7)(n)?a(n,t):uu()}}function uu(){return(0,ye.of)({state:u.LoadingState.Done,series:[],timeRange:(0,u.getDefaultTimeRange)()})}function hu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dispatch:dr.WI,getState:dr.y0,getVariable:mc.E0,getTemplatedRegex:lc.gR,getTimeSrv:Kd.$t,queryRunners:new ru,runRequest:sc.v7};hu(this,"updateOptionsRequests",void 0),hu(this,"updateOptionsResults",void 0),hu(this,"cancelRequests",void 0),hu(this,"subscription",void 0),this.dependencies=e,this.updateOptionsRequests=new Lc.x,this.updateOptionsResults=new Lc.x,this.cancelRequests=new Lc.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(e){this.updateOptionsRequests.next(e)}getResponse(e){return this.updateOptionsResults.asObservable().pipe((0,Bc.h)((t=>t.identifier===e)))}cancelRequest(e){this.cancelRequests.next({identifier:e})}destroy(){this.subscription.unsubscribe()}onNewRequest(e){const{datasource:t,identifier:n,searchFilter:a}=e;try{const{dispatch:s,runRequest:i,getTemplatedRegex:r,getVariable:o,queryRunners:l,getTimeSrv:d,getState:c}=this.dependencies,h=(0,mc.S_)(c());this.updateOptionsResults.next({identifier:n,state:u.LoadingState.Loading});const p=o(n,c()),g={variable:p,datasource:t,searchFilter:a,timeSrv:d(),runRequest:i},m=l.getRunnerForDatasource(t),f=m.getTarget({datasource:t,variable:p}),v=this.getRequest(p,e,f);m.runRequest(g,v).pipe((0,Bc.h)((()=>{const e=(0,mc.S_)(c());return h===e})),(0,Bc.h)((e=>e.state===u.LoadingState.Done||e.state===u.LoadingState.Error)),(0,zc.q)(1),(0,qt.z)((e=>e.state===u.LoadingState.Error?(0,Ec._)((()=>e.error)):(0,ye.of)(e))),su(),function(e){return t=>t.pipe((0,ue.U)((t=>{const{variable:n,dispatch:a,getTemplatedRegexFunc:s}=e;if(!n.rootStateKey)return void console.error("updateOptionsState: variable.rootStateKey is not defined");const i=s(n),r=(0,lc.Y6)(n,{results:t,templatedRegex:i});a((0,Gc.mb)(n.rootStateKey,au(r)))})))}({variable:p,dispatch:s,getTemplatedRegexFunc:r}),function(e){return t=>t.pipe((0,qt.z)((()=>{const{dispatch:t,variable:n,searchFilter:a}=e;return a?(0,ye.of)():(0,Zt.D)(t((0,Zc.xQ)((0,lc.yQ)(n))))})))}({variable:p,dispatch:s,searchFilter:a}),(0,_c.R)((0,Vc.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,Bc.h)((e=>{let t=!1;return e.identifier.id===n.id&&(t=!0,this.updateOptionsResults.next({identifier:n,state:u.LoadingState.Loading,cancelled:t})),t})))),(0,Uc.K)((e=>e.cancelled?(0,ye.of)({}):(this.updateOptionsResults.next({identifier:n,state:u.LoadingState.Error,error:e}),(0,Ec._)((()=>e))))),(0,Hc.x)((()=>{this.updateOptionsResults.next({identifier:n,state:u.LoadingState.Done})}))).subscribe()}catch(e){this.updateOptionsResults.next({identifier:n,state:u.LoadingState.Error,error:e})}}getRequest(e,t,n){const{searchFilter:a}=t,s={variable:{text:e.current.text,value:e.current.value}},i=a?{searchFilter:{text:a,value:a}}:{},r=Object.assign({},i,s),o=e.refresh===qc.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,u.getDefaultTimeRange)();return{app:u.CoreApp.Dashboard,requestId:(0,Wc.Z)(),timezone:"",range:o,interval:"",intervalMs:0,targets:[n],scopedVars:r,startTime:Date.now()}}}let gu;function mu(){return gu}var fu=n(93285);let vu;!function(e){e[e.moveUp=38]="moveUp",e[e.moveDown=40]="moveDown",e[e.select=32]="select",e[e.cancel=27]="cancel",e[e.selectAndClose=13]="selectAndClose"}(vu||(vu={}));const bu=["value","id","onNavigate"];function xu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class yu extends d.PureComponent{constructor(){super(...arguments),xu(this,"onKeyDown",(e=>{if(vu[e.keyCode]){const t=e.ctrlKey||e.metaKey||e.shiftKey;this.props.onNavigate(e.keyCode,t),e.preventDefault()}})),xu(this,"onChange",(e=>{this.props.onChange(e.target.value)}))}render(){const e=this.props,{value:t}=e,n=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,bu);return(0,j.jsx)("input",Object.assign({},n,{ref:e=>{e&&(e.focus(),e.setAttribute("style",`width:${Math.max(e.width,150)}px`))},type:"text",className:"gf-form-input",value:null!=t?t:"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:"Enter variable value"}))}}var wu;const ju=e=>{let{loading:t,disabled:n,onClick:a,text:s,onCancel:i,id:r}=e;const o=(0,m.useStyles2)(ku),l=(0,d.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),a()}),[a]);return t?(0,j.jsxs)("div",{className:o.container,"data-testid":yt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${s}`),title:s,id:r,children:[(0,j.jsx)(Su,{text:s}),(0,j.jsx)(Cu,{onCancel:i})]}):(0,j.jsxs)("button",{onClick:l,className:o.container,"data-testid":yt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${s}`),"aria-expanded":!1,"aria-controls":`options-${r}`,id:r,title:s,disabled:n,children:[(0,j.jsx)(Su,{text:s}),wu||(wu=(0,j.jsx)(m.Icon,{"aria-hidden":!0,name:"angle-down",size:"sm"}))]})},Su=e=>{let{text:t}=e;const n=(0,m.useStyles2)(ku);return(0,j.jsx)("span",{className:n.textAndTags,children:t})},Cu=e=>{let{onCancel:t}=e;const n=(0,d.useCallback)((e=>{e.preventDefault(),t()}),[t]);return(0,j.jsx)(m.Tooltip,{content:"Cancel query",children:(0,j.jsx)(m.Icon,{className:"spin-clockwise",name:"sync",size:"xs",onClick:n,"aria-label":yt.wl.components.LoadingIndicator.icon})})},ku=e=>({container:b.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${e.spacing(1)};
    background-color: ${e.components.input.background};
    border: 1px solid ${e.components.input.borderColor};
    border-radius: ${e.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${e.colors.text};
    height: ${e.spacing(e.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      border: 1px solid ${e.colors.action.disabledBackground};
    }
  `,textAndTags:b.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${e.spacing(.25)};
    user-select: none;
  `});var Tu,Iu;const Ou=["multi","values","highlightIndex","selectedValues","onToggle","onToggleAll"];function Nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Fu extends d.PureComponent{constructor(){super(...arguments),Nu(this,"onToggle",(e=>t=>{const n=t.shiftKey||t.ctrlKey||t.metaKey;this.handleEvent(t),this.props.onToggle(e,n)})),Nu(this,"onToggleAll",(e=>{this.handleEvent(e),this.props.onToggleAll()}))}handleEvent(e){e.preventDefault(),e.stopPropagation()}render(){const e=this.props,{multi:t,values:n}=e,a=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,Ou);return(0,j.jsx)("div",{className:""+(t?"variable-value-dropdown multi":"variable-value-dropdown single"),children:(0,j.jsx)("div",{className:"variable-options-wrapper",children:(0,j.jsxs)("ul",Object.assign({className:Du,"aria-label":yt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown},a,{children:[this.renderMultiToggle(),n.map(((e,t)=>this.renderOption(e,t)))]}))})})}renderOption(e,t){const{highlightIndex:n}=this.props,a=e.selected?"variable-option pointer selected":"variable-option pointer",s=t===n?`${a} highlighted`:a;return(0,j.jsx)("li",{children:(0,j.jsxs)("a",{role:"checkbox","aria-checked":e.selected,className:s,onClick:this.onToggle(e),children:[Tu||(Tu=(0,j.jsx)("span",{className:"variable-option-icon"})),(0,j.jsx)("span",{"data-testid":yt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${e.text}`),children:e.text})]})},`${e.value}`)}renderMultiToggle(){const{multi:e,selectedValues:t}=this.props;return e?(0,j.jsx)(m.Tooltip,{content:"Clear selections",placement:"top",children:(0,j.jsxs)("a",{className:""+(t.length>1?"variable-options-column-header many-selected":"variable-options-column-header"),role:"checkbox","aria-checked":t.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top",children:[Iu||(Iu=(0,j.jsx)("span",{className:"variable-option-icon"})),"Selected (",t.length,")"]})}):null}}const Du=(0,b.cx)("variable-options-column",b.css`
    list-style-type: none;
  `);var Pu=n(30146),Au=n(231);const Mu=(e,t,n)=>async(a,s)=>t===vu.cancel?await a($u(e)):t===vu.select?a(Eu(e,n)):t===vu.selectAndClose?(a(Eu(e,n,!0)),await a($u(e))):t===vu.moveDown?a((0,Gc.mb)(e,(0,Au.Ew)(1))):t===vu.moveUp?a((0,Gc.mb)(e,(0,Au.Ew)(-1))):void 0,Ru=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return async(n,a)=>{const{rootStateKey:s}=e,{id:i,queryValue:r}=(0,mc.AE)(s,a()).optionsPicker,l={id:i,rootStateKey:s,type:"query"},{query:d,options:c}=(0,mc.E0)(l,a());if(n((0,Gc.mb)(s,(0,Au.Ug)(t))),(0,o.trim)(r)!==(0,o.trim)(t))return(0,lc.bf)(d)?Vu(n,a,t,s):n((0,Gc.mb)(s,(0,Au.ss)(c)))}},$u=(e,t)=>async(n,a)=>{const s=(0,mc.AE)(e,a()).optionsPicker,i={id:s.id,rootStateKey:e,type:"query"},r=(0,mc.E0)(i,a()),o={option:Bu(s)},l={propName:"queryValue",propValue:s.queryValue};n((0,Gc.mb)(e,(0,Pu.Q8)((0,lc.Y6)(r,o)))),n((0,Gc.mb)(e,(0,Pu.Pl)((0,lc.Y6)(r,l))));const d=(0,mc.E0)(i,a());if(n((0,Gc.mb)(e,(0,Au.nn)())),(0,lc.N9)(r)!==(0,lc.N9)(d))return t?t(d):await(async e=>{const t=oc.z.get(e.type);await t.setValue(e,e.current,!0)})(d)},Lu=(e,t)=>async(n,a)=>{const{id:s,rootStateKey:i}=e,r=(0,mc.AE)(i,a()).optionsPicker;r.id&&r.id!==s&&await n($u(i,t));const o=(0,mc.E0)(e,a());n((0,Gc.mb)(i,(0,Au.aN)(o)))},Eu=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(a,s)=>{const{highlightIndex:i,options:r}=(0,mc.AE)(e,s()).optionsPicker,o=r[i];a((0,Gc.mb)(e,(0,Au._M)({option:o,forceSelect:n,clearOthers:t})))}},Vu=(0,o.debounce)((async(e,t,n,a)=>{try{const{id:s}=(0,mc.AE)(a,t()).optionsPicker,i={id:s,rootStateKey:a,type:"query"},r=(0,mc.E0)(i,t()),o=oc.z.get(r.type);await o.updateOptions(r,n);const l=(0,mc.E0)(i,t());e((0,Gc.mb)(a,(0,Au.wF)(l.options)))}catch(e){console.error(e)}}),500);function Bu(e){const{options:t,selectedValues:n,queryValue:a,multi:s}=e;if(0===t.length&&a&&a.length>0)return{text:a,value:a,selected:!1};if(!s)return n.find((e=>e.selected));const i=[],r=[];for(const e of n)e.selected&&(i.push(e.text.toString()),r.push(e.value.toString()));return{value:r,text:i,selected:!0}}function zu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _u=()=>{const e=(0,An.connect)(((e,t)=>{const{rootStateKey:n}=t.variable;return n?{picker:(0,mc.AE)(n,e).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Au.yy})}),(e=>Object.assign({},(0,Rc.bindActionCreators)({openOptions:Lu,commitChangesToVariable:$u,navigateOptions:Mu},e),{filterOrSearchOptions:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(Ru(t,n))},toggleAllOptions:t=>e((0,Gc.mb)(t.rootStateKey,(0,Au.iQ)())),toggleOption:(t,n,a,s)=>e((0,Gc.mb)(t.rootStateKey,(0,Au._M)({option:n,clearOthers:a,forceSelect:s})))})));class t extends d.PureComponent{constructor(){super(...arguments),zu(this,"onShowOptions",(()=>this.props.openOptions((0,lc.yQ)(this.props.variable),this.props.onVariableChange))),zu(this,"onHideOptions",(()=>{this.props.variable.rootStateKey?this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange):console.error("Variable has no rootStateKey")})),zu(this,"onToggleOption",((e,t)=>{((0,$c.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(e,t)})),zu(this,"onToggleSingleValueVariable",((e,t)=>{this.props.toggleOption((0,lc.yQ)(this.props.variable),e,t,!1),this.onHideOptions()})),zu(this,"onToggleMultiValueVariable",((e,t)=>{this.props.toggleOption((0,lc.yQ)(this.props.variable),e,t,!1)})),zu(this,"onToggleAllOptions",(()=>{this.props.toggleAllOptions((0,lc.yQ)(this.props.variable))})),zu(this,"onFilterOrSearchOptions",(e=>{this.props.filterOrSearchOptions((0,lc.yQ)(this.props.variable),e)})),zu(this,"onNavigate",((e,t)=>{this.props.variable.rootStateKey?this.props.navigateOptions(this.props.variable.rootStateKey,e,t):console.error("Variable has no rootStateKey")})),zu(this,"onCancel",(()=>{mu().cancelRequest((0,lc.yQ)(this.props.variable))}))}render(){const{variable:e,picker:t}=this.props,n=t.id===e.id;return(0,j.jsx)("div",{className:"variable-link-wrapper",children:n?this.renderOptions(t):this.renderLink(e)})}renderLink(e){const t=(0,fu.y)(e),n=e.state===u.LoadingState.Loading;return(0,j.jsx)(ju,{id:`var-${e.id}`,text:t,onClick:this.onShowOptions,loading:n,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(e){const{id:t}=this.props.variable;return(0,j.jsxs)(m.ClickOutsideWrapper,{onClick:this.onHideOptions,children:[(0,j.jsx)(yu,{id:`var-${t}`,value:e.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${t}`}),(0,j.jsx)(Fu,{values:e.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:e.highlightIndex,multi:e.multi,selectedValues:e.selectedValues,id:`options-${t}`})]})}}const n=e(t);return n.displayName="OptionsPicker",n};var Uu,Hu=n(76874);function Wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qu extends d.PureComponent{constructor(){super(...arguments),Wu(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Wu(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[Uu||(Uu=(0,j.jsx)(dc.e,{name:"Constant options"})),(0,j.jsx)(Hu.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,labelWidth:20,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,grow:!0})]})}}const Zu=Object.assign({},qc.Eg,{type:"constant",hide:qc.bU.hideVariable,query:"",current:{},options:[]}),Gu=(0,Kc.oM)({name:"templating/constant",initialState:Jc.s,reducers:{createConstantOptionsFromQuery:(e,t)=>{const n=(0,mc.ir)(e,t.payload.id);n.options=[{text:n.query.trim(),value:n.query.trim(),selected:!1}]}}}),Ku=Gu.reducer,{createConstantOptionsFromQuery:Qu}=Gu.actions,Ju=["index","id","state","global","current","options","rootStateKey"],Yu=["current","options","query"];function Xu(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}const eh=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:Zu,reducer:Ku,picker:_u(),editor:qu,dependsOn:()=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,dr.WI)((0,Zc.Fz)((0,lc.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,dr.WI)((0,Zc.Ci)((0,lc.yQ)(e),t))},updateOptions:async e=>{var t;await(0,dr.WI)((t=(0,lc.yQ)(e),async e=>{const{rootStateKey:n}=t;await e((0,Gc.mb)(n,Qu((0,lc.Y6)(t)))),await e((0,Zc.xQ)(t))}))},getSaveModel:e=>Xu((0,o.cloneDeep)(e),Ju),getValueForUrl:e=>e.current.value,beforeAdding:e=>{const t=(0,o.cloneDeep)(e),{query:n}=t,a=Xu(t,Yu),s={selected:!0,text:n,value:n};return Object.assign({},a,{current:s,options:[s],query:n})}});var th,nh=n(68366);function ah(e){let{value:t,name:n,tooltip:a,onChange:s,ariaLabel:i}=e;const r=(0,nh.L)();return(0,j.jsx)(m.InlineField,{label:n,labelWidth:20,tooltip:a,children:(0,j.jsx)(m.InlineSwitch,{id:`var-switch-${r}`,label:n,value:t,onChange:s,"aria-label":i})})}const sh=e=>{var t;let{onMultiChanged:n,onPropChange:a,variable:s}=e;const i=(0,d.useCallback)((e=>{n((0,lc.yQ)(s),e.target.checked)}),[n,s]),r=(0,d.useCallback)((e=>{a({propName:"includeAll",propValue:e.target.checked})}),[a]),o=(0,d.useCallback)((e=>{a({propName:"allValue",propValue:e.currentTarget.value})}),[a]);return(0,j.jsxs)(m.VerticalGroup,{spacing:"none",children:[th||(th=(0,j.jsx)(dc.e,{name:"Selection options"})),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(ah,{value:s.multi,name:"Multi-value",tooltip:"Enables multiple values to be selected at the same time",onChange:i,ariaLabel:yt.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(ah,{value:s.includeAll,name:"Include All option",tooltip:"Enables an option to include all variables",onChange:r,ariaLabel:yt.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch})}),s.includeAll&&(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(Hu.V,{value:null!==(t=s.allValue)&&void 0!==t?t:"",onChange:o,name:"Custom all value",placeholder:"blank = auto",testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2,labelWidth:20})})]})};sh.displayName="SelectionOptionsEditor";var ih,rh=n(93850);function oh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class lh extends d.PureComponent{constructor(){super(...arguments),oh(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),oh(this,"onSelectionOptionsChange",(async e=>{let{propName:t,propValue:n}=e;this.props.onPropChange({propName:t,propValue:n,updateOptions:!0})})),oh(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[ih||(ih=(0,j.jsx)(dc.e,{name:"Custom options"})),(0,j.jsxs)(m.VerticalGroup,{spacing:"md",children:[(0,j.jsx)(m.VerticalGroup,{spacing:"none",children:(0,j.jsx)(rh.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:50,labelWidth:27,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput})}),(0,j.jsx)(sh,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})," "]})]})}}const dh=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const s=(0,An.connect)(...n)(e);return e=>(0,j.jsx)(s,Object.assign({},e,{store:dr.h}))}(lh,((e,t)=>({})),{changeVariableMultiValue:Zc.Z7}),ch=Object.assign({},qc.Eg,{type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}}),uh=(0,Kc.oM)({name:"templating/custom",initialState:Jc.s,reducers:{createCustomOptionsFromQuery:(e,t)=>{var n;const a=(0,mc.ir)(e,t.payload.id),{includeAll:s,query:i}=a,r=(null!==(n=i.match(/(?:\\,|[^,])+/g))&&void 0!==n?n:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const n=null!==(t=/^(.+)\s:\s(.+)$/g.exec(e))&&void 0!==t?t:[];if(3===n.length){const[,e,t]=n;return{text:e.trim(),value:t.trim(),selected:!1}}return{text:e.trim(),value:e.trim(),selected:!1}}));s&&r.unshift({text:Qc.xk,value:Qc.r2,selected:!1}),a.options=r}}}),hh=uh.reducer,{createCustomOptionsFromQuery:ph}=uh.actions,gh=["index","id","state","global","rootStateKey"];const mh=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:ch,reducer:hh,picker:_u(),editor:dh,dependsOn:()=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,dr.WI)((0,Zc.Fz)((0,lc.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,dr.WI)((0,Zc.Ci)((0,lc.yQ)(e),t))},updateOptions:async e=>{var t;await(0,dr.WI)((t=(0,lc.yQ)(e),async e=>{const{rootStateKey:n}=t;await e((0,Gc.mb)(n,ph((0,lc.Y6)(t)))),await e((0,Zc.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}((0,o.cloneDeep)(e),gh),getValueForUrl:e=>(0,lc.HY)(e)?Qc.xk:e.current.value});var fh=n(1557);const vh=Object.assign({},qc.Eg,{type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:qc.Bd.onDashboardLoad}),bh=(0,Kc.oM)({name:"templating/datasource",initialState:Jc.s,reducers:{createDataSourceOptions:(e,t)=>{const{sources:n,regex:a}=t.payload.data,s=[],i=(0,mc.ir)(e,t.payload.id);for(let e=0;e<n.length;e++){const t=n[e];t.meta.id===i.query&&(xh(t,a)&&s.push({text:t.name,value:t.name,selected:!1}),yh(t,a)&&s.push({text:"default",value:"default",selected:!1}))}0===s.length&&s.push({text:"No data sources found",value:"",selected:!1}),i.includeAll&&s.unshift({text:Qc.xk,value:Qc.r2,selected:!1}),i.options=s}}});function xh(e,t){return!t||t.exec(e.name)}function yh(e,t){return!!e.isDefault&&(!t||t.exec("default"))}const wh=bh.reducer,{createDataSourceOptions:jh}=bh.actions;var Sh,Ch;function kh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Th={initDataSourceVariableEditor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getDatasourceSrv:i.ak};return n=>{const a=t.getDatasourceSrv().getList({metrics:!0,variables:!0}),s=(0,o.chain)(a).uniqBy("meta.id").map((e=>({text:e.meta.name,value:e.meta.id}))).value();s.unshift({text:"",value:""}),n((0,Gc.mb)(e,(0,cc.z7)({dataSourceTypes:s})))}},changeVariableMultiValue:Zc.Z7},Ih=(0,An.connect)(((e,t)=>{const{variable:{rootStateKey:n}}=t;if(!n)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:hc(cc.PF)};const{editor:a}=(0,mc.AE)(n,e);return{extended:hc(a)}}),Th);class Oh extends d.PureComponent{constructor(){super(...arguments),kh(this,"onRegExChange",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value})})),kh(this,"onRegExBlur",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value,updateOptions:!0})})),kh(this,"onSelectionOptionsChange",(async e=>{let{propValue:t,propName:n}=e;this.props.onPropChange({propName:n,propValue:t,updateOptions:!0})})),kh(this,"getSelectedDataSourceTypeValue",(()=>{const{extended:e}=this.props;if(null==e||!e.dataSourceTypes.length)return"";const t=e.dataSourceTypes.find((e=>e.value===this.props.variable.query)),n=t?t.value:e.dataSourceTypes[0].value;return null!=n?n:""})),kh(this,"onDataSourceTypeChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.value,updateOptions:!0})}))}componentDidMount(){const{rootStateKey:e}=this.props.variable;e?this.props.initDataSourceVariableEditor(e):console.error("DataSourceVariableEditor: variable has no rootStateKey")}render(){var e,t,n;const{variable:a,extended:s,changeVariableMultiValue:i}=this.props,r=null!=s&&null!==(e=s.dataSourceTypes)&&void 0!==e&&e.length?null===(t=s.dataSourceTypes)||void 0===t?void 0:t.map((e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.text}})):[],o=null!==(n=r.find((e=>e.value===a.query)))&&void 0!==n?n:r[0];return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[Sh||(Sh=(0,j.jsx)(dc.e,{name:"Data source options"})),(0,j.jsxs)(m.VerticalGroup,{spacing:"md",children:[(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(fh.u,{name:"Type",value:o,options:r,onChange:this.onDataSourceTypeChanged,labelWidth:10,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect})}),(0,j.jsx)(m.InlineFieldRow,{children:(0,j.jsx)(Hu.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,labelWidth:20,tooltip:Ch||(Ch=(0,j.jsxs)("div",{children:["Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",(0,j.jsx)("br",{}),(0,j.jsx)("br",{}),"Example: ",(0,j.jsx)("code",{children:"/^prod/"})]}))})})]}),(0,j.jsx)(sh,{variable:a,onPropChange:this.onSelectionOptionsChange,onMultiChanged:i})]})]})}}const Nh=Ih(Oh),Fh=["index","id","state","global","rootStateKey"];const Dh=()=>({id:"datasource",description:"Enabled you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:vh,reducer:wh,picker:_u(),editor:Nh,dependsOn:(e,t)=>!!e.regex&&(0,lc.QI)(e.regex,t.name),setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,dr.WI)((0,Zc.Fz)((0,lc.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,dr.WI)((0,Zc.Ci)((0,lc.yQ)(e),t))},updateOptions:async e=>{await(0,dr.WI)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getDatasourceSrv:i.ak};return async(n,a)=>{const{rootStateKey:s}=e,i=t.getDatasourceSrv().getList({metrics:!0,variables:!1}),r=(0,mc.E0)(e,a());let o;r.regex&&(o=(0,h.getTemplateSrv)().replace(r.regex,void 0,"regex"),o=(0,u.stringToJsRegex)(o)),n((0,Gc.mb)(s,jh((0,lc.Y6)(e,{sources:i,regex:o})))),await n((0,Zc.xQ)(e))}}((0,lc.yQ)(e)))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}((0,o.cloneDeep)(e),Fh);return Object.assign({},t,{options:[]})},getValueForUrl:e=>(0,lc.HY)(e)?Qc.xk:e.current.value});var Ph,Ah=n(18397);function Mh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Rh extends d.PureComponent{constructor(){super(...arguments),Mh(this,"onAutoChange",(e=>{this.props.onPropChange({propName:"auto",propValue:e.target.checked,updateOptions:!0})})),Mh(this,"onQueryChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Mh(this,"onQueryBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})})),Mh(this,"onAutoCountChanged",(e=>{this.props.onPropChange({propName:"auto_count",propValue:e.value,updateOptions:!0})})),Mh(this,"onAutoMinChanged",(e=>{this.props.onPropChange({propName:"auto_min",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){var e;const{variable:t}=this.props,n=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map((e=>({label:`${e}`,value:e}))),a=null!==(e=n.find((e=>e.value===t.auto_count)))&&void 0!==e?e:n[0];return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[Ph||(Ph=(0,j.jsx)(dc.e,{name:"Interval options"})),(0,j.jsxs)(m.VerticalGroup,{spacing:"none",children:[(0,j.jsx)(Hu.V,{value:this.props.variable.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:this.onQueryChanged,onBlur:this.onQueryBlur,labelWidth:20,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,grow:!0,required:!0}),(0,j.jsxs)(m.InlineFieldRow,{children:[(0,j.jsx)(ah,{value:this.props.variable.auto,name:"Auto option",tooltip:"Dynamically calculates interval by dividing time range by the count specified.",onChange:this.onAutoChange}),this.props.variable.auto?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(fh.u,{name:"Step count",value:a,options:n,onChange:this.onAutoCountChanged,tooltip:"How many times the current time range should be divided to calculate the value.",labelWidth:7,width:9}),(0,j.jsx)(Hu.V,{value:this.props.variable.auto_min,name:"Min interval",placeholder:"10s",onChange:this.onAutoMinChanged,tooltip:"The calculated value will not go below this threshold.",labelWidth:13,width:11})]}):null]})]})]})}}var $h=n(7166);const Lh=Object.assign({},qc.Eg,{type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:qc.Bd.onTimeRangeChanged,current:{}}),Eh=(0,Kc.oM)({name:"templating/interval",initialState:Jc.s,reducers:{createIntervalOptions:(e,t)=>{const n=(0,mc.ir)(e,t.payload.id),a=(0,o.map)(n.query.match(/(["'])(.*?)\1|\w+/g),(e=>({text:(e=e.replace(/["']+/g,"")).trim(),value:e.trim(),selected:!1})));n.auto&&a.length&&"auto"!==a[0].text&&a.unshift({text:"auto",value:"$__auto_interval_"+n.name,selected:!1}),n.options=a}}}),Vh=Eh.reducer,{createIntervalOptions:Bh}=Eh.actions,zh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{calculateInterval:u.rangeUtil.calculateInterval,getTimeSrv:Kd.$t,templateSrv:(0,$h.J)()};return(n,a)=>{const s=(0,mc.E0)(e,a());if(s.auto){const e=t.calculateInterval(t.getTimeSrv().timeRange(),s.auto_count,s.auto_min);t.templateSrv.setGrafanaVariable("$__auto_interval_"+s.name,e.interval),t.templateSrv.setGrafanaVariable("$__auto_interval",e.interval)}}},_h=["index","id","state","global","rootStateKey"];const Uh=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Lh,reducer:Vh,picker:_u(),editor:Rh,dependsOn:()=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,dr.WI)(zh((0,lc.yQ)(e))),await(0,dr.WI)((0,Zc.Fz)((0,lc.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,dr.WI)(zh((0,lc.yQ)(e))),await(0,dr.WI)((0,Zc.Ci)((0,lc.yQ)(e),t))},updateOptions:async e=>{var t;await(0,dr.WI)((t=(0,lc.yQ)(e),async e=>{const{rootStateKey:n}=t;await e((0,Gc.mb)(n,Bh((0,lc.Y6)(t)))),await e(zh(t)),await e((0,Zc.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}((0,o.cloneDeep)(e),_h),getValueForUrl:e=>e.current.value}),Hh=[{label:"On dashboard load",value:qc.Bd.onDashboardLoad},{label:"On time range change",value:qc.Bd.onTimeRangeChanged}];function Wh(e){let{onChange:t,refresh:n}=e;const a=(0,d.useMemo)((()=>{var e;return null!==(e=Hh.find((e=>e.value===n)))&&void 0!==e?e:Hh[0]}),[n]);return(0,j.jsx)(fh.u,{name:"Refresh",value:a,options:Hh,onChange:t,labelWidth:10,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,tooltip:"When to update the values of this variable."})}const qh=[{label:"Disabled",value:qc.$U.disabled},{label:"Alphabetical (asc)",value:qc.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:qc.$U.alphabeticalDesc},{label:"Numerical (asc)",value:qc.$U.numericalAsc},{label:"Numerical (desc)",value:qc.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:qc.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:qc.$U.alphabeticalCaseInsensitiveDesc}];function Zh(e){let{onChange:t,sort:n}=e;const a=(0,d.useMemo)((()=>{var e;return null!==(e=qh.find((e=>e.value===n)))&&void 0!==e?e:qh[0]}),[n]);return(0,j.jsx)(fh.u,{name:"Sort",value:a,options:qh,onChange:t,labelWidth:10,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,tooltip:"How to sort the values of this variable."})}var Gh=n(4203),Kh=n(7852);function Qh(e){let{datasource:t,query:n,onChange:a}=e;const s=(0,d.useCallback)((e=>{a({refId:"StandardVariableQuery",query:e})}),[a]);return(0,j.jsx)(Kh.R,{query:n.query,onChange:s,datasource:t,templateSrv:(0,h.getTemplateSrv)()})}const Jh=(e,t)=>async(n,a)=>{try{var s;const{rootStateKey:i}=e;if(!(0,lc.A3)(i,a()))return;const r=(0,mc.E0)(e,a());(0,mc.AE)(i,a()).editor.id===r.id&&n((0,Gc.mb)(i,(0,cc.PV)({errorProp:"update"})));const o=await(0,h.getDataSourceSrv)().get(null!==(s=r.datasource)&&void 0!==s?s:"");await new Promise(((n,a)=>{const s=new Gh.w0,i=function(e,t,n){return{next:a=>a.state===u.LoadingState.Error?(n.unsubscribe(),void t(a.error)):a.state===u.LoadingState.Done?(n.unsubscribe(),void e()):void 0,error:e=>{n.unsubscribe(),t(e)},complete:()=>{n.unsubscribe(),e()}}}(n,a,s),r=mu().getResponse(e).subscribe(i);s.add(r),mu().queueRequest({identifier:e,datasource:o,searchFilter:t})}))}catch(t){if(t instanceof Error){const s=(0,h.toDataQueryError)(t),{rootStateKey:i}=e;throw(0,mc.AE)(i,a()).editor.id===e.id&&n((0,Gc.mb)(i,(0,cc.Sg)({errorProp:"update",errorText:s.message}))),s}}},Yh=(e,t)=>async(n,a)=>{try{const{rootStateKey:s}=e,{editor:i}=(0,mc.AE)(s,a()),r=pc(i),o=null==r?void 0:r.dataSource,l=await(0,h.getDataSourceSrv)().get(null!=t?t:"");o&&o.type!==(null==l?void 0:l.type)&&n((0,Gc.mb)(s,(0,Pu.Pl)((0,lc.Y6)(e,{propName:"query",propValue:""}))));const d=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yd.nL;if((0,$c.d7)(e))return e.variables.editor;if((0,$c.X7)(e)){var n;const a=await t(e.meta);if(!a.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return null!==(n=a.components.QueryEditor)&&void 0!==n?n:null}return(0,$c.Ju)(e)?Qh:(0,$c.R)(e)?null!==(a=(await t(e.meta)).components.VariableQueryEditor)&&void 0!==a?a:Kh.R:null;var a}(l);n((0,Gc.mb)(s,(0,cc.z7)({dataSource:l,VariableQueryEditor:d})))}catch(e){console.error(e)}};function Xh(e){if("object"!=typeof e)return{query:e};return Object.keys(e).reduce(((t,n)=>{const a=e[n];if("object"!=typeof a)return t[n]=a,t;const s=Xh(a);for(let e in s)s.hasOwnProperty(e)&&(t[`${n}_${e}`]=s[e]);return t}),{})}var ep,tp;function np(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ap={initQueryVariableEditor:e=>async(t,n)=>{const a=(0,mc.E0)(e,n());await t(Yh((0,lc.yQ)(a),a.datasource))},changeQueryVariableDataSource:Yh,changeQueryVariableQuery:(e,t,n)=>async(a,s)=>{const{rootStateKey:i}=e,r=(0,mc.E0)(e,s());if(function(e,t){if("string"==typeof t&&t.match(new RegExp("\\$"+e+"(/| |$)")))return!0;const n=Xh(t);for(let t in n)if(n.hasOwnProperty(t)){const a=n[t];if("string"==typeof a&&a.match(new RegExp("\\$"+e+"(/| |$)")))return!0}return!1}(r.name,t)){const e="Query cannot contain a reference to itself. Variable: $"+r.name;a((0,Gc.mb)(i,(0,cc.Sg)({errorProp:"query",errorText:e})))}else a((0,Gc.mb)(i,(0,cc.PV)({errorProp:"query"}))),a((0,Gc.mb)(i,(0,Pu.Pl)((0,lc.Y6)(e,{propName:"query",propValue:t})))),n?a((0,Gc.mb)(i,(0,Pu.Pl)((0,lc.Y6)(e,{propName:"definition",propValue:n})))):"string"==typeof t&&a((0,Gc.mb)(i,(0,Pu.Pl)((0,lc.Y6)(e,{propName:"definition",propValue:t})))),await a((0,Zc.Rk)(e))},changeVariableMultiValue:Zc.Z7},sp=(0,An.connect)(((e,t)=>{const{rootStateKey:n}=t.variable;if(!n)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:pc(cc.PF)};const{editor:a}=(0,mc.AE)(n,e);return{extended:pc(a)}}),ap);class ip extends d.PureComponent{constructor(){super(...arguments),np(this,"state",{regex:null,tagsQuery:null,tagValuesQuery:null}),np(this,"onDataSourceChange",(e=>{this.props.onPropChange({propName:"datasource",propValue:e.isDefault?null:(0,u.getDataSourceRef)(e)})})),np(this,"onLegacyQueryChange",(async(e,t)=>{this.props.variable.query!==e&&this.props.changeQueryVariableQuery((0,lc.yQ)(this.props.variable),e,t)})),np(this,"onQueryChange",(async e=>{if(this.props.variable.query!==e){let t="";e&&e.hasOwnProperty("query")&&"string"==typeof e.query&&(t=e.query),this.props.changeQueryVariableQuery((0,lc.yQ)(this.props.variable),e,t)}})),np(this,"onRegExChange",(e=>{this.setState({regex:e.currentTarget.value})})),np(this,"onRegExBlur",(async e=>{const t=e.currentTarget.value;this.props.variable.regex!==t&&this.props.onPropChange({propName:"regex",propValue:t,updateOptions:!0})})),np(this,"onRefreshChange",(e=>{this.props.onPropChange({propName:"refresh",propValue:e.value})})),np(this,"onSortChange",(async e=>{this.props.onPropChange({propName:"sort",propValue:e.value,updateOptions:!0})})),np(this,"onSelectionOptionsChange",(async e=>{let{propValue:t,propName:n}=e;this.props.onPropChange({propName:n,propValue:t,updateOptions:!0})})),np(this,"renderQueryEditor",(()=>{const{extended:e,variable:t}=this.props;if(!e||!e.dataSource||!e.VariableQueryEditor)return null;const n=t.query,a=e.dataSource,s=e.VariableQueryEditor;if((0,$c.NX)(s,a))return(0,j.jsx)(s,{datasource:a,query:n,templateSrv:(0,h.getTemplateSrv)(),onChange:this.onLegacyQueryChange});const i=(0,Kd.$t)().timeRange();return(0,$c.$7)(s,a)?(0,j.jsx)(s,{datasource:a,query:n,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:u.LoadingState.Done,timeRange:i},range:i,onBlur:()=>{},history:[]}):null}))}async componentDidMount(){await this.props.initQueryVariableEditor((0,lc.yQ)(this.props.variable))}componentDidUpdate(e){e.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,lc.yQ)(this.props.variable),this.props.variable.datasource)}render(){var e;return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[ep||(ep=(0,j.jsx)(dc.e,{name:"Query Options"})),(0,j.jsxs)(m.VerticalGroup,{spacing:"lg",children:[(0,j.jsxs)(m.VerticalGroup,{spacing:"none",children:[(0,j.jsxs)(m.InlineFieldRow,{children:[(0,j.jsx)(m.InlineField,{label:"Data source",labelWidth:20,htmlFor:"data-source-picker",children:(0,j.jsx)(h.DataSourcePicker,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0})}),(0,j.jsx)(Wh,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh})]}),(0,j.jsx)("div",{className:b.css`
                flex-direction: column;
                width: 100%;
              `,children:this.renderQueryEditor()}),(0,j.jsx)(Hu.V,{value:null!==(e=this.state.regex)&&void 0!==e?e:this.props.variable.regex,name:"Regex",placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,labelWidth:20,interactive:!0,tooltip:tp||(tp=(0,j.jsxs)("div",{children:["Optional, if you want to extract part of a series name or metric node segment. Named capture groups can be used to separate the display text and value (",(0,j.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank",children:"see examples"}),")."]})),testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,grow:!0}),(0,j.jsx)(Zh,{onChange:this.onSortChange,sort:this.props.variable.sort})]}),(0,j.jsx)(sh,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})]})}}const rp=sp(ip),op=["index","id","state","global","queryValue","rootStateKey"];const lp=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Yc,reducer:nu,picker:_u(),editor:rp,dependsOn:(e,t)=>{var n;return(0,lc.QI)(e.query,null===(n=e.datasource)||void 0===n?void 0:n.uid,e.regex,t.name)},setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,dr.WI)((0,Zc.Fz)((0,lc.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,dr.WI)((0,Zc.Ci)((0,lc.yQ)(e),t))},updateOptions:async(e,t)=>{await(0,dr.WI)(Jh((0,lc.yQ)(e),t))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}((0,o.cloneDeep)(e),op);return e.refresh!==qc.Bd.never?Object.assign({},t,{options:[]}):t},getValueForUrl:e=>(0,lc.HY)(e)?Qc.xk:e.current.value});var dp;function cp(e){let{onPropChange:t,variable:{query:n}}=e;const a=(0,d.useCallback)(((e,n)=>{e.preventDefault(),t({propName:"originalQuery",propValue:e.currentTarget.value,updateOptions:!1}),t({propName:"query",propValue:e.currentTarget.value,updateOptions:n})}),[t]),s=(0,d.useCallback)((e=>a(e,!1)),[a]),i=(0,d.useCallback)((e=>a(e,!0)),[a]);return(0,j.jsxs)(m.VerticalGroup,{spacing:"xs",children:[dp||(dp=(0,j.jsx)(dc.e,{name:"Text options"})),(0,j.jsx)(Hu.V,{value:n,name:"Default value",placeholder:"default value, if any",onChange:s,onBlur:i,labelWidth:20,grow:!0,testId:yt.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2})]})}function up(e){let{variable:t,onVariableChange:n,readOnly:a}=e;const s=(0,An.useDispatch)(),[i,r]=(0,d.useState)(t.current.value);(0,d.useEffect)((()=>{r(t.current.value)}),[t]);const o=(0,d.useCallback)((()=>{t.rootStateKey?t.current.value!==i&&(s((0,Gc.mb)(t.rootStateKey,(0,Pu.Pl)((0,lc.Y6)({id:t.id,type:t.type},{propName:"query",propValue:i})))),n?n(Object.assign({},t,{current:Object.assign({},t.current,{value:i})})):oc.z.get(t.type).updateOptions(t)):console.error("Cannot update variable without rootStateKey")}),[t,i,s,n]),l=(0,d.useCallback)((e=>r(e.target.value)),[r]);return(0,j.jsx)(m.Input,{type:"text",value:i,onChange:l,onBlur:e=>o(),disabled:a,onKeyDown:e=>{13===e.keyCode&&(e.preventDefault(),o())},placeholder:"Enter variable value",id:`var-${t.id}`})}const hp=Object.assign({},qc.Eg,{type:"textbox",query:"",current:{},options:[],originalQuery:null}),pp=(0,Kc.oM)({name:"templating/textbox",initialState:Jc.s,reducers:{createTextBoxOptions:(e,t)=>{const n=(0,mc.ir)(e,t.payload.id),a={text:n.query.trim(),value:n.query.trim(),selected:!1};n.options=[a],n.current=a}}}),gp=pp.reducer,{createTextBoxOptions:mp}=pp.actions,fp=["index","id","state","global","originalQuery","rootStateKey"];const vp=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:hp,reducer:gp,picker:up,editor:cp,dependsOn:(e,t)=>!1,setValue:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,dr.WI)((0,Zc.Fz)((0,lc.yQ)(e),t,n))},setValueFromUrl:async(e,t)=>{await(0,dr.WI)(((e,t)=>async(n,a)=>{const{rootStateKey:s}=e,i=(0,mc.E0)(e,a()),r=(0,lc.Hi)(t);n((0,Gc.mb)(s,(0,Pu.Pl)((0,lc.Y6)(i,{propName:"query",propValue:r})))),await n((0,Zc.Ci)((0,lc.yQ)(i),r))})((0,lc.yQ)(e),t))},updateOptions:async e=>{var t;await(0,dr.WI)((t=(0,lc.yQ)(e),async(e,n)=>{const{rootStateKey:a,type:s}=t;e((0,Gc.mb)(a,mp((0,lc.Y6)(t))));const i=(0,mc.E0)(t,n());await oc.z.get(s).setValue(i,i.options[0],!0)}))},getSaveModel:(e,t)=>{const n=(0,o.cloneDeep)(e),{originalQuery:a}=n,s=function(e,t){if(null==e)return{};var n,a,s={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(n,fp);if(e.query!==a&&!t){const e=null!=a?a:"",t={selected:!1,text:e,value:e};return Object.assign({},s,{query:e,current:t,options:[t]})}return s},getValueForUrl:e=>e.current.value,beforeAdding:e=>Object.assign({},(0,o.cloneDeep)(e),{originalQuery:e.query})});var bp=n(87892);const xp={navBarTree:n(56501).V4,navIndex:bp.G4,appNotifications:Co.VW};var yp=n(97979),wp=n(61988),jp=n(88467),Sp=n(81300),Cp=n(86380),kp=n(75375),Tp=n(72629),Ip=n(11304),Op=n(73931),Np=n(77239),Fp=n(41078),Dp=n(10269),Pp=n(1250),Ap=n(10603),Mp=n(99574),Rp=n(28911),$p=n(45193);const Lp=Object.assign({},xp,wp.ZP,Mp.ZP,jp.ZP,Ip.ZP,Cp.ZP,Tp.ZP,kp.ZP,Rp.ZP,Gi.ZP,Ap.ZP,Op.ZP,Fp.ZP,yp.ZP,Np.ZP,Sp.ZP,Dp.ZP,Gc.ZP,{plugins:Pp.I6}),Ep={},Vp=()=>{const e=(0,Rc.combineReducers)(Object.assign({},Lp,Ep));return(t,n)=>{if(n.type!==$p.e.type)return e(t,n);const{stateSelector:a}=n.payload,s=a(t);return Bp(t,s),e(t,n)}},Bp=(e,t)=>{for(const n in e){if(!e.hasOwnProperty(n))continue;const a=e[n];if(a===t)return e[n]=void 0,!0;if("object"==typeof a){if(Bp(a,t))return!0}}return!1};l().move=v.R;const zp=n(72866),_p=zp.keys().map((e=>zp(e)));function Up(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=l().first(performance.getEntriesByName(e));if(a){const e=a.name.replace(/-/g,"_");md(`${t}${e}${n}`,Math.round(a.startTime)/1e3)}}const Hp=new class{constructor(){var e,t,n;n=void 0,(t="context")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}async init(){try{(0,h.setBackendSrv)(ma.ae),function(){(0,h.setEchoSrv)(new gd({debug:!1})),window.addEventListener("load",(e=>{const t="frontend_boot_load_time_seconds",n="frontend_boot_js_done_time_seconds",a="frontend_boot_css_time_seconds";performance&&(performance.mark(t),Up("first-paint","frontend_boot_","_time_seconds"),Up("first-contentful-paint","frontend_boot_","_time_seconds"),Up(t),Up(n),Up(a))})),""!==la.Vt.user.orgRole&&(0,h.registerEchoBackend)(new vd({}));f.ZP.sentry.enabled&&(0,h.registerEchoBackend)(new Gd(Object.assign({},f.ZP.sentry,{user:f.ZP.bootData.user,buildInfo:f.ZP.buildInfo})));var e,t;f.ZP.grafanaJavascriptAgent.enabled&&(0,h.registerEchoBackend)(new Pd(Object.assign({},f.ZP.grafanaJavascriptAgent,{app:{version:f.ZP.buildInfo.version,environment:f.ZP.buildInfo.env},buildInfo:f.ZP.buildInfo,user:{id:String(null===(e=f.ZP.bootData.user)||void 0===e?void 0:e.id),email:null===(t=f.ZP.bootData.user)||void 0===t?void 0:t.email}})));f.ZP.googleAnalyticsId&&(0,h.registerEchoBackend)(new wd({googleAnalyticsId:f.ZP.googleAnalyticsId}));f.ZP.rudderstackWriteKey&&f.ZP.rudderstackDataPlaneUrl&&(0,h.registerEchoBackend)(new Sd({writeKey:f.ZP.rudderstackWriteKey,dataPlaneUrl:f.ZP.rudderstackDataPlaneUrl,user:f.ZP.bootData.user,sdkUrl:f.ZP.rudderstackSdkUrl,configUrl:f.ZP.rudderstackConfigUrl}));f.ZP.applicationInsightsConnectionString&&(0,h.registerEchoBackend)(new xd({connectionString:f.ZP.applicationInsightsConnectionString,endpointUrl:f.ZP.applicationInsightsEndpointUrl}))}(),(0,m.getScrollbarWidth)()>0&&document.body.classList.add("no-overlay-scrollbar"),(0,u.setLocale)(f.ZP.bootData.user.locale),(0,u.setWeekStart)(f.ZP.bootData.user.weekStart),(0,g.L)(Jd.$),(0,p.$)(Qd.Z),(0,h.setLocationSrv)(h.locationService),(0,u.setTimeZoneResolver)((()=>f.ZP.bootData.user.timezone)),_p.length>0&&_p[0].addExtensionReducers(),function(e){const t=(0,Kc.xC)({reducer:Vp(),middleware:e=>e({thunk:!0,serializableCheck:!1,immutableCheck:!1}),devTools:!1,preloadedState:Object.assign({navIndex:(0,bp.Cu)()},e)});(0,dr.PQ)(t)}(),_p.length>0&&_p[0].init(),u.standardEditorsRegistry.setInit(sd.u),u.standardFieldConfigEditorRegistry.setInit(sd.l),u.standardTransformersRegistry.setInit(yn),oc.z.setInit((()=>[lp(),mh(),vp(),eh(),Dh(),Uh(),Mc(),{id:"system",description:"",name:"system",initialState:Object.assign({},qc.Eg,{type:"system",hide:qc.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:u.LoadingState.Done}),reducer:(e,t)=>e,picker:null,editor:null,dependsOn:()=>!1,setValue:async function(e,t){},setValueFromUrl:async(e,t)=>{},updateOptions:async e=>{},getSaveModel:e=>({}),getValueForUrl:e=>""}])),u.monacoLanguageRegistry.setInit(kn),(0,h.setQueryRunnerFactory)((()=>new rc)),e=new pu,gu=e,u.locationUtil.initialize({config:f.ZP,getTimeRangeForUrl:(0,Kd.$t)().timeRangeForUrl,getVariablesUrlParams:Ah.c}),document.addEventListener("click",id);const t=new i.ND;t.init(f.ZP.datasources,f.ZP.defaultDatasource),(0,h.setDataSourceSrv)(t),window.grafanaRuntime={getDashboardSaveModel:()=>{const e=(0,r.h4)().getCurrent();if(e)return e.getSaveModelClone()},getDashboardTimeRange:()=>{const e=(0,Kd.$t)().timeRange();return{from:e.from.valueOf(),to:e.to.valueOf(),raw:e.raw}},getPanelData:()=>{const e=(0,r.h4)().getCurrent();if(e)return e.panels.reduce(((e,t)=>(e[t.id]=t.getQueryRunner().getLastResult(),e)),{})}};(new cd).init(),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];await Promise.all(e.map(Xd))}(f.ZP.pluginsToPreload),this.context={backend:ma.ae,location:h.locationService,chrome:new ad,config:f.ZP},c.render(d.createElement(Jl,{app:this}),document.getElementById("reactRoot"))}catch(e){console.error("Failed to start Grafana",e),window.__grafana_load_failed()}var e}};window.public_cdn_path&&(n.p=window.public_cdn_path),window.__grafana_public_path__=n.p.substring(0,n.p.lastIndexOf("build/"))||n.p,window.nonce&&(n.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,Hp.init()},10331:(e,t,n)=>{"use strict";let a,s,i,r,o;n.d(t,{As:()=>a,TE:()=>r,Z9:()=>s,_M:()=>i,sK:()=>o}),function(e){e.Active="active",e.Expired="expired",e.Pending="pending"}(a||(a={})),function(e){e.Unprocessed="unprocessed",e.Active="active",e.Suppressed="suppressed"}(s||(s={})),function(e){e.equal="=",e.notEqual="!=",e.regex="=~",e.notRegex="!~"}(i||(i={})),function(e){e.Internal="internal",e.External="external",e.All="all"}(r||(r={})),function(e){e.cortex="cortex",e.mimir="mimir",e.prometheus="prometheus"}(o||(o={}))},93889:(e,t,n)=>{"use strict";let a,s,i,r;n.d(t,{$5:()=>a,KB:()=>i,MQ:()=>s,wf:()=>r}),function(e){e[e.Search=0]="Search",e[e.Query=1]="Query"}(a||(a={})),function(e){e[e.Builder=0]="Builder",e[e.Code=1]="Code"}(s||(s={})),function(e){e.Scheduled="Scheduled",e.Running="Running",e.Complete="Complete",e.Failed="Failed",e.Cancelled="Cancelled",e.Timeout="Timeout"}(i||(i={})),function(e){e.Regions="regions",e.Namespaces="namespaces",e.Metrics="metrics",e.DimensionKeys="dimensionKeys",e.DimensionValues="dimensionValues",e.EBSVolumeIDs="ebsVolumeIDs",e.EC2InstanceAttributes="ec2InstanceAttributes",e.ResourceArns="resourceARNs",e.Statistics="statistics",e.LogGroups="logGroups"}(r||(r={}))},1808:(e,t,n)=>{"use strict";n.d(t,{hD:()=>k,yl:()=>o,AK:()=>l});var a=n(16976),s=n(43215),i=n(22305);const r="-- Dashboard --";function o(e){return!!e&&("string"==typeof e?e===r:"meta"in e&&e.meta.name===r||e.uid===r)}function l(e){return new a.y((t=>{const n=(0,i.h4)().getCurrent(),a=function(e){if(!e||!e.length)return;return e[0].panelId}(e.queries);if(!a)return void t.next(d("Missing panel reference ID"));const s=null==n?void 0:n.getPanelById(a);if(!s)return void t.next(d("Unknown Panel: "+a));const r=s.getQueryRunner(),o=r.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:e=>{t.next(e)}});if(!s.isInView){const{datasource:t,targets:n}=s,i=Object.assign({},e,{datasource:t,panelId:a,queries:n});r.run(i)}return()=>{o.unsubscribe()}}))}function d(e){return{state:s.LoadingState.Error,series:[],request:{},error:{message:e},timeRange:(0,s.getDefaultTimeRange)()}}var c,u=n(36636),h=n(15372),p=n(64681),g=n.n(p),m=n(68404),f=n(17614),v=n(3490),b=n(78837),x=n(67436),y=n(359),w=n(45916);function j(e){let{editURL:t,target:n}=e;const a=(0,v.useStyles)(S);return(0,w.jsxs)("div",{className:a.queryEditorRowHeader,children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("img",{src:n.img,width:16,className:a.logo}),(0,w.jsx)("span",{children:`${n.refId}:`})]}),(0,w.jsx)("div",{children:(0,w.jsxs)("a",{href:t,children:[n.query,"Â ",c||(c=(0,w.jsx)(v.Icon,{name:"external-link-alt"}))]})})]})}function S(e){return{logo:u.css`
      label: logo;
      margin-right: ${e.spacing.sm};
    `,queryEditorRowHeader:u.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${e.colors.bg2};
      align-items: center;
    `}}function C(e){return JSON.stringify(e)}function k(e){let{panelData:t,queries:n,onChange:a,onRunQueries:s}=e;const{value:o}=(0,f.Z)((()=>(0,x.ak)().get())),{value:l,loading:d}=(0,f.Z)((async()=>{var e;const a=n[0],s=(0,i.h4)().getCurrent(),r=null==s?void 0:s.getPanelById(null!==(e=a.panelId)&&void 0!==e?e:-124134);if(!r)return[];const o=await(0,x.ak)().get(r.datasource);return Promise.all(r.targets.map((async e=>{var n;const a=e.datasource?await(0,x.ak)().get(e.datasource):o,s=a.getQueryDisplayText||C,i=null!==(n=(0,y.t)(t,e.refId))&&void 0!==n?n:t;return{refId:e.refId,query:s(e),img:a.meta.info.logos.small,data:i.series,error:i.error}})))}),[t,n]),c=n[0],u=(0,m.useCallback)((e=>{a([Object.assign({},c,{panelId:e})]),s()}),[c,a,s]),p=(0,m.useCallback)((e=>{var t,n;const a=null!==(t=e.datasource)&&void 0!==t?t:o,s=null===(n=(0,x.ak)().getInstanceSettings(a))||void 0===n?void 0:n.name,i=e.targets.length;return`${i} ${g()("query",i)} to ${s}`}),[o]),S=(0,i.h4)().getCurrent(),k=(0,m.useMemo)((()=>{var e;return null!==(e=null==S?void 0:S.panels.filter((e=>{var t,n;return b.ZP.panels[e.type]&&e.targets&&e.id!==(null===(t=S.panelInEdit)||void 0===t?void 0:t.id)&&(null===(n=e.datasource)||void 0===n?void 0:n.uid)!==r})).map((e=>{var t;return{value:e.id,label:null!==(t=e.title)&&void 0!==t?t:"Panel "+e.id,description:p(e),imgUrl:b.ZP.panels[e.type].info.logos.small}})))&&void 0!==e?e:[]}),[S,p]),I=(0,v.useStyles2)(T),O=(0,h.Me)();if(!S)return null;if(k.length<1)return(0,w.jsx)("p",{className:I.noQueriesText,children:"This dashboard does not have any other panels. Add queries to other panels and try again."});const N=k.find((e=>e.value===c.panelId)),F=`d/${S.uid}/${S.title}?&editPanel=${c.panelId}`;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(v.InlineField,{label:"Use results from panel",grow:!0,children:(0,w.jsx)(v.Select,{inputId:O,placeholder:"Choose panel",isSearchable:!0,options:k,value:N,onChange:e=>u(e.value)})}),l&&!d&&(0,w.jsx)("div",{className:I.results,children:c.panelId&&(0,w.jsx)(v.VerticalGroup,{spacing:"sm",children:l.map(((e,t)=>(0,w.jsx)(j,{editURL:F,target:e},`DashboardQueryRow-${t}`)))})})]})}function T(e){return{results:(0,u.css)({padding:e.spacing(2)}),noQueriesText:(0,u.css)({padding:e.spacing(1.25)})}}},48427:(e,t,n)=>{"use strict";n.d(t,{O:()=>s,Z:()=>i});var a=n(68404);function s(e){return(0,a.isValidElement)(e)?e:i(e)}function i(e){var t,n,a,s,i,r,o,l,d,c,u,h,p,g,m,f,v;if(!e||"object"!=typeof e)return;if("string"==typeof e.message)return e.message;if("string"==typeof(null===(t=e.data)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message))return e.data.error.message;const b=(null===(a=e.error)||void 0===a||null===(s=a.data)||void 0===s||null===(i=s.error)||void 0===i||null===(r=i.innererror)||void 0===r||null===(o=r.innererror)||void 0===o?void 0:o.message)||(null===(l=e.error)||void 0===l||null===(d=l.data)||void 0===d||null===(c=d.error)||void 0===c||null===(u=c.innererror)||void 0===u?void 0:u.message)||(null===(h=e.error)||void 0===h||null===(p=h.data)||void 0===p||null===(g=p.error)||void 0===g?void 0:g.message)||(null===(m=e.error)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.message)||(null===(v=e.data)||void 0===v?void 0:v.message)||e;return"string"==typeof b?b:b&&b.toString?b.toString():void 0}},63686:(e,t,n)=>{"use strict";n.d(t,{k:()=>C,e:()=>k});var a=n(82897),s=n(94396),i=n(3321),r=n(71808),o=n(35778),l=n(43215),d=n(90923),c=n(13011),u=n(22305),h=n(36636),p=(n(68404),n(3490)),g=n(67907),m=n(54361),f=n(29937),v=n(45916);const b=(0,v.jsx)("div",{children:"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."}),x=[{label:"Dashboard",value:f._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:f._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],y=[10,50,100,200,300,500,1e3,2e3].map((e=>({label:String(e),value:e})));function w(e){let{query:t,onChange:n}=e;const a=t,{limit:s,matchAny:i,tags:r,type:o}=a,l=j();return(0,v.jsxs)(p.FieldSet,{className:l.container,children:[(0,v.jsx)(p.Field,{label:"Filter by",children:(0,v.jsx)(p.Select,{inputId:"grafana-annotations__filter-by",options:x,value:o,onChange:e=>n(Object.assign({},a,{type:e.value}))})}),(0,v.jsx)(p.Field,{label:"Max limit",children:(0,v.jsx)(p.Select,{inputId:"grafana-annotations__limit",width:16,options:y,value:s,onChange:e=>n(Object.assign({},a,{limit:e.value}))})}),o===f._$.Tags&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.Field,{label:"Match any",description:"Enabling this returns annotations that match any of the tags specified below",children:(0,v.jsx)(p.Switch,{id:"grafana-annotations__match-any",value:i,onChange:e=>n(Object.assign({},a,{matchAny:e.target.checked}))})}),(0,v.jsx)(p.Field,{label:"Tags",description:b,children:(0,v.jsx)(g.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:e=>n(Object.assign({},a,{tags:e})),tagOptions:m.lK,tags:null!=r?r:[]})})]})]})}const j=()=>({container:h.css`
      max-width: 600px;
    `});let S=100;class C extends d.DataSourceWithBackend{constructor(e){super(e),this.annotations={QueryEditor:w,prepareAnnotation(e){var t,n,a,s,i;return e.target=null!==(t=e.target)&&void 0!==t?t:{type:null!==(n=e.type)&&void 0!==n?n:f._$.Dashboard,limit:null!==(a=e.limit)&&void 0!==a?a:100,tags:null!==(s=e.tags)&&void 0!==s?s:[],matchAny:null!==(i=e.matchAny)&&void 0!==i&&i},e},prepareQuery(e){let t;if((0,a.isString)(e.datasource)){const n=(0,c.p)(e.datasource,{returnDefaultAsNull:!1});n&&(t=n)}else t=e.datasource;return Object.assign({},e,{refId:e.name,queryType:f.hR.Annotations,datasource:t})}}}query(e){const t=[],n=[],a=(0,d.getTemplateSrv)();for(const i of e.targets){if(i.queryType===f.hR.Annotations)return(0,s.D)(this.getAnnotations({range:e.range,rangeRaw:e.range.raw,annotation:i,dashboard:(0,u.h4)().getCurrent()}));if(!i.hide)if(i.queryType===f.hR.LiveMeasurements){var o,c;let n=a.replace(i.channel,e.scopedVars);const{filter:s}=i,r=(0,l.parseLiveChannelAddress)(n);if(!(0,l.isValidLiveChannelAddress)(r))continue;const u={maxLength:null!==(o=e.maxDataPoints)&&void 0!==o?o:500};i.buffer?(u.maxDelta=i.buffer,u.maxLength=2*u.maxLength):"now"===(null===(c=e.rangeRaw)||void 0===c?void 0:c.to)&&(u.maxDelta=e.range.to.valueOf()-e.range.from.valueOf()),t.push((0,d.getGrafanaLiveSrv)().getDataStream({key:`${e.requestId}.${S++}`,addr:r,filter:s,buffer:u}))}else i.queryType||(i.queryType=f.hR.RandomWalk),n.push(i)}return n.length&&t.push(super.query(Object.assign({},e,{targets:n}))),t.length?1===t.length?t[0]:(0,i.T)(...t):(0,r.of)()}listFiles(e){return this.query({targets:[{refId:"A",queryType:f.hR.List,path:e}]}).pipe((0,o.U)((e=>{var t;const n=null!==(t=e.data[0])&&void 0!==t?t:new l.MutableDataFrame;return new l.DataFrameView(n)})))}metricFindQuery(e){return Promise.resolve([])}async getAnnotations(e){var t;const n=(0,d.getTemplateSrv)(),a=e.annotation,s=a.target,i={from:e.range.from.valueOf(),to:e.range.to.valueOf(),limit:s.limit,tags:s.tags,matchAny:s.matchAny};if(s.type===f._$.Dashboard){if(!e.dashboard.uid)return Promise.resolve({data:[]});i.dashboardUID=e.dashboard.uid,delete i.tags}else{if(!Array.isArray(s.tags)||0===s.tags.length)return Promise.resolve({data:[]});const e="__delimiter__",t=[];for(const a of i.tags){const s=n.replace(a,{},(t=>"string"==typeof t?t:t.join(e)));for(const n of s.split(e))t.push(n)}i.tags=t}const r=await(0,d.getBackendSrv)().get("/api/annotations",i,`grafana-data-source-annotations-${a.name}-${null===(t=e.dashboard)||void 0===t?void 0:t.uid}`);return{data:[(0,l.toDataFrame)(r)]}}testDatasource(){return Promise.resolve()}}async function k(){return await(0,d.getDataSourceSrv)().get("-- Grafana --")}},29937:(e,t,n)=>{"use strict";let a;n.d(t,{_$:()=>i,hR:()=>a,wi:()=>s}),function(e){e.LiveMeasurements="measurements",e.Annotations="annotations",e.RandomWalk="randomWalk",e.List="list",e.Read="read",e.Search="search"}(a||(a={}));const s={refId:"A",queryType:a.RandomWalk};let i;!function(e){e.Dashboard="dashboard",e.Tags="tags"}(i||(i={}))},68366:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var a=n(82897),s=n(68404);function i(){const e=(0,s.useRef)(null);return null==e.current&&(e.current=(0,a.uniqueId)()),e.current}},81127:(e,t,n)=>{"use strict";n.d(t,{D:()=>m,w:()=>f});var a=n(82897),s=n(71808),i=n(94396),r=n(13146),o=n(71114),l=n(35778),d=n(48762),c=n(14444),u=n(58669),h=n(87801),p=n(43215),g=n(90923);const m="-- Mixed --";class f extends p.DataSourceApi{constructor(e){super(e)}query(e){const t=e.targets.filter((e=>{var t;return(null===(t=e.datasource)||void 0===t?void 0:t.uid)!==m}));if(!t.length)return(0,s.of)({data:[]});const n=(0,a.groupBy)(t,"datasource.uid"),i=[];for(const t in n){const a=n[t];i.push({datasource:(0,g.getDataSourceSrv)().get(a[0].datasource,e.scopedVars),targets:a})}return i.length?this.batchQueries(i,e):(0,s.of)({data:[]})}batchQueries(e,t){const n=e.filter(this.isQueryable).map(((e,n)=>(0,i.D)(e.datasource).pipe((0,o.z)((r=>{const o=(0,a.cloneDeep)(t);return o.requestId=`mixed-${n}-${o.requestId||""}`,o.targets=e.targets,(0,i.D)(r.query(o)).pipe((0,l.U)((e=>Object.assign({},e,{data:e.data||[],state:p.LoadingState.Loading,key:`mixed-${n}-${e.key||""}`}))),(0,d.q)(),(0,c.K)((e=>((e=(0,g.toDataQueryError)(e)).message=`${r.name}: ${e.message}`,(0,s.of)([{data:[],state:p.LoadingState.Error,error:e,key:`mixed-${n}-${o.requestId||""}`}])))))})))));return(0,r.D)(n).pipe((0,h.u)(((e,t)=>t.reduce(((e,t)=>(e.push.apply(e,t),e)),e)),[]),(0,l.U)(this.finalizeResponses),(0,u.J)())}testDatasource(){return Promise.resolve({})}isQueryable(e){return e&&Array.isArray(e.targets)&&e.targets.length>0}finalizeResponses(e){const{length:t}=e;if(0===t)return e;const n=e.find((e=>e.state===p.LoadingState.Error));return n?e.push(n):e[t-1].state=p.LoadingState.Done,e}}},40206:(e,t,n)=>{"use strict";let a,s,i;n.d(t,{As:()=>a,LM:()=>i,kx:()=>s}),function(e){e[e.AlphaAsc=1]="AlphaAsc",e[e.AlphaDesc=2]="AlphaDesc",e[e.Importance=3]="Importance",e[e.TimeAsc=4]="TimeAsc",e[e.TimeDesc=5]="TimeDesc"}(a||(a={})),function(e){e.Current="current",e.RecentChanges="changes"}(s||(s={})),function(e){e.Default="default",e.Custom="custom"}(i||(i={}))},15243:(e,t,n)=>{"use strict";n.d(t,{Gj:()=>s,Qm:()=>r});var a=n(43215);const s=1,i=(e,t,n,s)=>(0,a.roundDecimals)(t+e*(n+s),6);function r(e,t,n,r,o){let l=1-t,d=n===s?l/(e-1):2===n?l/e:3===n?l/(e+1):0;(isNaN(d)||d===1/0)&&(d=0);let c=n===s?0:2===n?d/2:3===n?d:0,u=t/e,h=(0,a.roundDecimals)(u,6);if(null==r)for(let t=0;t<e;t++)o(t,i(t,c,u,d),h);else o(r,i(r,c,u,d),h)}},39256:(e,t,n)=>{"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Pn:()=>s,kK:()=>i,lW:()=>r});function s(e,t,n,a,s,i){return e>=n&&e<=s&&t>=a&&t<=i}function i(e,t){return e.x<=t.x+t.w&&e.x+e.w>=t.x&&e.y+e.h>=t.y&&e.y<=t.y+t.h}class r{constructor(e,t,n,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;a(this,"o",void 0),a(this,"q",void 0),this.x=e,this.y=t,this.w=n,this.h=s,this.l=i,this.o=[],this.q=null}split(){let e=this,t=e.x,n=e.y,a=e.w/2,s=e.h/2,i=e.l+1;e.q=[new r(t+a,n,a,s,i),new r(t,n,a,s,i),new r(t,n+s,a,s,i),new r(t+a,n+s,a,s,i)]}quads(e,t,n,a,s){let i=this,r=i.q,o=i.x+i.w/2,l=i.y+i.h/2,d=t<l,c=e<o,u=e+n>o,h=t+a>l;d&&u&&s(r[0]),c&&d&&s(r[1]),c&&h&&s(r[2]),u&&h&&s(r[3])}add(e){let t=this;if(null!=t.q)t.quads(e.x,e.y,e.w,e.h,(t=>{t.add(e)}));else{let n=t.o;if(n.push(e),n.length>10&&t.l<4){t.split();for(let e=0;e<n.length;e++){let a=n[e];t.quads(a.x,a.y,a.w,a.h,(e=>{e.add(a)}))}t.o.length=0}}}get(e,t,n,a,s){let i=this,r=i.o;for(let e=0;e<r.length;e++)s(r[e]);null!=i.q&&i.quads(e,t,n,a,(i=>{i.get(e,t,n,a,s)}))}clear(){this.o.length=0,this.q=null}}},15146:(e,t,n)=>{"use strict";n.d(t,{M:()=>c,l:()=>u});var a=n(82897),s=n(68404),i=n(43215),r=n(3490),o=n(78837),l=n(45916);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends s.PureComponent{constructor(){super(...arguments),d(this,"renderComponent",((e,t)=>{const{options:n,fieldConfig:s}=this.props,{value:i,alignmentFactors:d,orientation:c,width:h,height:p,count:g}=e,{field:m,display:f,view:v,colIndex:b}=i,{openMenu:x,targetClassName:y}=t;let w;return v&&(0,a.isNumber)(b)&&(w=v.getFieldDisplayProcessor(b)),(0,l.jsx)(r.BarGauge,{value:u(g,s.defaults,f),width:h,height:p,orientation:c,field:m,text:n.text,display:w,theme:o.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:n.displayMode,onClick:x,className:y,alignmentFactors:g>1?d:void 0,showUnfilled:n.showUnfilled})})),d(this,"renderValue",(e=>{const{value:t,orientation:n}=e,{hasLinks:a,getLinks:s}=t;return a&&s?(0,l.jsx)("div",{style:{width:"100%",display:n===i.VizOrientation.Vertical?"flex":"initial"},children:(0,l.jsx)(r.DataLinksContextMenu,{links:s,children:t=>this.renderComponent(e,t)})}):this.renderComponent(e,{})})),d(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:n,fieldConfig:a,timeZone:s}=this.props;return(0,i.getFieldDisplayValues)({fieldConfig:a,reduceOptions:t.reduceOptions,replaceVariables:n,theme:o.vc.theme2,data:e.series,timeZone:s})}))}getItemSpacing(){return"lcd"===this.props.options.displayMode?2:10}render(){const{height:e,width:t,options:n,data:a,renderCounter:s}=this.props;return(0,l.jsx)(r.VizRepeater,{source:a,getAlignmentFactors:i.getDisplayValueAlignmentFactors,getValues:this.getValues,renderValue:this.renderValue,renderCounter:s,width:t,height:e,minVizWidth:n.minVizWidth,minVizHeight:n.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:n.orientation})}}function u(e,t,n){return 1!==e||t.displayName?n:Object.assign({},n,{title:void 0})}},95547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{plugin:()=>m});var a=n(43215),s=n(3490),i=n(38231);var r=n(68404),o=n(78837),l=n(15146),d=n(45916);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends r.PureComponent{constructor(){super(...arguments),c(this,"renderComponent",((e,t)=>{const{options:n,fieldConfig:a}=this.props,{width:i,height:r,count:c,value:u}=e,{field:h,display:p}=u,{openMenu:g,targetClassName:m}=t;return(0,d.jsx)(s.Gauge,{value:(0,l.l)(c,a.defaults,p),width:i,height:r,field:h,text:n.text,showThresholdLabels:n.showThresholdLabels,showThresholdMarkers:n.showThresholdMarkers,theme:o.vc.theme,onClick:g,className:m})})),c(this,"renderValue",(e=>{const{value:t}=e,{getLinks:n,hasLinks:a}=t;return a&&n?(0,d.jsx)(s.DataLinksContextMenu,{links:n,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),c(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:n,fieldConfig:s,timeZone:i}=this.props;return(0,a.getFieldDisplayValues)({fieldConfig:s,reduceOptions:t.reduceOptions,replaceVariables:n,theme:o.vc.theme2,data:e.series,timeZone:i})}))}render(){const{height:e,width:t,data:n,renderCounter:a,options:i}=this.props;return(0,d.jsx)(s.VizRepeater,{getValues:this.getValues,renderValue:this.renderValue,width:t,height:e,source:n,autoGrid:!0,renderCounter:a,orientation:i.orientation})}}Object.freeze([0,0]);const h=!1,p=!0;var g=n(8554);const m=new a.PanelPlugin(u).useFieldConfig().setPanelOptions((e=>{(0,i.j)(e),(0,i.h)(e),e.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:h}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:p}),s.commonOptionsBuilder.addTextSizeOptions(e)})).setPanelChangeHandler(((e,t,n)=>{const a=(0,s.sharedSingleStatPanelChangedHandler)(e,t,n);if("singlestat"===t&&n.angular){const e=n.angular.gauge;e&&(a.showThresholdMarkers=e.thresholdMarkers,a.showThresholdLabels=e.thresholdLabels)}return a})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData||!t.hasNumberField)return;if(t.numberFieldCount>=50)return;const n=e.getListAppender({name:g.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:a.ThresholdsMode.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.reduceOptions.values&&(e.options.reduceOptions.limit=2)}}});t.hasStringField&&1===t.frameCount&&t.rowCountTotal<10?(n.append({name:g.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),n.append({name:g.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(n.append({name:g.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),n.append({name:g.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}).setMigrationHandler((e=>(0,s.sharedSingleStatMigrationHandler)(e)))},95716:(e,t,n)=>{"use strict";n.d(t,{H:()=>l});var a=n(36636),s=(n(68404),n(43215)),i=n(97024),r=n(3490),o=n(45916);const l=e=>{let{data:t,rowIndex:n,columnIndex:a,sortOrder:l,mode:c}=e;const u=(0,r.useStyles2)(d);if(!t||null==n)return null;const h=t.fields.filter((e=>{var t,n;return!Boolean(null===(t=e.config.custom)||void 0===t||null===(n=t.hideFrom)||void 0===n?void 0:n.tooltip)}));if(0===h.length)return null;const p=[],g=[],m=new Set;for(const e of h){const a=e.values.get(n),i=e.display?e.display(a):{text:`${a}`,numeric:+a};e.getLinks&&e.getLinks({calculatedValue:i,valueRowIndex:n}).forEach((e=>{const t=`${e.title}/${e.href}`;m.has(t)||(g.push(e),m.add(t))})),p.push([(0,s.getFieldDisplayName)(e,t),a,(0,s.formattedValueToString)(i)])}return l&&l!==i.As.None&&p.sort(((e,t)=>s.arrayUtils.sortValues(l)(e[1],t[1]))),(0,o.jsx)("table",{className:u.infoWrap,children:(0,o.jsxs)("tbody",{children:[(c===i.f3.Multi||null==c)&&p.map(((e,t)=>(0,o.jsxs)("tr",{className:t===a?u.highlight:"",children:[(0,o.jsxs)("th",{children:[e[0],":"]}),(0,o.jsx)("td",{children:e[2]})]},`${t}/${n}`))),c===i.f3.Single&&a&&(0,o.jsxs)("tr",{children:[(0,o.jsxs)("th",{children:[p[a][0],":"]}),(0,o.jsx)("td",{children:p[a][2]})]},`${a}/${n}`),g.length>0&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:2,children:(0,o.jsx)(r.VerticalGroup,{children:g.map(((e,t)=>(0,o.jsx)(r.LinkButton,{icon:"external-link-alt",target:e.target,href:e.href,onClick:e.onClick,fill:"text",style:{width:"100%"},children:e.title},t)))})})})]})})},d=e=>({infoWrap:a.css`
    padding: 8px;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:a.css`
    background: ${e.colors.action.hover};
  `})},87900:(e,t,n)=>{"use strict";n.d(t,{E:()=>se});var a=n(36636),s=n(23019),i=n.n(s),r=n(68404),o=n(94327),l=n(3490),d=n(30804),c=n(45916);const u=(0,r.memo)((function(e){const{edge:t,onClick:n,onMouseEnter:a,onMouseLeave:s,hovering:i}=e,{source:r,target:o}=t,l=(0,d.dM)({x1:r.x,y1:r.y,x2:o.x,y2:o.y},90);return(0,c.jsxs)("g",{onClick:e=>n(e,t),style:{cursor:"pointer"},"aria-label":`Edge from: ${t.source.id} to: ${t.target.id}`,children:[(0,c.jsx)("line",{strokeWidth:i?2:1,stroke:"#999",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,markerEnd:"url(#triangle)"}),(0,c.jsx)("line",{stroke:"transparent",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,strokeWidth:20,onMouseEnter:()=>{a(t.id)},onMouseLeave:()=>{s(t.id)}})]})}));var h;function p(){return h||(h=(0,c.jsx)("defs",{children:(0,c.jsx)("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto",children:(0,c.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})})}))}const g=e=>({mainGroup:a.css`
      pointer-events: none;
      font-size: 8px;
    `,background:a.css`
      fill: ${e.components.tooltip.background};
    `,text:a.css`
      fill: ${e.components.tooltip.text};
    `}),m=(0,r.memo)((function(e){const{edge:t}=e,{source:n,target:a}=t,s=(0,d.dM)({x1:n.x,y1:n.y,x2:a.x,y2:a.y},90),i={x:s.x1+(s.x2-s.x1)/2,y:s.y1+(s.y2-s.y1)/2},r=(0,l.useStyles2)(g);return(0,c.jsxs)("g",{className:r.mainGroup,children:[(0,c.jsx)("rect",{className:r.background,x:i.x-40,y:i.y-15,width:"80",height:"30",rx:"5"}),(0,c.jsx)("text",{className:r.text,x:i.x,y:i.y-5,textAnchor:"middle",children:t.mainStat}),(0,c.jsx)("text",{className:r.text,x:i.x,y:i.y+10,textAnchor:"middle",children:t.secondaryStat})]})}));var f=n(82897),v=n(43215),b=n(97024);function x(){return{item:a.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:a.css`
      label: Legend;
      pointer-events: all;
    `}}const y=function(e){const{nodes:t,onSort:n,sort:a,sortable:s}=e,i=(0,l.useTheme)(),o=(0,l.useStyles)(x),d=function(e,t){if(!e.length)return[];const n=[e[0].mainStat,e[0].secondaryStat].filter(f.identity),a=e.find((e=>e.arcSections.length>0));var s,i;a&&(null===(s=a.arcSections[0].config)||void 0===s||null===(i=s.color)||void 0===i?void 0:i.mode)===v.FieldColorModeId.Fixed&&n.push(...new Set(e.map((e=>e.arcSections)).flat()));e[0].color&&n.push(e[0].color);return n.map((e=>{var n,a,s;const i={label:e.config.displayName||e.name,yAxis:0,data:{field:e}};var r;if((null===(n=e.config.color)||void 0===n?void 0:n.mode)===v.FieldColorModeId.Fixed&&null!==(a=e.config.color)&&void 0!==a&&a.fixedColor)i.color=t.visualization.getColorByName((null===(r=e.config.color)||void 0===r?void 0:r.fixedColor)||"");else if(null!==(s=e.config.color)&&void 0!==s&&s.mode){var o;i.gradient=null===(o=e.config.color)||void 0===o?void 0:o.mode}return i.color||i.gradient||(i.color=t.visualization.getColorByName("")),i}))}(t,i),u=(0,r.useCallback)((e=>{n({field:e.data.field,ascending:e.data.field===(null==a?void 0:a.field)&&!(null!=a&&a.ascending)})}),[a,n]);return(0,c.jsx)(l.VizLegend,{className:o.legend,displayMode:b.jK.List,placement:"bottom",items:d,itemRenderer:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.VizLegendListItem,{item:e,className:o.item,onLabelClick:s?u:void 0}),s&&((null==a?void 0:a.field)===e.data.field?(0,c.jsx)(l.Icon,{name:a.ascending?"arrow-up":"arrow-down"}):"")]})})};const w=(0,l.stylesFactory)((e=>({mainGroup:a.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:a.css`
    fill: ${e.colors.panelBg};
    stroke: ${e.colors.border3};
  `,text:a.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}))),j=(0,r.memo)((function(e){const{marker:t,onClick:n}=e,{node:a}=t,s=w((0,l.useTheme)());return void 0===a.x||void 0===a.y?null:(0,c.jsxs)("g",{"data-node-id":a.id,className:s.mainGroup,onClick:e=>{null==n||n(e,t)},"aria-label":`Hidden nodes marker: ${a.id}`,children:[(0,c.jsx)("circle",{className:s.mainCircle,r:40,cx:a.x,cy:a.y}),(0,c.jsx)("g",{children:(0,c.jsx)("foreignObject",{x:a.x-25,y:a.y-25,width:"50",height:"50",children:(0,c.jsx)("div",{className:s.text,children:(0,c.jsxs)("span",{children:[t.count>100?">100":t.count," nodes"]})})})})]})}));var S,C,k=n(35008),T=n.n(k);const I=40,O=(0,r.memo)((function(e){const{node:t,onMouseEnter:n,onMouseLeave:s,onClick:r,hovering:o}=e,u=((e,t)=>({mainGroup:a.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${"inactive"===t?.5:1};
  `,mainCircle:a.css`
    fill: ${e.components.panel.background};
  `,hoverCircle:a.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${e.colors.primary.text};
  `,text:a.css`
    fill: ${e.colors.text.primary};
  `,titleText:a.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${T()(e.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:a.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:a.css`
    width: 200px;
    & span {
      background-color: ${T()(e.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}))((0,l.useTheme2)(),o),h="active"===o;return void 0===t.x||void 0===t.y?null:(0,c.jsxs)("g",{"data-node-id":t.id,className:u.mainGroup,onMouseEnter:()=>{n(t.id)},onMouseLeave:()=>{s(t.id)},onClick:e=>{r(e,t)},"aria-label":`Node: ${t.title}`,children:[(0,c.jsx)("circle",{className:u.mainCircle,r:I,cx:t.x,cy:t.y}),h&&(0,c.jsx)("circle",{className:u.hoverCircle,r:37,cx:t.x,cy:t.y,strokeWidth:2}),(0,c.jsx)(N,{node:t}),(0,c.jsxs)("g",{className:u.text,children:[(0,c.jsx)("foreignObject",{x:t.x-(h?100:35),y:t.y-15,width:h?"200":"70",height:"40",children:(0,c.jsxs)("div",{className:i()(u.statsText,h&&u.textHovering),children:[(0,c.jsx)("span",{children:t.mainStat&&(0,d.Ew)(t.mainStat,t.dataFrameRowIndex)}),S||(S=(0,c.jsx)("br",{})),(0,c.jsx)("span",{children:t.secondaryStat&&(0,d.Ew)(t.secondaryStat,t.dataFrameRowIndex)})]})}),(0,c.jsx)("foreignObject",{x:t.x-(h?100:50),y:t.y+I+5,width:h?"200":"100",height:"40",children:(0,c.jsxs)("div",{className:i()(u.titleText,h&&u.textHovering),children:[(0,c.jsx)("span",{children:t.title}),C||(C=(0,c.jsx)("br",{})),(0,c.jsx)("span",{children:t.subTitle})]})})]})]})}));function N(e){const{node:t}=e,n=t.arcSections.find((e=>1===e.values.get(t.dataFrameRowIndex))),a=(0,l.useTheme2)();var s;if(n)return(0,c.jsx)("circle",{fill:"none",stroke:a.visualization.getColorByName((null===(s=n.config.color)||void 0===s?void 0:s.fixedColor)||""),strokeWidth:2,r:I,cx:t.x,cy:t.y});const i=t.arcSections.filter((e=>0!==e.values.get(t.dataFrameRowIndex)));if(0===i.length)return(0,c.jsx)("circle",{fill:"none",stroke:t.color?D(t.color,t.dataFrameRowIndex,a):"gray",strokeWidth:2,r:I,cx:t.x,cy:t.y});const{elements:r}=i.reduce(((e,n)=>{var s;const i=(null===(s=n.config.color)||void 0===s?void 0:s.fixedColor)||"",r=n.values.get(t.dataFrameRowIndex),o=(0,c.jsx)(F,{r:I,x:t.x,y:t.y,startPercent:e.percent,percent:r,color:a.visualization.getColorByName(i),strokeWidth:2},i);return e.elements.push(o),e.percent=e.percent+r,e}),{elements:[],percent:0});return(0,c.jsx)(c.Fragment,{children:r})}function F(e){let{r:t,x:n,y:a,startPercent:s,percent:i,color:r,strokeWidth:o=2}=e;const l=s+i,d=n+Math.sin(2*Math.PI*s)*t,u=a-Math.cos(2*Math.PI*s)*t,h=n+Math.sin(2*Math.PI*l)*t,p=a-Math.cos(2*Math.PI*l)*t,g=i>.5?"1":"0";return(0,c.jsx)("path",{fill:"none",d:`M ${d} ${u} A ${t} ${t} 0 ${g} 1 ${h} ${p}`,stroke:r,strokeWidth:o})}function D(e,t,n){return e.config.color?(0,v.getFieldColorModeForField)(e).getCalculator(e,n)(0,e.values.get(t)):e.values.get(t)}function P(){return{wrapper:a.css`
      label: wrapper;
      pointer-events: all;
    `}}function A(e){const{config:t,onConfigChange:n,onPlus:a,onMinus:s,disableZoomOut:i,disableZoomIn:o}=e,[d,u]=(0,r.useState)(!1),h=(0,l.useStyles)(P);return(0,c.jsxs)("div",{className:h.wrapper,children:[(0,c.jsxs)(l.VerticalGroup,{spacing:"sm",children:[(0,c.jsxs)(l.HorizontalGroup,{spacing:"xs",children:[(0,c.jsx)(l.Button,{icon:"plus-circle",onClick:a,size:"md",title:"Zoom in",variant:"secondary",disabled:o}),(0,c.jsx)(l.Button,{icon:"minus-circle",onClick:s,size:"md",title:"Zoom out",variant:"secondary",disabled:i})]}),(0,c.jsxs)(l.HorizontalGroup,{spacing:"xs",children:[(0,c.jsx)(l.Button,{icon:"code-branch",onClick:()=>n(Object.assign({},t,{gridLayout:!1})),size:"md",title:"Default layout",variant:"secondary",disabled:!t.gridLayout}),(0,c.jsx)(l.Button,{icon:"apps",onClick:()=>n(Object.assign({},t,{gridLayout:!0})),size:"md",title:"Grid layout",variant:"secondary",disabled:t.gridLayout})]})]}),false,false]})}var M=n(2109),R=n(53841),$=n(32458);function L(e,t,n,a,s){const[i,o]=(0,r.useMemo)((()=>{if(!e.length||!t.length)return[{},{}];return[t.reduce(((e,t)=>{var n,a;return e[t.source.id]=[...null!==(n=e[t.source.id])&&void 0!==n?n:[],t],e[t.target.id]=[...null!==(a=e[t.target.id])&&void 0!==a?a:[],t],e}),{}),e.reduce(((e,t)=>(e[t.id]=t,e)),{})]}),[t,e]);return(0,r.useMemo)((()=>e.length<=n?{nodes:e,edges:t}:a.gridLayout?function(e,t,n){let a=0,s=t,i=[];if(n){const r=e.findIndex((e=>e.id===n)),o=Math.floor(t/2);let l=o;a=r-o,a<0&&(l+=Math.abs(a),a=0),s=r+l+1,s>e.length&&(a>0&&(a=Math.max(0,a-(s-e.length))),s=e.length),a>1&&i.push({node:e[a-1],count:a}),e.length-s>1&&i.push({node:e[s],count:e.length-s})}else e.length-t>1&&(i=[{node:e[t],count:e.length-t}]);return{nodes:e.slice(a,s),edges:[],markers:i}}(e,n,s):function(e,t,n,a,s,i){let r;i?r=[n[i]]:(r=e.filter((e=>0===e.incoming)),r.length||(r=[e[0]]));const{visibleNodes:o,markers:l}=function(e,t,n,a){const s={};let i=[...t];for(;Object.keys(s).length<e&&i.length>0;){let e=i.shift();if(s[e.id])continue;s[e.id]=e;const t=(a[e.id]||[]).map((t=>{const a=t.source.id===e.id?t.target.id:t.source.id;return n[a]}));i=i.concat(t)}const r=(0,f.uniq)(i.filter((e=>!s[e.id])));return{visibleNodes:s,markers:r}}(s,r,n,a),d=function(e,t,n,a){return e.map((e=>{const s={};let i=0,r=[e];for(;r.length>0&&i<=101;){let e=r.shift();if(t[e.id]||s[e.id])continue;s[e.id]||i++,s[e.id]=e;const o=(a[e.id]||[]).map((t=>{const a=t.source.id===e.id?t.target.id:t.source.id;return n[a]}));r=r.concat(o)}return{node:e,count:i}}))}(l,o,n,a),c=(0,f.fromPairs)(d.map((e=>[e.node.id,e])));for(const e of d)1===e.count&&(delete c[e.node.id],o[e.node.id]=e.node);const u=t.filter((e=>(o[e.source.id]||c[e.source.id])&&(o[e.target.id]||c[e.target.id])));return{nodes:Object.values(o),edges:u,markers:Object.values(c)}}(e,t,o,i,n,s)),[t,i,n,e,o,s,a.gridLayout])}const E={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function V(e,t,a){const s=new $.q(new URL(n.p+n.u(7190),n.b));return s.onmessage=t=>{for(let n=0;n<e.length;n++)t.data.nodes[n]=Object.assign({},e[n],t.data.nodes[n]);a(t.data)},s.postMessage({nodes:e.map((e=>({id:e.id,incoming:e.incoming}))),edges:t,config:E}),()=>{s.terminate()}}function B(e,t,n){const a=Math.min(Math.floor((t-120)/140),e.length),s=Math.floor(120*(a-1)/2);n&&e.sort(((e,t)=>{const a=n.field.values.get(e.dataFrameRowIndex),s=n.field.values.get(t.dataFrameRowIndex);return n.ascending?a-s:s-a}));for(const[t,n]of e.entries()){const e=Math.floor(t/a),i=t%a;n.x=120*i-s,n.y=140*e-60}}var z,_=n(41073);function U(e,t,n){if(!(e.length||null!=n&&n.length))return;const a=function(e){const t="Open in Explore",n=e.reduce(((e,n)=>{let a,s;return-1!==n.title.indexOf("/")?(a=n.title.split("/")[0],s=n.title.split("/")[1],e[a]=e[a]||[],e[a].push({l:n,newTitle:s})):(e[t]=e[t]||[],e[t].push({l:n})),e}),{});return Object.keys(n).map((e=>({label:e,ariaLabel:e,items:n[e].map((e=>({label:e.newTitle||e.l.title,ariaLabel:e.newTitle||e.l.title,url:e.l.href,onClick:e.l.onClick})))})))}(e);return()=>{let e=null==a?void 0:a.map(((e,n)=>(0,c.jsx)(l.MenuGroup,{label:e.label,children:(e.items||[]).map(H(t))},`${e.label}${n}`)));return n&&(e=[...n.map(H(t)),...e]),e}}function H(e){return function(t){return(0,c.jsx)(l.MenuItem,{url:t.url,label:t.label,ariaLabel:t.ariaLabel,onClick:t.onClick?()=>{var n;return null===(n=t.onClick)||void 0===n?void 0:n.call(t,e)}:void 0,target:"_self"},t.label)}}function W(e){const t=e.node.dataFrameRowIndex,n=(0,d.F)(e.nodes);return(0,c.jsxs)("div",{children:[n.title&&(0,c.jsx)(G,{field:n.title,index:t}),n.subTitle&&(0,c.jsx)(G,{field:n.subTitle,index:t}),n.details.map((e=>(0,c.jsx)(G,{field:e,index:t},e.name)))]})}function q(e){var t,n;const a=e.edge.dataFrameRowIndex,s=(0,d.lr)(e.edges),i=Z((0,l.useTheme)()),r=(null===(t=s.source)||void 0===t?void 0:t.values.get(a))||"",o=(null===(n=s.target)||void 0===n?void 0:n.values.get(a))||"";return(0,c.jsxs)("div",{children:[s.source&&s.target&&(0,c.jsxs)("div",{className:i.label,children:[z||(z=(0,c.jsx)("div",{children:"Source â Target"})),(0,c.jsxs)("span",{className:i.value,children:[r," â ",o]})]}),s.details.map((e=>(0,c.jsx)(G,{field:e,index:a},e.name)))]})}const Z=(0,l.stylesFactory)((e=>({label:a.css`
      label: Label;
      line-height: 1.25;
      margin: ${e.spacing.formLabelMargin};
      padding: ${e.spacing.formLabelPadding};
      color: ${e.colors.textFaint};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.weight.semibold};
    `,value:a.css`
      label: Value;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.formLabel};
      margin-top: ${e.spacing.xxs};
      display: block;
    `})));function G(e){const{field:t,index:n}=e,a=t.values.get(n)||"",s=Z((0,l.useTheme)());return(0,c.jsxs)("div",{className:s.label,children:[(0,c.jsx)("div",{children:t.config.displayName||t.name}),(0,c.jsx)("span",{className:s.value,children:a})]})}var K=n(57648);function Q(){let{scale:e=1,bounds:t,focus:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=(0,R.default)(),s=(0,r.useRef)(!1),i=(0,r.useRef)(0),o=(0,r.useRef)(null),l={x:0,y:0},d=(0,r.useMemo)((()=>({right:t?-t.left:1/0,left:t?-t.right:-1/0,bottom:t?-t.top:-1/0,top:t?-t.bottom:1/0})),[t]),c=(0,r.useRef)(l),u=(0,r.useRef)(l),h=(0,r.useRef)(l),[p,g]=(0,r.useState)({isPanning:!1,position:l});(0,r.useEffect)((()=>{const t=()=>{s.current&&a()&&(s.current=!1,g((e=>Object.assign({},e,{isPanning:!1}))),l())},n=e=>{(e=>{!s.current&&a()&&(s.current=!0,c.current=Y(e),u.current=Object.assign({},h.current),g((e=>Object.assign({},e,{isPanning:!0}))),r())})(e),p(e)},r=()=>{document.addEventListener("mousemove",p),document.addEventListener("mouseup",t),document.addEventListener("touchmove",p),document.addEventListener("touchend",t)},l=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",t)},p=t=>{cancelAnimationFrame(i.current);const n=Y(t);i.current=requestAnimationFrame((()=>{if(a()&&o.current){let t=n.x-c.current.x,a=n.y-c.current.y;h.current={x:J(u.current.x+t/e,d.left,d.right),y:J(u.current.y+a/e,d.top,d.bottom)},g((e=>Object.assign({},e,{position:Object.assign({},h.current)})))}}))},m=o.current;return m&&(m.addEventListener("mousedown",n),m.addEventListener("touchstart",n)),()=>{m&&(m.removeEventListener("mousedown",n),m.removeEventListener("touchstart",n))}}),[e,d,a]);const m=(0,K.Z)(n);(0,r.useEffect)((()=>{if(n&&(null==m?void 0:m.x)!==n.x&&(null==m?void 0:m.y)!==n.y){const e={x:J(n.x,d.left,d.right),y:J(n.y,d.top,d.bottom)};g({position:e,isPanning:!1}),h.current=e,u.current=e}}),[n,m,d,h,u]);let f=p.position;return n&&(null==m?void 0:m.x)!==n.x&&(null==m?void 0:m.y)!==n.y&&(f=n),{state:Object.assign({},p,{position:{x:J(f.x,d.left,d.right),y:J(f.y,d.top,d.bottom)}}),ref:o}}function J(e,t,n){return Math.min(Math.max(e,null!=t?t:-1/0),null!=n?n:1/0)}function Y(e){if(e.changedTouches){const t=e;return{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}}{const t=e;return{x:t.clientX,y:t.clientY}}}const X={stepDown:e=>e/1.5,stepUp:e=>1.5*e,min:.13,max:2.25};var ee,te,ne;const ae=e=>({wrapper:a.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:a.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:a.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:a.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${e.typography.h4.fontSize};
    color: ${e.colors.text.secondary};
  `,mainGroup:a.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:a.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:a.css`
    label: legend;
    background: ${e.colors.background.secondary};
    box-shadow: ${e.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:a.css`
    margin-left: auto;
  `,alert:a.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${e.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,loadingWrapper:a.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `});function se(e){let{getLinks:t,dataFrames:n,nodeLimit:a}=e;const s=a||200,{edges:u,nodes:h}=(0,_.Y)(n),[g,{width:m,height:f}]=(0,o.Z)(),[v,b]=(0,r.useState)(E),x=h[0],w=u[0],j=(0,l.useTheme2)(),S=(0,r.useMemo)((()=>(0,d.HB)(x,w,j)),[w,x,j]),{nodeHover:C,setNodeHover:k,clearNodeHover:T,edgeHover:I,setEdgeHover:O,clearEdgeHover:N}=function(){const[e,t]=(0,r.useState)(void 0),n=(0,r.useCallback)((()=>t(void 0)),[t]),[a,s]=(0,r.useState)(void 0),i=(0,r.useCallback)((()=>s(void 0)),[s]);return{nodeHover:e,setNodeHover:t,clearNodeHover:n,edgeHover:a,setEdgeHover:s,clearEdgeHover:i}}(),[F,D]=(0,r.useState)([]);(0,r.useEffect)((()=>{let e=[];C?e=(0,d.uX)(S.nodes,S.edges,C):I&&(e=(0,d.MP)(S.nodes,S.edges,I)),D(e)}),[C,I,S]);const[P,$]=(0,r.useState)(),z=(0,r.useCallback)(((e,t)=>$(t.node.id)),[$]),{nodes:H,edges:Z,markers:G,bounds:J,hiddenNodesCount:Y,loading:se}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[h,p]=(0,r.useState)(!1),g=(0,R.default)(),m=(0,r.useRef)();(0,M.Z)((()=>{m.current&&m.current()})),(0,r.useEffect)((()=>{if(0===e.length)return l([]),u([]),void p(!1);p(!0);const n=V(e,t,(e=>{let{nodes:t,edges:n}=e;g()&&(l(t),u(n),p(!1))}));return m.current=n,n}),[e,t,g]);const[f,v]=(0,r.useMemo)((()=>{if(0===e.length)return[[],[]];const a=e.map((e=>Object.assign({},e))),i=t.map((e=>Object.assign({},e)));return B(a,s,n.sort),[a,i]}),[n.sort,e,t,s]),{nodes:b,edges:x,markers:y}=L(n.gridLayout?f:o,n.gridLayout?v:c,a,n,i),w=(0,r.useMemo)((()=>(0,d.Tz)([...b,...(y||[]).map((e=>e.node))])),[b,y]);return{nodes:b,edges:x,markers:y,bounds:w,hiddenNodesCount:e.length-b.length,loading:h}}(S.nodes,S.edges,v,s,m,P),de=function(e,t,n){let a;if(!0===(0,K.Z)(e.gridLayout)&&!e.gridLayout&&n){const e=t.find((e=>e.id===n));e&&(a={x:-e.x,y:-e.y})}return a}(v,H,P),{panRef:ce,zoomRef:ue,onStepUp:he,onStepDown:pe,isPanning:ge,position:me,scale:fe,isMaxZoom:ve,isMinZoom:be}=function(e,t){const{scale:n,onStepDown:a,onStepUp:s,ref:i,isMax:o,isMin:l}=function(){let{stepUp:e,stepDown:t,min:n,max:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const s=(0,r.useRef)(null),[i,o]=(0,r.useState)(1),l=(0,r.useCallback)((()=>{i<(null!=a?a:1/0)&&o(e(i))}),[i,e,a]),d=(0,r.useCallback)((()=>{i>(null!=n?n:-1/0)&&o(t(i))}),[i,t,n]),c=(0,r.useCallback)((function(e){const t=e;if(t.ctrlKey||t.metaKey)if(e.preventDefault(),o(Math.min(Math.max(null!=n?n:-1/0,i+-.01*Math.min(t.deltaY,2)),null!=a?a:1/0)),t.deltaY<0){const e=i+-.015*Math.max(t.deltaY,-4);o(Math.max(null!=n?n:-1/0,e))}else if(t.deltaY>0){const e=i+-.015*Math.min(t.deltaY,4);o(Math.min(null!=a?a:1/0,e))}}),[n,a,i]);return(0,r.useEffect)((()=>{if(!s.current)return;const e=s.current;return e.addEventListener("wheel",c,{passive:!1}),()=>{e&&e.removeEventListener("wheel",c)}}),[c]),{onStepUp:l,onStepDown:d,scale:Math.max(Math.min(i,null!=a?a:1/0),null!=n?n:-1/0),isMax:i>=(null!=a?a:1/0),isMin:i<=(null!=n?n:-1/0),ref:s}}(),{state:d,ref:c}=Q({scale:n,bounds:e,focus:t}),{position:u,isPanning:h}=d;return{zoomRef:i,panRef:c,position:u,isPanning:h,scale:n,onStepDown:a,onStepUp:s,isMaxZoom:o,isMinZoom:l}}(J,de),{onEdgeOpen:xe,onNodeOpen:ye,MenuComponent:we}=function(e,t,n,a,s,i){const[o,d]=(0,r.useState)(void 0),u=(0,r.useCallback)(((n,r)=>{var o;const u=a.gridLayout?[{label:"Show in Graph layout",onClick:e=>{i(e.id),s(Object.assign({},a,{gridLayout:!1}))}}]:void 0,h=U(e(t,r.dataFrameRowIndex),r,u);h&&d((0,c.jsx)(l.ContextMenu,{renderHeader:()=>o||(o=(0,c.jsx)(W,{node:r,nodes:t})),renderMenuItems:h,onClose:()=>d(void 0),x:n.pageX,y:n.pageY}))}),[a,t,e,d,s,i]);return{onEdgeOpen:(0,r.useCallback)(((t,a)=>{var s;const i=U(e(n,a.dataFrameRowIndex),a);i&&d((0,c.jsx)(l.ContextMenu,{renderHeader:()=>s||(s=(0,c.jsx)(q,{edge:a,edges:n})),renderMenuItems:i,onClose:()=>d(void 0),x:t.pageX,y:t.pageY}))}),[n,e,d]),onNodeOpen:u,MenuComponent:o}}(t,x,w,v,b,$),je=(0,l.useStyles2)(ae),Se=(0,r.useCallback)((e=>{g(e),ue.current=e}),[g,ue]),Ce=function(e){const[t,n]=(0,r.useState)(),a=(0,R.default)();return(0,r.useEffect)((()=>{e&&(n(e),setTimeout((()=>{a()&&n(void 0)}),500))}),[e,a]),t}(P);return(0,c.jsxs)("div",{ref:Se,className:je.wrapper,children:[se?(0,c.jsxs)("div",{className:je.loadingWrapper,children:["Computing layoutÂ ",ee||(ee=(0,c.jsx)(l.Spinner,{}))]}):null,n.length&&S.nodes.length?(0,c.jsx)("svg",{ref:ce,viewBox:`${-m/2} ${-f/2} ${m} ${f}`,className:i()(je.svg,ge&&je.svgPanning),children:(0,c.jsxs)("g",{className:je.mainGroup,style:{transform:`scale(${fe}) translate(${Math.floor(me.x)}px, ${Math.floor(me.y)}px)`},children:[te||(te=(0,c.jsx)(p,{})),!v.gridLayout&&(0,c.jsx)(oe,{edges:Z,nodeHoveringId:C,edgeHoveringId:I,onClick:xe,onMouseEnter:O,onMouseLeave:N}),(0,c.jsx)(ie,{nodes:H,onMouseEnter:k,onMouseLeave:T,onClick:ye,hoveringIds:F||[Ce]}),(0,c.jsx)(re,{markers:G||[],onClick:z}),!v.gridLayout&&(0,c.jsx)(le,{edges:Z,nodeHoveringId:C,edgeHoveringId:I})]})}):(0,c.jsx)("div",{className:je.noDataMsg,children:"No data"}),(0,c.jsxs)("div",{className:je.viewControls,children:[H.length?(0,c.jsx)("div",{className:je.legend,children:(0,c.jsx)(y,{sortable:v.gridLayout,nodes:H,sort:v.sort,onSort:e=>{b(Object.assign({},v,{sort:e}))}})}):null,(0,c.jsx)("div",{className:je.viewControlsWrapper,children:(0,c.jsx)(A,{config:v,onConfigChange:e=>{e.gridLayout!==v.gridLayout&&$(void 0),b(e)},onMinus:pe,onPlus:he,scale:fe,disableZoomIn:ve,disableZoomOut:be})})]}),Y>0&&(0,c.jsxs)("div",{className:je.alert,"aria-label":"Nodes hidden warning",children:[ne||(ne=(0,c.jsx)(l.Icon,{size:"sm",name:"info-circle"}))," ",Y," nodes are hidden for performance reasons."]}),we]})}const ie=(0,r.memo)((function(e){return(0,c.jsx)(c.Fragment,{children:e.nodes.map((t=>{var n;return(0,c.jsx)(O,{node:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,hovering:e.hoveringIds&&0!==e.hoveringIds.length?null!==(n=e.hoveringIds)&&void 0!==n&&n.includes(t.id)?"active":"inactive":"default"},t.id)}))})})),re=(0,r.memo)((function(e){return(0,c.jsx)(c.Fragment,{children:e.markers.map((t=>(0,c.jsx)(j,{marker:t,onClick:e.onClick},"marker-"+t.node.id)))})})),oe=(0,r.memo)((function(e){return(0,c.jsx)(c.Fragment,{children:e.edges.map((t=>(0,c.jsx)(u,{edge:t,hovering:t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},t.id)))})})),le=(0,r.memo)((function(e){return(0,c.jsx)(c.Fragment,{children:e.edges.map(((t,n)=>{const a=t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,s=t.mainStat||t.secondaryStat;return a&&s&&(0,c.jsx)(m,{edge:t},t.id)}))})}))},41073:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var a=n(68404);function s(e){return(0,a.useMemo)((()=>e.reduce(((e,t)=>(t.fields.filter((e=>"source"===e.name)).length?e.edges.push(t):e.nodes.push(t),e)),{edges:[],nodes:[]})),[e])}},30804:(e,t,n)=>{"use strict";n.d(t,{Ee:()=>u,Ew:()=>d,F:()=>i,HB:()=>l,MP:()=>p,Tz:()=>c,dM:()=>s,lr:()=>r,uX:()=>g});var a=n(43215);function s(e,t){const n=e.x2-e.x1,a=e.y2-e.y1,s=Math.sqrt(n*n+a*a),i=Math.max((s-t)/s,0),r=n*i,o=a*i,l=n-r,d=a-o,c=e.x1+l/2,u=e.y1+d/2;return{x1:c,y1:u,x2:c+r,y2:u+o}}function i(e){const t=Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{name:e.name.toLowerCase()})))}),n=new a.FieldCache(t);return{id:n.getFieldByName(a.NodeGraphDataFrameFieldNames.id.toLowerCase()),title:n.getFieldByName(a.NodeGraphDataFrameFieldNames.title.toLowerCase()),subTitle:n.getFieldByName(a.NodeGraphDataFrameFieldNames.subTitle.toLowerCase()),mainStat:n.getFieldByName(a.NodeGraphDataFrameFieldNames.mainStat.toLowerCase()),secondaryStat:n.getFieldByName(a.NodeGraphDataFrameFieldNames.secondaryStat.toLowerCase()),arc:o(e,a.NodeGraphDataFrameFieldNames.arc),details:o(e,a.NodeGraphDataFrameFieldNames.detail),color:n.getFieldByName(a.NodeGraphDataFrameFieldNames.color)}}function r(e){const t=Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{name:e.name.toLowerCase()})))}),n=new a.FieldCache(t);return{id:n.getFieldByName(a.NodeGraphDataFrameFieldNames.id.toLowerCase()),source:n.getFieldByName(a.NodeGraphDataFrameFieldNames.source.toLowerCase()),target:n.getFieldByName(a.NodeGraphDataFrameFieldNames.target.toLowerCase()),mainStat:n.getFieldByName(a.NodeGraphDataFrameFieldNames.mainStat.toLowerCase()),secondaryStat:n.getFieldByName(a.NodeGraphDataFrameFieldNames.secondaryStat.toLowerCase()),details:o(e,a.NodeGraphDataFrameFieldNames.detail.toLowerCase())}}function o(e,t){return e.fields.filter((e=>e.name.match(new RegExp("^"+t))))}function l(e,t,n){if(!e)return{nodes:[],edges:[]};const a=i(e);if(!a.id)throw new Error("id field is required for nodes data frame.");const s=a.id.values.toArray().reduce(((e,t,n)=>{var s;return e[t]={id:t,title:(null===(s=a.title)||void 0===s?void 0:s.values.get(n))||"",subTitle:a.subTitle?a.subTitle.values.get(n):"",dataFrameRowIndex:n,incoming:0,mainStat:a.mainStat,secondaryStat:a.secondaryStat,arcSections:a.arc,color:a.color},e}),{})||{};let o=[];if(t){const e=r(t);if(!e.id)throw new Error("id field is required for edges data frame.");o=e.id.values.toArray().map(((t,n)=>{var a,i;const r=null===(a=e.target)||void 0===a?void 0:a.values.get(n),o=null===(i=e.source)||void 0===i?void 0:i.values.get(n);return s[r].incoming++,{id:t,dataFrameRowIndex:n,source:o,target:r,mainStat:e.mainStat?d(e.mainStat,n):"",secondaryStat:e.secondaryStat?d(e.secondaryStat,n):""}}))}return{nodes:Object.values(s),edges:o||[],legend:a.arc.map((e=>{var t,n;return{color:null!==(t=null===(n=e.config.color)||void 0===n?void 0:n.fixedColor)&&void 0!==t?t:"",name:e.config.displayName||e.name}}))}}function d(e,t){if(e.type===a.FieldType.string)return e.values.get(t);{const n=e.config.decimals||2,a=e.values.get(t);return Number.isFinite(a)?e.values.get(t).toFixed(n)+(e.config.unit?" "+e.config.unit:""):""}}function c(e){if(0===e.length)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const t=e.reduce(((e,t)=>(t.x>e.right&&(e.right=t.x),t.x<e.left&&(e.left=t.x),t.y>e.bottom&&(e.bottom=t.y),t.y<e.top&&(e.top=t.y),e)),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),n=t.top+(t.bottom-t.top)/2,a=t.left+(t.right-t.left)/2;return Object.assign({},t,{center:{x:a,y:n}})}function u(e,t){let n=e.filter((e=>{var t;if("nodeGraph"===(null===(t=e.meta)||void 0===t?void 0:t.preferredVisualisationType))return!0;if("nodes"===e.name||"edges"===e.name||"nodes"===e.refId||"edges"===e.refId)return!0;return!!new a.FieldCache(e).getFieldByName(a.NodeGraphDataFrameFieldNames.id)}));return t&&(n=h(n,t)),n}const h=(e,t)=>e.map((e=>{if(new a.FieldCache(e).getFieldByName(a.NodeGraphDataFrameFieldNames.source.toLowerCase())){var n,s;if(null!=t&&null!==(n=t.edges)&&void 0!==n&&n.mainStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.NodeGraphDataFrameFieldNames.mainStat));n&&(n.config=Object.assign({},n.config,{unit:t.edges.mainStatUnit}))}if(null!=t&&null!==(s=t.edges)&&void 0!==s&&s.secondaryStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.NodeGraphDataFrameFieldNames.secondaryStat));n&&(n.config=Object.assign({},n.config,{unit:t.edges.secondaryStatUnit}))}}else{var i,r,o,l;if(null!=t&&null!==(i=t.nodes)&&void 0!==i&&i.mainStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.NodeGraphDataFrameFieldNames.mainStat));n&&(n.config=Object.assign({},n.config,{unit:t.nodes.mainStatUnit}))}if(null!=t&&null!==(r=t.nodes)&&void 0!==r&&r.secondaryStatUnit){const n=e.fields.find((e=>e.name.toLowerCase()===a.NodeGraphDataFrameFieldNames.secondaryStat));n&&(n.config=Object.assign({},n.config,{unit:t.nodes.secondaryStatUnit}))}if(null!=t&&null!==(o=t.nodes)&&void 0!==o&&null!==(l=o.arcs)&&void 0!==l&&l.length)for(const n of t.nodes.arcs){const t=e.fields.find((e=>e.name.toLowerCase()===n.field));t&&n.color&&(t.config=Object.assign({},t.config,{color:{fixedColor:n.color,mode:a.FieldColorModeId.Fixed}}))}}return e})),p=(e,t,n)=>{const a=t.find((e=>e.id===n));return a?[...new Set(e.filter((e=>a.source===e.id||a.target===e.id)).map((e=>e.id)))]:[]},g=(e,t,n)=>{const a=e.find((e=>e.id===n));if(a){const n=t.filter((e=>e.source===a.id||e.target===a.id));return[...new Set(n.flatMap((t=>e.filter((e=>t.source===e.id||t.target===e.id)).map((e=>e.id)))))]}return[]}},38231:(e,t,n)=>{"use strict";n.d(t,{h:()=>r,j:()=>i});var a=n(43215),s=n(97024);function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=["Value options"];e.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:n,defaultValue:!1}),e.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:n,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:e=>!0===e.reduceOptions.values}),e.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:n,editor:a.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[a.ReducerID.lastNotNull],showIf:e=>!1===e.reduceOptions.values}),t&&e.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:n,settings:{allowCustomValue:!0,options:[],getOptions:async e=>{const t=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(e&&e.data)for(const n of e.data)for(const s of n.fields){const i=(0,a.getFieldDisplayName)(s,n,e.data),r=`/^${(0,a.escapeStringForRegex)(i)}$/`;t.push({value:r,label:i})}return Promise.resolve(t)}},defaultValue:""})}function r(e,t){e.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:t,settings:{options:[{value:s.wm.Auto,label:"Auto"},{value:s.wm.Horizontal,label:"Horizontal"},{value:s.wm.Vertical,label:"Vertical"}]},defaultValue:s.wm.Auto})}},83481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{plugin:()=>f});var a=n(43215),s=n(97024),i=n(3490);var r=n(82897),o=n(68404),l=n(4661),d=n(78837),c=n(45916);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends o.PureComponent{constructor(){super(...arguments),u(this,"renderComponent",((e,t)=>{const{timeRange:n,options:a}=this.props,{value:s,alignmentFactors:r,width:o,height:l,count:u}=e,{openMenu:h,targetClassName:p}=t;let g=s.sparkline;return g&&(g.timeRange=n),(0,c.jsx)(i.BigValue,{value:s.display,count:u,sparkline:g,colorMode:a.colorMode,graphMode:a.graphMode,justifyMode:a.justifyMode,textMode:this.getTextMode(),alignmentFactors:r,text:a.text,width:o,height:l,theme:d.vc.theme2,onClick:h,className:p})})),u(this,"renderValue",(e=>{const{value:t}=e,{getLinks:n,hasLinks:a}=t;return a&&n?(0,c.jsx)(i.DataLinksContextMenu,{links:n,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),u(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:n,fieldConfig:i,timeZone:o}=this.props;let c;for(let t of e.series)for(let n of t.fields){let{config:t}=n;if(n.type===a.FieldType.number){var u,h,p,g;if(null!==(u=n.state)&&void 0!==u&&u.range)continue;c||(0,r.isNumber)(t.min)&&(0,r.isNumber)(t.max)||(c=(0,l.Xu)(e.series));const a=null!==(h=t.min)&&void 0!==h?h:c.min,s=null!==(p=t.max)&&void 0!==p?p:c.max;n.state=null!==(g=n.state)&&void 0!==g?g:{},n.state.range={min:a,max:s,delta:s-a}}}return(0,a.getFieldDisplayValues)({fieldConfig:i,reduceOptions:t.reduceOptions,replaceVariables:n,theme:d.vc.theme2,data:e.series,sparkline:t.graphMode!==s.IG.None,timeZone:o})}))}getTextMode(){const{options:e,fieldConfig:t,title:n}=this.props;return e.textMode!==s.jG.Auto||!t.defaults.displayName&&n?e.textMode:s.jG.ValueAndName}render(){const{height:e,options:t,width:n,data:s,renderCounter:r}=this.props;return(0,c.jsx)(i.VizRepeater,{getValues:this.getValues,getAlignmentFactors:a.getDisplayValueAlignmentFactors,renderValue:this.renderValue,width:n,height:e,source:s,itemSpacing:3,renderCounter:r,autoGrid:!0,orientation:t.orientation})}}var p=n(38231);Object.freeze([0,0]);const g={colorMode:s.pc.Value,graphMode:s.IG.Area,justifyMode:s.ap.Auto,textMode:s.jG.Auto};var m=n(8554);const f=new a.PanelPlugin(h).useFieldConfig().setPanelOptions((e=>{const t=["Stat styles"];(0,p.j)(e),(0,p.h)(e,t),i.commonOptionsBuilder.addTextSizeOptions(e),e.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:t,settings:{options:[{value:s.jG.Auto,label:"Auto"},{value:s.jG.Value,label:"Value"},{value:s.jG.ValueAndName,label:"Value and name"},{value:s.jG.Name,label:"Name"},{value:s.jG.None,label:"None"}]},defaultValue:g.textMode}),e.addRadio({path:"colorMode",name:"Color mode",defaultValue:s.pc.Value,category:t,settings:{options:[{value:s.pc.None,label:"None"},{value:s.pc.Value,label:"Value"},{value:s.pc.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:t,defaultValue:g.graphMode,settings:{options:[{value:s.IG.None,label:"None"},{value:s.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:g.justifyMode,category:t,settings:{options:[{value:s.ap.Auto,label:"Auto"},{value:s.ap.Center,label:"Center"}]}})})).setNoPadding().setPanelChangeHandler(((e,t,n)=>{const r=(0,i.sharedSingleStatPanelChangedHandler)(e,t,n);if(n.angular&&("singlestat"===t||"grafana-singlestat-panel"===t)){const t=n.angular;if(r.graphMode=s.IG.None,t.sparkline&&t.sparkline.show&&(r.graphMode=s.IG.Area),t.colorBackground)r.colorMode=s.pc.Background;else if(t.colorValue)r.colorMode=s.pc.Value;else{var o;if(r.colorMode=s.pc.None,null!==(o=t.sparkline)&&void 0!==o&&o.lineColor&&r.graphMode===s.IG.Area){var l;const n=null!==(l=e.fieldConfig)&&void 0!==l?l:{};n.defaults.color={mode:a.FieldColorModeId.Fixed,fixedColor:t.sparkline.lineColor},e.fieldConfig=n}}"name"===t.valueName&&(r.textMode=s.jG.Name)}return r})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;const n=e.getListAppender({name:m.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.reduceOptions.values&&(e.options.reduceOptions.limit=1)}}});t.hasStringField&&t.hasNumberField&&1===t.frameCount&&t.rowCountTotal<10&&(n.append({name:m.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),n.append({name:m.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:s.pc.Background}})),1===t.stringFieldCount&&1===t.frameCount&&t.rowCountTotal<10&&1===t.fieldCount&&n.append({name:m.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:s.pc.None}}),t.hasNumberField&&t.hasTimeField&&(n.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),n.append({name:m.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:s.IG.None,colorMode:s.pc.Background}}))}}).setMigrationHandler(i.sharedSingleStatMigrationHandler)},84934:(e,t,n)=>{"use strict";n.d(t,{KN:()=>i,Uv:()=>s,mP:()=>a});const a={showValue:n(97024).Jp.Auto,alignValue:"left",mergeValues:!0,rowHeight:.9},s={lineWidth:0,fillOpacity:70};let i;!function(e){e.Changes="changes",e.Samples="samples"}(i||(i={}))},48628:(e,t,n)=>{"use strict";n.d(t,{iK:()=>D,Y:()=>P,$m:()=>F,Ur:()=>O,Nj:()=>C,AR:()=>I,SA:()=>N});var a=n(43215),s=n(76714),i=n(97024),r=n(3490),o=n(72710),l=n(33564),d=n(55273),c=n(55860),u=n(23457),h=n(90414),p=n(15243),g=n(39256),m=n(84934);const{round:f,min:v,ceil:b}=Math,x=devicePixelRatio,y=p.Gj;function w(e,t,n,a,s){(0,p.Qm)(n,e,y,t,((e,t,n)=>{s(e,a*t,a*n)}))}function j(e){var t;const{mode:n,numSeries:a,isDiscrete:s,rowHeight:r=0,colWidth:o=0,showValue:l,mergeValues:d=!1,theme:p,label:y,formatValue:j,alignValue:S="left",getTimeRange:C,getValueColor:k,getFieldConfig:T,onHover:I,onLeave:O}=e;let N;const F=Array(a).fill(null).map((()=>{let e=document.createElement("div");return e.classList.add("bar-mark"),e.style.position="absolute",e.style.background="rgba(255,255,255,0.2)",e}));let D;const P=`500 ${Math.round(12*devicePixelRatio)}px ${p.typography.fontFamily}`,A=Array(a).fill(null),M=[o,1/0],R=1-M[0],$=(null!==(t=M[1])&&void 0!==t?t:1/0)*x,L=new Map,E=new Map;function V(e,t,n,a,s,i,r,o,l,d,c,h,p){if(r<1)return;const g=k(d+1,h),m=function(e,t){var n;if("#"===t[0]&&9===t.length)return t;const a=(null!==(n=e.fillOpacity)&&void 0!==n?n:100)/100;return(0,u.alpha)(t,a)}(T(d),g);if(D[d][c]={x:f(s-n),y:f(i-a),w:r,h:o,sidx:d+1,didx:c,fillColor:m},p){let e=m,n=L.get(e);if(null==n&&L.set(e,n=new Path2D),t(n,s,i,r,o),l){let e=g,n=E.get(e);null==n&&E.set(e,n=new Path2D),t(n,s+l/2,i+l/2,r-l,o-l)}}else e.beginPath(),t(e,s,i,r,o),e.fillStyle=m,e.fill(),l&&(e.beginPath(),t(e,s+l/2,i+l/2,r-l,o-l),e.strokeStyle=g,e.lineWidth=l,e.stroke())}const B=null!=j&&l!==i.Jp.Never&&((e,t,a,s)=>(e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),e.ctx.font=P,e.ctx.textAlign=n===m.KN.Changes?S:"center",e.ctx.textBaseline="middle",c.Z.orient(e,t,((a,s,r,o,d,c,u,h,g,v,b)=>{let y=f((a.width||0)*x),w=f(g+W[t-1]);for(let a=0;a<r.length;a++)if(null!=r[a]){const s=D[t-1][a];if(!s||l===i.Jp.Auto&&s.w<25)continue;if(s.x>=v)continue;let o=f(s.x+h+s.w/2);const d=j(t,r[a]);n===m.KN.Changes&&("left"===S?o=f(s.x+h+y+2):"right"===S&&(o=f(s.x+h+s.w-y-2))),e.ctx.fillStyle=p.colors.getContrastText(s.fillColor,3),e.ctx.fillText(d,o,w)}})),e.ctx.restore(),!1));function z(e,t){let n=F[e];t?(n.style.display="",n.style.left=f(t.x/x)+"px",n.style.top=f(t.y/x)+"px",n.style.width=f(t.w/x)+"px",n.style.height=f(t.h/x)+"px"):n.style.display="none",A[e]=t}let _;const U=n===m.KN.Changes?function(e,t){let n;for(let s=0;s<a;s++){let a;if(e>=0){let i=W[s];N.get(e,i,1,1,(s=>{(0,g.Pn)(e,i,s.x,s.y,s.x+s.w,s.y+s.h)&&(a=s,Math.abs(t-i)<=s.h/2&&(n=s))}))}a?a!==A[s]&&z(s,a):null!=A[s]&&z(s,null)}n?n!==_&&(_=n,I(n.sidx,n.didx,n)):_&&(_=void 0,O())}:function(e,t){let n;N.get(e,t,1,1,(a=>{(0,g.Pn)(e,t,a.x,a.y,a.x+a.w,a.y+a.h)&&(n=a)})),n?(z(0,n),n!==_&&(_=n,I(n.sidx,n.didx,n))):_&&(z(0,null),_=void 0,O())},H={y:!1,x:n===m.KN.Changes,points:{show:!1}},W=Array(a).fill(0),q=Array(a).fill(0);return{cursor:H,xSplits:n===m.KN.Samples?(e,t,n,a,s,i)=>{let r=[],o=e.data[0][1]-e.data[0][0],l=b(s/o);for(let t=0;t<e.data[0].length;t+=l){let s=e.data[0][t];s>=n&&s<=a&&r.push(s)}return r}:null,xRange:e=>{const t=C();let a=t.from.valueOf(),s=t.to.valueOf();if(n===m.KN.Samples){let t=(e.data[0][1]-e.data[0][0])/2;a<=e.data[0][0]&&(a=e.data[0][0]-t);let n=e.data[0].length-1;s>=e.data[0][n]&&(s=e.data[0][n]+t)}return[a,s]},ySplits:e=>(w(r,null,a,e.bbox.height,((t,n,a)=>{W[t]=f(n+a/2),q[t]=e.posToVal(W[t]/x,h.j)})),q),yValues:(e,t)=>t.map(((e,t)=>y(t+1))),yRange:[0,1],drawPaths:(e,t,i,o)=>(c.Z.orient(e,t,((l,c,u,h,p,g,b,y,j,S,C,k,T,I)=>{let O=f((l.width||0)*x),N=s(t);var F;e.ctx.save(),I(e.ctx,e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),w(r,t-1,a,C,((t,a,s)=>{if(n===m.KN.Changes)for(let n=0;n<u.length;n++){let i=u[n];if(null!=i){let r=Math.round(g(c[n],h,S,y)),o=n;for(;++o<u.length&&(void 0===u[o]||d&&u[o]===i););let l=o===u.length?y+S+O:Math.round(g(c[o],h,S,y));V(e.ctx,I,y,j,r,f(j+a),l-r,f(s),O,t,n,i,N),n=o-1}}else if(n===m.KN.Samples){let n=g(c[1],h,S,y)-g(c[0],h,S,y),r=f(v($,n-n*R)-O),l=r/2;for(let n=i;n<=o;n++)if(null!=u[n]){let i=g(c[n],h,S,y);V(e.ctx,I,y,j,f(i-l),f(j+a),r,f(s),O,t,n,u[n],N)}}})),N&&(e.ctx.lineWidth=O,F=e.ctx,L.forEach(((e,t)=>{F.fillStyle=t,F.fill(e)})),E.forEach(((e,t)=>{F.strokeStyle=t,F.stroke(e)})),L.clear(),E.clear()),e.ctx.restore()})),null),drawPoints:B,init:e=>{let t=e.over;t.style.overflow="hidden",F.forEach((e=>{t.appendChild(e)}))},drawClear:e=>{var t;N=N||new g.lW(0,0,e.bbox.width,e.bbox.height),N.clear(),t=e.data[0].length,D=Array(a).fill(null).map((e=>Array(t).fill(null))),e.series.forEach((e=>{e._paths=null}))},setCursor:e=>{let t=f(e.cursor.left*x),n=f(e.cursor.top*x);if(!N.o.length&&null==N.q)for(const e of D)for(const t of e)t&&N.add(t);U(t,n)}}}const S={lineWidth:0,fillOpacity:80};const C=e=>{let{frame:t,theme:n,timeZones:s,getTimeRange:o,mode:l,eventBus:c,sync:u,rowHeight:h,colWidth:p,showValue:g,alignValue:m,mergeValues:f,getValueColor:v}=e;const b=new r.UPlotConfigBuilder(s[0]),x="time",y="x",w={mode:l,numSeries:t.fields.length-1,isDiscrete:e=>(e=>{var t,n;const a=null===(t=e.config)||void 0===t||null===(n=t.color)||void 0===n?void 0:n.mode;return!(a&&e.display&&a.startsWith("continuous-"))})(t.fields[e]),mergeValues:f,rowHeight:h,colWidth:p,showValue:g,alignValue:m,theme:n,label:e=>(0,a.getFieldDisplayName)(t.fields[e],t),getFieldConfig:e=>t.fields[e].config.custom,getValueColor:(e,n)=>{var s,i,r,o;const l=t.fields[e];var d,c,u,h;return void 0!==(null===(s=l.state)||void 0===s||null===(i=s.origin)||void 0===i?void 0:i.fieldIndex)&&void 0!==(null===(r=l.state)||void 0===r||null===(o=r.origin)||void 0===o?void 0:o.frameIndex)&&v?v(null===(d=l.state)||void 0===d||null===(c=d.origin)||void 0===c?void 0:c.frameIndex,null===(u=l.state)||void 0===u||null===(h=u.origin)||void 0===h?void 0:h.fieldIndex,n):a.FALLBACK_COLOR},getTimeRange:o,formatValue:(e,n)=>(0,a.formattedValueToString)(t.fields[e].display(n)),onHover:(e,t)=>{k=e,T=t,C=!0},onLeave:()=>{k=null,T=null,C=!0}};let C=!1,k=null,T=null;const I=j(w),O={point:{[x]:null,[r.FIXED_UNIT]:null},data:t};b.addHook("init",I.init),b.addHook("drawClear",I.drawClear),b.addHook("setCursor",I.setCursor);b.setTooltipInterpolator(((e,t,n)=>{C&&(null!=k&&(e(k),t(T)),C=!1),n(null==k)})),b.setPrepData((e=>(0,d.Bj)(e[0],(0,d.i7)(e[0])))),b.setCursor(I.cursor),b.addScale({scaleKey:y,isTime:!0,orientation:i.wN.Horizontal,direction:i.bQ.Right,range:I.xRange}),b.addScale({scaleKey:r.FIXED_UNIT,isTime:!1,orientation:i.wN.Vertical,direction:i.bQ.Up,range:I.yRange}),b.addAxis({scaleKey:y,isTime:!0,splits:I.xSplits,placement:i.LB.Bottom,timeZone:s[0],theme:n,grid:{show:!0}}),b.addAxis({scaleKey:r.FIXED_UNIT,isTime:!1,placement:i.LB.Left,splits:I.ySplits,values:I.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:n});let N=0;for(let e=0;e<t.fields.length;e++){var F,D;if(0===e)continue;const a=t.fields[e],s=a.config,i=Object.assign({},S,s.custom);a.state.seriesIndex=N++,b.addSeries({scaleKey:r.FIXED_UNIT,pathBuilder:I.drawPaths,pointsBuilder:I.drawPoints,lineWidth:i.lineWidth,fillOpacity:i.fillOpacity,theme:n,show:!(null!==(F=i.hideFrom)&&void 0!==F&&F.viz),thresholds:s.thresholds,dataFrameFieldIndex:null===(D=a.state)||void 0===D?void 0:D.origin})}if(u&&u()!==a.DashboardCursorSync.Off){let e={};e.sync={key:"__global_",filters:{pub:(e,t,n,s,i,o,l)=>(!u||u()!==a.DashboardCursorSync.Off)&&(O.rowIndex=l,n<0&&s<0?(O.point.time=null,O.point[r.FIXED_UNIT]=null,c.publish(new a.DataHoverClearEvent)):(O.point.time=t.posToVal(n,y),O.point.panelRelY=s>0?s/o:1,O.down=void 0,c.publish(new a.DataHoverEvent(O))),!0)},scales:[y,null]},b.setSync(),b.setCursor(e)}return b};function k(e){var t;let n=null===(t=e.config.custom)||void 0===t?void 0:t.spanNulls;return n?!0===n?1/0:n:-1}function T(e,t){const n=e.config.thresholds;if(e.type!==a.FieldType.number||!n||!n.steps.length)return;const s=O(e.config,t);if(s.length!==n.steps.length)return;const i=new Map,r=new Map;for(let e=0;e<s.length;e++)i.set(n.steps[e],s[e].label),r.set(s[e].label,s[e].color);let o=e.values.toArray();const l=new Array(e.values.length);if(n.mode===a.ThresholdsMode.Percentage){const{min:t,max:n}=(0,a.getFieldConfigWithMinMax)(e),s=n-t;o=o.map((e=>null==e?e:(e-t)/s*100))}for(let e=0;e<l.length;e++){const t=o[e];l[e]=null==t?t:i.get((0,a.getActiveThreshold)(t,n.steps))}return Object.assign({},e,{config:Object.assign({},e.config,{custom:Object.assign({},e.config.custom,{spanNulls:k(e)})}),type:a.FieldType.string,values:new a.ArrayVector(l),display:e=>({text:e,color:r.get(e),numeric:NaN})})}function I(e,t,n,i){var r;if(null==e||!e.length)return{warn:"No data in response"};let d=!1;const c=[];for(let u of e){let e=!1,h=!1,p=(0,s.Y3)(u,u.fields.findIndex((e=>e.type===a.FieldType.time))),g=(0,o.w)({frame:p,refFieldPseudoMin:n.from.valueOf(),refFieldPseudoMax:n.to.valueOf()});g!==u&&(h=!0);const m=[];for(let n of(0,l.I)(g).fields)switch(n.type){case a.FieldType.time:e=!0,d=!0,m.push(n);break;case a.FieldType.number:if(t&&(null===(r=n.config.color)||void 0===r?void 0:r.mode)===a.FieldColorModeId.Thresholds){const e=T(n,i);if(e){m.push(e),h=!0;continue}}case a.FieldType.boolean:case a.FieldType.string:n=Object.assign({},n,{config:Object.assign({},n.config,{custom:Object.assign({},n.config.custom,{spanNulls:k(n)})})}),m.push(n);break;default:h=!0}e&&m.length>1&&(d=!0,h?c.push(Object.assign({},p,{fields:m})):c.push(p))}return d?c.length?{frames:c}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function O(e,t){var n;const s=[],i=e.thresholds;if(!i||!i.steps.length)return s;const r=i.steps,o=(0,a.getValueFormat)(i.mode===a.ThresholdsMode.Percentage?"percent":null!==(n=e.unit)&&void 0!==n?n:""),l=e=>(0,a.formattedValueToString)(o(e));for(let e=1;e<=r.length;e++){const n=r[e-1];s.push({label:1===e?`< ${l(n.value)}`:`${l(n.value)}+`,color:t.visualization.getColorByName(n.color),yAxis:1})}return s}function N(e,t,n){if(e&&!1!==t.showLegend)return F(function(e){const t=[];for(const n of e)for(const e of n.fields)e.type!==a.FieldType.time&&t.push(e);return t}(e),n)}function F(e,t){var n,s;if(!e.length)return;const i=[],r=e[0].config,o=null!==(n=null===(s=r.color)||void 0===s?void 0:s.mode)&&void 0!==n?n:a.FieldColorModeId.Fixed,l=r.thresholds;if(o===a.FieldColorModeId.Thresholds&&null!=l&&l.steps&&l.steps.length>1)return O(r,t);if(o.startsWith("continuous"))return;let d=new Map;return e.forEach((e=>{e.values.toArray().forEach((t=>{let n=e.display(t);n.color&&d.set(n.text,n.color)}))})),d.forEach(((e,n)=>{n.length>0&&i.push({label:n,color:t.visualization.getColorByName(null!=e?e:a.FALLBACK_COLOR),yAxis:1})})),i}function D(e,t){let n,a=t+1;if(a>=e.values.length)return null;const s=e.values.get(t);for(;void 0===n;){if(a>=e.values.length)return null;const t=e.values.get(a);void 0===t||t===s?a++:n=a}return n}function P(e){if(e<0||Number.isNaN(e))return"";let t,n,a,s,i,r,o,l;return o=Math.floor(e/1e3),r=Math.floor(o/60),o%=60,i=Math.floor(r/60),r%=60,s=Math.floor(i/24),i%=24,t=Math.floor(s/365),t>0&&(s%=365),n=Math.floor(s/30),n>0&&(s%=30),a=Math.floor(s/7),a>0&&(s%=7),l=Math.round(e%1e3*1e3)/1e3,(t>0?t+"y "+(n>0?n+"mo ":"")+(a>0?a+"w ":"")+(s>0?s+"d ":""):n>0?n+"mo "+(a>0?a+"w ":"")+(s>0?s+"d ":""):a>0?a+"w "+(s>0?s+"d ":""):s>0?s+"d "+(i>0?i+"h ":""):i>0?i+"h "+(r>0?r+"m ":""):r>0?r+"m "+(o>0?o+"s ":""):o>0?o+"s "+(l>0?l+"ms ":""):l>0?l+"ms ":"0").trim()}},69783:(e,t,n)=>{"use strict";n.d(t,{j:()=>c});var a,s=n(68404),i=n(3490),r=n(45916);const o=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],l=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map((e=>({label:e,value:e}))),d=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map((e=>({label:e,value:e}))),c=e=>{let{value:t,onChange:n}=e;const c=(0,s.useMemo)((()=>"dash"===(null==t?void 0:t.fill)?l:d),[t]),h=(0,s.useMemo)((()=>{var e,n;if(null==t||null===(e=t.dash)||void 0===e||!e.length)return c[0];const a=null===(n=t.dash)||void 0===n?void 0:n.join(", "),s=c.find((e=>e.value===a));return s||{label:a,value:a}}),[t,c]);return(0,r.jsxs)(i.HorizontalGroup,{children:[(0,r.jsx)(i.RadioButtonGroup,{value:(null==t?void 0:t.fill)||"solid",options:o,onChange:e=>{let a;"dot"===e?a=u(d[0].value):"dash"===e&&(a=u(l[0].value)),n(Object.assign({},t,{fill:e,dash:a}))}}),(null==t?void 0:t.fill)&&"solid"!==(null==t?void 0:t.fill)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Select,{allowCustomValue:!0,options:c,value:h,width:20,onChange:e=>{var a;n(Object.assign({},t,{dash:u(null!==(a=e.value)&&void 0!==a?a:"")}))},formatCreateLabel:e=>`Segments: ${u(e).join(", ")}`}),a||(a=(0,r.jsxs)("div",{children:["Â ",(0,r.jsx)("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer",children:(0,r.jsx)(i.IconButton,{name:"question-circle"})})]}))]})]})};function u(e){const t=[];for(const n of e.split(/(?:,| )+/)){const e=Number.parseInt(n,10);isNaN(e)||t.push(e)}return t}},67680:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});n(68404);var a,s=n(43215),i=n(3490),r=n(45916);const o=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],l=e=>{let{value:t,onChange:n}=e;const l="number"==typeof t,d=l?s.rangeUtil.secondsToHms(t/1e3):void 0;o[2].value=l?t:36e5;const c=e=>{let t=!1;if(e)try{t=1e3*s.rangeUtil.intervalToSeconds(e)}catch(e){console.warn("ERROR",e)}n(t)};return(0,r.jsxs)(i.HorizontalGroup,{children:[(0,r.jsx)(i.RadioButtonGroup,{value:t,options:o,onChange:n}),l&&(0,r.jsx)(i.Input,{autoFocus:!1,placeholder:"never",width:10,defaultValue:d,onKeyDown:e=>{"Enter"===e.key&&c(e.target.value)},onBlur:e=>{c(e.target.value)},prefix:a||(a=(0,r.jsx)("div",{children:"<"})),spellCheck:!1})]})}},40325:(e,t,n)=>{"use strict";n.d(t,{r:()=>h,F:()=>g});var a=n(43215),s=n(97024),i=n(3490),r=n(68404),o=n(45916);const l=e=>{let{value:t,context:n,onChange:s}=e;const l=(0,r.useMemo)((()=>{const e=[];if(n.data.length)for(const t of n.data)for(const s of t.fields)if(s.type===a.FieldType.number){const i=(0,a.getFieldDisplayName)(s,t,n.data);e.push({label:i,value:i})}return e}),[n]),d=(0,r.useMemo)((()=>{const e=l.find((e=>e.value===t));return e||(t?{label:t,value:t}:void 0)}),[l,t]);return(0,o.jsx)(i.Select,{options:l,value:d,onChange:e=>{s(e.value)}})};var d=n(69783),c=n(67680);const u=e=>{let{item:t,value:n,onChange:a,id:s}=e;const l=(0,r.useCallback)((e=>{a({mode:e.value})}),[a]);return(0,o.jsx)(i.Select,{inputId:s,value:n.mode,options:t.settings.options,onChange:l})},h={drawStyle:s.l8.Line,lineInterpolation:s.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:s.FI.None,barAlignment:s.pu.Center,stacking:{mode:s.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},p=["Graph styles"];function g(e){return{standardOptions:{[a.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.FieldColorModeId.PaletteClassic}}},useCustomConfig:t=>{t.addRadio({path:"drawStyle",name:"Style",category:p,defaultValue:e.drawStyle,settings:{options:i.graphFieldOptions.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:p,defaultValue:e.lineInterpolation,settings:{options:i.graphFieldOptions.lineInterpolation},showIf:e=>e.drawStyle===s.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:p,defaultValue:e.barAlignment,settings:{options:i.graphFieldOptions.barAlignment},showIf:e=>e.drawStyle===s.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:p,defaultValue:e.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:e=>e.drawStyle!==s.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:p,defaultValue:e.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:e=>e.drawStyle!==s.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:p,defaultValue:i.graphFieldOptions.fillGradient[0].value,settings:{options:i.graphFieldOptions.fillGradient},showIf:e=>e.drawStyle!==s.l8.Points}).addCustomEditor({id:"fillBelowTo",path:"fillBelowTo",name:"Fill below to",category:p,editor:l,override:l,process:a.stringOverrideProcessor,hideFromDefaults:!0,shouldApply:e=>!0}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:p,showIf:e=>e.drawStyle===s.l8.Line,editor:d.j,override:d.j,process:a.identityOverrideProcessor,shouldApply:e=>e.type===a.FieldType.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:p,defaultValue:!1,editor:c.c,override:c.c,showIf:e=>e.drawStyle===s.l8.Line,shouldApply:e=>e.type!==a.FieldType.time,process:a.identityOverrideProcessor}).addRadio({path:"showPoints",name:"Show points",category:p,defaultValue:i.graphFieldOptions.showPoints[0].value,settings:{options:i.graphFieldOptions.showPoints},showIf:e=>e.drawStyle!==s.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:p,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:e=>e.showPoints!==s.Jp.Never||e.drawStyle===s.l8.Points}),i.commonOptionsBuilder.addStackingConfig(t,e.stacking,p),t.addSelect({category:p,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:s.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:s.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),i.commonOptionsBuilder.addAxisConfig(t,e),i.commonOptionsBuilder.addHideFrom(t),t.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:s.i3.Off},settings:{options:i.graphFieldOptions.thresholdsDisplayModes},editor:u,override:u,process:a.identityOverrideProcessor,shouldApply:()=>!0})}}}},45371:()=>{let e=window.matchMedia;window.matchMedia=t=>{let n=e(t);return n.addEventListener||(n.addEventListener=(e,t)=>{n.addListener(t)},n.removeEventListener=(e,t)=>{n.removeListener(t)}),n}},56340:(e,t,n)=>{"use strict";n.d(t,{PQ:()=>i,WI:()=>o,h:()=>s,y0:()=>r});var a=n(5337);let s;function i(e){s=e}function r(){return s&&s.getState?s.getState():{templating:Object.assign({},a.qM,{lastKey:"key"})}}function o(e){if(s&&s.getState)return s.dispatch(e)}},59834:(e,t,n)=>{"use strict";let a,s,i,r,o;n.d(t,{B5:()=>a,BL:()=>l,V5:()=>s,bf:()=>i,eL:()=>u,hw:()=>c,pC:()=>o,vT:()=>d}),function(e){e.Viewer="Viewer",e.Editor="Editor",e.Admin="Admin"}(a||(a={})),function(e){e[e.View=1]="View",e[e.Edit=2]="Edit",e[e.Admin=4]="Admin"}(s||(s={})),function(e){e.View="View",e.Edit="Edit",e.Admin="Admin"}(i||(i={})),function(e){e[e.Query=1]="Query",e[e.Admin=2]="Admin"}(r||(r={})),function(e){e.Team="Team",e.User="User",e.Viewer="Viewer",e.Editor="Editor"}(o||(o={}));r.Query;const l=[{value:o.Team,label:"Team"},{value:o.User,label:"User"},{value:o.Viewer,label:"Everyone With Viewer Role"},{value:o.Editor,label:"Everyone With Editor Role"}],d=[{value:s.View,label:i.View,description:"Can view dashboards."},{value:s.Edit,label:i.Edit,description:"Can add, edit and delete dashboards."},{value:s.Admin,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}];let c;!function(e){e[e.Member=0]="Member",e[e.Admin=4]="Admin"}(c||(c={}));const u=[{value:c.Member,label:"Member",description:"Is team member"},{value:c.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},21169:(e,t,n)=>{"use strict";n.d(t,{Ai:()=>i,Dn:()=>j,Eb:()=>x,GL:()=>l,GT:()=>p,Im:()=>f,Jd:()=>C,OW:()=>S,QI:()=>b,Qt:()=>v,RB:()=>T,VJ:()=>w,Wj:()=>u,Xw:()=>c,Yr:()=>O,_B:()=>h,_z:()=>g,le:()=>y,nq:()=>r,p8:()=>m,pO:()=>d,xF:()=>I,xt:()=>o,z:()=>k});var a=n(43215);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,a.eventFactory)("ds-request-response"),(0,a.eventFactory)("ds-request-error");const i=(0,a.eventFactory)("toggle-sidemenu-hidden"),r=(0,a.eventFactory)("template-variable-value-updated"),o=(0,a.eventFactory)("graph-click"),l=(0,a.eventFactory)("threshold-changed");class d extends a.BusEventBase{}s(d,"type","panel-queries-changed");class c extends a.BusEventBase{}s(c,"type","panel-transformations-changed");class u extends a.BusEventBase{}s(u,"type","panels-options-changed");class h extends a.BusEventBase{}s(h,"type","dashboard-panels-changed");class p extends a.BusEventBase{}s(p,"type","panel-directive-ready");class g extends a.BusEventBase{}s(g,"type","render");class m extends a.BusEventWithPayload{}let f;s(m,"type","zoom-out"),function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(f||(f={}));class v extends a.BusEventWithPayload{}s(v,"type","shift-time");class b extends a.BusEventBase{}s(b,"type","absolute-time");class x extends a.BusEventWithPayload{}s(x,"type","remove-panel");class y extends a.BusEventWithPayload{}s(y,"type","show-modal");class w extends a.BusEventWithPayload{}s(w,"type","show-confirm-modal");class j extends a.BusEventWithPayload{}s(j,"type","show-react-modal");class S extends a.BusEventBase{}s(S,"type","hide-modal");class C extends a.BusEventBase{}s(C,"type","dashboard-saved");class k extends a.BusEventWithPayload{}s(k,"type","annotation-query-started");class T extends a.BusEventWithPayload{}s(T,"type","annotation-query-finished");class I extends a.BusEventWithPayload{}s(I,"type","panel-edit-started");class O extends a.BusEventWithPayload{}s(O,"type","panel-edit-finished")},24994:(e,t,n)=>{"use strict";let a;n.d(t,{K:()=>a,f:()=>s}),function(e){e.left="left",e.right="right"}(a||(a={}));const s=["lines","bars","points","stacked_lines","stacked_bars"]},47570:(e,t,n)=>{"use strict";let a,s,i;n.d(t,{bW:()=>v,F1:()=>l,bd:()=>d,RW:()=>b,bG:()=>s,vq:()=>a,f0:()=>u.f,Kd:()=>u.K,UX:()=>i,B5:()=>r.B5,bf:()=>r.bf,Wc:()=>o,hw:()=>r.hw,hg:()=>f,eL:()=>r.eL,Bi:()=>c,I0:()=>g,v9:()=>m}),function(e){e.Home="home-dashboard",e.New="new-dashboard",e.Normal="normal-dashboard",e.Path="path-dashboard",e.Scripted="scripted-dashboard",e.Public="public-dashboard"}(a||(a={})),function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Services="Services",e.Failed="Failed",e.Completed="Completed"}(s||(s={})),function(e){e.Off="off",e.TV="tv",e.Full="full"}(i||(i={}));var r=n(59834);let o,l,d;!function(e){e.All="All",e.WithExpiredTokens="WithExpiredTokens",e.Disabled="Disabled"}(o||(o={})),function(e){e.Success="success",e.Warning="warning",e.Error="error",e.Info="info"}(l||(l={})),function(e){e[e.Success=3e3]="Success",e[e.Warning=5e3]="Warning",e[e.Error=7e3]="Error"}(d||(d={}));const c={[l.Success]:d.Success,[l.Warning]:d.Warning,[l.Error]:d.Error,[l.Info]:d.Success};var u=n(24994),h=n(35140),p=n(18745);const g=()=>(0,p.useDispatch)(),m=p.useSelector,f=(e,t,n)=>(0,h.hg)(e,t,n);let v;!function(e){e.UsersRead="users:read",e.UsersWrite="users:write",e.UsersAuthTokenList="users.authtoken:read",e.UsersAuthTokenUpdate="users.authtoken:write",e.UsersPasswordUpdate="users.password:write",e.UsersDelete="users:delete",e.UsersCreate="users:create",e.UsersEnable="users:enable",e.UsersDisable="users:disable",e.UsersPermissionsUpdate="users.permissions:write",e.UsersLogout="users:logout",e.UsersQuotasList="users.quotas:read",e.UsersQuotasUpdate="users.quotas:write",e.ServiceAccountsRead="serviceaccounts:read",e.ServiceAccountsCreate="serviceaccounts:create",e.ServiceAccountsWrite="serviceaccounts:write",e.ServiceAccountsDelete="serviceaccounts:delete",e.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",e.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",e.OrgsRead="orgs:read",e.OrgsPreferencesRead="orgs.preferences:read",e.OrgsWrite="orgs:write",e.OrgsPreferencesWrite="orgs.preferences:write",e.OrgsCreate="orgs:create",e.OrgsDelete="orgs:delete",e.OrgUsersRead="org.users:read",e.OrgUsersAdd="org.users:add",e.OrgUsersRemove="org.users:remove",e.OrgUsersWrite="org.users:write",e.LDAPUsersRead="ldap.user:read",e.LDAPUsersSync="ldap.user:sync",e.LDAPStatusRead="ldap.status:read",e.DataSourcesExplore="datasources:explore",e.DataSourcesRead="datasources:read",e.DataSourcesCreate="datasources:create",e.DataSourcesWrite="datasources:write",e.DataSourcesDelete="datasources:delete",e.DataSourcesPermissionsRead="datasources.permissions:read",e.DataSourcesCachingRead="datasources.caching:read",e.DataSourcesInsightsRead="datasources.insights:read",e.ActionServerStatsRead="server.stats:read",e.ActionTeamsCreate="teams:create",e.ActionTeamsDelete="teams:delete",e.ActionTeamsRead="teams:read",e.ActionTeamsWrite="teams:write",e.ActionTeamsPermissionsRead="teams.permissions:read",e.ActionTeamsPermissionsWrite="teams.permissions:write",e.ActionRolesList="roles:read",e.ActionBuiltinRolesList="roles.builtin:list",e.ActionTeamsRolesList="teams.roles:read",e.ActionTeamsRolesAdd="teams.roles:add",e.ActionTeamsRolesRemove="teams.roles:remove",e.ActionUserRolesList="users.roles:read",e.ActionUserRolesAdd="users.roles:add",e.ActionUserRolesRemove="users.roles:remove",e.DashboardsRead="dashboards:read",e.DashboardsWrite="dashboards:write",e.DashboardsDelete="dashboards:delete",e.DashboardsCreate="dashboards:create",e.DashboardsPermissionsRead="dashboards.permissions:read",e.DashboardsPermissionsWrite="dashboards.permissions:write",e.FoldersRead="folders:read",e.FoldersWrite="folders:write",e.FoldersDelete="folders:delete",e.FoldersCreate="folders:create",e.FoldersPermissionsRead="folders.permissions:read",e.FoldersPermissionsWrite="folders.permissions:write",e.AlertingRuleCreate="alert.rules:create",e.AlertingRuleRead="alert.rules:read",e.AlertingRuleUpdate="alert.rules:write",e.AlertingRuleDelete="alert.rules:delete",e.AlertingInstanceCreate="alert.instances:create",e.AlertingInstanceUpdate="alert.instances:write",e.AlertingInstanceRead="alert.instances:read",e.AlertingNotificationsRead="alert.notifications:read",e.AlertingNotificationsWrite="alert.notifications:write",e.AlertingRuleExternalWrite="alert.rules.external:write",e.AlertingRuleExternalRead="alert.rules.external:read",e.AlertingInstancesExternalWrite="alert.instances.external:write",e.AlertingInstancesExternalRead="alert.instances.external:read",e.AlertingNotificationsExternalWrite="alert.notifications.external:write",e.AlertingNotificationsExternalRead="alert.notifications.external:read",e.ActionAPIKeysRead="apikeys:read",e.ActionAPIKeysCreate="apikeys:create",e.ActionAPIKeysDelete="apikeys:delete"}(v||(v={}));var b=n(21169)},8554:(e,t,n)=>{"use strict";let a;n.d(t,{y:()=>a}),function(e){e.LineChart="Line chart",e.LineChartSmooth="Line chart smooth",e.LineChartGradientColorScheme="Line chart with gradient color scheme",e.AreaChart="Area chart",e.AreaChartStacked="Area chart stacked",e.AreaChartStackedPercent="Area chart 100% stacked",e.BarChart="Bar chart",e.BarChartGradientColorScheme="Bar chart with gradient color scheme",e.BarChartStacked="Bar chart stacked",e.BarChartStackedPercent="Bar chart 100% stacked",e.BarChartHorizontal="Bar chart horizontal",e.BarChartHorizontalStacked="Bar chart horizontal stacked",e.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",e.Candlestick="Candlestick",e.PieChart="Pie chart",e.PieChartDonut="Pie chart donut",e.Stat="Stat",e.StatColoredBackground="Stat colored background",e.Gauge="Gauge",e.GaugeNoThresholds="Gauge no thresholds",e.BarGaugeBasic="Bar gauge basic",e.BarGaugeLCD="Bar gauge LCD",e.Table="Table",e.StateTimeline="State timeline",e.StatusHistory="Status history",e.TextPanel="Text",e.DashboardList="Dashboard list",e.Logs="Logs"}(a||(a={}))},51542:(e,t,n)=>{"use strict";let a,s,i,r,o;function l(e){if(function(e){return null!=e&&!Object.values(a).includes(e)}(e)){return e.split(" ")[0]}return e}n.d(t,{ED:()=>l,T8:()=>r,bj:()=>s,g0:()=>o,pz:()=>i,x_:()=>a}),function(e){e.Firing="firing",e.Inactive="inactive",e.Pending="pending"}(a||(a={})),function(e){e.Normal="Normal",e.Alerting="Alerting",e.Pending="Pending",e.NoData="NoData",e.Error="Error"}(s||(s={})),function(e){e.Alerting="alerting",e.Recording="recording"}(i||(i={})),function(e){e.Lotex="Lotex",e.Mimir="Mimir",e.Prometheus="Prometheus"}(r||(r={})),function(e){e.Alerting="Alerting",e.NoData="NoData",e.KeepLastState="KeepLastState",e.OK="OK",e.Error="Error"}(o||(o={}))},34572:e=>{e.exports={messages:{"common.locale.default":"Default","common.locale.en":"English","common.locale.es":"Spanish","common.locale.fr":"French","common.save":"Save","dashboard.inspect-data.data-options":"Data options","dashboard.inspect-data.dataframe-aria-label":"Select dataframe","dashboard.inspect-data.dataframe-label":"Show data frame","dashboard.inspect-data.download-csv":"Download CSV","dashboard.inspect-data.download-excel-description":"Adds header to CSV for use with Excel","dashboard.inspect-data.download-excel-label":"Download for Excel","dashboard.inspect-data.download-logs":"Download logs","dashboard.inspect-data.download-service":"Download service graph","dashboard.inspect-data.download-traces":"Download traces","dashboard.inspect-data.excel-header":"Excel header","dashboard.inspect-data.formatted":"Formatted data","dashboard.inspect-data.formatted-data-description":"Table data is formatted with options defined in the Field and Override tabs.","dashboard.inspect-data.formatted-data-label":"Formatted data","dashboard.inspect-data.panel-transforms":"Panel transforms","dashboard.inspect-data.series-to-columns":"Series joined by time","dashboard.inspect-data.transformation":"Series joined by time","dashboard.inspect-data.transformations-description":"Table data is displayed with transformations defined in the panel Transform tab.","dashboard.inspect-data.transformations-label":"Apply panel transformations","dashboard.inspect-json.dataframe-description":"JSON formatted DataFrames","dashboard.inspect-json.dataframe-label":"DataFrame JSON","dashboard.inspect-json.panel-data-description":"The raw model passed to the panel visualization","dashboard.inspect-json.panel-data-label":"Panel data","dashboard.inspect-json.panel-json-description":"The model saved in the dashboard JSON that configures how everything works.","dashboard.inspect-json.panel-json-label":"Panel JSON","dashboard.inspect-json.select-source":"Select source","dashboard.inspect-json.unknown":["Unknown Object: ",["show"]],"dashboard.inspect-meta.no-inspector":"No Metadata Inspector","dashboard.inspect-stats.data-title":"Data source stats","dashboard.inspect-stats.processing-time":"Data processing time","dashboard.inspect-stats.queries":"Number of queries","dashboard.inspect-stats.request-time":"Total request time","dashboard.inspect-stats.rows":"Total number rows","dashboard.inspect-stats.table-title":"Stats","dashboard.inspect.actions-tab":"Actions","dashboard.inspect.data-tab":"Data","dashboard.inspect.error-tab":"Error","dashboard.inspect.json-tab":"JSON","dashboard.inspect.meta-tab":"Meta Data","dashboard.inspect.query-tab":"Query","dashboard.inspect.stats-tab":"Stats","dashboard.inspect.subtitle":[["queryCount"]," queries with total query time of ",["formatted"]],"dashboard.inspect.title":["Inspect: ",["panelTitle"]],"dashboard.refresh-picker.off-arialabel":"Turn off auto refresh","dashboard.refresh-picker.off-description":"Auto refresh turned off. Choose refresh time interval","dashboard.refresh-picker.off-label":"Off","dashboard.refresh-picker.on-description":["Choose refresh time interval with current interval ",["durationAriaLabel"]," selected"],"dashboard.toolbar.add-panel":"Add panel","dashboard.toolbar.comments-show":"Show dashboard comments","dashboard.toolbar.mark-favorite":"Mark as favorite","dashboard.toolbar.open-original":"Open original dashboard","dashboard.toolbar.playlist-next":"Go to next dashboard","dashboard.toolbar.playlist-previous":"Go to previous dashboard","dashboard.toolbar.playlist-stop":"Stop playlist","dashboard.toolbar.refresh":"Refresh dashboard","dashboard.toolbar.save":"Save dashboard","dashboard.toolbar.settings":"Dashboard settings","dashboard.toolbar.share":"Share dashboard or panel","dashboard.toolbar.tv-button":"Cycle view mode","dashboard.toolbar.unmark-favorite":"Unmark as favorite","nav.alerting":"Alerting","nav.alerting-admin":"Admin","nav.alerting-am-routes":"Notification policies","nav.alerting-channels":"Notification channels","nav.alerting-groups":"Groups","nav.alerting-legacy":"Alerting (legacy)","nav.alerting-list":"Alert rules","nav.alerting-receivers":"Contact points","nav.alerting-silences":"Silences","nav.api-keys":"API keys","nav.config":"Configuration","nav.create":"Create","nav.create-alert":"New alert rule","nav.create-dashboard":"Dashboard","nav.create-folder":"Folder","nav.create-import":"Import","nav.dashboards":"Dashboards","nav.datasources":"Data sources","nav.explore":"Explore","nav.help":"Help","nav.home":"Home","nav.library-panels":"Library panels","nav.live":"Event streaming","nav.live-cloud":"Cloud","nav.live-pipeline":"Pipeline","nav.live-status":"Status","nav.manage-dashboards":"Browse","nav.new-dashboard":"New dashboard","nav.new-folder":"New folder","nav.org-settings":"Preferences","nav.playlists":"Playlists","nav.plugins":"Plugins","nav.profile/password":"Change password","nav.profile/settings":"Preferences","nav.service-accounts":"Service accounts","nav.sign-out":"Sign out","nav.snapshots":"Snapshots","nav.starred":"Starred","nav.starred-empty":"Your starred dashboards will appear here","nav.teams":"Teams","nav.users":"Users","navigation.kiosk.tv-alert":"Press ESC to exit Kiosk mode","panel.header-menu.inspect":"Inspect","panel.header-menu.inspect-data":"Data","panel.header-menu.inspect-json":"Panel JSON","panel.header-menu.more":"More...","panel.header-menu.more-toggle":"Toggle legend","panel.header-menu.share":"Share","panel.header-menu.view":"View","share-modal.export.cancel-button":"Cancel","share-modal.export.info-text":"Export this dashboard.","share-modal.export.save-button":"Save to file","share-modal.export.share-default-label":"Export with default values removed","share-modal.export.share-externally-label":"Export for sharing externally","share-modal.export.view-button":"View JSON","share-modal.link.copy-link-button":"Copy","share-modal.link.info-text":"Create a direct link to this dashboard or panel, customized with the options below.","share-modal.link.link-url":"Link URL","share-modal.link.render-alert":"Image renderer plugin not installed","share-modal.link.render-instructions":"To render a panel image, you must install theÂ <0>Grafana image renderer plugin</0>. Please contact your Grafana administrator to install the plugin.","share-modal.link.rendered-image":"Direct link rendered image","share-modal.link.save-alert":"Dashboard is not saved","share-modal.link.save-dashboard":"To render a panel image, you must save the dashboard first.","share-modal.link.shorten-url":"Shorten URL","share-modal.link.theme":"Theme","share-modal.link.theme-current":"Current","share-modal.link.theme-dark":"Dark","share-modal.link.theme-light":"Light","share-modal.link.time-range-description":"Transforms the current relative time range to an absolute time range","share-modal.link.time-range-label":"Lock time range","share-modal.snapshot.cancel-button":"Cancel","share-modal.snapshot.copy-link-button":"Copy","share-modal.snapshot.delete-button":"Delete snapshot.","share-modal.snapshot.deleted-message":"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.","share-modal.snapshot.expire":"Expire","share-modal.snapshot.expire-day":"1 Day","share-modal.snapshot.expire-hour":"1 Hour","share-modal.snapshot.expire-never":"Never","share-modal.snapshot.expire-week":"7 Days","share-modal.snapshot.info-text-1":"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.","share-modal.snapshot.info-text-2":"Keep in mind, your snapshot <0>can be viewed by anyone</0> that has the link and can access the URL. Share wisely.","share-modal.snapshot.local-button":"Local Snapshot","share-modal.snapshot.mistake-message":"Did you make a mistake?","share-modal.snapshot.name":"Snapshot name","share-modal.snapshot.timeout":"Timeout (seconds)","share-modal.snapshot.timeout-description":"You might need to configure the timeout value if it takes a long time to collect your dashboard\nmetrics.","shared-dashboard.fields.timezone-label":"Timezone","shared-preferences.fields.home-dashboard-label":"Home Dashboard","shared-preferences.fields.home-dashboard-placeholder":"Choose default dashboard","shared-preferences.fields.home-dashboard-tooltip":"Not finding the dashboard you want? Star it first, then it should appear in this select box.","shared-preferences.fields.locale-label":"Language","shared-preferences.fields.locale-placeholder":"Choose language","shared-preferences.fields.theme-label":"UI Theme","shared-preferences.fields.week-start-label":"Week start","shared-preferences.theme.dark-label":"Dark","shared-preferences.theme.default-label":"Default","shared-preferences.theme.light-label":"Light","shared-preferences.title":"Preferences","user-orgs.current-org-button":"Current","user-orgs.name-column":"Name","user-orgs.role-column":"Role","user-orgs.select-org-button":"Select organisation","user-orgs.title":"Organizations","user-profile.fields.email-error":"Email is required","user-profile.fields.email-label":"Email","user-profile.fields.name-error":"Name is required","user-profile.fields.name-label":"Name","user-profile.fields.username-label":"Username","user-profile.title":"Edit profile","user-session.browser-column":"Browser & OS","user-session.created-at-column":"Logged on","user-session.ip-column":"IP address","user-session.revoke":"Revoke user session","user-session.seen-at-column":"Last seen","user-sessions.loading":"Loading sessions..."}}},26189:()=>{jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function n(n){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function a(n){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var a=e.offset();t.x=Math.max(0,Math.min(n.pageX-a.left,e.width())),t.y=Math.max(0,Math.min(n.pageY-a.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(n){if(n){var a=e.p2c(n);t.x=Math.max(0,Math.min(a.left,e.width())),t.y=Math.max(0,Math.min(a.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(n){n&&e.setCrosshair(n),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(n),t.mousemove(a))})),e.hooks.drawOverlay.push((function(e,n){var a=e.getOptions().crosshair;if(a.mode){var s=e.getPlotOffset();if(n.save(),n.translate(s.left,s.top),-1!=t.x){var i=e.getOptions().crosshair.lineWidth%2?.5:0;if(n.strokeStyle=a.color,n.lineWidth=a.lineWidth,n.lineJoin="round",n.beginPath(),-1!=a.mode.indexOf("x")){var r=Math.floor(t.x)+i;n.moveTo(r,0),n.lineTo(r,e.height())}if(-1!=a.mode.indexOf("y")){var o=Math.floor(t.y)+i;n.moveTo(0,o),n.lineTo(e.width(),o)}n.stroke()}n.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",n),t.unbind("mousemove",a)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},47825:()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,n){t.dashes.show&&e.hooks.draw.push((function(e,a){var s=e.getPlotOffset(),i=t.xaxis,r=t.yaxis;function o(e,s){var o,l,d=n.points,c=n.pointsize,u=null,h=null,p=0,g=!0;t.dashes.dashLength[0]?(o=t.dashes.dashLength[0],l=t.dashes.dashLength[1]?t.dashes.dashLength[1]:o):l=o=t.dashes.dashLength,a.beginPath();for(var m=c;m<d.length;m+=c){var f=d[m-c],v=d[m-c+1],b=d[m],x=d[m+1];if(null!=f&&null!=b){if(v<=x&&v<r.min){if(x<r.min)continue;f=(r.min-v)/(x-v)*(b-f)+f,v=r.min}else if(x<=v&&x<r.min){if(v<r.min)continue;b=(r.min-v)/(x-v)*(b-f)+f,x=r.min}if(v>=x&&v>r.max){if(x>r.max)continue;f=(r.max-v)/(x-v)*(b-f)+f,v=r.max}else if(x>=v&&x>r.max){if(v>r.max)continue;b=(r.max-v)/(x-v)*(b-f)+f,x=r.max}if(f<=b&&f<i.min){if(b<i.min)continue;v=(i.min-f)/(b-f)*(x-v)+v,f=i.min}else if(b<=f&&b<i.min){if(f<i.min)continue;x=(i.min-f)/(b-f)*(x-v)+v,b=i.min}if(f>=b&&f>i.max){if(b>i.max)continue;v=(i.max-f)/(b-f)*(x-v)+v,f=i.max}else if(b>=f&&b>i.max){if(f>i.max)continue;x=(i.max-f)/(b-f)*(x-v)+v,b=i.max}f==u&&v==h||a.moveTo(i.p2c(f)+e,r.p2c(v)+s);var y,w=i.p2c(f)+e,j=r.p2c(v)+s,S=i.p2c(b)+e,C=r.p2c(x)+s;do{0==(y=k(p>0?p:g?o:l)).deltaX&&0==y.deltaY||(g?a.lineTo(w+y.deltaX,j+y.deltaY):a.moveTo(w+y.deltaX,j+y.deltaY)),g=!g,p=y.remainder,w+=y.deltaX,j+=y.deltaY}while(y.distance>0);u=b,h=x}function k(e){var t=Math.sqrt(Math.pow(S-w,2)+Math.pow(C-j,2));if(t<=e)return{deltaX:S-w,deltaY:C-j,distance:t,remainder:e-t};var n=C>j?1:-1;return{deltaX:(S>w?1:-1)*Math.sqrt(Math.pow(e,2)/(1+Math.pow((C-j)/(S-w),2))),deltaY:n*Math.sqrt(Math.pow(e,2)-Math.pow(e,2)/(1+Math.pow((C-j)/(S-w),2))),distance:e,remainder:0}}}a.stroke()}a.save(),a.translate(s.left,s.top),a.lineJoin="round";var l=t.dashes.lineWidth,d=t.shadowSize;if(l>0&&d>0){a.lineWidth=d,a.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;o(Math.sin(c)*(l/2+d/2),Math.cos(c)*(l/2+d/2)),a.lineWidth=d/2,o(Math.sin(c)*(l/2+d/4),Math.cos(c)*(l/2+d/4))}a.lineWidth=l,a.strokeStyle=t.color,l>0&&o(0,0),a.restore()}))}))},options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})},28844:()=>{!function(e){"use strict";e.plot.plugins.push({init:function(t){t.hooks.drawSeries.push((function(t,n,a){var s,i,r,o,l,d,c;function u(e,t){n.beginPath(),n.moveTo(a.xaxis.p2c(e)+d.left,a.yaxis.p2c(t)+d.top)}function h(e,t){console.assert(t>e,"expects the end index to be greater than the start index");var n,a,s=0===e||null===r[e-1]||null===l[e-1],d=!1;for(n=e;n<t;n++)if(null===r[n*i+1]||null===l[n*i+1])d=!1,s=!0;else if(r[n*i+1]===l[n*o+1])d=!0,s=!1;else{if(r[n*i+1]>l[n*o+1])return s?u(r[n*i],r[n*i+1]):d?u(r[(n-1)*i],r[(n-1)*i+1]):u((a=p(n))[0],a[1]),void m(n,t);s=!1,d=!1}}function p(e){var t,n,a,s,d,c,u,h,p,g,m,f,v,b,x,y;for(console.assert(e>0,"expects the second point in the series line segment"),t=1;t<l.length/o;t++)if(a=r[(e-1)*i],s=r[(e-1)*i+1],d=r[e*i],c=r[e*i+1],u=l[(t-1)*o],h=l[(t-1)*o+1],p=l[t*o],g=l[t*o+1],m=void 0,f=void 0,v=void 0,b=void 0,x=void 0,y=void 0,y=((v=p-u)*(s-h)-(b=g-h)*(a-u))/(-v*(f=c-s)+(m=d-a)*b),null!==(n=(x=(-f*(a-u)+m*(s-h))/(-v*f+m*b))>=0&&x<=1&&y>=0&&y<=1?[a+y*m,s+y*f]:null))return n;console.error("intersectionPoint() should only be called when an intersection happens")}function g(e,t){var a;for(console.assert(e>=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),a=e;a>=t;a--)n.lineTo(s.xaxis.p2c(l[a*o])+d.left,s.yaxis.p2c(l[a*o+1])+d.top);n.closePath(),n.fill()}function m(e,t){var s,c;for(console.assert(e<=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),s=e;s<t;s++){if(null===r[s*i+1]&&s>e)return g(s-1,e),void h(s,t);if(r[s*i+1]===l[s*o+1])return g(s,e),void h(s,t);if(r[s*i+1]<l[s*o+1])return c=p(s),n.lineTo(a.xaxis.p2c(c[0])+d.left,a.yaxis.p2c(c[1])+d.top),g(s,e),void h(s,t);n.lineTo(a.xaxis.p2c(r[s*i])+d.left,a.yaxis.p2c(r[s*i+1])+d.top)}g(t,e)}null!==a.fillBelowTo&&(s=function(e,t){var n;for(n=0;n<t.length;++n)if(t[n].id===e.fillBelowTo)return t[n];return null}(a,t.getData()),s&&(i=a.datapoints.pointsize,r=a.datapoints.points,o=s.datapoints.pointsize,l=s.datapoints.points,d=t.getPlotOffset(),function(){if(r.length/i!=l.length/o)return console.error("Refusing to graph inconsistent number of points"),!1;var e;for(e=0;e<r.length/i;e++)if(null!==r[e*i]&&null!==l[e*o]&&r[e*i]!==l[e*o])return console.error("Refusing to graph points without matching value"),!1;return!0}()&&((c=e.color.parse(a.color)).a=.4,c.normalize(),n.fillStyle=c.toString(),h(0,r.length/i))))}))},options:{series:{fillBelowTo:null}},name:"fillbelow",version:"0.1.0"})}(jQuery)},7540:()=>{!function(e){var t=function(){var t,i,r,o,l,d=function(e,a){t=a,i=e.getPlaceholder(),r=e.getOptions(),o=r.series.gauges,l=e.getData(),n(o.debug)};function c(e,t){"auto"===e.gauge.width&&(e.gauge.width=Math.max(5,t/8)),"auto"===e.label.margin&&(e.label.margin=Math.max(1,t/20)),"auto"===e.label.font.size&&(e.label.font.size=Math.max(5,t/8)),"auto"===e.value.margin&&(e.value.margin=Math.max(1,t/30)),"auto"===e.value.font.size&&(e.value.font.size=Math.max(5,t/9)),"auto"===e.threshold.width&&(e.threshold.width=Math.max(3,t/100)),"auto"===e.threshold.label.margin&&(e.threshold.label.margin=Math.max(3,t/40)),"auto"===e.threshold.label.font.size&&(e.threshold.label.font.size=Math.max(5,t/15))}function u(e,t,n){var a=e.gauge.startAngle+(e.gauge.endAngle-e.gauge.startAngle)*((n-e.gauge.min)/(e.gauge.max-e.gauge.min));return a<e.gauge.startAngle?a=e.gauge.startAngle:a>e.gauge.endAngle&&(a=e.gauge.endAngle),a}function h(e,n,a,i,r,o,l,d,c,u){r!==o&&(t.save(),s(t,e,n,a,i,r,o,l,d,c),u&&(s(t,e,n,a,i,r,o),t.clip(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=10,t.shadowColor="gray",s(t,e,n,a+1,i+2,r,o,l,1)),t.restore())}function p(e,t,n,s,i,r){g(n.cx+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.cos(a(r)),n.cy+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.sin(a(r)),"flotGaugeThresholdValue"+s,e.threshold.label.formatter?e.threshold.label.formatter(i):i,e.threshold.label,r)}function g(t,n,a,s,r,o){var l=e(i).find("#"+a),d=l.length;d||((l=e("<span></span>")).attr("id",a),l.attr("class","flot-temp-elem"),i.append(l)),l.css("position","absolute"),l.css("top",n+"px"),l.css("white-space","nowrap"),r.font.size&&l.css("font-size",r.font.size+"px"),r.font.family&&l.css("font-family",r.font.family),r.color&&l.css("color",r.color),r.background.color&&l.css("background-color",r.background.color),r.background.opacity&&l.css("opacity",r.background.opacity),l.text(s),l.css("left",t+"px"),l.css("left",parseInt(l.css("left"))-l.width()/2+"px"),!d&&o&&(l.css("top",parseInt(l.css("top"))-l.height()/2+"px"),l.css("transform","rotate("+(180*o+90)+"deg)"))}return d.prototype.calculateLayout=function(){var e=i.width(),t=i.height(),n=Math.min(l.length,o.layout.columns),s=Math.ceil(l.length/n),r=o.layout.margin,d=o.layout.hMargin,u=o.layout.vMargin,h=(e-2*r-d*(n-1))/n,p=(t-2*r-u*(s-1))/s;if(o.layout.square){var g=Math.min(h,p);h=g,p=g}c(o,h);var m=o.cell.margin,f=0,v=0;o.label.show&&(f=o.label.margin,v=o.label.font.size);var b=0,x=0;o.value.show&&(b=o.value.margin,x=o.value.font.size);var y=0;o.threshold.show&&(y=o.threshold.width);var w=0,j=0;o.threshold.label.show&&(w=o.threshold.label.margin,j=o.threshold.label.font.size);for(var S=h/2-m-y-2*w-j,C=o.gauge.startAngle,k=o.gauge.endAngle,T=(k-C)/100,I=-1,O=C;O<k;O+=T)I=Math.max(I,Math.sin(a(O)));var N=(p-2*m-2*f-v)/(1+(I=Math.max(I,Math.sin(a(k)))));N*I<b+x/2&&(N=p-2*m-2*f-v-b-x/2);var F=N-2*w-j-y,D=Math.min(S,F),P=o.gauge.width;P>=D&&(P=Math.max(3,D/3));var A=2*w+j+y+D;return{canvasWidth:e,canvasHeight:t,margin:r,hMargin:d,vMargin:u,columns:n,rows:s,cellWidth:h,cellHeight:p,cellMargin:m,labelMargin:f,labelFontSize:v,valueMargin:b,valueFontSize:x,width:P,radius:D,thresholdWidth:y,thresholdLabelMargin:w,thresholdLabelFontSize:j,gaugeOuterHeight:Math.max(A*(1+I),A+b+x/2)}},d.prototype.calculateAutoValues=c,d.prototype.calculateCellLayout=function(e,t,n){var a=function(e,t){return t%e}(t.columns,n),s=function(e,t){return Math.floor(t/e)}(t.columns,n),i=t.margin+(t.cellWidth+t.hMargin)*a,r=t.margin+(t.cellHeight+t.vMargin)*s,o=i+t.cellWidth/2,l=r+t.cellMargin+2*t.labelMargin+t.labelFontSize+t.thresholdWidth+t.thresholdLabelFontSize+2*t.thresholdLabelMargin+t.radius,d=t.cellHeight-2*t.cellMargin-2*t.labelMargin-t.labelFontSize-t.gaugeOuterHeight,c=0;return"middle"===e.cell.vAlign?c=d/2:"bottom"===e.cell.vAlign&&(c=d),l+=c,{col:a,row:s,x:i,y:r,offsetY:c,cellWidth:t.cellWidth,cellHeight:t.cellHeight,cellMargin:t.cellMargin,cx:o,cy:l}},d.prototype.drawBackground=function(e){o.frame.show&&(t.save(),t.strokeStyle=r.grid.borderColor,t.lineWidth=r.grid.borderWidth,t.strokeRect(0,0,e.canvasWidth,e.canvasHeight),r.grid.backgroundColor&&(t.fillStyle=r.grid.backgroundColor,t.fillRect(0,0,e.canvasWidth,e.canvasHeight)),t.restore())},d.prototype.drawCellBackground=function(e,n){t.save(),e.cell.border&&e.cell.border.show&&e.cell.border.color&&e.cell.border.width&&(t.strokeStyle=e.cell.border.color,t.lineWidth=e.cell.border.width,t.strokeRect(n.x,n.y,n.cellWidth,n.cellHeight)),e.cell.background&&e.cell.background.color&&(t.fillStyle=e.cell.background.color,t.fillRect(n.x,n.y,n.cellWidth,n.cellHeight)),t.restore()},d.prototype.drawGauge=function(e,t,n,s,i){var r=e.gauge.shadow.show?e.gauge.shadow.blur:0;h(n.cx,n.cy,t.radius,t.width,a(e.gauge.startAngle),a(e.gauge.endAngle),e.gauge.border.color,e.gauge.border.width,e.gauge.background.color,r);var o=function(e,t){for(var n,a=0;a<e.threshold.values.length;a++){var s=e.threshold.values[a];if(n=s.color,t<s.value)break}return n}(e,i),l=u(e,t,i);h(n.cx,n.cy,t.radius-1,t.width-2,a(e.gauge.startAngle),a(l),o,1,o,r)},d.prototype.drawThreshold=function(e,n,i){for(var r=e.gauge.startAngle,o=0;o<e.threshold.values.length;o++){var l=e.threshold.values[o];c1=l.color,a2=u(e,0,l.value),s(t,i.cx,i.cy,n.radius+n.thresholdWidth,n.thresholdWidth-2,a(r),a(a2),c1,1,c1),r=a2}},d.prototype.drawLable=function(e,t,n,a,s){g(n.cx,n.y+n.cellMargin+t.labelMargin+n.offsetY,"flotGaugeLabel"+a,e.label.formatter?e.label.formatter(s.label,s.data[0][1]):text,e.label)},d.prototype.drawValue=function(e,t,n,a,s){g(n.cx,n.cy-e.value.font.size/2,"flotGaugeValue"+a,e.value.formatter?e.value.formatter(s.label,s.data[0][1]):text,e.value)},d.prototype.drawThresholdValues=function(e,t,n,a){p(e,t,n,"Min"+a,e.gauge.min,e.gauge.startAngle),p(e,t,n,"Max"+a,e.gauge.max,e.gauge.endAngle);for(var s=0;s<e.threshold.values.length;s++){var i=e.threshold.values[s];if(i.value>e.gauge.min&&i.value<e.gauge.max){var r=u(e,0,i.value);p(e,t,n,a+"_"+s,i.value,r)}}},d}();function n(e){return"undefined"!=typeof Logger?new Logger(e):null}function a(e){return e*Math.PI}function s(e,t,n,a,s,i,r,o,l,d){if(i!==r){e.save(),e.beginPath(),e.arc(t,n,a,i,r,false),e.lineTo(t+(a-s)*Math.cos(r),n+(a-s)*Math.sin(r)),e.arc(t,n,a-s,r,i,!0),e.closePath(),l&&(e.lineWidth=l),o&&(e.strokeStyle=o,e.stroke()),d&&(e.fillStyle=d,e.fill()),e.restore()}}var i={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return e}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return parseInt(t)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(e){return e}},values:[]}}}};e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(e,t){n(t.series.gauges.debug);t.series.gauges.show&&(t.grid.show=!1,t.legend.show=!1),t.series.gauges.threshold.values.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))})),a.hooks.draw.push((function(a,s){var i=a.getOptions().series.gauges;n(i.debug);if(i.show){var r=a.getData();if(r&&r.length){var o=new t(a,s),l=o.calculateLayout();i.debug.layout,o.drawBackground(l);for(var d=0;d<r.length;d++){var c=r[d],u=e.extend({},i,c.gauges);c.gauges&&o.calculateAutoValues(u,l.cellWidth);var h=o.calculateCellLayout(u,l,d);o.drawCellBackground(u,h),u.debug.layout,u.label.show&&o.drawLable(u,l,h,d,c),o.drawGauge(u,l,h,c.label,c.data[0][1]),u.threshold.show&&o.drawThreshold(u,l,h),u.threshold.label.show&&o.drawThresholdValues(u,l,h,d),u.value.show&&o.drawValue(u,l,h,d,c)}}}}))},options:i,name:"gauge",version:"1.1.0"})}(jQuery)},89377:()=>{!function(e){e.color={},e.color.make=function(t,n,a,s){var i={};return i.r=t||0,i.g=n||0,i.b=a||0,i.a=null!=s?s:1,i.add=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]+=t;return i.normalize()},i.scale=function(e,t){for(var n=0;n<e.length;++n)i[e.charAt(n)]*=t;return i.normalize()},i.toString=function(){return i.a>=1?"rgb("+[i.r,i.g,i.b].join(",")+")":"rgba("+[i.r,i.g,i.b,i.a].join(",")+")"},i.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}return i.r=e(0,parseInt(i.r),255),i.g=e(0,parseInt(i.g),255),i.b=e(0,parseInt(i.b),255),i.a=e(0,i.a,1),i},i.clone=function(){return e.color.make(i.r,i.b,i.g,i.a)},i.normalize()},e.color.extract=function(t,n){var a;do{if(""!=(a=t.css(n).toLowerCase())&&"transparent"!=a)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==a&&(a="transparent"),e.color.parse(a)},e.color.parse=function(n){var a,s=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return s(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return s(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return s(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return s(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return s(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return s(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));var i=e.trim(n).toLowerCase();return"transparent"==i?s(255,255,255,0):s((a=t[i]||[0,0,0])[0],a[1],a[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function n(t,n){var a=n.children("."+t)[0];if(null==a&&((a=document.createElement("canvas")).className=t,e(a).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(n),!a.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");a=window.G_vmlCanvasManager.initElement(a)}this.element=a;var s=this.context=a.getContext("2d"),i=window.devicePixelRatio||1,r=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1;this.pixelRatio=i/r,this.resize(n.width(),n.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function a(t,a,s,i){var r=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,d=null,c=null,u=null,h=null,p=[],g=[],m={left:0,right:0,top:0,bottom:0},f=0,v=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function y(e,t){t=[x].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function w(t){r=function(t){for(var n=[],a=0;a<t.length;++a){var s=e.extend(!0,{},o.series);null!=t[a].data?(s.data=t[a].data,delete t[a].data,e.extend(!0,s,t[a]),t[a].data=s.data):s.data=t[a],n.push(s)}return n}(t),function(){var t,n=r.length,a=-1;for(t=0;t<r.length;++t){var s=r[t].color;null!=s&&(n--,"number"==typeof s&&s>a&&(a=s))}n<=a&&(n=a+1);var i,l=[],d=o.colors,c=d.length,u=0;for(t=0;t<n;t++)i=e.color.parse(d[t%c]||"#666"),t%c==0&&t&&(u=u>=0?u<.5?-u-.2:0:-u),l[t]=i.scale("rgb",1+u);var h,m=0;for(t=0;t<r.length;++t){if(null==(h=r[t]).color?(h.color=l[m].toString(),++m):"number"==typeof h.color&&(h.color=l[h.color].toString()),null==h.lines.show){var f,v=!0;for(f in h)if(h[f]&&h[f].show){v=!1;break}v&&(h.lines.show=!0)}null==h.lines.zero&&(h.lines.zero=!!h.lines.fill),h.xaxis=k(p,j(h,"x")),h.yaxis=k(g,j(h,"y"))}}(),function(){var t,n,a,s,i,o,l,d,c,u,h,p,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE;function v(e,t,n){t<e.datamin&&t!=-f&&(e.datamin=t),n>e.datamax&&n!=f&&(e.datamax=n)}for(e.each(S(),(function(e,t){t.datamin=g,t.datamax=m,t.used=!1})),t=0;t<r.length;++t)(i=r[t]).datapoints={points:[]},y(b.processRawData,[i,i.data,i.datapoints]);for(t=0;t<r.length;++t){if(h=(i=r[t]).data,!(p=i.datapoints.format)){if((p=[]).push({x:!0,number:!0,required:!0}),p.push({y:!0,number:!0,required:!0}),i.stack||i.bars.show||i.lines.show&&i.lines.fill){var x=!!(i.bars.show&&i.bars.zero||i.lines.show&&i.lines.zero);p.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),i.bars.horizontal&&(delete p[p.length-1].y,p[p.length-1].x=!0)}i.datapoints.format=p}if(null==i.datapoints.pointsize){i.datapoints.pointsize=p.length,l=i.datapoints.pointsize,o=i.datapoints.points;var w=i.lines.show&&i.lines.steps;for(i.xaxis.used=i.yaxis.used=!0,n=a=0;n<h.length;++n,a+=l){var j=null==(u=h[n]);if(!j)for(s=0;s<l;++s)d=u[s],(c=p[s])&&(c.number&&null!=d&&(d=+d,isNaN(d)?d=null:d==1/0?d=f:d==-1/0&&(d=-f)),null==d&&(c.required&&(j=!0),null!=c.defaultValue&&(d=c.defaultValue))),o[a+s]=d;if(j)for(s=0;s<l;++s)null!=(d=o[a+s])&&!1!==(c=p[s]).autoscale&&(c.x&&v(i.xaxis,d,d),c.y&&v(i.yaxis,d,d)),o[a+s]=null;if(w&&a>0&&(!j||null!=o[a-l])){for(s=0;s<l;++s)o[a+l+s]=o[a+s];o[a+1]=o[a-l+1]||0,j&&(o[a]=u[0]),a+=l}}}}for(t=0;t<r.length;++t){if(o=(i=r[t]).datapoints.points,l=i.datapoints.pointsize,"negative-Y"===i.transform)for(n=0;n<o.length;n+=l)null!=o[n]&&(d=o[n+1],o[n+1]=-d);y(b.processDatapoints,[i,i.datapoints])}for(t=0;t<r.length;++t){o=(i=r[t]).datapoints.points,l=i.datapoints.pointsize,p=i.datapoints.format;var C=g,k=g,T=m,I=m;for(n=0;n<o.length;n+=l)if(null!=o[n])for(s=0;s<l;++s)d=o[n+s],(c=p[s])&&!1!==c.autoscale&&d!=f&&d!=-f&&(c.x&&(d<C&&(C=d),d>T&&(T=d)),c.y&&(d<k&&(k=d),d>I&&(I=d)));if(i.bars.show){var O;switch(i.bars.align){case"left":O=0;break;case"right":O=-i.bars.barWidth;break;default:O=-i.bars.barWidth/2}i.bars.horizontal?(k+=O,I+=O+i.bars.barWidth):(C+=O,T+=O+i.bars.barWidth)}v(i.xaxis,C,T),v(i.yaxis,k,I)}e.each(S(),(function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==m&&(t.datamax=null)}))}()}function j(e,t){var n=e[t+"axis"];return"object"==typeof n&&(n=n.n),"number"!=typeof n&&(n=1),n}function S(){return e.grep(p.concat(g),(function(e){return e}))}function C(e){var t,n,a={};for(t=0;t<p.length;++t)(n=p[t])&&(a["x"+n.n]=n.c2p(e.left));for(t=0;t<g.length;++t)(n=g[t])&&(a["y"+n.n]=n.c2p(e.top));return void 0!==a.x1&&(a.x=a.x1),void 0!==a.y1&&(a.y=a.y1),a}function k(t,n){return t[n-1]||(t[n-1]={n,direction:t==p?"x":"y",options:e.extend(!0,{},t==p?o.xaxis:o.yaxis)}),t[n-1]}function T(){z&&clearTimeout(z),c.unbind("mousemove",_),c.unbind("mouseleave",U),c.unbind("click",H),e(document).unbind("touchend",W),y(b.shutdown,[c])}function I(e){for(var t=e.options,n=e.ticks||[],a=t.labelWidth||0,s=t.labelHeight||0,i=a||("x"==e.direction?Math.floor(l.width/(n.length||1)):null),r=e.direction+"Axis "+e.direction+e.n+"Axis",o="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+r,d=t.font||"flot-tick-label tickLabel",c=0;c<n.length;++c){var u=n[c];if(u.label){var h=l.getTextInfo(o,u.label,d,null,i);a=Math.max(a,h.width+1),s=Math.max(s,h.height)}}e.labelWidth=t.labelWidth||a,e.labelHeight=t.labelHeight||s}function O(t){var n=t.labelWidth,a=t.labelHeight,s=t.options.position,i="x"===t.direction,r=t.options.tickLength,d=o.grid.axisMargin,c=o.grid.labelMargin,u=o.grid.eventSectionHeight,h=!0,f=!0,v=!0,b=!1;e.each(i?p:g,(function(e,n){n&&(n.show||n.reserveSpace)&&(n===t?b=!0:n.options.position===s&&(b?f=!1:h=!1),b||(v=!1))})),f&&(d=0),null==r&&(r=v?"full":5),isNaN(+r)||(c+=+r),i?(a+=c,a+=u,"bottom"==s?(m.bottom+=a+d,t.box={top:l.height-m.bottom,height:a}):(t.box={top:m.top+d,height:a},m.top+=a+d)):(n+=c,"left"==s?(t.box={left:m.left+d,width:n},m.left+=n+d):(m.right+=n+d,t.box={left:l.width-m.right,width:n})),t.position=s,t.tickLength=r,t.box.padding=c,t.box.eventSectionPadding=u,t.innermost=h}function N(){var n=S(),a=o.grid.show;for(var s in m){var i=o.grid.margin||0;m[s]="number"==typeof i?i:i[s]||0}for(var s in y(b.processOffset,[m]),m)"object"==typeof o.grid.borderWidth?m[s]+=a?o.grid.borderWidth[s]:0:m[s]+=a?o.grid.borderWidth:0;if(e.each(n,(function(e,t){var n=t.options;t.show=null==n.show?t.used:n.show,t.reserveSpace=null==n.reserveSpace?t.show:n.reserveSpace,function(e){var t=e.options,n=+(null!=t.min?t.min:e.datamin),a=+(null!=t.max?t.max:e.datamax),s=a-n;if(0==s){var i=.25,r=Math.abs(0==a?1:a*i);null==t.min&&(n-=r),null!=t.max&&null==t.min||(a+=r)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(n-=s*o)<0&&null!=e.datamin&&e.datamin>=0&&(n=0),null==t.max&&(a+=s*o)>0&&null!=e.datamax&&e.datamax<=0&&(a=0))}e.min=n,e.max=a}(t)})),y(b.processRange,[]),a){for(var d=e.grep(n,(function(e){return e.show||e.reserveSpace})),c=!1,u=0;u<2&&(e.each(d,(function(e,t){F(t),D(t),c=P(t,t.ticks)||c,I(t)})),c&&b.processRange.length>0);u++)y(b.processRange,[]),c=!1;for(u=d.length-1;u>=0;--u)O(d[u]);!function(){var t,n=o.grid.minBorderMargin;if(null==n)for(n=0,t=0;t<r.length;++t)n=Math.max(n,2*(r[t].points.radius+r[t].points.lineWidth/2));var a={left:n,right:n,top:n,bottom:n};e.each(S(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(a.left=Math.max(a.left,t.labelWidth/2),a.right=Math.max(a.right,t.labelWidth/2)):(a.bottom=Math.max(a.bottom,t.labelHeight/2),a.top=Math.max(a.top,t.labelHeight/2)))})),m.left=Math.ceil(Math.max(a.left,m.left)),m.right=Math.ceil(Math.max(a.right,m.right)),m.top=Math.ceil(Math.max(a.top,m.top)),m.bottom=Math.ceil(Math.max(a.bottom,m.bottom))}(),e.each(d,(function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left-e.labelWidth/2,e.box.width=l.width-m.left-m.right+e.labelWidth):(e.box.top=m.top-e.labelHeight/2,e.box.height=l.height-m.bottom-m.top+e.labelHeight)}(t)}))}f=l.width-m.left-m.right,v=l.height-m.bottom-m.top,e.each(n,(function(e,t){!function(e){function t(e){return e}var n,a,s=e.options.transform||t,i=e.options.inverseTransform;"x"==e.direction?(n=e.scale=f/Math.abs(s(e.max)-s(e.min)),a=Math.min(s(e.max),s(e.min))):(n=-(n=e.scale=v/Math.abs(s(e.max)-s(e.min))),a=Math.max(s(e.max),s(e.min))),e.p2c=s==t?function(e){return(e-a)*n}:function(e){return(s(e)-a)*n},e.c2p=i?function(e){return i(a+e/n)}:function(e){return a+e/n}}(t)})),a&&e.each(S(),(function(e,t){var n,a,s,i,r,o=t.box,d=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+d,u=t.options.font||"flot-tick-label tickLabel";if(l.removeText(c),t.show&&0!=t.ticks.length)for(var h=0;h<t.ticks.length;++h)!(n=t.ticks[h]).label||n.v<t.min||n.v>t.max||("x"==t.direction?(i="center",a=m.left+t.p2c(n.v),"bottom"==t.position?s=o.top+o.padding+o.eventSectionPadding:(s=o.top+o.height-o.padding,r="bottom")):(r="middle",s=m.top+t.p2c(n.v),"left"==t.position?(a=o.left+o.width-o.padding,i="right"):a=o.left+o.padding),l.addText(c,a,s,n.label,u,null,null,i,r))})),function(){null!=o.legend.container?e.find(o.legend.container).html(""):t.find(".legend").remove();if(!o.legend.show)return;for(var n,a,s=[],i=[],l=!1,d=o.legend.labelFormatter,c=0;c<r.length;++c)(n=r[c]).label&&(a=d?d(n.label,n):n.label)&&i.push({label:a,color:n.color});if(o.legend.sorted)if(e.isFunction(o.legend.sorted))i.sort(o.legend.sorted);else if("reverse"==o.legend.sorted)i.reverse();else{var u="descending"!=o.legend.sorted;i.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=u?1:-1}))}for(c=0;c<i.length;++c){var h=i[c];c%o.legend.noColumns==0&&(l&&s.push("</tr>"),s.push("<tr>"),l=!0),s.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h.label+"</td>")}l&&s.push("</tr>");if(0==s.length)return;var p='<table style="font-size:smaller;color:'+o.grid.color+'">'+s.join("")+"</table>";if(null!=o.legend.container)e(o.legend.container).html(p);else{var g="",f=o.legend.position,v=o.legend.margin;null==v[0]&&(v=[v,v]),"n"==f.charAt(0)?g+="top:"+(v[1]+m.top)+"px;":"s"==f.charAt(0)&&(g+="bottom:"+(v[1]+m.bottom)+"px;"),"e"==f.charAt(1)?g+="right:"+(v[0]+m.right)+"px;":"w"==f.charAt(1)&&(g+="left:"+(v[0]+m.left)+"px;");var b=e('<div class="legend">'+p.replace('style="','style="position:absolute;'+g+";")+"</div>").appendTo(t);if(0!=o.legend.backgroundOpacity){var x=o.legend.backgroundColor;null==x&&((x=(x=o.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(b,"background-color")).a=1,x=x.toString());var y=b.children();e('<div style="position:absolute;width:'+y.width()+"px;height:"+y.height()+"px;"+g+"background-color:"+x+';"> </div>').prependTo(b).css("opacity",o.legend.backgroundOpacity)}}}()}function F(t){var n,a=t.options;n="number"==typeof a.ticks&&a.ticks>0?a.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var s=(t.max-t.min)/n,i=-Math.floor(Math.log(s)/Math.LN10),r=a.tickDecimals;null!=r&&i>r&&(i=r);var o,d=Math.pow(10,-i),c=s/d;if(c<1.5?o=1:c<3?(o=2,c>2.25&&(null==r||i+1<=r)&&(o=2.5,++i)):o=c<7.5?5:10,o*=d,null!=a.minTickSize&&o<a.minTickSize&&(o=a.minTickSize),t.delta=s,t.tickDecimals=Math.max(0,null!=r?r:i),t.tickSize=a.tickSize||o,"time"==a.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,n,a,s=[],i=(n=e.min,(a=e.tickSize)*Math.floor(n/a)),r=0,o=Number.NaN;do{t=o,o=i+r*e.tickSize,s.push(o),++r}while(o<e.max&&o!=t);return s},t.tickFormatter=function(e,t){var n=t.tickDecimals?Math.pow(10,t.tickDecimals):1,a=""+Math.round(e*n)/n;if(null!=t.tickDecimals){var s=a.indexOf("."),i=-1==s?0:a.length-s-1;if(i<t.tickDecimals)return(i?a:a+".")+(""+n).substr(1,t.tickDecimals-i)}return a}),e.isFunction(a.tickFormatter)&&(t.tickFormatter=function(e,t){return""+a.tickFormatter(e,t)}),null!=a.alignTicksWithAxis){var u=("x"==t.direction?p:g)[a.alignTicksWithAxis-1];if(u&&u.used&&u!=t){var h=t.tickGenerator(t);if(h.length>0&&(null==a.min&&(t.min=Math.min(t.min,h[0])),null==a.max&&h.length>1&&(t.max=Math.max(t.max,h[h.length-1]))),t.tickGenerator=function(e){var t,n,a=[];for(n=0;n<u.ticks.length;++n)t=(u.ticks[n].v-u.min)/(u.max-u.min),t=e.min+t*(e.max-e.min),a.push(t);return a},!t.mode&&null==a.tickDecimals){var m=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),f=t.tickGenerator(t);f.length>1&&/\..*0$/.test((f[1]-f[0]).toFixed(m))||(t.tickDecimals=m)}}}}function D(t){var n,a,s=t.options.ticks,i=[];for(null==s||"number"==typeof s&&s>0?i=t.tickGenerator(t):s&&(i=e.isFunction(s)?s(t):s),t.ticks=[],n=0;n<i.length;++n){var r=null,o=i[n];"object"==typeof o?(a=+o[0],o.length>1&&(r=o[1])):a=+o,null==r&&(r=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:r})}}function P(e,t){var n=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),n=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),n=!0)),n}function A(){l.clear(),y(b.drawBackground,[u]);var e=o.grid;e.show&&e.backgroundColor&&(u.save(),u.translate(m.left,m.top),u.fillStyle=ee(o.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,f,v),u.restore()),e.show&&!e.aboveData&&R();for(var t=0;t<r.length;++t)y(b.drawSeries,[u,r[t]]),$(r[t]);y(b.draw,[u]),e.show&&e.aboveData&&R(),l.render(),Z()}function M(e,t){for(var n,a,s,i,r=S(),o=0;o<r.length;++o)if((n=r[o]).direction==t&&(e[i=t+n.n+"axis"]||1!=n.n||(i=t+"axis"),e[i])){a=e[i].from,s=e[i].to;break}if(e[i]||(n="x"==t?p[0]:g[0],a=e[t+"1"],s=e[t+"2"]),null!=a&&null!=s&&a>s){var l=a;a=s,s=l}return{from:a,to:s,axis:n}}function R(){var t,n,a,s;u.save(),u.translate(m.left,m.top);var i=o.grid.markings;if(i)for(e.isFunction(i)&&((n=x.getAxes()).xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)),t=0;t<i.length;++t){var r=i[t],l=M(r,"x"),d=M(r,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==d.from&&(d.from=d.axis.min),null==d.to&&(d.to=d.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||d.to<d.axis.min||d.from>d.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max);var c=l.from===l.to,h=d.from===d.to;if(!c||!h)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),d.from=Math.floor(d.axis.p2c(d.from)),d.to=Math.floor(d.axis.p2c(d.to)),c||h){var p=r.lineWidth||o.grid.markingsLineWidth,g=p%2?.5:0;u.beginPath(),u.strokeStyle=r.color||o.grid.markingsColor,u.lineWidth=p,c?(u.moveTo(l.to+g,d.from),u.lineTo(l.to+g,d.to)):(u.moveTo(l.from,d.to+g),u.lineTo(l.to,d.to+g)),u.stroke()}else u.fillStyle=r.color||o.grid.markingsColor,u.fillRect(l.from,d.to,l.to-l.from,d.from-d.to)}}n=S(),a=o.grid.borderWidth;for(var b=0;b<n.length;++b){var y,w,j,C,k=n[b],T=k.box,I=k.tickLength;if(k.show&&0!=k.ticks.length){for(u.lineWidth=1,"x"==k.direction?(y=0,w="full"==I?"top"==k.position?0:v:T.top-m.top+("top"==k.position?T.height:0)):(w=0,y="full"==I?"left"==k.position?0:f:T.left-m.left+("left"==k.position?T.width:0)),k.innermost||(u.strokeStyle=k.options.color,u.beginPath(),j=C=0,"x"==k.direction?j=f+1:C=v+1,1==u.lineWidth&&("x"==k.direction?w=Math.floor(w)+.5:y=Math.floor(y)+.5),u.moveTo(y,w),u.lineTo(y+j,w+C),u.stroke()),u.strokeStyle=k.options.tickColor,u.beginPath(),t=0;t<k.ticks.length;++t){var O=k.ticks[t].v;j=C=0,isNaN(O)||O<k.min||O>k.max||"full"==I&&("object"==typeof a&&a[k.position]>0||a>0)&&(O==k.min||O==k.max)||("x"==k.direction?(y=k.p2c(O),C="full"==I?-v:I,"top"==k.position&&(C=-C)):(w=k.p2c(O),j="full"==I?-f:I,"left"==k.position&&(j=-j)),1==u.lineWidth&&("x"==k.direction?y=Math.floor(y)+.5:w=Math.floor(w)+.5),u.moveTo(y,w),u.lineTo(y+j,w+C))}u.stroke()}}a&&(s=o.grid.borderColor,"object"==typeof a||"object"==typeof s?("object"!=typeof a&&(a={top:a,right:a,bottom:a,left:a}),"object"!=typeof s&&(s={top:s,right:s,bottom:s,left:s}),a.top>0&&(u.strokeStyle=s.top,u.lineWidth=a.top,u.beginPath(),u.moveTo(0-a.left,0-a.top/2),u.lineTo(f,0-a.top/2),u.stroke()),a.right>0&&(u.strokeStyle=s.right,u.lineWidth=a.right,u.beginPath(),u.moveTo(f+a.right/2,0-a.top),u.lineTo(f+a.right/2,v),u.stroke()),a.bottom>0&&(u.strokeStyle=s.bottom,u.lineWidth=a.bottom,u.beginPath(),u.moveTo(f+a.right,v+a.bottom/2),u.lineTo(0,v+a.bottom/2),u.stroke()),a.left>0&&(u.strokeStyle=s.left,u.lineWidth=a.left,u.beginPath(),u.moveTo(0-a.left/2,v+a.bottom),u.lineTo(0-a.left/2,0),u.stroke())):(u.lineWidth=a,u.strokeStyle=o.grid.borderColor,u.strokeRect(-a/2,-a/2,f+a,v+a))),u.restore()}function $(e){e.lines.show&&(function(e){function t(e,t,n,a,s){var i=e.points,r=e.pointsize,o=null,l=null;u.beginPath();for(var d=r;d<i.length;d+=r){var c=i[d-r],h=i[d-r+1],p=i[d],g=i[d+1];if(null!=c&&null!=p){if(h<=g&&h<s.min){if(g<s.min)continue;c=(s.min-h)/(g-h)*(p-c)+c,h=s.min}else if(g<=h&&g<s.min){if(h<s.min)continue;p=(s.min-h)/(g-h)*(p-c)+c,g=s.min}if(h>=g&&h>s.max){if(g>s.max)continue;c=(s.max-h)/(g-h)*(p-c)+c,h=s.max}else if(g>=h&&g>s.max){if(h>s.max)continue;p=(s.max-h)/(g-h)*(p-c)+c,g=s.max}if(c<=p&&c<a.min){if(p<a.min)continue;h=(a.min-c)/(p-c)*(g-h)+h,c=a.min}else if(p<=c&&p<a.min){if(c<a.min)continue;g=(a.min-c)/(p-c)*(g-h)+h,p=a.min}if(c>=p&&c>a.max){if(p>a.max)continue;h=(a.max-c)/(p-c)*(g-h)+h,c=a.max}else if(p>=c&&p>a.max){if(c>a.max)continue;g=(a.max-c)/(p-c)*(g-h)+h,p=a.max}c==o&&h==l||u.moveTo(a.p2c(c)+t,s.p2c(h)+n),o=p,l=g,u.lineTo(a.p2c(p)+t,s.p2c(g)+n)}}u.stroke()}function n(e,t,n){for(var a=e.points,s=e.pointsize,i=Math.min(Math.max(0,n.min),n.max),r=0,o=!1,l=1,d=0,c=0;!(s>0&&r>a.length+s);){var h=a[(r+=s)-s],p=a[r-s+l],g=a[r],m=a[r+l];if(o){if(s>0&&null!=h&&null==g){c=r,s=-s,l=2;continue}if(s<0&&r==d+s){u.fill(),o=!1,l=1,r=d=c+(s=-s);continue}}if(null!=h&&null!=g){if(h<=g&&h<t.min){if(g<t.min)continue;p=(t.min-h)/(g-h)*(m-p)+p,h=t.min}else if(g<=h&&g<t.min){if(h<t.min)continue;m=(t.min-h)/(g-h)*(m-p)+p,g=t.min}if(h>=g&&h>t.max){if(g>t.max)continue;p=(t.max-h)/(g-h)*(m-p)+p,h=t.max}else if(g>=h&&g>t.max){if(h>t.max)continue;m=(t.max-h)/(g-h)*(m-p)+p,g=t.max}if(o||(u.beginPath(),u.moveTo(t.p2c(h),n.p2c(i)),o=!0),p>=n.max&&m>=n.max)u.lineTo(t.p2c(h),n.p2c(n.max)),u.lineTo(t.p2c(g),n.p2c(n.max));else if(p<=n.min&&m<=n.min)u.lineTo(t.p2c(h),n.p2c(n.min)),u.lineTo(t.p2c(g),n.p2c(n.min));else{var f=h,v=g;p<=m&&p<n.min&&m>=n.min?(h=(n.min-p)/(m-p)*(g-h)+h,p=n.min):m<=p&&m<n.min&&p>=n.min&&(g=(n.min-p)/(m-p)*(g-h)+h,m=n.min),p>=m&&p>n.max&&m<=n.max?(h=(n.max-p)/(m-p)*(g-h)+h,p=n.max):m>=p&&m>n.max&&p<=n.max&&(g=(n.max-p)/(m-p)*(g-h)+h,m=n.max),h!=f&&u.lineTo(t.p2c(f),n.p2c(p)),u.lineTo(t.p2c(h),n.p2c(p)),u.lineTo(t.p2c(g),n.p2c(m)),g!=v&&(u.lineTo(t.p2c(g),n.p2c(m)),u.lineTo(t.p2c(v),n.p2c(m)))}}}}u.save(),u.translate(m.left,m.top),u.lineJoin="round";var a=e.lines.lineWidth,s=e.shadowSize;if(a>0&&s>0){u.lineWidth=s,u.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;t(e.datapoints,Math.sin(i)*(a/2+s/2),Math.cos(i)*(a/2+s/2),e.xaxis,e.yaxis),u.lineWidth=s/2,t(e.datapoints,Math.sin(i)*(a/2+s/4),Math.cos(i)*(a/2+s/4),e.xaxis,e.yaxis)}u.lineWidth=a,u.strokeStyle=e.color;var r=V(e.lines,e.color,0,v);r&&(u.fillStyle=r,n(e.datapoints,e.xaxis,e.yaxis));a>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);u.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],n=null,a=null,s=e.datapoints,i=[],r=0;r<s.pointsize-2;r++)i.push(0);for(var o=0;o<s.points.length;o+=s.pointsize){var l=s.points[o],d=s.points[o+1];a=o===s.points.length-s.pointsize?null:s.points[o+s.pointsize],null!==l&&null!==d&&null===n&&null===a&&(t.push(l),t.push(d),t.push.apply(t,i)),n=l}var c=s.points;s.points=t,e.points.radius=e.lines.lineWidth/2,L(e),s.points=c}(e)),e.bars.show&&function(e){function t(t,n,a,s,i,r){for(var o=t.points,l=t.pointsize,d=0;d<o.length;d+=l)null!=o[d]&&E(o[d],o[d+1],o[d+2],n,a,s,i,r,u,e.bars.horizontal,e.bars.lineWidth)}var n;switch(u.save(),u.translate(m.left,m.top),u.lineWidth=e.bars.lineWidth,u.strokeStyle=e.color,e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}var a=e.bars.fill?function(t,n){return V(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,a,e.xaxis,e.yaxis),u.restore()}(e),e.points.show&&L(e)}function L(e){function t(e,t,n,a,s,i,r,o){for(var l=e.points,d=e.pointsize,c=0;c<l.length;c+=d){var h=l[c],p=l[c+1];null==h||h<i.min||h>i.max||p<r.min||p>r.max||(u.beginPath(),h=i.p2c(h),p=r.p2c(p)+a,"circle"==o?u.arc(h,p,t,0,s?Math.PI:2*Math.PI,!1):o(u,h,p,t,s),u.closePath(),n&&(u.fillStyle=n,u.fill()),u.stroke())}}u.save(),u.translate(m.left,m.top);var n=e.points.lineWidth,a=e.shadowSize,s=e.points.radius,i=e.points.symbol;if(0==n&&(n=1e-4),n>0&&a>0){var r=a/2;u.lineWidth=r,u.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,s,null,r+r/2,!0,e.xaxis,e.yaxis,i),u.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,s,null,r/2,!0,e.xaxis,e.yaxis,i)}u.lineWidth=n,u.strokeStyle=e.color,t(e.datapoints,s,V(e.points,e.color),0,!1,e.xaxis,e.yaxis,i),u.restore()}function E(e,t,n,a,s,i,r,o,l,d,c){var u,h,p,g,m,f,v,b,x;d?(b=f=v=!0,m=!1,g=t+a,p=t+s,(h=e)<(u=n)&&(x=h,h=u,u=x,m=!0,f=!1)):(m=f=v=!0,b=!1,u=e+a,h=e+s,(g=t)<(p=n)&&(x=g,g=p,p=x,b=!0,v=!1)),h<r.min||u>r.max||g<o.min||p>o.max||(u<r.min&&(u=r.min,m=!1),h>r.max&&(h=r.max,f=!1),p<o.min&&(p=o.min,b=!1),g>o.max&&(g=o.max,v=!1),u=r.p2c(u),p=o.p2c(p),h=r.p2c(h),g=o.p2c(g),i&&(l.fillStyle=i(p,g),l.fillRect(u,g,h-u,p-g)),c>0&&(m||f||v||b)&&(l.beginPath(),l.moveTo(u,p),m?l.lineTo(u,g):l.moveTo(u,g),v?l.lineTo(h,g):l.moveTo(h,g),f?l.lineTo(h,p):l.moveTo(h,p),b?l.lineTo(u,p):l.moveTo(u,p),l.stroke()))}function V(t,n,a,s){var i=t.fill;if(!i)return null;if(t.fillColor)return ee(t.fillColor,a,s,n);var r=e.color.parse(n);return r.a="number"==typeof i?i:.4,r.normalize(),r.toString()}x.setData=w,x.setupGrid=N,x.draw=A,x.getPlaceholder=function(){return t},x.getCanvas=function(){return l.element},x.getPlotOffset=function(){return m},x.width=function(){return f},x.height=function(){return v},x.offset=function(){var e=c.offset();return e.left+=m.left,e.top+=m.top,e},x.getData=function(){return r},x.getAxes=function(){var t={};return e.each(p.concat(g),(function(e,n){n&&(t[n.direction+(1!=n.n?n.n:"")+"axis"]=n)})),t},x.getXAxes=function(){return p},x.getYAxes=function(){return g},x.c2p=C,x.p2c=function(e){var t,n,a,s={};for(t=0;t<p.length;++t)if((n=p[t])&&n.used&&(a="x"+n.n,null==e[a]&&1==n.n&&(a="x"),null!=e[a])){s.left=n.p2c(e[a]);break}for(t=0;t<g.length;++t)if((n=g[t])&&n.used&&(a="y"+n.n,null==e[a]&&1==n.n&&(a="y"),null!=e[a])){s.top=n.p2c(e[a]);break}return s},x.getOptions=function(){return o},x.highlight=K,x.unhighlight=Q,x.triggerRedrawOverlay=Z,x.pointOffset=function(e){return{left:parseInt(p[j(e,"x")-1].p2c(+e.x)+m.left,10),top:parseInt(g[j(e,"y")-1].p2c(+e.y)+m.top,10)}},x.shutdown=T,x.destroy=function(){T(),t.removeData("plot").empty(),r=[],o=null,l=null,d=null,c=null,u=null,h=null,p=[],g=[],b=null,B=[],x=null},x.resize=function(){var e=t.width(),n=t.height();l.resize(e,n),d.resize(e,n)},x.hooks=b,function(){for(var t={Canvas:n},a=0;a<i.length;++a){var s=i[a];s.init(x,t),s.options&&e.extend(!0,o,s.options)}}(),function(n){e.extend(!0,o,n),n&&n.colors&&(o.colors=n.colors);null==o.xaxis.color&&(o.xaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.yaxis.color&&(o.yaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.xaxis.tickColor&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);null==o.yaxis.tickColor&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);null==o.grid.borderColor&&(o.grid.borderColor=o.grid.color);null==o.grid.tickColor&&(o.grid.tickColor=e.color.parse(o.grid.color).scale("a",.22).toString());var a,s,i,r=t.css("font-size"),l=r?+r.replace("px",""):13,d={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(i=o.xaxes.length||1,a=0;a<i;++a)(s=o.xaxes[a])&&!s.tickColor&&(s.tickColor=s.color),s=e.extend(!0,{},o.xaxis,s),o.xaxes[a]=s,s.font&&(s.font=e.extend({},d,s.font),s.font.color||(s.font.color=s.color),s.font.lineHeight||(s.font.lineHeight=Math.round(1.15*s.font.size)));for(i=o.yaxes.length||1,a=0;a<i;++a)(s=o.yaxes[a])&&!s.tickColor&&(s.tickColor=s.color),s=e.extend(!0,{},o.yaxis,s),o.yaxes[a]=s,s.font&&(s.font=e.extend({},d,s.font),s.font.color||(s.font.color=s.color),s.font.lineHeight||(s.font.lineHeight=Math.round(1.15*s.font.size)));o.xaxis.noTicks&&null==o.xaxis.ticks&&(o.xaxis.ticks=o.xaxis.noTicks);o.yaxis.noTicks&&null==o.yaxis.ticks&&(o.yaxis.ticks=o.yaxis.noTicks);o.x2axis&&(o.xaxes[1]=e.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",null==o.x2axis.min&&(o.xaxes[1].min=null),null==o.x2axis.max&&(o.xaxes[1].max=null));o.y2axis&&(o.yaxes[1]=e.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",null==o.y2axis.min&&(o.yaxes[1].min=null),null==o.y2axis.max&&(o.yaxes[1].max=null));o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas);o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor);o.lines&&e.extend(!0,o.series.lines,o.lines);o.points&&e.extend(!0,o.series.points,o.points);o.bars&&e.extend(!0,o.series.bars,o.bars);null!=o.shadowSize&&(o.series.shadowSize=o.shadowSize);null!=o.highlightColor&&(o.series.highlightColor=o.highlightColor);for(a=0;a<o.xaxes.length;++a)k(p,a+1).options=o.xaxes[a];for(a=0;a<o.yaxes.length;++a)k(g,a+1).options=o.yaxes[a];for(var c in b)o.hooks[c]&&o.hooks[c].length&&(b[c]=b[c].concat(o.hooks[c]));y(b.processOptions,[o])}(s),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");l=new n("flot-base",t),d=new n("flot-overlay",t),u=l.context,h=d.context,c=e(d.element).unbind();var a=t.data("plot");a&&(a.shutdown(),d.clear());t.data("plot",x)}(),w(a),N(),A(),function(){o.grid.hoverable&&(c.mousemove(_),c.bind("mouseleave",U),e(document).bind("touchend",W));o.grid.clickable&&c.click(H);y(b.bindEvents,[c])}();var B=[],z=null;function _(e){o.grid.hoverable&&q("plothover",e,(function(e){return 0!=e.hoverable}))}function U(e){o.grid.hoverable&&q("plothover",e,(function(e){return!1}))}function H(e){x.isSelecting||q("plotclick",e,(function(e){return 0!=e.clickable}))}function W(e){e.cancelable&&(c.is(e.target)||0!==c.has(e.target).length?(_(function(e){if(!e||!e.originalEvent)return e;if(e.pageX&&e.pageY)return e;var t=e.originalEvent;if(0===t.changedTouches.length)return e;var n=t.changedTouches[0];return e.pageX=n.pageX,e.pageY=n.pageY,e}(e)),e.preventDefault()):q("plotleave",e,(function(e){})))}function q(e,n,a){var s=c.offset(),i=n.pageX-s.left-m.left,l=n.pageY-s.top-m.top,d=C({left:i,top:l});d.pageX=n.pageX,d.pageY=n.pageY,d.ctrlKey=n.ctrlKey,d.metaKey=n.metaKey;var u=function(e,t,n){var a,s,i,l=o.grid.mouseActiveRadius,d=l*l+1,c=null;for(a=r.length-1;a>=0;--a)if(n(r[a])){var u=r[a],h=u.xaxis,p=u.yaxis,g=u.datapoints.points,m=h.c2p(e),f=p.c2p(t),v=l/h.scale,b=l/p.scale;if(i=u.datapoints.pointsize,h.options.inverseTransform&&(v=Number.MAX_VALUE),p.options.inverseTransform&&(b=Number.MAX_VALUE),u.lines.show||u.points.show)for(s=0;s<g.length;s+=i){var x=g[s],y=g[s+1];if(null!=x&&!(x-m>v||x-m<-v||y-f>b||y-f<-b)){var w=Math.abs(h.p2c(x)-e),j=Math.abs(p.p2c(y)-t),S=w*w+j*j;S<d&&(d=S,c=[a,s/i])}}if(u.bars.show&&!c){var C,k;switch(u.bars.align){case"left":C=0;break;case"right":C=-u.bars.barWidth;break;default:C=-u.bars.barWidth/2}for(k=C+u.bars.barWidth,s=0;s<g.length;s+=i){x=g[s],y=g[s+1];var T=g[s+2];null!=x&&(r[a].bars.horizontal?m<=Math.max(T,x)&&m>=Math.min(T,x)&&f>=y+C&&f<=y+k:m>=x+C&&m<=x+k&&f>=Math.min(T,y)&&f<=Math.max(T,y))&&(c=[a,s/i])}}}return c?(a=c[0],s=c[1],i=r[a].datapoints.pointsize,{datapoint:r[a].datapoints.points.slice(s*i,(s+1)*i),dataIndex:s,series:r[a],seriesIndex:a}):null}(i,l,a);if(u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+s.left+m.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+s.top+m.top,10)),o.grid.autoHighlight){for(var h=0;h<B.length;++h){var p=B[h];p.auto!=e||u&&p.series==u.series&&p.point[0]==u.datapoint[0]&&p.point[1]==u.datapoint[1]||Q(p.series,p.point)}u&&K(u.series,u.datapoint,e)}t.trigger(e,[d,u])}function Z(){var e=o.interaction.redrawOverlayInterval;-1!=e?z||(z=setTimeout(G,e)):G()}function G(){var e,t;for(z=null,h.save(),d.clear(),h.translate(m.left,m.top),e=0;e<B.length;++e)(t=B[e]).series.bars.show?X(t.series,t.point):Y(t.series,t.point);h.restore(),y(b.drawOverlay,[h])}function K(e,t,n){if("number"==typeof e&&(e=r[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var s=J(e,t);-1==s?(B.push({series:e,point:t,auto:n}),Z()):n||(B[s].auto=!1)}function Q(e,t){if(null==e&&null==t)return B=[],void Z();if("number"==typeof e&&(e=r[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var a=J(e,t);-1!=a&&(B.splice(a,1),Z())}function J(e,t){for(var n=0;n<B.length;++n){var a=B[n];if(a.series==e&&a.point[0]==t[0]&&a.point[1]==t[1])return n}return-1}function Y(t,n){var a=n[0],s=n[1],i=t.xaxis,r=t.yaxis,o="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(a<i.min||a>i.max||s<r.min||s>r.max)){var l=t.points.radius+t.points.lineWidth/2;h.lineWidth=l,h.strokeStyle=o;var d=1.5*l;a=i.p2c(a),s=r.p2c(s),h.beginPath(),"circle"==t.points.symbol?h.arc(a,s,d,0,2*Math.PI,!1):t.points.symbol(h,a,s,d,!1),h.closePath(),h.stroke()}}function X(t,n){var a,s="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),i=s;switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}h.lineWidth=t.bars.lineWidth,h.strokeStyle=s,E(n[0],n[1],n[2]||0,a,a+t.bars.barWidth,(function(){return i}),t.xaxis,t.yaxis,h,t.bars.horizontal,t.bars.lineWidth)}function ee(t,n,a,s){if("string"==typeof t)return t;for(var i=u.createLinearGradient(0,a,0,n),r=0,o=t.colors.length;r<o;++r){var l=t.colors[r];if("string"!=typeof l){var d=e.color.parse(s);null!=l.brightness&&(d=d.scale("rgb",l.brightness)),null!=l.opacity&&(d.a*=l.opacity),l=d.toString()}i.addColorStop(r/(o-1),l)}return i}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),n.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var n=this.element,a=this.context,s=this.pixelRatio;this.width!=e&&(n.width=e*s,n.style.width=e+"px",this.width=e),this.height!=t&&(n.height=t*s,n.style.height=t+"px",this.height=t),a.restore(),a.save(),a.scale(s,s)},n.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.prototype.render=function(){var e=this._textCache;for(var n in e)if(t.call(e,n)){var a=this.getTextLayer(n),s=e[n];for(var i in a.hide(),s)if(t.call(s,i)){var r=s[i];for(var o in r)if(t.call(r,o)){for(var l,d=r[o].positions,c=0;l=d[c];c++)l.active?l.rendered||(a.append(l.element),l.rendered=!0):(d.splice(c--,1),l.rendered&&l.element.detach());0==d.length&&delete r[o]}}a.show()}},n.prototype.getTextLayer=function(t){var n=this.text[t];return null==n&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),n=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),n},n.prototype.getTextInfo=function(t,n,a,s,i){var r,o,l,d;if(n=""+n,r="object"==typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px/"+a.lineHeight+"px "+a.family:a,null==(o=this._textCache[t])&&(o=this._textCache[t]={}),null==(l=o[r])&&(l=o[r]={}),null==(d=l[n])){var c=e("<div></div>").html(n).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof a?c.css({font:r,color:a.color}):"string"==typeof a&&c.addClass(a),d=l[n]={element:c,positions:[]};var u=this._textSizeCache[n];u?(d.width=u.width,d.height=u.height):(d.width=c.outerWidth(!0),d.height=c.outerHeight(!0),this._textSizeCache[n]={width:d.width,height:d.height}),c.detach()}return d},n.prototype.addText=function(e,t,n,a,s,i,r,o,l){var d=this.getTextInfo(e,a,s,i,r),c=d.positions;"center"==o?t-=d.width/2:"right"==o&&(t-=d.width),"middle"==l?n-=d.height/2:"bottom"==l&&(n-=d.height);for(var u,h=0;u=c[h];h++)if(u.x==t&&u.y==n)return void(u.active=!0);u={active:!0,rendered:!1,element:c.length?d.element.clone():d.element,x:t,y:n},c.push(u),u.element.css({top:Math.round(n),left:Math.round(t),"text-align":o})},n.prototype.removeText=function(e,n,a,s,i,r){if(null==s){var o=this._textCache[e];if(null!=o)for(var l in o)if(t.call(o,l)){var d=o[l];for(var c in d)if(t.call(d,c))for(var u=d[c].positions,h=0;p=u[h];h++)p.active=!1}}else{var p;for(u=this.getTextInfo(e,s,i,r).positions,h=0;p=u[h];h++)p.x==n&&p.y==a&&(p.active=!1)}},e.plot=function(t,n,s){return new a(e(t),n,s,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,n){return this.each((function(){e.plot(this,t,n)}))}}(jQuery)},4027:()=>{!function(e){e.plot.plugins.push({init:function(t){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},s=null;function i(e){n.active&&(u(e),t.getPlaceholder().trigger("plotselecting",[o()]))}function r(i){1==i.which&&(document.body.focus(),void 0!==document.onselectstart&&null==a.onselectstart&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==a.ondrag&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),c(n.first,i),n.active=!0,s=function(e){!function(e){s=null,void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart);void 0!==document.ondrag&&(document.ondrag=a.ondrag);n.active=!1,u(e),g()?l(e):(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null]));setTimeout((function(){t.isSelecting=!1}),10)}(e)},e(document).one("mouseup",s))}function o(){if(!g())return null;if(!n.show)return null;var a={},s=n.first,i=n.second,r=t.getAxes();return e.each(r,(function(e,t){t.used&&(anyUsed=!1)})),e.each(r,(function(e,t){t.used;var n=t.c2p(s[t.direction]),r=t.c2p(i[t.direction]);a[e]={from:Math.min(n,r),to:Math.max(n,r)}})),a}function l(e){var n=o();n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,t.getPlaceholder().trigger("plotselected",[n]),n.xaxis&&n.yaxis&&t.getPlaceholder().trigger("selected",[{x1:n.xaxis.from,y1:n.yaxis.from,x2:n.xaxis.to,y2:n.yaxis.to}])}function d(e,t,n){return t<e?e:t>n?n:t}function c(e,a){var s=t.getOptions(),i=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=d(0,a.pageX-i.left-r.left,t.width()),e.y=d(0,a.pageY-i.top-r.top,t.height()),"y"==s.selection.mode&&(e.x=e==n.first?0:t.width()),"x"==s.selection.mode&&(e.y=e==n.first?0:t.height())}function u(e){null!=e.pageX&&(c(n.second,e),g()?(t.isSelecting=!0,n.show=!0,t.triggerRedrawOverlay()):h(!0))}function h(e){n.show&&(n.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function p(e,n){var a,s,i,r,o=t.getAxes();for(var l in o)if((a=o[l]).direction==n&&(e[r=n+a.n+"axis"]||1!=a.n||(r=n+"axis"),e[r])){s=e[r].from,i=e[r].to;break}if(e[r]||(a="x"==n?t.getXAxes()[0]:t.getYAxes()[0],s=e[n+"1"],i=e[n+"2"]),null!=s&&null!=i&&s>i){var d=s;s=i,i=d}return{from:s,to:i,axis:a}}function g(){var e=t.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=e&&Math.abs(n.second.y-n.first.y)>=e}t.clearSelection=h,t.setSelection=function(e,a){var s,i=t.getOptions();"y"==i.selection.mode?(n.first.x=0,n.second.x=t.width()):(s=p(e,"x"),n.first.x=s.axis.p2c(s.from),n.second.x=s.axis.p2c(s.to)),"x"==i.selection.mode?(n.first.y=0,n.second.y=t.height()):(s=p(e,"y"),n.first.y=s.axis.p2c(s.from),n.second.y=s.axis.p2c(s.to)),n.show=!0,t.triggerRedrawOverlay(),!a&&g()&&l()},t.getSelection=o,t.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(i),t.mousedown(r))})),t.hooks.drawOverlay.push((function(t,a){if(n.show&&g()){var s=t.getPlotOffset(),i=t.getOptions();a.save(),a.translate(s.left,s.top);var r=e.color.parse(i.selection.color);a.strokeStyle=r.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=i.selection.shape,a.fillStyle=r.scale("a",.4).toString();var o=Math.min(n.first.x,n.second.x)+.5,l=Math.min(n.first.y,n.second.y)+.5,d=Math.abs(n.second.x-n.first.x)-1,c=Math.abs(n.second.y-n.first.y)-1;a.fillRect(o,l,d,c),a.strokeRect(o,l,d,c),a.restore()}})),t.hooks.shutdown.push((function(t,n){n.unbind("mousemove",i),n.unbind("mousedown",r),s&&(e(document).unbind("mouseup",s),void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart),void 0!==document.ondrag&&(document.ondrag=a.ondrag))}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},65103:()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,n){if(null!=t.stack&&!1!==t.stack){var a=function(e,t){for(var n=null,a=0;a<t.length&&e!=t[a];++a)t[a].stack==e.stack&&(n=t[a]);return n}(t,e.getData());if(a){for(var s,i,r,o,l,d,c=n.pointsize,u=n.points,h=a.datapoints.pointsize,p=a.datapoints.points,g=[],m=t.lines.show,f=t.bars.horizontal,v=c>2&&(f?n.format[2].x:n.format[2].y),b=m&&t.lines.steps,x=f?1:0,y=f?0:1,w=0,j=0;!(w>=u.length&&j>=p.length);){if(l=g.length,w<u.length&&null==u[w]){for(d=0;d<c;++d)g.push(u[w+d]);w+=c}else if(w>=u.length){for(d=0;d<c;++d)g.push(p[j+d]);v&&(g[l+2]=p[j+y]),j+=h}else if(j>=p.length){for(d=0;d<c;++d)g.push(u[w+d]);w+=c}else if(j<p.length&&null==p[j])j+=h;else{if(s=u[w+x],u[w+y],i=p[j+x],r=p[j+y],o=0,s==i){for(d=0;d<c;++d)g.push(u[w+d]);g[l+y]+=r,o=r,w+=c,j+=h}else if(s>i){if(0==w){for(d=0;d<c;++d)g.push(p[j+d]);o=r}if(w>0&&null!=u[w-c]){for(g.push(i),g.push(0+r),d=2;d<c;++d)g.push(u[w+d]);o=r}j+=h}else{for(d=0;d<c;++d)g.push(u[w+d]);j>0&&null!=p[j-h]&&(o=0),g[l+y]+=o,w+=c}fromgap=!1,l!=g.length&&v&&(g[l+2]=o)}if(b&&l!=g.length&&l>0&&null!=g[l]&&g[l]!=g[l-c]&&g[l+1]!=g[l-c+1]){for(d=0;d<c;++d)g[l+c+d]=g[l+d];g[l+1]=g[l-c+1]}}n.points=g}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},85095:()=>{jQuery.plot.plugins.push({init:function(e){var t={},n=!1,a={};function s(e){var t=e.length,n={};if(t>0)for(var a=0;a<t;a++)if(e[a].stackpercent){var s=0,i=1;e[a].bars&&e[a].bars.horizontal&&!0===e[a].bars.horizontal&&(s=1,i=0);for(var r=e[a].data.length,o=0;o<r;o++){var l=0;null!=e[a].data[o][1]&&(l=e[a].data[o][i]),n[e[a].data[o][s]+""]?n[e[a].data[o][s]+""]+=l:n[e[a].data[o][s]+""]=l}}return n}e.hooks.processRawData.push((function(e,t,i,r){if(n||(n=!0,a=s(e.getData())),1==t.stackpercent){var o=i.length;t.percents=[];var l=0,d=1;t.bars&&t.bars.horizontal&&!0===t.bars.horizontal&&(l=1,d=0);for(var c=0;c<o;c++){var u=a[i[c][l]+""];u>0?t.percents.push(100*i[c][d]/u):t.percents.push(0)}}})),e.hooks.processDatapoints.push((function(e,i,r){if(i.stackpercent){n||(a=s(e.getData()));var o=[],l=0,d=1;i.bars&&i.bars.horizontal&&!0===i.bars.horizontal&&(l=1,d=0);for(var c=0;c<r.points.length;c+=3)t[r.points[c+l]]||(t[r.points[c+l]]=0),o[c+l]=r.points[c+l],o[c+d]=r.points[c+d]+t[r.points[c+l]],o[c+2]=t[r.points[c+l]],t[r.points[c+l]]+=r.points[c+d],a[o[c+l]+""]>0?(o[c+d]=100*o[c+d]/a[o[c+l]+""],o[c+2]=100*o[c+2]/a[o[c+l]+""]):(o[c+d]=0,o[c+2]=0);r.points=o}}))},options:{series:{stackpercent:null}},name:"stackpercent",version:"0.1"})},59554:()=>{!function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,a){if("function"==typeof e.strftime)return e.strftime(t);var s,i=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},r=[],o=!1,l=e.getHours(),d=l<12;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==a&&(a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),s=l>12?l-12:0==l?12:l;for(var c=0;c<t.length;++c){var u=t.charAt(c);if(o){switch(u){case"a":u=""+a[e.getDay()];break;case"b":u=""+n[e.getMonth()];break;case"d":u=i(e.getDate(),"");break;case"e":u=i(e.getDate()," ");break;case"h":case"H":u=i(l);break;case"I":u=i(s);break;case"l":u=i(s," ");break;case"m":u=i(e.getMonth()+1,"");break;case"M":u=i(e.getMinutes());break;case"q":u=""+(Math.floor(e.getMonth()/3)+1);break;case"S":u=i(e.getSeconds());break;case"y":u=i(e.getFullYear()%100);break;case"Y":u=""+e.getFullYear();break;case"p":u=d?"am":"pm";break;case"P":u=d?"AM":"PM";break;case"w":u=""+e.getDay()}r.push(u),o=!1}else"%"==u?o=!0:r.push(u)}return r.join("")}function a(e){function t(e,t,n,a){e[t]=function(){return n[a].apply(n,arguments)}}var n={date:e};null!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var a=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],s=0;s<a.length;s++)t(n,"get"+a[s],e,"getUTC"+a[s]),t(n,"set"+a[s],e,"setUTC"+a[s]);return n}function s(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(t.timezone),n.setTime(e),n}return a(new Date(e))}return a(new Date(e))}var i={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],o=r.concat([[3,"month"],[6,"month"],[1,"year"]]),l=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(a,r){e.each(a.getAxes(),(function(e,a){var r=a.options;"time"==r.mode&&(a.tickGenerator=function(e){var n=[],a=s(e.min,r),d=0,c=r.tickSize&&"quarter"===r.tickSize[1]||r.minTickSize&&"quarter"===r.minTickSize[1]?l:o;null!=r.minTickSize&&(d="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*i[r.minTickSize[1]]);for(var u=0;u<c.length-1&&!(e.delta<(c[u][0]*i[c[u][1]]+c[u+1][0]*i[c[u+1][1]])/2&&c[u][0]*i[c[u][1]]>=d);++u);var h=c[u][0],p=c[u][1];if("year"==p){if(null!=r.minTickSize&&"year"==r.minTickSize[1])h=Math.floor(r.minTickSize[0]);else{var g=Math.pow(10,Math.floor(Math.log(e.delta/i.year)/Math.LN10)),m=e.delta/i.year/g;h=m<1.5?1:m<3?2:m<7.5?5:10,h*=g}h<1&&(h=1)}e.tickSize=r.tickSize||[h,p];var f=e.tickSize[0];p=e.tickSize[1];var v=f*i[p];"second"==p?a.setSeconds(t(a.getSeconds(),f)):"minute"==p?a.setMinutes(t(a.getMinutes(),f)):"hour"==p?a.setHours(t(a.getHours(),f)):"month"==p?a.setMonth(t(a.getMonth(),f)):"quarter"==p?a.setMonth(3*t(a.getMonth()/3,f)):"year"==p&&a.setFullYear(t(a.getFullYear(),f)),a.setMilliseconds(0),v>=i.minute&&a.setSeconds(0),v>=i.hour&&a.setMinutes(0),v>=i.day&&a.setHours(0),v>=4*i.day&&a.setDate(1),v>=2*i.month&&a.setMonth(t(a.getMonth(),3)),v>=2*i.quarter&&a.setMonth(t(a.getMonth(),6)),v>=i.year&&a.setMonth(0);var b,x=0,y=Number.NaN;do{if(b=y,y=a.getTime(),n.push(y),"month"==p||"quarter"==p)if(f<1){a.setDate(1);var w=a.getTime();a.setMonth(a.getMonth()+("quarter"==p?3:1));var j=a.getTime();a.setTime(y+x*i.hour+(j-w)*f),x=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+f*("quarter"==p?3:1));else"year"==p?a.setFullYear(a.getFullYear()+f):a.setTime(y+v)}while(y<e.max&&y!=b);return n},a.tickFormatter=function(e,t){var a=s(e,t.options);if(null!=r.timeformat)return n(a,r.timeformat,r.monthNames,r.dayNames);var o=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*i[t.tickSize[1]],d=t.max-t.min,c=r.twelveHourClock?" %p":"",u=r.twelveHourClock?"%I":"%H";return n(a,l<i.minute?u+":%M:%S"+c:l<i.day?d<2*i.day?u+":%M"+c:"%b %d "+u+":%M"+c:l<i.month?"%b %d":o&&l<i.quarter||!o&&l<i.year?d<i.year?"%b":"%b %Y":o&&l<i.year?d<i.year?"Q%q":"Q%q %Y":"%Y",r.monthNames,r.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=n}(jQuery)}}]);
//# sourceMappingURL=6151.962c8f241d27d9b5b744.js.map