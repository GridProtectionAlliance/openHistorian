"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[207],{13190:(B,m,a)=>{a.r(m),a.d(m,{SceneListPage:()=>y,default:()=>S});var e=a(68404),t=a(22350),g=a(26418),l=a(72948),r=a(79396),P=a(82e3),w=a(31185);const y=({})=>{const I=(0,w.F)(),$=(0,t.Z)(()=>(0,P.getGrafanaSearcher)().starred({starred:!0}),[]);return e.createElement(r.T,{navId:"scenes",subTitle:"Experimental new runtime and state model for dashboards"},e.createElement(r.T.Contents,null,e.createElement(g.Stack,{direction:"column",gap:1},e.createElement("h5",null,"Apps"),e.createElement(g.Stack,{direction:"column",gap:0},e.createElement(l.Z,{href:"/scenes/grafana-monitoring"},e.createElement(l.Z.Heading,null,"Grafana monitoring"))),e.createElement("h5",null,"Test scenes"),e.createElement(g.Stack,{direction:"column",gap:0},I.map(p=>e.createElement(l.Z,{key:p.title,href:`/scenes/${p.title}`},e.createElement(l.Z.Heading,null,p.title)))),$.value&&e.createElement(e.Fragment,null,e.createElement("h5",null,"Starred dashboards"),e.createElement(g.Stack,{direction:"column",gap:0},$.value.view.map(p=>e.createElement(l.Z,{href:`/scenes/dashboard/${p.uid}`,key:p.uid},e.createElement(l.Z.Heading,null,p.name))))))))},S=y},23192:(B,m,a)=>{a.r(m),a.d(m,{ScenePage:()=>l,default:()=>r});var e=a(68404),t=a(64622),g=a(31185);const l=P=>{const w=(0,g.H)(P.match.params.name),[y,S]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{w&&!y&&((0,t.oo)().initSync(w),S(!0))},[y,w]),w?y?e.createElement(w.Component,{model:w}):null:e.createElement("h2",null,"Scene not found")},r=l},38282:(B,m,a)=>{a.r(m),a.d(m,{GrafanaMonitoringApp:()=>i,default:()=>M,getHandlerDrilldownPage:()=>u,getMainPageScene:()=>o,getSecondLevelDrilldown:()=>c});var e=a(68404),t=a(64622),g=a(83233),l=a(52889),r=a(89890),P=a(66926),w=a(37932),y=a(2594);class S extends t.wx{constructor(){super(...arguments),this.onChange=d=>{this.setState({value:d}),this.state.onChange(d)}}}S.Component=({model:s})=>{const{options:d,value:h}=s.useState();return e.createElement(y.S,{options:d,value:h,onChange:s.onChange})};var I=a(46967);class $ extends t.wx{constructor(){super(...arguments),this.onChange=d=>{this.setState({value:d.currentTarget.value})}}}$.Component=({model:s})=>{const{value:d}=s.useState();return e.createElement(I.I,{width:25,placeholder:"Search...",value:d,onChange:s.onChange})};var p=a(9471),R=a(85854),D=a(17130),C=a(86789);function O(s){const d={id:R.mE.regex,options:{value:s}};return{id:D.W.filterByValue,options:{type:C.PQ.include,match:C.ER.all,filters:[{fieldName:"handler",config:d}]}}}function f(s){return()=>d=>d.pipe((0,p.U)(h=>h.filter(v=>(0,r.n)(v).toLowerCase().includes(s.toLowerCase()))))}var b=a(27677);function x(){const s=useLocation();return locationSearchToObject(s.search||"")}function _(s,d){return b.Cj.renderUrl(s,d)}function U(){const s=new $({value:""}),d=T({expr:"sort_desc(avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval]) * 1e3)) "}),h=new t.bM({$data:d,transformations:[O("")]});h.addActivationHandler(()=>{const A=s.subscribeToState(Z=>{h.setState({transformations:[O(Z.value)]}),h.reprocessTransformations()});return()=>A.unsubscribe()});const v=new t.Z({$data:h,pluginId:"table",title:"",options:{footer:{enablePagination:!0}},fieldConfig:{defaults:{},overrides:[{matcher:{id:"byRegexp",options:".*"},properties:[{id:"filterable",value:!1}]},{matcher:{id:"byName",options:"Time"},properties:[{id:"custom.hidden",value:!0}]},{matcher:{id:"byName",options:"Value"},properties:[{id:"displayName",value:"Duration (Avg)"}]},{matcher:{id:"byName",options:"handler"},properties:[{id:"links",value:[{title:"Go to handler drilldown view",onBuildUrl:()=>{const A=w.E1.getSearchObject();return _("/scenes/grafana-monitoring/handlers/${__value.text:percentencode}",A)}}]}]}]}}),q=new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:"topk(20, avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum[$__rate_interval])) * 1e3)",range:!0,format:"time_series",legendFormat:"{{method}} {{handler}} (status = {{status_code}})",maxDataPoints:500}]}),z=new t.bM({$data:q,transformations:[f("")]});z.addActivationHandler(()=>{const A=s.subscribeToState(Z=>{z.setState({transformations:[f(Z.value)]}),z.reprocessTransformations()});return()=>A.unsubscribe()});const G=new t.$M({$data:z,body:new t.QY({direction:"column",children:[]}),getLayoutChild:(A,Z,Q)=>new t.fy({key:`panel-${Q}`,minHeight:200,$data:new t.Yt({data:{...A,series:[Z]}}),body:new t.QY({direction:"row",children:[new t.fy({body:new t.Z({pluginId:"timeseries",title:(0,r.n)(Z),options:{legend:{displayMode:"hidden"}}})}),new t.fy({width:200,body:new t.Z({title:"Last",pluginId:"stat",fieldConfig:{defaults:{displayName:"Last",links:[{title:"Go to handler drilldown view",url:"",onBuildUrl:()=>{const j=w.E1.getSearchObject();return _("/scenes/grafana-monitoring/handlers/${__field.labels.handler:percentencode}",j)}}]},overrides:[]},options:{graphMode:"none",textMode:"value"}})})]})})}),K=new t.QY({children:[new t.fy({body:v})]}),Y=new S({options:[{value:"table",label:"Table"},{value:"graphs",label:"Graphs"}],value:"table",onChange:A=>{A==="table"?K.setState({children:[new t.fy({body:v})]}):K.setState({children:[G]})}});return new t.U4({$variables:L(),$data:d,$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),s,new t.o$,Y,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:K})}function E(s){const d=V({expr:`avg without(job, instance) (rate(grafana_http_request_duration_seconds_sum{handler="${s}"}[$__rate_interval])) * 1e3`,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"}),h=V({expr:`sum without(job, instance) (rate(grafana_http_request_duration_seconds_count{handler="${s}"}[$__rate_interval])) `,legendFormat:"{{method}} {{handler}} (status = {{status_code}})"});return new t.U4({$variables:L(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:new t.Z({$data:d,pluginId:"timeseries",title:"Request duration avg (ms)",options:{}})}),new t.fy({body:new t.Z({$data:h,pluginId:"timeseries",title:"Request count/s",options:{}})})]})})}function T(s){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",instant:!0,format:"table",maxDataPoints:500,...s}]})}function V(s){return new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",range:!0,format:"time_series",maxDataPoints:500,...s}]})}function H(){return new t.U4({$variables:L(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({height:150,body:new t.QY({children:[new t.fy({body:W("grafana_stat_totals_dashboard","Dashboards")}),new t.fy({body:W("grafana_stat_total_users","Users")}),new t.fy({body:W("sum(grafana_stat_totals_datasource)","Data sources")}),new t.fy({body:W("grafana_stat_total_service_account_tokens","Service account tokens")})]})}),new t.fy({body:new t.Z({$data:new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(process_resident_memory_bytes{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]}),pluginId:"timeseries",title:"Memory usage",options:{legend:{showLegend:!1}},fieldConfig:{defaults:{unit:"bytes",min:0,custom:{lineWidth:2,fillOpacity:6}},overrides:[]}})}),new t.fy({body:new t.Z({$data:new t.uq({datasource:{uid:"gdev-prometheus"},queries:[{refId:"A",expr:'sum(go_goroutines{job="grafana", instance=~"$instance"})',range:!0,format:"time_series",maxDataPoints:500}]}),pluginId:"timeseries",title:"Go routines",options:{legend:{showLegend:!1}},fieldConfig:{defaults:{min:0,custom:{lineWidth:2,fillOpacity:6}},overrides:[]}})})]})})}function L(){return new t.hT({variables:[new t.$1({name:"instance",datasource:{uid:"gdev-prometheus"},query:{query:"label_values(grafana_http_request_duration_seconds_sum, instance)"}})]})}function W(s,d){return new t.Z({$data:T({expr:s}),pluginId:"stat",title:d,options:{},fieldConfig:{defaults:{color:{fixedColor:"text",mode:P.S.Fixed}},overrides:[]}})}function F(s){const d=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:`{job="grafana"} | logfmt | handler=\`${s}\` | __error__=\`\``,queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:L(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:new t.Z({pluginId:"text",title:"",options:{mode:"markdown",content:`
  [mupp](/scenes/grafana-monitoring/handlers/${encodeURIComponent(s)}/logs/mupp)
  [mapp](/scenes/grafana-monitoring/handlers/${encodeURIComponent(s)}/logs/mapp)
  `}})}),new t.fy({body:new t.Z({$data:d,pluginId:"logs",title:"",options:{showTime:!0,showLabels:!1,showCommonLabels:!1,wrapLogMessage:!0,prettifyLogMessage:!1,enableLogDetails:!0,dedupStrategy:"none",sortOrder:"Descending"}})})]})})}function n(){const s=new t.uq({datasource:{uid:"gdev-loki"},queries:[{refId:"A",expr:'{job="grafana"} | logfmt | __error__=``',queryType:"range",maxDataPoints:5e3}]});return new t.U4({$variables:L(),$timeRange:new t.gg({from:"now-1h",to:"now"}),controls:[new t.dn({}),new t.o$,new t.n7({isOnCanvas:!0}),new t.vf({isOnCanvas:!0})],body:new t.QY({direction:"column",children:[new t.fy({body:new t.Z({$data:s,pluginId:"logs",title:"",options:{showTime:!0,showLabels:!1,showCommonLabels:!1,wrapLogMessage:!0,prettifyLogMessage:!1,enableLogDetails:!0,dedupStrategy:"none",sortOrder:"Descending"}})})]})})}function i(){const s=(0,e.useMemo)(()=>new t.mt({pages:[o()]}),[]),d=(0,g.P)("scenes"),[h]=(0,e.useState)({sectionNav:d});return e.createElement(l.v.Provider,{value:h},e.createElement(s.Component,{model:s}))}function o(){return new t.yH({title:"Grafana Monitoring",subTitle:"A custom app with embedded scenes to monitor your Grafana server",url:"/scenes/grafana-monitoring",hideFromBreadcrumbs:!1,getScene:H,tabs:[new t.yH({title:"Overview",url:"/scenes/grafana-monitoring",getScene:H,preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"HTTP handlers",url:"/scenes/grafana-monitoring/handlers",getScene:U,preserveUrlKeys:["from","to","var-instance"],drilldowns:[{routePath:"/scenes/grafana-monitoring/handlers/:handler",getPage:u}]}),new t.yH({title:"Logs",url:"/scenes/grafana-monitoring/logs",getScene:n,preserveUrlKeys:["from","to","var-instance"]})]})}function u(s,d){const h=decodeURIComponent(s.params.handler),v=`/scenes/grafana-monitoring/handlers/${encodeURIComponent(h)}`;return new t.yH({title:h,subTitle:"A grafana http handler is responsible for service a specific API request",url:v,getParentPage:()=>d,getScene:()=>E(h),tabs:[new t.yH({title:"Metrics",url:v,routePath:"/scenes/grafana-monitoring/handlers/:handler",getScene:()=>E(h),preserveUrlKeys:["from","to","var-instance"]}),new t.yH({title:"Logs",url:v+"/logs",routePath:"/scenes/grafana-monitoring/handlers/:handler/logs",getScene:()=>F(h),preserveUrlKeys:["from","to","var-instance"],drilldowns:[{routePath:"/scenes/grafana-monitoring/handlers/:handler/logs/:secondLevel",getPage:c}]})]})}function c(s,d){const h=decodeURIComponent(s.params.handler),v=decodeURIComponent(s.params.secondLevel),q=`/scenes/grafana-monitoring/handlers/${encodeURIComponent(h)}/logs/${v}`;return new t.yH({title:v,subTitle:"Second level dynamic drilldown",url:q,getParentPage:()=>d,getScene:()=>new t.U4({body:new t.QY({children:[new t.fy({body:new t.S$({text:"Drilldown: "+v})})]})})})}const M=i},56440:(B,m,a)=>{a.d(m,{W:()=>I});var e=a(9892),t=a(68404),g=a(24844),l=a(37932),r=a(64622),P=a(72648),w=a(64319),y=a(95379),S=a(79396);class I extends r.wx{}I.Component=$;function $({model:R}){const{title:D,body:C,actions:O=[],uid:f,controls:b}=R.useState(),x=(0,P.wW)(p),_=(O??[]).map(E=>t.createElement(E.Component,{key:E.state.key,model:E}));f?.length&&_.push(t.createElement(w.h,{icon:"apps",onClick:()=>l.E1.push(`/d/${f}`),tooltip:"View as Dashboard",key:"scene-to-dashboard-switch"}));const U=t.createElement(y.A,{actions:_});return t.createElement(S.T,{navId:"scenes",pageNav:{text:D},layout:g.Qz.Canvas,toolbar:U},b&&t.createElement("div",{className:x.controls},b.map(E=>t.createElement(E.Component,{key:E.state.key,model:E}))),t.createElement("div",{className:x.body},t.createElement(C.Component,{model:C})))}function p(R){return{body:(0,e.css)({flexGrow:1,display:"flex",gap:"8px"}),controls:(0,e.css)({display:"flex",paddingBottom:R.spacing(2),flexWrap:"wrap",alignItems:"center",gap:R.spacing(1)})}}},23591:(B,m,a)=>{a.r(m),a.d(m,{DashboardScenePage:()=>W,default:()=>F});var e=a(68404),t=a(24844),g=a(79396),l=a(2555),r=a(64622),P=a(38535),w=a(87449),y=a(86899),S=a(21471),I=a(56440);function $(n){return`panel-${n}`}function p(n){const i=[];return n.forEachChild(o=>{i.push(p(o))}),i.push(n.activate()),()=>{for(const o of i)o()}}class R extends r.wx{constructor(i){super(i),this.addActivationHandler(()=>(this._subscribeToSource(),()=>{this._querySub&&this._querySub.unsubscribe(),this._sourceDataDeactivationHandler&&this._sourceDataDeactivationHandler()}))}_subscribeToSource(){const{query:i}=this.state;if(this._querySub&&this._querySub.unsubscribe(),!i.panelId)return;const o=$(i.panelId),u=D(this.getRoot(),M=>M.state.key===o);if(!u){console.log("Shared dashboard query refers to a panel that does not exist in the scene");return}let c=u.state.$data;if(!c){console.log("No source data found for shared dashboard query");return}if(this._sourceDataDeactivationHandler=c.activate(),c instanceof r.bM&&!i.withTransforms){if(!c.state.$data)throw new Error("No source inner query runner found in data transformer");c=c.state.$data}this._querySub=c.subscribeToState(M=>this.setState({data:M.data})),this.setState({data:c.state.data})}}function D(n,i){if(i(n))return n;let o=null;return n.forEachChild(u=>{let c=D(u,i);c&&(o=c)}),o}class C extends P.b{constructor(){super(...arguments),this.cache={}}async load(i){const o=this.cache[i];if(o){this.setState({dashboard:o});return}this.setState({isLoading:!0});try{const u=await w.pD.loadDashboard("db","",i);if(u.dashboard)this.initDashboard(u);else throw new Error("Dashboard not found")}catch(u){this.setState({isLoading:!1,loadError:String(u)})}}initDashboard(i){const o=new y.f(i.dashboard,i.meta,{autoMigrateOldPanels:!0}),u=f(o);(0,r.oo)().initSync(u),this.cache[i.dashboard.uid]=u,this.setState({dashboard:u,isLoading:!1})}clearState(){this.setState({dashboard:void 0,loadError:void 0,isLoading:!1})}}function O(n){const i=[];let o=null,u=[];for(const c of n)if(c.type==="row")o?o.id!==c.id&&(i.push(new r.I_({title:o.title,y:o.gridPos.y,children:u})),o=c,u=[]):Boolean(c.collapsed)?i.push(new r.I_({title:c.title,isCollapsed:!0,y:c.gridPos.y,children:c.panels?c.panels.map(x):[]})):o=c;else{const M=x(c);o?u.push(M):i.push(M)}return o&&i.push(new r.I_({title:o.title,y:o.gridPos.y,children:u})),i}function f(n){let i;if(n.templating?.list?.length){const o=n.templating.list.map(u=>{try{return b(u)}catch(c){return console.error(c),null}}).filter(u=>Boolean(u));i=new r.hT({variables:o})}return new I.W({title:n.title,uid:n.uid,body:new r.Qh({children:O(n.panels)}),$timeRange:new r.gg(n.time),actions:[new r.n7({}),new r.vf({refresh:n.refresh,intervals:n.timepicker.refresh_intervals})],$variables:i,...i&&{controls:[new r.dn({})]}})}function b(n){const i={name:n.name,label:n.label};if(T(n))return new r.eO({...i,value:n.current.value,text:n.current.text,description:n.description,query:n.query,isMulti:n.multi,allValue:n.allValue||void 0,includeAll:n.includeAll,defaultToAll:Boolean(n.includeAll),skipUrlSync:n.skipUrlSync,hide:n.hide});if(V(n))return new r.$1({...i,value:n.current.value,text:n.current.text,description:n.description,query:n.query,datasource:n.datasource,sort:n.sort,refresh:n.refresh,regex:n.regex,allValue:n.allValue||void 0,includeAll:n.includeAll,defaultToAll:Boolean(n.includeAll),isMulti:n.multi,skipUrlSync:n.skipUrlSync,hide:n.hide});if(H(n))return new r.l3({...i,value:n.current.value,text:n.current.text,description:n.description,regex:n.regex,pluginId:n.query,allValue:n.allValue||void 0,includeAll:n.includeAll,defaultToAll:Boolean(n.includeAll),skipUrlSync:n.skipUrlSync,isMulti:n.multi,hide:n.hide});if(L(n))return new r.M6({...i,description:n.description,value:n.query,skipUrlSync:n.skipUrlSync,hide:n.hide});throw new Error(`Scenes: Unsupported variable type ${n.type}`)}function x(n){return new r.bO({x:n.gridPos.x,y:n.gridPos.y,width:n.gridPos.w,height:n.gridPos.h,isDraggable:!0,isResizable:!0,body:new r.Z({key:$(n.id),title:n.title,pluginId:n.type,options:n.options??{},fieldConfig:n.fieldConfig,pluginVersion:n.pluginVersion,displayMode:n.transparent?"transparent":void 0,hoverHeader:!n.title&&!n.timeFrom&&!n.timeShift,$data:_(n)})})}function _(n){if(!n.targets?.length)return;let i;return n.datasource?.uid===S.o?i=new R({query:n.targets[0]}):i=new r.uq({queries:n.targets,maxDataPoints:n.maxDataPoints??void 0}),n.transformations?.length&&(i=new r.bM({$data:i,transformations:n.transformations})),i}let U=null;function E(){return U||(U=new C({})),U}const T=n=>n.type==="custom",V=n=>n.type==="query",H=n=>n.type==="datasource",L=n=>n.type==="constant",W=({match:n})=>{const i=E(),{dashboard:o,isLoading:u}=i.useState();return(0,e.useEffect)(()=>(i.load(n.params.uid),()=>{i.clearState()}),[i,n.params.uid]),o?e.createElement(o.Component,{model:o}):e.createElement(g.T,{layout:t.Qz.Canvas},u&&e.createElement(l.Z,null),!u&&e.createElement("h2",null,"Dashboard not found"))},F=W},31185:(B,m,a)=>{a.d(m,{H:()=>O,F:()=>D});var e=a(64622),t=a(20195),g=a(56440);function l(f,b){return new e.uq({queries:[{refId:"A",datasource:{uid:"gdev-testdata",type:"testdata"},scenarioId:"random_walk",...f}],...b})}function r(){const f=new e.gg,b=new e.gg({from:"now-1y",to:"now"});return new g.W({title:"Grid with rows and different queries and time ranges",body:new e.Qh({children:[new e.I_({$timeRange:b,$data:l({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query, last year time range",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1"})}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2"})})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:new e.Z({$data:l(),pluginId:"timeseries",title:"Outsider, has its own query",key:"Outsider-own-query"})})]}),$timeRange:f,$data:l(),actions:[new e.n7({}),new e.vf({})]})}function P(){return new g.W({title:"Multiple grid layouts test",body:new e.QY({children:[new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:new e.Z({pluginId:"timeseries",title:"Dragabble and resizable"})}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Draggable only"})}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})})]})}),new e.fy({body:new e.Qh({children:[new e.bO({x:0,y:0,width:12,height:10,isDraggable:!0,isResizable:!0,body:new e.Z({pluginId:"timeseries",title:"Dragabble and resizable"})}),new e.bO({x:12,y:0,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Draggable only"})}),new e.bO({x:6,y:11,width:12,height:10,isResizable:!1,isDraggable:!0,body:new e.QY({direction:"column",children:[new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({ySizing:"fill",body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})})]})})]}),$timeRange:new e.gg,$data:l(),actions:[new e.n7({}),new e.vf({})]})}function w(){return new g.W({title:"Grid with rows and different queries",body:new e.Qh({children:[new e.I_({$timeRange:new e.gg,$data:l({scenarioId:t.UV.RandomWalkTable}),title:"Row A - has its own query",key:"Row A",isCollapsed:!0,y:0,children:[new e.bO({x:0,y:1,width:12,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child1",key:"Row A Child1"})}),new e.bO({x:0,y:5,width:6,height:5,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row A Child2",key:"Row A Child2"})})]}),new e.I_({title:"Row B - uses global query",key:"Row B",isCollapsed:!0,y:1,children:[new e.bO({x:0,y:2,width:12,height:5,isResizable:!1,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Row B Child1",key:"Row B Child1"})}),new e.bO({x:0,y:7,width:6,height:5,isResizable:!1,isDraggable:!0,body:new e.Z({$data:l({seriesCount:10}),pluginId:"timeseries",title:"Row B Child2 with data",key:"Row B Child2"})})]}),new e.bO({x:0,y:12,width:6,height:10,isResizable:!0,isDraggable:!0,body:new e.Z({$data:l({seriesCount:10}),pluginId:"timeseries",title:"Outsider, has its own query",key:"Outsider-own-query"})}),new e.bO({x:6,y:12,width:12,height:10,isResizable:!0,isDraggable:!0,body:new e.Z({pluginId:"timeseries",title:"Outsider, uses global query",key:"Outsider-global-query"})})]}),$timeRange:new e.gg,$data:l(),actions:[new e.n7({}),new e.vf({})]})}var y=a(22107);function S(){return new g.W({title:"Query variable",$variables:new e.hT({variables:[new e.eO({name:"metric",query:"job : job, instance : instance"}),new e.l3({name:"datasource",pluginId:"prometheus"}),new e.$1({name:"instance (using datasource variable)",refresh:y.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})"},datasource:{uid:"${datasource}"}}),new e.$1({name:"label values (on time range refresh)",refresh:y.Bd.onTimeRangeChanged,query:{query:"label_values(go_gc_duration_seconds, ${metric})"},datasource:{uid:"gdev-prometheus",type:"prometheus"}}),new e.$1({name:"legacy (graphite)",refresh:y.Bd.onTimeRangeChanged,query:{queryType:"Default",target:"stats.response.*"},datasource:{uid:"gdev-graphite",type:"graphite"}})]}),body:new e.QY({direction:"row",children:[new e.fy({width:"40%",body:new e.S$({text:"metric: ${metric}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function I(){return new g.W({title:"Scene with rows",body:new e.QY({direction:"column",children:[new e.Gb({title:"Overview",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})}),new e.Gb({title:"More server details",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})}),new e.fy({body:new e.Z({pluginId:"timeseries",title:"Fill height"})})]})})]}),$timeRange:new e.gg,$data:l(),actions:[new e.n7({}),new e.vf({})]})}function $(){return new g.W({title:"Transformations demo",body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"Source data (global query"})}),new e.fy({body:new e.Z({pluginId:"stat",title:"Transformed data",$data:new e.bM({transformations:[{id:"reduce",options:{reducers:["last","mean"]}}]})})})]})}),new e.fy({body:new e.Z({$data:new e.bM({$data:l(),transformations:[{id:"reduce",options:{reducers:["mean"]}}]}),pluginId:"stat",title:"Query with predefined transformations"})})]})})]}),$timeRange:new e.gg,$data:l(),actions:[new e.n7({}),new e.vf({})]})}function p(){return new g.W({title:"Variables",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"server",text:"",delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:"pod",delayMs:1e3,isMulti:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:"handler",delayMs:1e3,text:"",options:[]}),new e.eO({name:"custom",query:"A : 10,B : 20"}),new e.l3({name:"ds",pluginId:"testdata"}),new e.Dm({name:"textbox",value:"default value"})]}),body:new e.QY({direction:"row",children:[new e.fy({body:new e.QY({direction:"column",children:[new e.fy({body:new e.QY({children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"handler: $handler",$data:l({alias:"handler: $handler"})})}),new e.fy({body:new e.S$({text:"Text: ${textbox}",fontSize:20,align:"center"})}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]})}),new e.fy({body:new e.Gb({title:"Collapsable inner scene",canCollapse:!0,body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"handler: $handler",$data:l({alias:"handler: $handler"})})})]})})})]})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function R(){return new g.W({title:"Variables with All values",$variables:new e.hT({variables:[new e.gU({name:"server",query:"A.*",value:"AA",text:"AA",includeAll:!0,defaultToAll:!0,delayMs:1e3,options:[]}),new e.gU({name:"pod",query:"A.$server.*",value:[],delayMs:1e3,isMulti:!0,includeAll:!0,defaultToAll:!0,text:"",options:[]}),new e.gU({name:"handler",query:"A.$server.$pod.*",value:[],delayMs:1e3,includeAll:!0,defaultToAll:!1,isMulti:!0,text:"",options:[]})]}),body:new e.QY({direction:"row",children:[new e.fy({body:new e.Z({pluginId:"timeseries",title:"handler: $handler",$data:l({alias:"handler: $handler"})})}),new e.fy({width:"40%",body:new e.S$({text:"server: ${server} pod:${pod}",fontSize:20,align:"center"})})]}),$timeRange:new e.gg,actions:[new e.n7({}),new e.vf({})],controls:[new e.dn({})]})}function D(){return[{title:"Scene with rows",getScene:I},{title:"Grid with rows and different queries",getScene:w},{title:"Grid with rows and different queries and time ranges",getScene:r},{title:"Multiple grid layouts test",getScene:P},{title:"Variables",getScene:p},{title:"Variables with All values",getScene:R},{title:"Query variable",getScene:S},{title:"Transformations demo",getScene:$}]}const C={};function O(f){if(C[f])return C[f];const b=D().find(x=>x.title===f);return b&&(C[f]=b.getScene()),C[f]}},20195:(B,m,a)=>{a.d(m,{UV:()=>t});const e=Object.freeze([0,0]);var t=(r=>(r.Annotations="annotations",r.Arrow="arrow",r.CSVContent="csv_content",r.CSVFile="csv_file",r.CSVMetricValues="csv_metric_values",r.DataPointsOutsideRange="datapoints_outside_range",r.ExponentialHeatmapBucketData="exponential_heatmap_bucket_data",r.FlameGraph="flame_graph",r.GrafanaAPI="grafana_api",r.LinearHeatmapBucketData="linear_heatmap_bucket_data",r.Live="live",r.Logs="logs",r.ManualEntry="manual_entry",r.NoDataPoints="no_data_points",r.NodeGraph="node_graph",r.PredictableCSVWave="predictable_csv_wave",r.PredictablePulse="predictable_pulse",r.RandomWalk="random_walk",r.RandomWalkTable="random_walk_table",r.RandomWalkWithError="random_walk_with_error",r.RawFrame="raw_frame",r.ServerError500="server_error_500",r.Simulation="simulation",r.SlowQuery="slow_query",r.StreamingClient="streaming_client",r.TableStatic="table_static",r.Trace="trace",r.USA="usa",r.VariablesQuery="variables-query",r))(t||{});const g={fields:[],states:[]},l={csvWave:[],points:[],scenarioId:"random_walk"}}}]);

//# sourceMappingURL=scenes.059d9c1ed1753c476a4a.js.map