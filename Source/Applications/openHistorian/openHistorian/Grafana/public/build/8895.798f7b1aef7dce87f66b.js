"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8895],{28895:(Ft,ht,w)=>{w.d(ht,{pm:()=>q,GY:()=>Zt,c5:()=>jt,EI:()=>St,K1:()=>Ht,uB:()=>Wt,iE:()=>Dt,Qe:()=>Ot,Or:()=>Gt});var K=w(24293),et=w(28240),lt=w(83195),b=w(11261),st=w(50082),Z=w(58563),M=w(47737),f=w(73060),h=w(46294),m=w(39624),g=w(73134),d=w(52622),v=w(51336),L=w(52811),z=w(16895),F=w(36613),k=w(23596),dt=w(39758),yt=w(4134);const{round:E,min:Bt,ceil:It}=Math,Tt=2;let Pt=6;const Ut=dt.ur;function Rt(e,o,n,r,s){(0,dt.mn)(n,e,Ut,o,(u,i,c)=>{let l=r*i,y=r*c;s(u,l,y)})}function $t(e){const{mode:o,numSeries:n,isDiscrete:r,hasMappedNull:s,rowHeight:u=0,colWidth:i=0,showValue:c,mergeValues:l=!1,theme:y,label:A,formatValue:I,alignValue:N="left",getTimeRange:S,getValueColor:X,getFieldConfig:ft,hoverMulti:it}=e;let H,T;const At=t=>{T=Array(n).fill(null).map(a=>Array(t).fill(null))},C=`500 ${Math.round(12*devicePixelRatio)}px ${y.typography.fontFamily}`,R=Array(n).fill(null);let Y=null;const ct=[i,1/0],Qt=1-ct[0],kt=(ct[1]??1/0)*F.A.pxRatio,vt=new Map,Ct=new Map;function qt(t){vt.forEach((a,p)=>{t.fillStyle=p,t.fill(a)}),Ct.forEach((a,p)=>{t.strokeStyle=p,t.stroke(a)}),vt.clear(),Ct.clear()}function bt(t,a,p,x,U,V,P,B,$,D,_,O,nt){P=Math.max(1,P);const G=X(D+1,O),gt=ft(D),rt=Lt(gt,G);if(T[D][_]={x:E(U-p),y:E(V-x),w:P,h:B,sidx:D+1,didx:_,fillColor:rt},nt){let wt=rt,tt=vt.get(wt);if(tt==null&&vt.set(wt,tt=new Path2D),a(tt,U,V,P,B),$){let j=G,W=Ct.get(j);W==null&&Ct.set(j,W=new Path2D),a(W,U+$/2,V+$/2,P-$,B-$)}}else t.beginPath(),a(t,U,V,P,B),t.fillStyle=rt,t.fill(),$&&(t.beginPath(),a(t,U+$/2,V+$/2,P-$,B-$),t.strokeStyle=G,t.lineWidth=$,t.stroke())}const Xt=(t,a,p,x)=>(F.A.orient(t,a,(U,V,P,B,$,D,_,O,nt,G,gt,rt,wt,tt)=>{let j=E((U.width||0)*F.A.pxRatio),W=r(a),J=W&&s(a);t.ctx.save(),tt(t.ctx,t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),Rt(u,a-1,n,gt,(pt,Mt,ut)=>{if(o===q.Changes)for(let Q=0;Q<P.length;Q++){let mt=P[Q];if(mt!=null||J){let xt=Math.round(D(V[Q],B,G,O)),ot=Q;for(;++ot<P.length&&(P[ot]===void 0||l&&P[ot]===mt););let at=ot===P.length?O+G+j:Math.round(D(V[ot],B,G,O));bt(t.ctx,tt,O,nt,xt,E(nt+Mt),at-xt,E(ut),j,pt,Q,mt,W),Q=ot-1}}else if(o===q.Samples){let Q=D(V[1],B,G,O)-D(V[0],B,G,O),mt=Q*Qt,xt=E(Bt(kt,Q-mt)-j),ot=xt/2;for(let at=p;at<=x;at++){let Vt=P[at];if(Vt!=null||J){let se=D(V[at],B,G,O);bt(t.ctx,tt,O,nt,E(se-ot),E(nt+Mt),xt,E(ut),j,pt,at,Vt,W)}}}}),W&&(t.ctx.lineWidth=j,qt(t.ctx)),t.ctx.restore()}),null),_t=I==null||c===d.yL.Never?!1:(t,a,p,x)=>(t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),t.ctx.font=C,t.ctx.textAlign=o===q.Changes?N:"center",t.ctx.textBaseline="middle",F.A.orient(t,a,(U,V,P,B,$,D,_,O,nt,G,gt)=>{let rt=E((U.width||0)*F.A.pxRatio),tt=r(a)&&s(a),j=E(_(Nt[a-1],$,gt,nt));for(let W=0;W<P.length;W++)if(P[W]!=null||tt){const J=T[a-1][W];if(!J||J.x>=G)continue;let pt=Math.floor(J?.w/Pt);if(c===d.yL.Auto&&pt<2)continue;let Mt=I(a,P[W]),ut=E(J.x+O+J.w/2);o===q.Changes&&(N==="left"?ut=E(J.x+O+rt+Tt):N==="right"&&(ut=E(J.x+O+J.w-rt-Tt))),t.ctx.fillStyle=y.colors.getContrastText(J.fillColor,3),t.ctx.fillText(Mt.slice(0,pt),ut,j)}}),t.ctx.restore(),!1),te=t=>{let a="";for(let p=32;p<=126;p++)a+=String.fromCharCode(p);Pt=Math.ceil(t.ctx.measureText(a).width/a.length*F.A.pxRatio),Pt+=2.5,t.root.querySelectorAll(".u-cursor-pt").forEach(p=>{p.style.borderRadius="0"})},ee=t=>{H=H||new yt.C$(0,0,t.bbox.width,t.bbox.height),H.clear(),At(t.data[0].length),t.series.forEach(a=>{a._paths=null})};function le(t,a,p=!1){R.fill(null),Y=null,!(t<0)&&H.get(t,0,F.A.pxRatio,1e4,x=>{t>=x.x&&t<=x.x+x.w&&(a>=x.y&&a<=x.y+x.h?R[x.sidx]=Y=x:(it||p)&&(R[x.sidx]=x))})}const ne={x:o===q.Changes,y:!1,dataIdx:(t,a)=>{if(a===1){if(H.o.length===0&&H.q==null)for(const U of T)for(const V of U)V&&H.add(V);let p=t.cursor.left*F.A.pxRatio,x=t.cursor.top*F.A.pxRatio;le(p,x,t.cursor.event==null)}return R[a]?.didx},focus:{prox:1e3,dist:(t,a)=>Y?.sidx===a?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(t,a)=>{let p=R[a],x=p!=null;return{left:x?p.x/F.A.pxRatio:-10,top:x?p.y/F.A.pxRatio:-10,width:x?p.w/F.A.pxRatio:0,height:x?p.h/F.A.pxRatio:0}}}},Nt=Array(n).fill(0),oe=[0,1];return{cursor:ne,xSplits:o===q.Samples?(t,a,p,x,U,V)=>{let P=[],B=t.data[0][1]-t.data[0][0],$=It(U/B);for(let D=0;D<t.data[0].length;D+=$){let _=t.data[0][D];_>=p&&_<=x&&P.push(_)}return P}:null,xRange:t=>{const a=S();let p=a.from.valueOf(),x=a.to.valueOf();if(o===q.Samples){let P=(t.data[0][1]-t.data[0][0])/2;p<=t.data[0][0]&&(p=t.data[0][0]-P);let B=t.data[0].length-1;x>=t.data[0][B]&&(x=t.data[0][B]+P)}return[p,x]},ySplits:t=>(Rt(u,null,n,t.bbox.height,(a,p,x)=>{let U=E(p+x/2);Nt[a]=t.posToVal(U/F.A.pxRatio,L.s)}),Nt),yValues:(t,a)=>a.map((p,x)=>A(x+1)),yRange:oe,drawPaths:Xt,drawPoints:_t,init:te,drawClear:ee}}function Lt(e,o){if(o[0]==="#"&&o.length===9)return o;const n=(e.fillOpacity??100)/100;return(0,k.X4)(o,n)}var q=(e=>(e.Changes="changes",e.Samples="samples",e))(q||{});const zt={lineWidth:0,fillOpacity:80},Dt=({frame:e,theme:o,timeZones:n,getTimeRange:r,mode:s,rowHeight:u,colWidth:i,showValue:c,alignValue:l,mergeValues:y,getValueColor:A,hoverMulti:I})=>{const N=new v.e(n[0]),S="x",X=C=>{const R=C.config?.color?.mode;return!(R&&C.display&&R.startsWith("continuous-"))},ft=C=>C.config.mappings?.some(R=>R.type===g.dM.SpecialValue&&R.options.match==="null")||!1,it=(C,R)=>{const Y=e.fields[C];return Y.state?.origin?.fieldIndex!==void 0&&Y.state?.origin?.frameIndex!==void 0&&A?A(Y.state?.origin?.frameIndex,Y.state?.origin?.fieldIndex,R):K.F},H={mode:s,numSeries:e.fields.length-1,isDiscrete:C=>X(e.fields[C]),hasMappedNull:C=>ft(e.fields[C]),mergeValues:y,rowHeight:u,colWidth:i,showValue:c,alignValue:l,theme:o,label:C=>(0,et.Ct)(e.fields[C],e),getFieldConfig:C=>e.fields[C].config.custom,getValueColor:it,getTimeRange:r,formatValue:(C,R)=>(0,lt.cN)(e.fields[C].display(R)),hoverMulti:I},T=$t(H);N.addHook("init",T.init),N.addHook("drawClear",T.drawClear),N.setPrepData(C=>(0,z.bq)(C[0],(0,z.ro)(C[0]))),N.setCursor(T.cursor),N.addScale({scaleKey:S,isTime:!0,orientation:d.Lt.Horizontal,direction:d.ON.Right,range:T.xRange}),N.addScale({scaleKey:L.s,isTime:!1,orientation:d.Lt.Vertical,direction:d.ON.Up,range:T.yRange}),N.addAxis({scaleKey:S,isTime:!0,splits:T.xSplits,placement:d.vM.Bottom,timeZone:n[0],theme:o,grid:{show:!0}}),N.addAxis({scaleKey:L.s,isTime:!1,placement:d.vM.Left,splits:T.ySplits,values:T.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:o});let At=0;for(let C=0;C<e.fields.length;C++){if(C===0)continue;const R=e.fields[C],Y=R.config,ct={...zt,...Y.custom};R.state.seriesIndex=At++,N.addSeries({scaleKey:L.s,pathBuilder:T.drawPaths,pointsBuilder:T.drawPoints,lineWidth:ct.lineWidth,fillOpacity:ct.fillOpacity,theme:o,show:!ct.hideFrom?.viz,thresholds:Y.thresholds,dataFrameFieldIndex:R.state?.origin})}return N};function Et(e){let o=e.config.custom?.spanNulls;return o?o===!0?1/0:o:-1}function Kt(e,o){const n=e.config.thresholds;if(e.type!==b.PU.number||!n||!n.steps.length)return;const r=St(e.config,o);if(r.length!==n.steps.length)return;const s=new Map,u=new Map;for(let l=0;l<r.length;l++)s.set(n.steps[l],r[l].label),u.set(r[l].label,r[l].color);let i=e.values;const c=new Array(e.values.length);if(n.mode===st.O.Percentage){const{min:l,max:y}=(0,Z.xg)(e),A=y-l;i=i.map(I=>I==null?I:(I-l)/A*100)}for(let l=0;l<c.length;l++){const y=i[l];y==null?c[l]=y:c[l]=s.get((0,M.yQ)(y,n.steps))}return{...e,config:{...e.config,custom:{...e.config.custom,spanNulls:Et(e)}},type:b.PU.string,values:c,display:l=>({text:String(l),color:u.get(String(l)),numeric:NaN})}}function Ot(e,o,n,r){if(!e?.length)return{warn:"No data in response"};(0,et.Fm)(e);let s=!1;const u=[];for(let i of e){let c=-1,l=-1;for(let S=0;S<i.fields.length;S++)if(i.fields[S].type===b.PU.time){if(c===-1)c=S;else if(l===-1){l=S;break}}let y=c!==-1,A=!1;if(i=(0,f.Yj)(i,c),l!==-1){let S={...i,fields:i.fields.filter((ft,it)=>it!==l)},X={length:i.length,fields:[i.fields[l]]};i=(0,f.Fd)({frames:[S,X],keepDisplayNames:!0,nullMode:()=>f.WO}),i.fields.forEach((ft,it)=>{if(it>0){let H=ft.values;for(let T=0;T<H.length;T++)H[T]==null&&(H[T]=null)}}),A=!0}let I=(0,h.M)({frame:i,refFieldPseudoMin:n.from.valueOf(),refFieldPseudoMax:n.to.valueOf()});I!==i&&(A=!0),i=(0,m.C)(I);const N=[];for(let S of i.fields)if(!S.config.custom?.hideFrom?.viz)switch(S.type){case b.PU.time:y=!0,s=!0,N.push(S);break;case b.PU.enum:case b.PU.number:if(o&&S.config.color?.mode===K.Y.Thresholds){const X=Kt(S,r);if(X){N.push(X),A=!0;continue}}case b.PU.boolean:case b.PU.string:S={...S,config:{...S.config,custom:{...S.config.custom,spanNulls:Et(S)}}},A=!0,N.push(S);break;default:A=!0}y&&N.length>1&&(s=!0,A?u.push({...i,fields:N}):u.push(i))}return s?u.length?{frames:u}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function Wt(e){const o=[];for(let n of e){const r=n.fields.filter(s=>s.type===b.PU.time);if(r.length>0)for(let s of n.fields)s.type!==b.PU.time&&o.push({fields:[...r,s],length:n.length})}return o}function St(e,o,n){const r=[],s=n||e.thresholds;if(!s||!s.steps.length)return r;const u=s.steps,i=(0,lt.j_)(s.mode===st.O.Percentage?"percent":e.unit??""),c=l=>(0,lt.cN)(i(l,e.decimals??void 0));for(let l=0;l<u.length;l++){let y=u[l],A=y.value,I="",N="";A===-1/0&&l<u.length-1?(A=u[l+1].value,I="< "):N="+",r.push({label:`${I}${c(A)}${N}`,color:o.visualization.getColorByName(y.color),yAxis:1})}return r}function Ht(e,o){const n=[];if(!e)return n;for(let r of e){const{options:s,type:u}=r;if(u===g.dM.ValueToText)for(let[i,c]of Object.entries(s)){const l=c.color;n.push({label:i,color:o.visualization.getColorByName(l??K.F),yAxis:1})}if(u===g.dM.RangeToText){const{from:i,result:c,to:l}=s,{text:y,color:A}=c,I=y?`[${i} - ${l}] ${y}`:`[${i} - ${l}]`;n.push({label:I,color:o.visualization.getColorByName(A??K.F),yAxis:1})}if(u===g.dM.RegexToText){const{pattern:i,result:c}=s,{text:l,color:y}=c,A=`${l||i}`;n.push({label:A,color:o.visualization.getColorByName(y??K.F),yAxis:1})}if(u===g.dM.SpecialValue){const{match:i,result:c}=s,{text:l,color:y}=c,A=`${l||i}`;n.push({label:A,color:o.visualization.getColorByName(y??K.F),yAxis:1})}}return n}function Gt(e,o,n){if(!(!e||o.showLegend===!1))return Jt(Yt(e),n)}function Jt(e,o){if(!e.length)return;const n=[],r=e[0].config,s=r.color?.mode??K.Y.Fixed,u=r.thresholds;if(s===K.Y.Thresholds&&u?.steps&&u.steps.length>1)return St(r,o);if(s.startsWith("continuous"))return;const i=new Map;return e.forEach(c=>{c.config.custom?.hideFrom?.legend||c.values.forEach(l=>{let y=c.display(l);y.color&&i.set(y.text,y.color)})}),i.forEach((c,l)=>{l.length>0&&n.push({label:l,color:o.visualization.getColorByName(c??K.F),yAxis:1})}),n}function Yt(e){const o=[];for(const n of e)for(const r of n.fields)r.type!==b.PU.time&&o.push(r);return o}function Zt(e,o){let n,r=o+1;if(r>=e.values.length)return null;const s=e.values[o];for(;n===void 0;){if(r>=e.values.length)return null;const u=e.values[r];u===void 0||u===s?r++:n=r}return n}function jt(e){if(e<0||Number.isNaN(e))return"";let o,n,r,s,u,i,c,l;return c=Math.floor(e/1e3),i=Math.floor(c/60),c=c%60,u=Math.floor(i/60),i=i%60,s=Math.floor(u/24),u=u%24,o=Math.floor(s/365),o>0&&(s=s%365),n=Math.floor(s/30),n>0&&(s=s%30),r=Math.floor(s/7),r>0&&(s=s%7),l=Math.round(e%1e3*1e3)/1e3,(o>0?o+"y "+(n>0?n+"mo ":"")+(r>0?r+"w ":"")+(s>0?s+"d ":""):n>0?n+"mo "+(r>0?r+"w ":"")+(s>0?s+"d ":""):r>0?r+"w "+(s>0?s+"d ":""):s>0?s+"d "+(u>0?u+"h ":""):u>0?u+"h "+(i>0?i+"m ":""):i>0?i+"m "+(c>0?c+"s ":""):c>0?c+"s "+(l>0?l+"ms ":""):l>0?l+"ms ":"0").trim()}},39758:(Ft,ht,w)=>{w.d(ht,{mn:()=>Z,ur:()=>et});var K=w(97706);const et=1,lt=2,b=3,st=(M,f,h,m)=>(0,K.h)(f+M*(h+m),6);function Z(M,f,h,m,g){let d=1-f,v=h===et?d/(M-1):h===lt?d/M:h===b?d/(M+1):0;(isNaN(v)||v===1/0)&&(v=0);let L=h===et?0:h===lt?v/2:h===b?v:0,z=f/M,F=(0,K.h)(z,6);if(m==null)for(let k=0;k<M;k++)g(k,st(k,L,z,v),F);else g(m,st(m,L,z,v),F)}},4134:(Ft,ht,w)=>{w.d(ht,{C$:()=>Z,HY:()=>st,Tr:()=>b,ur:()=>lt});const K=10,et=4;function lt(M,f,h,m,g,d){return M>=h&&M<=g&&f>=m&&f<=d}function b(M,f,h){let m=[];if(M.o.length&&m.push(...M.o.filter(g=>(f==null||g.sidx===f)&&(h==null||g.didx===h))),M.q)for(let g=0;g<M.q.length;g++)m.push(...b(M.q[g],f,h));return m}function st(M,f){return M.x<=f.x+f.w&&M.x+M.w>=f.x&&M.y+M.h>=f.y&&M.y<=f.y+f.h}class Z{constructor(f,h,m,g,d=0){this.x=f,this.y=h,this.w=m,this.h=g,this.l=d,this.o=[],this.q=null}split(){let f=this,h=f.x,m=f.y,g=f.w/2,d=f.h/2,v=f.l+1;f.q=[new Z(h+g,m,g,d,v),new Z(h,m,g,d,v),new Z(h,m+d,g,d,v),new Z(h+g,m+d,g,d,v)]}quads(f,h,m,g,d){let v=this,L=v.q,z=v.x+v.w/2,F=v.y+v.h/2,k=h<F,dt=f<z,yt=f+m>z,E=h+g>F;k&&yt&&d(L[0]),dt&&k&&d(L[1]),dt&&E&&d(L[2]),yt&&E&&d(L[3])}add(f){let h=this;if(h.q!=null)h.quads(f.x,f.y,f.w,f.h,m=>{m.add(f)});else{let m=h.o;if(m.push(f),m.length>K&&h.l<et){h.split();for(let g=0;g<m.length;g++){let d=m[g];h.quads(d.x,d.y,d.w,d.h,v=>{v.add(d)})}h.o.length=0}}}get(f,h,m,g,d){let v=this,L=v.o;for(let z=0;z<L.length;z++)d(L[z]);v.q!=null&&v.quads(f,h,m,g,z=>{z.get(f,h,m,g,d)})}clear(){this.o.length=0,this.q=null}}}}]);

//# sourceMappingURL=8895.798f7b1aef7dce87f66b.js.map