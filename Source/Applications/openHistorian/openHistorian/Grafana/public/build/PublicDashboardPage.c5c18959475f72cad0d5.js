"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7197],{20851:(Y,S,o)=>{o.d(S,{GU:()=>E,YO:()=>v,qm:()=>b});var s=o(74848),i=o(32196),n=o(96540),p=o(40845),x=o(19361),D=o(38645);const b=({children:a,enterAnimation:c=!0})=>{const j=(0,p.of)(v);return(0,s.jsx)("div",{className:(0,i.cx)(j.loginInnerBox,c&&j.enterAnimation),children:a})},E=({children:a,branding:c,isChangingPassword:j})=>{const g=(0,p.of)(v),[B,M]=(0,n.useState)(!1),L=c?.loginSubtitle??x.M.GetLoginSubTitle(),C=c?.loginTitle??x.M.LoginTitle,T=c?.loginBoxBackground||x.M.LoginBoxBackground(),W=c?.loginLogo,O=c?.hideEdition??x.M.HideEdition;return(0,n.useEffect)(()=>M(!0),[]),(0,s.jsxs)(x.M.LoginBackground,{className:(0,i.cx)(g.container,B&&g.loginAnim,c?.loginBackground),children:[(0,s.jsx)("div",{className:g.loginMain,children:(0,s.jsxs)("div",{className:(0,i.cx)(g.loginContent,T,"login-content-box"),children:[(0,s.jsxs)("div",{className:g.loginLogoWrapper,children:[(0,s.jsx)(x.M.LoginLogo,{className:g.loginLogo,logo:W}),(0,s.jsx)("div",{className:g.titleWrapper,children:j?(0,s.jsx)("h1",{className:g.mainTitle,children:"Update your password"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:g.mainTitle,children:C}),L&&(0,s.jsx)("h3",{className:g.subTitle,children:L})]})})]}),(0,s.jsx)("div",{className:g.loginOuterBox,children:a})]})}),c?.hideFooter?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(D.wi,{hideEdition:O,customLinks:c?.footerLinks})]})},h=(0,i.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,v=a=>({loginMain:(0,i.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,i.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,i.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,i.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,i.css)({width:"100%",maxWidth:60,marginBottom:a.spacing(2),[a.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,i.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:a.spacing(3)}),titleWrapper:(0,i.css)({textAlign:"center"}),mainTitle:(0,i.css)({fontSize:22,[a.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,i.css)({fontSize:a.typography.size.md,color:a.colors.text.secondary}),loginContent:(0,i.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:a.shape.radius.default,padding:a.spacing(2,0),opacity:0,[a.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[a.breakpoints.up("sm")]:{minHeight:a.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,i.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,i.css)({padding:a.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[a.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,i.css)({[a.transitions.handleMotion("no-preference")]:{animation:`${h} ease-out 0.2s`}})})},20302:(Y,S,o)=>{o.r(S),o.d(S,{default:()=>us});var s=o(74848),i=o(32264),n=o(32196),p=o(96540),x=o(54148),D=o(64388),b=o(13544),E=o(81887),h=o(40845),v=o(67061),a=o(14578),c=o(21780),j=o(39419);const g="https://grafana.com/?src=grafananet&cnt=public-dashboards",B="public/img/grafana_text_logo_light.svg",M="public/img/grafana_text_logo_dark.svg",L="grafana-logo",C=t=>{const e=(0,h.$j)(),r=(0,h.of)(O),{footerHide:f,footerText:l,footerLink:m,footerLogo:u,headerLogoHide:P}=t||{footerHide:!1,footerText:"Powered by",footerLogo:L,footerLink:g,headerLogoHide:!1};return{footerHide:f,footerText:(0,s.jsx)("span",{className:r.text,children:l}),footerLogo:u===L?e.isDark?B:M:u,footerLink:m,headerLogoHide:P}};let T=()=>C();function W(t){T=()=>C(t)}const O=t=>({text:(0,n.css)({color:t.colors.text.secondary,fontSize:t.typography.body.fontSize})}),$=b.Tp.pages.PublicDashboard,U=function(){const t=(0,h.of)(Z),e=T();return e.footerHide?null:(0,s.jsx)("div",{className:t.footer,"data-testid":$.footer,children:(0,s.jsxs)("a",{className:t.link,href:e.footerLink,target:"_blank",rel:"noreferrer noopener",children:[e.footerText," ",(0,s.jsx)("img",{className:t.logoImg,alt:"",src:e.footerLogo})]})})},Z=t=>({footer:(0,n.css)({display:"flex",justifyContent:"end",height:"30px",backgroundColor:t.colors.background.canvas,position:"sticky",bottom:0,zIndex:t.zIndex.navbarFixed,padding:t.spacing(.5,0)}),link:(0,n.css)({display:"flex",alignItems:"center"}),logoImg:(0,n.css)({height:"16px",marginLeft:t.spacing(.5)})});var R=o(19361),V=o(20851);const F=b.Tp.pages.PublicDashboard.NotAvailable,A=({paused:t})=>{const e=(0,h.of)(J),r=(0,h.of)(V.YO),f=R.M.LoginBoxBackground();return(0,s.jsx)(R.M.LoginBackground,{className:e.container,"data-testid":F.container,children:(0,s.jsxs)("div",{className:(0,n.cx)(e.box,f),children:[(0,s.jsx)(R.M.LoginLogo,{className:r.loginLogo}),(0,s.jsx)("p",{className:e.title,"data-testid":F.title,children:t?"This dashboard has been paused by the administrator":"The dashboard you are trying to access does not exist"}),t&&(0,s.jsx)("p",{className:e.description,"data-testid":F.pausedDescription,children:"Try again later"})]})})},J=t=>({container:(0,n.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",":before":{opacity:1}}),box:(0,n.css)({width:"608px",display:"flex",alignItems:"center",flexDirection:"column",gap:t.spacing(4),zIndex:1,borderRadius:t.shape.borderRadius(4),padding:t.spacing(6,8),opacity:1}),title:(0,n.css)({fontSize:t.typography.h3.fontSize,textAlign:"center",margin:0}),description:(0,n.css)({fontSize:t.typography.h5.fontSize,margin:0})});var Q=o(95425),X=o(72255);const G=b.Tp.pages.PublicDashboardScene;function w({route:t}){const{accessToken:e=""}=(0,x.g)(),r=(0,X.sP)(),f=(0,h.of)(H),{dashboard:l,isLoading:m,loadError:u}=r.useState();return(0,p.useEffect)(()=>(r.loadDashboard({uid:e,route:Q.Z4.Public}),()=>{r.clearState()}),[r,e,t.routeName]),l?l.state.meta.publicDashboardEnabled===!1?(0,s.jsx)(A,{paused:!0}):l.state.meta.dashboardNotFound?(0,s.jsx)(A,{}):l.state.controls?.state.hideTimeControls?(0,s.jsx)(k,{model:l}):(0,s.jsx)(E.$L,{scene:l,children:(0,s.jsx)(k,{model:l})}):(0,s.jsxs)(c.YW,{layout:D.k.Custom,className:f.loadingPage,"data-testid":G.loadingPage,children:[m&&(0,s.jsx)(j.A,{}),u&&(0,s.jsx)("h2",{children:u})]})}function k({model:t}){const[e,r]=(0,p.useState)(!1),{controls:f,title:l}=t.useState(),{timePicker:m,refreshPicker:u,hideTimeControls:P}=f.useState(),y=t.getBodyToRender(),d=(0,h.of)(H);return(0,p.useEffect)(()=>(r(!0),t.activate()),[t]),e?(0,s.jsxs)(c.YW,{layout:D.k.Custom,className:d.page,"data-testid":G.page,children:[(0,s.jsxs)("div",{className:d.controls,children:[(0,s.jsxs)(v.B,{alignItems:"center",children:[(0,s.jsx)("div",{className:d.iconTitle,children:(0,s.jsx)(a.I,{name:"grafana",size:"lg","aria-hidden":!0})}),(0,s.jsx)("span",{className:d.title,children:l})]}),!P&&(0,s.jsxs)(v.B,{children:[(0,s.jsx)(m.Component,{model:m}),(0,s.jsx)(u.Component,{model:u})]})]}),(0,s.jsx)("div",{className:d.body,children:(0,s.jsx)(y.Component,{model:y})}),(0,s.jsx)(U,{})]}):null}function H(t){return{loadingPage:(0,n.css)({justifyContent:"center"}),page:(0,n.css)({padding:t.spacing(0,2)}),controls:(0,n.css)({display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:t.zIndex.navbarFixed,background:t.colors.background.canvas,padding:t.spacing(2,0),[t.breakpoints.down("sm")]:{flexDirection:"column",gap:t.spacing(1),alignItems:"stretch"}}),iconTitle:(0,n.css)({display:"none",[t.breakpoints.up("sm")]:{display:"flex",alignItems:"center"}}),title:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",fontSize:t.typography.h4.fontSize,margin:0}),body:(0,n.css)({label:"body",display:"flex",flex:1,flexDirection:"column",overflowY:"auto"})}}var q=o(84596),_=o(95247),ss=o(76888),ts=o(81862),z=o(31678),os=o(62367),es=o(82138),ns=o(9980),as=o(2118),K=o(74856),is=o(20470);const rs=b.Tp.pages.PublicDashboard,ls=({dashboard:t})=>{const e=(0,z.useDispatch)(),r=T(),f=l=>{e((0,ts.Cj)(l))};return(0,s.jsx)(_.d,{title:t.title,pageIcon:r.headerLogoHide?void 0:"grafana",buttonOverflowAlignment:"right",children:!t.timepicker.hidden&&(0,s.jsx)(os.$,{dashboard:t,onChangeTimeZone:f})})},cs=t=>{const{route:e}=t,r=(0,x.zy)(),{accessToken:f}=(0,x.g)(),l=(0,z.useDispatch)(),m=(0,ss.Il)(),u=(0,q.A)({...t,location:r}),P=(0,h.of)(ds),y=(0,z.useSelector)(N=>N.dashboard),d=y.getModel();return(0,p.useEffect)(()=>{l((0,is.vR)({routeName:e.routeName,fixUrl:!1,accessToken:f,keybindingSrv:m.keybindings}))},[e.routeName,f,m.keybindings,l]),(0,p.useEffect)(()=>{if(u?.location.search!==r.search){const N=u?.queryParams,I=t.queryParams;(I?.from!==N?.from||I?.to!==N?.to)&&!d?.timepicker.hidden&&(0,K.jG)().updateTimeRangeFromUrl(),!N?.refresh&&I?.refresh&&(0,K.jG)().setAutoRefresh(I.refresh)}},[u,r.search,t.queryParams,d?.timepicker.hidden,f]),d?d.meta.publicDashboardEnabled===!1?(0,s.jsx)(A,{paused:!0}):d.meta.dashboardNotFound?(0,s.jsx)(A,{}):(0,s.jsxs)(c.YW,{pageNav:{text:d.title},layout:D.k.Custom,"data-testid":rs.page,children:[(0,s.jsx)(ls,{dashboard:d}),y.initError&&(0,s.jsx)(es.y,{initError:y.initError}),(0,s.jsx)("div",{className:P.gridContainer,children:(0,s.jsx)(as.N,{dashboard:d,isEditable:!1,viewPanel:null,editPanel:null,hidePanelMenus:!0})}),(0,s.jsx)("div",{className:P.footer,children:(0,s.jsx)(U,{})})]}):(0,s.jsx)(ns.P,{initPhase:y.initPhase})},ds=t=>({gridContainer:(0,n.css)({flex:1,padding:t.spacing(2,2,2,2),overflow:"auto"}),footer:(0,n.css)({padding:t.spacing(0,2)})}),gs=cs;function fs(t){return i.$.featureToggles.publicDashboardsScene?(0,s.jsx)(w,{...t}):(0,s.jsx)(gs,{...t})}const us=fs}}]);

//# sourceMappingURL=PublicDashboardPage.c5c18959475f72cad0d5.js.map