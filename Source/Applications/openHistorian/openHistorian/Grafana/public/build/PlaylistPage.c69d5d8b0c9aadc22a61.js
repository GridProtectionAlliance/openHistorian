"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{72557:(Q,T,s)=>{s.d(T,{A:()=>L});var t=s(74848),i=s(96540),E=s(14186),y=s(67647),A=s(55852),B=s(73725);class L extends i.PureComponent{render(){const{searchQuery:b,linkButton:e,setSearchQuery:j,target:v,placeholder:C="Search by name or type",sortPicker:p}=this.props,g={href:e?.href,disabled:e?.disabled};return v&&(g.target=v),(0,t.jsxs)("div",{className:"page-action-bar",children:[(0,t.jsx)(E.I,{grow:!0,children:(0,t.jsx)(y.Z,{value:b,onChange:j,placeholder:C})}),p&&(0,t.jsx)(B.r,{onChange:p.onChange,value:p.value,getSortOptions:p.getSortOptions}),e&&(0,t.jsx)(A.z9,{...g,children:e.title})]})}}},44450:(Q,T,s)=>{s.r(T),s.d(T,{PlaylistPage:()=>Z,default:()=>ot});var t=s(74848),i=s(96540),E=s(16817),y=s(55852),A=s(69529),B=s(72109),L=s(96374),O=s(21780),b=s(72557),e=s(8484),j=s(16233),v=s(32196),C=s(40845),p=s(72129),g=s(70255),f=s(10860),Y=s(71678),I=s(67061),H=s(93030),F=s(76885),k=s(37390),U=s(84167),P=s(88575),R=s(94354),D=s(10880),G=s(10354),J=s(10534),X=s(22699);const w=({playlistUid:a,onDismiss:n})=>{const[r,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),h=[{label:(0,e.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,e.t)("share-playlist.mode-tv","TV"),value:"tv"},{label:(0,e.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],x={};r&&(x.kiosk=r),d&&(x.autofitpanels=!0);const m=F.kM.renderUrl(`${(0,X.P_)()}/play/${a}`,x);return(0,t.jsx)(k.a,{isOpen:!0,title:(0,e.t)("share-playlist.title","Share playlist"),onDismiss:n,children:(0,t.jsxs)(U.n,{children:[(0,t.jsx)(P.D,{label:(0,e.t)("share-playlist.mode","Mode"),children:(0,t.jsx)(R.z,{value:r,options:h,onChange:o})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(D.S,{label:(0,e.t)("share-playlist.checkbox-label","Autofit"),description:(0,e.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:c=>u(c.currentTarget.checked)})}),(0,t.jsx)(P.D,{label:(0,e.t)("share-playlist.link-url-label","Link URL"),children:(0,t.jsx)(G.p,{id:"link-url-input",value:m,readOnly:!0,addonAfter:(0,t.jsx)(J.b,{icon:"copy",variant:"primary",getText:()=>m,children:(0,t.jsx)(e.x6,{i18nKey:"share-playlist.copy-link-button",children:"Copy"})})})})]})})},q=({playlist:a,setStartPlaylist:n,setPlaylistToDelete:r})=>(0,t.jsxs)(f.Z,{children:[(0,t.jsxs)(f.Z.Heading,{children:[a.name,(0,t.jsx)(Y.$s,{children:({showModal:o,hideModal:d})=>(0,t.jsx)(H._,{tooltip:(0,e.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{o(w,{playlistUid:a.uid,onDismiss:d})}})},"button-share")]}),(0,t.jsxs)(f.Z.Actions,{children:[(0,t.jsx)(y.$n,{variant:"secondary",icon:"play",onClick:()=>n(a),children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.card.start",children:"Start playlist"})}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.z9,{variant:"secondary",href:`/playlists/edit/${a.uid}`,icon:"cog",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.card.edit",children:"Edit playlist"})},"edit"),(0,t.jsx)(y.$n,{disabled:!1,onClick:()=>r(a),icon:"trash-alt",variant:"destructive",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.card.delete",children:"Delete playlist"})})]})]})]}),_=({rootProps:a})=>{const n=(0,C.of)(tt);return(0,t.jsxs)(f.Z,{...a,children:[(0,t.jsx)(f.Z.Heading,{children:(0,t.jsx)(g.A,{width:140})}),(0,t.jsx)(f.Z.Actions,{children:(0,t.jsxs)(I.B,{direction:"row",wrap:"wrap",children:[(0,t.jsx)(g.A,{containerClassName:n.button,width:142,height:32}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{containerClassName:n.button,width:135,height:32}),(0,t.jsx)(g.A,{containerClassName:n.button,width:153,height:32})]})]})})]})},M=(0,p.j)(q,_);function tt(a){return{button:(0,v.css)({lineHeight:1})}}const st=({playlists:a,setStartPlaylist:n,setPlaylistToDelete:r})=>{const o=(0,C.of)(V);return(0,t.jsx)("ul",{className:o.list,children:a.map(d=>(0,t.jsx)("li",{className:o.listItem,children:(0,t.jsx)(M,{playlist:d,setStartPlaylist:n,setPlaylistToDelete:r})},d.uid))})},et=({rootProps:a})=>{const n=(0,C.of)(V);return(0,t.jsxs)("div",{"data-testid":"playlist-page-list-skeleton",className:n.list,...a,children:[(0,t.jsx)(M.Skeleton,{}),(0,t.jsx)(M.Skeleton,{}),(0,t.jsx)(M.Skeleton,{})]})},$=(0,p.j)(st,et);function V(a){return{list:(0,v.css)({display:"grid"}),listItem:(0,v.css)({listStyle:"none"})}}var at=s(39601),lt=s(32264),nt=s(90613);const it=({playlist:a,onDismiss:n})=>{const[r,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!0),[m,c]=(0,i.useState)(!0),[S,K]=(0,i.useState)(!0),N=[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],z=()=>{const l={};r&&(l.kiosk=r),d&&(l.autofitpanels=!0),h||(l["_dash.hideTimePicker"]=!0),m||(l["_dash.hideVariables"]=!0),S||(l["_dash.hideLinks"]=!0),at.Ny.push(F.kM.renderUrl(`/playlists/play/${a.uid}`,l))};return(0,t.jsxs)(k.a,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:n,children:[(0,t.jsxs)(U.n,{children:[(0,t.jsx)(P.D,{label:"Mode",children:(0,t.jsx)(R.z,{value:r,options:N,onChange:o})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(D.S,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:d,onChange:l=>u(l.currentTarget.checked)})}),lt.$.featureToggles.dashboardScene&&(0,t.jsx)(P.D,{label:"Display dashboard controls",description:"Customize dashboard elements visibility",children:(0,t.jsx)(nt.a,{marginTop:2,marginBottom:2,children:(0,t.jsxs)(I.B,{direction:"column",alignItems:"start",justifyContent:"left",gap:2,children:[(0,t.jsx)(D.S,{label:"Time and refresh",name:"displayTimePicker",value:h,onChange:l=>x(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:"Variables",name:"displayVariableControls",value:m,onChange:l=>c(l.currentTarget.checked)}),(0,t.jsx)(D.S,{label:"Dashboard links",name:"displayLinks",value:S,onChange:l=>K(l.currentTarget.checked)})]})})})]}),(0,t.jsx)(k.a.ButtonRow,{children:(0,t.jsxs)(y.$n,{variant:"primary",onClick:z,children:["Start ",a.name]})})]})};var W=s(86022);const Z=()=>{const a=(0,W.NF)(),[n,r]=(0,i.useState)(0),[o,d]=(0,i.useState)(""),u=(0,E.A)(()=>a.getAllPlaylist(),[n]),h=(0,i.useMemo)(()=>(0,W.GM)(u.value??[],o),[o,u]),[x,m]=(0,i.useState)(),[c,S]=(0,i.useState)(),K=h&&h.length>0,N=()=>S(void 0),z=()=>{c&&a.deletePlaylist(c.uid).finally(()=>{r(n+1),S(void 0)})},l=u.loading||h.length>0||o.length>0;return(0,t.jsx)(O.YW,{actions:j.TP.isEditor?(0,t.jsx)(y.z9,{href:"/playlists/new",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.create-button.title",children:"New playlist"})}):void 0,navId:"dashboards/playlists",children:(0,t.jsxs)(O.YW.Contents,{children:[l&&(0,t.jsx)(b.A,{searchQuery:o,setSearchQuery:d}),u.loading?(0,t.jsx)($.Skeleton,{}):(0,t.jsxs)(t.Fragment,{children:[!K&&o?(0,t.jsx)(A.p,{variant:"not-found",message:(0,e.t)("playlists.empty-state.message","No playlists found")}):(0,t.jsx)($,{playlists:h,setStartPlaylist:m,setPlaylistToDelete:S}),!l&&(0,t.jsx)(A.p,{variant:"call-to-action",button:(0,t.jsx)(y.z9,{disabled:!j.TP.isEditor,href:"playlists/new",icon:"plus",size:"lg",children:(0,t.jsx)(e.x6,{i18nKey:"playlist-page.empty.button",children:"Create playlist"})}),message:(0,e.t)("playlist-page.empty.title","There are no playlists created yet"),children:(0,t.jsxs)(e.x6,{i18nKey:"playlist-page.empty.pro-tip",children:["You can use playlists to cycle dashboards on TVs without user control."," ",(0,t.jsx)(B.Y,{external:!0,href:"https://docs.grafana.org/reference/playlist/",children:"Learn more"})]})}),c&&(0,t.jsx)(L.u,{title:c.name,confirmText:(0,e.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,e.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:c.name}),onConfirm:z,isOpen:!!c,onDismiss:N}),x&&(0,t.jsx)(it,{playlist:x,onDismiss:()=>m(void 0)})]})]})})},ot=Z}}]);

//# sourceMappingURL=PlaylistPage.c69d5d8b0c9aadc22a61.js.map