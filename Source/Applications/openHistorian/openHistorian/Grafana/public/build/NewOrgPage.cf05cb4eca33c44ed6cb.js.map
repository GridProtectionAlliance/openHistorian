{"version":3,"file":"NewOrgPage.cf05cb4eca33c44ed6cb.js","mappings":"oKA6BO,SAASA,EAA4B,CAC1C,cAAAC,EACA,SAAAC,EACA,gBAAAC,EAAkB,GAClB,sBAAAC,EACA,SAAAC,EACA,WAAAC,EAAa,WACb,SAAAC,EAAW,IACX,GAAGC,CACL,EAAiB,CACf,KAAM,CAAE,aAAAC,EAAc,QAAAC,EAAS,UAAAC,EAAW,GAAGC,CAAK,KAAI,MAAW,CAC/D,KAAMN,EACN,cAAAL,CACF,CAAC,EAED,sBAAU,IAAM,CACVE,GACFO,EAAQN,CAAqB,CAEjC,EAAG,CAACM,EAASN,EAAuBD,CAAe,CAAC,KAGlD,OAAC,QACC,aAAW,OAAI,CACb,SAAUI,IAAa,OAASA,EAAW,KAAOA,EAClD,MAAO,MACT,CAAC,EACD,SAAUE,EAAaP,CAAQ,EAC9B,GAAGM,EAEH,SAAAH,EAAS,CAAE,OAAQM,EAAU,OAAQ,UAAAA,EAAW,QAAAD,EAAS,GAAGE,CAAK,CAAC,EACrE,CAEJ,C,kLCpDA,MAAMC,EAAqB,CACzB,mBAAkB,IACpB,EAEMC,KAAY,WAAQ,OAAWD,CAAkB,EAQjDE,EAAwB,CAC5B,KAAM,WACN,GAAI,UACJ,KAAM,kBACR,EAEaC,EAAa,CAAC,CAAE,mBAAAC,CAAmB,IAAa,CAC3D,MAAMC,EAAY,MAAOC,GAA6B,CACpD,MAAMF,EAAmBE,CAAM,EAC/B,OAAO,SAAS,QAAO,MAAU,EAAE,UAAY,MACjD,EAEA,SACE,OAAC,KAAI,CAAC,MAAM,cAAc,QAAAJ,EACxB,oBAAC,KAAK,SAAL,CACC,oBAAC,KAAE,UAAU,QAAQ,uRAIrB,KAEA,OAAC,IAAI,CAAmB,SAAUG,EAC/B,UAAC,CAAE,SAAAE,EAAU,OAAAC,CAAO,OAEjB,oBACE,oBAAC,IAAQ,CACP,mBAAC,IAAK,CAAC,MAAM,oBAAoB,QAAS,CAAC,CAACA,EAAO,KAAM,MAAOA,EAAO,MAAQA,EAAO,KAAK,QACzF,mBAAC,KACC,YAAY,WACX,GAAGD,EAAS,OAAQ,CACnB,SAAU,+BACZ,CAAC,EACH,EACF,EACF,KACA,OAAC,KAAM,CAAC,KAAK,SAAS,kBAAM,GAC9B,CAEJ,CACF,GACF,EACF,CAEJ,EAEA,EAAeN,EAAUE,CAAU,C","sources":["webpack://grafana/./public/app/core/components/Form/Form.tsx","webpack://grafana/./public/app/features/org/NewOrgPage.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { HTMLProps, useEffect } from 'react';\nimport * as React from 'react';\nimport {\n  useForm,\n  Mode,\n  DefaultValues,\n  SubmitHandler,\n  FieldValues,\n  UseFormReturn,\n  FieldErrors,\n  FieldPath,\n} from 'react-hook-form';\n\nexport type FormAPI<T extends FieldValues> = Omit<UseFormReturn<T>, 'handleSubmit'> & {\n  errors: FieldErrors<T>;\n};\n\ninterface FormProps<T extends FieldValues> extends Omit<HTMLProps<HTMLFormElement>, 'onSubmit' | 'children'> {\n  validateOn?: Mode;\n  validateOnMount?: boolean;\n  validateFieldsOnMount?: FieldPath<T> | Array<FieldPath<T>>;\n  defaultValues?: DefaultValues<T>;\n  onSubmit: SubmitHandler<T>;\n  children: (api: FormAPI<T>) => React.ReactNode;\n  /** Sets max-width for container. Use it instead of setting individual widths on inputs.*/\n  maxWidth?: number | 'none';\n}\n\nexport function Form<T extends FieldValues>({\n  defaultValues,\n  onSubmit,\n  validateOnMount = false,\n  validateFieldsOnMount,\n  children,\n  validateOn = 'onSubmit',\n  maxWidth = 600,\n  ...htmlProps\n}: FormProps<T>) {\n  const { handleSubmit, trigger, formState, ...rest } = useForm<T>({\n    mode: validateOn,\n    defaultValues,\n  });\n\n  useEffect(() => {\n    if (validateOnMount) {\n      trigger(validateFieldsOnMount);\n    }\n  }, [trigger, validateFieldsOnMount, validateOnMount]);\n\n  return (\n    <form\n      className={css({\n        maxWidth: maxWidth !== 'none' ? maxWidth + 'px' : maxWidth,\n        width: '100%',\n      })}\n      onSubmit={handleSubmit(onSubmit)}\n      {...htmlProps}\n    >\n      {children({ errors: formState.errors, formState, trigger, ...rest })}\n    </form>\n  );\n}\n","import { connect, ConnectedProps } from 'react-redux';\n\nimport { NavModelItem } from '@grafana/data';\nimport { Button, Input, Field, FieldSet } from '@grafana/ui';\nimport { Form } from 'app/core/components/Form/Form';\nimport { Page } from 'app/core/components/Page/Page';\nimport { getConfig } from 'app/core/config';\n\nimport { createOrganization } from './state/actions';\n\nconst mapDispatchToProps = {\n  createOrganization,\n};\n\nconst connector = connect(undefined, mapDispatchToProps);\n\ntype Props = ConnectedProps<typeof connector>;\n\ninterface CreateOrgFormDTO {\n  name: string;\n}\n\nconst pageNav: NavModelItem = {\n  icon: 'building',\n  id: 'org-new',\n  text: 'New organization',\n};\n\nexport const NewOrgPage = ({ createOrganization }: Props) => {\n  const createOrg = async (newOrg: { name: string }) => {\n    await createOrganization(newOrg);\n    window.location.href = getConfig().appSubUrl + '/org';\n  };\n\n  return (\n    <Page navId=\"global-orgs\" pageNav={pageNav}>\n      <Page.Contents>\n        <p className=\"muted\">\n          Each organization contains their own dashboards, data sources, and configuration, which cannot be shared\n          shared between organizations. While users might belong to more than one organization, multiple organizations\n          are most frequently used in multi-tenant deployments.\n        </p>\n\n        <Form<CreateOrgFormDTO> onSubmit={createOrg}>\n          {({ register, errors }) => {\n            return (\n              <>\n                <FieldSet>\n                  <Field label=\"Organization name\" invalid={!!errors.name} error={errors.name && errors.name.message}>\n                    <Input\n                      placeholder=\"Org name\"\n                      {...register('name', {\n                        required: 'Organization name is required',\n                      })}\n                    />\n                  </Field>\n                </FieldSet>\n                <Button type=\"submit\">Create</Button>\n              </>\n            );\n          }}\n        </Form>\n      </Page.Contents>\n    </Page>\n  );\n};\n\nexport default connector(NewOrgPage);\n"],"names":["Form","defaultValues","onSubmit","validateOnMount","validateFieldsOnMount","children","validateOn","maxWidth","htmlProps","handleSubmit","trigger","formState","rest","mapDispatchToProps","connector","pageNav","NewOrgPage","createOrganization","createOrg","newOrg","register","errors"],"sourceRoot":""}