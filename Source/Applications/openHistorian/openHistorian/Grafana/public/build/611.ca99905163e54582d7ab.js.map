{"version":3,"file":"611.ca99905163e54582d7ab.js","mappings":"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","sources":["webpack://grafana/./public/app/core/components/NodeGraphSettings.tsx","webpack://grafana/./public/app/core/components/TraceToLogs/KeyValueInput.tsx","webpack://grafana/./public/app/core/components/TraceToLogs/TraceToLogsSettings.tsx","webpack://grafana/./public/app/core/components/TraceToMetrics/TraceToMetricsSettings.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React from 'react';\n\nimport {\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { InlineField, InlineFieldRow, InlineSwitch, useStyles } from '@grafana/ui';\n\nexport interface NodeGraphOptions {\n  enabled?: boolean;\n}\n\nexport interface NodeGraphData extends DataSourceJsonData {\n  nodeGraph?: NodeGraphOptions;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<NodeGraphData> {}\n\nexport function NodeGraphSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <h3 className=\"page-heading\">Node Graph</h3>\n      <InlineFieldRow className={styles.row}>\n        <InlineField\n          tooltip=\"Enables the Node Graph visualization in the trace viewer.\"\n          label=\"Enable Node Graph\"\n          labelWidth={26}\n        >\n          <InlineSwitch\n            id=\"enableNodeGraph\"\n            value={options.jsonData.nodeGraph?.enabled}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'nodeGraph', {\n                ...options.jsonData.nodeGraph,\n                enabled: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  container: css`\n    label: container;\n    width: 100%;\n  `,\n  row: css`\n    label: row;\n    align-items: baseline;\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport { GrafanaTheme, KeyValue } from '@grafana/data';\nimport { SegmentInput, useStyles, InlineLabel, Icon } from '@grafana/ui';\n\nconst EQ_WIDTH = 3; // = 24px in inline label\n\ninterface Props {\n  values: Array<KeyValue<string>>;\n  onChange: (values: Array<KeyValue<string>>) => void;\n  id?: string;\n  keyPlaceholder?: string;\n  valuePlaceholder?: string;\n}\n\nconst KeyValueInput = ({\n  values,\n  onChange,\n  id,\n  keyPlaceholder = 'Key',\n  valuePlaceholder = 'Value (optional)',\n}: Props) => {\n  const styles = useStyles(getStyles);\n\n  return (\n    <div className={styles.wrapper}>\n      {values.length ? (\n        values.map((value, idx) => (\n          <div className={styles.pair} key={idx}>\n            <SegmentInput\n              id={`${id}-key-${idx}`}\n              placeholder={keyPlaceholder}\n              value={value.key}\n              onChange={(e) => {\n                onChange(\n                  values.map((v, i) => {\n                    if (i === idx) {\n                      v.key = String(e);\n                    }\n                    return v;\n                  })\n                );\n              }}\n            />\n            <InlineLabel aria-label=\"equals\" className={styles.operator} width={EQ_WIDTH}>\n              =\n            </InlineLabel>\n            <SegmentInput\n              id={`${id}-value-${idx}`}\n              placeholder={valuePlaceholder}\n              value={value.value}\n              onChange={(e) => {\n                onChange(\n                  values.map((v, i) => {\n                    if (i === idx) {\n                      v.value = String(e);\n                    }\n                    return v;\n                  })\n                );\n              }}\n            />\n            <button\n              onClick={() => onChange([...values.slice(0, idx), ...values.slice(idx + 1)])}\n              className=\"gf-form-label query-part\"\n              aria-label=\"Remove tag\"\n              type=\"button\"\n            >\n              <Icon name=\"times\" />\n            </button>\n            {idx === values.length - 1 ? (\n              <button\n                onClick={() => onChange([...values, { key: '', value: '' }])}\n                className=\"gf-form-label query-part\"\n                aria-label=\"Add tag\"\n                type=\"button\"\n              >\n                <Icon name=\"plus\" />\n              </button>\n            ) : null}\n          </div>\n        ))\n      ) : (\n        <button\n          onClick={() => onChange([...values, { key: '', value: '' }])}\n          className=\"gf-form-label query-part\"\n          aria-label=\"Add tag\"\n          type=\"button\"\n        >\n          <Icon name=\"plus\" />\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default KeyValueInput;\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  wrapper: css`\n    display: flex;\n    flex-direction: column;\n    gap: ${theme.spacing.xs} 0;\n  `,\n  pair: css`\n    display: flex;\n    justify-content: start;\n    align-items: center;\n  `,\n  operator: css`\n    color: ${theme.palette.orange};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport {\n  DataSourceJsonData,\n  DataSourceInstanceSettings,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme,\n  KeyValue,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { DataSourcePicker } from '@grafana/runtime';\nimport { InlineField, InlineFieldRow, Input, TagsInput, useStyles, InlineSwitch } from '@grafana/ui';\n\nimport KeyValueInput from './KeyValueInput';\n\nexport interface TraceToLogsOptions {\n  datasourceUid?: string;\n  tags?: string[];\n  mappedTags?: Array<KeyValue<string>>;\n  mapTagNamesEnabled?: boolean;\n  spanStartTimeShift?: string;\n  spanEndTimeShift?: string;\n  filterByTraceID?: boolean;\n  filterBySpanID?: boolean;\n  lokiSearch?: boolean; // legacy\n}\n\nexport interface TraceToLogsData extends DataSourceJsonData {\n  tracesToLogs?: TraceToLogsOptions;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TraceToLogsData> {}\n\nexport function TraceToLogsSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles(getStyles);\n\n  return (\n    <div className={css({ width: '100%' })}>\n      <h3 className=\"page-heading\">Trace to logs</h3>\n\n      <div className={styles.infoText}>\n        Trace to logs lets you navigate from a trace span to the selected data source&apos;s logs.\n      </div>\n\n      <InlineFieldRow>\n        <InlineField tooltip=\"The data source the trace is going to navigate to\" label=\"Data source\" labelWidth={26}>\n          <DataSourcePicker\n            inputId=\"trace-to-logs-data-source-picker\"\n            filter={(ds) => {\n              // Trace to logs only supports loki and splunk at the moment\n              return ds.type === 'loki' || ds.type === 'grafana-splunk-datasource';\n            }}\n            current={options.jsonData.tracesToLogs?.datasourceUid}\n            noDefault={true}\n            width={40}\n            onChange={(ds: DataSourceInstanceSettings) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                ...options.jsonData.tracesToLogs,\n                datasourceUid: ds.uid,\n                tags: options.jsonData.tracesToLogs?.tags,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {options.jsonData.tracesToLogs?.mapTagNamesEnabled ? (\n        <InlineFieldRow>\n          <InlineField\n            tooltip=\"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'\"\n            label=\"Tags\"\n            labelWidth={26}\n          >\n            <KeyValueInput\n              keyPlaceholder=\"Tag\"\n              values={\n                options.jsonData.tracesToLogs?.mappedTags ??\n                options.jsonData.tracesToLogs?.tags?.map((tag) => ({ key: tag })) ??\n                []\n              }\n              onChange={(v) =>\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                  ...options.jsonData.tracesToLogs,\n                  mappedTags: v,\n                })\n              }\n            />\n          </InlineField>\n        </InlineFieldRow>\n      ) : (\n        <InlineFieldRow>\n          <InlineField\n            tooltip=\"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'\"\n            label=\"Tags\"\n            labelWidth={26}\n          >\n            <TagsInput\n              tags={options.jsonData.tracesToLogs?.tags}\n              width={40}\n              onChange={(tags) =>\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                  ...options.jsonData.tracesToLogs,\n                  tags: tags,\n                })\n              }\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n\n      <InlineFieldRow>\n        <InlineField\n          label=\"Map tag names\"\n          labelWidth={26}\n          grow\n          tooltip=\"Map trace tag names to log label names. Ex: k8s.pod.name -> pod\"\n        >\n          <InlineSwitch\n            id=\"mapTagNames\"\n            value={options.jsonData.tracesToLogs?.mapTagNamesEnabled ?? false}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                ...options.jsonData.tracesToLogs,\n                mapTagNamesEnabled: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField\n          label=\"Span start time shift\"\n          labelWidth={26}\n          grow\n          tooltip=\"Shifts the start time of the span. Default 0 (Time units can be used here, for example: 5s, 1m, 3h)\"\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"1h\"\n            width={40}\n            onChange={(v) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                ...options.jsonData.tracesToLogs,\n                spanStartTimeShift: v.currentTarget.value,\n              })\n            }\n            value={options.jsonData.tracesToLogs?.spanStartTimeShift || ''}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField\n          label=\"Span end time shift\"\n          labelWidth={26}\n          grow\n          tooltip=\"Shifts the end time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h\"\n        >\n          <Input\n            type=\"text\"\n            placeholder=\"1h\"\n            width={40}\n            onChange={(v) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                ...options.jsonData.tracesToLogs,\n                spanEndTimeShift: v.currentTarget.value,\n              })\n            }\n            value={options.jsonData.tracesToLogs?.spanEndTimeShift || ''}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField\n          label=\"Filter by Trace ID\"\n          labelWidth={26}\n          grow\n          tooltip=\"Filters logs by Trace ID. Appends '|=<trace id>' to the query.\"\n        >\n          <InlineSwitch\n            id=\"filterByTraceID\"\n            value={options.jsonData.tracesToLogs?.filterByTraceID}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                ...options.jsonData.tracesToLogs,\n                filterByTraceID: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField\n          label=\"Filter by Span ID\"\n          labelWidth={26}\n          grow\n          tooltip=\"Filters logs by Span ID. Appends '|=<span id>' to the query.\"\n        >\n          <InlineSwitch\n            id=\"filterBySpanID\"\n            value={options.jsonData.tracesToLogs?.filterBySpanID}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToLogs', {\n                ...options.jsonData.tracesToLogs,\n                filterBySpanID: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  infoText: css`\n    padding-bottom: ${theme.spacing.md};\n    color: ${theme.colors.textSemiWeak};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\n\nimport {\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme,\n  KeyValue,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { DataSourcePicker } from '@grafana/runtime';\nimport { Button, InlineField, InlineFieldRow, Input, useStyles } from '@grafana/ui';\n\nimport KeyValueInput from '../TraceToLogs/KeyValueInput';\n\nexport interface TraceToMetricsOptions {\n  datasourceUid?: string;\n  tags?: Array<KeyValue<string>>;\n  queries: TraceToMetricQuery[];\n}\n\nexport interface TraceToMetricQuery {\n  name?: string;\n  query?: string;\n}\n\nexport interface TraceToMetricsData extends DataSourceJsonData {\n  tracesToMetrics?: TraceToMetricsOptions;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TraceToMetricsData> {}\n\nexport function TraceToMetricsSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles(getStyles);\n\n  return (\n    <div className={css({ width: '100%' })}>\n      <h3 className=\"page-heading\">Trace to metrics</h3>\n\n      <div className={styles.infoText}>\n        Trace to metrics lets you navigate from a trace span to the selected data source.\n      </div>\n\n      <InlineFieldRow className={styles.row}>\n        <InlineField tooltip=\"The data source the trace is going to navigate to\" label=\"Data source\" labelWidth={26}>\n          <DataSourcePicker\n            inputId=\"trace-to-metrics-data-source-picker\"\n            pluginId=\"prometheus\"\n            current={options.jsonData.tracesToMetrics?.datasourceUid}\n            noDefault={true}\n            width={40}\n            onChange={(ds) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                datasourceUid: ds.uid,\n              })\n            }\n          />\n        </InlineField>\n        {options.jsonData.tracesToMetrics?.datasourceUid ? (\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            size=\"sm\"\n            fill=\"text\"\n            onClick={() => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                datasourceUid: undefined,\n              });\n            }}\n          >\n            Clear\n          </Button>\n        ) : null}\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField tooltip=\"Tags that will be used in the metrics query.\" label=\"Tags\" labelWidth={26}>\n          <KeyValueInput\n            keyPlaceholder=\"Tag\"\n            values={options.jsonData.tracesToMetrics?.tags ?? []}\n            onChange={(v) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                tags: v,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {options.jsonData.tracesToMetrics?.queries?.map((query, i) => (\n        <div key={i} className={styles.queryRow}>\n          <InlineField label=\"Link Label\" labelWidth={10}>\n            <Input\n              label=\"Link Label\"\n              type=\"text\"\n              allowFullScreen\n              value={query.name}\n              onChange={(e) => {\n                let newQueries = options.jsonData.tracesToMetrics?.queries.slice() ?? [];\n                newQueries[i].name = e.currentTarget.value;\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                  ...options.jsonData.tracesToMetrics,\n                  queries: newQueries,\n                });\n              }}\n            />\n          </InlineField>\n          <InlineField\n            label=\"Query\"\n            labelWidth={10}\n            tooltip=\"The Prometheus query that will run when navigating from a trace to metrics. Interpolate tags using the `$__tags` keyword.\"\n            grow\n          >\n            <Input\n              label=\"Query\"\n              type=\"text\"\n              allowFullScreen\n              value={query.query}\n              onChange={(e) => {\n                let newQueries = options.jsonData.tracesToMetrics?.queries.slice() ?? [];\n                newQueries[i].query = e.currentTarget.value;\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                  ...options.jsonData.tracesToMetrics,\n                  queries: newQueries,\n                });\n              }}\n            />\n          </InlineField>\n\n          <Button\n            variant=\"destructive\"\n            title=\"Remove query\"\n            icon=\"times\"\n            type=\"button\"\n            onClick={() => {\n              let newQueries = options.jsonData.tracesToMetrics?.queries.slice();\n              newQueries?.splice(i, 1);\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                queries: newQueries,\n              });\n            }}\n          />\n        </div>\n      ))}\n\n      <Button\n        variant=\"secondary\"\n        title=\"Add query\"\n        icon=\"plus\"\n        type=\"button\"\n        onClick={() => {\n          updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n            ...options.jsonData.tracesToMetrics,\n            queries: [...(options.jsonData.tracesToMetrics?.queries ?? []), { query: '' }],\n          });\n        }}\n      >\n        Add query\n      </Button>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  infoText: css`\n    padding-bottom: ${theme.spacing.md};\n    color: ${theme.colors.textSemiWeak};\n  `,\n  row: css`\n    label: row;\n    align-items: baseline;\n  `,\n  queryRow: css`\n    display: flex;\n  `,\n});\n"],"names":["NodeGraphSettings","options","onOptionsChange","styles","useStyles","getStyles","className","container","InlineFieldRow","row","InlineField","tooltip","label","labelWidth","InlineSwitch","id","value","jsonData","nodeGraph","enabled","onChange","event","updateDatasourcePluginJsonDataOption","currentTarget","checked","theme","css","values","keyPlaceholder","valuePlaceholder","wrapper","length","map","idx","pair","SegmentInput","placeholder","key","e","v","i","String","InlineLabel","operator","width","onClick","slice","type","Icon","name","spacing","xs","palette","orange","TraceToLogsSettings","infoText","DataSourcePicker","inputId","filter","ds","current","tracesToLogs","datasourceUid","noDefault","uid","tags","mapTagNamesEnabled","mappedTags","tag","TagsInput","grow","Input","spanStartTimeShift","spanEndTimeShift","filterByTraceID","filterBySpanID","md","colors","textSemiWeak","TraceToMetricsSettings","pluginId","tracesToMetrics","Button","variant","size","fill","undefined","queries","query","queryRow","allowFullScreen","newQueries","title","icon","splice"],"sourceRoot":""}