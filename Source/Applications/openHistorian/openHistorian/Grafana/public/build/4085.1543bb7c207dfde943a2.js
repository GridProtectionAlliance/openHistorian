"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4085],{14591:(_,Y,s)=>{s.d(Y,{i:()=>J});var t=s(74848),f=s(32196),F=s(96540),N=s(40845),I=s(64047);const J=({label:P,description:U,children:A,className:W,size:M="xl"})=>{const B=(0,N.of)($),[D,n]=(0,F.useState)(!0),c=()=>n(!D);return(0,t.jsxs)("div",{className:(0,f.cx)(B.wrapper,W),children:[(0,t.jsx)(I.e,{className:B.toggle,size:M,onToggle:c,isCollapsed:D,text:P}),U&&(0,t.jsx)("p",{className:B.description,children:U}),(0,t.jsx)("div",{className:D?B.hidden:B.content,children:A})]})},$=P=>({wrapper:(0,f.css)({marginTop:P.spacing(1),paddingBottom:P.spacing(1)}),toggle:(0,f.css)({margin:P.spacing(1,0),padding:0}),hidden:(0,f.css)({display:"none"}),description:(0,f.css)({color:P.colors.text.secondary,fontSize:P.typography.size.sm,fontWeight:P.typography.fontWeightRegular,margin:0}),content:(0,f.css)({paddingLeft:P.spacing(3)})})},23807:(_,Y,s)=>{s.d(Y,{e:()=>ae});var t=s(74848),f=s(32196),F=s(2543),N=s(96540),I=s(49785),J=s(88575),$=s(40845),P=s(10880),U=s(9226),A=s(10354),W=s(90182),M=s(83186),B=s(58724),D=s(21744),n=s(55852),c=s(72275);const u=({value:e,onChange:l,readOnly:a=!1})=>{const r=(0,$.of)(d),[m,o]=(0,N.useState)(v(e));(0,N.useEffect)(()=>o(v(e)),[e]);const i=x=>{l(g(x))},p=x=>{const y=m.slice(),h=y.splice(x,1)[0];o(y),h[0]&&i(y)},C=(x,y)=>{const h=m[y],E=m.map((S,b)=>b===y?x:S);o(E),(x[0]||h[0])&&i(E)};return(0,t.jsxs)("div",{children:[!!m.length&&(0,t.jsxs)("table",{className:r.table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Name"}),(0,t.jsx)("th",{children:"Value"}),!a&&(0,t.jsx)("th",{})]})}),(0,t.jsx)("tbody",{children:m.map(([x,y],h)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(A.p,{readOnly:a,value:x,onChange:E=>C([E.currentTarget.value,y],h)})}),(0,t.jsx)("td",{children:(0,t.jsx)(A.p,{readOnly:a,value:y,onChange:E=>C([x,E.currentTarget.value],h)})}),!a&&(0,t.jsx)("td",{children:(0,t.jsx)(c.M,{icon:"trash-alt",tooltip:"delete",onClick:()=>p(h)})})]},h))})]}),!a&&(0,t.jsx)(n.$n,{className:r.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>o([...m,["",""]]),children:"Add"})]})},d=e=>({addButton:(0,f.css)({marginTop:e.spacing(1)}),table:(0,f.css)({"tbody td":{padding:`0 ${e.spacing(1)} ${e.spacing(1)} 0`}})}),g=e=>{const l={};for(const[a,r]of e)a&&(l[a]=r);return l},v=e=>Object.entries(e??{}),j=({value:e,onChange:l,readOnly:a=!1})=>{const r=(0,$.of)(O),m=i=>{if(!e)return;const p=e.slice();p.splice(i,1),l(p)},o=(i,p)=>{e&&l(e.map((C,x)=>x===p?i:C))};return(0,t.jsxs)("div",{children:[!!e?.length&&e.map((i,p)=>(0,t.jsxs)("div",{className:r.row,children:[(0,t.jsx)(A.p,{readOnly:a,value:i,onChange:C=>o(C.currentTarget.value,p)}),!a&&(0,t.jsx)(c.M,{className:r.deleteIcon,icon:"trash-alt",tooltip:"delete",onClick:()=>m(p)})]},p)),!a&&(0,t.jsx)(n.$n,{className:r.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>l([...e??[],""]),children:"Add"})]})},O=e=>({row:(0,f.css)({display:"flex",flexDirection:"row",marginBottom:e.spacing(1),alignItems:"center"}),deleteIcon:(0,f.css)({marginLeft:e.spacing(1)}),addButton:(0,f.css)({marginTop:e.spacing(1)})});var L=s(45124),w=s(14591);const ee=e=>({collapsibleSection:(0,f.css)({margin:0,padding:0}),wrapper:(0,f.css)({margin:e.spacing(2,0),padding:e.spacing(1),border:`solid 1px ${e.colors.border.medium}`,borderRadius:e.shape.radius.default,position:"relative"}),description:(0,f.css)({color:e.colors.text.secondary,fontSize:e.typography.size.sm,fontWeight:e.typography.fontWeightRegular,margin:0}),deleteIcon:(0,f.css)({position:"absolute",right:e.spacing(1),top:e.spacing(1)}),addButton:(0,f.css)({marginTop:e.spacing(1)})}),te=({option:e,pathPrefix:l,errors:a,defaultValues:r,readOnly:m=!1})=>{const o=(0,$.of)(ee),i=`${l}${e.propertyName}`,p=(0,I.xW)(),{fields:C,append:x,remove:y}=(0,L.r)({name:i,formAPI:p,defaults:r});return(0,t.jsx)("div",{className:o.wrapper,children:(0,t.jsxs)(w.i,{className:o.collapsibleSection,label:`${e.label} (${C.length})`,description:e.description,children:[(C??r??[]).map((h,E)=>(0,t.jsxs)("div",{className:o.wrapper,children:[!m&&(0,t.jsx)(c.M,{"data-testid":`${i}.${E}.delete-button`,icon:"trash-alt",tooltip:"delete",onClick:()=>y(E),className:o.deleteIcon}),e.subformOptions?.map(S=>(0,t.jsx)(ae,{readOnly:m,defaultValue:h?.[S.propertyName],option:S,pathPrefix:`${i}.${E}.`,error:a?.[E]?.[S.propertyName]},S.propertyName))]},E)),!m&&(0,t.jsx)(n.$n,{"data-testid":`${i}.add-button`,className:o.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>x({__id:String(Math.random())}),children:"Add"})]})})},me=({option:e,pathPrefix:l,errors:a,defaultValue:r,readOnly:m=!1,secureFields:o={},onResetSecureField:i})=>{const p=(0,$.of)(ee),C=`${l}${e.propertyName}`,{watch:x}=(0,I.xW)(),y=x(C),h=y===void 0?r:y,[E,S]=(0,N.useState)(!!h);return(0,t.jsxs)("div",{className:p.wrapper,"data-testid":`${C}.container`,children:[(0,t.jsx)("h6",{children:e.label}),e.description&&(0,t.jsx)("p",{className:p.description,children:e.description}),E&&(0,t.jsxs)(t.Fragment,{children:[!m&&(0,t.jsx)(c.M,{"data-testid":`${C}.delete-button`,icon:"trash-alt",tooltip:"delete",onClick:()=>S(!1),className:p.deleteIcon}),(e.subformOptions??[]).map(b=>(0,t.jsx)(ae,{readOnly:m,secureFields:o,onResetSecureField:i,defaultValue:r?.[b.propertyName],parentOption:e,option:b,pathPrefix:`${C}.`,error:a?.[b.propertyName]},b.propertyName))]}),!E&&!m&&(0,t.jsx)(n.$n,{className:p.addButton,type:"button",variant:"secondary",icon:"plus",size:"sm",onClick:()=>S(!0),"data-testid":`${C}.add-button`,children:"Add"})]})};var pe=s(73287),fe=s(87978),z=s(67061),ge=s(94354),he=s(29158),ve=s(94753),se=s(25027),xe=s(76242),ye=s(33302),ie=s(70383),je=s(33594),Ce=s(70713),oe=s(90613),Ee=s(57220),ce=s(41965),Te=s(96615),Se=s(78253),Ne=s(10506);function $e({payload:e,templateContent:l,templateName:a,payloadFormatError:r,setPayloadFormatError:m,className:o}){const i=(0,$.of)(Re),{selectedAlertmanager:p}=(0,ie.VI)(),C=p===Ee.hY,{data:x,error:y}=(0,Ne.g)(l,a,e,m),h=(0,Se.P)(y,r,x);return(0,t.jsxs)("div",{className:(0,f.cx)(o,i.mainContainer),children:[(0,t.jsxs)("div",{className:i.container,children:[(0,t.jsx)(ce.D,{label:"Template content"}),(0,t.jsx)(oe.a,{flex:1,children:(0,t.jsx)("div",{className:i.viewerContainer({height:400}),children:(0,t.jsx)(Ce.Ay,{children:({width:E,height:S})=>(0,t.jsx)(Te.K,{value:l,containerStyles:i.editorContainer,width:E,height:S,readOnly:!0})})})})]}),C&&(0,t.jsxs)("div",{className:i.container,children:[(0,t.jsx)(ce.D,{label:"Preview with the default payload"}),(0,t.jsx)(oe.a,{flex:1,children:(0,t.jsx)("div",{className:i.viewerContainer({height:"minHeight"}),children:h})})]})]})}const Re=e=>({mainContainer:(0,f.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)}),container:(0,f.css)({label:"template-preview-container",display:"flex",flexDirection:"column",borderRadius:e.shape.radius.default,border:`1px solid ${e.colors.border.medium}`}),viewerContainer:({height:l})=>(0,f.css)({height:l,overflow:"auto",backgroundColor:e.colors.background.primary}),editorContainer:(0,f.css)({width:"fit-content",border:"none"})});var H=s(22153);function ne({onSelect:e,option:l,valueInForm:a}){const[r,m]=(0,N.useState)(!1),o=()=>{m(!0),(0,se.U6)()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$n,{icon:"edit",tooltip:"Edit using existing templates.",onClick:o,variant:"secondary",size:"sm","aria-label":"Select available template from the list of available templates.",children:`Edit ${l.label}`}),r&&(0,t.jsx)(fe._,{title:`Edit ${l.label}`,size:"md",onClose:()=>m(!1),children:(0,t.jsx)(Oe,{onSelect:e,onClose:()=>m(!1),option:l,valueInForm:a})})]})}function Pe(e,l=[]){const a=new Map;return e.forEach(({content:r})=>{(0,H.D)(r).forEach(o=>{a.set(o.name,{label:o.name,value:{name:o.name,content:o.content}})})}),l.forEach(r=>{a.set(r.name,{label:r.name,value:{name:r.name,content:r.content}})}),Array.from(a.values())}function Ie(e,l){return l.find(r=>r.label===e)?.value?.content??""}function Oe({onSelect:e,onClose:l,option:a,valueInForm:r}){const m=(0,$.of)(ue),o=xe.E3.endpoints.getDefaultTemplates.useQuery,[i,p]=(0,N.useState)(void 0),[C,x]=(0,N.useState)(""),[y,h]=(0,N.useState)(r),{selectedAlertmanager:E}=(0,ie.VI)(),{data:S=[],error:b,isLoading:X}=(0,ye.cC)({alertmanager:E}),{data:R}=o(),[V,Q]=(0,N.useState)("Existing"),[Z,q]=(0,pe.A)(),T=[{label:"Select existing template",value:"Existing",description:`Select a single template and preview it, or copy it to paste it in the custom tab. ${V==="Existing"?"Clicking Save will save your changes to the selected template.":""}`},{label:`Enter custom ${a.label.toLowerCase()}`,value:"Custom",description:`Enter custom ${a.label.toLowerCase()}. ${V==="Custom"?"Clicking Save will save the custom value only.":""}`}];(0,N.useEffect)(()=>{i&&x((0,H.Jl)(i.name))},[i]);function K(G){h(G)}const le=G=>{Q(G)},k=(0,N.useMemo)(()=>!R||!S||X||b?[]:Pe(S,R),[S,R,X,b]);return(0,N.useEffect)(()=>{if(r)if((0,H.G7)(r)){const G=(0,H.gY)(r);p({name:G,content:Ie(G,k)})}else Q("Custom")},[r,p,Q,k]),b?(0,t.jsx)("div",{children:"Error loading templates"}):X||!S||!R?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsxs)(z.B,{direction:"column",gap:1,justifyContent:"space-between",height:"100%",children:[(0,t.jsxs)(z.B,{direction:"column",gap:1,children:[(0,t.jsx)(ge.z,{options:T,value:V,onChange:le,className:m.templateTabOption}),V==="Existing"?(0,t.jsxs)(z.B,{direction:"column",gap:1,children:[(0,t.jsxs)(z.B,{direction:"row",gap:1,alignItems:"center",children:[(0,t.jsx)(W.l6,{placeholder:"Choose template","aria-label":"Choose template",onChange:(G,Fe)=>{p(G?.value)},options:k,width:50,value:i?{label:i.name,value:i}:void 0}),(0,t.jsx)(he.K,{tooltip:"Copy selected template to clipboard. You can use it in the custom tab.",onClick:()=>q((0,H.Jl)(i?.name??"")),name:"copy"})]}),(0,t.jsx)($e,{templateContent:i?.content??"",payload:je.R_,templateName:i?.name??"",setPayloadFormatError:()=>{},className:(0,f.cx)(m.templatePreview,m.minEditorSize),payloadFormatError:null})]}):(0,t.jsx)(Ae,{option:a,onCustomTemplateChange:K,initialValue:y})]}),(0,t.jsxs)("div",{className:m.actions,children:[(0,t.jsx)(n.$n,{variant:"secondary",onClick:l,children:"Cancel"}),(0,t.jsx)(n.$n,{variant:"primary",onClick:()=>{e(V==="Custom"?y:C),l(),V==="Custom"?(0,se.t6)():(0,se.Cl)()},children:"Save"})]})]})}function Ae({option:e,onCustomTemplateChange:l,initialValue:a}){switch(e.element){case"textarea":return(0,t.jsx)(z.B,{direction:"row",gap:1,alignItems:"center",children:(0,t.jsx)(D.f,{placeholder:e.placeholder,onChange:r=>l(r.currentTarget.value),defaultValue:a})});case"input":return(0,t.jsx)(z.B,{direction:"row",gap:1,alignItems:"center",children:(0,t.jsx)(A.p,{type:e.inputType,placeholder:e.placeholder,onChange:r=>l(r.currentTarget.value),defaultValue:a})});default:return null}}function de({useTemplates:e,onSelectTemplate:l,option:a,name:r,children:m}){const o=(0,$.of)(ue),{getValues:i}=(0,I.xW)(),p=i(r)??"";return!a.placeholder.includes("{{ template ")||typeof p!="string"?(0,t.jsx)(t.Fragment,{children:m}):p?(p?(0,H.G7)(p):!1)?(0,t.jsx)("div",{className:o.inputContainer,children:(0,t.jsxs)(z.B,{direction:"row",gap:1,alignItems:"center",children:[(0,t.jsx)(ve.E,{variant:"bodySmall",children:`Template: ${(0,H.gY)(p)}`}),e&&(0,t.jsx)(ne,{onSelect:l,option:a,valueInForm:i(r)??""})]})}):(0,t.jsx)("div",{className:o.inputContainer,children:(0,t.jsxs)(z.B,{direction:"row",gap:1,alignItems:"center",children:[m,e&&(0,t.jsx)(ne,{onSelect:l,option:a,valueInForm:i(r)??""})]})}):(0,t.jsx)("div",{className:o.inputContainer,children:(0,t.jsx)(z.B,{direction:"row",gap:1,alignItems:"center",children:e&&(0,t.jsx)(ne,{onSelect:l,option:a,valueInForm:i(r)??""})})})}const ue=e=>({actions:(0,f.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:e.spacing(1)}),templatePreview:(0,f.css)({flex:1,display:"flex"}),templateTabOption:(0,f.css)({width:"fit-content"}),minEditorSize:(0,f.css)({minHeight:300,minWidth:300}),inputContainer:(0,f.css)({marginTop:e.spacing(1.5)})}),ae=({option:e,parentOption:l,invalid:a,pathPrefix:r,pathSuffix:m="",error:o,defaultValue:i,readOnly:p=!1,customValidator:C,onResetSecureField:x,secureFields:y={}})=>{const h=`${r}${m}`;return e.element==="subform"?(0,t.jsx)(me,{secureFields:y,onResetSecureField:x,readOnly:p,defaultValue:i,option:e,errors:o,pathPrefix:h}):e.element==="subform_array"?(0,t.jsx)(te,{readOnly:p,defaultValues:i,option:e,pathPrefix:h,errors:o}):(0,t.jsx)(J.D,{label:e.element!=="checkbox"&&e.element!=="radio"?e.label:void 0,description:e.description||void 0,invalid:!!o,error:o?.message,"data-testid":`${h}${e.propertyName}`,children:(0,t.jsx)(be,{id:`${h}${e.propertyName}`,defaultValue:i,option:e,invalid:a,pathPrefix:h,readOnly:p,pathIndex:r,parentOption:l,customValidator:C,onResetSecureField:x,secureFields:y})})},be=({option:e,invalid:l,id:a,pathPrefix:r="",pathIndex:m="",readOnly:o=!1,customValidator:i,onResetSecureField:p,secureFields:C={},parentOption:x})=>{const y=(0,$.of)(Me),{control:h,register:E,unregister:S,getValues:b,setValue:X}=(0,I.xW)(),R=`${r}${e.propertyName}`,V=x?`${x.propertyName}.${e.propertyName}`:e.propertyName,Q=C?.[V];(0,N.useEffect)(()=>()=>{S(R,{keepValue:!1})},[S,R]);const Z=e.placeholder.includes("{{ template");function q(T){X(R,T)}switch(e.element){case"checkbox":return(0,t.jsx)(P.S,{id:a,readOnly:o,disabled:o,className:y.checkbox,...E(R),label:e.label,description:e.description});case"input":return(0,t.jsx)(de,{useTemplates:Z,option:e,name:R,onSelectTemplate:q,children:Q?(0,t.jsx)(U.L4,{onReset:()=>p?.(V),isConfigured:!0}):(0,t.jsx)(A.p,{id:a,readOnly:o||Z||De(e,b,m),invalid:l,type:e.inputType,...E(R,{required:Be(e,b,m),validate:{validationRule:T=>e.validationRule?re(T,e.validationRule,e.required):!0,customValidator:T=>i?i(T):!0},setValueAs:e.setValueAs}),placeholder:e.placeholder})});case"select":return(0,t.jsx)(I.xI,{render:({field:{onChange:T,ref:K,...le}})=>(0,t.jsx)(W.l6,{disabled:o,options:e.selectOptions??void 0,invalid:l,onChange:k=>T(k.value),...le}),control:h,name:R,defaultValue:e.defaultValue?.value,rules:{validate:{customValidator:T=>i?i(T):!0}}});case"radio":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("legend",{className:y.legend,children:e.label}),(0,t.jsx)(I.xI,{render:({field:{ref:T,...K}})=>(0,t.jsx)(M.a,{disabled:o,options:e.selectOptions??[],...K}),control:h,defaultValue:e.defaultValue?.value,name:R,rules:{required:e.required?"Option is required":!1,validate:{validationRule:T=>e.validationRule?re(T,e.validationRule,e.required):!0,customValidator:T=>i?i(T):!0}}})]});case"textarea":return(0,t.jsx)(de,{useTemplates:Z,option:e,name:R,onSelectTemplate:q,children:Q?(0,t.jsx)(B.lp,{onReset:()=>p?.(V),isConfigured:!0}):(0,t.jsx)(D.f,{id:a,readOnly:o||Z,invalid:l,placeholder:e.placeholder,...E(R,{required:e.required?"Required":!1,validate:T=>e.validationRule!==""?re(T,e.validationRule,e.required):!0})})});case"string_array":return(0,t.jsx)(I.xI,{render:({field:{value:T,onChange:K}})=>(0,t.jsx)(j,{readOnly:o,value:T,onChange:K}),control:h,name:R});case"key_value_map":return(0,t.jsx)(I.xI,{render:({field:{value:T,onChange:K}})=>(0,t.jsx)(u,{readOnly:o,value:T,onChange:K}),control:h,name:R});default:return console.error("Element not supported",e.element),null}},Me=e=>({checkbox:(0,f.css)({height:"auto"}),legend:(0,f.css)({fontSize:e.typography.h6.fontSize})}),re=(e,l,a)=>e===""&&!a||RegExp(l).test(e)?!0:"Invalid format",Be=(e,l,a)=>{const r=l(`${a}secureFields`),m=l(`${a}secureSettings`);return e.dependsOn?(0,F.isEmpty)(r)||!r[e.dependsOn]?!!!m[e.dependsOn]&&e.required?"Required":!1:!!!r[e.dependsOn]&&e.required?"Required":!1:e.required?"Required":!1},De=(e,l,a)=>e.dependsOn?(0,F.isEmpty)(l(`${a}secureFields`))?l(`${a}secureSettings.${e.dependsOn}`):l(`${a}secureFields.${e.dependsOn}`):!1},45124:(_,Y,s)=>{s.d(Y,{r:()=>I});var t=s(2543),f=s.n(t),F=s(96540);const N=[];function I(J){const{name:$,formAPI:P,defaults:U,softDelete:A}=J,{watch:W,getValues:M,reset:B,setValue:D}=P,n=W($)??U??N,c=(0,F.useCallback)(u=>{const d=JSON.parse(JSON.stringify(M())),g=u(n??[]);B((0,t.set)(d,$,g))},[M,$,B,n]);return{fields:n,append:(0,F.useCallback)(u=>c(d=>[...d,u]),[c]),remove:(0,F.useCallback)(u=>{A?D(`${$}.${u}.__deleted`,!0):c(d=>{const g=d.slice();return g.splice(u,1),g})},[c,$,D,A])}}},72399:(_,Y,s)=>{s.d(Y,{FN:()=>M,Iq:()=>N,QX:()=>J,Xo:()=>F,bB:()=>I,qg:()=>A});var t=s(2543),f=s.n(t);function F(n,c){const u={};let d=1;return[{name:n.name,items:n.grafana_managed_receiver_configs?.map(v=>{const j=String(d++);u[j]=v;const O=c.find(({type:L})=>L===v.type);return P(j,v,O)})??[]},u]}function N(n,c){const u={};let d=1;const g=Object.entries(n).filter(([j])=>j.endsWith("_configs")&&j!=="grafana_managed_receiver_configs").map(([j,O])=>[j.replace("_configs",""),O]).map(([j,O])=>O.map(L=>{const w=String(d++);if(u[w]={type:j,config:L},!c.find(te=>te.type===j))throw new Error(`unknown cloud notifier: ${j}`);return $(w,j,L)})).flat();return[{name:n.name,items:g},u]}function I(n,c,u,d){return{name:n.name,grafana_managed_receiver_configs:(n.items??[]).map(g=>{const v=c[g.__id],j=d.find(O=>O.type===g.type);return A(g,u,n.name,v,j)})}}function J(n,c){const u={name:n.name};return n.items.forEach(({__id:d,type:g,settings:v,sendResolved:j})=>{const O=M({...D(v),send_resolved:j??c.sendResolved});`${g}_configs`in u?u[`${g}_configs`]?.push(O):u[`${g}_configs`]=[O]}),u}function $(n,c,u){return{__id:n,type:c,settings:{...u},secureFields:{},secureSettings:{},sendResolved:u.send_resolved}}function P(n,c,u){const d={__id:n,type:c.type,provenance:c.provenance,secureSettings:{},settings:{...c.settings},secureFields:{...c.secureFields},disableResolveMessage:c.disableResolveMessage};return u?.options.forEach(g=>{g.secure&&d.settings[g.propertyName]&&(d.secureSettings[g.propertyName]=d.settings[g.propertyName],delete d.settings[g.propertyName])}),d}function U(n){const c=[];function u(d,g){for(const v of d){const j=g?`${g}.${v.propertyName}`:v.propertyName;if(v.subformOptions){u(v.subformOptions,j);continue}if(v.secure){c.push(j);continue}}}return u(n.options),c}function A(n,c,u,d,g){const v={settings:M({...d&&d.type===n.type?d.settings??{}:{},...n.settings??{}}),secureSettings:B(n.secureSettings,d?.secureFields),type:n.type,name:u,disableResolveMessage:n.disableResolveMessage??d?.disableResolveMessage??c.disableResolveMessage},j=g?U(g):[],O=(0,t.reduce)(j,(L={},w)=>(L[w]=(0,t.get)(v.settings,w)??(0,t.get)(n.secureFields,w),L),{});return v.secureSettings={...O,...v.secureSettings},v.settings=(0,t.omit)(v.settings,j),d&&(v.uid=d.uid),v}const W=n=>(0,t.isNil)(n)||n==="";function M(n){return(0,t.isArray)(n)?n.forEach(M):typeof n=="object"&&n!==null&&Object.entries(n).forEach(([c,u])=>{W(u)?delete n[c]:M(u)}),n}function B(n={},c={}){return(0,t.omitBy)(n,(u,d)=>W(u)&&!(0,t.has)(c,d))}function D(n){function c(d){(0,t.isArray)(d)?d.forEach(c):typeof d=="object"&&d!==null&&("__id"in d&&delete d.__id,Object.values(d).forEach(c))}const u=structuredClone(n);return c(u),u}}}]);

//# sourceMappingURL=4085.1543bb7c207dfde943a2.js.map