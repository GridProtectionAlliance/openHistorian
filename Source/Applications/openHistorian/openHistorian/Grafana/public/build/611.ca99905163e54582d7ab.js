"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[611],{28239:(e,a,t)=>{t.d(a,{n:()=>r});var s,n=t(36636),o=(t(68404),t(43215)),i=t(3490),l=t(45916);function r(e){var a;let{options:t,onOptionsChange:n}=e;const r=(0,i.useStyles)(c);return(0,l.jsxs)("div",{className:r.container,children:[s||(s=(0,l.jsx)("h3",{className:"page-heading",children:"Node Graph"})),(0,l.jsx)(i.InlineFieldRow,{className:r.row,children:(0,l.jsx)(i.InlineField,{tooltip:"Enables the Node Graph visualization in the trace viewer.",label:"Enable Node Graph",labelWidth:26,children:(0,l.jsx)(i.InlineSwitch,{id:"enableNodeGraph",value:null===(a=t.jsonData.nodeGraph)||void 0===a?void 0:a.enabled,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:n,options:t},"nodeGraph",Object.assign({},t.jsonData.nodeGraph,{enabled:e.currentTarget.checked}))})})})]})}const c=e=>({container:n.css`
    label: container;
    width: 100%;
  `,row:n.css`
    label: row;
    align-items: baseline;
  `})},58922:(e,a,t)=>{t.d(a,{Z:()=>c});var s,n,o,i=t(36636),l=(t(68404),t(3490)),r=t(45916);const c=e=>{let{values:a,onChange:t,id:i,keyPlaceholder:c="Key",valuePlaceholder:u="Value (optional)"}=e;const p=(0,l.useStyles)(d);return(0,r.jsx)("div",{className:p.wrapper,children:a.length?a.map(((e,o)=>(0,r.jsxs)("div",{className:p.pair,children:[(0,r.jsx)(l.SegmentInput,{id:`${i}-key-${o}`,placeholder:c,value:e.key,onChange:e=>{t(a.map(((a,t)=>(t===o&&(a.key=String(e)),a))))}}),(0,r.jsx)(l.InlineLabel,{"aria-label":"equals",className:p.operator,width:3,children:"="}),(0,r.jsx)(l.SegmentInput,{id:`${i}-value-${o}`,placeholder:u,value:e.value,onChange:e=>{t(a.map(((a,t)=>(t===o&&(a.value=String(e)),a))))}}),(0,r.jsx)("button",{onClick:()=>t([...a.slice(0,o),...a.slice(o+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button",children:s||(s=(0,r.jsx)(l.Icon,{name:"times"}))}),o===a.length-1?(0,r.jsx)("button",{onClick:()=>t([...a,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button",children:n||(n=(0,r.jsx)(l.Icon,{name:"plus"}))}):null]},o))):(0,r.jsx)("button",{onClick:()=>t([...a,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button",children:o||(o=(0,r.jsx)(l.Icon,{name:"plus"}))})})},d=e=>({wrapper:i.css`
    display: flex;
    flex-direction: column;
    gap: ${e.spacing.xs} 0;
  `,pair:i.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:i.css`
    color: ${e.palette.orange};
  `})},4319:(e,a,t)=>{t.d(a,{Z:()=>d});var s,n=t(36636),o=(t(68404),t(43215)),i=t(90923),l=t(3490),r=t(58922),c=t(45916);function d(e){var a,t,d,p,g,h,j,v,T,b,m,D,x,y;let{options:I,onOptionsChange:f}=e;const w=(0,l.useStyles)(u);return(0,c.jsxs)("div",{className:(0,n.css)({width:"100%"}),children:[s||(s=(0,c.jsx)("h3",{className:"page-heading",children:"Trace to logs"})),(0,c.jsx)("div",{className:w.infoText,children:"Trace to logs lets you navigate from a trace span to the selected data source's logs."}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,c.jsx)(i.DataSourcePicker,{inputId:"trace-to-logs-data-source-picker",filter:e=>"loki"===e.type||"grafana-splunk-datasource"===e.type,current:null===(a=I.jsonData.tracesToLogs)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>{var a;return(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{datasourceUid:e.uid,tags:null===(a=I.jsonData.tracesToLogs)||void 0===a?void 0:a.tags}))}})})}),null!==(t=I.jsonData.tracesToLogs)&&void 0!==t&&t.mapTagNamesEnabled?(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,c.jsx)(r.Z,{keyPlaceholder:"Tag",values:null!==(d=null!==(p=null===(g=I.jsonData.tracesToLogs)||void 0===g?void 0:g.mappedTags)&&void 0!==p?p:null===(h=I.jsonData.tracesToLogs)||void 0===h||null===(j=h.tags)||void 0===j?void 0:j.map((e=>({key:e}))))&&void 0!==d?d:[],onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{mappedTags:e}))})})}):(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{tooltip:"Tags that will be used in the Loki query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26,children:(0,c.jsx)(l.TagsInput,{tags:null===(v=I.jsonData.tracesToLogs)||void 0===v?void 0:v.tags,width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{tags:e}))})})}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{label:"Map tag names",labelWidth:26,grow:!0,tooltip:"Map trace tag names to log label names. Ex: k8s.pod.name -> pod",children:(0,c.jsx)(l.InlineSwitch,{id:"mapTagNames",value:null!==(T=null===(b=I.jsonData.tracesToLogs)||void 0===b?void 0:b.mapTagNamesEnabled)&&void 0!==T&&T,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{mapTagNamesEnabled:e.currentTarget.checked}))})})}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{label:"Span start time shift",labelWidth:26,grow:!0,tooltip:"Shifts the start time of the span. Default 0 (Time units can be used here, for example: 5s, 1m, 3h)",children:(0,c.jsx)(l.Input,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{spanStartTimeShift:e.currentTarget.value})),value:(null===(m=I.jsonData.tracesToLogs)||void 0===m?void 0:m.spanStartTimeShift)||""})})}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{label:"Span end time shift",labelWidth:26,grow:!0,tooltip:"Shifts the end time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h",children:(0,c.jsx)(l.Input,{type:"text",placeholder:"1h",width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{spanEndTimeShift:e.currentTarget.value})),value:(null===(D=I.jsonData.tracesToLogs)||void 0===D?void 0:D.spanEndTimeShift)||""})})}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{label:"Filter by Trace ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Trace ID. Appends '|=<trace id>' to the query.",children:(0,c.jsx)(l.InlineSwitch,{id:"filterByTraceID",value:null===(x=I.jsonData.tracesToLogs)||void 0===x?void 0:x.filterByTraceID,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{filterByTraceID:e.currentTarget.checked}))})})}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{label:"Filter by Span ID",labelWidth:26,grow:!0,tooltip:"Filters logs by Span ID. Appends '|=<span id>' to the query.",children:(0,c.jsx)(l.InlineSwitch,{id:"filterBySpanID",value:null===(y=I.jsonData.tracesToLogs)||void 0===y?void 0:y.filterBySpanID,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:f,options:I},"tracesToLogs",Object.assign({},I.jsonData.tracesToLogs,{filterBySpanID:e.currentTarget.checked}))})})})]})}const u=e=>({infoText:n.css`
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `})},67211:(e,a,t)=>{t.d(a,{F:()=>d});var s,n=t(36636),o=(t(68404),t(43215)),i=t(90923),l=t(3490),r=t(58922),c=t(45916);function d(e){var a,t,d,p,g,h;let{options:j,onOptionsChange:v}=e;const T=(0,l.useStyles)(u);return(0,c.jsxs)("div",{className:(0,n.css)({width:"100%"}),children:[s||(s=(0,c.jsx)("h3",{className:"page-heading",children:"Trace to metrics"})),(0,c.jsx)("div",{className:T.infoText,children:"Trace to metrics lets you navigate from a trace span to the selected data source."}),(0,c.jsxs)(l.InlineFieldRow,{className:T.row,children:[(0,c.jsx)(l.InlineField,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26,children:(0,c.jsx)(i.DataSourcePicker,{inputId:"trace-to-metrics-data-source-picker",pluginId:"prometheus",current:null===(a=j.jsonData.tracesToMetrics)||void 0===a?void 0:a.datasourceUid,noDefault:!0,width:40,onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{datasourceUid:e.uid}))})}),null!==(t=j.jsonData.tracesToMetrics)&&void 0!==t&&t.datasourceUid?(0,c.jsx)(l.Button,{type:"button",variant:"secondary",size:"sm",fill:"text",onClick:()=>{(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{datasourceUid:void 0}))},children:"Clear"}):null]}),(0,c.jsx)(l.InlineFieldRow,{children:(0,c.jsx)(l.InlineField,{tooltip:"Tags that will be used in the metrics query.",label:"Tags",labelWidth:26,children:(0,c.jsx)(r.Z,{keyPlaceholder:"Tag",values:null!==(d=null===(p=j.jsonData.tracesToMetrics)||void 0===p?void 0:p.tags)&&void 0!==d?d:[],onChange:e=>(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{tags:e}))})})}),null===(g=j.jsonData.tracesToMetrics)||void 0===g||null===(h=g.queries)||void 0===h?void 0:h.map(((e,a)=>(0,c.jsxs)("div",{className:T.queryRow,children:[(0,c.jsx)(l.InlineField,{label:"Link Label",labelWidth:10,children:(0,c.jsx)(l.Input,{label:"Link Label",type:"text",allowFullScreen:!0,value:e.name,onChange:e=>{var t,s;let n=null!==(t=null===(s=j.jsonData.tracesToMetrics)||void 0===s?void 0:s.queries.slice())&&void 0!==t?t:[];n[a].name=e.currentTarget.value,(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{queries:n}))}})}),(0,c.jsx)(l.InlineField,{label:"Query",labelWidth:10,tooltip:"The Prometheus query that will run when navigating from a trace to metrics. Interpolate tags using the `$__tags` keyword.",grow:!0,children:(0,c.jsx)(l.Input,{label:"Query",type:"text",allowFullScreen:!0,value:e.query,onChange:e=>{var t,s;let n=null!==(t=null===(s=j.jsonData.tracesToMetrics)||void 0===s?void 0:s.queries.slice())&&void 0!==t?t:[];n[a].query=e.currentTarget.value,(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{queries:n}))}})}),(0,c.jsx)(l.Button,{variant:"destructive",title:"Remove query",icon:"times",type:"button",onClick:()=>{var e;let t=null===(e=j.jsonData.tracesToMetrics)||void 0===e?void 0:e.queries.slice();null==t||t.splice(a,1),(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{queries:t}))}})]},a))),(0,c.jsx)(l.Button,{variant:"secondary",title:"Add query",icon:"plus",type:"button",onClick:()=>{var e,a;(0,o.updateDatasourcePluginJsonDataOption)({onOptionsChange:v,options:j},"tracesToMetrics",Object.assign({},j.jsonData.tracesToMetrics,{queries:[...null!==(e=null===(a=j.jsonData.tracesToMetrics)||void 0===a?void 0:a.queries)&&void 0!==e?e:[],{query:""}]}))},children:"Add query"})]})}const u=e=>({infoText:n.css`
    padding-bottom: ${e.spacing.md};
    color: ${e.colors.textSemiWeak};
  `,row:n.css`
    label: row;
    align-items: baseline;
  `,queryRow:n.css`
    display: flex;
  `})}}]);
//# sourceMappingURL=611.ca99905163e54582d7ab.js.map