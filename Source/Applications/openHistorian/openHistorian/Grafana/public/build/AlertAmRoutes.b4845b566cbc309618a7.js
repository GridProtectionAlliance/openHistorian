"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8648],{29507:(e,t,n)=>{n.d(t,{x:()=>l});var a=n(68404),r=n(18745),i=n(45193);function l(e){const t=(0,r.useDispatch)(),n=(0,a.useRef)(e);n.current=e,(0,a.useEffect)((()=>()=>{t((0,i.e)({stateSelector:n.current}))}),[t])}},89905:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ze});var a=n(36636),r=n(68404),i=n(18745),l=n(3490),o=n(29507),s=n(50489),c=n(40256),u=n(71308),d=n(73358),m=n(53262),g=n(82969),p=n(82897),v=n(10331),h=n(82139),x=n(19462),j=n(66322);const f=["",""],b=(e,t)=>Object.entries(null!=e?e:{}).reduce(((e,n)=>{let[a,r]=n;return[...e,{name:a,value:r,operator:t?v._M.regex:v._M.equal}]}),[]),y=(e,t)=>{if(!e)return null!=t?t:f;const[n,a]=e?(0,j.bG)(e):[void 0,void 0],r=j.qr.find((e=>e.value===a));return n&&r?[String(n),r.value]:f},C=e=>e.value,S={name:"",value:"",operator:v._M.equal},I=[{label:"grafana_folder",value:"grafana_folder"},{label:"alertname",value:"alertname"},{label:"Disable (...)",value:"..."}],N={id:"",overrideGrouping:!1,groupBy:["grafana_folder","alertname"],object_matchers:[],routes:[],continue:!1,receiver:"",overrideTimings:!1,groupWaitValue:"",groupWaitValueType:j.qr[0].value,groupIntervalValue:"",groupIntervalValueType:j.qr[0].value,repeatIntervalValue:"",repeatIntervalValueType:j.qr[0].value,muteTimeIntervals:[]},w=e=>{var t,n,a,r,i,l,o,s,c;if(!e)return[N,{}];const u=String(Math.random()),d={[u]:e};if(0===Object.keys(e).length){return[Object.assign({},N,{id:u}),d]}const m=[];null===(t=e.routes)||void 0===t||t.forEach((e=>{const[t,n]=w(e);m.push(t),Object.assign(d,n)}));const g=e.matchers?null!==(n=null===(a=e.matchers)||void 0===a?void 0:a.map((e=>(0,h.cm)((0,h.tC)(e)))))&&void 0!==n?n:[]:null!==(r=null===(i=e.object_matchers)||void 0===i?void 0:i.map((e=>({name:e[0],operator:e[1],value:e[2]}))))&&void 0!==r?r:[],[p,v]=y(e.group_wait,["","s"]),[x,j]=y(e.group_interval,["","m"]),[f,C]=y(e.repeat_interval,["","h"]);return[{id:u,object_matchers:[...g,...b(e.match,!1),...b(e.match_re,!0)],continue:null!==(l=e.continue)&&void 0!==l&&l,receiver:null!==(o=e.receiver)&&void 0!==o?o:"",overrideGrouping:Array.isArray(e.group_by)&&0!==e.group_by.length,groupBy:null!==(s=e.group_by)&&void 0!==s?s:[],overrideTimings:[p,x,f].some(Boolean),groupWaitValue:p,groupWaitValueType:v,groupIntervalValue:x,groupIntervalValueType:j,repeatIntervalValue:f,repeatIntervalValueType:C,routes:m,muteTimeIntervals:null!==(c=e.mute_time_intervals)&&void 0!==c?c:[]},d]},V=(e,t,n)=>{const a=n[t.id],{overrideGrouping:r,groupBy:i,overrideTimings:l,groupWaitValue:o,groupWaitValueType:s,groupIntervalValue:c,groupIntervalValueType:u,repeatIntervalValue:d,repeatIntervalValueType:m}=t,g=r&&i?i:[],v=l&&o?`${o}${s}`:void 0,h=l&&c?`${c}${u}`:void 0,j=l&&d?`${d}${m}`:void 0,f=Object.assign({},null!=a?a:{},{continue:t.continue,group_by:g,object_matchers:t.object_matchers.length?t.object_matchers.map((e=>[e.name,e.operator,e.value])):void 0,match:void 0,match_re:void 0,group_wait:v,group_interval:h,repeat_interval:j,routes:t.routes.map((t=>V(e,t,n))),mute_time_intervals:t.muteTimeIntervals});return e!==x.GC?(f.matchers=t.object_matchers.map((e=>{let{name:t,operator:n,value:a}=e;return`${t}${n}${a}`})),f.object_matchers=void 0):f.matchers=void 0,t.receiver&&(f.receiver=t.receiver),(0,p.omitBy)(f,p.isUndefined)},$=e=>({label:e,value:e}),M=e=>(null!=e?e:[]).map($),O=e=>{var t;return e&&null!==(t=C(e))&&void 0!==t?t:""},T=e=>{return e?(null!=(t=e)?t:[]).map(C):[];var t},_=e=>{if(e)return/^\d+$/.test(e)?void 0:"Must be a positive integer."};var k=n(39357);const B=e=>({container:a.css`
      align-items: center;
      display: flex;
      flex-flow: row nowrap;

      & > * + * {
        margin-left: ${e.spacing(1)};
      }
    `,input:a.css`
      flex: 1;
    `,timingContainer:a.css`
      max-width: ${e.spacing(33)};
    `,smallInput:a.css`
      width: ${e.spacing(6.5)};
    `,linkText:a.css`
      text-decoration: underline;
    `,collapse:a.css`
      border: none;
      background: none;
      color: ${e.colors.text.primary};
    `});var q,F,G=n(45916);const A=["onChange","ref"],P=["onChange","ref"],E=["onChange","ref"],W=["onChange","ref"],R=["onChange","ref"];function L(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}const D=e=>{var t;let{alertManagerSourceName:n,onCancel:i,onSave:o,receivers:s,routes:c}=e;const u=(0,l.useStyles2)(B),[d,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(M(c.groupBy));return(0,G.jsx)(l.Form,{defaultValues:Object.assign({},c,{overrideTimings:!0,overrideGrouping:!0}),onSubmit:o,children:e=>{var r,o,c,v;let{control:h,errors:x,setValue:f}=e;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(l.Field,{label:"Default contact point",invalid:!!x.receiver,error:null===(r=x.receiver)||void 0===r?void 0:r.message,children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:u.container,"data-testid":"am-receiver-select",children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=L(e.field,A);return(0,G.jsx)(l.Select,Object.assign({"aria-label":"Default contact point"},n,{className:u.input,onChange:e=>t(O(e)),options:s}))},control:h,name:"receiver",rules:{required:{value:!0,message:"Required."}}}),q||(q=(0,G.jsx)("span",{children:"or"})),(0,G.jsx)(l.Link,{className:u.linkText,href:(0,k.eQ)("/alerting/notifications/receivers/new",n),children:"Create a contact point"})]})})}),(0,G.jsx)(l.Field,{label:"Group by",description:"Group alerts when you receive a notification based on labels.","data-testid":"am-group-select",children:(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=L(e.field,P);return(0,G.jsx)(l.MultiSelect,Object.assign({"aria-label":"Group by"},n,{allowCustomValue:!0,className:u.input,onCreateOption:e=>{p((t=>[...t,$(e)])),f("groupBy",[...n.value,e])},onChange:e=>t(T(e)),options:[...I,...g]}))},control:h,name:"groupBy"})}),(0,G.jsxs)(l.Collapse,{collapsible:!0,className:u.collapse,isOpen:d,label:"Timing options",onToggle:m,children:[(0,G.jsx)(l.Field,{label:"Group wait",description:"The waiting time until the initial notification is sent for a new group created by an incoming alert. Default 30 seconds.",invalid:!!x.groupWaitValue,error:null===(o=x.groupWaitValue)||void 0===o?void 0:o.message,"data-testid":"am-group-wait",children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:(0,a.cx)(u.container,u.timingContainer),children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:t,fieldState:{invalid:n}}=e;return(0,G.jsx)(l.Input,Object.assign({},t,{className:u.smallInput,invalid:n,placeholder:"30"}))},control:h,name:"groupWaitValue",rules:{validate:_}}),(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=L(e.field,E);return(0,G.jsx)(l.Select,Object.assign({},n,{className:u.input,onChange:e=>t(O(e)),options:j.qr,"aria-label":"Group wait type"}))},control:h,name:"groupWaitValueType"})]})})}),(0,G.jsx)(l.Field,{label:"Group interval",description:"The waiting time to send a batch of new alerts for that group after the first notification was sent. Default 5 minutes.",invalid:!!x.groupIntervalValue,error:null===(c=x.groupIntervalValue)||void 0===c?void 0:c.message,"data-testid":"am-group-interval",children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:(0,a.cx)(u.container,u.timingContainer),children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:t,fieldState:{invalid:n}}=e;return(0,G.jsx)(l.Input,Object.assign({},t,{className:u.smallInput,invalid:n,placeholder:"5"}))},control:h,name:"groupIntervalValue",rules:{validate:_}}),(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=L(e.field,W);return(0,G.jsx)(l.Select,Object.assign({},n,{className:u.input,onChange:e=>t(O(e)),options:j.qr,"aria-label":"Group interval type"}))},control:h,name:"groupIntervalValueType"})]})})}),(0,G.jsx)(l.Field,{label:"Repeat interval",description:"The waiting time to resend an alert after they have successfully been sent. Default 4 hours.",invalid:!!x.repeatIntervalValue,error:null===(v=x.repeatIntervalValue)||void 0===v?void 0:v.message,"data-testid":"am-repeat-interval",children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:(0,a.cx)(u.container,u.timingContainer),children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:t,fieldState:{invalid:n}}=e;return(0,G.jsx)(l.Input,Object.assign({},t,{className:u.smallInput,invalid:n,placeholder:"4"}))},control:h,name:"repeatIntervalValue",rules:{validate:_}}),(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=L(e.field,R);return(0,G.jsx)(l.Select,Object.assign({},n,{className:u.input,menuPlacement:"top",onChange:e=>t(O(e)),options:j.qr,"aria-label":"Repeat interval type"}))},control:h,name:"repeatIntervalValueType"})]})})})]}),(0,G.jsxs)("div",{className:u.container,children:[F||(F=(0,G.jsx)(l.Button,{type:"submit",children:"Save"})),t||(t=(0,G.jsx)(l.Button,{onClick:i,type:"reset",variant:"secondary",fill:"outline",children:"Cancel"}))]})]})}})},z=e=>({container:a.css`
      display: grid;
      font-style: ${e.typography.fontSize};
      grid-template-columns: ${e.spacing(15.5)} auto;

      ${e.breakpoints.down("md")} {
        grid-template-columns: 100%;
      }
    `,titleCell:a.css`
      color: ${e.colors.text.primary};
    `,valueCell:a.css`
      color: ${e.colors.text.secondary};
      margin-bottom: ${e.spacing(1)};
    `}),K=e=>{let{routes:t}=e;const n=(0,l.useStyles2)(z),a=t.receiver||"-",r=t.groupBy.join(", ")||"-",i=t.groupWaitValue?`${t.groupWaitValue}${t.groupWaitValueType}`:"-",o=t.groupIntervalValue?`${t.groupIntervalValue}${t.groupIntervalValueType}`:"-",s=t.repeatIntervalValue?`${t.repeatIntervalValue}${t.repeatIntervalValueType}`:"-";return(0,G.jsxs)("div",{className:n.container,children:[(0,G.jsx)("div",{className:n.titleCell,children:"Contact point"}),(0,G.jsx)("div",{className:n.valueCell,"data-testid":"am-routes-root-receiver",children:a}),(0,G.jsx)("div",{className:n.titleCell,children:"Group by"}),(0,G.jsx)("div",{className:n.valueCell,"data-testid":"am-routes-root-group-by",children:r}),(0,G.jsx)("div",{className:n.titleCell,children:"Timings"}),(0,G.jsxs)("div",{className:n.valueCell,"data-testid":"am-routes-root-timings",children:["Group wait: ",i," | Group interval: ",o," | Repeat interval: ",s]})]})};var J,Q;const U=e=>{let{isEditMode:t,onSave:n,onEnterEditMode:a,onExitEditMode:r,receivers:i,routes:o,alertManagerSourceName:s,readOnly:c=!1}=e;const u=(0,l.useStyles2)(Y),d=(0,g.Ko)(s);return(0,G.jsxs)("div",{className:u.container,"data-testid":"am-root-route-container",children:[(0,G.jsxs)("div",{className:u.titleContainer,children:[(0,G.jsxs)("h5",{className:u.title,children:["Root policy - ",J||(J=(0,G.jsx)("i",{children:"default for all alerts"}))]}),!t&&!c&&(0,G.jsx)(m.q,{actions:[d.update],children:(0,G.jsx)(l.Button,{icon:"pen",onClick:a,size:"sm",type:"button",variant:"secondary",children:"Edit"})})]}),Q||(Q=(0,G.jsx)("p",{children:"All alerts will go to the default contact point, unless you set additional matchers in the specific routing area."})),t?(0,G.jsx)(D,{alertManagerSourceName:s,onCancel:r,onSave:n,receivers:i,routes:o}):(0,G.jsx)(K,{routes:o})]})},Y=e=>({container:a.css`
      background-color: ${e.colors.background.secondary};
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(2)};
    `,titleContainer:a.css`
      color: ${e.colors.text.primary};
      display: flex;
      flex-flow: row nowrap;
    `,title:a.css`
      flex: 100%;
    `});var Z=n(93368),H=n(61959),X=n(28410);const ee=e=>{let{children:t}=e;const n=(0,l.useStyles)(te);return(0,G.jsx)("div",{className:n.container,children:t})},te=e=>({container:a.css`
      background-color: ${e.colors.bg2};
      color: ${e.colors.textSemiWeak};
      padding: ${e.spacing.xl};
      text-align: center;
    `}),ne=e=>{let{buttonIcon:t,buttonLabel:n,buttonSize:a="lg",buttonVariant:r="primary",onButtonClick:i,text:o,href:s,showButton:c=!0}=e;const u=(0,l.useStyles)(ae),d={className:u.button,icon:t,size:a,variant:r};return(0,G.jsx)(ee,{children:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("p",{className:u.text,children:o}),c&&(s?(0,G.jsx)(l.LinkButton,Object.assign({href:s,type:"button"},d,{children:n})):(0,G.jsx)(l.Button,Object.assign({onClick:i,type:"button"},d,{children:n})))]})})},ae=e=>({container:a.css`
      background-color: ${e.colors.bg2};
      color: ${e.colors.textSemiWeak};
      padding: ${e.spacing.xl};
      text-align: center;
    `,text:a.css`
      margin-bottom: ${e.spacing.md};
    `,button:a.css`
      margin: ${e.spacing.md} 0 ${e.spacing.sm};
    `});var re=n(16905);var ie=n(9019),le=n(68698),oe=n(8455),se=n(82498),ce=n(1698),ue=n(33899);const de=["onChange","ref"],me=["onChange","ref"],ge=["onChange","ref"],pe=["onChange","ref"],ve=["onChange","ref"],he=["onChange","ref"],xe=["onChange","ref"];var je,fe;function be(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}const ye=e=>{var t;let{onCancel:n,onSave:i,receivers:o,routes:s}=e;const c=(0,l.useStyles2)(Ce),u=(0,l.useStyles2)(B),[d,m]=(0,r.useState)(M(s.groupBy)),g=function(){const e=(0,ce.k)("notification"),[t]=(0,se.k)(e),n=(0,ue._)((e=>e.amConfigs));return(0,r.useMemo)((()=>{var e,a,r;const{result:i}=t&&n[t]||oe.oq,l=null!==(e=null==i?void 0:i.alertmanager_config)&&void 0!==e?e:{};return null!==(a=null==l||null===(r=l.mute_time_intervals)||void 0===r?void 0:r.map((e=>({value:e.name,label:e.name,description:e.time_intervals.map((e=>(0,h.uK)(e))).join(", AND ")}))))&&void 0!==a?a:[]}),[t,n])}();return(0,G.jsx)(l.Form,{defaultValues:s,onSubmit:i,children:e=>{var r,i,s;let{control:p,register:v,errors:x,setValue:f,watch:b}=e;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("input",Object.assign({type:"hidden"},v("id"))),(0,G.jsx)(l.FieldArray,{name:"object_matchers",control:p,children:e=>{let{fields:t,append:n,remove:a}=e;return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(l.VerticalGroup,{justify:"flex-start",spacing:"md",children:[je||(je=(0,G.jsx)("div",{children:"Matching labels"})),0===t.length&&(0,G.jsx)(l.Badge,{color:"orange",className:c.noMatchersWarning,icon:"exclamation-triangle",text:"If no matchers are specified, this notification policy will handle all alert instances."}),t.length>0&&(0,G.jsx)("div",{className:c.matchersContainer,children:t.map(((e,t)=>{var n,r,i,o,s,u,d,m,g,j;const f=`object_matchers[${t}]`;return(0,G.jsxs)(l.HorizontalGroup,{align:"flex-start",height:"auto",children:[(0,G.jsx)(l.Field,{label:"Label",invalid:!(null===(n=x.object_matchers)||void 0===n||null===(r=n[t])||void 0===r||!r.name),error:null===(i=x.object_matchers)||void 0===i||null===(o=i[t])||void 0===o||null===(s=o.name)||void 0===s?void 0:s.message,children:(0,G.jsx)(l.Input,Object.assign({},v(`${f}.name`,{required:"Field is required"}),{defaultValue:e.name,placeholder:"label"}))}),(0,G.jsx)(l.Field,{label:"Operator",children:(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,de);return(0,G.jsx)(l.Select,Object.assign({},n,{className:c.matchersOperator,onChange:e=>t(null==e?void 0:e.value),options:h.tA,"aria-label":"Operator"}))},defaultValue:e.operator,control:p,name:`${f}.operator`,rules:{required:{value:!0,message:"Required."}}})}),(0,G.jsx)(l.Field,{label:"Value",invalid:!(null===(u=x.object_matchers)||void 0===u||null===(d=u[t])||void 0===d||!d.value),error:null===(m=x.object_matchers)||void 0===m||null===(g=m[t])||void 0===g||null===(j=g.value)||void 0===j?void 0:j.message,children:(0,G.jsx)(l.Input,Object.assign({},v(`${f}.value`,{required:"Field is required"}),{defaultValue:e.value,placeholder:"value"}))}),(0,G.jsx)(l.IconButton,{className:c.removeButton,tooltip:"Remove matcher",name:"trash-alt",onClick:()=>a(t),children:"Remove"})]},e.id)}))}),(0,G.jsx)(l.Button,{className:c.addMatcherBtn,icon:"plus",onClick:()=>n(S),variant:"secondary",type:"button",children:"Add matcher"})]})})}}),(0,G.jsx)(l.Field,{label:"Contact point",children:(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,me);return(0,G.jsx)(l.Select,Object.assign({"aria-label":"Contact point"},n,{className:u.input,onChange:e=>t(O(e)),options:o}))},control:p,name:"receiver"})}),(0,G.jsx)(l.Field,{label:"Continue matching subsequent sibling nodes",children:(0,G.jsx)(l.Switch,Object.assign({id:"continue-toggle"},v("continue")))}),(0,G.jsx)(l.Field,{label:"Override grouping",children:(0,G.jsx)(l.Switch,Object.assign({id:"override-grouping-toggle"},v("overrideGrouping")))}),b().overrideGrouping&&(0,G.jsx)(l.Field,{label:"Group by",description:"Group alerts when you receive a notification based on labels. If empty it will be inherited from the parent policy.",children:(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,ge);return(0,G.jsx)(l.MultiSelect,Object.assign({"aria-label":"Group by"},n,{allowCustomValue:!0,className:u.input,onCreateOption:e=>{m((t=>[...t,$(e)])),f("groupBy",[...n.value,e])},onChange:e=>t(T(e)),options:[...I,...d]}))},control:p,name:"groupBy"})}),(0,G.jsx)(l.Field,{label:"Override general timings",children:(0,G.jsx)(l.Switch,Object.assign({id:"override-timings-toggle"},v("overrideTimings")))}),b().overrideTimings&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(l.Field,{label:"Group wait",description:"The waiting time until the initial notification is sent for a new group created by an incoming alert. If empty it will be inherited from the parent policy.",invalid:!!x.groupWaitValue,error:null===(r=x.groupWaitValue)||void 0===r?void 0:r.message,children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:(0,a.cx)(u.container,u.timingContainer),children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:t,fieldState:{invalid:n}}=e;return(0,G.jsx)(l.Input,Object.assign({},t,{className:u.smallInput,invalid:n,"aria-label":"Group wait value"}))},control:p,name:"groupWaitValue",rules:{validate:_}}),(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,pe);return(0,G.jsx)(l.Select,Object.assign({},n,{className:u.input,onChange:e=>t(O(e)),options:j.qr,"aria-label":"Group wait type"}))},control:p,name:"groupWaitValueType"})]})})}),(0,G.jsx)(l.Field,{label:"Group interval",description:"The waiting time to send a batch of new alerts for that group after the first notification was sent. If empty it will be inherited from the parent policy.",invalid:!!x.groupIntervalValue,error:null===(i=x.groupIntervalValue)||void 0===i?void 0:i.message,children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:(0,a.cx)(u.container,u.timingContainer),children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:t,fieldState:{invalid:n}}=e;return(0,G.jsx)(l.Input,Object.assign({},t,{className:u.smallInput,invalid:n,"aria-label":"Group interval value"}))},control:p,name:"groupIntervalValue",rules:{validate:_}}),(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,ve);return(0,G.jsx)(l.Select,Object.assign({},n,{className:u.input,onChange:e=>t(O(e)),options:j.qr,"aria-label":"Group interval type"}))},control:p,name:"groupIntervalValueType"})]})})}),(0,G.jsx)(l.Field,{label:"Repeat interval",description:"The waiting time to resend an alert after they have successfully been sent.",invalid:!!x.repeatIntervalValue,error:null===(s=x.repeatIntervalValue)||void 0===s?void 0:s.message,children:(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:(0,a.cx)(u.container,u.timingContainer),children:[(0,G.jsx)(l.InputControl,{render:e=>{let{field:t,fieldState:{invalid:n}}=e;return(0,G.jsx)(l.Input,Object.assign({},t,{className:u.smallInput,invalid:n,"aria-label":"Repeat interval value"}))},control:p,name:"repeatIntervalValue",rules:{validate:_}}),(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,he);return(0,G.jsx)(l.Select,Object.assign({},n,{className:u.input,menuPlacement:"top",onChange:e=>t(O(e)),options:j.qr,"aria-label":"Repeat interval type"}))},control:p,name:"repeatIntervalValueType"})]})})})]}),(0,G.jsx)(l.Field,{label:"Mute timings","data-testid":"am-mute-timing-select",description:"Add mute timing to policy",invalid:!!x.muteTimeIntervals,children:(0,G.jsx)(l.InputControl,{render:e=>{let{field:{onChange:t}}=e,n=be(e.field,xe);return(0,G.jsx)(l.MultiSelect,Object.assign({"aria-label":"Mute timings"},n,{className:u.input,onChange:e=>t(T(e)),options:g}))},control:p,name:"muteTimeIntervals"})}),(0,G.jsxs)("div",{className:c.buttonGroup,children:[fe||(fe=(0,G.jsx)(l.Button,{type:"submit",children:"Save policy"})),t||(t=(0,G.jsx)(l.Button,{onClick:n,fill:"outline",type:"button",variant:"secondary",children:"Cancel"}))]})]})}})},Ce=e=>{const t=e.spacing(3.5);return{addMatcherBtn:a.css`
      margin-bottom: ${t};
    `,matchersContainer:a.css`
      background-color: ${e.colors.background.secondary};
      margin: ${e.spacing(1,0)};
      padding: ${e.spacing(1,4.6,1,1.5)};
      width: fit-content;
    `,matchersOperator:a.css`
      min-width: 140px;
    `,nestedPolicies:a.css`
      margin-top: ${t};
    `,removeButton:a.css`
      margin-left: ${e.spacing(1)};
      margin-top: ${e.spacing(2.5)};
    `,buttonGroup:a.css`
      margin: ${e.spacing(6)} 0 ${t};

      & > * + * {
        margin-left: ${e.spacing(1.5)};
      }
    `,noMatchersWarning:a.css`
      padding: ${e.spacing(1)} ${e.spacing(2)};
    `}};var Se,Ie,Ne,we,Ve,$e,Me,Oe,Te=n(83809);const _e=e=>{var t,n;let{alertManagerSourceName:a,muteTimingNames:o,hideActions:s}=e;const c=(0,l.useStyles2)(Be),u=(0,i.useDispatch)(),p=(0,g.Ko)(a),v=(0,ue._)((e=>e.amConfigs)),[h,x]=(0,r.useState)(""),{result:j}=a&&v[a]||oe.oq,f=(0,r.useMemo)((()=>{var e,t,n,a;const r=null!==(e=null==j||null===(t=j.alertmanager_config)||void 0===t?void 0:t.mute_time_intervals)&&void 0!==e?e:[],i=null!==(n=null==j||null===(a=j.alertmanager_config)||void 0===a?void 0:a.muteTimeProvenances)&&void 0!==n?n:{};return r.filter((e=>{let{name:t}=e;return!o||o.includes(t)})).map((e=>({id:e.name,data:Object.assign({},e,{provenance:i[e.name]})})))}),[null==j||null===(t=j.alertmanager_config)||void 0===t?void 0:t.mute_time_intervals,null==j||null===(n=j.alertmanager_config)||void 0===n?void 0:n.muteTimeProvenances,o]),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const a=(0,g.Ko)(e),i=H.Vt.hasPermission(a.update),o=H.Vt.hasPermission(a.delete),s=!t&&(i||o);return(0,r.useMemo)((()=>{const t=[{id:"name",label:"Name",renderCell:function(e){let{data:t}=e;return(0,G.jsxs)(G.Fragment,{children:[t.name," ",t.provenance&&(we||(we=(0,G.jsx)(d.C0,{})))]})},size:"250px"},{id:"timeRange",label:"Time range",renderCell:e=>{let{data:t}=e;return ke(t.time_intervals)}}];return s&&t.push({id:"actions",label:"Actions",renderCell:function(t){let{data:r}=t;return r.provenance?(0,G.jsx)("div",{children:(0,G.jsx)(l.Link,{href:(0,k.eQ)("/alerting/routes/mute-timing/edit",e,{muteName:r.name}),children:Ve||(Ve=(0,G.jsx)(l.IconButton,{name:"file-alt",title:"View mute timing"}))})}):(0,G.jsxs)("div",{children:[(0,G.jsx)(m.q,{actions:[a.update],children:(0,G.jsx)(l.Link,{href:(0,k.eQ)("/alerting/routes/mute-timing/edit",e,{muteName:r.name}),children:$e||($e=(0,G.jsx)(l.IconButton,{name:"edit",title:"Edit mute timing"}))})}),(0,G.jsx)(m.q,{actions:[a.delete],children:(0,G.jsx)(l.IconButton,{name:"trash-alt",title:"Delete mute timing",onClick:()=>n(r.name)})})]})},size:"100px"}),t}),[e,n,s,a])}(a,s,x);return(0,G.jsxs)("div",{className:c.container,children:[!s&&(Se||(Se=(0,G.jsx)("h5",{children:"Mute timings"}))),!s&&(Ie||(Ie=(0,G.jsx)("p",{children:"Mute timings are a named interval of time that may be referenced in the notification policy tree to mute particular notification policies for specific times of the day."}))),!s&&f.length>0&&(0,G.jsx)(m.q,{actions:[p.create],children:(0,G.jsx)(l.LinkButton,{className:c.addMuteButton,icon:"plus",variant:"primary",href:(0,k.eQ)("alerting/routes/mute-timing/new",a),children:"New mute timing"})}),f.length>0?(0,G.jsx)(ie.t,{items:f,cols:b}):s?Ne||(Ne=(0,G.jsx)("p",{children:"No mute timings configured"})):(0,G.jsx)(ne,{text:"You haven't created any mute timings yet",buttonLabel:"Add mute timing",buttonIcon:"plus",buttonSize:"lg",href:(0,k.eQ)("alerting/routes/mute-timing/new",a),showButton:H.Vt.hasPermission(p.create)}),!s&&(0,G.jsx)(l.ConfirmModal,{isOpen:!!h,title:"Delete mute timing",body:`Are you sure you would like to delete "${h}"`,confirmText:"Delete",onConfirm:()=>u((0,Te.r0)(a,h)),onDismiss:()=>x("")})]})};function ke(e){return e.map(((e,t)=>{const{times:n,weekdays:a,days_of_month:i,months:l,years:o}=e,s=(0,h.u6)(n),c=(0,h.v7)(a),u=(0,h.J8)(i),d=(0,h.m8)(l),m=(0,h.qw)(o);return(0,G.jsxs)(r.Fragment,{children:[`${s} ${c}`,Me||(Me=(0,G.jsx)("br",{})),[u,d,m].join(" | "),Oe||(Oe=(0,G.jsx)("br",{}))]},JSON.stringify(e)+t)}))}const Be=e=>({container:a.css`
    display: flex;
    flex-flow: column nowrap;
  `,addMuteButton:a.css`
    margin-bottom: ${e.spacing(2)};
    align-self: flex-end;
  `});var qe;const Fe=e=>{let{onChange:t,receivers:n,routes:a,readOnly:i=!1,alertManagerSourceName:o}=e;const s=(0,l.useStyles2)(Ge),c=(0,l.useStyles2)(z),u=(0,g.Ko)(o),d=a.groupWaitValue?`${a.groupWaitValue}${a.groupWaitValueType}`:"-",p=a.groupIntervalValue?`${a.groupIntervalValue}${a.groupIntervalValueType}`:"-",v=a.repeatIntervalValue?`${a.repeatIntervalValue}${a.repeatIntervalValueType}`:"-",[h,x]=(0,r.useState)(a.routes),[j,f]=(0,r.useState)(!1);return(0,G.jsxs)("div",{className:c.container,children:[(0,G.jsx)("div",{className:c.titleCell,children:"Group wait"}),(0,G.jsx)("div",{className:c.valueCell,children:d}),(0,G.jsx)("div",{className:c.titleCell,children:"Group interval"}),(0,G.jsx)("div",{className:c.valueCell,children:p}),(0,G.jsx)("div",{className:c.titleCell,children:"Repeat interval"}),(0,G.jsx)("div",{className:c.valueCell,children:v}),(0,G.jsx)("div",{className:c.titleCell,children:"Nested policies"}),(0,G.jsxs)("div",{className:c.valueCell,children:[h.length?(0,G.jsx)(We,{isAddMode:j,onCancelAdd:()=>{f(!1),x((e=>{const t=[...e];return t.pop(),t}))},onChange:e=>{t(Object.assign({},a,{routes:e})),j&&f(!1)},receivers:n,routes:h,alertManagerSourceName:o}):qe||(qe=(0,G.jsx)("p",{children:"No nested policies configured."})),!j&&!i&&(0,G.jsx)(m.q,{actions:[u.create],children:(0,G.jsx)(l.Button,{className:s.addNestedRoutingBtn,icon:"plus",onClick:()=>{x((e=>[...e,N])),f(!0)},variant:"secondary",type:"button",children:"Add nested policy"})})]}),(0,G.jsx)("div",{className:c.titleCell,children:"Mute timings"}),(0,G.jsx)("div",{className:c.valueCell,children:(0,G.jsx)(_e,{alertManagerSourceName:o,muteTimingNames:a.muteTimeIntervals,hideActions:!0})})]})},Ge=e=>({addNestedRoutingBtn:a.css`
      margin-top: ${e.spacing(2)};
    `});var Ae,Pe;const Ee=(e,t)=>{const n=[...e],a=n.findIndex((e=>e.id===t.id));return a>=0&&(n[a]=Object.assign({},n[a],t)),n},We=e=>{let{isAddMode:t,onCancelAdd:n,onChange:a,receivers:i,routes:o,filters:s,readOnly:c=!1,alertManagerSourceName:u}=e;const[d,m]=(0,r.useState)(!1),[v,x]=(0,r.useState)(void 0),[j,f]=(0,r.useState)(),b=(0,g.Ko)(u),y=H.Vt.hasPermission(b.update),C=H.Vt.hasPermission(b.delete),S=!c&&(y||C),I=(0,r.useCallback)((e=>f(e.id)),[]),N=(0,r.useCallback)((()=>f(void 0)),[]),w=[{id:"matchingCriteria",label:"Matching labels",renderCell:e=>e.data.object_matchers.length?(0,G.jsx)(le.g,{matchers:e.data.object_matchers.map(h._J)}):Ae||(Ae=(0,G.jsx)("span",{children:"Matches all alert instances"})),size:10},{id:"groupBy",label:"Group by",renderCell:e=>e.data.overrideGrouping&&e.data.groupBy.join(", ")||"-",size:5},{id:"receiverChannel",label:"Contact point",renderCell:e=>e.data.receiver||"-",size:5},{id:"muteTimings",label:"Mute timings",renderCell:e=>e.data.muteTimeIntervals.join(", ")||"-",size:5},...S?[{id:"actions",label:"Actions",renderCell:e=>{if(e.renderExpandedContent)return null;return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(l.HorizontalGroup,{children:[(0,G.jsx)(l.Button,{"aria-label":"Edit route",icon:"pen",onClick:()=>{I(e),m(!0)},size:"sm",type:"button",variant:"secondary",children:"Edit"}),(0,G.jsx)(l.IconButton,{"aria-label":"Delete route",name:"trash-alt",onClick:()=>{x(e.data.id)},type:"button"})]})})},size:"100px"}]:[]],V=(0,r.useMemo)((()=>((e,t,n)=>{const a=(0,h.Zh)(null!=t?t:"");let r=e;return a.length&&(r=e.filter((e=>{const t=e.object_matchers.map(h._J);return(0,p.intersectionWith)(t,a,p.isEqual).length>0}))),n&&n.length>0&&(r=r.filter((e=>e.receiver.toLowerCase().includes(n.toLowerCase())))),r})(o,null==s?void 0:s.queryString,null==s?void 0:s.contactPoint)),[o,s]),$=(0,r.useMemo)((()=>{return(t?o:V).map(((t,n)=>{var a;return{id:null!==(a=null==e?void 0:e(t))&&void 0!==a?a:n,data:t}}));var e}),[t,o,V]);return(0,r.useEffect)((()=>{t&&$.length&&f($[$.length-1].id),!t&&$.length&&f(void 0)}),[t,$]),o.length>0&&0===V.length?Pe||(Pe=(0,G.jsx)(ee,{children:(0,G.jsx)("p",{children:"No policies found"})})):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ie.t,{cols:w,isExpandable:!0,items:$,testIdGenerator:()=>"am-routes-row",onCollapse:N,onExpand:I,isExpanded:e=>j===e.id,renderExpandedContent:e=>t||d?(0,G.jsx)(ye,{onCancel:()=>{t&&n(),m(!1)},onSave:e=>{const t=Ee(o,e);m(!1),a(t)},receivers:i,routes:e.data}):(0,G.jsx)(Fe,{onChange:e=>{const t=Ee(o,e);a(t)},receivers:i,routes:e.data,readOnly:c,alertManagerSourceName:u})}),(0,G.jsx)(l.ConfirmModal,{isOpen:!!v,title:"Delete notification policy",body:"Deleting this notification policy will permanently remove it. Are you sure you want to delete this policy?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:()=>{if(v){const e=((e,t)=>e.filter((e=>e.id!==t)))(o,v);a(e),x(void 0)}},onDismiss:()=>x(void 0)})]})};var Re,Le,De,ze,Ke,Je;const Qe=e=>{var t,n;let{alertManagerSourceName:a,onChange:i,onRootRouteEdit:o,receivers:s,routes:c,readOnly:u=!1}=e;const[d,p]=(0,r.useState)([...c.routes]),[v,h]=(0,r.useState)(!1),x=(0,g.Ko)(a),j=H.Vt.hasPermission(x.create),[f,b]=(0,X.j)(),{queryString:y,contactPoint:C}=(0,k.$f)(f),[I,w]=(0,r.useState)({queryString:y,contactPoint:C});(0,Z.Z)((()=>{b({queryString:I.queryString,contactPoint:I.contactPoint})}),400,[I]);const V=(0,l.useStyles2)(Ue),$=()=>{w({queryString:void 0,contactPoint:void 0}),b({queryString:void 0,contactPoint:void 0})},M=()=>{$(),h(!0),p((()=>[...c.routes,Object.assign({},N,{matchers:[S]})]))};return(0,G.jsxs)("div",{className:V.container,children:[Re||(Re=(0,G.jsx)("h5",{children:"Specific routing"})),Le||(Le=(0,G.jsx)("p",{children:"Send specific alerts to chosen contact points, based on matching criteria"})),c.receiver?d.length>0?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{children:[!v&&(0,G.jsxs)("div",{className:V.searchContainer,children:[(0,G.jsx)(re.F,{onFilterChange:e=>w((t=>Object.assign({},t,{queryString:e}))),queryString:null!==(t=I.queryString)&&void 0!==t?t:"",className:V.filterInput}),(0,G.jsxs)("div",{className:V.filterInput,children:[ze||(ze=(0,G.jsx)(l.Label,{children:"Search by contact point"})),(0,G.jsx)(l.Input,{onChange:e=>{let{currentTarget:t}=e;return w((e=>Object.assign({},e,{contactPoint:t.value})))},value:null!==(n=I.contactPoint)&&void 0!==n?n:"",placeholder:"Search by contact point","data-testid":"search-query-input",prefix:Ke||(Ke=(0,G.jsx)(l.Icon,{name:"search"}))})]}),(y||C)&&(0,G.jsx)(l.Button,{variant:"secondary",icon:"times",onClick:$,className:V.clearFilterBtn,children:"Clear filters"})]}),!v&&!u&&(0,G.jsx)(m.q,{actions:[x.create],children:(0,G.jsx)("div",{className:V.addMatcherBtnRow,children:(0,G.jsx)(l.Button,{className:V.addMatcherBtn,icon:"plus",onClick:M,type:"button",children:"New policy"})})})]}),(0,G.jsx)(We,{isAddMode:v,readOnly:u,onCancelAdd:()=>{h(!1),p([...c.routes])},onChange:e=>{i(Object.assign({},c,{routes:e})),v&&h(!1)},receivers:s,routes:d,filters:{queryString:y,contactPoint:C},alertManagerSourceName:a})]}):u?Je||(Je=(0,G.jsx)(ee,{children:(0,G.jsx)("p",{children:"There are no specific policies configured."})})):(0,G.jsx)(ne,{buttonIcon:"plus",buttonLabel:"New specific policy",onButtonClick:M,text:"You haven't created any specific policies yet.",showButton:j}):u?De||(De=(0,G.jsx)(ee,{children:(0,G.jsx)("p",{children:"There is no default contact point configured for the root route."})})):(0,G.jsx)(ne,{buttonIcon:"rocket",buttonLabel:"Set a default contact point",onButtonClick:o,text:"You haven't set a default contact point for the root route yet.",showButton:j})]})},Ue=e=>({container:a.css`
      display: flex;
      flex-flow: column wrap;
    `,searchContainer:a.css`
      display: flex;
      flex-flow: row nowrap;
      padding-bottom: ${e.spacing(2)};
      border-bottom: 1px solid ${e.colors.border.strong};
    `,clearFilterBtn:a.css`
      align-self: flex-end;
      margin-left: ${e.spacing(1)};
    `,filterInput:a.css`
      width: 340px;
      & + & {
        margin-left: ${e.spacing(1)};
      }
    `,addMatcherBtnRow:a.css`
      display: flex;
      flex-flow: column nowrap;
      padding: ${e.spacing(2)} 0;
    `,addMatcherBtn:a.css`
      align-self: flex-end;
    `});var Ye;const Ze=(0,l.withErrorBoundary)((()=>{var e;const t=(0,i.useDispatch)(),n=(0,l.useStyles2)(He),[a,m]=(0,r.useState)(!1),g=(0,ce.k)("notification"),[p,v]=(0,se.k)(g),h=(0,ue._)((e=>e.amConfigs)),j=(0,r.useCallback)((()=>{p&&t((0,Te.Yh)(p))}),[p,t]);(0,r.useEffect)((()=>{j()}),[j]);const{result:f,loading:b,error:y}=p&&h[p]||oe.oq,C=null==f?void 0:f.alertmanager_config,[S,I]=(0,r.useMemo)((()=>w(null==C?void 0:C.route)),[null==C?void 0:C.route]),N=M((null!==(e=null==C?void 0:C.receivers)&&void 0!==e?e:[]).map((e=>e.name))),$=(0,r.useMemo)((()=>{var e;return Boolean(null==C||null===(e=C.route)||void 0===e?void 0:e.provenance)}),[null==C?void 0:C.route]),O=()=>{m(!0)},T=()=>{m(!1)};(0,o.x)((e=>e.unifiedAlerting.saveAMConfig));const _=e=>{if(!f)return;const n=V(p,Object.assign({},S,e),I);a&&T(),t((0,Te.mM)({newConfig:Object.assign({},f,{alertmanager_config:Object.assign({},f.alertmanager_config,{route:n})}),oldConfig:f,alertManagerSourceName:p,successMessage:"Saved",refetch:!0}))};if(!p)return(0,G.jsx)(c.J,{pageId:"am-routes",children:(0,G.jsx)(u.I,{availableAlertManagers:g})});const k=!p||((0,x.RY)(p)||$);return(0,G.jsxs)(c.J,{pageId:"am-routes",children:[(0,G.jsx)(s.P,{current:p,onChange:v,dataSources:g}),y&&!b&&(0,G.jsx)(l.Alert,{severity:"error",title:"Error loading Alertmanager config",children:y.message||"Unknown error."}),$&&(0,G.jsx)(d.Xq,{resource:d.Uv.RootNotificationPolicy}),b&&(Ye||(Ye=(0,G.jsx)(l.LoadingPlaceholder,{text:"Loading Alertmanager config..."}))),f&&!b&&!y&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(U,{readOnly:k,alertManagerSourceName:p,isEditMode:a,onSave:_,onEnterEditMode:O,onExitEditMode:T,receivers:N,routes:S}),(0,G.jsx)("div",{className:n.break}),(0,G.jsx)(Qe,{alertManagerSourceName:p,onChange:_,readOnly:k,onRootRouteEdit:O,receivers:N,routes:S}),(0,G.jsx)("div",{className:n.break}),(0,G.jsx)(_e,{alertManagerSourceName:p})]})]})}),{style:"page"}),He=e=>({break:a.css`
    width: 100%;
    height: 0;
    margin-bottom: ${e.spacing(2)};
  `})},40256:(e,t,n)=>{n.d(t,{J:()=>o});n(68404);var a=n(18745),r=n(69371),i=n(8674),l=n(45916);const o=e=>{let{children:t,pageId:n,isLoading:o}=e;const s=(0,i.h)((0,a.useSelector)((e=>e.navIndex)),n);return(0,l.jsx)(r.T,{navModel:s,children:(0,l.jsx)(r.T.Contents,{isLoading:o,children:t})})}},53262:(e,t,n)=>{n.d(t,{q:()=>i});n(68404);var a=n(61959),r=n(45916);const i=e=>{let{actions:t,children:n,fallback:i=!0}=e;return t.some((e=>a.Vt.hasAccess(e,i)))?(0,r.jsx)(r.Fragment,{children:n}):null}},71308:(e,t,n)=>{n.d(t,{I:()=>g});n(68404);var a,r,i,l,o=n(3490),s=n(82498),c=n(50489),u=n(45916);const d=()=>a||(a=(0,u.jsx)(o.Alert,{title:"No Alertmanager found",severity:"warning",children:"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."})),m=()=>r||(r=(0,u.jsx)(o.Alert,{title:"Selected Alertmanager not found. Select a different Alertmanager.",severity:"warning",children:"Selected Alertmanager no longer exists or you may not have permission to access it."})),g=e=>{let{availableAlertManagers:t}=e;const[n,a]=(0,s.k)(t),r=t.length>0;return(0,u.jsx)("div",{children:r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.P,{onChange:a,dataSources:t}),i||(i=(0,u.jsx)(m,{}))]}):l||(l=(0,u.jsx)(d,{}))})}},73358:(e,t,n)=>{n.d(t,{C0:()=>s,Uv:()=>l,Xq:()=>o});n(68404);var a,r=n(3490),i=n(45916);let l;!function(e){e.ContactPoint="contact point",e.Template="template",e.MuteTiming="mute timing",e.AlertRule="alert rule",e.RootNotificationPolicy="root notification policy"}(l||(l={}));const o=e=>{let{resource:t}=e;return(0,i.jsxs)(r.Alert,{title:`This ${t} cannot be edited through the UI`,severity:"info",children:["This ",t," has been provisioned, that means it was created by config. Please contact your server admin to update this ",t,"."]})},s=()=>a||(a=(0,i.jsx)(r.Badge,{text:"Provisioned",color:"purple"}))},16905:(e,t,n)=>{n.d(t,{F:()=>u});var a,r,i,l=n(36636),o=(n(68404),n(8072)),s=n(3490),c=n(45916);const u=e=>{let{className:t,onFilterChange:n,defaultQueryString:l,queryString:u}=e;const m=(0,s.useStyles2)(d),g=a||(a=(0,c.jsx)(s.Icon,{name:"search"}));return(0,c.jsxs)("div",{className:t,children:[(0,c.jsx)(s.Label,{children:(0,c.jsxs)(o.Stack,{gap:.5,children:[r||(r=(0,c.jsx)("span",{children:"Search by label"})),(0,c.jsx)(s.Tooltip,{content:i||(i=(0,c.jsxs)("div",{children:["Filter alerts using label querying, ex:",(0,c.jsx)("pre",{children:'{severity="critical", instance=~"cluster-us-.+"}'})]})),children:(0,c.jsx)(s.Icon,{className:m.icon,name:"info-circle",size:"sm"})})]})}),(0,c.jsx)(s.Input,{placeholder:"Search",defaultValue:l,value:u,onChange:e=>{const t=e.target;n(t.value)},"data-testid":"search-query-input",prefix:g,className:m.inputWidth})]})},d=e=>({icon:l.css`
    margin-right: ${e.spacing(.5)};
  `,inputWidth:l.css`
    width: 340px;
    flex-grow: 0;
  `})},68698:(e,t,n)=>{n.d(t,{g:()=>o});var a=n(36636),r=(n(68404),n(3490)),i=n(82139),l=n(45916);const o=e=>{let{matchers:t}=e;const n=(0,r.useStyles2)(s);return(0,l.jsx)("div",{children:(0,l.jsx)(r.TagList,{className:n.tags,tags:t.map((e=>`${e.name}${(0,i.zy)(e)}${e.value}`))})})},s=()=>({tags:a.css`
    justify-content: flex-start;
  `})},82498:(e,t,n)=>{n.d(t,{k:()=>s});var a=n(68404),r=n(26011),i=n(17421),l=n(85464),o=n(19462);function s(e){const[t,n]=(0,r.K)(),s=function(e){return(0,a.useCallback)((t=>e.map((e=>e.name)).includes(t)),[e])}(e),c=(0,a.useCallback)((e=>{s(e)&&(e===o.GC?(i.Z.delete(l.de),n({[l.c4]:null})):(i.Z.set(l.de,e),n({[l.c4]:e})))}),[n,s]),u=t[l.c4];if(u&&"string"==typeof u)return s(u)?[u,c]:[void 0,c];const d=i.Z.get(l.de);return d&&"string"==typeof d&&s(d)?(c(d),[d,c]):s(o.GC)?[o.GC,c]:[void 0,c]}},1698:(e,t,n)=>{n.d(t,{k:()=>i});var a=n(68404),r=n(19462);function i(e){return(0,a.useMemo)((()=>(0,r.LE)(e)),[e])}},28410:(e,t,n)=>{n.d(t,{j:()=>l});var a=n(68404),r=n(42326),i=n(90923);function l(){const{search:e}=(0,r.TH)();return[(0,a.useMemo)((()=>new URLSearchParams(e)),[e]),(0,a.useCallback)(((e,t)=>{i.locationService.partial(e,t)}),[])]}}}]);
//# sourceMappingURL=AlertAmRoutes.b4845b566cbc309618a7.js.map