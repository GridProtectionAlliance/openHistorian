"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[323],{11389:(X,I,t)=>{t.d(I,{o:()=>m});var s=t(74848),r=t(32196),T=t(40845),W=t(13471);const m=({items:M,children:R,isPinned:a,scrollable:N=!1,maxHeight:B})=>{const g=(0,T.of)(d),p=N?{maxHeight:B,overflowY:"auto"}:{};return(0,s.jsxs)("div",{className:g.wrapper,style:p,children:[M.map(({label:f,value:i,color:l,colorIndicator:x,colorPlacement:P,isActive:v,lineStyle:n},h)=>(0,s.jsx)(W.B,{label:f,value:i,color:l,colorIndicator:x,colorPlacement:P,isActive:v,justify:"space-between",isPinned:a,lineStyle:n,showValueScroll:!N},h)),R]})},d=M=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${M.colors.border.medium}`,padding:M.spacing(1)})})},75073:(X,I,t)=>{t.d(I,{S:()=>B});var s=t(74848),r=t(32196),T=t(67061),W=t(14689),m=t(55852),d=t(40845);function M({action:p,...f}){return(0,s.jsx)(m.$n,{variant:"primary",size:"sm",onClick:p.onClick,...f,children:p.title})}const R="add-annotation-button",a=(p,f)=>(0,s.jsx)(T.B,{direction:"column",justifyContent:"flex-start",gap:.5,children:p.map((i,l)=>(0,s.jsx)(W.R,{link:i,buttonProps:{className:f.dataLinkButton,fill:"text"}},l))}),N=p=>(0,s.jsx)(T.B,{direction:"column",justifyContent:"flex-start",children:p.map((f,i)=>(0,s.jsx)(M,{action:f,variant:"secondary"},i))}),B=({dataLinks:p,actions:f,annotate:i})=>{const l=(0,d.of)(g);return(0,s.jsxs)("div",{className:l.wrapper,children:[p.length>0&&(0,s.jsx)("div",{className:l.dataLinks,children:a(p,l)}),f&&f.length>0&&(0,s.jsx)("div",{className:l.dataLinks,children:N(f)}),i!=null&&(0,s.jsx)("div",{className:l.addAnnotations,children:(0,s.jsx)(m.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:R,onClick:i,children:"Add annotation"})})]})},g=p=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:p.spacing(0)}),dataLinks:(0,r.css)({borderTop:`1px solid ${p.colors.border.medium}`,padding:p.spacing(1)}),addAnnotations:(0,r.css)({borderTop:`1px solid ${p.colors.border.medium}`,padding:p.spacing(1)}),dataLinkButton:(0,r.css)({cursor:"pointer","&:hover":{textDecoration:"underline",background:"none"}})})},52415:(X,I,t)=>{t.d(I,{A:()=>m});var s=t(74848),r=t(32196),T=t(40845),W=t(13471);const m=({item:M,isPinned:R})=>{const a=(0,T.of)(d),{label:N,value:B,color:g,colorIndicator:p}=M;return(0,s.jsx)("div",{className:a.wrapper,children:(0,s.jsx)(W.B,{label:N,value:B,color:g,colorIndicator:p,marginRight:"22px",isPinned:R})})},d=M=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:M.spacing(1),lineHeight:1})})},13471:(X,I,t)=>{t.d(I,{B:()=>P});var s=t(74848),r=t(32196),T=t(96540),W=t(40845),m=t(32982),d=t(56034),M=t(24293),R=t(94536),a=t(79871),N=t(10875),B=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(B||{});const g=({color:n=M.F,colorIndicator:h=a.Ev,position:u=0,lineStyle:j})=>{const U=(0,W.of)(p);return h===a.fX.series?(0,s.jsx)(R.p,{color:n,lineStyle:j,className:u===0?U.leading:U.trailing}):(0,s.jsx)("span",{style:{backgroundColor:n},className:(0,r.cx)(u===0?U.leading:U.trailing,(0,N.L$)(h,U))})},p=n=>({leading:(0,r.css)({marginRight:n.spacing(.5)}),trailing:(0,r.css)({marginLeft:n.spacing(.5)}),value:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,r.css)({}),pie_1_4:(0,r.css)({}),pie_2_4:(0,r.css)({}),pie_3_4:(0,r.css)({}),marker_sm:(0,r.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,r.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var f=(n=>(n.label="label",n.value="value",n))(f||{});const i="Copied to clipboard",l=2*1e3,x=7,P=({label:n,value:h,color:u,colorIndicator:j,colorPlacement:U=a.lJ.first,justify:O="flex-start",isActive:V=!1,marginRight:H="0px",isPinned:k,lineStyle:J,showValueScroll:Y})=>{const S=(0,W.of)(v,O,H),Z=Y?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[w,G]=(0,T.useState)(!1),[ot,at]=(0,T.useState)(null),[tt,lt]=(0,T.useState)(!1),it=(0,T.useRef)(null),gt=(0,T.useRef)(null);(0,T.useEffect)(()=>{let b;return tt&&(b=setTimeout(()=>{lt(!1)},l)),()=>{window.clearTimeout(b)}},[tt]);const pt=async(b,et)=>{if(!(navigator?.clipboard&&window.isSecureContext)){xt(b,et);return}try{await navigator.clipboard.writeText(b),at({[`${et}`]:b}),lt(!0)}catch{at(null)}},xt=(b,et)=>{const Q=document.createElement("textarea");it.current?.appendChild(Q),Q.value=b,Q.focus(),Q.select();try{document.execCommand("copy")&&(at({[`${et}`]:b}),lt(!0))}catch(rt){console.error("Unable to copy to clipboard",rt)}Q.remove()},Et=b=>{b.currentTarget.offsetWidth<b.currentTarget.scrollWidth&&G(!0)},yt=()=>G(!1);return n.length*x>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,s.jsxs)("div",{className:S.contentWrapper,children:[(u||n)&&(0,s.jsxs)("div",{className:S.valueWrapper,children:[u&&U===a.lJ.first&&(0,s.jsx)(g,{color:u,colorIndicator:j,lineStyle:J}),k?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(d.m,{content:n,interactive:!1,show:w,children:(0,s.jsxs)(s.Fragment,{children:[tt&&ot?.label&&(0,s.jsx)(m.r,{placement:"top",referenceElement:it.current,children:i}),(0,s.jsx)("div",{className:(0,r.cx)(S.label,V&&S.activeSeries,navigator?.clipboard&&S.copy),onMouseEnter:Et,onMouseLeave:yt,onClick:()=>pt(n,"label"),ref:it,children:n})]})})}):(0,s.jsx)("div",{className:(0,r.cx)(S.label,V&&S.activeSeries),children:n})]}),(0,s.jsxs)("div",{className:S.valueWrapper,children:[u&&U===a.lJ.leading&&(0,s.jsx)(g,{color:u,colorIndicator:j,position:B.Leading,lineStyle:J}),k?(0,s.jsxs)(s.Fragment,{children:[tt&&ot?.value&&(0,s.jsx)(m.r,{placement:"top",referenceElement:gt.current,children:i}),(0,s.jsx)("div",{className:(0,r.cx)(S.value,V,navigator?.clipboard&&S.copy),style:Z,onClick:()=>pt(h?h.toString():"","value"),ref:gt,children:h})]}):(0,s.jsx)("div",{className:(0,r.cx)(S.value,V),style:Z,children:h}),u&&U===a.lJ.trailing&&(0,s.jsx)(g,{color:u,colorIndicator:j,position:B.Trailing,lineStyle:J})]})]})},v=(n,h,u)=>({contentWrapper:(0,r.css)({display:"flex",alignItems:"start",justifyContent:h,marginRight:u}),label:(0,r.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,r.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,r.css)({display:"flex",alignItems:"center"}),activeSeries:(0,r.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,r.css)({cursor:"pointer"})})},55307:(X,I,t)=>{t.d(I,{i:()=>W});var s=t(74848),r=t(32196),T=t(40845);const W=({children:d,className:M})=>{const R=(0,T.of)(m);return(0,s.jsx)("div",{className:(0,r.cx)(R.wrapper,M),children:d})},m=d=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",fontSize:d.typography.bodySmall.fontSize})})},81530:(X,I,t)=>{t.d(I,{X:()=>B,k:()=>a});var s=t(90708),r=t(26272),T=t(11261),W=t(80997),m=t(17172),d=t(10096),M=t(77920),R=t(3704);const a=(f,i,l,x,P,v)=>!P||P.length===0?[]:P.map(h=>{const u=(0,s.vd)(f,i,l),j={...l,__dataContext:u},U=(V,H,k)=>x(V,{...j,...H},k);v.valueRowIndex!==void 0&&!isNaN(v.valueRowIndex)?u.value.rowIndex=v.valueRowIndex:u.value.calculatedValue=v.calculatedValue;let O={title:"",onClick:V=>{}};return O={title:x(h.title||"",j),onClick:(V,H)=>{N(h,U)}},O}).filter(h=>!!h),N=(f,i)=>{try{const l=new URL(g(i(f.fetch.url))),x={};let P={url:l.toString(),method:f.fetch.method,data:p(f,i),headers:x};f.fetch.headers&&f.fetch.headers.forEach(([v,n])=>{x[i(v)]=i(n)}),f.fetch.queryParams&&(f.fetch.queryParams?.forEach(([v,n])=>{l.searchParams.append(i(v),i(n))}),P.url=l.toString()),x["X-Grafana-Action"]="1",P.headers=x,(0,m.AI)().fetch(P).subscribe({error:v=>{d.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(v)},complete:()=>{d.lE.emit(r.r1.alertSuccess,["API call was successful"])}})}catch(l){d.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(l);return}},B=(f=[],i=[])=>({name:"Default field",type:T.PU.string,config:{links:f,actions:i},values:[]}),g=f=>{if(f.startsWith("/")){const l=W.sQ.sanitizeUrl(f);f=(0,R.z)(l,[])}return f},p=(f,i)=>{let l=f.fetch.body?i(f.fetch.body):"{}";return f.fetch.method===M.DO.GET&&(l=void 0),l}},77920:(X,I,t)=>{t.d(I,{DO:()=>W,en:()=>s,gR:()=>r,xp:()=>T});var s=(a=>(a.Center="center",a.Left="left",a.LeftRight="leftright",a.Right="right",a.Scale="scale",a))(s||{}),r=(a=>(a.Bottom="bottom",a.Center="center",a.Scale="scale",a.Top="top",a.TopBottom="topbottom",a))(r||{}),T=(a=>(a.Contain="contain",a.Cover="cover",a.Fill="fill",a.Original="original",a.Tile="tile",a))(T||{}),W=(a=>(a.GET="GET",a.POST="POST",a.PUT="PUT",a))(W||{}),m=(a=>(a.Straight="straight",a))(m||{});const d={vertices:[]},M={connections:[]},R={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},20634:(X,I,t)=>{t.r(I),t.d(I,{plugin:()=>Ut});var s=t(65158),r=t(37055),T=t(24293),W=t(27310),m=t(11261),d=t(77678),M=t(89654),R=t(22680),a=t(52198),N=t(11404),B=t(56675),g=t(74848),p=t(96540),f=t(40845),i=t(52622),l=t(38761),x=t(36613),P=t(97706),v=t(83195),n=t(8066),h=t(51336),u=t(29413),j=t(30501),U=t(24182),O=t(67266),V=t(81297),H=t(16895);const k={bucketCount:30,bucketOffset:0},J={fillOpacity:80,gradientMode:i.on.None,lineWidth:1};function Y(o,e){return Math.floor(o/e)*e}function S(o,e){return Math.ceil(o/e)*e}function Z(o){return o.fields[0].type===m.PU.string?1:(0,P.h)(o.fields[1].values[0]-o.fields[0].values[0],9)}function w(o){return o.fields[0].type===m.PU.string?1:(0,P.h)(o.fields[1].values[1]-o.fields[0].values[1],9)}const G=(o,e)=>{let{min:c,max:E}=o.fields[2].config,y=new h.e,D=o.fields[0].type===m.PU.string,A=Z(o),z=w(o),K=z/A,$=z!==A,_=(L,C,F,nt,Mt,Pt)=>{let dt=L.axes[C]._space,ut=L.valToPos(L.data[0][0]+A,"x")-L.valToPos(L.data[0][0],"x"),ft=Y(c??L.data[0][0],A),At=S(E??L.data[0][L.data[0].length-1]+A,A),St=[],Wt=Math.ceil(dt/ut);for(let Dt=0,Ot=ft;Ot<=At;Dt++,Ot+=A)!(Dt%Wt)&&St.push(Ot);return St};y.addScale({scaleKey:"x",isTime:!1,distribution:D?i.L4.Ordinal:$?i.L4.Log:i.L4.Linear,log:2,orientation:i.Lt.Horizontal,direction:i.ON.Right,range:$?(L,C,F)=>x.A.rangeLog(C,F*K,2,!0):(L,C,F)=>{c!=null&&(C=c),E!=null&&(F=E);let nt=L.data[0][L.data[0].length-1];return C=S(C,A),F=!D&&F===nt?F+A:Y(F,A),[C,F]}}),y.addScale({scaleKey:"y",isTime:!1,distribution:i.L4.Linear,orientation:i.Lt.Vertical,direction:i.ON.Up,softMin:0});const q=o.fields[0].display,ct=L=>(0,v.cN)(q(L));y.addAxis({scaleKey:"x",isTime:!1,placement:i.vM.Bottom,incrs:D?[1]:$?void 0:d.rW,splits:$||D?void 0:_,values:D?(L,C)=>C:(L,C)=>{const F=C.map(ct),nt=F.reduce((ut,ft)=>Math.max((0,u.kD)(ft,j.pi).width,ut),0),Pt=L.bbox.width/((nt+10)*devicePixelRatio),dt=Math.ceil(F.length/Pt);return F.map((ut,ft)=>ft%dt===0?ut:null)},theme:e});let mt=o.fields[2].display;y.addAxis({scaleKey:"y",isTime:!1,placement:i.vM.Left,formatValue:(L,C)=>(0,v.cN)(mt(L,C)),theme:e}),y.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ct=(0,H.ro)(ot(o));y.setStackingGroups(Ct);let vt=x.A.paths.bars({align:1,size:[1,1/0]}),Tt=0;for(let L=2;L<o.fields.length;L++){const C=o.fields[L];C.state=C.state??{},C.state.seriesIndex=Tt++;const F={...J,...C.config.custom},nt="y",Mt=(0,n.Qi)(C),dt=(0,n.lz)(C,e).color;y.addSeries({scaleKey:nt,lineWidth:F.lineWidth,lineColor:dt,fillOpacity:F.fillOpacity,theme:e,colorMode:Mt,pathBuilder:vt,show:!F.hideFrom?.viz,gradientMode:F.gradientMode,thresholds:C.config.thresholds,hardMin:C.config.min,hardMax:C.config.max,softMin:F.axisSoftMin,softMax:F.axisSoftMax,dataFrameFieldIndex:C.state.origin})}return y},ot=o=>({...o,fields:o.fields.filter(e=>e.name!==d.dA)}),at=(o,e)=>{for(let c=1;c<e.fields.length;c++){let E=e.fields[c].values;for(let y=0;y<E.length;y++)E[y]===0&&(E[y]=null)}return(0,H.bq)(e,o.getStackingGroups())};class tt extends p.Component{constructor(e){super(e),this.state=this.prepState(e)}prepState(e,c=!0){const{alignedFrame:E}=e,y=c?G(E,this.props.theme):this.state.config,D=ot(E),A=at(y,D);return{alignedFrame:E,alignedData:A,config:y,xMinOnlyFrame:D}}renderLegend(e){const{legend:c}=this.props;if(!e||c.showLegend===!1)return null;const E=this.props.options.combine?[this.props.alignedFrame]:this.props.rawSeries;return(0,g.jsx)(U.$,{data:E,config:e,maxHeight:"35%",maxWidth:"60%",...c})}componentDidUpdate(e){const{structureRev:c,alignedFrame:E,bucketSize:y,bucketCount:D}=this.props;if(E!==e.alignedFrame){const A=this.state.config==null||D!==e.bucketCount||y!==e.bucketSize||this.props.options!==e.options||this.state.config===void 0||c!==e.structureRev||!c,z=this.prepState(this.props,A);this.setState(z)}}render(){const{width:e,height:c,children:E,alignedFrame:y}=this.props,{config:D}=this.state;return D?(0,g.jsx)(O.KU,{width:e,height:c,legend:this.renderLegend(D),children:(A,z)=>(0,g.jsx)(V.Z,{config:this.state.config,data:this.state.alignedData,width:A,height:z,children:E?E(D,y,this.state.xMinOnlyFrame):null})}):null}}var lt=t(11389),it=t(75073),gt=t(52415),pt=t(55307),xt=t(10875),Et=t(21164),yt=t(82915);const b=({series:o,xMinOnlyFrame:e,dataIdxs:c,seriesIdx:E,mode:y=i.$N.Single,sortOrder:D=i.xB.None,isPinned:A,maxHeight:z})=>{const K=o.fields[0],$=o.fields[1],{display:_}=K.config.unit!=null?K:$,{display:q}=$.config.unit!=null?$:K,ct=(0,v.cN)(_(K.values[c[0]])),ht=(0,v.cN)(q($.values[c[1]])),mt=K.config.custom?.hideFrom?.tooltip?null:{label:"Bucket",value:`${ct} - ${ht}`},Ct=(0,p.useMemo)(()=>(0,xt.cp)(e.fields,K,c,E,y,D),[e.fields,K,c,E,y,D]);let vt;if(A&&E!=null){const Tt=o.fields[E],L=c[E],C=(0,Et.u)(Tt,L);vt=(0,g.jsx)(it.S,{dataLinks:C})}return(0,g.jsxs)(pt.i,{children:[mt!=null&&(0,g.jsx)(gt.A,{item:mt,isPinned:A}),(0,g.jsx)(lt.o,{items:Ct,isPinned:A,scrollable:(0,yt.T5)({mode:y,maxHeight:z}),maxHeight:z}),vt]})},et=({data:o,options:e,width:c,height:E})=>{const y=(0,f.$j)(),D=(0,p.useMemo)(()=>{if(!o.series.length)return;if(o.series.forEach((K,$)=>{K.fields.forEach((_,q)=>{_.state={..._.state,origin:{frameIndex:$,fieldIndex:q}}})}),o.series.length===1){const K=(0,d.ix)(o.series[0]);if(K)return(0,d.cg)(K)}const z=(0,d.p3)(o.series,e);if(z)return(0,d.cg)(z,y)},[o.series,e,y]);if(!D||!D.fields.length)return(0,g.jsx)("div",{className:"panel-empty",children:(0,g.jsx)("p",{children:"No histogram found in response"})});const A=Z(D);return(0,g.jsx)(tt,{options:e,theme:y,legend:e.legend,rawSeries:o.series,structureRev:o.structureRev,width:c,height:E,alignedFrame:D,bucketSize:A,bucketCount:e.bucketCount,children:(z,K,$)=>(0,g.jsx)(g.Fragment,{children:e.tooltip.mode!==i.$N.None&&(0,g.jsx)(l.xl,{config:z,hoverMode:e.tooltip.mode===i.$N.Single?l.b3.xOne:l.b3.xAll,render:(_,q,ct,ht=!1)=>(0,g.jsx)(b,{series:D,xMinOnlyFrame:$,dataIdxs:q,seriesIdx:ct,mode:e.tooltip.mode,sortOrder:e.tooltip.sort,isPinned:ht,maxHeight:e.tooltip.maxHeight}),maxWidth:e.tooltip.maxWidth})})})},Q={stacking:{mode:i.gs.None,group:"A"}};var rt=t(2543);const Lt=(o,e,c,E)=>{if(e==="graph"&&c.angular.xaxis?.mode==="histogram"){const{fieldConfig:D,options:A}=Rt({...c.angular,fieldConfig:E});return o.fieldConfig=D,A}return{}};function Rt(o){let e={};const c={legend:{displayMode:i.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:i.$N.Single,sort:i.xB.None},combine:!1};return o.stack&&(e.stacking={mode:o.percentage?i.gs.Percent:i.gs.Normal,group:Q.stacking.group},c.combine=!1),{fieldConfig:{defaults:(0,rt.omitBy)({custom:e},rt.isNil),overrides:[]},options:c}}function st(o){if(o?.length!==1)return!1;const e=o[0];if(e.fields.length<3||!(0,d.NX)(e.fields[0].name)||!(0,d.H1)(e.fields[1].name))return!1;for(const c of e.fields)if(c.type!==m.PU.number)return!1;return!0}const Ut=new s.m(et).setPanelChangeHandler(Lt).setPanelOptions(o=>{o.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(e,c)=>st(c)}).addNumberInput({path:"bucketCount",name:d.Rt.bucketCount.name,description:d.Rt.bucketCount.description,settings:{placeholder:`Default: ${k.bucketCount}`,min:0},showIf:(e,c)=>!st(c)}).addNumberInput({path:"bucketSize",name:d.Rt.bucketSize.name,description:d.Rt.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:k.bucketSize,showIf:(e,c)=>!st(c)}).addNumberInput({path:"bucketOffset",name:d.Rt.bucketOffset.name,description:d.Rt.bucketOffset.description,settings:{placeholder:`Default: ${k.bucketOffset}`,min:0},showIf:(e,c)=>!st(c)}).addBooleanSwitch({path:"combine",name:d.Rt.combine.name,description:d.Rt.combine.description,defaultValue:k.combine,showIf:(e,c)=>!st(c)}),M.D(o),R.H(o)}).useFieldConfig({standardOptions:{[r.uo.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:T.Y.PaletteClassic}}},useCustomConfig:o=>{const e=J;o.addCustomEditor({id:"stacking",path:"stacking",name:"Stacking",category:["Histogram"],defaultValue:Q.stacking,editor:B.m,override:B.m,settings:{options:a.t.stacking},process:W.hS,shouldApply:c=>c.type===m.PU.number,showIf:(c,E)=>!st(E)}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:e.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:a.t.fillGradient[0].value,settings:{options:a.t.fillGradient}}),N.e(o)}})},21164:(X,I,t)=>{t.d(I,{O:()=>W,u:()=>T});var s=t(32264),r=t(81530);const T=(m,d)=>{const M=[];if((m.config.links?.length??0)>0&&m.getLinks!=null){const R=m.values[d],a=m.display?m.display(R):{text:`${R}`,numeric:+R},N=new Set;m.getLinks({calculatedValue:a,valueRowIndex:d}).forEach(B=>{const g=`${B.title}/${B.href}`;N.has(g)||(M.push(B),N.add(g))})}return M},W=(m,d,M,R)=>{if(!s.$.featureToggles?.vizActions)return[];const a=[],N=new Set;return(0,r.k)(m,d,d.state.scopedVars,M,d.config.actions??[],{valueRowIndex:R}).forEach(g=>{const p=`${g.title}`;N.has(p)||(a.push(g),N.add(p))}),a}},82915:(X,I,t)=>{t.d(I,{B_:()=>B,Fg:()=>f,O2:()=>p,T5:()=>i});var s=t(11261),r=t(28240),T=t(83195),W=t(57875),m=t(50311),d=t(46294),M=t(39624),R=t(52622),a=t(55129);function N(l){let x=new Map;return l.map(v=>({...v,fields:v.fields.map(n=>{if(n.type===s.PU.enum){let h=(0,a.M)(n.config,n.type),u=x.get(h);u||(u=[],x.set(h,u));let j=n.values.toArray().slice(),U=n.config.type.enum.text;if(u.length>0)for(let O=0;O<j.length;O++)j[O]+=u.length;return u.push(...U),n.config.type.enum.text=u,{...n,values:j}}return n})}))}function B(l,x,P,v){if(!l?.length)return null;(0,r.Fm)(l);let n=v!=null;v!=null&&v>0&&(l=[{...l[0],fields:[l[0].fields[v],...l[0].fields.filter((U,O)=>O!==v)]}]);for(let U of l)for(let O of U.fields)O.type===s.PU.time&&typeof O.values[0]!="number"&&(O.values=(0,m.s7)(O,{destinationType:s.PU.time}).values);let h=0;t:for(let U of l)for(let O of U.fields)if(O.type===s.PU.enum&&++h>1){l=N(l);break t}let u;const j=[];for(let U of l){const O=[];let V=!1,H=!1,k=n?U:(0,d.M)({frame:U,refFieldPseudoMin:P?.from.valueOf(),refFieldPseudoMax:P?.to.valueOf()});const J=(0,M.C)(k).fields;for(let Y=0;Y<J?.length;Y++){const S=J[Y];switch(S.type){case s.PU.time:V=!0,O.push(S);break;case s.PU.number:H=n?Y>0:!0,u={...S,values:S.values.map(G=>Number.isFinite(G)||G==null?G:null)},O.push(u);break;case s.PU.enum:H=!0;case s.PU.string:u={...S,values:S.values},O.push(u);break;case s.PU.boolean:H=!0;const Z=S.config?.custom??{},w={...S.config,max:1,min:0,custom:Z};Z.lineInterpolation!==R.dx.StepBefore&&(Z.lineInterpolation=R.dx.StepAfter),u={...S,config:w,type:s.PU.number,values:S.values.map(G=>G==null?G:G?1:0)},(0,T.j9)(w.unit)||(w.unit="bool",u.display=(0,W.J)({field:u,theme:x})),O.push(u);break}}(n||V)&&H&&j.push({...U,length:k.length,fields:O})}return j.length?(p(j,x,0),g(j,x),j):null}const g=(l,x)=>{const{palette:P}=x.visualization;for(const v of l)for(const n of v.fields)if(n.type===s.PU.enum){const h=P[n.state?.seriesIndex%P.length],u=x.visualization.getColorByName(h),j=n.config.type.enum;j.color=Array(j.text.length).fill(u),n.display=(0,W.J)({field:n,theme:x})}},p=(l,x,P)=>{let v=0;l.forEach(n=>{n.fields.forEach((h,u)=>{u!==P&&(h.type===s.PU.number||h.type===s.PU.boolean||h.type===s.PU.enum)&&(h.state={...h.state,seriesIndex:v++},h.display=(0,W.J)({field:h,theme:x}))})})};function f(l,x){return!l||!l.length?[x]:l.map(P=>P?.length?P:x)}const i=l=>l.mode===R.$N.Multi&&l.maxHeight!=null}}]);

//# sourceMappingURL=histogramPanel.fe145bdcc770b4834de0.js.map