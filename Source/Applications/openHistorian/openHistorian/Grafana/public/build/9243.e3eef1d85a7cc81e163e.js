(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9243],{44674:(ee,i,e)=>{"use strict";e.d(i,{M:()=>_e});var r=e(68404),y=e(22350),h=e(26418),b=e(67090),C=e(12936),O=e(3823),R=e(8944),E=e(31403),L=e(6554),A=e(2594),S=e(94025),M=e(35029),D=e(39904);function F({isOpen:pe,onCancel:he,onDiscard:Le,onCopy:Pe}){const Ve=(0,r.useRef)(null);return(0,r.useEffect)(()=>{pe&&Ve.current?.focus()},[pe]),r.createElement(M.u,{title:r.createElement("div",{className:"modal-header-title"},r.createElement(D.J,{name:"exclamation-triangle",size:"lg"}),r.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:he,isOpen:pe},r.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),r.createElement("p",null,"Do you want to copy your code to the clipboard?"),r.createElement(M.u.ButtonRow,null,r.createElement(E.zx,{type:"button",variant:"secondary",onClick:he,fill:"outline"},"Cancel"),r.createElement(E.zx,{variant:"destructive",type:"button",onClick:Le,ref:Ve},"Discard code and switch"),r.createElement(E.zx,{variant:"primary",onClick:Pe},"Copy code and switch")))}var U=e(53217);const N=({db:pe,value:he,onChange:Le,disabled:Pe,className:Ve,applyDefault:Ge})=>{const xe=(0,y.Z)(async()=>(await pe.datasets()).map(S.Er),[]);return(0,r.useEffect)(()=>{Ge&&(he?xe.value&&xe.value.find(et=>et.value===he)===void 0&&xe.value.length>0&&Le(xe.value[0]):xe.value&&xe.value[0]&&Le(xe.value[0]))},[xe.value,he,Ge,Le]),r.createElement(U.Ph,{className:Ve,"aria-label":"Dataset selector",value:he,options:xe.value,onChange:Le,disabled:Pe,isLoading:xe.loading,menuShouldPortal:!0})};var $=e(63134);const w=({db:pe,query:he,value:Le,className:Pe,onChange:Ve,forceFetch:Ge})=>{const xe=(0,y.Z)(async()=>!he.dataset&&!Ge?[]:(await pe.tables(he.dataset)).map($.E),[he.dataset]);return r.createElement(U.Ph,{className:Pe,disabled:xe.loading,"aria-label":"Table selector",value:Le,options:xe.value,onChange:Ve,isLoading:xe.loading,menuShouldPortal:!0,placeholder:xe.loading?"Loading tables":"Select table"})},V=[{label:"Builder",value:h.EditorMode.Builder},{label:"Code",value:h.EditorMode.Code}];function j({db:pe,query:he,queryRowFilter:Le,onChange:Pe,onRunQuery:Ve,onQueryRowChange:Ge,isQueryRunnable:xe,isDatasetSelectorHidden:et}){const{editorMode:We}=he,[Be,ft]=(0,O.Z)(),[st,pt]=(0,r.useState)(!1),ut=pe.toRawSql,be=(0,r.useCallback)(Ze=>{if(We===h.EditorMode.Code){pt(!0);return}Pe({...he,editorMode:Ze})},[We,Pe,he]),Xe=Ze=>{const dt={...he,format:Ze.value!==void 0?Ze.value:S.ws.Table};Pe(dt)},nt=Ze=>{if(Ze.value===he.dataset)return;const dt={...he,dataset:Ze.value,table:void 0,sql:void 0,rawSql:""};Pe(dt)},ze=Ze=>{if(Ze.value===he.table)return;const dt={...he,table:Ze.value,sql:void 0,rawSql:""};Pe(dt)};return r.createElement(r.Fragment,null,r.createElement(h.EditorHeader,null,r.createElement(h.InlineSelect,{label:"Format",value:he.format,placeholder:"Select format",menuShouldPortal:!0,onChange:Xe,options:S.x7}),We===h.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(R.x,{id:"sql-filter",label:"Filter",transparent:!0,showLabel:!0,value:Le.filter,onChange:Ze=>Ze.target instanceof HTMLInputElement&&Ge({...Le,filter:Ze.target.checked})}),r.createElement(R.x,{id:"sql-group",label:"Group",transparent:!0,showLabel:!0,value:Le.group,onChange:Ze=>Ze.target instanceof HTMLInputElement&&Ge({...Le,group:Ze.target.checked})}),r.createElement(R.x,{id:"sql-order",label:"Order",transparent:!0,showLabel:!0,value:Le.order,onChange:Ze=>Ze.target instanceof HTMLInputElement&&Ge({...Le,order:Ze.target.checked})}),r.createElement(R.x,{id:"sql-preview",label:"Preview",transparent:!0,showLabel:!0,value:Le.preview,onChange:Ze=>Ze.target instanceof HTMLInputElement&&Ge({...Le,preview:Ze.target.checked})})),r.createElement(h.FlexItem,{grow:1}),xe?r.createElement(E.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>Ve()},"Run query"):r.createElement(L.u,{theme:"error",content:r.createElement(r.Fragment,null,"Your query is invalid. Check below for details. ",r.createElement("br",null),"However, you can still run this query."),placement:"top"},r.createElement(E.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>Ve()},"Run query")),r.createElement(A.S,{options:V,size:"sm",value:We,onChange:be}),r.createElement(F,{isOpen:st,onCopy:()=>{pt(!1),ft(he.rawSql),Pe({...he,rawSql:ut(he),editorMode:h.EditorMode.Builder})},onDiscard:()=>{pt(!1),Pe({...he,rawSql:ut(he),editorMode:h.EditorMode.Builder})},onCancel:()=>pt(!1)})),We===h.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(h.Space,{v:.5}),r.createElement(h.EditorRow,null,et?null:r.createElement(h.EditorField,{label:"Dataset",width:25},r.createElement(N,{db:pe,value:he.dataset===void 0?null:he.dataset,onChange:nt})),r.createElement(h.EditorField,{label:"Table",width:25},r.createElement(w,{db:pe,query:he,value:he.table===void 0?null:he.table,onChange:ze,forceFetch:et,applyDefault:!0})))))}var x=e(9892),H=e(11041),_=e(89050),te=e(72648);function J({children:pe,onChange:he,query:Le,width:Pe,height:Ve,editorLanguageDefinition:Ge}){const xe=(0,r.useRef)(Le);(0,r.useEffect)(()=>{xe.current=Le},[Le]);const et=(0,r.useCallback)((We,Be)=>{const ft={...xe.current,rawQuery:!0,rawSql:We};he(ft,Be)},[he]);return r.createElement(h.SQLEditor,{width:Pe,height:Ve,query:Le.rawSql,onChange:et,language:Ge},pe)}var k=e(52081),P=e(8180),m=e(671),s=e(63615),c=e(20112),o=e(67487);function u({db:pe,query:he,onValidate:Le,range:Pe}){const[Ve,Ge]=(0,r.useState)(),xe=(0,te.l4)(),et=(0,r.useMemo)(()=>(0,c.Cf)("bytes"),[]),We=(0,r.useMemo)(()=>({error:x.css`
        color: ${xe.colors.error.text};
        font-size: ${xe.typography.bodySmall.fontSize};
        font-family: ${xe.typography.fontFamilyMonospace};
      `,valid:x.css`
        color: ${xe.colors.success.text};
      `,info:x.css`
        color: ${xe.colors.text.secondary};
      `}),[xe]),[Be,ft]=(0,m.Z)(async pt=>pt.rawSql?.trim()===""?null:await pe.validateQuery(pt,Pe),[pe]),[,]=(0,s.Z)(async()=>{const pt=await ft(he);return pt&&Ge(pt),null},1e3,[he,ft]);if((0,r.useEffect)(()=>{Ve?.isError&&Le(!1),Ve?.isValid&&Le(!0)},[Ve,Le]),!Be.value&&!Be.loading)return null;const st=Be.value?.error?l(Be.value.error):"";return r.createElement(r.Fragment,null,Be.loading&&r.createElement("div",{className:We.info},r.createElement(o.$,{inline:!0,size:12})," Validating query..."),!Be.loading&&Be.value&&r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,Be.value.isValid&&Be.value.statistics&&r.createElement("div",{className:We.valid},r.createElement(D.J,{name:"check"})," This query will process"," ",r.createElement("strong",null,(0,c.zc)(et(Be.value.statistics.TotalBytesProcessed)))," ","when run.")),r.createElement(r.Fragment,null,Be.value.isError&&r.createElement("div",{className:We.error},st))))}function l(pe){const he=pe.split(":");return he.length>2?he.slice(2).join(":"):pe}function f({showTools:pe,onFormatCode:he,onExpand:Le,isExpanded:Pe,...Ve}){const Ge=(0,te.l4)(),[xe,et]=(0,r.useState)(),We=(0,r.useMemo)(()=>({container:x.css`
        border: 1px solid ${Ge.colors.border.medium};
        border-top: none;
        padding: ${Ge.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${Ge.typography.bodySmall.fontSize};
      `,error:x.css`
        color: ${Ge.colors.error.text};
        font-size: ${Ge.typography.bodySmall.fontSize};
        font-family: ${Ge.typography.fontFamilyMonospace};
      `,valid:x.css`
        color: ${Ge.colors.success.text};
      `,info:x.css`
        color: ${Ge.colors.text.secondary};
      `,hint:x.css`
        color: ${Ge.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[Ge]);let Be={};return!pe&&xe===void 0&&(Be={height:0,padding:0,visibility:"hidden"}),r.createElement("div",{className:We.container,style:Be},r.createElement("div",null,Ve.onValidate&&r.createElement(u,{...Ve,onValidate:ft=>{et(ft),Ve.onValidate(ft)}})),pe&&r.createElement("div",null,r.createElement(k.Lh,{spacing:"sm"},he&&r.createElement(P.h,{onClick:he,name:"brackets-curly",size:"xs",tooltip:"Format query"}),Le&&r.createElement(P.h,{onClick:()=>Le(!Pe),name:Pe?"angle-up":"angle-down",size:"xs",tooltip:Pe?"Collapse editor":"Expand editor"}),r.createElement(L.u,{content:"Hit CTRL/CMD+Return to run query"},r.createElement(D.J,{className:We.hint,name:"keyboard"})))))}function T({db:pe,query:he,onChange:Le,onRunQuery:Pe,onValidate:Ve,queryToValidate:Ge,range:xe}){const et=(0,te.l4)(),We=(0,te.wW)(p),[Be,ft]=(0,r.useState)(!1),[st,pt]=(0,H.Z)(),[ut,be]=(0,H.Z)(),Xe=(0,r.useMemo)(()=>pe.getEditorLanguageDefinition(),[pe]),nt=(dt,mt)=>r.createElement(J,{editorLanguageDefinition:Xe,query:he,width:dt,height:mt?mt-pt.height:void 0,onChange:Le},({formatQuery:Nt})=>r.createElement("div",{ref:st},r.createElement(f,{db:pe,query:Ge,onValidate:Ve,onFormatCode:Nt,showTools:!0,range:xe,onExpand:ft,isExpanded:Be}))),ze=(dt=!1)=>dt?r.createElement(_.Z,null,({width:mt,height:Nt})=>nt(mt,Nt)):r.createElement("div",{ref:ut},nt()),Ze=()=>r.createElement("div",{style:{width:be.width,height:be.height,background:et.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return r.createElement(r.Fragment,null,Be?Ze():ze(),Be&&r.createElement(M.u,{title:`Query ${he.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:We.modal,contentClassName:We.modalContent,isOpen:Be,onDismiss:()=>{ft(!1)}},ze(!0)))}function p(pe){return{modal:x.css`
      width: 95vw;
      height: 95vh;
    `,modalContent:x.css`
      height: 100%;
      padding-top: 0;
    `}}var a=e(24799),n=e(9405),g=e(13930);function d({rawSql:pe}){const[he,Le]=(0,O.Z)(),Pe=(0,te.wW)(I),Ve=r.createElement("div",{className:Pe.labelWrapper},r.createElement("span",{className:Pe.label},"Preview"),r.createElement(P.h,{tooltip:"Copy to clipboard",onClick:()=>Le(pe),name:"copy"}));return r.createElement(a.g,{label:Ve,className:Pe.grow},r.createElement(n.p,{language:"sql",height:80,value:(0,g._)(pe),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function I(pe){return{grow:(0,x.css)({flexGrow:1}),label:(0,x.css)({fontSize:12,fontWeight:pe.typography.fontWeightMedium}),labelWrapper:(0,x.css)({display:"flex",justifyContent:"space-between",paddingBottom:pe.spacing(.5)})}}function W({query:pe,onQueryChange:he,db:Le}){return{onSqlChange:(0,r.useCallback)(Ve=>{const Ge=Le.toRawSql,xe=Ge({sql:Ve,dataset:pe.dataset,table:pe.table,refId:pe.refId}),et={...pe,sql:Ve,rawSql:xe};he(et)},[Le,he,pe])}}function Z({sql:pe,columns:he,onSqlChange:Le}){const Pe=(0,r.useCallback)(Ve=>{const Ge=Ve.map(et=>(0,C.U2)(et.property?.name)),xe={...pe,groupBy:Ge};Le(xe)},[Le,pe]);return r.createElement(h.EditorList,{items:pe.groupBy,onChange:Pe,renderItem:X({options:he})})}function X({options:pe}){return function(Le,Pe,Ve){return r.createElement(h.InputGroup,null,r.createElement(U.Ph,{value:Le.property?.name?(0,$.E)(Le.property.name):null,"aria-label":"Group by",options:pe,menuShouldPortal:!0,onChange:({value:Ge})=>Ge&&Pe((0,C.U2)(Ge))}),r.createElement(h.AccessoryButton,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:Ve}))}}function G({fields:pe,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=W({query:he,onQueryChange:Le,db:Pe});return r.createElement(Z,{columns:pe,sql:he.sql,onSqlChange:Ve})}var z=e(82897),K=e(46967);const Y=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function re({sql:pe,onSqlChange:he,columns:Le,showOffset:Pe}){const Ve=(0,r.useCallback)(We=>{const Be={...pe,orderByDirection:We};he(Be)},[he,pe]),Ge=(0,r.useCallback)(We=>{const Be={...pe,limit:Number.parseInt(We.currentTarget.value,10)};he(Be)},[he,pe]),xe=(0,r.useCallback)(We=>{const Be={...pe,offset:Number.parseInt(We.currentTarget.value,10)};he(Be)},[he,pe]),et=(0,r.useCallback)(We=>{const Be={...pe,orderBy:(0,C.ax)(We?.value)};We===null&&(Be.orderByDirection=void 0),he(Be)},[he,pe]);return r.createElement(r.Fragment,null,r.createElement(h.EditorField,{label:"Order by",width:25},r.createElement(h.InputGroup,null,r.createElement(U.Ph,{"aria-label":"Order by",options:Le,value:pe.orderBy?.property.name?(0,$.E)(pe.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:et}),r.createElement(h.Space,{h:1.5}),r.createElement(A.S,{options:Y,disabled:!pe?.orderBy?.property.name,value:pe.orderByDirection,onChange:Ve}))),r.createElement(h.EditorField,{label:"Limit",optional:!0,width:25},r.createElement(K.I,{type:"number",min:0,id:(0,z.uniqueId)("limit-"),value:pe.limit||"",onChange:Ge})),Pe&&r.createElement(h.EditorField,{label:"Offset",optional:!0,width:25},r.createElement(K.I,{type:"number",id:(0,z.uniqueId)("offset-"),value:pe.offset||"",onChange:xe})))}function ne({fields:pe,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=W({query:he,onQueryChange:Le,db:Pe});let Ge=[];return pe&&(Ge=[{value:"",label:"Selected columns",options:he.sql?.columns?.map((et,We)=>{const Be=et.name?`${et.name}(${et.parameters?.map(ft=>ft.name)})`:et.parameters?.map(ft=>ft.name);return{value:Be,label:`${We+1} - ${Be}`}}),expanded:!0},...pe]),r.createElement(re,{sql:he.sql,onSqlChange:Ve,columns:Ge})}var ue=e(47366),ae=e(80287);const ve={label:"*",value:"*"};function se({sql:pe,format:he,columns:Le,onSqlChange:Pe,functions:Ve}){const Ge=(0,te.wW)(ge),xe=[ve,...Le||[]],et=[];he===S.ws.Timeseries&&(et.push({label:"time",value:"time"}),et.push({label:"value",value:"value"}));const We=(0,r.useCallback)((ut,be)=>Xe=>{let nt={...ut};ut.parameters?.length?nt.parameters=ut.parameters.map(Ze=>Ze.type===ae.a.FunctionParameter?{...Ze,name:Xe.value}:Ze):nt.parameters=[{type:ae.a.FunctionParameter,name:Xe.value}];const ze={...pe,columns:pe.columns?.map((Ze,dt)=>dt===be?nt:Ze)};Pe(ze)},[Pe,pe]),Be=(0,r.useCallback)((ut,be)=>Xe=>{const nt={...ut,name:Xe?.value},ze={...pe,columns:pe.columns?.map((Ze,dt)=>dt===be?nt:Ze)};Pe(ze)},[Pe,pe]),ft=(0,r.useCallback)((ut,be)=>Xe=>{let nt={...ut};Xe!==null?nt={...ut,alias:`"${Xe?.value?.trim()}"`}:delete nt.alias;const ze={...pe,columns:pe.columns?.map((Ze,dt)=>dt===be?nt:Ze)};Pe(ze)},[Pe,pe]),st=(0,r.useCallback)(ut=>()=>{const be=[...pe.columns];be.splice(ut,1);const Xe={...pe,columns:be};Pe(Xe)},[Pe,pe]),pt=(0,r.useCallback)(()=>{const ut={...pe,columns:[...pe.columns,(0,C.Wf)()]};Pe(ut)},[Pe,pe]);return r.createElement(h.Stack,{gap:2,wrap:!0,direction:"column"},pe.columns?.map((ut,be)=>r.createElement("div",{key:be},r.createElement(h.Stack,{gap:2,alignItems:"end"},r.createElement(h.EditorField,{label:"Column",width:25},r.createElement(U.Ph,{value:ye(ut),options:xe,inputId:`select-column-${be}-${(0,z.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:We(ut,be)})),r.createElement(h.EditorField,{label:"Aggregation",optional:!0,width:25},r.createElement(U.Ph,{value:ut.name?(0,$.E)(ut.name):null,inputId:`select-aggregation-${be}-${(0,z.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:Ve,onChange:Be(ut,be)})),r.createElement(h.EditorField,{label:"Alias",optional:!0,width:15},r.createElement(U.Ph,{value:ut.alias?(0,$.E)(ut.alias):null,inputId:`select-alias-${be}-${(0,z.uniqueId)()}`,options:et,onChange:ft(ut,be),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),r.createElement(E.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:st(be)})))),r.createElement(E.zx,{type:"button",onClick:pt,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:Ge.addButton}))}const ge=()=>({addButton:(0,x.css)({alignSelf:"flex-start"})});function ye({parameters:pe}){const he=pe?.find(Le=>Le.type===ae.a.FunctionParameter);return he?.name?(0,$.E)(he.name):null}function Oe({fields:pe,query:he,onQueryChange:Le,db:Pe}){const{onSqlChange:Ve}=W({query:he,onQueryChange:Le,db:Pe}),Ge=[...ue.Wy,...Pe.functions?.()||[]].map($.E);return r.createElement(se,{columns:pe,sql:he.sql,format:he.format,functions:Ge,onSqlChange:Ve})}var Se=e(50700),ce=e(96650),Ne=e(46519),we=e(35575);const je={add:"Add",remove:"Remove"},Ke={id:ce.cQ.uuid(),type:"group",children1:{[ce.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},Ye={id:ce.cQ.uuid(),type:"group",children1:{[ce.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},ke={...ce.I4.widgets,text:{...ce.I4.widgets.text,factory:function(he){return r.createElement(K.I,{value:he?.value||"",placeholder:he?.placeholder,onChange:Le=>he?.setValue(Le.currentTarget.value)})}},number:{...ce.I4.widgets.number,factory:function(he){return r.createElement(K.I,{value:he?.value,placeholder:he?.placeholder,type:"number",onChange:Le=>he?.setValue(Number.parseInt(Le.currentTarget.value,10))})}},datetime:{...ce.I4.widgets.datetime,factory:function(he){return r.createElement(we.x,{onChange:Le=>{he?.setValue(Le.format(ce.I4.widgets.datetime.valueFormat))},date:(0,Ne.CQ)(he?.value).utc()})}}},at={...ce.I4.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:je.add,deleteLabel:je.remove,renderConjs:function(he){return r.createElement(U.Ph,{id:he?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:he?.conjunctionOptions?Object.keys(he?.conjunctionOptions).map($.E):void 0,value:he?.selectedConjunction,onChange:Le=>he?.setConjunction(Le.value)})},renderField:function(he){const Le=he?.config?.fields||{};return r.createElement(U.Ph,{id:he?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:he?.items.map(Pe=>{const Ve=Le[Pe.key].mainWidgetProps?.customProps?.icon;return{label:Pe.label,value:Pe.key,icon:Ve}}),value:he?.selectedKey,onChange:Pe=>{he?.setField(Pe.label)}})},renderButton:function(he){return r.createElement(E.zx,{type:"button",title:`${he?.label} filter`,onClick:he?.onClick,variant:"secondary",size:"md",icon:he?.label===je.add?"plus":"times"})},renderOperator:function(he){return r.createElement(U.Ph,{options:he?.items.map(Le=>({label:Le.label,value:Le.key})),"aria-label":"Operator",menuShouldPortal:!0,value:he?.selectedKey,onChange:Le=>{he?.setField(Le.value||"")}})}};var He=(pe=>(pe.IN="select_any_in",pe.NOT_IN="select_not_any_in",pe))(He||{});const fe=Ae(ce.I4),Ee=ce.I4.types.text.widgets.text,Ce=[...Ee.operators||[],"select_any_in","select_not_any_in"],Fe={...Ee,operators:Ce},De={...ce.I4.types,text:{...ce.I4.types.text,widgets:{...ce.I4.types.text.widgets,text:Fe}}},Me={...ce.I4,widgets:ke,settings:at,operators:fe,types:De};function Ae(pe){const{...he}=pe.operators,Le=()=>"",Pe=he.select_any_in.sqlFormatOp||Le,Ve=(We,Be,ft,st,pt,ut,be,Xe)=>Pe(We,Be,$e(ft),st,pt,ut,be,Xe),Ge=he.select_not_any_in.sqlFormatOp||Le,xe=(We,Be,ft,st,pt,ut,be,Xe)=>Ge(We,Be,$e(ft),st,pt,ut,be,Xe);return{...he,select_any_in:{...he.select_any_in,sqlFormatOp:Ve},select_not_any_in:{...he.select_not_any_in,sqlFormatOp:xe}}}function $e(pe){return(0,z.isString)(pe)?pe.split(","):pe}function rt({sql:pe,config:he,onSqlChange:Le}){const[Pe,Ve]=(0,r.useState)(),Ge=(0,r.useMemo)(()=>({...Me,...he}),[he]);(0,r.useEffect)(()=>{if(!Pe){const et=ce.cQ.checkTree(ce.cQ.loadTree(pe.whereJsonTree??Ye),Ge);Ve(et)}},[Ge,pe.whereJsonTree,Pe]),(0,r.useEffect)(()=>{pe.whereJsonTree||Ve(ce.cQ.checkTree(ce.cQ.loadTree(Ye),Ge))},[Ge,pe.whereJsonTree]);const xe=(0,r.useCallback)((et,We)=>{Ve(et);const Be={...pe,whereJsonTree:ce.cQ.getTree(et),whereString:ce.cQ.sqlFormat(et,We)};Le(Be)},[Le,pe]);return Pe?r.createElement(ce.AE,{...Ge,value:Pe,onChange:xe,renderBuilder:et=>r.createElement(ce.Ib,{...et})}):null}function it(pe){return`
    display: flex;
    gap: 8px;
    flex-direction: ${pe};`}x.injectGlobal`
  .group--header {
    ${it("row")}
  }

  .group-or-rule {
    ${it("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${it("row")}
  }

  .group--children {
    ${it("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function Qe({query:pe,fields:he,onQueryChange:Le,db:Pe}){const Ve=(0,Se.Z)(async()=>lt(he),[he]),{onSqlChange:Ge}=W({query:pe,onQueryChange:Le,db:Pe});return r.createElement(rt,{key:JSON.stringify(Ve.value),config:{fields:Ve.value||{}},sql:pe.sql,onSqlChange:xe=>{Ge(xe)}})}function lt(pe){const he={};for(const Le of pe)he[Le.value]={type:Le.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:Le.icon}}};return he}const ct=({query:pe,db:he,queryRowFilter:Le,onChange:Pe,onValidate:Ve,range:Ge})=>{const xe=(0,y.Z)(async()=>await he.fields(pe),[he,pe.dataset,pe.table]);return r.createElement(r.Fragment,null,r.createElement(h.EditorRows,null,r.createElement(h.EditorRow,null,r.createElement(Oe,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he})),Le.filter&&r.createElement(h.EditorRow,null,r.createElement(h.EditorField,{label:"Filter by column value",optional:!0},r.createElement(Qe,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he}))),Le.group&&r.createElement(h.EditorRow,null,r.createElement(h.EditorField,{label:"Group by column"},r.createElement(G,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he}))),Le.order&&r.createElement(h.EditorRow,null,r.createElement(ne,{fields:xe.value||[],query:pe,onQueryChange:Pe,db:he})),Le.preview&&pe.rawSql&&r.createElement(h.EditorRow,null,r.createElement(d,{rawSql:pe.rawSql}))),r.createElement(f,{db:he,query:pe,onValidate:Ve,range:Ge}))};function _e({datasource:pe,query:he,onChange:Le,onRunQuery:Pe,range:Ve,queryHeaderProps:Ge}){const[xe,et]=(0,r.useState)(!0),We=pe.getDB(),{loading:Be,error:ft}=(0,y.Z)(async()=>()=>{pe.getDB(pe.id).init!==void 0&&pe.getDB(pe.id).init()},[pe]),st=(0,b.Y)(he),[pt,ut]=(0,r.useState)({filter:!!st.sql?.whereString,group:!!st.sql?.groupBy?.[0]?.property.name,order:!!st.sql?.orderBy?.property.name,preview:!0}),[be,Xe]=(0,r.useState)(st);(0,r.useEffect)(()=>()=>{pe.getDB(pe.id).dispose!==void 0&&pe.getDB(pe.id).dispose()},[pe]);const nt=(0,r.useCallback)(dt=>{gt(dt)&&Pe&&Pe()},[Pe]),ze=(dt,mt=!0)=>{Xe(dt),Le(dt),(0,C.IC)(dt.sql?.columns)&&dt.sql?.columns.some(Nt=>Nt.name)&&!pt.group&&ut({...pt,group:!0}),mt&&nt(dt)},Ze=dt=>{Xe(dt),Le(dt)};return Be||ft?null:r.createElement(r.Fragment,null,r.createElement(j,{db:We,onChange:Ze,onRunQuery:Pe,onQueryRowChange:ut,queryRowFilter:pt,query:st,isQueryRunnable:xe,...Ge}),r.createElement(h.Space,{v:.5}),st.editorMode!==h.EditorMode.Code&&r.createElement(ct,{db:We,query:st,onChange:dt=>ze(dt,!1),queryRowFilter:pt,onValidate:et,range:Ve}),st.editorMode===h.EditorMode.Code&&r.createElement(T,{db:We,query:st,queryToValidate:be,onChange:ze,onRunQuery:Pe,onValidate:et,range:Ve}))}const gt=pe=>Boolean(pe.rawSql)},16705:(ee,i,e)=>{"use strict";e.d(i,{K:()=>E});var r=e(68404),y=e(13393),h=e(81764),b=e(11543),C=e(8944),O=e(45458),R=e(47366);const E=L=>{const{onOptionsChange:A,options:S,labelWidth:M}=L,D=S.jsonData,F=D.maxIdleConnsAuto!==void 0?D.maxIdleConnsAuto:!1,U=V=>{const j={...S,jsonData:{...D,...V}};return A(j)},N=V=>j=>{U({[V]:j})},$=V=>{F&&V?U({maxOpenConns:V,maxIdleConns:V}):V!==void 0&&U({maxOpenConns:V})},w=()=>{let V,j;F||(D.maxOpenConns!==void 0?(j=D.maxOpenConns,V=D.maxOpenConns):(j=R.Rd.MAX_CONNS,V=R.Rd.MAX_CONNS)),U({maxIdleConnsAuto:!F,maxIdleConns:V,maxOpenConns:j})};return r.createElement(y.C,{label:"Connection limits"},r.createElement(h._,{tooltip:r.createElement("span",null,"The maximum number of open connections to the database.If ",r.createElement("i",null,"Max idle connections")," is greater than 0 and the ",r.createElement("i",null,"Max open connections")," is less than ",r.createElement("i",null,"Max idle connections"),", then",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, there is no limit on the number of open connections."),labelWidth:M,label:"Max open"},r.createElement(O.Y,{placeholder:"unlimited",value:D.maxOpenConns,onChange:$})),r.createElement(b.Z,null,r.createElement(h._,{tooltip:r.createElement("span",null,"The maximum number of connections in the idle connection pool.If ",r.createElement("i",null,"Max open connections")," is greater than 0 but less than the ",r.createElement("i",null,"Max idle connections"),", then the ",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, no idle connections are retained."),labelWidth:M,label:"Max idle"},r.createElement(O.Y,{placeholder:"2",value:D.maxIdleConns,onChange:N("maxIdleConns"),width:8,fieldDisabled:F})),r.createElement(h._,{label:"Auto",labelWidth:8,tooltip:r.createElement("span",null,"If enabled, automatically set the number of ",r.createElement("i",null,"Maximum idle connections")," to the same value as",r.createElement("i",null," Max open connections"),". If the number of maximum open connections is not set it will be set to the default (",R.Rd.MAX_CONNS,").")},r.createElement(C.x,{value:F,onChange:w}))),r.createElement(h._,{tooltip:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.",labelWidth:M,label:"Max lifetime"},r.createElement(O.Y,{placeholder:"14400",value:D.connMaxLifetime,onChange:N("connMaxLifetime")})))}},99234:(ee,i,e)=>{"use strict";e.d(i,{D:()=>b});var r=e(68404),y=e(54408),h=e(47366);function b({onOptionsChange:C,options:O}){(0,r.useEffect)(()=>{const R=O.jsonData;let E={...O},L=!1;if(O.database&&((0,y.o7)(`Migrating from options.database with value ${O.database} for ${O.name}`),E.database="",E.jsonData={...R,database:O.database},L=!0),R.maxOpenConns===void 0&&R.maxIdleConns===void 0&&R.maxIdleConnsAuto===void 0){const A=h.Rd.MAX_CONNS,S=A;(0,y.o7)(`Setting default max open connections to ${A} and setting max idle connection to ${S}`),E.jsonData={...E.jsonData,maxOpenConns:A,maxIdleConns:S,maxIdleConnsAuto:!0},L=!0}L&&C(E)},[C,O])}},47366:(ee,i,e)=>{"use strict";e.d(i,{Rd:()=>h,Wy:()=>r,ni:()=>y});const r=["AVG","COUNT","MAX","MIN","SUM"],y=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"],h={MAX_CONNS:100}},25748:(ee,i,e)=>{"use strict";e.d(i,{D:()=>$});var r=e(65583),y=e(9471),h=e(50235),b=e(22069),C=e(20308),O=e(54899),R=e(32689),E=e(19349),L=e(92624),A=e(82897);class S{transformMetricFindResponse(V){const j=[],x=V.fields.find(_=>_.name==="__text"),H=V.fields.find(_=>_.name==="__value");if(x&&H)for(let _=0;_<x.values.length;_++)j.push({text:""+x.values.get(_),value:""+H.values.get(_)});else for(const _ of V.fields)for(const te of _.values.toArray())j.push({text:te});return(0,A.uniqBy)(j,"text")}}var M=e(44674),D=e(47366),F=e(94025),U=e(67090);function N(w){const V=typeof w.rawQuery=="string"?w.rawQuery:null;if(!V)return w;const j=(0,U.Y)({refId:"Annotation",...w.target??{},rawSql:V});return{...w,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:j}}class $ extends b.CK{constructor(V,j=(0,C.J)()){super(V),this.templateSrv=j,this.interpolateVariable=(H,_)=>typeof H=="string"?_.multi||_.includeAll?this.getQueryModel().quoteLiteral(H):String(H).replace(/'/g,"''"):typeof H=="number"?H:Array.isArray(H)?H.map(J=>this.getQueryModel().quoteLiteral(J)).join(","):H,this.name=V.name,this.responseParser=new S,this.id=V.id;const x=V.jsonData||{};this.interval=x.timeInterval||"1m",this.db=this.getDB(),this.annotations={prepareAnnotation:N,QueryEditor:M.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(V,j){let x=V;return V&&V.length>0&&(x=V.map(H=>({...H,datasource:this.getRef(),rawSql:this.templateSrv.replace(H.rawSql,j,this.interpolateVariable),rawQuery:!0}))),x}filterQuery(V){return!V.hide}applyTemplateVariables(V,j){return{refId:V.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(V.rawSql,j,this.interpolateVariable),format:V.format}}async metricFindQuery(V,j){let x="tempvar";j&&j.variable&&j.variable.name&&(x=j.variable.name);const H=this.templateSrv.replace(V,(0,L._6)({query:V,wildcardChar:"%",options:j}),this.interpolateVariable),_={refId:x,datasource:this.getRef(),rawSql:H,format:F.ws.Table},te=await this.runMetaQuery(_,j);return this.getResponseParser().transformMetricFindResponse(te)}async runSql(V,j){const x=await this.runMetaQuery({rawSql:V,format:F.ws.Table,refId:j?.refId},j);return new h.U(x)}runMetaQuery(V,j){const x=(0,E.$t)().timeRange(),H=V.refId||"meta",_=[{...V,datasource:V.datasource||this.getRef(),refId:H}];return(0,r.n)((0,O.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:j?.range?.from.valueOf().toString()||x.from.valueOf().toString(),to:j?.range?.to.valueOf().toString()||x.to.valueOf().toString(),queries:_},requestId:H}).pipe((0,y.U)(te=>(0,R.z1)(te,_).data[0]??{fields:[]})))}targetContainsTemplate(V){let j=V.rawSql;return D.ni.forEach(x=>{j=j?.replace(x,"")||""}),this.templateSrv.containsTemplate(j)}}},67090:(ee,i,e)=>{"use strict";e.d(i,{Y:()=>b});var r=e(26418),y=e(94025),h=e(12936);function b(C){let O=C?.editorMode||r.EditorMode.Builder;return C?.editorMode===void 0&&C?.rawSql!==void 0&&(O=r.EditorMode.Code),{...C,refId:C?.refId||"A",format:C?.format!==void 0?C.format:y.ws.Table,rawSql:C?.rawSql||"",editorMode:O,sql:C?.sql||{columns:[(0,h.Wf)()],groupBy:[(0,h.U2)()],limit:50}}}},80287:(ee,i,e)=>{"use strict";e.d(i,{R:()=>r,a:()=>y});var r=(h=>(h.String="string",h))(r||{}),y=(h=>(h.Property="property",h.Operator="operator",h.Or="or",h.And="and",h.GroupBy="groupBy",h.Function="function",h.FunctionParameter="functionParameter",h))(y||{})},94025:(ee,i,e)=>{"use strict";e.d(i,{Er:()=>C,ws:()=>y,x7:()=>h});var r=e(63134),y=(O=>(O.Timeseries="time_series",O.Table="table",O))(y||{});const h=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],b=O=>({label:O,value:O}),C=r.E??b},13930:(ee,i,e)=>{"use strict";e.d(i,{_:()=>y});var r=e(17249);function y(h){return r.ZP.format(h).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,b=>b.replace(/\s/g,""))}},12936:(ee,i,e)=>{"use strict";e.d(i,{IC:()=>h,U2:()=>b,Wf:()=>O,ax:()=>C,zE:()=>y});var r=e(80287);function y(R){return`SELECT ${R.map(L=>{let A="";return L.name&&L.alias?A+=`${L.name}(${L.parameters?.map(S=>`${S.name}`)}) AS ${L.alias}`:L.name?A+=`${L.name}(${L.parameters?.map(S=>`${S.name}`)})`:L.alias?A+=`${L.parameters?.map(S=>`${S.name}`)} AS ${L.alias}`:A+=`${L.parameters?.map(S=>`${S.name}`)}`,A}).join(", ")} `}const h=R=>{if(!R)return!1;const E=R.some(A=>A.parameters?.length||A.parameters?.some(S=>S.name)),L=R.some(A=>A.name);return E||L};function b(R){return{type:r.a.GroupBy,property:{type:r.R.String,name:R}}}function C(R){return{type:r.a.Property,property:{type:r.R.String,name:R}}}function O(R){return{type:r.a.Function,name:R,parameters:[]}}},29340:(ee,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setDragStart=i.setDragProgress=i.setDragEnd=void 0;var y=b(e(46724));function h(E){if(typeof WeakMap!="function")return null;var L=new WeakMap,A=new WeakMap;return(h=function(M){return M?A:L})(E)}function b(E,L){if(!L&&E&&E.__esModule)return E;if(E===null||r(E)!=="object"&&typeof E!="function")return{default:E};var A=h(L);if(A&&A.has(E))return A.get(E);var S={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in E)if(D!=="default"&&Object.prototype.hasOwnProperty.call(E,D)){var F=M?Object.getOwnPropertyDescriptor(E,D):null;F&&(F.get||F.set)?Object.defineProperty(S,D,F):S[D]=E[D]}return S.default=E,A&&A.set(E,S),S}var C=function(L,A){return{type:y.SET_DRAG_PROGRESS,mousePos:L,dragging:A}};i.setDragProgress=C;var O=function(L,A,S){return{type:y.SET_DRAG_START,dragStart:L,dragging:A,mousePos:S}};i.setDragStart=O;var R=function(){return{type:y.SET_DRAG_END}};i.setDragEnd=R},47264:(ee,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setNot=i.setLock=i.setConjunction=void 0;var y=C(e(46724)),h=e(60399);function b(L){if(typeof WeakMap!="function")return null;var A=new WeakMap,S=new WeakMap;return(b=function(D){return D?S:A})(L)}function C(L,A){if(!A&&L&&L.__esModule)return L;if(L===null||r(L)!=="object"&&typeof L!="function")return{default:L};var S=b(A);if(S&&S.has(L))return S.get(L);var M={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in L)if(F!=="default"&&Object.prototype.hasOwnProperty.call(L,F)){var U=D?Object.getOwnPropertyDescriptor(L,F):null;U&&(U.get||U.set)?Object.defineProperty(M,F,U):M[F]=L[F]}return M.default=L,S&&S.set(L,M),M}var O=function(A,S,M){return{type:y.SET_CONJUNCTION,path:(0,h.toImmutableList)(S),conjunction:M}};i.setConjunction=O;var R=function(A,S,M){return{type:y.SET_NOT,path:(0,h.toImmutableList)(S),not:M}};i.setNot=R;var E=function(A,S,M){return{type:y.SET_LOCK,path:(0,h.toImmutableList)(S),lock:M}};i.setLock=E},73215:(ee,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.tree=i.rule=i.group=i.drag=void 0;var y=R(e(82459));i.tree=y;var h=R(e(47264));i.group=h;var b=R(e(21811));i.rule=b;var C=R(e(29340));i.drag=C;function O(E){if(typeof WeakMap!="function")return null;var L=new WeakMap,A=new WeakMap;return(O=function(M){return M?A:L})(E)}function R(E,L){if(!L&&E&&E.__esModule)return E;if(E===null||r(E)!=="object"&&typeof E!="function")return{default:E};var A=O(L);if(A&&A.has(E))return A.get(E);var S={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in E)if(D!=="default"&&Object.prototype.hasOwnProperty.call(E,D)){var F=M?Object.getOwnPropertyDescriptor(E,D):null;F&&(F.get||F.set)?Object.defineProperty(S,D,F):S[D]=E[D]}return S.default=E,A&&A.set(E,S),S}},21811:(ee,i,e)=>{"use strict";var r=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setValueSrc=i.setValue=i.setOperatorOption=i.setOperator=i.setField=void 0;var y=C(e(46724)),h=e(60399);function b(S){if(typeof WeakMap!="function")return null;var M=new WeakMap,D=new WeakMap;return(b=function(U){return U?D:M})(S)}function C(S,M){if(!M&&S&&S.__esModule)return S;if(S===null||r(S)!=="object"&&typeof S!="function")return{default:S};var D=b(M);if(D&&D.has(S))return D.get(S);var F={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in S)if(N!=="default"&&Object.prototype.hasOwnProperty.call(S,N)){var $=U?Object.getOwnPropertyDescriptor(S,N):null;$&&($.get||$.set)?Object.defineProperty(F,N,$):F[N]=S[N]}return F.default=S,D&&D.set(S,F),F}var O=function(M,D,F){return{type:y.SET_FIELD,path:(0,h.toImmutableList)(D),field:F,config:M}};i.setField=O;var R=function(M,D,F){return{type:y.SET_OPERATOR,path:(0,h.toImmutableList)(D),operator:F,config:M}};i.setOperator=R;var E=function(M,D,F,U,N,$,w){return{type:y.SET_VALUE,path:(0,h.toImmutableList)(D),delta:F,value:U,valueType:N,asyncListValues:$,config:M,__isInternal:w}};i.setValue=E;var L=function(M,D,F,U){return{type:y.SET_VALUE_SRC,path:(0,h.toImmutableList)(D),delta:F,srcKey:U,config:M}};i.setValueSrc=L;var A=function(M,D,F,U){return{type:y.SET_OPERATOR_OPTION,path:(0,h.toImmutableList)(D),name:F,value:U,config:M}};i.setOperatorOption=A},82459:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.setTree=i.removeRule=i.removeGroup=i.moveItem=i.addRule=i.addGroup=i.addDefaultCaseGroup=i.addCaseGroup=void 0;var h=r(e(76833)),b=e(60399),C=e(20495),O=L(e(46724)),R=r(e(40745));function E(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,j=new WeakMap;return(E=function(H){return H?j:V})(w)}function L(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||y(w)!=="object"&&typeof w!="function")return{default:w};var j=E(V);if(j&&j.has(w))return j.get(w);var x={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var te=H?Object.getOwnPropertyDescriptor(w,_):null;te&&(te.get||te.set)?Object.defineProperty(x,_,te):x[_]=w[_]}return x.default=w,j&&j.set(w,x),x}var A=function(V,j){return{type:O.SET_TREE,tree:j,config:V}};i.setTree=A;var S=function(V,j,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return{type:O.ADD_RULE,ruleType:H,children:_,path:(0,b.toImmutableList)(j),id:(0,h.default)(),properties:(0,C.defaultRuleProperties)(V).merge(x||{}),config:V}};i.addRule=S;var M=function(V,j){return{type:O.REMOVE_RULE,path:(0,b.toImmutableList)(j),config:V}};i.removeRule=M;var D=function(V,j,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:O.ADD_CASE_GROUP,path:(0,b.toImmutableList)(j),children:H,id:(0,h.default)(),properties:(0,C.defaultGroupProperties)(V).merge(x||{}),config:V,meta:{isDefaultCase:!0}}};i.addDefaultCaseGroup=D;var F=function(V,j,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:O.ADD_CASE_GROUP,path:(0,b.toImmutableList)(j),children:H,id:(0,h.default)(),properties:(0,C.defaultGroupProperties)(V).merge(x||{}),config:V}};i.addCaseGroup=F;var U=function(V,j,x){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:O.ADD_GROUP,path:(0,b.toImmutableList)(j),children:H,id:(0,h.default)(),properties:(0,C.defaultGroupProperties)(V).merge(x||{}),config:V}};i.addGroup=U;var N=function(V,j){return{type:O.REMOVE_GROUP,path:(0,b.toImmutableList)(j),config:V}};i.removeGroup=N;var $=function(V,j,x,H){return{type:O.MOVE_ITEM,fromPath:(0,b.toImmutableList)(j),toPath:(0,b.toImmutableList)(x),placement:H,config:V}};i.moveItem=$},17079:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=V(e(68404)),L=r(e(59160)),A=V(e(40745)),S=e(75002),M=r(e(71620)),D=e(31775),F=r(e(76833)),U=e(9701),N,$;function w(_){if(typeof WeakMap!="function")return null;var te=new WeakMap,J=new WeakMap;return(w=function(P){return P?J:te})(_)}function V(_,te){if(!te&&_&&_.__esModule)return _;if(_===null||y(_)!=="object"&&typeof _!="function")return{default:_};var J=w(te);if(J&&J.has(_))return J.get(_);var k={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in _)if(m!=="default"&&Object.prototype.hasOwnProperty.call(_,m)){var s=P?Object.getOwnPropertyDescriptor(_,m):null;s&&(s.get||s.set)?Object.defineProperty(k,m,s):k[m]=_[m]}return k.default=_,J&&J.set(_,k),k}function j(_){var te=x();return function(){var k=(0,R.default)(_),P;if(te){var m=(0,R.default)(this).constructor;P=Reflect.construct(k,arguments,m)}else P=k.apply(this,arguments);return(0,O.default)(this,P)}}function x(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H=(0,M.default)(N=($=function(_){(0,C.default)(J,_);var te=j(J);function J(k){var P;return(0,h.default)(this,J),P=te.call(this,k),P._updPath(k),P}return(0,b.default)(J,[{key:"shouldComponentUpdate",value:function(P,m){var s=this.props,c=(0,U.pureShouldComponentUpdate)(this)(P,m);if(c){var o=[];for(var u in P){var l=P[u]!==s[u];l&&u!="__isInternalValueChange"&&o.push(u)}o.length||(c=!1),o.length==1&&o[0]=="tree"&&P.__isInternalValueChange&&(c=!1)}return c}},{key:"_updPath",value:function(P){var m=P.tree.get("id");this.path=A.default.List.of(m)}},{key:"render",value:function(){var P=this.props.tree,m=P.get("type"),s=m=="switch_group",c=s?null:(0,D.getTotalReordableNodesCountInTree)(P),o=s?null:(0,D.getTotalRulesCountInTree)(P),u=P.get("id");return E.default.createElement(S.Item,{key:u,id:u,path:this.path,type:m,properties:P.get("properties")||new A.Map,config:this.props.config,actions:this.props.actions,children1:P.get("children1")||new A.Map,reordableNodesCnt:c,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),J}(E.Component),$.propTypes={tree:L.default.any.isRequired,config:L.default.object.isRequired,actions:L.default.object.isRequired,onDragStart:L.default.func},$))||N;i.default=H},50803:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(92476)),b=r(e(86067)),C=r(e(85091)),O=r(e(80467)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=w(e(68404)),S=e(95512),M=r(e(78669)),D=r(e(59160)),F=w(e(73215)),U=e(60399),N=e(9701);function $(k){if(typeof WeakMap!="function")return null;var P=new WeakMap,m=new WeakMap;return($=function(c){return c?m:P})(k)}function w(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||y(k)!=="object"&&typeof k!="function")return{default:k};var m=$(P);if(m&&m.has(k))return m.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,m&&m.set(k,s),s}function V(k,P){var m=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);P&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),m.push.apply(m,s)}return m}function j(k){for(var P=1;P<arguments.length;P++){var m=arguments[P]!=null?arguments[P]:{};P%2?V(Object(m),!0).forEach(function(s){(0,h.default)(k,s,m[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(m)):V(Object(m)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(m,s))})}return k}function x(k){var P=H();return function(){var s=(0,L.default)(k),c;if(P){var o=(0,L.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,E.default)(this,c)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(k){(0,R.default)(m,k);var P=x(m);function m(s){var c;return(0,b.default)(this,m),c=P.call(this,s),c.shouldComponentUpdate=(0,N.liteShouldComponentUpdate)((0,O.default)(c),{tree:function(u){return!(u===c.oldValidatedTree&&c.oldValidatedTree===c.validatedTree)}}),(0,N.useOnPropsChanged)((0,O.default)(c)),c._updateActions(s),c.validatedTree=s.getMemoizedTree(s.config,s.tree),c.oldValidatedTree=c.validatedTree,c}return(0,C.default)(m,[{key:"_updateActions",value:function(c){var o=c.config,u=c.dispatch;this.actions=(0,N.bindActionCreators)(j(j(j({},F.tree),F.group),F.rule),o,u)}},{key:"onPropsChanged",value:function(c){var o=c.onChange,u=this.props.config,l=c.tree,f=this.props.tree,T=c.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=l,u!==T&&(this._updateActions(c),this.validatedTree=c.getMemoizedTree(T,l,u));var p=!(0,U.immutableEqual)(this.validatedTree,this.oldValidatedTree);p&&o&&o(this.validatedTree,T,c.__lastAction)}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.renderBuilder,l=c.dispatch,f=c.__isInternalValueChange,T={tree:this.validatedTree,actions:this.actions,config:o,dispatch:l,__isInternalValueChange:f};return u(T)}}]),m}(A.Component);_.propTypes={config:D.default.object.isRequired,onChange:D.default.func,renderBuilder:D.default.func,tree:D.default.any};var te=(0,S.connect)(function(k){return{tree:k.tree,__isInternalValueChange:k.__isInternalValueChange,__lastAction:k.__lastAction}},null,null,{context:M.default})(_);te.displayName="ConnectedQuery";var J=te;i.default=J},65394:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(80467)),O=r(e(72366)),R=r(e(64920)),E=r(e(39005)),L=_(e(68404)),A=r(e(59160)),S=r(e(42444)),M=r(e(78669)),D=e(20023),F=e(95512),U=_(e(73215)),N=e(79746),$=e(60399),w=e(20495),V=e(16226),j=e(9701),x=r(e(50803));function H(P){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(H=function(o){return o?s:m})(P)}function _(P,m){if(!m&&P&&P.__esModule)return P;if(P===null||y(P)!=="object"&&typeof P!="function")return{default:P};var s=H(m);if(s&&s.has(P))return s.get(P);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in P)if(u!=="default"&&Object.prototype.hasOwnProperty.call(P,u)){var l=o?Object.getOwnPropertyDescriptor(P,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=P[u]}return c.default=P,s&&s.set(P,c),c}function te(P){var m=J();return function(){var c=(0,E.default)(P),o;if(m){var u=(0,E.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,R.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(P){(0,O.default)(s,P);var m=te(s);function s(c,o){var u;(0,h.default)(this,s),u=m.call(this,c,o),u.shouldComponentUpdate=(0,j.liteShouldComponentUpdate)((0,C.default)(u),{value:function(g,d,I){return!1}}),(0,j.useOnPropsChanged)((0,C.default)(u)),u.getMemoizedConfig=(0,N.createConfigMemo)(),u.getMemoizedTree=(0,V.createValidationMemo)();var l=u.getMemoizedConfig(c),f=c.value,T=u.getMemoizedTree(l,f),p=(0,S.default)(l,T,u.getMemoizedTree),a=(0,D.createStore)(p);return u.state={store:a,config:l},u}return(0,b.default)(s,[{key:"onPropsChanged",value:function(o){var u=this,l=this.state.config,f=this.getMemoizedConfig(o),T=l!==f,p=this.state.store.getState().tree,a=!(0,$.immutableEqual)(o.value,this.props.value)&&!(0,$.immutableEqual)(o.value,p),n=a?o.value||(0,w.defaultRoot)(o):p;if(T&&this.setState({config:f}),a||T){var g=this.getMemoizedTree(f,n,l);return Promise.resolve().then(function(){u.state.store.dispatch(U.tree.setTree(f,g))})}}},{key:"render",value:function(){var o=this.props,u=o.renderBuilder,l=o.get_children,f=o.onChange,T=o.settings,p=this.state,a=p.config,n=p.store,g=T.renderProvider;return L.default.createElement(g,{config:a},L.default.createElement(F.Provider,{store:n,context:M.default},L.default.createElement(x.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:f,renderBuilder:u||l})))}}]),s}(L.Component);i.default=k,k.propTypes={conjunctions:A.default.object.isRequired,fields:A.default.object.isRequired,types:A.default.object.isRequired,operators:A.default.object.isRequired,widgets:A.default.object.isRequired,settings:A.default.object.isRequired,onChange:A.default.func,renderBuilder:A.default.func,value:A.default.any}},15920:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(68307)),b=r(e(19934)),C=r(e(86067)),O=r(e(85091)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=U(e(68404)),S=r(e(59160)),M=e(71620),D=["isDraggingTempo","isDraggingMe","dragging"];function F(j){if(typeof WeakMap!="function")return null;var x=new WeakMap,H=new WeakMap;return(F=function(te){return te?H:x})(j)}function U(j,x){if(!x&&j&&j.__esModule)return j;if(j===null||y(j)!=="object"&&typeof j!="function")return{default:j};var H=F(x);if(H&&H.has(j))return H.get(j);var _={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in j)if(J!=="default"&&Object.prototype.hasOwnProperty.call(j,J)){var k=te?Object.getOwnPropertyDescriptor(j,J):null;k&&(k.get||k.set)?Object.defineProperty(_,J,k):_[J]=j[J]}return _.default=j,H&&H.set(j,_),_}function N(j){var x=$();return function(){var _=(0,L.default)(j),te;if(x){var J=(0,L.default)(this).constructor;te=Reflect.construct(_,arguments,J)}else te=_.apply(this,arguments);return(0,E.default)(this,te)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=e(23019),V=function(x){return function(H){var _;return _=function(te){(0,R.default)(k,te);var J=N(k);function k(P){var m;return(0,C.default)(this,k),m=J.call(this,P),m.handleDraggerMouseDown=function(s){var c=m.props.id,o=m.wrapper.current;m.props.onDragStart&&m.props.onDragStart(c,o,s)},m.wrapper=A.default.createRef(),m}return(0,O.default)(k,[{key:"render",value:function(){var m=this.props,s=m.isDraggingTempo,c=m.isDraggingMe,o=m.dragging,u=(0,b.default)(m,D),l=u.isTrueLocked,f={};c&&s&&(M._isReorderingTree||(f={top:o.y,left:o.x,width:o.w}));var T=w(x,"group-or-rule",c&&s?"qb-draggable":null,c&&!s?"qb-placeholder":null,l?"locked":null);return A.default.createElement("div",{className:T,style:f,ref:this.wrapper,"data-id":this.props.id},A.default.createElement(H,(0,h.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:c,isDraggingTempo:s},u)))}}]),k}(A.PureComponent),_.propTypes={isDraggingTempo:S.default.bool,isDraggingMe:S.default.bool,onDragStart:S.default.func,dragging:S.default.object,isLocked:S.default.bool,isTrueLocked:S.default.bool},_}};i.default=V},80742:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(80467)),O=r(e(72366)),R=r(e(64920)),E=r(e(39005)),L=$(e(68404)),A=r(e(59160)),S=r(e(74937)),M=r(e(78669)),D=e(9701),F=e(95512),U=e(20495);function N(H){if(typeof WeakMap!="function")return null;var _=new WeakMap,te=new WeakMap;return(N=function(k){return k?te:_})(H)}function $(H,_){if(!_&&H&&H.__esModule)return H;if(H===null||y(H)!=="object"&&typeof H!="function")return{default:H};var te=N(_);if(te&&te.has(H))return te.get(H);var J={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in H)if(P!=="default"&&Object.prototype.hasOwnProperty.call(H,P)){var m=k?Object.getOwnPropertyDescriptor(H,P):null;m&&(m.get||m.set)?Object.defineProperty(J,P,m):J[P]=H[P]}return J.default=H,te&&te.set(H,J),J}function w(H){var _=V();return function(){var J=(0,E.default)(H),k;if(_){var P=(0,E.default)(this).constructor;k=Reflect.construct(J,arguments,P)}else k=J.apply(this,arguments);return(0,R.default)(this,k)}}function V(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j=function(_){var te;return te=function(J){(0,O.default)(P,J);var k=w(P);function P(m){var s;return(0,h.default)(this,P),s=k.call(this,m),s._selectedConjunction=function(c){return c=c||s.props,c.conjunction||(0,U.defaultGroupConjunction)(c.config,c.field)},s.setConjunction=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setConjunction(s.props.path,c)},s.setNot=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setNot(s.props.path,c)},s.setLock=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setLock(s.props.path,c)},s.dummyFn=function(){},s.removeSelf=function(){s.props.actions.removeGroup(s.props.path)},s.addGroup=function(){s.props.actions.addGroup(s.props.path)},s.addCaseGroup=function(){s.props.actions.addCaseGroup(s.props.path)},s.addDefaultCaseGroup=function(){s.props.actions.addDefaultCaseGroup(s.props.path)},s.addRule=function(){s.props.actions.addRule(s.props.path)},s.setField=function(c){s.props.actions.setField(s.props.path,c)},s.setOperator=function(c){s.props.actions.setOperator(s.props.path,c)},s.setValue=function(c,o,u){s.props.actions.setValue(s.props.path,c,o,u)},(0,D.useOnPropsChanged)((0,C.default)(s)),s.selectedConjunction=s._selectedConjunction(m),s.conjunctionOptions=s._getConjunctionOptions(m),s.dummyFn.isDummyFn=!0,s}return(0,b.default)(P,[{key:"shouldComponentUpdate",value:function(s,c){var o=this.props,u=this.state,l=(0,D.pureShouldComponentUpdate)(this)(s,c);if(l&&u==c&&o!=s){var f=s.dragging.id||o.dragging.id,T=f==s.id,p=[];for(var a in s){var n=s[a]!=o[a];a=="dragging"&&!T&&(n=!1),n&&p.push(a)}p.length||(l=!1)}return l}},{key:"onPropsChanged",value:function(s){var c=s.config,o=s.id,u=s.conjunction,l=this.props.config,f=this.props.conjunction;(l!=c||f!=u)&&(this.selectedConjunction=this._selectedConjunction(s),this.conjunctionOptions=this._getConjunctionOptions(s))}},{key:"_getConjunctionOptions",value:function(s){var c=this;return(0,S.default)(s.config.conjunctions,function(o,u){return{id:"conjunction-".concat(s.id,"-").concat(u),name:"conjunction[".concat(s.id,"]"),key:u,label:o.label,checked:u===c._selectedConjunction(s)}})}},{key:"render",value:function(){var s=this.props.dragging.id==this.props.id,c=this.props.path.size,o=this.props.config.settings.maxNesting,u=!s&&this.props.isDraggingTempo,l=typeof o>"u"||c<o,f=c==1;return L.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[s?L.default.createElement(_,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,L.default.createElement(_,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:s,isDraggingTempo:u,onDragStart:this.props.onDragStart,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:u?this.dummyFn:this.setConjunction,setNot:u?this.dummyFn:this.setNot,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,addGroup:u?this.dummyFn:this.addGroup,addCaseGroup:u?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:u?this.dummyFn:this.addDefaultCaseGroup,addRule:u?this.dummyFn:this.addRule,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setValue:u?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),P}(L.Component),te.propTypes={config:A.default.object.isRequired,actions:A.default.object.isRequired,path:A.default.any.isRequired,id:A.default.string.isRequired,groupId:A.default.string,not:A.default.bool,conjunction:A.default.string,children1:A.default.any,onDragStart:A.default.func,reordableNodesCnt:A.default.number,field:A.default.string,parentField:A.default.string,isLocked:A.default.bool,isTrueLocked:A.default.bool,dragging:A.default.object,isDraggingTempo:A.default.bool},te},x=function(_){var te=(0,F.connect)(function(J){return{dragging:J.dragging}},null,null,{context:M.default})(j(_));return te.displayName="ConnectedGroupContainer",te};i.default=x},6677:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=U(e(68404)),L=r(e(59160)),A=r(e(78669)),S=e(79746),M=e(9701),D=e(95512);function F(x){if(typeof WeakMap!="function")return null;var H=new WeakMap,_=new WeakMap;return(F=function(J){return J?_:H})(x)}function U(x,H){if(!H&&x&&x.__esModule)return x;if(x===null||y(x)!=="object"&&typeof x!="function")return{default:x};var _=F(H);if(_&&_.has(x))return _.get(x);var te={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in x)if(k!=="default"&&Object.prototype.hasOwnProperty.call(x,k)){var P=J?Object.getOwnPropertyDescriptor(x,k):null;P&&(P.get||P.set)?Object.defineProperty(te,k,P):te[k]=x[k]}return te.default=x,_&&_.set(x,te),te}function N(x){var H=$();return function(){var te=(0,R.default)(x),J;if(H){var k=(0,R.default)(this).constructor;J=Reflect.construct(te,arguments,k)}else J=te.apply(this,arguments);return(0,O.default)(this,J)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=e(23019),V=function(H){var _;return _=function(te){(0,C.default)(k,te);var J=N(k);function k(P){var m;return(0,h.default)(this,k),m=J.call(this,P),m.dummyFn=function(){},m.removeSelf=function(){m.props.actions.removeRule(m.props.path)},m.setLock=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;m.props.actions.setLock(m.props.path,s)},m.setField=function(s){m.props.actions.setField(m.props.path,s)},m.setOperator=function(s){m.props.actions.setOperator(m.props.path,s)},m.setOperatorOption=function(s,c){m.props.actions.setOperatorOption(m.props.path,s,c)},m.setValue=function(s,c,o,u,l){m.props.actions.setValue(m.props.path,s,c,o,u,l)},m.setValueSrc=function(s,c){m.props.actions.setValueSrc(m.props.path,s,c)},m.dummyFn.isDummyFn=!0,m}return(0,b.default)(k,[{key:"shouldComponentUpdate",value:function(m,s){var c=this.props,o=this.state,u=(0,M.pureShouldComponentUpdate)(this)(m,s);if(u&&o==s&&c!=m){var l=m.dragging.id||c.dragging.id,f=l==m.id,T=[];for(var p in m){var a=m[p]!=c[p];p=="dragging"&&!f&&(a=!1),a&&T.push(p)}T.length||(u=!1)}return u}},{key:"render",value:function(){var m=this.props.dragging.id==this.props.id,s=(0,S.getFieldConfig)(this.props.config,this.props.field),c=this.props.config.settings.showErrorMessage,o=s&&s.type=="!struct",u=!m&&this.props.isDraggingTempo,l=this.props.valueError,f=l&&l.toArray().filter(function(p){return!!p}).shift()||null,T=f!=null&&c;return E.default.createElement("div",{className:w("group-or-rule-container","rule-container",T?"rule-with-error":null),"data-id":this.props.id},[m?E.default.createElement(H,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,E.default.createElement(H,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:m,isDraggingTempo:u,onDragStart:this.props.onDragStart,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setOperatorOption:u?this.dummyFn:this.setOperatorOption,setValue:u?this.dummyFn:this.setValue,setValueSrc:u?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),k}(E.Component),_.propTypes={id:L.default.string.isRequired,groupId:L.default.string,config:L.default.object.isRequired,path:L.default.any.isRequired,operator:L.default.string,field:L.default.string,actions:L.default.object.isRequired,onDragStart:L.default.func,value:L.default.any,valueSrc:L.default.any,asyncListValues:L.default.array,valueError:L.default.any,operatorOptions:L.default.object,reordableNodesCnt:L.default.number,parentField:L.default.string,isLocked:L.default.bool,isTrueLocked:L.default.bool,dragging:L.default.object,isDraggingTempo:L.default.bool},_},j=function(H){var _=(0,D.connect)(function(te){return{dragging:te.dragging}},null,null,{context:A.default})(V(H));return _.displayName="ConnectedRuleContainer",_};i.default=j},71620:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i._isReorderingTree=void 0;var h=r(e(68307)),b=r(e(90890)),C=r(e(86067)),O=r(e(85091)),R=r(e(80467)),E=r(e(72366)),L=r(e(64920)),A=r(e(39005)),S=H(e(68404)),M=e(95512),D=e(31775),F=e(60399),U=r(e(78669)),N=H(e(46724)),$=r(e(29521)),w=r(e(59160)),V=H(e(73215)),j=e(9701);function x(m){if(typeof WeakMap!="function")return null;var s=new WeakMap,c=new WeakMap;return(x=function(u){return u?c:s})(m)}function H(m,s){if(!s&&m&&m.__esModule)return m;if(m===null||y(m)!=="object"&&typeof m!="function")return{default:m};var c=x(s);if(c&&c.has(m))return c.get(m);var o={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in m)if(l!=="default"&&Object.prototype.hasOwnProperty.call(m,l)){var f=u?Object.getOwnPropertyDescriptor(m,l):null;f&&(f.get||f.set)?Object.defineProperty(o,l,f):o[l]=m[l]}return o.default=m,c&&c.set(m,o),o}function _(m){var s=te();return function(){var o=(0,A.default)(m),u;if(s){var l=(0,A.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,L.default)(this,u)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=!1;i._isReorderingTree=J;var k=function(s){var c,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return c=function(u){(0,E.default)(f,u);var l=_(f);function f(T){var p;return(0,C.default)(this,f),p=l.call(this,T),p._getEventTarget=function(a,n){return a&&a.__mocked_window||document.body||window},p.onDragStart=function(a,n,g){var d=n.closest(".query-builder");p._isUsingLegacyReactDomRender===void 0&&(p._isUsingLegacyReactDomRender=(0,j.isUsingLegacyReactDomRender)(d)),document.body.classList.add("qb-dragging"),d.classList.add("qb-dragging");var I=d.closest(".query-builder-container")||d;I=p._getScrollParent(I)||document.body;var W=I.scrollTop,Z=p._getDraggableNodeEl(d),X=p._getPlaceholderNodeEl(d),G=d.querySelectorAll(".group--children"),z=G.length?G[0]:null,K;z&&(K=window.getComputedStyle(z,null).getPropertyValue("padding-left"),K=parseInt(K));var Y={id:a,x:n.offsetLeft,y:n.offsetTop,w:n.offsetWidth,h:n.offsetHeight,itemInfo:p.tree.items[a],paddingLeft:K},re={id:a,x:n.offsetLeft,y:n.offsetTop,scrollTop:W,clientX:g.clientX,clientY:g.clientY,itemInfo:(0,$.default)(p.tree.items[a]),treeEl:d,treeElContainer:I},ne={clientX:g.clientX,clientY:g.clientY},ue=p._getEventTarget(g,re);p.eventTarget=ue,ue.addEventListener("mousemove",p.onDrag),ue.addEventListener("mouseup",p.onDragEnd),p.props.setDragStart(re,Y,ne)},p.onDrag=function(a){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,g=Object.assign({},p.props.dragging),d=p.props.dragStart,I=g.paddingLeft,W=d.treeElContainer,Z=W.scrollTop;if(g.itemInfo=p.tree.items[g.id],!!g.itemInfo){var X={clientX:a.clientX,clientY:a.clientY},G={clientX:d.clientX,clientY:d.clientY};if(a.__mock_dom){var z=d.treeEl,K=p._getDraggableNodeEl(z),Y=p._getPlaceholderNodeEl(z);a.__mock_dom({treeEl:z,dragEl:K,plhEl:Y})}if(!d.plX){var re=d.treeEl,ne=p._getPlaceholderNodeEl(re);ne&&(d.plX=ne.getBoundingClientRect().left+window.scrollX,d.plY=ne.getBoundingClientRect().top+window.scrollY)}var ue=d.x,ae=d.y,ve=d.clientX,se=d.clientY,ge=d.scrollTop,ye={x:ue+(a.clientX-ve),y:ae+(a.clientY-se)+(Z-ge)};g.x=ye.x,g.y=ye.y,g.paddingLeft=I,g.mousePos=X,g.startMousePos=G,p.props.setDragProgress(X,g);var Oe=n?p.handleDrag(g,a,o):!1;Oe||a.preventDefault&&a.preventDefault()}},p.onDragEnd=function(){var a=p.props.dragStart.treeEl;p.props.setDragEnd(),a.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),p._cacheEls={};var n=p.eventTarget||p._getEventTarget();n.removeEventListener("mousemove",p.onDrag),n.removeEventListener("mouseup",p.onDragEnd)},(0,j.useOnPropsChanged)((0,R.default)(p)),p.onPropsChanged(T),p}return(0,O.default)(f,[{key:"onPropsChanged",value:function(p){this.tree=(0,D.getFlatTree)(p.tree)}},{key:"shouldComponentUpdate",value:function(p,a){var n=this.props,g=this.state,d=(0,j.pureShouldComponentUpdate)(this)(p,a);if(d&&g==a&&n!=p){var I=[];for(var W in p){var Z=p[W]!=n[W];Z&&W!="dragging"&&W!="mousePos"&&I.push(W)}I.length||(d=!1)}return d}},{key:"componentDidUpdate",value:function(p,a){var n=this.props.dragging,g=this.props.dragStart;if(i._isReorderingTree=J=!1,g&&g.id&&(n.itemInfo=this.tree.items[n.id],n.itemInfo&&(n.itemInfo.index!=g.itemInfo.index||n.itemInfo.parent!=g.itemInfo.parent))){var d=g.treeEl,I=g.treeElContainer,W=this._getPlaceholderNodeEl(d,!0);if(W){var Z=W.getBoundingClientRect().left+window.scrollX,X=W.getBoundingClientRect().top+window.scrollY,G=g.plX,z=g.plY,K=I.scrollTop;g.plX=Z,g.plY=X,g.itemInfo=(0,$.default)(n.itemInfo),g.y=W.offsetTop,g.x=W.offsetLeft,g.clientY+=X-z,g.clientX+=Z-G,I!=document.body&&(g.scrollTop=K),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(a==null)return null;this._cacheEls||(this._cacheEls={});var g=this._cacheEls[a];return g&&document.contains(g)&&!n||(g=p.querySelector('.group-or-rule-container[data-id="'+a+'"]'),this._cacheEls[a]=g),g}},{key:"_getDraggableNodeEl",value:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var n=this._cacheEls.draggable;if(n&&document.contains(n)&&!a)return n;var g=p.getElementsByClassName("qb-draggable");return n=g.length?g[0]:null,this._cacheEls.draggable=n,n}},{key:"_getPlaceholderNodeEl",value:function(p){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var n=this._cacheEls.placeholder;if(n&&document.contains(n)&&!a)return n;var g=p.getElementsByClassName("qb-placeholder");return n=g.length?g[0]:null,this._cacheEls.placeholder=n,n}},{key:"_isScrollable",value:function(p){var a=window.getComputedStyle(p)["overflow-y"];return(a==="scroll"||a==="auto")&&p.scrollHeight>p.offsetHeight}},{key:"_getScrollParent",value:function(p){return p==null?null:p===document.body||this._isScrollable(p)?p:this._getScrollParent(p.parentNode)}},{key:"handleDrag",value:function(p,a,n){var g=this,d=!0,I=p.itemInfo,W=p.paddingLeft,Z=null,X=this.props.dragStart.treeEl,G=p.id,z=this._getDraggableNodeEl(X),K=this._getPlaceholderNodeEl(X),Y,re,ne,ue;if(z&&K){if(Y=z.getBoundingClientRect(),re=K.getBoundingClientRect(),!re.width)return;var ae={hrz:0,vrt:0};Y.top<re.top?ae.vrt=-1:Y.bottom>re.bottom&&(ae.vrt=1),Y.left>re.left?ae.hrz=1:Y.left<re.left&&(ae.hrz=-1),ue=X.getBoundingClientRect();var ve={x:ue.left+(ue.right-ue.left)/2,y:ae.vrt>=0?Y.bottom:Y.top},se;if(a.__mocked_hov_container)se=a.__mocked_hov_container;else{var ge=document.elementFromPoint(ve.x,ve.y-1);if(se=ge?ge.closest(".group-or-rule-container"):null,!se&&ge&&ge.classList.contains("query-builder-container")){var ye,Oe=ge==null||(ye=ge.firstChild)===null||ye===void 0?void 0:ye.firstChild;Oe&&Oe.classList.contains("group-or-rule-container")&&(se=Oe)}}if(!se)F.logger.log("out of tree bounds!");else{var Se=se.classList.contains("group-container"),ce=se.getAttribute("data-id"),Ne=se,we=!1,je=!1;if(Ne){ne=Ne.getBoundingClientRect();var Ke=ne.bottom-ne.top,Ye=this.tree.items[ce],ke=null,at=null,He=null,fe=null;if(ae.vrt==0)He=I,at=K,at&&(ke=at.getBoundingClientRect());else if(Se){if(ae.vrt>0){var Ee=se.getElementsByClassName("group--header"),Ce=Ee.length?Ee[0]:null;if(Ce){var Fe=Ce.getBoundingClientRect(),De=Fe.bottom-Fe.top,Me=Y.bottom-Fe.top>De*3/4;Me&&Ye.top>p.itemInfo.top&&(He=Ye,ke=Fe,at=Ce,je=!0)}}else if(ae.vrt<0&&Ye.lev>=I.lev){var Ae=ne.bottom-Y.top>=2;Ae&&Ye.top<p.itemInfo.top&&(He=Ye,ke=ne,at=Ne,we=!0)}if(!je&&!we||d){var $e=ae.vrt<0?ne.bottom-Y.top>Ke-5:Y.bottom-ne.top>Ke-5;$e&&(!je&&!we&&(He=Ye,ke=ne,at=Ne),d&&(fe=Ye))}}else{var rt=ae.vrt<0?ne.bottom-Y.top>Ke/2:Y.bottom-ne.top>Ke/2;rt&&(He=Ye,ke=ne,at=Ne)}var it=He&&He.id==G;if(ke){var Qe=Y.left-ue.left,lt=ke.left-ue.left,ct=lt/W,_e=Math.max(0,Math.round(Qe/W)),gt=[],pe=[];if(!it){if(Se&&(we?gt.push([N.PLACEMENT_APPEND,He,He.lev+1]):je&&gt.push([N.PLACEMENT_PREPEND,He,He.lev+1]),d&&fe)){var he=fe.lev==0,Le=fe.type=="case_group"&&I.type!="case_group",Pe=fe.prev&&this.tree.items[fe.prev].caseId,Ve=fe.next&&this.tree.items[fe.next].caseId;I.caseId==Pe&&(Pe=null),I.caseId==Ve&&(Ve=null);var Ge=Pe&&this.tree.items[Pe],xe=Ve&&this.tree.items[Ve];ae.vrt>0?he?pe.push([N.PLACEMENT_APPEND,fe,fe.lev+1]):Le&&xe?pe.push([N.PLACEMENT_PREPEND,xe,xe.lev+1]):pe.push([N.PLACEMENT_AFTER,fe,fe.lev]):ae.vrt<0&&(he?pe.push([N.PLACEMENT_PREPEND,fe,fe.lev+1]):Le&&Ge?pe.push([N.PLACEMENT_APPEND,Ge,Ge.lev+1]):pe.push([N.PLACEMENT_BEFORE,fe,fe.lev]))}!we&&!je&&(ae.vrt<0?gt.push([N.PLACEMENT_BEFORE,He,He.lev]):ae.vrt>0&&gt.push([N.PLACEMENT_AFTER,He,He.lev]))}var et=function(Xe){var nt=Xe[1],ze=I.caseId?g.tree.items[I.caseId]:null,Ze=nt.caseId?g.tree.items[nt.caseId]:null;return[].concat((0,b.default)(Xe),[ze,Ze])};gt=gt.map(et),pe=pe.map(et),gt=gt.filter(function(be){var Xe=be[0],nt=be[1];if((Xe==N.PLACEMENT_BEFORE||Xe==N.PLACEMENT_AFTER)&&nt.parent==null||nt.collapsed&&(Xe==N.PLACEMENT_APPEND||Xe==N.PLACEMENT_PREPEND))return!1;var ze=nt.id==I.id;if(!ze){for(var Ze=nt;Ze.parent;)if(Ze=g.tree.items[Ze.parent],Ze.id==I.id){ze=!0;break}}return!ze}).map(function(be){var Xe=be[0],nt=be[1],ze=be[2],Ze=be[3],dt=be[4],mt=null;return Xe==N.PLACEMENT_APPEND||Xe==N.PLACEMENT_PREPEND?mt=nt:mt=g.tree.items[nt.parent],mt&&mt.parent==null&&(mt=null),be[5]=mt,be});var We=null,Be=gt.filter(function(be){return g.canMove(I,be[1],be[0],be[3],be[4],be[5],n)});d&&Be.length==0&&pe.length>0&&(Be=pe.filter(function(be){return g.canMove(I,be[1],be[0],be[3],be[4],be[5],n)}));var ft=Be.map(function(be){return be[2]}),st=I.lev,pt=ft.concat(st),ut=null;pt.indexOf(_e)!=-1?ut=_e:_e>Math.max.apply(Math,(0,b.default)(pt))?ut=Math.max.apply(Math,(0,b.default)(pt)):_e<Math.min.apply(Math,(0,b.default)(pt))&&(ut=Math.min.apply(Math,(0,b.default)(pt))),We=Be.find(function(be){return be[2]==ut}),!it&&!We&&Be.length&&(We=Be[0]),Z=We}}}}return Z?(this.move(I,Z[1],Z[0],Z[3]),!0):!1}},{key:"canMove",value:function(p,a,n,g,d,I,W){if(!p||!a||p.id===a.id)return!1;var Z=this.props.config.settings,X=Z.canRegroup,G=Z.canRegroupCases,z=Z.maxNesting,K=Z.maxNumberOfRules,Y=Z.canLeaveEmptyCase,re=I?I.lev+1:a.lev,ne=n==N.PLACEMENT_BEFORE||n==N.PLACEMENT_AFTER,ue=n==N.PLACEMENT_PREPEND||n==N.PLACEMENT_APPEND,ae=ne&&a.lev==1||ue&&a.lev==0,ve=p.parent!=a.parent,se=ue||ve,ge=p.type=="case_group"&&!ae||p.parentType=="rule_group"||a.type=="rule_group"||a.parentType=="rule_group"||p.type!="case_group"&&a.type=="case_group"&&ne||p.type!="case_group"&&a.type=="switch_group"||!G&&p.caseId!=a.caseId,ye=a.isLocked||p.isLocked||I&&I.isLocked;if(z&&re>z||se&&(!X||ge||ye))return!1;if(p.type!="case_group"&&p.caseId!=a.caseId){var Oe=g?g._height==2:!1,Se=d?d.leafsCount+1:0;if(K&&Se>K||Oe&&!Y)return!1}if(p.type=="case_group"&&(p.isDefaultCase||a.isDefaultCase||a.type=="switch_group"&&n==N.PLACEMENT_APPEND))return!1;var ce=!0;return W&&(ce=W(p.node.toJS(),a.node.toJS(),n,I?I.node.toJS():null)),ce}},{key:"move",value:function(p,a,n,g){this._isUsingLegacyReactDomRender||(i._isReorderingTree=J=!0),this.props.actions.moveItem(p.path,a.path,n)}},{key:"render",value:function(){return S.default.createElement(s,(0,h.default)({},this.props,{onDragStart:this.onDragStart}))}}]),f}(S.Component),c.propTypes={tree:w.default.any.isRequired,actions:w.default.object.isRequired},c},P=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=(0,M.connect)(function(u){return{dragging:u.dragging,dragStart:u.dragStart,mousePos:u.mousePos}},{setDragStart:V.drag.setDragStart,setDragProgress:V.drag.setDragProgress,setDragEnd:V.drag.setDragEnd},null,{context:U.default})(k(s,c));return o.displayName="ConnectedSortableContainer",o};i.default=P},99224:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(92476)),h=r(e(86067)),b=r(e(85091)),C=r(e(80467)),O=r(e(36610)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=r(e(68404)),S=r(e(59160)),M=r(e(80742)),D=r(e(15920)),F=e(65801),U=e(57184),N=e(9701),$=e(48281),w=r(e(33753)),V,j,x;function H(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function _(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?H(Object(o),!0).forEach(function(u){(0,y.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function te(s){var c=J();return function(){var u=(0,L.default)(s),l;if(c){var f=(0,L.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,E.default)(this,l)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=e(23019),P=(V=(0,D.default)("group case_group"),(0,M.default)(j=V(j=(0,$.ConfirmFn)(j=(x=function(s){(0,R.default)(o,s);var c=te(o);function o(u){var l;return(0,h.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return"case_group--children"},l.renderFooterWrapper=function(){return null},(0,N.useOnPropsChanged)((0,C.default)(l)),l.onPropsChanged(u),l}return(0,b.default)(o,[{key:"onPropsChanged",value:function(l){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:(0,O.default)((0,L.default)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return A.default.createElement("div",{key:"group-header",className:k("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:A.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var l=this.props.config.settings.defaultCaseLabel;return l||""}return A.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,O.default)((0,L.default)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:(0,O.default)((0,L.default)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:(0,O.default)((0,L.default)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var l=this.props,f=l.config,T=l.isLocked,p=l.value,a=l.setValue,n=l.id,g=f.settings.immutableValuesMode,d=A.default.createElement(w.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:p,valueSrc:"value",valueError:null,config:f,setValue:g?$.dummyFn:a,setValueSrc:$.dummyFn,readonly:g||T,id:n,groupId:null});return A.default.createElement($.Col,{className:"case_group--value"},d)}},{key:"renderActions",value:function(){var l=this.props,f=l.config,T=l.addGroup,p=l.addRule,a=l.isLocked,n=l.isTrueLocked,g=l.id;return A.default.createElement(U.GroupActions,{config:f,addGroup:T,addRule:p,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:g})}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.value,f=l&&l.size?l.get(0):null,T=f!=null&&(Array.isArray(f)?f.length>0:!0);return(0,O.default)((0,L.default)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!T}}]),o}(F.BasicGroup),x.propTypes=_(_({},F.BasicGroup.propTypes),{},{parentReordableNodesCnt:S.default.number,value:S.default.any,setValue:S.default.func}),x))||j)||j)||j),m=P;i.default=m},65801:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BasicGroup=void 0;var h=r(e(68307)),b=r(e(92476)),C=r(e(86067)),O=r(e(85091)),R=r(e(80467)),E=r(e(72366)),L=r(e(64920)),A=r(e(39005)),S=j(e(68404)),M=r(e(59160)),D=r(e(94738)),F=r(e(80742)),U=r(e(15920)),N=e(75002),$=e(57184),w=e(48281);function V(s){if(typeof WeakMap!="function")return null;var c=new WeakMap,o=new WeakMap;return(V=function(l){return l?o:c})(s)}function j(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||y(s)!=="object"&&typeof s!="function")return{default:s};var o=V(c);if(o&&o.has(s))return o.get(s);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var T=l?Object.getOwnPropertyDescriptor(s,f):null;T&&(T.get||T.set)?Object.defineProperty(u,f,T):u[f]=s[f]}return u.default=s,o&&o.set(s,u),u}function x(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function H(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?x(Object(o),!0).forEach(function(u){(0,b.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):x(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function _(s){var c=te();return function(){var u=(0,A.default)(s),l;if(c){var f=(0,A.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,L.default)(this,l)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k="topRight",P=function(s){(0,E.default)(o,s);var c=_(o);function o(u){var l;return(0,C.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return""},l.renderBeforeActions=function(){var f=l.props.config.settings.renderBeforeActions;return f==null?null:typeof f=="function"?S.default.createElement(f,l.props):f},l.renderAfterActions=function(){var f=l.props.config.settings.renderAfterActions;return f==null?null:typeof f=="function"?S.default.createElement(f,l.props):f},l.removeSelf=l.removeSelf.bind((0,R.default)(l)),l.setLock=l.setLock.bind((0,R.default)(l)),l.renderItem=l.renderItem.bind((0,R.default)(l)),l}return(0,O.default)(o,[{key:"isGroupTopPosition",value:function(){return(0,D.default)(this.props.config.settings.groupActionsPosition||k,"top")}},{key:"setLock",value:function(l){this.props.setLock(l)}},{key:"removeSelf",value:function(){var l=this,f=this.props.confirmFn,T=this.props.config.settings,p=T.renderConfirm,a=T.removeGroupConfirmOptions,n=function(){l.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?p(H(H({},a),{},{onOk:n,onCancel:null,confirmFn:f})):n()}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.children1;return!l||l.size==0||l.size==1&&this.isEmpty(l.first())}},{key:"isEmpty",value:function(l){var f=l.get("type")=="group"||l.get("type")=="rule_group";return f?this.isEmptyGroup(l):this.isEmptyRule(l)}},{key:"isEmptyGroup",value:function(l){var f=l.get("children1");return!f||f.size==0||f.size==1&&this.isEmpty(f.first())}},{key:"isEmptyRule",value:function(l){var f=l.get("properties");return!(f.get("field")!==null&&f.get("operator")!==null&&f.get("value").filter(function(T){return T!==void 0}).size>0)}},{key:"render",value:function(){return S.default.createElement(S.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var l=this.props.config;return l.settings.showNot}},{key:"showConjs",value:function(){var l=this.props,f=l.conjunctionOptions,T=l.children1,p=l.config,a=Object.keys(f).length;return a>1||this.showNot()}},{key:"isOneChild",value:function(){var l=this.props.children1;return l?l.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var l=this.props.children1;return l&&S.default.createElement("div",{key:"group-children",className:J("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var l=this.isGroupTopPosition();return S.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),l&&this.renderBeforeActions(),l&&this.renderActions(),l&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var l=this.isGroupTopPosition();return!l&&S.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var l=this.props,f=l.config,T=l.addRule,p=l.addGroup,a=l.isLocked,n=l.isTrueLocked,g=l.id;return S.default.createElement($.GroupActions,{config:f,addRule:T,addGroup:p,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:g})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var l=this.props.config.settings.maxNumberOfRules,f=this.props.totalRulesCnt;return l?f<l:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var l=this.props.children1;return l?l.map(this.renderItem).toList():null}},{key:"renderItem",value:function(l){var f=this.props,T=f.config,p=f.actions,a=f.onDragStart,n=f.isLocked,g=l.get("type")=="group"&&l.getIn(["properties","field"])!=null,d=g?"rule_group":l.get("type");return S.default.createElement(N.Item,(0,h.default)({},this.extraPropsForItem(l),{key:l.get("id"),id:l.get("id"),groupId:f.id,path:l.get("path"),type:d,properties:l.get("properties"),config:T,actions:p,children1:l.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(l),totalRulesCnt:this.totalRulesCntForItem(l),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:a,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:n}))}},{key:"extraPropsForItem",value:function(l){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var l=this.props,f=l.config,T=l.isRoot,p=l.isLocked,a=this.reordableNodesCnt();return f.settings.canReorder&&!T&&a>1&&!p}},{key:"renderDrag",value:function(){var l=this.props.handleDraggerMouseDown,f=this.showDragIcon()&&S.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:l},S.default.createElement(w.DragIcon,null)," ");return f}},{key:"conjunctionOptions",value:function(){var l=this.props.conjunctionOptions;return l}},{key:"renderConjs",value:function(){var l=this.props,f=l.config,T=l.children1,p=l.id,a=l.selectedConjunction,n=l.setConjunction,g=l.not,d=l.setNot,I=l.isLocked,W=f.settings,Z=W.immutableGroupsMode,X=W.renderConjs,G=W.showNot,z=W.notLabel,K=this.conjunctionOptions();if(!this.showConjs()||!T||!T.size)return null;var Y={disabled:this.isOneChild(),readonly:Z||I,selectedConjunction:a,setConjunction:Z?w.dummyFn:n,conjunctionOptions:K,config:f,not:g||!1,id:p,setNot:Z?w.dummyFn:d,notLabel:z,showNot:this.showNot(),isLocked:I};return S.default.createElement(X,Y)}},{key:"renderHeader",value:function(){return S.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(S.PureComponent);i.BasicGroup=P,P.propTypes={reordableNodesCnt:M.default.number,conjunctionOptions:M.default.object.isRequired,allowFurtherNesting:M.default.bool.isRequired,isRoot:M.default.bool.isRequired,not:M.default.bool,selectedConjunction:M.default.string,config:M.default.object.isRequired,id:M.default.string.isRequired,groupId:M.default.string,path:M.default.any,children1:M.default.any,isDraggingMe:M.default.bool,isDraggingTempo:M.default.bool,isLocked:M.default.bool,isTrueLocked:M.default.bool,handleDraggerMouseDown:M.default.func,onDragStart:M.default.func,addRule:M.default.func.isRequired,addGroup:M.default.func.isRequired,removeSelf:M.default.func.isRequired,setConjunction:M.default.func.isRequired,setNot:M.default.func.isRequired,setLock:M.default.func.isRequired,actions:M.default.object.isRequired};var m=(0,F.default)((0,U.default)("group")((0,w.ConfirmFn)(P)));i.default=m},57184:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.GroupActions=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=A(e(68404));function L(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(L=function(j){return j?w:$})(N)}function A(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||y(N)!=="object"&&typeof N!="function")return{default:N};var w=L($);if(w&&w.has(N))return w.get(N);var V={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in N)if(x!=="default"&&Object.prototype.hasOwnProperty.call(N,x)){var H=j?Object.getOwnPropertyDescriptor(N,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=N[x]}return V.default=N,w&&w.set(N,V),V}function S(N){var $=M();return function(){var V=(0,R.default)(N),j;if($){var x=(0,R.default)(this).constructor;j=Reflect.construct(V,arguments,x)}else j=V.apply(this,arguments);return(0,O.default)(this,j)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},F="topRight",U=function(N){(0,C.default)(w,N);var $=S(w);function w(){return(0,h.default)(this,w),$.apply(this,arguments)}return(0,b.default)(w,[{key:"render",value:function(){var j=this.props,x=j.config,H=j.addRule,_=j.addGroup,te=j.removeSelf,J=j.setLock,k=j.isLocked,P=j.isTrueLocked,m=j.id,s=j.canAddGroup,c=j.canAddRule,o=j.canDeleteGroup,u=x.settings,l=u.immutableGroupsMode,f=u.addRuleLabel,T=u.addGroupLabel,p=u.delGroupLabel,a=u.groupActionsPosition,n=u.renderButton,g=u.renderSwitch,d=u.renderButtonGroup,I=u.lockLabel,W=u.lockedLabel,Z=u.showLock,X=u.canDeleteLocked,G=D[a||F],z=Z&&!(k&&!P)&&E.default.createElement(g,{type:"lock",id:m,value:k,setValue:J,label:I,checkedLabel:W,config:x}),K=!l&&c&&!k&&E.default.createElement(n,{type:"addRule",onClick:H,label:f,readonly:k,config:x}),Y=!l&&s&&!k&&E.default.createElement(n,{type:"addGroup",onClick:_,label:T,readonly:k,config:x}),re=!l&&o&&(!k||k&&X)&&E.default.createElement(n,{type:"delGroup",onClick:te,label:p,config:x});return E.default.createElement("div",{className:"group--actions ".concat(G)},E.default.createElement(d,{config:x},z,K,Y,re))}}]),w}(E.PureComponent);i.GroupActions=U},75002:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.Item=void 0;var h=r(e(19934)),b=r(e(86067)),C=r(e(85091)),O=r(e(72366)),R=r(e(64920)),E=r(e(39005)),L=r(e(68307)),A=r(e(92476)),S=x(e(68404)),M=r(e(59160)),D=r(e(34773)),F=r(e(65801)),U=r(e(98011)),N=r(e(43219)),$=r(e(74481)),w=r(e(99224)),V=["type"];function j(c){if(typeof WeakMap!="function")return null;var o=new WeakMap,u=new WeakMap;return(j=function(f){return f?u:o})(c)}function x(c,o){if(!o&&c&&c.__esModule)return c;if(c===null||y(c)!=="object"&&typeof c!="function")return{default:c};var u=j(o);if(u&&u.has(c))return u.get(c);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in c)if(T!=="default"&&Object.prototype.hasOwnProperty.call(c,T)){var p=f?Object.getOwnPropertyDescriptor(c,T):null;p&&(p.get||p.set)?Object.defineProperty(l,T,p):l[T]=c[T]}return l.default=c,u&&u.set(c,l),l}function H(c){var o=_();return function(){var l=(0,E.default)(c),f;if(o){var T=(0,E.default)(this).constructor;f=Reflect.construct(l,arguments,T)}else f=l.apply(this,arguments);return(0,R.default)(this,f)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function te(c,o){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(c);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),u.push.apply(u,l)}return u}function J(c){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?te(Object(u),!0).forEach(function(l){(0,A.default)(c,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):te(Object(u)).forEach(function(l){Object.defineProperty(c,l,Object.getOwnPropertyDescriptor(u,l))})}return c}var k=["rule","group","rule_group","switch_group","case_group"],P=function(o){var u=o.properties.toObject(),l=J({},u);return o.isParentLocked&&(l.isLocked=!0),u.isLocked&&(l.isTrueLocked=!0),l},m={rule:function(o){return S.default.createElement(D.default,(0,L.default)({},P(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,config:o.config,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},group:function(o){return S.default.createElement(F.default,(0,L.default)({},P(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group:function(o){return S.default.createElement(U.default,(0,L.default)({},P(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group_ext:function(o){return S.default.createElement(N.default,(0,L.default)({},P(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},switch_group:function(o){return S.default.createElement($.default,(0,L.default)({},P(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},case_group:function(o){return S.default.createElement(w.default,(0,L.default)({},P(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))}},s=function(c){(0,O.default)(u,c);var o=H(u);function u(){return(0,b.default)(this,u),o.apply(this,arguments)}return(0,C.default)(u,[{key:"render",value:function(){var f=this.props,T=f.type,p=(0,h.default)(f,V),a=p.properties.get("mode"),n=a=="array"?"_ext":"",g=p.config.settings.renderItem,d=m[T+n];return g?g(J(J({},p),{},{type:T,itemComponent:d})):d?d(p):null}}]),u}(S.PureComponent);i.Item=s,s.propTypes={config:M.default.object.isRequired,id:M.default.string.isRequired,groupId:M.default.string,type:M.default.oneOf(k).isRequired,path:M.default.any.isRequired,properties:M.default.any.isRequired,children1:M.default.any,actions:M.default.object.isRequired,reordableNodesCnt:M.default.number,onDragStart:M.default.func,parentField:M.default.string,isDraggingTempo:M.default.bool,isParentLocked:M.default.bool}},34773:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(92476)),b=r(e(86067)),C=r(e(85091)),O=r(e(80467)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=k(e(68404)),S=r(e(59160)),M=r(e(6677)),D=r(e(15920)),F=r(e(64078)),U=r(e(35205)),N=r(e(33753)),$=r(e(65971)),w=e(79746),V=e(62413),j=e(9701),x=e(48281),H,_,te;function J(f){if(typeof WeakMap!="function")return null;var T=new WeakMap,p=new WeakMap;return(J=function(n){return n?p:T})(f)}function k(f,T){if(!T&&f&&f.__esModule)return f;if(f===null||y(f)!=="object"&&typeof f!="function")return{default:f};var p=J(T);if(p&&p.has(f))return p.get(f);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in f)if(g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)){var d=n?Object.getOwnPropertyDescriptor(f,g):null;d&&(d.get||d.set)?Object.defineProperty(a,g,d):a[g]=f[g]}return a.default=f,p&&p.set(f,a),a}function P(f,T){var p=Object.keys(f);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(f);T&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(f,n).enumerable})),p.push.apply(p,a)}return p}function m(f){for(var T=1;T<arguments.length;T++){var p=arguments[T]!=null?arguments[T]:{};T%2?P(Object(p),!0).forEach(function(a){(0,h.default)(f,a,p[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):P(Object(p)).forEach(function(a){Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(p,a))})}return f}function s(f){var T=c();return function(){var a=(0,L.default)(f),n;if(T){var g=(0,L.default)(this).constructor;n=Reflect.construct(a,arguments,g)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var o=e(23019),u=(H=(0,D.default)("rule"),(0,M.default)(_=H(_=(0,x.ConfirmFn)(_=(te=function(f){(0,R.default)(p,f);var T=s(p);function p(a){var n;return(0,b.default)(this,p),n=T.call(this,a),(0,j.useOnPropsChanged)((0,O.default)(n)),n.removeSelf=n.removeSelf.bind((0,O.default)(n)),n.setLock=n.setLock.bind((0,O.default)(n)),n.onPropsChanged(a),n}return(0,C.default)(p,[{key:"onPropsChanged",value:function(n){var g=this.props,d=["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"],I=!this.meta||d.map(function(W){return n[W]!==g[W]}).filter(function(W){return W}).length>0;I&&(this.meta=this.getMeta(n))}},{key:"getMeta",value:function(n){var g=n.selectedField,d=n.selectedOperator,I=n.config,W=n.reordableNodesCnt,Z=n.isLocked,X=(0,V.getFieldPathLabels)(g,I),G=(0,w.getFieldConfig)(I,g),z=G&&G.type=="!struct",K=g&&d&&!z,Y=(0,w.getOperatorConfig)(I,d,g),re=Y&&Y.options!=null,ne=(0,w.getFieldWidgetConfig)(I,g,d)||{},ue=ne.hideOperator,ae=I.settings.canReorder&&W>1&&!Z,ve=g&&!ue,se=g&&ue&&ne.operatorInlineLabel,ge=K,ye=K&&re;return{selectedFieldPartsLabels:X,selectedFieldWidgetConfig:ne,showDragIcon:ae,showOperator:ve,showOperatorLabel:se,showWidget:ge,showOperatorOptions:ye}}},{key:"setLock",value:function(n){this.props.setLock(n)}},{key:"removeSelf",value:function(){var n=this,g=this.props.confirmFn,d=this.props.config.settings,I=d.renderConfirm,W=d.removeRuleConfirmOptions,Z=function(){n.props.removeSelf()};W&&!this.isEmptyCurrentRule()?I(m(m({},W),{},{onOk:Z,onCancel:null,confirmFn:g})):Z()}},{key:"isEmptyCurrentRule",value:function(){return!(this.props.selectedField!==null&&this.props.selectedOperator!==null&&this.props.value.filter(function(n){return n!==void 0}).size>0)}},{key:"renderField",value:function(){var n=this.props,g=n.config,d=n.isLocked,I=g.settings.immutableFieldsMode;return A.default.createElement(U.default,{key:"field",classname:"rule--field",config:g,selectedField:this.props.selectedField,setField:I?x.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:I||d,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var n=this.props,g=n.config,d=n.isLocked,I=this.meta,W=I.selectedFieldPartsLabels,Z=I.selectedFieldWidgetConfig,X=I.showOperator,G=I.showOperatorLabel,z=g.settings.immutableOpsMode;return A.default.createElement(F.default,{key:"operator",config:g,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:z?x.dummyFn:this.props.setOperator,selectedFieldPartsLabels:W,showOperator:X,showOperatorLabel:G,selectedFieldWidgetConfig:Z,readonly:z||d,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var n=this.props,g=n.config,d=n.valueError,I=n.isLocked,W=this.meta.showWidget,Z=g.settings.immutableValuesMode;if(!W)return null;var X=A.default.createElement(N.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:d,config:g,setValue:Z?x.dummyFn:this.props.setValue,setValueSrc:Z?x.dummyFn:this.props.setValueSrc,readonly:Z||I,id:this.props.id,groupId:this.props.groupId});return A.default.createElement(x.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},X)}},{key:"renderOperatorOptions",value:function(){var n=this.props.config,g=this.meta.showOperatorOptions,d=n.settings,I=d.immutableOpsMode,W=d.immutableValuesMode;if(!g)return null;var Z=A.default.createElement($.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:I?x.dummyFn:this.props.setOperatorOption,config:n,readonly:W});return A.default.createElement(x.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},Z)}},{key:"renderBeforeWidget",value:function(){var n=this.props.config,g=n.settings.renderBeforeWidget;return g&&A.default.createElement(x.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof g=="function"?g(this.props):g)}},{key:"renderAfterWidget",value:function(){var n=this.props.config,g=n.settings.renderAfterWidget;return g&&A.default.createElement(x.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof g=="function"?g(this.props):g)}},{key:"renderError",value:function(){var n=this.props,g=n.config,d=n.valueError,I=g.settings,W=I.renderRuleError,Z=I.showErrorMessage,X=d&&d.toArray().filter(function(G){return!!G}).shift()||null;return Z&&X&&A.default.createElement("div",{className:"rule--error"},W?W({error:X}):X)}},{key:"renderDrag",value:function(){var n=this.meta.showDragIcon;return n&&A.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},A.default.createElement(x.DragIcon,null)," ")}},{key:"renderDel",value:function(){var n=this.props,g=n.config,d=n.isLocked,I=g.settings,W=I.deleteLabel,Z=I.immutableGroupsMode,X=I.renderButton,G=I.canDeleteLocked;return!Z&&(!d||d&&G)&&A.default.createElement(X,{type:"delRule",onClick:this.removeSelf,label:W,config:g})}},{key:"renderLock",value:function(){var n=this.props,g=n.config,d=n.isLocked,I=n.isTrueLocked,W=n.id,Z=g.settings,X=Z.lockLabel,G=Z.lockedLabel,z=Z.showLock,K=Z.renderSwitch;return z&&!(d&&!I)&&A.default.createElement(K,{type:"lock",id:W,value:d,setValue:this.setLock,label:X,checkedLabel:G,hideLabel:!0,config:g})}},{key:"render",value:function(){var n=this.meta,g=n.showOperatorOptions,d=n.selectedFieldWidgetConfig,I=this.props,W=I.valueSrc,Z=I.value,X=I.config,G=W.first()=="value"&&!g&&Z.size==1&&d.fullWidth,z=X.settings.renderButtonGroup,K=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],Y=A.default.createElement("div",{key:"rule-body",className:o("rule--body",G&&"can--shrink--value")},K),re=this.renderError(),ne=this.renderDrag(),ue=this.renderLock(),ae=this.renderDel();return A.default.createElement(A.default.Fragment,null,ne,A.default.createElement("div",{className:"rule--body--wrapper"},Y,re),A.default.createElement("div",{className:"rule--header"},A.default.createElement(z,{config:X},ue,ae)))}}]),p}(A.PureComponent),te.propTypes={id:S.default.string.isRequired,groupId:S.default.string,selectedField:S.default.string,selectedOperator:S.default.string,operatorOptions:S.default.object,config:S.default.object.isRequired,value:S.default.any,valueSrc:S.default.any,asyncListValues:S.default.array,isDraggingMe:S.default.bool,isDraggingTempo:S.default.bool,parentField:S.default.string,valueError:S.default.any,isLocked:S.default.bool,isTrueLocked:S.default.bool,handleDraggerMouseDown:S.default.func,setField:S.default.func,setOperator:S.default.func,setOperatorOption:S.default.func,setLock:S.default.func,removeSelf:S.default.func,setValue:S.default.func,setValueSrc:S.default.func,reordableNodesCnt:S.default.number},te))||_)||_)||_),l=u;i.default=l},98011:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(92476)),h=r(e(86067)),b=r(e(85091)),C=r(e(80467)),O=r(e(36610)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=r(e(68404)),S=r(e(59160)),M=r(e(80742)),D=r(e(15920)),F=e(65801),U=e(92161),N=r(e(35205)),$=e(9701),w=e(48281),V,j,x;function H(m,s){var c=Object.keys(m);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(m);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),c.push.apply(c,o)}return c}function _(m){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?H(Object(c),!0).forEach(function(o){(0,y.default)(m,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(c)):H(Object(c)).forEach(function(o){Object.defineProperty(m,o,Object.getOwnPropertyDescriptor(c,o))})}return m}function te(m){var s=J();return function(){var o=(0,L.default)(m),u;if(s){var l=(0,L.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,E.default)(this,u)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=(V=(0,D.default)("group rule_group"),(0,M.default)(j=V(j=(0,w.ConfirmFn)(j=(x=function(m){(0,R.default)(c,m);var s=te(c);function c(o){var u;return(0,h.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"rule_group--children"},u.renderHeaderWrapper=function(){return null},u.renderFooterWrapper=function(){return null},u.renderConjs=function(){return null},u.canAddGroup=function(){return!1},u.canAddRule=function(){return!0},u.canDeleteGroup=function(){return!1},(0,$.useOnPropsChanged)((0,C.default)(u)),u.onPropsChanged(o),u}return(0,b.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.children1;return l.size}},{key:"renderChildrenWrapper",value:function(){return A.default.createElement(A.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,O.default)((0,L.default)(c.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var u=this.props,l=u.config,f=u.selectedField,T=u.setField,p=u.parentField,a=u.id,n=u.groupId,g=u.isLocked,d=l.settings.immutableFieldsMode;return A.default.createElement(N.default,{key:"field",classname:"group--field",config:l,selectedField:f,setField:T,parentField:p,readonly:d||g,id:a,groupId:n})}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addRule,T=u.isLocked,p=u.isTrueLocked,a=u.id;return A.default.createElement(U.RuleGroupActions,{config:l,addRule:f,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:T,isTrueLocked:p,id:a})}},{key:"extraPropsForItem",value:function(u){return{parentField:this.props.selectedField}}}]),c}(F.BasicGroup),x.propTypes=_(_({},F.BasicGroup.propTypes),{},{selectedField:S.default.string,parentField:S.default.string,setField:S.default.func}),x))||j)||j)||j),P=k;i.default=P},92161:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupActions=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=A(e(68404));function L(F){if(typeof WeakMap!="function")return null;var U=new WeakMap,N=new WeakMap;return(L=function(w){return w?N:U})(F)}function A(F,U){if(!U&&F&&F.__esModule)return F;if(F===null||y(F)!=="object"&&typeof F!="function")return{default:F};var N=L(U);if(N&&N.has(F))return N.get(F);var $={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in F)if(V!=="default"&&Object.prototype.hasOwnProperty.call(F,V)){var j=w?Object.getOwnPropertyDescriptor(F,V):null;j&&(j.get||j.set)?Object.defineProperty($,V,j):$[V]=F[V]}return $.default=F,N&&N.set(F,$),$}function S(F){var U=M();return function(){var $=(0,R.default)(F),w;if(U){var V=(0,R.default)(this).constructor;w=Reflect.construct($,arguments,V)}else w=$.apply(this,arguments);return(0,O.default)(this,w)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D=function(F){(0,C.default)(N,F);var U=S(N);function N(){return(0,h.default)(this,N),U.apply(this,arguments)}return(0,b.default)(N,[{key:"render",value:function(){var w=this.props,V=w.config,j=w.addRule,x=w.canAddRule,H=w.canDeleteGroup,_=w.removeSelf,te=w.setLock,J=w.isLocked,k=w.isTrueLocked,P=w.id,m=V.settings,s=m.immutableGroupsMode,c=m.addRuleLabel,o=m.delGroupLabel,u=m.renderButton,l=m.renderSwitch,f=m.renderButtonGroup,T=m.lockLabel,p=m.lockedLabel,a=m.showLock,n=m.canDeleteLocked,g=a&&!(J&&!k)&&E.default.createElement(l,{type:"lock",id:P,value:J,setValue:te,label:T,checkedLabel:p,hideLabel:!0,config:V}),d=!s&&x&&!J&&E.default.createElement(u,{type:"addRuleGroup",onClick:j,label:c,readonly:J,config:V}),I=!s&&H&&(!J||J&&n)&&E.default.createElement(u,{type:"delRuleGroup",onClick:_,label:o,config:V});return E.default.createElement("div",{className:"group--actions"},E.default.createElement(f,{config:V},g,d,I))}}]),N}(E.PureComponent);i.RuleGroupActions=D},43219:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(92476)),h=r(e(86067)),b=r(e(85091)),C=r(e(80467)),O=r(e(36610)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=r(e(68404)),S=r(e(59160)),M=r(e(80742)),D=r(e(15920)),F=e(65801),U=e(38563),N=r(e(35205)),$=r(e(64078)),w=e(9701),V=e(48281),j=e(79746),x=r(e(33753)),H,_,te;function J(T,p){var a=Object.keys(T);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(T);p&&(n=n.filter(function(g){return Object.getOwnPropertyDescriptor(T,g).enumerable})),a.push.apply(a,n)}return a}function k(T){for(var p=1;p<arguments.length;p++){var a=arguments[p]!=null?arguments[p]:{};p%2?J(Object(a),!0).forEach(function(n){(0,y.default)(T,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach(function(n){Object.defineProperty(T,n,Object.getOwnPropertyDescriptor(a,n))})}return T}function P(T,p){var a=typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(!a){if(Array.isArray(T)||(a=m(T))||p&&T&&typeof T.length=="number"){a&&(T=a);var n=0,g=function(){};return{s:g,n:function(){return n>=T.length?{done:!0}:{done:!1,value:T[n++]}},e:function(X){throw X},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,I=!1,W;return{s:function(){a=a.call(T)},n:function(){var X=a.next();return d=X.done,X},e:function(X){I=!0,W=X},f:function(){try{!d&&a.return!=null&&a.return()}finally{if(I)throw W}}}}function m(T,p){if(T){if(typeof T=="string")return s(T,p);var a=Object.prototype.toString.call(T).slice(8,-1);if(a==="Object"&&T.constructor&&(a=T.constructor.name),a==="Map"||a==="Set")return Array.from(T);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(T,p)}}function s(T,p){(p==null||p>T.length)&&(p=T.length);for(var a=0,n=new Array(p);a<p;a++)n[a]=T[a];return n}function c(T){var p=o();return function(){var n=(0,L.default)(T),g;if(p){var d=(0,L.default)(this).constructor;g=Reflect.construct(n,arguments,d)}else g=n.apply(this,arguments);return(0,E.default)(this,g)}}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u=e(23019),l=(H=(0,D.default)("group rule_group_ext"),(0,M.default)(_=H(_=(0,V.ConfirmFn)(_=(te=function(T){(0,R.default)(a,T);var p=c(a);function a(n){var g;return(0,h.default)(this,a),g=p.call(this,n),g.childrenClassName=function(){return"rule_group_ext--children"},g.renderFooterWrapper=function(){return null},g.canAddGroup=function(){return!1},g.canAddRule=function(){return!0},g.canDeleteGroup=function(){return!0},(0,w.useOnPropsChanged)((0,C.default)(g)),g.onPropsChanged(n),g}return(0,b.default)(a,[{key:"onPropsChanged",value:function(g){}},{key:"renderHeaderWrapper",value:function(){return A.default.createElement("div",{key:"group-header",className:u("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return A.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return A.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var g=this.props,d=g.config,I=g.selectedField,W=g.selectedOperator,Z=(0,j.getFieldConfig)(d,I)||{};return Z.showNot!=null?Z.showNot:d.settings.showNot}},{key:"conjunctionOptions",value:function(){var g=this.props,d=g.config,I=g.selectedField,W=g.selectedOperator,Z=(0,j.getFieldConfig)(d,I)||{},X=(0,O.default)((0,L.default)(a.prototype),"conjunctionOptions",this).call(this);if(Z.conjunctions){var G={},z=P(Z.conjunctions),K;try{for(z.s();!(K=z.n()).done;){var Y=K.value;G[Y]=X[Y]}}catch(re){z.e(re)}finally{z.f()}X=G}return X}},{key:"renderField",value:function(){var g=this.props,d=g.config,I=g.selectedField,W=g.setField,Z=g.parentField,X=g.id,G=g.groupId,z=g.isLocked,K=d.settings.immutableFieldsMode;return A.default.createElement(N.default,{key:"field",classname:"rule--field",config:d,selectedField:I,setField:W,parentField:Z,readonly:K||z,id:X,groupId:G})}},{key:"renderOperator",value:function(){var g=this.props,d=g.config,I=g.selectedField,W=g.selectedOperator,Z=g.setField,X=g.setOperator,G=g.isLocked,z=d.settings.immutableFieldsMode,K=(0,j.getFieldWidgetConfig)(d,I,W)||{},Y=K.hideOperator,re=I&&Y&&K.operatorInlineLabel,ne=I&&!Y;return A.default.createElement($.default,{key:"operator",classname:"group--operator",config:d,selectedField:I,selectedOperator:W,setField:Z,setOperator:X,selectedFieldPartsLabels:["group"],showOperator:ne,showOperatorLabel:re,selectedFieldWidgetConfig:K,readonly:z||G,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var g=this.props,d=g.config,I=g.selectedField,W=g.selectedOperator,Z=g.isLocked,X=d.settings.immutableValuesMode,G=I&&W,z=G;if(!z)return null;var K=A.default.createElement(x.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:d,setValue:X?V.dummyFn:this.props.setValue,setValueSrc:V.dummyFn,readonly:X||Z,id:this.props.id,groupId:this.props.groupId});return A.default.createElement(V.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},K)}},{key:"renderActions",value:function(){var g=this.props,d=g.config,I=g.addRule,W=g.isLocked,Z=g.isTrueLocked,X=g.id;return A.default.createElement(U.RuleGroupExtActions,{config:d,addRule:I,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:W,isTrueLocked:Z,id:X})}},{key:"reordableNodesCntForItem",value:function(g){if(this.props.isLocked)return 0;var d=this.props.children1;return d.size}},{key:"extraPropsForItem",value:function(g){return{parentField:this.props.selectedField}}}]),a}(F.BasicGroup),te.propTypes=k(k({},F.BasicGroup.propTypes),{},{selectedField:S.default.string,selectedOperator:S.default.string,value:S.default.any,parentField:S.default.string,setField:S.default.func,setOperator:S.default.func,setValue:S.default.func}),te))||_)||_)||_),f=l;i.default=f},38563:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupExtActions=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=A(e(68404));function L(F){if(typeof WeakMap!="function")return null;var U=new WeakMap,N=new WeakMap;return(L=function(w){return w?N:U})(F)}function A(F,U){if(!U&&F&&F.__esModule)return F;if(F===null||y(F)!=="object"&&typeof F!="function")return{default:F};var N=L(U);if(N&&N.has(F))return N.get(F);var $={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in F)if(V!=="default"&&Object.prototype.hasOwnProperty.call(F,V)){var j=w?Object.getOwnPropertyDescriptor(F,V):null;j&&(j.get||j.set)?Object.defineProperty($,V,j):$[V]=F[V]}return $.default=F,N&&N.set(F,$),$}function S(F){var U=M();return function(){var $=(0,R.default)(F),w;if(U){var V=(0,R.default)(this).constructor;w=Reflect.construct($,arguments,V)}else w=$.apply(this,arguments);return(0,O.default)(this,w)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D=function(F){(0,C.default)(N,F);var U=S(N);function N(){return(0,h.default)(this,N),U.apply(this,arguments)}return(0,b.default)(N,[{key:"render",value:function(){var w=this.props,V=w.config,j=w.addRule,x=w.canAddRule,H=w.canDeleteGroup,_=w.removeSelf,te=w.setLock,J=w.isLocked,k=w.isTrueLocked,P=w.id,m=V.settings,s=m.immutableGroupsMode,c=m.addSubRuleLabel,o=m.delGroupLabel,u=m.renderButton,l=m.renderSwitch,f=m.renderButtonGroup,T=m.lockLabel,p=m.lockedLabel,a=m.showLock,n=m.canDeleteLocked,g=a&&!(J&&!k)&&E.default.createElement(l,{type:"lock",id:P,value:J,setValue:te,label:T,checkedLabel:p,config:V}),d=!s&&x&&!J&&E.default.createElement(u,{type:"addRuleGroupExt",onClick:j,label:c,readonly:J,config:V}),I=!s&&H&&(!J||J&&n)&&E.default.createElement(u,{type:"delRuleGroup",onClick:_,label:o,config:V});return E.default.createElement("div",{className:"group--actions group--actions--tr"},E.default.createElement(f,{config:V},g,d,I))}}]),N}(E.PureComponent);i.RuleGroupExtActions=D},74481:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(92476)),h=r(e(86067)),b=r(e(85091)),C=r(e(80467)),O=r(e(72366)),R=r(e(64920)),E=r(e(39005)),L=r(e(68404)),A=r(e(59160)),S=r(e(80742)),M=r(e(15920)),D=e(65801),F=e(9252),U=e(9701),N=e(48281),$=e(31775),w,V,j;function x(m,s){var c=Object.keys(m);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(m);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),c.push.apply(c,o)}return c}function H(m){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?x(Object(c),!0).forEach(function(o){(0,y.default)(m,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(c)):x(Object(c)).forEach(function(o){Object.defineProperty(m,o,Object.getOwnPropertyDescriptor(c,o))})}return m}function _(m){var s=te();return function(){var o=(0,E.default)(m),u;if(s){var l=(0,E.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,R.default)(this,u)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k=(w=(0,M.default)("group switch_group"),(0,S.default)(V=w(V=(0,N.ConfirmFn)(V=(j=function(m){(0,O.default)(c,m);var s=_(c);function c(o){var u;return(0,h.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"switch_group--children"},u.renderFooterWrapper=function(){return null},u.hasDefaultCase=function(){return u.props.children1.size&&u.props.children1.filter(function(l){return l.get("children1")==null}).size>0},(0,U.useOnPropsChanged)((0,C.default)(u)),u.onPropsChanged(o),u}return(0,b.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"canAddGroup",value:function(){var u=this.props.config.settings.maxNumberOfCases,l=this.props.children1.size;return u?l<u:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var u=this.props.children1.size,l=u;return this.hasDefaultCase()&&l--,l}},{key:"totalRulesCntForItem",value:function(u){return(0,$.getTotalRulesCountInTree)(u)}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.config.settings,f=l.canLeaveEmptyCase,T=l.canRegroupCases,p=this.props.children1.size,a=p;this.hasDefaultCase()&&a--;var n=(0,$.getTotalReordableNodesCountInTree)(u),g=n;return g==1&&T&&f&&a>1&&(g=111),g}},{key:"renderHeaderWrapper",value:function(){return L.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return L.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var u=this.props.config.settings.renderSwitchPrefix;return u?u():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addCaseGroup,T=u.addDefaultCaseGroup,p=u.isLocked,a=u.isTrueLocked,n=u.id;return L.default.createElement(F.SwitchGroupActions,{config:l,addCaseGroup:f,addDefaultCaseGroup:T,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:p,isTrueLocked:a,id:n})}}]),c}(D.BasicGroup),j.propTypes=H({},D.BasicGroup.propTypes),j))||V)||V)||V),P=k;i.default=P},9252:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.SwitchGroupActions=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=A(e(68404));function L(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(L=function(j){return j?w:$})(N)}function A(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||y(N)!=="object"&&typeof N!="function")return{default:N};var w=L($);if(w&&w.has(N))return w.get(N);var V={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in N)if(x!=="default"&&Object.prototype.hasOwnProperty.call(N,x)){var H=j?Object.getOwnPropertyDescriptor(N,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=N[x]}return V.default=N,w&&w.set(N,V),V}function S(N){var $=M();return function(){var V=(0,R.default)(N),j;if($){var x=(0,R.default)(this).constructor;j=Reflect.construct(V,arguments,x)}else j=V.apply(this,arguments);return(0,O.default)(this,j)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},F="topRight",U=function(N){(0,C.default)(w,N);var $=S(w);function w(){return(0,h.default)(this,w),$.apply(this,arguments)}return(0,b.default)(w,[{key:"render",value:function(){var j=this.props,x=j.config,H=j.addCaseGroup,_=j.addDefaultCaseGroup,te=j.setLock,J=j.isLocked,k=j.isTrueLocked,P=j.id,m=j.canAddGroup,s=j.canAddDefault,c=x.settings,o=c.immutableGroupsMode,u=c.addCaseLabel,l=c.addDefaultCaseLabel,f=c.groupActionsPosition,T=c.renderButton,p=c.renderSwitch,a=c.renderButtonGroup,n=c.lockLabel,g=c.lockedLabel,d=c.showLock,I=D[f||F],W=d&&!(J&&!k)&&E.default.createElement(p,{type:"lock",id:P,value:J,setValue:te,label:n,checkedLabel:g,config:x}),Z=!o&&m&&!J&&E.default.createElement(T,{type:"addCaseGroup",onClick:H,label:u,readonly:J,config:x}),X=!o&&s&&!J&&E.default.createElement(T,{type:"addDefaultCaseGroup",onClick:_,label:l,readonly:J,config:x});return E.default.createElement("div",{className:"group--actions ".concat(I)},E.default.createElement(a,{config:x},W,Z,X))}}]),w}(E.PureComponent);i.SwitchGroupActions=U},19619:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(68307)),b=r(e(86067)),C=r(e(85091)),O=r(e(72366)),R=r(e(64920)),E=r(e(39005)),L=D(e(68404)),A=r(e(59160)),S=r(e(31536));function M($){if(typeof WeakMap!="function")return null;var w=new WeakMap,V=new WeakMap;return(M=function(x){return x?V:w})($)}function D($,w){if(!w&&$&&$.__esModule)return $;if($===null||y($)!=="object"&&typeof $!="function")return{default:$};var V=M(w);if(V&&V.has($))return V.get($);var j={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in $)if(H!=="default"&&Object.prototype.hasOwnProperty.call($,H)){var _=x?Object.getOwnPropertyDescriptor($,H):null;_&&(_.get||_.set)?Object.defineProperty(j,H,_):j[H]=$[H]}return j.default=$,V&&V.set($,j),j}function F($){var w=U();return function(){var j=(0,E.default)($),x;if(w){var H=(0,E.default)(this).constructor;x=Reflect.construct(j,arguments,H)}else x=j.apply(this,arguments);return(0,R.default)(this,x)}}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var N=function($){(0,O.default)(V,$);var w=F(V);function V(){var j;(0,b.default)(this,V);for(var x=arguments.length,H=new Array(x),_=0;_<x;_++)H[_]=arguments[_];return j=w.call.apply(w,[this].concat(H)),j.handleChange=function(te){j.props.setOption("proximity",parseInt(te))},j}return(0,C.default)(V,[{key:"render",value:function(){var x=this.props,H=x.defaults,_=x.options,te=x.config,J=x.optionLabel,k=x.optionPlaceholder,P=x.customProps,m=x.minProximity,s=x.maxProximity,c=x.optionTextBefore,o=x.readonly,u=te.settings,l=te.widgets,f=H?H.proximity:void 0,T=u.showLabels,p=_.get("proximity",f),a=(0,S.default)(m,s+1).map(function(g){return{title:g,value:g}}),n=l.select.factory;return L.default.createElement("div",{className:"operator--PROXIMITY"},L.default.createElement("div",{className:"operator--options"},T&&L.default.createElement("label",{className:"rule--label"},J),!T&&c&&L.default.createElement("div",{className:"operator--options--sep"},L.default.createElement("span",null,c)),L.default.createElement(n,(0,h.default)({config:te,value:p,listValues:a,setValue:this.handleChange,readonly:o,placeholder:k},P))),L.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),V}(L.PureComponent);i.default=N,N.propTypes={config:A.default.object.isRequired,setOption:A.default.func.isRequired,options:A.default.any.isRequired,minProximity:A.default.number,maxProximity:A.default.number,optionPlaceholder:A.default.string,optionTextBefore:A.default.string,optionLabel:A.default.string,customProps:A.default.object,readonly:A.default.bool},N.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},22369:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ProximityOperator",{enumerable:!0,get:function(){return y.default}});var y=r(e(19619))},98865:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(92476)),b=r(e(86067)),C=r(e(85091)),O=r(e(80467)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=V(e(68404)),S=r(e(59160)),M=e(79746),D=e(62413),F=e(60399),U=e(9701),N=r(e(4161)),$=r(e(65555));function w(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,P=new WeakMap;return(w=function(s){return s?P:k})(J)}function V(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||y(J)!=="object"&&typeof J!="function")return{default:J};var P=w(k);if(P&&P.has(J))return P.get(J);var m={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(m,c,o):m[c]=J[c]}return m.default=J,P&&P.set(J,m),m}function j(J,k){var P=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),P.push.apply(P,m)}return P}function x(J){for(var k=1;k<arguments.length;k++){var P=arguments[k]!=null?arguments[k]:{};k%2?j(Object(P),!0).forEach(function(m){(0,h.default)(J,m,P[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(P)):j(Object(P)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(P,m))})}return J}function H(J){var k=_();return function(){var m=(0,L.default)(J),s;if(k){var c=(0,L.default)(this).constructor;s=Reflect.construct(m,arguments,c)}else s=m.apply(this,arguments);return(0,E.default)(this,s)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var te=function(J){(0,R.default)(P,J);var k=H(P);function P(m){var s;return(0,b.default)(this,P),s=k.call(this,m),(0,U.useOnPropsChanged)((0,O.default)(s)),s.onPropsChanged(m),s}return(0,C.default)(P,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["selectedField","config","parentField"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.selectedField,o=s.config,u=s.parentField,l=c,f=o.settings,T=f.maxLabelsLength,p=f.fieldSeparatorDisplay,a=f.fieldPlaceholder,n=f.fieldSeparator,g=!!c,d=g?null:(0,F.truncateString)(a,T),I=g?(0,M.getFieldConfig)(o,l):null,W=I||{},Z=(0,D.getFieldPath)(l,o),X=(0,D.getFieldPath)(l,o,!0),G=this.getFieldLabel(I,l,o),z=(0,D.getFieldPathLabels)(l,o),K=z?z.join(p):null;(K==G||u)&&(K=null);var Y=W.label2,re=typeof u=="string"?u.split(n):u,ne=u?(0,M.getFieldConfig)(o,u):null,ue=u?ne&&ne.subfields:o.fields,ae=this.buildOptions(re,o,ue,re);return{placeholder:d,items:ae,parentField:u,selectedKey:l,selectedKeys:Z,selectedPath:X,selectedLabel:G,selectedOpts:W,selectedAltLabel:Y,selectedFullLabel:K}}},{key:"getFieldLabel",value:function(s,c,o){if(!c)return null;var u=o.settings.fieldSeparator,l=o.settings.maxLabelsLength,f=Array.isArray(c)?c:c.split(u),T=s&&s.label||(0,N.default)(f);return T=(0,F.truncateString)(T,l),T}},{key:"buildOptions",value:function(s,c,o){var u=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!o)return null;var T=c.settings,p=T.fieldSeparator,a=T.fieldSeparatorDisplay,n=l?l.join(p)+p:"";return(0,$.default)(o).map(function(g){var d=o[g],I=u.getFieldLabel(d,g,c),W=(0,D.getFieldPathLabels)(n+g,c),Z=W.join(a);(Z==I||s)&&(Z=null);var X=d.label2,G=d.tooltip,z=(l||[]).concat(g),K=d.disabled;if(!d.hideForSelect)return d.type=="!struct"?{disabled:K,key:g,path:n+g,label:I,fullLabel:Z,altLabel:X,tooltip:G,items:u.buildOptions(s,c,d.subfields,z,I)}:{disabled:K,key:g,path:n+g,label:I,fullLabel:Z,altLabel:X,tooltip:G,grouplabel:f}}).filter(function(g){return!!g})}},{key:"render",value:function(){var s=this.props,c=s.config,o=s.customProps,u=s.setField,l=s.readonly,f=s.id,T=s.groupId,p=c.settings.renderField,a=x({id:f,groupId:T,config:c,customProps:o,readonly:l,setField:u},this.meta);return p(a)}}]),P}(A.PureComponent);i.default=te,te.propTypes={id:S.default.string,groupId:S.default.string,config:S.default.object.isRequired,selectedField:S.default.string,parentField:S.default.string,customProps:S.default.object,readonly:S.default.bool,setField:S.default.func.isRequired}},35205:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=M(e(68404)),L=r(e(98865)),A=e(48281);function S(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(S=function(j){return j?w:$})(N)}function M(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||y(N)!=="object"&&typeof N!="function")return{default:N};var w=S($);if(w&&w.has(N))return w.get(N);var V={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in N)if(x!=="default"&&Object.prototype.hasOwnProperty.call(N,x)){var H=j?Object.getOwnPropertyDescriptor(N,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=N[x]}return V.default=N,w&&w.set(N,V),V}function D(N){var $=F();return function(){var V=(0,R.default)(N),j;if($){var x=(0,R.default)(this).constructor;j=Reflect.construct(V,arguments,x)}else j=V.apply(this,arguments);return(0,O.default)(this,j)}}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(N){(0,C.default)(w,N);var $=D(w);function w(){return(0,h.default)(this,w),$.apply(this,arguments)}return(0,b.default)(w,[{key:"render",value:function(){var j=this.props,x=j.config,H=j.selectedField,_=j.setField,te=j.parentField,J=j.classname,k=j.readonly,P=j.id,m=j.groupId;return E.default.createElement(A.Col,{className:J},x.settings.showLabels&&E.default.createElement("label",{className:"rule--label"},x.settings.fieldLabel),E.default.createElement(L.default,{config:x,selectedField:H,parentField:te,setField:_,customProps:x.settings.customFieldSelectProps,readonly:k,id:P,groupId:m}))}}]),w}(E.PureComponent);i.default=U},9305:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(92476)),b=r(e(47452)),C=r(e(86067)),O=r(e(85091)),R=r(e(80467)),E=r(e(72366)),L=r(e(64920)),A=r(e(39005)),S=x(e(68404)),M=r(e(59160)),D=e(79746),F=e(62413),U=e(60399),N=e(9701),$=r(e(4161)),w=r(e(65555)),V=r(e(29521));function j(P){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(j=function(o){return o?s:m})(P)}function x(P,m){if(!m&&P&&P.__esModule)return P;if(P===null||y(P)!=="object"&&typeof P!="function")return{default:P};var s=j(m);if(s&&s.has(P))return s.get(P);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in P)if(u!=="default"&&Object.prototype.hasOwnProperty.call(P,u)){var l=o?Object.getOwnPropertyDescriptor(P,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=P[u]}return c.default=P,s&&s.set(P,c),c}function H(P,m){var s=Object.keys(P);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(P);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(P,o).enumerable})),s.push.apply(s,c)}return s}function _(P){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?H(Object(s),!0).forEach(function(c){(0,h.default)(P,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach(function(c){Object.defineProperty(P,c,Object.getOwnPropertyDescriptor(s,c))})}return P}function te(P){var m=J();return function(){var c=(0,A.default)(P),o;if(m){var u=(0,A.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,L.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(P){(0,E.default)(s,P);var m=te(s);function s(c){var o;return(0,C.default)(this,s),o=m.call(this,c),(0,N.useOnPropsChanged)((0,R.default)(o)),o.onPropsChanged(c),o}return(0,O.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","operator","isFuncArg"],f=["config","field","value"],T=!this.items||l.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0,p=!this.meta||f.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0;p&&(this.meta=this.getMeta(o)),T&&(this.items=this.getItems(o))}},{key:"getItems",value:function(o){var u=o.config,l=o.field,f=o.operator,T=o.parentFuncs,p=o.fieldDefinition,a=o.isFuncArg,n=u.settings.canUseFuncForField,g=this.filterFuncs(u,u.funcs,l,f,n,T,a,p),d=this.buildOptions(u,g);return d}},{key:"getMeta",value:function(o){var u=o.config,l=o.field,f=o.value,T=u.settings,p=T.funcPlaceholder,a=T.fieldSeparatorDisplay,n=f,g=!!f,d=(0,D.getFieldConfig)(u,l),I=d.widgets.field,W=I&&I.widgetProps||{},Z=g?null:p,X=g?(0,D.getFuncConfig)(u,n):null,G=X||{},z=(0,F.getFieldPath)(n,u),K=(0,F.getFieldPath)(n,u,!0),Y=this.getFuncLabel(X,n,u),re=(0,F.getFuncPathLabels)(n,u),ne=re?re.join(a):null;return ne==Y&&(ne=null),{placeholder:Z,selectedKey:n,selectedKeys:z,selectedPath:K,selectedLabel:Y,selectedOpts:G,selectedFullLabel:ne}}},{key:"filterFuncs",value:function(o,u,l,f,T,p,a,n){u=(0,V.default)(u);var g=o.settings.fieldSeparator,d=(0,D.getFieldConfig)(o,l),I,W=d,Z=(0,F.getWidgetForFieldOp)(o,l,f,"value");if(a&&n)W=n,I=n.type;else if(Z){var X=o.widgets[Z],G=X.type;I=G}else I=d.type;function z(K,Y){for(var re in K){var ne=K[re].subfields,ue=(Y||[]).concat(re),ae=ue.join(g),ve=(0,D.getFuncConfig)(o,ae);if(ve.type=="!struct")z(ne,ue)==0&&delete K[re];else{var se=ve.returnType==I;W.funcs&&(se=se&&W.funcs.includes(ae)),T&&(se=se&&T(l,d,ae,ve,f)),!ve.allowSelfNesting&&p&&p.map(function(ge){var ye=(0,b.default)(ge,2),Oe=ye[0],Se=ye[1];return Oe}).includes(ae)&&(se=!1),se||delete K[re]}}return(0,w.default)(K).length}return z(u,[]),u}},{key:"buildOptions",value:function(o,u){var l=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!u)return null;var p=o.settings,a=p.fieldSeparator,n=p.fieldSeparatorDisplay,g=f?f.join(a)+a:"";return(0,w.default)(u).map(function(d){var I=u[d],W=l.getFuncLabel(I,d,o),Z=(0,F.getFuncPathLabels)(d,o),X=Z.join(n);X==W&&(X=null);var G=I.tooltip,z=(f||[]).concat(d);return I.type=="!struct"?{key:d,path:g+d,label:W,fullLabel:X,tooltip:G,items:l.buildOptions(o,I.subfields,z,W)}:{key:d,path:g+d,label:W,fullLabel:X,tooltip:G,grouplabel:T}})}},{key:"getFuncLabel",value:function(o,u,l){if(!u)return null;var f=l.settings.fieldSeparator,T=l.settings.maxLabelsLength,p=Array.isArray(u)?u:u.split(f),a=o.label||(0,$.default)(p);return a=(0,U.truncateString)(a,T),a}},{key:"render",value:function(){var o=this.props,u=o.config,l=o.customProps,f=o.setValue,T=o.readonly,p=o.id,a=o.groupId,n=u.settings.renderFunc,g=_({config:u,customProps:l,readonly:T,setField:f,items:this.items,id:p,groupId:a},this.meta);return n(g)}}]),s}(S.PureComponent);i.default=k,k.propTypes={id:M.default.string,groupId:M.default.string,config:M.default.object.isRequired,field:M.default.string.isRequired,operator:M.default.string,customProps:M.default.object,value:M.default.string,setValue:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,fieldDefinition:M.default.object,isFuncArg:M.default.bool}},31404:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(68307)),b=r(e(90890)),C=r(e(86067)),O=r(e(85091)),R=r(e(80467)),E=r(e(72366)),L=r(e(64920)),A=r(e(39005)),S=j(e(68404)),M=r(e(59160)),D=r(e(9305)),F=e(79746),U=r(e(33753)),N=e(48281),$=e(12177),w=e(9701);function V(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,P=new WeakMap;return(V=function(s){return s?P:k})(J)}function j(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||y(J)!=="object"&&typeof J!="function")return{default:J};var P=V(k);if(P&&P.has(J))return P.get(J);var m={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(m,c,o):m[c]=J[c]}return m.default=J,P&&P.set(J,m),m}function x(J){var k=H();return function(){var m=(0,A.default)(J),s;if(k){var c=(0,A.default)(this).constructor;s=Reflect.construct(m,arguments,c)}else s=m.apply(this,arguments);return(0,L.default)(this,s)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(J){(0,E.default)(P,J);var k=x(P);function P(m){var s;return(0,C.default)(this,P),s=k.call(this,m),s.setFunc=function(c){s.props.setValue((0,$.setFunc)(s.props.value,c,s.props.config))},s.setArgValue=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,T=f[c];s.props.setValue((0,$.setArgValue)(s.props.value,c,o,T,u))},s.setArgValueSrc=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,T=f[c];s.props.setValue((0,$.setArgValueSrc)(s.props.value,c,o,T,u))},s.renderFuncSelect=function(){var c=s.props,o=c.config,u=c.field,l=c.operator,f=c.customProps,T=c.value,p=c.readonly,a=c.parentFuncs,n=c.id,g=c.groupId,d=c.isFuncArg,I=c.fieldDefinition,W=T?T.get("func"):null,Z={value:W,setValue:s.setFunc,config:o,field:u,operator:l,customProps:f,readonly:p,parentFuncs:a,isFuncArg:d,fieldDefinition:I,id:n,groupId:g},X=o.settings,G=X.showLabels,z=X.funcLabel,K=G?S.default.createElement("label",{className:"rule--label"},z):null;return S.default.createElement(N.Col,{key:"func",className:"rule--func"},K,S.default.createElement(D.default,Z))},s.renderArgLabel=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,T=o.label,p=s.props.config,a=u&&u.length==1&&u[0]=="const",n=!p.settings.showLabels&&(l=="boolean"||a)&&f;return n?S.default.createElement(N.Col,{className:"rule--func--arg-label"},T||c):null},s.renderArgLabelSep=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,T=s.props.config,p=u&&u.length==1&&u[0]=="const",a=!T.settings.showLabels&&(l=="boolean"||p)&&f;return a?S.default.createElement(N.Col,{className:"rule--func--arg-label-sep"},":"):null},s.renderArgVal=function(c,o,u){var l=s.props,f=l.config,T=l.field,p=l.operator,a=l.value,n=l.readonly,g=l.parentFuncs,d=l.id,I=l.groupId,W=a?a.getIn(["args",o]):null,Z=W?W.get("value"):void 0,X=u.valueSources.length==1?u.valueSources[0]:void 0,G=W?W.get("valueSrc")||X||"value":X,z={config:f,fieldFunc:c,fieldArg:o,leftField:T,operator:null,value:Z,valueSrc:G,setValue:s.setArgValue,setValueSrc:s.setArgValueSrc,funcKey:c,argKey:o,argDefinition:u,readonly:n,parentFuncs:g,id:d,groupId:I};return S.default.createElement(N.Col,{className:"rule--func--arg-value"},S.default.createElement(te,z))},s.renderArgSep=function(c,o,u,l){var f=l.renderSeps;return u?S.default.createElement(N.Col,{className:"rule--func--arg-sep"},f?f[u-1]:", "):null},s.renderBracketBefore=function(c){var o=c.renderBrackets;return S.default.createElement(N.Col,{key:"before_args",className:"rule--func--bracket-before"},o?o[0]:"(")},s.renderBracketAfter=function(c){var o=c.renderBrackets;return S.default.createElement(N.Col,{key:"after_args",className:"rule--func--bracket-after"},o?o[1]:")")},s.renderFuncArgs=function(){var c=s.meta,o=c.funcDefinition,u=c.funcKey;if(!u)return null;var l=o.args;return l?S.default.createElement(S.default.Fragment,null,s.renderBracketBefore(o),S.default.createElement(N.Col,{key:"args",className:"rule--func--args"},Object.keys(l).map(function(f,T){return S.default.createElement(N.Col,{key:"arg-".concat(f,"-").concat(T),className:"rule--func--arg"},s.renderArgSep(f,l[f],T,o),s.renderArgLabel(f,l[f]),s.renderArgLabelSep(f,l[f]),s.renderArgVal(u,f,l[f]))})),s.renderBracketAfter(o)):null},(0,w.useOnPropsChanged)((0,R.default)(s)),s.onPropsChanged(m),s}return(0,O.default)(P,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["config","field","operator","value"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.config,o=s.field,u=s.operator,l=s.value,f=l?l.get("func"):null,T=f?(0,F.getFuncConfig)(c,f):null;return{funcDefinition:T,funcKey:f}}},{key:"render",value:function(){return S.default.createElement(N.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),P}(S.PureComponent);i.default=_,_.propTypes={id:M.default.string,groupId:M.default.string,config:M.default.object.isRequired,field:M.default.string.isRequired,operator:M.default.string,customProps:M.default.object,value:M.default.object,setValue:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,fieldDefinition:M.default.object,isFuncArg:M.default.bool};var te=function(J){(0,E.default)(P,J);var k=x(P);function P(){var m;(0,C.default)(this,P);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return m=k.call.apply(k,[this].concat(c)),m.setValue=function(u,l,f){var T=m.props,p=T.setValue,a=T.argKey;p(a,l)},m.setValueSrc=function(u,l,f){var T=m.props,p=T.setValueSrc,a=T.argKey;p(a,l)},m}return(0,O.default)(P,[{key:"render",value:function(){var s=this.props,c=s.funcKey,o=s.argKey,u=s.parentFuncs;return S.default.createElement(U.default,(0,h.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,b.default)(u||[]),[[c,o]])}))}}]),P}(S.PureComponent);te.propTypes={funcKey:M.default.string.isRequired,argKey:M.default.string.isRequired,setValue:M.default.func.isRequired,setValueSrc:M.default.func.isRequired,readonly:M.default.bool,parentFuncs:M.default.array,id:M.default.string,groupId:M.default.string}},85578:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(92476)),b=r(e(86067)),C=r(e(85091)),O=r(e(80467)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=w(e(68404)),S=r(e(59160)),M=e(79746),D=r(e(65555)),F=r(e(76175)),U=r(e(74937)),N=e(9701);function $(te){if(typeof WeakMap!="function")return null;var J=new WeakMap,k=new WeakMap;return($=function(m){return m?k:J})(te)}function w(te,J){if(!J&&te&&te.__esModule)return te;if(te===null||y(te)!=="object"&&typeof te!="function")return{default:te};var k=$(J);if(k&&k.has(te))return k.get(te);var P={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in te)if(s!=="default"&&Object.prototype.hasOwnProperty.call(te,s)){var c=m?Object.getOwnPropertyDescriptor(te,s):null;c&&(c.get||c.set)?Object.defineProperty(P,s,c):P[s]=te[s]}return P.default=te,k&&k.set(te,P),P}function V(te,J){var k=Object.keys(te);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(te);J&&(P=P.filter(function(m){return Object.getOwnPropertyDescriptor(te,m).enumerable})),k.push.apply(k,P)}return k}function j(te){for(var J=1;J<arguments.length;J++){var k=arguments[J]!=null?arguments[J]:{};J%2?V(Object(k),!0).forEach(function(P){(0,h.default)(te,P,k[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(k)):V(Object(k)).forEach(function(P){Object.defineProperty(te,P,Object.getOwnPropertyDescriptor(k,P))})}return te}function x(te){var J=H();return function(){var P=(0,L.default)(te),m;if(J){var s=(0,L.default)(this).constructor;m=Reflect.construct(P,arguments,s)}else m=P.apply(this,arguments);return(0,E.default)(this,m)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(te){(0,R.default)(k,te);var J=x(k);function k(P){var m;return(0,b.default)(this,k),m=J.call(this,P),(0,N.useOnPropsChanged)((0,O.default)(m)),m.onPropsChanged(P),m}return(0,C.default)(k,[{key:"onPropsChanged",value:function(m){var s=this.props,c=["config","selectedField","selectedOperator"],o=!this.meta||c.map(function(u){return m[u]!==s[u]}).filter(function(u){return u}).length>0;o&&(this.meta=this.getMeta(m))}},{key:"getMeta",value:function(m){var s=m.config,c=m.selectedField,o=m.selectedOperator,u=(0,M.getFieldConfig)(s,c),l=u?.operators,f=(0,U.default)((0,F.default)(s.operators,function(X,G){return l?.indexOf(G)!==-1}),function(X,G){return(0,M.getOperatorConfig)(s,G,c)}),T=this.buildOptions(s,f,l),p=!!o,a=p?f[o]:null,n=a||{},g=this.props.config.settings.operatorPlaceholder,d=o,I=p?[d]:null,W=I,Z=n.label;return{placeholder:g,items:T,selectedKey:d,selectedKeys:I,selectedPath:W,selectedLabel:Z,selectedOpts:n,fieldConfig:u}}},{key:"buildOptions",value:function(m,s,c){return!s||!c?null:(0,D.default)(s).sort(function(o,u){return c.indexOf(o)-c.indexOf(u)}).map(function(o){var u=s[o],l=u.label;return{key:o,path:o,label:l}})}},{key:"render",value:function(){var m=this.props,s=m.config,c=m.customProps,o=m.setOperator,u=m.readonly,l=m.id,f=m.groupId,T=s.settings.renderOperator,p=j({id:l,groupId:f,config:s,customProps:c,readonly:u,setField:o},this.meta);return p.items?T(p):null}}]),k}(A.PureComponent);i.default=_,_.propTypes={id:S.default.string,groupId:S.default.string,config:S.default.object.isRequired,selectedField:S.default.string,selectedOperator:S.default.string,readonly:S.default.bool,setOperator:S.default.func.isRequired}},65971:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(19934)),b=r(e(86067)),C=r(e(85091)),O=r(e(72366)),R=r(e(64920)),E=r(e(39005)),L=F(e(68404)),A=r(e(59160)),S=e(79746),M=["factory"];function D(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,j=new WeakMap;return(D=function(H){return H?j:V})(w)}function F(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||y(w)!=="object"&&typeof w!="function")return{default:w};var j=D(V);if(j&&j.has(w))return j.get(w);var x={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var te=H?Object.getOwnPropertyDescriptor(w,_):null;te&&(te.get||te.set)?Object.defineProperty(x,_,te):x[_]=w[_]}return x.default=w,j&&j.set(w,x),x}function U(w){var V=N();return function(){var x=(0,E.default)(w),H;if(V){var _=(0,E.default)(this).constructor;H=Reflect.construct(x,arguments,_)}else H=x.apply(this,arguments);return(0,R.default)(this,H)}}function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(w){(0,O.default)(j,w);var V=U(j);function j(){return(0,b.default)(this,j),V.apply(this,arguments)}return(0,C.default)(j,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var H=(0,S.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof H.options>"u")return null;var _=H.options,te=_.factory,J=(0,h.default)(_,M),k=Object.assign({},J,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),P=te(k),m=this.props.selectedOperator;return L.default.createElement("div",{className:"rule--operator rule--operator--".concat(m.toUpperCase())},P)}}]),j}(L.PureComponent);i.default=$,$.propTypes={config:A.default.object.isRequired,operatorOptions:A.default.any.isRequired,selectedField:A.default.string.isRequired,selectedOperator:A.default.string.isRequired,readonly:A.default.bool,setOperatorOption:A.default.func.isRequired}},64078:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(86067)),b=r(e(85091)),C=r(e(72366)),O=r(e(64920)),R=r(e(39005)),E=M(e(68404)),L=r(e(85578)),A=e(48281);function S(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(S=function(j){return j?w:$})(N)}function M(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||y(N)!=="object"&&typeof N!="function")return{default:N};var w=S($);if(w&&w.has(N))return w.get(N);var V={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in N)if(x!=="default"&&Object.prototype.hasOwnProperty.call(N,x)){var H=j?Object.getOwnPropertyDescriptor(N,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=N[x]}return V.default=N,w&&w.set(N,V),V}function D(N){var $=F();return function(){var V=(0,R.default)(N),j;if($){var x=(0,R.default)(this).constructor;j=Reflect.construct(V,arguments,x)}else j=V.apply(this,arguments);return(0,O.default)(this,j)}}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(N){(0,C.default)(w,N);var $=D(w);function w(){return(0,h.default)(this,w),$.apply(this,arguments)}return(0,b.default)(w,[{key:"render",value:function(){var j=this.props,x=j.config,H=j.selectedField,_=j.selectedOperator,te=j.setOperator,J=j.selectedFieldPartsLabels,k=j.showOperator,P=j.showOperatorLabel,m=j.selectedFieldWidgetConfig,s=j.readonly,c=j.id,o=j.groupId,u=k&&E.default.createElement(A.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},x.settings.showLabels&&E.default.createElement("label",{className:"rule--label"},x.settings.operatorLabel),E.default.createElement(L.default,{key:"operator",config:x,selectedField:H,selectedOperator:_,setOperator:te,readonly:s,id:c,groupId:o})),l=P&&E.default.createElement(A.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},E.default.createElement("div",{className:"rule--operator"},x.settings.showLabels?E.default.createElement("label",{className:"rule--label"},"\xA0"):null,E.default.createElement("span",null,m.operatorInlineLabel)));return[u,l]}}]),w}(E.PureComponent);i.default=U},71162:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(92476)),b=r(e(86067)),C=r(e(85091)),O=r(e(80467)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=j(e(68404)),S=r(e(59160)),M=e(79746),D=e(62413),F=e(60399),U=e(9701),N=r(e(4161)),$=r(e(65555)),w=r(e(29521));function V(k){if(typeof WeakMap!="function")return null;var P=new WeakMap,m=new WeakMap;return(V=function(c){return c?m:P})(k)}function j(k,P){if(!P&&k&&k.__esModule)return k;if(k===null||y(k)!=="object"&&typeof k!="function")return{default:k};var m=V(P);if(m&&m.has(k))return m.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,m&&m.set(k,s),s}function x(k,P){var m=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);P&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),m.push.apply(m,s)}return m}function H(k){for(var P=1;P<arguments.length;P++){var m=arguments[P]!=null?arguments[P]:{};P%2?x(Object(m),!0).forEach(function(s){(0,h.default)(k,s,m[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(m)):x(Object(m)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(m,s))})}return k}function _(k){var P=te();return function(){var s=(0,L.default)(k),c;if(P){var o=(0,L.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,E.default)(this,c)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(k){(0,R.default)(m,k);var P=_(m);function m(s){var c;return(0,b.default)(this,m),c=P.call(this,s),(0,U.useOnPropsChanged)((0,O.default)(c)),c.onPropsChanged(s),c}return(0,C.default)(m,[{key:"onPropsChanged",value:function(c){var o=this.props,u=["config","field","operator","isFuncArg","parentField"],l=["config","field","operator","value","placeholder","isFuncArg","parentField"],f=!this.items||u.map(function(p){return c[p]!==o[p]}).filter(function(p){return p}).length>0,T=!this.meta||l.map(function(p){return c[p]!==o[p]}).filter(function(p){return p}).length>0;f&&(this.items=this.getItems(c)),T&&(this.meta=this.getMeta(c))}},{key:"getItems",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.parentField,T=c.isFuncArg,p=c.fieldDefinition,a=o.settings.canCompareFieldWithField,n=o.settings.fieldSeparator,g=typeof f=="string"?f.split(n):f,d=f?(0,M.getFieldConfig)(o,f):null,I=f?d&&d.subfields:o.fields,W=this.filterFields(o,I,u,f,g,l,a,T,p),Z=this.buildOptions(g,o,W,g);return Z}},{key:"getMeta",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.value,T=c.placeholder,p=c.isFuncArg,a=c.parentField,n=o.settings,g=n.fieldPlaceholder,d=n.fieldSeparatorDisplay,I=f,W=!!f,Z=(0,M.getFieldConfig)(o,u),X=Z.widgets.field,G=X&&X.widgetProps||{},z=W?null:p&&T||G.valuePlaceholder||g,K=W?(0,M.getFieldConfig)(o,I):null,Y=K||{},re=(0,D.getFieldPath)(I,o),ne=(0,D.getFieldPath)(I,o,!0),ue=this.getFieldLabel(K,I,o),ae=(0,D.getFieldPathLabels)(I,o),ve=ae?ae.join(d):null;(ve==ue||a)&&(ve=null);var se=Y.label2;return{placeholder:z,selectedKey:I,selectedKeys:re,selectedPath:ne,selectedLabel:ue,selectedOpts:Y,selectedAltLabel:se,selectedFullLabel:ve}}},{key:"filterFields",value:function(c,o,u,l,f,T,p,a,n){o=(0,w.default)(o);var g=c.settings.fieldSeparator,d=(0,M.getFieldConfig)(c,u),I,W=(0,D.getWidgetForFieldOp)(c,u,T,"value");if(a&&n)I=n.type;else if(W){var Z=c.widgets[W],X=Z.type;I=X}else I=d.type;function G(z,K){for(var Y in z){var re=z[Y].subfields,ne=(K||[]).concat(Y),ue=ne.join(g),ae=(0,M.getFieldConfig)(c,ue);if(!ae)delete z[Y];else if(ae.type=="!struct"||ae.type=="!group")G(re,ne)==0&&delete z[Y];else{var ve=ae.type==I&&(a?!0:ue!=u),se=p||c.settings.canCompareFieldWithField;se&&(ve=ve&&se(u,d,ue,ae,T)),ve||delete z[Y]}}return(0,$.default)(z).length}return G(o,f||[]),o}},{key:"buildOptions",value:function(c,o,u){var l=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var p=o.settings,a=p.fieldSeparator,n=p.fieldSeparatorDisplay,g=f?f.join(a)+a:"";return(0,$.default)(u).map(function(d){var I=u[d],W=l.getFieldLabel(I,d,o),Z=(0,D.getFieldPathLabels)(d,o),X=Z.join(n);(X==W||c)&&(X=null);var G=I.label2,z=I.tooltip,K=(f||[]).concat(d);if(!I.hideForCompare)return I.type=="!struct"||I.type=="!group"?{key:d,path:g+d,label:W,fullLabel:X,altLabel:G,tooltip:z,items:l.buildOptions(c,o,I.subfields,K,W)}:{key:d,path:g+d,label:W,fullLabel:X,altLabel:G,tooltip:z,grouplabel:T}}).filter(function(d){return!!d})}},{key:"getFieldLabel",value:function(c,o,u){if(!o)return null;var l=u.settings.fieldSeparator,f=u.settings.maxLabelsLength,T=Array.isArray(o)?o:o.split(l),p=c.label||(0,N.default)(T);return p=(0,F.truncateString)(p,f),p}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.customProps,l=c.setValue,f=c.readonly,T=c.id,p=c.groupId,a=o.settings.renderField,n=H({config:o,customProps:u,setField:l,readonly:f,items:this.items,id:T,groupId:p},this.meta);return a(n)}}]),m}(A.PureComponent);i.default=J,J.propTypes={id:S.default.string,groupId:S.default.string,setValue:S.default.func.isRequired,config:S.default.object.isRequired,field:S.default.string.isRequired,value:S.default.string,operator:S.default.string,customProps:S.default.object,readonly:S.default.bool,parentField:S.default.string,fieldDefinition:S.default.object,isFuncArg:S.default.bool}},33753:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(68307)),b=r(e(86067)),C=r(e(85091)),O=r(e(80467)),R=r(e(72366)),E=r(e(64920)),L=r(e(39005)),A=H(e(68404)),S=r(e(59160)),M=r(e(31536)),D=e(79746),F=e(62413),U=e(60399),N=e(9701),$=r(e(7275)),w=r(e(40745)),V=r(e(26014)),j=e(48281);function x(P){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(x=function(o){return o?s:m})(P)}function H(P,m){if(!m&&P&&P.__esModule)return P;if(P===null||y(P)!=="object"&&typeof P!="function")return{default:P};var s=x(m);if(s&&s.has(P))return s.get(P);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in P)if(u!=="default"&&Object.prototype.hasOwnProperty.call(P,u)){var l=o?Object.getOwnPropertyDescriptor(P,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=P[u]}return c.default=P,s&&s.set(P,c),c}function _(P){var m=te();return function(){var c=(0,L.default)(P),o;if(m){var u=(0,L.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,E.default)(this,o)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J={cardinality:1},k=function(P){(0,R.default)(s,P);var m=_(s);function s(c){var o;return(0,b.default)(this,s),o=m.call(this,c),o._setValue=function(u,l,f,T,p,a){if(u&&Array.isArray(T)){var n=[o.props.value.get(0),o.props.value.get(1)];n[0]!=T[0]&&o.props.setValue(0,T[0],f,p,a),n[1]!=T[1]&&o.props.setValue(1,T[1],f,p,a)}else o.props.setValue(l,T,f,p,a)},o._onChangeValueSrc=function(u,l){o.props.setValueSrc(u,l)},o.renderWidget=function(u,l,f){var T=f.config,p=f.isFuncArg,a=f.leftField,n=f.operator,g=f.value,d=f.valueError,I=f.readonly,W=f.parentField,Z=f.parentFuncs,X=f.id,G=f.groupId,z=T.settings,K=l.widgets,Y=l.iValues,re=l.aField,ne=p?Y:g,ue=p?a:re,ae=K[u],ve=ae.valueSrc,se=ae.valueLabel,ge=z.showLabels?A.default.createElement("label",{className:"rule--label"},se.label):null;return A.default.createElement("div",{key:"widget-"+ue+"-"+u,className:"widget--widget"},ve=="func"?null:ge,A.default.createElement(V.default,(0,h.default)({id:X,groupId:G,valueSrc:ve,delta:u,value:ne,valueError:d,isFuncArg:p},(0,$.default)(l,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,$.default)(K[u],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:T,field:ue,parentField:W,parentFuncs:Z,operator:n,readonly:I})))},o.renderValueSources=function(u,l,f){var T=f.config,p=f.isFuncArg,a=f.leftField,n=f.operator,g=f.readonly,d=T.settings,I=l.valueSources,W=l.widgets,Z=l.aField,X=p?a:Z,G=W[u],z=G.valueSrc,K=G.setValueSrcHandler,Y=d.valueSourcesInfo,re=d.renderValueSources,ne=I.map(function(ae){return[ae,{label:Y[ae].label}]}),ue=d.showLabels?A.default.createElement("label",{className:"rule--label"},"\xA0"):null;return I.length>1&&!g&&A.default.createElement("div",{key:"valuesrc-"+X+"-"+u,className:"widget--valuesrc"},ue,A.default.createElement(re,{key:"valuesrc-"+u,delta:u,valueSources:ne,valueSrc:z,config:T,field:X,operator:n,setValueSrc:K,readonly:g,title:d.valueSourcesPopupTitle}))},o.renderSep=function(u,l,f){var T=f.config,p=l.widgets,a=T.settings,n=p[u].sepText,g=a.showLabels?A.default.createElement("label",{className:"rule--label"},"\xA0"):null;return n&&A.default.createElement("div",{key:"widget-separators-"+u,className:"widget--sep"},g,A.default.createElement("span",null,n))},o.renderWidgetDelta=function(u){var l=o.renderSep(u,o.meta,o.props),f=o.renderValueSources(u,o.meta,o.props),T=o.renderWidget(u,o.meta,o.props);return[l,f,T]},(0,N.useOnPropsChanged)((0,O.default)(o)),o.onPropsChanged(c),o}return(0,C.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"],f=!this.meta||l.map(function(T){return o[T]!==u[T]||T=="isFuncArg"&&o.isFuncArg&&o.value!==u.value}).filter(function(T){return T}).length>0;f&&(this.meta=this.getMeta(o))}},{key:"getMeta",value:function(o){var u=this,l=o.config,f=o.field,T=o.fieldFunc,p=o.fieldArg,a=o.operator,n=o.valueSrc,g=o.value,d=o.isForRuleGruop,I=o.isCaseValue,W=o.isFuncArg,Z=o.leftField,X=o.asyncListValues,G=W?{func:T,arg:p}:f,z=n,K=g;(W||d||I)&&(z=w.default.List([n]),K=w.default.List([g]));var Y=(0,D.getFieldConfig)(l,G),re=(0,F.getWidgetForFieldOp)(l,G,a),ne=(0,F.getWidgetsForFieldOp)(l,G,a),ue=W?J:(0,D.getOperatorConfig)(l,a,G);if((Y==null||ue==null)&&!I)return null;var ae=ue?.isSpecialRange,ve=ae&&(z.get(0)=="field"||z.get(1)=="field"),se=ae&&!ve,ge=se?1:(0,U.defaultValue)(ue?.cardinality,1);if(ge===0)return null;var ye=(0,F.getValueSourcesForFieldOp)(l,G,a,Y,W?Z:null),Oe=(0,M.default)(0,ge).map(function(Se){var ce,Ne=z.get(Se)||null,we=(0,F.getWidgetForFieldOp)(l,G,a,Ne),je=(0,D.getFieldWidgetConfig)(l,G,a,we,Ne);ve&&(we=je.singleWidget,je=(0,D.getFieldWidgetConfig)(l,G,a,we,Ne));var Ke=(ce=je)===null||ce===void 0?void 0:ce.type,Ye=(0,F.getValueLabel)(l,G,a,Se,Ne,se),ke=(0,F.getValueLabel)(l,G,a,Se,null,se),at=ue!=null&&ue.textSeparators?ue?.textSeparators[Se]:null,He=u._onChangeValueSrc.bind(u,Se),fe=null,Ee=null;ae&&(fe=[(0,F.getValueLabel)(l,G,a,0),(0,F.getValueLabel)(l,G,a,1)],fe={placeholder:[fe[0].placeholder,fe[1].placeholder],label:[fe[0].label,fe[1].label]},Ee=ue?.textSeparators);var Ce=u._setValue.bind(u,ae,Se,Ke);return{valueSrc:Ne,valueLabel:Ye,widget:we,sepText:at,setValueSrcHandler:He,widgetDefinition:je,widgetValueLabel:ke,valueLabels:fe,textSeparators:Ee,setValueHandler:Ce}});return{defaultWidget:re,fieldDefinition:Y,operatorDefinition:ue,isSpecialRange:se,cardinality:ge,valueSources:ye,widgets:Oe,iValues:K,aField:G,asyncListValues:X}}},{key:"render",value:function(){if(!this.meta)return null;var o=this.meta,u=o.defaultWidget,l=o.cardinality;if(!u)return null;var f=u;return A.default.createElement(j.Col,{className:"rule--widget rule--widget--".concat(f.toUpperCase()),key:"widget-col-"+f},(0,M.default)(0,l).map(this.renderWidgetDelta))}}]),s}(A.PureComponent);i.default=k,k.propTypes={config:S.default.object.isRequired,value:S.default.any,valueSrc:S.default.any,valueError:S.default.any,field:S.default.string,operator:S.default.string,readonly:S.default.bool,asyncListValues:S.default.array,id:S.default.string,groupId:S.default.string,setValue:S.default.func,setValueSrc:S.default.func,isFuncArg:S.default.bool,fieldFunc:S.default.string,fieldArg:S.default.string,leftField:S.default.string,isForRuleGruop:S.default.bool,parentField:S.default.string,parentFuncs:S.default.array,isCaseValue:S.default.bool}},26014:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(19934)),h=r(e(68404)),b=e(60399),C=["factory"],O=function(E){var L=E.delta,A=E.isFuncArg,S=E.valueSrc,M=E.value,D=E.valueError,F=E.asyncListValues,U=E.isSpecialRange,N=E.fieldDefinition,$=E.widget,w=E.widgetDefinition,V=E.widgetValueLabel,j=E.valueLabels,x=E.textSeparators,H=E.setValueHandler,_=E.config,te=E.field,J=E.operator,k=E.readonly,P=E.parentField,m=E.parentFuncs,s=E.id,c=E.groupId,o=w.factory,u=(0,y.default)(w,C),l=A&&N.valueSources&&N.valueSources.length==1&&N.valueSources[0]=="const",f=N.defaultValue;if(!o)return"?";var T=U?[M.get(0),M.get(1)]:M?M.get(L):void 0,p=D&&(U?[D.get(0),D.get(1)]:D.get(L))||null;U&&T[0]===void 0&&T[1]===void 0&&(T=void 0);var a=N||{},n=a.fieldSettings,g=Object.assign({},u,n,{config:_,field:te,parentField:P,parentFuncs:m,fieldDefinition:N,operator:J,delta:L,isSpecialRange:U,isFuncArg:A,value:T,valueError:p,label:V.label,placeholder:V.placeholder,placeholders:j?j.placeholder:null,textSeparators:x,setValue:H,readonly:k,asyncListValues:F,id:s,groupId:c});return $=="field",l&&f?typeof f=="boolean"?f?g.labelYes||"YES":g.labelNo||"NO":n.listValues?Array.isArray(f)?f.map(function(d){return(0,b.getTitleInListValues)(n.listValues,d)||d}).join(", "):(0,b.getTitleInListValues)(n.listValues,f)||f:""+f:o(g)};i.default=O},48281:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.dummyFn=i.DragIcon=i.ConfirmFn=i.Col=void 0;var y=r(e(68307)),h=r(e(19934)),b=r(e(68404)),C=["children"],O=function(S){var M=S.children,D=(0,h.default)(S,C);return b.default.createElement("div",D,M)};i.Col=O;var R=function(){};i.dummyFn=R;var E=function(){return b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},b.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),b.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};i.DragIcon=E;var L=function(S){return function(M){var D=M.config.settings.useConfirm,F=D?D():null;return b.default.createElement(S,(0,y.default)({},M,{confirmFn:F}))}};i.ConfirmFn=L},7614:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0});var y={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(i,"FuncWidget",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"ValueFieldWidget",{enumerable:!0,get:function(){return h.default}});var h=r(e(71162)),b=r(e(31404)),C=e(64116);Object.keys(C).forEach(function(O){O==="default"||O==="__esModule"||Object.prototype.hasOwnProperty.call(y,O)||O in i&&i[O]===C[O]||Object.defineProperty(i,O,{enumerable:!0,get:function(){return C[O]}})})},31755:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68404)),h=function(C){var O=C.type,R=C.label,E=C.onClick,L=C.readonly,A=C.config,S={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},M=R||S[O];return y.default.createElement("button",{onClick:E,type:"button",disabled:L},M)};i.default=h},7229:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68404)),h=function(C){var O=C.children,R=C.config;return y.default.createElement(y.default.Fragment,null,O)};i.default=h},69270:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68404)),h=function(C){var O=C.id,R=C.not,E=C.setNot,L=C.conjunctionOptions,A=C.setConjunction,S=C.disabled,M=C.readonly,D=C.config,F=C.showNot,U=C.notLabel,N=Object.keys(L).length,$=S,w=D.settings.forceShowConj,V=w||N>1&&!$,j=function(){return Object.keys(L).map(function(J){var k=L[J],P=k.id,m=k.name,s=k.label,c=k.checked,o=A.isDummyFn?"__dummy":"";return(M||S)&&!c?null:[y.default.createElement("input",{key:P+o,type:"radio",id:P+o,name:m+o,checked:c,disabled:M||S,value:J,onChange:H}),y.default.createElement("label",{key:P+o+"label",htmlFor:P+o},s)]})},x=function(){var J="not";return[y.default.createElement("input",{key:O+J,type:"checkbox",id:O+J,checked:R,disabled:M,onChange:_}),y.default.createElement("label",{key:O+J+"label",htmlFor:O+J},U||"NOT")]},H=function(J){return A(J.target.value)},_=function(J){return E(J.target.checked)};return[F&&x(),V&&j()]};i.default=h},56778:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68404)),h=function(C){var O=C.items,R=C.setField,E=C.selectedKey,L=C.readonly,A=function D(F){return F.map(function(U){var N=U.items,$=U.path,w=U.label,V=U.disabled;return N?y.default.createElement("optgroup",{disabled:V,key:$,label:w},D(N)):y.default.createElement("option",{disabled:V,key:$,value:$},w)})},S=function(F){return R(F.target.value)},M=E!=null;return y.default.createElement("select",{onChange:S,value:M?E:"",disabled:L},!M&&y.default.createElement("option",{disabled:!0,value:""}),A(O))};i.default=h},59484:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68404)),h=function(C){var O=C.value,R=C.setValue,E=C.label,L=C.id,A=C.config,S=C.type,M=function(U){return R(U.target.checked)},D=S;return[y.default.createElement("input",{key:L+D,type:"checkbox",id:L+D,checked:!!O,onChange:M}),y.default.createElement("label",{key:L+D+"label",htmlFor:L+D},E)]};i.default=h},31025:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(47452)),h=r(e(68404)),b=function(O){var R=O.config,E=O.valueSources,L=O.valueSrc,A=O.title,S=O.setValueSrc,M=O.readonly,D=function(N){return N.map(function($){var w=(0,y.default)($,2),V=w[0],j=w[1];return h.default.createElement("option",{key:V,value:V},j.label)})},F=function(N){return S(N.target.value)};return h.default.createElement("select",{onChange:F,value:L,disabled:M},D(E))};i.default=b},53937:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(y){var h=y.onOk,b=y.okText,C=y.cancelText,O=y.title;confirm(O)&&h()};i.default=e},64116:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"VanillaBooleanWidget",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(i,"VanillaButton",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"VanillaButtonGroup",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(i,"VanillaConjs",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(i,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(i,"VanillaDateWidget",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(i,"VanillaFieldSelect",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(i,"VanillaNumberWidget",{enumerable:!0,get:function(){return S.default}}),i.VanillaProvider=void 0,Object.defineProperty(i,"VanillaSelectWidget",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"VanillaSliderWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"VanillaSwitch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(i,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"VanillaTextWidget",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"VanillaTimeWidget",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(i,"VanillaValueSources",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(i,"vanillaConfirm",{enumerable:!0,get:function(){return V.default}});var y=r(e(68404)),h=r(e(14381)),b=r(e(31970)),C=r(e(624)),O=r(e(5567)),R=r(e(97648)),E=r(e(9726)),L=r(e(96346)),A=r(e(69462)),S=r(e(63846)),M=r(e(36530)),D=r(e(56778)),F=r(e(69270)),U=r(e(31755)),N=r(e(7229)),$=r(e(31025)),w=r(e(59484)),V=r(e(53937)),j=function(H){var _=H.config,te=H.children;return te};i.VanillaProvider=j},14381:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=r(e(76833)),C=function(R){var E=R.value,L=R.setValue,A=R.config,S=R.labelYes,M=R.labelNo,D=R.readonly,F=R.customProps,U=F===void 0?{}:F,N=U.radioYes||{},$=U.radioNo||{},w=function(_){return L(_.target.checked)},V=function(_){return L(_.target.value=="true")},j=(0,b.default)(),x=(0,b.default)();return h.default.createElement(h.default.Fragment,null,h.default.createElement("input",(0,y.default)({key:j,type:"radio",id:j,value:!0,checked:!!E,disabled:D,onChange:V},N)),h.default.createElement("label",{style:{display:"inline"},key:j+"label",htmlFor:j},S),h.default.createElement("input",(0,y.default)({key:x,type:"radio",id:x,value:!1,checked:!E,disabled:D,onChange:V},$)),h.default.createElement("label",{style:{display:"inline"},key:x+"label",htmlFor:x},M))};i.default=C},5567:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=r(e(36365)),C=function(R){var E=R.value,L=R.setValue,A=R.config,S=R.valueFormat,M=R.readonly,D=R.customProps,F=function(N){var $=N.target.value;$==""&&($=void 0),L($)};return h.default.createElement("input",(0,y.default)({type:"date",value:E||"",disabled:M,onChange:F},D))};i.default=C},9726:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=r(e(36365)),C=function(R){var E=R.value,L=R.setValue,A=R.config,S=R.valueFormat,M=R.use12Hours,D=R.readonly,F=R.customProps,U=function(w){var V=w.target.value;V==""?V=void 0:V=(0,b.default)(new Date(V)).format(S),L(V)},N=E;return E?N=(0,b.default)(E).format("YYYY-MM-DDTHH:mm"):N="",h.default.createElement("input",(0,y.default)({type:"datetime-local",value:N,disabled:D,onChange:U},F))};i.default=C},96346:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=e(60399),C=r(e(50234)),O=function(E){var L=E.listValues,A=E.value,S=E.setValue,M=E.allowCustomValues,D=E.readonly,F=E.customProps,U=function(){return(0,b.mapListValues)(L,function(V){var j=V.title,x=V.value;return h.default.createElement("option",{key:x,value:x},j)})},N=function(V){for(var j=[],x=V.options,H=0;H<x.length;H++){var _=x[H];_.selected&&j.push(_.value)}return j.length||(j=void 0),j},$=function(V){return S(N(V.target))};return h.default.createElement("select",(0,y.default)({multiple:!0,onChange:$,value:A,disabled:D},(0,C.default)(F,["showSearch","input","showCheckboxes"])),U())};i.default=O},63846:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=function(O){var R=O.value,E=O.setValue,L=O.config,A=O.readonly,S=O.min,M=O.max,D=O.step,F=O.placeholder,U=O.customProps,N=function(V){var j=V.target.value;j===""||j===null?j=void 0:j=Number(j),E(j)},$=R??"";return h.default.createElement("input",(0,y.default)({type:"number",value:$,placeholder:F,disabled:A,min:S,max:M,step:D,onChange:N},U))};i.default=b},69462:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=e(60399),C=r(e(50234)),O=function(E){var L=E.listValues,A=E.value,S=E.setValue,M=E.allowCustomValues,D=E.readonly,F=E.customProps,U=function(){return(0,b.mapListValues)(L,function(V){var j=V.title,x=V.value;return h.default.createElement("option",{key:x,value:x},j)})},N=function(V){return S(V.target.value)},$=A!=null;return h.default.createElement("select",(0,y.default)({onChange:N,value:$?A:"",disabled:D},(0,C.default)(F,["showSearch","input"])),!$&&h.default.createElement("option",{disabled:!0,value:""}),U())};i.default=O},36530:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=function(O){var R=O.value,E=O.setValue,L=O.config,A=O.readonly,S=O.min,M=O.max,D=O.step,F=O.placeholder,U=O.customProps,N=U===void 0?{}:U,$=N.input||{},w=N.slider||N,V=function(H){var _=H.target.value;_===""||_===null?_=void 0:_=Number(_),E(_)},j=R??"";return[h.default.createElement("input",(0,y.default)({key:"number",type:"number",value:j,placeholder:F,disabled:A,min:S,max:M,step:D,onChange:V},$)),h.default.createElement("input",(0,y.default)({key:"range",type:"range",value:j,disabled:A,min:S,max:M,step:D,onChange:V},w))]};i.default=b},31970:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=function(O){var R=O.value,E=O.setValue,L=O.config,A=O.readonly,S=O.placeholder,M=O.maxLength,D=O.customProps,F=function($){var w=$.target.value;w===""&&(w=void 0),E(w)},U=R||"";return h.default.createElement("input",(0,y.default)({type:"text",value:U,placeholder:S,disabled:A,onChange:F,maxLength:M},D))};i.default=b},624:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=function(O){var R=O.value,E=O.setValue,L=O.config,A=O.readonly,S=O.placeholder,M=O.maxLength,D=O.maxRows,F=O.fullWidth,U=O.customProps,N=function(V){var j=V.target.value;j===""&&(j=void 0),E(j)},$=R||"";return h.default.createElement("textarea",(0,y.default)({value:$,placeholder:S,disabled:A,onChange:N,maxLength:M,style:{width:F?"100%":void 0}},U))};i.default=b},97648:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68307)),h=r(e(68404)),b=function(O){var R=O.value,E=O.setValue,L=O.config,A=O.valueFormat,S=O.use12Hours,M=O.readonly,D=O.customProps,F=function(N){var $=N.target.value;$==""&&($=void 0),E($)};return h.default.createElement("input",(0,y.default)({type:"time",value:R||"",disabled:M,onChange:F},D))};i.default=b},20896:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.stringifyForDisplay=i.mongoFormatOp2=i.mongoFormatOp1=i.default=void 0;var h=r(e(92476)),b=r(e(68404)),C=M(e(7614)),O=M(e(22369)),R=e(1901),E=e(60399),L=r(e(36365)),A=e(42009);function S(a){if(typeof WeakMap!="function")return null;var n=new WeakMap,g=new WeakMap;return(S=function(I){return I?g:n})(a)}function M(a,n){if(!n&&a&&a.__esModule)return a;if(a===null||y(a)!=="object"&&typeof a!="function")return{default:a};var g=S(n);if(g&&g.has(a))return g.get(a);var d={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in a)if(W!=="default"&&Object.prototype.hasOwnProperty.call(a,W)){var Z=I?Object.getOwnPropertyDescriptor(a,W):null;Z&&(Z.get||Z.set)?Object.defineProperty(d,W,Z):d[W]=a[W]}return d.default=a,g&&g.set(a,d),d}function D(a,n){var g=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);n&&(d=d.filter(function(I){return Object.getOwnPropertyDescriptor(a,I).enumerable})),g.push.apply(g,d)}return g}function F(a){for(var n=1;n<arguments.length;n++){var g=arguments[n]!=null?arguments[n]:{};n%2?D(Object(g),!0).forEach(function(d){(0,h.default)(a,d,g[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(g)):D(Object(g)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(g,d))})}return a}var U=C.VanillaBooleanWidget,N=C.VanillaTextWidget,$=C.VanillaTextAreaWidget,w=C.VanillaDateWidget,V=C.VanillaTimeWidget,j=C.VanillaDateTimeWidget,x=C.VanillaMultiSelectWidget,H=C.VanillaSelectWidget,_=C.VanillaNumberWidget,te=C.VanillaSliderWidget,J=C.ValueFieldWidget,k=C.FuncWidget,P=O.ProximityOperator,m={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(n,g,d,I){return n.size>1?(d?"NOT ":"")+"("+n.join(" "+(I?"AND":"&&")+" ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},sqlFormatConj:function(n,g,d){return n.size>1?(d?"NOT ":"")+"("+n.join(" AND ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},spelFormatConj:function(n,g,d,I){return d&&(I=!1),n.size>1?(d?"!":"")+(I?"":"(")+n.join(" && ")+(I?"":")"):(d?"!(":"")+n.first()+(d?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(n,g,d,I){return n.size>1?(d?"NOT ":"")+"("+n.join(" "+(I?"OR":"||")+" ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},sqlFormatConj:function(n,g,d){return n.size>1?(d?"NOT ":"")+"("+n.join(" OR ")+")":(d?"NOT (":"")+n.first()+(d?")":"")},spelFormatConj:function(n,g,d,I){return d&&(I=!1),n.size>1?(d?"!":"")+(I?"":"(")+n.join(" || ")+(I?"":")"):(d?"!(":"")+n.first()+(d?")":"")}}},s=function(n,g,d,I,W,Z,X,G,z,K,Y,re){var ne=typeof I=="string"&&!I.startsWith("$")?"$"+I:I,ue=g(Z,re);if(ue!==void 0)return d?!X&&(!n||n=="$eq")?(0,h.default)({},I,{$ne:ue}):X?{$not:(0,h.default)({},n,[ne,ue])}:(0,h.default)({},I,{$not:(0,h.default)({},n,ue)}):!X&&(!n||n=="$eq")?(0,h.default)({},I,ue):X?(0,h.default)({},n,[ne,ue]):(0,h.default)({},I,(0,h.default)({},n,ue))};i.mongoFormatOp1=s;var c=function(n,g,d,I,W,Z,X,G,z,K,Y){var re=typeof d=="string"&&!d.startsWith("$")?"$"+d:d;if(g){var ne;return Z?{$not:{$and:[(0,h.default)({},n[0],[re,W[0]]),(0,h.default)({},n[1],[re,W[1]])]}}:(0,h.default)({},d,{$not:(ne={},(0,h.default)(ne,n[0],W[0]),(0,h.default)(ne,n[1],W[1]),ne)})}else{var ue;return Z?{$and:[(0,h.default)({},n[0],[re,W[0]]),(0,h.default)({},n[1],[re,W[1]])]}:(0,h.default)({},d,(ue={},(0,h.default)(ue,n[0],W[0]),(0,h.default)(ue,n[1],W[1]),ue))}};i.mongoFormatOp2=c;var o={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(n,g,d,I,W,Z,X,G,z){var K=G?"=":Z.label;return W=="boolean"&&G?d=="No"?"NOT ".concat(n):"".concat(n):"".concat(n," ").concat(K," ").concat(d)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(n,g,d,I,W,Z,X,G,z){return W=="boolean"&&G?d=="No"?"".concat(n):"NOT ".concat(n):"".concat(n," ").concat(Z.label," ").concat(d)},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:s.bind(null,"$lt",function(a){return a},!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:s.bind(null,"$lte",function(a){return a},!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:s.bind(null,"$gt",function(a){return a},!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:s.bind(null,"$gte",function(a){return a},!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,E.escapeRegExp)(a):void 0},!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,E.escapeRegExp)(a):void 0},!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?"^"+(0,E.escapeRegExp)(a):void 0},!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,E.escapeRegExp)(a)+"$":void 0},!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(n,g,d,I,W,Z,X,G){var z=d.first(),K=d.get(1);return G?"".concat(n," BETWEEN ").concat(z," AND ").concat(K):"".concat(n," >= ").concat(z," && ").concat(n," <= ").concat(K)},spelFormatOp:function(n,g,d,I,W,Z,X,G){var z=d[0],K=d[1];return"".concat(n," >= ").concat(z," && ").concat(n," <= ").concat(K)},mongoFormatOp:c.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null},elasticSearchQueryType:function(n){return n==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(n,g,d,I,W,Z,X,G){var z=d.first(),K=d.get(1);return G?"".concat(n," NOT BETWEEN ").concat(z," AND ").concat(K):"(".concat(n," < ").concat(z," || ").concat(n," > ").concat(K,")")},spelFormatOp:function(n,g,d,I,W,Z,X,G){var z=d[0],K=d[1];return"(".concat(n," < ").concat(z," || ").concat(n," > ").concat(K,")")},mongoFormatOp:c.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(n,g,d,I,W,Z,X,G){return G?"".concat(n," IS EMPTY"):"!".concat(n)},sqlFormatOp:function(n,g,d,I,W,Z,X,G){var z=(0,R.sqlEmptyValue)(G);return"COALESCE(".concat(n,", ").concat(z,") = ").concat(z)},spelFormatOp:function(n,g,d,I,W,Z,X,G){return"".concat(n," <= ''")},mongoFormatOp:s.bind(null,"$in",function(a,n){return[(0,R.mongoEmptyValue)(n),null]},!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(n,g,d,I,W,Z,X,G){return G?"".concat(n," IS NOT EMPTY"):"!!".concat(n)},sqlFormatOp:function(n,g,d,I,W,Z,X,G){var z=(0,R.sqlEmptyValue)(G);return"COALESCE(".concat(n,", ").concat(z,") <> ").concat(z)},spelFormatOp:function(n,g,d,I,W,Z,X,G){return"".concat(n," > ''")},mongoFormatOp:s.bind(null,"$nin",function(a,n){return[(0,R.mongoEmptyValue)(n),null]},!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(n,g,d,I,W,Z,X,G){return G?"".concat(n," IS NULL"):"!".concat(n)},spelFormatOp:function(n,g,d,I,W,Z,X,G){return"".concat(n," == null")},mongoFormatOp:s.bind(null,"$eq",function(a){return null},!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(n,g,d,I,W,Z,X,G){return G?"".concat(n," IS NOT NULL"):"!!".concat(n)},spelFormatOp:function(n,g,d,I,W,Z,X,G){return"".concat(n," != null")},mongoFormatOp:s.bind(null,"$ne",function(a){return null},!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(n,g,d,I,W,Z,X,G){var z=G?"=":"==";return"".concat(n," ").concat(z," ").concat(d)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,g,d,I,W,Z,X,G){return"".concat(n," != ").concat(d)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(n,g,d,I,W,Z,X,G){return I=="value"?"".concat(n," IN (").concat(d.join(", "),")"):"".concat(n," IN (").concat(d,")")},sqlFormatOp:function(n,g,d,I,W,Z,X,G){if(I=="value")return"".concat(n," IN (").concat(d.join(", "),")")},spelOp:"$contains",mongoFormatOp:s.bind(null,"$in",function(a){return a},!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(n,g,d,I,W,Z,X,G){return I=="value"?"".concat(n," NOT IN (").concat(d.join(", "),")"):"".concat(n," NOT IN (").concat(d,")")},sqlFormatOp:function(n,g,d,I,W,Z,X,G){if(I=="value")return"".concat(n," NOT IN (").concat(d.join(", "),")")},mongoFormatOp:s.bind(null,"$nin",function(a){return a},!1),reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(n,g,d,I,W,Z,X,G){return I=="value"?"".concat(n," CONTAINS [").concat(d.join(", "),"]"):"".concat(n," CONTAINS ").concat(d)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(n,g,d){return{some:[n,{in:[{var:""},d]}]}},spelOp:"CollectionUtils.containsAny()",elasticSearchQueryType:"term",mongoFormatOp:s.bind(null,"$in",function(a){return a},!1)},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(n,g,d,I,W,Z,X,G){return I=="value"?"".concat(n," NOT CONTAINS [").concat(d.join(", "),"]"):"".concat(n," NOT CONTAINS ").concat(d)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(n,g,d,I,W,Z,X,G){var z=G?"=":"==";return I=="value"?"".concat(n," ").concat(z," [").concat(d.join(", "),"]"):"".concat(n," ").concat(z," ").concat(d)},sqlFormatOp:function(n,g,d,I,W,Z,X,G){if(I=="value")return"".concat(n," = '").concat(d.map(function(z){return R.SqlString.trim(z)}).join(","),"'")},spelOp:".equals",mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(n,g,d){return{all:[n,{in:[{var:""},d]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,g,d,I,W,Z,X,G){return I=="value"?"".concat(n," != [").concat(d.join(", "),"]"):"".concat(n," != ").concat(d)},sqlFormatOp:function(n,g,d,I,W,Z,X,G){if(I=="value")return"".concat(n," != '").concat(d.map(function(z){return R.SqlString.trim(z)}).join(","),"'")},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(n,g,d,I,W,Z,X,G){var z=d.first(),K=d.get(1),Y=X.get("proximity");return"".concat(n," ").concat(z," NEAR/").concat(Y," ").concat(K)},sqlFormatOp:function(n,g,d,I,W,Z,X,G){var z=d.first(),K=d.get(1),Y=R.SqlString.trim(z),re=R.SqlString.trim(K),ne=X.get("proximity");return"CONTAINS(".concat(n,", 'NEAR((").concat(Y,", ").concat(re,"), ").concat(ne,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(n){return b.default.createElement(P,n)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(n){return"".concat(n," > 0")},mongoFormatOp:s.bind(null,"$gt",function(a){return 0},!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(n,g,d){return"".concat(n," == ").concat(d)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(n){return"".concat(n," == 0")},mongoFormatOp:s.bind(null,"$eq",function(a){return 0},!1)}},u=function(n){return n==null?"NULL":n.toString()};i.stringifyForDisplay=u;var l={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(n){return b.default.createElement(N,n)},formatValue:function(n,g,d,I){return I?u(n):JSON.stringify(n)},spelFormatValue:function(n,g,d,I,W){if(W.spelOp=="matches"&&I!="regex"){var Z;return I=="starts_with"?Z="(?s)^".concat((0,E.escapeRegExp)(n),".*"):I=="ends_with"?Z="(?s).*".concat((0,E.escapeRegExp)(n),"$"):Z="(?s).*".concat((0,E.escapeRegExp)(n),".*"),(0,R.spelEscape)(Z)}else return(0,R.spelEscape)(n)},sqlFormatValue:function(n,g,d,I,W){return W.sqlOp=="LIKE"||W.sqlOp=="NOT LIKE"?R.SqlString.escapeLike(n,I!="starts_with",I!="ends_with"):R.SqlString.escape(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(n){return b.default.createElement($,n)},formatValue:function(n,g,d,I){return I?u(n):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){return W.sqlOp=="LIKE"||W.sqlOp=="NOT LIKE"?R.SqlString.escapeLike(n,I!="starts_with",I!="ends_with"):R.SqlString.escape(n)},spelFormatValue:function(n){return(0,R.spelEscape)(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return b.default.createElement(_,n)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(n,g,d,I){return I?u(n):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){return R.SqlString.escape(n)},spelFormatValue:function(n,g,d){var I=d.step&&!Number.isInteger(d.step);return(0,R.spelEscape)(n,I)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return b.default.createElement(te,n)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(n,g,d,I){return I?u(n):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){return R.SqlString.escape(n)},spelFormatValue:function(n){return(0,R.spelEscape)(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(n){return b.default.createElement(H,n)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(n,g,d,I){var W=(0,E.getTitleInListValues)(g.fieldSettings.listValues||g.asyncListValues,n);return I?u(W):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){return R.SqlString.escape(n)},spelFormatValue:function(n){return(0,R.spelEscape)(n)},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(n){return b.default.createElement(x,n)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(n,g,d,I){var W=n.map(function(Z){return(0,E.getTitleInListValues)(g.fieldSettings.listValues||g.asyncListValues,Z)});return I?W.map(u):n.map(JSON.stringify)},sqlFormatValue:function(n,g,d,I,W){return n.map(function(Z){return R.SqlString.escape(Z)})},spelFormatValue:function(n,g,d,I,W){var Z=W.spelOp&&W.spelOp[0]=="$",X=(0,R.spelEscape)(n);return Z&&(X=(0,R.spelFixList)(X)),X},toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(n){return b.default.createElement(w,n)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(n,g,d,I){var W=(0,L.default)(n,d.valueFormat);return I?W.format(d.dateFormat):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){var Z=(0,L.default)(n,d.valueFormat);return R.SqlString.escape(Z.format("YYYY-MM-DD"))},spelFormatValue:function(n,g,d,I,W){var Z=(0,L.default)(n,d.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(Z.format("YYYY-MM-DD"),"')")},jsonLogic:function(n,g,d){return(0,L.default)(n,d.valueFormat).toDate()},toJS:function(n,g){var d=(0,L.default)(n,g.valueFormat);return d.isValid()?d.toDate():void 0},mongoFormatValue:function(n,g,d){var I=(0,L.default)(n,d.valueFormat);return I.isValid()?I.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(n){return b.default.createElement(V,n)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(n,g,d,I){var W=(0,L.default)(n,d.valueFormat);return I?W.format(d.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){var Z=(0,L.default)(n,d.valueFormat);return R.SqlString.escape(Z.format("HH:mm:ss"))},spelFormatValue:function(n,g,d,I,W){var Z=(0,L.default)(n,d.valueFormat);return"T(java.time.LocalTime).parse('".concat(Z.format("HH:mm:ss"),"')")},jsonLogic:function(n,g,d){var I=(0,L.default)(n,d.valueFormat);return I.get("hour")*60*60+I.get("minute")*60+I.get("second")},toJS:function(n,g){var d=(0,L.default)(n,g.valueFormat);return d.isValid()?d.get("hour")*60*60+d.get("minute")*60+d.get("second"):void 0},mongoFormatValue:function(n,g,d){var I=(0,L.default)(n,d.valueFormat);return I.get("hour")*60*60+I.get("minute")*60+I.get("second")},elasticSearchFormatValue:function(n,g,d,I){return{script:{script:{source:"doc[".concat(I,"][0].getHour() >== params.min && doc[").concat(I,"][0].getHour() <== params.max"),params:{min:g[0],max:g[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(n){return b.default.createElement(j,n)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(n,g,d,I){var W=(0,L.default)(n,d.valueFormat);return I?W.format(d.dateFormat+" "+d.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,g,d,I,W){var Z=(0,L.default)(n,d.valueFormat);return R.SqlString.escape(Z.toDate())},spelFormatValue:function(n,g,d,I,W){var Z=(0,L.default)(n,d.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(Z.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(n,g,d){return(0,L.default)(n,d.valueFormat).toDate()},toJS:function(n,g){var d=(0,L.default)(n,g.valueFormat);return d.isValid()?d.toDate():void 0},mongoFormatValue:function(n,g,d){var I=(0,L.default)(n,d.valueFormat);return I.isValid()?I.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(n){return b.default.createElement(U,n)},labelYes:"Yes",labelNo:"No",formatValue:function(n,g,d,I){return I?n?"Yes":"No":JSON.stringify(!!n)},sqlFormatValue:function(n,g,d,I,W){return R.SqlString.escape(n)},spelFormatValue:function(n,g,d,I,W){return(0,R.spelEscape)(n)},defaultValue:!1,toJS:function(n,g){return n},mongoFormatValue:function(n,g,d){return n}},field:{valueSrc:"field",factory:function(n){return b.default.createElement(J,n)},formatValue:function(n,g,d,I,W,Z,X){return I&&X.label||n},sqlFormatValue:function(n,g,d,I,W,Z){return n},spelFormatValue:function(n,g,d,I,W){return n},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(n){return b.default.createElement(k,n)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(n){return(0,R.spelEscape)(n===""?null:n)},spelImportValue:function(n){return[n.value,[]]},factory:function(n){var g=n.value,d=n.setValue;return b.default.createElement("input",{type:"text",value:g||"",onChange:function(W){return d(W.target.value)}})}}},f={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},T=F(F({},A.settings),{},{formatField:function(n,g,d,I,W,Z){return Z?d:n},formatSpelField:function(n,g,d,I,W,Z){var X=I.map(function(G,z){var K=G.key,Y=G.parent;return z==0?Y=="[map]"?"#this[".concat((0,R.spelEscape)(K),"]"):(Y=="[class]",K):Y=="map"||Y=="[map]"?"[".concat((0,R.spelEscape)(K),"]"):(Y=="class"||Y=="[class]",".".concat(K))}).join("");return W.isSpelVariable&&(X="#"+X),X},sqlFormatReverse:function(n){if(n!=null)return"NOT("+n+")"},spelFormatReverse:function(n){if(n!=null)return"!("+n+")"},formatReverse:function(n,g,d,I,W,Z){if(n!=null)return Z?"NOT ("+n+")":"!("+n+")"},formatAggr:function(n,g,d,I,W,Z,X,G,z,K){var Y=X.labelForFormat,re=X.cardinality;if(re==0){var ne=n?" HAVE ".concat(n):"";return"".concat(Y," OF ").concat(g).concat(ne)}else if(re==null||re==1){var ue=n?" WHERE ".concat(n):"";return"COUNT OF ".concat(g).concat(ue," ").concat(Y," ").concat(I)}else if(re==2){var ae=n?" WHERE ".concat(n):"",ve=I.first(),se=I.get(1);return"COUNT OF ".concat(g).concat(ae," ").concat(Y," ").concat(ve," AND ").concat(se)}},canCompareFieldWithField:function(n,g,d,I){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5}),p={conjunctions:m,operators:o,widgets:l,types:f,settings:T};i.default=p},42009:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.settings=void 0;var h=O(e(7614)),b=r(e(68404));function C(N){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(C=function(j){return j?w:$})(N)}function O(N,$){if(!$&&N&&N.__esModule)return N;if(N===null||y(N)!=="object"&&typeof N!="function")return{default:N};var w=C($);if(w&&w.has(N))return w.get(N);var V={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in N)if(x!=="default"&&Object.prototype.hasOwnProperty.call(N,x)){var H=j?Object.getOwnPropertyDescriptor(N,x):null;H&&(H.get||H.set)?Object.defineProperty(V,x,H):V[x]=N[x]}return V.default=N,w&&w.set(N,V),V}var R=h.VanillaFieldSelect,E=h.VanillaConjs,L=h.VanillaButton,A=h.VanillaButtonGroup,S=h.VanillaProvider,M=h.VanillaValueSources,D=h.vanillaConfirm,F=h.VanillaSwitch,U={formatField:function($,w,V,j,x,H){return H?V:$},renderField:function($){return b.default.createElement(R,$)},renderOperator:function($){return b.default.createElement(R,$)},renderFunc:function($){return b.default.createElement(R,$)},renderConjs:function($){return b.default.createElement(E,$)},renderSwitch:function($){return b.default.createElement(F,$)},renderButton:function($){return b.default.createElement(L,$)},renderButtonGroup:function($){return b.default.createElement(A,$)},renderProvider:function($){return b.default.createElement(S,$)},renderValueSources:function($){return b.default.createElement(M,$)},renderConfirm:D,renderSwitchPrefix:function(){return b.default.createElement(b.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};i.settings=U},2986:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.UPPER=i.RELATIVE_DATETIME=i.NOW=i.LOWER=i.LINEAR_REGRESSION=void 0;var y=r(e(36365)),h={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};i.NOW=h;var b={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(L){var A=L.date,S=L.op,M=L.val,D=L.dim;return{date_add:[A,M*(S=="minus"?-1:1),D]}},jsonLogicImport:function(L){var A=L.date_add[0],S=Math.abs(L.date_add[1]),M=L.date_add[1]>=0?"plus":"minus",D=L.date_add[2];return[A,M,S,D]},jsonLogicCustomOps:{date_add:function(L,A,S){return(0,y.default)(L).add(A,S).toDate()}},sqlFormatFunc:function(L){var A=L.date,S=L.op,M=L.val,D=L.dim;return"DATE_ADD(".concat(A,", INTERVAL ").concat(parseInt(M)*(S=="minus"?-1:1)," ").concat(D.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(L){var A=L.date,S=L.op,M=L.val,D=L.dim;return M?"".concat(A," ").concat(S=="minus"?"-":"+"," ").concat(M," ").concat(D):A},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};i.RELATIVE_DATETIME=b;var C={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(L){return L.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.LOWER=C;var O={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(L){return L.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.UPPER=O;var R={label:"Linear regression",returnType:"number",formatFunc:function(L,A){var S=L.coef,M=L.bias,D=L.val;return"(".concat(S," * ").concat(D," + ").concat(M,")")},sqlFormatFunc:function(L){var A=L.coef,S=L.bias,M=L.val;return"(".concat(A," * ").concat(M," + ").concat(S,")")},spelFormatFunc:function(L){var A=L.coef,S=L.bias,M=L.val;return"(".concat(A," * ").concat(M," + ").concat(S,")")},mongoFormatFunc:function(L){var A=L.coef,S=L.bias,M=L.val;return{$sum:[{$multiply:[A,M]},S]}},jsonLogic:function(L){var A=L.coef,S=L.bias,M=L.val;return{"+":[{"*":[A,M]},S]}},jsonLogicImport:function(L){var A=L["+"][0]["*"][0],S=L["+"][0]["*"][1],M=L["+"][1];return[A,S,M]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};i.LINEAR_REGRESSION=R},46724:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SET_VALUE_SRC=i.SET_VALUE=i.SET_TREE=i.SET_OPERATOR_OPTION=i.SET_OPERATOR=i.SET_NOT=i.SET_LOCK=i.SET_FIELD=i.SET_DRAG_START=i.SET_DRAG_PROGRESS=i.SET_DRAG_END=i.SET_CONJUNCTION=i.REMOVE_RULE=i.REMOVE_GROUP=i.PLACEMENT_PREPEND=i.PLACEMENT_BEFORE=i.PLACEMENT_APPEND=i.PLACEMENT_AFTER=i.MOVE_ITEM=i.ADD_RULE=i.ADD_GROUP=i.ADD_CASE_GROUP=void 0;var e="ADD_GROUP";i.ADD_GROUP=e;var r="ADD_CASE_GROUP";i.ADD_CASE_GROUP=r;var y="REMOVE_GROUP";i.REMOVE_GROUP=y;var h="SET_CONJUNCTION";i.SET_CONJUNCTION=h;var b="SET_NOT";i.SET_NOT=b;var C="ADD_RULE";i.ADD_RULE=C;var O="REMOVE_RULE";i.REMOVE_RULE=O;var R="SET_FIELD";i.SET_FIELD=R;var E="SET_OPERATOR";i.SET_OPERATOR=E;var L="SET_VALUE";i.SET_VALUE=L;var A="SET_VALUE_SRC";i.SET_VALUE_SRC=A;var S="SET_OPERATOR_OPTION";i.SET_OPERATOR_OPTION=S;var M="SET_LOCK";i.SET_LOCK=M;var D="SET_TREE";i.SET_TREE=D;var F="MOVE_ITEM";i.MOVE_ITEM=F;var U="after";i.PLACEMENT_AFTER=U;var N="before";i.PLACEMENT_BEFORE=N;var $="append";i.PLACEMENT_APPEND=$;var w="prepend";i.PLACEMENT_PREPEND=w;var V="SET_DRAG_PROGRESS";i.SET_DRAG_PROGRESS=V;var j="SET_DRAG_START";i.SET_DRAG_START=j;var x="SET_DRAG_END";i.SET_DRAG_END=x},93453:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.elasticSearchFormat=$;var y=r(e(92476)),h=e(62413),b=e(20495);function C(w,V){var j=Object.keys(w);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(w);V&&(x=x.filter(function(H){return Object.getOwnPropertyDescriptor(w,H).enumerable})),j.push.apply(j,x)}return j}function O(w){for(var V=1;V<arguments.length;V++){var j=arguments[V]!=null?arguments[V]:{};V%2?C(Object(j),!0).forEach(function(x){(0,y.default)(w,x,j[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(j)):C(Object(j)).forEach(function(x){Object.defineProperty(w,x,Object.getOwnPropertyDescriptor(j,x))})}return w}function R(w){if(w==null)return null;var V=w.split(",").map(Number);return{top_left:{lat:V[0],lon:V[1]},bottom_right:{lat:V[2],lon:V[3]}}}function E(w,V){if(w.length>1)return{gte:"".concat(w[0]),lte:"".concat(w[1])};var j=w[0];switch(V){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(j,"||/d"),lte:"".concat(j,"||+1d")};case"less_or_equal":return{lte:"".concat(j)};case"greater_or_equal":return{gte:"".concat(j)};case"less":return{lt:"".concat(j)};case"greater":return{gt:"".concat(j)};default:return}}function L(w){return{value:"*"+w+"*"}}function A(w,V){switch(w){case"AND":return V?"must_not":"must";case"OR":return V?"should_not":"should";case"NOT":return V?"must":"must_not";default:return}}function S(w,V,j){if(w==="boolean")return V;switch(j){case"term":case"wildcard":return"".concat(V,".keyword");case"geo_bounding_box":case"range":case"match":return V;default:return console.error("Can't determine query field for query type ".concat(j)),null}}function M(w){return{value:w}}function D(w,V){return w}function F(w,V,j,x,H){var _=D(x,H);switch(w){case"filter":return{script:H.operators[j].elasticSearchScript(x,V)};case"exists":return{field:x};case"match":return(0,y.default)({},_,V[0]);case"term":return(0,y.default)({},x,V[0]);case"geo_bounding_box":return(0,y.default)({},x,R(V[0]));case"range":return(0,y.default)({},x,E(V,j));case"wildcard":return(0,y.default)({},x,L(V[0]));case"regexp":return(0,y.default)({},x,M(V[0]));default:return}}function U(w,V,j,x,H){if(!(!w||!j||V==null)){var _=j,te=x.operators[_];if(te){var J=te,k=J.elasticSearchQueryType,P=!1;if(!k&&te.reversedOp){P=!0,_=te.reversedOp,te=x.operators[_];var m=te;k=m.elasticSearchQueryType}var s=(0,h.getWidgetForFieldOp)(x,w,_,H),c=x.widgets[s];if(c){var o=c.elasticSearchFormatValue,u;if(typeof k=="function"?u=k(s):u=k,!!u){var l;return typeof o=="function"?l=o(u,V,_,w,x):l=F(u,V,_,w,x),P?{bool:{must_not:(0,y.default)({},u,O({},l))}}:(0,y.default)({},u,O({},l))}}}}}function N(w,V,j,x,H){if(!(!w||!w.size)){var _=w.valueSeq().toArray(),te=A(V,j),J=_.map(function(P){return x(P,H)}).filter(function(P){return P!==void 0});if(J.length){var k=J.flat(1/0);return{bool:(0,y.default)({},te,k)}}}}function $(w,V){if(w){var j=w.get("type"),x=w.get("properties")||new Map;if(j==="rule"&&x.get("field")){var H,_,te=x.get("operator"),J=x.get("field"),k=x.get("value").toJS(),P=(H=x.get("valueType"))===null||H===void 0?void 0:H.get(0),m=(_=x.get("valueSrc"))===null||_===void 0?void 0:_.get(0);return m==="func"?void 0:k&&Array.isArray(k[0])?k[0].map(function(u){return U(J,[u],te,V,m)}):U(J,k,te,V,m)}if(j==="group"||j==="rule_group"){var s=x.get("not"),c=x.get("conjunction");c||(c=(0,b.defaultConjunction)(V));var o=w.get("children1");return N(o,c,s,$,V)}}}},21058:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(94980);Object.keys(r).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===r[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return r[E]}})});var y=e(98522);Object.keys(y).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===y[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return y[E]}})});var h=e(31468);Object.keys(h).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===h[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return h[E]}})});var b=e(41437);Object.keys(b).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===b[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return b[E]}})});var C=e(15728);Object.keys(C).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===C[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return C[E]}})});var O=e(8310);Object.keys(O).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===O[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return O[E]}})});var R=e(93453);Object.keys(R).forEach(function(E){E==="default"||E==="__esModule"||E in i&&i[E]===R[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return R[E]}})})},98522:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.jsonLogicFormat=void 0;var y=r(e(90890)),h=r(e(92476)),b=e(60399),C=e(79746),O=e(62413),R=e(20495),E=e(12177),L=e(40745),A=r(e(50234)),S=r(e(7275));function M(P,m){var s=Object.keys(P);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(P);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(P,o).enumerable})),s.push.apply(s,c)}return s}function D(P){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?M(Object(s),!0).forEach(function(c){(0,h.default)(P,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach(function(c){Object.defineProperty(P,c,Object.getOwnPropertyDescriptor(s,c))})}return P}function F(P,m){var s=typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(!s){if(Array.isArray(P)||(s=U(P))||m&&P&&typeof P.length=="number"){s&&(P=s);var c=0,o=function(){};return{s:o,n:function(){return c>=P.length?{done:!0}:{done:!1,value:P[c++]}},e:function(p){throw p},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,f;return{s:function(){s=s.call(P)},n:function(){var p=s.next();return u=p.done,p},e:function(p){l=!0,f=p},f:function(){try{!u&&s.return!=null&&s.return()}finally{if(l)throw f}}}}function U(P,m){if(P){if(typeof P=="string")return N(P,m);var s=Object.prototype.toString.call(P).slice(8,-1);if(s==="Object"&&P.constructor&&(s=P.constructor.name),s==="Map"||s==="Set")return Array.from(P);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return N(P,m)}}function N(P,m){(m==null||m>P.length)&&(m=P.length);for(var s=0,c=new Array(m);s<m;s++)c[s]=P[s];return c}var $=function(m,s){var c={usedFields:[],errors:[]},o=w(m,s,c,!0),u=c.errors,l=c.usedFields,f=s.settings.fieldSeparator,T={},p=F(l),a;try{for(p.s();!(a=p.n()).done;)for(var n=a.value,g=(0,C.getFieldConfig)(s,n)||{},d=n.split(f),I=T,W=0;W<d.length;W++){var Z=d[W],X=(0,C.getFieldConfig)(s,d.slice(0,W+1))||{};W!=d.length-1?X.type=="!group"&&X.mode!="struct"?(I[Z]||(I[Z]=[{}]),I=I[Z][0]):(I[Z]||(I[Z]={}),I=I[Z]):I[Z]||(I[Z]=null)}}catch(G){p.e(G)}finally{p.f()}return{errors:u,logic:o,data:T}};i.jsonLogicFormat=$;var w=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(m){var l=m.get("type"),f=m.get("properties")||new L.Map,T=f.get("isLocked"),p=s.settings.jsonLogic.lockedOp,a;return l==="group"||l==="rule_group"?a=V(m,s,c,o,u):l==="rule"&&(a=j(m,s,c,u)),T&&a&&p&&(a=(0,h.default)({},p,a)),a}},V=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,l=m.get("type"),f=m.get("properties")||new L.Map,T=f.get("mode"),p=m.get("children1"),a=f.get("field");if(p){var n=f.get("conjunction");n||(n=(0,R.defaultConjunction)(s));var g=s.conjunctions[n],d=g.jsonLogicConj||n.toLowerCase(),I=f.get("not");if(d!="and"&&d!="or"){c.errors.push("Conjunction ".concat(d," is not supported"));return}var W=l==="rule_group"&&!o,Z=W&&T!="struct"?a:u,X=f.get("operator"),G=X&&(0,C.getOperatorConfig)(s,X,a)||null,z=x(s,f,c,X,u),K=W&&(!X||G.cardinality==0),Y=p.map(function(se){return w(se,s,c,!1,Z)}).filter(function(se){return typeof se<"u"});if(W&&T!="struct"&&!K){if(z==null)return}else if(!Y.size)return;var re={};if(Y.size==1&&!o?re=Y.first():re[d]=Y.toList().toJS(),I&&(re={"!":re}),W&&T!="struct"){var ne=te(c,s,a,u);if(K){var ue=X||"some";re=(0,h.default)({},ue,[ne,re])}else{var ae=Y.size?{filter:[ne,re]}:ne,ve={reduce:[ae,{"+":[1,{var:"accumulator"}]},0]};re=k(s,f,ve,z,X)}}return re}},j=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=m.get("properties")||new L.Map,l=u.get("field"),f=u.get("operator"),T=u.get("operatorOptions");if(T=T?T.toJS():null,T&&!Object.keys(T).length&&(T=null),!(l==null||f==null)){var p=(0,C.getFieldConfig)(s,l)||{},a=(0,C.getOperatorConfig)(s,f,l)||{},n=a.reversedOp,g=(0,C.getOperatorConfig)(s,n,l)||{},d=!1;if(!a.jsonLogic&&!g.jsonLogic){c.errors.push("Operator ".concat(f," is not supported"));return}if(!a.jsonLogic&&g.jsonLogic){d=!0;var I=[n,f];f=I[0],n=I[1];var W=[g,a];a=W[0],g=W[1]}var Z=x(s,u,c,f,o);if(Z!==void 0){var X=te(c,s,l,o);return k(s,u,X,Z,f,T,p,d)}}},x=function(m,s,c,o,u){var l=s.get("field"),f=s.get("valueSrc"),T=s.get("valueType"),p=(0,C.getFieldConfig)(m,l)||{},a=(0,C.getOperatorConfig)(m,o,l)||{},n=(0,b.defaultValue)(a.cardinality,1),g=s.get("value"),d=s.get("asyncListValues");if(g!=null){var I=[],W=[],Z=c.usedFields,X=g.map(function(z,K){var Y=f?f.get(K):null,re=T?T.get(K):null,ne=(0,E.completeValue)(z,Y,m),ue=(0,O.getWidgetForFieldOp)(m,l,o,Y),ae=(0,A.default)((0,C.getFieldWidgetConfig)(m,l,o,ue,Y),["factory"]),ve=H(c,m,ne,Y,re,ae,p,o,a,u,d);return ve!==void 0&&(I.push(Y),W.push(re)),ve}),G=X.filter(function(z){return z===void 0}).size>0;if(X.size<n||G){c.usedFields=Z;return}return n>1?X.toArray():n==1?X.first():null}},H=function(m,s,c,o,u,l,f,T,p){var a=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,n=arguments.length>10?arguments[10]:void 0;if(c!==void 0){var g;if(o=="field")g=te(m,s,c,a);else if(o=="func")g=_(m,s,c,a);else if(typeof l.jsonLogic=="function"){var d=l.jsonLogic,I=[c,D(D({},(0,S.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,A.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];T&&(I.push(T),I.push(p)),g=d.apply(void 0,I)}else g=c;return g}},_=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=c.get("func"),l=c.get("args"),f=(0,C.getFuncConfig)(s,u);if(!f.jsonLogic){m.errors.push("Func ".concat(u," is not supported"));return}var T={};for(var p in f.args){var a=f.args[p],n=(0,C.getFieldConfig)(s,a),g=l?l.get(p):void 0,d=g?g.get("value"):void 0,I=g?g.get("valueSrc"):void 0,W=H(m,s,d,I,a.type,n,a,null,null,o);if(d!=null&&W===void 0){m.errors.push("Can't format value of arg ".concat(p," for func ").concat(u));return}W!==void 0&&(T[p]=W)}var Z=Object.values(T),X;if(typeof f.jsonLogic=="function"){var G=f.jsonLogic,z=[T];X=G.apply(void 0,z)}else{var K=f.jsonLogic||u,Y=!!f.jsonLogicIsMethod;if(Y){var re=Z[0],ne=Z.slice(1);ne.length?X={method:[re,K,ne]}:X={method:[re,K]}}else X=(0,h.default)({},K,Z)}return X},te=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=s.settings,l=u.fieldSeparator,f=u.jsonLogic,T;if(c){Array.isArray(c)&&(c=c.join(l));var p=(0,C.getFieldConfig)(s,c)||{},a=c;if(p.fieldName&&(a=p.fieldName),o){var n=(0,C.getFieldConfig)(s,o)||{},g=o;n.fieldName&&(g=n.fieldName),a.indexOf(g+l)==0?a=a.slice((g+l).length):m.errors.push("Can't cut group ".concat(g," from field ").concat(a))}var d=p.jsonLogicVar||(p.type=="!group"?f.groupVarKey:"var");T=(0,h.default)({},d,a),m.usedFields.indexOf(c)==-1&&m.usedFields.push(c)}return T},J=function(m,s,c,o){var u=m,l=(0,b.defaultValue)(s.cardinality,1),f=(0,b.defaultValue)(s._jsonLogicIsRevArgs,!1);typeof s.jsonLogic=="string"&&(u=s.jsonLogic);var T=["<","<=",">",">="],p=["==","!="],a=function(g,d,I,W,Z){return l==0&&p.includes(u)?(0,h.default)({},u,[c,null]):l==0?(0,h.default)({},u,c):l==1&&f?(0,h.default)({},u,[o,c]):l==1?(0,h.default)({},u,[c,o]):l==2&&T.includes(u)?(0,h.default)({},u,[o[0],c,o[1]]):(0,h.default)({},u,[c].concat((0,y.default)(o)))};return a},k=function(m,s,c,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,T=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,p=s.get("field"),a=(0,C.getOperatorConfig)(m,u,p)||{},n=typeof a.jsonLogic=="function"?a.jsonLogic:J(u,a,c,o),g=[c,u,o,(0,A.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),l,f],d=n.apply(void 0,g);return T&&(d={"!":d}),d}},31468:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.mongodbFormat=i._mongodbFormat=void 0;var y=r(e(47452)),h=r(e(92476)),b=r(e(90890)),C=r(e(91148)),O=e(60399),R=e(79746),E=e(62413),L=e(20495),A=e(12177),S=r(e(50234)),M=r(e(7275)),D=e(40745),F=e(42009);function U(P,m){var s=Object.keys(P);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(P);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(P,o).enumerable})),s.push.apply(s,c)}return s}function N(P){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?U(Object(s),!0).forEach(function(c){(0,h.default)(P,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach(function(c){Object.defineProperty(P,c,Object.getOwnPropertyDescriptor(s,c))})}return P}var $=function(m){return(0,C.default)(m)=="object"&&m!==null&&!Array.isArray(m)},w=function(m,s){return V(m,s,!1)};i.mongodbFormat=w;var V=function(m,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o={errors:[]},u=j([],m,s,o);return c?[u,o.errors]:(o.errors.length&&console.warn("Errors while exporting to MongoDb:",o.errors),u)};i._mongodbFormat=V;var j=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,T=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(s){var p=s.get("type");if(p==="group"||p==="rule_group")return x(m,s,c,o,u,l,f,T);if(p==="rule")return H(m,s,c,o,u,l,f,T)}},x=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,T=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,p=s.get("type"),a=s.get("properties")||new D.Map,n=s.get("children1"),g=c.settings.canShortMongoQuery;if(n){var d=m.filter(function(ce){return ce.get("type")=="rule_group"}).length>0,I=m.filter(function(ce){return ce.get("type")=="rule_group"}).map(function(ce){return ce.get("properties").get("field")}).slice(-1).pop(),W=d&&I,Z=p==="rule_group"?a.get("field"):null,X=te(Z,c,o,W),G=(0,R.getFieldConfig)(c,Z)||{},z=G.mode,K=Z&&z=="array",Y=u?!a.get("not"):a.get("not"),re=n.map(function(ce){return j([].concat((0,b.default)(m),[s]),ce,c,o,Y,!0,z=="array"?function(Ne){return"$$el.".concat(Ne)}:void 0)}).filter(function(ce){return typeof ce<"u"});if(!(!K&&!re.size)){var ne=a.get("conjunction");ne||(ne=(0,L.defaultConjunction)(c));var ue=c.conjunctions[ne],ae=ue.reversedConj;Y&&ae&&(ne=ae,ue=c.conjunctions[ne]);var ve=ue.mongoConj,se;if(re.size==1)se=re.first();else if(re.size>1){var ge=re.toList().toJS(),ye=g&&ve=="$and";ye&&(se=ge.reduce(function(ce,Ne){if(ce){for(var we in Ne){if(we[0]=="$"){ce=void 0;break}if(ce[we]==null)ce[we]=Ne[we];else{var je=ce[we],Ke=Ne[we];$(je)||(je={$eq:je}),$(Ke)||(Ke={$eq:Ke});var Ye=Object.keys(je)[0],ke=Object.keys(Ke)[0];if(Ye==ke){ce=void 0;break}ce[we]=Object.assign({},je,Ke)}}return ce}},{})),se||(se=(0,h.default)({},ve,ge))}if(Z)if(z=="array"){var Oe={$size:X},Se=se?{$size:{$filter:{input:"$"+X,as:"el",cond:se}}}:Oe;se=j(m,s.set("type","rule"),c,o,!1,!1,function(ce){return Se},Oe),se={$expr:se}}else se=(0,h.default)({},X,{$elemMatch:se});return se}}},H=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,T=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,p=s.get("properties")||new D.Map,a=m.filter(function(at){return at.get("type")=="rule_group"}).length>0,n=m.filter(function(at){return at.get("type")=="rule_group"}).map(function(at){return at.get("properties").get("field")}).slice(-1).pop(),g=a&&n,d=p.get("operator"),I=p.get("operatorOptions"),W=p.get("field"),Z=p.get("value"),X=p.get("valueSrc"),G=p.get("valueType"),z=p.get("asyncListValues");if(!(W==null||d==null||Z===void 0)){var K=(0,R.getFieldConfig)(c,W)||{},Y=(0,R.getOperatorConfig)(c,d,W)||{},re=Y.reversedOp,ne=(0,R.getOperatorConfig)(c,re,W)||{},ue=(0,O.defaultValue)(Y.cardinality,1),ae=u;if(ae&&re){var ve=[re,d];d=ve[0],re=ve[1];var se=[ne,Y];Y=se[0],ne=se[1],ae=!1}var ge=te(W,c,o,g),ye=[],Oe=[],Se=!1,ce=Z.map(function(at,He){var fe=X?X.get(He):null,Ee=G?G.get(He):null,Ce=(0,A.completeValue)(at,fe,c),Fe=(0,E.getWidgetForFieldOp)(c,W,d,fe),De=(0,S.default)((0,R.getFieldWidgetConfig)(c,W,d,Fe,fe),["factory"]),Me=_(o,c,Ce,fe,Ee,De,K,g,d,Y,z),Ae=(0,y.default)(Me,2),$e=Ae[0],rt=Ae[1];return $e!==void 0&&(Se=Se||rt,ye.push(fe),Oe.push(Ee)),$e});f&&(Se=!0);var Ne=Se&&l,we=ce.filter(function(at){return at===void 0}).size>0;if(!(ce.size<ue||we)){var je=ue>1?ce.toArray():ue==1?ce.first():null,Ke=Y.mongoFormatOp;if(!Ke){o.errors.push("Operator ".concat(d," is not supported"));return}var Ye=[f?f(ge):ge,d,T!==void 0&&je==null?T:je,Se,ye.length>1?ye:ye[0],Oe.length>1?Oe:Oe[0],(0,S.default)(Y,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),I,K],ke=Ke.apply(void 0,Ye);return Ne&&(ke={$expr:ke}),ae&&(ke={$not:ke}),ke}}},_=function(m,s,c,o,u,l,f,T,p,a,n){if(c===void 0)return[void 0,!1];var g,d=!1;if(o=="field"){var I=J(m,s,c,T),W=(0,y.default)(I,2);g=W[0],d=W[1]}else if(o=="func"){var Z=k(m,s,c,T),X=(0,y.default)(Z,2);g=X[0],d=X[1]}else if(typeof l.mongoFormatValue=="function"){var G=l.mongoFormatValue,z=[c,N(N({},(0,M.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,S.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];p&&(z.push(p),z.push(a)),g=G.apply(void 0,z)}else g=c;return[g,d]},te=function(m,s,c,o){if(m){var u=(0,R.getFieldConfig)(s,m)||{},l=s.settings.fieldSeparator,f=Array.isArray(m)?m:m.split(l),T=Array.isArray(m)?m.join(l):m;if(u.fieldName&&(T=u.fieldName),o){var p=(0,R.getFieldConfig)(s,o)||{},a=o;p.fieldName&&(a=p.fieldName),T.indexOf(a+".")==0?T=T.slice((a+".").length):c.errors.push("Can't cut group ".concat(a," from field ").concat(T))}return T}},J=function(m,s,c,o){var u=s.settings.fieldSeparator,l,f=!0;if(c){var T=(0,R.getFieldConfig)(s,c)||{},p=Array.isArray(c)?c:c.split(u),a=(0,E.getFieldPath)(c,s),n=(0,E.getFieldPathLabels)(c,s),g=n?n.join(u):null,d=s.settings.formatField||F.settings.formatField,I=te(c,s,m,o),W=d(I,p,g,T,s,!1);l="$"+W}return[l,f]},k=function(m,s,c,o){var u=!0,l,f=c.get("func"),T=c.get("args"),p=(0,R.getFuncConfig)(s,f),a=p.mongoFunc||f,n=p.mongoArgsAsObject,g={},d=0,I=void 0;for(var W in p.args){var Z=p.args[W],X=(0,R.getFieldConfig)(s,Z),G=T?T.get(W):void 0,z=G?G.get("value"):void 0,K=G?G.get("valueSrc"):void 0,Y=G?G.get("asyncListValues"):void 0,re=(0,E.getWidgetForFieldOp)(s,X,null,K),ne=(0,S.default)((0,R.getFieldWidgetConfig)(s,X,null,re,K),["factory"]),ue=_(m,s,z,K,Z.type,ne,X,o,null,null,Y),ae=(0,y.default)(ue,2),ve=ae[0],se=ae[1];if(z!=null&&ve===void 0)return m.errors.push("Can't format value of arg ".concat(W," for func ").concat(f)),[void 0,!1];d++,ve!==void 0&&(g[W]=ve,I=ve)}if(typeof p.mongoFormatFunc=="function"){var ge=p.mongoFormatFunc,ye=[g];l=ge.apply(void 0,ye)}else{if(p.mongoFormatFunc===null)return m.errors.push("Functon ".concat(a," is not supported")),[void 0,!1];n?l=(0,h.default)({},a,g):d==1&&I!==void 0?l=(0,h.default)({},a,I):l=(0,h.default)({},a,Object.values(g))}return[l,u]}},94980:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryBuilderFormat=void 0;var y=r(e(92476)),h=e(60399),b=e(79746),C=e(20495),O=e(62413),R=e(12177),E=e(40745);function L(U,N){var $=Object.keys(U);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(U);N&&(w=w.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),$.push.apply($,w)}return $}function A(U){for(var N=1;N<arguments.length;N++){var $=arguments[N]!=null?arguments[N]:{};N%2?L(Object($),!0).forEach(function(w){(0,y.default)(U,w,$[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors($)):L(Object($)).forEach(function(w){Object.defineProperty(U,w,Object.getOwnPropertyDescriptor($,w))})}return U}var S=function(N,$){var w={usedFields:[]},V=M(N,$,w);if(V)return A(A({},V),w)};i.queryBuilderFormat=S;var M=function(N,$,w){if(N){var V=N.get("type"),j=N.get("children1");if((V==="group"||V==="rule_group")&&j&&j.size)return D(N,$,w);if(V==="rule")return F(N,$,w)}},D=function(N,$,w){var V=N.get("properties")||new E.Map,j=N.get("children1"),x=N.get("id"),H=j.map(function(k){return M(k,$,w)}).filter(function(k){return typeof k<"u"});if(H.size){var _=V.get("conjunction");_||(_=(0,C.defaultConjunction)($));var te=V.get("not"),J={id:x,rules:H.toList(),condition:_.toUpperCase(),not:te};return J}},F=function(N,$,w){var V=N.get("properties")||new E.Map,j=N.get("id"),x=V.get("operator"),H=V.get("operatorOptions"),_=V.get("field"),te=V.get("value"),J=V.get("valueSrc"),k=V.get("valueType"),P=te.filter(function(d){return d===void 0}).size>0;if(!(_==null||x==null||P)){var m=(0,b.getFieldConfig)($,_)||{},s=(0,b.getOperatorConfig)($,x,_)||{},c=m.type||"undefined",o=(0,h.defaultValue)(s.cardinality,1),u=$.types[m.type]||{},l=(0,O.formatFieldName)(_,$,w);if(!(te.size<o)){w.usedFields.indexOf(_)==-1&&w.usedFields.push(_),te=te.toArray(),J=J.toArray(),k=k.toArray();for(var f=[],T=0;T<te.length;T++){var p={type:k[T],value:te[T]};if(f.push(p),J[T]=="field"){var a=te[T];w.usedFields.indexOf(a)==-1&&w.usedFields.push(a)}}var n=H?H.toJS():null;n&&!Object.keys(n).length&&(n=null);var g={id:j,fieldName:l,type:c,input:u.mainWidget,operator:x};return n&&(g.operatorOptions=n),g.values=f,g}}}},8310:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryString=void 0;var y=r(e(92476)),h=r(e(47452)),b=r(e(90890)),C=e(79746),O=e(62413),R=r(e(50234)),E=r(e(7275)),L=e(60399),A=e(20495),S=e(42009),M=e(12177),D=e(40745);function F(J,k){var P=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),P.push.apply(P,m)}return P}function U(J){for(var k=1;k<arguments.length;k++){var P=arguments[k]!=null?arguments[k]:{};k%2?F(Object(P),!0).forEach(function(m){(0,y.default)(J,m,P[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(P)):F(Object(P)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(P,m))})}return J}var N=function(k,P){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s={errors:[]},c=$(k,P,s,m,null);return s.errors.length&&console.warn("Errors while exporting to string:",s.errors),c};i.queryString=N;var $=function(k,P,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(k){var o=k.get("type"),u=k.get("children1");if(o==="group"||o==="rule_group")return w(k,P,m,s,c);if(o==="rule")return x(k,P,m,s,c)}},w=function(k,P,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=k.get("type"),u=k.get("properties")||new D.Map,l=u.get("mode"),f=k.get("children1");if(f){var T=o==="rule_group",p=T&&l=="array"?u.get("field"):null,a=T&&l=="array",n=u.get("not"),g=f.map(function(Y){return $(Y,P,m,s,p)}).filter(function(Y){return typeof Y<"u"});if(!(!a&&!g.size)){var d=u.get("conjunction");d||(d=(0,A.defaultConjunction)(P));var I=P.conjunctions[d],W=g.size?I.formatConj(g,d,n,s):null,Z;if(p){var X=x(k,P,m,s,c,!0);if(X){var G,z=X.pop(),K=[W].concat((0,b.default)(X));Z=(G=P.settings).formatAggr.apply(G,(0,b.default)(K)),z&&(Z=P.settings.formatReverse(Z,null,null,null,null,s))}}else Z=W;return Z}}},V=function(k,P,m,s,c,o){var u=P.get("field"),l=P.get("valueSrc"),f=P.get("valueType"),T=(0,C.getFieldConfig)(k,u)||{},p=s||P.get("operator"),a=(0,C.getOperatorConfig)(k,p,u)||{},n=(0,L.defaultValue)(a.cardinality,1),g=P.get("value"),d=P.get("asyncListValues"),I=[],W=[],Z;if(g!=null){var X=g.map(function(z,K){var Y=l?l.get(K):null,re=f?f.get(K):null,ne=(0,M.completeValue)(z,Y,k),ue=(0,O.getWidgetForFieldOp)(k,u,p,Y),ae=(0,R.default)((0,C.getFieldWidgetConfig)(k,u,p,ue,Y),["factory"]),ve=H(k,m,ne,Y,re,ae,T,p,a,c,o,d);return ve!==void 0&&(I.push(Y),W.push(re)),ve}),G=X.filter(function(z){return z===void 0}).size>0;G||X.size<n||(Z=n==1?X.first():X)}return[Z,I.length>1?I:I[0],W.length>1?W:W[0]]},j=function(k,P){var m=P.labelForFormat||k,s=(0,L.defaultValue)(P.cardinality,1),c;return s==0?c=function(u,l,f,T,p,a,n,g){return"".concat(u," ").concat(m)}:s==1?c=function(u,l,f,T,p,a,n,g){return"".concat(u," ").concat(m," ").concat(f)}:s==2&&(c=function(u,l,f,T,p,a,n,g){var d=f.first(),I=f.get(1);return"".concat(u," ").concat(m," ").concat(d," AND ").concat(I)}),c},x=function(k,P,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,u=k.get("properties")||new D.Map,l=u.get("field"),f=u.get("operator"),T=u.get("operatorOptions");if(!(l==null||f==null)){var p=(0,C.getFieldConfig)(P,l)||{},a=(0,C.getOperatorConfig)(P,f,l)||{},n=a.reversedOp,g=(0,C.getOperatorConfig)(P,n,l)||{},d=!1,I=a.formatOp;if(!I&&n&&(I=g.formatOp,I)){d=!0;var W=[n,f];f=W[0],n=W[1];var Z=[g,a];a=Z[0],g=Z[1]}if(I||(I=j(f,a)),!!I){var X=_(P,m,l,s,c),G=V(P,u,m,f,s,c),z=(0,h.default)(G,3),K=z[0],Y=z[1],re=z[2];if(K!==void 0){var ne=[X,f,K,Y,re,(0,R.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),T,s,p,d];if(o)return ne;var ue=I.apply(void 0,ne);return d&&(ue=P.settings.formatReverse(ue,f,n,a,g,s)),ue}}}},H=function(k,P,m,s,c,o,u,l,f,T){var p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,a=arguments.length>11?arguments[11]:void 0;if(m!==void 0){var n;if(s=="field")n=_(k,P,m,T,p);else if(s=="func")n=te(k,P,m,T,p);else if(typeof o.formatValue=="function"){var g=o.formatValue,d=[m,U(U({},(0,E.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:a}),(0,R.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),T];if(l&&(d.push(l),d.push(f)),s=="field"){var I=(0,C.getFieldConfig)(k,m)||{};d.push(I)}n=g.apply(void 0,d)}else n=m;return n}},_=function(k,P,m,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,u=k.settings,l=u.fieldSeparator,f=u.fieldSeparatorDisplay,T=null;if(m){var p=(0,C.getFieldConfig)(k,m)||{},a=Array.isArray(m)?m:m.split(l),n=(0,O.getFieldPath)(m,k),g=(0,O.getFieldPathLabels)(m,k,o?c:null),d=g?g.join(f):null,I=p.label2||d,W=k.settings.formatField||S.settings.formatField,Z=(0,O.formatFieldName)(m,k,P,o?c:null);T=W(Z,a,I,p,k,s)}return T},te=function(k,P,m,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=m.get("func"),u=m.get("args"),l=(0,C.getFuncConfig)(k,o),f=s&&l.label||o,T={},p={};for(var a in l.args){var n=l.args[a],g=(0,C.getFieldConfig)(k,n),d=u?u.get(a):void 0,I=d?d.get("value"):void 0,W=d?d.get("valueSrc"):void 0,Z=d?d.get("asyncListValues"):void 0,X=H(k,P,I,W,n.type,g,n,null,null,s,c,Z),G=s&&n.label||a;X!==void 0&&(T[a]=X,p[G]=X)}var z=null;if(typeof l.formatFunc=="function"){var K=l.formatFunc,Y=[T,s];z=K.apply(void 0,Y)}else{var re=Object.entries(p).map(function(ne){var ue=(0,h.default)(ne,2),ae=ue[0],ve=ue[1];return s?"".concat(ae,": ").concat(ve):"".concat(ve)}).join(", ");z="".concat(f,"(").concat(re,")")}return z}},15728:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.spelFormat=i._spelFormat=void 0;var y=r(e(33138)),h=r(e(92476)),b=r(e(47452)),C=e(79746),O=e(62413),R=r(e(50234)),E=r(e(7275)),L=e(60399),A=e(20495),S=e(42009),M=e(12177),D=e(40745),F=e(1901);function U(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(T){return Object.getOwnPropertyDescriptor(o,T).enumerable})),l.push.apply(l,f)}return l}function N(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?U(Object(l),!0).forEach(function(f){(0,h.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):U(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var $=function(u,l){return w(u,l,!1)};i.spelFormat=$;var w=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,T={errors:[]},p=V(u,l,T,null);return f?[p,T.errors]:(T.errors.length&&console.warn("Errors while exporting to SpEL:",T.errors),p)};i._spelFormat=w;var V=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(u){var p=u.get("type");if(p==="group"||p==="rule_group")return H(u,l,f,T);if(p==="rule")return k(u,l,f,T);if(p=="switch_group")return x(u,l,f,T);if(p=="case_group")return j(u,l,f,T)}},j=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("type");if(p!="case_group"){f.errors.push("Unexpected child of type ".concat(p," inside switch"));return}var a=u.get("properties")||new D.Map,n=P(l,a,f,null,T,"!case_value"),g=(0,b.default)(n,3),d=g[0],I=g[1],W=g[2],Z=H(u,l,f,T);return[Z,d]},x=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("properties")||new D.Map,a=u.get("children1");if(a){var n=a.map(function(K){return j(K,l,f,null)}).filter(function(K){return typeof K<"u"}).toArray();if(n.length){if(n.length==1&&!n[0][0])return n[0][1];for(var g=[],d=0;d<n.length;d++)d!=n.length-1&&!n[d][0]?f.errors.push("No condition for case ".concat(d)):(g.push(n[d]),d==n.length-1&&n[d][0]&&g.push([void 0,null]));for(var I="",W="",Z=0;Z<g.length;Z++){var X=(0,b.default)(g[Z],2),G=X[0],z=X[1];z==null&&(z="null"),G==null&&(G="true"),Z!=g.length-1?(I+="(".concat(G," ? ").concat(z," : "),W+=")"):I+="".concat(z)}return I+W}}},H=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("type"),a=u.get("properties")||new D.Map,n=a.get("mode"),g=u.get("children1"),d=a.get("field");if(g){var I=a.get("conjunction");I||(I=(0,A.defaultConjunction)(l));var W=l.conjunctions[I],Z=a.get("not"),X=p==="rule_group",G=X&&n!="struct",z=G?d:T,K=(0,C.getFieldConfig)(l,z)||{},Y=K.isSpelArray,re=a.get("operator");!re&&(!n||n=="some")&&(re="some");var ne=J(l,re,d),ue=ne!=re,ae=re&&(0,C.getOperatorConfig)(l,ne,d)||null,ve=X&&(!ne||ae.cardinality==0),se=P(l,a,f,ne,T,null),ge=(0,b.default)(se,3),ye=ge[0],Oe=ge[1],Se=ge[2],ce=g.map(function(fe){return V(fe,l,f,z)}).filter(function(fe){return typeof fe<"u"});if(G&&!ve){if(ye==null)return}else if(!ce.size)return;var Ne=X,we=ce.size?W.spelFormatConj(ce,I,Z,Ne):null,je;if(G){var Ke=s(f,l,d,T),Ye=Y?".length":".size()",ke="".concat(Ke).concat(Ye),at=we?"".concat(Ke,".?[").concat(we,"]").concat(Ye):ke,He=ve?ke:ye;je=te(f,l,a,at,He,ne,Oe,Se,ue)}else je=we;return je}},_=function(u,l){var f=l.spelOp;if(f){var T=f[0]=="$",p=f[0]=="."||T,a=f.substring(f.length-2)=="()",n=p?f.slice(1):a?f.substring(0,f.length-2):f,g,d=(0,L.defaultValue)(l.cardinality,1);return d==0?g=function(W,Z,X,G,z,K,Y,re){return p?"".concat(W,".").concat(n,"()"):"".concat(W," ").concat(n)}:d==1&&(g=function(W,Z,X,G,z,K,Y,re){return T?"".concat(X,".").concat(n,"(").concat(W,")"):a?"".concat(n,"(").concat(W,", ").concat(X,")"):p?"".concat(W,".").concat(n,"(").concat(X,")"):"".concat(W," ").concat(n," ").concat(X)}),g}},te=function(u,l,f,T,p,a,n,g){var d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,I=f.get("field"),W=(0,C.getOperatorConfig)(l,a,I)||{},Z=(0,C.getFieldConfig)(l,I)||{},X=f.get("operatorOptions"),G=W.spelFormatOp||_(a,W);if(!G){u.errors.push("Operator ".concat(a," is not supported"));return}var z=[T,a,p,n,g,(0,R.default)(W,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),X,Z],K;return K=G.apply(void 0,z),d&&(K=l.settings.spelFormatReverse(K)),K===void 0&&u.errors.push("Operator ".concat(a," is not supported for value source ").concat(n)),K},J=function(u,l,f){if(l){var T=(0,C.getOperatorConfig)(u,l,f)||{},p=T.reversedOp,a=(0,C.getOperatorConfig)(u,p,f)||{},n=!1,g=T.spelOp||T.spelFormatOp,d=a.spelOp||a.spelFormatOp;if(!(!g&&!d)){if(!g&&d){n=!0;var I=[p,l];l=I[0],p=I[1];var W=[a,T];T=W[0],a=W[1]}return l}}},k=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=u.get("properties")||new D.Map,a=p.get("field"),n=p.get("operator");if(!(a==null||n==null)){var g=J(l,n,a);if(!g){f.errors.push("Operator ".concat(n," is not supported"));return}var d=g!=n,I=P(l,p,f,g,T,null),W=(0,b.default)(I,3),Z=W[0],X=W[1],G=W[2];if(Z!==void 0){var z=s(f,l,a,T),K=te(f,l,p,z,Z,g,X,G,d);return K}}},P=function(u,l,f,T,p){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,n=l.get("field"),g=l.get("valueSrc"),d=l.get("valueType");(a=="!case_value"||d&&d.get(0)=="case_value")&&(n="!case_value");var I=(0,C.getFieldConfig)(u,n)||{},W=(0,C.getOperatorConfig)(u,T,n)||{},Z=(0,L.defaultValue)(W.cardinality,1),X=l.get("value"),G=l.get("asyncListValues"),z=[],K=[],Y;if(X!=null){var re=X.map(function(ue,ae){var ve=g?g.get(ae):null,se=d?d.get(ae):null,ge=(0,M.completeValue)(ue,ve,u),ye=(0,O.getWidgetForFieldOp)(u,n,T,ve),Oe=(0,R.default)((0,C.getFieldWidgetConfig)(u,n,T,ye,ve),["factory"]),Se=m(f,u,ge,ve,se,Oe,I,T,W,p,G);return Se!==void 0&&(z.push(ve),K.push(se)),Se}),ne=re.filter(function(ue){return ue===void 0}).size>0;re.size<Z||ne||(Y=Z>1?re.toArray():Z==1?re.first():null)}return[Y,z.length>1?z:z[0],K.length>1?K:K[0]]},m=function(u,l,f,T,p,a,n,g,d){var I=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,W=arguments.length>10?arguments[10]:void 0;if(f!==void 0){var Z;if(T=="field")Z=s(u,l,f,I);else if(T=="func")Z=c(u,l,f,I);else if(typeof a.spelFormatValue=="function"){var X=a.spelFormatValue,G=[f,N(N({},(0,E.default)(n,["fieldSettings","listValues"])),{},{asyncListValues:W}),(0,R.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(g&&(G.push(g),G.push(d)),T=="field"){var z=(0,C.getFieldConfig)(l,f)||{};G.push(z)}Z=X.apply(void 0,G)}else Z=(0,F.spelEscape)(f);return Z}},s=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(f){var p=l.settings.fieldSeparator,a=(0,C.getFieldConfig)(l,f)||{},n=Array.isArray(f)?f:f.split(p),g=(0,O.getFieldPath)(f,l,T),d=(0,O.getFieldPartsConfigs)(f,l,T),I=l.settings.formatSpelField,W=(0,O.formatFieldName)(f,l,u);if(T){var Z=(0,C.getFieldConfig)(l,T)||{},X=T;Z.fieldName&&(X=Z.fieldName),W.indexOf(X+p)==0?W=W.slice((X+p).length):u.errors.push("Can't cut group ".concat(X," from field ").concat(W))}var G=d.map(function(K){var Y=(0,b.default)(K,3),re=Y[0],ne=Y[1],ue=Y[2],ae;ue&&(ue.type=="!struct"||ue.type=="!group"&&ue.mode=="struct"?ae=ne.isSpelMap?"map":"class":ue.type=="!group"?ae=ne.isSpelItemMap?"[map]":"[class]":ae="class");var ve=ne?.isSpelVariable;return{key:re,parent:ae,isSpelVariable:ve}}),z=I(W,T,n,G,a,l);return z}},c=function(u,l,f){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=f.get("func"),a=f.get("args"),n=(0,C.getFuncConfig)(l,p),g=n.spelFunc||p,d={};for(var I in n.args){var W=n.args[I],Z=(0,C.getFieldConfig)(l,W),X=a?a.get(I):void 0,G=X?X.get("value"):void 0,z=X?X.get("valueSrc"):void 0,K=X?X.get("asyncListValues"):void 0,Y=m(u,l,G,z,W.type,Z,W,null,null,T,K);if(G!=null&&Y===void 0){u.errors.push("Can't format value of arg ".concat(I," for func ").concat(p));return}Y!==void 0&&(d[I]=Y)}var re;if(typeof n.spelFormatFunc=="function"){var ne=n.spelFormatFunc,ue=[d];re=ne.apply(void 0,ue)}else{var ae=Object.entries(d).map(function(ye){var Oe=(0,b.default)(ye,2),Se=Oe[0],ce=Oe[1];return ce});if(g[0]=="."&&ae.length){var ve=(0,y.default)(ae),se=ve[0],ge=ve.slice(1);re="".concat(se).concat(g,"(").concat(ge.join(", "),")")}else re="".concat(g,"(").concat(ae.join(", "),")")}return re}},41437:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlFormat=i._sqlFormat=void 0;var y=r(e(47452)),h=r(e(92476)),b=e(79746),C=e(62413),O=r(e(50234)),R=r(e(7275)),E=e(60399),L=e(20495),A=e(42009),S=e(12177),M=e(40745),D=e(1901);function F(J,k){var P=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),P.push.apply(P,m)}return P}function U(J){for(var k=1;k<arguments.length;k++){var P=arguments[k]!=null?arguments[k]:{};k%2?F(Object(P),!0).forEach(function(m){(0,h.default)(J,m,P[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(P)):F(Object(P)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(P,m))})}return J}var N=function(k,P){return $(k,P,!1)};i.sqlFormat=N;var $=function(k,P){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s={errors:[]},c=w(k,P,s);return m?[c,s.errors]:(s.errors.length&&console.warn("Errors while exporting to SQL:",s.errors),c)};i._sqlFormat=$;var w=function(k,P,m){if(k){var s=k.get("type"),c=k.get("children1");if((s==="group"||s==="rule_group")&&c&&c.size)return V(k,P,m);if(s==="rule")return x(k,P,m)}},V=function(k,P,m){var s=k.get("type"),c=k.get("properties")||new M.Map,o=k.get("children1"),u=s==="rule_group"?c.get("field"):null,l=(0,b.getFieldConfig)(P,u)||{};l.mode=="array"&&m.errors.push("Aggregation is not supported for ".concat(u));var f=c.get("not"),T=o.map(function(n){return w(n,P,m)}).filter(function(n){return typeof n<"u"});if(T.size){var p=c.get("conjunction");p||(p=(0,L.defaultConjunction)(P));var a=P.conjunctions[p];return a.sqlFormatConj(T,p,f)}},j=function(k,P){var m=P.sqlOp||k,s=(0,E.defaultValue)(P.cardinality,1),c;return s==0?c=function(u,l,f,T,p,a,n,g){return"".concat(u," ").concat(m)}:s==1?c=function(u,l,f,T,p,a,n,g){return"".concat(u," ").concat(m," ").concat(f)}:s==2&&(c=function(u,l,f,T,p,a,n,g){var d=f.first(),I=f.get(1);return"".concat(u," ").concat(m," ").concat(d," AND ").concat(I)}),c},x=function(k,P,m){var s=k.get("properties")||new M.Map,c=s.get("field"),o=s.get("operator"),u=s.get("operatorOptions"),l=s.get("valueSrc"),f=s.get("valueType"),T=s.get("value"),p=s.get("asyncListValues");if(!(c==null||o==null)){var a=(0,b.getFieldConfig)(P,c)||{},n=(0,b.getOperatorConfig)(P,o,c)||{},g=n.reversedOp,d=(0,b.getOperatorConfig)(P,g,c)||{},I=(0,E.defaultValue)(n.cardinality,1),W=!1,Z=n.sqlOp||n.sqlFormatOp,X=d.sqlOp||d.sqlFormatOp;if(!Z&&!X){m.errors.push("Operator ".concat(o," is not supported"));return}if(!X&&X){W=!0;var G=[g,o];o=G[0],g=G[1];var z=[d,n];n=z[0],d=z[1]}var K=[],Y=[],re=T.map(function(ye,Oe){var Se=l?l.get(Oe):null,ce=f?f.get(Oe):null,Ne=(0,S.completeValue)(ye,Se,P),we=(0,C.getWidgetForFieldOp)(P,c,o,Se),je=(0,O.default)((0,b.getFieldWidgetConfig)(P,c,o,we,Se),["factory"]),Ke=H(m,P,Ne,Se,ce,je,a,o,n,p);return Ke!==void 0&&(K.push(Se),Y.push(ce)),Ke}),ne=re.filter(function(ye){return ye===void 0}).size>0;if(!(ne||re.size<I)){var ue=I==1?re.first():re,ae=n.sqlFormatOp||j(o,n);if(!ae){m.errors.push("Operator ".concat(o," is not supported"));return}var ve=_(m,P,c),se=[ve,o,ue,K.length>1?K:K[0],Y.length>1?Y:Y[0],(0,O.default)(n,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),u,a],ge;if(ge=ae.apply(void 0,se),W&&(ge=P.settings.sqlFormatReverse(ge)),ge===void 0){m.errors.push("Operator ".concat(o," is not supported for value source ").concat(K.join(", ")));return}return ge}}},H=function(k,P,m,s,c,o,u,l,f,T){if(m!==void 0){var p;if(s=="field")p=_(k,P,m);else if(s=="func")p=te(k,P,m);else if(typeof o.sqlFormatValue=="function"){var a=o.sqlFormatValue,n=[m,U(U({},(0,R.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:T}),(0,O.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(n.push(l),n.push(f)),s=="field"){var g=(0,b.getFieldConfig)(P,m)||{};n.push(g)}p=a.apply(void 0,n)}else Array.isArray(m)?p=m.map(function(d){return D.SqlString.escape(d)}):p=D.SqlString.escape(m);return p}},_=function(k,P,m){if(m){var s=P.settings.fieldSeparator,c=(0,b.getFieldConfig)(P,m)||{},o=Array.isArray(m)?m:m.split(s),u=(0,C.getFieldPath)(m,P),l=(0,C.getFieldPathLabels)(m,P),f=l?l.join(s):null,T=P.settings.formatField||A.settings.formatField,p=(0,C.formatFieldName)(m,P,k),a=T(p,o,f,c,P);return a}},te=function(k,P,m){var s=m.get("func"),c=m.get("args"),o=(0,b.getFuncConfig)(P,s),u=o.sqlFunc||s,l={};for(var f in o.args){var T=o.args[f],p=(0,b.getFieldConfig)(P,T),a=c?c.get(f):void 0,n=a?a.get("value"):void 0,g=a?a.get("valueSrc"):void 0,d=a?a.get("asyncListValues"):void 0,I=H(k,P,n,g,T.type,p,T,null,null,d);if(n!=null&&I===void 0){k.errors.push("Can't format value of arg ".concat(f," for func ").concat(s));return}I!==void 0&&(l[f]=I)}var W;if(typeof o.sqlFormatFunc=="function"){var Z=o.sqlFormatFunc,X=[l];W=Z.apply(void 0,X)}else{var G=Object.entries(l).map(function(z){var K=(0,y.default)(z,2),Y=K[0],re=K[1];return re}).join(", ");W="".concat(u,"(").concat(G,")")}return W}},9504:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(70889);Object.keys(r).forEach(function(b){b==="default"||b==="__esModule"||b in i&&i[b]===r[b]||Object.defineProperty(i,b,{enumerable:!0,get:function(){return r[b]}})});var y=e(87780);Object.keys(y).forEach(function(b){b==="default"||b==="__esModule"||b in i&&i[b]===y[b]||Object.defineProperty(i,b,{enumerable:!0,get:function(){return y[b]}})});var h=e(79620);Object.keys(h).forEach(function(b){b==="default"||b==="__esModule"||b in i&&i[b]===h[b]||Object.defineProperty(i,b,{enumerable:!0,get:function(){return h[b]}})})},87780:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromJsonLogic=i._loadFromJsonLogic=void 0;var y=r(e(90890)),h=r(e(33138)),b=r(e(92476)),C=r(e(47452)),O=r(e(76833)),R=e(60399),E=e(79746),L=e(62413),A=e(70889),S=e(20495),M=r(e(36365));function D(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(T){return Object.getOwnPropertyDescriptor(o,T).enumerable})),l.push.apply(l,f)}return l}function F(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?D(Object(l),!0).forEach(function(f){(0,b.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):D(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var U=function(u){return Array.from(new Set(u))},N=function(u){return u.reduce(function(l,f){var T=(0,C.default)(f,2),p=T[0],a=T[1];return F(F({},l),{},(0,b.default)({},p,a))},{})},$=function(u,l){return w(u,l,!1)};i.loadFromJsonLogic=$;var w=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,T={errors:[]},p=(0,E.extendConfig)(l),a=V(p),n=u?j(u,a,p,"rule",T):void 0;n&&n.type!="group"&&(n=P(n,p));var g=n?(0,A.loadTree)(n):void 0;return f?[g,T.errors]:(T.errors.length&&console.warn("Errors while importing from JsonLogic:",T.errors),g)};i._loadFromJsonLogic=w;var V=function(u){var l={};for(var f in u.operators){var T=u.operators[f];if(typeof T.jsonLogic=="string"){var p=(T._jsonLogicIsRevArgs?"#":"")+T.jsonLogic+"/"+(0,R.defaultValue)(T.cardinality,1);l[p]||(l[p]=[]),l[p].push(f)}else if(typeof T.jsonLogic2=="string"){var a=T.jsonLogic2+"/"+(0,R.defaultValue)(T.cardinality,1);l[a]||(l[a]=[]),l[a].push(f)}}var n={};for(var g in u.conjunctions){var d=u.conjunctions[g],I=d.jsonLogicConj||g.toLowerCase();n[I]=g}var W={};for(var Z in u.funcs){var X=u.funcs[Z],G=void 0;X.jsonLogicIsMethod?G="#"+X.jsonLogic:typeof X.jsonLogic=="string"&&(G=X.jsonLogic),G&&(W[G]||(W[G]=[]),W[G].push(Z))}var z=u.settings.jsonLogic,K=z.groupVarKey,Y=z.altVarKey;return{operators:l,conjunctions:n,funcs:W,varKeys:["var",K,Y]}},j=function o(u,l,f,T,p){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,n=arguments.length>6?arguments[6]:void 0,g=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,I=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,W,Z;(0,R.isJsonLogic)(u)&&(W=Object.keys(u)[0],Z=u[W],Array.isArray(Z)||(Z=[Z]));var X,G=p.errors.length,z=f.settings.jsonLogic.lockedOp,K=W=="!"&&Z.length==1&&Z[0]&&(0,R.isJsonLogic)(Z[0])&&l.varKeys.includes(Object.keys(Z[0])[0]),Y=W=="!"&&!K,re=z&&W==z;re?X=o(Z[0],l,f,T,p,a,n,g,d,!0):Y?X=o(Z[0],l,f,T,p,!a,n,g,d):T=="val"?X=H(W,Z,l,f,a,p,d)||_(W,Z,l,f,a,n,p,d)||x(u,n,g,f,p):T=="rule"&&(X=te(W,Z,l,f,a,p,d,!1)||c(W,Z,l,f,a,p,d));var ne=p.errors.length;return W!="!"&&X===void 0&&ne==G&&p.errors.push("Can't parse logic ".concat(JSON.stringify(u))),re&&(X.properties.isLocked=!0),X},x=function(u,l,f,T,p){if(u!==void 0){var a=T.widgets[f||l.mainWidget];if(!a){p.errors.push("No widget for type ".concat(l.type));return}if((0,R.isJsonLogic)(u)){p.errors.push("Unexpected logic in value: ".concat(JSON.stringify(u)));return}if(l&&l.type=="time"&&typeof u=="number"){var n=Math.floor(u/60/60)%24,g=Math.floor(u/60)%60,d=u%60,I=a.valueFormat;if(I){var W=new Date(u);W.setMilliseconds(0),W.setHours(n),W.setMinutes(g),W.setSeconds(d),u=(0,M.default)(W).format(I)}else u="".concat(n,":").concat(g,":").concat(d)}if(l&&["date","datetime"].includes(l.type)&&u&&!(u instanceof Date))try{var Z=new Date(u);Z instanceof Date&&Z.toISOString()===u&&(u=Z)}catch{p.errors.push("Can't convert value ".concat(u," as Date")),u=void 0}if(u instanceof Date&&l){var X=a.valueFormat;X&&(u=(0,M.default)(u).format(X))}var G;if(u&&l.fieldSettings&&l.fieldSettings.asyncFetch){var z=Array.isArray(u)?u:[u];G=z}return{valueSrc:"value",value:u,valueType:a.type,asyncListValues:G}}},H=function(u,l,f,T,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,g=T.settings.fieldSeparator;if(f.varKeys.includes(u)&&typeof l[0]=="string"){var d=l[0];n&&(d=[n,d].join(g)),d=(0,E.normalizeField)(T,d);var I=(0,E.getFieldConfig)(T,d);if(!I){a.errors.push("No config for field ".concat(d));return}return{valueSrc:"field",value:d,valueType:I.type}}},_=function(u,l,f,T,p,a,n){var g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(u){var d,I,W,Z=u=="method";if(Z){var X,G,z=(0,h.default)(l);X=z[0],d=z[1],G=z.slice(2),I=[X].concat((0,y.default)(G))}else d=u,I=l;var K=(Z?"#":"")+d,Y=(f.funcs[K]||[]).filter(function(ce){return a?T.funcs[ce].returnType==a.type:!0});if(Y.length)W=Y[0];else for(var re=(0,b.default)({},u,l),ne=0,ue=Object.entries(T.funcs||{});ne<ue.length;ne++){var ae=(0,C.default)(ue[ne],2),ve=ae[0],se=ae[1];if(se.jsonLogicImport&&se.returnType==a.type){var ge=void 0;try{ge=se.jsonLogicImport(re)}catch{}ge&&(W=ve,I=ge)}}if(W&&W){var ye=T.funcs[W],Oe=Object.keys(ye.args||{}),Se=I.reduce(function(ce,Ne,we){var je=Oe[we],Ke=ye.args[je],Ye=j(Ne,f,T,"val",n,!1,Ke,null,g);if(Ye===void 0&&(Ye=Ke.defaultValue,Ye===void 0)){n.errors.push("No value for arg ".concat(je," of func ").concat(W));return}return F(F({},ce),{},(0,b.default)({},je,Ye))},{});return{valueSrc:"func",value:{func:W,args:Se},valueType:ye.returnType}}}},te=function(u,l,f,T,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,d=f.conjunctions[u],I=T.settings.fieldSeparator,W=n?(0,E.getFieldConfig)(T,n):null,Z=W?.type=="!group";if(d){var X="group",G=l.map(function(ge){return j(ge,f,T,"rule",a,!1,null,null,n)}).filter(function(ge){return ge!==void 0}).reduce(function(ge,ye){return F(F({},ge),{},(0,b.default)({},ye.id,ye))},{}),z=Object.values(G).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).filter(function(ge){return ge&&ge.includes(I)}),K=Object.fromEntries(U(z).map(function(ge){var ye=ge.split(I),Oe=Object.fromEntries(ye.slice(0,-1).map(function(Se,ce,Ne){return[].concat((0,y.default)(Ne.slice(0,ce)),[Se])}).map(function(Se){return[Se.join(I),(0,E.getFieldConfig)(T,Se)]}).filter(function(Se){var ce=(0,C.default)(Se,2),Ne=ce[0],we=ce[1];return we.type=="!group"}));return[ge,Object.keys(Oe)]})),Y=Object.values(G).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).map(function(ge){return K[ge]}).filter(function(ge){return ge&&ge.length}),re=U(Object.values(K).flat()),ne=J(re),ue={conjunction:d,not:p},ae=(0,O.default)(),ve={},se={};return Object.entries(G).map(function(ge){var ye=(0,C.default)(ge,2),Oe=ye[0],Se=ye[1];if(Se.type=="group"||Se.type=="rule_group")ve[Oe]=Se;else{var ce,Ne=Se==null||(ce=Se.properties)===null||ce===void 0?void 0:ce.field,we=K[Ne],je=we?.at(-1);if(!je)ve[Oe]=Se;else{var Ke=ve,Ye=n?n.split(I):[],ke=(0,R.shallowEqual)(Ye,je.split(I).slice(0,Ye.length));ke||(Ye=[]);var at=je.split(I).slice(Ye.length).map(function(He,fe,Ee){return[].concat((0,y.default)(Ye),(0,y.default)(Ee.slice(0,fe)),[He]).join(I)}).map(function(He){return(0,E.normalizeField)(T,He)}).map(function(He){return{f:He,fc:(0,E.getFieldConfig)(T,He)||{}}}).filter(function(He){var fe=He.fc;return fe.type!="!struct"});at.map(function(He,fe){var Ee=He.f,Ce=He.fc,Fe=se[Ee];Fe||(Fe=(0,O.default)(),se[Ee]=Fe,Ke[Fe]={type:"rule_group",id:Fe,children1:{},properties:{conjunction:d,not:!1,field:Ee,mode:Ce.mode}}),Ke=Ke[Fe].children1}),Ke[Oe]=Se}}}),{type:X,id:ae,children1:ve,properties:ue}}},J=function(u){for(var l=(0,y.default)(u).sort(function(p,a){return p.length-a.length}),f=0;f<l.length;f++)for(var T=f+1;T<l.length;T++)l[T].indexOf(l[f])==0&&(l.splice(T,1),T--);return l},k=function(u,l,f,T,p){if(u)return{type:"rule_group",id:(0,O.default)(),children1:(0,b.default)({},u.id,u),properties:{conjunction:p||(0,S.defaultGroupConjunction)(T,f),not:!1,field:l}}},P=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,O.default)(),children1:(0,b.default)({},u.id,u),properties:{conjunction:(0,S.defaultConjunction)(l),not:f}}},m=function(u,l,f,T,p,a,n){var g=[],d=s(u,l,f,T,p,a,g,!1)||s(u,l,f,T,p,a,g,!0);if(!d){n.errors.push(g.join("; ")||"Unknown op ".concat(u,"/").concat(l));return}return d},s=function(u,l,f,T,p,a,n,g){var d=(u=="all"||u=="some")&&(0,R.isJsonLogic)(f[1])&&Object.keys(f[1])[0]=="in",I=!d&&a.settings.groupOperators.includes(u),W=["==","!="],Z=I?0:l-1;(I||W.includes(u)&&Z==1&&f[1]===null)&&(Z=0);var X=u+"/"+Z,G=a.settings.fieldSeparator,z=p.operators[(g?"#":"")+X];if(z){var K,Y=[],re=["<","<=",">",">="];if(re.includes(u)&&l==3)K=f[1],Y=[f[0],f[2]];else if(g)K=f[1],Y=[f[0]];else{var ne=(0,h.default)(f);K=ne[0],Y=ne.slice(1)}if(!(0,R.isJsonLogic)(K)){n.push("Incorrect operands for ".concat(u,": ").concat(JSON.stringify(f)));return}var ue=Object.keys(K)[0],ae=Object.values(K)[0],ve,se,ge;if(p.varKeys.includes(ue)&&typeof ae=="string"&&(ve=ae),I&&(ge=!0,se=Y[0],Y=[]),ue=="reduce"&&Array.isArray(ae)&&ae.length==3){var ye=ae,Oe=(0,C.default)(ye,3),Se=Oe[0],ce=Oe[1],Ne=Oe[2];if((0,R.isJsonLogic)(Se)&&Ne==0&&(0,R.isJsonLogic)(ce)&&Array.isArray(ce["+"])&&ce["+"][0]==1&&(0,R.isJsonLogic)(ce["+"][1])&&ce["+"][1].var=="accumulator")if(ue=Object.keys(Se)[0],ae=Object.values(Se)[0],ue=="filter"){var we=ae,je=(0,C.default)(we,2),Ke=je[0],Ye=je[1];(0,R.isJsonLogic)(Ke)&&(ue=Object.keys(Ke)[0],ae=Object.values(Ke)[0],p.varKeys.includes(ue)&&typeof ae=="string"&&(ve=ae,se=Ye,ge=!0))}else p.varKeys.includes(ue)&&typeof ae=="string"&&(ve=ae,ge=!0)}if(!ve){n.push("Unknown field ".concat(JSON.stringify(K)));return}T&&(ve=[T,ve].join(G)),ve=(0,E.normalizeField)(a,ve);var ke=(0,E.getFieldConfig)(a,ve);if(!ke){n.push("No config for field ".concat(ve));return}var at=z[0];if(z.length>1&&ke&&ke.operators){if(z=z.filter(function(He){return ke.operators.includes(He)}),z.length==0){n.push("No corresponding ops for field ".concat(ve));return}at=z[0]}return{field:ve,fieldConfig:ke,opKey:at,args:Y,having:se}}},c=function o(u,l,f,T,p,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(u){var g=l.length;if((u=="all"||u=="some")&&(0,R.isJsonLogic)(l[1])){var d=Object.keys(l[1])[0];d=="in"&&(l=[l[0],l[1][d][1]],u=u+"-"+d)}var I=m(u,g,l,n,f,T,a);if(I){var W=I.field,Z=I.fieldConfig,X=I.opKey,G=I.args,z=I.having,K=T.operators[X],Y=Z.showNot!==void 0?Z.showNot:T.settings.showNot,re=!0,ne,ue;if(Z.type=="!group"&&z){ne=Object.keys(z)[0],ue=z[ne],Array.isArray(ue)||(ue=[ue]);var ae=ne=="!"&&ue.length==1&&ue[0]&&(0,R.isJsonLogic)(ue[0])&&f.varKeys.includes(Object.keys(ue[0])[0]);ne=="!"&&!ae&&(p=!p,z=z["!"],ne=Object.keys(z)[0],ue=z[ne],Array.isArray(ue)||(ue=[ue]))}p&&re&&K.reversedOp&&(p=!1,X=K.reversedOp,K=T.operators[X]);var ve=(0,L.getWidgetForFieldOp)(T,W,X),se=G.map(function(Ne){return j(Ne,f,T,"val",a,!1,Z,ve,n)});if(!se.filter(function(Ne){return Ne===void 0}).length){var ge;if(Z.type=="!group"&&z){if(f.conjunctions[ne]!==void 0)ge=te(ne,ue,f,T,p,a,W,!0),p=!1;else{var ye,Oe=o(ne,ue,f,T,p&&re,a,W);p&&re&&!(Oe!=null&&(ye=Oe.properties)!==null&&ye!==void 0&&ye.not)&&(p=!1),ge=k(Oe,W,Z,T,f.conjunctions.and)}if(!ge)return;ge.type="rule_group",p&&Object.assign(ge.properties,{not:p}),Object.assign(ge.properties,{field:W,mode:Z.mode,operator:X}),Z.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType})})}else if(Z.type=="!group"&&!z)ge={type:"rule_group",id:(0,O.default)(),children1:{},properties:{conjunction:(0,S.defaultGroupConjunction)(T,Z),not:p,mode:Z.mode,field:W,operator:X}},Z.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType})});else{var Se=se.map(function(Ne){return Ne.asyncListValues}).filter(function(Ne){return Ne!=null}),ce=Se.length?Se[0]:void 0;ge={type:"rule",id:(0,O.default)(),properties:{field:W,operator:X,value:se.map(function(Ne){return Ne.value}),valueSrc:se.map(function(Ne){return Ne.valueSrc}),valueType:se.map(function(Ne){return Ne.valueType}),asyncListValues:ce}},p&&(ge=P(ge,T,p))}return ge}}}}},79620:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromSpel=i._loadFromSpel=void 0;var y=r(e(47452)),h=r(e(91148)),b=r(e(92476)),C=r(e(90890)),O=e(58750),R=r(e(76833)),E=e(79746),L=e(62413),A=e(70889),S=e(20495),M=e(60399),D=r(e(36365));function F(l,f){var T=Object.keys(l);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(l);f&&(p=p.filter(function(a){return Object.getOwnPropertyDescriptor(l,a).enumerable})),T.push.apply(T,p)}return T}function U(l){for(var f=1;f<arguments.length;f++){var T=arguments[f]!=null?arguments[f]:{};f%2?F(Object(T),!0).forEach(function(p){(0,b.default)(l,p,T[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(T)):F(Object(T)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(T,p))})}return l}var N=function(f,T){return $(f,T,!0)};i.loadFromSpel=N;var $=function(f,T){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a={errors:[]},n=(0,E.extendConfig)(T),g=j(n),d,I,W=void 0;try{var Z=O.SpelExpressionEvaluator.compile(f);d=Z._compiledExpression}catch(G){a.errors.push(G)}d&&(M.logger.debug("compiledExpression:",d),I=w(d,a),M.logger.debug("convertedObj:",I,a),W=k(I,g,n,a),W&&W.type!="group"&&W.type!="switch_group"&&(W=u(W,n,I.not)),M.logger.debug("jsTree:",W));var X=W?(0,A.loadTree)(W):void 0;return p?[X,a.errors]:(a.errors.length&&console.warn("Errors while importing from SpEL:",a.errors),X)};i._loadFromSpel=$;var w=function l(f,T){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=f.getType(),n=f.getChildren().map(function(ce){return l(ce,T,f)});if((a=="op-or"||a=="op-and")&&(n=n.reduce(function(ce,Ne){var we=Ne.type==a&&!Ne.not,je=we?Ne.children:[Ne];return[].concat((0,C.default)(ce),(0,C.default)(je))},[])),a=="op-not")return n.length!=1&&T.errors.push("Operator NOT should have 1 child, but got ".concat(n.length,"}")),U(U({},n[0]),{},{not:!n[0].not});if(a=="compound"){n=n.filter(function(ce){var Ne=ce.type=="selection"&&ce.children.length==1&&ce.children[0].type=="boolean"&&ce.children[0].val==!0;return!Ne});var g=n.find(function(ce){return ce.type=="selection"});g&&g.children.length!=1&&T.errors.push("Selection should have 1 child, but got ".concat(g.children.length));var d=g?g.children[0]:null,I=n[n.length-1],W=I.type=="method"&&I.val.methodName=="size"||I.type=="!func"&&I.methodName=="size",Z=I.type=="property"&&I.val=="length",X=n.filter(function(ce){return ce!==g&&ce!==I}),G={type:"compound",children:X};if(W||Z)return{type:"!aggr",filter:d,source:G};if(n=n.filter(function(ce){var Ne=ce.type=="variable"&&ce.val=="this",we=ce.type=="variable"&&ce.val=="root";return!(Ne||we)}),n=n.map(function(ce){return ce.type=="indexer"&&ce.children.length==1?{type:"indexer",val:ce.children[0].val,itype:ce.children[0].type}:ce}),I.type=="method"){var z=n.filter(function(ce){return ce!==I});return{type:"!func",obj:z,methodName:I.val.methodName,args:I.val.args}}if(I.type=="!func"){var K=n.filter(function(ce){return ce!==I});return U(U({},I),{},{obj:K})}}var Y;try{f.getRaw?Y=f.getRaw():f.getValue.length==0&&(Y=f.getValue())}catch(ce){M.logger.error("[spel2js] Error in getValue()",ce)}if(a=="ternary"&&(Y=V(n)),(0,h.default)(Y)==="object"&&Y!==null&&(Y.methodName||Y.functionName)&&(Y.args=Y.args.map(function(ce){return l(ce,T,f)})),a=="list"&&(Y=Y.map(function(ce){return l(ce,T,f)}),!p&&Y.length==1))return Y[0];if(a=="constructorref"){var re=n.find(function(ce){return ce.type=="qualifiedidentifier"}),ne=re?.val;if(!ne){T.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(n)));return}var ue=n.filter(function(ce){return ce.type!="qualifiedidentifier"});return{type:"!new",cls:ne,args:ue}}if(a=="typeref"){var ae=n.find(function(ce){return ce.type=="qualifiedidentifier"}),ve=ae?.val;if(!ve){T.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(n)));return}var se=n.filter(function(ce){return ce.type!="qualifiedidentifier"});return{type:"!type",cls:ve}}if(a=="function"||a=="method"){var ge=Y,ye=ge.functionName,Oe=ge.methodName,Se=ge.args;return{type:"!func",methodName:ye||Oe,isVar:a=="function",args:Se}}return{type:a,children:n,val:Y}},V=function(f){var T=[];function p(a){var n=(0,y.default)(a,3),g=n[0],d=n[1],I=n[2];T.push([g,d]),I?.type=="ternary"?p(I.children):T.push([void 0,I])}return p(f),T},j=function(f){var T={},p=function(K){var Y=f.operators[K];if(Y.spelOps)Y.spelOps.forEach(function(ne){var ue=ne;T[ue]||(T[ue]=[]),T[ue].push(K)});else if(Y.spelOp){var re=Y.spelOp;T[re]||(T[re]=[]),T[re].push(K)}else M.logger.log("[spel] No spelOp for operator ".concat(K))};for(var a in f.operators)p(a);var n={};for(var g in f.conjunctions){var d=f.conjunctions[g],I=d.spelConj||g.toLowerCase();n[I]=g}var W={};for(var Z in f.funcs){var X=f.funcs[Z],G=void 0;typeof X.spelFunc=="string"&&(G=X.spelFunc),G&&(W[G]||(W[G]=[]),W[G].push(Z))}return{operators:T,conjunctions:n,funcs:W}},x=function(f,T){var p=!1,a=f.map(function(n){if(n.type=="variable"||n.type=="property"||n.type=="indexer"&&n.itype=="string")return n.val;p=!0,T.errors.push("Unexpected item in compound: ".concat(JSON.stringify(n)))});return p?void 0:a},H=function l(f,T,p,a,n){if(f!=null){var g=p.settings.fieldSeparator,d={number:"number",string:"text",boolean:"boolean",null:"null"},I=n!=null&&n._groupField?[n?._groupField]:[];if(f.type=="compound"){var W,Z,X=x(f.children,a);if(!X)return;var G=[].concat(I,(0,C.default)(X)),z=((W=f.children)===null||W===void 0||(Z=W[0])===null||Z===void 0?void 0:Z.type)=="variable";return{valueSrc:"field",isVariable:z,value:G.join(g)}}else if(f.type=="variable"||f.type=="property"){var K=[].concat(I,[f.val]),Y=f.type=="variable";return{valueSrc:"field",isVariable:Y,value:K.join(g)}}else if(d[f.type]){var re=f.val,ne=d[f.type];return n!=null&&n.isUnary&&(re=-re),{valueSrc:"value",valueType:ne,value:re}}else if(f.type=="list"){var ue,ae=f.val.map(function(st){return l(st,T,p,a,f)}),ve=ae.length?(ue=ae[0])===null||ue===void 0?void 0:ue.valueType:null,se=ae.map(function(st){return st?.value}),ge="multiselect";return{valueSrc:"value",valueType:ge,value:se}}else if(f.type=="!func"){var ye,Oe=f.obj,Se=f.methodName,ce=f.args,Ne=f.isVar,we=(ye={},(0,b.default)(ye,".contains","like"),(0,b.default)(ye,".startsWith","starts_with"),(0,b.default)(ye,".endsWith","ends_with"),(0,b.default)(ye,"$contains","select_any_in"),(0,b.default)(ye,".equals","multiselect_equals"),(0,b.default)(ye,"CollectionUtils.containsAny()","multiselect_contains"),ye),je=ce.map(function(st){return l(st,T,p,a,U(U({},f),{},{_groupField:n?._groupField}))});if(Se=="contains"&&Oe&&Oe[0].type=="list"){var Ke=Oe.map(function(st){return l(st,T,p,a,f)});if(!(je.length==1&&je[0].valueSrc=="field")){a.errors.push("Expected arg to method ".concat(Se," to be field but got: ").concat(JSON.stringify(je)));return}var Ye=je[0].value;if(!(Ke.length==1&&Ke[0].valueType=="multiselect")){a.errors.push("Expected object of method ".concat(Se," to be inline list but got: ").concat(JSON.stringify(Ke)));return}var ke=we["$"+Se],at=Ke[0];return _(p,a,Ye,ke,[at])}else if(Oe&&Oe[0].type=="property"&&we[Oe[0].val+"."+Se+"()"]){var He=we[Oe[0].val+"."+Se+"()"],fe=je[0].value,Ee=je.slice(1);return _(p,a,fe,He,Ee)}else if(we["."+Se]){var Ce=we["."+Se],Fe=x(Oe,a);if(Fe&&je.length==1){var De=[].concat(I,(0,C.default)(Fe)),Me=De.join(g);return _(p,a,Me,Ce,je)}}else if(Se=="parse"&&Oe&&Oe[0].type=="!new"&&Oe[0].cls.at(-1)=="SimpleDateFormat"){var Ae=Oe[0].args.map(function(st){return l(st,T,p,a,U(U({},f),{},{_groupField:n?._groupField}))});if(!(Ae.length==1&&Ae[0].valueType=="text")){a.errors.push("Expected args of ".concat(Oe[0].cls.join("."),".").concat(Se," to be 1 string but got: ").concat(JSON.stringify(Ae)));return}if(!(je.length==1&&je[0].valueType=="text")){a.errors.push("Expected args of ".concat(Oe[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(je)));return}var $e=Ae[0].value,rt=je[0].value,it=$e.includes(" ")?"datetime":"date",Qe=null,lt=it,ct=(0,E.getFieldConfig)(p,Qe),_e=p.widgets[lt||ct?.mainWidget],gt=_e.valueFormat,pe=(0,D.default)(rt,D.default.ISO_8601),he=pe.isValid()?pe.format(gt):void 0;return{valueSrc:"value",valueType:it,value:he}}else if(Se=="parse"&&Oe&&Oe[0].type=="!type"&&Oe[0].cls.at(-1)=="LocalTime"){if(!(je.length==1&&je[0].valueType=="text")){a.errors.push("Expected args of ".concat(Oe[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(je)));return}var Le=je[0].value,Pe="time",Ve=null,Ge=Pe,xe=(0,E.getFieldConfig)(p,Ve),et=p.widgets[Ge||xe?.mainWidget],We=et.valueFormat,Be=(0,D.default)(Le,"HH:mm:ss"),ft=Be.isValid()?Be.format(We):void 0;return{valueSrc:"value",valueType:Pe,value:ft}}else a.errors.push("Unsupported method ".concat(Se))}else{if(f.type=="op-plus"&&n?.type=="ternary")return s(f,T,p,a);a.errors.push("Can't convert arg of type ".concat(f.type))}}},_=function(f,T,p,a,n){if(!n.filter(function(G){return G===void 0}).length){var g=(0,E.getFieldConfig)(f,p);if(!g){T.errors.push("No config for field ".concat(p));return}var d=(0,L.getWidgetForFieldOp)(f,p,a),I=f.widgets[d||g.mainWidget],W=n.map(function(G){return G.asyncListValues}).filter(function(G){return G!=null}),Z=W.length?W[0]:void 0,X={type:"rule",id:(0,R.default)(),properties:{field:p,operator:a,value:n.map(function(G){return G.value}),valueSrc:n.map(function(G){return G.valueSrc}),valueType:n.map(function(G){return G.valueSrc=="value"&&(I?.type||g?.type)||G.valueType}),asyncListValues:Z}};return X}},te=function(f,T,p,a,n){var g=f.groupFilter,d=f.groupFieldValue;if(d.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(d));var I=d.value,W=_(a,n,I,T,p);if(W){var Z=(0,E.getFieldConfig)(a,I),X=Z?.mode,G=U(U({},g||{}),{},{type:"rule_group",properties:U(U(U({},W.properties),g?.properties||{}),{},{mode:X})});return G.id||(G.id=(0,R.default)()),G}},J=function(f,T,p,a,n,g){var d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(f.type==T.type)if(f.type=="!aggr"){var I=[f.source,T.source].map(function(re){return H(re,a,n,g,U(U({},p),{},{_groupField:d?._groupField}))}),W=(0,y.default)(I,2),Z=W[0],X=W[1];return Z.value==X.value}else{var G=[f,T].map(function(re){return H(re,a,n,g,U(U({},p),{},{_groupField:d?._groupField}))}),z=(0,y.default)(G,2),K=z[0],Y=z[1];return K.value==Y.value}return!1},k=function l(f,T,p,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(f){var g;if(f.type.indexOf("op-")==0){var d=f.type.slice(3),I=(d=="minus"||d=="plus")&&f.children.length==1;if(I)return f.isUnary=!0,l(f.children[0],T,p,a,f);var W=d=="and"&&f.children.length==2&&f.children[0].type=="op-ge"&&f.children[1].type=="op-le",Z=d=="or"&&f.children.length==2&&f.children[0].type=="op-lt"&&f.children[1].type=="op-gt",X=W||Z;if(X){var G=(0,y.default)(f.children[0].children,2),z=G[0],K=G[1],Y=(0,y.default)(f.children[1].children,2),re=Y[0],ne=Y[1],ue=K.type=="number"&&ne.type=="number",ae=J(z,re,f,T,p,a,n);if(ue&&ae){var ve=K.val,se=ne.val,ge={type:"op-between",children:[z,K,ne]};return l(ge,T,p,a,n)}}var ye=T.operators[d],Oe;d=="eq"&&f.children[1].type=="null"?Oe="is_null":d=="ne"&&f.children[1].type=="null"?Oe="is_not_null":d=="le"&&f.children[1].type=="string"&&f.children[1].val==""?(Oe="is_empty",ye=["is_empty"]):d=="gt"&&f.children[1].type=="string"&&f.children[1].val==""?(Oe="is_not_empty",ye=["is_not_empty"]):d=="between"&&(Oe="between",ye=["between"]);var Se=function(){return f.children.map(function($e){return l($e,T,p,a,U(U({},f),{},{_groupField:n?._groupField}))})};if(d=="and"||d=="or"){var ce={},Ne=Se();Ne.forEach(function(Ae){if(Ae){var $e=(0,R.default)();Ae.id=$e,Ae.type!=null?ce[$e]=Ae:a.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(Ae)))}}),g={type:"group",id:(0,R.default)(),children1:ce,properties:{conjunction:T.conjunctions[d],not:f.not}}}else if(ye){var we=Se(),je=we[0],Ke=we.slice(1);if(Oe=ye[0],je)if(je.groupFieldValue){je.groupFieldValue.valueSrc!="field"&&a.errors.push("Expected group field ".concat(JSON.stringify(je)));var Ye=je.groupFieldValue.value,ke=Ke[0];ke&&ke.groupFieldValue&&ke.groupFieldValue.valueSrc=="field"&&ke.groupFieldValue.value==Ye?(Oe="all",Ke=[]):Oe=="equal"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0?(Oe="none",Ke=[]):Oe=="greater"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0&&(Oe="some",Ke=[]),g=te(je,Oe,Ke,p,a)}else{je.valueSrc!="field"&&a.errors.push("Expected field ".concat(JSON.stringify(je)));var at=je.value;if(ye.length>1){M.logger.warn("[spel] Spel operator ".concat(d," can be mapped to ").concat(ye));var He=ye.map(function(Ae){return{op:Ae,widget:(0,L.getWidgetForFieldOp)(p,at,Ae)}});if(d=="eq"||d=="ne"){var fe=He.find(function(Ae){var $e=Ae.op,rt=Ae.widget;return rt&&rt!="field"});Oe=fe.op}}g=_(p,a,at,Oe,Ke)}}else n||(g=P(f,T,p,a)),g||a.errors.push("Can't convert op ".concat(d))}else if(f.type=="!aggr"){var Ee,Ce=l(f.source,T,p,a,U(U({},f),{},{_groupField:n?._groupField})),Fe=l(f.filter,T,p,a,U(U({},f),{},{_groupField:Ce?.value}));((Ee=Fe)===null||Ee===void 0?void 0:Ee.type)=="rule"&&(Fe=u(Fe,p)),g={groupFilter:Fe,groupFieldValue:Ce},n||(g=void 0,a.errors.push("Unexpected !aggr in root"))}else if(f.type=="ternary"){var De={};f.val.forEach(function(Ae){var $e=(0,y.default)(Ae,2),rt=$e[0],it=$e[1],Qe=m(rt,it,T,p,a,f);Qe&&(De[Qe.id]=Qe)}),g={type:"switch_group",id:(0,R.default)(),children1:De,properties:{}}}else if(g=H(f,T,p,a,n),g&&!g.type&&!n){var Me=P(f,T,p,a);Me?g=Me:(g=void 0,a.errors.push("Can't convert rule of type ".concat(f.type,", it looks like var/literal")))}return g}},P=function(f,T,p,a){var n={},g=null,d=m(g,f,T,p,a);d&&(n[d.id]=d);var I={type:"switch_group",id:(0,R.default)(),children1:n,properties:{}};return I},m=function(f,T,p,a,n){var g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,d=c(a,n,p,T,g),I;return f?(I=k(f,p,a,n,g),I&&I.type?(I.type!="group"&&(I=u(I,a)),I.type="case_group"):(n.errors.push("Unexpected case: ".concat(JSON.stringify(I))),I=void 0)):I={id:(0,R.default)(),type:"case_group",properties:{}},I&&(I.properties=U(U({},I.properties),d)),I},s=function(f,T,p,a){var n=[];function g(d){d.map(function(I){if(I.type=="op-plus")g(I.children);else{var W=H(I,T,p,a,f);W?n.push(W):a.errors.push("Can't convert ".concat(I.type," in concatenation"))}})}return g(f.children),{valueSrc:"value",valueType:"case_value",value:n}},c=function(f,T,p,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,g={},d;a?.type=="op-plus"?d=s(a,p,f,T):d=H(a,p,f,T,n);var I=f.widgets.case_value,W=I?.spelImportValue;if(W){var Z=W(d),X=(0,y.default)(Z,2),G=X[0],z=X[1];z.map(function(K){return T.errors.push(K)}),G&&(g={value:[G],valueSrc:["value"],valueType:["case_value"]})}else T.errors.push("No fucntion to import case value");return g},o=function(f,T,p,a,n){if(f)return{type:"rule_group",id:(0,R.default)(),children1:(0,b.default)({},f.id,f),properties:{conjunction:n||(0,S.defaultGroupConjunction)(a,p),not:!1,field:T}}},u=function(f,T){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,R.default)(),children1:(0,b.default)({},f.id,f),properties:{conjunction:(0,S.defaultConjunction)(T),not:p||!1}}}},70889:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.isImmutableTree=i.getTree=i.checkTree=void 0,Object.defineProperty(i,"isJsonLogic",{enumerable:!0,get:function(){return E.isJsonLogic}}),i.loadTree=i.isValidTree=i.isTree=void 0;var h=r(e(91148)),b=A(e(40745)),C=e(16226),O=e(79746),R=e(31775),E=e(60399);function L(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,j=new WeakMap;return(L=function(H){return H?j:V})(w)}function A(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||y(w)!=="object"&&typeof w!="function")return{default:w};var j=L(V);if(j&&j.has(w))return j.get(w);var x={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var te=H?Object.getOwnPropertyDescriptor(w,_):null;te&&(te.get||te.set)?Object.defineProperty(x,_,te):x[_]=w[_]}return x.default=w,j&&j.set(w,x),x}var S=function(V){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(V){var H=V;return H=H.toJS(),j&&(H=(0,R.getLightTree)(H,x)),H}};i.getTree=S;var M=function(V){if(U(V))return V;if(N(V))return $(V);if(typeof V=="string"&&V.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof V=="string")return $(JSON.parse(V));throw"Can't load tree!"};i.loadTree=M;var D=function(V,j){if(V){var x=(0,O.extendConfig)(j);return(0,C.validateTree)(V,null,x,x)}};i.checkTree=D;var F=function(V){return(0,R.getTreeBadFields)(V).length==0};i.isValidTree=F;var U=function(V){return b.Map.isMap(V)};i.isImmutableTree=U;var N=function(V){return(0,h.default)(V)=="object"&&(V.type=="group"||V.type=="switch_group")};i.isTree=N;function $(w){return(0,b.fromJS)(w,function(V,j){var x;if(V=="properties"){x=j.toOrderedMap();for(var H=0;H<2;H++){var _;((_=x.get("value"))===null||_===void 0?void 0:_.get(H))===null&&(x=x.setIn(["value",H],void 0))}}else if(V=="value"&&j.get(0)&&j.get(0).toJS!==void 0){var te=j.get(0).toJS();te.func?x=j.toOrderedMap():x=b.default.List.of(te)}else V=="asyncListValues"?x=j.toJS():V=="children1"&&b.default.Iterable.isIndexed(j)?x=new b.default.OrderedMap(j.map(function(J){return[J.get("id"),J]})):x=b.default.Iterable.isIndexed(j)?j.toList():j.toOrderedMap();return x})}},96650:(ee,i,e)=>{"use strict";var r,y=e(59018),h=e(91148);r={value:!0},Object.defineProperty(i,"I4",{enumerable:!0,get:function(){return D.default}}),r=void 0,Object.defineProperty(i,"Ib",{enumerable:!0,get:function(){return O.default}}),r=r=r=void 0,Object.defineProperty(i,"AE",{enumerable:!0,get:function(){return C.default}}),r=i.cQ=void 0;var b=y(e(92476)),C=y(e(65394)),O=y(e(17079)),R=U(e(21058));r=R;var E=U(e(9504));r=E;var L=U(e(7614));r=L;var A=U(e(22369));r=A;var S=U(e(35926)),M=U(e(2986));r=M;var D=y(e(20896));function F(V){if(typeof WeakMap!="function")return null;var j=new WeakMap,x=new WeakMap;return(F=function(_){return _?x:j})(V)}function U(V,j){if(!j&&V&&V.__esModule)return V;if(V===null||h(V)!=="object"&&typeof V!="function")return{default:V};var x=F(j);if(x&&x.has(V))return x.get(V);var H={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in V)if(te!=="default"&&Object.prototype.hasOwnProperty.call(V,te)){var J=_?Object.getOwnPropertyDescriptor(V,te):null;J&&(J.get||J.set)?Object.defineProperty(H,te,J):H[te]=V[te]}return H.default=V,x&&x.set(V,H),H}function N(V,j){var x=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);j&&(H=H.filter(function(_){return Object.getOwnPropertyDescriptor(V,_).enumerable})),x.push.apply(x,H)}return x}function $(V){for(var j=1;j<arguments.length;j++){var x=arguments[j]!=null?arguments[j]:{};j%2?N(Object(x),!0).forEach(function(H){(0,b.default)(V,H,x[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(x)):N(Object(x)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(x,H))})}return V}var w=$($($({},S),R),E);i.cQ=w},78669:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var y=r(e(68404)),h=y.default.createContext();i.default=h},42444:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var h=r(e(47452)),b=r(e(92476)),C=r(e(40745)),O=e(31775),R=e(20495),E=$(e(46724)),L=r(e(76833)),A=e(79746),S=e(62413),M=e(60399),D=e(16226),F=r(e(50234)),U=r(e(74937));function N(X){if(typeof WeakMap!="function")return null;var G=new WeakMap,z=new WeakMap;return(N=function(Y){return Y?z:G})(X)}function $(X,G){if(!G&&X&&X.__esModule)return X;if(X===null||y(X)!=="object"&&typeof X!="function")return{default:X};var z=N(G);if(z&&z.has(X))return z.get(X);var K={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var re in X)if(re!=="default"&&Object.prototype.hasOwnProperty.call(X,re)){var ne=Y?Object.getOwnPropertyDescriptor(X,re):null;ne&&(ne.get||ne.set)?Object.defineProperty(K,re,ne):K[re]=X[re]}return K.default=X,z&&z.set(X,K),K}function w(X,G){var z=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!z){if(Array.isArray(X)||(z=V(X))||G&&X&&typeof X.length=="number"){z&&(X=z);var K=0,Y=function(){};return{s:Y,n:function(){return K>=X.length?{done:!0}:{done:!1,value:X[K++]}},e:function(ve){throw ve},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,ne=!1,ue;return{s:function(){z=z.call(X)},n:function(){var ve=z.next();return re=ve.done,ve},e:function(ve){ne=!0,ue=ve},f:function(){try{!re&&z.return!=null&&z.return()}finally{if(ne)throw ue}}}}function V(X,G){if(X){if(typeof X=="string")return j(X,G);var z=Object.prototype.toString.call(X).slice(8,-1);if(z==="Object"&&X.constructor&&(z=X.constructor.name),z==="Map"||z==="Set")return Array.from(X);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return j(X,G)}}function j(X,G){(G==null||G>X.length)&&(G=X.length);for(var z=0,K=new Array(G);z<G;z++)K[z]=X[z];return K}function x(X,G){var z=Object.keys(X);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(X);G&&(K=K.filter(function(Y){return Object.getOwnPropertyDescriptor(X,Y).enumerable})),z.push.apply(z,K)}return z}function H(X){for(var G=1;G<arguments.length;G++){var z=arguments[G]!=null?arguments[G]:{};G%2?x(Object(z),!0).forEach(function(K){(0,b.default)(X,K,z[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(z)):x(Object(z)).forEach(function(K){Object.defineProperty(X,K,Object.getOwnPropertyDescriptor(z,K))})}return X}var _=function(G,z,K,Y,re,ne){var ue=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,ae=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},ve=ne.settings.shouldCreateEmptyGroup,se=z.push(Y),ge=!ve,ye=!!(ae!=null&&ae.isDefaultCase),Oe=G;return G=c(G,z,K,Y,(0,R.defaultGroupProperties)(ne).merge(re||{}),ne,ue),G!==Oe&&(!ue&&!ye&&(G=G.setIn((0,O.expandTreePath)(se,"children1"),new C.default.OrderedMap),ge&&(G=c(G,se,"rule",(0,L.default)(),(0,R.defaultRuleProperties)(ne),ne))),G=(0,O.fixPathsInTree)(G)),G},te=function(G,z,K){G=o(G,z);var Y=K.settings.canLeaveEmptyGroup,re=z.slice(0,-1),ne=!(0,O.hasChildren)(G,re);return ne&&!Y&&(G=(0,O.fixEmptyGroupsInTree)(G),(0,O.isEmptyTree)(G)&&!Y&&(G=c(G,new C.default.List,"rule",(0,L.default)(),(0,R.defaultRuleProperties)(K),K))),G=(0,O.fixPathsInTree)(G),G},J=function(G,z,K){G=o(G,z);var Y=K.settings.canLeaveEmptyGroup,re=z.pop(),ne=G.getIn((0,O.expandTreePath)(re)),ue=ne.getIn(["properties","field"]),ae=ne.getIn(["properties","operator"]),ve=ne.getIn(["properties","value",0]),se=ue?(0,A.getFieldConfig)(K,ue):null,ge=ae?(0,A.getOperatorConfig)(K,ae,ue):null,ye=ue&&ae&&ge.cardinality!=0,Oe=ne.get("type")=="rule_group",Se=!(0,O.hasChildren)(G,re),ce=Oe?ye&&se.initialEmptyWhere:Y;return Se&&!ce&&(Oe&&(G=G.deleteIn((0,O.expandTreePath)(re))),G=(0,O.fixEmptyGroupsInTree)(G),(0,O.isEmptyTree)(G)&&!Y&&(G=c(G,new C.default.List,"rule",(0,L.default)(),(0,R.defaultRuleProperties)(K),K))),G=(0,O.fixPathsInTree)(G),G},k=function(G,z,K){return G.setIn((0,O.expandTreePath)(z,"properties","not"),K)},P=function(G,z,K){return(0,O.removeIsLockedInTree)(G.setIn((0,O.expandTreePath)(z,"properties","isLocked"),K))},m=function(G,z,K){return G.setIn((0,O.expandTreePath)(z,"properties","conjunction"),K)},s=function X(G,z,K){K&&Array.isArray(K)&&(z.children1=new C.default.OrderedMap(K.reduce(function(Y,re){var ne=(0,L.default)(),ue=H(H({},re),{},{properties:(0,R.defaultItemProperties)(G,re).merge(re.properties||{}),id:ne});return X(G,ue,ue.children1),H(H({},Y),{},(0,b.default)({},ne,new C.default.Map(ue)))},{})))},c=function(G,z,K,Y,re,ne){var ue=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(K=="switch_group")throw new Error("Can't add switch_group programmatically");var ae=ne.settings,ve=ae.maxNumberOfCases,se=ae.maxNumberOfRules,ge=ae.maxNesting,ye=G.get("type"),Oe=ye=="switch_group",Se=G.getIn((0,O.expandTreePath)(z)),ce=Oe?G.getIn((0,O.expandTreePath)(z.take(2))):null,Ne=(0,O.expandTreePath)(z,"children1"),we=G.getIn(Ne),je=!!we&&we.size,Ke=je?we.size:null,Ye,ke;K=="case_group"?(Ye=Ke,ke=ve):K=="group"?(Ye=z.size,ke=ge):Se?.get("type")=="rule_group"||(Ye=Oe?(0,O.getTotalRulesCountInTree)(ce):(0,O.getTotalRulesCountInTree)(G),ke=se);var at=ke&&Ye?Ye<ke:!0,He={type:K,id:Y,properties:re};s(ne,He,ue);var fe=K=="case_group"&&je&&we.last().get("children1")==null;if(at){var Ee=new C.default.OrderedMap((0,b.default)({},Y,new C.default.Map(He)));if(!je)G=G.setIn(Ne,Ee);else if(fe){var Ce,Fe=we.last(),De=new C.default.OrderedMap((Ce={},(0,b.default)(Ce,Y,new C.default.Map(He)),(0,b.default)(Ce,Fe.get("id"),Fe),Ce));G=G.deleteIn((0,O.expandTreePath)(Ne,"children1",Fe.get("id"))),G=G.mergeIn(Ne,De)}else G=G.mergeIn(Ne,Ee);G=(0,O.fixPathsInTree)(G)}return G},o=function(G,z){return G=G.deleteIn((0,O.expandTreePath)(z)),G=(0,O.fixPathsInTree)(G),G},u=function(G,z,K,Y,re){var ne=(0,O.getItemByPath)(G,z),ue=z.pop(),ae=z.size>1?(0,O.getItemByPath)(G,ue):null,ve=ae?ae.get("children1"):null,se=(0,O.getItemByPath)(G,K),ge=Y==E.PLACEMENT_APPEND||Y==E.PLACEMENT_PREPEND?K:K.pop(),ye=Y==E.PLACEMENT_APPEND||Y==E.PLACEMENT_PREPEND?se:K.size>1?(0,O.getItemByPath)(G,ge):null,Oe=ye?ye.get("children1"):null;if(!ae||!ye||!ne)return G;var Se=ae.get("id")==ye.get("id"),ce=ge.size<ue.size&&(0,M.deepEqual)(ge.toArray(),ue.toArray().slice(0,ge.size)),Ne=ge.size>ue.size&&(0,M.deepEqual)(ue.toArray(),ge.toArray().slice(0,ue.size)),we=null,je=null;ce?we=C.default.List(ue.toArray().slice(ge.size)):Ne&&(je=C.default.List(ge.toArray().slice(ue.size)));var Ke=Oe,Ye=ve;return Ne||(Ye=Ye.delete(ne.get("id"))),Se?Ke=Ye:ce&&(Ke=Ke.updateIn((0,O.expandTreeSubpath)(we,"children1"),function(ke){return Ye})),Y==E.PLACEMENT_BEFORE||Y==E.PLACEMENT_AFTER?Ke=C.default.OrderedMap().withMutations(function(ke){var at=w(Ke.entries()),He;try{for(at.s();!(He=at.n()).done;){var fe=(0,h.default)(He.value,2),Ee=fe[0],Ce=fe[1];Ee==se.get("id")&&Y==E.PLACEMENT_BEFORE&&ke.set(ne.get("id"),ne),ke.set(Ee,Ce),Ee==se.get("id")&&Y==E.PLACEMENT_AFTER&&ke.set(ne.get("id"),ne)}}catch(Fe){at.e(Fe)}finally{at.f()}}):Y==E.PLACEMENT_APPEND?Ke=Ke.merge((0,b.default)({},ne.get("id"),ne)):Y==E.PLACEMENT_PREPEND&&(Ke=C.default.OrderedMap((0,b.default)({},ne.get("id"),ne)).merge(Ke)),Ne&&(Ye=Ye.updateIn((0,O.expandTreeSubpath)(je,"children1"),function(ke){return Ke}),Ye=Ye.delete(ne.get("id"))),!Se&&!ce&&(G=G.updateIn((0,O.expandTreePath)(ue,"children1"),function(ke){return Ye})),Ne||(G=G.updateIn((0,O.expandTreePath)(ge,"children1"),function(ke){return Ke})),G=(0,O.fixPathsInTree)(G),G},l=function(G,z,K,Y){if(!K)return o(G,z);var re=Y.settings,ne=re.fieldSeparator,ue=re.setOpOnChangeField,ae=re.showErrorMessage;Array.isArray(K)&&(K=K.join(ne));var ve=G.getIn((0,O.expandTreePath)(z,"type")),se=G.getIn((0,O.expandTreePath)(z,"properties")),ge=ve=="rule_group",ye=(0,A.getFieldConfig)(Y,K),Oe=ye.type=="!group",Se=Oe&&ye.mode=="array",ce=ge!=Oe,Ne=se.get("operator"),we=se.get("operatorOptions"),je=se.get("field"),Ke=se.get("value"),Ye=se.get("valueSrc",new C.default.List),ke=se.get("valueType",new C.default.List),at=ye&&ye.operators.indexOf(Ne)!==-1?Ne:null,He=null,fe=(0,S.getOperatorsForField)(Y,K);if(fe&&fe.length==1)He=fe[0];else if(fe&&fe.length>1){var Ee=w(ue||[]),Ce;try{for(Ee.s();!(Ce=Ee.n()).done;){var Fe=Ce.value;if(Fe=="keep"&&!ce?He=at:Fe=="default"?He=(0,R.defaultOperator)(Y,K,!1):Fe=="first"&&(He=(0,S.getFirstOperator)(Y,K)),He)break}}catch(lt){Ee.e(lt)}finally{Ee.f()}}if(!Oe&&!ye.operators)return console.warn("Type ".concat(ye.type," is not supported")),G;if(ge&&!Oe&&(G=G.setIn((0,O.expandTreePath)(z,"type"),"rule"),G=G.deleteIn((0,O.expandTreePath)(z,"children1")),G=G.setIn((0,O.expandTreePath)(z,"properties"),new C.default.OrderedMap)),Oe){G=G.setIn((0,O.expandTreePath)(z,"type"),"rule_group");var De=(0,S.getNewValueForFieldOp)(Y,Y,se,K,He,"field",!0),Me=De.canReuseValue,Ae=De.newValue,$e=De.newValueSrc,rt=De.newValueType,it=De.operatorCardinality,Qe=(0,R.defaultGroupProperties)(Y,ye).merge({field:K,mode:ye.mode});return Se&&(Qe=Qe.merge({operator:He,value:Ae,valueSrc:$e,valueType:rt})),G=G.setIn((0,O.expandTreePath)(z,"children1"),new C.default.OrderedMap),G=G.setIn((0,O.expandTreePath)(z,"properties"),Qe),ye.initialEmptyWhere&&it==1||(G=c(G,z,"rule",(0,L.default)(),(0,R.defaultRuleProperties)(Y,K),Y)),G=(0,O.fixPathsInTree)(G),G}return G.updateIn((0,O.expandTreePath)(z,"properties"),function(lt){return lt.withMutations(function(ct){var _e=(0,S.getNewValueForFieldOp)(Y,Y,ct,K,He,"field",!0),gt=_e.canReuseValue,pe=_e.newValue,he=_e.newValueSrc,Le=_e.newValueType,Pe=_e.newValueError;ae&&(ct=ct.set("valueError",Pe));var Ve=gt?we:(0,R.defaultOperatorOptions)(Y,He,K);return ct.set("field",K).set("operator",He).set("operatorOptions",Ve).set("value",pe).set("valueSrc",he).set("valueType",Le).delete("asyncListValues")})})},f=function(G,z,K,Y){var re=Y.settings.showErrorMessage,ne=G.getIn((0,O.expandTreePath)(z,"properties")),ue=G.getIn((0,O.expandTreePath)(z,"children1")),ae=ne.get("field"),ve=(0,A.getFieldConfig)(Y,ae),se=ve.type=="!group",ge=(0,A.getOperatorConfig)(Y,K,ae),ye=ge?(0,M.defaultValue)(ge.cardinality,1):null;return G=G.updateIn((0,O.expandTreePath)(z,"properties"),function(Oe){return Oe.withMutations(function(Se){var ce=Se.get("field"),Ne=Se.get("operatorOptions"),we=Se.get("value",new C.default.List),je=Se.get("valueSrc",new C.default.List),Ke=Se.get("operator"),Ye=(0,S.getNewValueForFieldOp)(Y,Y,Se,ce,K,"operator",!0),ke=Ye.canReuseValue,at=Ye.newValue,He=Ye.newValueSrc,fe=Ye.newValueType,Ee=Ye.newValueError;re&&(Se=Se.set("valueError",Ee));var Ce=ke?Ne:(0,R.defaultOperatorOptions)(Y,K,ce);return ke||(Se=Se.delete("asyncListValues")),Se.set("operator",K).set("operatorOptions",Ce).set("value",at).set("valueSrc",He).set("valueType",fe)})}),se&&ye==0&&ue.size==0&&(G=c(G,z,"rule",(0,L.default)(),(0,R.defaultRuleProperties)(Y,ae),Y)),G},T=function(G,z,K,Y,re,ne,ue,ae){var ve=ne.settings,se=ve.fieldSeparator,ge=ve.showErrorMessage,ye,Oe=G.getIn((0,O.expandTreePath)(z,"properties","valueSrc",K+""))||null;Oe==="field"&&Array.isArray(Y)&&(Y=Y.join(se));var Se=G.getIn((0,O.expandTreePath)(z,"properties","field"))||null,ce=G.getIn((0,O.expandTreePath)(z,"properties","operator"))||null,Ne=(0,A.getOperatorConfig)(ne,ce,Se),we=ce?(0,M.defaultValue)(Ne.cardinality,1):null,je=!1,Ke=re||g(Y,Oe,ne),Ye=!1,ke=(0,D.validateValue)(ne,Se,Se,ce,Y,Ke,Oe,ue,Ye,je),at=(0,h.default)(ke,2),He=at[0],fe=at[1],Ee=!He;if(fe!==Y&&(Y=fe),ge){var Ce=(0,S.getWidgetForFieldOp)(ne,Se,ce,Oe),Fe=(0,A.getFieldWidgetConfig)(ne,Se,ce,Ce,Oe),De=Array.from({length:we},function(_e,gt){return G.getIn((0,O.expandTreePath)(z,"properties","valueSrc",gt+""))||null});if(Ne&&Ne.validateValues&&De.filter(function(_e){return _e=="value"||_e==null}).length==we){var Me=Array.from({length:we},function(_e,gt){return gt==K?Y:G.getIn((0,O.expandTreePath)(z,"properties","value",gt+""))||null}),Ae=Fe&&Fe.toJS?Me.map(function(_e){return Fe.toJS(_e,Fe)}):Me,$e=Ne.validateValues(Ae);G=G.setIn((0,O.expandTreePath)(z,"properties","valueError",we),$e)}}var rt=G.getIn((0,O.expandTreePath)(z,"properties","value"));rt||(G=G.setIn((0,O.expandTreePath)(z,"properties","value"),new C.default.List(new Array(we))).setIn((0,O.expandTreePath)(z,"properties","valueType"),new C.default.List(new Array(we))).setIn((0,O.expandTreePath)(z,"properties","valueError"),new C.default.List(new Array(we))));var it=G.getIn((0,O.expandTreePath)(z,"properties","value",K+"")),Qe=G.getIn((0,O.expandTreePath)(z,"properties","valueError",K)),lt=it==null,ct=!!Qe;return(Ee||ge)&&(G=G.deleteIn((0,O.expandTreePath)(z,"properties","asyncListValues")),typeof Y>"u"?(G=G.setIn((0,O.expandTreePath)(z,"properties","value",K+""),void 0),G=G.setIn((0,O.expandTreePath)(z,"properties","valueType",K+""),null)):(ue&&(G=G.setIn((0,O.expandTreePath)(z,"properties","asyncListValues"),ue)),G=G.setIn((0,O.expandTreePath)(z,"properties","value",K+""),Y),G=G.setIn((0,O.expandTreePath)(z,"properties","valueType",K+""),Ke),ye=ae&&!lt&&!ct)),ge&&(G=G.setIn((0,O.expandTreePath)(z,"properties","valueError",K),He)),ae&&(Ee&&ct||!Ee&&!ct)&&(G=G.setIn((0,O.expandTreePath)(z,"properties","valueError",K),He),ye=!1),{tree:G,isInternalValueChange:ye}},p=function(G,z,K,Y,re){var ne=re.settings.showErrorMessage,ue=G.getIn((0,O.expandTreePath)(z,"properties","field"))||null,ae=G.getIn((0,O.expandTreePath)(z,"properties","operator"))||null;if(G=G.setIn((0,O.expandTreePath)(z,"properties","value",K+""),void 0),G=G.setIn((0,O.expandTreePath)(z,"properties","valueType",K+""),null),G=G.deleteIn((0,O.expandTreePath)(z,"properties","asyncListValues")),ne){G=G.setIn((0,O.expandTreePath)(z,"properties","valueError",K),null);var ve=(0,A.getOperatorConfig)(re,ae,ue),se=ae?(0,M.defaultValue)(ve.cardinality,1):null;ve.validateValues&&(G=G.setIn((0,O.expandTreePath)(z,"properties","valueError",se),null))}if(typeof Y>"u"?G=G.setIn((0,O.expandTreePath)(z,"properties","valueSrc",K+""),null):G=G.setIn((0,O.expandTreePath)(z,"properties","valueSrc",K+""),Y),Y){var ge=G.getIn((0,O.expandTreePath)(z,"properties")),ye=(0,S.getNewValueForFieldOp)(re,re,ge,ue,ae,"valueSrc",!0),Oe=ye.canReuseValue,Se=ye.newValue,ce=ye.newValueSrc,Ne=ye.newValueType,we=ye.newValueError;!Oe&&ce.get(K)==Y&&(G=G.setIn((0,O.expandTreePath)(z,"properties","value",K+""),Se.get(K)),G=G.setIn((0,O.expandTreePath)(z,"properties","valueType",K+""),Ne.get(K)))}return G},a=function(G,z,K,Y){return G.setIn((0,O.expandTreePath)(z,"properties","operatorOptions",K),Y)},n=function(G,z){var K=z.settings.canLeaveEmptyGroup;return K||(G=(0,O.fixEmptyGroupsInTree)(G)),G},g=function(G,z,K){var Y=null;if(G){if(z==="field"){var re=(0,A.getFieldConfig)(K,G);re&&(Y=re.type)}else if(z==="func"){var ne=G.get("func");if(ne){var ue=(0,A.getFuncConfig)(K,ne);ue&&(Y=ue.returnType)}}}return Y},d=function(G,z){var K=G.getIn((0,O.expandTreePath)(z,"properties","field"))||null;return K},I={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},W=function(G,z){var K=["config","asyncListValues","__isInternal"],Y=[E.SET_TREE,E.SET_DRAG_START,E.SET_DRAG_PROGRESS,E.SET_DRAG_END],re=(0,U.default)((0,F.default)(G,K),M.applyToJS),ne=G.path&&d(z.tree,G.path)||G.field;return ne&&(re.affectedField=ne),(Y.includes(G.type)||G.type.indexOf("@@redux")==0)&&(re=null),re},Z=function(G,z,K){var Y=(0,R.defaultRoot)(G),re=z||Y,ne=H({tree:re},I);return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne,ae=arguments.length>1?arguments[1]:void 0,ve={__isInternalValueChange:void 0,__lastAction:void 0},se={},ge=W(ae,ue);switch(ae.type){case E.SET_TREE:{var ye=K(ae.config,ae.tree);se.tree=ye;break}case E.ADD_CASE_GROUP:{se.tree=_(ue.tree,ae.path,"case_group",ae.id,ae.properties,ae.config,ae.children,ae.meta);break}case E.ADD_GROUP:{se.tree=_(ue.tree,ae.path,"group",ae.id,ae.properties,ae.config,ae.children,ae.meta);break}case E.REMOVE_GROUP:{se.tree=te(ue.tree,ae.path,ae.config);break}case E.ADD_RULE:{se.tree=c(ue.tree,ae.path,ae.ruleType,ae.id,ae.properties,ae.config,ae.children);break}case E.REMOVE_RULE:{se.tree=J(ue.tree,ae.path,ae.config);break}case E.SET_CONJUNCTION:{se.tree=m(ue.tree,ae.path,ae.conjunction);break}case E.SET_NOT:{se.tree=k(ue.tree,ae.path,ae.not);break}case E.SET_FIELD:{se.tree=l(ue.tree,ae.path,ae.field,ae.config);break}case E.SET_LOCK:{se.tree=P(ue.tree,ae.path,ae.lock);break}case E.SET_OPERATOR:{se.tree=f(ue.tree,ae.path,ae.operator,ae.config);break}case E.SET_VALUE:{var Oe=T(ue.tree,ae.path,ae.delta,ae.value,ae.valueType,ae.config,ae.asyncListValues,ae.__isInternal),Se=Oe.tree,ce=Oe.isInternalValueChange;se.__isInternalValueChange=ce,se.tree=Se;break}case E.SET_VALUE_SRC:{se.tree=p(ue.tree,ae.path,ae.delta,ae.srcKey,ae.config);break}case E.SET_OPERATOR_OPTION:{se.tree=a(ue.tree,ae.path,ae.name,ae.value);break}case E.MOVE_ITEM:{se.tree=u(ue.tree,ae.fromPath,ae.toPath,ae.placement,ae.config);break}case E.SET_DRAG_START:{se.dragStart=ae.dragStart,se.dragging=ae.dragging,se.mousePos=ae.mousePos;break}case E.SET_DRAG_PROGRESS:{se.mousePos=ae.mousePos,se.dragging=ae.dragging;break}case E.SET_DRAG_END:{se.tree=n(ue.tree,G),se=H(H({},se),I);break}default:break}return ge&&(se.__lastAction=ge),H(H(H({},ue),ve),se)}};i.default=Z},3684:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.simulateAsyncFetch=i.mergeListValues=i.listValueToOption=i.getListValue=void 0;var y=r(e(79788)),h=r(e(90890)),b=r(e(62052)),C=e(60399),O=function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var F=(0,b.default)(y.default.mark(function U(N,$,w){var V,j,x,H,_,te,J,k;return y.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return V=w.pageSize!=null?w.pageSize:M,j=(0,C.listValuesToArray)(S).filter(function(s){var c=s.title;return N==null?!0:c.toUpperCase().indexOf(N.toUpperCase())!=-1}),x=V?Math.ceil(j.length/V):0,H=$||0,_=V?Math.ceil(H/V):null,te=V?j.slice(H,H+V):j,J=V?H+te.length:null,k=V?J<j.length:!1,console.debug("simulateAsyncFetch",{search:N,offset:$,values:te,hasMore:k,filtered:j}),m.next=11,(0,C.sleep)(D);case 11:return m.abrupt("return",{values:te,hasMore:k});case 12:case"end":return m.stop()}},U)}));return function(U,N,$){return F.apply(this,arguments)}}()};i.simulateAsyncFetch=O;var R=function(S,M){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!M)return S;var F=S||[],U=M.filter(function($){return F.find(function(w){return w.value==$.value})==null}),N=D?[].concat((0,h.default)(U),(0,h.default)(F)):[].concat((0,h.default)(F),(0,h.default)(U));return N};i.mergeListValues=R;var E=function(S){if(S==null)return null;var M=S.title,D=S.value,F=S.disabled,U=S.groupTitle,N=S.renderTitle,$={title:M,value:D};return F&&($.disabled=F),U&&($.groupTitle=U),N&&($.renderTitle=N),$};i.listValueToOption=E;var L=function(S,M){return(0,C.mapListValues)(M,function(D){return D.value===S?D:null}).filter(function(D){return D!==null}).shift()};i.getListValue=L},79746:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeField=i.getOperatorConfig=i.getFuncConfig=i.getFuncArgConfig=i.getFieldWidgetConfig=i.getFieldRawConfig=i.getFieldConfig=i.extendConfig=i.createConfigMemo=void 0;var y=r(e(90890)),h=r(e(92476)),b=r(e(91148)),C=r(e(63955)),O=r(e(76833)),R=r(e(9094)),E=e(42009),L=r(e(36365)),A=e(60399),S=e(62413),M=r(e(29521)),D=r(e(7275));function F(p,a){var n=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);a&&(g=g.filter(function(d){return Object.getOwnPropertyDescriptor(p,d).enumerable})),n.push.apply(n,g)}return n}function U(p){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?F(Object(n),!0).forEach(function(g){(0,h.default)(p,g,n[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(n,g))})}return p}function N(p,a){var n=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!n){if(Array.isArray(p)||(n=$(p))||a&&p&&typeof p.length=="number"){n&&(p=n);var g=0,d=function(){};return{s:d,n:function(){return g>=p.length?{done:!0}:{done:!1,value:p[g++]}},e:function(G){throw G},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I=!0,W=!1,Z;return{s:function(){n=n.call(p)},n:function(){var G=n.next();return I=G.done,G},e:function(G){W=!0,Z=G},f:function(){try{!I&&n.return!=null&&n.return()}finally{if(W)throw Z}}}}function $(p,a){if(p){if(typeof p=="string")return w(p,a);var n=Object.prototype.toString.call(p).slice(8,-1);if(n==="Object"&&p.constructor&&(n=p.constructor.name),n==="Map"||n==="Set")return Array.from(p);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(p,a)}}function w(p,a){(a==null||a>p.length)&&(a=p.length);for(var n=0,g=new Array(a);n<a;n++)g[n]=p[n];return g}var V=["conjunctions","fields","types","operators","widgets","settings","funcs"],j=function(a){return(0,D.default)(a,V)},x=function(){var a=new Map,n=2,g=0,d=function(X){var G=H(X,++g);return a.size+1>n&&a.delete(a.keys()[0]),a.set(X,G),G},I=function(X){var G=N(a.keys()),z;try{var K=function(){var se=z.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:a.get(se)}};for(G.s();!(z=G.n()).done;){var Y=K();if((0,b.default)(Y)==="object")return Y.v}}catch(ve){G.e(ve)}finally{G.f()}var re=N(a.values()),ne;try{var ue=function(){var se=ne.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:se}};for(re.s();!(ne=re.n()).done;){var ae=ue();if((0,b.default)(ae)==="object")return ae.v}}catch(ve){re.e(ve)}finally{re.f()}return null},W=function(X){return I(X)||d(X)};return function(Z){return W(j(Z))}};i.createConfigMemo=x;var H=function(a,n){return a.__configId||(a=U({},a),a.settings=(0,C.default)({},E.settings,a.settings),a._fieldsCntByType={},a._funcsCntByType={},a.types=(0,M.default)(a.types),_(a.types,a),a.fields=(0,M.default)(a.fields),a.__fieldNames={},J(a.fields,a),a.funcs=(0,M.default)(a.funcs),k(a.funcs,a),L.default.locale(a.settings.locale.moment),Object.defineProperty(a,"__configId",{enumerable:!1,writable:!1,value:n||(0,O.default)()})),a};i.extendConfig=H;function _(p,a){for(var n in p){var g=p[n];te(n,g,a)}}function te(p,a,n){var g=null,d=null;a.mainWidget=a.mainWidget||Object.keys(a.widgets).filter(function(K){return K!="field"&&K!="func"})[0];for(var I in a.widgets){var W=a.widgets[I];if(W.operators){var Z=W.operators;a.excludeOperators&&(Z=Z.filter(function(K){return!a.excludeOperators.includes(K)})),g=(0,A.mergeArraysSmart)(g,Z)}W.defaultOperator&&(d=W.defaultOperator),I==a.mainWidget&&(W=(0,C.default)({},{widgetProps:a.mainWidgetProps||{}},W)),a.widgets[I]=W}a.valueSources||(a.valueSources=Object.keys(n.settings.valueSourcesInfo));var X=N(a.valueSources),G;try{for(X.s();!(G=X.n()).done;){var z=G.value;z!="value"&&!a.widgets[z]&&(a.widgets[z]={})}}catch(K){X.e(K)}finally{X.f()}!a.operators&&g&&(a.operators=Array.from(new Set(g))),!a.defaultOperator&&d&&(a.defaultOperator=d)}function J(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var g in p)P(p[g],a,[].concat((0,y.default)(n),[g])),p[g].subfields&&J(p[g].subfields,a,[].concat((0,y.default)(n),[g]))}function k(p,a){if(p)for(var n in p){var g=p[n];g.returnType&&(a._funcsCntByType[g.returnType]||(a._funcsCntByType[g.returnType]=0),a._funcsCntByType[g.returnType]++);for(var d in g.args)P(g.args[d],a,null,!0);if(g.args){var I=Object.keys(g.args),W=!0,Z=N(I.reverse()),X;try{for(Z.s();!(X=Z.n()).done;){var G=X.value,z=g.args[G];!W&&z.isOptional&&delete z.isOptional,z.isOptional||(W=!1)}}catch(K){Z.e(K)}finally{Z.f()}}g.subfields&&k(g.subfields,a)}}function P(p,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,d=null,I=null,W=a.types[p.type],Z=p.excludeOperators||[];if(p.type!="!struct"&&p.type!="!group"){var X=["listValues","allowCustomValues","validateValue"];p.fieldSettings||(p.fieldSettings={});for(var G=0,z=X;G<z.length;G++){var K=z[G];p[K]&&(p.fieldSettings[K]=p[K],delete p[K])}if(p.fieldSettings.listValues&&(p.fieldSettings.listValues=(0,A.normalizeListValues)(p.fieldSettings.listValues,p.type,p.fieldSettings)),!W){p.disabled=!0;return}g||(a._fieldsCntByType[p.type]||(a._fieldsCntByType[p.type]=0),a._fieldsCntByType[p.type]++),p.widgets||(p.widgets={}),g&&(p._isFuncArg=!0),p.mainWidget=p.mainWidget||W.mainWidget,p.valueSources=p.valueSources||W.valueSources;var Y=W.excludeOperators||[];for(var re in W.widgets){var ne=p.widgets[re]||{},ue=W.widgets[re]||{};g||function(){var ve=[].concat((0,y.default)(Z),(0,y.default)(Y)),se=p.preferWidgets&&(re=="field"||p.preferWidgets.includes(re))||ve.length>0;if(ne.operators){var ge=ne.operators.filter(function(Oe){return!ve.includes(Oe)});d=[].concat((0,y.default)(d||[]),(0,y.default)(ge))}else if(se&&ue.operators){var ye=ue.operators.filter(function(Oe){return!ve.includes(Oe)});d=[].concat((0,y.default)(d||[]),(0,y.default)(ye))}ne.defaultOperator&&(I=ne.defaultOperator)}(),re==p.mainWidget&&(ne=(0,C.default)({},{widgetProps:p.mainWidgetProps||{}},ne)),p.widgets[re]=ne}g||(!p.operators&&d&&(p.operators=Array.from(new Set(d))),!p.defaultOperator&&I&&(p.defaultOperator=I))}var ae=s(a,n);ae&&(p.fieldName=ae),n&&p.fieldName&&(a.__fieldNames[p.fieldName]=n)}var m=function(a,n){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!n)return null;if(n=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:a.widgets.case_value}};var I=a.settings.fieldSeparator,W=Array.isArray(n)?n:n.split(I),Z=a[g];if(!Z)return null;for(var X=Z,G=null,z=[],K=0;K<W.length;K++){var Y=W[K];z.push(Y);var re=z.join(I);G=X[re],K<W.length-1&&(G&&G[d]?(X=G[d],z=[]):G=null)}return G};i.getFieldRawConfig=m;var s=function(a,n){if(!n)return null;for(var g=a.settings.fieldSeparator,d=(0,y.default)(n),I=[],W,Z;(W=d.pop())!==void 0&&d.length>0;)if(I.unshift(W),Z=m(a,d),Z.fieldName)return[Z.fieldName].concat(I).join(g);return null},c=function(a,n){var g=a.settings.fieldSeparator,d=Array.isArray(n)?n.join(g):n;return a.__fieldNames[d]?a.__fieldNames[d].join(g):d};i.normalizeField=c;var o=function(a,n){if(!n)return null;var g=m(a,n,"funcs","subfields");return g||null};i.getFuncConfig=o;var u=function(a,n,g){var d=o(a,n);if(!d)return null;var I=d.args&&d.args[g]||null;if(!I)return null;var W=a.types[I.type]||{},Z=(0,R.default)({},W,I||{},function(X,G,z,K,Y,re){if(Array.isArray(X))return G});return Z};i.getFuncArgConfig=u;var l=function(a,n){if(!n)return null;if((0,b.default)(n)=="object"&&!n.func&&n.type)return n;if((0,b.default)(n)=="object"&&n.func&&n.arg)return u(a,n.func,n.arg);var g=m(a,n);if(!g)return null;var d=a.types[g.type]||{},I=(0,R.default)({},d,g||{},function(W,Z,X,G,z,K){if(Array.isArray(W))return Z});return I};i.getFieldConfig=l;var f=function(a,n){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!n)return null;var d=a.operators[n];if(g){var I=l(a,g),W=(0,S.getWidgetForFieldOp)(a,g,n),Z=a.widgets[W]||{},X=(I&&I.widgets?I.widgets[W]:{})||{},G=(Z.opProps||{})[n],z=(X.opProps||{})[n],K=(0,C.default)({},d,G,z);return K}else return d};i.getOperatorConfig=f;var T=function(a,n,g){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n||!(g||d)&&I!="const"&&n!="!case_value")return null;var W=l(a,n);d||(d=(0,S.getWidgetForFieldOp)(a,n,g,I));var Z=a.widgets[d]||{},X=(W&&W.widgets?W.widgets[d]:{})||{},G=X.widgetProps||{},z=(I=="value"||!I)&&W&&W.fieldSettings||{},K=(0,C.default)({},Z,G,z);return K};i.getFieldWidgetConfig=T},20495:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.defaultRuleProperties=i.defaultRule=i.defaultRoot=i.defaultOperatorOptions=i.defaultOperator=i.defaultItemProperties=i.defaultGroupProperties=i.defaultGroupConjunction=i.defaultField=i.defaultConjunction=void 0;var y=r(e(92476)),h=r(e(40745)),b=r(e(76833)),C=e(79746),O=e(62413);function R(V,j){var x=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);j&&(H=H.filter(function(_){return Object.getOwnPropertyDescriptor(V,_).enumerable})),x.push.apply(x,H)}return x}function E(V){for(var j=1;j<arguments.length;j++){var x=arguments[j]!=null?arguments[j]:{};j%2?R(Object(x),!0).forEach(function(H){(0,y.default)(V,H,x[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(x)):R(Object(x)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(x,H))})}return V}var L=function(j){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return typeof j.settings.defaultField=="function"?j.settings.defaultField(H):j.settings.defaultField||(x?(0,O.getFirstField)(j,H):null)};i.defaultField=L;var A=function(j,x){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=(0,C.getFieldConfig)(j,x),te=_&&_.operators||[],J=_&&_.defaultOperator;te.includes(J)||(J=null),!J&&H&&(J=(0,O.getFirstOperator)(j,x));var k=typeof j.settings.defaultOperator=="function"?j.settings.defaultOperator(x,_):J;return k};i.defaultOperator=A;var S=function(j,x,H){var _=x?(0,C.getOperatorConfig)(j,x,H):null;return _&&_.options?new h.default.Map(_.options&&_.options.defaults||{}):null};i.defaultOperatorOptions=S;var M=function(j){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_=null,te=null,J=j.settings,k=J.setDefaultFieldAndOp,P=J.showErrorMessage;if(H){var m,s;_=H==null||(m=H.properties)===null||m===void 0?void 0:m.field,te=H==null||(s=H.properties)===null||s===void 0?void 0:s.operator}else k&&(_=L(j,!0,x),te=A(j,_));var c=new h.default.Map({field:_,operator:te,value:new h.default.List,valueSrc:new h.default.List,operatorOptions:S(j,te,_)});if(P&&(c=c.set("valueError",new h.default.List)),_&&te){var o=(0,O.getNewValueForFieldOp)(j,j,c,_,te,"operator",!1),u=o.newValue,l=o.newValueSrc,f=o.newValueType,T=o.newValueError;c=c.set("value",u).set("valueSrc",l).set("valueType",f),P&&(c=c.set("valueError",T))}return c};i.defaultRuleProperties=M;var D=function(j){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;x=(0,C.getFieldConfig)(j,x);var H=x&&x.conjunctions||Object.keys(j.conjunctions);return H.length==1?H[0]:j.settings.defaultGroupConjunction||j.settings.defaultConjunction||H[0]};i.defaultGroupConjunction=D;var F=function(j){return j.settings.defaultConjunction||Object.keys(j.conjunctions)[0]};i.defaultConjunction=F;var U=function(j){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new h.default.Map({conjunction:D(j,x),not:!1})};i.defaultGroupProperties=U;var N=function(j,x){var H;return x&&x.type=="group"?U(j,x==null||(H=x.properties)===null||H===void 0?void 0:H.field):M(j,null,x)};i.defaultItemProperties=N;var $=function(j,x){return(0,y.default)({},j,new h.default.Map({type:"rule",id:j,properties:M(x)}))};i.defaultRule=$;var w=function(j){return new h.default.Map({type:"group",id:(0,b.default)(),children1:new h.default.OrderedMap(E({},$((0,b.default)(),j))),properties:U(j)})};i.defaultRoot=w},1901:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlEmptyValue=i.spelImportConcat=i.spelFormatConcat=i.spelFixList=i.spelEscape=i.mongoEmptyValue=i.SqlString=void 0;var y=r(e(91148)),h=e(62211);i.SqlString=h,h.trim=function(M){return M.charAt(0)=="'"?M.substring(1,M.length-1):M},h.escapeLike=function(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,U=h.escape(M);return U=h.trim(U),U=U.replace(/[%_]/g,"\\$&"),U=(D?"%":"")+U+(F?"%":""),U="'"+U+"'",U};var b=function(D){var F="''",U=D?.type;return U=="date"?F="'0000-00-00'":U=="datetime"?F="'0000-00-00 00:00'":U=="time"?F="'00:00'":U=="number"&&(F="0"),F};i.sqlEmptyValue=b;var C=function(D){var F="",U=D?.type;return U=="number"&&(F=0),F};i.mongoEmptyValue=C;var O=function(D){return"'"+D.replace(/'/g,"''")+"'"},R=function(D){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U,N,$=["int","float"];D.map(function(j){if(j!=null){if(typeof j=="string")N="String";else if(typeof j=="number")N=Number.isInteger(j)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(j," in array"));if(!U)U=N;else if(U!=N)if($.includes(U)&&$.includes(N))U="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(U," and ").concat(N))}}),U||(U="String");var w;U=="float"?w=D.map(function(j){return L(j,!0)}):w=D.map(function(j){return L(j)});var V;return F?V="new ".concat(U,"[]{").concat(w.join(", "),"}"):V="{".concat(w.join(", "),"}"),V},E=function(D){return"".concat(D,".?[true]")};i.spelFixList=E;var L=function(D){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(D==null)return"null";switch((0,y.default)(D)){case"boolean":return D?"true":"false";case"number":return!Number.isFinite(D)||isNaN(D)?void 0:D+(!Number.isInteger(D)||F?"f":"");case"object":if(Array.isArray(D))return R(D,U);throw new Error("spelEscape: Object is not supported");default:return O(D)}};i.spelEscape=L;var A=function(D){return D&&Array.isArray(D)&&D.length?D.map(function(F){if(F.type=="const")return L(F.value);if(F.type=="property")return""+F.value;if(F.type=="variable")return"#"+F.value}).filter(function(F){return F!=null}).join(" + "):"null"};i.spelFormatConcat=A;var S=function(D){if(D==null)return[void 0,[]];var F=[],U=D.valueType=="case_value"?D.value:[D],N=U.map(function($){if($.valueSrc=="value")return $.value===null?void 0:{type:"const",value:$.value};if($.valueSrc=="field")return{type:$.isVariable?"variable":"property",value:$.value};F.push("Unsupported valueSrc ".concat($.valueSrc," in concatenation"))}).filter(function($){return $!=null});return[N,F]};i.spelImportConcat=S},12177:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.setFunc=i.setArgValueSrc=i.setArgValue=i.completeValue=i.completeFuncValue=void 0;var y=r(e(91148)),h=e(79746),b=e(62413),C=r(e(40745));function O($,w){var V=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!V){if(Array.isArray($)||(V=R($))||w&&$&&typeof $.length=="number"){V&&($=V);var j=0,x=function(){};return{s:x,n:function(){return j>=$.length?{done:!0}:{done:!1,value:$[j++]}},e:function(k){throw k},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,_=!1,te;return{s:function(){V=V.call($)},n:function(){var k=V.next();return H=k.done,k},e:function(k){_=!0,te=k},f:function(){try{!H&&V.return!=null&&V.return()}finally{if(_)throw te}}}}function R($,w){if($){if(typeof $=="string")return E($,w);var V=Object.prototype.toString.call($).slice(8,-1);if(V==="Object"&&$.constructor&&(V=$.constructor.name),V==="Map"||V==="Set")return Array.from($);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return E($,w)}}function E($,w){(w==null||w>$.length)&&(w=$.length);for(var V=0,j=new Array(w);V<w;V++)j[V]=$[V];return j}var L=function(w){return(0,y.default)(w)=="object"&&w!==null&&!Array.isArray(w)},A=function(w,V,j){return V=="func"?S(w,j):w};i.completeValue=A;var S=function(w,V){var j=function(H){if(H){var _=H.get("func"),te=_&&(0,h.getFuncConfig)(V,_);if(te){var J=H,k=!1;for(var P in te.args){var m=te.args[P],s=m.valueSources,c=m.isOptional,o=m.defaultValue,u=(0,b.filterValueSourcesForField)(V,s,m),l=J.get("args"),f=u.length==1?u[0]:void 0,T=l?l.get(P):void 0,p=T?T.get("value"):void 0,a=(T?T.get("valueSrc"):void 0)||f;if(p!==void 0){var n=A(p,a,V);if(n===void 0||(n!==p&&(J=J.setIn(["args",P,"value"],n)),k))return}else if(o!==void 0&&!L(o))J=J.setIn(["args",P,"value"],F(m)),J=J.setIn(["args",P,"valueSrc"],"value");else if(c)k=!0;else return}return J}}};return j(w)};i.completeFuncValue=S;var M=function(w,V){var j=[],x=[],H=function _(te){var J=te&&te.get("args");if(J){var k=O(J.values()),P;try{for(k.s();!(P=k.n()).done;){var m=P.value;if(m.get("valueSrc")=="field"){var s=m.get("value");if(s){var c=V?(0,h.getFieldConfig)(V,s):void 0;V&&!c?x.push(s):j.push(s)}}else m.get("valueSrc")=="func"&&_(m.get("value"))}}catch(o){k.e(o)}finally{k.f()}}};return H(w),[j,x]},D=function(w,V,j){var x=j.settings.fieldSeparator;w=w||new C.default.Map,Array.isArray(V)&&(V=V.join(x)),w=w.set("func",V),w=w.set("args",new C.default.Map);var H=V&&(0,h.getFuncConfig)(j,V);if(H)for(var _ in H.args){var te=H.args[_],J=te.valueSources,k=te.defaultValue,P=(0,b.filterValueSourcesForField)(j,J,te),m=P.length?P[0]:void 0,s=k?L(k)&&k.func?"func":"value":void 0,c=s||m;k!==void 0&&(w=w.setIn(["args",_,"value"],F(te))),c&&(w=w.setIn(["args",_,"valueSrc"],c))}return w};i.setFunc=D;var F=function(w){var V=w.defaultValue;return L(V)&&!C.default.Map.isMap(V)&&V.func?C.default.fromJS(V,function(j,x){return C.default.Iterable.isIndexed(x)?x.toList():x.toOrderedMap()}):V},U=function(w,V,j,x,H){if(w&&w.get("func")){w=w.setIn(["args",V,"value"],j);var _=x.valueSources,te=(0,b.filterValueSourcesForField)(H,_,x),J=te.length==1?te[0]:void 0;J&&(w=w.setIn(["args",V,"valueSrc"],J))}return w};i.setArgValue=U;var N=function(w,V,j,x,H){return w&&w.get("func")&&(w=w.setIn(["args",V],new C.default.Map({valueSrc:j}))),w};i.setArgValueSrc=N},35926:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.TreeUtils=i.ExportUtils=i.DefaultUtils=i.ConfigUtils=void 0,Object.defineProperty(i,"getSwitchValues",{enumerable:!0,get:function(){return E.getSwitchValues}}),Object.defineProperty(i,"simulateAsyncFetch",{enumerable:!0,get:function(){return b.simulateAsyncFetch}}),Object.defineProperty(i,"uuid",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"validateTree",{enumerable:!0,get:function(){return h.validateTree}});var h=e(16226),b=e(3684),C=r(e(76833)),O=S(e(79746));i.ConfigUtils=O;var R=S(e(20495));i.DefaultUtils=R;var E=S(e(31775));i.TreeUtils=E;var L=S(e(1901));i.ExportUtils=L;function A(M){if(typeof WeakMap!="function")return null;var D=new WeakMap,F=new WeakMap;return(A=function(N){return N?F:D})(M)}function S(M,D){if(!D&&M&&M.__esModule)return M;if(M===null||y(M)!=="object"&&typeof M!="function")return{default:M};var F=A(D);if(F&&F.has(M))return F.get(M);var U={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in M)if($!=="default"&&Object.prototype.hasOwnProperty.call(M,$)){var w=N?Object.getOwnPropertyDescriptor(M,$):null;w&&(w.get||w.set)?Object.defineProperty(U,$,w):U[$]=M[$]}return U.default=M,F&&F.set(M,U),U}},9701:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.useOnPropsChanged=i.pureShouldComponentUpdate=i.liteShouldComponentUpdate=i.isUsingLegacyReactDomRender=i.bindActionCreators=void 0;var y=r(e(68404)),h=r(e(74937)),b=e(60399),C=function(F){if(F._reactRootContainer)return"root";if(Object.getOwnPropertyNames(F).filter(function(U){return U.startsWith("__reactContainer")}).length>0)return"container"},O=function D(F){if(F){var U=C(F);return U!==void 0?U:D(F.parentNode)}},R=function(F){return O(F)==="root"};i.isUsingLegacyReactDomRender=R;var E=function(F,U){return function(N,$){var w=F.props,V=F.state,j=N!=w||$!=V;if(j&&V==$&&w!=N){var x=[];for(var H in N){var _=N[H]!=w[H];_&&(U[H]=="ignore"?_=!1:U[H]=="shallow_deep"?_=!(0,b.shallowEqual)(N[H],w[H],!0):U[H]=="shallow"?_=!(0,b.shallowEqual)(N[H],w[H]):typeof U[H]=="function"&&(_=U[H](N[H],w[H],$))),_&&x.push(H)}x.length||(j=!1)}return j}};i.liteShouldComponentUpdate=E;var L=function(F){return function(U,N){return!(0,b.shallowEqual)(F.props,U)||!(0,b.shallowEqual)(F.state,N)}};i.pureShouldComponentUpdate=L;var A=function(){var F=y.default.version.split(".").map(parseInt.bind(null,10));return F[0]==16&&F[1]>=3||F[0]>16},S=function(F){A?F.UNSAFE_componentWillReceiveProps=function(U){F.onPropsChanged(U)}:F.componentWillReceiveProps=function(U){F.onPropsChanged(U)}};i.useOnPropsChanged=S;var M=function(F,U,N){return(0,h.default)(F,function($){return function(){for(var w=arguments.length,V=new Array(w),j=0;j<w;j++)V[j]=arguments[j];return N($.apply(void 0,[U].concat(V)))}})};i.bindActionCreators=M},62413:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.getWidgetsForFieldOp=i.getWidgetForFieldOp=i.getValueSourcesForFieldOp=i.getValueLabel=i.getOperatorsForField=i.getNewValueForFieldOp=i.getFuncPathLabels=i.getFirstOperator=i.getFirstField=i.getFieldPathLabels=i.getFieldPath=i.getFieldPartsConfigs=i.formatFieldName=i.filterValueSourcesForField=void 0;var y=r(e(91148)),h=r(e(90890)),b=r(e(47452)),C=e(79746),O=e(60399),R=r(e(40745)),E=e(16226),L=r(e(4161)),A=["select","multiselect","treeselect","treemultiselect"],S=function(P){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;m||(m=P);var T=s.get("field"),p=s.get("operator"),a=s.get("value"),n=s.get("valueSrc",new R.default.List),g=s.get("valueType",new R.default.List),d=s.get("asyncListValues"),I=P.settings,W=I.convertableWidgets,Z=I.clearValueOnChangeField,X=I.clearValueOnChangeOp,G=I.showErrorMessage,z=(0,C.getOperatorConfig)(P,o,c),K=o?(0,O.defaultValue)(z.cardinality,1):null,Y=(0,C.getFieldConfig)(m,T),re=(0,C.getFieldConfig)(P,c),ne=T&&p&&o&&a!=null&&(!u||u=="field"&&!Z||u=="operator"&&!X)&&Y&&re&&Y.type==re.type;ne&&A.includes(Y.type)&&u=="field"&&(ne=!1);for(var ue=0;ue<K;ue++){var ae=n.get(ue)||null,ve=te(m,T,p,ae),se=te(P,c,o,ae),ge=ae=="value"?ve:te(m,T,p,"value"),ye=ae=="value"?se:te(P,c,o,"value"),Oe=ye==ge||(W[ge]||[]).includes(ye);Oe||(ne=!1)}p!=o&&[p,o].includes("proximity")&&(ne=!1);var Se=(0,C.getFieldWidgetConfig)(P,c,o,null,n.first()),ce=_(P,c,o),Ne={},we=Array.from({length:K},function(){return null});if(ne)for(var je=function(De){var Me=a.get(De),Ae=g.get(De)||null,$e=n.get(De)||null,rt=ce.find(function(Pe){return Pe==$e})!=null;!rt&&De>0&&$e==null&&(rt=!0);var it=d,Qe=(0,E.validateValue)(P,c,c,o,Me,Ae,$e,it,l,f),lt=(0,b.default)(Qe,2),ct=lt[0],_e=lt[1],gt=!ct,pe=_e!==Me,he=!rt||!gt&&(u=="field"||!G&&!pe),Le=!!ct&&G&&!he&&!pe;if(Le&&(we[De]=ct),pe&&(Ne[De]=_e),he)return ne=!1,"break"},Ke=0;Ke<K;Ke++){var Ye=je(Ke);if(Ye==="break")break}var ke=null,at=null,He=null,fe=null;if(ke=new R.default.List(Array.from({length:K},function(Fe,De){var Me=void 0;if(ne)De<a.size&&(Me=a.get(De),Ne[De]!==void 0&&(Me=Ne[De]));else if(K==1){var Ae;Me=(0,O.getFirstDefined)([re?.defaultValue,re==null||(Ae=re.fieldSettings)===null||Ae===void 0?void 0:Ae.defaultValue,Se?.defaultValue])}return Me})),at=new R.default.List(Array.from({length:K},function(Fe,De){var Me=null;return ne?De<n.size&&(Me=n.get(De)):(ce.length==1||ce.length>1)&&(Me=ce[0]),Me})),G){if(z&&z.validateValues&&at.toJS().filter(function(Fe){return Fe=="value"||Fe==null}).length==K){var Ee=Se&&Se.toJS?ke.toJS().map(function(Fe){return Se.toJS(Fe,Se)}):ke.toJS(),Ce=z.validateValues(Ee);G&&we.push(Ce)}fe=new R.default.List(we)}return He=new R.default.List(Array.from({length:K},function(Fe,De){var Me=null;return ne?De<g.size&&(Me=g.get(De)):K==1&&Se&&Se.type!==void 0?Me=Se.type:K==1&&re&&re.type!==void 0&&(Me=re.type=="!group"?"number":re.type),Me})),{canReuseValue:ne,newValue:ke,newValueSrc:at,newValueType:He,newValueError:fe,operatorCardinality:K}};i.getNewValueForFieldOp=S;var M=function(P){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=P.settings.fieldSeparator,c=typeof m=="string"?m.split(s):m,o=m?(0,C.getFieldRawConfig)(P,m):P,u=o,l=null,f=[];do{var T=u===P?P.fields:u.subfields;if(!T||!Object.keys(T).length){u=l=null;break}l=Object.keys(T)[0],f.push(l),u=T[l]}while(u.type=="!struct"||u.type=="!group");return(c||[]).concat(f).join(s)};i.getFirstField=M;var D=function(P,m){var s=(0,C.getFieldConfig)(P,m),c=s?s.operators:[];return c};i.getOperatorsForField=D;var F=function(P,m){var s=D(P,m);return s?s[0]:null};i.getFirstOperator=F;var U=function(P,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!P)return null;var c=m.settings.fieldSeparator,o=Array.isArray(P)?P:P.split(c);return s?o:o.map(function(u,l,f){return f.slice(0,l+1)}).map(function(u){return u.join(c)})};i.getFieldPath=U;var N=function(P,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return $(P,m,s,"funcs","subfields")};i.getFuncPathLabels=N;var $=function(P,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!P)return null;var u=m.settings.fieldSeparator,l=Array.isArray(P)?P:P.split(u),f=s?Array.isArray(s)?s:s.split(u):[];return l.slice(f.length).map(function(T,p,a){return a.slice(0,p+1)}).map(function(T){return[].concat((0,h.default)(f),(0,h.default)(T)).join(u)}).map(function(T){var p=(0,C.getFieldRawConfig)(m,T,c,o);return p&&p.label||p&&(0,L.default)(T.split(u))}).filter(function(T){return T!=null})};i.getFieldPathLabels=$;var w=function(P,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!P)return null;var c=s&&(0,C.getFieldRawConfig)(m,s)||null,o=m.settings.fieldSeparator,u=Array.isArray(P)?P:P.split(o),l=s?Array.isArray(s)?s:s.split(o):[];return u.slice(l.length).map(function(f,T,p){return p.slice(0,T+1)}).map(function(f){return{part:[].concat((0,h.default)(l),(0,h.default)(f)).join(o),key:f[f.length-1]}}).map(function(f){var T=f.part,p=f.key,a=(0,C.getFieldRawConfig)(m,T);return{key:p,cnf:a}}).map(function(f,T,p){var a=f.key,n=f.cnf,g=T>0?p[T-1].cnf:c;return[a,n,g]})};i.getFieldPartsConfigs=w;var V=function(P,m,s,c){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=m&&(0,y.default)(m)=="object"&&!!m.func&&!!m.arg,f=P.settings.showLabels,T=(0,C.getFieldConfig)(P,m),p=(0,C.getFieldWidgetConfig)(P,m,s,null,o)||{},a=(0,C.getOperatorConfig)(P,s,m)||{},n=u?1:a.cardinality,g=null;if(n>1){var d=p.valueLabels||a.valueLabels;d&&(g=d[c]),g&&(0,y.default)(g)!="object"&&(g={label:g,placeholder:g}),g||(g={label:P.settings.valueLabel+" "+(c+1),placeholder:P.settings.valuePlaceholder+" "+(c+1)})}else{var I=p.valueLabel,W=p.valuePlaceholder;l&&(I||(I=T.label||m.arg),!W&&!f&&(W=T.label||m.arg)),g={label:I||P.settings.valueLabel,placeholder:W||P.settings.valuePlaceholder}}return g};i.getValueLabel=V;function j(k,P){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=[],o=[];if(!P)return{widgets:c,valueSrcs:o};var u=(0,y.default)(P)=="object"&&(!!P.func&&!!P.arg||P._isFuncArg),l=(0,C.getFieldConfig)(k,P),f=m?k.operators[m]:null;if(l&&l.widgets){var T=function(g){var d=l.widgets[g],I=k.widgets[g].valueSrc||"value",W=!0;if(g=="field"&&(W=W&&H(k,["field"],l).length>0),g=="func"&&(W=W&&H(k,["func"],l).length>0),s=="value"&&!d.operators&&!u&&P!="!case_value"&&(W=!1),d.operators&&m&&(W=W&&d.operators.indexOf(m)!=-1),s&&s!=I&&s!="const"&&(W=!1),f&&f.cardinality==0&&I!="value"&&(W=!1),W){c.push(g);var Z=l.valueSources&&l.valueSources.indexOf(I)!=-1;f&&f.valueSources&&f.valueSources.indexOf(I)==-1&&(Z=!1),Z&&!o.find(function(X){return X==I})&&o.push(I)}};for(var p in l.widgets)T(p)}var a=function(g){var d=0;return l.preferWidgets?l.preferWidgets.includes(g)&&(d+=10-l.preferWidgets.indexOf(g)):g==l.mainWidget&&(d+=100),g=="field"&&(d-=1),g=="func"&&(d-=2),d};return c.sort(function(n,g){return a(g)-a(n)}),{widgets:c,valueSrcs:o}}var x=function(P,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=j(P,m,s,c),u=o.widgets;return u};i.getWidgetsForFieldOp=x;var H=function(P,m,s){return s?m.filter(function(c){var o=!0;if(c=="field"&&P._fieldsCntByType){var u=s._isFuncArg?0:1;o=o&&P._fieldsCntByType[s.type]>u}return c=="func"&&(P._funcsCntByType&&(o=o&&!!P._funcsCntByType[s.type]),s.funcs&&(o=o&&s.funcs.length>0)),o}):m};i.filterValueSourcesForField=H;var _=function(P,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=j(P,m,s,null),l=u.valueSrcs,f=H(P,l,c);return f};i.getValueSourcesForFieldOp=_;var te=function(P,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=j(P,m,s,c),u=o.widgets,l=null;return u.length&&(l=u[0]),l};i.getWidgetForFieldOp=te;var J=function(P,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(P){var o=(0,C.getFieldConfig)(m,P)||{},u=m.settings.fieldSeparator,l=Array.isArray(P)?P:P.split(u),f=Array.isArray(P)?P.join(u):P;if(o.tableName){var T=(0,h.default)(l);T[0]=o.tableName,f=T.join(u)}if(o.fieldName&&(f=o.fieldName),c){var p=(0,C.getFieldConfig)(m,c)||{},a=c;p.fieldName&&(a=p.fieldName),f.indexOf(a+u)==0?f=f.slice((a+u).length):s.errors.push("Can't cut group ".concat(a," from field ").concat(f))}return f}};i.formatFieldName=J},60399:(ee,i,e)=>{"use strict";var r=e(59018),y=e(91148);Object.defineProperty(i,"__esModule",{value:!0}),i.applyToJS=g,i.mapListValues=i.logger=i.listValuesToArray=i.isJsonLogic=i.isImmutable=i.immutableEqual=i.getValueInListValues=i.getTitleInListValues=i.getLogger=i.getItemInListValues=i.getFirstDefined=i.flatizeTreeData=i.escapeRegExp=i.eqSet=i.eqArrSet=i.defaultValue=i.defaultTreeDataMap=i.deepEqual=void 0,i.mergeArraysSmart=I,i.shallowEqual=i.removePrefixPath=i.normalizeListValues=void 0,i.sleep=a,i.toImmutableList=d,i.truncateString=void 0;var h=r(e(47452)),b=r(e(90890)),C=r(e(91148)),O=E(e(40745));function R(z){if(typeof WeakMap!="function")return null;var K=new WeakMap,Y=new WeakMap;return(R=function(ne){return ne?Y:K})(z)}function E(z,K){if(!K&&z&&z.__esModule)return z;if(z===null||y(z)!=="object"&&typeof z!="function")return{default:z};var Y=R(K);if(Y&&Y.has(z))return Y.get(z);var re={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in z)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(z,ue)){var ae=ne?Object.getOwnPropertyDescriptor(z,ue):null;ae&&(ae.get||ae.set)?Object.defineProperty(re,ue,ae):re[ue]=z[ue]}return re.default=z,Y&&Y.set(z,re),re}function L(z,K){var Y=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!Y){if(Array.isArray(z)||(Y=A(z))||K&&z&&typeof z.length=="number"){Y&&(z=Y);var re=0,ne=function(){};return{s:ne,n:function(){return re>=z.length?{done:!0}:{done:!1,value:z[re++]}},e:function(ge){throw ge},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ue=!0,ae=!1,ve;return{s:function(){Y=Y.call(z)},n:function(){var ge=Y.next();return ue=ge.done,ge},e:function(ge){ae=!0,ve=ge},f:function(){try{!ue&&Y.return!=null&&Y.return()}finally{if(ae)throw ve}}}}function A(z,K){if(z){if(typeof z=="string")return S(z,K);var Y=Object.prototype.toString.call(z).slice(8,-1);if(Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set")return Array.from(z);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return S(z,K)}}function S(z,K){(K==null||K>z.length)&&(K=z.length);for(var Y=0,re=new Array(K);Y<K;Y++)re[Y]=z[Y];return re}var M=function(K,Y){return typeof K>"u"?Y:K};i.defaultValue=M;var D=function(K,Y,re){if(!Y||K.length<=Y)return K;var ne=K.substr(0,Y-1);return(re?ne.substr(0,ne.lastIndexOf(" ")):ne)+"..."};i.truncateString=D;var F=function(K,Y){return K===Y?!0:K.equals(Y)};i.immutableEqual=F;var U=function(K,Y){return K===Y?!0:O.Map.isMap(K)?K.equals(Y):JSON.stringify(K)==JSON.stringify(Y)};i.deepEqual=U;var N=function(K,Y){if(K.size!==Y.size)return!1;var re=L(K),ne;try{for(re.s();!(ne=re.n()).done;){var ue=ne.value;if(!Y.has(ue))return!1}}catch(ae){re.e(ae)}finally{re.f()}return!0};i.eqSet=N;var $=function(K,Y){return N(new Set(K),new Set(Y))};i.eqArrSet=$;var w=function(K,Y){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return K===Y?!0:Array.isArray(K)?V(K,Y,re):O.Map.isMap(K)?K.equals(Y):(0,C.default)(K)=="object"?j(K,Y,re):K===Y};i.shallowEqual=w;function V(z,K){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(z===K)return!0;if(!z||!K)return!1;var re=z.length;if(K.length!==re)return!1;for(var ne=0;ne<re;ne++){var ue=Y?w(z[ne],K[ne],Y):z[ne]===K[ne];if(!ue)return!1}return!0}function j(z,K){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(z===K)return!0;if(!z||!K)return!1;var re=Object.keys(z),ne=Object.keys(K),ue=re.length;if(ne.length!==ue)return!1;for(var ae=0;ae<ue;ae++){var ve=re[ae],se=Y?w(z[ve],K[ve],Y):z[ve]===K[ve];if(!se)return!1}return!0}var x=function(K){return K.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};i.escapeRegExp=x;var H=function(K){return(0,C.default)(K)=="object"&&K!==null},_=function(K,Y){return H(K)?K:{value:K,title:Y!==void 0?Y:K}},te=function(K){if(!H(K))return K;if(Array.isArray(K))return K.map(function(ue){return _(ue)});var Y=[];for(var re in K){var ne=K[re];Y.push(_(re,ne))}return Y};i.listValuesToArray=te;var J=function(K,Y){if(Array.isArray(K)){var re=K.map(function(ne){return _(ne)});return re.find(function(ne){return ne.value===Y})||re.find(function(ne){return"".concat(ne.value)===Y})}else return K[Y]!==void 0?_(Y,K[Y]):void 0};i.getItemInListValues=J;var k=function(K,Y){if(K==null)return Y;var re=J(K,Y);return re!==void 0?re.title:Y};i.getTitleInListValues=k;var P=function(K,Y){if(K==null)return Y;var re=J(K,Y);return re!==void 0?re.value:Y};i.getValueInListValues=P;var m=function(K,Y){var re=[];if(Array.isArray(K)){var ne=L(K),ue;try{for(ne.s();!(ue=ne.n()).done;){var ae=ue.value,ve=Y(_(ae));ve!=null&&re.push(ve)}}catch(ye){ne.e(ye)}finally{ne.f()}}else for(var se in K){var ge=Y(_(se,K[se]));ge!=null&&re.push(ge)}return re};i.mapListValues=m;var s={id:"value",pId:"parent",rootPId:void 0};i.defaultTreeDataMap=s;var c=function(K){var Y=s,re,ne,ue=function ve(se,ge,ye){if(se.children){ye==1&&(se[Y.pId]=Y.rootPId);var Oe=se.children.length,Se=L(se.children),ce;try{for(Se.s();!(ce=Se.n()).done;){var Ne=ce.value;Ne[Y.pId]=se[Y.id],re++,ge.splice(re,0,Ne),ne++,ve(Ne,ge,ye+1)}}catch(we){Se.e(we)}finally{Se.f()}delete se.children,Oe==0&&(ge.splice(re,1),re--,ne--)}};if(Array.isArray(K))for(ne=K.length,re=0;re<ne;re++){var ae=K[re];H(ae)&&(ae[Y.pId]!==void 0&&ae[Y.pId]!=Y.rootPId||ue(ae,K,1))}return K};i.flatizeTreeData=c;var o=function z(K,Y){var re=s,ne=J(K,Y),ue=ne?ne[re.pId]:void 0,ae=ue?K.find(function(ve){return ve[re.id]===ue}):void 0;return ae?[ae.value].concat((0,b.default)(z(K,ae.value))):[]},u=function(K,Y){var re=s,ne=J(K,Y);return ne?K.filter(function(ue){return ue[re.pId]===ne[re.id]}).map(function(ue){return ue.value}):[]},l=function(K,Y,re){var ne=L(K),ue;try{for(ne.s();!(ue=ne.n()).done;){var ae=ue.value;if(ae.path=o(K,ae.value),Y.treeSelectOnlyLeafs!=!1){var ve=u(K,ae.value);re||(ae.selectable=ve.length==0)}}}catch(se){ne.e(se)}finally{ne.f()}return K},f=function(K,Y,re){var ne=["treeselect","treemultiselect"].includes(Y),ue=["multiselect","treemultiselect"].includes(Y);return ne&&(K=te(K),K=c(K),K=l(K,re,ue)),K};i.normalizeListValues=f;var T=function(K,Y){if(!K)return K;for(var re=!0,ne=0;ne<Y.length;ne++){var ue=Y[ne];if(!(K[ne]!==void 0&&ue==K[ne])){re=!1;break}}return re?K.slice(Y.length):K};i.removePrefixPath=T;var p=function(K){return(0,C.default)(K)==="object"&&K!==null&&!Array.isArray(K)&&Object.keys(K).length===1};i.isJsonLogic=p;function a(z){return new Promise(function(K){setTimeout(K,z)})}var n=function(K){return(0,C.default)(K)==="object"&&K!==null&&typeof K.toJS=="function"};i.isImmutable=n;function g(z){return n(z)?z.toJS():z}function d(z){return n(z)?z:new O.default.List(z)}function I(z,K){return z||(z=[]),K||(K=[]),K.map(function(Y){return[Y,z.indexOf(Y)]}).map(function(Y,re,ne){var ue=(0,h.default)(Y,2),ae=ue[0],ve=ue[1];if(ve==-1){var se=ne.slice(re+1),ge=ne.slice(0,re),ye=ge.reverse().find(function(Se){var ce=(0,h.default)(Se,2),Ne=ce[0],we=ce[1];return we!=-1}),Oe=se.find(function(Se){var ce=(0,h.default)(Se,2),Ne=ce[0],we=ce[1];return we!=-1});return Oe?[ae,"before",Oe[0]]:ye?[ae,"after",ye[0]]:[ae,"append",null]}else return null}).filter(function(Y){return Y!==null}).reduce(function(Y,re){var ne=(0,h.default)(re,3),ue=ne[0],ae=ne[1],ve=ne[2],se=Y.indexOf(ve);return Y.indexOf(ue)==-1&&(se>-1?Y.splice(se+(ae=="after"?1:0),0,ue):Y.splice(ae=="append"?1/0:0,0,ue)),Y},z.slice())}var W=function(){return typeof process<"u"&&process.env&&!1},Z=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=K??W();return Y?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};i.getLogger=Z;var X=function(){for(var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Y,re=0;re<K.length;re++){var ne=K[re];if(ne!==void 0){Y=ne;break}}return Y};i.getFirstDefined=X;var G=Z();i.logger=G},31775:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.removePathsInTree=i.removeIsLockedInTree=i.isEmptyTree=i.hasChildren=i.getTreeBadFields=i.getTotalRulesCountInTree=i.getTotalReordableNodesCountInTree=i.getSwitchValues=i.getLightTree=i.getItemByPath=i.getFlatTree=i.fixPathsInTree=i.fixEmptyGroupsInTree=i.expandTreeSubpath=i.expandTreePath=void 0;var y=r(e(90890)),h=r(e(92476)),b=r(e(40745)),C=function(x){for(var H=arguments.length,_=new Array(H>1?H-1:0),te=1;te<H;te++)_[te-1]=arguments[te];return x.interpose("children1").withMutations(function(J){return J.skip(1),J.push.apply(J,_),J})};i.expandTreePath=C;var O=function(x){for(var H=arguments.length,_=new Array(H>1?H-1:0),te=1;te<H;te++)_[te-1]=arguments[te];return x.interpose("children1").withMutations(function(J){return J.push.apply(J,_),J})};i.expandTreeSubpath=O;var R=function(x,H){var _=new b.default.OrderedMap((0,h.default)({},x.get("id"),x)),te=x;return H.forEach(function(J){te=_.get(J),_=te.get("children1")}),te};i.getItemByPath=R;var E=function(x){var H=x;function _(te,J){var k=J.push(te.get("id"));te.get("path")&&(H=H.removeIn(C(k,"path")));var P=te.get("children1");P&&P.map(function(m,s){_(m,k)})}return _(x,new b.default.List),H};i.removePathsInTree=E;var L=function(x){var H=x;function _(te,J){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=J.push(te.get("id")),m=te.getIn(["properties","isLocked"]);k&&m&&(H=H.deleteIn(C(P,"properties","isLocked")));var s=te.get("children1");s&&s.map(function(c,o){_(c,P,m||k)})}return _(x,new b.default.List),H};i.removeIsLockedInTree=L;var A=function(x){var H=x;function _(te,J,k,P){if(te){var m=te.get("path"),s=te.get("id"),c=s||P,o=J.push(c);(!m||!m.equals(o))&&(H=H.setIn(C(o,"path"),o)),s||(H=H.setIn(C(o,"id"),c));var u=te.get("children1");u&&(u.constructor.name=="Map"&&(H=H.setIn(C(o,"children1"),new b.default.OrderedMap(u))),u.map(function(l,f){_(l,o,k+1,f)}))}}return _(x,new b.default.List,0),H};i.fixPathsInTree=A;var S=function(x){var H=x;function _(te,J,k,P){if(!te)return!1;var m=te.get("id")||P,s=J.push(m),c=te.get("children1");if(c){var o=c.map(function(u,l){return _(u,s,k+1,l)}).reduce(function(u,l){return u&&l},!0);if((c.size==0||o)&&k>0)return H=H.deleteIn(C(s)),!0}return!1}return _(x,new b.default.List,0),H};i.fixEmptyGroupsInTree=S;var M=function(x){var H=[],_={},te=0;function J(c,o,u,l,f,T,p,a,n){var g=c.get("type"),d=c.get("collapsed"),I=c.get("id"),W=c.get("children1"),Z=c.getIn(["properties","isLocked"]),X=W?W.map(function(ve,se){return se}):null,G=g=="rule_group",z=!f&&(!W||G),K=H.length,Y=te;if(H.push(I),u||(te+=1),p.height=(p.height||0)+1,_[I]={type:g,parent:o.length?o[o.length-1]:null,parentType:a,caseId:g=="case_group"?I:n,isDefaultCase:g=="case_group"&&!W,path:o.concat(I),lev:T,leaf:!W,index:K,id:I,children:X,leafsCount:0,_top:K,_height:ne-K,top:u?null:Y,height:ae,bottom:(u?null:Y)+ae,collapsed:d,node:c,isLocked:Z||l},W){var re={};W.map(function(ve,se){J(ve,o.concat(I),u||d,l||Z,f||G,T+1,re,g,g=="case_group"?I:n)}),d||(p.height=(p.height||0)+(re.height||0))}n&&z&&_[n].leafsCount++;var ne=H.length,ue=te,ae=p.height;Object.assign(_[I],{_height:ne-K,height:ae,bottom:(u?null:Y)+ae})}J(x,[],!1,!1,!1,0,{},null,null);for(var k=0;k<H.length;k++){var P=k>0?H[k-1]:null,m=k<H.length-1?H[k+1]:null,s=_[H[k]];s.prev=P,s.next=m}return{flat:H,items:_}};i.getFlatTree=M;var D=function(x){if(!x)return-1;var H=0;function _(te,J,k){var P,m,s;typeof te.get=="function"?(P=te.get("id"),m=te.get("children1"),s=te.get("type")):(P=te.id,m=te.children1,s=te.type);var c=s=="rule_group";H++,m&&!c&&m.map(function(o,u){_(o,J.concat(P),k+1)})}return _(x,[],0),H-1};i.getTotalReordableNodesCountInTree=D;var F=function(x){if(!x)return-1;var H=0;function _(te,J,k){var P,m,s;typeof te.get=="function"?(P=te.get("id"),m=te.get("children1"),s=te.get("type")):(P=te.id,m=te.children1,s=te.type),s=="rule"||s=="rule_group"?H++:m&&m.map(function(c,o){_(c,J.concat(P),k+1)})}return _(x,[],0),H};i.getTotalRulesCountInTree=F;var U=function(x){var H=[];function _(te,J,k){var P=te.get("id"),m=te.get("children1"),s=te.getIn(["properties","valueError"]),c=te.getIn(["properties","field"]);s&&s.size>0&&s.filter(function(o){return o!=null}).size>0&&H.push(c),m&&m.map(function(o,u){_(o,J.concat(P),k+1)})}return x&&_(x,[],0),Array.from(new Set(H))};i.getTreeBadFields=U;var N=function(x){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=x;function te(J,k){J.path&&delete J.path,!H&&k&&delete J.id;var P=J.properties;P&&P.operatorOptions==null&&delete P.operatorOptions;var m=J.children1;if(m){for(var s in m)te(m[s],s);H&&(J.children1=Object.values(m))}}return te(x,null),_};i.getLightTree=N;var $=function(x){var H=[],_=x.get("children1");return _&&_.map(function(te){var J=te.getIn(["properties","value"]),k;J&&J.size==1?(k=J.get(0),Array.isArray(k)&&k.length==0&&(k=null)):k=null,H=[].concat((0,y.default)(H),[k])}),H};i.getSwitchValues=$;var w=function(x){return!x.get("children1")||x.get("children1").size==0};i.isEmptyTree=w;var V=function(x,H){return x.getIn(C(H,"children1")).size>0};i.hasChildren=V},76833:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=0,r=function(){var h=(new Date().getTime().toString(16)+"FF").substr(0,11),b="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(C){var O=C==="s"?Math.floor(Math.random()*16):e++&15,R=C==="x"?O:O&3|8;return R.toString(16)});return b+h};i.default=r},16226:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.validateValue=i.validateTree=i.validateAndFixTree=i.createValidationMemo=void 0;var y=r(e(90890)),h=r(e(47452)),b=r(e(91148)),C=e(79746),O=e(62413),R=e(60399),E=e(20495),L=e(31775),A=r(e(50234)),S=e(40745),M=function(k){return(0,b.default)(k)=="object"&&k!==null&&Array.isArray(k)?"array":(0,b.default)(k)},D=function(k,P){return M(k)==P||P=="number"&&!isNaN(k)},F=function(){var k,P,m;return function(s,c,o){return c?(s.__configId===m&&((0,R.immutableEqual)(c,k)||(0,R.immutableEqual)(c,P))||(m=s.__configId,k=c,P=U(c,null,s,o||s)),P):null}};i.createValidationMemo=F;var U=function(k,P,m,s){var c=N(k,P,m,s);return c=(0,L.fixPathsInTree)(c),c};i.validateAndFixTree=U;var N=function(k,P,m,s,c,o){c===void 0&&(c=m.settings.removeEmptyGroupsOnLoad),o===void 0&&(o=m.settings.removeIncompleteRulesOnLoad);var u={config:m,oldConfig:s,removeEmptyGroups:c,removeIncompleteRules:o};return $(k,[],null,{},u)};i.validateTree=N;function $(J,k,P,m,s){var c=J.get("type"),o=J.get("children1");return(c==="group"||c==="rule_group"||c=="case_group"||c=="switch_group")&&o&&o.size?w(J,k,P,m,s):c==="rule"?V(J,k,P,m,s):J}function w(J,k,P,m,s){var c=s.removeEmptyGroups,o=J.get("id"),u=J.get("children1"),l=u;!o&&P&&(o=P,J=J.set("id",o),m.sanitized=!0);var f={};u=u.map(function(p,a){return $(p,k.concat(o),a,f,s)}),c&&(u=u.filter(function(p){return p!=null}));var T=f.sanitized||l.size!=u.size;return!u.size&&c&&k.length&&(T=!0,J=void 0),T&&(m.sanitized=!0),T&&J&&(J=J.set("children1",u)),J}function V(J,k,P,m,s){var c=s.removeIncompleteRules,o=s.config,u=s.oldConfig,l=o.settings.showErrorMessage,f=J.get("id"),T=J.get("properties"),p=T.get("field")||null,a=T.get("operator")||null,n=T.get("operatorOptions"),g=T.get("valueSrc"),d=T.get("value"),I=T.get("valueError"),W={field:p,operator:a,operatorOptions:n?n.toJS():{},valueSrc:g?g.toJS():null,value:d?d.toJS():null,valueError:I?I.toJS():null},Z=p&&a&&d&&!d.includes(void 0);!f&&P&&(f=P,J=J.set("id",f),m.sanitized=!0);var X=p?(0,C.getFieldConfig)(o,p):null;p&&!X&&(R.logger.warn("No config for field ".concat(p)),p=null),p==null&&(T=["operator","operatorOptions","valueSrc","value"].reduce(function(Oe,Se){return Oe.delete(Se)},T),a=null),(a=="range_between"||a=="range_not_between")&&(a=a=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(T.get("operator")," to ").concat(a)),T=T.set("operator",a));var G=a?(0,C.getOperatorConfig)(o,a,p):null;a&&!G&&(console.warn("No config for operator ".concat(a)),a=null);var z=p?(0,O.getOperatorsForField)(o,p):[];z?a&&z.indexOf(a)==-1&&(a=="is_empty"||a=="is_not_empty"?(a=a=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(T.get("operator")," to ").concat(a," for ").concat(p)),T=T.set("operator",a)):(console.warn("Operator ".concat(a," is not supported for field ").concat(p)),a=null)):(console.warn("Type of field ".concat(p," is not supported")),a=null),a==null&&(T=T.delete("operatorOptions"),T=T.delete("valueSrc"),T=T.delete("value")),n=T.get("operatorOptions");var K=a?(0,R.defaultValue)(G.cardinality,1):null;!a||n&&!G.options?(n=null,T=T.delete("operatorOptions")):a&&!n&&G.options&&(n=(0,E.defaultOperatorOptions)(o,a,p),T=T.set("operatorOptions",n)),g=T.get("valueSrc"),d=T.get("value");var Y=!l,re=!0,ne=(0,O.getNewValueForFieldOp)(o,u,T,p,a,null,Y,re),ue=ne.newValue,ae=ne.newValueSrc,ve=ne.newValueError;d=ue,g=ae,I=ve,T=T.set("value",d),T=T.set("valueSrc",g),l&&(T=T.set("valueError",I));var se={field:p,operator:a,operatorOptions:n?n.toJS():{},valueSrc:g?g.toJS():null,value:d?d.toJS():null,valueError:I?I.toJS():null},ge=!(0,R.deepEqual)(W,se),ye=p&&a&&d&&!d.includes(void 0);return ge&&(m.sanitized=!0),!ye&&c?J=void 0:ge&&(J=J.set("properties",T)),J}var j=function(k,P,m,s,c,o,u,l){var f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,T=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,a=null,n=c;if(c!=null){if(u=="field"){var g=_(P,m,c,u,o,l,k,s,T,f),d=(0,h.default)(g,2);a=d[0],n=d[1]}else if(u=="func"){var I=te(P,m,c,u,o,l,k,s,T,f),W=(0,h.default)(I,2);a=W[0],n=W[1]}else if(u=="value"||!u){var Z=H(P,m,c,u,o,l,k,s,T,f),X=(0,h.default)(Z,2);a=X[0],n=X[1]}if(!a){var G=(0,C.getFieldConfig)(k,m),z=(0,O.getWidgetForFieldOp)(k,m,s,u),K=s?(0,C.getOperatorConfig)(k,s,m):null,Y=(0,A.default)((0,C.getFieldWidgetConfig)(k,m,s,z,u),["factory"]),re=u=="field"?(0,C.getFieldConfig)(k,c):null,ne=Y,ue=Y.validateValue;if(typeof ue=="function"){var ae=[n,ne,s,K];u=="field"&&ae.push(re);var ve=ue.apply(void 0,ae);typeof ve=="boolean"?ve==!1&&(a="Invalid value"):a=ve}}}return p&&a&&console.warn("[RAQB validate]","Field ".concat(m,": ").concat(a)),[a,n]};i.validateValue=j;var x=function(k,P,m,s,c){var o=S.List.isList(k)?k.toJS():k instanceof Array?(0,y.default)(k):void 0;if(o){var u=o.reduce(function(g,d){var I=(0,h.default)(g,2),W=I[0],Z=I[1],X=(0,R.getItemInListValues)(P,d);return X==null?[W,[].concat((0,y.default)(Z),[d])]:[[].concat((0,y.default)(W),[X.value]),Z]},[[],[]]),l=(0,h.default)(u,2),f=l[0],T=l[1],p=T.length>1,a=T.length?"".concat(p?"Values":"Value"," ").concat(T.join(", ")," ").concat(p?"are":"is"," not in list of values"):null;return c!==void 0?m=c:m=m||s,[a,m?f:k]}else{var n=(0,R.getItemInListValues)(P,k);return n==null?["Value ".concat(k," is not in list of values"),k]:(k=n.value,[null,k])}},H=function(k,P,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,T=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(P){var p=(0,C.getFieldConfig)(u,P),a=(0,O.getWidgetForFieldOp)(u,P,l,s),n=u.widgets[a],g=n.type,d=n.jsType,I=p.fieldSettings;if(c!=g)return["Value should have type ".concat(g,", but got value of type ").concat(c),m];if(d&&!D(m,d)&&!I.listValues)return["Value should have JS type ".concat(d,", but got value of type ").concat((0,b.default)(m)),m];if(I){var W=o||I.listValues;if(W&&!I.allowCustomValues)return x(m,W,T,f,u.settings.removeInvalidMultiSelectValuesOnLoad);if(I.min!=null&&m<I.min)return["Value ".concat(m," < min ").concat(I.min),T?I.min:m];if(I.max!=null&&m>I.max)return["Value ".concat(m," > max ").concat(I.max),T?I.max:m]}}return[null,m]},_=function(k,P,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,T=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=u.settings.fieldSeparator,a=(0,b.default)(P)=="object"&&P?._isFuncArg,n=Array.isArray(k)?k.join(p):k,g=Array.isArray(m)?m.join(p):m,d=(0,C.getFieldConfig)(u,m);return d?g==n&&!a?["Can't compare field ".concat(k," with itself"),m]:c&&c!=d.type?["Field ".concat(m," is of type ").concat(d.type,", but expected ").concat(c),m]:[null,m]:["Unknown field ".concat(m),m]},te=function(k,P,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,T=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,p=m;if(m){var a=m.get("func");if(a){var n=(0,C.getFuncConfig)(u,a);if(n){if(c&&n.returnType!=c)return["Function ".concat(a," should return value of type ").concat(n.returnType,", but got ").concat(c),m];for(var g in n.args){var d=n.args[g],I=p.get("args"),W=I?I.get(g):void 0,Z=(0,C.getFieldConfig)(u,d),X=W?W.get("value"):void 0,G=W?W.get("valueSrc"):void 0;if(X!==void 0){var z=j(u,k,Z,l,X,d.type,G,o,T,f,!1),K=(0,h.default)(z,2),Y=K[0],re=K[1];if(Y!==null)if(T)p=p.deleteIn(["args",g]),d.defaultValue!==void 0&&(p=p.setIn(["args",g,"value"],d.defaultValue),p=p.setIn(["args",g,"valueSrc"],"value"));else return["Invalid value of arg ".concat(g," for func ").concat(a,": ").concat(Y),m];else re!==X&&(p=p.setIn(["args",g,"value"],re))}else if(f&&d.defaultValue===void 0&&!T)return["Value of arg ".concat(g," for func ").concat(a," is required"),m]}}else return["Unknown function ".concat(a),m]}}return[null,p]}},95512:(ee,i,e)=>{"use strict";e.r(i),e.d(i,{Provider:()=>F,ReactReduxContext:()=>h,batch:()=>He.unstable_batchedUpdates,connect:()=>Oe,connectAdvanced:()=>c,createDispatchHook:()=>we,createSelectorHook:()=>ke,createStoreHook:()=>ce,shallowEqual:()=>u,useDispatch:()=>je,useSelector:()=>at,useStore:()=>Ne});var r=e(68404),y=e(59160),h=r.createContext(null);const b=null;function C(fe){fe()}var O=C,R=function(Ee){return O=Ee},E=function(){return O};function L(){var fe=E(),Ee=null,Ce=null;return{clear:function(){Ee=null,Ce=null},notify:function(){fe(function(){for(var De=Ee;De;)De.callback(),De=De.next})},get:function(){for(var De=[],Me=Ee;Me;)De.push(Me),Me=Me.next;return De},subscribe:function(De){var Me=!0,Ae=Ce={callback:De,next:null,prev:Ce};return Ae.prev?Ae.prev.next=Ae:Ee=Ae,function(){!Me||Ee===null||(Me=!1,Ae.next?Ae.next.prev=Ae.prev:Ce=Ae.prev,Ae.prev?Ae.prev.next=Ae.next:Ee=Ae.next)}}}}var A={notify:function(){},get:function(){return[]}};function S(fe,Ee){var Ce,Fe=A;function De(lt){return rt(),Fe.subscribe(lt)}function Me(){Fe.notify()}function Ae(){Qe.onStateChange&&Qe.onStateChange()}function $e(){return Boolean(Ce)}function rt(){Ce||(Ce=Ee?Ee.addNestedSub(Ae):fe.subscribe(Ae),Fe=L())}function it(){Ce&&(Ce(),Ce=void 0,Fe.clear(),Fe=A)}var Qe={addNestedSub:De,notifyNestedSubs:Me,handleChangeWrapper:Ae,isSubscribed:$e,trySubscribe:rt,tryUnsubscribe:it,getListeners:function(){return Fe}};return Qe}var M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?r.useLayoutEffect:r.useEffect;function D(fe){var Ee=fe.store,Ce=fe.context,Fe=fe.children,De=(0,r.useMemo)(function(){var $e=S(Ee);return{store:Ee,subscription:$e}},[Ee]),Me=(0,r.useMemo)(function(){return Ee.getState()},[Ee]);M(function(){var $e=De.subscription;return $e.onStateChange=$e.notifyNestedSubs,$e.trySubscribe(),Me!==Ee.getState()&&$e.notifyNestedSubs(),function(){$e.tryUnsubscribe(),$e.onStateChange=null}},[De,Me]);var Ae=Ce||h;return r.createElement(Ae.Provider,{value:De},Fe)}const F=D;var U=e(22060),N=e(49309),$=e(24420),w=e.n($),V=e(2459),j=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],x=["reactReduxForwardedRef"],H=[],_=[null,null],te=function(Ee){try{return JSON.stringify(Ee)}catch{return String(Ee)}};function J(fe,Ee){var Ce=fe[1];return[Ee.payload,Ce+1]}function k(fe,Ee,Ce){M(function(){return fe.apply(void 0,Ee)},Ce)}function P(fe,Ee,Ce,Fe,De,Me,Ae){fe.current=Fe,Ee.current=De,Ce.current=!1,Me.current&&(Me.current=null,Ae())}function m(fe,Ee,Ce,Fe,De,Me,Ae,$e,rt,it){if(fe){var Qe=!1,lt=null,ct=function(){if(!Qe){var pe=Ee.getState(),he,Le;try{he=Fe(pe,De.current)}catch(Pe){Le=Pe,lt=Pe}Le||(lt=null),he===Me.current?Ae.current||rt():(Me.current=he,$e.current=he,Ae.current=!0,it({type:"STORE_UPDATED",payload:{error:Le}}))}};Ce.onStateChange=ct,Ce.trySubscribe(),ct();var _e=function(){if(Qe=!0,Ce.tryUnsubscribe(),Ce.onStateChange=null,lt)throw lt};return _e}}var s=function(){return[null,0]};function c(fe,Ee){Ee===void 0&&(Ee={});var Ce=Ee,Fe=Ce.getDisplayName,De=Fe===void 0?function(et){return"ConnectAdvanced("+et+")"}:Fe,Me=Ce.methodName,Ae=Me===void 0?"connectAdvanced":Me,$e=Ce.renderCountProp,rt=$e===void 0?void 0:$e,it=Ce.shouldHandleStateChanges,Qe=it===void 0?!0:it,lt=Ce.storeKey,ct=lt===void 0?"store":lt,_e=Ce.withRef,gt=_e===void 0?!1:_e,pe=Ce.forwardRef,he=pe===void 0?!1:pe,Le=Ce.context,Pe=Le===void 0?h:Le,Ve=(0,N.Z)(Ce,j);if(!1)var Ge;var xe=Pe;return function(We){var Be=We.displayName||We.name||"Component",ft=De(Be),st=(0,U.Z)({},Ve,{getDisplayName:De,methodName:Ae,renderCountProp:rt,shouldHandleStateChanges:Qe,storeKey:ct,displayName:ft,wrappedComponentName:Be,WrappedComponent:We}),pt=Ve.pure;function ut(Ze){return fe(Ze.dispatch,st)}var be=pt?r.useMemo:function(Ze){return Ze()};function Xe(Ze){var dt=(0,r.useMemo)(function(){var Kt=Ze.reactReduxForwardedRef,ur=(0,N.Z)(Ze,x);return[Ze.context,Kt,ur]},[Ze]),mt=dt[0],Nt=dt[1],tt=dt[2],Ct=(0,r.useMemo)(function(){return mt&&mt.Consumer&&(0,V.isContextConsumer)(r.createElement(mt.Consumer,null))?mt:xe},[mt,xe]),le=(0,r.useContext)(Ct),me=Boolean(Ze.store)&&Boolean(Ze.store.getState)&&Boolean(Ze.store.dispatch),Ue=Boolean(le)&&Boolean(le.store),ot=me?Ze.store:le.store,yt=(0,r.useMemo)(function(){return ut(ot)},[ot]),Pt=(0,r.useMemo)(function(){if(!Qe)return _;var Kt=S(ot,me?null:le.subscription),ur=Kt.notifyNestedSubs.bind(Kt);return[Kt,ur]},[ot,me,le]),Gt=Pt[0],rr=Pt[1],kt=(0,r.useMemo)(function(){return me?le:(0,U.Z)({},le,{subscription:Gt})},[me,le,Gt]),fr=(0,r.useReducer)(J,H,s),Or=fr[0],Ht=Or[0],$t=fr[1];if(Ht&&Ht.error)throw Ht.error;var nr=(0,r.useRef)(),Yt=(0,r.useRef)(tt),zt=(0,r.useRef)(),ar=(0,r.useRef)(!1),Qt=be(function(){return zt.current&&tt===Yt.current?zt.current:yt(ot.getState(),tt)},[ot,Ht,tt]);k(P,[Yt,nr,ar,tt,Qt,zt,rr]),k(m,[Qe,ot,Gt,yt,Yt,nr,ar,zt,rr,$t],[ot,Gt,yt]);var Jt=(0,r.useMemo)(function(){return r.createElement(We,(0,U.Z)({},Qt,{ref:Nt}))},[Nt,We,Qt]),Er=(0,r.useMemo)(function(){return Qe?r.createElement(Ct.Provider,{value:kt},Jt):Jt},[Ct,Jt,kt]);return Er}var nt=pt?r.memo(Xe):Xe;if(nt.WrappedComponent=We,nt.displayName=Xe.displayName=ft,he){var ze=r.forwardRef(function(dt,mt){return r.createElement(nt,(0,U.Z)({},dt,{reactReduxForwardedRef:mt}))});return ze.displayName=ft,ze.WrappedComponent=We,w()(ze,We)}return w()(nt,We)}}function o(fe,Ee){return fe===Ee?fe!==0||Ee!==0||1/fe===1/Ee:fe!==fe&&Ee!==Ee}function u(fe,Ee){if(o(fe,Ee))return!0;if(typeof fe!="object"||fe===null||typeof Ee!="object"||Ee===null)return!1;var Ce=Object.keys(fe),Fe=Object.keys(Ee);if(Ce.length!==Fe.length)return!1;for(var De=0;De<Ce.length;De++)if(!Object.prototype.hasOwnProperty.call(Ee,Ce[De])||!o(fe[Ce[De]],Ee[Ce[De]]))return!1;return!0}function l(fe,Ee){var Ce={},Fe=function(Ae){var $e=fe[Ae];typeof $e=="function"&&(Ce[Ae]=function(){return Ee($e.apply(void 0,arguments))})};for(var De in fe)Fe(De);return Ce}function f(fe){return function(Ce,Fe){var De=fe(Ce,Fe);function Me(){return De}return Me.dependsOnOwnProps=!1,Me}}function T(fe){return fe.dependsOnOwnProps!==null&&fe.dependsOnOwnProps!==void 0?Boolean(fe.dependsOnOwnProps):fe.length!==1}function p(fe,Ee){return function(Fe,De){var Me=De.displayName,Ae=function(rt,it){return Ae.dependsOnOwnProps?Ae.mapToProps(rt,it):Ae.mapToProps(rt)};return Ae.dependsOnOwnProps=!0,Ae.mapToProps=function(rt,it){Ae.mapToProps=fe,Ae.dependsOnOwnProps=T(fe);var Qe=Ae(rt,it);return typeof Qe=="function"&&(Ae.mapToProps=Qe,Ae.dependsOnOwnProps=T(Qe),Qe=Ae(rt,it)),Qe},Ae}}function a(fe){return typeof fe=="function"?p(fe,"mapDispatchToProps"):void 0}function n(fe){return fe?void 0:f(function(Ee){return{dispatch:Ee}})}function g(fe){return fe&&typeof fe=="object"?f(function(Ee){return l(fe,Ee)}):void 0}const d=[a,n,g];function I(fe){return typeof fe=="function"?p(fe,"mapStateToProps"):void 0}function W(fe){return fe?void 0:f(function(){return{}})}const Z=[I,W];function X(fe,Ee,Ce){return(0,U.Z)({},Ce,fe,Ee)}function G(fe){return function(Ce,Fe){var De=Fe.displayName,Me=Fe.pure,Ae=Fe.areMergedPropsEqual,$e=!1,rt;return function(Qe,lt,ct){var _e=fe(Qe,lt,ct);return $e?(!Me||!Ae(_e,rt))&&(rt=_e):($e=!0,rt=_e),rt}}}function z(fe){return typeof fe=="function"?G(fe):void 0}function K(fe){return fe?void 0:function(){return X}}const Y=[z,K];var re=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ne(fe,Ee,Ce,Fe){return function(Me,Ae){return Ce(fe(Me,Ae),Ee(Fe,Ae),Ae)}}function ue(fe,Ee,Ce,Fe,De){var Me=De.areStatesEqual,Ae=De.areOwnPropsEqual,$e=De.areStatePropsEqual,rt=!1,it,Qe,lt,ct,_e;function gt(Ve,Ge){return it=Ve,Qe=Ge,lt=fe(it,Qe),ct=Ee(Fe,Qe),_e=Ce(lt,ct,Qe),rt=!0,_e}function pe(){return lt=fe(it,Qe),Ee.dependsOnOwnProps&&(ct=Ee(Fe,Qe)),_e=Ce(lt,ct,Qe),_e}function he(){return fe.dependsOnOwnProps&&(lt=fe(it,Qe)),Ee.dependsOnOwnProps&&(ct=Ee(Fe,Qe)),_e=Ce(lt,ct,Qe),_e}function Le(){var Ve=fe(it,Qe),Ge=!$e(Ve,lt);return lt=Ve,Ge&&(_e=Ce(lt,ct,Qe)),_e}function Pe(Ve,Ge){var xe=!Ae(Ge,Qe),et=!Me(Ve,it);return it=Ve,Qe=Ge,xe&&et?pe():xe?he():et?Le():_e}return function(Ge,xe){return rt?Pe(Ge,xe):gt(Ge,xe)}}function ae(fe,Ee){var Ce=Ee.initMapStateToProps,Fe=Ee.initMapDispatchToProps,De=Ee.initMergeProps,Me=(0,N.Z)(Ee,re),Ae=Ce(fe,Me),$e=Fe(fe,Me),rt=De(fe,Me),it=Me.pure?ue:ne;return it(Ae,$e,rt,fe,Me)}var ve=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function se(fe,Ee,Ce){for(var Fe=Ee.length-1;Fe>=0;Fe--){var De=Ee[Fe](fe);if(De)return De}return function(Me,Ae){throw new Error("Invalid value of type "+typeof fe+" for "+Ce+" argument when connecting component "+Ae.wrappedComponentName+".")}}function ge(fe,Ee){return fe===Ee}function ye(fe){var Ee=fe===void 0?{}:fe,Ce=Ee.connectHOC,Fe=Ce===void 0?c:Ce,De=Ee.mapStateToPropsFactories,Me=De===void 0?Z:De,Ae=Ee.mapDispatchToPropsFactories,$e=Ae===void 0?d:Ae,rt=Ee.mergePropsFactories,it=rt===void 0?Y:rt,Qe=Ee.selectorFactory,lt=Qe===void 0?ae:Qe;return function(_e,gt,pe,he){he===void 0&&(he={});var Le=he,Pe=Le.pure,Ve=Pe===void 0?!0:Pe,Ge=Le.areStatesEqual,xe=Ge===void 0?ge:Ge,et=Le.areOwnPropsEqual,We=et===void 0?u:et,Be=Le.areStatePropsEqual,ft=Be===void 0?u:Be,st=Le.areMergedPropsEqual,pt=st===void 0?u:st,ut=(0,N.Z)(Le,ve),be=se(_e,Me,"mapStateToProps"),Xe=se(gt,$e,"mapDispatchToProps"),nt=se(pe,it,"mergeProps");return Fe(lt,(0,U.Z)({methodName:"connect",getDisplayName:function(Ze){return"Connect("+Ze+")"},shouldHandleStateChanges:Boolean(_e),initMapStateToProps:be,initMapDispatchToProps:Xe,initMergeProps:nt,pure:Ve,areStatesEqual:xe,areOwnPropsEqual:We,areStatePropsEqual:ft,areMergedPropsEqual:pt},ut))}}const Oe=ye();function Se(){var fe=(0,r.useContext)(h);return fe}function ce(fe){fe===void 0&&(fe=h);var Ee=fe===h?Se:function(){return(0,r.useContext)(fe)};return function(){var Fe=Ee(),De=Fe.store;return De}}var Ne=ce();function we(fe){fe===void 0&&(fe=h);var Ee=fe===h?Ne:ce(fe);return function(){var Fe=Ee();return Fe.dispatch}}var je=we(),Ke=function(Ee,Ce){return Ee===Ce};function Ye(fe,Ee,Ce,Fe){var De=(0,r.useReducer)(function(gt){return gt+1},0),Me=De[1],Ae=(0,r.useMemo)(function(){return S(Ce,Fe)},[Ce,Fe]),$e=(0,r.useRef)(),rt=(0,r.useRef)(),it=(0,r.useRef)(),Qe=(0,r.useRef)(),lt=Ce.getState(),ct;try{if(fe!==rt.current||lt!==it.current||$e.current){var _e=fe(lt);Qe.current===void 0||!Ee(_e,Qe.current)?ct=_e:ct=Qe.current}else ct=Qe.current}catch(gt){throw $e.current&&(gt.message+=`
The error may be correlated with this previous error:
`+$e.current.stack+`

`),gt}return M(function(){rt.current=fe,it.current=lt,Qe.current=ct,$e.current=void 0}),M(function(){function gt(){try{var pe=Ce.getState();if(pe===it.current)return;var he=rt.current(pe);if(Ee(he,Qe.current))return;Qe.current=he,it.current=pe}catch(Le){$e.current=Le}Me()}return Ae.onStateChange=gt,Ae.trySubscribe(),gt(),function(){return Ae.tryUnsubscribe()}},[Ce,Ae]),ct}function ke(fe){fe===void 0&&(fe=h);var Ee=fe===h?Se:function(){return(0,r.useContext)(fe)};return function(Fe,De){De===void 0&&(De=Ke);var Me=Ee(),Ae=Me.store,$e=Me.subscription,rt=Ye(Fe,De,Ae,$e);return(0,r.useDebugValue)(rt),rt}}var at=ke(),He=e(97394);R(He.unstable_batchedUpdates)},3823:(ee,i,e)=>{"use strict";e.d(i,{Z:()=>E});var r=e(81582),y=e.n(r),h=e(68404),b=e(24015),C=function(L){L===void 0&&(L={});var A=(0,h.useState)(L),S=A[0],M=A[1],D=(0,h.useCallback)(function(F){M(function(U){return Object.assign({},U,F instanceof Function?F(U):F)})},[]);return[S,D]};const O=C;var R=function(){var L=(0,b.Z)(),A=O({value:void 0,error:void 0,noUserInteraction:!0}),S=A[0],M=A[1],D=(0,h.useCallback)(function(F){if(L()){var U,N;try{if(typeof F!="string"&&typeof F!="number"){var $=new Error("Cannot copy typeof "+typeof F+" to clipboard, must be a string");M({value:F,error:$,noUserInteraction:!0});return}else if(F===""){var $=new Error("Cannot copy empty string to clipboard.");M({value:F,error:$,noUserInteraction:!0});return}N=F.toString(),U=y()(N),M({value:N,error:void 0,noUserInteraction:U})}catch(w){M({value:N,error:w,noUserInteraction:U})}}},[]);return[S,D]};const E=R},63615:(ee,i,e)=>{"use strict";var r;r={value:!0};var y=e(9683),h=e(68404),b=y.__importDefault(e(59692));function C(O,R,E){R===void 0&&(R=0),E===void 0&&(E=[]);var L=b.default(O,R),A=L[0],S=L[1],M=L[2];return h.useEffect(M,E),[A,S]}i.Z=C},59692:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(68404);function y(h,b){b===void 0&&(b=0);var C=r.useRef(!1),O=r.useRef(),R=r.useRef(h),E=r.useCallback(function(){return C.current},[]),L=r.useCallback(function(){C.current=!1,O.current&&clearTimeout(O.current),O.current=setTimeout(function(){C.current=!0,R.current()},b)},[b]),A=r.useCallback(function(){C.current=null,O.current&&clearTimeout(O.current)},[]);return r.useEffect(function(){R.current=h},[h]),r.useEffect(function(){return L(),A},[b]),[E,A,L]}i.default=y},29521:(ee,i,e)=>{var r=e(76345).Buffer,y=function(){"use strict";function h(D,F){return F!=null&&D instanceof F}var b;try{b=Map}catch{b=function(){}}var C;try{C=Set}catch{C=function(){}}var O;try{O=Promise}catch{O=function(){}}function R(D,F,U,N,$){typeof F=="object"&&(U=F.depth,N=F.prototype,$=F.includeNonEnumerable,F=F.circular);var w=[],V=[],j=typeof r<"u";typeof F>"u"&&(F=!0),typeof U>"u"&&(U=1/0);function x(H,_){if(H===null)return null;if(_===0)return H;var te,J;if(typeof H!="object")return H;if(h(H,b))te=new b;else if(h(H,C))te=new C;else if(h(H,O))te=new O(function(f,T){H.then(function(p){f(x(p,_-1))},function(p){T(x(p,_-1))})});else if(R.__isArray(H))te=[];else if(R.__isRegExp(H))te=new RegExp(H.source,M(H)),H.lastIndex&&(te.lastIndex=H.lastIndex);else if(R.__isDate(H))te=new Date(H.getTime());else{if(j&&r.isBuffer(H))return r.allocUnsafe?te=r.allocUnsafe(H.length):te=new r(H.length),H.copy(te),te;h(H,Error)?te=Object.create(H):typeof N>"u"?(J=Object.getPrototypeOf(H),te=Object.create(J)):(te=Object.create(N),J=N)}if(F){var k=w.indexOf(H);if(k!=-1)return V[k];w.push(H),V.push(te)}h(H,b)&&H.forEach(function(f,T){var p=x(T,_-1),a=x(f,_-1);te.set(p,a)}),h(H,C)&&H.forEach(function(f){var T=x(f,_-1);te.add(T)});for(var P in H){var m;J&&(m=Object.getOwnPropertyDescriptor(J,P)),!(m&&m.set==null)&&(te[P]=x(H[P],_-1))}if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(H),P=0;P<s.length;P++){var c=s[P],o=Object.getOwnPropertyDescriptor(H,c);o&&!o.enumerable&&!$||(te[c]=x(H[c],_-1),o.enumerable||Object.defineProperty(te,c,{enumerable:!1}))}if($)for(var u=Object.getOwnPropertyNames(H),P=0;P<u.length;P++){var l=u[P],o=Object.getOwnPropertyDescriptor(H,l);o&&o.enumerable||(te[l]=x(H[l],_-1),Object.defineProperty(te,l,{enumerable:!1}))}return te}return x(D,U)}R.clonePrototype=function(F){if(F===null)return null;var U=function(){};return U.prototype=F,new U};function E(D){return Object.prototype.toString.call(D)}R.__objToStr=E;function L(D){return typeof D=="object"&&E(D)==="[object Date]"}R.__isDate=L;function A(D){return typeof D=="object"&&E(D)==="[object Array]"}R.__isArray=A;function S(D){return typeof D=="object"&&E(D)==="[object RegExp]"}R.__isRegExp=S;function M(D){var F="";return D.global&&(F+="g"),D.ignoreCase&&(F+="i"),D.multiline&&(F+="m"),F}return R.__getRegExpFlags=M,R}();ee.exports&&(ee.exports=y)},81582:(ee,i,e)=>{"use strict";var r=e(66259),y={"text/plain":"Text","text/html":"Url",default:"Text"},h="Copy to clipboard: #{key}, Enter";function b(O){var R=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return O.replace(/#{\s*key\s*}/g,R)}function C(O,R){var E,L,A,S,M,D,F=!1;R||(R={}),E=R.debug||!1;try{A=r(),S=document.createRange(),M=document.getSelection(),D=document.createElement("span"),D.textContent=O,D.style.all="unset",D.style.position="fixed",D.style.top=0,D.style.clip="rect(0, 0, 0, 0)",D.style.whiteSpace="pre",D.style.webkitUserSelect="text",D.style.MozUserSelect="text",D.style.msUserSelect="text",D.style.userSelect="text",D.addEventListener("copy",function(N){if(N.stopPropagation(),R.format)if(N.preventDefault(),typeof N.clipboardData>"u"){E&&console.warn("unable to use e.clipboardData"),E&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var $=y[R.format]||y.default;window.clipboardData.setData($,O)}else N.clipboardData.clearData(),N.clipboardData.setData(R.format,O);R.onCopy&&(N.preventDefault(),R.onCopy(N.clipboardData))}),document.body.appendChild(D),S.selectNodeContents(D),M.addRange(S);var U=document.execCommand("copy");if(!U)throw new Error("copy command was unsuccessful");F=!0}catch(N){E&&console.error("unable to copy using execCommand: ",N),E&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(R.format||"text",O),R.onCopy&&R.onCopy(window.clipboardData),F=!0}catch($){E&&console.error("unable to copy using clipboardData: ",$),E&&console.error("falling back to prompt"),L=b("message"in R?R.message:h),window.prompt(L,O)}}finally{M&&(typeof M.removeRange=="function"?M.removeRange(S):M.removeAllRanges()),D&&document.body.removeChild(D),A()}return F}ee.exports=C},40745:function(ee){(function(i,e){ee.exports=e()})(this,function(){"use strict";var i=Array.prototype.slice;function e(t,v){v&&(t.prototype=Object.create(v.prototype)),t.prototype.constructor=t}function r(t){return C(t)?t:z(t)}e(y,r);function y(t){return O(t)?t:K(t)}e(h,r);function h(t){return R(t)?t:Y(t)}e(b,r);function b(t){return C(t)&&!E(t)?t:re(t)}function C(t){return!!(t&&t[A])}function O(t){return!!(t&&t[S])}function R(t){return!!(t&&t[M])}function E(t){return O(t)||R(t)}function L(t){return!!(t&&t[D])}r.isIterable=C,r.isKeyed=O,r.isIndexed=R,r.isAssociative=E,r.isOrdered=L,r.Keyed=y,r.Indexed=h,r.Set=b;var A="@@__IMMUTABLE_ITERABLE__@@",S="@@__IMMUTABLE_KEYED__@@",M="@@__IMMUTABLE_INDEXED__@@",D="@@__IMMUTABLE_ORDERED__@@",F="delete",U=5,N=1<<U,$=N-1,w={},V={value:!1},j={value:!1};function x(t){return t.value=!1,t}function H(t){t&&(t.value=!0)}function _(){}function te(t,v){v=v||0;for(var B=Math.max(0,t.length-v),Q=new Array(B),q=0;q<B;q++)Q[q]=t[q+v];return Q}function J(t){return t.size===void 0&&(t.size=t.__iterate(P)),t.size}function k(t,v){if(typeof v!="number"){var B=v>>>0;if(""+B!==v||B===4294967295)return NaN;v=B}return v<0?J(t)+v:v}function P(){return!0}function m(t,v,B){return(t===0||B!==void 0&&t<=-B)&&(v===void 0||B!==void 0&&v>=B)}function s(t,v){return o(t,v,0)}function c(t,v){return o(t,v,v)}function o(t,v,B){return t===void 0?B:t<0?Math.max(0,v+t):v===void 0?t:Math.min(v,t)}var u=0,l=1,f=2,T=typeof Symbol=="function"&&Symbol.iterator,p="@@iterator",a=T||p;function n(t){this.next=t}n.prototype.toString=function(){return"[Iterator]"},n.KEYS=u,n.VALUES=l,n.ENTRIES=f,n.prototype.inspect=n.prototype.toSource=function(){return this.toString()},n.prototype[a]=function(){return this};function g(t,v,B,Q){var q=t===0?v:t===1?B:[v,B];return Q?Q.value=q:Q={value:q,done:!1},Q}function d(){return{value:void 0,done:!0}}function I(t){return!!X(t)}function W(t){return t&&typeof t.next=="function"}function Z(t){var v=X(t);return v&&v.call(t)}function X(t){var v=t&&(T&&t[T]||t[p]);if(typeof v=="function")return v}function G(t){return t&&typeof t.length=="number"}e(z,r);function z(t){return t==null?Oe():C(t)?t.toSeq():Ne(t)}z.of=function(){return z(arguments)},z.prototype.toSeq=function(){return this},z.prototype.toString=function(){return this.__toString("Seq {","}")},z.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},z.prototype.__iterate=function(t,v){return je(this,t,v,!0)},z.prototype.__iterator=function(t,v){return Ke(this,t,v,!0)},e(K,z);function K(t){return t==null?Oe().toKeyedSeq():C(t)?O(t)?t.toSeq():t.fromEntrySeq():Se(t)}K.prototype.toKeyedSeq=function(){return this},e(Y,z);function Y(t){return t==null?Oe():C(t)?O(t)?t.entrySeq():t.toIndexedSeq():ce(t)}Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(t,v){return je(this,t,v,!1)},Y.prototype.__iterator=function(t,v){return Ke(this,t,v,!1)},e(re,z);function re(t){return(t==null?Oe():C(t)?O(t)?t.entrySeq():t:ce(t)).toSetSeq()}re.of=function(){return re(arguments)},re.prototype.toSetSeq=function(){return this},z.isSeq=ge,z.Keyed=K,z.Set=re,z.Indexed=Y;var ne="@@__IMMUTABLE_SEQ__@@";z.prototype[ne]=!0,e(ue,Y);function ue(t){this._array=t,this.size=t.length}ue.prototype.get=function(t,v){return this.has(t)?this._array[k(this,t)]:v},ue.prototype.__iterate=function(t,v){for(var B=this._array,Q=B.length-1,q=0;q<=Q;q++)if(t(B[v?Q-q:q],q,this)===!1)return q+1;return q},ue.prototype.__iterator=function(t,v){var B=this._array,Q=B.length-1,q=0;return new n(function(){return q>Q?d():g(t,q,B[v?Q-q++:q++])})},e(ae,K);function ae(t){var v=Object.keys(t);this._object=t,this._keys=v,this.size=v.length}ae.prototype.get=function(t,v){return v!==void 0&&!this.has(t)?v:this._object[t]},ae.prototype.has=function(t){return this._object.hasOwnProperty(t)},ae.prototype.__iterate=function(t,v){for(var B=this._object,Q=this._keys,q=Q.length-1,ie=0;ie<=q;ie++){var oe=Q[v?q-ie:ie];if(t(B[oe],oe,this)===!1)return ie+1}return ie},ae.prototype.__iterator=function(t,v){var B=this._object,Q=this._keys,q=Q.length-1,ie=0;return new n(function(){var oe=Q[v?q-ie:ie];return ie++>q?d():g(t,oe,B[oe])})},ae.prototype[D]=!0,e(ve,Y);function ve(t){this._iterable=t,this.size=t.length||t.size}ve.prototype.__iterateUncached=function(t,v){if(v)return this.cacheResult().__iterate(t,v);var B=this._iterable,Q=Z(B),q=0;if(W(Q))for(var ie;!(ie=Q.next()).done&&t(ie.value,q++,this)!==!1;);return q},ve.prototype.__iteratorUncached=function(t,v){if(v)return this.cacheResult().__iterator(t,v);var B=this._iterable,Q=Z(B);if(!W(Q))return new n(d);var q=0;return new n(function(){var ie=Q.next();return ie.done?ie:g(t,q++,ie.value)})},e(se,Y);function se(t){this._iterator=t,this._iteratorCache=[]}se.prototype.__iterateUncached=function(t,v){if(v)return this.cacheResult().__iterate(t,v);for(var B=this._iterator,Q=this._iteratorCache,q=0;q<Q.length;)if(t(Q[q],q++,this)===!1)return q;for(var ie;!(ie=B.next()).done;){var oe=ie.value;if(Q[q]=oe,t(oe,q++,this)===!1)break}return q},se.prototype.__iteratorUncached=function(t,v){if(v)return this.cacheResult().__iterator(t,v);var B=this._iterator,Q=this._iteratorCache,q=0;return new n(function(){if(q>=Q.length){var ie=B.next();if(ie.done)return ie;Q[q]=ie.value}return g(t,q,Q[q++])})};function ge(t){return!!(t&&t[ne])}var ye;function Oe(){return ye||(ye=new ue([]))}function Se(t){var v=Array.isArray(t)?new ue(t).fromEntrySeq():W(t)?new se(t).fromEntrySeq():I(t)?new ve(t).fromEntrySeq():typeof t=="object"?new ae(t):void 0;if(!v)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return v}function ce(t){var v=we(t);if(!v)throw new TypeError("Expected Array or iterable object of values: "+t);return v}function Ne(t){var v=we(t)||typeof t=="object"&&new ae(t);if(!v)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return v}function we(t){return G(t)?new ue(t):W(t)?new se(t):I(t)?new ve(t):void 0}function je(t,v,B,Q){var q=t._cache;if(q){for(var ie=q.length-1,oe=0;oe<=ie;oe++){var de=q[B?ie-oe:oe];if(v(de[1],Q?de[0]:oe,t)===!1)return oe+1}return oe}return t.__iterateUncached(v,B)}function Ke(t,v,B,Q){var q=t._cache;if(q){var ie=q.length-1,oe=0;return new n(function(){var de=q[B?ie-oe:oe];return oe++>ie?d():g(v,Q?de[0]:oe-1,de[1])})}return t.__iteratorUncached(v,B)}function Ye(t,v){return v?ke(v,t,"",{"":t}):at(t)}function ke(t,v,B,Q){return Array.isArray(v)?t.call(Q,B,Y(v).map(function(q,ie){return ke(t,q,ie,v)})):He(v)?t.call(Q,B,K(v).map(function(q,ie){return ke(t,q,ie,v)})):v}function at(t){return Array.isArray(t)?Y(t).map(at).toList():He(t)?K(t).map(at).toMap():t}function He(t){return t&&(t.constructor===Object||t.constructor===void 0)}function fe(t,v){if(t===v||t!==t&&v!==v)return!0;if(!t||!v)return!1;if(typeof t.valueOf=="function"&&typeof v.valueOf=="function"){if(t=t.valueOf(),v=v.valueOf(),t===v||t!==t&&v!==v)return!0;if(!t||!v)return!1}return!!(typeof t.equals=="function"&&typeof v.equals=="function"&&t.equals(v))}function Ee(t,v){if(t===v)return!0;if(!C(v)||t.size!==void 0&&v.size!==void 0&&t.size!==v.size||t.__hash!==void 0&&v.__hash!==void 0&&t.__hash!==v.__hash||O(t)!==O(v)||R(t)!==R(v)||L(t)!==L(v))return!1;if(t.size===0&&v.size===0)return!0;var B=!E(t);if(L(t)){var Q=t.entries();return v.every(function(Te,Re){var Ie=Q.next().value;return Ie&&fe(Ie[1],Te)&&(B||fe(Ie[0],Re))})&&Q.next().done}var q=!1;if(t.size===void 0)if(v.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{q=!0;var ie=t;t=v,v=ie}var oe=!0,de=v.__iterate(function(Te,Re){if(B?!t.has(Te):q?!fe(Te,t.get(Re,w)):!fe(t.get(Re,w),Te))return oe=!1,!1});return oe&&t.size===de}e(Ce,Y);function Ce(t,v){if(!(this instanceof Ce))return new Ce(t,v);if(this._value=t,this.size=v===void 0?1/0:Math.max(0,v),this.size===0){if(Fe)return Fe;Fe=this}}Ce.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Ce.prototype.get=function(t,v){return this.has(t)?this._value:v},Ce.prototype.includes=function(t){return fe(this._value,t)},Ce.prototype.slice=function(t,v){var B=this.size;return m(t,v,B)?this:new Ce(this._value,c(v,B)-s(t,B))},Ce.prototype.reverse=function(){return this},Ce.prototype.indexOf=function(t){return fe(this._value,t)?0:-1},Ce.prototype.lastIndexOf=function(t){return fe(this._value,t)?this.size:-1},Ce.prototype.__iterate=function(t,v){for(var B=0;B<this.size;B++)if(t(this._value,B,this)===!1)return B+1;return B},Ce.prototype.__iterator=function(t,v){var B=this,Q=0;return new n(function(){return Q<B.size?g(t,Q++,B._value):d()})},Ce.prototype.equals=function(t){return t instanceof Ce?fe(this._value,t._value):Ee(t)};var Fe;function De(t,v){if(!t)throw new Error(v)}e(Me,Y);function Me(t,v,B){if(!(this instanceof Me))return new Me(t,v,B);if(De(B!==0,"Cannot step a Range by 0"),t=t||0,v===void 0&&(v=1/0),B=B===void 0?1:Math.abs(B),v<t&&(B=-B),this._start=t,this._end=v,this._step=B,this.size=Math.max(0,Math.ceil((v-t)/B-1)+1),this.size===0){if(Ae)return Ae;Ae=this}}Me.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Me.prototype.get=function(t,v){return this.has(t)?this._start+k(this,t)*this._step:v},Me.prototype.includes=function(t){var v=(t-this._start)/this._step;return v>=0&&v<this.size&&v===Math.floor(v)},Me.prototype.slice=function(t,v){return m(t,v,this.size)?this:(t=s(t,this.size),v=c(v,this.size),v<=t?new Me(0,0):new Me(this.get(t,this._end),this.get(v,this._end),this._step))},Me.prototype.indexOf=function(t){var v=t-this._start;if(v%this._step===0){var B=v/this._step;if(B>=0&&B<this.size)return B}return-1},Me.prototype.lastIndexOf=function(t){return this.indexOf(t)},Me.prototype.__iterate=function(t,v){for(var B=this.size-1,Q=this._step,q=v?this._start+B*Q:this._start,ie=0;ie<=B;ie++){if(t(q,ie,this)===!1)return ie+1;q+=v?-Q:Q}return ie},Me.prototype.__iterator=function(t,v){var B=this.size-1,Q=this._step,q=v?this._start+B*Q:this._start,ie=0;return new n(function(){var oe=q;return q+=v?-Q:Q,ie>B?d():g(t,ie++,oe)})},Me.prototype.equals=function(t){return t instanceof Me?this._start===t._start&&this._end===t._end&&this._step===t._step:Ee(this,t)};var Ae;e($e,r);function $e(){throw TypeError("Abstract")}e(rt,$e);function rt(){}e(it,$e);function it(){}e(Qe,$e);function Qe(){}$e.Keyed=rt,$e.Indexed=it,$e.Set=Qe;var lt=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(v,B){v=v|0,B=B|0;var Q=v&65535,q=B&65535;return Q*q+((v>>>16)*q+Q*(B>>>16)<<16>>>0)|0};function ct(t){return t>>>1&1073741824|t&3221225471}function _e(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var v=typeof t;if(v==="number"){if(t!==t||t===1/0)return 0;var B=t|0;for(B!==t&&(B^=t*4294967295);t>4294967295;)t/=4294967295,B^=t;return ct(B)}if(v==="string")return t.length>Be?gt(t):pe(t);if(typeof t.hashCode=="function")return t.hashCode();if(v==="object")return he(t);if(typeof t.toString=="function")return pe(t.toString());throw new Error("Value type "+v+" cannot be hashed.")}function gt(t){var v=pt[t];return v===void 0&&(v=pe(t),st===ft&&(st=0,pt={}),st++,pt[t]=v),v}function pe(t){for(var v=0,B=0;B<t.length;B++)v=31*v+t.charCodeAt(B)|0;return ct(v)}function he(t){var v;if(Ge&&(v=xe.get(t),v!==void 0)||(v=t[We],v!==void 0)||!Pe&&(v=t.propertyIsEnumerable&&t.propertyIsEnumerable[We],v!==void 0||(v=Ve(t),v!==void 0)))return v;if(v=++et,et&1073741824&&(et=0),Ge)xe.set(t,v);else{if(Le!==void 0&&Le(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Pe)Object.defineProperty(t,We,{enumerable:!1,configurable:!1,writable:!1,value:v});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[We]=v;else if(t.nodeType!==void 0)t[We]=v;else throw new Error("Unable to set a non-enumerable property on object.")}return v}var Le=Object.isExtensible,Pe=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Ve(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Ge=typeof WeakMap=="function",xe;Ge&&(xe=new WeakMap);var et=0,We="__immutablehash__";typeof Symbol=="function"&&(We=Symbol(We));var Be=16,ft=255,st=0,pt={};function ut(t){De(t!==1/0,"Cannot perform this action with an infinite size.")}e(be,rt);function be(t){return t==null?yt():Xe(t)&&!L(t)?t:yt().withMutations(function(v){var B=y(t);ut(B.size),B.forEach(function(Q,q){return v.set(q,Q)})})}be.of=function(){var t=i.call(arguments,0);return yt().withMutations(function(v){for(var B=0;B<t.length;B+=2){if(B+1>=t.length)throw new Error("Missing value for key: "+t[B]);v.set(t[B],t[B+1])}})},be.prototype.toString=function(){return this.__toString("Map {","}")},be.prototype.get=function(t,v){return this._root?this._root.get(0,void 0,t,v):v},be.prototype.set=function(t,v){return Pt(this,t,v)},be.prototype.setIn=function(t,v){return this.updateIn(t,w,function(){return v})},be.prototype.remove=function(t){return Pt(this,t,w)},be.prototype.deleteIn=function(t){return this.updateIn(t,function(){return w})},be.prototype.update=function(t,v,B){return arguments.length===1?t(this):this.updateIn([t],v,B)},be.prototype.updateIn=function(t,v,B){B||(B=v,v=void 0);var Q=ar(this,Zr(t),v,B);return Q===w?void 0:Q},be.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):yt()},be.prototype.merge=function(){return $t(this,void 0,arguments)},be.prototype.mergeWith=function(t){var v=i.call(arguments,1);return $t(this,t,v)},be.prototype.mergeIn=function(t){var v=i.call(arguments,1);return this.updateIn(t,yt(),function(B){return typeof B.merge=="function"?B.merge.apply(B,v):v[v.length-1]})},be.prototype.mergeDeep=function(){return $t(this,nr,arguments)},be.prototype.mergeDeepWith=function(t){var v=i.call(arguments,1);return $t(this,Yt(t),v)},be.prototype.mergeDeepIn=function(t){var v=i.call(arguments,1);return this.updateIn(t,yt(),function(B){return typeof B.mergeDeep=="function"?B.mergeDeep.apply(B,v):v[v.length-1]})},be.prototype.sort=function(t){return Rt(er(this,t))},be.prototype.sortBy=function(t,v){return Rt(er(this,v,t))},be.prototype.withMutations=function(t){var v=this.asMutable();return t(v),v.wasAltered()?v.__ensureOwner(this.__ownerID):this},be.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new _)},be.prototype.asImmutable=function(){return this.__ensureOwner()},be.prototype.wasAltered=function(){return this.__altered},be.prototype.__iterator=function(t,v){return new Ct(this,t,v)},be.prototype.__iterate=function(t,v){var B=this,Q=0;return this._root&&this._root.iterate(function(q){return Q++,t(q[1],q[0],B)},v),Q},be.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ue(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function Xe(t){return!!(t&&t[nt])}be.isMap=Xe;var nt="@@__IMMUTABLE_MAP__@@",ze=be.prototype;ze[nt]=!0,ze[F]=ze.remove,ze.removeIn=ze.deleteIn;function Ze(t,v){this.ownerID=t,this.entries=v}Ze.prototype.get=function(t,v,B,Q){for(var q=this.entries,ie=0,oe=q.length;ie<oe;ie++)if(fe(B,q[ie][0]))return q[ie][1];return Q},Ze.prototype.update=function(t,v,B,Q,q,ie,oe){for(var de=q===w,Te=this.entries,Re=0,Ie=Te.length;Re<Ie&&!fe(Q,Te[Re][0]);Re++);var Je=Re<Ie;if(Je?Te[Re][1]===q:de)return this;if(H(oe),(de||!Je)&&H(ie),!(de&&Te.length===1)){if(!Je&&!de&&Te.length>=ur)return fr(t,Te,Q,q);var qe=t&&t===this.ownerID,vt=qe?Te:te(Te);return Je?de?Re===Ie-1?vt.pop():vt[Re]=vt.pop():vt[Re]=[Q,q]:vt.push([Q,q]),qe?(this.entries=vt,this):new Ze(t,vt)}};function dt(t,v,B){this.ownerID=t,this.bitmap=v,this.nodes=B}dt.prototype.get=function(t,v,B,Q){v===void 0&&(v=_e(B));var q=1<<((t===0?v:v>>>t)&$),ie=this.bitmap;return ie&q?this.nodes[Qt(ie&q-1)].get(t+U,v,B,Q):Q},dt.prototype.update=function(t,v,B,Q,q,ie,oe){B===void 0&&(B=_e(Q));var de=(v===0?B:B>>>v)&$,Te=1<<de,Re=this.bitmap,Ie=(Re&Te)!==0;if(!Ie&&q===w)return this;var Je=Qt(Re&Te-1),qe=this.nodes,vt=Ie?qe[Je]:void 0,ht=Gt(vt,t,v+U,B,Q,q,ie,oe);if(ht===vt)return this;if(!Ie&&ht&&qe.length>=pn)return Ht(t,qe,Re,de,ht);if(Ie&&!ht&&qe.length===2&&rr(qe[Je^1]))return qe[Je^1];if(Ie&&ht&&qe.length===1&&rr(ht))return ht;var Tt=t&&t===this.ownerID,Vt=Ie?ht?Re:Re^Te:Re|Te,Wt=Ie?ht?Jt(qe,Je,ht,Tt):Kt(qe,Je,Tt):Er(qe,Je,ht,Tt);return Tt?(this.bitmap=Vt,this.nodes=Wt,this):new dt(t,Vt,Wt)};function mt(t,v,B){this.ownerID=t,this.count=v,this.nodes=B}mt.prototype.get=function(t,v,B,Q){v===void 0&&(v=_e(B));var q=(t===0?v:v>>>t)&$,ie=this.nodes[q];return ie?ie.get(t+U,v,B,Q):Q},mt.prototype.update=function(t,v,B,Q,q,ie,oe){B===void 0&&(B=_e(Q));var de=(v===0?B:B>>>v)&$,Te=q===w,Re=this.nodes,Ie=Re[de];if(Te&&!Ie)return this;var Je=Gt(Ie,t,v+U,B,Q,q,ie,oe);if(Je===Ie)return this;var qe=this.count;if(!Ie)qe++;else if(!Je&&(qe--,qe<vn))return Or(t,Re,qe,de);var vt=t&&t===this.ownerID,ht=Jt(Re,de,Je,vt);return vt?(this.count=qe,this.nodes=ht,this):new mt(t,qe,ht)};function Nt(t,v,B){this.ownerID=t,this.keyHash=v,this.entries=B}Nt.prototype.get=function(t,v,B,Q){for(var q=this.entries,ie=0,oe=q.length;ie<oe;ie++)if(fe(B,q[ie][0]))return q[ie][1];return Q},Nt.prototype.update=function(t,v,B,Q,q,ie,oe){B===void 0&&(B=_e(Q));var de=q===w;if(B!==this.keyHash)return de?this:(H(oe),H(ie),kt(this,t,v,B,[Q,q]));for(var Te=this.entries,Re=0,Ie=Te.length;Re<Ie&&!fe(Q,Te[Re][0]);Re++);var Je=Re<Ie;if(Je?Te[Re][1]===q:de)return this;if(H(oe),(de||!Je)&&H(ie),de&&Ie===2)return new tt(t,this.keyHash,Te[Re^1]);var qe=t&&t===this.ownerID,vt=qe?Te:te(Te);return Je?de?Re===Ie-1?vt.pop():vt[Re]=vt.pop():vt[Re]=[Q,q]:vt.push([Q,q]),qe?(this.entries=vt,this):new Nt(t,this.keyHash,vt)};function tt(t,v,B){this.ownerID=t,this.keyHash=v,this.entry=B}tt.prototype.get=function(t,v,B,Q){return fe(B,this.entry[0])?this.entry[1]:Q},tt.prototype.update=function(t,v,B,Q,q,ie,oe){var de=q===w,Te=fe(Q,this.entry[0]);if(Te?q===this.entry[1]:de)return this;if(H(oe),de){H(ie);return}return Te?t&&t===this.ownerID?(this.entry[1]=q,this):new tt(t,this.keyHash,[Q,q]):(H(ie),kt(this,t,v,_e(Q),[Q,q]))},Ze.prototype.iterate=Nt.prototype.iterate=function(t,v){for(var B=this.entries,Q=0,q=B.length-1;Q<=q;Q++)if(t(B[v?q-Q:Q])===!1)return!1},dt.prototype.iterate=mt.prototype.iterate=function(t,v){for(var B=this.nodes,Q=0,q=B.length-1;Q<=q;Q++){var ie=B[v?q-Q:Q];if(ie&&ie.iterate(t,v)===!1)return!1}},tt.prototype.iterate=function(t,v){return t(this.entry)},e(Ct,n);function Ct(t,v,B){this._type=v,this._reverse=B,this._stack=t._root&&me(t._root)}Ct.prototype.next=function(){for(var t=this._type,v=this._stack;v;){var B=v.node,Q=v.index++,q;if(B.entry){if(Q===0)return le(t,B.entry)}else if(B.entries){if(q=B.entries.length-1,Q<=q)return le(t,B.entries[this._reverse?q-Q:Q])}else if(q=B.nodes.length-1,Q<=q){var ie=B.nodes[this._reverse?q-Q:Q];if(ie){if(ie.entry)return le(t,ie.entry);v=this._stack=me(ie,v)}continue}v=this._stack=this._stack.__prev}return d()};function le(t,v){return g(t,v[0],v[1])}function me(t,v){return{node:t,index:0,__prev:v}}function Ue(t,v,B,Q){var q=Object.create(ze);return q.size=t,q._root=v,q.__ownerID=B,q.__hash=Q,q.__altered=!1,q}var ot;function yt(){return ot||(ot=Ue(0))}function Pt(t,v,B){var Q,q;if(t._root){var ie=x(V),oe=x(j);if(Q=Gt(t._root,t.__ownerID,0,void 0,v,B,ie,oe),!oe.value)return t;q=t.size+(ie.value?B===w?-1:1:0)}else{if(B===w)return t;q=1,Q=new Ze(t.__ownerID,[[v,B]])}return t.__ownerID?(t.size=q,t._root=Q,t.__hash=void 0,t.__altered=!0,t):Q?Ue(q,Q):yt()}function Gt(t,v,B,Q,q,ie,oe,de){return t?t.update(v,B,Q,q,ie,oe,de):ie===w?t:(H(de),H(oe),new tt(v,Q,[q,ie]))}function rr(t){return t.constructor===tt||t.constructor===Nt}function kt(t,v,B,Q,q){if(t.keyHash===Q)return new Nt(v,Q,[t.entry,q]);var ie=(B===0?t.keyHash:t.keyHash>>>B)&$,oe=(B===0?Q:Q>>>B)&$,de,Te=ie===oe?[kt(t,v,B+U,Q,q)]:(de=new tt(v,Q,q),ie<oe?[t,de]:[de,t]);return new dt(v,1<<ie|1<<oe,Te)}function fr(t,v,B,Q){t||(t=new _);for(var q=new tt(t,_e(B),[B,Q]),ie=0;ie<v.length;ie++){var oe=v[ie];q=q.update(t,0,void 0,oe[0],oe[1])}return q}function Or(t,v,B,Q){for(var q=0,ie=0,oe=new Array(B),de=0,Te=1,Re=v.length;de<Re;de++,Te<<=1){var Ie=v[de];Ie!==void 0&&de!==Q&&(q|=Te,oe[ie++]=Ie)}return new dt(t,q,oe)}function Ht(t,v,B,Q,q){for(var ie=0,oe=new Array(N),de=0;B!==0;de++,B>>>=1)oe[de]=B&1?v[ie++]:void 0;return oe[Q]=q,new mt(t,ie+1,oe)}function $t(t,v,B){for(var Q=[],q=0;q<B.length;q++){var ie=B[q],oe=y(ie);C(ie)||(oe=oe.map(function(de){return Ye(de)})),Q.push(oe)}return zt(t,v,Q)}function nr(t,v,B){return t&&t.mergeDeep&&C(v)?t.mergeDeep(v):fe(t,v)?t:v}function Yt(t){return function(v,B,Q){if(v&&v.mergeDeepWith&&C(B))return v.mergeDeepWith(t,B);var q=t(v,B,Q);return fe(v,q)?v:q}}function zt(t,v,B){return B=B.filter(function(Q){return Q.size!==0}),B.length===0?t:t.size===0&&!t.__ownerID&&B.length===1?t.constructor(B[0]):t.withMutations(function(Q){for(var q=v?function(oe,de){Q.update(de,w,function(Te){return Te===w?oe:v(Te,oe,de)})}:function(oe,de){Q.set(de,oe)},ie=0;ie<B.length;ie++)B[ie].forEach(q)})}function ar(t,v,B,Q){var q=t===w,ie=v.next();if(ie.done){var oe=q?B:t,de=Q(oe);return de===oe?t:de}De(q||t&&t.set,"invalid keyPath");var Te=ie.value,Re=q?w:t.get(Te,w),Ie=ar(Re,v,B,Q);return Ie===Re?t:Ie===w?t.remove(Te):(q?yt():t).set(Te,Ie)}function Qt(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function Jt(t,v,B,Q){var q=Q?t:te(t);return q[v]=B,q}function Er(t,v,B,Q){var q=t.length+1;if(Q&&v+1===q)return t[v]=B,t;for(var ie=new Array(q),oe=0,de=0;de<q;de++)de===v?(ie[de]=B,oe=-1):ie[de]=t[de+oe];return ie}function Kt(t,v,B){var Q=t.length-1;if(B&&v===Q)return t.pop(),t;for(var q=new Array(Q),ie=0,oe=0;oe<Q;oe++)oe===v&&(ie=1),q[oe]=t[oe+ie];return q}var ur=N/4,pn=N/2,vn=N/4;e(Et,it);function Et(t){var v=Sr();if(t==null)return v;if(Mr(t))return t;var B=h(t),Q=B.size;return Q===0?v:(ut(Q),Q>0&&Q<N?or(0,Q,U,null,new Bt(B.toArray())):v.withMutations(function(q){q.setSize(Q),B.forEach(function(ie,oe){return q.set(oe,ie)})}))}Et.of=function(){return this(arguments)},Et.prototype.toString=function(){return this.__toString("List [","]")},Et.prototype.get=function(t,v){if(t=k(this,t),t>=0&&t<this.size){t+=this._origin;var B=Ur(this,t);return B&&B.array[t&$]}return v},Et.prototype.set=function(t,v){return gn(this,t,v)},Et.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Et.prototype.insert=function(t,v){return this.splice(t,0,v)},Et.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=U,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Sr()},Et.prototype.push=function(){var t=arguments,v=this.size;return this.withMutations(function(B){xt(B,0,v+t.length);for(var Q=0;Q<t.length;Q++)B.set(v+Q,t[Q])})},Et.prototype.pop=function(){return xt(this,0,-1)},Et.prototype.unshift=function(){var t=arguments;return this.withMutations(function(v){xt(v,-t.length);for(var B=0;B<t.length;B++)v.set(B,t[B])})},Et.prototype.shift=function(){return xt(this,1)},Et.prototype.merge=function(){return cr(this,void 0,arguments)},Et.prototype.mergeWith=function(t){var v=i.call(arguments,1);return cr(this,t,v)},Et.prototype.mergeDeep=function(){return cr(this,nr,arguments)},Et.prototype.mergeDeepWith=function(t){var v=i.call(arguments,1);return cr(this,Yt(t),v)},Et.prototype.setSize=function(t){return xt(this,0,t)},Et.prototype.slice=function(t,v){var B=this.size;return m(t,v,B)?this:xt(this,s(t,B),c(v,B))},Et.prototype.__iterator=function(t,v){var B=0,Q=wr(this,v);return new n(function(){var q=Q();return q===ir?d():g(t,B++,q)})},Et.prototype.__iterate=function(t,v){for(var B=0,Q=wr(this,v),q;(q=Q())!==ir&&t(q,B++,this)!==!1;);return B},Et.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?or(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function Mr(t){return!!(t&&t[Vr])}Et.isList=Mr;var Vr="@@__IMMUTABLE_LIST__@@",Ft=Et.prototype;Ft[Vr]=!0,Ft[F]=Ft.remove,Ft.setIn=ze.setIn,Ft.deleteIn=Ft.removeIn=ze.removeIn,Ft.update=ze.update,Ft.updateIn=ze.updateIn,Ft.mergeIn=ze.mergeIn,Ft.mergeDeepIn=ze.mergeDeepIn,Ft.withMutations=ze.withMutations,Ft.asMutable=ze.asMutable,Ft.asImmutable=ze.asImmutable,Ft.wasAltered=ze.wasAltered;function Bt(t,v){this.array=t,this.ownerID=v}Bt.prototype.removeBefore=function(t,v,B){if(B===v?1<<v:this.array.length===0)return this;var Q=B>>>v&$;if(Q>=this.array.length)return new Bt([],t);var q=Q===0,ie;if(v>0){var oe=this.array[Q];if(ie=oe&&oe.removeBefore(t,v-U,B),ie===oe&&q)return this}if(q&&!ie)return this;var de=Xt(this,t);if(!q)for(var Te=0;Te<Q;Te++)de.array[Te]=void 0;return ie&&(de.array[Q]=ie),de},Bt.prototype.removeAfter=function(t,v,B){if(B===(v?1<<v:0)||this.array.length===0)return this;var Q=B-1>>>v&$;if(Q>=this.array.length)return this;var q;if(v>0){var ie=this.array[Q];if(q=ie&&ie.removeAfter(t,v-U,B),q===ie&&Q===this.array.length-1)return this}var oe=Xt(this,t);return oe.array.splice(Q+1),q&&(oe.array[Q]=q),oe};var ir={};function wr(t,v){var B=t._origin,Q=t._capacity,q=lr(Q),ie=t._tail;return oe(t._root,t._level,0);function oe(Re,Ie,Je){return Ie===0?de(Re,Je):Te(Re,Ie,Je)}function de(Re,Ie){var Je=Ie===q?ie&&ie.array:Re&&Re.array,qe=Ie>B?0:B-Ie,vt=Q-Ie;return vt>N&&(vt=N),function(){if(qe===vt)return ir;var ht=v?--vt:qe++;return Je&&Je[ht]}}function Te(Re,Ie,Je){var qe,vt=Re&&Re.array,ht=Je>B?0:B-Je>>Ie,Tt=(Q-Je>>Ie)+1;return Tt>N&&(Tt=N),function(){do{if(qe){var Vt=qe();if(Vt!==ir)return Vt;qe=null}if(ht===Tt)return ir;var Wt=v?--Tt:ht++;qe=oe(vt&&vt[Wt],Ie-U,Je+(Wt<<Ie))}while(!0)}}}function or(t,v,B,Q,q,ie,oe){var de=Object.create(Ft);return de.size=v-t,de._origin=t,de._capacity=v,de._level=B,de._root=Q,de._tail=q,de.__ownerID=ie,de.__hash=oe,de.__altered=!1,de}var jr;function Sr(){return jr||(jr=or(0,0,U))}function gn(t,v,B){if(v=k(t,v),v!==v)return t;if(v>=t.size||v<0)return t.withMutations(function(oe){v<0?xt(oe,v).set(0,B):xt(oe,0,v+1).set(v,B)});v+=t._origin;var Q=t._tail,q=t._root,ie=x(j);return v>=lr(t._capacity)?Q=Tr(Q,t.__ownerID,0,v,B,ie):q=Tr(q,t.__ownerID,t._level,v,B,ie),ie.value?t.__ownerID?(t._root=q,t._tail=Q,t.__hash=void 0,t.__altered=!0,t):or(t._origin,t._capacity,t._level,q,Q):t}function Tr(t,v,B,Q,q,ie){var oe=Q>>>B&$,de=t&&oe<t.array.length;if(!de&&q===void 0)return t;var Te;if(B>0){var Re=t&&t.array[oe],Ie=Tr(Re,v,B-U,Q,q,ie);return Ie===Re?t:(Te=Xt(t,v),Te.array[oe]=Ie,Te)}return de&&t.array[oe]===q?t:(H(ie),Te=Xt(t,v),q===void 0&&oe===Te.array.length-1?Te.array.pop():Te.array[oe]=q,Te)}function Xt(t,v){return v&&t&&v===t.ownerID?t:new Bt(t?t.array.slice():[],v)}function Ur(t,v){if(v>=lr(t._capacity))return t._tail;if(v<1<<t._level+U){for(var B=t._root,Q=t._level;B&&Q>0;)B=B.array[v>>>Q&$],Q-=U;return B}}function xt(t,v,B){v!==void 0&&(v=v|0),B!==void 0&&(B=B|0);var Q=t.__ownerID||new _,q=t._origin,ie=t._capacity,oe=q+v,de=B===void 0?ie:B<0?ie+B:q+B;if(oe===q&&de===ie)return t;if(oe>=de)return t.clear();for(var Te=t._level,Re=t._root,Ie=0;oe+Ie<0;)Re=new Bt(Re&&Re.array.length?[void 0,Re]:[],Q),Te+=U,Ie+=1<<Te;Ie&&(oe+=Ie,q+=Ie,de+=Ie,ie+=Ie);for(var Je=lr(ie),qe=lr(de);qe>=1<<Te+U;)Re=new Bt(Re&&Re.array.length?[Re]:[],Q),Te+=U;var vt=t._tail,ht=qe<Je?Ur(t,de-1):qe>Je?new Bt([],Q):vt;if(vt&&qe>Je&&oe<ie&&vt.array.length){Re=Xt(Re,Q);for(var Tt=Re,Vt=Te;Vt>U;Vt-=U){var Wt=Je>>>Vt&$;Tt=Tt.array[Wt]=Xt(Tt.array[Wt],Q)}Tt.array[Je>>>U&$]=vt}if(de<ie&&(ht=ht&&ht.removeAfter(Q,0,de)),oe>=qe)oe-=qe,de-=qe,Te=U,Re=null,ht=ht&&ht.removeBefore(Q,0,oe);else if(oe>q||qe<Je){for(Ie=0;Re;){var yr=oe>>>Te&$;if(yr!==qe>>>Te&$)break;yr&&(Ie+=(1<<Te)*yr),Te-=U,Re=Re.array[yr]}Re&&oe>q&&(Re=Re.removeBefore(Q,Te,oe-Ie)),Re&&qe<Je&&(Re=Re.removeAfter(Q,Te,qe-Ie)),Ie&&(oe-=Ie,de-=Ie)}return t.__ownerID?(t.size=de-oe,t._origin=oe,t._capacity=de,t._level=Te,t._root=Re,t._tail=ht,t.__hash=void 0,t.__altered=!0,t):or(oe,de,Te,Re,ht)}function cr(t,v,B){for(var Q=[],q=0,ie=0;ie<B.length;ie++){var oe=B[ie],de=h(oe);de.size>q&&(q=de.size),C(oe)||(de=de.map(function(Te){return Ye(Te)})),Q.push(de)}return q>t.size&&(t=t.setSize(q)),zt(t,v,Q)}function lr(t){return t<N?0:t-1>>>U<<U}e(Rt,be);function Rt(t){return t==null?dr():Wr(t)?t:dr().withMutations(function(v){var B=y(t);ut(B.size),B.forEach(function(Q,q){return v.set(q,Q)})})}Rt.of=function(){return this(arguments)},Rt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Rt.prototype.get=function(t,v){var B=this._map.get(t);return B!==void 0?this._list.get(B)[1]:v},Rt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):dr()},Rt.prototype.set=function(t,v){return Br(this,t,v)},Rt.prototype.remove=function(t){return Br(this,t,w)},Rt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Rt.prototype.__iterate=function(t,v){var B=this;return this._list.__iterate(function(Q){return Q&&t(Q[1],Q[0],B)},v)},Rt.prototype.__iterator=function(t,v){return this._list.fromEntrySeq().__iterator(t,v)},Rt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var v=this._map.__ensureOwner(t),B=this._list.__ensureOwner(t);return t?Rr(v,B,t,this.__hash):(this.__ownerID=t,this._map=v,this._list=B,this)};function Wr(t){return Xe(t)&&L(t)}Rt.isOrderedMap=Wr,Rt.prototype[D]=!0,Rt.prototype[F]=Rt.prototype.remove;function Rr(t,v,B,Q){var q=Object.create(Rt.prototype);return q.size=t?t.size:0,q._map=t,q._list=v,q.__ownerID=B,q.__hash=Q,q}var Gr;function dr(){return Gr||(Gr=Rr(yt(),Sr()))}function Br(t,v,B){var Q=t._map,q=t._list,ie=Q.get(v),oe=ie!==void 0,de,Te;if(B===w){if(!oe)return t;q.size>=N&&q.size>=Q.size*2?(Te=q.filter(function(Re,Ie){return Re!==void 0&&ie!==Ie}),de=Te.toKeyedSeq().map(function(Re){return Re[0]}).flip().toMap(),t.__ownerID&&(de.__ownerID=Te.__ownerID=t.__ownerID)):(de=Q.remove(v),Te=ie===q.size-1?q.pop():q.set(ie,void 0))}else if(oe){if(B===q.get(ie)[1])return t;de=Q,Te=q.set(ie,[v,B])}else de=Q.set(v,q.size),Te=q.set(q.size,[v,B]);return t.__ownerID?(t.size=de.size,t._map=de,t._list=Te,t.__hash=void 0,t):Rr(de,Te)}e(Mt,K);function Mt(t,v){this._iter=t,this._useKeys=v,this.size=t.size}Mt.prototype.get=function(t,v){return this._iter.get(t,v)},Mt.prototype.has=function(t){return this._iter.has(t)},Mt.prototype.valueSeq=function(){return this._iter.valueSeq()},Mt.prototype.reverse=function(){var t=this,v=Cr(this,!0);return this._useKeys||(v.valueSeq=function(){return t._iter.toSeq().reverse()}),v},Mt.prototype.map=function(t,v){var B=this,Q=zr(this,t,v);return this._useKeys||(Q.valueSeq=function(){return B._iter.toSeq().map(t,v)}),Q},Mt.prototype.__iterate=function(t,v){var B=this,Q;return this._iter.__iterate(this._useKeys?function(q,ie){return t(q,ie,B)}:(Q=v?Qr(this):0,function(q){return t(q,v?--Q:Q++,B)}),v)},Mt.prototype.__iterator=function(t,v){if(this._useKeys)return this._iter.__iterator(t,v);var B=this._iter.__iterator(l,v),Q=v?Qr(this):0;return new n(function(){var q=B.next();return q.done?q:g(t,v?--Q:Q++,q.value,q)})},Mt.prototype[D]=!0,e(Zt,Y);function Zt(t){this._iter=t,this.size=t.size}Zt.prototype.includes=function(t){return this._iter.includes(t)},Zt.prototype.__iterate=function(t,v){var B=this,Q=0;return this._iter.__iterate(function(q){return t(q,Q++,B)},v)},Zt.prototype.__iterator=function(t,v){var B=this._iter.__iterator(l,v),Q=0;return new n(function(){var q=B.next();return q.done?q:g(t,Q++,q.value,q)})},e(_t,re);function _t(t){this._iter=t,this.size=t.size}_t.prototype.has=function(t){return this._iter.includes(t)},_t.prototype.__iterate=function(t,v){var B=this;return this._iter.__iterate(function(Q){return t(Q,Q,B)},v)},_t.prototype.__iterator=function(t,v){var B=this._iter.__iterator(l,v);return new n(function(){var Q=B.next();return Q.done?Q:g(t,Q.value,Q.value,Q)})},e(qt,K);function qt(t){this._iter=t,this.size=t.size}qt.prototype.entrySeq=function(){return this._iter.toSeq()},qt.prototype.__iterate=function(t,v){var B=this;return this._iter.__iterate(function(Q){if(Q){Yr(Q);var q=C(Q);return t(q?Q.get(1):Q[1],q?Q.get(0):Q[0],B)}},v)},qt.prototype.__iterator=function(t,v){var B=this._iter.__iterator(l,v);return new n(function(){for(;;){var Q=B.next();if(Q.done)return Q;var q=Q.value;if(q){Yr(q);var ie=C(q);return g(t,ie?q.get(0):q[0],ie?q.get(1):q[1],Q)}}})},Zt.prototype.cacheResult=Mt.prototype.cacheResult=_t.prototype.cacheResult=qt.prototype.cacheResult=Nr;function xr(t){var v=wt(t);return v._iter=t,v.size=t.size,v.flip=function(){return t},v.reverse=function(){var B=t.reverse.apply(this);return B.flip=function(){return t.reverse()},B},v.has=function(B){return t.includes(B)},v.includes=function(B){return t.has(B)},v.cacheResult=Nr,v.__iterateUncached=function(B,Q){var q=this;return t.__iterate(function(ie,oe){return B(oe,ie,q)!==!1},Q)},v.__iteratorUncached=function(B,Q){if(B===f){var q=t.__iterator(B,Q);return new n(function(){var ie=q.next();if(!ie.done){var oe=ie.value[0];ie.value[0]=ie.value[1],ie.value[1]=oe}return ie})}return t.__iterator(B===l?u:l,Q)},v}function zr(t,v,B){var Q=wt(t);return Q.size=t.size,Q.has=function(q){return t.has(q)},Q.get=function(q,ie){var oe=t.get(q,w);return oe===w?ie:v.call(B,oe,q,t)},Q.__iterateUncached=function(q,ie){var oe=this;return t.__iterate(function(de,Te,Re){return q(v.call(B,de,Te,Re),Te,oe)!==!1},ie)},Q.__iteratorUncached=function(q,ie){var oe=t.__iterator(f,ie);return new n(function(){var de=oe.next();if(de.done)return de;var Te=de.value,Re=Te[0];return g(q,Re,v.call(B,Te[1],Re,t),de)})},Q}function Cr(t,v){var B=wt(t);return B._iter=t,B.size=t.size,B.reverse=function(){return t},t.flip&&(B.flip=function(){var Q=xr(t);return Q.reverse=function(){return t.flip()},Q}),B.get=function(Q,q){return t.get(v?Q:-1-Q,q)},B.has=function(Q){return t.has(v?Q:-1-Q)},B.includes=function(Q){return t.includes(Q)},B.cacheResult=Nr,B.__iterate=function(Q,q){var ie=this;return t.__iterate(function(oe,de){return Q(oe,de,ie)},!q)},B.__iterator=function(Q,q){return t.__iterator(Q,!q)},B}function Kr(t,v,B,Q){var q=wt(t);return Q&&(q.has=function(ie){var oe=t.get(ie,w);return oe!==w&&!!v.call(B,oe,ie,t)},q.get=function(ie,oe){var de=t.get(ie,w);return de!==w&&v.call(B,de,ie,t)?de:oe}),q.__iterateUncached=function(ie,oe){var de=this,Te=0;return t.__iterate(function(Re,Ie,Je){if(v.call(B,Re,Ie,Je))return Te++,ie(Re,Q?Ie:Te-1,de)},oe),Te},q.__iteratorUncached=function(ie,oe){var de=t.__iterator(f,oe),Te=0;return new n(function(){for(;;){var Re=de.next();if(Re.done)return Re;var Ie=Re.value,Je=Ie[0],qe=Ie[1];if(v.call(B,qe,Je,t))return g(ie,Q?Je:Te++,qe,Re)}})},q}function hn(t,v,B){var Q=be().asMutable();return t.__iterate(function(q,ie){Q.update(v.call(B,q,ie,t),0,function(oe){return oe+1})}),Q.asImmutable()}function mn(t,v,B){var Q=O(t),q=(L(t)?Rt():be()).asMutable();t.__iterate(function(oe,de){q.update(v.call(B,oe,de,t),function(Te){return Te=Te||[],Te.push(Q?[de,oe]:oe),Te})});var ie=Jr(t);return q.map(function(oe){return Ot(t,ie(oe))})}function Pr(t,v,B,Q){var q=t.size;if(v!==void 0&&(v=v|0),B!==void 0&&(B===1/0?B=q:B=B|0),m(v,B,q))return t;var ie=s(v,q),oe=c(B,q);if(ie!==ie||oe!==oe)return Pr(t.toSeq().cacheResult(),v,B,Q);var de=oe-ie,Te;de===de&&(Te=de<0?0:de);var Re=wt(t);return Re.size=Te===0?Te:t.size&&Te||void 0,!Q&&ge(t)&&Te>=0&&(Re.get=function(Ie,Je){return Ie=k(this,Ie),Ie>=0&&Ie<Te?t.get(Ie+ie,Je):Je}),Re.__iterateUncached=function(Ie,Je){var qe=this;if(Te===0)return 0;if(Je)return this.cacheResult().__iterate(Ie,Je);var vt=0,ht=!0,Tt=0;return t.__iterate(function(Vt,Wt){if(!(ht&&(ht=vt++<ie)))return Tt++,Ie(Vt,Q?Wt:Tt-1,qe)!==!1&&Tt!==Te}),Tt},Re.__iteratorUncached=function(Ie,Je){if(Te!==0&&Je)return this.cacheResult().__iterator(Ie,Je);var qe=Te!==0&&t.__iterator(Ie,Je),vt=0,ht=0;return new n(function(){for(;vt++<ie;)qe.next();if(++ht>Te)return d();var Tt=qe.next();return Q||Ie===l?Tt:Ie===u?g(Ie,ht-1,void 0,Tt):g(Ie,ht-1,Tt.value[1],Tt)})},Re}function yn(t,v,B){var Q=wt(t);return Q.__iterateUncached=function(q,ie){var oe=this;if(ie)return this.cacheResult().__iterate(q,ie);var de=0;return t.__iterate(function(Te,Re,Ie){return v.call(B,Te,Re,Ie)&&++de&&q(Te,Re,oe)}),de},Q.__iteratorUncached=function(q,ie){var oe=this;if(ie)return this.cacheResult().__iterator(q,ie);var de=t.__iterator(f,ie),Te=!0;return new n(function(){if(!Te)return d();var Re=de.next();if(Re.done)return Re;var Ie=Re.value,Je=Ie[0],qe=Ie[1];return v.call(B,qe,Je,oe)?q===f?Re:g(q,Je,qe,Re):(Te=!1,d())})},Q}function kr(t,v,B,Q){var q=wt(t);return q.__iterateUncached=function(ie,oe){var de=this;if(oe)return this.cacheResult().__iterate(ie,oe);var Te=!0,Re=0;return t.__iterate(function(Ie,Je,qe){if(!(Te&&(Te=v.call(B,Ie,Je,qe))))return Re++,ie(Ie,Q?Je:Re-1,de)}),Re},q.__iteratorUncached=function(ie,oe){var de=this;if(oe)return this.cacheResult().__iterator(ie,oe);var Te=t.__iterator(f,oe),Re=!0,Ie=0;return new n(function(){var Je,qe,vt;do{if(Je=Te.next(),Je.done)return Q||ie===l?Je:ie===u?g(ie,Ie++,void 0,Je):g(ie,Ie++,Je.value[1],Je);var ht=Je.value;qe=ht[0],vt=ht[1],Re&&(Re=v.call(B,vt,qe,de))}while(Re);return ie===f?Je:g(ie,qe,vt,Je)})},q}function On(t,v){var B=O(t),Q=[t].concat(v).map(function(oe){return C(oe)?B&&(oe=y(oe)):oe=B?Se(oe):ce(Array.isArray(oe)?oe:[oe]),oe}).filter(function(oe){return oe.size!==0});if(Q.length===0)return t;if(Q.length===1){var q=Q[0];if(q===t||B&&O(q)||R(t)&&R(q))return q}var ie=new ue(Q);return B?ie=ie.toKeyedSeq():R(t)||(ie=ie.toSetSeq()),ie=ie.flatten(!0),ie.size=Q.reduce(function(oe,de){if(oe!==void 0){var Te=de.size;if(Te!==void 0)return oe+Te}},0),ie}function Hr(t,v,B){var Q=wt(t);return Q.__iterateUncached=function(q,ie){var oe=0,de=!1;function Te(Re,Ie){var Je=this;Re.__iterate(function(qe,vt){return(!v||Ie<v)&&C(qe)?Te(qe,Ie+1):q(qe,B?vt:oe++,Je)===!1&&(de=!0),!de},ie)}return Te(t,0),oe},Q.__iteratorUncached=function(q,ie){var oe=t.__iterator(q,ie),de=[],Te=0;return new n(function(){for(;oe;){var Re=oe.next();if(Re.done!==!1){oe=de.pop();continue}var Ie=Re.value;if(q===f&&(Ie=Ie[1]),(!v||de.length<v)&&C(Ie))de.push(oe),oe=Ie.__iterator(q,ie);else return B?Re:g(q,Te++,Ie,Re)}return d()})},Q}function En(t,v,B){var Q=Jr(t);return t.toSeq().map(function(q,ie){return Q(v.call(B,q,ie,t))}).flatten(!0)}function Sn(t,v){var B=wt(t);return B.size=t.size&&t.size*2-1,B.__iterateUncached=function(Q,q){var ie=this,oe=0;return t.__iterate(function(de,Te){return(!oe||Q(v,oe++,ie)!==!1)&&Q(de,oe++,ie)!==!1},q),oe},B.__iteratorUncached=function(Q,q){var ie=t.__iterator(l,q),oe=0,de;return new n(function(){return(!de||oe%2)&&(de=ie.next(),de.done)?de:oe%2?g(Q,oe++,v):g(Q,oe++,de.value,de)})},B}function er(t,v,B){v||(v=Xr);var Q=O(t),q=0,ie=t.toSeq().map(function(oe,de){return[de,oe,q++,B?B(oe,de,t):oe]}).toArray();return ie.sort(function(oe,de){return v(oe[3],de[3])||oe[2]-de[2]}).forEach(Q?function(oe,de){ie[de].length=2}:function(oe,de){ie[de]=oe[1]}),Q?K(ie):R(t)?Y(ie):re(ie)}function pr(t,v,B){if(v||(v=Xr),B){var Q=t.toSeq().map(function(q,ie){return[q,B(q,ie,t)]}).reduce(function(q,ie){return $r(v,q[1],ie[1])?ie:q});return Q&&Q[0]}else return t.reduce(function(q,ie){return $r(v,q,ie)?ie:q})}function $r(t,v,B){var Q=t(B,v);return Q===0&&B!==v&&(B==null||B!==B)||Q>0}function Lr(t,v,B){var Q=wt(t);return Q.size=new ue(B).map(function(q){return q.size}).min(),Q.__iterate=function(q,ie){for(var oe=this.__iterator(l,ie),de,Te=0;!(de=oe.next()).done&&q(de.value,Te++,this)!==!1;);return Te},Q.__iteratorUncached=function(q,ie){var oe=B.map(function(Re){return Re=r(Re),Z(ie?Re.reverse():Re)}),de=0,Te=!1;return new n(function(){var Re;return Te||(Re=oe.map(function(Ie){return Ie.next()}),Te=Re.some(function(Ie){return Ie.done})),Te?d():g(q,de++,v.apply(null,Re.map(function(Ie){return Ie.value})))})},Q}function Ot(t,v){return ge(t)?v:t.constructor(v)}function Yr(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qr(t){return ut(t.size),J(t)}function Jr(t){return O(t)?y:R(t)?h:b}function wt(t){return Object.create((O(t)?K:R(t)?Y:re).prototype)}function Nr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):z.prototype.cacheResult.call(this)}function Xr(t,v){return t>v?1:t<v?-1:0}function Zr(t){var v=Z(t);if(!v){if(!G(t))throw new TypeError("Expected iterable or array-like: "+t);v=Z(r(t))}return v}e(Dt,rt);function Dt(t,v){var B,Q=function(oe){if(oe instanceof Q)return oe;if(!(this instanceof Q))return new Q(oe);if(!B){B=!0;var de=Object.keys(t);Tn(q,de),q.size=de.length,q._name=v,q._keys=de,q._defaultValues=t}this._map=be(oe)},q=Q.prototype=Object.create(It);return q.constructor=Q,Q}Dt.prototype.toString=function(){return this.__toString(_r(this)+" {","}")},Dt.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Dt.prototype.get=function(t,v){if(!this.has(t))return v;var B=this._defaultValues[t];return this._map?this._map.get(t,B):B},Dt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=vr(this,yt()))},Dt.prototype.set=function(t,v){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+_r(this));if(this._map&&!this._map.has(t)){var B=this._defaultValues[t];if(v===B)return this}var Q=this._map&&this._map.set(t,v);return this.__ownerID||Q===this._map?this:vr(this,Q)},Dt.prototype.remove=function(t){if(!this.has(t))return this;var v=this._map&&this._map.remove(t);return this.__ownerID||v===this._map?this:vr(this,v)},Dt.prototype.wasAltered=function(){return this._map.wasAltered()},Dt.prototype.__iterator=function(t,v){var B=this;return y(this._defaultValues).map(function(Q,q){return B.get(q)}).__iterator(t,v)},Dt.prototype.__iterate=function(t,v){var B=this;return y(this._defaultValues).map(function(Q,q){return B.get(q)}).__iterate(t,v)},Dt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var v=this._map&&this._map.__ensureOwner(t);return t?vr(this,v,t):(this.__ownerID=t,this._map=v,this)};var It=Dt.prototype;It[F]=It.remove,It.deleteIn=It.removeIn=ze.removeIn,It.merge=ze.merge,It.mergeWith=ze.mergeWith,It.mergeIn=ze.mergeIn,It.mergeDeep=ze.mergeDeep,It.mergeDeepWith=ze.mergeDeepWith,It.mergeDeepIn=ze.mergeDeepIn,It.setIn=ze.setIn,It.update=ze.update,It.updateIn=ze.updateIn,It.withMutations=ze.withMutations,It.asMutable=ze.asMutable,It.asImmutable=ze.asImmutable;function vr(t,v,B){var Q=Object.create(Object.getPrototypeOf(t));return Q._map=v,Q.__ownerID=B,Q}function _r(t){return t._name||t.constructor.name||"Record"}function Tn(t,v){try{v.forEach(Rn.bind(void 0,t))}catch{}}function Rn(t,v){Object.defineProperty(t,v,{get:function(){return this.get(v)},set:function(B){De(this.__ownerID,"Cannot set on an immutable record."),this.set(v,B)}})}e(St,Qe);function St(t){return t==null?Ar():Ir(t)&&!L(t)?t:Ar().withMutations(function(v){var B=b(t);ut(B.size),B.forEach(function(Q){return v.add(Q)})})}St.of=function(){return this(arguments)},St.fromKeys=function(t){return this(y(t).keySeq())},St.prototype.toString=function(){return this.__toString("Set {","}")},St.prototype.has=function(t){return this._map.has(t)},St.prototype.add=function(t){return Fr(this,this._map.set(t,!0))},St.prototype.remove=function(t){return Fr(this,this._map.remove(t))},St.prototype.clear=function(){return Fr(this,this._map.clear())},St.prototype.union=function(){var t=i.call(arguments,0);return t=t.filter(function(v){return v.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(v){for(var B=0;B<t.length;B++)b(t[B]).forEach(function(Q){return v.add(Q)})})},St.prototype.intersect=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(B){return b(B)});var v=this;return this.withMutations(function(B){v.forEach(function(Q){t.every(function(q){return q.includes(Q)})||B.remove(Q)})})},St.prototype.subtract=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(B){return b(B)});var v=this;return this.withMutations(function(B){v.forEach(function(Q){t.some(function(q){return q.includes(Q)})&&B.remove(Q)})})},St.prototype.merge=function(){return this.union.apply(this,arguments)},St.prototype.mergeWith=function(t){var v=i.call(arguments,1);return this.union.apply(this,v)},St.prototype.sort=function(t){return jt(er(this,t))},St.prototype.sortBy=function(t,v){return jt(er(this,v,t))},St.prototype.wasAltered=function(){return this._map.wasAltered()},St.prototype.__iterate=function(t,v){var B=this;return this._map.__iterate(function(Q,q){return t(q,q,B)},v)},St.prototype.__iterator=function(t,v){return this._map.map(function(B,Q){return Q}).__iterator(t,v)},St.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var v=this._map.__ensureOwner(t);return t?this.__make(v,t):(this.__ownerID=t,this._map=v,this)};function Ir(t){return!!(t&&t[qr])}St.isSet=Ir;var qr="@@__IMMUTABLE_SET__@@",bt=St.prototype;bt[qr]=!0,bt[F]=bt.remove,bt.mergeDeep=bt.merge,bt.mergeDeepWith=bt.mergeWith,bt.withMutations=ze.withMutations,bt.asMutable=ze.asMutable,bt.asImmutable=ze.asImmutable,bt.__empty=Ar,bt.__make=en;function Fr(t,v){return t.__ownerID?(t.size=v.size,t._map=v,t):v===t._map?t:v.size===0?t.__empty():t.__make(v)}function en(t,v){var B=Object.create(bt);return B.size=t?t.size:0,B._map=t,B.__ownerID=v,B}var tn;function Ar(){return tn||(tn=en(yt()))}e(jt,St);function jt(t){return t==null?Dr():rn(t)?t:Dr().withMutations(function(v){var B=b(t);ut(B.size),B.forEach(function(Q){return v.add(Q)})})}jt.of=function(){return this(arguments)},jt.fromKeys=function(t){return this(y(t).keySeq())},jt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function rn(t){return Ir(t)&&L(t)}jt.isOrderedSet=rn;var gr=jt.prototype;gr[D]=!0,gr.__empty=Dr,gr.__make=nn;function nn(t,v){var B=Object.create(gr);return B.size=t?t.size:0,B._map=t,B.__ownerID=v,B}var an;function Dr(){return an||(an=nn(dr()))}e(Lt,it);function Lt(t){return t==null?br():un(t)?t:br().unshiftAll(t)}Lt.of=function(){return this(arguments)},Lt.prototype.toString=function(){return this.__toString("Stack [","]")},Lt.prototype.get=function(t,v){var B=this._head;for(t=k(this,t);B&&t--;)B=B.next;return B?B.value:v},Lt.prototype.peek=function(){return this._head&&this._head.value},Lt.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,v=this._head,B=arguments.length-1;B>=0;B--)v={value:arguments[B],next:v};return this.__ownerID?(this.size=t,this._head=v,this.__hash=void 0,this.__altered=!0,this):sr(t,v)},Lt.prototype.pushAll=function(t){if(t=h(t),t.size===0)return this;ut(t.size);var v=this.size,B=this._head;return t.reverse().forEach(function(Q){v++,B={value:Q,next:B}}),this.__ownerID?(this.size=v,this._head=B,this.__hash=void 0,this.__altered=!0,this):sr(v,B)},Lt.prototype.pop=function(){return this.slice(1)},Lt.prototype.unshift=function(){return this.push.apply(this,arguments)},Lt.prototype.unshiftAll=function(t){return this.pushAll(t)},Lt.prototype.shift=function(){return this.pop.apply(this,arguments)},Lt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):br()},Lt.prototype.slice=function(t,v){if(m(t,v,this.size))return this;var B=s(t,this.size),Q=c(v,this.size);if(Q!==this.size)return it.prototype.slice.call(this,t,v);for(var q=this.size-B,ie=this._head;B--;)ie=ie.next;return this.__ownerID?(this.size=q,this._head=ie,this.__hash=void 0,this.__altered=!0,this):sr(q,ie)},Lt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?sr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Lt.prototype.__iterate=function(t,v){if(v)return this.reverse().__iterate(t);for(var B=0,Q=this._head;Q&&t(Q.value,B++,this)!==!1;)Q=Q.next;return B},Lt.prototype.__iterator=function(t,v){if(v)return this.reverse().__iterator(t);var B=0,Q=this._head;return new n(function(){if(Q){var q=Q.value;return Q=Q.next,g(t,B++,q)}return d()})};function un(t){return!!(t&&t[on])}Lt.isStack=un;var on="@@__IMMUTABLE_STACK__@@",tr=Lt.prototype;tr[on]=!0,tr.withMutations=ze.withMutations,tr.asMutable=ze.asMutable,tr.asImmutable=ze.asImmutable,tr.wasAltered=ze.wasAltered;function sr(t,v,B,Q){var q=Object.create(tr);return q.size=t,q._head=v,q.__ownerID=B,q.__hash=Q,q.__altered=!1,q}var ln;function br(){return ln||(ln=sr(0))}function Ut(t,v){var B=function(Q){t.prototype[Q]=v[Q]};return Object.keys(v).forEach(B),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(v).forEach(B),t}r.Iterator=n,Ut(r,{toArray:function(){ut(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(v,B){t[B]=v}),t},toIndexedSeq:function(){return new Zt(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Mt(this,!0)},toMap:function(){return be(this.toKeyedSeq())},toObject:function(){ut(this.size);var t={};return this.__iterate(function(v,B){t[B]=v}),t},toOrderedMap:function(){return Rt(this.toKeyedSeq())},toOrderedSet:function(){return jt(O(this)?this.valueSeq():this)},toSet:function(){return St(O(this)?this.valueSeq():this)},toSetSeq:function(){return new _t(this)},toSeq:function(){return R(this)?this.toIndexedSeq():O(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Lt(O(this)?this.valueSeq():this)},toList:function(){return Et(O(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,v){return this.size===0?t+v:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+v},concat:function(){var t=i.call(arguments,0);return Ot(this,On(this,t))},includes:function(t){return this.some(function(v){return fe(v,t)})},entries:function(){return this.__iterator(f)},every:function(t,v){ut(this.size);var B=!0;return this.__iterate(function(Q,q,ie){if(!t.call(v,Q,q,ie))return B=!1,!1}),B},filter:function(t,v){return Ot(this,Kr(this,t,v,!0))},find:function(t,v,B){var Q=this.findEntry(t,v);return Q?Q[1]:B},forEach:function(t,v){return ut(this.size),this.__iterate(v?t.bind(v):t)},join:function(t){ut(this.size),t=t!==void 0?""+t:",";var v="",B=!0;return this.__iterate(function(Q){B?B=!1:v+=t,v+=Q!=null?Q.toString():""}),v},keys:function(){return this.__iterator(u)},map:function(t,v){return Ot(this,zr(this,t,v))},reduce:function(t,v,B){ut(this.size);var Q,q;return arguments.length<2?q=!0:Q=v,this.__iterate(function(ie,oe,de){q?(q=!1,Q=ie):Q=t.call(B,Q,ie,oe,de)}),Q},reduceRight:function(t,v,B){var Q=this.toKeyedSeq().reverse();return Q.reduce.apply(Q,arguments)},reverse:function(){return Ot(this,Cr(this,!0))},slice:function(t,v){return Ot(this,Pr(this,t,v,!0))},some:function(t,v){return!this.every(mr(t),v)},sort:function(t){return Ot(this,er(this,t))},values:function(){return this.__iterator(l)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,v){return J(t?this.toSeq().filter(t,v):this)},countBy:function(t,v){return hn(this,t,v)},equals:function(t){return Ee(this,t)},entrySeq:function(){var t=this;if(t._cache)return new ue(t._cache);var v=t.toSeq().map(Pn).toIndexedSeq();return v.fromEntrySeq=function(){return t.toSeq()},v},filterNot:function(t,v){return this.filter(mr(t),v)},findEntry:function(t,v,B){var Q=B;return this.__iterate(function(q,ie,oe){if(t.call(v,q,ie,oe))return Q=[ie,q],!1}),Q},findKey:function(t,v){var B=this.findEntry(t,v);return B&&B[0]},findLast:function(t,v,B){return this.toKeyedSeq().reverse().find(t,v,B)},findLastEntry:function(t,v,B){return this.toKeyedSeq().reverse().findEntry(t,v,B)},findLastKey:function(t,v){return this.toKeyedSeq().reverse().findKey(t,v)},first:function(){return this.find(P)},flatMap:function(t,v){return Ot(this,En(this,t,v))},flatten:function(t){return Ot(this,Hr(this,t,!0))},fromEntrySeq:function(){return new qt(this)},get:function(t,v){return this.find(function(B,Q){return fe(Q,t)},void 0,v)},getIn:function(t,v){for(var B=this,Q=Zr(t),q;!(q=Q.next()).done;){var ie=q.value;if(B=B&&B.get?B.get(ie,w):w,B===w)return v}return B},groupBy:function(t,v){return mn(this,t,v)},has:function(t){return this.get(t,w)!==w},hasIn:function(t){return this.getIn(t,w)!==w},isSubset:function(t){return t=typeof t.includes=="function"?t:r(t),this.every(function(v){return t.includes(v)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:r(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(v){return fe(v,t)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return pr(this,t)},maxBy:function(t,v){return pr(this,v,t)},min:function(t){return pr(this,t?sn(t):cn)},minBy:function(t,v){return pr(this,v?sn(v):cn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ot(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,v){return Ot(this,kr(this,t,v,!0))},skipUntil:function(t,v){return this.skipWhile(mr(t),v)},sortBy:function(t,v){return Ot(this,er(this,v,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ot(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,v){return Ot(this,yn(this,t,v))},takeUntil:function(t,v){return this.takeWhile(mr(t),v)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Nn(this))}});var At=r.prototype;At[A]=!0,At[a]=At.values,At.__toJS=At.toArray,At.__toStringMapper=fn,At.inspect=At.toSource=function(){return this.toString()},At.chain=At.flatMap,At.contains=At.includes,Ut(y,{flip:function(){return Ot(this,xr(this))},mapEntries:function(t,v){var B=this,Q=0;return Ot(this,this.toSeq().map(function(q,ie){return t.call(v,[ie,q],Q++,B)}).fromEntrySeq())},mapKeys:function(t,v){var B=this;return Ot(this,this.toSeq().flip().map(function(Q,q){return t.call(v,Q,q,B)}).flip())}});var hr=y.prototype;hr[S]=!0,hr[a]=At.entries,hr.__toJS=At.toObject,hr.__toStringMapper=function(t,v){return JSON.stringify(v)+": "+fn(t)},Ut(h,{toKeyedSeq:function(){return new Mt(this,!1)},filter:function(t,v){return Ot(this,Kr(this,t,v,!1))},findIndex:function(t,v){var B=this.findEntry(t,v);return B?B[0]:-1},indexOf:function(t){var v=this.keyOf(t);return v===void 0?-1:v},lastIndexOf:function(t){var v=this.lastKeyOf(t);return v===void 0?-1:v},reverse:function(){return Ot(this,Cr(this,!1))},slice:function(t,v){return Ot(this,Pr(this,t,v,!1))},splice:function(t,v){var B=arguments.length;if(v=Math.max(v|0,0),B===0||B===2&&!v)return this;t=s(t,t<0?this.count():this.size);var Q=this.slice(0,t);return Ot(this,B===1?Q:Q.concat(te(arguments,2),this.slice(t+v)))},findLastIndex:function(t,v){var B=this.findLastEntry(t,v);return B?B[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Ot(this,Hr(this,t,!1))},get:function(t,v){return t=k(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?v:this.find(function(B,Q){return Q===t},void 0,v)},has:function(t){return t=k(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Ot(this,Sn(this,t))},interleave:function(){var t=[this].concat(te(arguments)),v=Lr(this.toSeq(),Y.of,t),B=v.flatten(!0);return v.size&&(B.size=v.size*t.length),Ot(this,B)},keySeq:function(){return Me(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,v){return Ot(this,kr(this,t,v,!1))},zip:function(){var t=[this].concat(te(arguments));return Ot(this,Lr(this,Ln,t))},zipWith:function(t){var v=te(arguments);return v[0]=this,Ot(this,Lr(this,t,v))}}),h.prototype[M]=!0,h.prototype[D]=!0,Ut(b,{get:function(t,v){return this.has(t)?t:v},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),b.prototype.has=At.includes,b.prototype.contains=b.prototype.includes,Ut(K,y.prototype),Ut(Y,h.prototype),Ut(re,b.prototype),Ut(rt,y.prototype),Ut(it,h.prototype),Ut(Qe,b.prototype);function Cn(t,v){return v}function Pn(t,v){return[v,t]}function mr(t){return function(){return!t.apply(this,arguments)}}function sn(t){return function(){return-t.apply(this,arguments)}}function fn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Ln(){return te(arguments)}function cn(t,v){return t<v?1:t>v?-1:0}function Nn(t){if(t.size===1/0)return 0;var v=L(t),B=O(t),Q=v?1:0,q=t.__iterate(B?v?function(ie,oe){Q=31*Q+dn(_e(ie),_e(oe))|0}:function(ie,oe){Q=Q+dn(_e(ie),_e(oe))|0}:v?function(ie){Q=31*Q+_e(ie)|0}:function(ie){Q=Q+_e(ie)|0});return In(q,Q)}function In(t,v){return v=lt(v,3432918353),v=lt(v<<15|v>>>-15,461845907),v=lt(v<<13|v>>>-13,5),v=(v+3864292196|0)^t,v=lt(v^v>>>16,2246822507),v=lt(v^v>>>13,3266489909),v=ct(v^v>>>16),v}function dn(t,v){return t^v+2654435769+(t<<6)+(t>>2)|0}var Fn={Iterable:r,Seq:z,Collection:$e,Map:be,OrderedMap:Rt,List:Et,Stack:Lt,Set:St,OrderedSet:jt,Record:Dt,Range:Me,Repeat:Ce,is:fe,fromJS:Ye};return Fn})},46916:(ee,i,e)=>{var r=e(9087),y=e(2174);function h(b,C,O){(O!==void 0&&!y(b[C],O)||O===void 0&&!(C in b))&&r(b,C,O)}ee.exports=h},9906:ee=>{function i(e,r,y){return e===e&&(y!==void 0&&(e=e<=y?e:y),r!==void 0&&(e=e>=r?e:r)),e}ee.exports=i},12797:ee=>{function i(e,r,y,h){for(var b=e.length,C=y+(h?1:-1);h?C--:++C<b;)if(r(e[C],C,e))return C;return-1}ee.exports=i},86752:(ee,i,e)=>{var r=e(79557),y=r();ee.exports=y},43346:(ee,i,e)=>{var r=e(86752),y=e(65555);function h(b,C){return b&&r(b,C,y)}ee.exports=h},43436:(ee,i,e)=>{var r=e(12797),y=e(28086),h=e(63234);function b(C,O,R){return O===O?h(C,O,R):r(C,y,R)}ee.exports=b},14198:(ee,i,e)=>{var r=e(64792),y=e(31871),h=1,b=2;function C(O,R,E,L){var A=E.length,S=A,M=!L;if(O==null)return!S;for(O=Object(O);A--;){var D=E[A];if(M&&D[2]?D[1]!==O[D[0]]:!(D[0]in O))return!1}for(;++A<S;){D=E[A];var F=D[0],U=O[F],N=D[1];if(M&&D[2]){if(U===void 0&&!(F in O))return!1}else{var $=new r;if(L)var w=L(U,N,F,O,R,$);if(!(w===void 0?y(N,U,h|b,L,$):w))return!1}}return!0}ee.exports=C},28086:ee=>{function i(e){return e!==e}ee.exports=i},57279:(ee,i,e)=>{var r=e(42978),y=e(20339),h=e(88199),b=e(42298),C=e(39189);function O(R){return typeof R=="function"?R:R==null?h:typeof R=="object"?b(R)?y(R[0],R[1]):r(R):C(R)}ee.exports=O},42978:(ee,i,e)=>{var r=e(14198),y=e(25961),h=e(26091);function b(C){var O=y(C);return O.length==1&&O[0][2]?h(O[0][0],O[0][1]):function(R){return R===C||r(R,C,O)}}ee.exports=b},20339:(ee,i,e)=>{var r=e(31871),y=e(71540),h=e(7965),b=e(34060),C=e(14039),O=e(26091),R=e(6208),E=1,L=2;function A(S,M){return b(S)&&C(M)?O(R(S),M):function(D){var F=y(D,S);return F===void 0&&F===M?h(D,S):r(M,F,E|L)}}ee.exports=A},25125:(ee,i,e)=>{var r=e(64792),y=e(46916),h=e(86752),b=e(82356),C=e(44166),O=e(56941),R=e(82273);function E(L,A,S,M,D){L!==A&&h(A,function(F,U){if(D||(D=new r),C(F))b(L,A,U,S,E,M,D);else{var N=M?M(R(L,U),F,U+"",L,A,D):void 0;N===void 0&&(N=F),y(L,U,N)}},O)}ee.exports=E},82356:(ee,i,e)=>{var r=e(46916),y=e(77925),h=e(23369),b=e(41603),C=e(11416),O=e(60424),R=e(42298),E=e(49193),L=e(39275),A=e(70712),S=e(44166),M=e(48565),D=e(77711),F=e(82273),U=e(95549);function N($,w,V,j,x,H,_){var te=F($,V),J=F(w,V),k=_.get(J);if(k){r($,V,k);return}var P=H?H(te,J,V+"",$,w,_):void 0,m=P===void 0;if(m){var s=R(J),c=!s&&L(J),o=!s&&!c&&D(J);P=J,s||c||o?R(te)?P=te:E(te)?P=b(te):c?(m=!1,P=y(J,!0)):o?(m=!1,P=h(J,!0)):P=[]:M(J)||O(J)?(P=te,O(te)?P=U(te):(!S(te)||A(te))&&(P=C(J))):m=!1}m&&(_.set(J,P),x(P,J,j,H,_),_.delete(J)),r($,V,P)}ee.exports=N},28498:ee=>{function i(e){return function(r){return r?.[e]}}ee.exports=i},45840:(ee,i,e)=>{var r=e(44057);function y(h){return function(b){return r(b,h)}}ee.exports=y},77654:ee=>{var i=Math.ceil,e=Math.max;function r(y,h,b,C){for(var O=-1,R=e(i((h-y)/(b||1)),0),E=Array(R);R--;)E[C?R:++O]=y,y+=b;return E}ee.exports=r},92901:ee=>{var i=9007199254740991,e=Math.floor;function r(y,h){var b="";if(!y||h<1||h>i)return b;do h%2&&(b+=y),h=e(h/2),h&&(y+=y);while(h);return b}ee.exports=r},84915:(ee,i,e)=>{var r=e(88199),y=e(96138),h=e(6140);function b(C,O){return h(y(C,O,r),C+"")}ee.exports=b},95163:(ee,i,e)=>{var r=e(65602);function y(h,b){return r(b,function(C){return h[C]})}ee.exports=y},65962:(ee,i,e)=>{var r=e(84915),y=e(99382);function h(b){return r(function(C,O){var R=-1,E=O.length,L=E>1?O[E-1]:void 0,A=E>2?O[2]:void 0;for(L=b.length>3&&typeof L=="function"?(E--,L):void 0,A&&y(O[0],O[1],A)&&(L=E<3?void 0:L,E=1),C=Object(C);++R<E;){var S=O[R];S&&b(C,S,R,L)}return C})}ee.exports=h},79557:ee=>{function i(e){return function(r,y,h){for(var b=-1,C=Object(r),O=h(r),R=O.length;R--;){var E=O[e?R:++b];if(y(C[E],E,C)===!1)break}return r}}ee.exports=i},79524:(ee,i,e)=>{var r=e(77654),y=e(99382),h=e(3351);function b(C){return function(O,R,E){return E&&typeof E!="number"&&y(O,R,E)&&(R=E=void 0),O=h(O),R===void 0?(R=O,O=0):R=h(R),E=E===void 0?O<R?1:-1:h(E),r(O,R,E,C)}}ee.exports=b},25961:(ee,i,e)=>{var r=e(14039),y=e(65555);function h(b){for(var C=y(b),O=C.length;O--;){var R=C[O],E=b[R];C[O]=[R,E,r(E)]}return C}ee.exports=h},99382:(ee,i,e)=>{var r=e(2174),y=e(5448),h=e(8267),b=e(44166);function C(O,R,E){if(!b(E))return!1;var L=typeof R;return(L=="number"?y(E)&&h(R,E.length):L=="string"&&R in E)?r(E[R],O):!1}ee.exports=C},14039:(ee,i,e)=>{var r=e(44166);function y(h){return h===h&&!r(h)}ee.exports=y},26091:ee=>{function i(e,r){return function(y){return y==null?!1:y[e]===r&&(r!==void 0||e in Object(y))}}ee.exports=i},82273:ee=>{function i(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}ee.exports=i},63234:ee=>{function i(e,r,y){for(var h=y-1,b=e.length;++h<b;)if(e[h]===r)return h;return-1}ee.exports=i},44889:(ee,i,e)=>{var r=e(66408),y=/[\\^$.*+?()[\]{}|]/g,h=RegExp(y.source);function b(C){return C=r(C),C&&h.test(C)?C.replace(y,"\\$&"):C}ee.exports=b},71540:(ee,i,e)=>{var r=e(44057);function y(h,b,C){var O=h==null?void 0:r(h,b);return O===void 0?C:O}ee.exports=y},1660:(ee,i,e)=>{var r=e(43436),y=e(5448),h=e(93748),b=e(77118),C=e(74114),O=Math.max;function R(E,L,A,S){E=y(E)?E:C(E),A=A&&!S?b(A):0;var M=E.length;return A<0&&(A=O(M+A,0)),h(E)?A<=M&&E.indexOf(L,A)>-1:!!M&&r(E,L,A)>-1}ee.exports=R},49193:(ee,i,e)=>{var r=e(5448),y=e(81962);function h(b){return y(b)&&r(b)}ee.exports=h},8727:(ee,i,e)=>{var r=e(88003),y=e(51261),h=e(60424),b=e(42298),C=e(5448),O=e(39275),R=e(49154),E=e(77711),L="[object Map]",A="[object Set]",S=Object.prototype,M=S.hasOwnProperty;function D(F){if(F==null)return!0;if(C(F)&&(b(F)||typeof F=="string"||typeof F.splice=="function"||O(F)||E(F)||h(F)))return!F.length;var U=y(F);if(U==L||U==A)return!F.size;if(R(F))return!r(F).length;for(var N in F)if(M.call(F,N))return!1;return!0}ee.exports=D},93748:(ee,i,e)=>{var r=e(94451),y=e(42298),h=e(81962),b="[object String]";function C(O){return typeof O=="string"||!y(O)&&h(O)&&r(O)==b}ee.exports=C},74937:(ee,i,e)=>{var r=e(9087),y=e(43346),h=e(57279);function b(C,O){var R={};return O=h(O,3),y(C,function(E,L,A){r(R,L,O(E,L,A))}),R}ee.exports=b},63955:(ee,i,e)=>{var r=e(25125),y=e(65962),h=y(function(b,C,O){r(b,C,O)});ee.exports=h},9094:(ee,i,e)=>{var r=e(25125),y=e(65962),h=y(function(b,C,O,R){r(b,C,O,R)});ee.exports=h},76175:(ee,i,e)=>{var r=e(65602),y=e(57279),h=e(88582),b=e(72979);function C(O,R){if(O==null)return{};var E=r(b(O),function(L){return[L]});return R=y(R),h(O,E,function(L,A){return R(L,A[0])})}ee.exports=C},39189:(ee,i,e)=>{var r=e(28498),y=e(45840),h=e(34060),b=e(6208);function C(O){return h(O)?r(b(O)):y(O)}ee.exports=C},31536:(ee,i,e)=>{var r=e(79524),y=r();ee.exports=y},59788:(ee,i,e)=>{var r=e(92901),y=e(99382),h=e(77118),b=e(66408);function C(O,R,E){return(E?y(O,R,E):R===void 0)?R=1:R=h(R),r(b(O),R)}ee.exports=C},94738:(ee,i,e)=>{var r=e(9906),y=e(44855),h=e(77118),b=e(66408);function C(O,R,E){return O=b(O),E=E==null?0:r(h(E),0,O.length),R=y(R),O.slice(E,E+R.length)==R}ee.exports=C},3351:(ee,i,e)=>{var r=e(17806),y=1/0,h=17976931348623157e292;function b(C){if(!C)return C===0?C:0;if(C=r(C),C===y||C===-y){var O=C<0?-1:1;return O*h}return C===C?C:0}ee.exports=b},77118:(ee,i,e)=>{var r=e(3351);function y(h){var b=r(h),C=b%1;return b===b?C?b-C:b:0}ee.exports=y},95549:(ee,i,e)=>{var r=e(2701),y=e(56941);function h(b){return r(b,y(b))}ee.exports=h},74114:(ee,i,e)=>{var r=e(95163),y=e(65555);function h(b){return b==null?[]:r(b,y(b))}ee.exports=h},58750:function(ee){(function(e,r){ee.exports=r()})(this,function(){return function(i){var e={};function r(y){if(e[y])return e[y].exports;var h=e[y]={i:y,l:!1,exports:{}};return i[y].call(h.exports,h,h.exports,r),h.l=!0,h.exports}return r.m=i,r.c=e,r.d=function(y,h,b){r.o(y,h)||Object.defineProperty(y,h,{configurable:!1,enumerable:!0,get:b})},r.n=function(y){var h=y&&y.__esModule?function(){return y.default}:function(){return y};return r.d(h,"a",h),h},r.o=function(y,h){return Object.prototype.hasOwnProperty.call(y,h)},r.p="",r(r.s=3)}([function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function y(b,C){var O={},R=b||"Abstract",E=[],L=null,A;if(O._type=R,O.getType=function(){return R},O.setType=function(F){R=F},O.getChildren=function(){return E},O.addChild=function(F){if(F){if(!F.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(F)};F.setParent(O),E.push(F)}},O.getParent=function(){return L},O.setParent=function(F){L=F},O.getContext=function(F){return A||F.activeContext.peek()},O.setContext=function(F){A=F},O.getStartPosition=function(){return C>>16},O.getEndPosition=function(){return C&65535},O.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},O.toString=function(){var F="Kind: "+O.getType();F+=", Children: [";for(var U=0,N=O.getChildren().length;U<N;U+=1)F+="{"+O.getChildren()[U]+"}, ";return F+="]",F},C===0)throw{name:"Error",message:"Position cannot be 0"};for(var S=arguments.length,M=Array(S>2?S-2:0),D=2;D<S;D++)M[D-2]=arguments[D];return M&&M.forEach(function(F){O.addChild(F)}),O}var h=e.SpelNode={create:y}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=y;function y(h){this.elements=h||[]}y.prototype.push=function(h){return this.elements.push(h),h},y.prototype.pop=function(){return this.elements.pop()},y.prototype.peek=function(){return this.elements[this.elements.length-1]},y.prototype.empty=function(){return this.elements.length>0},y.prototype.search=function(h){return this.elements.length-this.elements.indexOf(h)}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function h(C){this.type=C,this.tokenChars=y[C],this._hasPayload=typeof y[C]!="string",typeof y[C]=="number"&&(this._ordinal=y[C])}for(var b in y)y.hasOwnProperty(b)&&(h[b]=new h(b));h.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},h.prototype.getLength=function(){return this.tokenChars.length},h.prototype.hasPayload=function(){return this._hasPayload},h.prototype.valueOf=function(C){for(var O in y)if(y.hasOwnProperty(O)&&y[O]===C)return h[O]},h.prototype.ordinal=function(){return this._ordinal},e.TokenKind=h},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardContext=e.SpelExpressionEvaluator=void 0;var y=r(4),h=r(50);e.SpelExpressionEvaluator=y.SpelExpressionEvaluator,e.StandardContext=h.StandardContext},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionEvaluator=void 0;var y=r(5),h=r(1),b={};function C(O,R,E){var L=new h.Stack,A;return R||(R={}),L.push(R),A={rootContext:R,activeContext:L,locals:E},O.getValue(A)}b.compile=function(O){var R=(0,y.SpelExpressionParser)().parse(O);return{eval:function(L,A){return C(R,L,A)},_compiledExpression:R}},b.eval=function(O,R,E){return b.compile(O).eval(R,E)},e.SpelExpressionEvaluator=b},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionParser=void 0;var y=r(2),h=r(6),b=r(8),C=r(9),O=r(10),R=r(11),E=r(12),L=r(13),A=r(14),S=r(15),M=r(16),D=r(17),F=r(18),U=r(19),N=r(20),$=r(21),w=r(22),V=r(23),j=r(24),x=r(25),H=r(26),_=r(27),te=r(28),J=r(29),k=r(30),P=r(31),m=r(32),s=r(33),c=r(34),o=r(35),u=r(36),l=r(37),f=r(38),T=r(39),p=r(40),a=r(41),n=r(42),g=r(43),d=r(44),I=r(45),W=r(46),Z=r(47),X=r(48),G=r(49),z=e.SpelExpressionParser=function(){var Y=new RegExp("[\\p{L}\\p{N}_$]+"),re,ne=[],ue,ae,ve,se;function ge(le){re=le}function ye(le,me){try{ue=le,ae=h.Tokenizer.tokenize(le),ve=ae.length,se=0,ne=[];var Ue=Oe();return be()&&ze(nt().startPos,"MORE_INPUT",Xe().toString()),Ue}catch(ot){throw ot.message}}function Oe(){var le=Se();if(be()){var me=nt();if(me.getKind()===y.TokenKind.ASSIGN){le===null&&(le=R.NullLiteral.create(Ct(me.startPos-1,me.endPos-1))),Xe();var Ue=Se();return F.Assign.create(tt(me),le,Ue)}if(me.getKind()===y.TokenKind.ELVIS){le===null&&(le=R.NullLiteral.create(Ct(me.startPos-1,me.endPos-2))),Xe();var ot=Oe();return ot===null&&(ot=R.NullLiteral.create(Ct(me.startPos+1,me.endPos+1))),f.Elvis.create(tt(me),le,ot)}if(me.getKind()===y.TokenKind.QMARK){le===null&&(le=R.NullLiteral.create(Ct(me.startPos-1,me.endPos-1))),Xe();var yt=Oe();We(y.TokenKind.COLON);var Pt=Oe();return l.Ternary.create(tt(me),le,yt,Pt)}}return le}function Se(){for(var le=ce();pt("or")||Be(y.TokenKind.SYMBOLIC_OR);){var me=Xe(),Ue=ce();dt(me,le,Ue),le=o.OpOr.create(tt(me),le,Ue)}return le}function ce(){for(var le=Ne();pt("and")||Be(y.TokenKind.SYMBOLIC_AND);){var me=Xe(),Ue=Ne();dt(me,le,Ue),le=c.OpAnd.create(tt(me),le,Ue)}return le}function Ne(){var le=we(),me=et();if(me!==null){var Ue=Xe(),ot=we();dt(Ue,le,ot);var yt=me.kind;if(me.isNumericRelationalOperator()){var Pt=tt(Ue);return yt===y.TokenKind.GT?w.OpGT.create(Pt,le,ot):yt===y.TokenKind.LT?j.OpLT.create(Pt,le,ot):yt===y.TokenKind.LE?V.OpLE.create(Pt,le,ot):yt===y.TokenKind.GE?$.OpGE.create(Pt,le,ot):yt===y.TokenKind.EQ?U.OpEQ.create(Pt,le,ot):N.OpNE.create(Pt,le,ot)}return yt===y.TokenKind.INSTANCEOF?g.OpInstanceof.create(tt(Ue),le,ot):yt===y.TokenKind.MATCHES?u.OpMatches.create(tt(Ue),le,ot):d.OpBetween.create(tt(Ue),le,ot)}return le}function we(){for(var le=je();st(y.TokenKind.PLUS,y.TokenKind.MINUS,y.TokenKind.INC);){var me=Xe(),Ue=je();Nt(me,Ue),me.getKind()===y.TokenKind.PLUS?le=x.OpPlus.create(tt(me),le,Ue):me.getKind()===y.TokenKind.MINUS&&(le=H.OpMinus.create(tt(me),le,Ue))}return le}function je(){for(var le=Ke();st(y.TokenKind.STAR,y.TokenKind.DIV,y.TokenKind.MOD);){var me=Xe(),Ue=Ke();dt(me,le,Ue),me.getKind()===y.TokenKind.STAR?le=_.OpMultiply.create(tt(me),le,Ue):me.getKind()===y.TokenKind.DIV?le=te.OpDivide.create(tt(me),le,Ue):le=J.OpModulus.create(tt(me),le,Ue)}return le}function Ke(){var le=Ye(),me;if(Be(y.TokenKind.POWER)){me=Xe();var Ue=Ye();return Nt(me,Ue),k.OpPower.create(tt(me),le,Ue)}return le!==null&&st(y.TokenKind.INC,y.TokenKind.DEC)?(me=Xe(),me.getKind()===y.TokenKind.INC?P.OpInc.create(tt(me),!0,le):m.OpDec.create(tt(me),!0,le)):le}function Ye(){var le,me;return st(y.TokenKind.PLUS,y.TokenKind.MINUS,y.TokenKind.NOT)?(le=Xe(),me=Ye(),le.getKind()===y.TokenKind.NOT?s.OpNot.create(tt(le),me):le.getKind()===y.TokenKind.PLUS?x.OpPlus.create(tt(le),me):H.OpMinus.create(tt(le),me)):st(y.TokenKind.INC,y.TokenKind.DEC)?(le=Xe(),me=Ye(),le.getKind()===y.TokenKind.INC?P.OpInc.create(tt(le),!1,me):m.OpDec.create(tt(le),!1,me)):ke()}function ke(){var le=[],me=Ae();for(le.push(me);at();)le.push(Ve());return le.length===1?le[0]:M.CompoundExpression.create(Ct(me.getStartPosition(),le[le.length-1].getEndPosition()),le)}function at(){var le=null;return st(y.TokenKind.DOT,y.TokenKind.SAFE_NAVI)?le=fe():le=He(),le===null?!1:(Pe(le),!0)}function He(){return Be(y.TokenKind.LSQUARE)&&ct()?Ve():null}function fe(){var le=Xe(),me=le.getKind()===y.TokenKind.SAFE_NAVI;return he(me)||Ee()||Qe(me)||_e(me)?Ve():(nt()===null?ze(le.startPos,"OOD"):ze(le.startPos,"UNEXPECTED_DATA_AFTER_DOT",Ze(nt())),null)}function Ee(){if(!Be(y.TokenKind.HASH))return!1;var le=Xe(),me=We(y.TokenKind.IDENTIFIER),Ue=Ce();return Ue===null?(Pe(S.VariableReference.create(me.data,Ct(le.startPos,me.endPos))),!0):(Pe(E.FunctionReference.create(me.data,Ct(le.startPos,me.endPos),Ue)),!0)}function Ce(){if(!Be(y.TokenKind.LPAREN))return null;var le=[];return De(le),We(y.TokenKind.RPAREN),le}function Fe(le){Be(y.TokenKind.LPAREN)||ze(tt(nt()),"MISSING_CONSTRUCTOR_ARGS"),De(le),We(y.TokenKind.RPAREN)}function De(le){var me=nt().startPos,Ue;do{Xe();var ot=nt();ot===null&&ze(me,"RUN_OUT_OF_ARGUMENTS"),ot.getKind()!==y.TokenKind.RPAREN&&le.push(Oe()),Ue=nt()}while(Ue!==null&&Ue.kind===y.TokenKind.COMMA);Ue===null&&ze(me,"RUN_OUT_OF_ARGUMENTS")}function Me(le){return le===null?ue.length:le.startPos}function Ae(){return Ge()||xe()||rt()||it()||Le()||he(!1)||Ee()||$e()||Qe(!1)||_e(!1)||ct()||lt()?Ve():null}function $e(){if(Be(y.TokenKind.BEAN_REF)){var le=Xe(),me=null,Ue=null;Be(y.TokenKind.IDENTIFIER)?(me=We(y.TokenKind.IDENTIFIER),Ue=me.data):Be(y.TokenKind.LITERAL_STRING)?(me=We(y.TokenKind.LITERAL_STRING),Ue=me.stringValue(),Ue=Ue.substring(1,Ue.length()-1)):ze(le.startPos,"INVALID_BEAN_REFERENCE");var ot=W.BeanReference.create(tt(me),Ue);return Pe(ot),!0}return!1}function rt(){if(Be(y.TokenKind.IDENTIFIER)){var le=nt();if(le.stringValue()!=="T")return!1;var me=Xe();if(Be(y.TokenKind.RSQUARE))return Pe(A.PropertyReference.create(me.stringValue(),tt(me))),!0;We(y.TokenKind.LPAREN);for(var Ue=gt(),ot=0;ft(y.TokenKind.LSQUARE,!0);)We(y.TokenKind.RSQUARE),ot++;return We(y.TokenKind.RPAREN),Pe(I.TypeReference.create(tt(le),Ue,ot)),!0}return!1}function it(){if(Be(y.TokenKind.IDENTIFIER)){var le=nt();return le.stringValue().toLowerCase()!=="null"?!1:(Xe(),Pe(R.NullLiteral.create(tt(le))),!0)}return!1}function Qe(le){var me=nt();if(!ft(y.TokenKind.PROJECT,!0))return!1;var Ue=Oe();return We(y.TokenKind.RSQUARE),Pe(n.Projection.create(le,tt(me),Ue)),!0}function lt(){var le=nt(),me=[];if(!ft(y.TokenKind.LCURLY,!0))return!1;var Ue=null,ot=nt();if(ft(y.TokenKind.RCURLY,!0))Ue=T.InlineList.create(Ct(le.startPos,ot.endPos));else if(ft(y.TokenKind.COLON,!0))ot=We(y.TokenKind.RCURLY),Ue=p.InlineMap.create(Ct(le.startPos,ot.endPos));else{var yt=Oe();if(Be(y.TokenKind.RCURLY))me.push(yt),ot=We(y.TokenKind.RCURLY),Ue=T.InlineList.create(Ct(le.startPos,ot.endPos),me);else if(ft(y.TokenKind.COMMA,!0)){me.push(yt);do me.push(Oe());while(ft(y.TokenKind.COMMA,!0));ot=We(y.TokenKind.RCURLY),Ue=T.InlineList.create(tt(le.startPos,ot.endPos),me)}else if(ft(y.TokenKind.COLON,!0)){var Pt=[];for(Pt.push(yt),Pt.push(Oe());ft(y.TokenKind.COMMA,!0);)Pt.push(Oe()),We(y.TokenKind.COLON),Pt.push(Oe());ot=We(y.TokenKind.RCURLY),Ue=p.InlineMap.create(Ct(le.startPos,ot.endPos),Pt)}else ze(le.startPos,"OOD")}return Pe(Ue),!0}function ct(){var le=nt();if(!ft(y.TokenKind.LSQUARE,!0))return!1;var me=Oe();return We(y.TokenKind.RSQUARE),Pe(D.Indexer.create(tt(le),me)),!0}function _e(le){var me=nt();if(!ut())return!1;Xe();var Ue=Oe();return Ue===null&&ze(tt(me),"MISSING_SELECTION_EXPRESSION"),We(y.TokenKind.RSQUARE),me.getKind()===y.TokenKind.SELECT_FIRST?Pe(a.Selection.create(le,a.Selection.FIRST,tt(me),Ue)):me.getKind()===y.TokenKind.SELECT_LAST?Pe(a.Selection.create(le,a.Selection.LAST,tt(me),Ue)):Pe(a.Selection.create(le,a.Selection.ALL,tt(me),Ue)),!0}function gt(){for(var le=[],me=nt();pe(me);)Xe(),me.kind!==y.TokenKind.DOT&&le.push(Z.Identifier.create(me.stringValue(),tt(me))),me=nt();le.length||(me===null&&ze(ue.length(),"OOD"),ze(me.startPos,"NOT_EXPECTED_TOKEN","qualified ID",me.getKind().toString().toLowerCase()));var Ue=Ct(le[0].getStartPosition(),le[le.length-1].getEndPosition());return X.QualifiedIdentifier.create(Ue,le)}function pe(le){if(le===null||le.kind===y.TokenKind.LITERAL_STRING)return!1;if(le.kind===y.TokenKind.DOT||le.kind===y.TokenKind.IDENTIFIER)return!0;var me=le.stringValue();return me&&me.length&&Y.test(me)}function he(le){if(Be(y.TokenKind.IDENTIFIER)){var me=Xe(),Ue=Ce();return Ue===null?(Pe(A.PropertyReference.create(le,me.stringValue(),tt(me))),!0):(Pe(L.MethodReference.create(le,me.stringValue(),tt(me),Ue)),!0)}return!1}function Le(){if(pt("new")){var le=Xe();if(Be(y.TokenKind.RSQUARE))return Pe(A.PropertyReference.create(le.stringValue(),tt(le))),!0;var me=gt(),Ue=[];if(Ue.push(me),Be(y.TokenKind.LSQUARE)){for(var ot=[];ft(y.TokenKind.LSQUARE,!0);)Be(y.TokenKind.RSQUARE)?ot.push(null):ot.push(Oe()),We(y.TokenKind.RSQUARE);lt()&&Ue.push(Ve()),Pe(G.ConstructorReference.create(tt(le),ot,Ue))}else Fe(Ue),Pe(G.ConstructorReference.create(tt(le),Ue));return!0}return!1}function Pe(le){ne.push(le)}function Ve(){return ne.pop()}function Ge(){var le=nt();if(le===null)return!1;if(le.getKind()===y.TokenKind.LITERAL_INT||le.getKind()===y.TokenKind.LITERAL_LONG)Pe(C.NumberLiteral.create(parseInt(le.stringValue(),10),tt(le)));else if(le.getKind()===y.TokenKind.LITERAL_REAL||le.getKind()===y.TokenKind.LITERAL_REAL_FLOAT)Pe(C.NumberLiteral.create(parseFloat(le.stringValue()),tt(le)));else if(le.getKind()===y.TokenKind.LITERAL_HEXINT||le.getKind()===y.TokenKind.LITERAL_HEXLONG)Pe(C.NumberLiteral.create(parseInt(le.stringValue(),16),tt(le)));else if(pt("true"))Pe(b.BooleanLiteral.create(!0,tt(le)));else if(pt("false"))Pe(b.BooleanLiteral.create(!1,tt(le)));else if(le.getKind()===y.TokenKind.LITERAL_STRING)Pe(O.StringLiteral.create(le.stringValue(),tt(le)));else return!1;return Xe(),!0}function xe(){if(Be(y.TokenKind.LPAREN)){Xe();var le=Oe();return We(y.TokenKind.RPAREN),Pe(le),!0}else return!1}function et(){var le=nt();if(le===null)return null;if(le.isNumericRelationalOperator())return le;if(le.isIdentifier()){var me=le.stringValue();if(me.toLowerCase()==="instanceof")return le.asInstanceOfToken();if(me.toLowerCase()==="matches")return le.asMatchesToken();if(me.toLowerCase()==="between")return le.asBetweenToken()}return null}function We(le){var me=Xe();return me===null&&ze(ue.length,"OOD"),me.getKind()!==le&&ze(me.startPos,"NOT_EXPECTED_TOKEN",le.toString().toLowerCase(),me.getKind().toString().toLowerCase()),me}function Be(le){return ft(le,!1)}function ft(le,me){if(!be())return!1;var Ue=nt();return Ue.getKind()===le?(me&&se++,!0):le===y.TokenKind.IDENTIFIER&&Ue.getKind().ordinal()>=y.TokenKind.DIV.ordinal()&&Ue.getKind().ordinal()<=y.TokenKind.NOT.ordinal()&&Ue.data!==null}function st(){if(!be())return!1;for(var le=nt(),me=Array.prototype.slice.call(arguments),Ue=0,ot=me.length;Ue<ot;Ue+=1)if(le.getKind()===me[Ue])return!0;return!1}function pt(le){if(!be())return!1;var me=nt();return me.getKind()===y.TokenKind.IDENTIFIER&&me.stringValue().toLowerCase()===le.toLowerCase()}function ut(){if(!be())return!1;var le=nt();return le.getKind()===y.TokenKind.SELECT||le.getKind()===y.TokenKind.SELECT_FIRST||le.getKind()===y.TokenKind.SELECT_LAST}function be(){return se<ae.length}function Xe(){return se>=ve?null:ae[se++]}function nt(){return se>=ve?null:ae[se]}function ze(le,me,Ue,ot){throw Ue&&(me+=`
Expected: `+Ue),ot&&(me+=`
Actual: `+ot),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+ue+"' at position "+le+". Message: "+me}}function Ze(le){return le.getKind().hasPayload()?le.stringValue():le.getKind().toString().toLowerCase()}function dt(le,me,Ue){mt(le,me),Nt(le,Ue)}function mt(le,me){me===null&&ze(le.startPos,"LEFT_OPERAND_PROBLEM")}function Nt(le,me){me===null&&ze(le.startPos,"RIGHT_OPERAND_PROBLEM")}function tt(le){return(le.startPos<<16)+le.endPos}function Ct(le,me){return(le<<16)+me}return{setConfiguration:ge,parse:ye}}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var y=r(7),h=r(2),b=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],C=[],O=1,R=2,E=4;function L(){var M;for(M="0".charCodeAt(0);M<="9".charCodeAt(0);M+=1)C[M]|=O|R;for(M="A".charCodeAt(0);M<="F".charCodeAt(0);M+=1)C[M]|=R;for(M="a".charCodeAt(0);M<="f".charCodeAt(0);M+=1)C[M]|=R;for(M="A".charCodeAt(0);M<="Z".charCodeAt(0);M+=1)C[M]|=E;for(M="a".charCodeAt(0);M<="z".charCodeAt(0);M+=1)C[M]|=E}L();function A(M){var D=M,F=M+"\0",U=F.length,N=0,$=[];function w(){for(var d;N<U;)if(d=F[N],n(d))H();else switch(d){case"+":P(h.TokenKind.INC)?s(h.TokenKind.INC):m(h.TokenKind.PLUS);break;case"_":H();break;case"-":P(h.TokenKind.DEC)?s(h.TokenKind.DEC):m(h.TokenKind.MINUS);break;case":":m(h.TokenKind.COLON);break;case".":m(h.TokenKind.DOT);break;case",":m(h.TokenKind.COMMA);break;case"*":m(h.TokenKind.STAR);break;case"/":m(h.TokenKind.DIV);break;case"%":m(h.TokenKind.MOD);break;case"(":m(h.TokenKind.LPAREN);break;case")":m(h.TokenKind.RPAREN);break;case"[":m(h.TokenKind.LSQUARE);break;case"#":m(h.TokenKind.HASH);break;case"]":m(h.TokenKind.RSQUARE);break;case"{":m(h.TokenKind.LCURLY);break;case"}":m(h.TokenKind.RCURLY);break;case"@":m(h.TokenKind.BEAN_REF);break;case"^":P(h.TokenKind.SELECT_FIRST)?s(h.TokenKind.SELECT_FIRST):m(h.TokenKind.POWER);break;case"!":P(h.TokenKind.NE)?s(h.TokenKind.NE):P(h.TokenKind.PROJECT)?s(h.TokenKind.PROJECT):m(h.TokenKind.NOT);break;case"=":P(h.TokenKind.EQ)?s(h.TokenKind.EQ):m(h.TokenKind.ASSIGN);break;case"&":if(!P(h.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+D+") at position "+N};s(h.TokenKind.SYMBOLIC_AND);break;case"|":if(!P(h.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+D+") at position "+N};s(h.TokenKind.SYMBOLIC_OR);break;case"?":P(h.TokenKind.SELECT)?s(h.TokenKind.SELECT):P(h.TokenKind.ELVIS)?s(h.TokenKind.ELVIS):P(h.TokenKind.SAFE_NAVI)?s(h.TokenKind.SAFE_NAVI):m(h.TokenKind.QMARK);break;case"$":P(h.TokenKind.SELECT_LAST)?s(h.TokenKind.SELECT_LAST):H();break;case">":P(h.TokenKind.GE)?s(h.TokenKind.GE):m(h.TokenKind.GT);break;case"<":P(h.TokenKind.LE)?s(h.TokenKind.LE):m(h.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":x(d==="0");break;case" ":case"	":case"\r":case`
`:N+=1;break;case"'":V();break;case'"':j();break;case"\0":N+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+D+") at position "+N};default:throw{name:"SpelParseException",message:"Cannot handle character '"+d+"' in expression ("+D+") at position "+N}}}function V(){for(var d=N,I=!1,W;!I;)if(N+=1,W=F[N],W==="'"&&(F[N+1]==="'"?N+=1:I=!0),W.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+D+") at position "+N};N+=1,$.push(new y.Token(h.TokenKind.LITERAL_STRING,k(d,N),d,N))}function j(){for(var d=N,I=!1,W;!I;)if(N+=1,W=F[N],W==='"'&&(F[N+1]==='"'?N+=1:I=!0),W.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+D+") at position "+N};N+=1,$.push(new y.Token(h.TokenKind.LITERAL_STRING,k(d,N),d,N))}function x(d){var I=!1,W=N,Z=F[N+1],X=Z==="x"||Z==="X",G,z,K,Y;if(d&&X){N=N+1;do N+=1;while(g(F[N]));u("L","l")?(te(k(W+2,N),!0,W,N),N+=1):te(k(W+2,N),!1,W,N);return}do N+=1;while(a(F[N]));if(Z=F[N],Z==="."){I=!0,G=N;do N+=1;while(a(F[N]));if(N===G+1){N=G,_(k(W,N),!1,W,N);return}}if(z=N,u("L","l")){if(I)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+D+") at position "+N};_(k(W,z),!0,W,z),N+=1}else if(l(F[N])){I=!0,N+=1,K=F[N],p(K)&&(N+=1);do N+=1;while(a(F[N]));Y=!1,f(F[N])?(Y=!0,N+=1,z=N):T(F[N])&&(N+=1,z=N),J(k(W,N),Y,W,N)}else Z=F[N],Y=!1,f(Z)?(I=!0,Y=!0,N+=1,z=N):T(Z)&&(I=!0,N+=1,z=N),I?J(k(W,z),Y,W,z):_(k(W,z),!1,W,z)}function H(){var d=N,I,W,Z;do N+=1;while(o(F[N]));if(I=k(d,N),(N-d===2||N-d===3)&&(W=I.toUpperCase(),Z=b.indexOf(W),Z>=0)){c(h.TokenKind.valueOf(W),d,I);return}$.push(new y.Token(h.TokenKind.IDENTIFIER,I.replace("\0",""),d,N))}function _(d,I,W,Z){I?$.push(new y.Token(h.TokenKind.LITERAL_LONG,d,W,Z)):$.push(new y.Token(h.TokenKind.LITERAL_INT,d,W,Z))}function te(d,I,W,Z){if(d.length===0)throw I?{name:"SpelParseException",message:"Not a long in expression ("+D+") at position "+N}:{name:"SpelParseException",message:"Not an int in expression ("+D+") at position "+N};I?$.push(new y.Token(h.TokenKind.LITERAL_HEXLONG,d,W,Z)):$.push(new y.Token(h.TokenKind.LITERAL_HEXINT,d,W,Z))}function J(d,I,W,Z){I?$.push(new y.Token(h.TokenKind.LITERAL_REAL_FLOAT,d,W,Z)):$.push(new y.Token(h.TokenKind.LITERAL_REAL,d,W,Z))}function k(d,I){return F.substring(d,I)}function P(d){return d.tokenChars.length===2&&F[N]===d.tokenChars[0]?F[N+1]===d.tokenChars[1]:!1}function m(d){$.push(new y.Token(d,null,N,N+1)),N+=1}function s(d){$.push(new y.Token(d,null,N,N+2)),N+=2}function c(d,I,W){$.push(new y.Token(d,W,I,I+d.getLength()))}function o(d){return n(d)||a(d)||d==="_"||d==="$"}function u(d,I){var W=F[N];return W===d||W===I}function l(d){return d==="e"||d==="E"}function f(d){return d==="f"||d==="F"}function T(d){return d==="d"||d==="D"}function p(d){return d==="+"||d==="-"}function a(d){return d.charCodeAt(0)>255?!1:(C[d.charCodeAt(0)]&O)!==0}function n(d){return d.charCodeAt(0)>255?!1:(C[d.charCodeAt(0)]&E)!==0}function g(d){return d.charCodeAt(0)>255?!1:(C[d.charCodeAt(0)]&R)!==0}return w(),$}var S=e.Tokenizer={tokenize:A}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0;var y=r(2);function h(b,C,O,R){this.kind=b,this.startPos=O,this.endPos=R,C&&(this.data=C)}h.prototype.getKind=function(){return this.kind},h.prototype.toString=function(){var b="[";return b+=this.kind.toString(),this.kind.hasPayload()&&(b+=":"+this.data),b+="]",b+="("+this.startPos+","+this.endPos+")",b},h.prototype.isIdentifier=function(){return this.kind===y.TokenKind.IDENTIFIER},h.prototype.isNumericRelationalOperator=function(){return this.kind===y.TokenKind.GT||this.kind===y.TokenKind.GE||this.kind===y.TokenKind.LT||this.kind===y.TokenKind.LE||this.kind===y.TokenKind.EQ||this.kind===y.TokenKind.NE},h.prototype.stringValue=function(){return this.data},h.prototype.asInstanceOfToken=function(){return new h(y.TokenKind.INSTANCEOF,this.startPos,this.endPos)},h.prototype.asMatchesToken=function(){return new h(y.TokenKind.MATCHES,this.startPos,this.endPos)},h.prototype.asBetweenToken=function(){return new h(y.TokenKind.BETWEEN,this.startPos,this.endPos)},h.prototype.getStartPosition=function(){return this.startPos},h.prototype.getEndPosition=function(){return this.endPos},e.Token=h},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteral=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("boolean",O);return R.getValue=function(){return C},R.setValue=function(E){return C=E},R}var b=e.BooleanLiteral={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteral=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("number",O);return R.getValue=function(){return C},R.setValue=function(E){return C=E},R}var b=e.NumberLiteral={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringLiteral=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("string",O);function E(L){return(L[0]==="'"&&L[L.length-1]==="'"||L[0]==='"'&&L[L.length-1]==='"')&&(L=L.substring(1,L.length-1)),L.replace(/''/g,"'").replace(/""/g,'"')}return C=E(C),R.getValue=function(){return C},R.setValue=function(L){return C=L},R}var b=e.StringLiteral={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullLiteral=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("null",O);return R.getValue=function(){return null},R}var b=e.NullLiteral={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionReference=void 0;var y=r(0),h=r(1);function b(O,R,E){var L=y.SpelNode.create("function",R);return L.getRaw=function(){return{functionName:O,args:E}},L.getValue=function(A){var S=A.locals||{},M=A.rootContext,D=[];if(E.forEach(function(F){var U=A.activeContext;A.activeContext=new h.Stack,A.activeContext.push(A.rootContext),D.push(F.getValue(A)),A.activeContext=U}),S[O])return S[O].apply(M,D);throw{name:"FunctionDoesNotExistException",message:"Function '"+O+"' does not exist."}},L}var C=e.FunctionReference={create:b}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MethodReference=void 0;var y=r(0),h=r(1);function b(O,R,E,L){var A=y.SpelNode.create("method",E);return A.getRaw=function(){return{methodName:R,args:L}},A.getValue=function(S){var M=S.activeContext.peek(),D=[],F;if(!M)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+R+"' for an undefined context."};function U(N){if(N==null){if(O)return null;throw{name:"NullPointerException",message:"Method "+R+" does not exist."}}return N}if(L.forEach(function(N){var $=S.activeContext;S.activeContext=new h.Stack,S.activeContext.push(S.rootContext),D.push(N.getValue(S)),S.activeContext=$}),R.substr(0,3)==="get"&&!M[R])return U(M[R.charAt(3).toLowerCase()+R.substring(4)]);if(R.substr(0,3)==="set"&&!M[R])return M[R.charAt(3).toLowerCase()+R.substring(4)]=D[0];if(Array.isArray(M)){if(R==="size")return M.length;if(R==="contains")return M.includes(D[0])}return F=U(M[R]),F?F.apply(M,D):null},A}var C=e.MethodReference={create:b}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyReference=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("property",R);return E.getRaw=function(){return O},E.getValue=function(L){var A=L.activeContext.peek();if(!A){if(C)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+O+"' for an undefined context."}}if(A[O]===void 0||A[O]===null){if(C)return null;if(O==="size"&&Array.isArray(A))return A.length;throw{name:"NullPointerException",message:"Property '"+O+"' does not exist."}}return A[O]},E.setValue=function(L,A){var S=A.activeContext.peek();if(!S)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+O+"' for an undefined context."};return S[O]=L},E.getName=function(){return O},E}var b=e.PropertyReference={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VariableReference=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("variable",O);return R.getRaw=function(){return C},R.getValue=function(E){var L=E.activeContext.peek(),A=E.locals;if(!L)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+C+"' for an undefined context."};return C==="this"?L:C==="root"?E.rootContext:A[C]},R.setValue=function(E,L){var A=L.locals;return A[C]=E},R}var b=e.VariableReference={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompoundExpression=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create.apply(null,["compound",C].concat(O));function E(L){var A=R.getChildren().length,S;for(S=0;S<A;S+=1)R.getChildren()[S].getType()==="indexer"?L.activeContext.push(L.activeContext.peek()[R.getChildren()[S].getValue(L)]):L.activeContext.push(R.getChildren()[S].getValue(L));return function(){for(S=0;S<A;S+=1)L.activeContext.pop()}}return R.getValue=function(L){var A=L.activeContext.peek(),S;if(!A)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var M=E(L);return S=L.activeContext.peek(),M(),S},R.setValue=function(L,A){var S=E(A),M=R.getChildren().length;return A.activeContext.pop(),L=R.getChildren()[M-1].setValue(L,A),A.activeContext.push(null),S(),L},R}var b=e.CompoundExpression={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Indexer=void 0;var y=r(0),h=r(1);function b(O,R){var E=y.SpelNode.create.apply(null,["indexer",O].concat(R));return E.getValue=function(L){var A=L.activeContext,S,M=E.getChildren().length,D,F;if(L.activeContext=new h.Stack,L.activeContext.push(L.rootContext),S=L.activeContext.peek(),!S)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(D=0;D<M;D+=1)L.activeContext.push(E.getChildren()[D].getValue(L));for(F=L.activeContext.peek(),D=0;D<M;D+=1)L.activeContext.pop();return L.activeContext=A,F},E}var C=e.Indexer={create:b}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assign=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("assign",C,O,R);return E.getValue=function(L){var A=L.activeContext.peek();if(!A)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+O.getValue(L)+"' for an undefined context."};return O.setValue(R.getValue(L),L)},E}var b=e.Assign={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpEQ=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-eq",C,O,R);return E.getValue=function(L){return O.getValue(L)===R.getValue(L)},E}var b=e.OpEQ={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNE=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-ne",C,O,R);return E.getValue=function(L){return O.getValue(L)!==R.getValue(L)},E}var b=e.OpNE={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGE=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-ge",C,O,R);return E.getValue=function(L){return O.getValue(L)>=R.getValue(L)},E}var b=e.OpGE={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGT=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-gt",C,O,R);return E.getValue=function(L){return O.getValue(L)>R.getValue(L)},E}var b=e.OpGT={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLE=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-le",C,O,R);return E.getValue=function(L){return O.getValue(L)<=R.getValue(L)},E}var b=e.OpLE={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLT=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-lt",C,O,R);return E.getValue=function(L){return O.getValue(L)<R.getValue(L)},E}var b=e.OpLT={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPlus=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-plus",C,O,R);return E.getValue=function(L){return R?O.getValue(L)+R.getValue(L):+O.getValue(L)},E}var b=e.OpPlus={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMinus=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-minus",C,O,R);return E.getValue=function(L){return R?O.getValue(L)-R.getValue(L):-O.getValue(L)},E}var b=e.OpMinus={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMultiply=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-multiply",C,O,R);return E.getValue=function(L){var A=O.getValue(L),S=R.getValue(L);if(typeof A=="number"&&typeof S=="number")return A*S;if(typeof A=="string"&&typeof S=="number"){for(var M="",D=0;D<S;D+=1)M+=A;return M}return null},E}var b=e.OpMultiply={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDivide=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-divide",C,O,R);return E.getValue=function(L){return O.getValue(L)/R.getValue(L)},E}var b=e.OpDivide={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpModulus=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-modulus",C,O,R);return E.getValue=function(L){return O.getValue(L)%R.getValue(L)},E}var b=e.OpModulus={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPower=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-power",C,O,R);return E.getValue=function(L){return Math.pow(O.getValue(L),R.getValue(L))},E}var b=e.OpPower={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInc=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-inc",C,R);return E.getValue=function(L){var A=R.getValue(L);return R.setValue(A+1,L),O?A:A+1},E}var b=e.OpInc={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDec=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-dec",C,R);return E.getValue=function(L){var A=R.getValue(L);return R.setValue(A-1,L),O?A:A-1},E}var b=e.OpDec={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNot=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("op-not",C,O);return R.getValue=function(E){return!O.getValue(E)},R}var b=e.OpNot={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpAnd=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-and",C,O,R);return E.getValue=function(L){return!!O.getValue(L)&&!!R.getValue(L)},E}var b=e.OpAnd={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpOr=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("op-or",C,O,R);return E.getValue=function(L){return!!O.getValue(L)||!!R.getValue(L)},E}var b=e.OpOr={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMatches=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("matches",C,O,R);return E.getValue=function(L){var A=O.getValue(L),S=R.getValue(L);try{var M=new RegExp(S);return!!M.exec(A)}catch(D){throw{name:"EvaluationException",message:D.toString()}}},E}var b=e.OpMatches={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ternary=void 0;var y=r(0);function h(C,O,R,E){var L=y.SpelNode.create("ternary",C,O,R,E);return L.getValue=function(A){return O.getValue(A)?R.getValue(A):E.getValue(A)},L}var b=e.Ternary={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elvis=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("elvis",C,O,R);return E.getValue=function(L){return O.getValue(L)!==null?O.getValue(L):R.getValue(L)},E}var b=e.Elvis={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineList=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("list",C),E=[].concat(O||[]);return R.getRaw=function(){return E},R.getValue=function(L){return E.map(function(A){return A.getValue(L)})},R}var b=e.InlineList={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineMap=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("map",C),E=[].concat(O||[]);return R.getValue=function(L){var A=!0,S=null,M={};return E.forEach(function(D){A?D.getType()==="property"?S=D.getName():S=D.getValue(L):M[S]=D.getValue(L),A=!A}),M},R}var b=e.InlineMap={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},h=r(0);function b(L,A,S){var M=!1;return S.activeContext.push(L),M=A.getValue(S),S.activeContext.pop(),M}function C(L,A,S,M){var D=L.filter(function(F){return b(F,S,M)});switch(A){case"ALL":return D;case"FIRST":return D[0]||null;case"LAST":return D.length?D[D.length-1]:null}}function O(L,A,S,M){var D={},F,U,N=[],$={};for(U in L)L.hasOwnProperty(U)&&(F={key:U,value:L[U]},b(F,S,M)&&N.push(F));switch(A){case"ALL":return N.forEach(function(w){D[w.key]=w.value}),D;case"FIRST":return N.length?($[N[0].key]=N[0].value,$):null;case"LAST":return N.length?($[N[N.length-1].key]=N[N.length-1].value,$):null}N.forEach(function(w){D[w.key]=w.value})}function R(L,A,S,M){var D=h.SpelNode.create("selection",S,M);return D.getValue=function(F){var U=F.activeContext.peek();if(U){if(Array.isArray(U))return C(U,A,M,F);if((typeof U>"u"?"undefined":y(U))==="object")return O(U,A,M,F)}return null},D}var E=e.Selection={create:R,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Projection=void 0;var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},h=r(0);function b(R,E,L){return R.map(function(A){var S;return L.activeContext.push(A),S=E.getValue(L),L.activeContext.pop(),S})}function C(R,E,L){var A=h.SpelNode.create("projection",E,L);return A.getValue=function(S){var M=S.activeContext.peek(),D=[],F;if(Array.isArray(M))return b(M,L,S);if((typeof M>"u"?"undefined":y(M))==="object"){for(F in M)M.hasOwnProperty(F)&&D.push(M[F]);return b(D,L,S)}return null},A}var O=e.Projection={create:C}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInstanceof=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("instanceof",C,O,R);return E.getValue=function(L){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},E}var b=e.OpInstanceof={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpBetween=void 0;var y=r(0);function h(C,O,R){var E=y.SpelNode.create("between",C,O,R);return E.getValue=function(L){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},E}var b=e.OpBetween={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeReference=void 0;var y=r(0);function h(C,E,R){var E=y.SpelNode.create("typeref",C,E);return E.getValue=function(L){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},E}var b=e.TypeReference={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeanReference=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("beanref",C);return R.getValue=function(E){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},R}var b=e.BeanReference={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Identifier=void 0;var y=r(0);function h(C,O){var R=y.SpelNode.create("identifier",O);return R.getRaw=function(){return C},R.getValue=function(E){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},R}var b=e.Identifier={create:h}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QualifiedIdentifier=void 0;var y=r(0);function h(O){if(Array.isArray(O)){for(var R=0,E=Array(O.length);R<O.length;R++)E[R]=O[R];return E}else return Array.from(O)}function b(O,R){var E=y.SpelNode.create.apply(y.SpelNode,["qualifiedidentifier",O].concat(h(R)));return E.getRaw=function(){return R.map(function(L){return L.getRaw()})},E.getValue=function(L){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},E}var C=e.QualifiedIdentifier={create:b}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorReference=void 0;var y=r(0),h=r(1);function b(E){if(Array.isArray(E)){for(var L=0,A=Array(E.length);L<E.length;L++)A[L]=E[L];return A}else return Array.from(E)}function C(E){return Array.isArray(E)?E:Array.from(E)}function O(E,L,A){var S=A!==void 0,M;S?M=L.length&&L[0]&&L[0].getType()==="number"?L[0].getValue():null:(A=L,L=void 0);var D=A,F=C(D),U=F[0],N=F.slice(1),$=y.SpelNode.create.apply(y.SpelNode,["constructorref",E].concat(b(A)));return $.getRaw=function(){return M},$.getValue=function(w){if(S&&N.length<=1){var V=[];return N.forEach(function(j){var x=w.activeContext;w.activeContext=new h.Stack,w.activeContext.push(w.rootContext),V.push(j.getValue(w)),w.activeContext=x}),N.length===1?V[0]:M?new Array(M):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},$}var R=e.ConstructorReference={create:O}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function y(b,C){var O={};return O.authentication=b||{},O.principal=C||{},O.hasRole=function(R){var E=!1;return!R||!O.authentication&&!Array.isArray(O.authentication.authorities)?!1:(O.authentication.authorities.forEach(function(L){L.authority.toLowerCase()===R.toLowerCase()&&(E=!0)}),E)},O.hasPermission=function(){var R=Array.prototype.slice.call(arguments);if(R.length===1)return O.hasRole(R[0])},O}var h=e.StandardContext={create:y}}])})},61581:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=O(e(1660)),y=O(e(87957)),h=O(e(2018)),b=O(e(26025)),C=O(e(7334));function O(M){return M&&M.__esModule?M:{default:M}}function R(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function E(M,D){for(var F=0;F<D.length;F++){var U=D[F];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(M,U.key,U)}}function L(M,D,F){return D&&E(M.prototype,D),F&&E(M,F),M}var A=function(D){return D.replace(/[\t ]+$/,"")},S=function(){function M(D,F,U){R(this,M),this.cfg=D||{},this.indentation=new h.default(this.cfg.indent),this.inlineBlock=new b.default,this.params=new C.default(this.cfg.params),this.tokenizer=F,this.tokenOverride=U,this.previousReservedWord={},this.tokens=[],this.index=0}return L(M,[{key:"format",value:function(F){this.tokens=this.tokenizer.tokenize(F);var U=this.getFormattedQueryFromTokens();return U.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var F=this,U="";return this.tokens.forEach(function(N,$){F.index=$,F.tokenOverride&&(N=F.tokenOverride(N,F.previousReservedWord)||N),N.type===y.default.WHITESPACE||(N.type===y.default.LINE_COMMENT?U=F.formatLineComment(N,U):N.type===y.default.BLOCK_COMMENT?U=F.formatBlockComment(N,U):N.type===y.default.RESERVED_TOP_LEVEL?(U=F.formatTopLevelReservedWord(N,U),F.previousReservedWord=N):N.type===y.default.RESERVED_TOP_LEVEL_NO_INDENT?(U=F.formatTopLevelReservedWordNoIndent(N,U),F.previousReservedWord=N):N.type===y.default.RESERVED_NEWLINE?(U=F.formatNewlineReservedWord(N,U),F.previousReservedWord=N):N.type===y.default.RESERVED?(U=F.formatWithSpaces(N,U),F.previousReservedWord=N):N.type===y.default.OPEN_PAREN?U=F.formatOpeningParentheses(N,U):N.type===y.default.CLOSE_PAREN?U=F.formatClosingParentheses(N,U):N.type===y.default.PLACEHOLDER?U=F.formatPlaceholder(N,U):N.value===","?U=F.formatComma(N,U):N.value===":"?U=F.formatWithSpaceAfter(N,U):N.value==="."?U=F.formatWithoutSpaces(N,U):N.value===";"?U=F.formatQuerySeparator(N,U):U=F.formatWithSpaces(N,U))}),U}},{key:"formatLineComment",value:function(F,U){return this.addNewline(U+F.value)}},{key:"formatBlockComment",value:function(F,U){return this.addNewline(this.addNewline(U)+this.indentComment(F.value))}},{key:"indentComment",value:function(F){return F.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(F,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(F.value)),this.addNewline(U)}},{key:"formatTopLevelReservedWord",value:function(F,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U),this.indentation.increaseTopLevel(),U+=this.equalizeWhitespace(this.formatReservedWord(F.value)),this.addNewline(U)}},{key:"formatNewlineReservedWord",value:function(F,U){return this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(F.value))+" "}},{key:"equalizeWhitespace",value:function(F){return F.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(F,U){var N=[y.default.WHITESPACE,y.default.OPEN_PAREN,y.default.LINE_COMMENT];return(0,r.default)(N,this.previousToken().type)||(U=A(U)),U+=this.cfg.uppercase?F.value.toUpperCase():F.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),U=this.addNewline(U)),U}},{key:"formatClosingParentheses",value:function(F,U){return F.value=this.cfg.uppercase?F.value.toUpperCase():F.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(F,U)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(F,this.addNewline(U)))}},{key:"formatPlaceholder",value:function(F,U){return U+this.params.get(F)+" "}},{key:"formatComma",value:function(F,U){return U=A(U)+F.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?U:this.addNewline(U)}},{key:"formatWithSpaceAfter",value:function(F,U){return A(U)+F.value+" "}},{key:"formatWithoutSpaces",value:function(F,U){return A(U)+F.value}},{key:"formatWithSpaces",value:function(F,U){var N=F.type==="reserved"?this.formatReservedWord(F.value):F.value;return U+N+" "}},{key:"formatReservedWord",value:function(F){return this.cfg.uppercase?F.toUpperCase():F}},{key:"formatQuerySeparator",value:function(F,U){return this.indentation.resetIndentation(),A(U)+F.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(F){return F=A(F),F.endsWith(`
`)||(F+=`
`),F+this.indentation.getIndent()}},{key:"previousToken",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-F]||{}}}]),M}();i.default=S,ee.exports=i.default},2018:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=h(e(59788)),y=h(e(4161));function h(A){return A&&A.__esModule?A:{default:A}}function b(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function C(A,S){for(var M=0;M<S.length;M++){var D=S[M];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}function O(A,S,M){return S&&C(A.prototype,S),M&&C(A,M),A}var R="top-level",E="block-level",L=function(){function A(S){b(this,A),this.indent=S||"  ",this.indentTypes=[]}return O(A,[{key:"getIndent",value:function(){return(0,r.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(R)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(E)}},{key:"decreaseTopLevel",value:function(){(0,y.default)(this.indentTypes)===R&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var M=this.indentTypes.pop();if(M!==R)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),A}();i.default=L,ee.exports=i.default},26025:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=y(e(87957));function y(E){return E&&E.__esModule?E:{default:E}}function h(E,L){if(!(E instanceof L))throw new TypeError("Cannot call a class as a function")}function b(E,L){for(var A=0;A<L.length;A++){var S=L[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}function C(E,L,A){return L&&b(E.prototype,L),A&&b(E,A),E}var O=50,R=function(){function E(){h(this,E),this.level=0}return C(E,[{key:"beginIfPossible",value:function(A,S){this.level===0&&this.isInlineBlock(A,S)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(A,S){for(var M=0,D=0,F=S;F<A.length;F++){var U=A[F];if(M+=U.value.length,M>O)return!1;if(U.type===r.default.OPEN_PAREN)D++;else if(U.type===r.default.CLOSE_PAREN&&(D--,D===0))return!0;if(this.isForbiddenToken(U))return!1}return!1}},{key:"isForbiddenToken",value:function(A){var S=A.type,M=A.value;return S===r.default.RESERVED_TOP_LEVEL||S===r.default.RESERVED_NEWLINE||S===r.default.COMMENT||S===r.default.BLOCK_COMMENT||M===";"}}]),E}();i.default=R,ee.exports=i.default},7334:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;function e(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function r(b,C){for(var O=0;O<C.length;O++){var R=C[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}function y(b,C,O){return C&&r(b.prototype,C),O&&r(b,O),b}var h=function(){function b(C){e(this,b),this.params=C,this.index=0}return y(b,[{key:"get",value:function(O){var R=O.key,E=O.value;return this.params?R?this.params[R]:this.params[this.index++]:E}}]),b}();i.default=h,ee.exports=i.default},87345:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=b(e(8727)),y=b(e(44889)),h=b(e(87957));function b(L){return L&&L.__esModule?L:{default:L}}function C(L,A){if(!(L instanceof A))throw new TypeError("Cannot call a class as a function")}function O(L,A){for(var S=0;S<A.length;S++){var M=A[S];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(L,M.key,M)}}function R(L,A,S){return A&&O(L.prototype,A),S&&O(L,S),L}var E=function(){function L(A){C(this,L),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(A.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(A.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(A.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(A.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(A.reservedWords),this.WORD_REGEX=this.createWordRegex(A.specialWordChars),this.STRING_REGEX=this.createStringRegex(A.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(A.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(A.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(A.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(A.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(A.namedPlaceholderTypes,this.createStringPattern(A.stringTypes))}return R(L,[{key:"createLineCommentRegex",value:function(S){return new RegExp("^((?:".concat(S.map(function(M){return(0,y.default)(M)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(S){var M=S.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(M,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(S.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(S){return new RegExp("^("+this.createStringPattern(S)+")","u")}},{key:"createStringPattern",value:function(S){var M={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return S.map(function(D){return M[D]}).join("|")}},{key:"createParenRegex",value:function(S){var M=this;return new RegExp("^("+S.map(function(D){return M.escapeParen(D)}).join("|")+")","iu")}},{key:"escapeParen",value:function(S){return S.length===1?(0,y.default)(S):"\\b"+S+"\\b"}},{key:"createPlaceholderRegex",value:function(S,M){if((0,r.default)(S))return!1;var D=S.map(y.default).join("|");return new RegExp("^((?:".concat(D,")(?:").concat(M,"))"),"u")}},{key:"tokenize",value:function(S){if(!S)return[];for(var M=[],D;S.length;)D=this.getNextToken(S,D),S=S.substring(D.value.length),M.push(D);return M}},{key:"getNextToken",value:function(S,M){return this.getWhitespaceToken(S)||this.getCommentToken(S)||this.getStringToken(S)||this.getOpenParenToken(S)||this.getCloseParenToken(S)||this.getPlaceholderToken(S)||this.getNumberToken(S)||this.getReservedWordToken(S,M)||this.getWordToken(S)||this.getOperatorToken(S)}},{key:"getWhitespaceToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(S){return this.getLineCommentToken(S)||this.getBlockCommentToken(S)}},{key:"getLineCommentToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(S){return this.getIdentNamedPlaceholderToken(S)||this.getStringNamedPlaceholderToken(S)||this.getIndexedPlaceholderToken(S)}},{key:"getIdentNamedPlaceholderToken",value:function(S){return this.getPlaceholderTokenWithKey({input:S,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(D){return D.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(S){var M=this;return this.getPlaceholderTokenWithKey({input:S,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(F){return M.getEscapedPlaceholderKey({key:F.slice(2,-1),quoteChar:F.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(S){return this.getPlaceholderTokenWithKey({input:S,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(D){return D.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(S){var M=S.input,D=S.regex,F=S.parseKey,U=this.getTokenOnFirstMatch({input:M,regex:D,type:h.default.PLACEHOLDER});return U&&(U.key=F(U.value)),U}},{key:"getEscapedPlaceholderKey",value:function(S){var M=S.key,D=S.quoteChar;return M.replace(new RegExp((0,y.default)("\\"+D),"gu"),D)}},{key:"getNumberToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(S,M){if(!(M&&M.value&&M.value==="."))return this.getTopLevelReservedToken(S)||this.getNewlineReservedToken(S)||this.getTopLevelReservedTokenNoIndent(S)||this.getPlainReservedToken(S)}},{key:"getTopLevelReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:h.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(S){var M=S.input,D=S.type,F=S.regex,U=M.match(F);if(U)return{type:D,value:U[1]}}}]),L}();i.default=E,ee.exports=i.default},87957:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};i.default=e,ee.exports=i.default},66168:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=h(e(61581)),y=h(e(87345));function h(D){return D&&D.__esModule?D:{default:D}}function b(D,F){if(!(D instanceof F))throw new TypeError("Cannot call a class as a function")}function C(D,F){for(var U=0;U<F.length;U++){var N=F[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}function O(D,F,U){return F&&C(D.prototype,F),U&&C(D,U),D}var R=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],E=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],L=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],A=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],S,M=function(){function D(F){b(this,D),this.cfg=F}return O(D,[{key:"format",value:function(U){return S||(S=new y.default({reservedWords:R,reservedTopLevelWords:E,reservedNewlineWords:A,reservedTopLevelWordsNoIndent:L,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new r.default(this.cfg,S).format(U)}}]),D}();i.default=M,ee.exports=i.default},23582:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=h(e(61581)),y=h(e(87345));function h(D){return D&&D.__esModule?D:{default:D}}function b(D,F){if(!(D instanceof F))throw new TypeError("Cannot call a class as a function")}function C(D,F){for(var U=0;U<F.length;U++){var N=F[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}function O(D,F,U){return F&&C(D.prototype,F),U&&C(D,U),D}var R=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],E=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],L=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],A=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],S,M=function(){function D(F){b(this,D),this.cfg=F}return O(D,[{key:"format",value:function(U){return S||(S=new y.default({reservedWords:R,reservedTopLevelWords:E,reservedNewlineWords:A,reservedTopLevelWordsNoIndent:L,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,S).format(U)}}]),D}();i.default=M,ee.exports=i.default},9924:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=b(e(61581)),y=b(e(87345)),h=b(e(87957));function b(U){return U&&U.__esModule?U:{default:U}}function C(U,N){if(!(U instanceof N))throw new TypeError("Cannot call a class as a function")}function O(U,N){for(var $=0;$<N.length;$++){var w=N[$];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(U,w.key,w)}}function R(U,N,$){return N&&O(U.prototype,N),$&&O(U,$),U}var E=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],L=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],A=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],S=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],M=function(N,$){if(N.type===h.default.RESERVED_TOP_LEVEL&&N.value==="SET"&&$.value==="BY")return N.type=h.default.RESERVED,N},D,F=function(){function U(N){C(this,U),this.cfg=N}return R(U,[{key:"format",value:function($){return D||(D=new y.default({reservedWords:E,reservedTopLevelWords:L,reservedNewlineWords:S,reservedTopLevelWordsNoIndent:A,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new r.default(this.cfg,D,M).format($)}}]),U}();i.default=F,ee.exports=i.default},68034:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=h(e(61581)),y=h(e(87345));function h(D){return D&&D.__esModule?D:{default:D}}function b(D,F){if(!(D instanceof F))throw new TypeError("Cannot call a class as a function")}function C(D,F){for(var U=0;U<F.length;U++){var N=F[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(D,N.key,N)}}function O(D,F,U){return F&&C(D.prototype,F),U&&C(D,U),D}var R=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],E=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],L=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],A=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],S,M=function(){function D(F){b(this,D),this.cfg=F}return O(D,[{key:"format",value:function(U){return S||(S=new y.default({reservedWords:R,reservedTopLevelWords:E,reservedNewlineWords:A,reservedTopLevelWordsNoIndent:L,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,S).format(U)}}]),D}();i.default=M,ee.exports=i.default},17249:(ee,i,e)=>{"use strict";var r;r={value:!0},i.ZP=r=void 0;var y=O(e(66168)),h=O(e(23582)),b=O(e(9924)),C=O(e(68034));function O(L){return L&&L.__esModule?L:{default:L}}var R=function(A){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(S.language){case"db2":return new y.default(S).format(A);case"n1ql":return new h.default(S).format(A);case"pl/sql":return new b.default(S).format(A);case"sql":case void 0:return new C.default(S).format(A);default:throw Error("Unsupported SQL dialect: ".concat(S.language))}};r=R;var E={format:R};i.ZP=E},62211:(ee,i,e)=>{ee.exports=e(23509)},23509:(ee,i,e)=>{var r=e(56834).Buffer,y=i,h=/`/g,b=/\./g,C=/[\0\b\t\n\r\x1a\"\'\\]/g,O={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};y.escapeId=function(S,M){if(Array.isArray(S)){for(var D="",F=0;F<S.length;F++)D+=(F===0?"":", ")+y.escapeId(S[F],M);return D}else return M?"`"+String(S).replace(h,"``")+"`":"`"+String(S).replace(h,"``").replace(b,"`.`")+"`"},y.escape=function(S,M,D){if(S==null)return"NULL";switch(typeof S){case"boolean":return S?"true":"false";case"number":return S+"";case"object":return Object.prototype.toString.call(S)==="[object Date]"?y.dateToString(S,D||"local"):Array.isArray(S)?y.arrayToList(S,D):r.isBuffer(S)?y.bufferToString(S):typeof S.toSqlString=="function"?String(S.toSqlString()):M?R(S.toString()):y.objectToValues(S,D);default:return R(S)}},y.arrayToList=function(S,M){for(var D="",F=0;F<S.length;F++){var U=S[F];Array.isArray(U)?D+=(F===0?"":", ")+"("+y.arrayToList(U,M)+")":D+=(F===0?"":", ")+y.escape(U,!0,M)}return D},y.format=function(S,M,D,F){if(M==null)return S;Array.isArray(M)||(M=[M]);for(var U=0,N=/\?+/g,$="",w=0,V;w<M.length&&(V=N.exec(S));){var j=V[0].length;if(!(j>2)){var x=j===2?y.escapeId(M[w]):y.escape(M[w],D,F);$+=S.slice(U,V.index)+x,U=N.lastIndex,w++}}return U===0?S:U<S.length?$+S.slice(U):$},y.dateToString=function(S,M){var D=new Date(S);if(isNaN(D.getTime()))return"NULL";var F,U,N,$,w,V,j;if(M==="local")F=D.getFullYear(),U=D.getMonth()+1,N=D.getDate(),$=D.getHours(),w=D.getMinutes(),V=D.getSeconds(),j=D.getMilliseconds();else{var x=L(M);x!==!1&&x!==0&&D.setTime(D.getTime()+x*6e4),F=D.getUTCFullYear(),U=D.getUTCMonth()+1,N=D.getUTCDate(),$=D.getUTCHours(),w=D.getUTCMinutes(),V=D.getUTCSeconds(),j=D.getUTCMilliseconds()}var H=E(F,4)+"-"+E(U,2)+"-"+E(N,2)+" "+E($,2)+":"+E(w,2)+":"+E(V,2)+"."+E(j,3);return R(H)},y.bufferToString=function(S){return"X"+R(S.toString("hex"))},y.objectToValues=function(S,M){var D="";for(var F in S){var U=S[F];typeof U!="function"&&(D+=(D.length===0?"":", ")+y.escapeId(F)+" = "+y.escape(U,!0,M))}return D},y.raw=function(S){if(typeof S!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return S}}};function R(A){for(var S=C.lastIndex=0,M="",D;D=C.exec(A);)M+=A.slice(S,D.index)+O[D[0]],S=C.lastIndex;return S===0?"'"+A+"'":S<A.length?"'"+M+A.slice(S)+"'":"'"+M+"'"}function E(A,S){for(A=A.toString();A.length<S;)A="0"+A;return A}function L(A){if(A==="Z")return 0;var S=A.match(/([\+\-\s])(\d\d):?(\d\d)?/);return S?(S[1]==="-"?-1:1)*(parseInt(S[2],10)+(S[3]?parseInt(S[3],10):0)/60)*60:!1}},66259:ee=>{ee.exports=function(){var i=document.getSelection();if(!i.rangeCount)return function(){};for(var e=document.activeElement,r=[],y=0;y<i.rangeCount;y++)r.push(i.getRangeAt(y));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return i.removeAllRanges(),function(){i.type==="Caret"&&i.removeAllRanges(),i.rangeCount||r.forEach(function(h){i.addRange(h)}),e&&e.focus()}}},68793:ee=>{function i(e,r){(r==null||r>e.length)&&(r=e.length);for(var y=0,h=new Array(r);y<r;y++)h[y]=e[y];return h}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},42134:ee=>{function i(e){if(Array.isArray(e))return e}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},33299:(ee,i,e)=>{var r=e(68793);function y(h){if(Array.isArray(h))return r(h)}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},80467:ee=>{function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},62052:ee=>{function i(r,y,h,b,C,O,R){try{var E=r[O](R),L=E.value}catch(A){h(A);return}E.done?y(L):Promise.resolve(L).then(b,C)}function e(r){return function(){var y=this,h=arguments;return new Promise(function(b,C){var O=r.apply(y,h);function R(L){i(O,b,C,R,E,"next",L)}function E(L){i(O,b,C,R,E,"throw",L)}R(void 0)})}}ee.exports=e,ee.exports.__esModule=!0,ee.exports.default=ee.exports},86067:ee=>{function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},85091:ee=>{function i(r,y){for(var h=0;h<y.length;h++){var b=y[h];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(r,b.key,b)}}function e(r,y,h){return y&&i(r.prototype,y),h&&i(r,h),Object.defineProperty(r,"prototype",{writable:!1}),r}ee.exports=e,ee.exports.__esModule=!0,ee.exports.default=ee.exports},92476:ee=>{function i(e,r,y){return r in e?Object.defineProperty(e,r,{value:y,enumerable:!0,configurable:!0,writable:!0}):e[r]=y,e}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},68307:ee=>{function i(){return ee.exports=i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var y=arguments[r];for(var h in y)Object.prototype.hasOwnProperty.call(y,h)&&(e[h]=y[h])}return e},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i.apply(this,arguments)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},36610:(ee,i,e)=>{var r=e(38197);function y(){return typeof Reflect<"u"&&Reflect.get?(ee.exports=y=Reflect.get.bind(),ee.exports.__esModule=!0,ee.exports.default=ee.exports):(ee.exports=y=function(b,C,O){var R=r(b,C);if(R){var E=Object.getOwnPropertyDescriptor(R,C);return E.get?E.get.call(arguments.length<3?b:O):E.value}},ee.exports.__esModule=!0,ee.exports.default=ee.exports),y.apply(this,arguments)}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},39005:ee=>{function i(e){return ee.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i(e)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},72366:(ee,i,e)=>{var r=e(89822);function y(h,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(b&&b.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),b&&r(h,b)}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},59018:ee=>{function i(e){return e&&e.__esModule?e:{default:e}}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},75963:ee=>{function i(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},25400:ee=>{function i(e,r){var y=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(y!=null){var h=[],b=!0,C=!1,O,R;try{for(y=y.call(e);!(b=(O=y.next()).done)&&(h.push(O.value),!(r&&h.length===r));b=!0);}catch(E){C=!0,R=E}finally{try{!b&&y.return!=null&&y.return()}finally{if(C)throw R}}return h}}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},8343:ee=>{function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},16306:ee=>{function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},19934:(ee,i,e)=>{var r=e(96498);function y(h,b){if(h==null)return{};var C=r(h,b),O,R;if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(h);for(R=0;R<E.length;R++)O=E[R],!(b.indexOf(O)>=0)&&Object.prototype.propertyIsEnumerable.call(h,O)&&(C[O]=h[O])}return C}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},96498:ee=>{function i(e,r){if(e==null)return{};var y={},h=Object.keys(e),b,C;for(C=0;C<h.length;C++)b=h[C],!(r.indexOf(b)>=0)&&(y[b]=e[b]);return y}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},64920:(ee,i,e)=>{var r=e(91148).default,y=e(80467);function h(b,C){if(C&&(r(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(b)}ee.exports=h,ee.exports.__esModule=!0,ee.exports.default=ee.exports},277:(ee,i,e)=>{var r=e(91148).default;function y(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ee.exports=y=function(){return h},ee.exports.__esModule=!0,ee.exports.default=ee.exports;var h={},b=Object.prototype,C=b.hasOwnProperty,O=Object.defineProperty||function(o,u,l){o[u]=l.value},R=typeof Symbol=="function"?Symbol:{},E=R.iterator||"@@iterator",L=R.asyncIterator||"@@asyncIterator",A=R.toStringTag||"@@toStringTag";function S(o,u,l){return Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}),o[u]}try{S({},"")}catch{S=function(l,f,T){return l[f]=T}}function M(o,u,l,f){var T=u&&u.prototype instanceof U?u:U,p=Object.create(T.prototype),a=new m(f||[]);return O(p,"_invoke",{value:te(o,l,a)}),p}function D(o,u,l){try{return{type:"normal",arg:o.call(u,l)}}catch(f){return{type:"throw",arg:f}}}h.wrap=M;var F={};function U(){}function N(){}function $(){}var w={};S(w,E,function(){return this});var V=Object.getPrototypeOf,j=V&&V(V(s([])));j&&j!==b&&C.call(j,E)&&(w=j);var x=$.prototype=U.prototype=Object.create(w);function H(o){["next","throw","return"].forEach(function(u){S(o,u,function(l){return this._invoke(u,l)})})}function _(o,u){function l(T,p,a,n){var g=D(o[T],o,p);if(g.type!=="throw"){var d=g.arg,I=d.value;return I&&r(I)=="object"&&C.call(I,"__await")?u.resolve(I.__await).then(function(W){l("next",W,a,n)},function(W){l("throw",W,a,n)}):u.resolve(I).then(function(W){d.value=W,a(d)},function(W){return l("throw",W,a,n)})}n(g.arg)}var f;O(this,"_invoke",{value:function(p,a){function n(){return new u(function(g,d){l(p,a,g,d)})}return f=f?f.then(n,n):n()}})}function te(o,u,l){var f="suspendedStart";return function(T,p){if(f==="executing")throw new Error("Generator is already running");if(f==="completed"){if(T==="throw")throw p;return c()}for(l.method=T,l.arg=p;;){var a=l.delegate;if(a){var n=J(a,l);if(n){if(n===F)continue;return n}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(f==="suspendedStart")throw f="completed",l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);f="executing";var g=D(o,u,l);if(g.type==="normal"){if(f=l.done?"completed":"suspendedYield",g.arg===F)continue;return{value:g.arg,done:l.done}}g.type==="throw"&&(f="completed",l.method="throw",l.arg=g.arg)}}}function J(o,u){var l=o.iterator[u.method];if(l===void 0){if(u.delegate=null,u.method==="throw"){if(o.iterator.return&&(u.method="return",u.arg=void 0,J(o,u),u.method==="throw"))return F;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var f=D(l,o.iterator,u.arg);if(f.type==="throw")return u.method="throw",u.arg=f.arg,u.delegate=null,F;var T=f.arg;return T?T.done?(u[o.resultName]=T.value,u.next=o.nextLoc,u.method!=="return"&&(u.method="next",u.arg=void 0),u.delegate=null,F):T:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,F)}function k(o){var u={tryLoc:o[0]};1 in o&&(u.catchLoc=o[1]),2 in o&&(u.finallyLoc=o[2],u.afterLoc=o[3]),this.tryEntries.push(u)}function P(o){var u=o.completion||{};u.type="normal",delete u.arg,o.completion=u}function m(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(k,this),this.reset(!0)}function s(o){if(o){var u=o[E];if(u)return u.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var l=-1,f=function T(){for(;++l<o.length;)if(C.call(o,l))return T.value=o[l],T.done=!1,T;return T.value=void 0,T.done=!0,T};return f.next=f}}return{next:c}}function c(){return{value:void 0,done:!0}}return N.prototype=$,O(x,"constructor",{value:$,configurable:!0}),O($,"constructor",{value:N,configurable:!0}),N.displayName=S($,A,"GeneratorFunction"),h.isGeneratorFunction=function(o){var u=typeof o=="function"&&o.constructor;return!!u&&(u===N||(u.displayName||u.name)==="GeneratorFunction")},h.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,$):(o.__proto__=$,S(o,A,"GeneratorFunction")),o.prototype=Object.create(x),o},h.awrap=function(o){return{__await:o}},H(_.prototype),S(_.prototype,L,function(){return this}),h.AsyncIterator=_,h.async=function(o,u,l,f,T){T===void 0&&(T=Promise);var p=new _(M(o,u,l,f),T);return h.isGeneratorFunction(u)?p:p.next().then(function(a){return a.done?a.value:p.next()})},H(x),S(x,A,"Generator"),S(x,E,function(){return this}),S(x,"toString",function(){return"[object Generator]"}),h.keys=function(o){var u=Object(o),l=[];for(var f in u)l.push(f);return l.reverse(),function T(){for(;l.length;){var p=l.pop();if(p in u)return T.value=p,T.done=!1,T}return T.done=!0,T}},h.values=s,m.prototype={constructor:m,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!u)for(var l in this)l.charAt(0)==="t"&&C.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if(u.type==="throw")throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var l=this;function f(d,I){return a.type="throw",a.arg=u,l.next=d,I&&(l.method="next",l.arg=void 0),!!I}for(var T=this.tryEntries.length-1;T>=0;--T){var p=this.tryEntries[T],a=p.completion;if(p.tryLoc==="root")return f("end");if(p.tryLoc<=this.prev){var n=C.call(p,"catchLoc"),g=C.call(p,"finallyLoc");if(n&&g){if(this.prev<p.catchLoc)return f(p.catchLoc,!0);if(this.prev<p.finallyLoc)return f(p.finallyLoc)}else if(n){if(this.prev<p.catchLoc)return f(p.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<p.finallyLoc)return f(p.finallyLoc)}}}},abrupt:function(u,l){for(var f=this.tryEntries.length-1;f>=0;--f){var T=this.tryEntries[f];if(T.tryLoc<=this.prev&&C.call(T,"finallyLoc")&&this.prev<T.finallyLoc){var p=T;break}}p&&(u==="break"||u==="continue")&&p.tryLoc<=l&&l<=p.finallyLoc&&(p=null);var a=p?p.completion:{};return a.type=u,a.arg=l,p?(this.method="next",this.next=p.finallyLoc,F):this.complete(a)},complete:function(u,l){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&l&&(this.next=l),F},finish:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.finallyLoc===u)return this.complete(f.completion,f.afterLoc),P(f),F}},catch:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.tryLoc===u){var T=f.completion;if(T.type==="throw"){var p=T.arg;P(f)}return p}}throw new Error("illegal catch attempt")},delegateYield:function(u,l,f){return this.delegate={iterator:s(u),resultName:l,nextLoc:f},this.method==="next"&&(this.arg=void 0),F}},h}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},89822:ee=>{function i(e,r){return ee.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,b){return h.__proto__=b,h},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i(e,r)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},47452:(ee,i,e)=>{var r=e(42134),y=e(25400),h=e(85665),b=e(8343);function C(O,R){return r(O)||y(O,R)||h(O,R)||b()}ee.exports=C,ee.exports.__esModule=!0,ee.exports.default=ee.exports},38197:(ee,i,e)=>{var r=e(39005);function y(h,b){for(;!Object.prototype.hasOwnProperty.call(h,b)&&(h=r(h),h!==null););return h}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},33138:(ee,i,e)=>{var r=e(42134),y=e(75963),h=e(85665),b=e(8343);function C(O){return r(O)||y(O)||h(O)||b()}ee.exports=C,ee.exports.__esModule=!0,ee.exports.default=ee.exports},90890:(ee,i,e)=>{var r=e(33299),y=e(75963),h=e(85665),b=e(16306);function C(O){return r(O)||y(O)||h(O)||b()}ee.exports=C,ee.exports.__esModule=!0,ee.exports.default=ee.exports},91148:ee=>{function i(e){return ee.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i(e)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},85665:(ee,i,e)=>{var r=e(68793);function y(h,b){if(h){if(typeof h=="string")return r(h,b);var C=Object.prototype.toString.call(h).slice(8,-1);if(C==="Object"&&h.constructor&&(C=h.constructor.name),C==="Map"||C==="Set")return Array.from(h);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return r(h,b)}}ee.exports=y,ee.exports.__esModule=!0,ee.exports.default=ee.exports},79788:(ee,i,e)=>{var r=e(277)();ee.exports=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}}]);

//# sourceMappingURL=9243.e3eef1d85a7cc81e163e.js.map