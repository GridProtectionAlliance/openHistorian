"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4620],{59507:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(68404),r=a(3490),n=a(45916);class o extends s.PureComponent{render(){const{searchQuery:e,linkButton:t,setSearchQuery:a,target:s,placeholder:o="Search by name or type"}=this.props,c={href:null==t?void 0:t.href,disabled:null==t?void 0:t.disabled};return s&&(c.target=s),(0,n.jsxs)("div",{className:"page-action-bar",children:[(0,n.jsx)("div",{className:"gf-form gf-form--grow",children:(0,n.jsx)(r.FilterInput,{value:e,onChange:a,placeholder:o})}),t&&(0,n.jsx)(r.LinkButton,Object.assign({},c,{children:t.title}))]})}}},88451:(e,t,a)=>{a.d(t,{c:()=>j});var s,r,n,o=a(36636),c=a(68404),i=a(18745),u=a(3490),l=a(28436),d=a(22584),h=a(98163),g=a(47570),p=a(52772),S=a(59507),f=a(45916);function x(){const e=(0,i.useDispatch)(),t=(0,c.useCallback)((t=>e((0,p.zT)(t))),[e]),a=(0,i.useSelector)((e=>{let{dataSources:t}=e;return(0,p.IO)(t)})),s=h.Vt.hasPermission(g.bW.DataSourcesCreate);return(0,f.jsx)(m,{searchQuery:a,setSearchQuery:t,canCreateDataSource:s})}function m(e){let{searchQuery:t,setSearchQuery:a,canCreateDataSource:s}=e;const r={href:(0,p.d7)().New,title:"Add data source",disabled:!s};return(0,f.jsx)(S.Z,{searchQuery:t,setSearchQuery:a,linkButton:r},"action-bar")}function j(){(0,p.zJ)();const e=(0,i.useSelector)((e=>(0,p.mt)(e.dataSources))),t=(0,i.useSelector)((e=>{let{dataSources:t}=e;return(0,p.r7)(t)})),a=(0,i.useSelector)((e=>{let{dataSources:t}=e;return t.hasFetched})),s=h.Vt.hasPermission(g.bW.DataSourcesCreate);return(0,f.jsx)(b,{dataSources:e,dataSourcesCount:t,isLoading:!a,hasCreateRights:s})}function b(e){let{dataSources:t,dataSourcesCount:a,isLoading:o,hasCreateRights:c}=e;const i=(0,u.useStyles)(y),h=(0,p.d7)();return o?s||(s=(0,f.jsx)(d.Z,{})):0===a?(0,f.jsx)(l.Z,{buttonDisabled:!c,title:"No data sources defined",buttonIcon:"database",buttonLink:h.New,buttonTitle:"Add data source",proTip:"You can also define data sources through configuration files.",proTipLink:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list",proTipLinkTitle:"Learn more",proTipTarget:"_blank"}):(0,f.jsxs)(f.Fragment,{children:[r||(r=(0,f.jsx)(x,{})),(0,f.jsx)("ul",{className:i.list,children:t.map((e=>(0,f.jsx)("li",{children:(0,f.jsxs)(u.Card,{href:h.Edit.replace(/:uid/gi,e.uid),children:[(0,f.jsx)(u.Card.Heading,{children:e.name}),(0,f.jsx)(u.Card.Figure,{children:(0,f.jsx)("img",{src:e.typeLogoUrl,alt:"",height:"40px",width:"40px",className:i.logo})}),(0,f.jsx)(u.Card.Meta,{children:[e.typeName,e.url,e.isDefault&&(n||(n=(0,f.jsx)(u.Tag,{name:"default",colorIndex:1},"default-tag")))]})]})},e.uid)))})]})}const y=()=>({list:(0,o.css)({listStyle:"none",display:"grid"}),logo:(0,o.css)({objectFit:"contain"})})},86731:(e,t,a)=>{a.r(t),a.d(t,{DataSourcesListPage:()=>c,default:()=>i});a(68404);var s,r=a(69371),n=a(88451),o=a(45916);function c(){return s||(s=(0,o.jsx)(r.T,{navId:"datasources",children:(0,o.jsx)(r.T.Contents,{children:(0,o.jsx)(n.c,{})})}))}const i=c},52772:(e,t,a)=>{a.d(t,{Vj:()=>o,rl:()=>Q.rl,mt:()=>f.mt,r7:()=>f.r7,IO:()=>f.IO,I5:()=>f.I5,BX:()=>Q.BX,Ht:()=>Q.Ht,zT:()=>Q.zT,yr:()=>Q.yr,nH:()=>D,wl:()=>T,IA:()=>I,Qs:()=>k,YY:()=>L,_l:()=>w,MF:()=>E,d7:()=>N,q6:()=>v,E:()=>x,wi:()=>b,OU:()=>y,zJ:()=>j,hw:()=>m,qj:()=>C});var s=a(4643),r=(a(57235),a(68404)),n=a(78507);const o=(0,r.createContext)(n.n);var c=a(18745),i=a(43215),u=a(45193),l=a(5831),d=a(98163),h=a(8674),g=a(47570),p=a(21169),S=a(7947),f=a(77197);const x=e=>{const t=(0,c.useDispatch)();(0,r.useEffect)((()=>(t((0,s.M9)(e)),function(){t((0,u.e)({stateSelector:e=>e.dataSourceSettings}))})),[e,t])},m=e=>{const t=(0,c.useDispatch)();return()=>t((0,s.kY)(e))},j=()=>{const e=(0,c.useDispatch)();(0,r.useEffect)((()=>{e((0,s.bZ)())}),[e])},b=e=>{const t=(0,c.useDispatch)();(0,r.useEffect)((()=>{t((0,s.gv)(e))}),[t,e])},y=()=>{const e=(0,c.useDispatch)();(0,r.useEffect)((()=>{e((0,s.Kj)())}),[e])},D=()=>{const e=(0,c.useDispatch)(),t=N();return a=>{e((0,s.J_)(a,t.Edit))}},C=()=>{const e=(0,c.useDispatch)();return t=>e((0,s.oe)(t))},v=()=>{const e=(0,c.useDispatch)(),{name:t}=(0,c.useSelector)((e=>e.dataSources.dataSource));return()=>{l.Z.publish(new p.VJ({title:"Delete",text:`Are you sure you want to delete the "${t}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,s.F5)())}))}},T=e=>(0,c.useSelector)((t=>(0,f.f6)(t.dataSources,e))),I=e=>{const t=T(e),a=JSON.stringify({datasource:t.name,context:"explore"});return i.urlUtil.renderUrl("/explore",{left:a})},k=e=>(0,c.useSelector)((t=>(0,f.G4)(t.dataSources,e))),w=()=>(0,c.useSelector)((e=>e.dataSourceSettings)),E=(e,t)=>{const a=T(e),{plugin:s,loadError:r,loading:n}=w(),o=(0,c.useSelector)((e=>e.navIndex)),i=t?`datasource-page-${t}`:`datasource-settings-${e}`;if(r){const e={text:r,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:e,main:e}}return n||!s?(0,h.h)(o,i,(0,S.xG)("settings")):(0,h.h)(o,i,(0,S.nI)((0,S.B1)(a,s),t||"settings"))},L=e=>{const t=T(e);return{readOnly:!0===t.readOnly,hasWriteRights:d.Vt.hasPermissionInMetadata(g.bW.DataSourcesWrite,t),hasDeleteRights:d.Vt.hasPermissionInMetadata(g.bW.DataSourcesDelete,t)}},N=()=>(0,r.useContext)(o);var Q=a(75375)}}]);
//# sourceMappingURL=DataSourcesListPage.56a661c1f173f08535c5.js.map