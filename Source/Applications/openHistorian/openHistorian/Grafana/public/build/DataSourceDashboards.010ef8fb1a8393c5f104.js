"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2929],{81319:(e,t,s)=>{s.d(t,{Z:()=>o});s(68404);var a,r=s(3490),n=s(45916);const o=function(e){let{dashboards:t,onImport:s,onRemove:o}=e;function i(e){return e.revision!==e.importedRevision?"Update":"Re-import"}return(0,n.jsx)("table",{className:"filter-table",children:(0,n.jsx)("tbody",{children:t.map(((e,t)=>(0,n.jsxs)("tr",{children:[a||(a=(0,n.jsx)("td",{className:"width-1",children:(0,n.jsx)(r.Icon,{name:"apps"})})),(0,n.jsx)("td",{children:e.imported?(0,n.jsx)("a",{href:e.importedUrl,children:e.title}):(0,n.jsx)("span",{children:e.title})}),(0,n.jsxs)("td",{style:{textAlign:"right"},children:[e.imported?(0,n.jsx)(r.Button,{variant:"secondary",size:"sm",onClick:()=>s(e,!0),children:i(e)}):(0,n.jsx)(r.Button,{variant:"secondary",size:"sm",onClick:()=>s(e,!1),children:"Import"}),e.imported&&(0,n.jsx)(r.Button,{"aria-label":"Delete dashboard",icon:"trash-alt",variant:"destructive",size:"sm",onClick:()=>o(e)})]})]},`${e.dashboardId}-${t}`)))})})}},7243:(e,t,s)=>{s.r(t),s.d(t,{DataSourceDashboardsPage:()=>x,default:()=>f});var a,r=s(68404),n=s(69371),o=s(18745),i=s(22584),c=s(62736),d=s(72192),u=s(81319),l=s(52772),h=s(45916);function p(e){let{uid:t}=e;(0,l.wi)(t);const s=(0,o.useDispatch)(),a=(0,o.useSelector)((e=>e.dataSources.dataSource)),n=(0,o.useSelector)((e=>e.plugins.dashboards)),i=(0,o.useSelector)((e=>e.plugins.isLoadingPluginDashboards));(0,r.useEffect)((()=>{a.id>0&&s((0,d.m3)())}),[s,a]);return(0,h.jsx)(m,{dashboards:n,isLoading:i,onImportDashboard:(e,t)=>{s((0,c.$j)({pluginId:e.pluginId,path:e.path,overwrite:t,inputs:[{name:"*",type:"datasource",pluginId:a.type,value:a.name}]},e.title))},onRemoveDashboard:e=>{let{uid:t}=e;s((0,c.fG)(t))}})}const m=e=>{let{isLoading:t,dashboards:s,onImportDashboard:r,onRemoveDashboard:n}=e;return t?a||(a=(0,h.jsx)(i.Z,{})):(0,h.jsx)(u.Z,{dashboards:s,onImport:r,onRemove:n})};function x(e){const t=e.match.params.uid;return(0,h.jsx)(n.T,{navId:`datasource-dashboards-${t}`,children:(0,h.jsx)(n.T.Contents,{children:(0,h.jsx)(p,{uid:t})})})}const f=x},52772:(e,t,s)=>{s.d(t,{Vj:()=>o,rl:()=>B.rl,mt:()=>f.mt,r7:()=>f.r7,IO:()=>f.IO,I5:()=>f.I5,BX:()=>B.BX,Ht:()=>B.Ht,zT:()=>B.zT,yr:()=>B.yr,nH:()=>v,wl:()=>w,IA:()=>C,Qs:()=>E,YY:()=>$,_l:()=>k,MF:()=>R,d7:()=>z,q6:()=>y,E:()=>g,wi:()=>S,OU:()=>j,zJ:()=>D,hw:()=>b,qj:()=>I});var a=s(4643),r=(s(57235),s(68404)),n=s(78507);const o=(0,r.createContext)(n.n);var i=s(18745),c=s(43215),d=s(45193),u=s(5831),l=s(98163),h=s(8674),p=s(47570),m=s(21169),x=s(7947),f=s(77197);const g=e=>{const t=(0,i.useDispatch)();(0,r.useEffect)((()=>(t((0,a.M9)(e)),function(){t((0,d.e)({stateSelector:e=>e.dataSourceSettings}))})),[e,t])},b=e=>{const t=(0,i.useDispatch)();return()=>t((0,a.kY)(e))},D=()=>{const e=(0,i.useDispatch)();(0,r.useEffect)((()=>{e((0,a.bZ)())}),[e])},S=e=>{const t=(0,i.useDispatch)();(0,r.useEffect)((()=>{t((0,a.gv)(e))}),[t,e])},j=()=>{const e=(0,i.useDispatch)();(0,r.useEffect)((()=>{e((0,a.Kj)())}),[e])},v=()=>{const e=(0,i.useDispatch)(),t=z();return s=>{e((0,a.J_)(s,t.Edit))}},I=()=>{const e=(0,i.useDispatch)();return t=>e((0,a.oe)(t))},y=()=>{const e=(0,i.useDispatch)(),{name:t}=(0,i.useSelector)((e=>e.dataSources.dataSource));return()=>{u.Z.publish(new m.VJ({title:"Delete",text:`Are you sure you want to delete the "${t}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,a.F5)())}))}},w=e=>(0,i.useSelector)((t=>(0,f.f6)(t.dataSources,e))),C=e=>{const t=w(e),s=JSON.stringify({datasource:t.name,context:"explore"});return c.urlUtil.renderUrl("/explore",{left:s})},E=e=>(0,i.useSelector)((t=>(0,f.G4)(t.dataSources,e))),k=()=>(0,i.useSelector)((e=>e.dataSourceSettings)),R=(e,t)=>{const s=w(e),{plugin:a,loadError:r,loading:n}=k(),o=(0,i.useSelector)((e=>e.navIndex)),c=t?`datasource-page-${t}`:`datasource-settings-${e}`;if(r){const e={text:r,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:e,main:e}}return n||!a?(0,h.h)(o,c,(0,x.xG)("settings")):(0,h.h)(o,c,(0,x.nI)((0,x.B1)(s,a),t||"settings"))},$=e=>{const t=w(e);return{readOnly:!0===t.readOnly,hasWriteRights:l.Vt.hasPermissionInMetadata(p.bW.DataSourcesWrite,t),hasDeleteRights:l.Vt.hasPermissionInMetadata(p.bW.DataSourcesDelete,t)}},z=()=>(0,r.useContext)(o);var B=s(75375)}}]);
//# sourceMappingURL=DataSourceDashboards.010ef8fb1a8393c5f104.js.map