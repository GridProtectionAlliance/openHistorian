{"version":3,"file":"8477.5a149b2dc106a4cdce43.js","mappings":"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","sources":["webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/_.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/abap/abap.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/apex/apex.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/azcli/azcli.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/bat/bat.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/bicep/bicep.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/cameligo/cameligo.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/clojure/clojure.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/coffee/coffee.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/cpp/cpp.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/csharp/csharp.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/csp/csp.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/css/css.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/cypher/cypher.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/dart/dart.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/dockerfile/dockerfile.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/ecl/ecl.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/elixir/elixir.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/flow9/flow9.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/fsharp/fsharp.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/freemarker2/freemarker2.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/go/go.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/graphql/graphql.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/handlebars/handlebars.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/hcl/hcl.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/html/html.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/ini/ini.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/java/java.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/julia/julia.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/kotlin/kotlin.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/less/less.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/lexon/lexon.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/lua/lua.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/liquid/liquid.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/m3/m3.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/mips/mips.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/msdax/msdax.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/mysql/mysql.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/objective-c/objective-c.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/pascal/pascal.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/pascaligo/pascaligo.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/perl/perl.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/pgsql/pgsql.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/php/php.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/pla/pla.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/postiats/postiats.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/powerquery/powerquery.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/powershell/powershell.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/protobuf/protobuf.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/pug/pug.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/python/python.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/qsharp/qsharp.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/r/r.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/razor/razor.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/redis/redis.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/redshift/redshift.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/restructuredtext/restructuredtext.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/ruby/ruby.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/rust/rust.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/sb/sb.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/scala/scala.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/scheme/scheme.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/scss/scss.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/shell/shell.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/solidity/solidity.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/sophia/sophia.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/sparql/sparql.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/sql/sql.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/st/st.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/swift/swift.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/systemverilog/systemverilog.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/tcl/tcl.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/twig/twig.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/typescript/typescript.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/vb/vb.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/xml/xml.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/basic-languages/monaco.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/language/css/monaco.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/language/html/monaco.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/language/json/monaco.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/types.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionWidgetContribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/browser/zoneWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdown.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/browser/ui/hover/hoverWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverOperation.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hoverTypes.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/history/browser/contextScopedHistoryWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/contentHover.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/marked/marked.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/marginHover.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/getHover.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markdownHoverParticipant.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/severityIcon/common/severityIcon.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/markerHoverParticipant.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/hover/browser/hover.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/dataTransfer.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/uuid.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/dnd/browser/dnd.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/labels.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteContribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/dropIntoEditor/browser/dropIntoEditorContribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/search.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findState.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/history/browser/historyWidgetKeybindingHint.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingRanges.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/hiddenRangeModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/indentRangeProvider.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/foldingDecorations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/syntaxRangeProvider.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/folding/browser/folding.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/consts.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/utils.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionToGhostText.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/files/common/files.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/suggestWidgetPreviewModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostTextHoverParticipant.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/ghostText.contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentUtils.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHints.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsLocations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsHover.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inlayHints/browser/inlayHintsContribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/lineSelection/browser/lineSelection.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/copyLinesCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/moveLinesCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/sortLinesCommand.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/linkedEditing/browser/linkedEditing.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/getLinks.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/links/browser/links.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScroll.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/opener/browser/link.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/viewportSemanticTokens/browser/viewportSemanticTokens.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/wordHighlighter/browser/wordHighlighter.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/wordOperations/browser/wordOperations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/wordPartOperations/browser/wordPartOperations.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/accessibilityHelp/accessibilityHelp.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/quickinput/browser/helpQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/fuzzyScorer.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/base/common/errorMessage.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/quickinput/browser/pickerQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/platform/quickinput/browser/commandsQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","webpack://grafana/./node_modules/monaco-editor/esm/vs/language/typescript/monaco.contribution.js"],"sourcesContent":["/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../editor/editor.api.js\";\n\n// src/basic-languages/_.contribution.ts\nvar languageDefinitions = {};\nvar lazyLanguageLoaders = {};\nvar LazyLanguageLoader = class {\n  static getOrCreate(languageId) {\n    if (!lazyLanguageLoaders[languageId]) {\n      lazyLanguageLoaders[languageId] = new LazyLanguageLoader(languageId);\n    }\n    return lazyLanguageLoaders[languageId];\n  }\n  _languageId;\n  _loadingTriggered;\n  _lazyLoadPromise;\n  _lazyLoadPromiseResolve;\n  _lazyLoadPromiseReject;\n  constructor(languageId) {\n    this._languageId = languageId;\n    this._loadingTriggered = false;\n    this._lazyLoadPromise = new Promise((resolve, reject) => {\n      this._lazyLoadPromiseResolve = resolve;\n      this._lazyLoadPromiseReject = reject;\n    });\n  }\n  load() {\n    if (!this._loadingTriggered) {\n      this._loadingTriggered = true;\n      languageDefinitions[this._languageId].loader().then((mod) => this._lazyLoadPromiseResolve(mod), (err) => this._lazyLoadPromiseReject(err));\n    }\n    return this._lazyLoadPromise;\n  }\n};\nasync function loadLanguage(languageId) {\n  await LazyLanguageLoader.getOrCreate(languageId).load();\n  const model = monaco_editor_core_exports.editor.createModel(\"\", languageId);\n  model.dispose();\n}\nfunction registerLanguage(def) {\n  const languageId = def.id;\n  languageDefinitions[languageId] = def;\n  monaco_editor_core_exports.languages.register(def);\n  const lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\n  monaco_editor_core_exports.languages.registerTokensProviderFactory(languageId, {\n    create: async () => {\n      const mod = await lazyLanguageLoader.load();\n      return mod.language;\n    }\n  });\n  monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    const mod = await lazyLanguageLoader.load();\n    monaco_editor_core_exports.languages.setLanguageConfiguration(languageId, mod.conf);\n  });\n}\nexport {\n  loadLanguage,\n  registerLanguage\n};\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/abap/abap.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"abap\",\n  extensions: [\".abap\"],\n  aliases: [\"abap\", \"ABAP\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/abap/abap\"], resolve, reject);\n      });\n    } else {\n      return import(\"./abap.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/apex/apex.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"apex\",\n  extensions: [\".cls\"],\n  aliases: [\"Apex\", \"apex\"],\n  mimetypes: [\"text/x-apex-source\", \"text/x-apex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/apex/apex\"], resolve, reject);\n      });\n    } else {\n      return import(\"./apex.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/azcli/azcli.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"azcli\",\n  extensions: [\".azcli\"],\n  aliases: [\"Azure CLI\", \"azcli\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/azcli/azcli\"], resolve, reject);\n      });\n    } else {\n      return import(\"./azcli.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bat/bat.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bat\",\n  extensions: [\".bat\", \".cmd\"],\n  aliases: [\"Batch\", \"bat\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bat/bat\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bat.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/bicep/bicep.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"bicep\",\n  extensions: [\".bicep\"],\n  aliases: [\"Bicep\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/bicep/bicep\"], resolve, reject);\n      });\n    } else {\n      return import(\"./bicep.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cameligo/cameligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cameligo\",\n  extensions: [\".mligo\"],\n  aliases: [\"Cameligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cameligo/cameligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cameligo.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/clojure/clojure.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"clojure\",\n  extensions: [\".clj\", \".cljs\", \".cljc\", \".edn\"],\n  aliases: [\"clojure\", \"Clojure\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/clojure/clojure\"], resolve, reject);\n      });\n    } else {\n      return import(\"./clojure.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/coffee/coffee.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"coffeescript\",\n  extensions: [\".coffee\"],\n  aliases: [\"CoffeeScript\", \"coffeescript\", \"coffee\"],\n  mimetypes: [\"text/x-coffeescript\", \"text/coffeescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/coffee/coffee\"], resolve, reject);\n      });\n    } else {\n      return import(\"./coffee.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cpp/cpp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"c\",\n  extensions: [\".c\", \".h\"],\n  aliases: [\"C\", \"c\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"cpp\",\n  extensions: [\".cpp\", \".cc\", \".cxx\", \".hpp\", \".hh\", \".hxx\"],\n  aliases: [\"C++\", \"Cpp\", \"cpp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cpp/cpp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cpp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csharp/csharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csharp\",\n  extensions: [\".cs\", \".csx\", \".cake\"],\n  aliases: [\"C#\", \"csharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csharp/csharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csharp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/csp/csp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"csp\",\n  extensions: [],\n  aliases: [\"CSP\", \"csp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/csp/csp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./csp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/css/css.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"css\",\n  extensions: [\".css\"],\n  aliases: [\"CSS\", \"css\"],\n  mimetypes: [\"text/css\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/css/css\"], resolve, reject);\n      });\n    } else {\n      return import(\"./css.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/cypher/cypher.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"cypher\",\n  extensions: [\".cypher\", \".cyp\"],\n  aliases: [\"Cypher\", \"OpenCypher\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/cypher/cypher\"], resolve, reject);\n      });\n    } else {\n      return import(\"./cypher.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dart/dart.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dart\",\n  extensions: [\".dart\"],\n  aliases: [\"Dart\", \"dart\"],\n  mimetypes: [\"text/x-dart-source\", \"text/x-dart\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dart/dart\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dart.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/dockerfile/dockerfile.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"dockerfile\",\n  extensions: [\".dockerfile\"],\n  filenames: [\"Dockerfile\"],\n  aliases: [\"Dockerfile\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/dockerfile/dockerfile\"], resolve, reject);\n      });\n    } else {\n      return import(\"./dockerfile.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ecl/ecl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ecl\",\n  extensions: [\".ecl\"],\n  aliases: [\"ECL\", \"Ecl\", \"ecl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ecl/ecl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ecl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/elixir/elixir.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"elixir\",\n  extensions: [\".ex\", \".exs\"],\n  aliases: [\"Elixir\", \"elixir\", \"ex\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/elixir/elixir\"], resolve, reject);\n      });\n    } else {\n      return import(\"./elixir.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/flow9/flow9.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"flow9\",\n  extensions: [\".flow\"],\n  aliases: [\"Flow9\", \"Flow\", \"flow9\", \"flow\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/flow9/flow9\"], resolve, reject);\n      });\n    } else {\n      return import(\"./flow9.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/fsharp/fsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"fsharp\",\n  extensions: [\".fs\", \".fsi\", \".ml\", \".mli\", \".fsx\", \".fsscript\"],\n  aliases: [\"F#\", \"FSharp\", \"fsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/fsharp/fsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./fsharp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/freemarker2/freemarker2.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"freemarker2\",\n  extensions: [\".ftl\", \".ftlh\", \".ftlx\"],\n  aliases: [\"FreeMarker2\", \"Apache FreeMarker2\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Angle/Dollar)\", \"Apache FreeMarker2 (Angle/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Bracket/Dollar)\", \"Apache FreeMarker2 (Bracket/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagBracketInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-angle.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Angle/Bracket)\", \"Apache FreeMarker2 (Angle/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAngleInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAngleInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-bracket.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Bracket/Bracket)\", \"Apache FreeMarker2 (Bracket/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagBracketInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagBracketInterpolationBracket);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-dollar\",\n  aliases: [\"FreeMarker2 (Auto/Dollar)\", \"Apache FreeMarker2 (Auto/Dollar)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAutoInterpolationDollar);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationDollar);\n    }\n  }\n});\nregisterLanguage({\n  id: \"freemarker2.tag-auto.interpolation-bracket\",\n  aliases: [\"FreeMarker2 (Auto/Bracket)\", \"Apache FreeMarker2 (Auto/Bracket)\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/freemarker2/freemarker2\"], resolve, reject);\n      }).then((m) => m.TagAutoInterpolationBracket);\n    } else {\n      return import(\"./freemarker2.js\").then((m) => m.TagAutoInterpolationBracket);\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/go/go.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"go\",\n  extensions: [\".go\"],\n  aliases: [\"Go\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/go/go\"], resolve, reject);\n      });\n    } else {\n      return import(\"./go.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/graphql/graphql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"graphql\",\n  extensions: [\".graphql\", \".gql\"],\n  aliases: [\"GraphQL\", \"graphql\", \"gql\"],\n  mimetypes: [\"application/graphql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/graphql/graphql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./graphql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/handlebars/handlebars.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"handlebars\",\n  extensions: [\".handlebars\", \".hbs\"],\n  aliases: [\"Handlebars\", \"handlebars\", \"hbs\"],\n  mimetypes: [\"text/x-handlebars-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/handlebars/handlebars\"], resolve, reject);\n      });\n    } else {\n      return import(\"./handlebars.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/hcl/hcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"hcl\",\n  extensions: [\".tf\", \".tfvars\", \".hcl\"],\n  aliases: [\"Terraform\", \"tf\", \"HCL\", \"hcl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/hcl/hcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./hcl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/html/html.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"html\",\n  extensions: [\".html\", \".htm\", \".shtml\", \".xhtml\", \".mdoc\", \".jsp\", \".asp\", \".aspx\", \".jshtm\"],\n  aliases: [\"HTML\", \"htm\", \"html\", \"xhtml\"],\n  mimetypes: [\"text/html\", \"text/x-jshtm\", \"text/template\", \"text/ng-template\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/html/html\"], resolve, reject);\n      });\n    } else {\n      return import(\"./html.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ini/ini.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ini\",\n  extensions: [\".ini\", \".properties\", \".gitconfig\"],\n  filenames: [\"config\", \".gitattributes\", \".gitconfig\", \".editorconfig\"],\n  aliases: [\"Ini\", \"ini\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ini/ini\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ini.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/java/java.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"java\",\n  extensions: [\".java\", \".jav\"],\n  aliases: [\"Java\", \"java\"],\n  mimetypes: [\"text/x-java-source\", \"text/x-java\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/java/java\"], resolve, reject);\n      });\n    } else {\n      return import(\"./java.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/javascript/javascript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"javascript\",\n  extensions: [\".js\", \".es6\", \".jsx\", \".mjs\", \".cjs\"],\n  firstLine: \"^#!.*\\\\bnode\",\n  filenames: [\"jakefile\"],\n  aliases: [\"JavaScript\", \"javascript\", \"js\"],\n  mimetypes: [\"text/javascript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/javascript/javascript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./javascript.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/julia/julia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"julia\",\n  extensions: [\".jl\"],\n  aliases: [\"julia\", \"Julia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/julia/julia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./julia.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/kotlin/kotlin.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"kotlin\",\n  extensions: [\".kt\"],\n  aliases: [\"Kotlin\", \"kotlin\"],\n  mimetypes: [\"text/x-kotlin-source\", \"text/x-kotlin\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/kotlin/kotlin\"], resolve, reject);\n      });\n    } else {\n      return import(\"./kotlin.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/less/less.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"less\",\n  extensions: [\".less\"],\n  aliases: [\"Less\", \"less\"],\n  mimetypes: [\"text/x-less\", \"text/less\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/less/less\"], resolve, reject);\n      });\n    } else {\n      return import(\"./less.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lexon/lexon.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lexon\",\n  extensions: [\".lex\"],\n  aliases: [\"Lexon\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lexon/lexon\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lexon.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/lua/lua.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"lua\",\n  extensions: [\".lua\"],\n  aliases: [\"Lua\", \"lua\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/lua/lua\"], resolve, reject);\n      });\n    } else {\n      return import(\"./lua.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/liquid/liquid.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"liquid\",\n  extensions: [\".liquid\", \".html.liquid\"],\n  aliases: [\"Liquid\", \"liquid\"],\n  mimetypes: [\"application/liquid\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/liquid/liquid\"], resolve, reject);\n      });\n    } else {\n      return import(\"./liquid.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/m3/m3.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"m3\",\n  extensions: [\".m3\", \".i3\", \".mg\", \".ig\"],\n  aliases: [\"Modula-3\", \"Modula3\", \"modula3\", \"m3\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/m3/m3\"], resolve, reject);\n      });\n    } else {\n      return import(\"./m3.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/markdown/markdown.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"markdown\",\n  extensions: [\".md\", \".markdown\", \".mdown\", \".mkdn\", \".mkd\", \".mdwn\", \".mdtxt\", \".mdtext\"],\n  aliases: [\"Markdown\", \"markdown\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/markdown/markdown\"], resolve, reject);\n      });\n    } else {\n      return import(\"./markdown.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mips/mips.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mips\",\n  extensions: [\".s\"],\n  aliases: [\"MIPS\", \"MIPS-V\"],\n  mimetypes: [\"text/x-mips\", \"text/mips\", \"text/plaintext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mips/mips\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mips.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/msdax/msdax.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"msdax\",\n  extensions: [\".dax\", \".msdax\"],\n  aliases: [\"DAX\", \"MSDAX\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/msdax/msdax\"], resolve, reject);\n      });\n    } else {\n      return import(\"./msdax.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/mysql/mysql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"mysql\",\n  extensions: [],\n  aliases: [\"MySQL\", \"mysql\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/mysql/mysql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./mysql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/objective-c/objective-c.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"objective-c\",\n  extensions: [\".m\"],\n  aliases: [\"Objective-C\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/objective-c/objective-c\"], resolve, reject);\n      });\n    } else {\n      return import(\"./objective-c.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascal/pascal.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascal\",\n  extensions: [\".pas\", \".p\", \".pp\"],\n  aliases: [\"Pascal\", \"pas\"],\n  mimetypes: [\"text/x-pascal-source\", \"text/x-pascal\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascal/pascal\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascal.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pascaligo/pascaligo.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pascaligo\",\n  extensions: [\".ligo\"],\n  aliases: [\"Pascaligo\", \"ligo\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pascaligo/pascaligo\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pascaligo.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/perl/perl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"perl\",\n  extensions: [\".pl\"],\n  aliases: [\"Perl\", \"pl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/perl/perl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./perl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pgsql/pgsql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pgsql\",\n  extensions: [],\n  aliases: [\"PostgreSQL\", \"postgres\", \"pg\", \"postgre\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pgsql/pgsql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pgsql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/php/php.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"php\",\n  extensions: [\".php\", \".php4\", \".php5\", \".phtml\", \".ctp\"],\n  aliases: [\"PHP\", \"php\"],\n  mimetypes: [\"application/x-php\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/php/php\"], resolve, reject);\n      });\n    } else {\n      return import(\"./php.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pla/pla.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pla\",\n  extensions: [\".pla\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pla/pla\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pla.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/postiats/postiats.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"postiats\",\n  extensions: [\".dats\", \".sats\", \".hats\"],\n  aliases: [\"ATS\", \"ATS/Postiats\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/postiats/postiats\"], resolve, reject);\n      });\n    } else {\n      return import(\"./postiats.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powerquery/powerquery.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powerquery\",\n  extensions: [\".pq\", \".pqm\"],\n  aliases: [\"PQ\", \"M\", \"Power Query\", \"Power Query M\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powerquery/powerquery\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powerquery.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/powershell/powershell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"powershell\",\n  extensions: [\".ps1\", \".psm1\", \".psd1\"],\n  aliases: [\"PowerShell\", \"powershell\", \"ps\", \"ps1\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/powershell/powershell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./powershell.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/protobuf/protobuf.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"proto\",\n  extensions: [\".proto\"],\n  aliases: [\"protobuf\", \"Protocol Buffers\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/protobuf/protobuf\"], resolve, reject);\n      });\n    } else {\n      return import(\"./protobuf.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/pug/pug.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"pug\",\n  extensions: [\".jade\", \".pug\"],\n  aliases: [\"Pug\", \"Jade\", \"jade\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/pug/pug\"], resolve, reject);\n      });\n    } else {\n      return import(\"./pug.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/python/python.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"python\",\n  extensions: [\".py\", \".rpy\", \".pyw\", \".cpy\", \".gyp\", \".gypi\"],\n  aliases: [\"Python\", \"py\"],\n  firstLine: \"^#!/.*\\\\bpython[0-9.-]*\\\\b\",\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/python/python\"], resolve, reject);\n      });\n    } else {\n      return import(\"./python.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/qsharp/qsharp.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"qsharp\",\n  extensions: [\".qs\"],\n  aliases: [\"Q#\", \"qsharp\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/qsharp/qsharp\"], resolve, reject);\n      });\n    } else {\n      return import(\"./qsharp.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/r/r.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"r\",\n  extensions: [\".r\", \".rhistory\", \".rmd\", \".rprofile\", \".rt\"],\n  aliases: [\"R\", \"r\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/r/r\"], resolve, reject);\n      });\n    } else {\n      return import(\"./r.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/razor/razor.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"razor\",\n  extensions: [\".cshtml\"],\n  aliases: [\"Razor\", \"razor\"],\n  mimetypes: [\"text/x-cshtml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/razor/razor\"], resolve, reject);\n      });\n    } else {\n      return import(\"./razor.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redis/redis.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redis\",\n  extensions: [\".redis\"],\n  aliases: [\"redis\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redis/redis\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redis.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/redshift/redshift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"redshift\",\n  extensions: [],\n  aliases: [\"Redshift\", \"redshift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/redshift/redshift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./redshift.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/restructuredtext/restructuredtext.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"restructuredtext\",\n  extensions: [\".rst\"],\n  aliases: [\"reStructuredText\", \"restructuredtext\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/restructuredtext/restructuredtext\"], resolve, reject);\n      });\n    } else {\n      return import(\"./restructuredtext.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/ruby/ruby.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"ruby\",\n  extensions: [\".rb\", \".rbx\", \".rjs\", \".gemspec\", \".pp\"],\n  filenames: [\"rakefile\", \"Gemfile\"],\n  aliases: [\"Ruby\", \"rb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/ruby/ruby\"], resolve, reject);\n      });\n    } else {\n      return import(\"./ruby.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/rust/rust.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"rust\",\n  extensions: [\".rs\", \".rlib\"],\n  aliases: [\"Rust\", \"rust\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/rust/rust\"], resolve, reject);\n      });\n    } else {\n      return import(\"./rust.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sb/sb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sb\",\n  extensions: [\".sb\"],\n  aliases: [\"Small Basic\", \"sb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sb/sb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sb.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scala/scala.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scala\",\n  extensions: [\".scala\", \".sc\", \".sbt\"],\n  aliases: [\"Scala\", \"scala\", \"SBT\", \"Sbt\", \"sbt\", \"Dotty\", \"dotty\"],\n  mimetypes: [\"text/x-scala-source\", \"text/x-scala\", \"text/x-sbt\", \"text/x-dotty\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scala/scala\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scala.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scheme/scheme.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scheme\",\n  extensions: [\".scm\", \".ss\", \".sch\", \".rkt\"],\n  aliases: [\"scheme\", \"Scheme\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scheme/scheme\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scheme.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/scss/scss.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"scss\",\n  extensions: [\".scss\"],\n  aliases: [\"Sass\", \"sass\", \"scss\"],\n  mimetypes: [\"text/x-scss\", \"text/scss\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/scss/scss\"], resolve, reject);\n      });\n    } else {\n      return import(\"./scss.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/shell/shell.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"shell\",\n  extensions: [\".sh\", \".bash\"],\n  aliases: [\"Shell\", \"sh\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/shell/shell\"], resolve, reject);\n      });\n    } else {\n      return import(\"./shell.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/solidity/solidity.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sol\",\n  extensions: [\".sol\"],\n  aliases: [\"sol\", \"solidity\", \"Solidity\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/solidity/solidity\"], resolve, reject);\n      });\n    } else {\n      return import(\"./solidity.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sophia/sophia.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"aes\",\n  extensions: [\".aes\"],\n  aliases: [\"aes\", \"sophia\", \"Sophia\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sophia/sophia\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sophia.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sparql/sparql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sparql\",\n  extensions: [\".rq\"],\n  aliases: [\"sparql\", \"SPARQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sparql/sparql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sparql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/sql/sql.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"sql\",\n  extensions: [\".sql\"],\n  aliases: [\"SQL\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/sql/sql\"], resolve, reject);\n      });\n    } else {\n      return import(\"./sql.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/st/st.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"st\",\n  extensions: [\".st\", \".iecst\", \".iecplc\", \".lc3lib\"],\n  aliases: [\"StructuredText\", \"scl\", \"stl\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/st/st\"], resolve, reject);\n      });\n    } else {\n      return import(\"./st.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/swift/swift.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"swift\",\n  aliases: [\"Swift\", \"swift\"],\n  extensions: [\".swift\"],\n  mimetypes: [\"text/swift\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/swift/swift\"], resolve, reject);\n      });\n    } else {\n      return import(\"./swift.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/systemverilog/systemverilog.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"systemverilog\",\n  extensions: [\".sv\", \".svh\"],\n  aliases: [\"SV\", \"sv\", \"SystemVerilog\", \"systemverilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\nregisterLanguage({\n  id: \"verilog\",\n  extensions: [\".v\", \".vh\"],\n  aliases: [\"V\", \"v\", \"Verilog\", \"verilog\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/systemverilog/systemverilog\"], resolve, reject);\n      });\n    } else {\n      return import(\"./systemverilog.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/tcl/tcl.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"tcl\",\n  extensions: [\".tcl\"],\n  aliases: [\"tcl\", \"Tcl\", \"tcltk\", \"TclTk\", \"tcl/tk\", \"Tcl/Tk\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/tcl/tcl\"], resolve, reject);\n      });\n    } else {\n      return import(\"./tcl.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/twig/twig.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"twig\",\n  extensions: [\".twig\"],\n  aliases: [\"Twig\", \"twig\"],\n  mimetypes: [\"text/x-twig\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/twig/twig\"], resolve, reject);\n      });\n    } else {\n      return import(\"./twig.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/typescript/typescript.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"typescript\",\n  extensions: [\".ts\", \".tsx\"],\n  aliases: [\"TypeScript\", \"ts\", \"typescript\"],\n  mimetypes: [\"text/typescript\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/typescript/typescript\"], resolve, reject);\n      });\n    } else {\n      return import(\"./typescript.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/vb/vb.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"vb\",\n  extensions: [\".vb\"],\n  aliases: [\"Visual Basic\", \"vb\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/vb/vb\"], resolve, reject);\n      });\n    } else {\n      return import(\"./vb.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/xml/xml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"xml\",\n  extensions: [\n    \".xml\",\n    \".dtd\",\n    \".ascx\",\n    \".csproj\",\n    \".config\",\n    \".wxi\",\n    \".wxl\",\n    \".wxs\",\n    \".xaml\",\n    \".svg\",\n    \".svgz\",\n    \".opf\",\n    \".xsl\"\n  ],\n  firstLine: \"(\\\\<\\\\?xml.*)|(\\\\<svg)|(\\\\<\\\\!doctype\\\\s+svg)\",\n  aliases: [\"XML\", \"xml\"],\n  mimetypes: [\"text/xml\", \"application/xml\", \"application/xaml+xml\", \"application/xml-dtd\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/xml/xml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./xml.js\");\n    }\n  }\n});\n","/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/yaml/yaml.contribution.ts\nimport { registerLanguage } from \"../_.contribution.js\";\nregisterLanguage({\n  id: \"yaml\",\n  extensions: [\".yaml\", \".yml\"],\n  aliases: [\"YAML\", \"yaml\", \"YML\", \"yml\"],\n  mimetypes: [\"application/x-yaml\", \"text/x-yaml\"],\n  loader: () => {\n    if (false) {\n      return new Promise((resolve, reject) => {\n        __require([\"vs/basic-languages/yaml/yaml\"], resolve, reject);\n      });\n    } else {\n      return import(\"./yaml.js\");\n    }\n  }\n});\n","import '../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\n// src/basic-languages/monaco.contribution.ts\nimport \"./abap/abap.contribution.js\";\nimport \"./apex/apex.contribution.js\";\nimport \"./azcli/azcli.contribution.js\";\nimport \"./bat/bat.contribution.js\";\nimport \"./bicep/bicep.contribution.js\";\nimport \"./cameligo/cameligo.contribution.js\";\nimport \"./clojure/clojure.contribution.js\";\nimport \"./coffee/coffee.contribution.js\";\nimport \"./cpp/cpp.contribution.js\";\nimport \"./csharp/csharp.contribution.js\";\nimport \"./csp/csp.contribution.js\";\nimport \"./css/css.contribution.js\";\nimport \"./cypher/cypher.contribution.js\";\nimport \"./dart/dart.contribution.js\";\nimport \"./dockerfile/dockerfile.contribution.js\";\nimport \"./ecl/ecl.contribution.js\";\nimport \"./elixir/elixir.contribution.js\";\nimport \"./flow9/flow9.contribution.js\";\nimport \"./fsharp/fsharp.contribution.js\";\nimport \"./freemarker2/freemarker2.contribution.js\";\nimport \"./go/go.contribution.js\";\nimport \"./graphql/graphql.contribution.js\";\nimport \"./handlebars/handlebars.contribution.js\";\nimport \"./hcl/hcl.contribution.js\";\nimport \"./html/html.contribution.js\";\nimport \"./ini/ini.contribution.js\";\nimport \"./java/java.contribution.js\";\nimport \"./javascript/javascript.contribution.js\";\nimport \"./julia/julia.contribution.js\";\nimport \"./kotlin/kotlin.contribution.js\";\nimport \"./less/less.contribution.js\";\nimport \"./lexon/lexon.contribution.js\";\nimport \"./lua/lua.contribution.js\";\nimport \"./liquid/liquid.contribution.js\";\nimport \"./m3/m3.contribution.js\";\nimport \"./markdown/markdown.contribution.js\";\nimport \"./mips/mips.contribution.js\";\nimport \"./msdax/msdax.contribution.js\";\nimport \"./mysql/mysql.contribution.js\";\nimport \"./objective-c/objective-c.contribution.js\";\nimport \"./pascal/pascal.contribution.js\";\nimport \"./pascaligo/pascaligo.contribution.js\";\nimport \"./perl/perl.contribution.js\";\nimport \"./pgsql/pgsql.contribution.js\";\nimport \"./php/php.contribution.js\";\nimport \"./pla/pla.contribution.js\";\nimport \"./postiats/postiats.contribution.js\";\nimport \"./powerquery/powerquery.contribution.js\";\nimport \"./powershell/powershell.contribution.js\";\nimport \"./protobuf/protobuf.contribution.js\";\nimport \"./pug/pug.contribution.js\";\nimport \"./python/python.contribution.js\";\nimport \"./qsharp/qsharp.contribution.js\";\nimport \"./r/r.contribution.js\";\nimport \"./razor/razor.contribution.js\";\nimport \"./redis/redis.contribution.js\";\nimport \"./redshift/redshift.contribution.js\";\nimport \"./restructuredtext/restructuredtext.contribution.js\";\nimport \"./ruby/ruby.contribution.js\";\nimport \"./rust/rust.contribution.js\";\nimport \"./sb/sb.contribution.js\";\nimport \"./scala/scala.contribution.js\";\nimport \"./scheme/scheme.contribution.js\";\nimport \"./scss/scss.contribution.js\";\nimport \"./shell/shell.contribution.js\";\nimport \"./solidity/solidity.contribution.js\";\nimport \"./sophia/sophia.contribution.js\";\nimport \"./sparql/sparql.contribution.js\";\nimport \"./sql/sql.contribution.js\";\nimport \"./st/st.contribution.js\";\nimport \"./swift/swift.contribution.js\";\nimport \"./systemverilog/systemverilog.contribution.js\";\nimport \"./tcl/tcl.contribution.js\";\nimport \"./twig/twig.contribution.js\";\nimport \"./typescript/typescript.contribution.js\";\nimport \"./vb/vb.contribution.js\";\nimport \"./xml/xml.contribution.js\";\nimport \"./yaml/yaml.contribution.js\";\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/css/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this.options;\n  }\n  get options() {\n    return this._options;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setDiagnosticsOptions(options) {\n    this.setOptions(options);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar optionsDefault = {\n  validate: true,\n  lint: {\n    compatibleVendorPrefixes: \"ignore\",\n    vendorPrefix: \"warning\",\n    duplicateProperties: \"warning\",\n    emptyRules: \"warning\",\n    importStatement: \"ignore\",\n    boxModel: \"ignore\",\n    universalSelector: \"ignore\",\n    zeroUnits: \"ignore\",\n    fontFaceProperties: \"warning\",\n    hexColorLength: \"error\",\n    argumentsInColorFunction: \"error\",\n    unknownProperties: \"warning\",\n    ieHack: \"ignore\",\n    unknownVendorSpecificProperties: \"ignore\",\n    propertyIgnoredDueToDisplay: \"warning\",\n    important: \"ignore\",\n    float: \"ignore\",\n    idSelector: \"ignore\"\n  },\n  data: { useDefaultDataProvider: true },\n  format: {\n    newlineBetweenSelectors: true,\n    newlineBetweenRules: true,\n    spaceAroundSelectorSeparator: false,\n    braceStyle: \"collapse\",\n    maxPreserveNewLines: void 0,\n    preserveNewLines: true\n  }\n};\nvar modeConfigurationDefault = {\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  definitions: true,\n  references: true,\n  documentHighlights: true,\n  rename: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true,\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true\n};\nvar cssDefaults = new LanguageServiceDefaultsImpl(\"css\", optionsDefault, modeConfigurationDefault);\nvar scssDefaults = new LanguageServiceDefaultsImpl(\"scss\", optionsDefault, modeConfigurationDefault);\nvar lessDefaults = new LanguageServiceDefaultsImpl(\"less\", optionsDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.css = { cssDefaults, lessDefaults, scssDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/css/cssMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./cssMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.onLanguage(\"less\", () => {\n  getMode().then((mode) => mode.setupMode(lessDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"scss\", () => {\n  getMode().then((mode) => mode.setupMode(scssDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"css\", () => {\n  getMode().then((mode) => mode.setupMode(cssDefaults));\n});\nexport {\n  cssDefaults,\n  lessDefaults,\n  scssDefaults\n};\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/html/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _options;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, options, modeConfiguration) {\n    this._languageId = languageId;\n    this.setOptions(options);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get options() {\n    return this._options;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  setOptions(options) {\n    this._options = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar formatDefaults = {\n  tabSize: 4,\n  insertSpaces: false,\n  wrapLineLength: 120,\n  unformatted: 'default\": \"a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',\n  contentUnformatted: \"pre\",\n  indentInnerHtml: false,\n  preserveNewLines: true,\n  maxPreserveNewLines: void 0,\n  indentHandlebars: false,\n  endWithNewline: false,\n  extraLiners: \"head, body, /html\",\n  wrapAttributes: \"auto\"\n};\nvar optionsDefault = {\n  format: formatDefaults,\n  suggest: {},\n  data: { useDefaultDataProvider: true }\n};\nfunction getConfigurationDefault(languageId) {\n  return {\n    completionItems: true,\n    hovers: true,\n    documentSymbols: true,\n    links: true,\n    documentHighlights: true,\n    rename: true,\n    colors: true,\n    foldingRanges: true,\n    selectionRanges: true,\n    diagnostics: languageId === htmlLanguageId,\n    documentFormattingEdits: languageId === htmlLanguageId,\n    documentRangeFormattingEdits: languageId === htmlLanguageId\n  };\n}\nvar htmlLanguageId = \"html\";\nvar handlebarsLanguageId = \"handlebars\";\nvar razorLanguageId = \"razor\";\nvar htmlLanguageService = registerHTMLLanguageService(htmlLanguageId, optionsDefault, getConfigurationDefault(htmlLanguageId));\nvar htmlDefaults = htmlLanguageService.defaults;\nvar handlebarLanguageService = registerHTMLLanguageService(handlebarsLanguageId, optionsDefault, getConfigurationDefault(handlebarsLanguageId));\nvar handlebarDefaults = handlebarLanguageService.defaults;\nvar razorLanguageService = registerHTMLLanguageService(razorLanguageId, optionsDefault, getConfigurationDefault(razorLanguageId));\nvar razorDefaults = razorLanguageService.defaults;\nmonaco_editor_core_exports.languages.html = {\n  htmlDefaults,\n  razorDefaults,\n  handlebarDefaults,\n  htmlLanguageService,\n  handlebarLanguageService,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/html/htmlMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./htmlMode.js\");\n  }\n}\nfunction registerHTMLLanguageService(languageId, options = optionsDefault, modeConfiguration = getConfigurationDefault(languageId)) {\n  const defaults = new LanguageServiceDefaultsImpl(languageId, options, modeConfiguration);\n  let mode;\n  const onLanguageListener = monaco_editor_core_exports.languages.onLanguage(languageId, async () => {\n    mode = (await getMode()).setupMode(defaults);\n  });\n  return {\n    defaults,\n    dispose() {\n      onLanguageListener.dispose();\n      mode?.dispose();\n      mode = void 0;\n    }\n  };\n}\nexport {\n  handlebarDefaults,\n  handlebarLanguageService,\n  htmlDefaults,\n  htmlLanguageService,\n  razorDefaults,\n  razorLanguageService,\n  registerHTMLLanguageService\n};\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/json/monaco.contribution.ts\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _diagnosticsOptions;\n  _modeConfiguration;\n  _languageId;\n  constructor(languageId, diagnosticsOptions, modeConfiguration) {\n    this._languageId = languageId;\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this.setModeConfiguration(modeConfiguration);\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get languageId() {\n    return this._languageId;\n  }\n  get modeConfiguration() {\n    return this._modeConfiguration;\n  }\n  get diagnosticsOptions() {\n    return this._diagnosticsOptions;\n  }\n  setDiagnosticsOptions(options) {\n    this._diagnosticsOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n  setModeConfiguration(modeConfiguration) {\n    this._modeConfiguration = modeConfiguration || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(this);\n  }\n};\nvar diagnosticDefault = {\n  validate: true,\n  allowComments: true,\n  schemas: [],\n  enableSchemaRequest: false,\n  schemaRequest: \"warning\",\n  schemaValidation: \"warning\",\n  comments: \"error\",\n  trailingCommas: \"error\"\n};\nvar modeConfigurationDefault = {\n  documentFormattingEdits: true,\n  documentRangeFormattingEdits: true,\n  completionItems: true,\n  hovers: true,\n  documentSymbols: true,\n  tokens: true,\n  colors: true,\n  foldingRanges: true,\n  diagnostics: true,\n  selectionRanges: true\n};\nvar jsonDefaults = new LanguageServiceDefaultsImpl(\"json\", diagnosticDefault, modeConfigurationDefault);\nmonaco_editor_core_exports.languages.json = { jsonDefaults };\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/json/jsonMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./jsonMode.js\");\n  }\n}\nmonaco_editor_core_exports.languages.register({\n  id: \"json\",\n  extensions: [\".json\", \".bowerrc\", \".jshintrc\", \".jscsrc\", \".eslintrc\", \".babelrc\", \".har\"],\n  aliases: [\"JSON\", \"json\"],\n  mimetypes: [\"application/json\"]\n});\nmonaco_editor_core_exports.languages.onLanguage(\"json\", () => {\n  getMode().then((mode) => mode.setupMode(jsonDefaults));\n});\nexport {\n  jsonDefaults\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 88 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(66 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant((theme, collector) => {\n    const bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n    if (bracketMatchBackground) {\n        collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);\n    }\n    const bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n    if (bracketMatchBorder) {\n        collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`);\n    }\n});\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from './types.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const refactorPreviewCommandId = 'editor.action.refactor.preview';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\nclass ManagedCodeActionSet extends Disposable {\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            if (isNonEmptyArray(b.diagnostics)) {\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return 0; // both have no diagnostics\n        }\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    const filter = trigger.filter || {};\n    const codeActionContext = {\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    const providers = getCodeActionProviders(registry, model, filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            progress.report(provider);\n            const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentation(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    }));\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    return Promise.all(promises).then(actions => {\n        const allActions = actions.map(x => x.actions).flat();\n        const allDocumentation = coalesce(actions.map(x => x.documentation));\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    })\n        .finally(() => {\n        listener.dispose();\n        cts.dispose();\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction getDocumentation(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet MessageController = class MessageController {\n    constructor(editor, contextKeyService) {\n        this._messageWidget = new MutableDisposable();\n        this._messageListeners = new DisposableStore();\n        this._editor = editor;\n        this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MessageController.ID);\n    }\n    dispose() {\n        this._messageListeners.dispose();\n        this._messageWidget.dispose();\n        this._visible.reset();\n    }\n    showMessage(message, position) {\n        alert(message);\n        this._visible.set(true);\n        this._messageWidget.clear();\n        this._messageListeners.clear();\n        this._messageWidget.value = new MessageWidget(this._editor, position, message);\n        // close on blur, cursor, model change, dispose\n        this._messageListeners.add(this._editor.onDidBlurEditorText(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n        // 3sec\n        this._messageListeners.add(new TimeoutTimer(() => this.closeMessage(), 3000));\n        // close on mouse move\n        let bounds;\n        this._messageListeners.add(this._editor.onMouseMove(e => {\n            // outside the text area\n            if (!e.target.position) {\n                return;\n            }\n            if (!bounds) {\n                // define bounding box around position and first mouse occurance\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n            }\n            else if (!bounds.containsPosition(e.target.position)) {\n                // check if position is still in bounds\n                this.closeMessage();\n            }\n        }));\n    }\n    closeMessage() {\n        this._visible.reset();\n        this._messageListeners.clear();\n        if (this._messageWidget.value) {\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n        }\n    }\n};\nMessageController.ID = 'editor.contrib.messageController';\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\nMessageController = __decorate([\n    __param(1, IContextKeyService)\n], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n    id: 'leaveEditorMessage',\n    precondition: MessageController.MESSAGE_VISIBLE,\n    handler: c => c.closeMessage(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        primary: 9 /* KeyCode.Escape */\n    }\n}));\nclass MessageWidget {\n    constructor(editor, { lineNumber, column }, text) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._editor = editor;\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\n        this._position = { lineNumber, column };\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('monaco-editor-overlaymessage');\n        this._domNode.style.marginLeft = '-6px';\n        const anchorTop = document.createElement('div');\n        anchorTop.classList.add('anchor', 'top');\n        this._domNode.appendChild(anchorTop);\n        const message = document.createElement('div');\n        message.classList.add('message');\n        message.textContent = text;\n        this._domNode.appendChild(message);\n        const anchorBottom = document.createElement('div');\n        anchorBottom.classList.add('anchor', 'below');\n        this._domNode.appendChild(anchorBottom);\n        this._editor.addContentWidget(this);\n        this._domNode.classList.add('fadeIn');\n    }\n    static fadeOut(messageWidget) {\n        const dispose = () => {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\n        };\n        const handle = setTimeout(dispose, 110);\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\n        messageWidget.getDomNode().classList.add('fadeOut');\n        return { dispose };\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'messageoverlay';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._position,\n            preference: [\n                1 /* ContentWidgetPositionPreference.ABOVE */,\n                2 /* ContentWidgetPositionPreference.BELOW */,\n            ],\n            positionAffinity: 1 /* PositionAffinity.Right */,\n        };\n    }\n    afterRender(position) {\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\n    }\n}\nregisterEditorContribution(MessageController.ID, MessageController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { canceled } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, dispose, MutableDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './media/action.css';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, CodeActionItem, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const Context = {\n    Visible: new RawContextKey('CodeActionMenuVisible', false, localize('CodeActionMenuVisible', \"Whether the code action list widget is visible\"))\n};\nclass CodeActionAction extends Action {\n    constructor(action, callback) {\n        super(action.command ? action.command.id : action.title, stripNewlines(action.title), undefined, !action.disabled, callback);\n        this.action = action;\n    }\n}\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\nconst TEMPLATE_ID = 'codeActionWidget';\nconst codeActionLineHeight = 26;\nlet CodeMenuRenderer = class CodeMenuRenderer {\n    constructor(acceptKeybindings, keybindingService) {\n        this.acceptKeybindings = acceptKeybindings;\n        this.keybindingService = keybindingService;\n    }\n    get templateId() { return TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = [];\n        data.root = container;\n        data.text = document.createElement('span');\n        // data.detail = document.createElement('');\n        container.append(data.text);\n        // container.append(data.detail);\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.title;\n        // const detail = element.detail;\n        const isEnabled = element.isEnabled;\n        const isSeparator = element.isSeparator;\n        const isDocumentation = element.isDocumentation;\n        data.text.textContent = text;\n        // data.detail.textContent = detail;\n        if (!isEnabled) {\n            data.root.classList.add('option-disabled');\n            data.root.style.backgroundColor = 'transparent !important';\n        }\n        else {\n            data.root.classList.remove('option-disabled');\n        }\n        if (isSeparator) {\n            data.root.classList.add('separator');\n            data.root.style.height = '10px';\n        }\n        if (!isDocumentation) {\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this.acceptKeybindings;\n                data.root.title = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Refactor, Shift+F2 to Preview\"'] }, \"{0} to Refactor, {1} to Preview\", (_a = this.keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this.keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n                // data.root.title = this.keybindingService.lookupKeybinding(accept)?.getLabel() + ' to Refactor, ' + this.keybindingService.lookupKeybinding(preview)?.getLabel() + ' to Preview';\n            };\n            updateLabel();\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables = dispose(templateData.disposables);\n    }\n};\nCodeMenuRenderer = __decorate([\n    __param(1, IKeybindingService)\n], CodeMenuRenderer);\nlet CodeActionMenu = class CodeActionMenu extends Disposable {\n    constructor(_editor, _delegate, _contextMenuService, keybindingService, _languageFeaturesService, _telemetryService, _themeService, _configurationService, _contextViewService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._delegate = _delegate;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._telemetryService = _telemetryService;\n        this._configurationService = _configurationService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._showingActions = this._register(new MutableDisposable());\n        this.codeActionList = this._register(new MutableDisposable());\n        this.options = [];\n        this._visible = false;\n        this.viewItems = [];\n        this.hasSeperator = false;\n        this._keybindingResolver = new CodeActionKeybindingResolver({\n            getKeybindings: () => keybindingService.getKeybindings()\n        });\n        this._ctxMenuWidgetVisible = Context.Visible.bindTo(this._contextKeyService);\n        this.listRenderer = new CodeMenuRenderer([`onEnterSelectCodeAction`, `onEnterSelectCodeActionWithPreview`], keybindingService);\n    }\n    get isVisible() {\n        return this._visible;\n    }\n    isCodeActionWidgetEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.useCustomCodeActionMenu', {\n            resource: model.uri\n        });\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            e.elements.forEach(element => {\n                if (element.isEnabled) {\n                    element.action.run();\n                    this.hideCodeActionWidget();\n                }\n            });\n        }\n    }\n    _onListHover(e) {\n        var _a, _b, _c, _d;\n        if (!e.element) {\n            this.currSelectedItem = undefined;\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([]);\n        }\n        else {\n            if ((_b = e.element) === null || _b === void 0 ? void 0 : _b.isEnabled) {\n                (_c = this.codeActionList.value) === null || _c === void 0 ? void 0 : _c.setFocus([e.element.index]);\n                this.focusedEnabledItem = this.viewItems.indexOf(e.element);\n                this.currSelectedItem = e.element.index;\n            }\n            else {\n                this.currSelectedItem = undefined;\n                (_d = this.codeActionList.value) === null || _d === void 0 ? void 0 : _d.setFocus([e.element.index]);\n            }\n        }\n    }\n    renderCodeActionMenuList(element, inputArray) {\n        var _a;\n        const renderDisposables = new DisposableStore();\n        const renderMenu = document.createElement('div');\n        // Render invisible div to block mouse interaction in the rest of the UI\n        const menuBlock = document.createElement('div');\n        this.block = element.appendChild(menuBlock);\n        this.block.classList.add('context-view-block');\n        this.block.style.position = 'fixed';\n        this.block.style.cursor = 'initial';\n        this.block.style.left = '0';\n        this.block.style.top = '0';\n        this.block.style.width = '100%';\n        this.block.style.height = '100%';\n        this.block.style.zIndex = '-1';\n        renderDisposables.add(dom.addDisposableListener(this.block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\n        renderMenu.id = 'codeActionMenuWidget';\n        renderMenu.classList.add('codeActionMenuWidget');\n        element.appendChild(renderMenu);\n        this.codeActionList.value = new List('codeActionWidget', renderMenu, {\n            getHeight(element) {\n                if (element.isSeparator) {\n                    return 10;\n                }\n                return codeActionLineHeight;\n            },\n            getTemplateId(element) {\n                return 'codeActionWidget';\n            }\n        }, [this.listRenderer], { keyboardSupport: false });\n        renderDisposables.add(this.codeActionList.value.onMouseOver(e => this._onListHover(e)));\n        renderDisposables.add(this.codeActionList.value.onDidChangeFocus(e => { var _a; return (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.domFocus(); }));\n        renderDisposables.add(this.codeActionList.value.onDidChangeSelection(e => this._onListSelection(e)));\n        renderDisposables.add(this._editor.onDidLayoutChange(e => this.hideCodeActionWidget()));\n        // Populating the list widget and tracking enabled options.\n        inputArray.forEach((item, index) => {\n            const currIsSeparator = item.class === 'separator';\n            let isDocumentation = false;\n            if (item instanceof CodeActionAction) {\n                isDocumentation = item.action.kind === CodeActionMenu.documentationID;\n            }\n            if (currIsSeparator) {\n                // set to true forever\n                this.hasSeperator = true;\n            }\n            const menuItem = { title: item.label, detail: item.tooltip, action: inputArray[index], isEnabled: item.enabled, isSeparator: currIsSeparator, index, isDocumentation };\n            if (item.enabled) {\n                this.viewItems.push(menuItem);\n            }\n            this.options.push(menuItem);\n        });\n        this.codeActionList.value.splice(0, this.codeActionList.value.length, this.options);\n        const height = this.hasSeperator ? (inputArray.length - 1) * codeActionLineHeight + 10 : inputArray.length * codeActionLineHeight;\n        renderMenu.style.height = String(height) + 'px';\n        this.codeActionList.value.layout(height);\n        // For finding width dynamically (not using resize observer)\n        const arr = [];\n        this.options.forEach((item, index) => {\n            var _a, _b;\n            if (!this.codeActionList.value) {\n                return;\n            }\n            const element = (_b = document.getElementById((_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.getElementID(index))) === null || _b === void 0 ? void 0 : _b.getElementsByTagName('span')[0].offsetWidth;\n            arr.push(Number(element));\n        });\n        // resize observer - can be used in the future since list widget supports dynamic height but not width\n        const maxWidth = Math.max(...arr);\n        // 40 is the additional padding for the list widget (20 left, 20 right)\n        renderMenu.style.width = maxWidth + 52 + 'px';\n        (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.layout(height, maxWidth);\n        // List selection\n        if (this.viewItems.length < 1 || this.viewItems.every(item => item.isDocumentation)) {\n            this.currSelectedItem = undefined;\n        }\n        else {\n            this.focusedEnabledItem = 0;\n            this.currSelectedItem = this.viewItems[0].index;\n            this.codeActionList.value.setFocus([this.currSelectedItem]);\n        }\n        // List Focus\n        this.codeActionList.value.domFocus();\n        const focusTracker = dom.trackFocus(element);\n        const blurListener = focusTracker.onDidBlur(() => {\n            this.hideCodeActionWidget();\n            // this._contextViewService.hideContextView({ source: this });\n        });\n        renderDisposables.add(blurListener);\n        renderDisposables.add(focusTracker);\n        this._ctxMenuWidgetVisible.set(true);\n        return renderDisposables;\n    }\n    focusPrevious() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems[0].index;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = this.focusedEnabledItem - 1;\n            if (this.focusedEnabledItem < 0) {\n                this.focusedEnabledItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    focusNext() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = (this.focusedEnabledItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    navigateListWithKeysUp() {\n        this.focusPrevious();\n    }\n    navigateListWithKeysDown() {\n        this.focusNext();\n    }\n    onEnterSet() {\n        var _a;\n        if (typeof this.currSelectedItem === 'number') {\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setSelection([this.currSelectedItem]);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        this._ctxMenuWidgetVisible.reset();\n        this.options = [];\n        this.viewItems = [];\n        this.focusedEnabledItem = 0;\n        this.currSelectedItem = undefined;\n        this.hasSeperator = false;\n        this._contextViewService.hideContextView({ source: this });\n    }\n    codeActionTelemetry(openedFromString, didCancel, CodeActions) {\n        this._telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionFrom: openedFromString,\n            validCodeActions: CodeActions.validActions.length,\n            cancelled: didCancel,\n        });\n    }\n    show(trigger, codeActions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\n            if (!actionsToShow.length) {\n                this._visible = false;\n                return;\n            }\n            if (!this._editor.getDomNode()) {\n                // cancel when editor went off-dom\n                this._visible = false;\n                throw canceled();\n            }\n            this._visible = true;\n            this._showingActions.value = codeActions;\n            const menuActions = this.getMenuActions(trigger, actionsToShow, codeActions.documentation);\n            const anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\n            const resolver = this._keybindingResolver.getResolver();\n            const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */);\n            if (this.isCodeActionWidgetEnabled(model)) {\n                this._contextViewService.showContextView({\n                    getAnchor: () => anchor,\n                    render: (container) => this.renderCodeActionMenuList(container, menuActions),\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                }, this._editor.getDomNode(), false);\n            }\n            else {\n                this._contextMenuService.showContextMenu({\n                    domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n                    getAnchor: () => anchor,\n                    getActions: () => menuActions,\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                    autoSelectFirstItem: true,\n                    getKeyBinding: action => action instanceof CodeActionAction ? resolver(action.action) : undefined,\n                });\n            }\n        });\n    }\n    getMenuActions(trigger, actionsToShow, documentation) {\n        var _a, _b;\n        const toCodeActionAction = (item) => new CodeActionAction(item.action, () => this._delegate.onSelectCodeAction(item, trigger));\n        const result = actionsToShow\n            .map(toCodeActionAction);\n        const allDocumentation = [...documentation];\n        const model = this._editor.getModel();\n        if (model && result.length) {\n            for (const provider of this._languageFeaturesService.codeActionProvider.all(model)) {\n                if (provider._getAdditionalMenuItems) {\n                    allDocumentation.push(...provider._getAdditionalMenuItems({ trigger: trigger.type, only: (_b = (_a = trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.value }, actionsToShow.map(item => item.action)));\n                }\n            }\n        }\n        if (allDocumentation.length) {\n            result.push(new Separator(), ...allDocumentation.map(command => toCodeActionAction(new CodeActionItem({\n                title: command.title,\n                command: command,\n                kind: CodeActionMenu.documentationID\n            }, undefined))));\n        }\n        return result;\n    }\n    _toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n};\nCodeActionMenu.documentationID = '_documentation';\nCodeActionMenu = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IKeybindingService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ITelemetryService),\n    __param(6, IThemeService),\n    __param(7, IConfigurationService),\n    __param(8, IContextViewService),\n    __param(9, IContextKeyService)\n], CodeActionMenu);\nexport { CodeActionMenu };\nexport class CodeActionKeybindingResolver {\n    constructor(_keybindingProvider) {\n        this._keybindingProvider = _keybindingProvider;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this._keybindingProvider.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n}\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorBackground, editorLightBulbAutoFixForeground, editorLightBulbForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._quickFixActionId = _quickFixActionId;\n        this._preferredFixActionId = _preferredFixActionId;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = document.createElement('div');\n        this._domNode.className = Codicon.lightBulb.classNames;\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        Gesture.ignoreTarget(this._domNode);\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(59 /* EditorOption.lightbulb */) && !this._editor.getOption(59 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._updateLightBulbTitleAndIcon();\n        this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon, this));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(59 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...Codicon.lightBulb.classNamesArray);\n            this._domNode.classList.add(...Codicon.lightbulbAutofix.classNamesArray);\n            const preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\n            if (preferredKb) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", preferredKb.getLabel());\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...Codicon.lightbulbAutofix.classNamesArray);\n        this._domNode.classList.add(...Codicon.lightBulb.classNamesArray);\n        const kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\n        if (kb) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", kb.getLabel());\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\nregisterThemingParticipant((theme, collector) => {\n    var _a;\n    const editorBackgroundColor = (_a = theme.getColor(editorBackground)) === null || _a === void 0 ? void 0 : _a.transparent(0.7);\n    // Lightbulb Icon\n    const editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n    if (editorLightBulbForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n    // Lightbulb Auto Fix Icon\n    const editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n    if (editorLightBulbAutoFixForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CodeActionMenu } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        this.previewOn = false;\n        _CodeActionUi_disposed.set(this, false);\n        this._codeActionWidget = new Lazy(() => {\n            return this._register(instantiationService.createInstance(CodeActionMenu, this._editor, {\n                onSelectCodeAction: (action, trigger) => __awaiter(this, void 0, void 0, function* () {\n                    if (this.previewOn) {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(this.previewOn));\n                    }\n                    else {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(trigger.preview));\n                    }\n                    this.previewOn = false;\n                })\n            }));\n        });\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.trigger, e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            return widget;\n        });\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().hideCodeActionWidget();\n        }\n    }\n    onEnter() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().onEnterSet();\n        }\n    }\n    onPreviewEnter() {\n        this.previewOn = true;\n        this.onEnter();\n    }\n    navigateList(navUp) {\n        if (this._codeActionWidget.hasValue()) {\n            if (navUp) {\n                this._codeActionWidget.getValue().navigateListWithKeysUp();\n            }\n            else {\n                this._codeActionWidget.getValue().navigateListWithKeysDown();\n            }\n        }\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.getValue().update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.getValue().hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this._codeActionWidget.getValue().show(newState.trigger, actions, newState.position, { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._codeActionWidget.getValue().isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(trigger, actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._codeActionWidget.getValue().show(trigger, actions, at, options);\n        });\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService)\n], CodeActionUi);\nexport { CodeActionUi };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nimport { CodeActionTriggerSource } from './types.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfMarker(selection) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        for (const marker of this._markerService.read({ resource: model.uri })) {\n            const markerRange = model.validateRange(marker);\n            if (Range.intersectRanges(markerRange, selection)) {\n                return Range.lift(markerRange);\n            }\n        }\n        return undefined;\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const markerRange = this._getRangeOfMarker(selection);\n        const position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n        const e = {\n            trigger,\n            selection,\n            position\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, refactorPreviewCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { Context } from './codeActionMenu.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nfunction refactorTrigger(editor, userArgs, preview, codeActionFrom) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n        kind: CodeActionKind.Refactor,\n        apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n        ? args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n            : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n        : args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n            : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n        include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n        onlyIncludePreferredActions: args.preferred\n    }, args.apply, preview, codeActionFrom);\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet QuickFixController = class QuickFixController extends Disposable {\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger, preview) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action, preview);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                    }\n                }\n            })\n        }, this._instantiationService)));\n    }\n    static get(editor) {\n        return editor.getContribution(QuickFixController.ID);\n    }\n    update(newState) {\n        this._ui.getValue().update(newState);\n    }\n    hideCodeActionMenu() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().hideCodeActionWidget();\n        }\n    }\n    navigateCodeActionList(navUp) {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().navigateList(navUp);\n        }\n    }\n    selectedOption() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onEnter();\n        }\n    }\n    selectedOptionWithPreview() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onPreviewEnter();\n        }\n    }\n    showCodeActions(trigger, actions, at) {\n        return this._ui.getValue().showCodeActionList(trigger, actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition }, preview });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, preview) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n    }\n};\nQuickFixController.ID = 'editor.contrib.quickFixController';\nQuickFixController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], QuickFixController);\nexport { QuickFixController };\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(CancellationToken.None);\n        if (item.action.edit) {\n            yield bulkEditService.apply(ResourceEdit.convert(item.action.edit), {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: true,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, preview = false, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = QuickFixController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, false, CodeActionTriggerSource.QuickFix);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, false, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class RefactorPreview extends EditorAction {\n    constructor() {\n        super({\n            id: refactorPreviewCommandId,\n            label: nls.localize('refactor.preview.label', \"Refactor with Preview...\"),\n            alias: 'Refactor Preview...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Refactor Preview...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, true, CodeActionTriggerSource.RefactorPreview);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, undefined, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 84 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.AutoFix);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\nconst CodeActionContribution = EditorCommand.bindToContribution(QuickFixController.get);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nregisterEditorCommand(new CodeActionContribution({\n    id: 'hideCodeActionMenuWidget',\n    precondition: Context.Visible,\n    handler(x) {\n        x.hideCodeActionMenu();\n    },\n    kbOpts: {\n        weight: weight,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusPreviousCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(true);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusNextCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(false);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOption();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeActionWithPreview',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOptionWithPreview();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.useCustomCodeActionMenu': {\n            type: 'boolean',\n            tags: ['experimental'],\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('codeActionWidget', \"Enabling this adjusts how the code action menu is rendered.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, RefactorPreview, SourceAction } from './codeActionCommands.js';\nimport './codeActionWidgetContribution.js';\nregisterEditorContribution(QuickFixController.ID, QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(RefactorPreview);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, className, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration ${className}`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nexport class CodeLensWidget {\n    constructor(data, editor, className, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._className = className;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._className, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(16 /* EditorOption.codeLensFontSize */) || e.hasChanged(15 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._styleClassName = '_' + hash(this._editor.getId()).toString(16);\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\n            ? this._editor.getContainerDomNode()\n            : undefined);\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styleElement.remove();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(61 /* EditorOption.lineHeight */) / this._editor.getOption(48 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(16 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(48 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n        const fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n        let newStyle = `\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n        if (fontFamily) {\n            newStyle += `.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n        }\n        this._styleElement.textContent = newStyle;\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily !== null && fontFamily !== void 0 ? fontFamily : 'inherit');\n        this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nconst MAX_DECORATORS = 500;\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration(() => {\n            const prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            if (prevIsEnabled !== this._isEnabled) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        for (let i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                this.presentationIndex = i;\n                this._onDidChangePresentation.fire(this.presentation);\n                break;\n            }\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(registerThemingParticipant((theme, collector) => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(131 /* EditorOption.pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor) {\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._opts = createOptions(this._editor.getOption(72 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(72 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(72 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = mouseEvent.target.position ? mouseEvent.target.position.lineNumber : 0;\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nconst defaultColor = new Color(new RGBA(0, 122, 204));\nconst defaultOptions = {\n    showArrow: true,\n    showFrame: true,\n    className: '',\n    frameColor: defaultColor,\n    arrowColor: defaultColor,\n    keepEditorSelection: false\n};\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\nexport class ViewZoneDelegate {\n    constructor(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\n        this.id = ''; // A valid zone id should be greater than 0\n        this.domNode = domNode;\n        this.afterLineNumber = afterLineNumber;\n        this.afterColumn = afterColumn;\n        this.heightInLines = heightInLines;\n        this._onDomNodeTop = onDomNodeTop;\n        this._onComputedHeight = onComputedHeight;\n    }\n    onDomNodeTop(top) {\n        this._onDomNodeTop(top);\n    }\n    onComputedHeight(height) {\n        this._onComputedHeight(height);\n    }\n}\nexport class OverlayWidgetDelegate {\n    constructor(id, domNode) {\n        this._id = id;\n        this._domNode = domNode;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return null;\n    }\n}\nclass Arrow {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._ruleName = Arrow._IdGenerator.nextId();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._color = null;\n        this._height = -1;\n    }\n    dispose() {\n        this.hide();\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n    }\n    set color(value) {\n        if (this._color !== value) {\n            this._color = value;\n            this._updateStyle();\n        }\n    }\n    set height(value) {\n        if (this._height !== value) {\n            this._height = value;\n            this._updateStyle();\n        }\n    }\n    _updateStyle() {\n        dom.removeCSSRulesContainingSelector(this._ruleName);\n        dom.createCSSRule(`.monaco-editor ${this._ruleName}`, `border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `);\n    }\n    show(where) {\n        if (where.column === 1) {\n            // the arrow isn't pretty at column 1 and we need to push it out a little\n            where = { lineNumber: where.lineNumber, column: 2 };\n        }\n        this._decorations.set([{\n                range: Range.fromPositions(where),\n                options: {\n                    description: 'zone-widget-arrow',\n                    className: this._ruleName,\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n                }\n            }]);\n    }\n    hide() {\n        this._decorations.clear();\n    }\n}\nArrow._IdGenerator = new IdGenerator('.arrow-decoration-');\nexport class ZoneWidget {\n    constructor(editor, options = {}) {\n        this._arrow = null;\n        this._overlayWidget = null;\n        this._resizeSash = null;\n        this._viewZone = null;\n        this._disposables = new DisposableStore();\n        this.container = null;\n        this._isShowing = false;\n        this.editor = editor;\n        this._positionMarkerId = this.editor.createDecorationsCollection();\n        this.options = objects.deepClone(options);\n        objects.mixin(this.options, defaultOptions, false);\n        this.domNode = document.createElement('div');\n        if (!this.options.isAccessible) {\n            this.domNode.setAttribute('aria-hidden', 'true');\n            this.domNode.setAttribute('role', 'presentation');\n        }\n        this._disposables.add(this.editor.onDidLayoutChange((info) => {\n            const width = this._getWidth(info);\n            this.domNode.style.width = width + 'px';\n            this.domNode.style.left = this._getLeft(info) + 'px';\n            this._onWidth(width);\n        }));\n    }\n    dispose() {\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n                this._viewZone = null;\n            });\n        }\n        this._positionMarkerId.clear();\n        this._disposables.dispose();\n    }\n    create() {\n        this.domNode.classList.add('zone-widget');\n        if (this.options.className) {\n            this.domNode.classList.add(this.options.className);\n        }\n        this.container = document.createElement('div');\n        this.container.classList.add('zone-widget-container');\n        this.domNode.appendChild(this.container);\n        if (this.options.showArrow) {\n            this._arrow = new Arrow(this.editor);\n            this._disposables.add(this._arrow);\n        }\n        this._fillContainer(this.container);\n        this._initSash();\n        this._applyStyles();\n    }\n    style(styles) {\n        if (styles.frameColor) {\n            this.options.frameColor = styles.frameColor;\n        }\n        if (styles.arrowColor) {\n            this.options.arrowColor = styles.arrowColor;\n        }\n        this._applyStyles();\n    }\n    _applyStyles() {\n        if (this.container && this.options.frameColor) {\n            const frameColor = this.options.frameColor.toString();\n            this.container.style.borderTopColor = frameColor;\n            this.container.style.borderBottomColor = frameColor;\n        }\n        if (this._arrow && this.options.arrowColor) {\n            const arrowColor = this.options.arrowColor.toString();\n            this._arrow.color = arrowColor;\n        }\n    }\n    _getWidth(info) {\n        return info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n    }\n    _getLeft(info) {\n        // If minimap is to the left, we move beyond it\n        if (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n            return info.minimap.minimapWidth;\n        }\n        return 0;\n    }\n    _onViewZoneTop(top) {\n        this.domNode.style.top = top + 'px';\n    }\n    _onViewZoneHeight(height) {\n        this.domNode.style.height = `${height}px`;\n        if (this.container) {\n            const containerHeight = height - this._decoratingElementsHeight();\n            this.container.style.height = `${containerHeight}px`;\n            const layoutInfo = this.editor.getLayoutInfo();\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\n        }\n        if (this._resizeSash) {\n            this._resizeSash.layout();\n        }\n    }\n    get position() {\n        const range = this._positionMarkerId.getRange(0);\n        if (!range) {\n            return undefined;\n        }\n        return range.getStartPosition();\n    }\n    show(rangeOrPos, heightInLines) {\n        const range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n        this._isShowing = true;\n        this._showImpl(range, heightInLines);\n        this._isShowing = false;\n        this._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\n    }\n    hide() {\n        if (this._viewZone) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    accessor.removeZone(this._viewZone.id);\n                }\n            });\n            this._viewZone = null;\n        }\n        if (this._overlayWidget) {\n            this.editor.removeOverlayWidget(this._overlayWidget);\n            this._overlayWidget = null;\n        }\n        if (this._arrow) {\n            this._arrow.hide();\n        }\n    }\n    _decoratingElementsHeight() {\n        const lineHeight = this.editor.getOption(61 /* EditorOption.lineHeight */);\n        let result = 0;\n        if (this.options.showArrow) {\n            const arrowHeight = Math.round(lineHeight / 3);\n            result += 2 * arrowHeight;\n        }\n        if (this.options.showFrame) {\n            const frameThickness = Math.round(lineHeight / 9);\n            result += 2 * frameThickness;\n        }\n        return result;\n    }\n    _showImpl(where, heightInLines) {\n        const position = where.getStartPosition();\n        const layoutInfo = this.editor.getLayoutInfo();\n        const width = this._getWidth(layoutInfo);\n        this.domNode.style.width = `${width}px`;\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n        // Render the widget as zone (rendering) and widget (lifecycle)\n        const viewZoneDomNode = document.createElement('div');\n        viewZoneDomNode.style.overflow = 'hidden';\n        const lineHeight = this.editor.getOption(61 /* EditorOption.lineHeight */);\n        // adjust heightInLines to viewport\n        const maxHeightInLines = Math.max(12, (this.editor.getLayoutInfo().height / lineHeight) * 0.8);\n        heightInLines = Math.min(heightInLines, maxHeightInLines);\n        let arrowHeight = 0;\n        let frameThickness = 0;\n        // Render the arrow one 1/3 of an editor line height\n        if (this._arrow && this.options.showArrow) {\n            arrowHeight = Math.round(lineHeight / 3);\n            this._arrow.height = arrowHeight;\n            this._arrow.show(position);\n        }\n        // Render the frame as 1/9 of an editor line height\n        if (this.options.showFrame) {\n            frameThickness = Math.round(lineHeight / 9);\n        }\n        // insert zone widget\n        this.editor.changeViewZones((accessor) => {\n            if (this._viewZone) {\n                accessor.removeZone(this._viewZone.id);\n            }\n            if (this._overlayWidget) {\n                this.editor.removeOverlayWidget(this._overlayWidget);\n                this._overlayWidget = null;\n            }\n            this.domNode.style.top = '-1000px';\n            this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, (top) => this._onViewZoneTop(top), (height) => this._onViewZoneHeight(height));\n            this._viewZone.id = accessor.addZone(this._viewZone);\n            this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n            this.editor.addOverlayWidget(this._overlayWidget);\n        });\n        if (this.container && this.options.showFrame) {\n            const width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n            this.container.style.borderTopWidth = width + 'px';\n            this.container.style.borderBottomWidth = width + 'px';\n        }\n        const containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n        if (this.container) {\n            this.container.style.top = arrowHeight + 'px';\n            this.container.style.height = containerHeight + 'px';\n            this.container.style.overflow = 'hidden';\n        }\n        this._doLayout(containerHeight, width);\n        if (!this.options.keepEditorSelection) {\n            this.editor.setSelection(where);\n        }\n        const model = this.editor.getModel();\n        if (model) {\n            const revealLine = where.endLineNumber + 1;\n            if (revealLine <= model.getLineCount()) {\n                // reveal line below the zone widget\n                this.revealLine(revealLine, false);\n            }\n            else {\n                // reveal last line atop\n                this.revealLine(model.getLineCount(), true);\n            }\n        }\n    }\n    revealLine(lineNumber, isLastLine) {\n        if (isLastLine) {\n            this.editor.revealLineInCenter(lineNumber, 0 /* ScrollType.Smooth */);\n        }\n        else {\n            this.editor.revealLine(lineNumber, 0 /* ScrollType.Smooth */);\n        }\n    }\n    setCssClass(className, classToReplace) {\n        if (!this.container) {\n            return;\n        }\n        if (classToReplace) {\n            this.container.classList.remove(classToReplace);\n        }\n        this.container.classList.add(className);\n    }\n    _onWidth(widthInPixel) {\n        // implement in subclass\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        // implement in subclass\n    }\n    _relayout(newHeightInLines) {\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n            this.editor.changeViewZones(accessor => {\n                if (this._viewZone) {\n                    this._viewZone.heightInLines = newHeightInLines;\n                    accessor.layoutZone(this._viewZone.id);\n                }\n            });\n        }\n    }\n    // --- sash\n    _initSash() {\n        if (this._resizeSash) {\n            return;\n        }\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* Orientation.HORIZONTAL */ }));\n        if (!this.options.isResizeable) {\n            this._resizeSash.state = 0 /* SashState.Disabled */;\n        }\n        let data;\n        this._disposables.add(this._resizeSash.onDidStart((e) => {\n            if (this._viewZone) {\n                data = {\n                    startY: e.startY,\n                    heightInLines: this._viewZone.heightInLines,\n                };\n            }\n        }));\n        this._disposables.add(this._resizeSash.onDidEnd(() => {\n            data = undefined;\n        }));\n        this._disposables.add(this._resizeSash.onDidChange((evt) => {\n            if (data) {\n                const lineDelta = (evt.currentY - data.startY) / this.editor.getOption(61 /* EditorOption.lineHeight */);\n                const roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n                const newHeightInLines = data.heightInLines + roundedLineDelta;\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\n                    this._relayout(newHeightInLines);\n                }\n            }\n        }));\n    }\n    getHorizontalSashLeft() {\n        return 0;\n    }\n    getHorizontalSashTop() {\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\n    }\n    getHorizontalSashWidth() {\n        const layoutInfo = this.editor.getLayoutInfo();\n        return layoutInfo.width - layoutInfo.minimap.minimapWidth;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as GestureEventType, Gesture } from '../../touch.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class BaseDropdown extends ActionRunner {\n    constructor(container, options) {\n        super();\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this._element = append(container, $('.monaco-dropdown'));\n        this._label = append(this._element, $('.dropdown-label'));\n        let labelRenderer = options.labelRenderer;\n        if (!labelRenderer) {\n            labelRenderer = (container) => {\n                container.textContent = options.label || '';\n                return null;\n            };\n        }\n        for (const event of [EventType.CLICK, EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this.element, event, e => EventHelper.stop(e, true))); // prevent default click behaviour to trigger\n        }\n        for (const event of [EventType.MOUSE_DOWN, GestureEventType.Tap]) {\n            this._register(addDisposableListener(this._label, event, e => {\n                if (e instanceof MouseEvent && (e.detail > 1 || e.button !== 0)) {\n                    // prevent right click trigger to allow separate context menu (https://github.com/microsoft/vscode/issues/151064)\n                    // prevent multiple clicks to open multiple context menus (https://github.com/microsoft/vscode/issues/41363)\n                    return;\n                }\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }));\n        }\n        this._register(addDisposableListener(this._label, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */) || event.equals(10 /* KeyCode.Space */)) {\n                EventHelper.stop(e, true); // https://github.com/microsoft/vscode/issues/57997\n                if (this.visible) {\n                    this.hide();\n                }\n                else {\n                    this.show();\n                }\n            }\n        }));\n        const cleanupFn = labelRenderer(this._label);\n        if (cleanupFn) {\n            this._register(cleanupFn);\n        }\n        this._register(Gesture.addTarget(this._label));\n    }\n    get element() {\n        return this._element;\n    }\n    show() {\n        if (!this.visible) {\n            this.visible = true;\n            this._onDidChangeVisibility.fire(true);\n        }\n    }\n    hide() {\n        if (this.visible) {\n            this.visible = false;\n            this._onDidChangeVisibility.fire(false);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hide();\n        if (this.boxContainer) {\n            this.boxContainer.remove();\n            this.boxContainer = undefined;\n        }\n        if (this.contents) {\n            this.contents.remove();\n            this.contents = undefined;\n        }\n        if (this._label) {\n            this._label.remove();\n            this._label = undefined;\n        }\n    }\n}\nexport class DropdownMenu extends BaseDropdown {\n    constructor(container, options) {\n        super(container, options);\n        this._actions = [];\n        this._contextMenuProvider = options.contextMenuProvider;\n        this.actions = options.actions || [];\n        this.actionProvider = options.actionProvider;\n        this.menuClassName = options.menuClassName || '';\n        this.menuAsChild = !!options.menuAsChild;\n    }\n    set menuOptions(options) {\n        this._menuOptions = options;\n    }\n    get menuOptions() {\n        return this._menuOptions;\n    }\n    get actions() {\n        if (this.actionProvider) {\n            return this.actionProvider.getActions();\n        }\n        return this._actions;\n    }\n    set actions(actions) {\n        this._actions = actions;\n    }\n    show() {\n        super.show();\n        this.element.classList.add('active');\n        this._contextMenuProvider.showContextMenu({\n            getAnchor: () => this.element,\n            getActions: () => this.actions,\n            getActionsContext: () => this.menuOptions ? this.menuOptions.context : null,\n            getActionViewItem: action => this.menuOptions && this.menuOptions.actionViewItemProvider ? this.menuOptions.actionViewItemProvider(action) : undefined,\n            getKeyBinding: action => this.menuOptions && this.menuOptions.getKeyBinding ? this.menuOptions.getKeyBinding(action) : undefined,\n            getMenuClassName: () => this.menuClassName,\n            onHide: () => this.onHide(),\n            actionRunner: this.menuOptions ? this.menuOptions.actionRunner : undefined,\n            anchorAlignment: this.menuOptions ? this.menuOptions.anchorAlignment : 0 /* AnchorAlignment.LEFT */,\n            domForShadowRoot: this.menuAsChild ? this.element : undefined\n        });\n    }\n    hide() {\n        super.hide();\n    }\n    onHide() {\n        this.hide();\n        this.element.classList.remove('active');\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            this.element.title = this._action.label || '';\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = Object.assign(Object.assign({}, this.dropdownMenu.menuOptions), { get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                } });\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (this.getAction().label) {\n            title = this.getAction().label;\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.getAction().enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, append, asCSSUrl, EventType, ModifierKeyEmitter, prepend } from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from '../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { ActionRunner, Separator, SubmenuAction } from '../../../base/common/actions.js';\nimport { UILabelProvider } from '../../../base/common/keybindingLabels.js';\nimport { combinedDisposable, DisposableStore, MutableDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { isLinux, isWindows, OS } from '../../../base/common/platform.js';\nimport './menuEntryActionViewItem.css';\nimport { localize } from '../../../nls.js';\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IThemeService, ThemeIcon } from '../../theme/common/themeService.js';\nimport { isDark } from '../../theme/common/theme.js';\nimport { assertType } from '../../../base/common/types.js';\nexport function createAndFillInActionBarActions(menu, options, target, primaryGroup, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions) {\n    const groups = menu.getActions(options);\n    const isPrimaryAction = typeof primaryGroup === 'string' ? (actionGroup) => actionGroup === primaryGroup : primaryGroup;\n    // Action bars handle alternative actions on their own so the alternative actions should be ignored\n    fillInActions(groups, target, false, isPrimaryAction, primaryMaxCount, shouldInlineSubmenu, useSeparatorsInPrimaryActions);\n    return asDisposable(groups);\n}\nfunction asDisposable(groups) {\n    const disposables = new DisposableStore();\n    for (const [, actions] of groups) {\n        for (const action of actions) {\n            disposables.add(action);\n        }\n    }\n    return disposables;\n}\nfunction fillInActions(groups, target, useAlternativeActions, isPrimaryAction = actionGroup => actionGroup === 'navigation', primaryMaxCount = Number.MAX_SAFE_INTEGER, shouldInlineSubmenu = () => false, useSeparatorsInPrimaryActions = false) {\n    let primaryBucket;\n    let secondaryBucket;\n    if (Array.isArray(target)) {\n        primaryBucket = target;\n        secondaryBucket = target;\n    }\n    else {\n        primaryBucket = target.primary;\n        secondaryBucket = target.secondary;\n    }\n    const submenuInfo = new Set();\n    for (const [group, actions] of groups) {\n        let target;\n        if (isPrimaryAction(group)) {\n            target = primaryBucket;\n            if (target.length > 0 && useSeparatorsInPrimaryActions) {\n                target.push(new Separator());\n            }\n        }\n        else {\n            target = secondaryBucket;\n            if (target.length > 0) {\n                target.push(new Separator());\n            }\n        }\n        for (let action of actions) {\n            if (useAlternativeActions) {\n                action = action instanceof MenuItemAction && action.alt ? action.alt : action;\n            }\n            const newLen = target.push(action);\n            // keep submenu info for later inlining\n            if (action instanceof SubmenuAction) {\n                submenuInfo.add({ group, action, index: newLen - 1 });\n            }\n        }\n    }\n    // ask the outside if submenu should be inlined or not. only ask when\n    // there would be enough space\n    for (const { group, action, index } of submenuInfo) {\n        const target = isPrimaryAction(group) ? primaryBucket : secondaryBucket;\n        // inlining submenus with length 0 or 1 is easy,\n        // larger submenus need to be checked with the overall limit\n        const submenuActions = action.actions;\n        if ((submenuActions.length <= 1 || target.length + submenuActions.length - 2 <= primaryMaxCount) && shouldInlineSubmenu(action, group, target.length)) {\n            target.splice(index, 1, ...submenuActions);\n        }\n    }\n    // overflow items from the primary group into the secondary bucket\n    if (primaryBucket !== secondaryBucket && primaryBucket.length > primaryMaxCount) {\n        const overflow = primaryBucket.splice(primaryMaxCount, primaryBucket.length - primaryMaxCount);\n        secondaryBucket.unshift(...overflow, new Separator());\n    }\n}\nlet MenuEntryActionViewItem = class MenuEntryActionViewItem extends ActionViewItem {\n    constructor(action, options, _keybindingService, _notificationService, _contextKeyService, _themeService, _contextMenuService) {\n        super(undefined, action, { icon: !!(action.class || action.item.icon), label: !action.class && !action.item.icon, draggable: options === null || options === void 0 ? void 0 : options.draggable, keybinding: options === null || options === void 0 ? void 0 : options.keybinding, hoverDelegate: options === null || options === void 0 ? void 0 : options.hoverDelegate });\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextKeyService = _contextKeyService;\n        this._themeService = _themeService;\n        this._contextMenuService = _contextMenuService;\n        this._wantsAltCommand = false;\n        this._itemClassDispose = this._register(new MutableDisposable());\n        this._altKey = ModifierKeyEmitter.getInstance();\n    }\n    get _menuItemAction() {\n        return this._action;\n    }\n    get _commandAction() {\n        return this._wantsAltCommand && this._menuItemAction.alt || this._menuItemAction;\n    }\n    onClick(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            event.stopPropagation();\n            try {\n                yield this.actionRunner.run(this._commandAction, this._context);\n            }\n            catch (err) {\n                this._notificationService.error(err);\n            }\n        });\n    }\n    render(container) {\n        super.render(container);\n        container.classList.add('menu-entry');\n        this._updateItemClass(this._menuItemAction.item);\n        let mouseOver = false;\n        let alternativeKeyDown = this._altKey.keyStatus.altKey || ((isWindows || isLinux) && this._altKey.keyStatus.shiftKey);\n        const updateAltState = () => {\n            var _a;\n            const wantsAltCommand = mouseOver && alternativeKeyDown && !!((_a = this._commandAction.alt) === null || _a === void 0 ? void 0 : _a.enabled);\n            if (wantsAltCommand !== this._wantsAltCommand) {\n                this._wantsAltCommand = wantsAltCommand;\n                this.updateLabel();\n                this.updateTooltip();\n                this.updateClass();\n            }\n        };\n        if (this._menuItemAction.alt) {\n            this._register(this._altKey.event(value => {\n                alternativeKeyDown = value.altKey || ((isWindows || isLinux) && value.shiftKey);\n                updateAltState();\n            }));\n        }\n        this._register(addDisposableListener(container, 'mouseleave', _ => {\n            mouseOver = false;\n            updateAltState();\n        }));\n        this._register(addDisposableListener(container, 'mouseenter', _ => {\n            mouseOver = true;\n            updateAltState();\n        }));\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this._commandAction.label;\n        }\n    }\n    getTooltip() {\n        var _a;\n        const keybinding = this._keybindingService.lookupKeybinding(this._commandAction.id, this._contextKeyService);\n        const keybindingLabel = keybinding && keybinding.getLabel();\n        const tooltip = this._commandAction.tooltip || this._commandAction.label;\n        let title = keybindingLabel\n            ? localize('titleAndKb', \"{0} ({1})\", tooltip, keybindingLabel)\n            : tooltip;\n        if (!this._wantsAltCommand && ((_a = this._menuItemAction.alt) === null || _a === void 0 ? void 0 : _a.enabled)) {\n            const altTooltip = this._menuItemAction.alt.tooltip || this._menuItemAction.alt.label;\n            const altKeybinding = this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id, this._contextKeyService);\n            const altKeybindingLabel = altKeybinding && altKeybinding.getLabel();\n            const altTitleSection = altKeybindingLabel\n                ? localize('titleAndKb', \"{0} ({1})\", altTooltip, altKeybindingLabel)\n                : altTooltip;\n            title = localize('titleAndKbAndAlt', \"{0}\\n[{1}] {2}\", title, UILabelProvider.modifierLabels[OS].altKey, altTitleSection);\n        }\n        return title;\n    }\n    updateClass() {\n        if (this.options.icon) {\n            if (this._commandAction !== this._menuItemAction) {\n                if (this._menuItemAction.alt) {\n                    this._updateItemClass(this._menuItemAction.alt.item);\n                }\n            }\n            else {\n                this._updateItemClass(this._menuItemAction.item);\n            }\n        }\n    }\n    _updateItemClass(item) {\n        var _a;\n        this._itemClassDispose.value = undefined;\n        const { element, label } = this;\n        if (!element || !label) {\n            return;\n        }\n        const icon = this._commandAction.checked && ((_a = item.toggled) === null || _a === void 0 ? void 0 : _a.icon) ? item.toggled.icon : item.icon;\n        if (!icon) {\n            return;\n        }\n        if (ThemeIcon.isThemeIcon(icon)) {\n            // theme icons\n            const iconClasses = ThemeIcon.asClassNameArray(icon);\n            label.classList.add(...iconClasses);\n            this._itemClassDispose.value = toDisposable(() => {\n                label.classList.remove(...iconClasses);\n            });\n        }\n        else {\n            // icon path/url\n            label.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                ? asCSSUrl(icon.dark)\n                : asCSSUrl(icon.light));\n            label.classList.add('icon');\n            this._itemClassDispose.value = combinedDisposable(toDisposable(() => {\n                label.style.backgroundImage = '';\n                label.classList.remove('icon');\n            }), this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                this.updateClass();\n            }));\n        }\n    }\n};\nMenuEntryActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextKeyService),\n    __param(5, IThemeService),\n    __param(6, IContextMenuService)\n], MenuEntryActionViewItem);\nexport { MenuEntryActionViewItem };\nlet SubmenuEntryActionViewItem = class SubmenuEntryActionViewItem extends DropdownMenuActionViewItem {\n    constructor(action, options, _contextMenuService, _themeService) {\n        var _a, _b;\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : false,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : (ThemeIcon.isThemeIcon(action.item.icon) ? ThemeIcon.asClassName(action.item.icon) : undefined),\n        });\n        super(action, { getActions: () => action.actions }, _contextMenuService, dropdownOptions);\n        this._contextMenuService = _contextMenuService;\n        this._themeService = _themeService;\n    }\n    render(container) {\n        super.render(container);\n        assertType(this.element);\n        container.classList.add('menu-entry');\n        const action = this._action;\n        const { icon } = action.item;\n        if (icon && !ThemeIcon.isThemeIcon(icon)) {\n            this.element.classList.add('icon');\n            const setBackgroundImage = () => {\n                if (this.element) {\n                    this.element.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                        ? asCSSUrl(icon.dark)\n                        : asCSSUrl(icon.light));\n                }\n            };\n            setBackgroundImage();\n            this._register(this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                setBackgroundImage();\n            }));\n        }\n    }\n};\nSubmenuEntryActionViewItem = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IThemeService)\n], SubmenuEntryActionViewItem);\nexport { SubmenuEntryActionViewItem };\nlet DropdownWithDefaultActionViewItem = class DropdownWithDefaultActionViewItem extends BaseActionViewItem {\n    constructor(submenuAction, options, _keybindingService, _notificationService, _contextMenuService, _menuService, _instaService, _storageService) {\n        var _a, _b, _c;\n        super(null, submenuAction);\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextMenuService = _contextMenuService;\n        this._menuService = _menuService;\n        this._instaService = _instaService;\n        this._storageService = _storageService;\n        this._container = null;\n        this._options = options;\n        this._storageKey = `${submenuAction.item.submenu.id}_lastActionId`;\n        // determine default action\n        let defaultAction;\n        const defaultActionId = _storageService.get(this._storageKey, 1 /* StorageScope.WORKSPACE */);\n        if (defaultActionId) {\n            defaultAction = submenuAction.actions.find(a => defaultActionId === a.id);\n        }\n        if (!defaultAction) {\n            defaultAction = submenuAction.actions[0];\n        }\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, defaultAction, { keybinding: this._getDefaultActionKeybindingLabel(defaultAction) });\n        const dropdownOptions = Object.assign({}, options !== null && options !== void 0 ? options : Object.create(null), {\n            menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : true,\n            classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : ['codicon', 'codicon-chevron-down'],\n            actionRunner: (_c = options === null || options === void 0 ? void 0 : options.actionRunner) !== null && _c !== void 0 ? _c : new ActionRunner()\n        });\n        this._dropdown = new DropdownMenuActionViewItem(submenuAction, submenuAction.actions, this._contextMenuService, dropdownOptions);\n        this._dropdown.actionRunner.onDidRun((e) => {\n            if (e.action instanceof MenuItemAction) {\n                this.update(e.action);\n            }\n        });\n    }\n    update(lastAction) {\n        this._storageService.store(this._storageKey, lastAction.id, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        this._defaultAction.dispose();\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, lastAction, { keybinding: this._getDefaultActionKeybindingLabel(lastAction) });\n        this._defaultAction.actionRunner = new class extends ActionRunner {\n            runAction(action, context) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    yield action.run(undefined);\n                });\n            }\n        }();\n        if (this._container) {\n            this._defaultAction.render(prepend(this._container, $('.action-container')));\n        }\n    }\n    _getDefaultActionKeybindingLabel(defaultAction) {\n        var _a;\n        let defaultActionKeybinding;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.renderKeybindingWithDefaultActionLabel) {\n            const kb = this._keybindingService.lookupKeybinding(defaultAction.id);\n            if (kb) {\n                defaultActionKeybinding = `(${kb.getLabel()})`;\n            }\n        }\n        return defaultActionKeybinding;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        this._defaultAction.setActionContext(newContext);\n        this._dropdown.setActionContext(newContext);\n    }\n    render(container) {\n        this._container = container;\n        super.render(this._container);\n        this._container.classList.add('monaco-dropdown-with-default');\n        const primaryContainer = $('.action-container');\n        this._defaultAction.render(append(this._container, primaryContainer));\n        this._register(addDisposableListener(primaryContainer, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */)) {\n                this._defaultAction.element.tabIndex = -1;\n                this._dropdown.focus();\n                event.stopPropagation();\n            }\n        }));\n        const dropdownContainer = $('.dropdown-action-container');\n        this._dropdown.render(append(this._container, dropdownContainer));\n        this._register(addDisposableListener(dropdownContainer, EventType.KEY_DOWN, (e) => {\n            var _a;\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                this._defaultAction.element.tabIndex = 0;\n                this._dropdown.setFocusable(false);\n                (_a = this._defaultAction.element) === null || _a === void 0 ? void 0 : _a.focus();\n                event.stopPropagation();\n            }\n        }));\n    }\n    focus(fromRight) {\n        if (fromRight) {\n            this._dropdown.focus();\n        }\n        else {\n            this._defaultAction.element.tabIndex = 0;\n            this._defaultAction.element.focus();\n        }\n    }\n    blur() {\n        this._defaultAction.element.tabIndex = -1;\n        this._dropdown.blur();\n        this._container.blur();\n    }\n    setFocusable(focusable) {\n        if (focusable) {\n            this._defaultAction.element.tabIndex = 0;\n        }\n        else {\n            this._defaultAction.element.tabIndex = -1;\n            this._dropdown.setFocusable(false);\n        }\n    }\n    dispose() {\n        this._defaultAction.dispose();\n        this._dropdown.dispose();\n        super.dispose();\n    }\n};\nDropdownWithDefaultActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextMenuService),\n    __param(5, IMenuService),\n    __param(6, IInstantiationService),\n    __param(7, IStorageService)\n], DropdownWithDefaultActionViewItem);\nexport { DropdownWithDefaultActionViewItem };\n/**\n * Creates action view items for menu actions or submenu actions.\n */\nexport function createActionViewItem(instaService, action, options) {\n    if (action instanceof MenuItemAction) {\n        return instaService.createInstance(MenuEntryActionViewItem, action, options);\n    }\n    else if (action instanceof SubmenuItemAction) {\n        if (action.item.rememberDefaultAction) {\n            return instaService.createInstance(DropdownWithDefaultActionViewItem, action, options);\n        }\n        else {\n            return instaService.createInstance(SubmenuEntryActionViewItem, action, options);\n        }\n    }\n    else {\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n    constructor() {\n        this._widgets = new Map();\n    }\n    addExclusiveWidget(editor, widget) {\n        const existing = this._widgets.get(editor);\n        if (existing) {\n            existing.listener.dispose();\n            existing.widget.dispose();\n        }\n        const remove = () => {\n            const data = this._widgets.get(editor);\n            if (data && data.widget === widget) {\n                data.listener.dispose();\n                this._widgets.delete(editor);\n            }\n        };\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\n    }\n});\nexport var PeekContext;\n(function (PeekContext) {\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n    constructor(editor, contextKeyService) {\n        if (editor instanceof EmbeddedCodeEditorWidget) {\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\n        }\n    }\n    dispose() { }\n};\nPeekContextController.ID = 'editor.contrib.referenceController';\nPeekContextController = __decorate([\n    __param(1, IContextKeyService)\n], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\nexport function getOuterEditor(accessor) {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n        return editor.getParentEditor();\n    }\n    return editor;\n}\nconst defaultOptions = {\n    headerBackgroundColor: Color.white,\n    primaryHeadingColor: Color.fromHex('#333333'),\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n    constructor(editor, options, instantiationService) {\n        super(editor, options);\n        this.instantiationService = instantiationService;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        objects.mixin(this.options, defaultOptions, false);\n    }\n    dispose() {\n        if (!this.disposed) {\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n            super.dispose();\n            this._onDidClose.fire(this);\n        }\n    }\n    style(styles) {\n        const options = this.options;\n        if (styles.headerBackgroundColor) {\n            options.headerBackgroundColor = styles.headerBackgroundColor;\n        }\n        if (styles.primaryHeadingColor) {\n            options.primaryHeadingColor = styles.primaryHeadingColor;\n        }\n        if (styles.secondaryHeadingColor) {\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\n        }\n        super.style(styles);\n    }\n    _applyStyles() {\n        super._applyStyles();\n        const options = this.options;\n        if (this._headElement && options.headerBackgroundColor) {\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n        }\n        if (this._primaryHeading && options.primaryHeadingColor) {\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n        }\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n        }\n        if (this._bodyElement && options.frameColor) {\n            this._bodyElement.style.borderColor = options.frameColor.toString();\n        }\n    }\n    _fillContainer(container) {\n        this.setCssClass('peekview-widget');\n        this._headElement = dom.$('.head');\n        this._bodyElement = dom.$('.body');\n        this._fillHead(this._headElement);\n        this._fillBody(this._bodyElement);\n        container.appendChild(this._headElement);\n        container.appendChild(this._bodyElement);\n    }\n    _fillHead(container, noCloseAction) {\n        const titleElement = dom.$('.peekview-title');\n        if (this.options.supportOnTitleClick) {\n            titleElement.classList.add('clickable');\n            dom.addStandardDisposableListener(titleElement, 'click', event => this._onTitleClick(event));\n        }\n        dom.append(this._headElement, titleElement);\n        this._fillTitleIcon(titleElement);\n        this._primaryHeading = dom.$('span.filename');\n        this._secondaryHeading = dom.$('span.dirname');\n        this._metaHeading = dom.$('span.meta');\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n        const actionsContainer = dom.$('.peekview-actions');\n        dom.append(this._headElement, actionsContainer);\n        const actionBarOptions = this._getActionBarOptions();\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n        this._disposables.add(this._actionbarWidget);\n        if (!noCloseAction) {\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), Codicon.close.classNames, true, () => {\n                this.dispose();\n                return Promise.resolve();\n            }), { label: false, icon: true });\n        }\n    }\n    _fillTitleIcon(container) {\n    }\n    _getActionBarOptions() {\n        return {\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\n        };\n    }\n    _onTitleClick(event) {\n        // implement me if supportOnTitleClick option is set\n    }\n    setTitle(primaryHeading, secondaryHeading) {\n        if (this._primaryHeading && this._secondaryHeading) {\n            this._primaryHeading.innerText = primaryHeading;\n            this._primaryHeading.setAttribute('title', primaryHeading);\n            if (secondaryHeading) {\n                this._secondaryHeading.innerText = secondaryHeading;\n            }\n            else {\n                dom.clearNode(this._secondaryHeading);\n            }\n        }\n    }\n    setMetaTitle(value) {\n        if (this._metaHeading) {\n            if (value) {\n                this._metaHeading.innerText = value;\n                dom.show(this._metaHeading);\n            }\n            else {\n                dom.hide(this._metaHeading);\n            }\n        }\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        if (!this._isShowing && heightInPixel < 0) {\n            // Looks like the view zone got folded away!\n            this.dispose();\n            return;\n        }\n        const headHeight = Math.ceil(this.editor.getOption(61 /* EditorOption.lineHeight */) * 1.2);\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n        this._doLayoutHead(headHeight, widthInPixel);\n        this._doLayoutBody(bodyHeight, widthInPixel);\n    }\n    _doLayoutHead(heightInPixel, widthInPixel) {\n        if (this._headElement) {\n            this._headElement.style.height = `${heightInPixel}px`;\n            this._headElement.style.lineHeight = this._headElement.style.height;\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        if (this._bodyElement) {\n            this._bodyElement.style.height = `${heightInPixel}px`;\n        }\n    }\n};\nPeekViewWidget = __decorate([\n    __param(2, IInstantiationService)\n], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: transparent(editorInfoForeground, .1), light: transparent(editorInfoForeground, .1), hcDark: null, hcLight: null }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"symbol in {0} on line {1} at column {2}, {3}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn, preview.value);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { attachBadgeStyler } from '../../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService, themeService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\n        this._register(attachBadgeStyler(this.badge, themeService));\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService),\n    __param(2, IThemeService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: false\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = class ReferencesController {\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(ReferencesController.ID);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(79 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref) {\n        if (this._widget) {\n            this._widget.hide();\n        }\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */ }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, true);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    const provider = registry.ordered(model);\n    // get results\n    const promises = provider.map((provider) => {\n        return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n            onUnexpectedExternalError(err);\n            return undefined;\n        });\n    });\n    return Promise.all(promises).then(values => {\n        const result = [];\n        for (const value of values) {\n            if (Array.isArray(value)) {\n                result.push(...value);\n            }\n            else if (value) {\n                result.push(value);\n            }\n        }\n        return result;\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { isStandalone } from '../../../../base/browser/browser.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nconst _goToActionIds = new Set();\nfunction registerGoToAction(ctor) {\n    const result = new ctor();\n    registerInstantiatedEditorAction(result);\n    _goToActionIds.add(result.id);\n    return result;\n}\nexport class SymbolNavigationAnchor {\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n}\nexport class SymbolNavigationAction extends EditorAction {\n    constructor(configuration, opts) {\n        super(opts);\n        this.configuration = configuration;\n    }\n    run(accessor, editor, arg) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && _goToActionIds.has(altActionId)) {\n                    altAction = editor.getAction(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_a = MessageController.get(editor)) === null || _a === void 0 ? void 0 : _a.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.id);\n                altAction.run().finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.id);\n                });\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._activeAlternativeCommands = new Set();\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nconst goToDefinitionKb = isWeb && !isStandalone()\n    ? 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */\n    : 70 /* KeyCode.F12 */;\nregisterGoToAction((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDefinitionAction.id,\n                label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                alias: 'Go to Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: goToDefinitionKb,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.1\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterGoToAction((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: OpenDefinitionToSideAction.id,\n                label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                alias: 'Open Definition to the Side',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, goToDefinitionKb),\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterGoToAction((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekDefinitionAction.id,\n                label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                alias: 'Peek Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterGoToAction((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToDeclarationAction.id,\n                label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                alias: 'Go to Declaration',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.3\n                },\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterGoToAction(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n            alias: 'Peek Declaration',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterGoToAction((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToTypeDefinitionAction.ID,\n                label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                alias: 'Go to Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.4\n                }\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterGoToAction((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekTypeDefinitionAction.ID,\n                label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                alias: 'Peek Type Definition',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterGoToAction((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: GoToImplementationAction.ID,\n                label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                alias: 'Go to Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    group: 'navigation',\n                    order: 1.45\n                }\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterGoToAction((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: PeekImplementationAction.ID,\n                label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                alias: 'Peek Implementations',\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                kbOpts: {\n                    kbExpr: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                contextMenuOpts: {\n                    menuId: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(53 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterGoToAction(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            label: nls.localize('goToReferences.label', \"Go to References\"),\n            alias: 'Go to References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 1.45\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterGoToAction(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            label: nls.localize('references.action.label', \"Peek References\"),\n            alias: 'Peek References',\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            contextMenuOpts: {\n                menuId: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            label: nls.localize('label.generic', \"Go to Any Symbol\"),\n            alias: 'Go to Any Symbol',\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _a;\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(53 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n// -- unconditionally register goto-action\nMenuRegistry.appendMenuItems([\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDefinition',\n                title: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 2,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.revealDeclaration',\n                title: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToTypeDefinition',\n                title: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n            },\n            group: '4_symbol_nav',\n            order: 3,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToImplementation',\n                title: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n            },\n            group: '4_symbol_nav',\n            order: 4,\n        },\n    },\n    {\n        id: MenuId.MenubarGoMenu,\n        item: {\n            command: {\n                id: 'editor.action.goToReferences',\n                title: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            group: '4_symbol_nav',\n            order: 5,\n        },\n    },\n]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../../base/common/types.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { editorActiveLinkForeground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../../platform/theme/common/themeService.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nlet GotoDefinitionAtPositionEditorContribution = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).then(() => {\n                    this.removeLinkDecorations();\n                }, (error) => {\n                    this.removeLinkDecorations();\n                    onUnexpectedError(error);\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        return this.startFindDefinition(position).then(() => {\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        this.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n        if (!word) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return Promise.resolve(0);\n        }\n        // Return early if word at position is still the same\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n            return Promise.resolve(0);\n        }\n        this.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n        if (this.previousPromise) {\n            this.previousPromise.cancel();\n            this.previousPromise = null;\n        }\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n        return this.previousPromise.then(results => {\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            // Multiple results\n            if (results.length > 1) {\n                this.addDecoration(new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn), new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            // Single result\n            else {\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    let wordRange;\n                    if (result.originSelectionRange) {\n                        wordRange = Range.lift(result.originSelectionRange);\n                    }\n                    else {\n                        wordRange = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                    }\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(wordRange, new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue));\n                    ref.dispose();\n                });\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        return this.editor.hasModel() &&\n            mouseEvent.isNoneOrSingleMouseDown &&\n            (mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */) &&\n            (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) &&\n            this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(80 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, this.editor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .goto-definition-link { color: ${activeLinkForeground} !important; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './hover.css';\nconst $ = dom.$;\nexport class HoverWidget extends Disposable {\n    constructor() {\n        super();\n        this.containerDomNode = document.createElement('div');\n        this.containerDomNode.className = 'monaco-hover';\n        this.containerDomNode.tabIndex = 0;\n        this.containerDomNode.setAttribute('role', 'tooltip');\n        this.contentsDomNode = document.createElement('div');\n        this.contentsDomNode.className = 'monaco-hover-content';\n        this.scrollbar = this._register(new DomScrollableElement(this.contentsDomNode, {\n            consumeMouseWheelIfScrollbarIsNeeded: true\n        }));\n        this.containerDomNode.appendChild(this.scrollbar.getDomNode());\n    }\n    onContentsChanged() {\n        this.scrollbar.scanDomNode();\n    }\n}\nexport class HoverAction extends Disposable {\n    constructor(parent, actionOptions, keybindingLabel) {\n        super();\n        this.actionContainer = dom.append(parent, $('div.action-container'));\n        this.actionContainer.setAttribute('tabindex', '0');\n        this.action = dom.append(this.actionContainer, $('a.action'));\n        this.action.setAttribute('role', 'button');\n        if (actionOptions.iconClass) {\n            dom.append(this.action, $(`span.icon.${actionOptions.iconClass}`));\n        }\n        const label = dom.append(this.action, $('span'));\n        label.textContent = keybindingLabel ? `${actionOptions.label} (${keybindingLabel})` : actionOptions.label;\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.CLICK, e => {\n            e.stopPropagation();\n            e.preventDefault();\n            actionOptions.run(this.actionContainer);\n        }));\n        this._register(dom.addDisposableListener(this.actionContainer, dom.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(3 /* KeyCode.Enter */)) {\n                e.stopPropagation();\n                e.preventDefault();\n                actionOptions.run(this.actionContainer);\n            }\n        }));\n        this.setEnabled(true);\n    }\n    static render(parent, actionOptions, keybindingLabel) {\n        return new HoverAction(parent, actionOptions, keybindingLabel);\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.actionContainer.classList.remove('disabled');\n            this.actionContainer.removeAttribute('aria-disabled');\n        }\n        else {\n            this.actionContainer.classList.add('disabled');\n            this.actionContainer.setAttribute('aria-disabled', 'true');\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { createCancelableAsyncIterable, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class HoverResult {\n    constructor(value, isComplete, hasLoadingMessage) {\n        this.value = value;\n        this.isComplete = isComplete;\n        this.hasLoadingMessage = hasLoadingMessage;\n    }\n}\n/**\n * Computing the hover is very fine tuned.\n *\n * Suppose the hover delay is 300ms (the default). Then, when resting the mouse at an anchor:\n * - at 150ms, the async computation is triggered (i.e. semantic hover)\n *   - if async results already come in, they are not rendered yet.\n * - at 300ms, the sync computation is triggered (i.e. decorations, markers)\n *   - if there are sync or async results, they are rendered.\n * - at 900ms, if the async computation hasn't finished, a \"Loading...\" result is added.\n */\nexport class HoverOperation extends Disposable {\n    constructor(_editor, _computer) {\n        super();\n        this._editor = _editor;\n        this._computer = _computer;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._firstWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerAsyncComputation(), 0));\n        this._secondWaitScheduler = this._register(new RunOnceScheduler(() => this._triggerSyncComputation(), 0));\n        this._loadingMessageScheduler = this._register(new RunOnceScheduler(() => this._triggerLoadingMessage(), 0));\n        this._state = 0 /* HoverOperationState.Idle */;\n        this._asyncIterable = null;\n        this._asyncIterableDone = false;\n        this._result = [];\n    }\n    dispose() {\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        super.dispose();\n    }\n    get _hoverTime() {\n        return this._editor.getOption(55 /* EditorOption.hover */).delay;\n    }\n    get _firstWaitTime() {\n        return this._hoverTime / 2;\n    }\n    get _secondWaitTime() {\n        return this._hoverTime - this._firstWaitTime;\n    }\n    get _loadingMessageTime() {\n        return 3 * this._hoverTime;\n    }\n    _setState(state, fireResult = true) {\n        this._state = state;\n        if (fireResult) {\n            this._fireResult();\n        }\n    }\n    _triggerAsyncComputation() {\n        this._setState(2 /* HoverOperationState.SecondWait */);\n        this._secondWaitScheduler.schedule(this._secondWaitTime);\n        if (this._computer.computeAsync) {\n            this._asyncIterableDone = false;\n            this._asyncIterable = createCancelableAsyncIterable(token => this._computer.computeAsync(token));\n            (() => __awaiter(this, void 0, void 0, function* () {\n                var e_1, _a;\n                try {\n                    try {\n                        for (var _b = __asyncValues(this._asyncIterable), _c; _c = yield _b.next(), !_c.done;) {\n                            const item = _c.value;\n                            if (item) {\n                                this._result.push(item);\n                                this._fireResult();\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_c && !_c.done && (_a = _b.return)) yield _a.call(_b);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    this._asyncIterableDone = true;\n                    if (this._state === 3 /* HoverOperationState.WaitingForAsync */ || this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */) {\n                        this._setState(0 /* HoverOperationState.Idle */);\n                    }\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                }\n            }))();\n        }\n        else {\n            this._asyncIterableDone = true;\n        }\n    }\n    _triggerSyncComputation() {\n        if (this._computer.computeSync) {\n            this._result = this._result.concat(this._computer.computeSync());\n        }\n        this._setState(this._asyncIterableDone ? 0 /* HoverOperationState.Idle */ : 3 /* HoverOperationState.WaitingForAsync */);\n    }\n    _triggerLoadingMessage() {\n        if (this._state === 3 /* HoverOperationState.WaitingForAsync */) {\n            this._setState(4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        }\n    }\n    _fireResult() {\n        if (this._state === 1 /* HoverOperationState.FirstWait */ || this._state === 2 /* HoverOperationState.SecondWait */) {\n            // Do not send out results before the hover time\n            return;\n        }\n        const isComplete = (this._state === 0 /* HoverOperationState.Idle */);\n        const hasLoadingMessage = (this._state === 4 /* HoverOperationState.WaitingForAsyncShowingLoading */);\n        this._onResult.fire(new HoverResult(this._result.slice(0), isComplete, hasLoadingMessage));\n    }\n    start(mode) {\n        if (mode === 0 /* HoverStartMode.Delayed */) {\n            if (this._state === 0 /* HoverOperationState.Idle */) {\n                this._setState(1 /* HoverOperationState.FirstWait */);\n                this._firstWaitScheduler.schedule(this._firstWaitTime);\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime);\n            }\n        }\n        else {\n            switch (this._state) {\n                case 0 /* HoverOperationState.Idle */:\n                    this._triggerAsyncComputation();\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n                case 2 /* HoverOperationState.SecondWait */:\n                    this._secondWaitScheduler.cancel();\n                    this._triggerSyncComputation();\n                    break;\n            }\n        }\n    }\n    cancel() {\n        this._firstWaitScheduler.cancel();\n        this._secondWaitScheduler.cancel();\n        this._loadingMessageScheduler.cancel();\n        if (this._asyncIterable) {\n            this._asyncIterable.cancel();\n            this._asyncIterable = null;\n        }\n        this._result = [];\n        this._setState(0 /* HoverOperationState.Idle */, false);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class HoverRangeAnchor {\n    constructor(priority, range) {\n        this.priority = priority;\n        this.range = range;\n        this.type = 1 /* HoverAnchorType.Range */;\n    }\n    equals(other) {\n        return (other.type === 1 /* HoverAnchorType.Range */ && this.range.equalsRange(other.range));\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 1 /* HoverAnchorType.Range */ && showAtPosition.lineNumber === this.range.startLineNumber);\n    }\n}\nexport class HoverForeignElementAnchor {\n    constructor(priority, owner, range) {\n        this.priority = priority;\n        this.owner = owner;\n        this.range = range;\n        this.type = 2 /* HoverAnchorType.ForeignElement */;\n    }\n    equals(other) {\n        return (other.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === other.owner);\n    }\n    canAdoptVisibleHover(lastAnchor, showAtPosition) {\n        return (lastAnchor.type === 2 /* HoverAnchorType.ForeignElement */ && this.owner === lastAnchor.owner);\n    }\n}\nexport const HoverParticipantRegistry = (new class HoverParticipantRegistry {\n    constructor() {\n        this._participants = [];\n    }\n    register(ctor) {\n        this._participants.push(ctor);\n    }\n    getAll() {\n        return this._participants;\n    }\n}());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* CharCode.Underline */\n            || (ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */)\n            || (ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* TokenType.EOF */, pos: this.pos, len: 0 };\n        }\n        const pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* TokenType.Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* TokenType.VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* TokenType.Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\n    [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\n    [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\n    [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\n    [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\n    [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\n    [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\n    [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\n    [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\n    [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\n    [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        const ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        const ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        const ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.charAt(0).toLowerCase() + word.substr(1);\n            }\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    clone() {\n        const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            const all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        const ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        const ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* TokenType.EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        const snippet = new TextmateSnippet();\n        this.parseFragment(value, snippet);\n        this.ensureFinalTabstop(snippet, enforceFinalTabstop !== null && enforceFinalTabstop !== void 0 ? enforceFinalTabstop : false, insertFinalTabstop !== null && insertFinalTabstop !== void 0 ? insertFinalTabstop : false);\n        return snippet;\n    }\n    parseFragment(value, snippet) {\n        const offset = snippet.children.length;\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        for (const placeholder of incompletePlaceholders) {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (defaultValues) {\n                const clone = new Placeholder(placeholder.index);\n                clone.transform = placeholder.transform;\n                for (const child of defaultValues) {\n                    clone.appendChild(child.clone());\n                }\n                snippet.replace(placeholder, [clone]);\n            }\n        }\n        return snippet.children.slice(offset);\n    }\n    ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\n        if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\n            const finalTabstop = snippet.placeholders.find(p => p.index === 0);\n            if (!finalTabstop) {\n                // the snippet uses placeholders but has no\n                // final tabstop defined -> insert at the end\n                snippet.appendChild(new Placeholder(0));\n            }\n        }\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            const ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* TokenType.EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* TokenType.Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* TokenType.Dollar */\n                    && nextToken.type !== 4 /* TokenType.CurlyClose */\n                    && nextToken.type !== 5 /* TokenType.Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* TokenType.Dollar */, true)\n                || this._accept(4 /* TokenType.CurlyClose */, true)\n                || this._accept(5 /* TokenType.Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (index = this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* TokenType.Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* TokenType.Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* TokenType.CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* TokenType.Comma */, true)\n                    || this._accept(7 /* TokenType.Pipe */, true)\n                    || this._accept(5 /* TokenType.Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (name = this._accept(9 /* TokenType.VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        const transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* TokenType.Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* TokenType.CurlyOpen */)) {\n            complex = true;\n        }\n        const index = this._accept(8 /* TokenType.Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* TokenType.Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1:/upcase}\n            const shorthand = this._accept(9 /* TokenType.VariableName */, true);\n            if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* TokenType.Plus */)) {\n            // ${1:+<if>}\n            const ifValue = this._until(4 /* TokenType.CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* TokenType.Dash */)) {\n            // ${2:-<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* TokenType.QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            const ifValue = this._until(1 /* TokenType.Colon */);\n            if (ifValue) {\n                const elseValue = this._until(4 /* TokenType.CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* TokenType.EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { Toggle } from '../toggle/toggle.js';\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\nimport { Widget } from '../widget.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport './findInput.css';\nimport * as nls from '../../../../nls.js';\nconst NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\nconst NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseToggle', \"Preserve Case\");\nexport class PreserveCaseToggle extends Toggle {\n    constructor(opts) {\n        super({\n            // TODO: does this need its own icon?\n            icon: Codicon.preserveCase,\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\n            isChecked: opts.isChecked,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class ReplaceInput extends Widget {\n    constructor(parent, contextViewProvider, _showOptionButtons, options) {\n        super();\n        this._showOptionButtons = _showOptionButtons;\n        this.fixFocusOnOptionClickEnabled = true;\n        this.cachedOptionsWidth = 0;\n        this._onDidOptionChange = this._register(new Emitter());\n        this.onDidOptionChange = this._onDidOptionChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onMouseDown = this._register(new Emitter());\n        this._onInput = this._register(new Emitter());\n        this._onKeyUp = this._register(new Emitter());\n        this._onPreserveCaseKeyDown = this._register(new Emitter());\n        this.onPreserveCaseKeyDown = this._onPreserveCaseKeyDown.event;\n        this.contextViewProvider = contextViewProvider;\n        this.placeholder = options.placeholder || '';\n        this.validation = options.validation;\n        this.label = options.label || NLS_DEFAULT_LABEL;\n        this.inputActiveOptionBorder = options.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = options.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = options.inputActiveOptionBackground;\n        this.inputBackground = options.inputBackground;\n        this.inputForeground = options.inputForeground;\n        this.inputBorder = options.inputBorder;\n        this.inputValidationInfoBorder = options.inputValidationInfoBorder;\n        this.inputValidationInfoBackground = options.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = options.inputValidationInfoForeground;\n        this.inputValidationWarningBorder = options.inputValidationWarningBorder;\n        this.inputValidationWarningBackground = options.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = options.inputValidationWarningForeground;\n        this.inputValidationErrorBorder = options.inputValidationErrorBorder;\n        this.inputValidationErrorBackground = options.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = options.inputValidationErrorForeground;\n        const appendPreserveCaseLabel = options.appendPreserveCaseLabel || '';\n        const history = options.history || [];\n        const flexibleHeight = !!options.flexibleHeight;\n        const flexibleWidth = !!options.flexibleWidth;\n        const flexibleMaxHeight = options.flexibleMaxHeight;\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('monaco-findInput');\n        this.inputBox = this._register(new HistoryInputBox(this.domNode, this.contextViewProvider, {\n            ariaLabel: this.label || '',\n            placeholder: this.placeholder || '',\n            validationOptions: {\n                validation: this.validation\n            },\n            inputBackground: this.inputBackground,\n            inputForeground: this.inputForeground,\n            inputBorder: this.inputBorder,\n            inputValidationInfoBackground: this.inputValidationInfoBackground,\n            inputValidationInfoForeground: this.inputValidationInfoForeground,\n            inputValidationInfoBorder: this.inputValidationInfoBorder,\n            inputValidationWarningBackground: this.inputValidationWarningBackground,\n            inputValidationWarningForeground: this.inputValidationWarningForeground,\n            inputValidationWarningBorder: this.inputValidationWarningBorder,\n            inputValidationErrorBackground: this.inputValidationErrorBackground,\n            inputValidationErrorForeground: this.inputValidationErrorForeground,\n            inputValidationErrorBorder: this.inputValidationErrorBorder,\n            history,\n            showHistoryHint: options.showHistoryHint,\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight\n        }));\n        this.preserveCase = this._register(new PreserveCaseToggle({\n            appendTitle: appendPreserveCaseLabel,\n            isChecked: false,\n            inputActiveOptionBorder: this.inputActiveOptionBorder,\n            inputActiveOptionForeground: this.inputActiveOptionForeground,\n            inputActiveOptionBackground: this.inputActiveOptionBackground,\n        }));\n        this._register(this.preserveCase.onChange(viaKeyboard => {\n            this._onDidOptionChange.fire(viaKeyboard);\n            if (!viaKeyboard && this.fixFocusOnOptionClickEnabled) {\n                this.inputBox.focus();\n            }\n            this.validate();\n        }));\n        this._register(this.preserveCase.onKeyDown(e => {\n            this._onPreserveCaseKeyDown.fire(e);\n        }));\n        if (this._showOptionButtons) {\n            this.cachedOptionsWidth = this.preserveCase.width();\n        }\n        else {\n            this.cachedOptionsWidth = 0;\n        }\n        // Arrow-Key support to navigate between options\n        const indexes = [this.preserveCase.domNode];\n        this.onkeydown(this.domNode, (event) => {\n            if (event.equals(15 /* KeyCode.LeftArrow */) || event.equals(17 /* KeyCode.RightArrow */) || event.equals(9 /* KeyCode.Escape */)) {\n                const index = indexes.indexOf(document.activeElement);\n                if (index >= 0) {\n                    let newIndex = -1;\n                    if (event.equals(17 /* KeyCode.RightArrow */)) {\n                        newIndex = (index + 1) % indexes.length;\n                    }\n                    else if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                        if (index === 0) {\n                            newIndex = indexes.length - 1;\n                        }\n                        else {\n                            newIndex = index - 1;\n                        }\n                    }\n                    if (event.equals(9 /* KeyCode.Escape */)) {\n                        indexes[index].blur();\n                        this.inputBox.focus();\n                    }\n                    else if (newIndex >= 0) {\n                        indexes[newIndex].focus();\n                    }\n                    dom.EventHelper.stop(event, true);\n                }\n            }\n        });\n        const controls = document.createElement('div');\n        controls.className = 'controls';\n        controls.style.display = this._showOptionButtons ? 'block' : 'none';\n        controls.appendChild(this.preserveCase.domNode);\n        this.domNode.appendChild(controls);\n        parent === null || parent === void 0 ? void 0 : parent.appendChild(this.domNode);\n        this.onkeydown(this.inputBox.inputElement, (e) => this._onKeyDown.fire(e));\n        this.onkeyup(this.inputBox.inputElement, (e) => this._onKeyUp.fire(e));\n        this.oninput(this.inputBox.inputElement, (e) => this._onInput.fire());\n        this.onmousedown(this.inputBox.inputElement, (e) => this._onMouseDown.fire(e));\n    }\n    enable() {\n        this.domNode.classList.remove('disabled');\n        this.inputBox.enable();\n        this.preserveCase.enable();\n    }\n    disable() {\n        this.domNode.classList.add('disabled');\n        this.inputBox.disable();\n        this.preserveCase.disable();\n    }\n    setEnabled(enabled) {\n        if (enabled) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n    }\n    style(styles) {\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\n        this.inputActiveOptionForeground = styles.inputActiveOptionForeground;\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\n        this.inputBackground = styles.inputBackground;\n        this.inputForeground = styles.inputForeground;\n        this.inputBorder = styles.inputBorder;\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this.domNode) {\n            const toggleStyles = {\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\n                inputActiveOptionForeground: this.inputActiveOptionForeground,\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\n            };\n            this.preserveCase.style(toggleStyles);\n            const inputBoxStyles = {\n                inputBackground: this.inputBackground,\n                inputForeground: this.inputForeground,\n                inputBorder: this.inputBorder,\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\n                inputValidationErrorBorder: this.inputValidationErrorBorder\n            };\n            this.inputBox.style(inputBoxStyles);\n        }\n    }\n    select() {\n        this.inputBox.select();\n    }\n    focus() {\n        this.inputBox.focus();\n    }\n    getPreserveCase() {\n        return this.preserveCase.checked;\n    }\n    setPreserveCase(value) {\n        this.preserveCase.checked = value;\n    }\n    focusOnPreserve() {\n        this.preserveCase.focus();\n    }\n    validate() {\n        if (this.inputBox) {\n            this.inputBox.validate();\n        }\n    }\n    set width(newWidth) {\n        this.inputBox.paddingRight = this.cachedOptionsWidth;\n        this.inputBox.width = newWidth;\n        this.domNode.style.width = newWidth + 'px';\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { FindInput } from '../../../base/browser/ui/findinput/findInput.js';\nimport { ReplaceInput } from '../../../base/browser/ui/findinput/replaceInput.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\nimport { localize } from '../../../nls.js';\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nexport const historyNavigationVisible = new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\"));\nconst HistoryNavigationWidgetFocusContext = 'historyNavigationWidgetFocus';\nconst HistoryNavigationForwardsEnablementContext = 'historyNavigationForwardsEnabled';\nconst HistoryNavigationBackwardsEnablementContext = 'historyNavigationBackwardsEnabled';\nlet lastFocusedWidget = undefined;\nconst widgets = [];\nexport function registerAndCreateHistoryNavigationContext(contextKeyService, widget) {\n    if (widgets.includes(widget)) {\n        throw new Error('Cannot register the same widget multiple times');\n    }\n    widgets.push(widget);\n    const disposableStore = new DisposableStore();\n    const scopedContextKeyService = disposableStore.add(contextKeyService.createScoped(widget.element));\n    const historyNavigationWidgetFocus = new RawContextKey(HistoryNavigationWidgetFocusContext, false).bindTo(scopedContextKeyService);\n    const historyNavigationForwardsEnablement = new RawContextKey(HistoryNavigationForwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const historyNavigationBackwardsEnablement = new RawContextKey(HistoryNavigationBackwardsEnablementContext, true).bindTo(scopedContextKeyService);\n    const onDidFocus = () => {\n        historyNavigationWidgetFocus.set(true);\n        lastFocusedWidget = widget;\n    };\n    const onDidBlur = () => {\n        historyNavigationWidgetFocus.set(false);\n        if (lastFocusedWidget === widget) {\n            lastFocusedWidget = undefined;\n        }\n    };\n    // Check for currently being focused\n    if (widget.element === document.activeElement) {\n        onDidFocus();\n    }\n    disposableStore.add(widget.onDidFocus(() => onDidFocus()));\n    disposableStore.add(widget.onDidBlur(() => onDidBlur()));\n    disposableStore.add(toDisposable(() => {\n        widgets.splice(widgets.indexOf(widget), 1);\n        onDidBlur();\n    }));\n    return {\n        scopedContextKeyService,\n        historyNavigationForwardsEnablement,\n        historyNavigationBackwardsEnablement,\n        dispose() {\n            disposableStore.dispose();\n        }\n    };\n}\nlet ContextScopedFindInput = class ContextScopedFindInput extends FindInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showFindOptions = false) {\n        super(container, contextViewProvider, showFindOptions, options);\n        this._register(registerAndCreateHistoryNavigationContext(contextKeyService, this.inputBox));\n    }\n};\nContextScopedFindInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedFindInput);\nexport { ContextScopedFindInput };\nlet ContextScopedReplaceInput = class ContextScopedReplaceInput extends ReplaceInput {\n    constructor(container, contextViewProvider, options, contextKeyService, showReplaceOptions = false) {\n        super(container, contextViewProvider, showReplaceOptions, options);\n        this._register(registerAndCreateHistoryNavigationContext(contextKeyService, this.inputBox));\n    }\n};\nContextScopedReplaceInput = __decorate([\n    __param(3, IContextKeyService)\n], ContextScopedReplaceInput);\nexport { ContextScopedReplaceInput };\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showPrevious',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationBackwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 16 /* KeyCode.UpArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n    handler: (accessor) => {\n        if (lastFocusedWidget) {\n            lastFocusedWidget.showPreviousValue();\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'history.showNext',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetFocusContext), ContextKeyExpr.equals(HistoryNavigationForwardsEnablementContext, true), historyNavigationVisible.isEqualTo(false)),\n    primary: 18 /* KeyCode.DownArrow */,\n    secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n    handler: (accessor) => {\n        if (lastFocusedWidget) {\n            lastFocusedWidget.showNextValue();\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { HoverAction, HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { HoverParticipantRegistry, HoverRangeAnchor } from './hoverTypes.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Context as SuggestContext } from '../../suggest/browser/suggest.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nconst $ = dom.$;\nlet ContentHoverController = class ContentHoverController extends Disposable {\n    constructor(_editor, _instantiationService, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._widget = this._register(this._instantiationService.createInstance(ContentHoverWidget, this._editor));\n        this._isChangingDecorations = false;\n        this._messages = [];\n        this._messagesAreComplete = false;\n        // Instantiate participants and sort them by `hoverOrdinal` which is relevant for rendering order.\n        this._participants = [];\n        for (const participant of HoverParticipantRegistry.getAll()) {\n            this._participants.push(this._instantiationService.createInstance(participant, this._editor));\n        }\n        this._participants.sort((p1, p2) => p1.hoverOrdinal - p2.hoverOrdinal);\n        this._computer = new ContentHoverComputer(this._editor, this._participants);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value, result.isComplete, result.hasLoadingMessage);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            this._onModelDecorationsChanged();\n        }));\n        this._register(dom.addStandardDisposableListener(this._widget.getDomNode(), 'keydown', (e) => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.hide();\n            }\n        }));\n        this._register(TokenizationRegistry.onDidChange(() => {\n            if (this._widget.position && this._computer.anchor && this._messages.length > 0) {\n                this._widget.clear();\n                this._renderMessages(this._computer.anchor, this._messages);\n            }\n        }));\n    }\n    _onModelDecorationsChanged() {\n        if (this._widget.position) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            if (!this._widget.isColorPickerVisible) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\n                this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n            }\n        }\n    }\n    maybeShowAt(mouseEvent) {\n        const anchorCandidates = [];\n        for (const participant of this._participants) {\n            if (participant.suggestHoverAnchor) {\n                const anchor = participant.suggestHoverAnchor(mouseEvent);\n                if (anchor) {\n                    anchorCandidates.push(anchor);\n                }\n            }\n        }\n        const target = mouseEvent.target;\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            const epsilon = this._editor.getOption(46 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth / 2;\n            if (!target.detail.isAfterLines && typeof target.detail.horizontalDistanceToText === 'number' && target.detail.horizontalDistanceToText < epsilon) {\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\n                anchorCandidates.push(new HoverRangeAnchor(0, target.range));\n            }\n        }\n        if (anchorCandidates.length === 0) {\n            return false;\n        }\n        anchorCandidates.sort((a, b) => b.priority - a.priority);\n        this._startShowingAt(anchorCandidates[0], 0 /* HoverStartMode.Delayed */, false);\n        return true;\n    }\n    startShowingAtRange(range, mode, focus) {\n        this._startShowingAt(new HoverRangeAnchor(0, range), mode, focus);\n    }\n    _startShowingAt(anchor, mode, focus) {\n        if (this._computer.anchor && this._computer.anchor.equals(anchor)) {\n            // We have to show the widget at the exact same range as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        if (this._widget.position) {\n            // The range might have changed, but the hover is visible\n            // Instead of hiding it completely, filter out messages that are still in the new range and\n            // kick off a new computation\n            if (!this._computer.anchor || !anchor.canAdoptVisibleHover(this._computer.anchor, this._widget.position)) {\n                this.hide();\n            }\n            else {\n                const filteredMessages = this._messages.filter((m) => m.isValidForHoverAnchor(anchor));\n                if (filteredMessages.length === 0) {\n                    this.hide();\n                }\n                else if (filteredMessages.length === this._messages.length && this._messagesAreComplete) {\n                    // no change\n                    return;\n                }\n                else {\n                    this._renderMessages(anchor, filteredMessages);\n                }\n            }\n        }\n        this._computer.anchor = anchor;\n        this._computer.shouldFocus = focus;\n        this._hoverOperation.start(mode);\n    }\n    hide() {\n        this._computer.anchor = null;\n        this._hoverOperation.cancel();\n        this._widget.hide();\n    }\n    isColorPickerVisible() {\n        return this._widget.isColorPickerVisible;\n    }\n    containsNode(node) {\n        return this._widget.getDomNode().contains(node);\n    }\n    _addLoadingMessage(result) {\n        if (this._computer.anchor) {\n            for (const participant of this._participants) {\n                if (participant.createLoadingMessage) {\n                    const loadingMessage = participant.createLoadingMessage(this._computer.anchor);\n                    if (loadingMessage) {\n                        return result.slice(0).concat([loadingMessage]);\n                    }\n                }\n            }\n        }\n        return result;\n    }\n    _withResult(result, isComplete, hasLoadingMessage) {\n        this._messages = (hasLoadingMessage ? this._addLoadingMessage(result) : result);\n        this._messagesAreComplete = isComplete;\n        if (this._computer.anchor && this._messages.length > 0) {\n            this._renderMessages(this._computer.anchor, this._messages);\n        }\n        else if (isComplete) {\n            this.hide();\n        }\n    }\n    _renderMessages(anchor, messages) {\n        const { showAtPosition, showAtRange, highlightRange } = ContentHoverController.computeHoverRanges(anchor.range, messages);\n        const disposables = new DisposableStore();\n        const statusBar = disposables.add(new EditorHoverStatusBar(this._keybindingService));\n        const fragment = document.createDocumentFragment();\n        let colorPicker = null;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPicker = widget,\n            onContentsChanged: () => this._widget.onContentsChanged(),\n            hide: () => this.hide()\n        };\n        for (const participant of this._participants) {\n            const hoverParts = messages.filter(msg => msg.owner === participant);\n            if (hoverParts.length > 0) {\n                disposables.add(participant.renderHoverParts(context, hoverParts));\n            }\n        }\n        if (statusBar.hasContent) {\n            fragment.appendChild(statusBar.hoverElement);\n        }\n        if (fragment.hasChildNodes()) {\n            if (highlightRange) {\n                const highlightDecoration = this._editor.createDecorationsCollection();\n                try {\n                    this._isChangingDecorations = true;\n                    highlightDecoration.set([{\n                            range: highlightRange,\n                            options: ContentHoverController._DECORATION_OPTIONS\n                        }]);\n                }\n                finally {\n                    this._isChangingDecorations = false;\n                }\n                disposables.add(toDisposable(() => {\n                    try {\n                        this._isChangingDecorations = true;\n                        highlightDecoration.clear();\n                    }\n                    finally {\n                        this._isChangingDecorations = false;\n                    }\n                }));\n            }\n            this._widget.showAt(fragment, new ContentHoverVisibleData(colorPicker, showAtPosition, showAtRange, this._editor.getOption(55 /* EditorOption.hover */).above, this._computer.shouldFocus, disposables));\n        }\n        else {\n            disposables.dispose();\n        }\n    }\n    static computeHoverRanges(anchorRange, messages) {\n        // The anchor range is always on a single line\n        const anchorLineNumber = anchorRange.startLineNumber;\n        let renderStartColumn = anchorRange.startColumn;\n        let renderEndColumn = anchorRange.endColumn;\n        let highlightRange = messages[0].range;\n        let forceShowAtRange = null;\n        for (const msg of messages) {\n            highlightRange = Range.plusRange(highlightRange, msg.range);\n            if (msg.range.startLineNumber === anchorLineNumber && msg.range.endLineNumber === anchorLineNumber) {\n                // this message has a range that is completely sitting on the line of the anchor\n                renderStartColumn = Math.min(renderStartColumn, msg.range.startColumn);\n                renderEndColumn = Math.max(renderEndColumn, msg.range.endColumn);\n            }\n            if (msg.forceShowAtRange) {\n                forceShowAtRange = msg.range;\n            }\n        }\n        return {\n            showAtPosition: forceShowAtRange ? forceShowAtRange.getStartPosition() : new Position(anchorRange.startLineNumber, renderStartColumn),\n            showAtRange: forceShowAtRange ? forceShowAtRange : new Range(anchorLineNumber, renderStartColumn, anchorLineNumber, renderEndColumn),\n            highlightRange\n        };\n    }\n};\nContentHoverController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'content-hover-highlight',\n    className: 'hoverHighlight'\n});\nContentHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService)\n], ContentHoverController);\nexport { ContentHoverController };\nclass ContentHoverVisibleData {\n    constructor(colorPicker, showAtPosition, showAtRange, preferAbove, stoleFocus, disposables) {\n        this.colorPicker = colorPicker;\n        this.showAtPosition = showAtPosition;\n        this.showAtRange = showAtRange;\n        this.preferAbove = preferAbove;\n        this.stoleFocus = stoleFocus;\n        this.disposables = disposables;\n    }\n}\nlet ContentHoverWidget = class ContentHoverWidget extends Disposable {\n    constructor(_editor, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this.allowEditorOverflow = true;\n        this._hoverVisibleKey = EditorContextKeys.hoverVisible.bindTo(this._contextKeyService);\n        this._hover = this._register(new HoverWidget());\n        this._visibleData = null;\n        this._register(this._editor.onDidLayoutChange(() => this._layout()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._setVisibleData(null);\n        this._layout();\n        this._editor.addContentWidget(this);\n    }\n    /**\n     * Returns `null` if the hover is not visible.\n     */\n    get position() {\n        var _a, _b;\n        return (_b = (_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.showAtPosition) !== null && _b !== void 0 ? _b : null;\n    }\n    get isColorPickerVisible() {\n        var _a;\n        return Boolean((_a = this._visibleData) === null || _a === void 0 ? void 0 : _a.colorPicker);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        super.dispose();\n    }\n    getId() {\n        return ContentHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        if (!this._visibleData) {\n            return null;\n        }\n        let preferAbove = this._visibleData.preferAbove;\n        if (!preferAbove && this._contextKeyService.getContextKeyValue(SuggestContext.Visible.key)) {\n            // Prefer rendering above if the suggest widget is visible\n            preferAbove = true;\n        }\n        return {\n            position: this._visibleData.showAtPosition,\n            range: this._visibleData.showAtRange,\n            preference: (preferAbove\n                ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n                : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]),\n        };\n    }\n    _setVisibleData(visibleData) {\n        if (this._visibleData) {\n            this._visibleData.disposables.dispose();\n        }\n        this._visibleData = visibleData;\n        this._hoverVisibleKey.set(!!this._visibleData);\n        this._hover.containerDomNode.classList.toggle('hidden', !this._visibleData);\n    }\n    _layout() {\n        const height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\n        const { fontSize, lineHeight } = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        this._hover.contentsDomNode.style.fontSize = `${fontSize}px`;\n        this._hover.contentsDomNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this._hover.contentsDomNode.style.maxHeight = `${height}px`;\n        this._hover.contentsDomNode.style.maxWidth = `${Math.max(this._editor.getLayoutInfo().width * 0.66, 500)}px`;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    showAt(node, visibleData) {\n        this._setVisibleData(visibleData);\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._hover.contentsDomNode.style.paddingBottom = '';\n        this._updateFont();\n        this.onContentsChanged();\n        // Simply force a synchronous render on the editor\n        // such that the widget does not really render with left = '0px'\n        this._editor.render();\n        // See https://github.com/microsoft/vscode/issues/140339\n        // TODO: Doing a second layout of the hover after force rendering the editor\n        this.onContentsChanged();\n        if (visibleData.stoleFocus) {\n            this._hover.containerDomNode.focus();\n        }\n        if (visibleData.colorPicker) {\n            visibleData.colorPicker.layout();\n        }\n    }\n    hide() {\n        if (this._visibleData) {\n            const stoleFocus = this._visibleData.stoleFocus;\n            this._setVisibleData(null);\n            this._editor.layoutContentWidget(this);\n            if (stoleFocus) {\n                this._editor.focus();\n            }\n        }\n    }\n    onContentsChanged() {\n        this._editor.layoutContentWidget(this);\n        this._hover.onContentsChanged();\n        const scrollDimensions = this._hover.scrollbar.getScrollDimensions();\n        const hasHorizontalScrollbar = (scrollDimensions.scrollWidth > scrollDimensions.width);\n        if (hasHorizontalScrollbar) {\n            // There is just a horizontal scrollbar\n            const extraBottomPadding = `${this._hover.scrollbar.options.horizontalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingBottom !== extraBottomPadding) {\n                this._hover.contentsDomNode.style.paddingBottom = extraBottomPadding;\n                this._editor.layoutContentWidget(this);\n                this._hover.onContentsChanged();\n            }\n        }\n    }\n    clear() {\n        this._hover.contentsDomNode.textContent = '';\n    }\n};\nContentHoverWidget.ID = 'editor.contrib.contentHoverWidget';\nContentHoverWidget = __decorate([\n    __param(1, IContextKeyService)\n], ContentHoverWidget);\nexport { ContentHoverWidget };\nlet EditorHoverStatusBar = class EditorHoverStatusBar extends Disposable {\n    constructor(_keybindingService) {\n        super();\n        this._keybindingService = _keybindingService;\n        this._hasContent = false;\n        this.hoverElement = $('div.hover-row.status-bar');\n        this.actionsElement = dom.append(this.hoverElement, $('div.actions'));\n    }\n    get hasContent() {\n        return this._hasContent;\n    }\n    addAction(actionOptions) {\n        const keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\n        const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n        this._hasContent = true;\n        return this._register(HoverAction.render(this.actionsElement, actionOptions, keybindingLabel));\n    }\n    append(element) {\n        const result = dom.append(this.actionsElement, element);\n        this._hasContent = true;\n        return result;\n    }\n};\nEditorHoverStatusBar = __decorate([\n    __param(0, IKeybindingService)\n], EditorHoverStatusBar);\nclass ContentHoverComputer {\n    constructor(_editor, _participants) {\n        this._editor = _editor;\n        this._participants = _participants;\n        this._anchor = null;\n        this._shouldFocus = false;\n    }\n    get anchor() { return this._anchor; }\n    set anchor(value) { this._anchor = value; }\n    get shouldFocus() { return this._shouldFocus; }\n    set shouldFocus(value) { this._shouldFocus = value; }\n    static _getLineDecorations(editor, anchor) {\n        if (anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        if (lineNumber > model.getLineCount()) {\n            // invalid line\n            return [];\n        }\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        return editor.getLineDecorations(lineNumber).filter((d) => {\n            if (d.options.isWholeLine) {\n                return true;\n            }\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            if (d.options.showIfCollapsed) {\n                // Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n                if (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n                    return false;\n                }\n            }\n            else {\n                if (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n    computeAsync(token) {\n        const anchor = this._anchor;\n        if (!this._editor.hasModel() || !anchor) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n        return AsyncIterableObject.merge(this._participants.map((participant) => {\n            if (!participant.computeAsync) {\n                return AsyncIterableObject.EMPTY;\n            }\n            return participant.computeAsync(anchor, lineDecorations, token);\n        }));\n    }\n    computeSync() {\n        if (!this._editor.hasModel() || !this._anchor) {\n            return [];\n        }\n        const lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, this._anchor);\n        let result = [];\n        for (const participant of this._participants) {\n            result = result.concat(participant.computeSync(this._anchor, lineDecorations));\n        }\n        return coalesce(result);\n    }\n}\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n// ESM-uncomment-begin\nlet __marked_exports = {};\n(function() {\n  function define(deps, factory) {\n    factory(__marked_exports);\n  }\n  define.amd = true;\n// ESM-uncomment-end\n\n (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.marked = {}));\n})(this, (function (exports) { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function getDefaults() {\n    return {\n      baseUrl: null,\n      breaks: false,\n      extensions: null,\n      gfm: true,\n      headerIds: true,\n      headerPrefix: '',\n      highlight: null,\n      langPrefix: 'language-',\n      mangle: true,\n      pedantic: false,\n      renderer: null,\n      sanitize: false,\n      sanitizer: null,\n      silent: false,\n      smartLists: false,\n      smartypants: false,\n      tokenizer: null,\n      walkTokens: null,\n      xhtml: false\n    };\n  }\n  exports.defaults = getDefaults();\n  function changeDefaults(newDefaults) {\n    exports.defaults = newDefaults;\n  }\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n  /**\n   * @param {string} html\n   */\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n  var caret = /(^|[^\\[])\\^/g;\n  /**\n   * @param {string | RegExp} regex\n   * @param {string} opt\n   */\n\n  function edit(regex, opt) {\n    regex = typeof regex === 'string' ? regex : regex.source;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n  /**\n   * @param {boolean} sanitize\n   * @param {string} base\n   * @param {string} href\n   */\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n  /**\n   * @param {string} base\n   * @param {string} href\n   */\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0; // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n\n    if (!cells[0].trim()) {\n      cells.shift();\n    }\n\n    if (cells.length > 0 && !cells[cells.length - 1].trim()) {\n      cells.pop();\n    }\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  }\n  /**\n   * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n   * /c*$/ is vulnerable to REDOS.\n   *\n   * @param {string} str\n   * @param {string} c\n   * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n   */\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.slice(0, l - suffLen);\n  }\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n  /**\n   * @param {string} pattern\n   * @param {number} count\n   */\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  function outputLink(cap, link, raw, lexer) {\n    var href = link.href;\n    var title = link.title ? escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      lexer.state.inLink = true;\n      var token = {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text,\n        tokens: lexer.inlineTokens(text, [])\n      };\n      lexer.state.inLink = false;\n      return token;\n    }\n\n    return {\n      type: 'image',\n      raw: raw,\n      href: href,\n      title: title,\n      text: escape(text)\n    };\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap && cap[0].length > 0) {\n        return {\n          type: 'space',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.code = function code(src) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text,\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          tokens: this.lexer.blockTokens(text, []),\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;\n        var bull = cap[1].trim();\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: '',\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        };\n        bull = isordered ? \"\\\\d{1,9}\\\\\" + bull.slice(-1) : \"\\\\\" + bull;\n\n        if (this.options.pedantic) {\n          bull = isordered ? bull : '[*+-]';\n        } // Get next list item\n\n\n        var itemRegex = new RegExp(\"^( {0,3}\" + bull + \")((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))\"); // Check if current bullet point can start a new List Item\n\n        while (src) {\n          endEarly = false;\n\n          if (!(cap = itemRegex.exec(src))) {\n            break;\n          }\n\n          if (this.rules.block.hr.test(src)) {\n            // End list if bullet was actually HR (possibly move into itemRegex?)\n            break;\n          }\n\n          raw = cap[0];\n          src = src.substring(raw.length);\n          line = cap[2].split('\\n', 1)[0];\n          nextLine = src.split('\\n', 1)[0];\n\n          if (this.options.pedantic) {\n            indent = 2;\n            itemContents = line.trimLeft();\n          } else {\n            indent = cap[2].search(/[^ ]/); // Find first non-space char\n\n            indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n\n            itemContents = line.slice(indent);\n            indent += cap[1].length;\n          }\n\n          blankLine = false;\n\n          if (!line && /^ *$/.test(nextLine)) {\n            // Items begin with at most one blank line\n            raw += nextLine + '\\n';\n            src = src.substring(nextLine.length + 1);\n            endEarly = true;\n          }\n\n          if (!endEarly) {\n            var nextBulletRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}(?:[*+-]|\\\\d{1,9}[.)])((?: [^\\\\n]*)?(?:\\\\n|$))\");\n            var hrRegex = new RegExp(\"^ {0,\" + Math.min(3, indent - 1) + \"}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)\"); // Check if following lines should be included in List Item\n\n            while (src) {\n              rawLine = src.split('\\n', 1)[0];\n              line = rawLine; // Re-align to follow commonmark nesting rules\n\n              if (this.options.pedantic) {\n                line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n              } // End list item if found start of new bullet\n\n\n              if (nextBulletRegex.test(line)) {\n                break;\n              } // Horizontal rule found\n\n\n              if (hrRegex.test(src)) {\n                break;\n              }\n\n              if (line.search(/[^ ]/) >= indent || !line.trim()) {\n                // Dedent if possible\n                itemContents += '\\n' + line.slice(indent);\n              } else if (!blankLine) {\n                // Until blank line, item doesn't need indentation\n                itemContents += '\\n' + line;\n              } else {\n                // Otherwise, improper indentation ends this item\n                break;\n              }\n\n              if (!blankLine && !line.trim()) {\n                // Check if current line is blank\n                blankLine = true;\n              }\n\n              raw += rawLine + '\\n';\n              src = src.substring(rawLine.length + 1);\n            }\n          }\n\n          if (!list.loose) {\n            // If the previous item ended with a blank line, the list is loose\n            if (endsWithBlankLine) {\n              list.loose = true;\n            } else if (/\\n *\\n *$/.test(raw)) {\n              endsWithBlankLine = true;\n            }\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.exec(itemContents);\n\n            if (istask) {\n              ischecked = istask[0] !== '[ ] ';\n              itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: !!istask,\n            checked: ischecked,\n            loose: false,\n            text: itemContents\n          });\n          list.raw += raw;\n        } // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n\n\n        list.items[list.items.length - 1].raw = raw.trimRight();\n        list.items[list.items.length - 1].text = itemContents.trimRight();\n        list.raw = list.raw.trimRight();\n        var l = list.items.length; // Item child tokens handled here at end because we needed to have the final item to trim it first\n\n        for (i = 0; i < l; i++) {\n          this.lexer.state.top = false;\n          list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n          var spacers = list.items[i].tokens.filter(function (t) {\n            return t.type === 'space';\n          });\n          var hasMultipleLineBreaks = spacers.every(function (t) {\n            var chars = t.raw.split('');\n            var lineBreaks = 0;\n\n            for (var _iterator = _createForOfIteratorHelperLoose(chars), _step; !(_step = _iterator()).done;) {\n              var _char = _step.value;\n\n              if (_char === '\\n') {\n                lineBreaks += 1;\n              }\n\n              if (lineBreaks > 1) {\n                return true;\n              }\n            }\n\n            return false;\n          });\n\n          if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n            // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n            list.loose = true;\n            list.items[i].loose = true;\n          }\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: cap[0]\n        };\n\n        if (this.options.sanitize) {\n          token.type = 'paragraph';\n          token.text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n          token.tokens = [];\n          this.lexer.inline(token.text, token.tokens);\n        }\n\n        return token;\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          type: 'def',\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells(cap[1]).map(function (c) {\n            return {\n              text: c\n            };\n          }),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i, j, k, row;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.rows.length;\n\n          for (i = 0; i < l; i++) {\n            item.rows[i] = splitCells(item.rows[i], item.header.length).map(function (c) {\n              return {\n                text: c\n              };\n            });\n          } // parse child tokens inside headers and cells\n          // header child tokens\n\n\n          l = item.header.length;\n\n          for (j = 0; j < l; j++) {\n            item.header[j].tokens = [];\n            this.lexer.inline(item.header[j].text, item.header[j].tokens);\n          } // cell child tokens\n\n\n          l = item.rows.length;\n\n          for (j = 0; j < l; j++) {\n            row = item.rows[j];\n\n            for (k = 0; k < row.length; k++) {\n              row[k].tokens = [];\n              this.lexer.inline(row[k].text, row[k].tokens);\n            }\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.text = function text(src) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var token = {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0],\n          tokens: []\n        };\n        this.lexer.inline(token.text, token.tokens);\n        return token;\n      }\n    };\n\n    _proto.escape = function escape$1(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n          this.lexer.state.inLink = true;\n        } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.lexer.state.inLink = false;\n        }\n\n        if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = true;\n        } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.lexer.state.inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: this.lexer.state.inLink,\n          inRawBlock: this.lexer.state.inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0], this.lexer);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0], this.lexer);\n      }\n    };\n\n    _proto.emStrong = function emStrong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.emStrong.lDelim.exec(src);\n      if (!match) return; // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n\n      if (match[3] && prevChar.match(/(?:[0-9A-Za-z\\xAA\\xB2\\xB3\\xB5\\xB9\\xBA\\xBC-\\xBE\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u0660-\\u0669\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07C0-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u0870-\\u0887\\u0889-\\u088E\\u08A0-\\u08C9\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0966-\\u096F\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09E6-\\u09F1\\u09F4-\\u09F9\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A6F\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AE6-\\u0AEF\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B66-\\u0B6F\\u0B71-\\u0B77\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0BE6-\\u0BF2\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D58-\\u0D61\\u0D66-\\u0D78\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DE6-\\u0DEF\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F20-\\u0F33\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F-\\u1049\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u1090-\\u1099\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1369-\\u137C\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u1711\\u171F-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19DA\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4C\\u1B50-\\u1B59\\u1B83-\\u1BA0\\u1BAE-\\u1BE5\\u1C00-\\u1C23\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2070\\u2071\\u2074-\\u2079\\u207F-\\u2089\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2150-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2CFD\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u3192-\\u3195\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7CA\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7D9\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA830-\\uA835\\uA840-\\uA873\\uA882-\\uA8B3\\uA8D0-\\uA8D9\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA900-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF-\\uA9D9\\uA9E0-\\uA9E4\\uA9E6-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDD07-\\uDD33\\uDD40-\\uDD78\\uDD8A\\uDD8B\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDEE1-\\uDEFB\\uDF00-\\uDF23\\uDF2D-\\uDF4A\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF\\uDFD1-\\uDFD5]|\\uD801[\\uDC00-\\uDC9D\\uDCA0-\\uDCA9\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDD70-\\uDD7A\\uDD7C-\\uDD8A\\uDD8C-\\uDD92\\uDD94\\uDD95\\uDD97-\\uDDA1\\uDDA3-\\uDDB1\\uDDB3-\\uDDB9\\uDDBB\\uDDBC\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67\\uDF80-\\uDF85\\uDF87-\\uDFB0\\uDFB2-\\uDFBA]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC58-\\uDC76\\uDC79-\\uDC9E\\uDCA7-\\uDCAF\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDCFB-\\uDD1B\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBC-\\uDDCF\\uDDD2-\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE40-\\uDE48\\uDE60-\\uDE7E\\uDE80-\\uDE9F\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDEEB-\\uDEEF\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF58-\\uDF72\\uDF78-\\uDF91\\uDFA9-\\uDFAF]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDCFA-\\uDD23\\uDD30-\\uDD39\\uDE60-\\uDE7E\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF27\\uDF30-\\uDF45\\uDF51-\\uDF54\\uDF70-\\uDF81\\uDFB0-\\uDFCB\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC52-\\uDC6F\\uDC71\\uDC72\\uDC75\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDCF0-\\uDCF9\\uDD03-\\uDD26\\uDD36-\\uDD3F\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDD0-\\uDDDA\\uDDDC\\uDDE1-\\uDDF4\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDEF0-\\uDEF9\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC50-\\uDC59\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDCD0-\\uDCD9\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE50-\\uDE59\\uDE80-\\uDEAA\\uDEB8\\uDEC0-\\uDEC9\\uDF00-\\uDF1A\\uDF30-\\uDF3B\\uDF40-\\uDF46]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCF2\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDD50-\\uDD59\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEB0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC50-\\uDC6C\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD50-\\uDD59\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDDA0-\\uDDA9\\uDEE0-\\uDEF2\\uDFB0\\uDFC0-\\uDFD4]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC00-\\uDC6E\\uDC80-\\uDD43]|\\uD80B[\\uDF90-\\uDFF0]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE60-\\uDE69\\uDE70-\\uDEBE\\uDEC0-\\uDEC9\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF50-\\uDF59\\uDF5B-\\uDF61\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE96\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82B[\\uDFF0-\\uDFF3\\uDFF5-\\uDFFB\\uDFFD\\uDFFE]|\\uD82C[\\uDC00-\\uDD22\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD834[\\uDEE0-\\uDEF3\\uDF60-\\uDF78]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB\\uDFCE-\\uDFFF]|\\uD837[\\uDF00-\\uDF1E]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD40-\\uDD49\\uDD4E\\uDE90-\\uDEAD\\uDEC0-\\uDEEB\\uDEF0-\\uDEF9]|\\uD839[\\uDFE0-\\uDFE6\\uDFE8-\\uDFEB\\uDFED\\uDFEE\\uDFF0-\\uDFFE]|\\uD83A[\\uDC00-\\uDCC4\\uDCC7-\\uDCCF\\uDD00-\\uDD43\\uDD4B\\uDD50-\\uDD59]|\\uD83B[\\uDC71-\\uDCAB\\uDCAD-\\uDCAF\\uDCB1-\\uDCB4\\uDD01-\\uDD2D\\uDD2F-\\uDD3D\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD83C[\\uDD00-\\uDD0C]|\\uD83E[\\uDFF0-\\uDFF9]|\\uD869[\\uDC00-\\uDEDF\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF38\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/)) return;\n      var nextChar = match[1] || match[2] || '';\n\n      if (!nextChar || nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar))) {\n        var lLength = match[0].length - 1;\n        var rDelim,\n            rLength,\n            delimTotal = lLength,\n            midDelimTotal = 0;\n        var endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n        endReg.lastIndex = 0; // Clip maskedSrc to same section of string as src (move to lexer?)\n\n        maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n          if (!rDelim) continue; // skip single * in __abc*abc__\n\n          rLength = rDelim.length;\n\n          if (match[3] || match[4]) {\n            // found another Left Delim\n            delimTotal += rLength;\n            continue;\n          } else if (match[5] || match[6]) {\n            // either Left or Right Delim\n            if (lLength % 3 && !((lLength + rLength) % 3)) {\n              midDelimTotal += rLength;\n              continue; // CommonMark Emphasis Rules 9-10\n            }\n          }\n\n          delimTotal -= rLength;\n          if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n          // Remove extra characters. *a*** -> *a*\n\n          rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal); // Create `em` if smallest delimiter has odd char count. *a***\n\n          if (Math.min(lLength, rLength) % 2) {\n            var _text = src.slice(1, lLength + match.index + rLength);\n\n            return {\n              type: 'em',\n              raw: src.slice(0, lLength + match.index + rLength + 1),\n              text: _text,\n              tokens: this.lexer.inlineTokens(_text, [])\n            };\n          } // Create 'strong' if smallest delimiter has even char count. **a***\n\n\n          var text = src.slice(2, lLength + match.index + rLength - 1);\n          return {\n            type: 'strong',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text: text,\n            tokens: this.lexer.inlineTokens(text, [])\n          };\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2],\n          tokens: this.lexer.inlineTokens(cap[2], [])\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (this.lexer.state.inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];\n        } else {\n          text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n    hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n    table: noopTest,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block.listItemStart = edit(/^( *)(bull) */).replace('bull', block.bullet).getRegex();\n  block.list = edit(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block.html = edit(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '').replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge({}, block.normal, {\n    table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block.gfm.table = edit(block.gfm.table).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block.gfm.paragraph = edit(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge({}, block.normal, {\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest,\n    // fences not supported\n    paragraph: edit(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n    nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    emStrong: {\n      lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n      //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n      //          () Skip orphan inside strong  () Consume to delim (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n      rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[^*]+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n      rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\spunctuation])/\n  }; // list of punctuation marks from CommonMark spec\n  // without * and _ to handle the different emphasis markers * and _\n\n  inline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\n  inline.escapedEmSt = /\\\\\\*|\\\\_/g;\n  inline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g').replace(/punct/g, inline._punctuation).getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit(inline.tag).replace('comment', inline._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit(inline.reflink).replace('label', inline._label).replace('ref', block._label).getRegex();\n  inline.nolink = edit(inline.nolink).replace('ref', block._label).getRegex();\n  inline.reflinkSearch = edit(inline.reflinkSearch, 'g').replace('reflink', inline.reflink).replace('nolink', inline.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge({}, inline.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge({}, inline.normal, {\n    escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n  });\n  inline.gfm.url = edit(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge({}, inline.gfm, {\n    br: edit(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n\n  /**\n   * smartypants text replacement\n   * @param {string} text\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   * @param {string} text\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || exports.defaults;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      this.tokenizer.lexer = this;\n      this.inlineQueue = [];\n      this.state = {\n        inLink: false,\n        inRawBlock: false,\n        top: true\n      };\n      var rules = {\n        block: block.normal,\n        inline: inline.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block.pedantic;\n        rules.inline = inline.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline.breaks;\n        } else {\n          rules.inline = inline.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n');\n      this.blockTokens(src, this.tokens);\n      var next;\n\n      while (next = this.inlineQueue.shift()) {\n        this.inlineTokens(next.src, next.tokens);\n      }\n\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens) {\n      var _this = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n      } else {\n        src = src.replace(/^( *)(\\t+)/gm, function (_, leading, tabs) {\n          return leading + '    '.repeat(tabs.length);\n        });\n      }\n\n      var token, lastToken, cutSrc, lastParagraphClipped;\n\n      while (src) {\n        if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // newline\n\n\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.length === 1 && tokens.length > 0) {\n            // if there's a single \\n as a spacer, it's terminating the last line,\n            // so move it there so that we don't get unecessary paragraph tags\n            tokens[tokens.length - 1].raw += '\\n';\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (token = this.tokenizer.def(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.raw;\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n        // prevent paragraph consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startBlock) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this.options.extensions.startBlock.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastParagraphClipped && lastToken.type === 'paragraph') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          lastParagraphClipped = cutSrc.length !== src.length;\n          src = src.substring(token.raw.length);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n            this.inlineQueue.pop();\n            this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      this.state.top = true;\n      return tokens;\n    };\n\n    _proto.inline = function inline(src, tokens) {\n      this.inlineQueue.push({\n        src: src,\n        tokens: tokens\n      });\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens) {\n      var _this2 = this;\n\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      var token, lastToken, cutSrc; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      } // Mask out escaped em & strong delimiters\n\n\n      while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // extensions\n\n        if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some(function (extTokenizer) {\n          if (token = extTokenizer.call({\n            lexer: _this2\n          }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n\n          return false;\n        })) {\n          continue;\n        } // escape\n\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        } // em & strong\n\n\n        if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n        // prevent inlineText consuming extensions by clipping 'src' to extension start\n\n\n        cutSrc = src;\n\n        if (this.options.extensions && this.options.extensions.startInline) {\n          (function () {\n            var startIndex = Infinity;\n            var tempSrc = src.slice(1);\n            var tempStart = void 0;\n\n            _this2.options.extensions.startInline.forEach(function (getStartIndex) {\n              tempStart = getStartIndex.call({\n                lexer: this\n              }, tempSrc);\n\n              if (typeof tempStart === 'number' && tempStart >= 0) {\n                startIndex = Math.min(startIndex, tempStart);\n              }\n            });\n\n            if (startIndex < Infinity && startIndex >= 0) {\n              cutSrc = src.substring(0, startIndex + 1);\n            }\n          })();\n        }\n\n        if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n          src = src.substring(token.raw.length);\n\n          if (token.raw.slice(-1) !== '_') {\n            // Track prevChar before string of ____ started\n            prevChar = token.raw.slice(-1);\n          }\n\n          keepPrevChar = true;\n          lastToken = tokens[tokens.length - 1];\n\n          if (lastToken && lastToken.type === 'text') {\n            lastToken.raw += token.raw;\n            lastToken.text += token.text;\n          } else {\n            tokens.push(token);\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block,\n          inline: inline\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  /**\n   * Renderer\n   */\n\n  var Renderer = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || exports.defaults;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape(lang, true) + '\">' + (escaped ? _code : escape(_code, true)) + '</code></pre>\\n';\n    }\n    /**\n     * @param {string} quote\n     */\n    ;\n\n    _proto.blockquote = function blockquote(quote) {\n      return \"<blockquote>\\n\" + quote + \"</blockquote>\\n\";\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    }\n    /**\n     * @param {string} text\n     * @param {string} level\n     * @param {string} raw\n     * @param {any} slugger\n     */\n    ;\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        var id = this.options.headerPrefix + slugger.slug(raw);\n        return \"<h\" + level + \" id=\\\"\" + id + \"\\\">\" + text + \"</h\" + level + \">\\n\";\n      } // ignore IDs\n\n\n      return \"<h\" + level + \">\" + text + \"</h\" + level + \">\\n\";\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.listitem = function listitem(text) {\n      return \"<li>\" + text + \"</li>\\n\";\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.paragraph = function paragraph(text) {\n      return \"<p>\" + text + \"</p>\\n\";\n    }\n    /**\n     * @param {string} header\n     * @param {string} body\n     */\n    ;\n\n    _proto.table = function table(header, body) {\n      if (body) body = \"<tbody>\" + body + \"</tbody>\";\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    }\n    /**\n     * @param {string} content\n     */\n    ;\n\n    _proto.tablerow = function tablerow(content) {\n      return \"<tr>\\n\" + content + \"</tr>\\n\";\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? \"<\" + type + \" align=\\\"\" + flags.align + \"\\\">\" : \"<\" + type + \">\";\n      return tag + content + (\"</\" + type + \">\\n\");\n    }\n    /**\n     * span level renderer\n     * @param {string} text\n     */\n    ;\n\n    _proto.strong = function strong(text) {\n      return \"<strong>\" + text + \"</strong>\";\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.em = function em(text) {\n      return \"<em>\" + text + \"</em>\";\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.codespan = function codespan(text) {\n      return \"<code>\" + text + \"</code>\";\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    }\n    /**\n     * @param {string} text\n     */\n    ;\n\n    _proto.del = function del(text) {\n      return \"<del>\" + text + \"</del>\";\n    }\n    /**\n     * @param {string} href\n     * @param {string} title\n     * @param {string} text\n     */\n    ;\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    }\n    /**\n     * @param {string} href\n     * @param {string} title\n     * @param {string} text\n     */\n    ;\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = \"<img src=\\\"\" + href + \"\\\" alt=\\\"\" + text + \"\\\"\";\n\n      if (title) {\n        out += \" title=\\\"\" + title + \"\\\"\";\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n    /**\n     * @param {string} value\n     */\n\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     * @param {string} originalSlug\n     * @param {boolean} isDryRun\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} [options]\n     * @param {boolean} [options.dryrun] Generates the next unique slug without\n     * updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || exports.defaults;\n      this.options.renderer = this.options.renderer || new Renderer();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer();\n      this.slugger = new Slugger();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.header[j].tokens), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.rows.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.rows[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k].tokens), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token,\n          ret;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i]; // Run any renderer extensions\n\n        if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n          ret = this.options.extensions.renderers[token.type].call({\n            parser: this\n          }, token);\n\n          if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n            out += ret || '';\n            continue;\n          }\n        }\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            if (opt.walkTokens) {\n              marked.walkTokens(tokens, opt.walkTokens);\n            }\n\n            out = Parser.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n  marked.options = marked.setOptions = function (opt) {\n    merge(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = exports.defaults;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var opts = merge.apply(void 0, [{}].concat(args));\n    var extensions = marked.defaults.extensions || {\n      renderers: {},\n      childTokens: {}\n    };\n    var hasExtensions;\n    args.forEach(function (pack) {\n      // ==-- Parse \"addon\" extensions --== //\n      if (pack.extensions) {\n        hasExtensions = true;\n        pack.extensions.forEach(function (ext) {\n          if (!ext.name) {\n            throw new Error('extension name required');\n          }\n\n          if (ext.renderer) {\n            // Renderer extensions\n            var prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n\n            if (prevRenderer) {\n              // Replace extension with func to run new extension but fall back if false\n              extensions.renderers[ext.name] = function () {\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = arguments[_key2];\n                }\n\n                var ret = ext.renderer.apply(this, args);\n\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args);\n                }\n\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n\n          if (ext.tokenizer) {\n            // Tokenizer Extensions\n            if (!ext.level || ext.level !== 'block' && ext.level !== 'inline') {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n\n            if (extensions[ext.level]) {\n              extensions[ext.level].unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n\n            if (ext.start) {\n              // Function to check for start of token\n              if (ext.level === 'block') {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === 'inline') {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n\n          if (ext.childTokens) {\n            // Child tokens to be visited by walkTokens\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n      } // ==-- Parse \"overwrite\" extensions --== //\n\n\n      if (pack.renderer) {\n        (function () {\n          var renderer = marked.defaults.renderer || new Renderer();\n\n          var _loop = function _loop(prop) {\n            var prevRenderer = renderer[prop]; // Replace renderer with func to run extension, but fall back if false\n\n            renderer[prop] = function () {\n              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n                args[_key3] = arguments[_key3];\n              }\n\n              var ret = pack.renderer[prop].apply(renderer, args);\n\n              if (ret === false) {\n                ret = prevRenderer.apply(renderer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.renderer) {\n            _loop(prop);\n          }\n\n          opts.renderer = renderer;\n        })();\n      }\n\n      if (pack.tokenizer) {\n        (function () {\n          var tokenizer = marked.defaults.tokenizer || new Tokenizer();\n\n          var _loop2 = function _loop2(prop) {\n            var prevTokenizer = tokenizer[prop]; // Replace tokenizer with func to run extension, but fall back if false\n\n            tokenizer[prop] = function () {\n              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                args[_key4] = arguments[_key4];\n              }\n\n              var ret = pack.tokenizer[prop].apply(tokenizer, args);\n\n              if (ret === false) {\n                ret = prevTokenizer.apply(tokenizer, args);\n              }\n\n              return ret;\n            };\n          };\n\n          for (var prop in pack.tokenizer) {\n            _loop2(prop);\n          }\n\n          opts.tokenizer = tokenizer;\n        })();\n      } // ==-- Parse WalkTokens extensions --== //\n\n\n      if (pack.walkTokens) {\n        var _walkTokens = marked.defaults.walkTokens;\n\n        opts.walkTokens = function (token) {\n          pack.walkTokens.call(this, token);\n\n          if (_walkTokens) {\n            _walkTokens.call(this, token);\n          }\n        };\n      }\n\n      if (hasExtensions) {\n        opts.extensions = extensions;\n      }\n\n      marked.setOptions(opts);\n    });\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    var _loop3 = function _loop3() {\n      var token = _step.value;\n      callback.call(marked, token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell.tokens, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.rows), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell.tokens, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {\n              // Walk any extensions\n              marked.defaults.extensions.childTokens[token.type].forEach(function (childTokens) {\n                marked.walkTokens(token[childTokens], callback);\n              });\n            } else if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    };\n\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      _loop3();\n    }\n  };\n  /**\n   * Parse Inline\n   * @param {string} src\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n\n    try {\n      var tokens = Lexer.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser;\n  marked.parser = Parser.parse;\n  marked.Renderer = Renderer;\n  marked.TextRenderer = TextRenderer;\n  marked.Lexer = Lexer;\n  marked.lexer = Lexer.lex;\n  marked.Tokenizer = Tokenizer;\n  marked.Slugger = Slugger;\n  marked.parse = marked;\n  var options = marked.options;\n  var setOptions = marked.setOptions;\n  var use = marked.use;\n  var walkTokens = marked.walkTokens;\n  var parseInline = marked.parseInline;\n  var parse = marked;\n  var parser = Parser.parse;\n  var lexer = Lexer.lex;\n\n  exports.Lexer = Lexer;\n  exports.Parser = Parser;\n  exports.Renderer = Renderer;\n  exports.Slugger = Slugger;\n  exports.TextRenderer = TextRenderer;\n  exports.Tokenizer = Tokenizer;\n  exports.getDefaults = getDefaults;\n  exports.lexer = lexer;\n  exports.marked = marked;\n  exports.options = options;\n  exports.parse = parse;\n  exports.parseInline = parseInline;\n  exports.parser = parser;\n  exports.setOptions = setOptions;\n  exports.use = use;\n  exports.walkTokens = walkTokens;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n\n// ESM-uncomment-begin\n})();\nexport var marked = (__marked_exports || exports);\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { escapeDoubleQuotes, parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/contrib/markdownRenderer/browser/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${escapeDoubleQuotes(href)}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${escapeDoubleQuotes(text)}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${escapeDoubleQuotes(title)}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        title = typeof title === 'string' ? escapeDoubleQuotes(removeMarkdownEscapes(title)) : '';\n        href = removeMarkdownEscapes(href);\n        // HTML Encode href\n        href = href.replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#39;');\n        return `<a href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    // Will collect [id, renderedElement] tuples\n    const codeBlocks = [];\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const id = defaultGenerator.nextId();\n            const value = options.codeBlockRenderer(lang !== null && lang !== void 0 ? lang : '', code);\n            codeBlocks.push(value.then(element => [id, element]));\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.src = _href(href, true);\n        }\n    });\n    markdownHtmlDoc.body.querySelectorAll('a')\n        .forEach(a => {\n        const href = a.getAttribute('href'); // Get the raw 'href' attribute value as text, not the resolved 'href'\n        a.setAttribute('href', ''); // Clear out href. We use the `data-href` for handling clicks instead\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            a.replaceWith(...a.childNodes);\n        }\n        else {\n            let resolvedHref = _href(href, false);\n            if (markdown.baseUri) {\n                resolvedHref = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n            }\n            a.dataset.href = resolvedHref;\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    if (codeBlocks.length > 0) {\n        Promise.all(codeBlocks).then((tuples) => {\n            var _a, _b;\n            if (isDisposed) {\n                return;\n            }\n            const renderedElements = new Map(tuples);\n            const placeholderElements = element.querySelectorAll(`div[data-code]`);\n            for (const placeholderElement of placeholderElements) {\n                const renderedElement = renderedElements.get((_a = placeholderElement.dataset['code']) !== null && _a !== void 0 ? _a : '');\n                if (renderedElement) {\n                    DOM.reset(placeholderElement, renderedElement);\n                }\n            }\n            (_b = options.asyncRenderCallback) === null || _b === void 0 ? void 0 : _b.call(options);\n        });\n    }\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            disposables.dispose();\n        }\n    };\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    const hook = DOM.hookDomPurifyHrefAndSrcSanitizer(allowedSchemes);\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        hook.dispose();\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { tokenizeToString } from '../../../common/languages/textToHtmlTokenizer.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../common/languages/modesRegistry.js';\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nlet MarkdownRenderer = class MarkdownRenderer {\n    constructor(_options, _languageService, _openerService) {\n        this._options = _options;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._onDidRenderAsync = new Emitter();\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\n    }\n    dispose() {\n        this._onDidRenderAsync.dispose();\n    }\n    render(markdown, options, markedOptions) {\n        if (!markdown) {\n            const element = document.createElement('span');\n            return { element, dispose: () => { } };\n        }\n        const disposables = new DisposableStore();\n        const rendered = disposables.add(renderMarkdown(markdown, Object.assign(Object.assign({}, this._getRenderOptions(markdown, disposables)), options), markedOptions));\n        return {\n            element: rendered.element,\n            dispose: () => disposables.dispose()\n        };\n    }\n    _getRenderOptions(markdown, disposables) {\n        return {\n            codeBlockRenderer: (languageAlias, value) => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b, _c;\n                // In markdown,\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n                // it is possible no alias is given in which case we fall back to the current editor lang\n                let languageId;\n                if (languageAlias) {\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n                }\n                else if (this._options.editor) {\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\n                }\n                if (!languageId) {\n                    languageId = PLAINTEXT_LANGUAGE_ID;\n                }\n                const html = yield tokenizeToString(this._languageService, value, languageId);\n                const element = document.createElement('span');\n                element.innerHTML = ((_c = (_b = MarkdownRenderer._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\n                // use \"good\" font\n                if (this._options.editor) {\n                    const fontInfo = this._options.editor.getOption(46 /* EditorOption.fontInfo */);\n                    applyFontInfo(element, fontInfo);\n                }\n                else if (this._options.codeBlockFontFamily) {\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\n                }\n                if (this._options.codeBlockFontSize !== undefined) {\n                    element.style.fontSize = this._options.codeBlockFontSize;\n                }\n                return element;\n            }),\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\n            actionHandler: {\n                callback: (content) => this._openerService.open(content, { fromUserGesture: true, allowContributedOpeners: true, allowCommands: markdown.isTrusted }).catch(onUnexpectedError),\n                disposables: disposables\n            }\n        };\n    }\n};\nMarkdownRenderer._ttpTokenizer = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('tokenizeToString', {\n    createHTML(html) {\n        return html;\n    }\n});\nMarkdownRenderer = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], MarkdownRenderer);\nexport { MarkdownRenderer };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { isEmptyMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { NullOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { HoverWidget } from '../../../../base/browser/ui/hover/hoverWidget.js';\nconst $ = dom.$;\nexport class MarginHoverWidget extends Disposable {\n    constructor(editor, languageService, openerService = NullOpenerService) {\n        super();\n        this._renderDisposeables = this._register(new DisposableStore());\n        this._editor = editor;\n        this._isVisible = false;\n        this._messages = [];\n        this._hover = this._register(new HoverWidget());\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        this._markdownRenderer = this._register(new MarkdownRenderer({ editor: this._editor }, languageService, openerService));\n        this._computer = new MarginHoverComputer(this._editor);\n        this._hoverOperation = this._register(new HoverOperation(this._editor, this._computer));\n        this._register(this._hoverOperation.onResult((result) => {\n            this._withResult(result.value);\n        }));\n        this._register(this._editor.onDidChangeModelDecorations(() => this._onModelDecorationsChanged()));\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return MarginHoverWidget.ID;\n    }\n    getDomNode() {\n        return this._hover.containerDomNode;\n    }\n    getPosition() {\n        return null;\n    }\n    _updateFont() {\n        const codeClasses = Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName('code'));\n        codeClasses.forEach(node => this._editor.applyFontInfo(node));\n    }\n    _onModelDecorationsChanged() {\n        if (this._isVisible) {\n            // The decorations have changed and the hover is visible,\n            // we need to recompute the displayed text\n            this._hoverOperation.cancel();\n            this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n        }\n    }\n    startShowingAt(lineNumber) {\n        if (this._computer.lineNumber === lineNumber) {\n            // We have to show the widget at the exact same line number as before, so no work is needed\n            return;\n        }\n        this._hoverOperation.cancel();\n        this.hide();\n        this._computer.lineNumber = lineNumber;\n        this._hoverOperation.start(0 /* HoverStartMode.Delayed */);\n    }\n    hide() {\n        this._computer.lineNumber = -1;\n        this._hoverOperation.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n    }\n    _withResult(result) {\n        this._messages = result;\n        if (this._messages.length > 0) {\n            this._renderMessages(this._computer.lineNumber, this._messages);\n        }\n        else {\n            this.hide();\n        }\n    }\n    _renderMessages(lineNumber, messages) {\n        this._renderDisposeables.clear();\n        const fragment = document.createDocumentFragment();\n        for (const msg of messages) {\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderedContents = this._renderDisposeables.add(this._markdownRenderer.render(msg.value));\n            hoverContentsElement.appendChild(renderedContents.element);\n            fragment.appendChild(markdownHoverElement);\n        }\n        this._updateContents(fragment);\n        this._showAt(lineNumber);\n    }\n    _updateContents(node) {\n        this._hover.contentsDomNode.textContent = '';\n        this._hover.contentsDomNode.appendChild(node);\n        this._updateFont();\n    }\n    _showAt(lineNumber) {\n        if (!this._isVisible) {\n            this._isVisible = true;\n            this._hover.containerDomNode.classList.toggle('hidden', !this._isVisible);\n        }\n        const editorLayout = this._editor.getLayoutInfo();\n        const topForLineNumber = this._editor.getTopForLineNumber(lineNumber);\n        const editorScrollTop = this._editor.getScrollTop();\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const nodeHeight = this._hover.containerDomNode.clientHeight;\n        const top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\n        this._hover.containerDomNode.style.left = `${editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth}px`;\n        this._hover.containerDomNode.style.top = `${Math.max(Math.round(top), 0)}px`;\n    }\n}\nMarginHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\nclass MarginHoverComputer {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._lineNumber = -1;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    set lineNumber(value) {\n        this._lineNumber = value;\n    }\n    computeSync() {\n        const toHoverMessage = (contents) => {\n            return {\n                value: contents\n            };\n        };\n        const lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n        const result = [];\n        if (!lineDecorations) {\n            return result;\n        }\n        for (const d of lineDecorations) {\n            if (!d.options.glyphMarginClassName) {\n                continue;\n            }\n            const hoverMessage = d.options.glyphMarginHoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            result.push(...asArray(hoverMessage).map(toHoverMessage));\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class HoverProviderResult {\n    constructor(provider, hover, ordinal) {\n        this.provider = provider;\n        this.hover = hover;\n        this.ordinal = ordinal;\n    }\n}\nfunction executeProvider(provider, ordinal, model, position, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const result = yield Promise.resolve(provider.provideHover(model, position, token));\n            if (result && isValid(result)) {\n                return new HoverProviderResult(provider, result, ordinal);\n            }\n        }\n        catch (err) {\n            onUnexpectedExternalError(err);\n        }\n        return undefined;\n    });\n}\nexport function getHover(registry, model, position, token) {\n    const providers = registry.ordered(model);\n    const promises = providers.map((provider, index) => executeProvider(provider, index, model, position, token));\n    return AsyncIterableObject.fromPromises(promises).coalesce();\n}\nexport function getHoverPromise(registry, model, position, token) {\n    return getHover(registry, model, position, token).map(item => item.hover).toPromise();\n}\nregisterModelAndPositionCommand('_executeHoverProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getHoverPromise(languageFeaturesService.hoverProvider, model, position, CancellationToken.None);\n});\nfunction isValid(result) {\n    const hasRange = (typeof result.range !== 'undefined');\n    const hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\n    return hasRange && hasHtmlContent;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { getHover } from './getHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkdownHover {\n    constructor(owner, range, contents, ordinal) {\n        this.owner = owner;\n        this.range = range;\n        this.contents = contents;\n        this.ordinal = ordinal;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet MarkdownHoverParticipant = class MarkdownHoverParticipant {\n    constructor(_editor, _languageService, _openerService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 2;\n    }\n    createLoadingMessage(anchor) {\n        return new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))], 2000);\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        let index = 1000;\n        const lineLength = model.getLineLength(lineNumber);\n        const languageId = model.getLanguageIdAtPosition(anchor.range.startLineNumber, anchor.range.startColumn);\n        const maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: languageId\n        });\n        if (typeof maxTokenizationLineLength === 'number' && lineLength >= maxTokenizationLineLength) {\n            result.push(new MarkdownHover(this, anchor.range, [{\n                    value: nls.localize('too many characters', \"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.\")\n                }], index++));\n        }\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const hoverMessage = d.options.hoverMessage;\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkdownHover(this, range, asArray(hoverMessage), index++));\n        }\n        return result;\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const model = this._editor.getModel();\n        if (!this._languageFeaturesService.hoverProvider.has(model)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        const position = new Position(anchor.range.startLineNumber, anchor.range.startColumn);\n        return getHover(this._languageFeaturesService.hoverProvider, model, position, token)\n            .filter(item => !isEmptyMarkdownString(item.hover.contents))\n            .map(item => {\n            const rng = item.hover.range ? Range.lift(item.hover.range) : anchor.range;\n            return new MarkdownHover(this, rng, item.hover.contents, item.ordinal);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nMarkdownHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], MarkdownHoverParticipant);\nexport { MarkdownHoverParticipant };\nexport function renderMarkdownHovers(context, hoverParts, editor, languageService, openerService) {\n    // Sort hover parts to keep them stable since they might come in async, out-of-order\n    hoverParts.sort((a, b) => a.ordinal - b.ordinal);\n    const disposables = new DisposableStore();\n    for (const hoverPart of hoverParts) {\n        for (const contents of hoverPart.contents) {\n            if (isEmptyMarkdownString(contents)) {\n                continue;\n            }\n            const markdownHoverElement = $('div.hover-row.markdown-hover');\n            const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n            const renderer = disposables.add(new MarkdownRenderer({ editor }, languageService, openerService));\n            disposables.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const renderedContents = disposables.add(renderer.render(contents));\n            hoverContentsElement.appendChild(renderedContents.element);\n            context.fragment.appendChild(markdownHoverElement);\n        }\n    }\n    return disposables;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../base/common/codicons.js';\nimport Severity from '../../../base/common/severity.js';\nimport { problemsErrorIconForeground, problemsInfoIconForeground, problemsWarningIconForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nexport var SeverityIcon;\n(function (SeverityIcon) {\n    function className(severity) {\n        switch (severity) {\n            case Severity.Ignore:\n                return 'severity-ignore ' + Codicon.info.classNames;\n            case Severity.Info:\n                return Codicon.info.classNames;\n            case Severity.Warning:\n                return Codicon.warning.classNames;\n            case Severity.Error:\n                return Codicon.error.classNames;\n            default:\n                return '';\n        }\n    }\n    SeverityIcon.className = className;\n})(SeverityIcon || (SeverityIcon = {}));\nregisterThemingParticipant((theme, collector) => {\n    const errorIconForeground = theme.getColor(problemsErrorIconForeground);\n    if (errorIconForeground) {\n        const errorCodiconSelector = Codicon.error.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${errorCodiconSelector},\n\t\t\t.markers-panel .marker-icon${errorCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${errorCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${errorCodiconSelector} {\n\t\t\t\tcolor: ${errorIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const warningIconForeground = theme.getColor(problemsWarningIconForeground);\n    if (warningIconForeground) {\n        const warningCodiconSelector = Codicon.warning.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${warningCodiconSelector},\n\t\t\t.markers-panel .marker-icon${warningCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${warningCodiconSelector},\n\t\t\t.extension-editor ${warningCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${warningCodiconSelector},\n\t\t\t.preferences-editor ${warningCodiconSelector} {\n\t\t\t\tcolor: ${warningIconForeground};\n\t\t\t}\n\t\t`);\n    }\n    const infoIconForeground = theme.getColor(problemsInfoIconForeground);\n    if (infoIconForeground) {\n        const infoCodiconSelector = Codicon.info.cssSelector;\n        collector.addRule(`\n\t\t\t.monaco-editor .zone-widget ${infoCodiconSelector},\n\t\t\t.markers-panel .marker-icon${infoCodiconSelector},\n\t\t\t.extensions-viewlet > .extensions ${infoCodiconSelector},\n\t\t\t.text-search-provider-messages .providerMessage ${infoCodiconSelector},\n\t\t\t.extension-editor ${infoCodiconSelector} {\n\t\t\t\tcolor: ${infoIconForeground};\n\t\t\t}\n\t\t`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/common/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(61 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nexport const editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nexport const editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nexport const editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nexport const editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nexport const editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nexport const editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nexport const editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = class MarkerController {\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(MarkerController.ID);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, disposableTimeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IMarkerDecorationsService } from '../../../common/services/markerDecorations.js';\nimport { getCodeActions } from '../../codeAction/browser/codeAction.js';\nimport { QuickFixAction, QuickFixController } from '../../codeAction/browser/codeActionCommands.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../../codeAction/browser/types.js';\nimport { MarkerController, NextMarkerAction } from '../../gotoError/browser/gotoError.js';\nimport * as nls from '../../../../nls.js';\nimport { IMarkerData, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst $ = dom.$;\nexport class MarkerHover {\n    constructor(owner, range, marker) {\n        this.owner = owner;\n        this.range = range;\n        this.marker = marker;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nconst markerCodeActionTrigger = {\n    type: 1 /* CodeActionTriggerType.Invoke */,\n    filter: { include: CodeActionKind.QuickFix },\n    triggerAction: CodeActionTriggerSource.QuickFixHover\n};\nlet MarkerHoverParticipant = class MarkerHoverParticipant {\n    constructor(_editor, _markerDecorationsService, _openerService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._markerDecorationsService = _markerDecorationsService;\n        this._openerService = _openerService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.hoverOrdinal = 5;\n        this.recentMarkerCodeActionsInfo = undefined;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const lineNumber = anchor.range.startLineNumber;\n        const maxColumn = model.getLineMaxColumn(lineNumber);\n        const result = [];\n        for (const d of lineDecorations) {\n            const startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n            const endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n            const marker = this._markerDecorationsService.getMarker(model.uri, d);\n            if (!marker) {\n                continue;\n            }\n            const range = new Range(anchor.range.startLineNumber, startColumn, anchor.range.startLineNumber, endColumn);\n            result.push(new MarkerHover(this, range, marker));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        if (!hoverParts.length) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        hoverParts.forEach(msg => context.fragment.appendChild(this.renderMarkerHover(msg, disposables)));\n        const markerHoverForStatusbar = hoverParts.length === 1 ? hoverParts[0] : hoverParts.sort((a, b) => MarkerSeverity.compare(a.marker.severity, b.marker.severity))[0];\n        this.renderMarkerStatusbar(context, markerHoverForStatusbar, disposables);\n        return disposables;\n    }\n    renderMarkerHover(markerHover, disposables) {\n        const hoverElement = $('div.hover-row');\n        const markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\n        const { source, message, code, relatedInformation } = markerHover.marker;\n        this._editor.applyFontInfo(markerElement);\n        const messageElement = dom.append(markerElement, $('span'));\n        messageElement.style.whiteSpace = 'pre-wrap';\n        messageElement.innerText = message;\n        if (source || code) {\n            // Code has link\n            if (code && typeof code !== 'string') {\n                const sourceAndCodeElement = $('span');\n                if (source) {\n                    const sourceElement = dom.append(sourceAndCodeElement, $('span'));\n                    sourceElement.innerText = source;\n                }\n                const codeLink = dom.append(sourceAndCodeElement, $('a.code-link'));\n                codeLink.setAttribute('href', code.target.toString());\n                disposables.add(dom.addDisposableListener(codeLink, 'click', (e) => {\n                    this._openerService.open(code.target, { allowCommands: true });\n                    e.preventDefault();\n                    e.stopPropagation();\n                }));\n                const codeElement = dom.append(codeLink, $('span'));\n                codeElement.innerText = code.value;\n                const detailsElement = dom.append(markerElement, sourceAndCodeElement);\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n            }\n            else {\n                const detailsElement = dom.append(markerElement, $('span'));\n                detailsElement.style.opacity = '0.6';\n                detailsElement.style.paddingLeft = '6px';\n                detailsElement.innerText = source && code ? `${source}(${code})` : source ? source : `(${code})`;\n            }\n        }\n        if (isNonEmptyArray(relatedInformation)) {\n            for (const { message, resource, startLineNumber, startColumn } of relatedInformation) {\n                const relatedInfoContainer = dom.append(markerElement, $('div'));\n                relatedInfoContainer.style.marginTop = '8px';\n                const a = dom.append(relatedInfoContainer, $('a'));\n                a.innerText = `${basename(resource)}(${startLineNumber}, ${startColumn}): `;\n                a.style.cursor = 'pointer';\n                disposables.add(dom.addDisposableListener(a, 'click', (e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    if (this._openerService) {\n                        this._openerService.open(resource, {\n                            fromUserGesture: true,\n                            editorOptions: { selection: { startLineNumber, startColumn } }\n                        }).catch(onUnexpectedError);\n                    }\n                }));\n                const messageElement = dom.append(relatedInfoContainer, $('span'));\n                messageElement.innerText = message;\n                this._editor.applyFontInfo(messageElement);\n            }\n        }\n        return hoverElement;\n    }\n    renderMarkerStatusbar(context, markerHover, disposables) {\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\n            context.statusBar.addAction({\n                label: nls.localize('view problem', \"View Problem\"),\n                commandId: NextMarkerAction.ID,\n                run: () => {\n                    var _a;\n                    context.hide();\n                    (_a = MarkerController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.showAtMarker(markerHover.marker);\n                    this._editor.focus();\n                }\n            });\n        }\n        if (!this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const quickfixPlaceholderElement = context.statusBar.append($('div'));\n            if (this.recentMarkerCodeActionsInfo) {\n                if (IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker) === IMarkerData.makeKey(markerHover.marker)) {\n                    if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                        quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    }\n                }\n                else {\n                    this.recentMarkerCodeActionsInfo = undefined;\n                }\n            }\n            const updatePlaceholderDisposable = this.recentMarkerCodeActionsInfo && !this.recentMarkerCodeActionsInfo.hasCodeActions ? Disposable.None : disposables.add(disposableTimeout(() => quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\"), 200));\n            if (!quickfixPlaceholderElement.textContent) {\n                // Have some content in here to avoid flickering\n                quickfixPlaceholderElement.textContent = String.fromCharCode(0xA0); // &nbsp;\n            }\n            const codeActionsPromise = this.getCodeActions(markerHover.marker);\n            disposables.add(toDisposable(() => codeActionsPromise.cancel()));\n            codeActionsPromise.then(actions => {\n                updatePlaceholderDisposable.dispose();\n                this.recentMarkerCodeActionsInfo = { marker: markerHover.marker, hasCodeActions: actions.validActions.length > 0 };\n                if (!this.recentMarkerCodeActionsInfo.hasCodeActions) {\n                    actions.dispose();\n                    quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\n                    return;\n                }\n                quickfixPlaceholderElement.style.display = 'none';\n                let showing = false;\n                disposables.add(toDisposable(() => {\n                    if (!showing) {\n                        actions.dispose();\n                    }\n                }));\n                context.statusBar.addAction({\n                    label: nls.localize('quick fixes', \"Quick Fix...\"),\n                    commandId: QuickFixAction.Id,\n                    run: (target) => {\n                        showing = true;\n                        const controller = QuickFixController.get(this._editor);\n                        const elementPosition = dom.getDomNodePagePosition(target);\n                        // Hide the hover pre-emptively, otherwise the editor can close the code actions\n                        // context menu as well when using keyboard navigation\n                        context.hide();\n                        controller === null || controller === void 0 ? void 0 : controller.showCodeActions(markerCodeActionTrigger, actions, {\n                            x: elementPosition.left + 6,\n                            y: elementPosition.top + elementPosition.height + 6,\n                            width: elementPosition.width,\n                            height: elementPosition.height\n                        });\n                    }\n                });\n            }, onUnexpectedError);\n        }\n    }\n    getCodeActions(marker) {\n        return createCancelablePromise(cancellationToken => {\n            return getCodeActions(this._languageFeaturesService.codeActionProvider, this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), markerCodeActionTrigger, Progress.None, cancellationToken);\n        });\n    }\n};\nMarkerHoverParticipant = __decorate([\n    __param(1, IMarkerDecorationsService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageFeaturesService)\n], MarkerHoverParticipant);\nexport { MarkerHoverParticipant };\nregisterThemingParticipant((theme, collector) => {\n    const linkFg = theme.getColor(textLinkForeground);\n    if (linkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${linkFg}; }`);\n    }\n    const activeLinkFg = theme.getColor(textLinkActiveForeground);\n    if (activeLinkFg) {\n        collector.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${activeLinkFg}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { GotoDefinitionAtPositionEditorContribution } from '../../gotoSymbol/browser/link/goToDefinitionAtPosition.js';\nimport { ContentHoverWidget, ContentHoverController } from './contentHover.js';\nimport { MarginHoverWidget } from './marginHover.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, editorHoverHighlight, editorHoverStatusBarBackground, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { HoverParticipantRegistry } from './hoverTypes.js';\nimport { MarkdownHoverParticipant } from './markdownHoverParticipant.js';\nimport { MarkerHoverParticipant } from './markerHoverParticipant.js';\nlet ModesHoverController = class ModesHoverController {\n    constructor(_editor, _instantiationService, _openerService, _languageService, _contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._openerService = _openerService;\n        this._languageService = _languageService;\n        this._toUnhook = new DisposableStore();\n        this._isMouseDown = false;\n        this._hoverClicked = false;\n        this._contentWidget = null;\n        this._glyphWidget = null;\n        this._hookEvents();\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(55 /* EditorOption.hover */)) {\n                this._unhookEvents();\n                this._hookEvents();\n            }\n        });\n    }\n    static get(editor) {\n        return editor.getContribution(ModesHoverController.ID);\n    }\n    _hookEvents() {\n        const hideWidgetsEventHandler = () => this._hideWidgets();\n        const hoverOpts = this._editor.getOption(55 /* EditorOption.hover */);\n        this._isHoverEnabled = hoverOpts.enabled;\n        this._isHoverSticky = hoverOpts.sticky;\n        if (this._isHoverEnabled) {\n            this._toUnhook.add(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n            this._toUnhook.add(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        else {\n            this._toUnhook.add(this._editor.onMouseMove((e) => this._onEditorMouseMove(e)));\n            this._toUnhook.add(this._editor.onKeyDown((e) => this._onKeyDown(e)));\n        }\n        this._toUnhook.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\n        this._toUnhook.add(this._editor.onDidScrollChange((e) => this._onEditorScrollChanged(e)));\n    }\n    _unhookEvents() {\n        this._toUnhook.clear();\n    }\n    _onEditorScrollChanged(e) {\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\n            this._hideWidgets();\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._isMouseDown = true;\n        const target = mouseEvent.target;\n        if (target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            this._hoverClicked = true;\n            // mouse down on top of content hover widget\n            return;\n        }\n        if (target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse down on top of overlay hover widget\n            return;\n        }\n        if (target.type !== 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            this._hoverClicked = false;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._isMouseDown = false;\n    }\n    _onEditorMouseLeave(mouseEvent) {\n        var _a;\n        const targetEm = (mouseEvent.event.browserEvent.relatedTarget);\n        if ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.containsNode(targetEm)) {\n            // when the mouse is inside hover widget\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onEditorMouseMove(mouseEvent) {\n        var _a, _b, _c, _d, _e;\n        const target = mouseEvent.target;\n        if (this._isMouseDown && this._hoverClicked) {\n            return;\n        }\n        if (this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID) {\n            // mouse moved on top of content hover widget\n            return;\n        }\n        if (this._isHoverSticky && !((_b = (_a = mouseEvent.event.browserEvent.view) === null || _a === void 0 ? void 0 : _a.getSelection()) === null || _b === void 0 ? void 0 : _b.isCollapsed)) {\n            // selected text within content hover widget\n            return;\n        }\n        if (!this._isHoverSticky && target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && target.detail === ContentHoverWidget.ID\n            && ((_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.isColorPickerVisible())) {\n            // though the hover is not sticky, the color picker needs to.\n            return;\n        }\n        if (this._isHoverSticky && target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */ && target.detail === MarginHoverWidget.ID) {\n            // mouse moved on top of overlay hover widget\n            return;\n        }\n        if (!this._isHoverEnabled) {\n            this._hideWidgets();\n            return;\n        }\n        const contentWidget = this._getOrCreateContentWidget();\n        if (contentWidget.maybeShowAt(mouseEvent)) {\n            (_d = this._glyphWidget) === null || _d === void 0 ? void 0 : _d.hide();\n            return;\n        }\n        if (target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ && target.position) {\n            (_e = this._contentWidget) === null || _e === void 0 ? void 0 : _e.hide();\n            if (!this._glyphWidget) {\n                this._glyphWidget = new MarginHoverWidget(this._editor, this._languageService, this._openerService);\n            }\n            this._glyphWidget.startShowingAt(target.position.lineNumber);\n            return;\n        }\n        this._hideWidgets();\n    }\n    _onKeyDown(e) {\n        if (e.keyCode !== 5 /* KeyCode.Ctrl */ && e.keyCode !== 6 /* KeyCode.Alt */ && e.keyCode !== 57 /* KeyCode.Meta */ && e.keyCode !== 4 /* KeyCode.Shift */) {\n            // Do not hide hover when a modifier key is pressed\n            this._hideWidgets();\n        }\n    }\n    _hideWidgets() {\n        var _a, _b, _c;\n        if ((this._isMouseDown && this._hoverClicked && ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()))) {\n            return;\n        }\n        this._hoverClicked = false;\n        (_b = this._glyphWidget) === null || _b === void 0 ? void 0 : _b.hide();\n        (_c = this._contentWidget) === null || _c === void 0 ? void 0 : _c.hide();\n    }\n    _getOrCreateContentWidget() {\n        if (!this._contentWidget) {\n            this._contentWidget = this._instantiationService.createInstance(ContentHoverController, this._editor);\n        }\n        return this._contentWidget;\n    }\n    isColorPickerVisible() {\n        var _a;\n        return ((_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.isColorPickerVisible()) || false;\n    }\n    showContentHover(range, mode, focus) {\n        this._getOrCreateContentWidget().startShowingAtRange(range, mode, focus);\n    }\n    dispose() {\n        var _a, _b;\n        this._unhookEvents();\n        this._toUnhook.dispose();\n        this._didChangeConfigurationHandler.dispose();\n        (_a = this._glyphWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._contentWidget) === null || _b === void 0 ? void 0 : _b.dispose();\n    }\n};\nModesHoverController.ID = 'editor.contrib.hover';\nModesHoverController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, IContextKeyService)\n], ModesHoverController);\nexport { ModesHoverController };\nclass ShowHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showHover',\n            label: nls.localize({\n                key: 'showHover',\n                comment: [\n                    'Label for action that will trigger the showing of a hover in the editor.',\n                    'This allows for users to show the hover without using the mouse.'\n                ]\n            }, \"Show Hover\"),\n            alias: 'Show Hover',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const focus = editor.getOption(2 /* EditorOption.accessibilitySupport */) === 2 /* AccessibilitySupport.Enabled */;\n        controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, focus);\n    }\n}\nclass ShowDefinitionPreviewHoverAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showDefinitionPreviewHover',\n            label: nls.localize({\n                key: 'showDefinitionPreviewHover',\n                comment: [\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\n                    'This allows for users to show the definition preview hover without using the mouse.'\n                ]\n            }, \"Show Definition Preview Hover\"),\n            alias: 'Show Definition Preview Hover',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = ModesHoverController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const position = editor.getPosition();\n        if (!position) {\n            return;\n        }\n        const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n        const goto = GotoDefinitionAtPositionEditorContribution.get(editor);\n        if (!goto) {\n            return;\n        }\n        const promise = goto.startFindDefinitionFromCursor(position);\n        promise.then(() => {\n            controller.showContentHover(range, 1 /* HoverStartMode.Immediate */, true);\n        });\n    }\n}\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\nregisterEditorAction(ShowHoverAction);\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\nHoverParticipantRegistry.register(MarkdownHoverParticipant);\nHoverParticipantRegistry.register(MarkerHoverParticipant);\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\n    if (editorHoverHighlightColor) {\n        collector.addRule(`.monaco-editor .hoverHighlight { background-color: ${editorHoverHighlightColor}; }`);\n    }\n    const hoverBackground = theme.getColor(editorHoverBackground);\n    if (hoverBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover { background-color: ${hoverBackground}; }`);\n    }\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${hoverBorder}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .monaco-hover a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .monaco-hover a:hover { color: ${linkHover}; }`);\n    }\n    const hoverForeground = theme.getColor(editorHoverForeground);\n    if (hoverForeground) {\n        collector.addRule(`.monaco-editor .monaco-hover { color: ${hoverForeground}; }`);\n    }\n    const actionsBackground = theme.getColor(editorHoverStatusBarBackground);\n    if (actionsBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${actionsBackground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .monaco-hover code { background-color: ${codeBackground}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function createStringDataTransferItem(stringOrPromise) {\n    return {\n        asString: () => __awaiter(this, void 0, void 0, function* () { return stringOrPromise; }),\n        asFile: () => undefined,\n        value: typeof stringOrPromise === 'string' ? stringOrPromise : undefined,\n    };\n}\nexport function createFileDataTransferItem(fileName, uri, data) {\n    return {\n        asString: () => __awaiter(this, void 0, void 0, function* () { return ''; }),\n        asFile: () => ({ name: fileName, uri, data }),\n        value: undefined,\n    };\n}\nexport class VSDataTransfer {\n    constructor() {\n        this._entries = new Map();\n    }\n    get size() {\n        return this._entries.size;\n    }\n    has(mimeType) {\n        return this._entries.has(this.toKey(mimeType));\n    }\n    get(mimeType) {\n        var _a;\n        return (_a = this._entries.get(this.toKey(mimeType))) === null || _a === void 0 ? void 0 : _a[0];\n    }\n    append(mimeType, value) {\n        const existing = this._entries.get(mimeType);\n        if (existing) {\n            existing.push(value);\n        }\n        else {\n            this._entries.set(this.toKey(mimeType), [value]);\n        }\n    }\n    replace(mimeType, value) {\n        this._entries.set(this.toKey(mimeType), [value]);\n    }\n    delete(mimeType) {\n        this._entries.delete(this.toKey(mimeType));\n    }\n    *entries() {\n        for (const [mine, items] of this._entries.entries()) {\n            for (const item of items) {\n                yield [mine, item];\n            }\n        }\n    }\n    values() {\n        return Array.from(this._entries.values()).flat();\n    }\n    forEach(f) {\n        for (const [mime, item] of this.entries()) {\n            f(item, mime);\n        }\n    }\n    toKey(mimeType) {\n        return mimeType.toLowerCase();\n    }\n}\n","export const generateUuid = (function () {\n    // use `randomUUID` if possible\n    if (typeof crypto === 'object' && typeof crypto.randomUUID === 'function') {\n        return crypto.randomUUID.bind(crypto);\n    }\n    // use `randomValues` if possible\n    let getRandomValues;\n    if (typeof crypto === 'object' && typeof crypto.getRandomValues === 'function') {\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    else {\n        getRandomValues = function (bucket) {\n            for (let i = 0; i < bucket.length; i++) {\n                bucket[i] = Math.floor(Math.random() * 256);\n            }\n            return bucket;\n        };\n    }\n    // prep-work\n    const _data = new Uint8Array(16);\n    const _hex = [];\n    for (let i = 0; i < 256; i++) {\n        _hex.push(i.toString(16).padStart(2, '0'));\n    }\n    return function generateUuid() {\n        // get data\n        getRandomValues(_data);\n        // set version bits\n        _data[6] = (_data[6] & 0x0f) | 0x40;\n        _data[8] = (_data[8] & 0x3f) | 0x80;\n        // print as string\n        let i = 0;\n        let result = '';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += '-';\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        result += _hex[_data[i++]];\n        return result;\n    };\n})();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DataTransfers } from '../../../base/browser/dnd.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { extractSelection } from '../../opener/common/opener.js';\nimport { Registry } from '../../registry/common/platform.js';\n//#region Editor / Resources DND\nexport const CodeDataTransfers = {\n    EDITORS: 'CodeEditors',\n    FILES: 'CodeFiles'\n};\nexport function extractEditorsDropData(e) {\n    var _a;\n    const editors = [];\n    if (e.dataTransfer && e.dataTransfer.types.length > 0) {\n        // Data Transfer: Code Editors\n        const rawEditorsData = e.dataTransfer.getData(CodeDataTransfers.EDITORS);\n        if (rawEditorsData) {\n            try {\n                editors.push(...parse(rawEditorsData));\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Data Transfer: Resources\n        else {\n            try {\n                const rawResourcesData = e.dataTransfer.getData(DataTransfers.RESOURCES);\n                editors.push(...createDraggedEditorInputFromRawResourcesData(rawResourcesData));\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Check for native file transfer\n        if ((_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.files) {\n            for (let i = 0; i < e.dataTransfer.files.length; i++) {\n                const file = e.dataTransfer.files[i];\n                if (file && file.path /* Electron only */) {\n                    try {\n                        editors.push({ resource: URI.file(file.path), isExternal: true, allowWorkspaceOpen: true });\n                    }\n                    catch (error) {\n                        // Invalid URI\n                    }\n                }\n            }\n        }\n        // Check for CodeFiles transfer\n        const rawCodeFiles = e.dataTransfer.getData(CodeDataTransfers.FILES);\n        if (rawCodeFiles) {\n            try {\n                const codeFiles = JSON.parse(rawCodeFiles);\n                for (const codeFile of codeFiles) {\n                    editors.push({ resource: URI.file(codeFile), isExternal: true, allowWorkspaceOpen: true });\n                }\n            }\n            catch (error) {\n                // Invalid transfer\n            }\n        }\n        // Workbench contributions\n        const contributions = Registry.as(Extensions.DragAndDropContribution).getAll();\n        for (const contribution of contributions) {\n            const data = e.dataTransfer.getData(contribution.dataFormatKey);\n            if (data) {\n                try {\n                    editors.push(...contribution.getEditorInputs(data));\n                }\n                catch (error) {\n                    // Invalid transfer\n                }\n            }\n        }\n    }\n    return editors;\n}\nexport function createDraggedEditorInputFromRawResourcesData(rawResourcesData) {\n    const editors = [];\n    if (rawResourcesData) {\n        const resourcesRaw = JSON.parse(rawResourcesData);\n        for (const resourceRaw of resourcesRaw) {\n            if (resourceRaw.indexOf(':') > 0) { // mitigate https://github.com/microsoft/vscode/issues/124946\n                const { selection, uri } = extractSelection(URI.parse(resourceRaw));\n                editors.push({ resource: uri, options: { selection } });\n            }\n        }\n    }\n    return editors;\n}\nclass DragAndDropContributionRegistry {\n    constructor() {\n        this._contributions = new Map();\n    }\n    getAll() {\n        return this._contributions.values();\n    }\n}\nexport const Extensions = {\n    DragAndDropContribution: 'workbench.contributions.dragAndDrop'\n};\nRegistry.add(Extensions.DragAndDropContribution, new DragAndDropContributionRegistry());\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { distinct } from '../../base/common/arrays.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers, extractEditorsDropData } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nexport function createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n]);\nexport function addExternalEditorsDropData(dataTransfer, dragEvent, overwriteUriList = false) {\n    var _a;\n    if (dragEvent.dataTransfer && (overwriteUriList || !dataTransfer.has(Mimes.uriList))) {\n        const editorData = extractEditorsDropData(dragEvent)\n            .filter(input => input.resource)\n            .map(input => input.resource.toString());\n        // Also add in the files\n        for (const item of (_a = dragEvent.dataTransfer) === null || _a === void 0 ? void 0 : _a.items) {\n            const file = item.getAsFile();\n            if (file) {\n                editorData.push(file.path ? URI.file(file.path).toString() : file.name);\n            }\n        }\n        if (editorData.length) {\n            dataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        dataTransfer.delete(internal);\n    }\n}\nexport const UriList = Object.freeze({\n    // http://amundsen.com/hypermedia/urilist/\n    create: (entries) => {\n        return distinct(entries.map(x => x.toString())).join('\\r\\n');\n    },\n    parse: (str) => {\n        return str.split('\\r\\n').filter(value => !value.startsWith('#'));\n    }\n});\n","import { hasDriveLetter } from './extpath.js';\nimport { isWindows } from './platform.js';\nexport function normalizeDriveLetter(path, isWindowsOS = isWindows) {\n    if (hasDriveLetter(path, isWindowsOS)) {\n        return path.charAt(0).toUpperCase() + path.slice(1);\n    }\n    return path;\n}\nlet normalizedUserHomeCached = Object.create(null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'CURSOR_INDEX': true,\n    'CURSOR_NUMBER': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            const value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        else if (name === 'CURSOR_INDEX') {\n            return String(this._selectionIdx);\n        }\n        else if (name === 'CURSOR_NUMBER') {\n            return String(this._selectionIdx + 1);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nlet CommentBasedVariableResolver = class CommentBasedVariableResolver {\n    constructor(_model, _selection, _languageConfigurationService) {\n        this._model = _model;\n        this._selection = _selection;\n        this._languageConfigurationService = _languageConfigurationService;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n};\nCommentBasedVariableResolver = __decorate([\n    __param(2, ILanguageConfigurationService)\n], CommentBasedVariableResolver);\nexport { CommentBasedVariableResolver };\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (!workspaceIdentifier) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        const filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._offset = -1;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    initialize(textChange) {\n        this._offset = textChange.newPosition;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.removeDecorations([...this._placeholderDecorations.values()]);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._offset === -1) {\n            throw new Error(`Snippet not initialized!`);\n        }\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            const operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    get isTrivialSnippet() {\n        return this._snippet.placeholders.length === 0\n            || (this._snippet.placeholders.length === 1 && this._snippet.placeholders[0].isFinalTabstop);\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get activeChoice() {\n        if (!this._placeholderDecorations) {\n            return undefined;\n        }\n        const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\n        if (!(placeholder === null || placeholder === void 0 ? void 0 : placeholder.choice)) {\n            return undefined;\n        }\n        const id = this._placeholderDecorations.get(placeholder);\n        if (!id) {\n            return undefined;\n        }\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (!range) {\n            return undefined;\n        }\n        return { range, choice: placeholder.choice };\n    }\n    get hasChoice() {\n        let result = false;\n        this._snippet.walk(marker => {\n            result = marker instanceof Choice;\n            return !result;\n        });\n        return result;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(nested._offset !== -1);\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetSession = class SnippetSession {\n    constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\n        this._editor = _editor;\n        this._template = _template;\n        this._options = _options;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._templateMerges = [];\n        this._snippets = [];\n    }\n    static adjustWhitespace(model, position, snippet, adjustIndentation, adjustNewlines) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    const prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        const firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        const firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(73 /* EditorOption.multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection, languageConfigurationService),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edits[idx]._isTracked = true;\n            snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        if (!editor.hasModel() || snippetEdits.length === 0) {\n            return { edits: [], snippets: [] };\n        }\n        const edits = [];\n        const model = editor.getModel();\n        const parser = new SnippetParser();\n        const snippet = new TextmateSnippet();\n        // snippet variables resolver\n        const resolver = new CompositeSnippetVariableResolver([\n            editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)),\n            new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(73 /* EditorOption.multiCursorPaste */) === 'spread'),\n            new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer),\n            new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService),\n            new TimeBasedVariableResolver,\n            new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))),\n            new RandomBasedVariableResolver,\n        ]);\n        //\n        snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n        let offset = 0;\n        for (let i = 0; i < snippetEdits.length; i++) {\n            const { range, template } = snippetEdits[i];\n            // gaps between snippet edits are appended as text nodes. this\n            // ensures placeholder-offsets are later correct\n            if (i > 0) {\n                const lastRange = snippetEdits[i - 1].range;\n                const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\n                const textNode = new Text(model.getValueInRange(textRange));\n                snippet.appendChild(textNode);\n                offset += textNode.value.length;\n            }\n            parser.parseFragment(template, snippet);\n            snippet.resolveVariables(resolver);\n            const snippetText = snippet.toString();\n            const snippetFragmentText = snippetText.slice(offset);\n            offset = snippetText.length;\n            // make edit\n            const edit = EditOperation.replace(range, snippetFragmentText);\n            edit.identifier = { major: i, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edit._isTracked = true;\n            edits.push(edit);\n        }\n        //\n        parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\n        return {\n            edits,\n            snippets: [new OneSnippet(editor, snippet, '')]\n        };\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = typeof this._template === 'string'\n            ? SnippetSession.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService)\n            : SnippetSession.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            // Trivial snippets have no placeholder or are just the final placeholder. That means they\n            // are just text insertions and we don't need to merge the nested snippet into the existing\n            // snippet\n            const isTrivialSnippet = snippets[0].isTrivialSnippet;\n            if (!isTrivialSnippet) {\n                for (const snippet of this._snippets) {\n                    snippet.merge(snippets);\n                }\n                console.assert(snippets.length === 0);\n            }\n            if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\n                return this._move(undefined);\n            }\n            else {\n                return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get hasChoice() {\n        return this._snippets[0].hasChoice;\n    }\n    get activeChoice() {\n        return this._snippets[0].activeChoice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        const allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (const [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n};\nSnippetSession = __decorate([\n    __param(3, ILanguageConfigurationService)\n], SnippetSession);\nexport { SnippetSession };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n    constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\n        this._editor = _editor;\n        this._logService = _logService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    apply(edits, opts) {\n        try {\n            this._doInsert(edits, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_edits=', edits);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        // don't merge\n        if (this._session && typeof template !== 'string') {\n            this.cancel();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\n            this._session.insert();\n        }\n        else {\n            assertType(typeof template === 'string');\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        // regster completion item provider when there is any choice element\n        if ((_a = this._session) === null || _a === void 0 ? void 0 : _a.hasChoice) {\n            this._choiceCompletionItemProvider = {\n                provideCompletionItems: (model, position) => {\n                    if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\n                        return undefined;\n                    }\n                    const { activeChoice } = this._session;\n                    if (!activeChoice || activeChoice.choice.options.length === 0) {\n                        return undefined;\n                    }\n                    const word = model.getValueInRange(activeChoice.range);\n                    const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\n                    const suggestions = [];\n                    for (let i = 0; i < activeChoice.choice.options.length; i++) {\n                        const option = activeChoice.choice.options[i];\n                        suggestions.push({\n                            kind: 13 /* CompletionItemKind.Value */,\n                            label: option.value,\n                            insertText: option.value,\n                            sortText: 'a'.repeat(i + 1),\n                            range: activeChoice.range,\n                            filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\n                            command: { id: 'jumpToNextSnippetPlaceholder', title: localize('next', 'Go to next placeholder...') }\n                        });\n                    }\n                    return { suggestions };\n                }\n            };\n            const registration = this._languageFeaturesService.completionProvider.register({\n                language: this._editor.getModel().getLanguageId(),\n                pattern: this._editor.getModel().uri.fsPath,\n                scheme: this._editor.getModel().uri.scheme\n            }, this._choiceCompletionItemProvider);\n            this._snippetListener.add(registration);\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { activeChoice } = this._session;\n        if (!activeChoice || !this._choiceCompletionItemProvider) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== activeChoice.choice) {\n            this._currentChoice = activeChoice.choice;\n            // trigger suggest with the special choice completion provider\n            queueMicrotask(() => {\n                showSimpleSuggestions(this._editor, this._choiceCompletionItemProvider);\n            });\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        this._currentChoice = undefined;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        if (this._session) {\n            this._session.prev();\n        }\n        this._updateState();\n    }\n    next() {\n        if (this._session) {\n            this._session.next();\n        }\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, ILogService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageConfigurationService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n// ---\nexport function performSnippetEdit(editor, snippet, selections) {\n    const controller = SnippetController2.get(editor);\n    if (!controller) {\n        return false;\n    }\n    editor.focus();\n    controller.apply(selections.map(selection => {\n        return {\n            range: Selection.liftSelection(selection),\n            template: snippet\n        };\n    }));\n    return controller.isInSnippet();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { createCancelablePromise } from '../../../../base/common/async.js';\nimport { createStringDataTransferItem } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = class CopyPasteController extends Disposable {\n    constructor(editor, _bulkEditService, _clipboardService, _configurationService, _languageFeaturesService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n    }\n    arePasteActionsEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.pasteActions.enabled', {\n            resource: model.uri\n        });\n    }\n    handleCopy(e) {\n        var _a;\n        if (!e.clipboardData || !this._editor.hasTextFocus()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        if (!this.arePasteActionsEnabled(model)) {\n            return;\n        }\n        const ranges = [...selections];\n        const primarySelection = selections[0];\n        const wasFromEmptySelection = primarySelection.isEmpty();\n        if (wasFromEmptySelection) {\n            if (!this._editor.getOption(33 /* EditorOption.emptySelectionClipboard */)) {\n                return;\n            }\n            ranges[0] = new Range(primarySelection.startLineNumber, 0, primarySelection.startLineNumber, model.getLineLength(primarySelection.startLineNumber));\n        }\n        const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { wasFromEmptySelection });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            wasFromEmptySelection,\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = yield Promise.all(providers.map(provider => {\n                return provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n            }));\n            for (const result of results) {\n                result === null || result === void 0 ? void 0 : result.forEach((value, key) => {\n                    dataTransfer.replace(key, value);\n                });\n            }\n            return dataTransfer;\n        }));\n        (_a = this._currentClipboardItem) === null || _a === void 0 ? void 0 : _a.dataTransferPromise.cancel();\n        this._currentClipboardItem = { handle: handle, dataTransferPromise: promise };\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    handlePaste(e) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!this.arePasteActionsEnabled(model)) {\n                return;\n            }\n            let metadata;\n            const rawMetadata = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData(vscodeClipboardMime);\n            if (rawMetadata && typeof rawMetadata === 'string') {\n                metadata = JSON.parse(rawMetadata);\n            }\n            const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model);\n            if (!providers.length) {\n                return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const originalDocVersion = model.getVersionId();\n            const tokenSource = new EditorStateCancellationTokenSource(this._editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */);\n            try {\n                const dataTransfer = toVSDataTransfer(e.clipboardData);\n                if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_b = this._currentClipboardItem) === null || _b === void 0 ? void 0 : _b.handle) === metadata.id) {\n                    const toMergeDataTransfer = yield this._currentClipboardItem.dataTransferPromise;\n                    toMergeDataTransfer.forEach((value, key) => {\n                        dataTransfer.replace(key, value);\n                    });\n                }\n                if (!dataTransfer.has(Mimes.uriList)) {\n                    const resources = yield this._clipboardService.readResources();\n                    if (resources.length) {\n                        dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                    }\n                }\n                dataTransfer.delete(vscodeClipboardMime);\n                for (const provider of providers) {\n                    if (!provider.pasteMimeTypes.some(type => {\n                        if (type.toLowerCase() === DataTransfers.FILES.toLowerCase()) {\n                            return [...dataTransfer.values()].some(item => item.asFile());\n                        }\n                        return dataTransfer.has(type);\n                    })) {\n                        continue;\n                    }\n                    const edit = yield provider.provideDocumentPasteEdits(model, selections, dataTransfer, tokenSource.token);\n                    if (originalDocVersion !== model.getVersionId()) {\n                        return;\n                    }\n                    if (edit) {\n                        performSnippetEdit(this._editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, selections);\n                        if (edit.additionalEdit) {\n                            yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor: this._editor });\n                        }\n                        return;\n                    }\n                }\n                // Default handler\n                const textDataTransfer = (_c = dataTransfer.get(Mimes.text)) !== null && _c !== void 0 ? _c : dataTransfer.get('text');\n                if (!textDataTransfer) {\n                    return;\n                }\n                const text = yield textDataTransfer.asString();\n                if (originalDocVersion !== model.getVersionId()) {\n                    return;\n                }\n                this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                    text: text,\n                    pasteOnNewLine: metadata === null || metadata === void 0 ? void 0 : metadata.wasFromEmptySelection,\n                    multicursorText: null\n                });\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, IClipboardService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], CopyPasteController);\nexport { CopyPasteController };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { CopyPasteController } from './copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController);\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.pasteActions.enabled': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('pasteActions', \"Enable/disable running edits from extensions on paste.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet ContextMenuController = class ContextMenuController {\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu({ x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 });\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(55 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const minimapOptions = this._editor.getOption(67 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run,\n                dispose: () => null\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController);\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n    constructor(selection, targetPosition, copy) {\n        this.selection = selection;\n        this.targetPosition = targetPosition;\n        this.copy = copy;\n        this.targetSelection = null;\n    }\n    getEditOperations(model, builder) {\n        const text = model.getValueInRange(this.selection);\n        if (!this.copy) {\n            builder.addEditOperation(this.selection, null);\n        }\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n        )) {\n            this.targetSelection = this.selection;\n            return;\n        }\n        if (this.copy) {\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n            // Drag the selection downwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n            // Drag the selection upwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        // The target position is at the same line as the selection's end position.\n        if (this.selection.endColumn <= this.targetPosition.column) {\n            // The target position is after the selection's end position\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column :\n                this.selection.endColumn);\n        }\n        else {\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n        }\n    }\n    computeCursorState(model, helper) {\n        return this.targetSelection;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n    if (isMacintosh) {\n        return e.altKey;\n    }\n    else {\n        return e.ctrlKey;\n    }\n}\nexport class DragAndDropController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._dndDecorationIds = this._editor.createDecorationsCollection();\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        this._dragSelection = null;\n    }\n    onEditorBlur() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n    }\n    onEditorKeyDown(e) {\n        if (!this._editor.getOption(31 /* EditorOption.dragAndDrop */) || this._editor.getOption(18 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = true;\n        }\n        if (this._mouseDown && hasTriggerModifier(e)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n    }\n    onEditorKeyUp(e) {\n        if (!this._editor.getOption(31 /* EditorOption.dragAndDrop */) || this._editor.getOption(18 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = false;\n        }\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._mouseDown = true;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._mouseDown = false;\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n    }\n    _onEditorMouseDrag(mouseEvent) {\n        const target = mouseEvent.target;\n        if (this._dragSelection === null) {\n            const selections = this._editor.getSelections() || [];\n            const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n            if (possibleSelections.length === 1) {\n                this._dragSelection = possibleSelections[0];\n            }\n            else {\n                return;\n            }\n        }\n        if (hasTriggerModifier(mouseEvent.event)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n        else {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n        if (target.position) {\n            if (this._dragSelection.containsPosition(target.position)) {\n                this._removeDecoration();\n            }\n            else {\n                this.showAt(target.position);\n            }\n        }\n    }\n    _onEditorMouseDropCanceled() {\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    _onEditorMouseDrop(mouseEvent) {\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n            const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n            if (this._dragSelection === null) {\n                let newSelections = null;\n                if (mouseEvent.event.shiftKey) {\n                    const primarySelection = this._editor.getSelection();\n                    if (primarySelection) {\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n                    }\n                }\n                else {\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\n                        if (selection.containsPosition(newCursorPosition)) {\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n                        }\n                        else {\n                            return selection;\n                        }\n                    });\n                }\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\n            }\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\n                ((hasTriggerModifier(mouseEvent.event) ||\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n                )) {\n                this._editor.pushUndoStop();\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n                this._editor.pushUndoStop();\n            }\n        }\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    showAt(position) {\n        this._dndDecorationIds.set([{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: DragAndDropController._DECORATION_OPTIONS\n            }]);\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n    }\n    _removeDecoration() {\n        this._dndDecorationIds.clear();\n    }\n    _hitContent(target) {\n        return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ ||\n            target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\n    }\n    _hitMargin(target) {\n        return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ ||\n            target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ ||\n            target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\n    }\n    dispose() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        super.dispose();\n    }\n}\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'dnd-target',\n    className: 'dnd-target'\n});\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { addExternalEditorsDropData, toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nlet DropIntoEditorController = class DropIntoEditorController extends Disposable {\n    constructor(editor, _bulkEditService, _languageFeaturesService, _progressService, workspaceContextService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._progressService = _progressService;\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n        this._languageFeaturesService.documentOnDropEditProvider.register('*', new DefaultOnDropProvider(workspaceContextService));\n    }\n    onDropIntoEditor(editor, position, dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer || !editor.hasModel()) {\n                return;\n            }\n            const model = editor.getModel();\n            const initialModelVersion = model.getVersionId();\n            const ourDataTransfer = yield this.extractDataTransferData(dragEvent);\n            if (ourDataTransfer.size === 0) {\n                return;\n            }\n            if (editor.getModel().getVersionId() !== initialModelVersion) {\n                return;\n            }\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */);\n            try {\n                const providers = this._languageFeaturesService.documentOnDropEditProvider.ordered(model);\n                const edit = yield this._progressService.withProgress({\n                    location: 15 /* ProgressLocation.Notification */,\n                    delay: 750,\n                    title: localize('dropProgressTitle', \"Running drop handlers...\"),\n                    cancellable: true,\n                }, () => {\n                    return raceCancellation((() => __awaiter(this, void 0, void 0, function* () {\n                        for (const provider of providers) {\n                            const edit = yield provider.provideDocumentOnDropEdits(model, position, ourDataTransfer, tokenSource.token);\n                            if (tokenSource.token.isCancellationRequested) {\n                                return undefined;\n                            }\n                            if (edit) {\n                                return edit;\n                            }\n                        }\n                        return undefined;\n                    }))(), tokenSource.token);\n                }, () => {\n                    tokenSource.cancel();\n                });\n                if (tokenSource.token.isCancellationRequested || editor.getModel().getVersionId() !== initialModelVersion) {\n                    return;\n                }\n                if (edit) {\n                    const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                    performSnippetEdit(editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, [Selection.fromRange(range, 0 /* SelectionDirection.LTR */)]);\n                    if (edit.additionalEdit) {\n                        yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor });\n                    }\n                    return;\n                }\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n    extractDataTransferData(dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer) {\n                return new VSDataTransfer();\n            }\n            const textEditorDataTransfer = toVSDataTransfer(dragEvent.dataTransfer);\n            addExternalEditorsDropData(textEditorDataTransfer, dragEvent);\n            return textEditorDataTransfer;\n        });\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IProgressService),\n    __param(4, IWorkspaceContextService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\nlet DefaultOnDropProvider = class DefaultOnDropProvider {\n    constructor(_workspaceContextService) {\n        this._workspaceContextService = _workspaceContextService;\n    }\n    provideDocumentOnDropEdits(_model, _position, dataTransfer, _token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const urlListEntry = dataTransfer.get(Mimes.uriList);\n            if (urlListEntry) {\n                const urlList = yield urlListEntry.asString();\n                const snippet = this.getUriListInsertText(urlList);\n                if (snippet) {\n                    return { insertText: snippet };\n                }\n            }\n            const textEntry = (_a = dataTransfer.get('text')) !== null && _a !== void 0 ? _a : dataTransfer.get(Mimes.text);\n            if (textEntry) {\n                const text = yield textEntry.asString();\n                return { insertText: text };\n            }\n            return undefined;\n        });\n    }\n    getUriListInsertText(strUriList) {\n        const uris = [];\n        for (const resource of UriList.parse(strUriList)) {\n            try {\n                uris.push(URI.parse(resource));\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        if (!uris.length) {\n            return;\n        }\n        return uris\n            .map(uri => {\n            const root = this._workspaceContextService.getWorkspaceFolder(uri);\n            if (root) {\n                const rel = relativePath(root.uri, uri);\n                if (rel) {\n                    return rel;\n                }\n            }\n            return uri.fsPath;\n        })\n            .join(' ');\n    }\n};\nDefaultOnDropProvider = __decorate([\n    __param(0, IWorkspaceContextService)\n], DefaultOnDropProvider);\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nexport class FindDecorations {\n    constructor(editor) {\n        this._editor = editor;\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n        this._startPosition = this._editor.getPosition();\n    }\n    dispose() {\n        this._editor.removeDecorations(this._allDecorations());\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    reset() {\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    getCount() {\n        return this._decorations.length;\n    }\n    /** @deprecated use getFindScopes to support multiple selections */\n    getFindScope() {\n        if (this._findScopeDecorationIds[0]) {\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n        }\n        return null;\n    }\n    getFindScopes() {\n        if (this._findScopeDecorationIds.length) {\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n            if (scopes.length) {\n                return scopes;\n            }\n        }\n        return null;\n    }\n    getStartPosition() {\n        return this._startPosition;\n    }\n    setStartPosition(newStartPosition) {\n        this._startPosition = newStartPosition;\n        this.setCurrentFindMatch(null);\n    }\n    _getDecorationIndex(decorationId) {\n        const index = this._decorations.indexOf(decorationId);\n        if (index >= 0) {\n            return index + 1;\n        }\n        return 1;\n    }\n    getCurrentMatchesPosition(desiredRange) {\n        const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n        for (const candidate of candidates) {\n            const candidateOpts = candidate.options;\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n                return this._getDecorationIndex(candidate.id);\n            }\n        }\n        // We don't know the current match position, so returns zero to show '?' in find widget\n        return 0;\n    }\n    setCurrentFindMatch(nextMatch) {\n        let newCurrentDecorationId = null;\n        let matchPosition = 0;\n        if (nextMatch) {\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\n                const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n                if (nextMatch.equalsRange(range)) {\n                    newCurrentDecorationId = this._decorations[i];\n                    matchPosition = (i + 1);\n                    break;\n                }\n            }\n        }\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n            this._editor.changeDecorations((changeAccessor) => {\n                if (this._highlightedDecorationId !== null) {\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n                    this._highlightedDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    this._highlightedDecorationId = newCurrentDecorationId;\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n                }\n                if (this._rangeHighlightDecorationId !== null) {\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n                    this._rangeHighlightDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n                        const lineBeforeEnd = rng.endLineNumber - 1;\n                        const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n                    }\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n                }\n            });\n        }\n        return matchPosition;\n    }\n    set(findMatches, findScopes) {\n        this._editor.changeDecorations((accessor) => {\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n            const newOverviewRulerApproximateDecorations = [];\n            if (findMatches.length > 1000) {\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n                // approximate a distance in lines where matches should be merged\n                const lineCount = this._editor.getModel().getLineCount();\n                const height = this._editor.getLayoutInfo().height;\n                const approxPixelsPerLine = height / lineCount;\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n                // merge decorations as much as possible\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\n                for (let i = 1, len = findMatches.length; i < len; i++) {\n                    const range = findMatches[i].range;\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n                        if (range.endLineNumber > prevEndLineNumber) {\n                            prevEndLineNumber = range.endLineNumber;\n                        }\n                    }\n                    else {\n                        newOverviewRulerApproximateDecorations.push({\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                        });\n                        prevStartLineNumber = range.startLineNumber;\n                        prevEndLineNumber = range.endLineNumber;\n                    }\n                }\n                newOverviewRulerApproximateDecorations.push({\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                });\n            }\n            // Find matches\n            const newFindMatchesDecorations = new Array(findMatches.length);\n            for (let i = 0, len = findMatches.length; i < len; i++) {\n                newFindMatchesDecorations[i] = {\n                    range: findMatches[i].range,\n                    options: findMatchesOptions\n                };\n            }\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n            // Overview ruler approximate decorations\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n            // Range highlight\n            if (this._rangeHighlightDecorationId) {\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\n                this._rangeHighlightDecorationId = null;\n            }\n            // Find scope\n            if (this._findScopeDecorationIds.length) {\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n                this._findScopeDecorationIds = [];\n            }\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n            }\n        });\n    }\n    matchBeforePosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.endLineNumber > position.lineNumber) {\n                continue;\n            }\n            if (r.endLineNumber < position.lineNumber) {\n                return r;\n            }\n            if (r.endColumn > position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n    }\n    matchAfterPosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.startLineNumber < position.lineNumber) {\n                continue;\n            }\n            if (r.startLineNumber > position.lineNumber) {\n                return r;\n            }\n            if (r.startColumn < position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\n    }\n    _allDecorations() {\n        let result = [];\n        result = result.concat(this._decorations);\n        result = result.concat(this._overviewRulerApproximateDecorations);\n        if (this._findScopeDecorationIds.length) {\n            result.push(...this._findScopeDecorationIds);\n        }\n        if (this._rangeHighlightDecorationId) {\n            result.push(this._rangeHighlightDecorationId);\n        }\n        return result;\n    }\n}\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'current-find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 10,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'findMatch',\n    showIfCollapsed: true\n});\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-only-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    description: 'find-range-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'rangeHighlight',\n    isWholeLine: true\n});\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    description: 'find-scope',\n    className: 'findScope',\n    isWholeLine: true\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n    constructor(editorSelection, ranges, replaceStrings) {\n        this._editorSelection = editorSelection;\n        this._ranges = ranges;\n        this._replaceStrings = replaceStrings;\n        this._trackedEditorSelectionId = null;\n    }\n    getEditOperations(model, builder) {\n        if (this._ranges.length > 0) {\n            // Collect all edit operations\n            const ops = [];\n            for (let i = 0; i < this._ranges.length; i++) {\n                ops.push({\n                    range: this._ranges[i],\n                    text: this._replaceStrings[i]\n                });\n            }\n            // Sort them in ascending order by range starts\n            ops.sort((o1, o2) => {\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\n            });\n            // Merge operations that touch each other\n            const resultOps = [];\n            let previousOp = ops[0];\n            for (let i = 1; i < ops.length; i++) {\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n                    // These operations are one after another and can be merged\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\n                    previousOp.text = previousOp.text + ops[i].text;\n                }\n                else {\n                    resultOps.push(previousOp);\n                    previousOp = ops[i];\n                }\n            }\n            resultOps.push(previousOp);\n            for (const op of resultOps) {\n                builder.addEditOperation(op.range, op.text);\n            }\n        }\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\n    if (matches && (matches[0] !== '')) {\n        const containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\n        const containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\n        if (containsHyphens && !containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\n        }\n        else if (!containsHyphens && containsUnderscores) {\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\n        }\n        if (matches[0].toUpperCase() === matches[0]) {\n            return pattern.toUpperCase();\n        }\n        else if (matches[0].toLowerCase() === matches[0]) {\n            return pattern.toLowerCase();\n        }\n        else if (strings.containsUppercaseCharacter(matches[0][0]) && pattern.length > 0) {\n            return pattern[0].toUpperCase() + pattern.substr(1);\n        }\n        else if (matches[0][0].toUpperCase() !== matches[0][0] && pattern.length > 0) {\n            return pattern[0].toLowerCase() + pattern.substr(1);\n        }\n        else {\n            // we don't understand its pattern yet.\n            return pattern;\n        }\n    }\n    else {\n        return pattern;\n    }\n}\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\n    return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\n}\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\n    const splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\n    const splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\n    let replaceString = '';\n    splitPatternAtSpecialCharacter.forEach((splitValue, index) => {\n        replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\n    });\n    return replaceString.slice(0, -1);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n    constructor(staticValue) {\n        this.staticValue = staticValue;\n        this.kind = 0 /* ReplacePatternKind.StaticValue */;\n    }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n    constructor(pieces) {\n        this.pieces = pieces;\n        this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\n    }\n}\nexport class ReplacePattern {\n    constructor(pieces) {\n        if (!pieces || pieces.length === 0) {\n            this._state = new StaticValueReplacePattern('');\n        }\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n        }\n        else {\n            this._state = new DynamicPiecesReplacePattern(pieces);\n        }\n    }\n    static fromStaticValue(value) {\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\n    }\n    get hasReplacementPatterns() {\n        return (this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */);\n    }\n    buildReplaceString(matches, preserveCase) {\n        if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\n            if (preserveCase) {\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n            }\n            else {\n                return this._state.staticValue;\n            }\n        }\n        let result = '';\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n            const piece = this._state.pieces[i];\n            if (piece.staticValue !== null) {\n                // static value ReplacePiece\n                result += piece.staticValue;\n                continue;\n            }\n            // match index ReplacePiece\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\n                const repl = [];\n                const lenOps = piece.caseOps.length;\n                let opIdx = 0;\n                for (let idx = 0, len = match.length; idx < len; idx++) {\n                    if (opIdx >= lenOps) {\n                        repl.push(match.slice(idx));\n                        break;\n                    }\n                    switch (piece.caseOps[opIdx]) {\n                        case 'U':\n                            repl.push(match[idx].toUpperCase());\n                            break;\n                        case 'u':\n                            repl.push(match[idx].toUpperCase());\n                            opIdx++;\n                            break;\n                        case 'L':\n                            repl.push(match[idx].toLowerCase());\n                            break;\n                        case 'l':\n                            repl.push(match[idx].toLowerCase());\n                            opIdx++;\n                            break;\n                        default:\n                            repl.push(match[idx]);\n                    }\n                }\n                match = repl.join('');\n            }\n            result += match;\n        }\n        return result;\n    }\n    static _substitute(matchIndex, matches) {\n        if (matches === null) {\n            return '';\n        }\n        if (matchIndex === 0) {\n            return matches[0];\n        }\n        let remainder = '';\n        while (matchIndex > 0) {\n            if (matchIndex < matches.length) {\n                // A match can be undefined\n                const match = (matches[matchIndex] || '');\n                return match + remainder;\n            }\n            remainder = String(matchIndex % 10) + remainder;\n            matchIndex = Math.floor(matchIndex / 10);\n        }\n        return '$' + remainder;\n    }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n    constructor(staticValue, matchIndex, caseOps) {\n        this.staticValue = staticValue;\n        this.matchIndex = matchIndex;\n        if (!caseOps || caseOps.length === 0) {\n            this.caseOps = null;\n        }\n        else {\n            this.caseOps = caseOps.slice(0);\n        }\n    }\n    static staticValue(value) {\n        return new ReplacePiece(value, -1, null);\n    }\n    static caseOps(index, caseOps) {\n        return new ReplacePiece(null, index, caseOps);\n    }\n}\nclass ReplacePieceBuilder {\n    constructor(source) {\n        this._source = source;\n        this._lastCharIndex = 0;\n        this._result = [];\n        this._resultLen = 0;\n        this._currentStaticPiece = '';\n    }\n    emitUnchanged(toCharIndex) {\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n        this._lastCharIndex = toCharIndex;\n    }\n    emitStatic(value, toCharIndex) {\n        this._emitStatic(value);\n        this._lastCharIndex = toCharIndex;\n    }\n    _emitStatic(value) {\n        if (value.length === 0) {\n            return;\n        }\n        this._currentStaticPiece += value;\n    }\n    emitMatchIndex(index, toCharIndex, caseOps) {\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n        this._lastCharIndex = toCharIndex;\n    }\n    finalize() {\n        this.emitUnchanged(this._source.length);\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        return new ReplacePattern(this._result);\n    }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n    if (!replaceString || replaceString.length === 0) {\n        return new ReplacePattern(null);\n    }\n    const caseOps = [];\n    const result = new ReplacePieceBuilder(replaceString);\n    for (let i = 0, len = replaceString.length; i < len; i++) {\n        const chCode = replaceString.charCodeAt(i);\n        if (chCode === 92 /* CharCode.Backslash */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a \\\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            // let replaceWithCharacter: string | null = null;\n            switch (nextChCode) {\n                case 92 /* CharCode.Backslash */:\n                    // \\\\ => inserts a \"\\\"\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\\\', i + 1);\n                    break;\n                case 110 /* CharCode.n */:\n                    // \\n => inserts a LF\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\n', i + 1);\n                    break;\n                case 116 /* CharCode.t */:\n                    // \\t => inserts a TAB\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\t', i + 1);\n                    break;\n                // Case modification of string replacements, patterned after Boost, but only applied\n                // to the replacement text, not subsequent content.\n                case 117 /* CharCode.u */:\n                // \\u => upper-cases one character.\n                case 85 /* CharCode.U */:\n                // \\U => upper-cases ALL following characters.\n                case 108 /* CharCode.l */:\n                // \\l => lower-cases one character.\n                case 76 /* CharCode.L */:\n                    // \\L => lower-cases ALL following characters.\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('', i + 1);\n                    caseOps.push(String.fromCharCode(nextChCode));\n                    break;\n            }\n            continue;\n        }\n        if (chCode === 36 /* CharCode.DollarSign */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a $\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            if (nextChCode === 36 /* CharCode.DollarSign */) {\n                // $$ => inserts a \"$\"\n                result.emitUnchanged(i - 1);\n                result.emitStatic('$', i + 1);\n                continue;\n            }\n            if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\n                // $& and $0 => inserts the matched substring.\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(0, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n            if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\n                // $n\n                let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\n                // peek next char to probe for $nn\n                if (i + 1 < len) {\n                    const nextNextChCode = replaceString.charCodeAt(i + 1);\n                    if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\n                        // $nn\n                        // move to next char\n                        i++;\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\n                        result.emitUnchanged(i - 2);\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                        caseOps.length = 0;\n                        continue;\n                    }\n                }\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n        }\n    }\n    return result.finalize();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */ }\n};\nexport const ToggleWholeWordKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */ }\n};\nexport const ToggleRegexKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */ }\n};\nexport const ToggleSearchScopeKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */ }\n};\nexport const TogglePreserveCaseKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */ }\n};\nexport const FIND_IDS = {\n    StartFindAction: 'actions.find',\n    StartFindWithSelection: 'actions.findWithSelection',\n    StartFindWithArgs: 'editor.actions.findWithArgs',\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n    CloseFindWidgetCommand: 'closeFindWidget',\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\n    ToggleRegexCommand: 'toggleFindRegex',\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\n    TogglePreserveCaseCommand: 'togglePreserveCase',\n    ReplaceOneAction: 'editor.action.replaceOne',\n    ReplaceAllAction: 'editor.action.replaceAll',\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n    constructor(editor, state) {\n        this._toDispose = new DisposableStore();\n        this._editor = editor;\n        this._state = state;\n        this._isDisposed = false;\n        this._startSearchingTimer = new TimeoutTimer();\n        this._decorations = new FindDecorations(editor);\n        this._toDispose.add(this._decorations);\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n        this._toDispose.add(this._updateDecorationsScheduler);\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */\n                || e.reason === 5 /* CursorChangeReason.Undo */\n                || e.reason === 6 /* CursorChangeReason.Redo */) {\n                this._decorations.setStartPosition(this._editor.getPosition());\n            }\n        }));\n        this._ignoreModelContentChanged = false;\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (this._ignoreModelContentChanged) {\n                return;\n            }\n            if (e.isFlush) {\n                // a model.setValue() was called\n                this._decorations.reset();\n            }\n            this._decorations.setStartPosition(this._editor.getPosition());\n            this._updateDecorationsScheduler.schedule();\n        }));\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this.research(false, this._state.searchScope);\n    }\n    dispose() {\n        this._isDisposed = true;\n        dispose(this._startSearchingTimer);\n        this._toDispose.dispose();\n    }\n    _onStateChanged(e) {\n        if (this._isDisposed) {\n            // The find model is disposed during a find state changed event\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            // The find model will be disposed momentarily\n            return;\n        }\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n            const model = this._editor.getModel();\n            if (model.isTooLargeForSyncing()) {\n                this._startSearchingTimer.cancel();\n                this._startSearchingTimer.setIfNotSet(() => {\n                    if (e.searchScope) {\n                        this.research(e.moveCursor, this._state.searchScope);\n                    }\n                    else {\n                        this.research(e.moveCursor);\n                    }\n                }, RESEARCH_DELAY);\n            }\n            else {\n                if (e.searchScope) {\n                    this.research(e.moveCursor, this._state.searchScope);\n                }\n                else {\n                    this.research(e.moveCursor);\n                }\n            }\n        }\n    }\n    static _getSearchRange(model, findScope) {\n        // If we have set now or before a find scope, use it for computing the search range\n        if (findScope) {\n            return findScope;\n        }\n        return model.getFullModelRange();\n    }\n    research(moveCursor, newFindScope) {\n        let findScopes = null;\n        if (typeof newFindScope !== 'undefined') {\n            if (newFindScope !== null) {\n                if (!Array.isArray(newFindScope)) {\n                    findScopes = [newFindScope];\n                }\n                else {\n                    findScopes = newFindScope;\n                }\n            }\n        }\n        else {\n            findScopes = this._decorations.getFindScopes();\n        }\n        if (findScopes !== null) {\n            findScopes = findScopes.map(findScope => {\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\n                    let endLineNumber = findScope.endLineNumber;\n                    if (findScope.endColumn === 1) {\n                        endLineNumber = endLineNumber - 1;\n                    }\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n                }\n                return findScope;\n            });\n        }\n        const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n        this._decorations.set(findMatches, findScopes);\n        const editorSelection = this._editor.getSelection();\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\n            // current selection is not on top of a match\n            // try to find its nearest result from the top of the document\n            const matchAfterSelection = findFirstInSorted(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n        }\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n        if (moveCursor && this._editor.getOption(37 /* EditorOption.find */).cursorMoveOnType) {\n            this._moveToNextMatch(this._decorations.getStartPosition());\n        }\n    }\n    _hasMatches() {\n        return (this._state.matchesCount > 0);\n    }\n    _cannotFind() {\n        if (!this._hasMatches()) {\n            const findScope = this._decorations.getFindScope();\n            if (findScope) {\n                // Reveal the selection so user is reminded that 'selection find' is on.\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\n            }\n            return true;\n        }\n        return false;\n    }\n    _setCurrentFindMatch(match) {\n        const matchesPosition = this._decorations.setCurrentFindMatch(match);\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n        this._editor.setSelection(match);\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\n    }\n    _prevSearchPosition(before) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === 1) {\n            if (lineNumber === 1) {\n                lineNumber = model.getLineCount();\n            }\n            else {\n                lineNumber--;\n            }\n            column = model.getLineMaxColumn(lineNumber);\n        }\n        else {\n            column--;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToPrevMatch(before, isRecursed = false) {\n        if (!this._state.canNavigateBack()) {\n            // we are beyond the first matched find result\n            // instead of doing nothing, we should refocus the first item\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n                before = this._prevSearchPosition(before);\n                prevMatchRange = this._decorations.matchBeforePosition(before);\n            }\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._cannotFind()) {\n            return;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(before)) {\n            before = searchRange.getEndPosition();\n        }\n        // ...|...(----)...\n        if (before.isBefore(searchRange.getStartPosition())) {\n            before = searchRange.getEndPosition();\n        }\n        const { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._prevSearchPosition(position);\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        }\n        if (!prevMatch) {\n            // there is precisely one match and selection is on top of it\n            return;\n        }\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n        }\n        this._setCurrentFindMatch(prevMatch.range);\n    }\n    moveToPrevMatch() {\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n    }\n    _nextSearchPosition(after) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n            if (lineNumber === model.getLineCount()) {\n                lineNumber = 1;\n            }\n            else {\n                lineNumber++;\n            }\n            column = 1;\n        }\n        else {\n            column++;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToNextMatch(after) {\n        if (!this._state.canNavigateForward()) {\n            // we are beyond the last matched find result\n            // instead of doing nothing, we should refocus the last item\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n                // Looks like we're stuck at this position, unacceptable!\n                after = this._nextSearchPosition(after);\n                nextMatchRange = this._decorations.matchAfterPosition(after);\n            }\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        const nextMatch = this._getNextMatch(after, false, true);\n        if (nextMatch) {\n            this._setCurrentFindMatch(nextMatch.range);\n        }\n    }\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n        if (this._cannotFind()) {\n            return null;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(after)) {\n            after = searchRange.getStartPosition();\n        }\n        // ...|...(----)...\n        if (after.isBefore(searchRange.getStartPosition())) {\n            after = searchRange.getStartPosition();\n        }\n        const { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches);\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._nextSearchPosition(position);\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches);\n        }\n        if (!nextMatch) {\n            // there is precisely one match and selection is on top of it\n            return null;\n        }\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n        }\n        return nextMatch;\n    }\n    moveToNextMatch() {\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n    }\n    _getReplacePattern() {\n        if (this._state.isRegex) {\n            return parseReplaceString(this._state.replaceString);\n        }\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\n    }\n    replace() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const replacePattern = this._getReplacePattern();\n        const selection = this._editor.getSelection();\n        const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n        if (nextMatch) {\n            if (selection.equalsRange(nextMatch.range)) {\n                // selection sits on a find match => replace it!\n                const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n                const command = new ReplaceCommand(selection, replaceString);\n                this._executeEditorCommand('replace', command);\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n                this.research(true);\n            }\n            else {\n                this._decorations.setStartPosition(this._editor.getPosition());\n                this._setCurrentFindMatch(nextMatch.range);\n            }\n        }\n    }\n    _findMatches(findScopes, captureMatches, limitResultCount) {\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\n    }\n    replaceAll() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n            this._largeReplaceAll();\n        }\n        else {\n            this._regularReplaceAll(findScopes);\n        }\n        this.research(false);\n    }\n    _largeReplaceAll() {\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null);\n        const searchData = searchParams.parseSearchRequest();\n        if (!searchData) {\n            return;\n        }\n        let searchRegex = searchData.regex;\n        if (!searchRegex.multiline) {\n            let mod = 'mu';\n            if (searchRegex.ignoreCase) {\n                mod += 'i';\n            }\n            if (searchRegex.global) {\n                mod += 'g';\n            }\n            searchRegex = new RegExp(searchRegex.source, mod);\n        }\n        const model = this._editor.getModel();\n        const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\n        const fullModelRange = model.getFullModelRange();\n        const replacePattern = this._getReplacePattern();\n        let resultText;\n        const preserveCase = this._state.preserveCase;\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\n            resultText = modelText.replace(searchRegex, function () {\n                return replacePattern.buildReplaceString(arguments, preserveCase);\n            });\n        }\n        else {\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n        }\n        const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n        this._executeEditorCommand('replaceAll', command);\n    }\n    _regularReplaceAll(findScopes) {\n        const replacePattern = this._getReplacePattern();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const replaceStrings = [];\n        for (let i = 0, len = matches.length; i < len; i++) {\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n        }\n        const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n        this._executeEditorCommand('replaceAll', command);\n    }\n    selectAllMatches() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n        // If one of the ranges is the editor selection, then maintain it as primary\n        const editorSelection = this._editor.getSelection();\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const sel = selections[i];\n            if (sel.equalsRange(editorSelection)) {\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n                break;\n            }\n        }\n        this._editor.setSelections(selections);\n    }\n    _executeEditorCommand(source, command) {\n        try {\n            this._ignoreModelContentChanged = true;\n            this._editor.pushUndoStop();\n            this._editor.executeCommand(source, command);\n            this._editor.pushUndoStop();\n        }\n        finally {\n            this._ignoreModelContentChanged = false;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { contrastBorder, editorWidgetBackground, editorWidgetForeground, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport class FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService, themeService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const inputActiveOptionBorderColor = themeService.getColorTheme().getColor(inputActiveOptionBorder);\n        const inputActiveOptionForegroundColor = themeService.getColorTheme().getColor(inputActiveOptionForeground);\n        const inputActiveOptionBackgroundColor = themeService.getColorTheme().getColor(inputActiveOptionBackground);\n        this.caseSensitive = this._register(new CaseSensitiveToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            isChecked: this._state.matchCase,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            isChecked: this._state.wholeWord,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexToggle({\n            appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            isChecked: this._state.isRegex,\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\n            inputActiveOptionForeground: inputActiveOptionForegroundColor,\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\n        }));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    }\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n    _applyTheme(theme) {\n        const inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground)\n        };\n        this.caseSensitive.style(inputStyles);\n        this.wholeWords.style(inputStyles);\n        this.regex.style(inputStyles);\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n    if (override === 1 /* FindOptionOverride.True */) {\n        return true;\n    }\n    if (override === 2 /* FindOptionOverride.False */) {\n        return false;\n    }\n    return value;\n}\nexport class FindReplaceState extends Disposable {\n    constructor() {\n        super();\n        this._onFindReplaceStateChange = this._register(new Emitter());\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n        this._searchString = '';\n        this._replaceString = '';\n        this._isRevealed = false;\n        this._isReplaceRevealed = false;\n        this._isRegex = false;\n        this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\n        this._wholeWord = false;\n        this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\n        this._matchCase = false;\n        this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._preserveCase = false;\n        this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._searchScope = null;\n        this._matchesPosition = 0;\n        this._matchesCount = 0;\n        this._currentMatch = null;\n        this._loop = true;\n        this._isSearching = false;\n        this._filters = null;\n    }\n    get searchString() { return this._searchString; }\n    get replaceString() { return this._replaceString; }\n    get isRevealed() { return this._isRevealed; }\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n    get actualIsRegex() { return this._isRegex; }\n    get actualWholeWord() { return this._wholeWord; }\n    get actualMatchCase() { return this._matchCase; }\n    get actualPreserveCase() { return this._preserveCase; }\n    get searchScope() { return this._searchScope; }\n    get matchesPosition() { return this._matchesPosition; }\n    get matchesCount() { return this._matchesCount; }\n    get currentMatch() { return this._currentMatch; }\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n        const changeEvent = {\n            moveCursor: false,\n            updateHistory: false,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        if (matchesCount === 0) {\n            matchesPosition = 0;\n        }\n        if (matchesPosition > matchesCount) {\n            matchesPosition = matchesCount;\n        }\n        if (this._matchesPosition !== matchesPosition) {\n            this._matchesPosition = matchesPosition;\n            changeEvent.matchesPosition = true;\n            somethingChanged = true;\n        }\n        if (this._matchesCount !== matchesCount) {\n            this._matchesCount = matchesCount;\n            changeEvent.matchesCount = true;\n            somethingChanged = true;\n        }\n        if (typeof currentMatch !== 'undefined') {\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n                this._currentMatch = currentMatch;\n                changeEvent.currentMatch = true;\n                somethingChanged = true;\n            }\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    change(newState, moveCursor, updateHistory = true) {\n        var _a;\n        const changeEvent = {\n            moveCursor: moveCursor,\n            updateHistory: updateHistory,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        const oldEffectiveIsRegex = this.isRegex;\n        const oldEffectiveWholeWords = this.wholeWord;\n        const oldEffectiveMatchCase = this.matchCase;\n        const oldEffectivePreserveCase = this.preserveCase;\n        if (typeof newState.searchString !== 'undefined') {\n            if (this._searchString !== newState.searchString) {\n                this._searchString = newState.searchString;\n                changeEvent.searchString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.replaceString !== 'undefined') {\n            if (this._replaceString !== newState.replaceString) {\n                this._replaceString = newState.replaceString;\n                changeEvent.replaceString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRevealed !== 'undefined') {\n            if (this._isRevealed !== newState.isRevealed) {\n                this._isRevealed = newState.isRevealed;\n                changeEvent.isRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n                this._isReplaceRevealed = newState.isReplaceRevealed;\n                changeEvent.isReplaceRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRegex !== 'undefined') {\n            this._isRegex = newState.isRegex;\n        }\n        if (typeof newState.wholeWord !== 'undefined') {\n            this._wholeWord = newState.wholeWord;\n        }\n        if (typeof newState.matchCase !== 'undefined') {\n            this._matchCase = newState.matchCase;\n        }\n        if (typeof newState.preserveCase !== 'undefined') {\n            this._preserveCase = newState.preserveCase;\n        }\n        if (typeof newState.searchScope !== 'undefined') {\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\n                var _a;\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\n                });\n            }))) {\n                this._searchScope = newState.searchScope;\n                changeEvent.searchScope = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.loop !== 'undefined') {\n            if (this._loop !== newState.loop) {\n                this._loop = newState.loop;\n                changeEvent.loop = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isSearching !== 'undefined') {\n            if (this._isSearching !== newState.isSearching) {\n                this._isSearching = newState.isSearching;\n                changeEvent.isSearching = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.filters !== 'undefined') {\n            if (this._filters) {\n                this._filters.update(newState.filters);\n            }\n            else {\n                this._filters = newState.filters;\n            }\n            changeEvent.filters = true;\n            somethingChanged = true;\n        }\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */);\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */);\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        if (oldEffectiveIsRegex !== this.isRegex) {\n            somethingChanged = true;\n            changeEvent.isRegex = true;\n        }\n        if (oldEffectiveWholeWords !== this.wholeWord) {\n            somethingChanged = true;\n            changeEvent.wholeWord = true;\n        }\n        if (oldEffectiveMatchCase !== this.matchCase) {\n            somethingChanged = true;\n            changeEvent.matchCase = true;\n        }\n        if (oldEffectivePreserveCase !== this.preserveCase) {\n            somethingChanged = true;\n            changeEvent.preserveCase = true;\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    canNavigateBack() {\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\n    }\n    canNavigateForward() {\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n    }\n    canNavigateInLoop() {\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function showHistoryKeybindingHint(keybindingService) {\n    var _a, _b;\n    return ((_a = keybindingService.lookupKeybinding('history.showPrevious')) === null || _a === void 0 ? void 0 : _a.getElectronAccelerator()) === 'Up' && ((_b = keybindingService.lookupKeybinding('history.showNext')) === null || _b === void 0 ? void 0 : _b.getElectronAccelerator()) === 'Down';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, toolbarHoverBackground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nexport class FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(83 /* EditorOption.readOnly */)) {\n                if (this._codeEditor.getOption(83 /* EditorOption.readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(133 /* EditorOption.layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(37 /* EditorOption.find */)) {\n                const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\n            if (this._isVisible) {\n                const globalBufferTerm = yield this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        })));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._applyTheme(themeService.getColorTheme());\n        this._register(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(83 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        const selection = this._codeEditor.getSelection();\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        const isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\n        const matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        const canReplace = !this._codeEditor.getOption(83 /* EditorOption.readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(37 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(37 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(77 /* EditorOption.padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _applyTheme(theme) {\n        const inputStyles = {\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\n            inputActiveOptionForeground: theme.getColor(inputActiveOptionForeground),\n            inputBackground: theme.getColor(inputBackground),\n            inputForeground: theme.getColor(inputForeground),\n            inputBorder: theme.getColor(inputBorder),\n            inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\n            inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\n            inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\n            inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\n            inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\n            inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\n            inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\n            inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\n            inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\n        };\n        this._findInput.style(inputStyles);\n        this._replaceInput.style(inputStyles);\n        this._toggleSelectionFind.style(inputStyles);\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!dom.isInDOM(this._domNode)) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            const widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        if (this._resized) {\n            this._findInput.inputBox.layout();\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            const selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        const findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Toggle({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    const selections = this._codeEditor.getSelections();\n                    selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter(element => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* KeyCode.Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        actionsContainer.appendChild(this._closeBtn.domNode);\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService)\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        const replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 });\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            const width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.title = this._opts.label;\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            var _a, _b;\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    addBackgroundColorRule('.find-widget', widgetBackground);\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\n    if (findMatchBorder) {\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n    const foreground = theme.getColor(editorWidgetForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n    }\n    const error = theme.getColor(errorForeground);\n    if (error) {\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n    }\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n    if (resizeBorderBackground) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n    }\n    else {\n        const border = theme.getColor(editorWidgetBorder);\n        if (border) {\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n        }\n    }\n    // Action bars\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\n    if (toolbarHoverBackgroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);\n    }\n    // This rule is used to override the outline color for synthetic-focus find input.\n    const focusOutline = theme.getColor(focusBorder);\n    if (focusOutline) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n    if (!editor.hasModel()) {\n        return null;\n    }\n    const selection = editor.getSelection();\n    // if selection spans multiple lines, default search string to empty\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n        || seedSearchStringFromSelection === 'multiple') {\n        if (selection.isEmpty()) {\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n                return wordAtPosition.word;\n            }\n        }\n        else {\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n                return editor.getModel().getValueInRange(selection);\n            }\n        }\n    }\n    return null;\n}\nlet CommonFindController = class CommonFindController extends Disposable {\n    constructor(editor, contextKeyService, storageService, clipboardService) {\n        super();\n        this._editor = editor;\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._clipboardService = clipboardService;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._state = this._register(new FindReplaceState());\n        this.loadQueryState();\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._model = null;\n        this._register(this._editor.onDidChangeModel(() => {\n            const shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n            this.disposeModel();\n            this._state.change({\n                searchScope: null,\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\n            }, false);\n            if (shouldRestartFind) {\n                this._start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: false,\n                    updateSearchScope: false,\n                    loop: this._editor.getOption(37 /* EditorOption.find */).loop\n                });\n            }\n        }));\n    }\n    get editor() {\n        return this._editor;\n    }\n    static get(editor) {\n        return editor.getContribution(CommonFindController.ID);\n    }\n    dispose() {\n        this.disposeModel();\n        super.dispose();\n    }\n    disposeModel() {\n        if (this._model) {\n            this._model.dispose();\n            this._model = null;\n        }\n    }\n    _onStateChanged(e) {\n        this.saveQueryState(e);\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._findWidgetVisible.set(true);\n            }\n            else {\n                this._findWidgetVisible.reset();\n                this.disposeModel();\n            }\n        }\n        if (e.searchString) {\n            this.setGlobalBufferTerm(this._state.searchString);\n        }\n    }\n    saveQueryState(e) {\n        if (e.isRegex) {\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.wholeWord) {\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.matchCase) {\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.preserveCase) {\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n    }\n    loadQueryState() {\n        this._state.change({\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\n        }, false);\n    }\n    isFindInputFocused() {\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n        return this._state;\n    }\n    closeFindWidget() {\n        this._state.change({\n            isRevealed: false,\n            searchScope: null\n        }, false);\n        this._editor.focus();\n    }\n    toggleCaseSensitive() {\n        this._state.change({ matchCase: !this._state.matchCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleWholeWords() {\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleRegex() {\n        this._state.change({ isRegex: !this._state.isRegex }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    togglePreserveCase() {\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleSearchScope() {\n        if (this._state.searchScope) {\n            this._state.change({ searchScope: null }, true);\n        }\n        else {\n            if (this._editor.hasModel()) {\n                const selections = this._editor.getSelections();\n                selections.map(selection => {\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                    }\n                    if (!selection.isEmpty()) {\n                        return selection;\n                    }\n                    return null;\n                }).filter(element => !!element);\n                if (selections.length) {\n                    this._state.change({ searchScope: selections }, true);\n                }\n            }\n        }\n    }\n    setSearchString(searchString) {\n        if (this._state.isRegex) {\n            searchString = strings.escapeRegExpCharacters(searchString);\n        }\n        this._state.change({ searchString: searchString }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        // overwritten in subclass\n    }\n    _start(opts, newState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disposeModel();\n            if (!this._editor.hasModel()) {\n                // cannot do anything with an editor that doesn't have a model...\n                return;\n            }\n            const stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\n            if (opts.seedSearchStringFromSelection === 'single') {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n                if (selectionSearchString) {\n                    if (this._state.isRegex) {\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n                    }\n                    else {\n                        stateChanges.searchString = selectionSearchString;\n                    }\n                }\n            }\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n                const selectionSearchString = yield this.getGlobalBufferTerm();\n                if (!this._editor.hasModel()) {\n                    // the editor has lost its model in the meantime\n                    return;\n                }\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            // Overwrite isReplaceRevealed\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n                stateChanges.isReplaceRevealed = true;\n            }\n            else if (!this._findWidgetVisible.get()) {\n                stateChanges.isReplaceRevealed = false;\n            }\n            if (opts.updateSearchScope) {\n                const currentSelections = this._editor.getSelections();\n                if (currentSelections.some(selection => !selection.isEmpty())) {\n                    stateChanges.searchScope = currentSelections;\n                }\n            }\n            stateChanges.loop = opts.loop;\n            this._state.change(stateChanges, false);\n            if (!this._model) {\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n            }\n        });\n    }\n    start(opts, newState) {\n        return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n        if (this._model) {\n            this._model.moveToNextMatch();\n            return true;\n        }\n        return false;\n    }\n    moveToPrevMatch() {\n        if (this._model) {\n            this._model.moveToPrevMatch();\n            return true;\n        }\n        return false;\n    }\n    replace() {\n        if (this._model) {\n            this._model.replace();\n            return true;\n        }\n        return false;\n    }\n    replaceAll() {\n        if (this._model) {\n            this._model.replaceAll();\n            return true;\n        }\n        return false;\n    }\n    selectAllMatches() {\n        if (this._model) {\n            this._model.selectAllMatches();\n            this._editor.focus();\n            return true;\n        }\n        return false;\n    }\n    getGlobalBufferTerm() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.getOption(37 /* EditorOption.find */).globalFindClipboard\n                && this._editor.hasModel()\n                && !this._editor.getModel().isTooLargeForSyncing()) {\n                return this._clipboardService.readFindText();\n            }\n            return '';\n        });\n    }\n    setGlobalBufferTerm(text) {\n        if (this._editor.getOption(37 /* EditorOption.find */).globalFindClipboard\n            && this._editor.hasModel()\n            && !this._editor.getModel().isTooLargeForSyncing()) {\n            // intentionally not awaited\n            this._clipboardService.writeFindText(text);\n        }\n    }\n};\nCommonFindController.ID = 'editor.contrib.findController';\nCommonFindController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IStorageService),\n    __param(3, IClipboardService)\n], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n        super(editor, _contextKeyService, _storageService, clipboardService);\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._themeService = _themeService;\n        this._notificationService = _notificationService;\n        this._widget = null;\n        this._findOptionsWidget = null;\n    }\n    _start(opts, newState) {\n        const _super = Object.create(null, {\n            _start: { get: () => super._start }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._widget) {\n                this._createFindWidget();\n            }\n            const selection = this._editor.getSelection();\n            let updateSearchScope = false;\n            switch (this._editor.getOption(37 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    updateSearchScope = true;\n                    break;\n                case 'never':\n                    updateSearchScope = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    updateSearchScope = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n            yield _super._start.call(this, opts, newState);\n            if (this._widget) {\n                if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\n                    this._widget.focusReplaceInput();\n                }\n                else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\n                    this._widget.focusFindInput();\n                }\n            }\n        });\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        if (!this._widget) {\n            this._createFindWidget();\n        }\n        if (this._state.isRevealed && !ignoreWhenVisible) {\n            this._widget.highlightFindOptions();\n        }\n        else {\n            this._findOptionsWidget.highlightFindOptions();\n        }\n    }\n    _createFindWidget() {\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\n    }\n};\nFindController = __decorate([\n    __param(1, IContextViewService),\n    __param(2, IContextKeyService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService),\n    __param(5, INotificationService),\n    __param(6, IStorageService),\n    __param(7, IClipboardService)\n], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindAction,\n    label: nls.localize('startFindAction', \"Find\"),\n    alias: 'Find',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n        order: 1\n    }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    return controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(37 /* EditorOption.find */).globalFindClipboard,\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(37 /* EditorOption.find */).loop\n    });\n});\nconst findArgDescription = {\n    description: 'Open a new In-Editor Find Widget.',\n    args: [{\n            name: 'Open a new In-Editor Find Widget args',\n            schema: {\n                properties: {\n                    searchString: { type: 'string' },\n                    replaceString: { type: 'string' },\n                    regex: { type: 'boolean' },\n                    regexOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    wholeWord: { type: 'boolean' },\n                    wholeWordOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    matchCase: { type: 'boolean' },\n                    matchCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    preserveCase: { type: 'boolean' },\n                    preserveCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    findInSelection: { type: 'boolean' },\n                }\n            }\n        }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithArgs,\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n            alias: 'Find With Arguments',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: findArgDescription\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                const newState = args ? {\n                    searchString: args.searchString,\n                    replaceString: args.replaceString,\n                    isReplaceRevealed: args.replaceString !== undefined,\n                    isRegex: args.isRegex,\n                    // isRegexOverride: args.regexOverride,\n                    wholeWord: args.matchWholeWord,\n                    // wholeWordOverride: args.wholeWordOverride,\n                    matchCase: args.isCaseSensitive,\n                    // matchCaseOverride: args.matchCaseOverride,\n                    preserveCase: args.preserveCase,\n                    // preserveCaseOverride: args.preserveCaseOverride,\n                } : {};\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n                    shouldAnimate: true,\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                }, newState);\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithSelection,\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n            alias: 'Find With Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */,\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'multiple',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class MatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller && !this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextMatchFindAction,\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\n            alias: 'Find Next',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */, secondary: [61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }]\n        });\n    }\n    _run(controller) {\n        const result = controller.moveToNextMatch();\n        if (result) {\n            controller.editor.pushUndoStop();\n            return true;\n        }\n        return false;\n    }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousMatchFindAction,\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n            alias: 'Find Previous',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */, secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            ]\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (!controller) {\n                return;\n            }\n            const seedSearchStringFromNonEmptySelection = editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection';\n            let selectionSearchString = null;\n            if (editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never') {\n                selectionSearchString = getSelectionSearchString(editor, 'single', seedSearchStringFromNonEmptySelection);\n            }\n            if (selectionSearchString) {\n                controller.setSearchString(selectionSearchString);\n            }\n            if (!this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: seedSearchStringFromNonEmptySelection,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(37 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextSelectionMatchFindAction,\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n            alias: 'Find Next Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToNextMatch();\n    }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n            alias: 'Find Previous Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindReplaceAction,\n    label: nls.localize('startReplace', \"Replace\"),\n    alias: 'Replace',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */ },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n        order: 2\n    }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n    if (!editor.hasModel() || editor.getOption(83 /* EditorOption.readOnly */)) {\n        return false;\n    }\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    const currentSelection = editor.getSelection();\n    const findInputFocused = controller.isFindInputFocused();\n    // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\n        && (editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never')\n        && !findInputFocused;\n    /*\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n    */\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n        2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\n    return controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(37 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(37 /* EditorOption.find */).loop\n    });\n});\nregisterEditorContribution(CommonFindController.ID, FindController);\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.CloseFindWidgetCommand,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.closeFindWidget(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\n    precondition: undefined,\n    handler: x => x.toggleCaseSensitive(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleCaseSensitiveKeybinding.primary,\n        mac: ToggleCaseSensitiveKeybinding.mac,\n        win: ToggleCaseSensitiveKeybinding.win,\n        linux: ToggleCaseSensitiveKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleWholeWordCommand,\n    precondition: undefined,\n    handler: x => x.toggleWholeWords(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleWholeWordKeybinding.primary,\n        mac: ToggleWholeWordKeybinding.mac,\n        win: ToggleWholeWordKeybinding.win,\n        linux: ToggleWholeWordKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleRegexCommand,\n    precondition: undefined,\n    handler: x => x.toggleRegex(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleRegexKeybinding.primary,\n        mac: ToggleRegexKeybinding.mac,\n        win: ToggleRegexKeybinding.win,\n        linux: ToggleRegexKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleSearchScopeCommand,\n    precondition: undefined,\n    handler: x => x.toggleSearchScope(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleSearchScopeKeybinding.primary,\n        mac: ToggleSearchScopeKeybinding.mac,\n        win: ToggleSearchScopeKeybinding.win,\n        linux: ToggleSearchScopeKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.TogglePreserveCaseCommand,\n    precondition: undefined,\n    handler: x => x.togglePreserveCase(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: TogglePreserveCaseKeybinding.primary,\n        mac: TogglePreserveCaseKeybinding.mac,\n        win: TogglePreserveCaseKeybinding.win,\n        linux: TogglePreserveCaseKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: undefined,\n        mac: {\n            primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        }\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.SelectAllMatchesAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.selectAllMatches(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const MAX_FOLDING_REGIONS = 0xFFFF;\nexport const MAX_LINE_NUMBER = 0xFFFFFF;\nconst MASK_INDENT = 0xFF000000;\nclass BitField {\n    constructor(size) {\n        const numWords = Math.ceil(size / 32);\n        this._states = new Uint32Array(numWords);\n    }\n    get(index) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        return (this._states[arrayIndex] & (1 << bit)) !== 0;\n    }\n    set(index, newState) {\n        const arrayIndex = (index / 32) | 0;\n        const bit = index % 32;\n        const value = this._states[arrayIndex];\n        if (newState) {\n            this._states[arrayIndex] = value | (1 << bit);\n        }\n        else {\n            this._states[arrayIndex] = value & ~(1 << bit);\n        }\n    }\n}\nexport class FoldingRegions {\n    constructor(startIndexes, endIndexes, types) {\n        this.sourceAbbr = {\n            [0 /* FoldSource.provider */]: ' ',\n            [1 /* FoldSource.userDefined */]: 'u',\n            [2 /* FoldSource.recovered */]: 'r',\n        };\n        if (startIndexes.length !== endIndexes.length || startIndexes.length > MAX_FOLDING_REGIONS) {\n            throw new Error('invalid startIndexes or endIndexes size');\n        }\n        this._startIndexes = startIndexes;\n        this._endIndexes = endIndexes;\n        this._collapseStates = new BitField(startIndexes.length);\n        this._userDefinedStates = new BitField(startIndexes.length);\n        this._recoveredStates = new BitField(startIndexes.length);\n        this._types = types;\n        this._parentsComputed = false;\n    }\n    ensureParentIndices() {\n        if (!this._parentsComputed) {\n            this._parentsComputed = true;\n            const parentIndexes = [];\n            const isInsideLast = (startLineNumber, endLineNumber) => {\n                const index = parentIndexes[parentIndexes.length - 1];\n                return this.getStartLineNumber(index) <= startLineNumber && this.getEndLineNumber(index) >= endLineNumber;\n            };\n            for (let i = 0, len = this._startIndexes.length; i < len; i++) {\n                const startLineNumber = this._startIndexes[i];\n                const endLineNumber = this._endIndexes[i];\n                if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n                    throw new Error('startLineNumber or endLineNumber must not exceed ' + MAX_LINE_NUMBER);\n                }\n                while (parentIndexes.length > 0 && !isInsideLast(startLineNumber, endLineNumber)) {\n                    parentIndexes.pop();\n                }\n                const parentIndex = parentIndexes.length > 0 ? parentIndexes[parentIndexes.length - 1] : -1;\n                parentIndexes.push(i);\n                this._startIndexes[i] = startLineNumber + ((parentIndex & 0xFF) << 24);\n                this._endIndexes[i] = endLineNumber + ((parentIndex & 0xFF00) << 16);\n            }\n        }\n    }\n    get length() {\n        return this._startIndexes.length;\n    }\n    getStartLineNumber(index) {\n        return this._startIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getEndLineNumber(index) {\n        return this._endIndexes[index] & MAX_LINE_NUMBER;\n    }\n    getType(index) {\n        return this._types ? this._types[index] : undefined;\n    }\n    hasTypes() {\n        return !!this._types;\n    }\n    isCollapsed(index) {\n        return this._collapseStates.get(index);\n    }\n    setCollapsed(index, newState) {\n        this._collapseStates.set(index, newState);\n    }\n    isUserDefined(index) {\n        return this._userDefinedStates.get(index);\n    }\n    setUserDefined(index, newState) {\n        return this._userDefinedStates.set(index, newState);\n    }\n    isRecovered(index) {\n        return this._recoveredStates.get(index);\n    }\n    setRecovered(index, newState) {\n        return this._recoveredStates.set(index, newState);\n    }\n    getSource(index) {\n        if (this.isUserDefined(index)) {\n            return 1 /* FoldSource.userDefined */;\n        }\n        else if (this.isRecovered(index)) {\n            return 2 /* FoldSource.recovered */;\n        }\n        return 0 /* FoldSource.provider */;\n    }\n    setSource(index, source) {\n        if (source === 1 /* FoldSource.userDefined */) {\n            this.setUserDefined(index, true);\n            this.setRecovered(index, false);\n        }\n        else if (source === 2 /* FoldSource.recovered */) {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, true);\n        }\n        else {\n            this.setUserDefined(index, false);\n            this.setRecovered(index, false);\n        }\n    }\n    setCollapsedAllOfType(type, newState) {\n        let hasChanged = false;\n        if (this._types) {\n            for (let i = 0; i < this._types.length; i++) {\n                if (this._types[i] === type) {\n                    this.setCollapsed(i, newState);\n                    hasChanged = true;\n                }\n            }\n        }\n        return hasChanged;\n    }\n    toRegion(index) {\n        return new FoldingRegion(this, index);\n    }\n    getParentIndex(index) {\n        this.ensureParentIndices();\n        const parent = ((this._startIndexes[index] & MASK_INDENT) >>> 24) + ((this._endIndexes[index] & MASK_INDENT) >>> 16);\n        if (parent === MAX_FOLDING_REGIONS) {\n            return -1;\n        }\n        return parent;\n    }\n    contains(index, line) {\n        return this.getStartLineNumber(index) <= line && this.getEndLineNumber(index) >= line;\n    }\n    findIndex(line) {\n        let low = 0, high = this._startIndexes.length;\n        if (high === 0) {\n            return -1; // no children\n        }\n        while (low < high) {\n            const mid = Math.floor((low + high) / 2);\n            if (line < this.getStartLineNumber(mid)) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        return low - 1;\n    }\n    findRange(line) {\n        let index = this.findIndex(line);\n        if (index >= 0) {\n            const endLineNumber = this.getEndLineNumber(index);\n            if (endLineNumber >= line) {\n                return index;\n            }\n            index = this.getParentIndex(index);\n            while (index !== -1) {\n                if (this.contains(index, line)) {\n                    return index;\n                }\n                index = this.getParentIndex(index);\n            }\n        }\n        return -1;\n    }\n    toString() {\n        const res = [];\n        for (let i = 0; i < this.length; i++) {\n            res[i] = `[${this.sourceAbbr[this.getSource(i)]}${this.isCollapsed(i) ? '+' : '-'}] ${this.getStartLineNumber(i)}/${this.getEndLineNumber(i)}`;\n        }\n        return res.join(', ');\n    }\n    toFoldRange(index) {\n        return {\n            startLineNumber: this._startIndexes[index] & MAX_LINE_NUMBER,\n            endLineNumber: this._endIndexes[index] & MAX_LINE_NUMBER,\n            type: this._types ? this._types[index] : undefined,\n            isCollapsed: this.isCollapsed(index),\n            source: this.getSource(index)\n        };\n    }\n    static fromFoldRanges(ranges) {\n        const rangesLength = ranges.length;\n        const startIndexes = new Uint32Array(rangesLength);\n        const endIndexes = new Uint32Array(rangesLength);\n        let types = [];\n        let gotTypes = false;\n        for (let i = 0; i < rangesLength; i++) {\n            const range = ranges[i];\n            startIndexes[i] = range.startLineNumber;\n            endIndexes[i] = range.endLineNumber;\n            types.push(range.type);\n            if (range.type) {\n                gotTypes = true;\n            }\n        }\n        if (!gotTypes) {\n            types = undefined;\n        }\n        const regions = new FoldingRegions(startIndexes, endIndexes, types);\n        for (let i = 0; i < rangesLength; i++) {\n            if (ranges[i].isCollapsed) {\n                regions.setCollapsed(i, true);\n            }\n            regions.setSource(i, ranges[i].source);\n        }\n        return regions;\n    }\n    /**\n     * Two inputs, each a FoldingRegions or a FoldRange[], are merged.\n     * Each input must be pre-sorted on startLineNumber.\n     * The first list is assumed to always include all regions currently defined by range providers.\n     * The second list only contains the previously collapsed and all manual ranges.\n     * If the line position matches, the range of the new range is taken, and the range is no longer manual\n     * When an entry in one list overlaps an entry in the other, the second list's entry \"wins\" and\n     * overlapping entries in the first list are discarded.\n     * Invalid entries are discarded. An entry is invalid if:\n     * \t\tthe start and end line numbers aren't a valid range of line numbers,\n     * \t\tit is out of sequence or has the same start line as a preceding entry,\n     * \t\tit overlaps a preceding entry and is not fully contained by that entry.\n     */\n    static sanitizeAndMerge(rangesA, rangesB, maxLineNumber) {\n        maxLineNumber = maxLineNumber !== null && maxLineNumber !== void 0 ? maxLineNumber : Number.MAX_VALUE;\n        const getIndexedFunction = (r, limit) => {\n            return Array.isArray(r)\n                ? ((i) => { return (i < limit) ? r[i] : undefined; })\n                : ((i) => { return (i < limit) ? r.toFoldRange(i) : undefined; });\n        };\n        const getA = getIndexedFunction(rangesA, rangesA.length);\n        const getB = getIndexedFunction(rangesB, rangesB.length);\n        let indexA = 0;\n        let indexB = 0;\n        let nextA = getA(0);\n        let nextB = getB(0);\n        const stackedRanges = [];\n        let topStackedRange;\n        let prevLineNumber = 0;\n        const resultRanges = [];\n        while (nextA || nextB) {\n            let useRange = undefined;\n            if (nextB && (!nextA || nextA.startLineNumber >= nextB.startLineNumber)) {\n                if (nextA && nextA.startLineNumber === nextB.startLineNumber) {\n                    if (nextB.source === 1 /* FoldSource.userDefined */) {\n                        // a user defined range (possibly unfolded)\n                        useRange = nextB;\n                    }\n                    else {\n                        // a previously folded range or a (possibly unfolded) recovered range\n                        useRange = nextA;\n                        useRange.isCollapsed = nextB.isCollapsed && nextA.endLineNumber === nextB.endLineNumber;\n                        useRange.source = 0 /* FoldSource.provider */;\n                    }\n                    nextA = getA(++indexA); // not necessary, just for speed\n                }\n                else {\n                    useRange = nextB;\n                    if (nextB.isCollapsed && nextB.source === 0 /* FoldSource.provider */) {\n                        // a previously collapsed range\n                        useRange.source = 2 /* FoldSource.recovered */;\n                    }\n                }\n                nextB = getB(++indexB);\n            }\n            else {\n                // nextA is next. The user folded B set takes precedence and we sometimes need to look\n                // ahead in it to check for an upcoming conflict.\n                let scanIndex = indexB;\n                let prescanB = nextB;\n                while (true) {\n                    if (!prescanB || prescanB.startLineNumber > nextA.endLineNumber) {\n                        useRange = nextA;\n                        break; // no conflict, use this nextA\n                    }\n                    if (prescanB.source === 1 /* FoldSource.userDefined */ && prescanB.endLineNumber > nextA.endLineNumber) {\n                        // we found a user folded range, it wins\n                        break; // without setting nextResult, so this nextA gets skipped\n                    }\n                    prescanB = getB(++scanIndex);\n                }\n                nextA = getA(++indexA);\n            }\n            if (useRange) {\n                while (topStackedRange\n                    && topStackedRange.endLineNumber < useRange.startLineNumber) {\n                    topStackedRange = stackedRanges.pop();\n                }\n                if (useRange.endLineNumber > useRange.startLineNumber\n                    && useRange.startLineNumber > prevLineNumber\n                    && useRange.endLineNumber <= maxLineNumber\n                    && (!topStackedRange\n                        || topStackedRange.endLineNumber >= useRange.endLineNumber)) {\n                    resultRanges.push(useRange);\n                    prevLineNumber = useRange.startLineNumber;\n                    if (topStackedRange) {\n                        stackedRanges.push(topStackedRange);\n                    }\n                    topStackedRange = useRange;\n                }\n            }\n        }\n        return resultRanges;\n    }\n}\nexport class FoldingRegion {\n    constructor(ranges, index) {\n        this.ranges = ranges;\n        this.index = index;\n    }\n    get startLineNumber() {\n        return this.ranges.getStartLineNumber(this.index);\n    }\n    get endLineNumber() {\n        return this.ranges.getEndLineNumber(this.index);\n    }\n    get regionIndex() {\n        return this.index;\n    }\n    get parentIndex() {\n        return this.ranges.getParentIndex(this.index);\n    }\n    get isCollapsed() {\n        return this.ranges.isCollapsed(this.index);\n    }\n    containedBy(range) {\n        return range.startLineNumber <= this.startLineNumber && range.endLineNumber >= this.endLineNumber;\n    }\n    containsLine(lineNumber) {\n        return this.startLineNumber <= lineNumber && lineNumber <= this.endLineNumber;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { hash } from '../../../../base/common/hash.js';\nexport class FoldingModel {\n    constructor(textModel, decorationProvider) {\n        this._updateEventEmitter = new Emitter();\n        this.onDidChange = this._updateEventEmitter.event;\n        this._textModel = textModel;\n        this._decorationProvider = decorationProvider;\n        this._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n        this._editorDecorationIds = [];\n    }\n    get regions() { return this._regions; }\n    get textModel() { return this._textModel; }\n    toggleCollapseState(toggledRegions) {\n        if (!toggledRegions.length) {\n            return;\n        }\n        toggledRegions = toggledRegions.sort((r1, r2) => r1.regionIndex - r2.regionIndex);\n        const processed = {};\n        this._decorationProvider.changeDecorations(accessor => {\n            let k = 0; // index from [0 ... this.regions.length]\n            let dirtyRegionEndLine = -1; // end of the range where decorations need to be updated\n            let lastHiddenLine = -1; // the end of the last hidden lines\n            const updateDecorationsUntil = (index) => {\n                while (k < index) {\n                    const endLineNumber = this._regions.getEndLineNumber(k);\n                    const isCollapsed = this._regions.isCollapsed(k);\n                    if (endLineNumber <= dirtyRegionEndLine) {\n                        const isManual = this.regions.getSource(k) !== 0 /* FoldSource.provider */;\n                        accessor.changeDecorationOptions(this._editorDecorationIds[k], this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual));\n                    }\n                    if (isCollapsed && endLineNumber > lastHiddenLine) {\n                        lastHiddenLine = endLineNumber;\n                    }\n                    k++;\n                }\n            };\n            for (const region of toggledRegions) {\n                const index = region.regionIndex;\n                const editorDecorationId = this._editorDecorationIds[index];\n                if (editorDecorationId && !processed[editorDecorationId]) {\n                    processed[editorDecorationId] = true;\n                    updateDecorationsUntil(index); // update all decorations up to current index using the old dirtyRegionEndLine\n                    const newCollapseState = !this._regions.isCollapsed(index);\n                    this._regions.setCollapsed(index, newCollapseState);\n                    dirtyRegionEndLine = Math.max(dirtyRegionEndLine, this._regions.getEndLineNumber(index));\n                }\n            }\n            updateDecorationsUntil(this._regions.length);\n        });\n        this._updateEventEmitter.fire({ model: this, collapseStateChanged: toggledRegions });\n    }\n    removeManualRanges(ranges) {\n        const newFoldingRanges = new Array();\n        const intersects = (foldRange) => {\n            for (const range of ranges) {\n                if (!(range.startLineNumber > foldRange.endLineNumber || foldRange.startLineNumber > range.endLineNumber)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        for (let i = 0; i < this._regions.length; i++) {\n            const foldRange = this._regions.toFoldRange(i);\n            if (foldRange.source === 0 /* FoldSource.provider */ || !intersects(foldRange)) {\n                newFoldingRanges.push(foldRange);\n            }\n        }\n        this.updatePost(FoldingRegions.fromFoldRanges(newFoldingRanges));\n    }\n    update(newRegions, blockedLineNumers = []) {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges(blockedLineNumers);\n        const newRanges = FoldingRegions.sanitizeAndMerge(newRegions, foldedOrManualRanges, this._textModel.getLineCount());\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    updatePost(newRegions) {\n        const newEditorDecorations = [];\n        let lastHiddenLine = -1;\n        for (let index = 0, limit = newRegions.length; index < limit; index++) {\n            const startLineNumber = newRegions.getStartLineNumber(index);\n            const endLineNumber = newRegions.getEndLineNumber(index);\n            const isCollapsed = newRegions.isCollapsed(index);\n            const isManual = newRegions.getSource(index) !== 0 /* FoldSource.provider */;\n            const decorationRange = {\n                startLineNumber: startLineNumber,\n                startColumn: this._textModel.getLineMaxColumn(startLineNumber),\n                endLineNumber: endLineNumber,\n                endColumn: this._textModel.getLineMaxColumn(endLineNumber) + 1\n            };\n            newEditorDecorations.push({ range: decorationRange, options: this._decorationProvider.getDecorationOption(isCollapsed, endLineNumber <= lastHiddenLine, isManual) });\n            if (isCollapsed && endLineNumber > lastHiddenLine) {\n                lastHiddenLine = endLineNumber;\n            }\n        }\n        this._decorationProvider.changeDecorations(accessor => this._editorDecorationIds = accessor.deltaDecorations(this._editorDecorationIds, newEditorDecorations));\n        this._regions = newRegions;\n        this._updateEventEmitter.fire({ model: this });\n    }\n    _currentFoldedOrManualRanges(blockedLineNumers = []) {\n        const isBlocked = (startLineNumber, endLineNumber) => {\n            for (const blockedLineNumber of blockedLineNumers) {\n                if (startLineNumber < blockedLineNumber && blockedLineNumber <= endLineNumber) { // first line is visible\n                    return true;\n                }\n            }\n            return false;\n        };\n        const foldedRanges = [];\n        for (let i = 0, limit = this._regions.length; i < limit; i++) {\n            let isCollapsed = this.regions.isCollapsed(i);\n            const source = this.regions.getSource(i);\n            if (isCollapsed || source !== 0 /* FoldSource.provider */) {\n                const foldRange = this._regions.toFoldRange(i);\n                const decRange = this._textModel.getDecorationRange(this._editorDecorationIds[i]);\n                if (decRange) {\n                    if (isCollapsed && (isBlocked(decRange.startLineNumber, decRange.endLineNumber) || decRange.endLineNumber - decRange.startLineNumber !== foldRange.endLineNumber - foldRange.startLineNumber)) {\n                        isCollapsed = false; // uncollapse is the range is blocked or there has been lines removed or added\n                    }\n                    foldedRanges.push({\n                        startLineNumber: decRange.startLineNumber,\n                        endLineNumber: decRange.endLineNumber,\n                        type: foldRange.type,\n                        isCollapsed,\n                        source\n                    });\n                }\n            }\n        }\n        return foldedRanges;\n    }\n    /**\n     * Collapse state memento, for persistence only\n     */\n    getMemento() {\n        const foldedOrManualRanges = this._currentFoldedOrManualRanges();\n        const result = [];\n        for (let i = 0, limit = foldedOrManualRanges.length; i < limit; i++) {\n            const range = foldedOrManualRanges[i];\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            result.push({\n                startLineNumber: range.startLineNumber,\n                endLineNumber: range.endLineNumber,\n                isCollapsed: range.isCollapsed,\n                source: range.source,\n                checksum: checksum\n            });\n        }\n        return (result.length > 0) ? result : undefined;\n    }\n    /**\n     * Apply persisted state, for persistence only\n     */\n    applyMemento(state) {\n        var _a, _b;\n        if (!Array.isArray(state)) {\n            return;\n        }\n        const rangesToRestore = [];\n        const maxLineNumber = this._textModel.getLineCount();\n        for (const range of state) {\n            if (range.startLineNumber >= range.endLineNumber || range.startLineNumber < 1 || range.endLineNumber > maxLineNumber) {\n                continue;\n            }\n            const checksum = this._getLinesChecksum(range.startLineNumber + 1, range.endLineNumber);\n            if (!range.checksum || checksum === range.checksum) {\n                rangesToRestore.push({\n                    startLineNumber: range.startLineNumber,\n                    endLineNumber: range.endLineNumber,\n                    type: undefined,\n                    isCollapsed: (_a = range.isCollapsed) !== null && _a !== void 0 ? _a : true,\n                    source: (_b = range.source) !== null && _b !== void 0 ? _b : 0 /* FoldSource.provider */\n                });\n            }\n        }\n        const newRanges = FoldingRegions.sanitizeAndMerge(this._regions, rangesToRestore, maxLineNumber);\n        this.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n    }\n    _getLinesChecksum(lineNumber1, lineNumber2) {\n        const h = hash(this._textModel.getLineContent(lineNumber1)\n            + this._textModel.getLineContent(lineNumber2));\n        return h % 1000000; // 6 digits is plenty\n    }\n    dispose() {\n        this._decorationProvider.removeDecorations(this._editorDecorationIds);\n    }\n    getAllRegionsAtLine(lineNumber, filter) {\n        const result = [];\n        if (this._regions) {\n            let index = this._regions.findRange(lineNumber);\n            let level = 1;\n            while (index >= 0) {\n                const current = this._regions.toRegion(index);\n                if (!filter || filter(current, level)) {\n                    result.push(current);\n                }\n                level++;\n                index = current.parentIndex;\n            }\n        }\n        return result;\n    }\n    getRegionAtLine(lineNumber) {\n        if (this._regions) {\n            const index = this._regions.findRange(lineNumber);\n            if (index >= 0) {\n                return this._regions.toRegion(index);\n            }\n        }\n        return null;\n    }\n    getRegionsInside(region, filter) {\n        const result = [];\n        const index = region ? region.regionIndex + 1 : 0;\n        const endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n        if (filter && filter.length === 2) {\n            const levelStack = [];\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    while (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n                        levelStack.pop();\n                    }\n                    levelStack.push(current);\n                    if (filter(current, levelStack.length)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        else {\n            for (let i = index, len = this._regions.length; i < len; i++) {\n                const current = this._regions.toRegion(i);\n                if (this._regions.getStartLineNumber(i) < endLineNumber) {\n                    if (!filter || filter(current)) {\n                        result.push(current);\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n}\n/**\n * Collapse or expand the regions at the given locations\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function toggleCollapseState(foldingModel, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region) {\n            const doCollapse = !region.isCollapsed;\n            toToggle.push(region);\n            if (levels > 1) {\n                const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                toToggle.push(...regionsInside);\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all children.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand, or if not set, all regions in the model.\n */\nexport function setCollapseStateLevelsDown(foldingModel, doCollapse, levels = Number.MAX_VALUE, lineNumbers) {\n    const toToggle = [];\n    if (lineNumbers && lineNumbers.length > 0) {\n        for (const lineNumber of lineNumbers) {\n            const region = foldingModel.getRegionAtLine(lineNumber);\n            if (region) {\n                if (region.isCollapsed !== doCollapse) {\n                    toToggle.push(region);\n                }\n                if (levels > 1) {\n                    const regionsInside = foldingModel.getRegionsInside(region, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n                    toToggle.push(...regionsInside);\n                }\n            }\n        }\n    }\n    else {\n        const regionsInside = foldingModel.getRegionsInside(null, (r, level) => r.isCollapsed !== doCollapse && level < levels);\n        toToggle.push(...regionsInside);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand the regions at the given locations including all parents.\n * @param doCollapse Whether to collapse or expand\n * @param levels The number of levels. Use 1 to only impact the regions at the location, use Number.MAX_VALUE for all levels.\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateLevelsUp(foldingModel, doCollapse, levels, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region, level) => region.isCollapsed !== doCollapse && level <= levels);\n        toToggle.push(...regions);\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Collapse or expand a region at the given locations. If the inner most region is already collapsed/expanded, uses the first parent instead.\n * @param doCollapse Whether to collapse or expand\n * @param lineNumbers the location of the regions to collapse or expand.\n */\nexport function setCollapseStateUp(foldingModel, doCollapse, lineNumbers) {\n    const toToggle = [];\n    for (const lineNumber of lineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, (region) => region.isCollapsed !== doCollapse);\n        if (regions.length > 0) {\n            toToggle.push(regions[0]);\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions that have a given level, except if they contain one of the blocked lines.\n * @param foldLevel level. Level == 1 is the top level\n * @param doCollapse Whether to collapse or expand\n*/\nexport function setCollapseStateAtLevel(foldingModel, foldLevel, doCollapse, blockedLineNumbers) {\n    const filter = (region, level) => level === foldLevel && region.isCollapsed !== doCollapse && !blockedLineNumbers.some(line => region.containsLine(line));\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds or unfolds all regions, except if they contain or are contained by a region of one of the blocked lines.\n * @param doCollapse Whether to collapse or expand\n * @param blockedLineNumbers the location of regions to not collapse or expand\n */\nexport function setCollapseStateForRest(foldingModel, doCollapse, blockedLineNumbers) {\n    const filteredRegions = [];\n    for (const lineNumber of blockedLineNumbers) {\n        const regions = foldingModel.getAllRegionsAtLine(lineNumber, undefined);\n        if (regions.length > 0) {\n            filteredRegions.push(regions[0]);\n        }\n    }\n    const filter = (region) => filteredRegions.every((filteredRegion) => !filteredRegion.containedBy(region) && !region.containedBy(filteredRegion)) && region.isCollapsed !== doCollapse;\n    const toToggle = foldingModel.getRegionsInside(null, filter);\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions for which the lines start with a given regex\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForMatchingLines(foldingModel, regExp, doCollapse) {\n    const editorModel = foldingModel.textModel;\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i)) {\n            const startLineNumber = regions.getStartLineNumber(i);\n            if (regExp.test(editorModel.getLineContent(startLineNumber))) {\n                toToggle.push(regions.toRegion(i));\n            }\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Folds all regions of the given type\n * @param foldingModel the folding model\n */\nexport function setCollapseStateForType(foldingModel, type, doCollapse) {\n    const regions = foldingModel.regions;\n    const toToggle = [];\n    for (let i = regions.length - 1; i >= 0; i--) {\n        if (doCollapse !== regions.isCollapsed(i) && type === regions.getType(i)) {\n            toToggle.push(regions.toRegion(i));\n        }\n    }\n    foldingModel.toggleCollapseState(toToggle);\n}\n/**\n * Get line to go to for parent fold of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Parent fold start line\n */\nexport function getParentFoldLine(lineNumber, foldingModel) {\n    let startLineNumber = null;\n    const foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    if (foldingRegion !== null) {\n        startLineNumber = foldingRegion.startLineNumber;\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to parent fold\n        if (lineNumber === startLineNumber) {\n            const parentFoldingIdx = foldingRegion.parentIndex;\n            if (parentFoldingIdx !== -1) {\n                startLineNumber = foldingModel.regions.getStartLineNumber(parentFoldingIdx);\n            }\n            else {\n                startLineNumber = null;\n            }\n        }\n    }\n    return startLineNumber;\n}\n/**\n * Get line to go to for previous fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Previous fold start line\n */\nexport function getPreviousFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to previous sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // If current line is not the start of the current fold, go to top line of current fold. If not, go to previous fold.\n        if (lineNumber !== foldingRegion.startLineNumber) {\n            return foldingRegion.startLineNumber;\n        }\n        else {\n            // Find min line number to stay within parent.\n            const expectedParentIndex = foldingRegion.parentIndex;\n            let minLineNumber = 0;\n            if (expectedParentIndex !== -1) {\n                minLineNumber = foldingModel.regions.getStartLineNumber(foldingRegion.parentIndex);\n            }\n            // Find fold at same level.\n            while (foldingRegion !== null) {\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                    // Keep at same level.\n                    if (foldingRegion.startLineNumber <= minLineNumber) {\n                        return null;\n                    }\n                    else if (foldingRegion.parentIndex === expectedParentIndex) {\n                        return foldingRegion.startLineNumber;\n                    }\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n    }\n    else {\n        // Go to last fold that's before the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(foldingModel.regions.length - 1);\n            while (foldingRegion !== null) {\n                // Found fold before current line.\n                if (foldingRegion.startLineNumber < lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex > 0) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex - 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n/**\n * Get line to go to next fold at the same level of current line\n * @param lineNumber the current line number\n * @param foldingModel the folding model\n *\n * @return Next fold start line\n */\nexport function getNextFoldLine(lineNumber, foldingModel) {\n    let foldingRegion = foldingModel.getRegionAtLine(lineNumber);\n    // If on the folding range start line, go to next sibling.\n    if (foldingRegion !== null && foldingRegion.startLineNumber === lineNumber) {\n        // Find max line number to stay within parent.\n        const expectedParentIndex = foldingRegion.parentIndex;\n        let maxLineNumber = 0;\n        if (expectedParentIndex !== -1) {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingRegion.parentIndex);\n        }\n        else if (foldingModel.regions.length === 0) {\n            return null;\n        }\n        else {\n            maxLineNumber = foldingModel.regions.getEndLineNumber(foldingModel.regions.length - 1);\n        }\n        // Find fold at same level.\n        while (foldingRegion !== null) {\n            if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                // Keep at same level.\n                if (foldingRegion.startLineNumber >= maxLineNumber) {\n                    return null;\n                }\n                else if (foldingRegion.parentIndex === expectedParentIndex) {\n                    return foldingRegion.startLineNumber;\n                }\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    else {\n        // Go to first fold that's after the current line.\n        if (foldingModel.regions.length > 0) {\n            foldingRegion = foldingModel.regions.toRegion(0);\n            while (foldingRegion !== null) {\n                // Found fold after current line.\n                if (foldingRegion.startLineNumber > lineNumber) {\n                    return foldingRegion.startLineNumber;\n                }\n                if (foldingRegion.regionIndex < foldingModel.regions.length) {\n                    foldingRegion = foldingModel.regions.toRegion(foldingRegion.regionIndex + 1);\n                }\n                else {\n                    foldingRegion = null;\n                }\n            }\n        }\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Range } from '../../../common/core/range.js';\nimport { countEOL } from '../../../common/core/eolCounter.js';\nexport class HiddenRangeModel {\n    constructor(model) {\n        this._updateEventEmitter = new Emitter();\n        this._hasLineChanges = false;\n        this._foldingModel = model;\n        this._foldingModelListener = model.onDidChange(_ => this.updateHiddenRanges());\n        this._hiddenRanges = [];\n        if (model.regions.length) {\n            this.updateHiddenRanges();\n        }\n    }\n    get onDidChange() { return this._updateEventEmitter.event; }\n    get hiddenRanges() { return this._hiddenRanges; }\n    notifyChangeModelContent(e) {\n        if (this._hiddenRanges.length && !this._hasLineChanges) {\n            this._hasLineChanges = e.changes.some(change => {\n                return change.range.endLineNumber !== change.range.startLineNumber || countEOL(change.text)[0] !== 0;\n            });\n        }\n    }\n    updateHiddenRanges() {\n        let updateHiddenAreas = false;\n        const newHiddenAreas = [];\n        let i = 0; // index into hidden\n        let k = 0;\n        let lastCollapsedStart = Number.MAX_VALUE;\n        let lastCollapsedEnd = -1;\n        const ranges = this._foldingModel.regions;\n        for (; i < ranges.length; i++) {\n            if (!ranges.isCollapsed(i)) {\n                continue;\n            }\n            const startLineNumber = ranges.getStartLineNumber(i) + 1; // the first line is not hidden\n            const endLineNumber = ranges.getEndLineNumber(i);\n            if (lastCollapsedStart <= startLineNumber && endLineNumber <= lastCollapsedEnd) {\n                // ignore ranges contained in collapsed regions\n                continue;\n            }\n            if (!updateHiddenAreas && k < this._hiddenRanges.length && this._hiddenRanges[k].startLineNumber === startLineNumber && this._hiddenRanges[k].endLineNumber === endLineNumber) {\n                // reuse the old ranges\n                newHiddenAreas.push(this._hiddenRanges[k]);\n                k++;\n            }\n            else {\n                updateHiddenAreas = true;\n                newHiddenAreas.push(new Range(startLineNumber, 1, endLineNumber, 1));\n            }\n            lastCollapsedStart = startLineNumber;\n            lastCollapsedEnd = endLineNumber;\n        }\n        if (this._hasLineChanges || updateHiddenAreas || k < this._hiddenRanges.length) {\n            this.applyHiddenRanges(newHiddenAreas);\n        }\n    }\n    applyHiddenRanges(newHiddenAreas) {\n        this._hiddenRanges = newHiddenAreas;\n        this._hasLineChanges = false;\n        this._updateEventEmitter.fire(newHiddenAreas);\n    }\n    hasRanges() {\n        return this._hiddenRanges.length > 0;\n    }\n    isHidden(line) {\n        return findRange(this._hiddenRanges, line) !== null;\n    }\n    adjustSelections(selections) {\n        let hasChanges = false;\n        const editorModel = this._foldingModel.textModel;\n        let lastRange = null;\n        const adjustLine = (line) => {\n            if (!lastRange || !isInside(line, lastRange)) {\n                lastRange = findRange(this._hiddenRanges, line);\n            }\n            if (lastRange) {\n                return lastRange.startLineNumber - 1;\n            }\n            return null;\n        };\n        for (let i = 0, len = selections.length; i < len; i++) {\n            let selection = selections[i];\n            const adjustedStartLine = adjustLine(selection.startLineNumber);\n            if (adjustedStartLine) {\n                selection = selection.setStartPosition(adjustedStartLine, editorModel.getLineMaxColumn(adjustedStartLine));\n                hasChanges = true;\n            }\n            const adjustedEndLine = adjustLine(selection.endLineNumber);\n            if (adjustedEndLine) {\n                selection = selection.setEndPosition(adjustedEndLine, editorModel.getLineMaxColumn(adjustedEndLine));\n                hasChanges = true;\n            }\n            selections[i] = selection;\n        }\n        return hasChanges;\n    }\n    dispose() {\n        if (this.hiddenRanges.length > 0) {\n            this._hiddenRanges = [];\n            this._updateEventEmitter.fire(this._hiddenRanges);\n        }\n        if (this._foldingModelListener) {\n            this._foldingModelListener.dispose();\n            this._foldingModelListener = null;\n        }\n    }\n}\nfunction isInside(line, range) {\n    return line >= range.startLineNumber && line <= range.endLineNumber;\n}\nfunction findRange(ranges, line) {\n    const i = findFirstInSorted(ranges, r => line < r.startLineNumber) - 1;\n    if (i >= 0 && ranges[i].endLineNumber >= line) {\n        return ranges[i];\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT = 5000;\nexport const ID_INDENT_PROVIDER = 'indent';\nexport class IndentRangeProvider {\n    constructor(editorModel, languageConfigurationService, maxFoldingRegions) {\n        this.editorModel = editorModel;\n        this.languageConfigurationService = languageConfigurationService;\n        this.maxFoldingRegions = maxFoldingRegions;\n        this.id = ID_INDENT_PROVIDER;\n    }\n    dispose() { }\n    compute(cancelationToken, notifyTooManyRegions) {\n        const foldingRules = this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules;\n        const offSide = foldingRules && !!foldingRules.offSide;\n        const markers = foldingRules && foldingRules.markers;\n        return Promise.resolve(computeRanges(this.editorModel, offSide, markers, this.maxFoldingRegions, notifyTooManyRegions));\n    }\n}\n// public only for testing\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._indentOccurrences = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    insertFirst(startLineNumber, endLineNumber, indent) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._length++;\n        if (indent < 1000) {\n            this._indentOccurrences[indent] = (this._indentOccurrences[indent] || 0) + 1;\n        }\n    }\n    toIndentRanges(model) {\n        var _a;\n        if (this._length <= this._foldingRangesLimit) {\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = this._length - 1, k = 0; i >= 0; i--, k++) {\n                startIndexes[k] = this._startIndexes[i];\n                endIndexes[k] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n        else {\n            (_a = this._notifyTooManyRegions) === null || _a === void 0 ? void 0 : _a.call(this, this._foldingRangesLimit);\n            let entries = 0;\n            let maxIndent = this._indentOccurrences.length;\n            for (let i = 0; i < this._indentOccurrences.length; i++) {\n                const n = this._indentOccurrences[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxIndent = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const tabSize = model.getOptions().tabSize;\n            // reverse and create arrays of the exact length\n            const startIndexes = new Uint32Array(this._foldingRangesLimit);\n            const endIndexes = new Uint32Array(this._foldingRangesLimit);\n            for (let i = this._length - 1, k = 0; i >= 0; i--) {\n                const startIndex = this._startIndexes[i];\n                const lineContent = model.getLineContent(startIndex);\n                const indent = computeIndentLevel(lineContent, tabSize);\n                if (indent < maxIndent || (indent === maxIndent && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = startIndex;\n                    endIndexes[k] = this._endIndexes[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes);\n        }\n    }\n}\nexport function computeRanges(model, offSide, markers, foldingRangesLimit, notifyTooManyRegions) {\n    const tabSize = model.getOptions().tabSize;\n    foldingRangesLimit = foldingRangesLimit !== null && foldingRangesLimit !== void 0 ? foldingRangesLimit : MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT;\n    const result = new RangesCollector(foldingRangesLimit, notifyTooManyRegions);\n    let pattern = undefined;\n    if (markers) {\n        pattern = new RegExp(`(${markers.start.source})|(?:${markers.end.source})`);\n    }\n    const previousRegions = [];\n    const line = model.getLineCount() + 1;\n    previousRegions.push({ indent: -1, endAbove: line, line }); // sentinel, to make sure there's at least one entry\n    for (let line = model.getLineCount(); line > 0; line--) {\n        const lineContent = model.getLineContent(line);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        let previous = previousRegions[previousRegions.length - 1];\n        if (indent === -1) {\n            if (offSide) {\n                // for offSide languages, empty lines are associated to the previous block\n                // note: the next block is already written to the results, so this only\n                // impacts the end position of the block before\n                previous.endAbove = line;\n            }\n            continue; // only whitespace\n        }\n        let m;\n        if (pattern && (m = lineContent.match(pattern))) {\n            // folding pattern match\n            if (m[1]) { // start pattern match\n                // discard all regions until the folding pattern\n                let i = previousRegions.length - 1;\n                while (i > 0 && previousRegions[i].indent !== -2) {\n                    i--;\n                }\n                if (i > 0) {\n                    previousRegions.length = i + 1;\n                    previous = previousRegions[i];\n                    // new folding range from pattern, includes the end line\n                    result.insertFirst(line, previous.line, indent);\n                    previous.line = line;\n                    previous.indent = indent;\n                    previous.endAbove = line;\n                    continue;\n                }\n                else {\n                    // no end marker found, treat line as a regular line\n                }\n            }\n            else { // end pattern match\n                previousRegions.push({ indent: -2, endAbove: line, line });\n                continue;\n            }\n        }\n        if (previous.indent > indent) {\n            // discard all regions with larger indent\n            do {\n                previousRegions.pop();\n                previous = previousRegions[previousRegions.length - 1];\n            } while (previous.indent > indent);\n            // new folding range\n            const endLineNumber = previous.endAbove - 1;\n            if (endLineNumber - line >= 1) { // needs at east size 1\n                result.insertFirst(line, endLineNumber, indent);\n            }\n        }\n        if (previous.indent === indent) {\n            previous.endAbove = line;\n        }\n        else { // previous.indent < indent\n            // new region with a bigger indent\n            previousRegions.push({ indent, endAbove: line, line });\n        }\n    }\n    return result.toIndentRanges(model);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\nexport class FoldingDecorationProvider {\n    constructor(editor) {\n        this.editor = editor;\n        this.showFoldingControls = 'mouseover';\n        this.showFoldingHighlights = true;\n    }\n    getDecorationOption(isCollapsed, isHidden, isManual) {\n        if (isHidden // is inside another collapsed region\n            || this.showFoldingControls === 'never') {\n            return FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n        }\n        if (isCollapsed) {\n            return isManual ?\n                (this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\n                : (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\n        }\n        else if (this.showFoldingControls === 'mouseover') {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n        }\n        else {\n            return isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n        }\n    }\n    changeDecorations(callback) {\n        return this.editor.changeDecorations(callback);\n    }\n    removeDecorations(decorationIds) {\n        this.editor.removeDecorations(decorationIds);\n    }\n}\nFoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-collapsed-highlighted-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    afterContentClassName: 'inline-folded',\n    className: 'folded-background',\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n});\nFoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-auto-hide-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-expanded-visual-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-manually-expanded-visual-decoration',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    isWholeLine: true,\n    firstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon)\n});\nFoldingDecorationProvider.HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n    description: 'folding-hidden-range-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FoldingRegions, MAX_LINE_NUMBER } from './foldingRanges.js';\nconst foldingContext = {};\nexport const ID_SYNTAX_PROVIDER = 'syntax';\nexport class SyntaxRangeProvider {\n    constructor(editorModel, providers, handleFoldingRangesChange, limit) {\n        this.editorModel = editorModel;\n        this.providers = providers;\n        this.limit = limit;\n        this.id = ID_SYNTAX_PROVIDER;\n        for (const provider of providers) {\n            if (typeof provider.onDidChange === 'function') {\n                if (!this.disposables) {\n                    this.disposables = new DisposableStore();\n                }\n                this.disposables.add(provider.onDidChange(handleFoldingRangesChange));\n            }\n        }\n    }\n    compute(cancellationToken, notifyTooManyRegions) {\n        return collectSyntaxRanges(this.providers, this.editorModel, cancellationToken).then(ranges => {\n            if (ranges) {\n                const res = sanitizeRanges(ranges, this.limit, notifyTooManyRegions);\n                return res;\n            }\n            return null;\n        });\n    }\n    dispose() {\n        var _a;\n        (_a = this.disposables) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\nfunction collectSyntaxRanges(providers, model, cancellationToken) {\n    let rangeData = null;\n    const promises = providers.map((provider, i) => {\n        return Promise.resolve(provider.provideFoldingRanges(model, foldingContext, cancellationToken)).then(ranges => {\n            if (cancellationToken.isCancellationRequested) {\n                return;\n            }\n            if (Array.isArray(ranges)) {\n                if (!Array.isArray(rangeData)) {\n                    rangeData = [];\n                }\n                const nLines = model.getLineCount();\n                for (const r of ranges) {\n                    if (r.start > 0 && r.end > r.start && r.end <= nLines) {\n                        rangeData.push({ start: r.start, end: r.end, rank: i, kind: r.kind });\n                    }\n                }\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(_ => {\n        return rangeData;\n    });\n}\nexport class RangesCollector {\n    constructor(foldingRangesLimit, _notifyTooManyRegions) {\n        this._notifyTooManyRegions = _notifyTooManyRegions;\n        this._startIndexes = [];\n        this._endIndexes = [];\n        this._nestingLevels = [];\n        this._nestingLevelCounts = [];\n        this._types = [];\n        this._length = 0;\n        this._foldingRangesLimit = foldingRangesLimit;\n    }\n    add(startLineNumber, endLineNumber, type, nestingLevel) {\n        if (startLineNumber > MAX_LINE_NUMBER || endLineNumber > MAX_LINE_NUMBER) {\n            return;\n        }\n        const index = this._length;\n        this._startIndexes[index] = startLineNumber;\n        this._endIndexes[index] = endLineNumber;\n        this._nestingLevels[index] = nestingLevel;\n        this._types[index] = type;\n        this._length++;\n        if (nestingLevel < 30) {\n            this._nestingLevelCounts[nestingLevel] = (this._nestingLevelCounts[nestingLevel] || 0) + 1;\n        }\n    }\n    toIndentRanges() {\n        var _a;\n        if (this._length <= this._foldingRangesLimit) {\n            const startIndexes = new Uint32Array(this._length);\n            const endIndexes = new Uint32Array(this._length);\n            for (let i = 0; i < this._length; i++) {\n                startIndexes[i] = this._startIndexes[i];\n                endIndexes[i] = this._endIndexes[i];\n            }\n            return new FoldingRegions(startIndexes, endIndexes, this._types);\n        }\n        else {\n            (_a = this._notifyTooManyRegions) === null || _a === void 0 ? void 0 : _a.call(this, this._foldingRangesLimit);\n            let entries = 0;\n            let maxLevel = this._nestingLevelCounts.length;\n            for (let i = 0; i < this._nestingLevelCounts.length; i++) {\n                const n = this._nestingLevelCounts[i];\n                if (n) {\n                    if (n + entries > this._foldingRangesLimit) {\n                        maxLevel = i;\n                        break;\n                    }\n                    entries += n;\n                }\n            }\n            const startIndexes = new Uint32Array(this._foldingRangesLimit);\n            const endIndexes = new Uint32Array(this._foldingRangesLimit);\n            const types = [];\n            for (let i = 0, k = 0; i < this._length; i++) {\n                const level = this._nestingLevels[i];\n                if (level < maxLevel || (level === maxLevel && entries++ < this._foldingRangesLimit)) {\n                    startIndexes[k] = this._startIndexes[i];\n                    endIndexes[k] = this._endIndexes[i];\n                    types[k] = this._types[i];\n                    k++;\n                }\n            }\n            return new FoldingRegions(startIndexes, endIndexes, types);\n        }\n    }\n}\nexport function sanitizeRanges(rangeData, limit, notifyTooManyRegions) {\n    const sorted = rangeData.sort((d1, d2) => {\n        let diff = d1.start - d2.start;\n        if (diff === 0) {\n            diff = d1.rank - d2.rank;\n        }\n        return diff;\n    });\n    const collector = new RangesCollector(limit, notifyTooManyRegions);\n    let top = undefined;\n    const previous = [];\n    for (const entry of sorted) {\n        if (!top) {\n            top = entry;\n            collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n        }\n        else {\n            if (entry.start > top.start) {\n                if (entry.end <= top.end) {\n                    previous.push(top);\n                    top = entry;\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n                else {\n                    if (entry.start > top.end) {\n                        do {\n                            top = previous.pop();\n                        } while (top && entry.start > top.end);\n                        if (top) {\n                            previous.push(top);\n                        }\n                        top = entry;\n                    }\n                    collector.add(entry.start, entry.end, entry.kind && entry.kind.value, previous.length);\n                }\n            }\n        }\n    }\n    return collector.toIndentRanges();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport * as types from '../../../../base/common/types.js';\nimport './folding.css';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerInstantiatedEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { FoldingRangeKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine as getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateForType, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp, toggleCollapseState } from './foldingModel.js';\nimport { HiddenRangeModel } from './hiddenRangeModel.js';\nimport { IndentRangeProvider } from './indentRangeProvider.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { foldingCollapsedIcon, FoldingDecorationProvider, foldingExpandedIcon, foldingManualCollapsedIcon, foldingManualExpandedIcon } from './foldingDecorations.js';\nimport { FoldingRegions } from './foldingRanges.js';\nimport { SyntaxRangeProvider } from './syntaxRangeProvider.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nconst CONTEXT_FOLDING_ENABLED = new RawContextKey('foldingEnabled', false);\nlet FoldingController = class FoldingController extends Disposable {\n    constructor(editor, contextKeyService, languageConfigurationService, notificationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this.contextKeyService = contextKeyService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this._tooManyRegionsNotified = false;\n        this.localToDispose = this._register(new DisposableStore());\n        this.editor = editor;\n        const options = this.editor.getOptions();\n        this._isEnabled = options.get(39 /* EditorOption.folding */);\n        this._useFoldingProviders = options.get(40 /* EditorOption.foldingStrategy */) !== 'indentation';\n        this._unfoldOnClickAfterEndOfLine = options.get(44 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n        this._restoringViewState = false;\n        this._currentModelHasFoldedImports = false;\n        this._foldingImportsByDefault = options.get(42 /* EditorOption.foldingImportsByDefault */);\n        this._maxFoldingRegions = options.get(43 /* EditorOption.foldingMaximumRegions */);\n        this.updateDebounceInfo = languageFeatureDebounceService.for(languageFeaturesService.foldingRangeProvider, 'Folding', { min: 200 });\n        this.foldingModel = null;\n        this.hiddenRangeModel = null;\n        this.rangeProvider = null;\n        this.foldingRegionPromise = null;\n        this.foldingModelPromise = null;\n        this.updateScheduler = null;\n        this.cursorChangedScheduler = null;\n        this.mouseDownInfo = null;\n        this.foldingDecorationProvider = new FoldingDecorationProvider(editor);\n        this.foldingDecorationProvider.showFoldingControls = options.get(101 /* EditorOption.showFoldingControls */);\n        this.foldingDecorationProvider.showFoldingHighlights = options.get(41 /* EditorOption.foldingHighlight */);\n        this.foldingEnabled = CONTEXT_FOLDING_ENABLED.bindTo(this.contextKeyService);\n        this.foldingEnabled.set(this._isEnabled);\n        this._notifyTooManyRegions = (maxFoldingRegions) => {\n            // Message will display once per time vscode runs. Once per file would be tricky.\n            if (!this._tooManyRegionsNotified) {\n                notificationService.notify({\n                    severity: Severity.Warning,\n                    sticky: true,\n                    message: nls.localize('maximum fold ranges', \"The number of foldable regions is limited to a maximum of {0}. Increase configuration option ['Folding Maximum Regions'](command:workbench.action.openSettings?[\\\"editor.foldingMaximumRegions\\\"]) to enable more.\", maxFoldingRegions)\n                });\n                this._tooManyRegionsNotified = true;\n            }\n        };\n        this._register(this.editor.onDidChangeModel(() => this.onModelChanged()));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(39 /* EditorOption.folding */)) {\n                this._isEnabled = this.editor.getOptions().get(39 /* EditorOption.folding */);\n                this.foldingEnabled.set(this._isEnabled);\n                this.onModelChanged();\n            }\n            if (e.hasChanged(43 /* EditorOption.foldingMaximumRegions */)) {\n                this._maxFoldingRegions = this.editor.getOptions().get(43 /* EditorOption.foldingMaximumRegions */);\n                this._tooManyRegionsNotified = false;\n                this.onModelChanged();\n            }\n            if (e.hasChanged(101 /* EditorOption.showFoldingControls */) || e.hasChanged(41 /* EditorOption.foldingHighlight */)) {\n                const options = this.editor.getOptions();\n                this.foldingDecorationProvider.showFoldingControls = options.get(101 /* EditorOption.showFoldingControls */);\n                this.foldingDecorationProvider.showFoldingHighlights = options.get(41 /* EditorOption.foldingHighlight */);\n                this.triggerFoldingModelChanged();\n            }\n            if (e.hasChanged(40 /* EditorOption.foldingStrategy */)) {\n                this._useFoldingProviders = this.editor.getOptions().get(40 /* EditorOption.foldingStrategy */) !== 'indentation';\n                this.onFoldingStrategyChanged();\n            }\n            if (e.hasChanged(44 /* EditorOption.unfoldOnClickAfterEndOfLine */)) {\n                this._unfoldOnClickAfterEndOfLine = this.editor.getOptions().get(44 /* EditorOption.unfoldOnClickAfterEndOfLine */);\n            }\n            if (e.hasChanged(42 /* EditorOption.foldingImportsByDefault */)) {\n                this._foldingImportsByDefault = this.editor.getOptions().get(42 /* EditorOption.foldingImportsByDefault */);\n            }\n        }));\n        this.onModelChanged();\n    }\n    static get(editor) {\n        return editor.getContribution(FoldingController.ID);\n    }\n    /**\n     * Store view state.\n     */\n    saveViewState() {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization()) {\n            return {};\n        }\n        if (this.foldingModel) { // disposed ?\n            const collapsedRegions = this.foldingModel.getMemento();\n            const provider = this.rangeProvider ? this.rangeProvider.id : undefined;\n            return { collapsedRegions, lineCount: model.getLineCount(), provider, foldedImports: this._currentModelHasFoldedImports };\n        }\n        return undefined;\n    }\n    /**\n     * Restore view state.\n     */\n    restoreViewState(state) {\n        const model = this.editor.getModel();\n        if (!model || !this._isEnabled || model.isTooLargeForTokenization() || !this.hiddenRangeModel) {\n            return;\n        }\n        if (!state || state.lineCount !== model.getLineCount()) {\n            return;\n        }\n        this._currentModelHasFoldedImports = !!state.foldedImports;\n        if (state.collapsedRegions && state.collapsedRegions.length > 0 && this.foldingModel) {\n            this._restoringViewState = true;\n            try {\n                this.foldingModel.applyMemento(state.collapsedRegions);\n            }\n            finally {\n                this._restoringViewState = false;\n            }\n        }\n    }\n    onModelChanged() {\n        this.localToDispose.clear();\n        const model = this.editor.getModel();\n        if (!this._isEnabled || !model || model.isTooLargeForTokenization()) {\n            // huge files get no view model, so they cannot support hidden areas\n            return;\n        }\n        this._currentModelHasFoldedImports = false;\n        this.foldingModel = new FoldingModel(model, this.foldingDecorationProvider);\n        this.localToDispose.add(this.foldingModel);\n        this.hiddenRangeModel = new HiddenRangeModel(this.foldingModel);\n        this.localToDispose.add(this.hiddenRangeModel);\n        this.localToDispose.add(this.hiddenRangeModel.onDidChange(hr => this.onHiddenRangesChanges(hr)));\n        this.updateScheduler = new Delayer(this.updateDebounceInfo.get(model));\n        this.cursorChangedScheduler = new RunOnceScheduler(() => this.revealCursor(), 200);\n        this.localToDispose.add(this.cursorChangedScheduler);\n        this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(() => this.onFoldingStrategyChanged()));\n        this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(() => this.onFoldingStrategyChanged())); // covers model language changes as well\n        this.localToDispose.add(this.editor.onDidChangeModelContent(e => this.onDidChangeModelContent(e)));\n        this.localToDispose.add(this.editor.onDidChangeCursorPosition(() => this.onCursorPositionChanged()));\n        this.localToDispose.add(this.editor.onMouseDown(e => this.onEditorMouseDown(e)));\n        this.localToDispose.add(this.editor.onMouseUp(e => this.onEditorMouseUp(e)));\n        this.localToDispose.add({\n            dispose: () => {\n                if (this.foldingRegionPromise) {\n                    this.foldingRegionPromise.cancel();\n                    this.foldingRegionPromise = null;\n                }\n                if (this.updateScheduler) {\n                    this.updateScheduler.cancel();\n                }\n                this.updateScheduler = null;\n                this.foldingModel = null;\n                this.foldingModelPromise = null;\n                this.hiddenRangeModel = null;\n                this.cursorChangedScheduler = null;\n                if (this.rangeProvider) {\n                    this.rangeProvider.dispose();\n                }\n                this.rangeProvider = null;\n            }\n        });\n        this.triggerFoldingModelChanged();\n    }\n    onFoldingStrategyChanged() {\n        if (this.rangeProvider) {\n            this.rangeProvider.dispose();\n        }\n        this.rangeProvider = null;\n        this.triggerFoldingModelChanged();\n    }\n    getRangeProvider(editorModel) {\n        if (this.rangeProvider) {\n            return this.rangeProvider;\n        }\n        this.rangeProvider = new IndentRangeProvider(editorModel, this.languageConfigurationService, this._maxFoldingRegions); // fallback\n        if (this._useFoldingProviders && this.foldingModel) {\n            const foldingProviders = this.languageFeaturesService.foldingRangeProvider.ordered(this.foldingModel.textModel);\n            if (foldingProviders.length > 0) {\n                this.rangeProvider = new SyntaxRangeProvider(editorModel, foldingProviders, () => this.triggerFoldingModelChanged(), this._maxFoldingRegions);\n            }\n        }\n        return this.rangeProvider;\n    }\n    getFoldingModel() {\n        return this.foldingModelPromise;\n    }\n    onDidChangeModelContent(e) {\n        var _a;\n        (_a = this.hiddenRangeModel) === null || _a === void 0 ? void 0 : _a.notifyChangeModelContent(e);\n        this.triggerFoldingModelChanged();\n    }\n    triggerFoldingModelChanged() {\n        if (this.updateScheduler) {\n            if (this.foldingRegionPromise) {\n                this.foldingRegionPromise.cancel();\n                this.foldingRegionPromise = null;\n            }\n            this.foldingModelPromise = this.updateScheduler.trigger(() => {\n                const foldingModel = this.foldingModel;\n                if (!foldingModel) { // null if editor has been disposed, or folding turned off\n                    return null;\n                }\n                const sw = new StopWatch(true);\n                const provider = this.getRangeProvider(foldingModel.textModel);\n                const foldingRegionPromise = this.foldingRegionPromise = createCancelablePromise(token => provider.compute(token, this._notifyTooManyRegions));\n                return foldingRegionPromise.then(foldingRanges => {\n                    if (foldingRanges && foldingRegionPromise === this.foldingRegionPromise) { // new request or cancelled in the meantime?\n                        let scrollState;\n                        if (this._foldingImportsByDefault && !this._currentModelHasFoldedImports) {\n                            const hasChanges = foldingRanges.setCollapsedAllOfType(FoldingRangeKind.Imports.value, true);\n                            if (hasChanges) {\n                                scrollState = StableEditorScrollState.capture(this.editor);\n                                this._currentModelHasFoldedImports = hasChanges;\n                            }\n                        }\n                        // some cursors might have moved into hidden regions, make sure they are in expanded regions\n                        const selections = this.editor.getSelections();\n                        const selectionLineNumbers = selections ? selections.map(s => s.startLineNumber) : [];\n                        foldingModel.update(foldingRanges, selectionLineNumbers);\n                        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this.editor);\n                        // update debounce info\n                        const newValue = this.updateDebounceInfo.update(foldingModel.textModel, sw.elapsed());\n                        if (this.updateScheduler) {\n                            this.updateScheduler.defaultDelay = newValue;\n                        }\n                    }\n                    return foldingModel;\n                });\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return null;\n            });\n        }\n    }\n    onHiddenRangesChanges(hiddenRanges) {\n        if (this.hiddenRangeModel && hiddenRanges.length && !this._restoringViewState) {\n            const selections = this.editor.getSelections();\n            if (selections) {\n                if (this.hiddenRangeModel.adjustSelections(selections)) {\n                    this.editor.setSelections(selections);\n                }\n            }\n        }\n        this.editor.setHiddenAreas(hiddenRanges);\n    }\n    onCursorPositionChanged() {\n        if (this.hiddenRangeModel && this.hiddenRangeModel.hasRanges()) {\n            this.cursorChangedScheduler.schedule();\n        }\n    }\n    revealCursor() {\n        const foldingModel = this.getFoldingModel();\n        if (!foldingModel) {\n            return;\n        }\n        foldingModel.then(foldingModel => {\n            if (foldingModel) {\n                const selections = this.editor.getSelections();\n                if (selections && selections.length > 0) {\n                    const toToggle = [];\n                    for (const selection of selections) {\n                        const lineNumber = selection.selectionStartLineNumber;\n                        if (this.hiddenRangeModel && this.hiddenRangeModel.isHidden(lineNumber)) {\n                            toToggle.push(...foldingModel.getAllRegionsAtLine(lineNumber, r => r.isCollapsed && lineNumber > r.startLineNumber));\n                        }\n                    }\n                    if (toToggle.length) {\n                        foldingModel.toggleCollapseState(toToggle);\n                        this.reveal(selections[0].getPosition());\n                    }\n                }\n            }\n        }).then(undefined, onUnexpectedError);\n    }\n    onEditorMouseDown(e) {\n        this.mouseDownInfo = null;\n        if (!this.hiddenRangeModel || !e.target || !e.target.range) {\n            return;\n        }\n        if (!e.event.leftButton && !e.event.middleButton) {\n            return;\n        }\n        const range = e.target.range;\n        let iconClicked = false;\n        switch (e.target.type) {\n            case 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */: {\n                const data = e.target.detail;\n                const offsetLeftInGutter = e.target.element.offsetLeft;\n                const gutterOffsetX = data.offsetX - offsetLeftInGutter;\n                // const gutterOffsetX = data.offsetX - data.glyphMarginWidth - data.lineNumbersWidth - data.glyphMarginLeft;\n                // TODO@joao TODO@alex TODO@martin this is such that we don't collide with dirty diff\n                if (gutterOffsetX < 5) { // the whitespace between the border and the real folding icon border is 5px\n                    return;\n                }\n                iconClicked = true;\n                break;\n            }\n            case 7 /* MouseTargetType.CONTENT_EMPTY */: {\n                if (this._unfoldOnClickAfterEndOfLine && this.hiddenRangeModel.hasRanges()) {\n                    const data = e.target.detail;\n                    if (!data.isAfterLines) {\n                        break;\n                    }\n                }\n                return;\n            }\n            case 6 /* MouseTargetType.CONTENT_TEXT */: {\n                if (this.hiddenRangeModel.hasRanges()) {\n                    const model = this.editor.getModel();\n                    if (model && range.startColumn === model.getLineMaxColumn(range.startLineNumber)) {\n                        break;\n                    }\n                }\n                return;\n            }\n            default:\n                return;\n        }\n        this.mouseDownInfo = { lineNumber: range.startLineNumber, iconClicked };\n    }\n    onEditorMouseUp(e) {\n        const foldingModel = this.foldingModel;\n        if (!foldingModel || !this.mouseDownInfo || !e.target) {\n            return;\n        }\n        const lineNumber = this.mouseDownInfo.lineNumber;\n        const iconClicked = this.mouseDownInfo.iconClicked;\n        const range = e.target.range;\n        if (!range || range.startLineNumber !== lineNumber) {\n            return;\n        }\n        if (iconClicked) {\n            if (e.target.type !== 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n                return;\n            }\n        }\n        else {\n            const model = this.editor.getModel();\n            if (!model || range.startColumn !== model.getLineMaxColumn(lineNumber)) {\n                return;\n            }\n        }\n        const region = foldingModel.getRegionAtLine(lineNumber);\n        if (region && region.startLineNumber === lineNumber) {\n            const isCollapsed = region.isCollapsed;\n            if (iconClicked || isCollapsed) {\n                const surrounding = e.event.altKey;\n                let toToggle = [];\n                if (surrounding) {\n                    const filter = (otherRegion) => !otherRegion.containedBy(region) && !region.containedBy(otherRegion);\n                    const toMaybeToggle = foldingModel.getRegionsInside(null, filter);\n                    for (const r of toMaybeToggle) {\n                        if (r.isCollapsed) {\n                            toToggle.push(r);\n                        }\n                    }\n                    // if any surrounding regions are folded, unfold those. Otherwise, fold all surrounding\n                    if (toToggle.length === 0) {\n                        toToggle = toMaybeToggle;\n                    }\n                }\n                else {\n                    const recursive = e.event.middleButton || e.event.shiftKey;\n                    if (recursive) {\n                        for (const r of foldingModel.getRegionsInside(region)) {\n                            if (r.isCollapsed === isCollapsed) {\n                                toToggle.push(r);\n                            }\n                        }\n                    }\n                    // when recursive, first only collapse all children. If all are already folded or there are no children, also fold parent.\n                    if (isCollapsed || !recursive || toToggle.length === 0) {\n                        toToggle.push(region);\n                    }\n                }\n                foldingModel.toggleCollapseState(toToggle);\n                this.reveal({ lineNumber, column: 1 });\n            }\n        }\n    }\n    reveal(position) {\n        this.editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n    }\n};\nFoldingController.ID = 'editor.contrib.folding';\nFoldingController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageConfigurationService),\n    __param(3, INotificationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], FoldingController);\nexport { FoldingController };\nclass FoldingAction extends EditorAction {\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const foldingController = FoldingController.get(editor);\n        if (!foldingController) {\n            return;\n        }\n        const foldingModelPromise = foldingController.getFoldingModel();\n        if (foldingModelPromise) {\n            this.reportTelemetry(accessor, editor);\n            return foldingModelPromise.then(foldingModel => {\n                if (foldingModel) {\n                    this.invoke(foldingController, foldingModel, editor, args, languageConfigurationService);\n                    const selection = editor.getSelection();\n                    if (selection) {\n                        foldingController.reveal(selection.getStartPosition());\n                    }\n                }\n            });\n        }\n    }\n    getSelectedLines(editor) {\n        const selections = editor.getSelections();\n        return selections ? selections.map(s => s.startLineNumber) : [];\n    }\n    getLineNumbers(args, editor) {\n        if (args && args.selectionLines) {\n            return args.selectionLines.map(l => l + 1); // to 0-bases line numbers\n        }\n        return this.getSelectedLines(editor);\n    }\n    run(_accessor, _editor) {\n    }\n}\nfunction foldingArgumentsConstraint(args) {\n    if (!types.isUndefined(args)) {\n        if (!types.isObject(args)) {\n            return false;\n        }\n        const foldingArgs = args;\n        if (!types.isUndefined(foldingArgs.levels) && !types.isNumber(foldingArgs.levels)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.direction) && !types.isString(foldingArgs.direction)) {\n            return false;\n        }\n        if (!types.isUndefined(foldingArgs.selectionLines) && (!types.isArray(foldingArgs.selectionLines) || !foldingArgs.selectionLines.every(types.isNumber))) {\n            return false;\n        }\n    }\n    return true;\n}\nclass UnfoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfold',\n            label: nls.localize('unfoldAction.label', \"Unfold\"),\n            alias: 'Unfold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.BracketRight */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Unfold the content in the editor',\n                args: [\n                    {\n                        name: 'Unfold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                    'default': 1\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                    'default': 'down'\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const levels = args && args.levels || 1;\n        const lineNumbers = this.getLineNumbers(args, editor);\n        if (args && args.direction === 'up') {\n            setCollapseStateLevelsUp(foldingModel, false, levels, lineNumbers);\n        }\n        else {\n            setCollapseStateLevelsDown(foldingModel, false, levels, lineNumbers);\n        }\n    }\n}\nclass UnFoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldRecursively',\n            label: nls.localize('unFoldRecursivelyAction.label', \"Unfold Recursively\"),\n            alias: 'Unfold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, _args) {\n        setCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, this.getSelectedLines(editor));\n    }\n}\nclass FoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.fold',\n            label: nls.localize('foldAction.label', \"Fold\"),\n            alias: 'Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 87 /* KeyCode.BracketLeft */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: {\n                description: 'Fold the content in the editor',\n                args: [\n                    {\n                        name: 'Fold editor argument',\n                        description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t`,\n                        constraint: foldingArgumentsConstraint,\n                        schema: {\n                            'type': 'object',\n                            'properties': {\n                                'levels': {\n                                    'type': 'number',\n                                },\n                                'direction': {\n                                    'type': 'string',\n                                    'enum': ['up', 'down'],\n                                },\n                                'selectionLines': {\n                                    'type': 'array',\n                                    'items': {\n                                        'type': 'number'\n                                    }\n                                }\n                            }\n                        }\n                    }\n                ]\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args) {\n        const lineNumbers = this.getLineNumbers(args, editor);\n        const levels = args && args.levels;\n        const direction = args && args.direction;\n        if (typeof levels !== 'number' && typeof direction !== 'string') {\n            // fold the region at the location or if already collapsed, the first uncollapsed parent instead.\n            setCollapseStateUp(foldingModel, true, lineNumbers);\n        }\n        else {\n            if (direction === 'up') {\n                setCollapseStateLevelsUp(foldingModel, true, levels || 1, lineNumbers);\n            }\n            else {\n                setCollapseStateLevelsDown(foldingModel, true, levels || 1, lineNumbers);\n            }\n        }\n    }\n}\nclass ToggleFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.toggleFold',\n            label: nls.localize('toggleFoldAction.label', \"Toggle Fold\"),\n            alias: 'Toggle Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        toggleCollapseState(foldingModel, 1, selectedLines);\n    }\n}\nclass FoldRecursivelyAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldRecursively',\n            label: nls.localize('foldRecursivelyAction.label', \"Fold Recursively\"),\n            alias: 'Fold Recursively',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, selectedLines);\n    }\n}\nclass FoldAllBlockCommentsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllBlockComments',\n            label: nls.localize('foldAllBlockComments.label', \"Fold All Block Comments\"),\n            alias: 'Fold All Block Comments',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Comment.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const comments = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).comments;\n            if (comments && comments.blockCommentStartToken) {\n                const regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters(comments.blockCommentStartToken));\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass FoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllMarkerRegions',\n            label: nls.localize('foldAllMarkerRegions.label', \"Fold All Regions\"),\n            alias: 'Fold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 29 /* KeyCode.Digit8 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, true);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, true);\n            }\n        }\n    }\n}\nclass UnfoldAllRegionsAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllMarkerRegions',\n            label: nls.localize('unfoldAllMarkerRegions.label', \"Unfold All Regions\"),\n            alias: 'Unfold All Regions',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 30 /* KeyCode.Digit9 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor, args, languageConfigurationService) {\n        if (foldingModel.regions.hasTypes()) {\n            setCollapseStateForType(foldingModel, FoldingRangeKind.Region.value, false);\n        }\n        else {\n            const editorModel = editor.getModel();\n            if (!editorModel) {\n                return;\n            }\n            const foldingRules = languageConfigurationService.getLanguageConfiguration(editorModel.getLanguageId()).foldingRules;\n            if (foldingRules && foldingRules.markers && foldingRules.markers.start) {\n                const regExp = new RegExp(foldingRules.markers.start);\n                setCollapseStateForMatchingLines(foldingModel, regExp, false);\n            }\n        }\n    }\n}\nclass FoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAllExcept',\n            label: nls.localize('foldAllExcept.label', \"Fold All Regions Except Selected\"),\n            alias: 'Fold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 83 /* KeyCode.Minus */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, true, selectedLines);\n    }\n}\nclass UnfoldAllRegionsExceptAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAllExcept',\n            label: nls.localize('unfoldAllExcept.label', \"Unfold All Regions Except Selected\"),\n            alias: 'Unfold All Regions Except Selected',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 81 /* KeyCode.Equal */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        setCollapseStateForRest(foldingModel, false, selectedLines);\n    }\n}\nclass FoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.foldAll',\n            label: nls.localize('foldAllAction.label', \"Fold All\"),\n            alias: 'Fold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 21 /* KeyCode.Digit0 */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, true);\n    }\n}\nclass UnfoldAllAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.unfoldAll',\n            label: nls.localize('unfoldAllAction.label', \"Unfold All\"),\n            alias: 'Unfold All',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 40 /* KeyCode.KeyJ */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, _editor) {\n        setCollapseStateLevelsDown(foldingModel, false);\n    }\n}\nclass FoldLevelAction extends FoldingAction {\n    getFoldingLevel() {\n        return parseInt(this.id.substr(FoldLevelAction.ID_PREFIX.length));\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        setCollapseStateAtLevel(foldingModel, this.getFoldingLevel(), true, this.getSelectedLines(editor));\n    }\n}\nFoldLevelAction.ID_PREFIX = 'editor.foldLevel';\nFoldLevelAction.ID = (level) => FoldLevelAction.ID_PREFIX + level;\n/** Action to go to the parent fold of current line */\nclass GotoParentFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoParentFold',\n            label: nls.localize('gotoParentFold.label', \"Go to Parent Fold\"),\n            alias: 'Go to Parent Fold',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getParentFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the previous fold of current line */\nclass GotoPreviousFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoPreviousFold',\n            label: nls.localize('gotoPreviousFold.label', \"Go to Previous Folding Range\"),\n            alias: 'Go to Previous Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getPreviousFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\n/** Action to go to the next fold of current line */\nclass GotoNextFoldAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.gotoNextFold',\n            label: nls.localize('gotoNextFold.label', \"Go to Next Folding Range\"),\n            alias: 'Go to Next Folding Range',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        const selectedLines = this.getSelectedLines(editor);\n        if (selectedLines.length > 0) {\n            const startLineNumber = getNextFoldLine(selectedLines[0], foldingModel);\n            if (startLineNumber !== null) {\n                editor.setSelection({\n                    startLineNumber: startLineNumber,\n                    startColumn: 1,\n                    endLineNumber: startLineNumber,\n                    endColumn: 1\n                });\n            }\n        }\n    }\n}\nclass FoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.createFoldingRangeFromSelection',\n            label: nls.localize('createManualFoldRange.label', \"Create Manual Folding Range from Selection\"),\n            alias: 'Create Folding Range from Selection',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 82 /* KeyCode.Comma */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(_foldingController, foldingModel, editor) {\n        var _a;\n        const collapseRanges = [];\n        const selections = editor.getSelections();\n        if (selections) {\n            for (const selection of selections) {\n                let endLineNumber = selection.endLineNumber;\n                if (selection.endColumn === 1) {\n                    --endLineNumber;\n                }\n                if (endLineNumber > selection.startLineNumber) {\n                    collapseRanges.push({\n                        startLineNumber: selection.startLineNumber,\n                        endLineNumber: endLineNumber,\n                        type: undefined,\n                        isCollapsed: true,\n                        source: 1 /* FoldSource.userDefined */\n                    });\n                    editor.setSelection({\n                        startLineNumber: selection.startLineNumber,\n                        startColumn: 1,\n                        endLineNumber: selection.startLineNumber,\n                        endColumn: 1\n                    });\n                }\n            }\n            if (collapseRanges.length > 0) {\n                collapseRanges.sort((a, b) => {\n                    return a.startLineNumber - b.startLineNumber;\n                });\n                const newRanges = FoldingRegions.sanitizeAndMerge(foldingModel.regions, collapseRanges, (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLineCount());\n                foldingModel.updatePost(FoldingRegions.fromFoldRanges(newRanges));\n            }\n        }\n    }\n}\nclass RemoveFoldRangeFromSelectionAction extends FoldingAction {\n    constructor() {\n        super({\n            id: 'editor.removeManualFoldingRanges',\n            label: nls.localize('removeManualFoldingRanges.label', \"Remove Manual Folding Ranges\"),\n            alias: 'Remove Manual Folding Ranges',\n            precondition: CONTEXT_FOLDING_ENABLED,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    invoke(foldingController, foldingModel, editor) {\n        const selections = editor.getSelections();\n        if (selections) {\n            const ranges = [];\n            for (const selection of selections) {\n                const { startLineNumber, endLineNumber } = selection;\n                ranges.push(endLineNumber >= startLineNumber ? { startLineNumber, endLineNumber } : { endLineNumber, startLineNumber });\n            }\n            foldingModel.removeManualRanges(ranges);\n            foldingController.triggerFoldingModelChanged();\n        }\n    }\n}\nregisterEditorContribution(FoldingController.ID, FoldingController);\nregisterEditorAction(UnfoldAction);\nregisterEditorAction(UnFoldRecursivelyAction);\nregisterEditorAction(FoldAction);\nregisterEditorAction(FoldRecursivelyAction);\nregisterEditorAction(FoldAllAction);\nregisterEditorAction(UnfoldAllAction);\nregisterEditorAction(FoldAllBlockCommentsAction);\nregisterEditorAction(FoldAllRegionsAction);\nregisterEditorAction(UnfoldAllRegionsAction);\nregisterEditorAction(FoldAllRegionsExceptAction);\nregisterEditorAction(UnfoldAllRegionsExceptAction);\nregisterEditorAction(ToggleFoldAction);\nregisterEditorAction(GotoParentFoldAction);\nregisterEditorAction(GotoPreviousFoldAction);\nregisterEditorAction(GotoNextFoldAction);\nregisterEditorAction(FoldRangeFromSelectionAction);\nregisterEditorAction(RemoveFoldRangeFromSelectionAction);\nfor (let i = 1; i <= 7; i++) {\n    registerInstantiatedEditorAction(new FoldLevelAction({\n        id: FoldLevelAction.ID(i),\n        label: nls.localize('foldLevelAction.label', \"Fold Level {0}\", i),\n        alias: `Fold Level ${i}`,\n        precondition: CONTEXT_FOLDING_ENABLED,\n        kbOpts: {\n            kbExpr: EditorContextKeys.editorTextFocus,\n            primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | (21 /* KeyCode.Digit0 */ + i)),\n            weight: 100 /* KeybindingWeight.EditorContrib */\n        }\n    }));\n}\nexport const foldBackgroundBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, nls.localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nexport const editorFoldForeground = registerColor('editorGutter.foldingControlForeground', { dark: iconForeground, light: iconForeground, hcDark: iconForeground, hcLight: iconForeground }, nls.localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\nregisterThemingParticipant((theme, collector) => {\n    const foldBackground = theme.getColor(foldBackgroundBackground);\n    if (foldBackground) {\n        collector.addRule(`.monaco-editor .folded-background { background-color: ${foldBackground}; }`);\n    }\n    const editorFoldColor = theme.getColor(editorFoldForeground);\n    if (editorFoldColor) {\n        collector.addRule(`\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingCollapsedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingManualExpandedIcon)},\n\t\t.monaco-editor .cldr${ThemeIcon.asCSSSelector(foldingManualCollapsedIcon)} {\n\t\t\tcolor: ${editorFoldColor} !important;\n\t\t}\n\t\t`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(51 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(51 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(50 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\nlet OutlineModelService = class OutlineModelService {\n    constructor(_languageFeaturesService, debounces, modelService) {\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposables = new DisposableStore();\n        this._cache = new LRUCache(10, 0.7);\n        this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', { min: 350 });\n        // don't cache outline models longer than their text model\n        this._disposables.add(modelService.onModelRemoved(textModel => {\n            this._cache.delete(textModel.id);\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    getOrCreate(textModel, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const registry = this._languageFeaturesService.documentSymbolProvider;\n            const provider = registry.ordered(textModel);\n            let data = this._cache.get(textModel.id);\n            if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\n                const source = new CancellationTokenSource();\n                data = {\n                    versionId: textModel.getVersionId(),\n                    provider,\n                    promiseCnt: 0,\n                    source,\n                    promise: OutlineModel.create(registry, textModel, source.token),\n                    model: undefined,\n                };\n                this._cache.set(textModel.id, data);\n                const now = Date.now();\n                data.promise.then(outlineModel => {\n                    data.model = outlineModel;\n                    this._debounceInformation.update(textModel, Date.now() - now);\n                }).catch(_err => {\n                    this._cache.delete(textModel.id);\n                });\n            }\n            if (data.model) {\n                // resolved -> return data\n                return data.model;\n            }\n            // increase usage counter\n            data.promiseCnt += 1;\n            const listener = token.onCancellationRequested(() => {\n                // last -> cancel provider request, remove cached promise\n                if (--data.promiseCnt === 0) {\n                    data.source.cancel();\n                    this._cache.delete(textModel.id);\n                }\n            });\n            try {\n                return yield data.promise;\n            }\n            finally {\n                listener.dispose();\n            }\n        });\n    }\n};\nOutlineModelService = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, ILanguageFeatureDebounceService),\n    __param(2, IModelService)\n], OutlineModelService);\nexport { OutlineModelService };\nregisterSingleton(IOutlineModelService, OutlineModelService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        assertType(URI.isUri(resource));\n        const outlineService = accessor.get(IOutlineModelService);\n        const modelService = accessor.get(ITextModelService);\n        const reference = yield modelService.createModelReference(resource);\n        try {\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const inlineSuggestCommitId = 'editor.action.inlineSuggest.commit';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport function createDisposableRef(object, disposable) {\n    return {\n        object,\n        dispose: () => disposable === null || disposable === void 0 ? void 0 : disposable.dispose(),\n    };\n}\nexport function applyEdits(text, edits) {\n    const transformer = new PositionOffsetTransformer(text);\n    const offsetEdits = edits.map(e => {\n        const range = Range.lift(e.range);\n        return ({\n            startOffset: transformer.getOffset(range.getStartPosition()),\n            endOffset: transformer.getOffset(range.getEndPosition()),\n            text: e.text\n        });\n    });\n    offsetEdits.sort((a, b) => b.startOffset - a.startOffset);\n    for (const edit of offsetEdits) {\n        text = text.substring(0, edit.startOffset) + edit.text + text.substring(edit.endOffset);\n    }\n    return text;\n}\nclass PositionOffsetTransformer {\n    constructor(text) {\n        this.lineStartOffsetByLineIdx = [];\n        this.lineStartOffsetByLineIdx.push(0);\n        for (let i = 0; i < text.length; i++) {\n            if (text.charAt(i) === '\\n') {\n                this.lineStartOffsetByLineIdx.push(i + 1);\n            }\n        }\n    }\n    getOffset(position) {\n        return this.lineStartOffsetByLineIdx[position.lineNumber - 1] + position.column - 1;\n    }\n}\nconst array = [];\nexport function getReadonlyEmptyArray() {\n    return array;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { applyEdits } from './utils.js';\nexport class GhostText {\n    constructor(lineNumber, parts, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.parts = parts;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n    }\n    renderForScreenReader(lineText) {\n        if (this.parts.length === 0) {\n            return '';\n        }\n        const lastPart = this.parts[this.parts.length - 1];\n        const cappedLineText = lineText.substr(0, lastPart.column - 1);\n        const text = applyEdits(cappedLineText, this.parts.map(p => ({\n            range: { startLineNumber: 1, endLineNumber: 1, startColumn: p.column, endColumn: p.column },\n            text: p.lines.join('\\n')\n        })));\n        return text.substring(this.parts[0].column - 1);\n    }\n    isEmpty() {\n        return this.parts.every(p => p.lines.length === 0);\n    }\n}\nexport class GhostTextPart {\n    constructor(column, lines, \n    /**\n     * Indicates if this part is a preview of an inline suggestion when a suggestion is previewed.\n    */\n    preview) {\n        this.column = column;\n        this.lines = lines;\n        this.preview = preview;\n    }\n}\nexport class GhostTextReplacement {\n    constructor(lineNumber, columnStart, length, newLines, additionalReservedLineCount = 0) {\n        this.lineNumber = lineNumber;\n        this.columnStart = columnStart;\n        this.length = length;\n        this.newLines = newLines;\n        this.additionalReservedLineCount = additionalReservedLineCount;\n        this.parts = [\n            new GhostTextPart(this.columnStart + this.length, this.newLines, false),\n        ];\n    }\n    renderForScreenReader(_lineText) {\n        return this.newLines.join('\\n');\n    }\n}\nexport class BaseGhostTextWidgetModel extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._expanded = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(108 /* EditorOption.suggest */) && this._expanded === undefined) {\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n    }\n    setExpanded(expanded) {\n        this._expanded = true;\n        this.onDidChangeEmitter.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LcsDiff } from '../../../../base/common/diff/diff.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { GhostText, GhostTextPart } from './ghostText.js';\nexport function minimizeInlineCompletion(model, inlineCompletion) {\n    if (!inlineCompletion) {\n        return inlineCompletion;\n    }\n    const valueToReplace = model.getValueInRange(inlineCompletion.range);\n    const commonPrefixLen = strings.commonPrefixLength(valueToReplace, inlineCompletion.insertText);\n    const startOffset = model.getOffsetAt(inlineCompletion.range.getStartPosition()) + commonPrefixLen;\n    const start = model.getPositionAt(startOffset);\n    const remainingValueToReplace = valueToReplace.substr(commonPrefixLen);\n    const commonSuffixLen = strings.commonSuffixLength(remainingValueToReplace, inlineCompletion.insertText);\n    const end = model.getPositionAt(Math.max(startOffset, model.getOffsetAt(inlineCompletion.range.getEndPosition()) - commonSuffixLen));\n    return {\n        range: Range.fromPositions(start, end),\n        insertText: inlineCompletion.insertText.substr(commonPrefixLen, inlineCompletion.insertText.length - commonPrefixLen - commonSuffixLen),\n        snippetInfo: inlineCompletion.snippetInfo,\n        filterText: inlineCompletion.filterText,\n        additionalTextEdits: inlineCompletion.additionalTextEdits,\n    };\n}\nexport function normalizedInlineCompletionsEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.range.equalsRange(b.range) && a.insertText === b.insertText && a.command === b.command;\n}\n/**\n * @param previewSuffixLength Sets where to split `inlineCompletion.text`.\n * \tIf the text is `hello` and the suffix length is 2, the non-preview part is `hel` and the preview-part is `lo`.\n*/\nexport function inlineCompletionToGhostText(inlineCompletion, textModel, mode, cursorPosition, previewSuffixLength = 0) {\n    if (inlineCompletion.range.startLineNumber !== inlineCompletion.range.endLineNumber) {\n        // Only single line replacements are supported.\n        return undefined;\n    }\n    const sourceLine = textModel.getLineContent(inlineCompletion.range.startLineNumber);\n    const sourceIndentationLength = strings.getLeadingWhitespace(sourceLine).length;\n    const suggestionTouchesIndentation = inlineCompletion.range.startColumn - 1 <= sourceIndentationLength;\n    if (suggestionTouchesIndentation) {\n        // source:      [abc]\n        //                         ^^^^^^^^^ inlineCompletion.range\n        //              ^^^^^^^^^^ ^^^^^^ sourceIndentationLength\n        //                         ^^^^^^ replacedIndentation.length\n        //                               ^^^ rangeThatDoesNotReplaceIndentation\n        // inlineCompletion.text: 'foo'\n        //                         ^^ suggestionAddedIndentationLength\n        const suggestionAddedIndentationLength = strings.getLeadingWhitespace(inlineCompletion.insertText).length;\n        const replacedIndentation = sourceLine.substring(inlineCompletion.range.startColumn - 1, sourceIndentationLength);\n        const rangeThatDoesNotReplaceIndentation = Range.fromPositions(inlineCompletion.range.getStartPosition().delta(0, replacedIndentation.length), inlineCompletion.range.getEndPosition());\n        const suggestionWithoutIndentationChange = inlineCompletion.insertText.startsWith(replacedIndentation)\n            // Adds more indentation without changing existing indentation: We can add ghost text for this\n            ? inlineCompletion.insertText.substring(replacedIndentation.length)\n            // Changes or removes existing indentation. Only add ghost text for the non-indentation part.\n            : inlineCompletion.insertText.substring(suggestionAddedIndentationLength);\n        inlineCompletion = {\n            range: rangeThatDoesNotReplaceIndentation,\n            insertText: suggestionWithoutIndentationChange,\n            command: inlineCompletion.command,\n            snippetInfo: undefined,\n            filterText: inlineCompletion.filterText,\n            additionalTextEdits: inlineCompletion.additionalTextEdits,\n        };\n    }\n    // This is a single line string\n    const valueToBeReplaced = textModel.getValueInRange(inlineCompletion.range);\n    const changes = cachingDiff(valueToBeReplaced, inlineCompletion.insertText);\n    if (!changes) {\n        // No ghost text in case the diff would be too slow to compute\n        return undefined;\n    }\n    const lineNumber = inlineCompletion.range.startLineNumber;\n    const parts = new Array();\n    if (mode === 'prefix') {\n        const filteredChanges = changes.filter(c => c.originalLength === 0);\n        if (filteredChanges.length > 1 || filteredChanges.length === 1 && filteredChanges[0].originalStart !== valueToBeReplaced.length) {\n            // Prefixes only have a single change.\n            return undefined;\n        }\n    }\n    const previewStartInCompletionText = inlineCompletion.insertText.length - previewSuffixLength;\n    for (const c of changes) {\n        const insertColumn = inlineCompletion.range.startColumn + c.originalStart + c.originalLength;\n        if (mode === 'subwordSmart' && cursorPosition && cursorPosition.lineNumber === inlineCompletion.range.startLineNumber && insertColumn < cursorPosition.column) {\n            // No ghost text before cursor\n            return undefined;\n        }\n        if (c.originalLength > 0) {\n            return undefined;\n        }\n        if (c.modifiedLength === 0) {\n            continue;\n        }\n        const modifiedEnd = c.modifiedStart + c.modifiedLength;\n        const nonPreviewTextEnd = Math.max(c.modifiedStart, Math.min(modifiedEnd, previewStartInCompletionText));\n        const nonPreviewText = inlineCompletion.insertText.substring(c.modifiedStart, nonPreviewTextEnd);\n        const italicText = inlineCompletion.insertText.substring(nonPreviewTextEnd, Math.max(c.modifiedStart, modifiedEnd));\n        if (nonPreviewText.length > 0) {\n            const lines = strings.splitLines(nonPreviewText);\n            parts.push(new GhostTextPart(insertColumn, lines, false));\n        }\n        if (italicText.length > 0) {\n            const lines = strings.splitLines(italicText);\n            parts.push(new GhostTextPart(insertColumn, lines, true));\n        }\n    }\n    return new GhostText(lineNumber, parts, 0);\n}\nlet lastRequest = undefined;\nfunction cachingDiff(originalValue, newValue) {\n    if ((lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.originalValue) === originalValue && (lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.newValue) === newValue) {\n        return lastRequest === null || lastRequest === void 0 ? void 0 : lastRequest.changes;\n    }\n    else {\n        let changes = smartDiff(originalValue, newValue, true);\n        if (changes) {\n            const deletedChars = deletedCharacters(changes);\n            if (deletedChars > 0) {\n                // For performance reasons, don't compute diff if there is nothing to improve\n                const newChanges = smartDiff(originalValue, newValue, false);\n                if (newChanges && deletedCharacters(newChanges) < deletedChars) {\n                    // Disabling smartness seems to be better here\n                    changes = newChanges;\n                }\n            }\n        }\n        lastRequest = {\n            originalValue,\n            newValue,\n            changes\n        };\n        return changes;\n    }\n}\nfunction deletedCharacters(changes) {\n    let sum = 0;\n    for (const c of changes) {\n        sum += Math.max(c.originalLength - c.modifiedLength, 0);\n    }\n    return sum;\n}\n/**\n * When matching `if ()` with `if (f() = 1) { g(); }`,\n * align it like this:        `if (       )`\n * Not like this:\t\t\t  `if (  )`\n * Also not like this:\t\t  `if (             )`.\n *\n * The parenthesis are preprocessed to ensure that they match correctly.\n */\nfunction smartDiff(originalValue, newValue, smartBracketMatching) {\n    if (originalValue.length > 5000 || newValue.length > 5000) {\n        // We don't want to work on strings that are too big\n        return undefined;\n    }\n    function getMaxCharCode(val) {\n        let maxCharCode = 0;\n        for (let i = 0, len = val.length; i < len; i++) {\n            const charCode = val.charCodeAt(i);\n            if (charCode > maxCharCode) {\n                maxCharCode = charCode;\n            }\n        }\n        return maxCharCode;\n    }\n    const maxCharCode = Math.max(getMaxCharCode(originalValue), getMaxCharCode(newValue));\n    function getUniqueCharCode(id) {\n        if (id < 0) {\n            throw new Error('unexpected');\n        }\n        return maxCharCode + id + 1;\n    }\n    function getElements(source) {\n        let level = 0;\n        let group = 0;\n        const characters = new Int32Array(source.length);\n        for (let i = 0, len = source.length; i < len; i++) {\n            // TODO support more brackets\n            if (smartBracketMatching && source[i] === '(') {\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id);\n                level++;\n            }\n            else if (smartBracketMatching && source[i] === ')') {\n                level = Math.max(level - 1, 0);\n                const id = group * 100 + level;\n                characters[i] = getUniqueCharCode(2 * id + 1);\n                if (level === 0) {\n                    group++;\n                }\n            }\n            else {\n                characters[i] = source.charCodeAt(i);\n            }\n        }\n        return characters;\n    }\n    const elements1 = getElements(originalValue);\n    const elements2 = getElements(newValue);\n    return new LcsDiff({ getElements: () => elements1 }, { getElements: () => elements2 }).ComputeDiff(false).changes;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\nimport { lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\nimport { parseDocument } from './bracketPairsTree/parser.js';\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\nimport { TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\nexport function fixBracketsInLine(tokens, languageConfigurationService) {\n    const denseKeyProvider = new DenseKeyProvider();\n    const bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, (languageId) => languageConfigurationService.getLanguageConfiguration(languageId));\n    const tokenizer = new TextBufferTokenizer(new StaticTokenizerSource([tokens]), bracketTokens);\n    const node = parseDocument(tokenizer, [], undefined, true);\n    let str = '';\n    const line = tokens.getLineContent();\n    function processNode(node, offset) {\n        if (node.kind === 2 /* AstNodeKind.Pair */) {\n            processNode(node.openingBracket, offset);\n            offset = lengthAdd(offset, node.openingBracket.length);\n            if (node.child) {\n                processNode(node.child, offset);\n                offset = lengthAdd(offset, node.child.length);\n            }\n            if (node.closingBracket) {\n                processNode(node.closingBracket, offset);\n                offset = lengthAdd(offset, node.closingBracket.length);\n            }\n            else {\n                const singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\n                const closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\n                str += closingTokenText;\n            }\n        }\n        else if (node.kind === 3 /* AstNodeKind.UnexpectedClosingBracket */) {\n            // remove the bracket\n        }\n        else if (node.kind === 0 /* AstNodeKind.Text */ || node.kind === 1 /* AstNodeKind.Bracket */) {\n            str += line.substring(lengthGetColumnCountIfZeroLineCount(offset), lengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length)));\n        }\n        else if (node.kind === 4 /* AstNodeKind.List */) {\n            for (const child of node.children) {\n                processNode(child, offset);\n                offset = lengthAdd(offset, child.length);\n            }\n        }\n    }\n    processNode(node, lengthZero);\n    return str;\n}\nclass StaticTokenizerSource {\n    constructor(lines) {\n        this.lines = lines;\n        this.tokenization = {\n            getLineTokens: (lineNumber) => {\n                return this.lines[lineNumber - 1];\n            }\n        };\n    }\n    getLineCount() {\n        return this.lines.length;\n    }\n    getLineLength(lineNumber) {\n        return this.lines[lineNumber - 1].getLineContent().length;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { BaseGhostTextWidgetModel, GhostTextReplacement } from './ghostText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { inlineCompletionToGhostText } from './inlineCompletionToGhostText.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { fixBracketsInLine } from '../../../common/model/bracketPairsTextModelPart/fixBrackets.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { assertNever } from '../../../../base/common/types.js';\nimport { matchesSubString } from '../../../../base/common/filters.js';\nimport { getReadonlyEmptyArray } from './utils.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet InlineCompletionsModel = class InlineCompletionsModel extends Disposable {\n    constructor(editor, cache, commandService, languageConfigurationService, languageFeaturesService, debounceService, configurationService) {\n        super();\n        this.editor = editor;\n        this.cache = cache;\n        this.commandService = commandService;\n        this.languageConfigurationService = languageConfigurationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.debounceService = debounceService;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.completionSession = this._register(new MutableDisposable());\n        this.active = false;\n        this.disposed = false;\n        this.debounceValue = this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider, 'InlineCompletionsDebounce', { min: 50, max: 50 });\n        this._register(commandService.onDidExecuteCommand((e) => {\n            // These commands don't trigger onDidType.\n            const commands = new Set([\n                CoreEditingCommands.Tab.id,\n                CoreEditingCommands.DeleteLeft.id,\n                CoreEditingCommands.DeleteRight.id,\n                inlineSuggestCommitId,\n                'acceptSelectedSuggestion',\n            ]);\n            if (commands.has(e.commandId) && editor.hasTextFocus()) {\n                this.handleUserInput();\n            }\n        }));\n        this._register(this.editor.onDidType((e) => {\n            this.handleUserInput();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */ ||\n                this.session && !this.session.isValid) {\n                this.hide();\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.disposed = true;\n        }));\n        this._register(this.editor.onDidBlurEditorWidget(() => {\n            // This is a hidden setting very useful for debugging\n            if (configurationService.getValue('editor.inlineSuggest.hideOnBlur')) {\n                return;\n            }\n            this.hide();\n        }));\n    }\n    handleUserInput() {\n        if (this.session && !this.session.isValid) {\n            this.hide();\n        }\n        setTimeout(() => {\n            if (this.disposed) {\n                return;\n            }\n            // Wait for the cursor update that happens in the same iteration loop iteration\n            this.startSessionIfTriggered();\n        }, 0);\n    }\n    get session() {\n        return this.completionSession.value;\n    }\n    get ghostText() {\n        var _a;\n        return (_a = this.session) === null || _a === void 0 ? void 0 : _a.ghostText;\n    }\n    get minReservedLineCount() {\n        return this.session ? this.session.minReservedLineCount : 0;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    setActive(active) {\n        var _a;\n        this.active = active;\n        if (active) {\n            (_a = this.session) === null || _a === void 0 ? void 0 : _a.scheduleAutomaticUpdate();\n        }\n    }\n    startSessionIfTriggered() {\n        const suggestOptions = this.editor.getOption(57 /* EditorOption.inlineSuggest */);\n        if (!suggestOptions.enabled) {\n            return;\n        }\n        if (this.session && this.session.isValid) {\n            return;\n        }\n        this.trigger(InlineCompletionTriggerKind.Automatic);\n    }\n    trigger(triggerKind) {\n        if (this.completionSession.value) {\n            if (triggerKind === InlineCompletionTriggerKind.Explicit) {\n                void this.completionSession.value.ensureUpdateWithExplicitContext();\n            }\n            return;\n        }\n        this.completionSession.value = new InlineCompletionsSession(this.editor, this.editor.getPosition(), () => this.active, this.commandService, this.cache, triggerKind, this.languageConfigurationService, this.languageFeaturesService.inlineCompletionsProvider, this.debounceValue);\n        this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n    }\n    hide() {\n        this.completionSession.clear();\n        this.onDidChangeEmitter.fire();\n    }\n    commitCurrentSuggestion() {\n        var _a;\n        // Don't dispose the session, so that after committing, more suggestions are shown.\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.commitCurrentCompletion();\n    }\n    showNext() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPrevious() {\n        var _a;\n        (_a = this.session) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.session) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nInlineCompletionsModel = __decorate([\n    __param(2, ICommandService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IConfigurationService)\n], InlineCompletionsModel);\nexport { InlineCompletionsModel };\nexport class InlineCompletionsSession extends BaseGhostTextWidgetModel {\n    constructor(editor, triggerPosition, shouldUpdate, commandService, cache, initialTriggerKind, languageConfigurationService, registry, debounce) {\n        super(editor);\n        this.triggerPosition = triggerPosition;\n        this.shouldUpdate = shouldUpdate;\n        this.commandService = commandService;\n        this.cache = cache;\n        this.initialTriggerKind = initialTriggerKind;\n        this.languageConfigurationService = languageConfigurationService;\n        this.registry = registry;\n        this.debounce = debounce;\n        this.minReservedLineCount = 0;\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateSoon = this._register(new RunOnceScheduler(() => {\n            const triggerKind = this.initialTriggerKind;\n            // All subsequent triggers are automatic.\n            this.initialTriggerKind = InlineCompletionTriggerKind.Automatic;\n            return this.update(triggerKind);\n        }, 50));\n        this.filteredCompletions = [];\n        //#region Selection\n        // We use a semantic id to track the selection even if the cache changes.\n        this.currentlySelectedCompletionId = undefined;\n        let lastCompletionItem = undefined;\n        this._register(this.onDidChange(() => {\n            var _a;\n            const currentCompletion = this.currentCompletion;\n            if (currentCompletion && currentCompletion.sourceInlineCompletion !== lastCompletionItem) {\n                lastCompletionItem = currentCompletion.sourceInlineCompletion;\n                const provider = currentCompletion.sourceProvider;\n                (_a = provider.handleItemDidShow) === null || _a === void 0 ? void 0 : _a.call(provider, currentCompletion.sourceInlineCompletions, lastCompletionItem);\n            }\n        }));\n        this._register(toDisposable(() => {\n            this.cache.clear();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            var _a;\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                return;\n            }\n            // Ghost text depends on the cursor position\n            (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.updateRanges();\n            if (this.cache.value) {\n                this.updateFilteredInlineCompletions();\n                this.onDidChangeEmitter.fire();\n            }\n        }));\n        this._register(this.editor.onDidChangeModelContent((e) => {\n            var _a;\n            // Call this in case `onDidChangeModelContent` calls us first.\n            (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.updateRanges();\n            this.updateFilteredInlineCompletions();\n            this.scheduleAutomaticUpdate();\n        }));\n        this._register(this.registry.onDidChange(() => {\n            this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n        }));\n        this.scheduleAutomaticUpdate();\n    }\n    updateFilteredInlineCompletions() {\n        if (!this.cache.value) {\n            this.filteredCompletions = [];\n            return;\n        }\n        const model = this.editor.getModel();\n        const cursorPosition = model.validatePosition(this.editor.getPosition());\n        this.filteredCompletions = this.cache.value.completions.filter(c => {\n            const originalValue = model.getValueInRange(c.synchronizedRange).toLowerCase();\n            const filterText = c.inlineCompletion.filterText.toLowerCase();\n            const indent = model.getLineIndentColumn(c.synchronizedRange.startLineNumber);\n            const cursorPosIndex = Math.max(0, cursorPosition.column - c.synchronizedRange.startColumn);\n            let filterTextBefore = filterText.substring(0, cursorPosIndex);\n            let filterTextAfter = filterText.substring(cursorPosIndex);\n            let originalValueBefore = originalValue.substring(0, cursorPosIndex);\n            let originalValueAfter = originalValue.substring(cursorPosIndex);\n            if (c.synchronizedRange.startColumn <= indent) {\n                // Remove indentation\n                originalValueBefore = originalValueBefore.trimStart();\n                if (originalValueBefore.length === 0) {\n                    originalValueAfter = originalValueAfter.trimStart();\n                }\n                filterTextBefore = filterTextBefore.trimStart();\n                if (filterTextBefore.length === 0) {\n                    filterTextAfter = filterTextAfter.trimStart();\n                }\n            }\n            return filterTextBefore.startsWith(originalValueBefore)\n                && matchesSubString(originalValueAfter, filterTextAfter);\n        });\n    }\n    fixAndGetIndexOfCurrentSelection() {\n        if (!this.currentlySelectedCompletionId || !this.cache.value) {\n            return 0;\n        }\n        if (this.cache.value.completions.length === 0) {\n            // don't reset the selection in this case\n            return 0;\n        }\n        const idx = this.filteredCompletions.findIndex(v => v.semanticId === this.currentlySelectedCompletionId);\n        if (idx === -1) {\n            // Reset the selection so that the selection does not jump back when it appears again\n            this.currentlySelectedCompletionId = undefined;\n            return 0;\n        }\n        return idx;\n    }\n    get currentCachedCompletion() {\n        if (!this.cache.value) {\n            return undefined;\n        }\n        return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()];\n    }\n    showNextInlineCompletion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = this.filteredCompletions || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    showPreviousInlineCompletion() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            const completions = this.filteredCompletions || [];\n            if (completions.length > 0) {\n                const newIdx = (this.fixAndGetIndexOfCurrentSelection() + completions.length - 1) % completions.length;\n                this.currentlySelectedCompletionId = completions[newIdx].semanticId;\n            }\n            else {\n                this.currentlySelectedCompletionId = undefined;\n            }\n            this.onDidChangeEmitter.fire();\n        });\n    }\n    ensureUpdateWithExplicitContext() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.updateOperation.value) {\n                // Restart or wait for current update operation\n                if (this.updateOperation.value.triggerKind === InlineCompletionTriggerKind.Explicit) {\n                    yield this.updateOperation.value.promise;\n                }\n                else {\n                    yield this.update(InlineCompletionTriggerKind.Explicit);\n                }\n            }\n            else if (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.triggerKind) !== InlineCompletionTriggerKind.Explicit) {\n                // Refresh cache\n                yield this.update(InlineCompletionTriggerKind.Explicit);\n            }\n        });\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.ensureUpdateWithExplicitContext();\n            return (((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.length) || 0) > 1;\n        });\n    }\n    //#endregion\n    get ghostText() {\n        const currentCompletion = this.currentCompletion;\n        if (!currentCompletion) {\n            return undefined;\n        }\n        const cursorPosition = this.editor.getPosition();\n        if (currentCompletion.range.getEndPosition().isBefore(cursorPosition)) {\n            return undefined;\n        }\n        const mode = this.editor.getOptions().get(57 /* EditorOption.inlineSuggest */).mode;\n        const ghostText = inlineCompletionToGhostText(currentCompletion, this.editor.getModel(), mode, cursorPosition);\n        if (ghostText) {\n            if (ghostText.isEmpty()) {\n                return undefined;\n            }\n            return ghostText;\n        }\n        return new GhostTextReplacement(currentCompletion.range.startLineNumber, currentCompletion.range.startColumn, currentCompletion.range.endColumn - currentCompletion.range.startColumn, currentCompletion.insertText.split('\\n'), 0);\n    }\n    get currentCompletion() {\n        const completion = this.currentCachedCompletion;\n        if (!completion) {\n            return undefined;\n        }\n        return completion.toLiveInlineCompletion();\n    }\n    get isValid() {\n        return this.editor.getPosition().lineNumber === this.triggerPosition.lineNumber;\n    }\n    scheduleAutomaticUpdate() {\n        // Since updateSoon debounces, starvation can happen.\n        // To prevent stale cache, we clear the current update operation.\n        this.updateOperation.clear();\n        this.updateSoon.schedule(this.debounce.get(this.editor.getModel()));\n    }\n    update(triggerKind) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.shouldUpdate()) {\n                return;\n            }\n            const position = this.editor.getPosition();\n            const startTime = new Date();\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.registry, position, this.editor.getModel(), { triggerKind, selectedSuggestionInfo: undefined }, token, this.languageConfigurationService);\n                    const endTime = new Date();\n                    this.debounce.update(this.editor.getModel(), endTime.getTime() - startTime.getTime());\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this.cache.setValue(this.editor, result, triggerKind);\n                this.updateFilteredInlineCompletions();\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, triggerKind);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    takeOwnership(disposable) {\n        this._register(disposable);\n    }\n    commitCurrentCompletion() {\n        const ghostText = this.ghostText;\n        if (!ghostText) {\n            // No ghost text was shown for this completion.\n            // Thus, we don't want to commit anything.\n            return;\n        }\n        const completion = this.currentCompletion;\n        if (completion) {\n            this.commit(completion);\n        }\n    }\n    commit(completion) {\n        var _a;\n        // Mark the cache as stale, but don't dispose it yet,\n        // otherwise command args might get disposed.\n        const cache = this.cache.clearAndLeak();\n        if (completion.snippetInfo) {\n            this.editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replaceMove(completion.range, ''),\n                ...completion.additionalTextEdits\n            ]);\n            this.editor.setPosition(completion.snippetInfo.range.getStartPosition());\n            (_a = SnippetController2.get(this.editor)) === null || _a === void 0 ? void 0 : _a.insert(completion.snippetInfo.snippet);\n        }\n        else {\n            this.editor.executeEdits('inlineSuggestion.accept', [\n                EditOperation.replaceMove(completion.range, completion.insertText),\n                ...completion.additionalTextEdits\n            ]);\n        }\n        if (completion.command) {\n            this.commandService\n                .executeCommand(completion.command.id, ...(completion.command.arguments || []))\n                .finally(() => {\n                cache === null || cache === void 0 ? void 0 : cache.dispose();\n            })\n                .then(undefined, onUnexpectedExternalError);\n        }\n        else {\n            cache === null || cache === void 0 ? void 0 : cache.dispose();\n        }\n        this.onDidChangeEmitter.fire();\n    }\n    get commands() {\n        var _a;\n        const lists = new Set(((_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions.map(c => c.inlineCompletion.sourceInlineCompletions)) || []);\n        return [...lists].flatMap(l => l.commands || []);\n    }\n}\nexport class UpdateOperation {\n    constructor(promise, triggerKind) {\n        this.promise = promise;\n        this.triggerKind = triggerKind;\n    }\n    dispose() {\n        this.promise.cancel();\n    }\n}\n/**\n * The cache keeps itself in sync with the editor.\n * It also owns the completions result and disposes it when the cache is diposed.\n*/\nexport class SynchronizedInlineCompletionsCache extends Disposable {\n    constructor(completionsSource, editor, onChange, triggerKind) {\n        super();\n        this.editor = editor;\n        this.onChange = onChange;\n        this.triggerKind = triggerKind;\n        this.isDisposing = false;\n        const decorationIds = editor.changeDecorations((changeAccessor) => {\n            return changeAccessor.deltaDecorations([], completionsSource.items.map(i => ({\n                range: i.range,\n                options: {\n                    description: 'inline-completion-tracking-range'\n                },\n            })));\n        });\n        this._register(toDisposable(() => {\n            this.isDisposing = true;\n            editor.removeDecorations(decorationIds);\n        }));\n        this.completions = completionsSource.items.map((c, idx) => new CachedInlineCompletion(c, decorationIds[idx]));\n        this._register(editor.onDidChangeModelContent(() => {\n            this.updateRanges();\n        }));\n        this._register(completionsSource);\n    }\n    updateRanges() {\n        if (this.isDisposing) {\n            return;\n        }\n        let hasChanged = false;\n        const model = this.editor.getModel();\n        for (const c of this.completions) {\n            const newRange = model.getDecorationRange(c.decorationId);\n            if (!newRange) {\n                onUnexpectedError(new Error('Decoration has no range'));\n                continue;\n            }\n            if (!c.synchronizedRange.equalsRange(newRange)) {\n                hasChanged = true;\n                c.synchronizedRange = newRange;\n            }\n        }\n        if (hasChanged) {\n            this.onChange();\n        }\n    }\n}\nclass CachedInlineCompletion {\n    constructor(inlineCompletion, decorationId) {\n        this.inlineCompletion = inlineCompletion;\n        this.decorationId = decorationId;\n        this.semanticId = JSON.stringify({\n            text: this.inlineCompletion.insertText,\n            abbreviation: this.inlineCompletion.filterText,\n            startLine: this.inlineCompletion.range.startLineNumber,\n            startColumn: this.inlineCompletion.range.startColumn,\n            command: this.inlineCompletion.command\n        });\n        this.synchronizedRange = inlineCompletion.range;\n    }\n    toLiveInlineCompletion() {\n        return {\n            insertText: this.inlineCompletion.insertText,\n            range: this.synchronizedRange,\n            command: this.inlineCompletion.command,\n            sourceProvider: this.inlineCompletion.sourceProvider,\n            sourceInlineCompletions: this.inlineCompletion.sourceInlineCompletions,\n            sourceInlineCompletion: this.inlineCompletion.sourceInlineCompletion,\n            snippetInfo: this.inlineCompletion.snippetInfo,\n            filterText: this.inlineCompletion.filterText,\n            additionalTextEdits: this.inlineCompletion.additionalTextEdits,\n        };\n    }\n}\nexport function provideInlineCompletions(registry, position, model, context, token = CancellationToken.None, languageConfigurationService) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const defaultReplaceRange = getDefaultRange(position, model);\n        const providers = registry.all(model);\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            const completions = yield Promise.resolve(provider.provideInlineCompletions(model, position, context, token)).catch(onUnexpectedExternalError);\n            return ({\n                completions,\n                provider,\n                dispose: () => {\n                    if (completions) {\n                        provider.freeInlineCompletions(completions);\n                    }\n                }\n            });\n        })));\n        const itemsByHash = new Map();\n        for (const result of results) {\n            const completions = result.completions;\n            if (!completions) {\n                continue;\n            }\n            for (const item of completions.items) {\n                let range = item.range ? Range.lift(item.range) : defaultReplaceRange;\n                if (range.startLineNumber !== range.endLineNumber) {\n                    // Ignore invalid ranges.\n                    continue;\n                }\n                let insertText;\n                let snippetInfo;\n                if (typeof item.insertText === 'string') {\n                    insertText = item.insertText;\n                    if (languageConfigurationService && item.completeBracketPairs) {\n                        insertText = closeBrackets(insertText, range.getStartPosition(), model, languageConfigurationService);\n                        // Modify range depending on if brackets are added or removed\n                        const diff = insertText.length - item.insertText.length;\n                        if (diff !== 0) {\n                            range = new Range(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn + diff);\n                        }\n                    }\n                    snippetInfo = undefined;\n                }\n                else if ('snippet' in item.insertText) {\n                    const snippet = new SnippetParser().parse(item.insertText.snippet);\n                    insertText = snippet.toString();\n                    snippetInfo = {\n                        snippet: item.insertText.snippet,\n                        range: range\n                    };\n                }\n                else {\n                    assertNever(item.insertText);\n                }\n                const trackedItem = ({\n                    insertText,\n                    snippetInfo,\n                    range,\n                    command: item.command,\n                    sourceProvider: result.provider,\n                    sourceInlineCompletions: completions,\n                    sourceInlineCompletion: item,\n                    filterText: item.filterText || insertText,\n                    additionalTextEdits: item.additionalTextEdits || getReadonlyEmptyArray()\n                });\n                itemsByHash.set(JSON.stringify({ insertText, range: item.range }), trackedItem);\n            }\n        }\n        return {\n            items: [...itemsByHash.values()],\n            dispose: () => {\n                for (const result of results) {\n                    result.dispose();\n                }\n            },\n        };\n    });\n}\nfunction getDefaultRange(position, model) {\n    const word = model.getWordAtPosition(position);\n    const maxColumn = model.getLineMaxColumn(position.lineNumber);\n    // By default, always replace up until the end of the current line.\n    // This default might be subject to change!\n    return word\n        ? new Range(position.lineNumber, word.startColumn, position.lineNumber, maxColumn)\n        : Range.fromPositions(position, position.with(undefined, maxColumn));\n}\nfunction closeBrackets(text, position, model, languageConfigurationService) {\n    const lineStart = model.getLineContent(position.lineNumber).substring(0, position.column - 1);\n    const newLine = lineStart + text;\n    const newTokens = model.tokenization.tokenizeLineWithEdit(position, newLine.length - (position.column - 1), text);\n    const slicedTokens = newTokens === null || newTokens === void 0 ? void 0 : newTokens.sliceAndInflate(position.column - 1, newLine.length, 0);\n    if (!slicedTokens) {\n        return text;\n    }\n    const newText = fixBracketsInLine(slicedTokens, languageConfigurationService);\n    return newText;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(113 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(113 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            if (bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.bracketText;\n                // wait for closing\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.getClosedBrackets()[0].bracketText;\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            if (!bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.getClosedBrackets()[0].bracketText;\n                // wait for opening\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.bracketText;\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    const list = ranges.get(key);\n                    if (list) {\n                        const closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(108 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        const res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* Refilter.All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy, noSelect) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n        this.noSelect = noSelect;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(108 /* EditorOption.suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* State.Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g.  + u makes  but just  cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(83 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(111 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, noSelect: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* State.Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* State.Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* State.Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* State.Idle */ && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* State.Idle */ && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* State.Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(81 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* State.Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(81 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false, noSelect: false });\n        }, this._editor.getOption(82 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* State.Auto */, false, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing, noFilter) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* State.Auto */ : 1 /* State.Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* CompletionTriggerKind.Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, !noFilter ? itemKindFilter : new Set(), onlyFrom, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(108 /* EditorOption.suggest */), this._editor.getOption(103 /* EditorOption.snippetSuggestions */), undefined, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(108 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (const provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false, triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                noSelect: this._context.noSelect,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(110 /* EditorOption.suggestLineHeight */) || this._editor.getOption(46 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","//#endregion\n//#region Utilities\nexport var FileKind;\n(function (FileKind) {\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\n})(FileKind || (FileKind = {}));\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Schemas } from '../../../base/common/network.js';\nimport { DataUri } from '../../../base/common/resources.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../languages/modesRegistry.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nconst fileIconDirectoryRegex = /(?:\\/|^)(?:([^\\/]+)\\/)?([^\\/]+)$/;\nexport function getIconClasses(modelService, languageService, resource, fileKind) {\n    // we always set these base classes even if we do not have a path\n    const classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\n    if (resource) {\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\n        let name;\n        if (resource.scheme === Schemas.data) {\n            const metadata = DataUri.parseMetaData(resource);\n            name = metadata.get(DataUri.META_DATA_LABEL);\n        }\n        else {\n            const match = resource.path.match(fileIconDirectoryRegex);\n            if (match) {\n                name = cssEscape(match[2].toLowerCase());\n                if (match[1]) {\n                    classes.push(`${cssEscape(match[1].toLowerCase())}-name-dir-icon`); // parent directory\n                }\n            }\n            else {\n                name = cssEscape(resource.authority.toLowerCase());\n            }\n        }\n        // Folders\n        if (fileKind === FileKind.FOLDER) {\n            classes.push(`${name}-name-folder-icon`);\n        }\n        // Files\n        else {\n            // Name & Extension(s)\n            if (name) {\n                classes.push(`${name}-name-file-icon`);\n                classes.push(`name-file-icon`); // extra segment to increase file-name score\n                // Avoid doing an explosive combination of extensions for very long filenames\n                // (most file systems do not allow files > 255 length) with lots of `.` characters\n                // https://github.com/microsoft/vscode/issues/116199\n                if (name.length <= 255) {\n                    const dotSegments = name.split('.');\n                    for (let i = 1; i < dotSegments.length; i++) {\n                        classes.push(`${dotSegments.slice(i).join('.')}-ext-file-icon`); // add each combination of all found extensions if more than one\n                    }\n                }\n                classes.push(`ext-file-icon`); // extra segment to increase file-ext score\n            }\n            // Detected Mode\n            const detectedLanguageId = detectLanguageId(modelService, languageService, resource);\n            if (detectedLanguageId) {\n                classes.push(`${cssEscape(detectedLanguageId)}-lang-file-icon`);\n            }\n        }\n    }\n    return classes;\n}\nfunction detectLanguageId(modelService, languageService, resource) {\n    if (!resource) {\n        return null; // we need a resource at least\n    }\n    let languageId = null;\n    // Data URI: check for encoded metadata\n    if (resource.scheme === Schemas.data) {\n        const metadata = DataUri.parseMetaData(resource);\n        const mime = metadata.get(DataUri.META_DATA_MIME);\n        if (mime) {\n            languageId = languageService.getLanguageIdByMimeType(mime);\n        }\n    }\n    // Any other URI: check for model if existing\n    else {\n        const model = modelService.getModel(resource);\n        if (model) {\n            languageId = model.getLanguageId();\n        }\n    }\n    // only take if the language id is specific (aka no just plain text)\n    if (languageId && languageId !== PLAINTEXT_LANGUAGE_ID) {\n        return languageId;\n    }\n    // otherwise fallback to path based detection\n    return languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n}\nexport function cssEscape(str) {\n    return str.replace(/[\\11\\12\\14\\15\\40]/g, '/'); // HTML class names can not contain certain whitespace characters, use / instead, which doesn't exist in file names.\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            data.root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(109 /* EditorOption.suggestFontSize */) || e.hasChanged(110 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(108 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n        if (selectionIndex >= 0) {\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus([selectionIndex]);\n        }\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.shy) {\n                return;\n            }\n            let index = -1;\n            if (!e.noSelect) {\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false, noSelect: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(108 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter, noSelect) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false, noSelect: noSelect !== null && noSelect !== void 0 ? noSelect : false }, false, onlyFrom, undefined, noFilter);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true, noSelect: false });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        let noSelect;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n            if (args.noSelection === true) {\n                noSelect = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined, noSelect);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { compareBy, findMaxBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { SnippetSession } from '../../snippet/browser/snippetSession.js';\nimport { SuggestController } from '../../suggest/browser/suggestController.js';\nimport { minimizeInlineCompletion, normalizedInlineCompletionsEquals } from './inlineCompletionToGhostText.js';\nexport class SuggestWidgetInlineCompletionProvider extends Disposable {\n    constructor(editor, suggestControllerPreselector) {\n        super();\n        this.editor = editor;\n        this.suggestControllerPreselector = suggestControllerPreselector;\n        this.isSuggestWidgetVisible = false;\n        this.isShiftKeyPressed = false;\n        this._isActive = false;\n        this._currentSuggestItemInfo = undefined;\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        // This delay fixes a suggest widget issue when typing \".\" immediately restarts the suggestion session.\n        this.setInactiveDelayed = this._register(new RunOnceScheduler(() => {\n            if (!this.isSuggestWidgetVisible) {\n                if (this._isActive) {\n                    this._isActive = false;\n                    this.onDidChangeEmitter.fire();\n                }\n            }\n        }, 100));\n        // See the command acceptAlternativeSelectedSuggestion that is bound to shift+tab\n        this._register(editor.onKeyDown(e => {\n            if (e.shiftKey && !this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = true;\n                this.update(this._isActive);\n            }\n        }));\n        this._register(editor.onKeyUp(e => {\n            if (e.shiftKey && this.isShiftKeyPressed) {\n                this.isShiftKeyPressed = false;\n                this.update(this._isActive);\n            }\n        }));\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            this._register(suggestController.registerSelector({\n                priority: 100,\n                select: (model, pos, suggestItems) => {\n                    const textModel = this.editor.getModel();\n                    const normalizedItemToPreselect = minimizeInlineCompletion(textModel, this.suggestControllerPreselector());\n                    if (!normalizedItemToPreselect) {\n                        return -1;\n                    }\n                    const position = Position.lift(pos);\n                    const candidates = suggestItems\n                        .map((suggestItem, index) => {\n                        const inlineSuggestItem = suggestionToSuggestItemInfo(suggestController, position, suggestItem, this.isShiftKeyPressed);\n                        const normalizedSuggestItem = minimizeInlineCompletion(textModel, inlineSuggestItem === null || inlineSuggestItem === void 0 ? void 0 : inlineSuggestItem.normalizedInlineCompletion);\n                        if (!normalizedSuggestItem) {\n                            return undefined;\n                        }\n                        const valid = rangeStartsWith(normalizedItemToPreselect.range, normalizedSuggestItem.range) &&\n                            normalizedItemToPreselect.insertText.startsWith(normalizedSuggestItem.insertText);\n                        return { index, valid, prefixLength: normalizedSuggestItem.insertText.length, suggestItem };\n                    })\n                        .filter(item => item && item.valid);\n                    const result = findMaxBy(candidates, compareBy(s => s.prefixLength, numberComparator));\n                    return result ? result.index : -1;\n                }\n            }));\n            let isBoundToSuggestWidget = false;\n            const bindToSuggestWidget = () => {\n                if (isBoundToSuggestWidget) {\n                    return;\n                }\n                isBoundToSuggestWidget = true;\n                this._register(suggestController.widget.value.onDidShow(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n                this._register(suggestController.widget.value.onDidHide(() => {\n                    this.isSuggestWidgetVisible = false;\n                    this.setInactiveDelayed.schedule();\n                    this.update(this._isActive);\n                }));\n                this._register(suggestController.widget.value.onDidFocus(() => {\n                    this.isSuggestWidgetVisible = true;\n                    this.update(true);\n                }));\n            };\n            this._register(Event.once(suggestController.model.onDidTrigger)(e => {\n                bindToSuggestWidget();\n            }));\n        }\n        this.update(this._isActive);\n    }\n    /**\n     * Returns undefined if the suggest widget is not active.\n    */\n    get state() {\n        if (!this._isActive) {\n            return undefined;\n        }\n        return { selectedItem: this._currentSuggestItemInfo };\n    }\n    update(newActive) {\n        const newInlineCompletion = this.getSuggestItemInfo();\n        let shouldFire = false;\n        if (!suggestItemInfoEquals(this._currentSuggestItemInfo, newInlineCompletion)) {\n            this._currentSuggestItemInfo = newInlineCompletion;\n            shouldFire = true;\n        }\n        if (this._isActive !== newActive) {\n            this._isActive = newActive;\n            shouldFire = true;\n        }\n        if (shouldFire) {\n            this.onDidChangeEmitter.fire();\n        }\n    }\n    getSuggestItemInfo() {\n        const suggestController = SuggestController.get(this.editor);\n        if (!suggestController) {\n            return undefined;\n        }\n        if (!this.isSuggestWidgetVisible) {\n            return undefined;\n        }\n        const focusedItem = suggestController.widget.value.getFocusedItem();\n        if (!focusedItem) {\n            return undefined;\n        }\n        // TODO: item.isResolved\n        return suggestionToSuggestItemInfo(suggestController, this.editor.getPosition(), focusedItem.item, this.isShiftKeyPressed);\n    }\n    stopForceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.stopForceRenderingAbove();\n        }\n    }\n    forceRenderingAbove() {\n        const suggestController = SuggestController.get(this.editor);\n        if (suggestController) {\n            suggestController.forceRenderingAbove();\n        }\n    }\n}\nexport function rangeStartsWith(rangeToTest, prefix) {\n    return (prefix.startLineNumber === rangeToTest.startLineNumber &&\n        prefix.startColumn === rangeToTest.startColumn &&\n        (prefix.endLineNumber < rangeToTest.endLineNumber ||\n            (prefix.endLineNumber === rangeToTest.endLineNumber &&\n                prefix.endColumn <= rangeToTest.endColumn)));\n}\nfunction suggestItemInfoEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (!a || !b) {\n        return false;\n    }\n    return a.completionItemKind === b.completionItemKind &&\n        a.isSnippetText === b.isSnippetText &&\n        normalizedInlineCompletionsEquals(a.normalizedInlineCompletion, b.normalizedInlineCompletion);\n}\nfunction suggestionToSuggestItemInfo(suggestController, position, item, toggleMode) {\n    // additionalTextEdits might not be resolved here, this could be problematic.\n    if (Array.isArray(item.completion.additionalTextEdits) && item.completion.additionalTextEdits.length > 0) {\n        // cannot represent additional text edits. TODO: Now we can.\n        return {\n            completionItemKind: item.completion.kind,\n            isSnippetText: false,\n            normalizedInlineCompletion: {\n                // Dummy element, so that space is reserved, but no text is shown\n                range: Range.fromPositions(position, position),\n                insertText: '',\n                filterText: '',\n                snippetInfo: undefined,\n                additionalTextEdits: [],\n            },\n        };\n    }\n    let { insertText } = item.completion;\n    let isSnippetText = false;\n    if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */) {\n        const snippet = new SnippetParser().parse(insertText);\n        const model = suggestController.editor.getModel();\n        // Ignore snippets that are too large.\n        // Adjust whitespace is expensive for them.\n        if (snippet.children.length > 100) {\n            return undefined;\n        }\n        SnippetSession.adjustWhitespace(model, position, snippet, true, true);\n        insertText = snippet.toString();\n        isSnippetText = true;\n    }\n    const info = suggestController.getOverwriteInfo(item, toggleMode);\n    return {\n        isSnippetText,\n        completionItemKind: item.completion.kind,\n        normalizedInlineCompletion: {\n            insertText: insertText,\n            filterText: insertText,\n            range: Range.fromPositions(position.delta(0, -info.overwriteBefore), position.delta(0, Math.max(info.overwriteAfter, 0))),\n            snippetInfo: undefined,\n            additionalTextEdits: [],\n        }\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { BaseGhostTextWidgetModel, GhostText } from './ghostText.js';\nimport { provideInlineCompletions, UpdateOperation } from './inlineCompletionsModel.js';\nimport { inlineCompletionToGhostText, minimizeInlineCompletion } from './inlineCompletionToGhostText.js';\nimport { SuggestWidgetInlineCompletionProvider } from './suggestWidgetInlineCompletionProvider.js';\nlet SuggestWidgetPreviewModel = class SuggestWidgetPreviewModel extends BaseGhostTextWidgetModel {\n    constructor(editor, cache, languageFeaturesService) {\n        super(editor);\n        this.cache = cache;\n        this.languageFeaturesService = languageFeaturesService;\n        this.suggestionInlineCompletionSource = this._register(new SuggestWidgetInlineCompletionProvider(this.editor, \n        // Use the first cache item (if any) as preselection.\n        () => { var _a, _b; return (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion(); }));\n        this.updateOperation = this._register(new MutableDisposable());\n        this.updateCacheSoon = this._register(new RunOnceScheduler(() => this.updateCache(), 50));\n        this.minReservedLineCount = 0;\n        this._register(this.suggestionInlineCompletionSource.onDidChange(() => {\n            if (!this.editor.hasModel()) {\n                // onDidChange might be called when calling setModel on the editor, before we are disposed.\n                return;\n            }\n            this.updateCacheSoon.schedule();\n            const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n            if (!suggestWidgetState) {\n                this.minReservedLineCount = 0;\n            }\n            const newGhostText = this.ghostText;\n            if (newGhostText) {\n                this.minReservedLineCount = Math.max(this.minReservedLineCount, sum(newGhostText.parts.map(p => p.lines.length - 1)));\n            }\n            if (this.minReservedLineCount >= 1) {\n                this.suggestionInlineCompletionSource.forceRenderingAbove();\n            }\n            else {\n                this.suggestionInlineCompletionSource.stopForceRenderingAbove();\n            }\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.cache.onDidChange(() => {\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(this.editor.onDidChangeCursorPosition((e) => {\n            this.minReservedLineCount = 0;\n            this.updateCacheSoon.schedule();\n            this.onDidChangeEmitter.fire();\n        }));\n        this._register(toDisposable(() => this.suggestionInlineCompletionSource.stopForceRenderingAbove()));\n    }\n    get isActive() {\n        return this.suggestionInlineCompletionSource.state !== undefined;\n    }\n    isSuggestionPreviewEnabled() {\n        const suggestOptions = this.editor.getOption(108 /* EditorOption.suggest */);\n        return suggestOptions.preview;\n    }\n    updateCache() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = this.suggestionInlineCompletionSource.state;\n            if (!state || !state.selectedItem) {\n                return;\n            }\n            const info = {\n                text: state.selectedItem.normalizedInlineCompletion.insertText,\n                range: state.selectedItem.normalizedInlineCompletion.range,\n                isSnippetText: state.selectedItem.isSnippetText,\n                completionKind: state.selectedItem.completionItemKind,\n            };\n            const position = this.editor.getPosition();\n            if (state.selectedItem.isSnippetText ||\n                state.selectedItem.completionItemKind === 27 /* CompletionItemKind.Snippet */ ||\n                state.selectedItem.completionItemKind === 20 /* CompletionItemKind.File */ ||\n                state.selectedItem.completionItemKind === 23 /* CompletionItemKind.Folder */) {\n                // Don't ask providers for these types of suggestions.\n                this.cache.clear();\n                return;\n            }\n            const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                let result;\n                try {\n                    result = yield provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.editor.getModel(), { triggerKind: InlineCompletionTriggerKind.Automatic, selectedSuggestionInfo: info }, token);\n                }\n                catch (e) {\n                    onUnexpectedError(e);\n                    return;\n                }\n                if (token.isCancellationRequested) {\n                    result.dispose();\n                    return;\n                }\n                this.cache.setValue(this.editor, result, InlineCompletionTriggerKind.Automatic);\n                this.onDidChangeEmitter.fire();\n            }));\n            const operation = new UpdateOperation(promise, InlineCompletionTriggerKind.Automatic);\n            this.updateOperation.value = operation;\n            yield promise;\n            if (this.updateOperation.value === operation) {\n                this.updateOperation.clear();\n            }\n        });\n    }\n    get ghostText() {\n        var _a, _b, _c;\n        const isSuggestionPreviewEnabled = this.isSuggestionPreviewEnabled();\n        const model = this.editor.getModel();\n        const augmentedCompletion = minimizeInlineCompletion(model, (_b = (_a = this.cache.value) === null || _a === void 0 ? void 0 : _a.completions[0]) === null || _b === void 0 ? void 0 : _b.toLiveInlineCompletion());\n        const suggestWidgetState = this.suggestionInlineCompletionSource.state;\n        const suggestInlineCompletion = minimizeInlineCompletion(model, (_c = suggestWidgetState === null || suggestWidgetState === void 0 ? void 0 : suggestWidgetState.selectedItem) === null || _c === void 0 ? void 0 : _c.normalizedInlineCompletion);\n        const isAugmentedCompletionValid = augmentedCompletion\n            && suggestInlineCompletion\n            && augmentedCompletion.insertText.startsWith(suggestInlineCompletion.insertText)\n            && augmentedCompletion.range.equalsRange(suggestInlineCompletion.range);\n        if (!isSuggestionPreviewEnabled && !isAugmentedCompletionValid) {\n            return undefined;\n        }\n        // If the augmented completion is not valid and there is no suggest inline completion, we still show the augmented completion.\n        const finalCompletion = isAugmentedCompletionValid ? augmentedCompletion : (suggestInlineCompletion || augmentedCompletion);\n        const inlineCompletionPreviewLength = isAugmentedCompletionValid ? finalCompletion.insertText.length - suggestInlineCompletion.insertText.length : 0;\n        const newGhostText = this.toGhostText(finalCompletion, inlineCompletionPreviewLength);\n        return newGhostText;\n    }\n    toGhostText(completion, inlineCompletionPreviewLength) {\n        const mode = this.editor.getOptions().get(108 /* EditorOption.suggest */).previewMode;\n        return completion\n            ? (inlineCompletionToGhostText(completion, this.editor.getModel(), mode, this.editor.getPosition(), inlineCompletionPreviewLength) ||\n                // Show an invisible ghost text to reserve space\n                new GhostText(completion.range.endLineNumber, [], this.minReservedLineCount))\n            : undefined;\n    }\n};\nSuggestWidgetPreviewModel = __decorate([\n    __param(2, ILanguageFeaturesService)\n], SuggestWidgetPreviewModel);\nexport { SuggestWidgetPreviewModel };\nfunction sum(arr) {\n    return arr.reduce((a, b) => a + b, 0);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { InlineCompletionsModel, SynchronizedInlineCompletionsCache } from './inlineCompletionsModel.js';\nimport { SuggestWidgetPreviewModel } from './suggestWidgetPreviewModel.js';\nimport { createDisposableRef } from './utils.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport class DelegatingModel extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.hasCachedGhostText = false;\n        this.currentModelRef = this._register(new MutableDisposable());\n    }\n    get targetModel() {\n        var _a;\n        return (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object;\n    }\n    setTargetModel(model) {\n        var _a;\n        if (((_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === model) {\n            return;\n        }\n        this.currentModelRef.clear();\n        this.currentModelRef.value = model ? createDisposableRef(model, model.onDidChange(() => {\n            this.hasCachedGhostText = false;\n            this.onDidChangeEmitter.fire();\n        })) : undefined;\n        this.hasCachedGhostText = false;\n        this.onDidChangeEmitter.fire();\n    }\n    get ghostText() {\n        var _a, _b;\n        if (!this.hasCachedGhostText) {\n            this.cachedGhostText = (_b = (_a = this.currentModelRef.value) === null || _a === void 0 ? void 0 : _a.object) === null || _b === void 0 ? void 0 : _b.ghostText;\n            this.hasCachedGhostText = true;\n        }\n        return this.cachedGhostText;\n    }\n    setExpanded(expanded) {\n        var _a;\n        (_a = this.targetModel) === null || _a === void 0 ? void 0 : _a.setExpanded(expanded);\n    }\n    get minReservedLineCount() {\n        return this.targetModel ? this.targetModel.minReservedLineCount : 0;\n    }\n}\n/**\n * A ghost text model that is both driven by inline completions and the suggest widget.\n*/\nlet GhostTextModel = class GhostTextModel extends DelegatingModel {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.sharedCache = this._register(new SharedInlineCompletionCache());\n        this.suggestWidgetAdapterModel = this._register(this.instantiationService.createInstance(SuggestWidgetPreviewModel, this.editor, this.sharedCache));\n        this.inlineCompletionsModel = this._register(this.instantiationService.createInstance(InlineCompletionsModel, this.editor, this.sharedCache));\n        this._register(this.suggestWidgetAdapterModel.onDidChange(() => {\n            this.updateModel();\n        }));\n        this.updateModel();\n    }\n    get activeInlineCompletionsModel() {\n        if (this.targetModel === this.inlineCompletionsModel) {\n            return this.inlineCompletionsModel;\n        }\n        return undefined;\n    }\n    updateModel() {\n        this.setTargetModel(this.suggestWidgetAdapterModel.isActive\n            ? this.suggestWidgetAdapterModel\n            : this.inlineCompletionsModel);\n        this.inlineCompletionsModel.setActive(this.targetModel === this.inlineCompletionsModel);\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        const ghostText = (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText;\n        if (ghostText) {\n            return ghostText.parts.some(p => hoverRange.containsPosition(new Position(ghostText.lineNumber, p.column)));\n        }\n        return false;\n    }\n    triggerInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.trigger(InlineCompletionTriggerKind.Explicit);\n    }\n    commitInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.commitCurrentSuggestion();\n    }\n    hideInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showNext();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.showPrevious();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextModel = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextModel);\nexport { GhostTextModel };\nexport class SharedInlineCompletionCache extends Disposable {\n    constructor() {\n        super(...arguments);\n        this.onDidChangeEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEmitter.event;\n        this.cache = this._register(new MutableDisposable());\n    }\n    get value() {\n        return this.cache.value;\n    }\n    setValue(editor, completionsSource, triggerKind) {\n        this.cache.value = new SynchronizedInlineCompletionsCache(completionsSource, editor, () => this.onDidChangeEmitter.fire(), triggerKind);\n    }\n    clearAndLeak() {\n        return this.cache.clearAndLeak();\n    }\n    clear() {\n        this.cache.clear();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './ghostText.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ghostTextBackground, ghostTextBorder, ghostTextForeground } from '../../../common/core/editorColorRegistry.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { GhostTextReplacement } from './ghostText.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('editorGhostText', { createHTML: value => value });\nlet GhostTextWidget = class GhostTextWidget extends Disposable {\n    constructor(editor, model, instantiationService, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.instantiationService = instantiationService;\n        this.languageService = languageService;\n        this.disposed = false;\n        this.partsWidget = this._register(this.instantiationService.createInstance(DecorationsWidget, this.editor));\n        this.additionalLinesWidget = this._register(new AdditionalLinesWidget(this.editor, this.languageService.languageIdCodec));\n        this.viewMoreContentWidget = undefined;\n        this.replacementDecoration = this._register(new DisposableDecorations(this.editor));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(29 /* EditorOption.disableMonospaceOptimizations */)\n                || e.hasChanged(107 /* EditorOption.stopRenderingLineAfter */)\n                || e.hasChanged(90 /* EditorOption.renderWhitespace */)\n                || e.hasChanged(85 /* EditorOption.renderControlCharacters */)\n                || e.hasChanged(47 /* EditorOption.fontLigatures */)\n                || e.hasChanged(46 /* EditorOption.fontInfo */)\n                || e.hasChanged(61 /* EditorOption.lineHeight */)) {\n                this.update();\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            this.disposed = true;\n            this.update();\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }));\n        this._register(model.onDidChange(() => {\n            this.update();\n        }));\n        this.update();\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        return (this.additionalLinesWidget.viewZoneId === viewZoneId);\n    }\n    update() {\n        var _a;\n        const ghostText = this.model.ghostText;\n        if (!this.editor.hasModel() || !ghostText || this.disposed) {\n            this.partsWidget.clear();\n            this.additionalLinesWidget.clear();\n            this.replacementDecoration.clear();\n            return;\n        }\n        const inlineTexts = new Array();\n        const additionalLines = new Array();\n        function addToAdditionalLines(lines, className) {\n            if (additionalLines.length > 0) {\n                const lastLine = additionalLines[additionalLines.length - 1];\n                if (className) {\n                    lastLine.decorations.push(new LineDecoration(lastLine.content.length + 1, lastLine.content.length + 1 + lines[0].length, className, 0 /* InlineDecorationType.Regular */));\n                }\n                lastLine.content += lines[0];\n                lines = lines.slice(1);\n            }\n            for (const line of lines) {\n                additionalLines.push({\n                    content: line,\n                    decorations: className ? [new LineDecoration(1, line.length + 1, className, 0 /* InlineDecorationType.Regular */)] : []\n                });\n            }\n        }\n        if (ghostText instanceof GhostTextReplacement) {\n            this.replacementDecoration.setDecorations([\n                {\n                    range: new Range(ghostText.lineNumber, ghostText.columnStart, ghostText.lineNumber, ghostText.columnStart + ghostText.length),\n                    options: {\n                        inlineClassName: 'inline-completion-text-to-replace',\n                        description: 'GhostTextReplacement'\n                    }\n                },\n            ]);\n        }\n        else {\n            this.replacementDecoration.setDecorations([]);\n        }\n        const textBufferLine = this.editor.getModel().getLineContent(ghostText.lineNumber);\n        let hiddenTextStartColumn = undefined;\n        let lastIdx = 0;\n        for (const part of ghostText.parts) {\n            let lines = part.lines;\n            if (hiddenTextStartColumn === undefined) {\n                inlineTexts.push({\n                    column: part.column,\n                    text: lines[0],\n                    preview: part.preview,\n                });\n                lines = lines.slice(1);\n            }\n            else {\n                addToAdditionalLines([textBufferLine.substring(lastIdx, part.column - 1)], undefined);\n            }\n            if (lines.length > 0) {\n                addToAdditionalLines(lines, 'ghost-text');\n                if (hiddenTextStartColumn === undefined && part.column <= textBufferLine.length) {\n                    hiddenTextStartColumn = part.column;\n                }\n            }\n            lastIdx = part.column - 1;\n        }\n        if (hiddenTextStartColumn !== undefined) {\n            addToAdditionalLines([textBufferLine.substring(lastIdx)], undefined);\n        }\n        this.partsWidget.setParts(ghostText.lineNumber, inlineTexts, hiddenTextStartColumn !== undefined ? { column: hiddenTextStartColumn, length: textBufferLine.length + 1 - hiddenTextStartColumn } : undefined);\n        this.additionalLinesWidget.updateLines(ghostText.lineNumber, additionalLines, ghostText.additionalReservedLineCount);\n        if (0 < 0) {\n            // Not supported at the moment, condition is always false.\n            this.viewMoreContentWidget = this.renderViewMoreLines(new Position(ghostText.lineNumber, this.editor.getModel().getLineMaxColumn(ghostText.lineNumber)), '', 0);\n        }\n        else {\n            (_a = this.viewMoreContentWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.viewMoreContentWidget = undefined;\n        }\n    }\n    renderViewMoreLines(position, firstLineText, remainingLinesLength) {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const domNode = document.createElement('div');\n        domNode.className = 'suggest-preview-additional-widget';\n        applyFontInfo(domNode, fontInfo);\n        const spacer = document.createElement('span');\n        spacer.className = 'content-spacer';\n        spacer.append(firstLineText);\n        domNode.append(spacer);\n        const newline = document.createElement('span');\n        newline.className = 'content-newline suggest-preview-text';\n        newline.append('  ');\n        domNode.append(newline);\n        const disposableStore = new DisposableStore();\n        const button = document.createElement('div');\n        button.className = 'button suggest-preview-text';\n        button.append(`+${remainingLinesLength} lines`);\n        disposableStore.add(dom.addStandardDisposableListener(button, 'mousedown', (e) => {\n            var _a;\n            (_a = this.model) === null || _a === void 0 ? void 0 : _a.setExpanded(true);\n            e.preventDefault();\n            this.editor.focus();\n        }));\n        domNode.append(button);\n        return new ViewMoreLinesContentWidget(this.editor, position, domNode, disposableStore);\n    }\n};\nGhostTextWidget = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ILanguageService)\n], GhostTextWidget);\nexport { GhostTextWidget };\nclass DisposableDecorations {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n    }\n    setDecorations(decorations) {\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, decorations);\n        });\n    }\n    clear() {\n        this.setDecorations([]);\n    }\n    dispose() {\n        this.clear();\n    }\n}\nclass DecorationsWidget {\n    constructor(editor) {\n        this.editor = editor;\n        this.decorationIds = [];\n    }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, []);\n        });\n    }\n    setParts(lineNumber, parts, hiddenText) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const hiddenTextDecorations = new Array();\n        if (hiddenText) {\n            hiddenTextDecorations.push({\n                range: Range.fromPositions(new Position(lineNumber, hiddenText.column), new Position(lineNumber, hiddenText.column + hiddenText.length)),\n                options: {\n                    inlineClassName: 'ghost-text-hidden',\n                    description: 'ghost-text-hidden',\n                }\n            });\n        }\n        // Using change decorations ensures that we update the id's before some event handler is called.\n        this.editor.changeDecorations(accessor => {\n            this.decorationIds = accessor.deltaDecorations(this.decorationIds, parts.map(p => {\n                return ({\n                    range: Range.fromPositions(new Position(lineNumber, p.column)),\n                    options: {\n                        description: 'ghost-text',\n                        after: { content: p.text, inlineClassName: p.preview ? 'ghost-text-decoration-preview' : 'ghost-text-decoration', cursorStops: InjectedTextCursorStops.Left },\n                        showIfCollapsed: true,\n                    }\n                });\n            }).concat(hiddenTextDecorations));\n        });\n    }\n}\nclass AdditionalLinesWidget {\n    constructor(editor, languageIdCodec) {\n        this.editor = editor;\n        this.languageIdCodec = languageIdCodec;\n        this._viewZoneId = undefined;\n    }\n    get viewZoneId() { return this._viewZoneId; }\n    dispose() {\n        this.clear();\n    }\n    clear() {\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n        });\n    }\n    updateLines(lineNumber, additionalLines, minReservedLineCount) {\n        const textModel = this.editor.getModel();\n        if (!textModel) {\n            return;\n        }\n        const { tabSize } = textModel.getOptions();\n        this.editor.changeViewZones((changeAccessor) => {\n            if (this._viewZoneId) {\n                changeAccessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n            }\n            const heightInLines = Math.max(additionalLines.length, minReservedLineCount);\n            if (heightInLines > 0) {\n                const domNode = document.createElement('div');\n                renderLines(domNode, tabSize, additionalLines, this.editor.getOptions(), this.languageIdCodec);\n                this._viewZoneId = changeAccessor.addZone({\n                    afterLineNumber: lineNumber,\n                    heightInLines: heightInLines,\n                    domNode,\n                    afterColumnAffinity: 1 /* PositionAffinity.Right */\n                });\n            }\n        });\n    }\n}\nfunction renderLines(domNode, tabSize, lines, opts, languageIdCodec) {\n    const disableMonospaceOptimizations = opts.get(29 /* EditorOption.disableMonospaceOptimizations */);\n    const stopRenderingLineAfter = opts.get(107 /* EditorOption.stopRenderingLineAfter */);\n    // To avoid visual confusion, we don't want to render visible whitespace\n    const renderWhitespace = 'none';\n    const renderControlCharacters = opts.get(85 /* EditorOption.renderControlCharacters */);\n    const fontLigatures = opts.get(47 /* EditorOption.fontLigatures */);\n    const fontInfo = opts.get(46 /* EditorOption.fontInfo */);\n    const lineHeight = opts.get(61 /* EditorOption.lineHeight */);\n    const sb = createStringBuilder(10000);\n    sb.appendASCIIString('<div class=\"suggest-preview-text\">');\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const lineData = lines[i];\n        const line = lineData.content;\n        sb.appendASCIIString('<div class=\"view-line');\n        sb.appendASCIIString('\" style=\"top:');\n        sb.appendASCIIString(String(i * lineHeight));\n        sb.appendASCIIString('px;width:1000000px;\">');\n        const isBasicASCII = strings.isBasicASCII(line);\n        const containsRTL = strings.containsRTL(line);\n        const lineTokens = LineTokens.createEmpty(line, languageIdCodec);\n        renderViewLine(new RenderLineInput((fontInfo.isMonospace && !disableMonospaceOptimizations), fontInfo.canUseHalfwidthRightwardsArrow, line, false, isBasicASCII, containsRTL, 0, lineTokens, lineData.decorations, tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures !== EditorFontLigatures.OFF, null), sb);\n        sb.appendASCIIString('</div>');\n    }\n    sb.appendASCIIString('</div>');\n    applyFontInfo(domNode, fontInfo);\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n}\nclass ViewMoreLinesContentWidget extends Disposable {\n    constructor(editor, position, domNode, disposableStore) {\n        super();\n        this.editor = editor;\n        this.position = position;\n        this.domNode = domNode;\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = false;\n        this._register(disposableStore);\n        this._register(toDisposable(() => {\n            this.editor.removeContentWidget(this);\n        }));\n        this.editor.addContentWidget(this);\n    }\n    getId() {\n        return 'editor.widget.viewMoreLinesWidget';\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return {\n            position: this.position,\n            preference: [0 /* ContentWidgetPositionPreference.EXACT */]\n        };\n    }\n}\nregisterThemingParticipant((theme, collector) => {\n    const foreground = theme.getColor(ghostTextForeground);\n    if (foreground) {\n        // `!important` ensures that other decorations don't cause a style conflict (#132017).\n        collector.addRule(`.monaco-editor .ghost-text-decoration { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${foreground.toString()} !important; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${foreground.toString()} !important; }`);\n    }\n    const background = theme.getColor(ghostTextBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${background.toString()}; }`);\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${background.toString()}; }`);\n    }\n    const border = theme.getColor(ghostTextBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${border}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { firstNonWhitespaceIndex } from '../../../../base/common/strings.js';\nimport { EditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { GhostTextModel } from './ghostTextModel.js';\nimport { GhostTextWidget } from './ghostTextWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nlet GhostTextController = class GhostTextController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.triggeredExplicitly = false;\n        this.activeController = this._register(new MutableDisposable());\n        this.activeModelDidChangeEmitter = this._register(new Emitter());\n        this._register(this.editor.onDidChangeModel(() => {\n            this.updateModelController();\n        }));\n        this._register(this.editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                this.updateModelController();\n            }\n            if (e.hasChanged(57 /* EditorOption.inlineSuggest */)) {\n                this.updateModelController();\n            }\n        }));\n        this.updateModelController();\n    }\n    static get(editor) {\n        return editor.getContribution(GhostTextController.ID);\n    }\n    get activeModel() {\n        var _a;\n        return (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.model;\n    }\n    // Don't call this method when not necessary. It will recreate the activeController.\n    updateModelController() {\n        const suggestOptions = this.editor.getOption(108 /* EditorOption.suggest */);\n        const inlineSuggestOptions = this.editor.getOption(57 /* EditorOption.inlineSuggest */);\n        this.activeController.value = undefined;\n        // ActiveGhostTextController is only created if one of those settings is set or if the inline completions are triggered explicitly.\n        this.activeController.value =\n            this.editor.hasModel() && (suggestOptions.preview || inlineSuggestOptions.enabled || this.triggeredExplicitly)\n                ? this.instantiationService.createInstance(ActiveGhostTextController, this.editor)\n                : undefined;\n        this.activeModelDidChangeEmitter.fire();\n    }\n    shouldShowHoverAt(hoverRange) {\n        var _a;\n        return ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.shouldShowHoverAt(hoverRange)) || false;\n    }\n    shouldShowHoverAtViewZone(viewZoneId) {\n        var _a, _b;\n        return ((_b = (_a = this.activeController.value) === null || _a === void 0 ? void 0 : _a.widget) === null || _b === void 0 ? void 0 : _b.shouldShowHoverAtViewZone(viewZoneId)) || false;\n    }\n    trigger() {\n        var _a;\n        this.triggeredExplicitly = true;\n        if (!this.activeController.value) {\n            this.updateModelController();\n        }\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.triggerInlineCompletion();\n    }\n    commit() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.commitInlineCompletion();\n    }\n    hide() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hideInlineCompletion();\n    }\n    showNextInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showNextInlineCompletion();\n    }\n    showPreviousInlineCompletion() {\n        var _a;\n        (_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.showPreviousInlineCompletion();\n    }\n    hasMultipleInlineCompletions() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield ((_a = this.activeModel) === null || _a === void 0 ? void 0 : _a.hasMultipleInlineCompletions());\n            return result !== undefined ? result : false;\n        });\n    }\n};\nGhostTextController.inlineSuggestionVisible = new RawContextKey('inlineSuggestionVisible', false, nls.localize('inlineSuggestionVisible', \"Whether an inline suggestion is visible\"));\nGhostTextController.inlineSuggestionHasIndentation = new RawContextKey('inlineSuggestionHasIndentation', false, nls.localize('inlineSuggestionHasIndentation', \"Whether the inline suggestion starts with whitespace\"));\nGhostTextController.inlineSuggestionHasIndentationLessThanTabSize = new RawContextKey('inlineSuggestionHasIndentationLessThanTabSize', true, nls.localize('inlineSuggestionHasIndentationLessThanTabSize', \"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab\"));\nGhostTextController.ID = 'editor.contrib.ghostTextController';\nGhostTextController = __decorate([\n    __param(1, IInstantiationService)\n], GhostTextController);\nexport { GhostTextController };\nclass GhostTextContextKeys {\n    constructor(contextKeyService) {\n        this.contextKeyService = contextKeyService;\n        this.inlineCompletionVisible = GhostTextController.inlineSuggestionVisible.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentation = GhostTextController.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);\n        this.inlineCompletionSuggestsIndentationLessThanTabSize = GhostTextController.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);\n    }\n}\n/**\n * The controller for a text editor with an initialized text model.\n * Must be disposed as soon as the model detaches from the editor.\n*/\nlet ActiveGhostTextController = class ActiveGhostTextController extends Disposable {\n    constructor(editor, instantiationService, contextKeyService) {\n        super();\n        this.editor = editor;\n        this.instantiationService = instantiationService;\n        this.contextKeyService = contextKeyService;\n        this.contextKeys = new GhostTextContextKeys(this.contextKeyService);\n        this.model = this._register(this.instantiationService.createInstance(GhostTextModel, this.editor));\n        this.widget = this._register(this.instantiationService.createInstance(GhostTextWidget, this.editor, this.model));\n        this._register(toDisposable(() => {\n            this.contextKeys.inlineCompletionVisible.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentation.set(false);\n            this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(true);\n        }));\n        this._register(this.model.onDidChange(() => {\n            this.updateContextKeys();\n        }));\n        this.updateContextKeys();\n    }\n    updateContextKeys() {\n        var _a;\n        this.contextKeys.inlineCompletionVisible.set(((_a = this.model.activeInlineCompletionsModel) === null || _a === void 0 ? void 0 : _a.ghostText) !== undefined);\n        let startsWithIndentation = false;\n        let startsWithIndentationLessThanTabSize = true;\n        const ghostText = this.model.inlineCompletionsModel.ghostText;\n        if (!!this.model.activeInlineCompletionsModel && ghostText && ghostText.parts.length > 0) {\n            const { column, lines } = ghostText.parts[0];\n            const firstLine = lines[0];\n            const indentationEndColumn = this.editor.getModel().getLineIndentColumn(ghostText.lineNumber);\n            const inIndentation = column <= indentationEndColumn;\n            if (inIndentation) {\n                let firstNonWsIdx = firstNonWhitespaceIndex(firstLine);\n                if (firstNonWsIdx === -1) {\n                    firstNonWsIdx = firstLine.length - 1;\n                }\n                startsWithIndentation = firstNonWsIdx > 0;\n                const tabSize = this.editor.getModel().getOptions().tabSize;\n                const visibleColumnIndentation = CursorColumns.visibleColumnFromColumn(firstLine, firstNonWsIdx + 1, tabSize);\n                startsWithIndentationLessThanTabSize = visibleColumnIndentation < tabSize;\n            }\n        }\n        this.contextKeys.inlineCompletionSuggestsIndentation.set(startsWithIndentation);\n        this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(startsWithIndentationLessThanTabSize);\n    }\n};\nActiveGhostTextController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService)\n], ActiveGhostTextController);\nexport { ActiveGhostTextController };\nexport class ShowNextInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowNextInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showNext', \"Show Next Inline Suggestion\"),\n            alias: 'Show Next Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 89 /* KeyCode.BracketRight */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showNextInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowNextInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showNext';\nexport class ShowPreviousInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: ShowPreviousInlineSuggestionAction.ID,\n            label: nls.localize('action.inlineSuggest.showPrevious', \"Show Previous Inline Suggestion\"),\n            alias: 'Show Previous Inline Suggestion',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, GhostTextController.inlineSuggestionVisible),\n            kbOpts: {\n                weight: 100,\n                primary: 512 /* KeyMod.Alt */ | 87 /* KeyCode.BracketLeft */,\n            },\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.showPreviousInlineCompletion();\n                editor.focus();\n            }\n        });\n    }\n}\nShowPreviousInlineSuggestionAction.ID = 'editor.action.inlineSuggest.showPrevious';\nexport class TriggerInlineSuggestionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inlineSuggest.trigger',\n            label: nls.localize('action.inlineSuggest.trigger', \"Trigger Inline Suggestion\"),\n            alias: 'Trigger Inline Suggestion',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = GhostTextController.get(editor);\n            if (controller) {\n                controller.trigger();\n            }\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction } from './ghostTextController.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { inlineSuggestCommitId } from './consts.js';\nexport class InlineCompletionsHover {\n    constructor(owner, range, controller) {\n        this.owner = owner;\n        this.range = range;\n        this.controller = controller;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n    hasMultipleSuggestions() {\n        return this.controller.hasMultipleInlineCompletions();\n    }\n    get commands() {\n        var _a, _b, _c;\n        return ((_c = (_b = (_a = this.controller.activeModel) === null || _a === void 0 ? void 0 : _a.activeInlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.completionSession.value) === null || _c === void 0 ? void 0 : _c.commands) || [];\n    }\n}\nlet InlineCompletionsHoverParticipant = class InlineCompletionsHoverParticipant {\n    constructor(_editor, _commandService, _menuService, _contextKeyService, _languageService, _openerService, accessibilityService) {\n        this._editor = _editor;\n        this._commandService = _commandService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.accessibilityService = accessibilityService;\n        this.hoverOrdinal = 3;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        const controller = GhostTextController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        const target = mouseEvent.target;\n        if (target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            // handle the case where the mouse is over the view zone\n            const viewZoneData = target.detail;\n            if (controller.shouldShowHoverAtViewZone(viewZoneData.viewZoneId)) {\n                return new HoverForeignElementAnchor(1000, this, Range.fromPositions(viewZoneData.positionBefore || viewZoneData.position, viewZoneData.positionBefore || viewZoneData.position));\n            }\n        }\n        if (target.type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            // handle the case where the mouse is over the empty portion of a line following ghost text\n            if (controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        if (target.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            // handle the case where the mouse is directly over ghost text\n            const mightBeForeignElement = target.detail.mightBeForeignElement;\n            if (mightBeForeignElement && controller.shouldShowHoverAt(target.range)) {\n                return new HoverForeignElementAnchor(1000, this, target.range);\n            }\n        }\n        return null;\n    }\n    computeSync(anchor, lineDecorations) {\n        const controller = GhostTextController.get(this._editor);\n        if (controller && controller.shouldShowHoverAt(anchor.range)) {\n            return [new InlineCompletionsHover(this, anchor.range, controller)];\n        }\n        return [];\n    }\n    renderHoverParts(context, hoverParts) {\n        const disposableStore = new DisposableStore();\n        const part = hoverParts[0];\n        if (this.accessibilityService.isScreenReaderOptimized()) {\n            this.renderScreenReaderText(context, part, disposableStore);\n        }\n        // TODO@hediet: deprecate MenuId.InlineCompletionsActions\n        const menu = disposableStore.add(this._menuService.createMenu(MenuId.InlineCompletionsActions, this._contextKeyService));\n        const previousAction = context.statusBar.addAction({\n            label: nls.localize('showNextInlineSuggestion', \"Next\"),\n            commandId: ShowNextInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowNextInlineSuggestionAction.ID)\n        });\n        const nextAction = context.statusBar.addAction({\n            label: nls.localize('showPreviousInlineSuggestion', \"Previous\"),\n            commandId: ShowPreviousInlineSuggestionAction.ID,\n            run: () => this._commandService.executeCommand(ShowPreviousInlineSuggestionAction.ID)\n        });\n        context.statusBar.addAction({\n            label: nls.localize('acceptInlineSuggestion', \"Accept\"),\n            commandId: inlineSuggestCommitId,\n            run: () => this._commandService.executeCommand(inlineSuggestCommitId)\n        });\n        const actions = [previousAction, nextAction];\n        for (const action of actions) {\n            action.setEnabled(false);\n        }\n        part.hasMultipleSuggestions().then(hasMore => {\n            for (const action of actions) {\n                action.setEnabled(hasMore);\n            }\n        });\n        for (const command of part.commands) {\n            context.statusBar.addAction({\n                label: command.title,\n                commandId: command.id,\n                run: () => this._commandService.executeCommand(command.id, ...(command.arguments || []))\n            });\n        }\n        for (const [_, group] of menu.getActions()) {\n            for (const action of group) {\n                if (action instanceof MenuItemAction) {\n                    context.statusBar.addAction({\n                        label: action.label,\n                        commandId: action.item.id,\n                        run: () => this._commandService.executeCommand(action.item.id)\n                    });\n                }\n            }\n        }\n        return disposableStore;\n    }\n    renderScreenReaderText(context, part, disposableStore) {\n        var _a, _b;\n        const $ = dom.$;\n        const markdownHoverElement = $('div.hover-row.markdown-hover');\n        const hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\n        const renderer = disposableStore.add(new MarkdownRenderer({ editor: this._editor }, this._languageService, this._openerService));\n        const render = (code) => {\n            disposableStore.add(renderer.onDidRenderAsync(() => {\n                hoverContentsElement.className = 'hover-contents code-hover-contents';\n                context.onContentsChanged();\n            }));\n            const inlineSuggestionAvailable = nls.localize('inlineSuggestionFollows', \"Suggestion:\");\n            const renderedContents = disposableStore.add(renderer.render(new MarkdownString().appendText(inlineSuggestionAvailable).appendCodeblock('text', code)));\n            hoverContentsElement.replaceChildren(renderedContents.element);\n        };\n        const ghostText = (_b = (_a = part.controller.activeModel) === null || _a === void 0 ? void 0 : _a.inlineCompletionsModel) === null || _b === void 0 ? void 0 : _b.ghostText;\n        if (ghostText) {\n            const lineText = this._editor.getModel().getLineContent(ghostText.lineNumber);\n            render(ghostText.renderForScreenReader(lineText));\n        }\n        context.fragment.appendChild(markdownHoverElement);\n    }\n};\nInlineCompletionsHoverParticipant = __decorate([\n    __param(1, ICommandService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageService),\n    __param(5, IOpenerService),\n    __param(6, IAccessibilityService)\n], InlineCompletionsHoverParticipant);\nexport { InlineCompletionsHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { inlineSuggestCommitId } from './consts.js';\nimport { GhostTextController, ShowNextInlineSuggestionAction, ShowPreviousInlineSuggestionAction, TriggerInlineSuggestionAction } from './ghostTextController.js';\nimport { InlineCompletionsHoverParticipant } from './ghostTextHoverParticipant.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nregisterEditorContribution(GhostTextController.ID, GhostTextController);\nregisterEditorAction(TriggerInlineSuggestionAction);\nregisterEditorAction(ShowNextInlineSuggestionAction);\nregisterEditorAction(ShowPreviousInlineSuggestionAction);\nHoverParticipantRegistry.register(InlineCompletionsHoverParticipant);\nconst GhostTextCommand = EditorCommand.bindToContribution(GhostTextController.get);\nexport const commitInlineSuggestionAction = new GhostTextCommand({\n    id: inlineSuggestCommitId,\n    precondition: GhostTextController.inlineSuggestionVisible,\n    handler(x) {\n        x.commit();\n        x.editor.focus();\n    }\n});\nregisterEditorCommand(commitInlineSuggestionAction);\nKeybindingsRegistry.registerKeybindingRule({\n    primary: 2 /* KeyCode.Tab */,\n    weight: 200,\n    id: commitInlineSuggestionAction.id,\n    when: ContextKeyExpr.and(commitInlineSuggestionAction.precondition, EditorContextKeys.tabMovesFocus.toNegated(), GhostTextController.inlineSuggestionHasIndentationLessThanTabSize),\n});\nregisterEditorCommand(new GhostTextCommand({\n    id: 'editor.action.inlineSuggest.hide',\n    precondition: GhostTextController.inlineSuggestionVisible,\n    kbOpts: {\n        weight: 100,\n        primary: 9 /* KeyCode.Escape */,\n    },\n    handler(x) {\n        x.hide();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function getSpaceCnt(str, tabSize) {\n    let spacesCnt = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str.charAt(i) === '\\t') {\n            spacesCnt += tabSize;\n        }\n        else {\n            spacesCnt++;\n        }\n    }\n    return spacesCnt;\n}\nexport function generateIndent(spacesCnt, tabSize, insertSpaces) {\n    spacesCnt = spacesCnt < 0 ? 0 : spacesCnt;\n    let result = '';\n    if (!insertSpaces) {\n        const tabsCnt = Math.floor(spacesCnt / tabSize);\n        spacesCnt = spacesCnt % tabSize;\n        for (let i = 0; i < tabsCnt; i++) {\n            result += '\\t';\n        }\n    }\n    for (let i = 0; i < spacesCnt; i++) {\n        result += ' ';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from './indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { normalizeIndentation } from '../../../common/core/indentation.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nexport function getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber, inheritedIndent) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return [];\n    }\n    const indentationRules = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).indentationRules;\n    if (!indentationRules) {\n        return [];\n    }\n    endLineNumber = Math.min(endLineNumber, model.getLineCount());\n    // Skip `unIndentedLinePattern` lines\n    while (startLineNumber <= endLineNumber) {\n        if (!indentationRules.unIndentedLinePattern) {\n            break;\n        }\n        const text = model.getLineContent(startLineNumber);\n        if (!indentationRules.unIndentedLinePattern.test(text)) {\n            break;\n        }\n        startLineNumber++;\n    }\n    if (startLineNumber > endLineNumber - 1) {\n        return [];\n    }\n    const { tabSize, indentSize, insertSpaces } = model.getOptions();\n    const shiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.shiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const unshiftIndent = (indentation, count) => {\n        count = count || 1;\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + count, tabSize, indentSize, insertSpaces);\n    };\n    const indentEdits = [];\n    // indentation being passed to lines below\n    let globalIndent;\n    // Calculate indentation for the first line\n    // If there is no passed-in indentation, we use the indentation of the first line as base.\n    const currentLineText = model.getLineContent(startLineNumber);\n    let adjustedLineContent = currentLineText;\n    if (inheritedIndent !== undefined && inheritedIndent !== null) {\n        globalIndent = inheritedIndent;\n        const oldIndentation = strings.getLeadingWhitespace(currentLineText);\n        adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = unshiftIndent(globalIndent);\n            adjustedLineContent = globalIndent + currentLineText.substring(oldIndentation.length);\n        }\n        if (currentLineText !== adjustedLineContent) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(startLineNumber, 1, startLineNumber, oldIndentation.length + 1), normalizeIndentation(globalIndent, indentSize, insertSpaces)));\n        }\n    }\n    else {\n        globalIndent = strings.getLeadingWhitespace(currentLineText);\n    }\n    // idealIndentForNextLine doesn't equal globalIndent when there is a line matching `indentNextLinePattern`.\n    let idealIndentForNextLine = globalIndent;\n    if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        globalIndent = shiftIndent(globalIndent);\n    }\n    else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n        idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n    }\n    startLineNumber++;\n    // Calculate indentation adjustment for all following lines\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        const text = model.getLineContent(lineNumber);\n        const oldIndentation = strings.getLeadingWhitespace(text);\n        const adjustedLineContent = idealIndentForNextLine + text.substring(oldIndentation.length);\n        if (indentationRules.decreaseIndentPattern && indentationRules.decreaseIndentPattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = unshiftIndent(idealIndentForNextLine);\n            globalIndent = unshiftIndent(globalIndent);\n        }\n        if (oldIndentation !== idealIndentForNextLine) {\n            indentEdits.push(EditOperation.replaceMove(new Selection(lineNumber, 1, lineNumber, oldIndentation.length + 1), normalizeIndentation(idealIndentForNextLine, indentSize, insertSpaces)));\n        }\n        // calculate idealIndentForNextLine\n        if (indentationRules.unIndentedLinePattern && indentationRules.unIndentedLinePattern.test(text)) {\n            // In reindent phase, if the line matches `unIndentedLinePattern` we inherit indentation from above lines\n            // but don't change globalIndent and idealIndentForNextLine.\n            continue;\n        }\n        else if (indentationRules.increaseIndentPattern && indentationRules.increaseIndentPattern.test(adjustedLineContent)) {\n            globalIndent = shiftIndent(globalIndent);\n            idealIndentForNextLine = globalIndent;\n        }\n        else if (indentationRules.indentNextLinePattern && indentationRules.indentNextLinePattern.test(adjustedLineContent)) {\n            idealIndentForNextLine = shiftIndent(idealIndentForNextLine);\n        }\n        else {\n            idealIndentForNextLine = globalIndent;\n        }\n    }\n    return indentEdits;\n}\nexport class IndentationToSpacesAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToSpacesAction.ID,\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n            alias: 'Convert Indentation to Spaces',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: true\n        });\n    }\n}\nIndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\nexport class IndentationToTabsAction extends EditorAction {\n    constructor() {\n        super({\n            id: IndentationToTabsAction.ID,\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n            alias: 'Convert Indentation to Tabs',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: false\n        });\n    }\n}\nIndentationToTabsAction.ID = 'editor.action.indentationToTabs';\nexport class ChangeIndentationSizeAction extends EditorAction {\n    constructor(insertSpaces, opts) {\n        super(opts);\n        this.insertSpaces = insertSpaces;\n    }\n    run(accessor, editor) {\n        const quickInputService = accessor.get(IQuickInputService);\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n            id: n.toString(),\n            label: n.toString(),\n            // add description for tabSize value set in the configuration\n            description: n === creationOpts.tabSize ? nls.localize('configuredTabSize', \"Configured Tab Size\") : undefined\n        }));\n        // auto focus the tabSize set for the current editor\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n        setTimeout(() => {\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\n                if (pick) {\n                    if (model && !model.isDisposed()) {\n                        model.updateOptions({\n                            tabSize: parseInt(pick.label, 10),\n                            insertSpaces: this.insertSpaces\n                        });\n                    }\n                }\n            });\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\n    }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n    constructor() {\n        super(false, {\n            id: IndentUsingTabs.ID,\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n            alias: 'Indent Using Tabs',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingTabs.ID = 'editor.action.indentUsingTabs';\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    constructor() {\n        super(true, {\n            id: IndentUsingSpaces.ID,\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n            alias: 'Indent Using Spaces',\n            precondition: undefined\n        });\n    }\n}\nIndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\nexport class DetectIndentation extends EditorAction {\n    constructor() {\n        super({\n            id: DetectIndentation.ID,\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n            alias: 'Detect Indentation from Content',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n}\nDetectIndentation.ID = 'editor.action.detectIndentation';\nexport class ReindentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentlines',\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n            alias: 'Reindent Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentselectedlines',\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n            alias: 'Reindent Selected Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const edits = [];\n        for (const selection of selections) {\n            let startLineNumber = selection.startLineNumber;\n            let endLineNumber = selection.endLineNumber;\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n                endLineNumber--;\n            }\n            if (startLineNumber === 1) {\n                if (startLineNumber === endLineNumber) {\n                    continue;\n                }\n            }\n            else {\n                startLineNumber--;\n            }\n            const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n            edits.push(...editOperations);\n        }\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class AutoIndentOnPasteCommand {\n    constructor(edits, initialSelection) {\n        this._initialSelection = initialSelection;\n        this._edits = [];\n        this._selectionId = null;\n        for (const edit of edits) {\n            if (edit.range && typeof edit.text === 'string') {\n                this._edits.push(edit);\n            }\n        }\n    }\n    getEditOperations(model, builder) {\n        for (const edit of this._edits) {\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\n        }\n        let selectionIsSet = false;\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\n            }\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\n            }\n        }\n        if (!selectionIsSet) {\n            this._selectionId = builder.trackSelection(this._initialSelection);\n        }\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\n    constructor(editor, _languageConfigurationService) {\n        this.editor = editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.callOnDispose = new DisposableStore();\n        this.callOnModel = new DisposableStore();\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n    }\n    update() {\n        // clean up\n        this.callOnModel.clear();\n        // we are disabled\n        if (this.editor.getOption(9 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(50 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\n            this.trigger(range);\n        }));\n    }\n    trigger(range) {\n        const selections = this.editor.getSelections();\n        if (selections === null || selections.length > 1) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n            return;\n        }\n        const autoIndent = this.editor.getOption(9 /* EditorOption.autoIndent */);\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const textEdits = [];\n        const indentConverter = {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n        let startLineNumber = range.startLineNumber;\n        while (startLineNumber <= range.endLineNumber) {\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber > range.endLineNumber) {\n            return;\n        }\n        let firstLineText = model.getLineContent(startLineNumber);\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n            const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfFirstLine !== null) {\n                const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n                const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                if (newSpaceCnt !== oldSpaceCnt) {\n                    const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                    textEdits.push({\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n                        text: newIndent\n                    });\n                    firstLineText = newIndent + firstLineText.substr(oldIndentation.length);\n                }\n                else {\n                    const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n                    if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n                        // we paste content into a line where only contains whitespaces\n                        // after pasting, the indentation of the first line is already correct\n                        // the first line doesn't match any indentation rule\n                        // then no-op.\n                        return;\n                    }\n                }\n            }\n        }\n        const firstLineNumber = startLineNumber;\n        // ignore empty or ignored lines\n        while (startLineNumber < range.endLineNumber) {\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber !== range.endLineNumber) {\n            const virtualModel = {\n                tokenization: {\n                    getLineTokens: (lineNumber) => {\n                        return model.tokenization.getLineTokens(lineNumber);\n                    },\n                    getLanguageId: () => {\n                        return model.getLanguageId();\n                    },\n                    getLanguageIdAtPosition: (lineNumber, column) => {\n                        return model.getLanguageIdAtPosition(lineNumber, column);\n                    },\n                },\n                getLineContent: (lineNumber) => {\n                    if (lineNumber === firstLineNumber) {\n                        return firstLineText;\n                    }\n                    else {\n                        return model.getLineContent(lineNumber);\n                    }\n                }\n            };\n            const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n            if (indentOfSecondLine !== null) {\n                const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n                const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n                    const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n                        const lineContent = model.getLineContent(i);\n                        const originalIndent = strings.getLeadingWhitespace(lineContent);\n                        const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n                        const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n                        const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n                        if (newIndent !== originalIndent) {\n                            textEdits.push({\n                                range: new Range(i, 1, i, originalIndent.length + 1),\n                                text: newIndent\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if (textEdits.length > 0) {\n            this.editor.pushUndoStop();\n            const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\n            this.editor.pushUndoStop();\n        }\n    }\n    shouldIgnoreLine(model, lineNumber) {\n        model.tokenization.forceTokenization(lineNumber);\n        const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (nonWhitespaceColumn === 0) {\n            return true;\n        }\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        if (tokens.getCount() > 0) {\n            const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        this.callOnDispose.dispose();\n        this.callOnModel.dispose();\n    }\n};\nAutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste';\nAutoIndentOnPaste = __decorate([\n    __param(1, ILanguageConfigurationService)\n], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return;\n    }\n    let spaces = '';\n    for (let i = 0; i < tabSize; i++) {\n        spaces += ' ';\n    }\n    const spacesRegExp = new RegExp(spaces, 'gi');\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (lastIndentationColumn === 0) {\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n        }\n        if (lastIndentationColumn === 1) {\n            continue;\n        }\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\n        const newIndentation = (tabsToSpaces\n            ? originalIndentation.replace(/\\t/ig, spaces)\n            : originalIndentation.replace(spacesRegExp, '\\t'));\n        builder.addEditOperation(originalIndentationRange, newIndentation);\n    }\n}\nexport class IndentationToSpacesCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, true);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nexport class IndentationToTabsCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, false);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nexport class InlayHintAnchor {\n    constructor(range, direction) {\n        this.range = range;\n        this.direction = direction;\n    }\n}\nexport class InlayHintItem {\n    constructor(hint, anchor, provider) {\n        this.hint = hint;\n        this.anchor = anchor;\n        this.provider = provider;\n        this._isResolved = false;\n    }\n    with(delta) {\n        const result = new InlayHintItem(this.hint, delta.anchor, this.provider);\n        result._isResolved = this._isResolved;\n        result._currentResolve = this._currentResolve;\n        return result;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.provider.resolveInlayHint !== 'function') {\n                return;\n            }\n            if (this._currentResolve) {\n                // wait for an active resolve operation and try again\n                // when that's done.\n                yield this._currentResolve;\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                return this.resolve(token);\n            }\n            if (!this._isResolved) {\n                this._currentResolve = this._doResolve(token)\n                    .finally(() => this._currentResolve = undefined);\n            }\n            yield this._currentResolve;\n        });\n    }\n    _doResolve(token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const newHint = yield Promise.resolve(this.provider.resolveInlayHint(this.hint, token));\n                this.hint.tooltip = (_a = newHint === null || newHint === void 0 ? void 0 : newHint.tooltip) !== null && _a !== void 0 ? _a : this.hint.tooltip;\n                this.hint.label = (_b = newHint === null || newHint === void 0 ? void 0 : newHint.label) !== null && _b !== void 0 ? _b : this.hint.label;\n                this._isResolved = true;\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                this._isResolved = false;\n            }\n        });\n    }\n}\nexport class InlayHintsFragments {\n    constructor(ranges, data, model) {\n        this._disposables = new DisposableStore();\n        this.ranges = ranges;\n        this.provider = new Set();\n        const items = [];\n        for (const [list, provider] of data) {\n            this._disposables.add(list);\n            this.provider.add(provider);\n            for (const hint of list.hints) {\n                // compute the range to which the item should be attached to\n                const position = model.validatePosition(hint.position);\n                let direction = 'before';\n                const wordRange = InlayHintsFragments._getRangeAtPosition(model, position);\n                let range;\n                if (wordRange.getStartPosition().isBefore(position)) {\n                    range = Range.fromPositions(wordRange.getStartPosition(), position);\n                    direction = 'after';\n                }\n                else {\n                    range = Range.fromPositions(position, wordRange.getEndPosition());\n                    direction = 'before';\n                }\n                items.push(new InlayHintItem(hint, new InlayHintAnchor(range, direction), provider));\n            }\n        }\n        this.items = items.sort((a, b) => Position.compare(a.hint.position, b.hint.position));\n    }\n    static create(registry, model, ranges, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const data = [];\n            const promises = registry.ordered(model).reverse().map(provider => ranges.map((range) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const result = yield provider.provideInlayHints(model, range, token);\n                    if (result === null || result === void 0 ? void 0 : result.hints.length) {\n                        data.push([result, provider]);\n                    }\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            yield Promise.all(promises.flat());\n            if (token.isCancellationRequested || model.isDisposed()) {\n                throw new CancellationError();\n            }\n            return new InlayHintsFragments(ranges, data, model);\n        });\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    static _getRangeAtPosition(model, position) {\n        const line = position.lineNumber;\n        const word = model.getWordAtPosition(position);\n        if (word) {\n            // always prefer the word range\n            return new Range(line, word.startColumn, line, word.endColumn);\n        }\n        model.tokenization.tokenizeIfCheap(line);\n        const tokens = model.tokenization.getLineTokens(line);\n        const offset = position.column - 1;\n        const idx = tokens.findTokenIndexAtOffset(offset);\n        let start = tokens.getStartOffset(idx);\n        let end = tokens.getEndOffset(idx);\n        if (end - start === 1) {\n            // single character token, when at its end try leading/trailing token instead\n            if (start === offset && idx > 1) {\n                // leading token\n                start = tokens.getStartOffset(idx - 1);\n                end = tokens.getEndOffset(idx - 1);\n            }\n            else if (end === offset && idx < tokens.getCount() - 1) {\n                // trailing token\n                start = tokens.getStartOffset(idx + 1);\n                end = tokens.getEndOffset(idx + 1);\n            }\n        }\n        return new Range(line, start + 1, line, end + 1);\n    }\n}\nexport function asCommandLink(command) {\n    return URI.from({\n        scheme: Schemas.command,\n        path: command.id,\n        query: command.arguments && encodeURIComponent(JSON.stringify(command.arguments))\n    }).toString();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { EditorExtensionsRegistry } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { DefinitionAction, SymbolNavigationAction, SymbolNavigationAnchor } from '../../gotoSymbol/browser/goToCommands.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nexport function showGoToContextMenu(accessor, editor, anchor, part) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const contextMenuService = accessor.get(IContextMenuService);\n        const commandService = accessor.get(ICommandService);\n        const instaService = accessor.get(IInstantiationService);\n        const notificationService = accessor.get(INotificationService);\n        yield part.item.resolve(CancellationToken.None);\n        if (!part.part.location) {\n            return;\n        }\n        const location = part.part.location;\n        const menuActions = [];\n        // from all registered (not active) context menu actions select those\n        // that are a symbol navigation action\n        const filter = new Set(MenuRegistry.getMenuItems(MenuId.EditorContext)\n            .map(item => isIMenuItem(item) ? item.command.id : ''));\n        for (const delegate of EditorExtensionsRegistry.getEditorActions()) {\n            if (delegate instanceof SymbolNavigationAction && filter.has(delegate.id)) {\n                menuActions.push(new Action(delegate.id, delegate.label, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                    const ref = yield resolverService.createModelReference(location.uri);\n                    try {\n                        yield instaService.invokeFunction(delegate.run.bind(delegate), editor, new SymbolNavigationAnchor(ref.object.textEditorModel, Range.getStartPosition(location.range)));\n                    }\n                    finally {\n                        ref.dispose();\n                    }\n                })));\n            }\n        }\n        if (part.part.command) {\n            const { command } = part.part;\n            menuActions.push(new Separator());\n            menuActions.push(new Action(command.id, command.title, undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                var _b;\n                try {\n                    yield commandService.executeCommand(command.id, ...((_b = command.arguments) !== null && _b !== void 0 ? _b : []));\n                }\n                catch (err) {\n                    notificationService.notify({\n                        severity: Severity.Error,\n                        source: part.item.provider.displayName,\n                        message: err\n                    });\n                }\n            })));\n        }\n        // show context menu\n        const useShadowDOM = editor.getOption(117 /* EditorOption.useShadowDOM */);\n        contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? (_a = editor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n            getAnchor: () => {\n                const box = dom.getDomNodePagePosition(anchor);\n                return { x: box.left, y: box.top + box.height + 8 };\n            },\n            getActions: () => menuActions,\n            onHide: () => {\n                editor.focus();\n            },\n            autoSelectFirstItem: true,\n        });\n    });\n}\nexport function goToDefinitionWithLocation(accessor, event, editor, location) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const resolverService = accessor.get(ITextModelService);\n        const ref = yield resolverService.createModelReference(location.uri);\n        yield editor.invokeWithinContext((accessor) => __awaiter(this, void 0, void 0, function* () {\n            const openToSide = event.hasSideBySideModifier;\n            const contextKeyService = accessor.get(IContextKeyService);\n            const isInPeek = PeekContext.inPeekEditor.getValue(contextKeyService);\n            const canPeek = !openToSide && editor.getOption(80 /* EditorOption.definitionLinkOpensInPeek */) && !isInPeek;\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\n            return action.run(accessor, editor, { model: ref.object.textEditorModel, position: Range.getStartPosition(location.range) });\n        }));\n        ref.dispose();\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ModifierKeyEmitter } from '../../../../base/browser/dom.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as languages from '../../../common/languages.js';\nimport { InjectedTextCursorStops } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { InlayHintAnchor, InlayHintsFragments } from './inlayHints.js';\nimport { goToDefinitionWithLocation, showGoToContextMenu } from './inlayHintsLocations.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as colors from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n// --- hint caching service (per session)\nclass InlayHintsCache {\n    constructor() {\n        this._entries = new LRUCache(50);\n    }\n    get(model) {\n        const key = InlayHintsCache._key(model);\n        return this._entries.get(key);\n    }\n    set(model, value) {\n        const key = InlayHintsCache._key(model);\n        this._entries.set(key, value);\n    }\n    static _key(model) {\n        return `${model.uri.toString()}/${model.getVersionId()}`;\n    }\n}\nconst IInlayHintsCache = createDecorator('IInlayHintsCache');\nregisterSingleton(IInlayHintsCache, InlayHintsCache, true);\n// --- rendered label\nexport class RenderedInlayHintLabelPart {\n    constructor(item, index) {\n        this.item = item;\n        this.index = index;\n    }\n    get part() {\n        const label = this.item.hint.label;\n        if (typeof label === 'string') {\n            return { label };\n        }\n        else {\n            return label[this.index];\n        }\n    }\n}\nclass ActiveInlayHintInfo {\n    constructor(part, hasTriggerModifier) {\n        this.part = part;\n        this.hasTriggerModifier = hasTriggerModifier;\n    }\n}\n// --- controller\nlet InlayHintsController = class InlayHintsController {\n    constructor(_editor, _languageFeaturesService, _featureDebounce, _inlayHintsCache, _commandService, _notificationService, _instaService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._inlayHintsCache = _inlayHintsCache;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._instaService = _instaService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._decorationsMetadata = new Map();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._activeRenderMode = 0 /* RenderMode.Normal */;\n        this._debounceInfo = _featureDebounce.for(_languageFeaturesService.inlayHintsProvider, 'InlayHint', { min: 25 });\n        this._disposables.add(_languageFeaturesService.inlayHintsProvider.onDidChange(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(129 /* EditorOption.inlayHints */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    static get(editor) {\n        var _a;\n        return (_a = editor.getContribution(InlayHintsController.ID)) !== null && _a !== void 0 ? _a : undefined;\n    }\n    dispose() {\n        this._sessionDisposables.dispose();\n        this._removeAllDecorations();\n        this._disposables.dispose();\n    }\n    _update() {\n        this._sessionDisposables.clear();\n        this._removeAllDecorations();\n        const options = this._editor.getOption(129 /* EditorOption.inlayHints */);\n        if (options.enabled === 'off') {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.inlayHintsProvider.has(model)) {\n            return;\n        }\n        // iff possible, quickly update from cache\n        const cached = this._inlayHintsCache.get(model);\n        if (cached) {\n            this._updateHintsDecorators([model.getFullModelRange()], cached);\n        }\n        this._sessionDisposables.add(toDisposable(() => {\n            // cache items when switching files etc\n            if (!model.isDisposed()) {\n                this._cacheHintsForFastRestore(model);\n            }\n        }));\n        let cts;\n        const watchedProviders = new Set();\n        const scheduler = new RunOnceScheduler(() => __awaiter(this, void 0, void 0, function* () {\n            const t1 = Date.now();\n            cts === null || cts === void 0 ? void 0 : cts.dispose(true);\n            cts = new CancellationTokenSource();\n            const listener = model.onWillDispose(() => cts === null || cts === void 0 ? void 0 : cts.cancel());\n            try {\n                const myToken = cts.token;\n                const inlayHints = yield InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider, model, this._getHintsRanges(), myToken);\n                scheduler.delay = this._debounceInfo.update(model, Date.now() - t1);\n                if (myToken.isCancellationRequested) {\n                    inlayHints.dispose();\n                    return;\n                }\n                // listen to provider changes\n                for (const provider of inlayHints.provider) {\n                    if (typeof provider.onDidChangeInlayHints === 'function' && !watchedProviders.has(provider)) {\n                        watchedProviders.add(provider);\n                        this._sessionDisposables.add(provider.onDidChangeInlayHints(() => {\n                            if (!scheduler.isScheduled()) { // ignore event when request is already scheduled\n                                scheduler.schedule();\n                            }\n                        }));\n                    }\n                }\n                this._sessionDisposables.add(inlayHints);\n                this._updateHintsDecorators(inlayHints.ranges, inlayHints.items);\n                this._cacheHintsForFastRestore(model);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                cts.dispose();\n                listener.dispose();\n            }\n        }), this._debounceInfo.get(model));\n        this._sessionDisposables.add(scheduler);\n        this._sessionDisposables.add(toDisposable(() => cts === null || cts === void 0 ? void 0 : cts.dispose(true)));\n        scheduler.schedule(0);\n        this._sessionDisposables.add(this._editor.onDidScrollChange((e) => {\n            // update when scroll position changes\n            // uses scrollTopChanged has weak heuristic to differenatiate between scrolling due to\n            // typing or due to \"actual\" scrolling\n            if (e.scrollTopChanged || !scheduler.isScheduled()) {\n                scheduler.schedule();\n            }\n        }));\n        this._sessionDisposables.add(this._editor.onDidChangeModelContent((e) => {\n            // update less aggressive when typing\n            const delay = Math.max(scheduler.delay, 1250);\n            scheduler.schedule(delay);\n        }));\n        if (options.enabled === 'on') {\n            // different \"on\" modes: always\n            this._activeRenderMode = 0 /* RenderMode.Normal */;\n        }\n        else {\n            // different \"on\" modes: offUnlessPressed, or onUnlessPressed\n            let defaultMode;\n            let altMode;\n            if (options.enabled === 'onUnlessPressed') {\n                defaultMode = 0 /* RenderMode.Normal */;\n                altMode = 1 /* RenderMode.Invisible */;\n            }\n            else {\n                defaultMode = 1 /* RenderMode.Invisible */;\n                altMode = 0 /* RenderMode.Normal */;\n            }\n            this._activeRenderMode = defaultMode;\n            this._sessionDisposables.add(ModifierKeyEmitter.getInstance().event(e => {\n                if (!this._editor.hasModel()) {\n                    return;\n                }\n                const newRenderMode = e.altKey && e.ctrlKey ? altMode : defaultMode;\n                if (newRenderMode !== this._activeRenderMode) {\n                    this._activeRenderMode = newRenderMode;\n                    const model = this._editor.getModel();\n                    const copies = this._copyInlayHintsWithCurrentAnchor(model);\n                    this._updateHintsDecorators([model.getFullModelRange()], copies);\n                    scheduler.schedule(0);\n                }\n            }));\n        }\n        // mouse gestures\n        this._sessionDisposables.add(this._installDblClickGesture(() => scheduler.schedule(0)));\n        this._sessionDisposables.add(this._installLinkGesture());\n        this._sessionDisposables.add(this._installContextMenu());\n    }\n    _installLinkGesture() {\n        const store = new DisposableStore();\n        const gesture = store.add(new ClickLinkGesture(this._editor));\n        // let removeHighlight = () => { };\n        const sessionStore = new DisposableStore();\n        store.add(sessionStore);\n        store.add(gesture.onMouseMoveOrRelevantKeyDown(e => {\n            const [mouseEvent] = e;\n            const labelPart = this._getInlayHintLabelPart(mouseEvent);\n            const model = this._editor.getModel();\n            if (!labelPart || !model) {\n                sessionStore.clear();\n                return;\n            }\n            // resolve the item\n            const cts = new CancellationTokenSource();\n            sessionStore.add(toDisposable(() => cts.dispose(true)));\n            labelPart.item.resolve(cts.token);\n            // render link => when the modifier is pressed and when there is a command or location\n            this._activeInlayHintPart = labelPart.part.command || labelPart.part.location\n                ? new ActiveInlayHintInfo(labelPart, mouseEvent.hasTriggerModifier)\n                : undefined;\n            const lineNumber = labelPart.item.hint.position.lineNumber;\n            const range = new Range(lineNumber, 1, lineNumber, model.getLineMaxColumn(lineNumber));\n            const lineHints = this._getInlineHintsForRange(range);\n            this._updateHintsDecorators([range], lineHints);\n            sessionStore.add(toDisposable(() => {\n                this._activeInlayHintPart = undefined;\n                this._updateHintsDecorators([range], lineHints);\n            }));\n        }));\n        store.add(gesture.onCancel(() => sessionStore.clear()));\n        store.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            const label = this._getInlayHintLabelPart(e);\n            if (label) {\n                const part = label.part;\n                if (part.location) {\n                    // location -> execute go to def\n                    this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, part.location);\n                }\n                else if (languages.Command.is(part.command)) {\n                    // command -> execute it\n                    yield this._invokeCommand(part.command, label.item);\n                }\n            }\n        })));\n        return store;\n    }\n    _getInlineHintsForRange(range) {\n        const lineHints = new Set();\n        for (const data of this._decorationsMetadata.values()) {\n            if (range.containsRange(data.item.anchor.range)) {\n                lineHints.add(data.item);\n            }\n        }\n        return Array.from(lineHints);\n    }\n    _installDblClickGesture(updateInlayHints) {\n        return this._editor.onMouseUp((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.event.detail !== 2) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (!part) {\n                return;\n            }\n            e.event.preventDefault();\n            yield part.item.resolve(CancellationToken.None);\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                const edits = part.item.hint.textEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text));\n                this._editor.executeEdits('inlayHint.default', edits);\n                updateInlayHints();\n            }\n        }));\n    }\n    _installContextMenu() {\n        return this._editor.onContextMenu((e) => __awaiter(this, void 0, void 0, function* () {\n            if (!(e.event.target instanceof HTMLElement)) {\n                return;\n            }\n            const part = this._getInlayHintLabelPart(e);\n            if (part) {\n                yield this._instaService.invokeFunction(showGoToContextMenu, this._editor, e.event.target, part);\n            }\n        }));\n    }\n    _getInlayHintLabelPart(e) {\n        var _a;\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return undefined;\n        }\n        const options = (_a = e.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (options instanceof ModelDecorationInjectedTextOptions && (options === null || options === void 0 ? void 0 : options.attachedData) instanceof RenderedInlayHintLabelPart) {\n            return options.attachedData;\n        }\n        return undefined;\n    }\n    _invokeCommand(command, item) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : []));\n            }\n            catch (err) {\n                this._notificationService.notify({\n                    severity: Severity.Error,\n                    source: item.provider.displayName,\n                    message: err\n                });\n            }\n        });\n    }\n    _cacheHintsForFastRestore(model) {\n        const hints = this._copyInlayHintsWithCurrentAnchor(model);\n        this._inlayHintsCache.set(model, hints);\n    }\n    // return inlay hints but with an anchor that reflects \"updates\"\n    // that happened after receiving them, e.g adding new lines before a hint\n    _copyInlayHintsWithCurrentAnchor(model) {\n        const items = new Map();\n        for (const [id, obj] of this._decorationsMetadata) {\n            if (items.has(obj.item)) {\n                // an inlay item can be rendered as multiple decorations\n                // but they will all uses the same range\n                continue;\n            }\n            const range = model.getDecorationRange(id);\n            if (range) {\n                // update range with whatever the editor has tweaked it to\n                const anchor = new InlayHintAnchor(range, obj.item.anchor.direction);\n                const copy = obj.item.with({ anchor });\n                items.set(obj.item, copy);\n            }\n        }\n        return Array.from(items.values());\n    }\n    _getHintsRanges() {\n        const extra = 30;\n        const model = this._editor.getModel();\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        const result = [];\n        for (const range of visibleRanges.sort(Range.compareRangesUsingStarts)) {\n            const extendedRange = model.validateRange(new Range(range.startLineNumber - extra, range.startColumn, range.endLineNumber + extra, range.endColumn));\n            if (result.length === 0 || !Range.areIntersectingOrTouching(result[result.length - 1], extendedRange)) {\n                result.push(extendedRange);\n            }\n            else {\n                result[result.length - 1] = Range.plusRange(result[result.length - 1], extendedRange);\n            }\n        }\n        return result;\n    }\n    _updateHintsDecorators(ranges, items) {\n        var _a, _b;\n        // utils to collect/create injected text decorations\n        const newDecorationsData = [];\n        const addInjectedText = (item, ref, content, cursorStops, attachedData) => {\n            const opts = {\n                content,\n                inlineClassNameAffectsLetterSpacing: true,\n                inlineClassName: ref.className,\n                cursorStops,\n                attachedData\n            };\n            newDecorationsData.push({\n                item,\n                classNameRef: ref,\n                decoration: {\n                    range: item.anchor.range,\n                    options: {\n                        // className: \"rangeHighlight\", // DEBUG highlight to see to what range a hint is attached\n                        description: 'InlayHint',\n                        showIfCollapsed: item.anchor.range.isEmpty(),\n                        collapseOnReplaceEdit: !item.anchor.range.isEmpty(),\n                        stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n                        [item.anchor.direction]: this._activeRenderMode === 0 /* RenderMode.Normal */ ? opts : undefined\n                    }\n                }\n            });\n        };\n        const addInjectedWhitespace = (item, isLast) => {\n            const marginRule = this._ruleFactory.createClassNameRef({\n                width: `${(fontSize / 3) | 0}px`,\n                display: 'inline-block'\n            });\n            addInjectedText(item, marginRule, '\\u200a', isLast ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None);\n        };\n        //\n        const { fontSize, fontFamily, padding, isUniform } = this._getLayoutInfo();\n        const fontFamilyVar = '--code-editorInlayHintsFontFamily';\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily);\n        for (const item of items) {\n            // whitespace leading the actual label\n            if (item.hint.paddingLeft) {\n                addInjectedWhitespace(item, false);\n            }\n            // the label with its parts\n            const parts = typeof item.hint.label === 'string'\n                ? [{ label: item.hint.label }]\n                : item.hint.label;\n            for (let i = 0; i < parts.length; i++) {\n                const part = parts[i];\n                const isFirst = i === 0;\n                const isLast = i === parts.length - 1;\n                const cssProperties = {\n                    fontSize: `${fontSize}px`,\n                    fontFamily: `var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}`,\n                    verticalAlign: isUniform ? 'baseline' : 'middle',\n                };\n                if (isNonEmptyArray(item.hint.textEdits)) {\n                    cssProperties.cursor = 'default';\n                }\n                this._fillInColors(cssProperties, item.hint);\n                if ((part.command || part.location) && ((_a = this._activeInlayHintPart) === null || _a === void 0 ? void 0 : _a.part.item) === item && this._activeInlayHintPart.part.index === i) {\n                    // active link!\n                    cssProperties.textDecoration = 'underline';\n                    if (this._activeInlayHintPart.hasTriggerModifier) {\n                        cssProperties.color = themeColorFromId(colors.editorActiveLinkForeground);\n                        cssProperties.cursor = 'pointer';\n                    }\n                }\n                if (padding) {\n                    if (isFirst && isLast) {\n                        // only element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isFirst) {\n                        // first element\n                        cssProperties.padding = `1px 0 1px ${Math.max(1, fontSize / 4) | 0}px`;\n                        cssProperties.borderRadius = `${(fontSize / 4) | 0}px 0 0 ${(fontSize / 4) | 0}px`;\n                    }\n                    else if (isLast) {\n                        // last element\n                        cssProperties.padding = `1px ${Math.max(1, fontSize / 4) | 0}px 1px 0`;\n                        cssProperties.borderRadius = `0 ${(fontSize / 4) | 0}px ${(fontSize / 4) | 0}px 0`;\n                    }\n                    else {\n                        cssProperties.padding = `1px 0 1px 0`;\n                    }\n                }\n                addInjectedText(item, this._ruleFactory.createClassNameRef(cssProperties), fixSpace(part.label), isLast && !item.hint.paddingRight ? InjectedTextCursorStops.Right : InjectedTextCursorStops.None, new RenderedInlayHintLabelPart(item, i));\n            }\n            // whitespace trailing the actual label\n            if (item.hint.paddingRight) {\n                addInjectedWhitespace(item, true);\n            }\n            if (newDecorationsData.length > InlayHintsController._MAX_DECORATORS) {\n                break;\n            }\n        }\n        // collect all decoration ids that are affected by the ranges\n        // and only update those decorations\n        const decorationIdsToReplace = [];\n        for (const range of ranges) {\n            for (const { id } of (_b = this._editor.getDecorationsInRange(range)) !== null && _b !== void 0 ? _b : []) {\n                const metadata = this._decorationsMetadata.get(id);\n                if (metadata) {\n                    decorationIdsToReplace.push(id);\n                    metadata.classNameRef.dispose();\n                    this._decorationsMetadata.delete(id);\n                }\n            }\n        }\n        this._editor.changeDecorations(accessor => {\n            const newDecorationIds = accessor.deltaDecorations(decorationIdsToReplace, newDecorationsData.map(d => d.decoration));\n            for (let i = 0; i < newDecorationIds.length; i++) {\n                const data = newDecorationsData[i];\n                this._decorationsMetadata.set(newDecorationIds[i], data);\n            }\n        });\n    }\n    _fillInColors(props, hint) {\n        if (hint.kind === languages.InlayHintKind.Parameter) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintParameterBackground);\n            props.color = themeColorFromId(colors.editorInlayHintParameterForeground);\n        }\n        else if (hint.kind === languages.InlayHintKind.Type) {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintTypeBackground);\n            props.color = themeColorFromId(colors.editorInlayHintTypeForeground);\n        }\n        else {\n            props.backgroundColor = themeColorFromId(colors.editorInlayHintBackground);\n            props.color = themeColorFromId(colors.editorInlayHintForeground);\n        }\n    }\n    _getLayoutInfo() {\n        const options = this._editor.getOption(129 /* EditorOption.inlayHints */);\n        const padding = options.padding;\n        const editorFontSize = this._editor.getOption(48 /* EditorOption.fontSize */);\n        const editorFontFamily = this._editor.getOption(45 /* EditorOption.fontFamily */);\n        let fontSize = options.fontSize;\n        if (!fontSize || fontSize < 5 || fontSize > editorFontSize) {\n            fontSize = editorFontSize;\n        }\n        const fontFamily = options.fontFamily || editorFontFamily;\n        const isUniform = !padding\n            && fontFamily === editorFontFamily\n            && fontSize === editorFontSize;\n        return { fontSize, fontFamily, padding, isUniform };\n    }\n    _removeAllDecorations() {\n        this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));\n        for (const obj of this._decorationsMetadata.values()) {\n            obj.classNameRef.dispose();\n        }\n        this._decorationsMetadata.clear();\n    }\n};\nInlayHintsController.ID = 'editor.contrib.InlayHints';\nInlayHintsController._MAX_DECORATORS = 1500;\nInlayHintsController = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, IInlayHintsCache),\n    __param(4, ICommandService),\n    __param(5, INotificationService),\n    __param(6, IInstantiationService)\n], InlayHintsController);\nexport { InlayHintsController };\n// Prevents the view from potentially visible whitespace\nfunction fixSpace(str) {\n    const noBreakWhitespace = '\\xa0';\n    return str.replace(/[ \\t]/g, noBreakWhitespace);\n}\nCommandsRegistry.registerCommand('_executeInlayHintProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(URI.isUri(uri));\n    assertType(Range.isIRange(range));\n    const { inlayHintsProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const model = yield InlayHintsFragments.create(inlayHintsProvider, ref.object.textEditorModel, [Range.lift(range)], CancellationToken.None);\n        const result = model.items.map(i => i.hint);\n        setTimeout(() => model.dispose(), 0); // dispose after sending to ext host\n        return result;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { isEmptyMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { HoverForeignElementAnchor } from '../../hover/browser/hoverTypes.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { getHover } from '../../hover/browser/getHover.js';\nimport { MarkdownHover, MarkdownHoverParticipant } from '../../hover/browser/markdownHoverParticipant.js';\nimport { RenderedInlayHintLabelPart, InlayHintsController } from './inlayHintsController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { asCommandLink } from './inlayHints.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nclass InlayHintsHoverAnchor extends HoverForeignElementAnchor {\n    constructor(part, owner) {\n        super(10, owner, part.item.anchor.range);\n        this.part = part;\n    }\n}\nlet InlayHintsHover = class InlayHintsHover extends MarkdownHoverParticipant {\n    constructor(editor, languageService, openerService, configurationService, _resolverService, languageFeaturesService) {\n        super(editor, languageService, openerService, configurationService, languageFeaturesService);\n        this._resolverService = _resolverService;\n        this.hoverOrdinal = 6;\n    }\n    suggestHoverAnchor(mouseEvent) {\n        var _a;\n        const controller = InlayHintsController.get(this._editor);\n        if (!controller) {\n            return null;\n        }\n        if (mouseEvent.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return null;\n        }\n        const options = (_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options;\n        if (!(options instanceof ModelDecorationInjectedTextOptions && options.attachedData instanceof RenderedInlayHintLabelPart)) {\n            return null;\n        }\n        return new InlayHintsHoverAnchor(options.attachedData, this);\n    }\n    computeSync() {\n        return [];\n    }\n    computeAsync(anchor, _lineDecorations, token) {\n        if (!(anchor instanceof InlayHintsHoverAnchor)) {\n            return AsyncIterableObject.EMPTY;\n        }\n        return new AsyncIterableObject((executor) => __awaiter(this, void 0, void 0, function* () {\n            var e_1, _a;\n            const { part } = anchor;\n            yield part.item.resolve(token);\n            if (token.isCancellationRequested) {\n                return;\n            }\n            // (1) Inlay Tooltip\n            let itemTooltip;\n            if (typeof part.item.hint.tooltip === 'string') {\n                itemTooltip = new MarkdownString().appendText(part.item.hint.tooltip);\n            }\n            else if (part.item.hint.tooltip) {\n                itemTooltip = part.item.hint.tooltip;\n            }\n            if (itemTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [itemTooltip], 0));\n            }\n            // (1.2) Inlay dbl-click gesture\n            if (isNonEmptyArray(part.item.hint.textEdits)) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [new MarkdownString().appendText(localize('hint.dbl', \"Double click to insert\"))], 10001));\n            }\n            // (2) Inlay Label Part Tooltip\n            let partTooltip;\n            if (typeof part.part.tooltip === 'string') {\n                partTooltip = new MarkdownString().appendText(part.part.tooltip);\n            }\n            else if (part.part.tooltip) {\n                partTooltip = part.part.tooltip;\n            }\n            if (partTooltip) {\n                executor.emitOne(new MarkdownHover(this, anchor.range, [partTooltip], 1));\n            }\n            // (2.2) Inlay Label Part Help Hover\n            if (part.part.location || part.part.command) {\n                let linkHint;\n                const useMetaKey = this._editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey';\n                const kb = useMetaKey\n                    ? platform.isMacintosh\n                        ? localize('links.navigate.kb.meta.mac', \"cmd + click\")\n                        : localize('links.navigate.kb.meta', \"ctrl + click\")\n                    : platform.isMacintosh\n                        ? localize('links.navigate.kb.alt.mac', \"option + click\")\n                        : localize('links.navigate.kb.alt', \"alt + click\");\n                if (part.part.location && part.part.command) {\n                    linkHint = new MarkdownString().appendText(localize('hint.defAndCommand', 'Go to Definition ({0}), right click for more', kb));\n                }\n                else if (part.part.location) {\n                    linkHint = new MarkdownString().appendText(localize('hint.def', 'Go to Definition ({0})', kb));\n                }\n                else if (part.part.command) {\n                    linkHint = new MarkdownString(`[${localize('hint.cmd', \"Execute Command\")}](${asCommandLink(part.part.command)} \"${part.part.command.title}\") (${kb})`, { isTrusted: true });\n                }\n                if (linkHint) {\n                    executor.emitOne(new MarkdownHover(this, anchor.range, [linkHint], 10000));\n                }\n            }\n            // (3) Inlay Label Part Location tooltip\n            const iterable = yield this._resolveInlayHintLabelPartHover(part, token);\n            try {\n                for (var iterable_1 = __asyncValues(iterable), iterable_1_1; iterable_1_1 = yield iterable_1.next(), !iterable_1_1.done;) {\n                    const item = iterable_1_1.value;\n                    executor.emitOne(item);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) yield _a.call(iterable_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }));\n    }\n    _resolveInlayHintLabelPartHover(part, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!part.part.location) {\n                return AsyncIterableObject.EMPTY;\n            }\n            const { uri, range } = part.part.location;\n            const ref = yield this._resolverService.createModelReference(uri);\n            try {\n                const model = ref.object.textEditorModel;\n                if (!this._languageFeaturesService.hoverProvider.has(model)) {\n                    return AsyncIterableObject.EMPTY;\n                }\n                return getHover(this._languageFeaturesService.hoverProvider, model, new Position(range.startLineNumber, range.startColumn), token)\n                    .filter(item => !isEmptyMarkdownString(item.hover.contents))\n                    .map(item => new MarkdownHover(this, part.item.anchor.range, item.hover.contents, 2 + item.ordinal));\n            }\n            finally {\n                ref.dispose();\n            }\n        });\n    }\n};\nInlayHintsHover = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService),\n    __param(3, IConfigurationService),\n    __param(4, ITextModelService),\n    __param(5, ILanguageFeaturesService)\n], InlayHintsHover);\nexport { InlayHintsHover };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { InlayHintsController } from './inlayHintsController.js';\nimport { InlayHintsHover } from './inlayHintsHover.js';\nregisterEditorContribution(InlayHintsController.ID, InlayHintsController);\nHoverParticipantRegistry.register(InlayHintsHover);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../../../common/core/selection.js';\nexport class InPlaceReplaceCommand {\n    constructor(editRange, originalSelection, text) {\n        this._editRange = editRange;\n        this._originalSelection = originalSelection;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._editRange, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        if (!this._originalSelection.isEmpty()) {\n            // Preserve selection and extends to typed text\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn - this._text.length, srcRange.endLineNumber, srcRange.endColumn);\n        }\n        return new Selection(srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn), srcRange.endLineNumber, Math.min(this._originalSelection.positionColumn, srcRange.endColumn));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, timeout } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { EditorState } from '../../editorState/browser/editorState.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InPlaceReplaceCommand } from './inPlaceReplaceCommand.js';\nlet InPlaceReplaceController = class InPlaceReplaceController {\n    constructor(editor, editorWorkerService) {\n        this.editor = editor;\n        this.editorWorkerService = editorWorkerService;\n        this.decorations = this.editor.createDecorationsCollection();\n    }\n    static get(editor) {\n        return editor.getContribution(InPlaceReplaceController.ID);\n    }\n    dispose() {\n    }\n    run(source, up) {\n        // cancel any pending request\n        if (this.currentRequest) {\n            this.currentRequest.cancel();\n        }\n        const editorSelection = this.editor.getSelection();\n        const model = this.editor.getModel();\n        if (!model || !editorSelection) {\n            return undefined;\n        }\n        let selection = editorSelection;\n        if (selection.startLineNumber !== selection.endLineNumber) {\n            // Can't accept multiline selection\n            return undefined;\n        }\n        const state = new EditorState(this.editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const modelURI = model.uri;\n        if (!this.editorWorkerService.canNavigateValueSet(modelURI)) {\n            return Promise.resolve(undefined);\n        }\n        this.currentRequest = createCancelablePromise(token => this.editorWorkerService.navigateValueSet(modelURI, selection, up));\n        return this.currentRequest.then(result => {\n            if (!result || !result.range || !result.value) {\n                // No proper result\n                return;\n            }\n            if (!state.validate(this.editor)) {\n                // state has changed\n                return;\n            }\n            // Selection\n            const editRange = Range.lift(result.range);\n            let highlightRange = result.range;\n            const diff = result.value.length - (selection.endColumn - selection.startColumn);\n            // highlight\n            highlightRange = {\n                startLineNumber: highlightRange.startLineNumber,\n                startColumn: highlightRange.startColumn,\n                endLineNumber: highlightRange.endLineNumber,\n                endColumn: highlightRange.startColumn + result.value.length\n            };\n            if (diff > 1) {\n                selection = new Selection(selection.startLineNumber, selection.startColumn, selection.endLineNumber, selection.endColumn + diff - 1);\n            }\n            // Insert new text\n            const command = new InPlaceReplaceCommand(editRange, selection, result.value);\n            this.editor.pushUndoStop();\n            this.editor.executeCommand(source, command);\n            this.editor.pushUndoStop();\n            // add decoration\n            this.decorations.set([{\n                    range: highlightRange,\n                    options: InPlaceReplaceController.DECORATION\n                }]);\n            // remove decoration after delay\n            if (this.decorationRemover) {\n                this.decorationRemover.cancel();\n            }\n            this.decorationRemover = timeout(350);\n            this.decorationRemover.then(() => this.decorations.clear()).catch(onUnexpectedError);\n        }).catch(onUnexpectedError);\n    }\n};\nInPlaceReplaceController.ID = 'editor.contrib.inPlaceReplaceController';\nInPlaceReplaceController.DECORATION = ModelDecorationOptions.register({\n    description: 'in-place-replace',\n    className: 'valueSetReplacement'\n});\nInPlaceReplaceController = __decorate([\n    __param(1, IEditorWorkerService)\n], InPlaceReplaceController);\nclass InPlaceReplaceUp extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.up',\n            label: nls.localize('InPlaceReplaceAction.previous.label', \"Replace with Previous Value\"),\n            alias: 'Replace with Previous Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 82 /* KeyCode.Comma */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, true);\n    }\n}\nclass InPlaceReplaceDown extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inPlaceReplace.down',\n            label: nls.localize('InPlaceReplaceAction.next.label', \"Replace with Next Value\"),\n            alias: 'Replace with Next Value',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = InPlaceReplaceController.get(editor);\n        if (!controller) {\n            return Promise.resolve(undefined);\n        }\n        return controller.run(this.id, false);\n    }\n}\nregisterEditorContribution(InPlaceReplaceController.ID, InPlaceReplaceController);\nregisterEditorAction(InPlaceReplaceUp);\nregisterEditorAction(InPlaceReplaceDown);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorBracketMatchBorder);\n    if (border) {\n        collector.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${border}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nexport class ExpandLineSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'expandLineSelection',\n            label: nls.localize('expandLineSelection', \"Expand Line Selection\"),\n            alias: 'Expand Line Selection',\n            precondition: undefined,\n            kbOpts: {\n                weight: 0 /* KeybindingWeight.EditorCore */,\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 42 /* KeyCode.KeyL */\n            },\n        });\n    }\n    run(_accessor, editor, args) {\n        args = args || {};\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        viewModel.model.pushStackElement();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.expandLineSelection(viewModel, viewModel.getCursorStates()));\n        viewModel.revealPrimaryCursor(args.source, true);\n    }\n}\nregisterEditorAction(ExpandLineSelectionAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nexport class TrimTrailingWhitespaceCommand {\n    constructor(selection, cursors) {\n        this._selection = selection;\n        this._cursors = cursors;\n        this._selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const ops = trimTrailingWhitespace(model, this._cursors);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            builder.addEditOperation(op.range, op.text);\n        }\n        this._selectionId = builder.trackSelection(this._selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\nexport function trimTrailingWhitespace(model, cursors) {\n    // Sort cursors ascending\n    cursors.sort((a, b) => {\n        if (a.lineNumber === b.lineNumber) {\n            return a.column - b.column;\n        }\n        return a.lineNumber - b.lineNumber;\n    });\n    // Reduce multiple cursors on the same line and only keep the last one on the line\n    for (let i = cursors.length - 2; i >= 0; i--) {\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n            // Remove cursor at `i`\n            cursors.splice(i, 1);\n        }\n    }\n    const r = [];\n    let rLen = 0;\n    let cursorIndex = 0;\n    const cursorLen = cursors.length;\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        const lineContent = model.getLineContent(lineNumber);\n        const maxLineColumn = lineContent.length + 1;\n        let minEditColumn = 0;\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n            minEditColumn = cursors[cursorIndex].column;\n            cursorIndex++;\n            if (minEditColumn === maxLineColumn) {\n                // The cursor is at the end of the line => no edits for sure on this line\n                continue;\n            }\n        }\n        if (lineContent.length === 0) {\n            continue;\n        }\n        const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n        let fromColumn = 0;\n        if (lastNonWhitespaceIndex === -1) {\n            // Entire line is whitespace\n            fromColumn = 1;\n        }\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n            // There is trailing whitespace\n            fromColumn = lastNonWhitespaceIndex + 2;\n        }\n        else {\n            // There is no trailing whitespace\n            continue;\n        }\n        fromColumn = Math.max(minEditColumn, fromColumn);\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n    }\n    return r;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class CopyLinesCommand {\n    constructor(selection, isCopyingDown, noop) {\n        this._selection = selection;\n        this._isCopyingDown = isCopyingDown;\n        this._noop = noop || false;\n        this._selectionDirection = 0 /* SelectionDirection.LTR */;\n        this._selectionId = null;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._startLineNumberDelta = 0;\n        this._endLineNumberDelta = 0;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._endLineNumberDelta = 1;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const sourceLines = [];\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            sourceLines.push(model.getLineContent(i));\n        }\n        const sourceText = sourceLines.join('\\n');\n        if (sourceText === '') {\n            // Duplicating empty line\n            if (this._isCopyingDown) {\n                this._startLineNumberDelta++;\n                this._endLineNumberDelta++;\n            }\n        }\n        if (this._noop) {\n            builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber + 1, 1), s.endLineNumber === model.getLineCount() ? '' : '\\n');\n        }\n        else {\n            if (!this._isCopyingDown) {\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + sourceText);\n            }\n            else {\n                builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), sourceText + '\\n');\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        this._selectionDirection = this._selection.getDirection();\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._startLineNumberDelta !== 0 || this._endLineNumberDelta !== 0) {\n            let startLineNumber = result.startLineNumber;\n            let startColumn = result.startColumn;\n            let endLineNumber = result.endLineNumber;\n            let endColumn = result.endColumn;\n            if (this._startLineNumberDelta !== 0) {\n                startLineNumber = startLineNumber + this._startLineNumberDelta;\n                startColumn = 1;\n            }\n            if (this._endLineNumberDelta !== 0) {\n                endLineNumber = endLineNumber + this._endLineNumberDelta;\n                endColumn = 1;\n            }\n            result = Selection.createWithDirection(startLineNumber, startColumn, endLineNumber, endColumn, this._selectionDirection);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as strings from '../../../../base/common/strings.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IndentAction } from '../../../common/languages/languageConfiguration.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as indentUtils from '../../indentation/browser/indentUtils.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getEnterAction } from '../../../common/languages/enterAction.js';\nlet MoveLinesCommand = class MoveLinesCommand {\n    constructor(selection, isMovingDown, autoIndent, _languageConfigurationService) {\n        this._languageConfigurationService = _languageConfigurationService;\n        this._selection = selection;\n        this._isMovingDown = isMovingDown;\n        this._autoIndent = autoIndent;\n        this._selectionId = null;\n        this._moveEndLineSelectionShrink = false;\n    }\n    getEditOperations(model, builder) {\n        const modelLineCount = model.getLineCount();\n        if (this._isMovingDown && this._selection.endLineNumber === modelLineCount) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        if (!this._isMovingDown && this._selection.startLineNumber === 1) {\n            this._selectionId = builder.trackSelection(this._selection);\n            return;\n        }\n        this._moveEndPositionDown = false;\n        let s = this._selection;\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const indentConverter = this.buildIndentConverter(tabSize, indentSize, insertSpaces);\n        const virtualModel = {\n            tokenization: {\n                getLineTokens: (lineNumber) => {\n                    return model.tokenization.getLineTokens(lineNumber);\n                },\n                getLanguageId: () => {\n                    return model.getLanguageId();\n                },\n                getLanguageIdAtPosition: (lineNumber, column) => {\n                    return model.getLanguageIdAtPosition(lineNumber, column);\n                },\n            },\n            getLineContent: null,\n        };\n        if (s.startLineNumber === s.endLineNumber && model.getLineMaxColumn(s.startLineNumber) === 1) {\n            // Current line is empty\n            const lineNumber = s.startLineNumber;\n            const otherLineNumber = (this._isMovingDown ? lineNumber + 1 : lineNumber - 1);\n            if (model.getLineMaxColumn(otherLineNumber) === 1) {\n                // Other line number is empty too, so no editing is needed\n                // Add a no-op to force running by the model\n                builder.addEditOperation(new Range(1, 1, 1, 1), null);\n            }\n            else {\n                // Type content from other line number on line number\n                builder.addEditOperation(new Range(lineNumber, 1, lineNumber, 1), model.getLineContent(otherLineNumber));\n                // Remove content from other line number\n                builder.addEditOperation(new Range(otherLineNumber, 1, otherLineNumber, model.getLineMaxColumn(otherLineNumber)), null);\n            }\n            // Track selection at the other line number\n            s = new Selection(otherLineNumber, 1, otherLineNumber, 1);\n        }\n        else {\n            let movingLineNumber;\n            let movingLineText;\n            if (this._isMovingDown) {\n                movingLineNumber = s.endLineNumber + 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber - 1, model.getLineMaxColumn(movingLineNumber - 1), movingLineNumber, model.getLineMaxColumn(movingLineNumber)), null);\n                let insertingText = movingLineText;\n                if (this.shouldAutoIndent(model, s)) {\n                    const movingLineMatchResult = this.matchEnterRule(model, indentConverter, tabSize, movingLineNumber, s.startLineNumber - 1);\n                    // if s.startLineNumber - 1 matches onEnter rule, we still honor that.\n                    if (movingLineMatchResult !== null) {\n                        const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                        const newSpaceCnt = movingLineMatchResult + indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                        const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                        insertingText = newIndentation + this.trimLeft(movingLineText);\n                    }\n                    else {\n                        // no enter rule matches, let's check indentatin rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return model.getLineContent(movingLineNumber);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const indentOfMovingLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfMovingLine !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(movingLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfMovingLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const newIndentation = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                                insertingText = newIndentation + this.trimLeft(movingLineText);\n                            }\n                        }\n                    }\n                    // add edit operations for moving line first to make sure it's executed after we make indentation change\n                    // to s.startLineNumber\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                    const ret = this.matchEnterRuleMovingDown(model, indentConverter, tabSize, s.startLineNumber, movingLineNumber, insertingText);\n                    // check if the line being moved before matches onEnter rules, if so let's adjust the indentation by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match onEnter rules, let's check indentation rules then.\n                        virtualModel.getLineContent = (lineNumber) => {\n                            if (lineNumber === s.startLineNumber) {\n                                return insertingText;\n                            }\n                            else if (lineNumber >= s.startLineNumber + 1 && lineNumber <= s.endLineNumber + 1) {\n                                return model.getLineContent(lineNumber - 1);\n                            }\n                            else {\n                                return model.getLineContent(lineNumber);\n                            }\n                        };\n                        const newIndentatOfMovingBlock = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(movingLineNumber, 1), s.startLineNumber + 1, indentConverter, this._languageConfigurationService);\n                        if (newIndentatOfMovingBlock !== null) {\n                            const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(newIndentatOfMovingBlock, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n                else {\n                    // Insert line that needs to be moved before\n                    builder.addEditOperation(new Range(s.startLineNumber, 1, s.startLineNumber, 1), insertingText + '\\n');\n                }\n            }\n            else {\n                movingLineNumber = s.startLineNumber - 1;\n                movingLineText = model.getLineContent(movingLineNumber);\n                // Delete line that needs to be moved\n                builder.addEditOperation(new Range(movingLineNumber, 1, movingLineNumber + 1, 1), null);\n                // Insert line that needs to be moved after\n                builder.addEditOperation(new Range(s.endLineNumber, model.getLineMaxColumn(s.endLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), '\\n' + movingLineText);\n                if (this.shouldAutoIndent(model, s)) {\n                    virtualModel.getLineContent = (lineNumber) => {\n                        if (lineNumber === movingLineNumber) {\n                            return model.getLineContent(s.startLineNumber);\n                        }\n                        else {\n                            return model.getLineContent(lineNumber);\n                        }\n                    };\n                    const ret = this.matchEnterRule(model, indentConverter, tabSize, s.startLineNumber, s.startLineNumber - 2);\n                    // check if s.startLineNumber - 2 matches onEnter rules, if so adjust the moving block by onEnter rules.\n                    if (ret !== null) {\n                        if (ret !== 0) {\n                            this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, ret);\n                        }\n                    }\n                    else {\n                        // it doesn't match any onEnter rule, let's check indentation rules then.\n                        const indentOfFirstLine = getGoodIndentForLine(this._autoIndent, virtualModel, model.getLanguageIdAtPosition(s.startLineNumber, 1), movingLineNumber, indentConverter, this._languageConfigurationService);\n                        if (indentOfFirstLine !== null) {\n                            // adjust the indentation of the moving block\n                            const oldIndent = strings.getLeadingWhitespace(model.getLineContent(s.startLineNumber));\n                            const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                            const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndent, tabSize);\n                            if (newSpaceCnt !== oldSpaceCnt) {\n                                const spaceCntOffset = newSpaceCnt - oldSpaceCnt;\n                                this.getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, spaceCntOffset);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    buildIndentConverter(tabSize, indentSize, insertSpaces) {\n        return {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n    }\n    parseEnterResult(model, indentConverter, tabSize, line, enter) {\n        if (enter) {\n            let enterPrefix = enter.indentation;\n            if (enter.indentAction === IndentAction.None) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.Indent) {\n                enterPrefix = enter.indentation + enter.appendText;\n            }\n            else if (enter.indentAction === IndentAction.IndentOutdent) {\n                enterPrefix = enter.indentation;\n            }\n            else if (enter.indentAction === IndentAction.Outdent) {\n                enterPrefix = indentConverter.unshiftIndent(enter.indentation) + enter.appendText;\n            }\n            const movingLineText = model.getLineContent(line);\n            if (this.trimLeft(movingLineText).indexOf(this.trimLeft(enterPrefix)) >= 0) {\n                const oldIndentation = strings.getLeadingWhitespace(model.getLineContent(line));\n                let newIndentation = strings.getLeadingWhitespace(enterPrefix);\n                const indentMetadataOfMovelingLine = getIndentMetadata(model, line, this._languageConfigurationService);\n                if (indentMetadataOfMovelingLine !== null && indentMetadataOfMovelingLine & 2 /* IndentConsts.DECREASE_MASK */) {\n                    newIndentation = indentConverter.unshiftIndent(newIndentation);\n                }\n                const newSpaceCnt = indentUtils.getSpaceCnt(newIndentation, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                return newSpaceCnt - oldSpaceCnt;\n            }\n        }\n        return null;\n    }\n    /**\n     *\n     * @param model\n     * @param indentConverter\n     * @param tabSize\n     * @param line the line moving down\n     * @param futureAboveLineNumber the line which will be at the `line` position\n     * @param futureAboveLineText\n     */\n    matchEnterRuleMovingDown(model, indentConverter, tabSize, line, futureAboveLineNumber, futureAboveLineText) {\n        if (strings.lastNonWhitespaceIndex(futureAboveLineText) >= 0) {\n            // break\n            const maxColumn = model.getLineMaxColumn(futureAboveLineNumber);\n            const enter = getEnterAction(this._autoIndent, model, new Range(futureAboveLineNumber, maxColumn, futureAboveLineNumber, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n        else {\n            // go upwards, starting from `line - 1`\n            let validPrecedingLine = line - 1;\n            while (validPrecedingLine >= 1) {\n                const lineContent = model.getLineContent(validPrecedingLine);\n                const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n                if (nonWhitespaceIdx >= 0) {\n                    break;\n                }\n                validPrecedingLine--;\n            }\n            if (validPrecedingLine < 1 || line > model.getLineCount()) {\n                return null;\n            }\n            const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n            const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n            return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n        }\n    }\n    matchEnterRule(model, indentConverter, tabSize, line, oneLineAbove, previousLineText) {\n        let validPrecedingLine = oneLineAbove;\n        while (validPrecedingLine >= 1) {\n            // ship empty lines as empty lines just inherit indentation\n            let lineContent;\n            if (validPrecedingLine === oneLineAbove && previousLineText !== undefined) {\n                lineContent = previousLineText;\n            }\n            else {\n                lineContent = model.getLineContent(validPrecedingLine);\n            }\n            const nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineContent);\n            if (nonWhitespaceIdx >= 0) {\n                break;\n            }\n            validPrecedingLine--;\n        }\n        if (validPrecedingLine < 1 || line > model.getLineCount()) {\n            return null;\n        }\n        const maxColumn = model.getLineMaxColumn(validPrecedingLine);\n        const enter = getEnterAction(this._autoIndent, model, new Range(validPrecedingLine, maxColumn, validPrecedingLine, maxColumn), this._languageConfigurationService);\n        return this.parseEnterResult(model, indentConverter, tabSize, line, enter);\n    }\n    trimLeft(str) {\n        return str.replace(/^\\s+/, '');\n    }\n    shouldAutoIndent(model, selection) {\n        if (this._autoIndent < 4 /* EditorAutoIndentStrategy.Full */) {\n            return false;\n        }\n        // if it's not easy to tokenize, we stop auto indent.\n        if (!model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n            return false;\n        }\n        const languageAtSelectionStart = model.getLanguageIdAtPosition(selection.startLineNumber, 1);\n        const languageAtSelectionEnd = model.getLanguageIdAtPosition(selection.endLineNumber, 1);\n        if (languageAtSelectionStart !== languageAtSelectionEnd) {\n            return false;\n        }\n        if (this._languageConfigurationService.getLanguageConfiguration(languageAtSelectionStart).indentRulesSupport === null) {\n            return false;\n        }\n        return true;\n    }\n    getIndentEditsOfMovingBlock(model, builder, s, tabSize, insertSpaces, offset) {\n        for (let i = s.startLineNumber; i <= s.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + offset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n                builder.addEditOperation(new Range(i, 1, i, originalIndent.length + 1), newIndent);\n                if (i === s.endLineNumber && s.endColumn <= originalIndent.length + 1 && newIndent === '') {\n                    // as users select part of the original indent white spaces\n                    // when we adjust the indentation of endLine, we should adjust the cursor position as well.\n                    this._moveEndLineSelectionShrink = true;\n                }\n            }\n        }\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        if (this._moveEndLineSelectionShrink && result.startLineNumber < result.endLineNumber) {\n            result = result.setEndPosition(result.endLineNumber, 2);\n        }\n        return result;\n    }\n};\nMoveLinesCommand = __decorate([\n    __param(3, ILanguageConfigurationService)\n], MoveLinesCommand);\nexport { MoveLinesCommand };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nexport class SortLinesCommand {\n    constructor(selection, descending) {\n        this.selection = selection;\n        this.descending = descending;\n        this.selectionId = null;\n    }\n    static getCollator() {\n        if (!SortLinesCommand._COLLATOR) {\n            SortLinesCommand._COLLATOR = new Intl.Collator();\n        }\n        return SortLinesCommand._COLLATOR;\n    }\n    getEditOperations(model, builder) {\n        const op = sortLines(model, this.selection, this.descending);\n        if (op) {\n            builder.addEditOperation(op.range, op.text);\n        }\n        this.selectionId = builder.trackSelection(this.selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n    static canRun(model, selection, descending) {\n        if (model === null) {\n            return false;\n        }\n        const data = getSortData(model, selection, descending);\n        if (!data) {\n            return false;\n        }\n        for (let i = 0, len = data.before.length; i < len; i++) {\n            if (data.before[i] !== data.after[i]) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nSortLinesCommand._COLLATOR = null;\nfunction getSortData(model, selection, descending) {\n    const startLineNumber = selection.startLineNumber;\n    let endLineNumber = selection.endLineNumber;\n    if (selection.endColumn === 1) {\n        endLineNumber--;\n    }\n    // Nothing to sort if user didn't select anything.\n    if (startLineNumber >= endLineNumber) {\n        return null;\n    }\n    const linesToSort = [];\n    // Get the contents of the selection to be sorted.\n    for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n        linesToSort.push(model.getLineContent(lineNumber));\n    }\n    let sorted = linesToSort.slice(0);\n    sorted.sort(SortLinesCommand.getCollator().compare);\n    // If descending, reverse the order.\n    if (descending === true) {\n        sorted = sorted.reverse();\n    }\n    return {\n        startLineNumber: startLineNumber,\n        endLineNumber: endLineNumber,\n        before: linesToSort,\n        after: sorted\n    };\n}\n/**\n * Generate commands for sorting lines on a model.\n */\nfunction sortLines(model, selection, descending) {\n    const data = getSortData(model, selection, descending);\n    if (!data) {\n        return null;\n    }\n    return EditOperation.replace(new Range(data.startLineNumber, 1, data.endLineNumber, model.getLineMaxColumn(data.endLineNumber)), data.after.join('\\n'));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const commands = [];\n        const selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(9 /* EditorOption.autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections() || [];\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let linesDeleted = 0;\n        for (const selection of editor.getSelections()) {\n            const uniqueLines = new Set();\n            const lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                const line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        const selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const ops = this._getLinesToRemove(editor);\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        const edits = [];\n        const cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        const operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        const mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.BracketRight */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 87 /* KeyCode.BracketLeft */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        const rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        const effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            const range = rangesToDelete[i];\n            const nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        const edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                const newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineContent(deleteFromLine).length + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            const range = rangesToDelete[i];\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        const rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        const reducedSelections = [];\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            const selection = reducedSelections[i];\n            const startLineNumber = selection.startLineNumber;\n            const startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            const selectionEndPositionOffset = model.getLineContent(selection.endLineNumber).length - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                const position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                const lineText = model.getLineContent(i);\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose characters around the cursor\"),\n            alias: 'Transpose characters around the cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const cursor = selection.getStartPosition();\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(119 /* EditorOption.wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class KebabCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToKebabcase',\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n            alias: 'Transform to Kebab Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    static isSupported() {\n        const areAllRegexpsSupported = [\n            this.caseBoundary,\n            this.singleLetters,\n            this.underscoreBoundary,\n        ].every((regexp) => regexp.isSupported());\n        return areAllRegexpsSupported;\n    }\n    _modifyText(text, _) {\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\n        const singleLetters = KebabCaseAction.singleLetters.get();\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n            // one or more regexps aren't supported\n            return text;\n        }\n        return text\n            .replace(underscoreBoundary, '$1-$3')\n            .replace(caseBoundary, '$1-$2')\n            .replace(singleLetters, '$1-$2')\n            .toLocaleLowerCase();\n    }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n    registerEditorAction(KebabCaseAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, Delayer, first } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { isCancellationError, onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nexport const CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE = new RawContextKey('LinkedEditingInputVisible', false);\nconst DECORATION_CLASS_NAME = 'linked-editing-decoration';\nlet LinkedEditingContribution = class LinkedEditingContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService, languageConfigurationService, languageFeatureDebounceService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._syncRangesToken = 0;\n        this._localToDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._providers = languageFeaturesService.linkedEditingRangeProvider;\n        this._enabled = false;\n        this._visibleContextKey = CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._debounceInformation = languageFeatureDebounceService.for(this._providers, 'Linked Editing', { min: 200 });\n        this._currentDecorations = this._editor.createDecorationsCollection();\n        this._languageWordPattern = null;\n        this._currentWordPattern = null;\n        this._ignoreChangeEvent = false;\n        this._localToDispose = this._register(new DisposableStore());\n        this._rangeUpdateTriggerPromise = null;\n        this._rangeSyncTriggerPromise = null;\n        this._currentRequest = null;\n        this._currentRequestPosition = null;\n        this._currentRequestModelVersion = null;\n        this._register(this._editor.onDidChangeModel(() => this.reinitialize(true)));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(64 /* EditorOption.linkedEditing */) || e.hasChanged(84 /* EditorOption.renameOnType */)) {\n                this.reinitialize(false);\n            }\n        }));\n        this._register(this._providers.onDidChange(() => this.reinitialize(false)));\n        this._register(this._editor.onDidChangeModelLanguage(() => this.reinitialize(true)));\n        this.reinitialize(true);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkedEditingContribution.ID);\n    }\n    reinitialize(forceRefresh) {\n        const model = this._editor.getModel();\n        const isEnabled = model !== null && (this._editor.getOption(64 /* EditorOption.linkedEditing */) || this._editor.getOption(84 /* EditorOption.renameOnType */)) && this._providers.has(model);\n        if (isEnabled === this._enabled && !forceRefresh) {\n            return;\n        }\n        this._enabled = isEnabled;\n        this.clearRanges();\n        this._localToDispose.clear();\n        if (!isEnabled || model === null) {\n            return;\n        }\n        this._localToDispose.add(Event.runAndSubscribe(model.onDidChangeLanguageConfiguration, () => {\n            this._languageWordPattern = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        }));\n        const rangeUpdateScheduler = new Delayer(this._debounceInformation.get(model));\n        const triggerRangeUpdate = () => {\n            var _a;\n            this._rangeUpdateTriggerPromise = rangeUpdateScheduler.trigger(() => this.updateRanges(), (_a = this._debounceDuration) !== null && _a !== void 0 ? _a : this._debounceInformation.get(model));\n        };\n        const rangeSyncScheduler = new Delayer(0);\n        const triggerRangeSync = (token) => {\n            this._rangeSyncTriggerPromise = rangeSyncScheduler.trigger(() => this._syncRanges(token));\n        };\n        this._localToDispose.add(this._editor.onDidChangeCursorPosition(() => {\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (!this._ignoreChangeEvent) {\n                if (this._currentDecorations.length > 0) {\n                    const referenceRange = this._currentDecorations.getRange(0);\n                    if (referenceRange && e.changes.every(c => referenceRange.intersectRanges(c.range))) {\n                        triggerRangeSync(this._syncRangesToken);\n                        return;\n                    }\n                }\n            }\n            triggerRangeUpdate();\n        }));\n        this._localToDispose.add({\n            dispose: () => {\n                rangeUpdateScheduler.dispose();\n                rangeSyncScheduler.dispose();\n            }\n        });\n        this.updateRanges();\n    }\n    _syncRanges(token) {\n        // dalayed invocation, make sure we're still on\n        if (!this._editor.hasModel() || token !== this._syncRangesToken || this._currentDecorations.length === 0) {\n            // nothing to do\n            return;\n        }\n        const model = this._editor.getModel();\n        const referenceRange = this._currentDecorations.getRange(0);\n        if (!referenceRange || referenceRange.startLineNumber !== referenceRange.endLineNumber) {\n            return this.clearRanges();\n        }\n        const referenceValue = model.getValueInRange(referenceRange);\n        if (this._currentWordPattern) {\n            const match = referenceValue.match(this._currentWordPattern);\n            const matchLength = match ? match[0].length : 0;\n            if (matchLength !== referenceValue.length) {\n                return this.clearRanges();\n            }\n        }\n        const edits = [];\n        for (let i = 1, len = this._currentDecorations.length; i < len; i++) {\n            const mirrorRange = this._currentDecorations.getRange(i);\n            if (!mirrorRange) {\n                continue;\n            }\n            if (mirrorRange.startLineNumber !== mirrorRange.endLineNumber) {\n                edits.push({\n                    range: mirrorRange,\n                    text: referenceValue\n                });\n            }\n            else {\n                let oldValue = model.getValueInRange(mirrorRange);\n                let newValue = referenceValue;\n                let rangeStartColumn = mirrorRange.startColumn;\n                let rangeEndColumn = mirrorRange.endColumn;\n                const commonPrefixLength = strings.commonPrefixLength(oldValue, newValue);\n                rangeStartColumn += commonPrefixLength;\n                oldValue = oldValue.substr(commonPrefixLength);\n                newValue = newValue.substr(commonPrefixLength);\n                const commonSuffixLength = strings.commonSuffixLength(oldValue, newValue);\n                rangeEndColumn -= commonSuffixLength;\n                oldValue = oldValue.substr(0, oldValue.length - commonSuffixLength);\n                newValue = newValue.substr(0, newValue.length - commonSuffixLength);\n                if (rangeStartColumn !== rangeEndColumn || newValue.length !== 0) {\n                    edits.push({\n                        range: new Range(mirrorRange.startLineNumber, rangeStartColumn, mirrorRange.endLineNumber, rangeEndColumn),\n                        text: newValue\n                    });\n                }\n            }\n        }\n        if (edits.length === 0) {\n            return;\n        }\n        try {\n            this._editor.popUndoStop();\n            this._ignoreChangeEvent = true;\n            const prevEditOperationType = this._editor._getViewModel().getPrevEditOperationType();\n            this._editor.executeEdits('linkedEditing', edits);\n            this._editor._getViewModel().setPrevEditOperationType(prevEditOperationType);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n    dispose() {\n        this.clearRanges();\n        super.dispose();\n    }\n    clearRanges() {\n        this._visibleContextKey.set(false);\n        this._currentDecorations.clear();\n        if (this._currentRequest) {\n            this._currentRequest.cancel();\n            this._currentRequest = null;\n            this._currentRequestPosition = null;\n        }\n    }\n    updateRanges(force = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                this.clearRanges();\n                return;\n            }\n            const position = this._editor.getPosition();\n            if (!this._enabled && !force || this._editor.getSelections().length > 1) {\n                // disabled or multicursor\n                this.clearRanges();\n                return;\n            }\n            const model = this._editor.getModel();\n            const modelVersionId = model.getVersionId();\n            if (this._currentRequestPosition && this._currentRequestModelVersion === modelVersionId) {\n                if (position.equals(this._currentRequestPosition)) {\n                    return; // same position\n                }\n                if (this._currentDecorations.length > 0) {\n                    const range = this._currentDecorations.getRange(0);\n                    if (range && range.containsPosition(position)) {\n                        return; // just moving inside the existing primary range\n                    }\n                }\n            }\n            this._currentRequestPosition = position;\n            this._currentRequestModelVersion = modelVersionId;\n            const request = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    const sw = new StopWatch(false);\n                    const response = yield getLinkedEditingRanges(this._providers, model, position, token);\n                    this._debounceInformation.update(model, sw.elapsed());\n                    if (request !== this._currentRequest) {\n                        return;\n                    }\n                    this._currentRequest = null;\n                    if (modelVersionId !== model.getVersionId()) {\n                        return;\n                    }\n                    let ranges = [];\n                    if (response === null || response === void 0 ? void 0 : response.ranges) {\n                        ranges = response.ranges;\n                    }\n                    this._currentWordPattern = (response === null || response === void 0 ? void 0 : response.wordPattern) || this._languageWordPattern;\n                    let foundReferenceRange = false;\n                    for (let i = 0, len = ranges.length; i < len; i++) {\n                        if (Range.containsPosition(ranges[i], position)) {\n                            foundReferenceRange = true;\n                            if (i !== 0) {\n                                const referenceRange = ranges[i];\n                                ranges.splice(i, 1);\n                                ranges.unshift(referenceRange);\n                            }\n                            break;\n                        }\n                    }\n                    if (!foundReferenceRange) {\n                        // Cannot do linked editing if the ranges are not where the cursor is...\n                        this.clearRanges();\n                        return;\n                    }\n                    const decorations = ranges.map(range => ({ range: range, options: LinkedEditingContribution.DECORATION }));\n                    this._visibleContextKey.set(true);\n                    this._currentDecorations.set(decorations);\n                    this._syncRangesToken++; // cancel any pending syncRanges call\n                }\n                catch (err) {\n                    if (!isCancellationError(err)) {\n                        onUnexpectedError(err);\n                    }\n                    if (this._currentRequest === request || !this._currentRequest) {\n                        // stop if we are still the latest request\n                        this.clearRanges();\n                    }\n                }\n            }));\n            this._currentRequest = request;\n            return request;\n        });\n    }\n};\nLinkedEditingContribution.ID = 'editor.contrib.linkedEditing';\nLinkedEditingContribution.DECORATION = ModelDecorationOptions.register({\n    description: 'linked-editing',\n    stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */,\n    className: DECORATION_CLASS_NAME\n});\nLinkedEditingContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkedEditingContribution);\nexport { LinkedEditingContribution };\nexport class LinkedEditingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.linkedEditing',\n            label: nls.localize('linkedEditing.label', \"Start Linked Editing\"),\n            alias: 'Start Linked Editing',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(_accessor, editor) {\n        const controller = LinkedEditingContribution.get(editor);\n        if (controller) {\n            return Promise.resolve(controller.updateRanges(true));\n        }\n        return Promise.resolve();\n    }\n}\nconst LinkedEditingCommand = EditorCommand.bindToContribution(LinkedEditingContribution.get);\nregisterEditorCommand(new LinkedEditingCommand({\n    id: 'cancelLinkedEditingInput',\n    precondition: CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,\n    handler: x => x.clearRanges(),\n    kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nfunction getLinkedEditingRanges(providers, model, position, token) {\n    const orderedByScore = providers.ordered(model);\n    // in order of score ask the linked editing range provider\n    // until someone response with a good result\n    // (good = not null)\n    return first(orderedByScore.map(provider => () => __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield provider.provideLinkedEditingRanges(model, position, token);\n        }\n        catch (e) {\n            onUnexpectedExternalError(e);\n            return undefined;\n        }\n    })), result => !!result && arrays.isNonEmptyArray(result === null || result === void 0 ? void 0 : result.ranges));\n}\nexport const editorLinkedEditingBackground = registerColor('editor.linkedEditingBackground', { dark: Color.fromHex('#f00').transparent(0.3), light: Color.fromHex('#f00').transparent(0.3), hcDark: Color.fromHex('#f00').transparent(0.3), hcLight: Color.white }, nls.localize('editorLinkedEditingBackground', 'Background color when the editor auto renames on type.'));\nregisterThemingParticipant((theme, collector) => {\n    const editorLinkedEditingBackgroundColor = theme.getColor(editorLinkedEditingBackground);\n    if (editorLinkedEditingBackgroundColor) {\n        collector.addRule(`.monaco-editor .${DECORATION_CLASS_NAME} { background: ${editorLinkedEditingBackgroundColor}; border-left-color: ${editorLinkedEditingBackgroundColor}; }`);\n    }\n});\nregisterModelAndPositionCommand('_executeLinkedEditingProvider', (_accessor, model, position) => {\n    const { linkedEditingRangeProvider } = _accessor.get(ILanguageFeaturesService);\n    return getLinkedEditingRanges(linkedEditingRangeProvider, model, position, CancellationToken.None);\n});\nregisterEditorContribution(LinkedEditingContribution.ID, LinkedEditingContribution);\nregisterEditorAction(LinkedEditingAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class Link {\n    constructor(link, provider) {\n        this._link = link;\n        this._provider = provider;\n    }\n    toJSON() {\n        return {\n            range: this.range,\n            url: this.url,\n            tooltip: this.tooltip\n        };\n    }\n    get range() {\n        return this._link.range;\n    }\n    get url() {\n        return this._link.url;\n    }\n    get tooltip() {\n        return this._link.tooltip;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._link.url) {\n                return this._link.url;\n            }\n            if (typeof this._provider.resolveLink === 'function') {\n                return Promise.resolve(this._provider.resolveLink(this._link, token)).then(value => {\n                    this._link = value || this._link;\n                    if (this._link.url) {\n                        // recurse\n                        return this.resolve(token);\n                    }\n                    return Promise.reject(new Error('missing'));\n                });\n            }\n            return Promise.reject(new Error('missing'));\n        });\n    }\n}\nexport class LinksList {\n    constructor(tuples) {\n        this._disposables = new DisposableStore();\n        let links = [];\n        for (const [list, provider] of tuples) {\n            // merge all links\n            const newLinks = list.links.map(link => new Link(link, provider));\n            links = LinksList._union(links, newLinks);\n            // register disposables\n            if (isDisposable(list)) {\n                this._disposables.add(list);\n            }\n        }\n        this.links = links;\n    }\n    dispose() {\n        this._disposables.dispose();\n        this.links.length = 0;\n    }\n    static _union(oldLinks, newLinks) {\n        // reunite oldLinks with newLinks and remove duplicates\n        const result = [];\n        let oldIndex;\n        let oldLen;\n        let newIndex;\n        let newLen;\n        for (oldIndex = 0, newIndex = 0, oldLen = oldLinks.length, newLen = newLinks.length; oldIndex < oldLen && newIndex < newLen;) {\n            const oldLink = oldLinks[oldIndex];\n            const newLink = newLinks[newIndex];\n            if (Range.areIntersectingOrTouching(oldLink.range, newLink.range)) {\n                // Remove the oldLink\n                oldIndex++;\n                continue;\n            }\n            const comparisonResult = Range.compareRangesUsingStarts(oldLink.range, newLink.range);\n            if (comparisonResult < 0) {\n                // oldLink is before\n                result.push(oldLink);\n                oldIndex++;\n            }\n            else {\n                // newLink is before\n                result.push(newLink);\n                newIndex++;\n            }\n        }\n        for (; oldIndex < oldLen; oldIndex++) {\n            result.push(oldLinks[oldIndex]);\n        }\n        for (; newIndex < newLen; newIndex++) {\n            result.push(newLinks[newIndex]);\n        }\n        return result;\n    }\n}\nexport function getLinks(providers, model, token) {\n    const lists = [];\n    // ask all providers for links in parallel\n    const promises = providers.ordered(model).reverse().map((provider, i) => {\n        return Promise.resolve(provider.provideLinks(model, token)).then(result => {\n            if (result) {\n                lists[i] = [result, provider];\n            }\n        }, onUnexpectedExternalError);\n    });\n    return Promise.all(promises).then(() => {\n        const result = new LinksList(coalesce(lists));\n        if (!token.isCancellationRequested) {\n            return result;\n        }\n        result.dispose();\n        return new LinksList([]);\n    });\n}\nCommandsRegistry.registerCommand('_executeLinkProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    let [uri, resolveCount] = args;\n    assertType(uri instanceof URI);\n    if (typeof resolveCount !== 'number') {\n        resolveCount = 0;\n    }\n    const { linkProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return [];\n    }\n    const list = yield getLinks(linkProvider, model, CancellationToken.None);\n    if (!list) {\n        return [];\n    }\n    // resolve links\n    for (let i = 0; i < Math.min(resolveCount, list.links.length); i++) {\n        yield list.links[i].resolve(CancellationToken.None);\n    }\n    const result = list.links.slice(0);\n    list.dispose();\n    return result;\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './links.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { getLinks } from './getLinks.js';\nimport * as nls from '../../../../nls.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorActiveLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nlet LinkDetector = class LinkDetector extends Disposable {\n    constructor(editor, openerService, notificationService, languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this.editor = editor;\n        this.openerService = openerService;\n        this.notificationService = notificationService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.providers = this.languageFeaturesService.linkProvider;\n        this.debounceInformation = languageFeatureDebounceService.for(this.providers, 'Links', { min: 1000, max: 4000 });\n        this.computeLinks = this._register(new RunOnceScheduler(() => this.computeLinksNow(), 1000));\n        this.computePromise = null;\n        this.activeLinksList = null;\n        this.currentOccurrences = {};\n        this.activeLinkDecorationId = null;\n        const clickLinkGesture = this._register(new ClickLinkGesture(editor));\n        this._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this._onEditorMouseMove(mouseEvent, keyboardEvent);\n        }));\n        this._register(clickLinkGesture.onExecute((e) => {\n            this.onEditorMouseUp(e);\n        }));\n        this._register(clickLinkGesture.onCancel((e) => {\n            this.cleanUpActiveLinkDecoration();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (!e.hasChanged(65 /* EditorOption.links */)) {\n                return;\n            }\n            // Remove any links (for the getting disabled case)\n            this.updateDecorations([]);\n            // Stop any computation (for the getting disabled case)\n            this.stop();\n            // Start computing (for the getting enabled case)\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (!this.editor.hasModel()) {\n                return;\n            }\n            this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()));\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(editor.onDidChangeModelLanguage((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this._register(this.providers.onDidChange((e) => {\n            this.stop();\n            this.computeLinks.schedule(0);\n        }));\n        this.computeLinks.schedule(0);\n    }\n    static get(editor) {\n        return editor.getContribution(LinkDetector.ID);\n    }\n    computeLinksNow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.editor.hasModel() || !this.editor.getOption(65 /* EditorOption.links */)) {\n                return;\n            }\n            const model = this.editor.getModel();\n            if (!this.providers.has(model)) {\n                return;\n            }\n            if (this.activeLinksList) {\n                this.activeLinksList.dispose();\n                this.activeLinksList = null;\n            }\n            this.computePromise = createCancelablePromise(token => getLinks(this.providers, model, token));\n            try {\n                const sw = new StopWatch(false);\n                this.activeLinksList = yield this.computePromise;\n                this.debounceInformation.update(model, sw.elapsed());\n                if (model.isDisposed()) {\n                    return;\n                }\n                this.updateDecorations(this.activeLinksList.links);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                this.computePromise = null;\n            }\n        });\n    }\n    updateDecorations(links) {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        const oldDecorations = [];\n        const keys = Object.keys(this.currentOccurrences);\n        for (const decorationId of keys) {\n            const occurence = this.currentOccurrences[decorationId];\n            oldDecorations.push(occurence.decorationId);\n        }\n        const newDecorations = [];\n        if (links) {\n            // Not sure why this is sometimes null\n            for (const link of links) {\n                newDecorations.push(LinkOccurrence.decoration(link, useMetaKey));\n            }\n        }\n        this.editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations(oldDecorations, newDecorations);\n            this.currentOccurrences = {};\n            this.activeLinkDecorationId = null;\n            for (let i = 0, len = decorations.length; i < len; i++) {\n                const occurence = new LinkOccurrence(links[i], decorations[i]);\n                this.currentOccurrences[occurence.decorationId] = occurence;\n            }\n        });\n    }\n    _onEditorMouseMove(mouseEvent, withKey) {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.isEnabled(mouseEvent, withKey)) {\n            this.cleanUpActiveLinkDecoration(); // always remove previous link decoration as their can only be one\n            const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.activate(changeAccessor, useMetaKey);\n                    this.activeLinkDecorationId = occurrence.decorationId;\n                });\n            }\n        }\n        else {\n            this.cleanUpActiveLinkDecoration();\n        }\n    }\n    cleanUpActiveLinkDecoration() {\n        const useMetaKey = (this.editor.getOption(72 /* EditorOption.multiCursorModifier */) === 'altKey');\n        if (this.activeLinkDecorationId) {\n            const occurrence = this.currentOccurrences[this.activeLinkDecorationId];\n            if (occurrence) {\n                this.editor.changeDecorations((changeAccessor) => {\n                    occurrence.deactivate(changeAccessor, useMetaKey);\n                });\n            }\n            this.activeLinkDecorationId = null;\n        }\n    }\n    onEditorMouseUp(mouseEvent) {\n        if (!this.isEnabled(mouseEvent)) {\n            return;\n        }\n        const occurrence = this.getLinkOccurrence(mouseEvent.target.position);\n        if (!occurrence) {\n            return;\n        }\n        this.openLinkOccurrence(occurrence, mouseEvent.hasSideBySideModifier, true /* from user gesture */);\n    }\n    openLinkOccurrence(occurrence, openToSide, fromUserGesture = false) {\n        if (!this.openerService) {\n            return;\n        }\n        const { link } = occurrence;\n        link.resolve(CancellationToken.None).then(uri => {\n            // Support for relative file URIs of the shape file://./relativeFile.txt or file:///./relativeFile.txt\n            if (typeof uri === 'string' && this.editor.hasModel()) {\n                const modelUri = this.editor.getModel().uri;\n                if (modelUri.scheme === Schemas.file && uri.startsWith(`${Schemas.file}:`)) {\n                    const parsedUri = URI.parse(uri);\n                    if (parsedUri.scheme === Schemas.file) {\n                        const fsPath = resources.originalFSPath(parsedUri);\n                        let relativePath = null;\n                        if (fsPath.startsWith('/./')) {\n                            relativePath = `.${fsPath.substr(1)}`;\n                        }\n                        else if (fsPath.startsWith('//./')) {\n                            relativePath = `.${fsPath.substr(2)}`;\n                        }\n                        if (relativePath) {\n                            uri = resources.joinPath(modelUri, relativePath);\n                        }\n                    }\n                }\n            }\n            return this.openerService.open(uri, { openToSide, fromUserGesture, allowContributedOpeners: true, allowCommands: true, fromWorkspace: true });\n        }, err => {\n            const messageOrError = err instanceof Error ? err.message : err;\n            // different error cases\n            if (messageOrError === 'invalid') {\n                this.notificationService.warn(nls.localize('invalid.url', 'Failed to open this link because it is not well-formed: {0}', link.url.toString()));\n            }\n            else if (messageOrError === 'missing') {\n                this.notificationService.warn(nls.localize('missing.url', 'Failed to open this link because its target is missing.'));\n            }\n            else {\n                onUnexpectedError(err);\n            }\n        });\n    }\n    getLinkOccurrence(position) {\n        if (!this.editor.hasModel() || !position) {\n            return null;\n        }\n        const decorations = this.editor.getModel().getDecorationsInRange({\n            startLineNumber: position.lineNumber,\n            startColumn: position.column,\n            endLineNumber: position.lineNumber,\n            endColumn: position.column\n        }, 0, true);\n        for (const decoration of decorations) {\n            const currentOccurrence = this.currentOccurrences[decoration.id];\n            if (currentOccurrence) {\n                return currentOccurrence;\n            }\n        }\n        return null;\n    }\n    isEnabled(mouseEvent, withKey) {\n        return Boolean((mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */)\n            && (mouseEvent.hasTriggerModifier || (withKey && withKey.keyCodeIsTriggerKey)));\n    }\n    stop() {\n        var _a;\n        this.computeLinks.cancel();\n        if (this.activeLinksList) {\n            (_a = this.activeLinksList) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.activeLinksList = null;\n        }\n        if (this.computePromise) {\n            this.computePromise.cancel();\n            this.computePromise = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n};\nLinkDetector.ID = 'editor.linkDetector';\nLinkDetector = __decorate([\n    __param(1, IOpenerService),\n    __param(2, INotificationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageFeatureDebounceService)\n], LinkDetector);\nexport { LinkDetector };\nconst decoration = {\n    general: ModelDecorationOptions.register({\n        description: 'detected-link',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link'\n    }),\n    active: ModelDecorationOptions.register({\n        description: 'detected-link-active',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        collapseOnReplaceEdit: true,\n        inlineClassName: 'detected-link-active'\n    })\n};\nclass LinkOccurrence {\n    constructor(link, decorationId) {\n        this.link = link;\n        this.decorationId = decorationId;\n    }\n    static decoration(link, useMetaKey) {\n        return {\n            range: link.range,\n            options: LinkOccurrence._getOptions(link, useMetaKey, false)\n        };\n    }\n    static _getOptions(link, useMetaKey, isActive) {\n        const options = Object.assign({}, (isActive ? decoration.active : decoration.general));\n        options.hoverMessage = getHoverMessage(link, useMetaKey);\n        return options;\n    }\n    activate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, true));\n    }\n    deactivate(changeAccessor, useMetaKey) {\n        changeAccessor.changeDecorationOptions(this.decorationId, LinkOccurrence._getOptions(this.link, useMetaKey, false));\n    }\n}\nfunction getHoverMessage(link, useMetaKey) {\n    const executeCmd = link.url && /^command:/i.test(link.url.toString());\n    const label = link.tooltip\n        ? link.tooltip\n        : executeCmd\n            ? nls.localize('links.navigate.executeCmd', 'Execute command')\n            : nls.localize('links.navigate.follow', 'Follow link');\n    const kb = useMetaKey\n        ? platform.isMacintosh\n            ? nls.localize('links.navigate.kb.meta.mac', \"cmd + click\")\n            : nls.localize('links.navigate.kb.meta', \"ctrl + click\")\n        : platform.isMacintosh\n            ? nls.localize('links.navigate.kb.alt.mac', \"option + click\")\n            : nls.localize('links.navigate.kb.alt', \"alt + click\");\n    if (link.url) {\n        let nativeLabel = '';\n        if (/^command:/i.test(link.url.toString())) {\n            // Don't show complete command arguments in the native tooltip\n            const match = link.url.toString().match(/^command:([^?#]+)/);\n            if (match) {\n                const commandId = match[1];\n                nativeLabel = nls.localize('tooltip.explanation', \"Execute command {0}\", commandId);\n            }\n        }\n        const hoverMessage = new MarkdownString('', true)\n            .appendLink(link.url.toString(true).replace(/ /g, '%20'), label, nativeLabel)\n            .appendMarkdown(` (${kb})`);\n        return hoverMessage;\n    }\n    else {\n        return new MarkdownString().appendText(`${label} (${kb})`);\n    }\n}\nclass OpenLinkAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.openLink',\n            label: nls.localize('label', \"Open Link\"),\n            alias: 'Open Link',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const linkDetector = LinkDetector.get(editor);\n        if (!linkDetector) {\n            return;\n        }\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        for (const sel of selections) {\n            const link = linkDetector.getLinkOccurrence(sel.getEndPosition());\n            if (link) {\n                linkDetector.openLinkOccurrence(link, false);\n            }\n        }\n    }\n}\nregisterEditorContribution(LinkDetector.ID, LinkDetector);\nregisterEditorAction(OpenLinkAction);\nregisterThemingParticipant((theme, collector) => {\n    const activeLinkForeground = theme.getColor(editorActiveLinkForeground);\n    if (activeLinkForeground) {\n        collector.addRule(`.monaco-editor .detected-link-active { color: ${activeLinkForeground} !important; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane, MinimapPosition } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerSelectionHighlightForeground, minimapSelectionOccurrenceHighlight } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        const newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll(searchScope) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        const editorModel = this._editor.getModel();\n        if (searchScope) {\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    const resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            const editorModel = this._editor.getModel();\n            if (findState.searchScope) {\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n            else {\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(119 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll(findState.searchScope);\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            this._run(multiCursorController, findController);\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        this._decorations = editor.createDecorationsCollection();\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(99 /* EditorOption.selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n    }\n    _update() {\n        this._setState(SelectionHighlighter._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(119 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this._decorations.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const hasFindOccurrences = this._languageFeaturesService.documentHighlightProvider.has(model) && this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                // Show in overviewRuler only if model has no semantic highlighting\n                options: (hasFindOccurrences ? SelectionHighlighter._SELECTION_HIGHLIGHT : SelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW)\n            };\n        });\n        this._decorations.set(decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter._SELECTION_HIGHLIGHT_OVERVIEW = ModelDecorationOptions.register({\n    description: 'selection-highlight-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nSelectionHighlighter._SELECTION_HIGHLIGHT = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n});\nSelectionHighlighter = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nexport class FocusNextCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusNextCursor',\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n                args: [],\n            },\n            alias: 'Focus Next Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.shift();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.push(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class FocusPreviousCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusPreviousCursor',\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n            description: {\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n                args: [],\n            },\n            alias: 'Focus Previous Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.pop();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.unshift(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport function provideSignatureHelp(registry, model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const supports = registry.ordered(model);\n        for (const support of supports) {\n            try {\n                const result = yield support.provideSignatureHelp(model, position, token, context);\n                if (result) {\n                    return result;\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = yield provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Type.Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Type.Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(78 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active(Object.assign(Object.assign({}, this.state.hints), { activeSignature }));\n        this._onChangedHints.fire(this.state.hints);\n    }\n    doTrigger(triggerId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n            const activeSignatureHelp = this.getLastActiveHints();\n            this.cancel(true);\n            if (this._pendingTriggers.length === 0) {\n                return false;\n            }\n            const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            const triggerContext = {\n                triggerKind: context.triggerKind,\n                triggerCharacter: context.triggerCharacter,\n                isRetrigger: isRetrigger,\n                activeSignatureHelp: activeSignatureHelp\n            };\n            if (!this.editor.hasModel()) {\n                return false;\n            }\n            const model = this.editor.getModel();\n            const position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n            try {\n                const result = yield this.state.request;\n                // Check that we are still resolving the correct signature help\n                if (triggerId !== this.triggerId) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    return false;\n                }\n                if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                    result === null || result === void 0 ? void 0 : result.dispose();\n                    this._lastSignatureHelpResult.clear();\n                    this.cancel();\n                    return false;\n                }\n                else {\n                    this.state = new ParameterHintState.Active(result.value);\n                    this._lastSignatureHelpResult.value = result;\n                    this._onChangedHints.fire(this.state.hints);\n                    return true;\n                }\n            }\n            catch (error) {\n                if (triggerId === this.triggerId) {\n                    this.state = ParameterHintState.Default;\n                }\n                onUnexpectedError(error);\n                return false;\n            }\n        });\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        // Update trigger characters\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                this.triggerChars.add(ch.charCodeAt(0));\n                // All trigger characters are also considered retrigger characters\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                this.retriggerChars.add(ch.charCodeAt(0));\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(78 /* EditorOption.parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground, listHighlightForeground, registerColor, textCodeBlockBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = class ParameterHintsWidget extends Disposable {\n    constructor(editor, contextKeyService, openerService, languageService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n        this._register(this.model.onChangedHints(newParameterHints => {\n            if (newParameterHints) {\n                this.show();\n                this.render(newParameterHints);\n            }\n            else {\n                this.hide();\n            }\n        }));\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\n            .filter(e => e.hasChanged(46 /* EditorOption.fontInfo */))\n            .on(updateFont, null));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            var _a;\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget.ID;\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IOpenerService),\n    __param(3, ILanguageService),\n    __param(4, ILanguageFeaturesService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nexport const editorHoverWidgetHighlightForeground = registerColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .parameter-hints-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${border.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${border.transparent(0.5)}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${background}; }`);\n    }\n    const link = theme.getColor(textLinkForeground);\n    if (link) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a { color: ${link}; }`);\n    }\n    const linkHover = theme.getColor(textLinkActiveForeground);\n    if (linkHover) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${linkHover}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget { color: ${foreground}; }`);\n    }\n    const codeBackground = theme.getColor(textCodeBlockBackground);\n    if (codeBackground) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${codeBackground}; }`);\n    }\n    const parameterHighlightColor = theme.getColor(editorHoverWidgetHighlightForeground);\n    if (parameterHighlightColor) {\n        collector.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${parameterHighlightColor}}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = class ParameterHintsController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this.editor = editor;\n        this.widget = this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor));\n    }\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController.ID);\n    }\n    cancel() {\n        this.widget.cancel();\n    }\n    previous() {\n        this.widget.previous();\n    }\n    next() {\n        this.widget.next();\n    }\n    trigger(context) {\n        this.widget.trigger(context);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = __decorate([\n    __param(1, IInstantiationService)\n], ParameterHintsController);\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        if (controller) {\n            controller.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.Invoke\n            });\n        }\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor) {\n        var _a;\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(false)));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IdleValue, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._disposableStore.add(new IdleValue(() => this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n    }\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range);\n            // do rename at location\n            const selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    code: 'undoredo.rename',\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    respectAutoSaveConfig: true\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.value.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.value.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Position } from '../../../common/core/position.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._sessionStore = new DisposableStore();\n        this._ranges = [];\n        this._rangesVersionId = 0;\n        this._editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(34 /* EditorOption.experimental */)) {\n                this.onConfigurationChange();\n            }\n        }));\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(true), 50));\n        this.onConfigurationChange();\n    }\n    onConfigurationChange() {\n        const options = this._editor.getOption(34 /* EditorOption.experimental */);\n        if (options.stickyScroll.enabled === false) {\n            this.stickyScrollWidget.emptyRootNode();\n            this._editor.removeOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidChangeModel(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._update(false)));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this._update(true)));\n            this._update(true);\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this.stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._update(false);\n        }\n    }\n    _update(updateOutline = false) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (updateOutline) {\n                (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n                this._cts = new CancellationTokenSource();\n                yield this._updateOutlineModel(this._cts.token);\n            }\n            const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n            if (hiddenRanges) {\n                for (const hiddenRange of hiddenRanges) {\n                    this._ranges = this._ranges.filter(range => { return !(range[0] >= hiddenRange.startLineNumber && range[1] <= hiddenRange.endLineNumber + 1); });\n                }\n            }\n            this._renderStickyScroll();\n        });\n    }\n    _findLineRanges(outlineElement, depth) {\n        if (outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.size) {\n            let didRecursion = false;\n            for (const outline of outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.values()) {\n                const kind = outline.symbol.kind;\n                if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                    didRecursion = true;\n                    this._findLineRanges(outline, depth + 1);\n                }\n            }\n            if (!didRecursion) {\n                this._addOutlineRanges(outlineElement, depth);\n            }\n        }\n        else {\n            this._addOutlineRanges(outlineElement, depth);\n        }\n    }\n    _addOutlineRanges(outlineElement, depth) {\n        let currentStartLine = 0;\n        let currentEndLine = 0;\n        while (outlineElement) {\n            const kind = outlineElement.symbol.kind;\n            if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                currentStartLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.startLineNumber;\n                currentEndLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.endLineNumber;\n                this._ranges.push([currentStartLine, currentEndLine, depth]);\n                depth--;\n            }\n            if (outlineElement.parent instanceof OutlineElement) {\n                outlineElement = outlineElement.parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    _updateOutlineModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._editor.getModel();\n                const modelVersionId = model.getVersionId();\n                const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this._ranges = [];\n                this._rangesVersionId = modelVersionId;\n                for (const outline of outlineModel.children.values()) {\n                    if (outline instanceof OutlineElement) {\n                        const kind = outline.symbol.kind;\n                        if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                            this._findLineRanges(outline, 1);\n                        }\n                        else {\n                            this._findLineRanges(outline, 0);\n                        }\n                    }\n                    this._ranges = this._ranges.sort(function (a, b) {\n                        if (a[0] !== b[0]) {\n                            return a[0] - b[0];\n                        }\n                        else if (a[1] !== b[1]) {\n                            return b[1] - a[1];\n                        }\n                        else {\n                            return a[2] - b[2];\n                        }\n                    });\n                    let previous = [];\n                    for (const [index, arr] of this._ranges.entries()) {\n                        const [start, end, _depth] = arr;\n                        if (previous[0] === start && previous[1] === end) {\n                            this._ranges.splice(index, 1);\n                        }\n                        else {\n                            previous = arr;\n                        }\n                    }\n                }\n            }\n        });\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const model = this._editor.getModel();\n        if (this._rangesVersionId !== model.getVersionId()) {\n            // Old _ranges not updated yet\n            return;\n        }\n        const scrollTop = this._editor.getScrollTop();\n        this.stickyScrollWidget.emptyRootNode();\n        const beginningLinesConsidered = new Set();\n        for (const [index, arr] of this._ranges.entries()) {\n            const [start, end, depth] = arr;\n            if (end - start > 0 && model.getLineContent(start) !== '') {\n                const topOfElementAtDepth = (depth - 1) * lineHeight;\n                const bottomOfElementAtDepth = depth * lineHeight;\n                const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                if (!beginningLinesConsidered.has(start)) {\n                    if (topOfElementAtDepth >= topOfEndLine - 1 && topOfElementAtDepth < bottomOfEndLine - 2) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, -1, bottomOfEndLine - bottomOfElementAtDepth));\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth < bottomOfEndLine - 1) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, 0, 0));\n                    }\n                }\n                else {\n                    this._ranges.splice(index, 1);\n                }\n            }\n        }\n        this.stickyScrollWidget.updateRootNode();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyScrollController);\nconst _ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('stickyScrollViewLayer', { createHTML: value => value });\nclass StickyScrollCodeLine {\n    constructor(_lineNumber, _depth, _editor, _zIndex, _relativePosition) {\n        this._lineNumber = _lineNumber;\n        this._depth = _depth;\n        this._editor = _editor;\n        this._zIndex = _zIndex;\n        this._relativePosition = _relativePosition;\n        this.effectiveLineHeight = 0;\n        this.effectiveLineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */) + this._relativePosition;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    getDomNode() {\n        const root = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(this._lineNumber, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 100, 'none', true, true, null);\n        const sb = createStringBuilder(400);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineHTMLNode.style.overflow = 'hidden';\n        lineHTMLNode.style.whiteSpace = 'nowrap';\n        lineHTMLNode.style.display = 'inline-block';\n        lineHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.style.width = this._editor.getLayoutInfo().contentLeft.toString() + 'px';\n        lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineNumberHTMLNode.style.color = 'var(--vscode-editorLineNumber-foreground)';\n        lineNumberHTMLNode.style.display = 'inline-block';\n        lineNumberHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        const innerLineNumberHTML = document.createElement('span');\n        innerLineNumberHTML.innerText = this._lineNumber.toString();\n        innerLineNumberHTML.style.paddingLeft = this._editor.getLayoutInfo().lineNumbersLeft.toString() + 'px';\n        innerLineNumberHTML.style.width = this._editor.getLayoutInfo().lineNumbersWidth.toString() + 'px';\n        innerLineNumberHTML.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        innerLineNumberHTML.style.textAlign = 'right';\n        innerLineNumberHTML.style.float = 'left';\n        innerLineNumberHTML.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        root.onclick = e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this._editor.revealPosition({ lineNumber: this._lineNumber - this._depth + 1, column: 1 });\n        };\n        root.onmouseover = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScrollHover-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            innerLineNumberHTML.style.cursor = `pointer`;\n            lineHTMLNode.style.cursor = `pointer`;\n            root.style.cursor = `pointer`;\n            lineNumberHTMLNode.style.cursor = `pointer`;\n        };\n        root.onmouseleave = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScroll-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        };\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        root.appendChild(lineNumberHTMLNode);\n        root.appendChild(lineHTMLNode);\n        root.style.zIndex = this._zIndex.toString();\n        root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        root.style.overflow = 'hidden';\n        root.style.whiteSpace = 'nowrap';\n        root.style.width = '100%';\n        root.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        root.style.height = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        // Special case for last line of sticky scroll\n        if (this._relativePosition) {\n            root.style.position = 'relative';\n            root.style.top = this._relativePosition + 'px';\n            root.style.width = '100%';\n        }\n        return root;\n    }\n}\nclass StickyScrollWidget {\n    constructor(_editor) {\n        this._editor = _editor;\n        this.arrayOfCodeLines = [];\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode.style.width = '100%';\n        this.rootDomNode.style.boxShadow = `var(--vscode-scrollbar-shadow) 0 6px 6px -6px`;\n    }\n    getCurrentLines() {\n        const widgetLineRange = [];\n        for (const codeLine of this.arrayOfCodeLines) {\n            widgetLineRange.push(codeLine.lineNumber);\n        }\n        return widgetLineRange;\n    }\n    pushCodeLine(codeLine) {\n        this.arrayOfCodeLines.push(codeLine);\n    }\n    updateRootNode() {\n        let widgetHeight = 0;\n        for (const line of this.arrayOfCodeLines) {\n            widgetHeight += line.effectiveLineHeight;\n            this.rootDomNode.appendChild(line.getDomNode());\n        }\n        this.rootDomNode.style.height = widgetHeight.toString() + 'px';\n    }\n    emptyRootNode() {\n        this.arrayOfCodeLines.length = 0;\n        dom.clearNode(this.rootDomNode);\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        this.rootDomNode.style.zIndex = '2';\n        this.rootDomNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        return this.rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        const { word, startColumn } = obj;\n        const offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            const ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            const ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = class SmartSelectController {\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(104 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider()); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        const work = [];\n        const allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            const oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            const oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionItemInsertTextRule } from '../../../common/standalone/standaloneEnums.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.incomplete.size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & CompletionItemInsertTextRule.InsertAsSnippet)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(81 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(108 /* EditorOption.suggest */, model), this._getEditorOption(103 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.tokenization.resetTokenization();\n        const sw = new StopWatch(true);\n        model.tokenization.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nexport class ToggleTabFocusModeAction extends EditorAction {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            label: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, \"Toggle Tab Key Moves Focus\"),\n            alias: 'Toggle Tab Key Moves Focus',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const oldValue = TabFocus.getTabFocusMode();\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nregisterEditorAction(ToggleTabFocusModeAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, append, EventHelper } from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../../base/browser/touch.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../common/opener.js';\nimport { textLinkActiveForeground, textLinkForeground } from '../../theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\nlet Link = class Link extends Disposable {\n    constructor(container, _link, options = {}, openerService) {\n        var _a;\n        super();\n        this._link = _link;\n        this._enabled = true;\n        this.el = append(container, $('a.monaco-link', {\n            tabIndex: (_a = _link.tabIndex) !== null && _a !== void 0 ? _a : 0,\n            href: _link.href,\n            title: _link.title\n        }, _link.label));\n        this.el.setAttribute('role', 'button');\n        const onClickEmitter = this._register(new DomEmitter(this.el, 'click'));\n        const onKeyPress = this._register(new DomEmitter(this.el, 'keypress'));\n        const onEnterPress = Event.chain(onKeyPress.event)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 3 /* KeyCode.Enter */)\n            .event;\n        const onTap = this._register(new DomEmitter(this.el, TouchEventType.Tap)).event;\n        this._register(Gesture.addTarget(this.el));\n        const onOpen = Event.any(onClickEmitter.event, onEnterPress, onTap);\n        this._register(onOpen(e => {\n            if (!this.enabled) {\n                return;\n            }\n            EventHelper.stop(e, true);\n            if (options === null || options === void 0 ? void 0 : options.opener) {\n                options.opener(this._link.href);\n            }\n            else {\n                openerService.open(this._link.href, { allowCommands: true });\n            }\n        }));\n        this.enabled = true;\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        if (enabled) {\n            this.el.setAttribute('aria-disabled', 'false');\n            this.el.tabIndex = 0;\n            this.el.style.pointerEvents = 'auto';\n            this.el.style.opacity = '1';\n            this.el.style.cursor = 'pointer';\n            this._enabled = false;\n        }\n        else {\n            this.el.setAttribute('aria-disabled', 'true');\n            this.el.tabIndex = -1;\n            this.el.style.pointerEvents = 'none';\n            this.el.style.opacity = '0.4';\n            this.el.style.cursor = 'default';\n            this._enabled = true;\n        }\n        this._enabled = enabled;\n    }\n};\nLink = __decorate([\n    __param(3, IOpenerService)\n], Link);\nexport { Link };\nregisterThemingParticipant((theme, collector) => {\n    const textLinkForegroundColor = theme.getColor(textLinkForeground);\n    if (textLinkForegroundColor) {\n        collector.addRule(`.monaco-link { color: ${textLinkForegroundColor}; }`);\n    }\n    const textLinkActiveForegroundColor = theme.getColor(textLinkActiveForeground);\n    if (textLinkActiveForegroundColor) {\n        collector.addRule(`.monaco-link:hover { color: ${textLinkActiveForegroundColor}; }`);\n    }\n});\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nlet BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                var _a;\n                this.hide();\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\nexport { BannerController };\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nlet UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(115 /* EditorOption.unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(115 /* EditorOption.unicodeHighlighting */)) {\n                this._options = _editor.getOption(115 /* EditorOption.unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decoration) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decoration);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nexport { UnicodeHighlighter };\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorations.set(decorations);\n        });\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(decoration.range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorations.set(decorations);\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const text = model.getValueInRange(decoration.range);\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nlet UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 4;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */:\n                    reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    break;\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n            const markdown = new MarkdownString('', true)\n                .appendMarkdown(reason)\n                .appendText(' ')\n                .appendLink(uri, adjustSettings);\n            result.push(new MarkdownHover(this, d.range, [markdown], index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nexport { UnicodeHighlighterHoverParticipant };\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* CharCode.BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport class ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nlet UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._config = this._editor.getOption(116 /* EditorOption.unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(116 /* EditorOption.unusualLineTerminators */)) {\n                this._config = this._editor.getOption(116 /* EditorOption.unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(83 /* EditorOption.readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            const result = yield this._dialogService.confirm({\n                title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                primaryButton: nls.localize('unusualLineTerminators.fix', \"Remove Unusual Line Terminators\"),\n                secondaryButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n            });\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nexport { UnusualLineTerminatorsDetector };\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../../../common/services/getSemanticTokens.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../../../common/services/modelService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _modelService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._modelService = _modelService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._modelService.getSemanticTokensProviderStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, first, timeout } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DocumentHighlightKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { activeContrastBorder, editorSelectionHighlight, editorSelectionHighlightBorder, minimapSelectionOccurrenceHighlight, overviewRulerSelectionHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nconst editorWordHighlight = registerColor('editor.wordHighlightBackground', { dark: '#575757B8', light: '#57575740', hcDark: null, hcLight: null }, nls.localize('wordHighlight', 'Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightStrong = registerColor('editor.wordHighlightStrongBackground', { dark: '#004972B8', light: '#0e639c40', hcDark: null, hcLight: null }, nls.localize('wordHighlightStrong', 'Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst editorWordHighlightBorder = registerColor('editor.wordHighlightBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightBorder', 'Border color of a symbol during read-access, like reading a variable.'));\nconst editorWordHighlightStrongBorder = registerColor('editor.wordHighlightStrongBorder', { light: null, dark: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('wordHighlightStrongBorder', 'Border color of a symbol during write-access, like writing to a variable.'));\nconst overviewRulerWordHighlightForeground = registerColor('editorOverviewRuler.wordHighlightForeground', { dark: '#A0A0A0CC', light: '#A0A0A0CC', hcDark: '#A0A0A0CC', hcLight: '#A0A0A0CC' }, nls.localize('overviewRulerWordHighlightForeground', 'Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst overviewRulerWordHighlightStrongForeground = registerColor('editorOverviewRuler.wordHighlightStrongForeground', { dark: '#C0A0C0CC', light: '#C0A0C0CC', hcDark: '#C0A0C0CC', hcLight: '#C0A0C0CC' }, nls.localize('overviewRulerWordHighlightStrongForeground', 'Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations.'), true);\nconst ctxHasWordHighlights = new RawContextKey('hasWordHighlights', false);\nexport function getOccurrencesAtPosition(registry, model, position, token) {\n    const orderedByScore = registry.ordered(model);\n    // in order of score ask the occurrences provider\n    // until someone response with a good result\n    // (good = none empty array)\n    return first(orderedByScore.map(provider => () => {\n        return Promise.resolve(provider.provideDocumentHighlights(model, position, token))\n            .then(undefined, onUnexpectedExternalError);\n    }), arrays.isNonEmptyArray);\n}\nclass OccurenceAtPositionRequest {\n    constructor(_model, _selection, _wordSeparators) {\n        this._model = _model;\n        this._selection = _selection;\n        this._wordSeparators = _wordSeparators;\n        this._wordRange = this._getCurrentWordRange(_model, _selection);\n        this._result = null;\n    }\n    get result() {\n        if (!this._result) {\n            this._result = createCancelablePromise(token => this._compute(this._model, this._selection, this._wordSeparators, token));\n        }\n        return this._result;\n    }\n    _getCurrentWordRange(model, selection) {\n        const word = model.getWordAtPosition(selection.getPosition());\n        if (word) {\n            return new Range(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n        }\n        return null;\n    }\n    isValid(model, selection, decorations) {\n        const lineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endColumn = selection.endColumn;\n        const currentWordRange = this._getCurrentWordRange(model, selection);\n        let requestIsValid = Boolean(this._wordRange && this._wordRange.equalsRange(currentWordRange));\n        // Even if we are on a different word, if that word is in the decorations ranges, the request is still valid\n        // (Same symbol)\n        for (let i = 0, len = decorations.length; !requestIsValid && i < len; i++) {\n            const range = decorations.getRange(i);\n            if (range && range.startLineNumber === lineNumber) {\n                if (range.startColumn <= startColumn && range.endColumn >= endColumn) {\n                    requestIsValid = true;\n                }\n            }\n        }\n        return requestIsValid;\n    }\n    cancel() {\n        this.result.cancel();\n    }\n}\nclass SemanticOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators, providers) {\n        super(model, selection, wordSeparators);\n        this._providers = providers;\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return getOccurrencesAtPosition(this._providers, model, selection.getPosition(), token).then(value => value || []);\n    }\n}\nclass TextualOccurenceAtPositionRequest extends OccurenceAtPositionRequest {\n    constructor(model, selection, wordSeparators) {\n        super(model, selection, wordSeparators);\n        this._selectionIsEmpty = selection.isEmpty();\n    }\n    _compute(model, selection, wordSeparators, token) {\n        return timeout(250, token).then(() => {\n            if (!selection.isEmpty()) {\n                return [];\n            }\n            const word = model.getWordAtPosition(selection.getPosition());\n            if (!word || word.word.length > 1000) {\n                return [];\n            }\n            const matches = model.findMatches(word.word, true, false, true, wordSeparators, false);\n            return matches.map(m => {\n                return {\n                    range: m.range,\n                    kind: DocumentHighlightKind.Text\n                };\n            });\n        });\n    }\n    isValid(model, selection, decorations) {\n        const currentSelectionIsEmpty = selection.isEmpty();\n        if (this._selectionIsEmpty !== currentSelectionIsEmpty) {\n            return false;\n        }\n        return super.isValid(model, selection, decorations);\n    }\n}\nfunction computeOccurencesAtPosition(registry, model, selection, wordSeparators) {\n    if (registry.has(model)) {\n        return new SemanticOccurenceAtPositionRequest(model, selection, wordSeparators, registry);\n    }\n    return new TextualOccurenceAtPositionRequest(model, selection, wordSeparators);\n}\nregisterModelAndPositionCommand('_executeDocumentHighlights', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    return getOccurrencesAtPosition(languageFeaturesService.documentHighlightProvider, model, position, CancellationToken.None);\n});\nclass WordHighlighter {\n    constructor(editor, providers, contextKeyService) {\n        this.toUnhook = new DisposableStore();\n        this.workerRequestTokenId = 0;\n        this.workerRequestCompleted = false;\n        this.workerRequestValue = [];\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n        this.editor = editor;\n        this.providers = providers;\n        this._hasWordHighlights = ctxHasWordHighlights.bindTo(contextKeyService);\n        this._ignorePositionChangeEvent = false;\n        this.occurrencesHighlight = this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n        this.model = this.editor.getModel();\n        this.toUnhook.add(editor.onDidChangeCursorPosition((e) => {\n            if (this._ignorePositionChangeEvent) {\n                // We are changing the position => ignore this event\n                return;\n            }\n            if (!this.occurrencesHighlight) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._onPositionChanged(e);\n        }));\n        this.toUnhook.add(editor.onDidChangeModelContent((e) => {\n            this._stopAll();\n        }));\n        this.toUnhook.add(editor.onDidChangeConfiguration((e) => {\n            const newValue = this.editor.getOption(74 /* EditorOption.occurrencesHighlight */);\n            if (this.occurrencesHighlight !== newValue) {\n                this.occurrencesHighlight = newValue;\n                this._stopAll();\n            }\n        }));\n        this.decorations = this.editor.createDecorationsCollection();\n        this.workerRequestTokenId = 0;\n        this.workerRequest = null;\n        this.workerRequestCompleted = false;\n        this.lastCursorPositionChangeTime = 0;\n        this.renderDecorationsTimer = -1;\n    }\n    hasDecorations() {\n        return (this.decorations.length > 0);\n    }\n    restore() {\n        if (!this.occurrencesHighlight) {\n            return;\n        }\n        this._run();\n    }\n    _getSortedHighlights() {\n        return (this.decorations.getRanges()\n            .sort(Range.compareRangesUsingStarts));\n    }\n    moveNext() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index + 1) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    moveBack() {\n        const highlights = this._getSortedHighlights();\n        const index = highlights.findIndex((range) => range.containsPosition(this.editor.getPosition()));\n        const newIndex = ((index - 1 + highlights.length) % highlights.length);\n        const dest = highlights[newIndex];\n        try {\n            this._ignorePositionChangeEvent = true;\n            this.editor.setPosition(dest.getStartPosition());\n            this.editor.revealRangeInCenterIfOutsideViewport(dest);\n            const word = this._getWord();\n            if (word) {\n                const lineContent = this.editor.getModel().getLineContent(dest.startLineNumber);\n                alert(`${lineContent}, ${newIndex + 1} of ${highlights.length} for '${word.word}'`);\n            }\n        }\n        finally {\n            this._ignorePositionChangeEvent = false;\n        }\n    }\n    _removeDecorations() {\n        if (this.decorations.length > 0) {\n            // remove decorations\n            this.decorations.clear();\n            this._hasWordHighlights.set(false);\n        }\n    }\n    _stopAll() {\n        // Remove any existing decorations\n        this._removeDecorations();\n        // Cancel any renderDecorationsTimer\n        if (this.renderDecorationsTimer !== -1) {\n            clearTimeout(this.renderDecorationsTimer);\n            this.renderDecorationsTimer = -1;\n        }\n        // Cancel any worker request\n        if (this.workerRequest !== null) {\n            this.workerRequest.cancel();\n            this.workerRequest = null;\n        }\n        // Invalidate any worker request callback\n        if (!this.workerRequestCompleted) {\n            this.workerRequestTokenId++;\n            this.workerRequestCompleted = true;\n        }\n    }\n    _onPositionChanged(e) {\n        // disabled\n        if (!this.occurrencesHighlight) {\n            this._stopAll();\n            return;\n        }\n        // ignore typing & other\n        if (e.reason !== 3 /* CursorChangeReason.Explicit */) {\n            this._stopAll();\n            return;\n        }\n        this._run();\n    }\n    _getWord() {\n        const editorSelection = this.editor.getSelection();\n        const lineNumber = editorSelection.startLineNumber;\n        const startColumn = editorSelection.startColumn;\n        return this.model.getWordAtPosition({\n            lineNumber: lineNumber,\n            column: startColumn\n        });\n    }\n    _run() {\n        const editorSelection = this.editor.getSelection();\n        // ignore multiline selection\n        if (editorSelection.startLineNumber !== editorSelection.endLineNumber) {\n            this._stopAll();\n            return;\n        }\n        const startColumn = editorSelection.startColumn;\n        const endColumn = editorSelection.endColumn;\n        const word = this._getWord();\n        // The selection must be inside a word or surround one word at most\n        if (!word || word.startColumn > startColumn || word.endColumn < endColumn) {\n            this._stopAll();\n            return;\n        }\n        // All the effort below is trying to achieve this:\n        // - when cursor is moved to a word, trigger immediately a findOccurrences request\n        // - 250ms later after the last cursor move event, render the occurrences\n        // - no flickering!\n        const workerRequestIsValid = (this.workerRequest && this.workerRequest.isValid(this.model, editorSelection, this.decorations));\n        // There are 4 cases:\n        // a) old workerRequest is valid & completed, renderDecorationsTimer fired\n        // b) old workerRequest is valid & completed, renderDecorationsTimer not fired\n        // c) old workerRequest is valid, but not completed\n        // d) old workerRequest is not valid\n        // For a) no action is needed\n        // For c), member 'lastCursorPositionChangeTime' will be used when installing the timer so no action is needed\n        this.lastCursorPositionChangeTime = (new Date()).getTime();\n        if (workerRequestIsValid) {\n            if (this.workerRequestCompleted && this.renderDecorationsTimer !== -1) {\n                // case b)\n                // Delay the firing of renderDecorationsTimer by an extra 250 ms\n                clearTimeout(this.renderDecorationsTimer);\n                this.renderDecorationsTimer = -1;\n                this._beginRenderDecorations();\n            }\n        }\n        else {\n            // case d)\n            // Stop all previous actions and start fresh\n            this._stopAll();\n            const myRequestId = ++this.workerRequestTokenId;\n            this.workerRequestCompleted = false;\n            this.workerRequest = computeOccurencesAtPosition(this.providers, this.model, this.editor.getSelection(), this.editor.getOption(119 /* EditorOption.wordSeparators */));\n            this.workerRequest.result.then(data => {\n                if (myRequestId === this.workerRequestTokenId) {\n                    this.workerRequestCompleted = true;\n                    this.workerRequestValue = data || [];\n                    this._beginRenderDecorations();\n                }\n            }, onUnexpectedError);\n        }\n    }\n    _beginRenderDecorations() {\n        const currentTime = (new Date()).getTime();\n        const minimumRenderTime = this.lastCursorPositionChangeTime + 250;\n        if (currentTime >= minimumRenderTime) {\n            // Synchronous\n            this.renderDecorationsTimer = -1;\n            this.renderDecorations();\n        }\n        else {\n            // Asynchronous\n            this.renderDecorationsTimer = setTimeout(() => {\n                this.renderDecorations();\n            }, (minimumRenderTime - currentTime));\n        }\n    }\n    renderDecorations() {\n        this.renderDecorationsTimer = -1;\n        const decorations = [];\n        for (const info of this.workerRequestValue) {\n            if (info.range) {\n                decorations.push({\n                    range: info.range,\n                    options: WordHighlighter._getDecorationOptions(info.kind)\n                });\n            }\n        }\n        this.decorations.set(decorations);\n        this._hasWordHighlights.set(this.hasDecorations());\n    }\n    static _getDecorationOptions(kind) {\n        if (kind === DocumentHighlightKind.Write) {\n            return this._WRITE_OPTIONS;\n        }\n        else if (kind === DocumentHighlightKind.Text) {\n            return this._TEXT_OPTIONS;\n        }\n        else {\n            return this._REGULAR_OPTIONS;\n        }\n    }\n    dispose() {\n        this._stopAll();\n        this.toUnhook.dispose();\n    }\n}\nWordHighlighter._WRITE_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight-strong',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlightStrong',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightStrongForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._TEXT_OPTIONS = ModelDecorationOptions.register({\n    description: 'selection-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'selectionHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerSelectionHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nWordHighlighter._REGULAR_OPTIONS = ModelDecorationOptions.register({\n    description: 'word-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'wordHighlight',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerWordHighlightForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapSelectionOccurrenceHighlight),\n        position: MinimapPosition.Inline\n    },\n});\nlet WordHighlighterContribution = class WordHighlighterContribution extends Disposable {\n    constructor(editor, contextKeyService, languageFeaturesService) {\n        super();\n        this.wordHighlighter = null;\n        const createWordHighlighterIfPossible = () => {\n            if (editor.hasModel()) {\n                this.wordHighlighter = new WordHighlighter(editor, languageFeaturesService.documentHighlightProvider, contextKeyService);\n            }\n        };\n        this._register(editor.onDidChangeModel((e) => {\n            if (this.wordHighlighter) {\n                this.wordHighlighter.dispose();\n                this.wordHighlighter = null;\n            }\n            createWordHighlighterIfPossible();\n        }));\n        createWordHighlighterIfPossible();\n    }\n    static get(editor) {\n        return editor.getContribution(WordHighlighterContribution.ID);\n    }\n    saveViewState() {\n        if (this.wordHighlighter && this.wordHighlighter.hasDecorations()) {\n            return true;\n        }\n        return false;\n    }\n    moveNext() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveNext();\n        }\n    }\n    moveBack() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.moveBack();\n        }\n    }\n    restoreViewState(state) {\n        if (this.wordHighlighter && state) {\n            this.wordHighlighter.restore();\n        }\n    }\n    dispose() {\n        if (this.wordHighlighter) {\n            this.wordHighlighter.dispose();\n            this.wordHighlighter = null;\n        }\n        super.dispose();\n    }\n};\nWordHighlighterContribution.ID = 'editor.contrib.wordHighlighter';\nWordHighlighterContribution = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ILanguageFeaturesService)\n], WordHighlighterContribution);\nclass WordHighlightNavigationAction extends EditorAction {\n    constructor(next, opts) {\n        super(opts);\n        this._isNext = next;\n    }\n    run(accessor, editor) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        if (this._isNext) {\n            controller.moveNext();\n        }\n        else {\n            controller.moveBack();\n        }\n    }\n}\nclass NextWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.wordHighlight.next',\n            label: nls.localize('wordHighlight.next.label', \"Go to Next Symbol Highlight\"),\n            alias: 'Go to Next Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass PrevWordHighlightAction extends WordHighlightNavigationAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.wordHighlight.prev',\n            label: nls.localize('wordHighlight.previous.label', \"Go to Previous Symbol Highlight\"),\n            alias: 'Go to Previous Symbol Highlight',\n            precondition: ctxHasWordHighlights,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass TriggerWordHighlightAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.wordHighlight.trigger',\n            label: nls.localize('wordHighlight.trigger.label', \"Trigger Symbol Highlight\"),\n            alias: 'Trigger Symbol Highlight',\n            precondition: ctxHasWordHighlights.toNegated(),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        const controller = WordHighlighterContribution.get(editor);\n        if (!controller) {\n            return;\n        }\n        controller.restoreViewState(true);\n    }\n}\nregisterEditorContribution(WordHighlighterContribution.ID, WordHighlighterContribution);\nregisterEditorAction(NextWordHighlightAction);\nregisterEditorAction(PrevWordHighlightAction);\nregisterEditorAction(TriggerWordHighlightAction);\nregisterThemingParticipant((theme, collector) => {\n    const selectionHighlight = theme.getColor(editorSelectionHighlight);\n    if (selectionHighlight) {\n        collector.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${selectionHighlight}; }`);\n        collector.addRule(`.monaco-editor .selectionHighlight { background-color: ${selectionHighlight.transparent(0.5)}; }`);\n    }\n    const wordHighlight = theme.getColor(editorWordHighlight);\n    if (wordHighlight) {\n        collector.addRule(`.monaco-editor .wordHighlight { background-color: ${wordHighlight}; }`);\n    }\n    const wordHighlightStrong = theme.getColor(editorWordHighlightStrong);\n    if (wordHighlightStrong) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${wordHighlightStrong}; }`);\n    }\n    const selectionHighlightBorder = theme.getColor(editorSelectionHighlightBorder);\n    if (selectionHighlightBorder) {\n        collector.addRule(`.monaco-editor .selectionHighlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${selectionHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightBorder = theme.getColor(editorWordHighlightBorder);\n    if (wordHighlightBorder) {\n        collector.addRule(`.monaco-editor .wordHighlight { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${wordHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const wordHighlightStrongBorder = theme.getColor(editorWordHighlightStrongBorder);\n    if (wordHighlightStrongBorder) {\n        collector.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${wordHighlightStrongBorder}; box-sizing: border-box; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { CursorState } from '../../../common/cursorCommon.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { getMapForWordSeparators } from '../../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\nexport class MoveWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._inSelectionMode = opts.inSelectionMode;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const result = selections.map((sel) => {\n            const inPosition = new Position(sel.positionLineNumber, sel.positionColumn);\n            const outPosition = this._move(wordSeparators, model, inPosition, this._wordNavigationType);\n            return this._moveTo(sel, outPosition, this._inSelectionMode);\n        });\n        model.pushStackElement();\n        editor._getViewModel().setCursorStates('moveWordCommand', 3 /* CursorChangeReason.Explicit */, result.map(r => CursorState.fromModelSelection(r)));\n        if (result.length === 1) {\n            const pos = new Position(result[0].positionLineNumber, result[0].positionColumn);\n            editor.revealPosition(pos, 0 /* ScrollType.Smooth */);\n        }\n    }\n    _moveTo(from, to, inSelectionMode) {\n        if (inSelectionMode) {\n            // move just position\n            return new Selection(from.selectionStartLineNumber, from.selectionStartColumn, to.lineNumber, to.column);\n        }\n        else {\n            // move everything\n            return new Selection(to.lineNumber, to.column, to.lineNumber, to.column);\n        }\n    }\n}\nexport class WordLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordLeft(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class WordRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordOperations.moveWordRight(wordSeparators, model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeft',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeft extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordStartLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndLeftSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordLeftSelect extends WordLeftCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 1 /* WordNavigationType.WordStartFast */,\n            id: 'cursorWordLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Accessibility navigation commands should only be enabled on windows since they are tuned to what NVDA expects\nexport class CursorWordAccessibilityLeft extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeft',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityLeftSelect extends WordLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityLeftSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordStartRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRight extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRight',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordStartRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordStartRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordEndRightSelect extends WordRightCommand {\n    constructor() {\n        var _a;\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordEndRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.textInputFocus, (_a = ContextKeyExpr.and(CONTEXT_ACCESSIBILITY_MODE_ENABLED, IsWindowsContext)) === null || _a === void 0 ? void 0 : _a.negate()),\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordRightSelect',\n            precondition: undefined\n        });\n    }\n}\nexport class CursorWordAccessibilityRight extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRight',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class CursorWordAccessibilityRightSelect extends WordRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 3 /* WordNavigationType.WordAccessibility */,\n            id: 'cursorWordAccessibilityRightSelect',\n            precondition: undefined\n        });\n    }\n    _move(_, model, position, wordNavigationType) {\n        return super._move(getMapForWordSeparators(EditorOptions.wordSeparators.defaultValue), model, position, wordNavigationType);\n    }\n}\nexport class DeleteWordCommand extends EditorCommand {\n    constructor(opts) {\n        super(opts);\n        this._whitespaceHeuristics = opts.whitespaceHeuristics;\n        this._wordNavigationType = opts.wordNavigationType;\n    }\n    runEditorCommand(accessor, editor, args) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const autoClosingBrackets = editor.getOption(5 /* EditorOption.autoClosingBrackets */);\n        const autoClosingQuotes = editor.getOption(8 /* EditorOption.autoClosingQuotes */);\n        const autoClosingPairs = languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getAutoClosingPairs();\n        const viewModel = editor._getViewModel();\n        const commands = selections.map((sel) => {\n            const deleteRange = this._delete({\n                wordSeparators,\n                model,\n                selection: sel,\n                whitespaceHeuristics: this._whitespaceHeuristics,\n                autoClosingDelete: editor.getOption(6 /* EditorOption.autoClosingDelete */),\n                autoClosingBrackets,\n                autoClosingQuotes,\n                autoClosingPairs,\n                autoClosedCharacters: viewModel.getCursorAutoClosedCharacters()\n            }, this._wordNavigationType);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteWordLeftCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordLeft(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordRightCommand extends DeleteWordCommand {\n    _delete(ctx, wordNavigationType) {\n        const r = WordOperations.deleteWordRight(ctx, wordNavigationType);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class DeleteWordStartLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndLeft',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordLeft extends DeleteWordLeftCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteWordStartRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordStartRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordEndRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordEndRight',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteWordRight extends DeleteWordRightCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */,\n                mac: { primary: 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class DeleteInsideWord extends EditorAction {\n    constructor() {\n        super({\n            id: 'deleteInsideWord',\n            precondition: EditorContextKeys.writable,\n            label: nls.localize('deleteInsideWord', \"Delete Word\"),\n            alias: 'Delete Word'\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const wordSeparators = getMapForWordSeparators(editor.getOption(119 /* EditorOption.wordSeparators */));\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const commands = selections.map((sel) => {\n            const deleteRange = WordOperations.deleteInsideWord(wordSeparators, model, sel);\n            return new ReplaceCommand(deleteRange, '');\n        });\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorCommand(new CursorWordStartLeft());\nregisterEditorCommand(new CursorWordEndLeft());\nregisterEditorCommand(new CursorWordLeft());\nregisterEditorCommand(new CursorWordStartLeftSelect());\nregisterEditorCommand(new CursorWordEndLeftSelect());\nregisterEditorCommand(new CursorWordLeftSelect());\nregisterEditorCommand(new CursorWordStartRight());\nregisterEditorCommand(new CursorWordEndRight());\nregisterEditorCommand(new CursorWordRight());\nregisterEditorCommand(new CursorWordStartRightSelect());\nregisterEditorCommand(new CursorWordEndRightSelect());\nregisterEditorCommand(new CursorWordRightSelect());\nregisterEditorCommand(new CursorWordAccessibilityLeft());\nregisterEditorCommand(new CursorWordAccessibilityLeftSelect());\nregisterEditorCommand(new CursorWordAccessibilityRight());\nregisterEditorCommand(new CursorWordAccessibilityRightSelect());\nregisterEditorCommand(new DeleteWordStartLeft());\nregisterEditorCommand(new DeleteWordEndLeft());\nregisterEditorCommand(new DeleteWordLeft());\nregisterEditorCommand(new DeleteWordStartRight());\nregisterEditorCommand(new DeleteWordEndRight());\nregisterEditorCommand(new DeleteWordRight());\nregisterEditorAction(DeleteInsideWord);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { WordPartOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { DeleteWordCommand, MoveWordCommand } from '../../wordOperations/browser/wordOperations.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nexport class DeleteWordPartLeft extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'deleteWordPartLeft',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartLeft(ctx);\n        if (r) {\n            return r;\n        }\n        return new Range(1, 1, 1, 1);\n    }\n}\nexport class DeleteWordPartRight extends DeleteWordCommand {\n    constructor() {\n        super({\n            whitespaceHeuristics: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'deleteWordPartRight',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 20 /* KeyCode.Delete */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _delete(ctx, wordNavigationType) {\n        const r = WordPartOperations.deleteWordPartRight(ctx);\n        if (r) {\n            return r;\n        }\n        const lineCount = ctx.model.getLineCount();\n        const maxColumn = ctx.model.getLineMaxColumn(lineCount);\n        return new Range(lineCount, maxColumn, lineCount, maxColumn);\n    }\n}\nexport class WordPartLeftCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartLeft(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartLeft extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeft',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeft', 'cursorWordPartLeft');\nexport class CursorWordPartLeftSelect extends WordPartLeftCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 0 /* WordNavigationType.WordStart */,\n            id: 'cursorWordPartLeftSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\n// Register previous id for compatibility purposes\nCommandsRegistry.registerCommandAlias('cursorWordPartStartLeftSelect', 'cursorWordPartLeftSelect');\nexport class WordPartRightCommand extends MoveWordCommand {\n    _move(wordSeparators, model, position, wordNavigationType) {\n        return WordPartOperations.moveWordPartRight(wordSeparators, model, position);\n    }\n}\nexport class CursorWordPartRight extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: false,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRight',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nexport class CursorWordPartRightSelect extends WordPartRightCommand {\n    constructor() {\n        super({\n            inSelectionMode: true,\n            wordNavigationType: 2 /* WordNavigationType.WordEnd */,\n            id: 'cursorWordPartRightSelect',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nregisterEditorCommand(new DeleteWordPartLeft());\nregisterEditorCommand(new DeleteWordPartRight());\nregisterEditorCommand(new CursorWordPartLeft());\nregisterEditorCommand(new CursorWordPartLeftSelect());\nregisterEditorCommand(new CursorWordPartRight());\nregisterEditorCommand(new CursorWordPartRightSelect());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport class ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            if (this.editor.isSimpleWidget) {\n                messageController.showMessage(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"), this.editor.getPosition());\n            }\n            else {\n                messageController.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this.editor.getPosition());\n            }\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './accessibilityHelp.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ToggleTabFocusModeAction } from '../../../contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { contrastBorder, editorWidgetBackground, widgetShadow, editorWidgetForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { AccessibilityHelpNLS } from '../../../common/standaloneStrings.js';\nconst CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE = new RawContextKey('accessibilityHelpWidgetVisible', false);\nlet AccessibilityHelpController = class AccessibilityHelpController extends Disposable {\n    constructor(editor, instantiationService) {\n        super();\n        this._editor = editor;\n        this._widget = this._register(instantiationService.createInstance(AccessibilityHelpWidget, this._editor));\n    }\n    static get(editor) {\n        return editor.getContribution(AccessibilityHelpController.ID);\n    }\n    show() {\n        this._widget.show();\n    }\n    hide() {\n        this._widget.hide();\n    }\n};\nAccessibilityHelpController.ID = 'editor.contrib.accessibilityHelpController';\nAccessibilityHelpController = __decorate([\n    __param(1, IInstantiationService)\n], AccessibilityHelpController);\nfunction getSelectionLabel(selections, charactersSelected) {\n    if (!selections || selections.length === 0) {\n        return AccessibilityHelpNLS.noSelection;\n    }\n    if (selections.length === 1) {\n        if (charactersSelected) {\n            return strings.format(AccessibilityHelpNLS.singleSelectionRange, selections[0].positionLineNumber, selections[0].positionColumn, charactersSelected);\n        }\n        return strings.format(AccessibilityHelpNLS.singleSelection, selections[0].positionLineNumber, selections[0].positionColumn);\n    }\n    if (charactersSelected) {\n        return strings.format(AccessibilityHelpNLS.multiSelectionRange, selections.length, charactersSelected);\n    }\n    if (selections.length > 0) {\n        return strings.format(AccessibilityHelpNLS.multiSelection, selections.length);\n    }\n    return '';\n}\nlet AccessibilityHelpWidget = class AccessibilityHelpWidget extends Widget {\n    constructor(editor, _contextKeyService, _keybindingService, _openerService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._openerService = _openerService;\n        this._editor = editor;\n        this._isVisibleKey = CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE.bindTo(this._contextKeyService);\n        this._domNode = createFastDomNode(document.createElement('div'));\n        this._domNode.setClassName('accessibilityHelpWidget');\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('role', 'dialog');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode = createFastDomNode(document.createElement('div'));\n        this._contentDomNode.setAttribute('role', 'document');\n        this._domNode.appendChild(this._contentDomNode);\n        this._isVisible = false;\n        this._register(this._editor.onDidLayoutChange(() => {\n            if (this._isVisible) {\n                this._layout();\n            }\n        }));\n        // Intentionally not configurable!\n        this._register(dom.addStandardDisposableListener(this._contentDomNode.domNode, 'keydown', (e) => {\n            if (!this._isVisible) {\n                return;\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */)) {\n                alert(AccessibilityHelpNLS.emergencyConfOn);\n                this._editor.updateOptions({\n                    accessibilitySupport: 'on'\n                });\n                dom.clearNode(this._contentDomNode.domNode);\n                this._buildContent();\n                this._contentDomNode.domNode.focus();\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            if (e.equals(2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */)) {\n                alert(AccessibilityHelpNLS.openingDocs);\n                let url = this._editor.getRawOptions().accessibilityHelpUrl;\n                if (typeof url === 'undefined') {\n                    url = 'https://go.microsoft.com/fwlink/?linkid=852450';\n                }\n                this._openerService.open(URI.parse(url));\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }));\n        this.onblur(this._contentDomNode.domNode, () => {\n            this.hide();\n        });\n        this._editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return AccessibilityHelpWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode.domNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n    show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._isVisibleKey.set(true);\n        this._layout();\n        this._domNode.setDisplay('block');\n        this._domNode.setAttribute('aria-hidden', 'false');\n        this._contentDomNode.domNode.tabIndex = 0;\n        this._buildContent();\n        this._contentDomNode.domNode.focus();\n    }\n    _descriptionForCommand(commandId, msg, noKbMsg) {\n        const kb = this._keybindingService.lookupKeybinding(commandId);\n        if (kb) {\n            return strings.format(msg, kb.getAriaLabel());\n        }\n        return strings.format(noKbMsg, commandId);\n    }\n    _buildContent() {\n        const options = this._editor.getOptions();\n        const selections = this._editor.getSelections();\n        let charactersSelected = 0;\n        if (selections) {\n            const model = this._editor.getModel();\n            if (model) {\n                selections.forEach((selection) => {\n                    charactersSelected += model.getValueLengthInRange(selection);\n                });\n            }\n        }\n        let text = getSelectionLabel(selections, charactersSelected);\n        if (options.get(56 /* EditorOption.inDiffEditor */)) {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyDiffEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableDiffEditor;\n            }\n        }\n        else {\n            if (options.get(83 /* EditorOption.readOnly */)) {\n                text += AccessibilityHelpNLS.readonlyEditor;\n            }\n            else {\n                text += AccessibilityHelpNLS.editableEditor;\n            }\n        }\n        const turnOnMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.changeConfigToOnMac\n            : AccessibilityHelpNLS.changeConfigToOnWinLinux);\n        switch (options.get(2 /* EditorOption.accessibilitySupport */)) {\n            case 0 /* AccessibilitySupport.Unknown */:\n                text += '\\n\\n - ' + turnOnMessage;\n                break;\n            case 2 /* AccessibilitySupport.Enabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_on;\n                break;\n            case 1 /* AccessibilitySupport.Disabled */:\n                text += '\\n\\n - ' + AccessibilityHelpNLS.auto_off;\n                text += ' ' + turnOnMessage;\n                break;\n        }\n        if (options.get(132 /* EditorOption.tabFocusMode */)) {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOnMsg, AccessibilityHelpNLS.tabFocusModeOnMsgNoKb);\n        }\n        else {\n            text += '\\n\\n - ' + this._descriptionForCommand(ToggleTabFocusModeAction.ID, AccessibilityHelpNLS.tabFocusModeOffMsg, AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);\n        }\n        const openDocMessage = (platform.isMacintosh\n            ? AccessibilityHelpNLS.openDocMac\n            : AccessibilityHelpNLS.openDocWinLinux);\n        text += '\\n\\n - ' + openDocMessage;\n        text += '\\n\\n' + AccessibilityHelpNLS.outroMsg;\n        this._contentDomNode.domNode.appendChild(renderFormattedText(text));\n        // Per https://www.w3.org/TR/wai-aria/roles#document, Authors SHOULD provide a title or label for documents\n        this._contentDomNode.domNode.setAttribute('aria-label', text);\n    }\n    hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._isVisibleKey.reset();\n        this._domNode.setDisplay('none');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._contentDomNode.domNode.tabIndex = -1;\n        dom.clearNode(this._contentDomNode.domNode);\n        this._editor.focus();\n    }\n    _layout() {\n        const editorLayout = this._editor.getLayoutInfo();\n        const w = Math.max(5, Math.min(AccessibilityHelpWidget.WIDTH, editorLayout.width - 40));\n        const h = Math.max(5, Math.min(AccessibilityHelpWidget.HEIGHT, editorLayout.height - 40));\n        this._domNode.setWidth(w);\n        this._domNode.setHeight(h);\n        const top = Math.round((editorLayout.height - h) / 2);\n        this._domNode.setTop(top);\n        const left = Math.round((editorLayout.width - w) / 2);\n        this._domNode.setLeft(left);\n    }\n};\nAccessibilityHelpWidget.ID = 'editor.contrib.accessibilityHelpWidget';\nAccessibilityHelpWidget.WIDTH = 500;\nAccessibilityHelpWidget.HEIGHT = 300;\nAccessibilityHelpWidget = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IKeybindingService),\n    __param(3, IOpenerService)\n], AccessibilityHelpWidget);\nclass ShowAccessibilityHelpAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showAccessibilityHelp',\n            label: AccessibilityHelpNLS.showAccessibilityHelpAction,\n            alias: 'Show Accessibility Help',\n            precondition: undefined,\n            kbOpts: {\n                primary: 512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                linux: {\n                    primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 59 /* KeyCode.F1 */,\n                    secondary: [512 /* KeyMod.Alt */ | 59 /* KeyCode.F1 */]\n                }\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = AccessibilityHelpController.get(editor);\n        if (controller) {\n            controller.show();\n        }\n    }\n}\nregisterEditorContribution(AccessibilityHelpController.ID, AccessibilityHelpController);\nregisterEditorAction(ShowAccessibilityHelpAction);\nconst AccessibilityHelpCommand = EditorCommand.bindToContribution(AccessibilityHelpController.get);\nregisterEditorCommand(new AccessibilityHelpCommand({\n    id: 'closeAccessibilityHelp',\n    precondition: CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE,\n    handler: x => x.hide(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 100,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterThemingParticipant((theme, collector) => {\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    if (widgetBackground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${widgetBackground}; }`);\n    }\n    const widgetForeground = theme.getColor(editorWidgetForeground);\n    if (widgetForeground) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${widgetForeground}; }`);\n    }\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${widgetShadowColor}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${hcBorder}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(83 /* EditorOption.readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { editorHoverBackground, editorHoverBorder, editorHoverForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nlet InspectTokensController = class InspectTokensController extends Disposable {\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\n    }\n    static get(editor) {\n        return editor.getContribution(InspectTokensController.ID);\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        if (controller) {\n            controller.launch();\n        }\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* CharCode.Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* CharCode.Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* StandardTokenType.Other */: return 'Other';\n            case 1 /* StandardTokenType.Comment */: return 'Comment';\n            case 2 /* StandardTokenType.String */: return 'String';\n            case 3 /* StandardTokenType.RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* FontStyle.Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* FontStyle.Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* FontStyle.Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* FontStyle.Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController);\nregisterEditorAction(InspectTokens);\nregisterThemingParticipant((theme, collector) => {\n    const border = theme.getColor(editorHoverBorder);\n    if (border) {\n        const borderWidth = isHighContrast(theme.type) ? 2 : 1;\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { border: ${borderWidth}px solid ${border}; }`);\n        collector.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${border}; }`);\n    }\n    const background = theme.getColor(editorHoverBackground);\n    if (background) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${background}; }`);\n    }\n    const foreground = theme.getColor(editorHoverForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .tokens-inspect-widget { color: ${foreground}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { localize } from '../../../nls.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { Extensions } from '../common/quickAccess.js';\nimport { IQuickInputService } from '../common/quickInput.js';\nlet HelpQuickAccessProvider = class HelpQuickAccessProvider {\n    constructor(quickInputService, keybindingService) {\n        this.quickInputService = quickInputService;\n        this.keybindingService = keybindingService;\n        this.registry = Registry.as(Extensions.Quickaccess);\n    }\n    provide(picker) {\n        const disposables = new DisposableStore();\n        // Open a picker with the selected value if picked\n        disposables.add(picker.onDidAccept(() => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                this.quickInputService.quickAccess.show(item.prefix, { preserveValue: true });\n            }\n        }));\n        // Also open a picker when we detect the user typed the exact\n        // name of a provider (e.g. `?term` for terminals)\n        disposables.add(picker.onDidChangeValue(value => {\n            const providerDescriptor = this.registry.getQuickAccessProvider(value.substr(HelpQuickAccessProvider.PREFIX.length));\n            if (providerDescriptor && providerDescriptor.prefix && providerDescriptor.prefix !== HelpQuickAccessProvider.PREFIX) {\n                this.quickInputService.quickAccess.show(providerDescriptor.prefix, { preserveValue: true });\n            }\n        }));\n        // Fill in all providers\n        picker.items = this.getQuickAccessProviders();\n        return disposables;\n    }\n    getQuickAccessProviders() {\n        const providers = [];\n        for (const provider of this.registry.getQuickAccessProviders().sort((providerA, providerB) => providerA.prefix.localeCompare(providerB.prefix))) {\n            if (provider.prefix === HelpQuickAccessProvider.PREFIX) {\n                continue; // exclude help which is already active\n            }\n            for (const helpEntry of provider.helpEntries) {\n                const prefix = helpEntry.prefix || provider.prefix;\n                const label = prefix || '\\u2026' /* ... */;\n                providers.push({\n                    prefix,\n                    label,\n                    keybinding: helpEntry.commandId ? this.keybindingService.lookupKeybinding(helpEntry.commandId) : undefined,\n                    ariaLabel: localize('helpPickAriaLabel', \"{0}, {1}\", label, helpEntry.description),\n                    description: helpEntry.description\n                });\n            }\n        }\n        return providers;\n    }\n};\nHelpQuickAccessProvider.PREFIX = '?';\nHelpQuickAccessProvider = __decorate([\n    __param(0, IQuickInputService),\n    __param(1, IKeybindingService)\n], HelpQuickAccessProvider);\nexport { HelpQuickAccessProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: HelpQuickAccessProvider,\n    prefix: '',\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(62 /* EditorOption.lineNumbers */);\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n    constructor(editorService) {\n        super();\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: GoToLineNLS.gotoLineActionLabel,\n            alias: 'Go to Line/Column...',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.gotoLine';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoLineQuickAccessProvider,\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, commandId: GotoLineAction.ID }]\n});\n","import { createMatches as createFuzzyMatches, fuzzyScore } from './filters.js';\nimport { sep } from './path.js';\nimport { isWindows } from './platform.js';\nimport { stripWildcards } from './strings.js';\nconst NO_SCORE2 = [undefined, []];\nexport function scoreFuzzy2(target, query, patternStart = 0, wordStart = 0) {\n    // Score: multiple inputs\n    const preparedQuery = query;\n    if (preparedQuery.values && preparedQuery.values.length > 1) {\n        return doScoreFuzzy2Multiple(target, preparedQuery.values, patternStart, wordStart);\n    }\n    // Score: single input\n    return doScoreFuzzy2Single(target, query, patternStart, wordStart);\n}\nfunction doScoreFuzzy2Multiple(target, query, patternStart, wordStart) {\n    let totalScore = 0;\n    const totalMatches = [];\n    for (const queryPiece of query) {\n        const [score, matches] = doScoreFuzzy2Single(target, queryPiece, patternStart, wordStart);\n        if (typeof score !== 'number') {\n            // if a single query value does not match, return with\n            // no score entirely, we require all queries to match\n            return NO_SCORE2;\n        }\n        totalScore += score;\n        totalMatches.push(...matches);\n    }\n    // if we have a score, ensure that the positions are\n    // sorted in ascending order and distinct\n    return [totalScore, normalizeMatches(totalMatches)];\n}\nfunction doScoreFuzzy2Single(target, query, patternStart, wordStart) {\n    const score = fuzzyScore(query.original, query.originalLowercase, patternStart, target, target.toLowerCase(), wordStart, { firstMatchCanBeWeak: true, boostFullMatch: true });\n    if (!score) {\n        return NO_SCORE2;\n    }\n    return [score[0], createFuzzyMatches(score)];\n}\nconst NO_ITEM_SCORE = Object.freeze({ score: 0 });\nfunction normalizeMatches(matches) {\n    // sort matches by start to be able to normalize\n    const sortedMatches = matches.sort((matchA, matchB) => {\n        return matchA.start - matchB.start;\n    });\n    // merge matches that overlap\n    const normalizedMatches = [];\n    let currentMatch = undefined;\n    for (const match of sortedMatches) {\n        // if we have no current match or the matches\n        // do not overlap, we take it as is and remember\n        // it for future merging\n        if (!currentMatch || !matchOverlaps(currentMatch, match)) {\n            currentMatch = match;\n            normalizedMatches.push(match);\n        }\n        // otherwise we merge the matches\n        else {\n            currentMatch.start = Math.min(currentMatch.start, match.start);\n            currentMatch.end = Math.max(currentMatch.end, match.end);\n        }\n    }\n    return normalizedMatches;\n}\nfunction matchOverlaps(matchA, matchB) {\n    if (matchA.end < matchB.start) {\n        return false; // A ends before B starts\n    }\n    if (matchB.end < matchA.start) {\n        return false; // B ends before A starts\n    }\n    return true;\n}\n/*\n * If a query is wrapped in quotes, the user does not want to\n * use fuzzy search for this query.\n */\nfunction queryExpectsExactMatch(query) {\n    return query.startsWith('\"') && query.endsWith('\"');\n}\n/**\n * Helper function to prepare a search value for scoring by removing unwanted characters\n * and allowing to score on multiple pieces separated by whitespace character.\n */\nconst MULTIPLE_QUERY_VALUES_SEPARATOR = ' ';\nexport function prepareQuery(original) {\n    if (typeof original !== 'string') {\n        original = '';\n    }\n    const originalLowercase = original.toLowerCase();\n    const { pathNormalized, normalized, normalizedLowercase } = normalizeQuery(original);\n    const containsPathSeparator = pathNormalized.indexOf(sep) >= 0;\n    const expectExactMatch = queryExpectsExactMatch(original);\n    let values = undefined;\n    const originalSplit = original.split(MULTIPLE_QUERY_VALUES_SEPARATOR);\n    if (originalSplit.length > 1) {\n        for (const originalPiece of originalSplit) {\n            const expectExactMatchPiece = queryExpectsExactMatch(originalPiece);\n            const { pathNormalized: pathNormalizedPiece, normalized: normalizedPiece, normalizedLowercase: normalizedLowercasePiece } = normalizeQuery(originalPiece);\n            if (normalizedPiece) {\n                if (!values) {\n                    values = [];\n                }\n                values.push({\n                    original: originalPiece,\n                    originalLowercase: originalPiece.toLowerCase(),\n                    pathNormalized: pathNormalizedPiece,\n                    normalized: normalizedPiece,\n                    normalizedLowercase: normalizedLowercasePiece,\n                    expectContiguousMatch: expectExactMatchPiece\n                });\n            }\n        }\n    }\n    return { original, originalLowercase, pathNormalized, normalized, normalizedLowercase, values, containsPathSeparator, expectContiguousMatch: expectExactMatch };\n}\nfunction normalizeQuery(original) {\n    let pathNormalized;\n    if (isWindows) {\n        pathNormalized = original.replace(/\\//g, sep); // Help Windows users to search for paths when using slash\n    }\n    else {\n        pathNormalized = original.replace(/\\\\/g, sep); // Help macOS/Linux users to search for paths when using backslash\n    }\n    // we remove quotes here because quotes are used for exact match search\n    const normalized = stripWildcards(pathNormalized).replace(/\\s|\"/g, '');\n    return {\n        pathNormalized,\n        normalized,\n        normalizedLowercase: normalized.toLowerCase()\n    };\n}\nexport function pieceToQuery(arg1) {\n    if (Array.isArray(arg1)) {\n        return prepareQuery(arg1.map(piece => piece.original).join(MULTIPLE_QUERY_VALUES_SEPARATOR));\n    }\n    return prepareQuery(arg1.original);\n}\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arrays.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        var _a;\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = (positionToEnclose) => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                    if (positionToEnclose && query.original.length === 0) {\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n                        if (candidate) {\n                            picker.activeItems = [candidate];\n                        }\n                    }\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\n        // Reveal and decorate when active item changes\n        // However, ignore the very first two events so that\n        // opening the picker is not immediately revealing\n        // and decorating the first entry.\n        let ignoreFirstActiveEvent = 2;\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                if (ignoreFirstActiveEvent-- > 0) {\n                    return;\n                }\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel}  ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons: (() => {\n                        var _a, _b;\n                        const openSideBySideDirection = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) ? (_b = this.options) === null || _b === void 0 ? void 0 : _b.openSideBySideDirection() : undefined;\n                        if (!openSideBySideDirection) {\n                            return undefined;\n                        }\n                        return [\n                            {\n                                iconClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n                                tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                            }\n                        ];\n                    })()\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n    constructor(editorService, languageFeaturesService, outlineModelService) {\n        super(languageFeaturesService, outlineModelService);\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        return withNullAsUndefined(this.editorService.getFocusedCodeEditor());\n    }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ILanguageFeaturesService),\n    __param(2, IOutlineModelService)\n], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nexport class GotoSymbolAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoSymbolAction.ID,\n            label: QuickOutlineNLS.quickOutlineActionLabel,\n            alias: 'Go to Symbol...',\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 3\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX);\n    }\n}\nGotoSymbolAction.ID = 'editor.action.quickOutline';\nregisterEditorAction(GotoSymbolAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    helpEntries: [\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, commandId: GotoSymbolAction.ID },\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY }\n    ]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from './arrays.js';\nimport * as types from './types.js';\nimport * as nls from '../../nls.js';\nfunction exceptionToErrorMessage(exception, verbose) {\n    if (verbose && (exception.stack || exception.stacktrace)) {\n        return nls.localize('stackTrace.format', \"{0}: {1}\", detectSystemErrorMessage(exception), stackToString(exception.stack) || stackToString(exception.stacktrace));\n    }\n    return detectSystemErrorMessage(exception);\n}\nfunction stackToString(stack) {\n    if (Array.isArray(stack)) {\n        return stack.join('\\n');\n    }\n    return stack;\n}\nfunction detectSystemErrorMessage(exception) {\n    // See https://nodejs.org/api/errors.html#errors_class_system_error\n    if (typeof exception.code === 'string' && typeof exception.errno === 'number' && typeof exception.syscall === 'string') {\n        return nls.localize('nodeExceptionMessage', \"A system error occurred ({0})\", exception.message);\n    }\n    return exception.message || nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n/**\n * Tries to generate a human readable error message out of the error. If the verbose parameter\n * is set to true, the error message will include stacktrace details if provided.\n *\n * @returns A string containing the error message.\n */\nexport function toErrorMessage(error = null, verbose = false) {\n    if (!error) {\n        return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n    }\n    if (Array.isArray(error)) {\n        const errors = arrays.coalesce(error);\n        const msg = toErrorMessage(errors[0], verbose);\n        if (errors.length > 1) {\n            return nls.localize('error.moreErrors', \"{0} ({1} errors in total)\", msg, errors.length);\n        }\n        return msg;\n    }\n    if (types.isString(error)) {\n        return error;\n    }\n    if (error.detail) {\n        const detail = error.detail;\n        if (detail.error) {\n            return exceptionToErrorMessage(detail.error, verbose);\n        }\n        if (detail.exception) {\n            return exceptionToErrorMessage(detail.exception, verbose);\n        }\n    }\n    if (error.stack) {\n        return exceptionToErrorMessage(error, verbose);\n    }\n    if (error.message) {\n        return error.message;\n    }\n    return nls.localize('error.defaultMessage', \"An unknown error occurred. Please consult the log for more details.\");\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { timeout } from '../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nexport var TriggerAction;\n(function (TriggerAction) {\n    /**\n     * Do nothing after the button was clicked.\n     */\n    TriggerAction[TriggerAction[\"NO_ACTION\"] = 0] = \"NO_ACTION\";\n    /**\n     * Close the picker.\n     */\n    TriggerAction[TriggerAction[\"CLOSE_PICKER\"] = 1] = \"CLOSE_PICKER\";\n    /**\n     * Update the results of the picker.\n     */\n    TriggerAction[TriggerAction[\"REFRESH_PICKER\"] = 2] = \"REFRESH_PICKER\";\n    /**\n     * Remove the item from the picker.\n     */\n    TriggerAction[TriggerAction[\"REMOVE_ITEM\"] = 3] = \"REMOVE_ITEM\";\n})(TriggerAction || (TriggerAction = {}));\nfunction isPicksWithActive(obj) {\n    const candidate = obj;\n    return Array.isArray(candidate.items);\n}\nfunction isFastAndSlowPicks(obj) {\n    const candidate = obj;\n    return !!candidate.picks && candidate.additionalPicks instanceof Promise;\n}\nexport class PickerQuickAccessProvider extends Disposable {\n    constructor(prefix, options) {\n        super();\n        this.prefix = prefix;\n        this.options = options;\n    }\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const picksDisposable = disposables.add(new MutableDisposable());\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            const picksDisposables = picksDisposable.value = new DisposableStore();\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect picks and support both long running and short or combined\n            const picksToken = picksCts.token;\n            const picksFilter = picker.value.substr(this.prefix.length).trim();\n            const providedPicks = this._getPicks(picksFilter, picksDisposables, picksToken);\n            const applyPicks = (picks, skipEmpty) => {\n                var _a;\n                let items;\n                let activeItem = undefined;\n                if (isPicksWithActive(picks)) {\n                    items = picks.items;\n                    activeItem = picks.active;\n                }\n                else {\n                    items = picks;\n                }\n                if (items.length === 0) {\n                    if (skipEmpty) {\n                        return false;\n                    }\n                    if (picksFilter.length > 0 && ((_a = this.options) === null || _a === void 0 ? void 0 : _a.noResultsPick)) {\n                        items = [this.options.noResultsPick];\n                    }\n                }\n                picker.items = items;\n                if (activeItem) {\n                    picker.activeItems = [activeItem];\n                }\n                return true;\n            };\n            // No Picks\n            if (providedPicks === null) {\n                // Ignore\n            }\n            // Fast and Slow Picks\n            else if (isFastAndSlowPicks(providedPicks)) {\n                let fastPicksApplied = false;\n                let slowPicksApplied = false;\n                yield Promise.all([\n                    // Fast Picks: to reduce amount of flicker, we race against\n                    // the slow picks over 500ms and then set the fast picks.\n                    // If the slow picks are faster, we reduce the flicker by\n                    // only setting the items once.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        yield timeout(PickerQuickAccessProvider.FAST_PICKS_RACE_DELAY);\n                        if (picksToken.isCancellationRequested) {\n                            return;\n                        }\n                        if (!slowPicksApplied) {\n                            fastPicksApplied = applyPicks(providedPicks.picks, true /* skip over empty to reduce flicker */);\n                        }\n                    }))(),\n                    // Slow Picks: we await the slow picks and then set them at\n                    // once together with the fast picks, but only if we actually\n                    // have additional results.\n                    (() => __awaiter(this, void 0, void 0, function* () {\n                        picker.busy = true;\n                        try {\n                            const awaitedAdditionalPicks = yield providedPicks.additionalPicks;\n                            if (picksToken.isCancellationRequested) {\n                                return;\n                            }\n                            let picks;\n                            let activePick = undefined;\n                            if (isPicksWithActive(providedPicks.picks)) {\n                                picks = providedPicks.picks.items;\n                                activePick = providedPicks.picks.active;\n                            }\n                            else {\n                                picks = providedPicks.picks;\n                            }\n                            let additionalPicks;\n                            let additionalActivePick = undefined;\n                            if (isPicksWithActive(awaitedAdditionalPicks)) {\n                                additionalPicks = awaitedAdditionalPicks.items;\n                                additionalActivePick = awaitedAdditionalPicks.active;\n                            }\n                            else {\n                                additionalPicks = awaitedAdditionalPicks;\n                            }\n                            if (additionalPicks.length > 0 || !fastPicksApplied) {\n                                // If we do not have any activePick or additionalActivePick\n                                // we try to preserve the currently active pick from the\n                                // fast results. This fixes an issue where the user might\n                                // have made a pick active before the additional results\n                                // kick in.\n                                // See https://github.com/microsoft/vscode/issues/102480\n                                let fallbackActivePick = undefined;\n                                if (!activePick && !additionalActivePick) {\n                                    const fallbackActivePickCandidate = picker.activeItems[0];\n                                    if (fallbackActivePickCandidate && picks.indexOf(fallbackActivePickCandidate) !== -1) {\n                                        fallbackActivePick = fallbackActivePickCandidate;\n                                    }\n                                }\n                                applyPicks({\n                                    items: [...picks, ...additionalPicks],\n                                    active: activePick || additionalActivePick || fallbackActivePick\n                                });\n                            }\n                        }\n                        finally {\n                            if (!picksToken.isCancellationRequested) {\n                                picker.busy = false;\n                            }\n                            slowPicksApplied = true;\n                        }\n                    }))()\n                ]);\n            }\n            // Fast Picks\n            else if (!(providedPicks instanceof Promise)) {\n                applyPicks(providedPicks);\n            }\n            // Slow Picks\n            else {\n                picker.busy = true;\n                try {\n                    const awaitedPicks = yield providedPicks;\n                    if (picksToken.isCancellationRequested) {\n                        return;\n                    }\n                    applyPicks(awaitedPicks);\n                }\n                finally {\n                    if (!picksToken.isCancellationRequested) {\n                        picker.busy = false;\n                    }\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Accept the pick on accept and hide picker\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (typeof (item === null || item === void 0 ? void 0 : item.accept) === 'function') {\n                if (!event.inBackground) {\n                    picker.hide(); // hide picker unless we accept in background\n                }\n                item.accept(picker.keyMods, event);\n            }\n        }));\n        // Trigger the pick with button index if button triggered\n        disposables.add(picker.onDidTriggerItemButton(({ button, item }) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            if (typeof item.trigger === 'function') {\n                const buttonIndex = (_c = (_b = item.buttons) === null || _b === void 0 ? void 0 : _b.indexOf(button)) !== null && _c !== void 0 ? _c : -1;\n                if (buttonIndex >= 0) {\n                    const result = item.trigger(buttonIndex, picker.keyMods);\n                    const action = (typeof result === 'number') ? result : yield result;\n                    if (token.isCancellationRequested) {\n                        return;\n                    }\n                    switch (action) {\n                        case TriggerAction.NO_ACTION:\n                            break;\n                        case TriggerAction.CLOSE_PICKER:\n                            picker.hide();\n                            break;\n                        case TriggerAction.REFRESH_PICKER:\n                            updatePickerItems();\n                            break;\n                        case TriggerAction.REMOVE_ITEM: {\n                            const index = picker.items.indexOf(item);\n                            if (index !== -1) {\n                                const items = picker.items.slice();\n                                const removed = items.splice(index, 1);\n                                const activeItems = picker.activeItems.filter(activeItem => activeItem !== removed[0]);\n                                const keepScrollPositionBefore = picker.keepScrollPosition;\n                                picker.keepScrollPosition = true;\n                                picker.items = items;\n                                if (activeItems) {\n                                    picker.activeItems = activeItems;\n                                }\n                                picker.keepScrollPosition = keepScrollPositionBefore;\n                            }\n                            break;\n                        }\n                    }\n                }\n            }\n        })));\n        return disposables;\n    }\n}\nPickerQuickAccessProvider.FAST_PICKS_RACE_DELAY = 200; // timeout before we accept fast results before slow results are present\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { matchesContiguousSubString, matchesPrefix, matchesWords, or } from '../../../base/common/filters.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../base/common/map.js';\nimport Severity from '../../../base/common/severity.js';\nimport { withNullAsUndefined } from '../../../base/common/types.js';\nimport { localize } from '../../../nls.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IDialogService } from '../../dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { PickerQuickAccessProvider } from './pickerQuickAccess.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nlet AbstractCommandsQuickAccessProvider = class AbstractCommandsQuickAccessProvider extends PickerQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(AbstractCommandsQuickAccessProvider.PREFIX, options);\n        this.instantiationService = instantiationService;\n        this.keybindingService = keybindingService;\n        this.commandService = commandService;\n        this.telemetryService = telemetryService;\n        this.dialogService = dialogService;\n        this.commandsHistory = this._register(this.instantiationService.createInstance(CommandsHistory));\n        this.options = options;\n    }\n    _getPicks(filter, disposables, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Ask subclass for all command picks\n            const allCommandPicks = yield this.getCommandPicks(disposables, token);\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            // Filter\n            const filteredCommandPicks = [];\n            for (const commandPick of allCommandPicks) {\n                const labelHighlights = withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.label));\n                const aliasHighlights = commandPick.commandAlias ? withNullAsUndefined(AbstractCommandsQuickAccessProvider.WORD_FILTER(filter, commandPick.commandAlias)) : undefined;\n                // Add if matching in label or alias\n                if (labelHighlights || aliasHighlights) {\n                    commandPick.highlights = {\n                        label: labelHighlights,\n                        detail: this.options.showAlias ? aliasHighlights : undefined\n                    };\n                    filteredCommandPicks.push(commandPick);\n                }\n                // Also add if we have a 100% command ID match\n                else if (filter === commandPick.commandId) {\n                    filteredCommandPicks.push(commandPick);\n                }\n            }\n            // Add description to commands that have duplicate labels\n            const mapLabelToCommand = new Map();\n            for (const commandPick of filteredCommandPicks) {\n                const existingCommandForLabel = mapLabelToCommand.get(commandPick.label);\n                if (existingCommandForLabel) {\n                    commandPick.description = commandPick.commandId;\n                    existingCommandForLabel.description = existingCommandForLabel.commandId;\n                }\n                else {\n                    mapLabelToCommand.set(commandPick.label, commandPick);\n                }\n            }\n            // Sort by MRU order and fallback to name otherwise\n            filteredCommandPicks.sort((commandPickA, commandPickB) => {\n                const commandACounter = this.commandsHistory.peek(commandPickA.commandId);\n                const commandBCounter = this.commandsHistory.peek(commandPickB.commandId);\n                if (commandACounter && commandBCounter) {\n                    return commandACounter > commandBCounter ? -1 : 1; // use more recently used command before older\n                }\n                if (commandACounter) {\n                    return -1; // first command was used, so it wins over the non used one\n                }\n                if (commandBCounter) {\n                    return 1; // other command was used so it wins over the command\n                }\n                // both commands were never used, so we sort by name\n                return commandPickA.label.localeCompare(commandPickB.label);\n            });\n            const commandPicks = [];\n            let addSeparator = false;\n            for (let i = 0; i < filteredCommandPicks.length; i++) {\n                const commandPick = filteredCommandPicks[i];\n                const keybinding = this.keybindingService.lookupKeybinding(commandPick.commandId);\n                const ariaLabel = keybinding ?\n                    localize('commandPickAriaLabelWithKeybinding', \"{0}, {1}\", commandPick.label, keybinding.getAriaLabel()) :\n                    commandPick.label;\n                // Separator: recently used\n                if (i === 0 && this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('recentlyUsed', \"recently used\") });\n                    addSeparator = true;\n                }\n                // Separator: other commands\n                if (i !== 0 && addSeparator && !this.commandsHistory.peek(commandPick.commandId)) {\n                    commandPicks.push({ type: 'separator', label: localize('morecCommands', \"other commands\") });\n                    addSeparator = false; // only once\n                }\n                // Command\n                commandPicks.push(Object.assign(Object.assign({}, commandPick), { ariaLabel, detail: this.options.showAlias && commandPick.commandAlias !== commandPick.label ? commandPick.commandAlias : undefined, keybinding, accept: () => __awaiter(this, void 0, void 0, function* () {\n                        // Add to history\n                        this.commandsHistory.push(commandPick.commandId);\n                        // Telementry\n                        this.telemetryService.publicLog2('workbenchActionExecuted', {\n                            id: commandPick.commandId,\n                            from: 'quick open'\n                        });\n                        // Run\n                        try {\n                            yield this.commandService.executeCommand(commandPick.commandId);\n                        }\n                        catch (error) {\n                            if (!isCancellationError(error)) {\n                                this.dialogService.show(Severity.Error, localize('canNotRun', \"Command '{0}' resulted in an error ({1})\", commandPick.label, toErrorMessage(error)));\n                            }\n                        }\n                    }) }));\n            }\n            return commandPicks;\n        });\n    }\n};\nAbstractCommandsQuickAccessProvider.PREFIX = '>';\nAbstractCommandsQuickAccessProvider.WORD_FILTER = or(matchesPrefix, matchesWords, matchesContiguousSubString);\nAbstractCommandsQuickAccessProvider = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], AbstractCommandsQuickAccessProvider);\nexport { AbstractCommandsQuickAccessProvider };\nlet CommandsHistory = class CommandsHistory extends Disposable {\n    constructor(storageService, configurationService) {\n        super();\n        this.storageService = storageService;\n        this.configurationService = configurationService;\n        this.configuredCommandsHistoryLength = 0;\n        this.updateConfiguration();\n        this.load();\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.configurationService.onDidChangeConfiguration(() => this.updateConfiguration()));\n    }\n    updateConfiguration() {\n        this.configuredCommandsHistoryLength = CommandsHistory.getConfiguredCommandHistoryLength(this.configurationService);\n        if (CommandsHistory.cache && CommandsHistory.cache.limit !== this.configuredCommandsHistoryLength) {\n            CommandsHistory.cache.limit = this.configuredCommandsHistoryLength;\n            CommandsHistory.saveState(this.storageService);\n        }\n    }\n    load() {\n        const raw = this.storageService.get(CommandsHistory.PREF_KEY_CACHE, 0 /* StorageScope.PROFILE */);\n        let serializedCache;\n        if (raw) {\n            try {\n                serializedCache = JSON.parse(raw);\n            }\n            catch (error) {\n                // invalid data\n            }\n        }\n        const cache = CommandsHistory.cache = new LRUCache(this.configuredCommandsHistoryLength, 1);\n        if (serializedCache) {\n            let entries;\n            if (serializedCache.usesLRU) {\n                entries = serializedCache.entries;\n            }\n            else {\n                entries = serializedCache.entries.sort((a, b) => a.value - b.value);\n            }\n            entries.forEach(entry => cache.set(entry.key, entry.value));\n        }\n        CommandsHistory.counter = this.storageService.getNumber(CommandsHistory.PREF_KEY_COUNTER, 0 /* StorageScope.PROFILE */, CommandsHistory.counter);\n    }\n    push(commandId) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        CommandsHistory.cache.set(commandId, CommandsHistory.counter++); // set counter to command\n        CommandsHistory.saveState(this.storageService);\n    }\n    peek(commandId) {\n        var _a;\n        return (_a = CommandsHistory.cache) === null || _a === void 0 ? void 0 : _a.peek(commandId);\n    }\n    static saveState(storageService) {\n        if (!CommandsHistory.cache) {\n            return;\n        }\n        const serializedCache = { usesLRU: true, entries: [] };\n        CommandsHistory.cache.forEach((value, key) => serializedCache.entries.push({ key, value }));\n        storageService.store(CommandsHistory.PREF_KEY_CACHE, JSON.stringify(serializedCache), 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n        storageService.store(CommandsHistory.PREF_KEY_COUNTER, CommandsHistory.counter, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    static getConfiguredCommandHistoryLength(configurationService) {\n        var _a, _b;\n        const config = configurationService.getValue();\n        const configuredCommandHistoryLength = (_b = (_a = config.workbench) === null || _a === void 0 ? void 0 : _a.commandPalette) === null || _b === void 0 ? void 0 : _b.history;\n        if (typeof configuredCommandHistoryLength === 'number') {\n            return configuredCommandHistoryLength;\n        }\n        return CommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH;\n    }\n};\nCommandsHistory.DEFAULT_COMMANDS_HISTORY_LENGTH = 50;\nCommandsHistory.PREF_KEY_CACHE = 'commandPalette.mru.cache';\nCommandsHistory.PREF_KEY_COUNTER = 'commandPalette.mru.counter';\nCommandsHistory.counter = 1;\nCommandsHistory = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], CommandsHistory);\nexport { CommandsHistory };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n        this.codeEditorService = codeEditorService;\n    }\n    get activeTextEditorControl() { return withNullAsUndefined(this.codeEditorService.getFocusedCodeEditor()); }\n    getCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.getCodeEditorCommandPicks();\n        });\n    }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: QuickCommandNLS.quickCommandActionLabel,\n            alias: 'Command Palette',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'z_commands',\n                order: 1\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.quickCommand';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneCommandsQuickAccessProvider,\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, commandId: GotoLineAction.ID }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n    }\n};\nStandaloneReferencesController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ICodeEditorService),\n    __param(3, INotificationService),\n    __param(4, IInstantiationService),\n    __param(5, IStorageService),\n    __param(6, IConfigurationService)\n], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        const currentTheme = standaloneThemeService.getColorTheme();\n        if (isHighContrast(currentTheme.type)) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n            this._originalThemeName = null;\n        }\n        else {\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n            this._originalThemeName = currentTheme.themeName;\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n","import '../../editor/editor.api.js';\n/*!-----------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Version: 0.34.1(547870b6881302c5b4ff32173c16d06009e3588f)\n * Released under the MIT license\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\n *-----------------------------------------------------------------------------*/\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\n\n// src/language/typescript/lib/typescriptServicesMetadata.ts\nvar typescriptVersion = \"4.5.5\";\n\n// src/fillers/monaco-editor-core.ts\nvar monaco_editor_core_exports = {};\n__reExport(monaco_editor_core_exports, monaco_editor_core_star);\nimport * as monaco_editor_core_star from \"../../editor/editor.api.js\";\n\n// src/language/typescript/monaco.contribution.ts\nvar ModuleKind = /* @__PURE__ */ ((ModuleKind2) => {\n  ModuleKind2[ModuleKind2[\"None\"] = 0] = \"None\";\n  ModuleKind2[ModuleKind2[\"CommonJS\"] = 1] = \"CommonJS\";\n  ModuleKind2[ModuleKind2[\"AMD\"] = 2] = \"AMD\";\n  ModuleKind2[ModuleKind2[\"UMD\"] = 3] = \"UMD\";\n  ModuleKind2[ModuleKind2[\"System\"] = 4] = \"System\";\n  ModuleKind2[ModuleKind2[\"ES2015\"] = 5] = \"ES2015\";\n  ModuleKind2[ModuleKind2[\"ESNext\"] = 99] = \"ESNext\";\n  return ModuleKind2;\n})(ModuleKind || {});\nvar JsxEmit = /* @__PURE__ */ ((JsxEmit2) => {\n  JsxEmit2[JsxEmit2[\"None\"] = 0] = \"None\";\n  JsxEmit2[JsxEmit2[\"Preserve\"] = 1] = \"Preserve\";\n  JsxEmit2[JsxEmit2[\"React\"] = 2] = \"React\";\n  JsxEmit2[JsxEmit2[\"ReactNative\"] = 3] = \"ReactNative\";\n  JsxEmit2[JsxEmit2[\"ReactJSX\"] = 4] = \"ReactJSX\";\n  JsxEmit2[JsxEmit2[\"ReactJSXDev\"] = 5] = \"ReactJSXDev\";\n  return JsxEmit2;\n})(JsxEmit || {});\nvar NewLineKind = /* @__PURE__ */ ((NewLineKind2) => {\n  NewLineKind2[NewLineKind2[\"CarriageReturnLineFeed\"] = 0] = \"CarriageReturnLineFeed\";\n  NewLineKind2[NewLineKind2[\"LineFeed\"] = 1] = \"LineFeed\";\n  return NewLineKind2;\n})(NewLineKind || {});\nvar ScriptTarget = /* @__PURE__ */ ((ScriptTarget2) => {\n  ScriptTarget2[ScriptTarget2[\"ES3\"] = 0] = \"ES3\";\n  ScriptTarget2[ScriptTarget2[\"ES5\"] = 1] = \"ES5\";\n  ScriptTarget2[ScriptTarget2[\"ES2015\"] = 2] = \"ES2015\";\n  ScriptTarget2[ScriptTarget2[\"ES2016\"] = 3] = \"ES2016\";\n  ScriptTarget2[ScriptTarget2[\"ES2017\"] = 4] = \"ES2017\";\n  ScriptTarget2[ScriptTarget2[\"ES2018\"] = 5] = \"ES2018\";\n  ScriptTarget2[ScriptTarget2[\"ES2019\"] = 6] = \"ES2019\";\n  ScriptTarget2[ScriptTarget2[\"ES2020\"] = 7] = \"ES2020\";\n  ScriptTarget2[ScriptTarget2[\"ESNext\"] = 99] = \"ESNext\";\n  ScriptTarget2[ScriptTarget2[\"JSON\"] = 100] = \"JSON\";\n  ScriptTarget2[ScriptTarget2[\"Latest\"] = 99 /* ESNext */] = \"Latest\";\n  return ScriptTarget2;\n})(ScriptTarget || {});\nvar ModuleResolutionKind = /* @__PURE__ */ ((ModuleResolutionKind2) => {\n  ModuleResolutionKind2[ModuleResolutionKind2[\"Classic\"] = 1] = \"Classic\";\n  ModuleResolutionKind2[ModuleResolutionKind2[\"NodeJs\"] = 2] = \"NodeJs\";\n  return ModuleResolutionKind2;\n})(ModuleResolutionKind || {});\nvar LanguageServiceDefaultsImpl = class {\n  _onDidChange = new monaco_editor_core_exports.Emitter();\n  _onDidExtraLibsChange = new monaco_editor_core_exports.Emitter();\n  _extraLibs;\n  _removedExtraLibs;\n  _eagerModelSync;\n  _compilerOptions;\n  _diagnosticsOptions;\n  _workerOptions;\n  _onDidExtraLibsChangeTimeout;\n  _inlayHintsOptions;\n  constructor(compilerOptions, diagnosticsOptions, workerOptions, inlayHintsOptions) {\n    this._extraLibs = /* @__PURE__ */ Object.create(null);\n    this._removedExtraLibs = /* @__PURE__ */ Object.create(null);\n    this._eagerModelSync = false;\n    this.setCompilerOptions(compilerOptions);\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this.setWorkerOptions(workerOptions);\n    this.setInlayHintsOptions(inlayHintsOptions);\n    this._onDidExtraLibsChangeTimeout = -1;\n  }\n  get onDidChange() {\n    return this._onDidChange.event;\n  }\n  get onDidExtraLibsChange() {\n    return this._onDidExtraLibsChange.event;\n  }\n  get workerOptions() {\n    return this._workerOptions;\n  }\n  get inlayHintsOptions() {\n    return this._inlayHintsOptions;\n  }\n  getExtraLibs() {\n    return this._extraLibs;\n  }\n  addExtraLib(content, _filePath) {\n    let filePath;\n    if (typeof _filePath === \"undefined\") {\n      filePath = `ts:extralib-${Math.random().toString(36).substring(2, 15)}`;\n    } else {\n      filePath = _filePath;\n    }\n    if (this._extraLibs[filePath] && this._extraLibs[filePath].content === content) {\n      return {\n        dispose: () => {\n        }\n      };\n    }\n    let myVersion = 1;\n    if (this._removedExtraLibs[filePath]) {\n      myVersion = this._removedExtraLibs[filePath] + 1;\n    }\n    if (this._extraLibs[filePath]) {\n      myVersion = this._extraLibs[filePath].version + 1;\n    }\n    this._extraLibs[filePath] = {\n      content,\n      version: myVersion\n    };\n    this._fireOnDidExtraLibsChangeSoon();\n    return {\n      dispose: () => {\n        let extraLib = this._extraLibs[filePath];\n        if (!extraLib) {\n          return;\n        }\n        if (extraLib.version !== myVersion) {\n          return;\n        }\n        delete this._extraLibs[filePath];\n        this._removedExtraLibs[filePath] = myVersion;\n        this._fireOnDidExtraLibsChangeSoon();\n      }\n    };\n  }\n  setExtraLibs(libs) {\n    for (const filePath in this._extraLibs) {\n      this._removedExtraLibs[filePath] = this._extraLibs[filePath].version;\n    }\n    this._extraLibs = /* @__PURE__ */ Object.create(null);\n    if (libs && libs.length > 0) {\n      for (const lib of libs) {\n        const filePath = lib.filePath || `ts:extralib-${Math.random().toString(36).substring(2, 15)}`;\n        const content = lib.content;\n        let myVersion = 1;\n        if (this._removedExtraLibs[filePath]) {\n          myVersion = this._removedExtraLibs[filePath] + 1;\n        }\n        this._extraLibs[filePath] = {\n          content,\n          version: myVersion\n        };\n      }\n    }\n    this._fireOnDidExtraLibsChangeSoon();\n  }\n  _fireOnDidExtraLibsChangeSoon() {\n    if (this._onDidExtraLibsChangeTimeout !== -1) {\n      return;\n    }\n    this._onDidExtraLibsChangeTimeout = window.setTimeout(() => {\n      this._onDidExtraLibsChangeTimeout = -1;\n      this._onDidExtraLibsChange.fire(void 0);\n    }, 0);\n  }\n  getCompilerOptions() {\n    return this._compilerOptions;\n  }\n  setCompilerOptions(options) {\n    this._compilerOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(void 0);\n  }\n  getDiagnosticsOptions() {\n    return this._diagnosticsOptions;\n  }\n  setDiagnosticsOptions(options) {\n    this._diagnosticsOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(void 0);\n  }\n  setWorkerOptions(options) {\n    this._workerOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(void 0);\n  }\n  setInlayHintsOptions(options) {\n    this._inlayHintsOptions = options || /* @__PURE__ */ Object.create(null);\n    this._onDidChange.fire(void 0);\n  }\n  setMaximumWorkerIdleTime(value) {\n  }\n  setEagerModelSync(value) {\n    this._eagerModelSync = value;\n  }\n  getEagerModelSync() {\n    return this._eagerModelSync;\n  }\n};\nvar typescriptVersion2 = typescriptVersion;\nvar typescriptDefaults = new LanguageServiceDefaultsImpl({ allowNonTsExtensions: true, target: 99 /* Latest */ }, { noSemanticValidation: false, noSyntaxValidation: false, onlyVisible: false }, {}, {});\nvar javascriptDefaults = new LanguageServiceDefaultsImpl({ allowNonTsExtensions: true, allowJs: true, target: 99 /* Latest */ }, { noSemanticValidation: true, noSyntaxValidation: false, onlyVisible: false }, {}, {});\nvar getTypeScriptWorker = () => {\n  return getMode().then((mode) => mode.getTypeScriptWorker());\n};\nvar getJavaScriptWorker = () => {\n  return getMode().then((mode) => mode.getJavaScriptWorker());\n};\nmonaco_editor_core_exports.languages.typescript = {\n  ModuleKind,\n  JsxEmit,\n  NewLineKind,\n  ScriptTarget,\n  ModuleResolutionKind,\n  typescriptVersion: typescriptVersion2,\n  typescriptDefaults,\n  javascriptDefaults,\n  getTypeScriptWorker,\n  getJavaScriptWorker\n};\nfunction getMode() {\n  if (false) {\n    return new Promise((resolve, reject) => {\n      __require([\"vs/language/typescript/tsMode\"], resolve, reject);\n    });\n  } else {\n    return import(\"./tsMode\");\n  }\n}\nmonaco_editor_core_exports.languages.onLanguage(\"typescript\", () => {\n  return getMode().then((mode) => mode.setupTypeScript(typescriptDefaults));\n});\nmonaco_editor_core_exports.languages.onLanguage(\"javascript\", () => {\n  return getMode().then((mode) => mode.setupJavaScript(javascriptDefaults));\n});\nexport {\n  JsxEmit,\n  ModuleKind,\n  ModuleResolutionKind,\n  NewLineKind,\n  ScriptTarget,\n  getJavaScriptWorker,\n  getTypeScriptWorker,\n  javascriptDefaults,\n  typescriptDefaults,\n  typescriptVersion2 as typescriptVersion\n};\n"],"names":["__defProp","__getOwnPropDesc","__getOwnPropNames","__hasOwnProp","__copyProps","to","from","except","desc","key","__reExport","target","mod","secondTarget","monaco_editor_core_exports","languageDefinitions","lazyLanguageLoaders","LazyLanguageLoader","languageId","resolve","reject","err","loadLanguage","registerLanguage","def","lazyLanguageLoader","m","LanguageServiceDefaultsImpl","options","modeConfiguration","optionsDefault","modeConfigurationDefault","cssDefaults","scssDefaults","lessDefaults","getMode","mode","formatDefaults","getConfigurationDefault","htmlLanguageId","handlebarsLanguageId","razorLanguageId","htmlLanguageService","registerHTMLLanguageService","htmlDefaults","handlebarLanguageService","handlebarDefaults","razorLanguageService","razorDefaults","defaults","onLanguageListener","diagnosticsOptions","diagnosticDefault","jsonDefaults","__decorate","decorators","c","r","d","i","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","fulfilled","step","e","rejected","result","SelectionAnchorSet","SelectionAnchorController","editor","contextKeyService","position","accessor","anchorPosition","start","end","decorationId","SetSelectionAnchor","_accessor","_a","GoToSelectionAnchor","SelectFromAnchorToCursor","CancelSelectionAnchor","overviewRulerBracketMatchForeground","nls","JumpToBracketAction","BracketMatchingController","SelectToBracketAction","args","selectBrackets","BracketsData","brackets","model","newSelections","selection","newCursorPosition","enclosingBrackets","nextBracket","selectFrom","selectTo","open","close","tmp","newDecorations","newDecorationsLen","bracketData","selections","versionId","previousData","positions","positionsLen","len","newData","newDataLen","previousIndex","previousLen","theme","collector","bracketMatchBackground","bracketMatchBorder","MoveCaretCommand","isMovingLeft","builder","lineNumber","startColumn","endColumn","rangeBefore","charBefore","rangeAfter","charAfter","helper","MoveCaretAction","left","opts","commands","MoveCaretLeftAction","MoveCaretRightAction","TransposeLettersAction","column","lastColumn","endPosition","middlePosition","beginPosition","leftChar","rightChar","replaceRange","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","supportsCopy","supportsPaste","browser","registerCommand","command","CutAction","CopyAction","PasteAction","ExecCommandCopyWithSyntaxHighlightingAction","registerExecCommandImpl","browserCommand","focusedEditor","emptySelectionClipboard","codeEditorService","clipboardService","clipboardText","metadata","pasteOnNewLine","multicursorText","CodeActionKind","other","part","CodeActionTriggerSource","mayIncludeActionsOfKind","filter","providedKind","exclude","excludesAction","filtersAction","action","actionKind","include","CodeActionCommandArgs","kind","apply","preferred","arg","defaultAutoApply","defaultKind","codeActionCommandId","refactorCommandId","refactorPreviewCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","CodeActionItem","provider","token","ManagedCodeActionSet","actions","documentation","disposables","a","b","fix","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","trigger","progress","codeActionContext","cts","providers","getCodeActionProviders","promises","providedCodeActions","filteredActions","getDocumentation","listener","newProviders","allActions","x","allDocumentation","only","entry","currentBest","resource","itemResolveCount","codeActionProvider","validatedRangeOrSelection","codeActionSet","resolving","resolveCount","item","MessageController","message","MessageWidget","bounds","MessageCommand","text","anchorTop","anchorBottom","messageWidget","dispose","handle","Context","CodeActionAction","callback","stripNewlines","str","TEMPLATE_ID","codeActionLineHeight","CodeMenuRenderer","acceptKeybindings","keybindingService","container","data","element","index","templateData","isEnabled","isSeparator","isDocumentation","_b","accept","preview","CodeActionMenu","_editor","_delegate","_contextMenuService","_languageFeaturesService","_telemetryService","_themeService","_configurationService","_contextViewService","_contextKeyService","CodeActionKeybindingResolver","_c","_d","inputArray","renderDisposables","renderMenu","menuBlock","dom","currIsSeparator","menuItem","height","arr","maxWidth","focusTracker","blurListener","startIndex","openedFromString","didCancel","CodeActions","codeActions","at","actionsToShow","menuActions","anchor","resolver","useShadowDOM","toCodeActionAction","cursorCoords","editorCoords","y","_keybindingProvider","allCodeActionBindings","commandArgs","binding","candidates","candidate","LightBulbState","Showing","editorPosition","widgetPosition","LightBulbWidget","_quickFixActionId","_preferredFixActionId","_keybindingService","_","editorModel","top","lineHeight","pad","atPosition","tabSize","fontInfo","lineContent","indent","lineHasSpace","isFolded","effectiveLineNumber","preferredKb","kb","editorBackgroundColor","editorLightBulbForegroundColor","editorLightBulbAutoFixForegroundColor","__classPrivateFieldSet","receiver","state","f","__classPrivateFieldGet","_CodeActionUi_disposed","CodeActionUi","quickFixActionId","preferredFixActionId","delegate","instantiationService","widget","navUp","newState","_e","validActionToApply","invalidAction","includeDisabledActions","_CodeActionModel_isDisposed","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_markerService","_signalChange","_delay","resources","marker","markerRange","line","CodeActionsState","Triggered","_cancellablePromise","emptyCodeActionSet","CodeActionModel","_registry","_progressService","supportedActions","skipNotify","contextKeyForSupportedActions","refactorTrigger","userArgs","codeActionFrom","triggerCodeActionsForEditorSelection","argsSchema","QuickFixController","markerService","progressService","_instantiationService","languageFeaturesService","QuickFixAction","AutoFixAction","retrigger","notAvailableMessage","triggerAction","autoApply","triggerPosition","applyCodeAction","ApplyCodeActionReason","codeActionReason","bulkEditService","commandService","telemetryService","notificationService","asMessage","controller","CodeActionCommand","RefactorAction","RefactorPreview","SourceAction","OrganizeImportsAction","FixAllAction","CodeActionContribution","weight","CodeLensModel","list","symbol","getCodeLensModel","providerRanks","uri","codeLensProvider","ICodeLensCache","CacheItem","lineCount","CodeLensCache","storageService","oldkey","raw","copyItems","copyModel","lines","lenses","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","CodeLensContentWidget","className","animate","children","hasSymbol","lens","title","link","CodeLensHelper","decoration","changeAccessor","resultingDecorations","CodeLensWidget","viewZoneChangeAccessor","updateCallback","range","codeLensData","id","symbols","resolved","CodeLensContribution","debounceService","_commandService","_notificationService","_codeLensCache","hash","lineHeightFactor","fontSize","codeLensHeight","fontFamily","editorFontInfo","fontFamilyVar","fontFeaturesVar","newStyle","cachedLenses","cachedLensesNow","registration","scheduler","t1","newDelay","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","l","scrollState","decChangeAccessor","maxLineNumber","groups","lastGroup","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","toResolve","request","resolvePromise","resolvedSymbols","quickInputService","codelensController","items","getColors","colors","colorInfo","getColorPresentations","colorProviderRegistry","rawCIs","ci","color","context","red","green","blue","alpha","presentations","ColorDecorationInjectedTextMarker","MAX_DECORATORS","ColorDetector","languageFeatureDebounceService","prevIsEnabled","deprecatedConfig","colorDecorators","sw","colorInfos","colorDatas","decorations","colorData","rgba","ref","ColorPickerModel","availableColorPresentations","presentationIndex","colorPresentations","originalText","$","ColorPickerHeader","themeService","tooltip","colorBox","ColorPickerBody","pixelRatio","SaturationBox","OpacityStrip","HueStrip","s","v","hsva","h","origin","event","pointerUpListener","saturatedColor","ctx","whiteGradient","blackGradient","Strip","monitor","g","opaque","transparent","ColorPickerWidget","header","ColorHover","owner","ColorHoverParticipant","lineDecorations","colorDetector","hoverParts","colorHover","updateEditorModel","textEdits","newRange","trackedRange","updateColorPresentations","hasModifier","modifier","ClickLinkMouseEvent","source","ClickLinkKeyboardEvent","ClickLinkOptions","triggerKey","triggerModifier","triggerSideBySideKey","triggerSideBySideModifier","createOptions","multiCursorModifier","ClickLinkGesture","newOpts","mouseEvent","currentLineNumber","EmbeddedCodeEditorWidget","domElement","parentEditor","accessibilityService","languageConfigurationService","newOptions","objects","defaultColor","defaultOptions","WIDGET_ID","ViewZoneDelegate","domNode","afterColumn","heightInLines","onDomNodeTop","onComputedHeight","OverlayWidgetDelegate","Arrow","where","ZoneWidget","info","width","styles","frameColor","arrowColor","containerHeight","rangeOrPos","arrowHeight","frameThickness","viewZoneDomNode","maxHeightInLines","revealLine","isLastLine","classToReplace","widthInPixel","heightInPixel","newHeightInLines","evt","lineDelta","roundedLineDelta","BaseDropdown","labelRenderer","cleanupFn","DropdownMenu","DropdownMenuActionViewItem","menuActionsOrProvider","contextMenuProvider","el","classNames","isActionsArray","visible","that","newContext","disabled","createAndFillInActionBarActions","menu","primaryGroup","primaryMaxCount","shouldInlineSubmenu","useSeparatorsInPrimaryActions","fillInActions","actionGroup","asDisposable","useAlternativeActions","isPrimaryAction","primaryBucket","secondaryBucket","submenuInfo","group","newLen","submenuActions","overflow","MenuEntryActionViewItem","mouseOver","alternativeKeyDown","updateAltState","wantsAltCommand","keybinding","keybindingLabel","altTooltip","altKeybinding","altKeybindingLabel","altTitleSection","label","icon","iconClasses","SubmenuEntryActionViewItem","dropdownOptions","setBackgroundImage","DropdownWithDefaultActionViewItem","submenuAction","_menuService","_instaService","_storageService","defaultAction","defaultActionId","lastAction","defaultActionKeybinding","primaryContainer","dropdownContainer","fromRight","focusable","createActionViewItem","instaService","IPeekViewService","existing","remove","PeekContext","PeekContextController","getOuterEditor","PeekViewWidget","noCloseAction","titleElement","actionsContainer","actionBarOptions","primaryHeading","secondaryHeading","headHeight","bodyHeight","peekViewTitleBackground","peekViewTitleForeground","peekViewTitleInfoForeground","peekViewBorder","peekViewResultsBackground","peekViewResultsMatchForeground","peekViewResultsFileForeground","peekViewResultsSelectionBackground","peekViewResultsSelectionForeground","peekViewEditorBackground","peekViewEditorGutterBackground","peekViewResultsMatchHighlight","peekViewEditorMatchHighlight","peekViewEditorMatchHighlightBorder","OneReference","isProviderFirst","parent","_rangeCallback","FilePreview","_modelReference","n","startLineNumber","endLineNumber","word","beforeRange","afterRange","before","inside","after","FileReferences","child","textModelResolverService","ReferencesModel","links","providersFirst","current","oneRef","reference","next","idx","childCount","groupCount","nearest","strings","DataSource","_resolverService","val","Delegate","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","parts","IdentityProvider","FileReferencesTemplate","_labelService","matches","node","template","OneReferenceTemplate","score","highlight","AccessibilityProvider","DecorationsManager","_model","newDecorationsActualIndex","oneReference","toRemove","ignore","lineLength","newLineLength","LayoutData","ratio","ReferencesTree","ReferenceWidget","_defaultTreeKeyboardSupport","layoutData","_textModelResolverService","_peekViewService","_uriLabel","_undoRedoService","_languageService","_languageConfigurationService","borderColor","containerElement","treeOptions","onEvent","newModel","revealParent","promise","scrollType","sel","ctxReferenceSearchVisible","ReferencesController","_editorService","modelPromise","peekMode","storageKey","requestId","pos","error","fwd","currentPosition","editorFocus","previewEditorFocus","focusEditor","openedEditor","sideBySide","pinned","withController","fn","outerEditor","focus","ctxHasSymbols","ISymbolNavigationService","SymbolNavigationService","refModel","editorState","EditorState","seenUri","seenPosition","editorService","getLocationLinks","provide","values","getDefinitionsAtPosition","getDeclarationsAtPosition","getImplementationsAtPosition","getTypeDefinitionsAtPosition","getReferencesAtPosition","compact","resultWithoutDeclaration","_sortedAndDeduped","rawLinks","modelLinks","_f","_g","_h","_goToActionIds","registerGoToAction","ctor","SymbolNavigationAnchor","thing","SymbolNavigationAction","configuration","symbolNavService","references","altAction","altActionId","referenceCount","gotoLocation","peek","targetEditor","modelNow","DefinitionAction","goToDefinitionKb","GoToDefinitionAction","OpenDefinitionToSideAction","PeekDefinitionAction","DeclarationAction","GoToDeclarationAction","TypeDefinitionAction","GoToTypeDefinitionAction","PeekTypeDefinitionAction","ImplementationAction","GoToImplementationAction","PeekImplementationAction","ReferencesAction","GenericGoToLocationAction","config","_references","_gotoMultipleBehaviour","_position","_token","multiple","noResultsMessage","openInPeek","control","GotoDefinitionAtPositionEditorContribution","languageService","linkGesture","keyboardEvent","withKey","results","textEditorModel","previewValue","wordRange","rangeToUse","previewRange","minIndent","endIndent","startIndent","hoverMessage","openToSide","canPeek","activeLinkForeground","HoverWidget","HoverAction","actionOptions","enabled","__asyncValues","o","verb","settle","HoverResult","isComplete","hasLoadingMessage","HoverOperation","_computer","fireResult","e_1","e_1_1","HoverRangeAnchor","priority","lastAnchor","showAtPosition","HoverForeignElementAnchor","HoverParticipantRegistry","Scanner","ch","type","Marker","Text","others","newChildren","_fixParent","TextmateSnippet","prev","cur","TransformableMarker","Placeholder","Choice","ret","Transform","_this","didMatch","FormatString","shorthandName","ifValue","elseValue","match","Variable","name","walk","visitor","stack","all","last","found","placeholder","SnippetParser","insertFinalTabstop","enforceFinalTabstop","snippet","offset","placeholderDefaultValues","incompletePlaceholders","defaultValues","clone","p","nextToken","choice","variable","transform","regexValue","regexOptions","escaped","complex","shorthand","NLS_DEFAULT_LABEL","NLS_PRESERVE_CASE_LABEL","PreserveCaseToggle","ReplaceInput","contextViewProvider","_showOptionButtons","appendPreserveCaseLabel","history","flexibleHeight","flexibleWidth","flexibleMaxHeight","viaKeyboard","indexes","newIndex","controls","toggleStyles","inputBoxStyles","newWidth","historyNavigationVisible","HistoryNavigationWidgetFocusContext","HistoryNavigationForwardsEnablementContext","HistoryNavigationBackwardsEnablementContext","lastFocusedWidget","widgets","registerAndCreateHistoryNavigationContext","disposableStore","scopedContextKeyService","historyNavigationWidgetFocus","historyNavigationForwardsEnablement","historyNavigationBackwardsEnablement","onDidFocus","onDidBlur","ContextScopedFindInput","showFindOptions","ContextScopedReplaceInput","showReplaceOptions","suggestWidgetStatusbarMenu","CompletionItem","completion","sub","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","showDeprecated","_snippetSuggestSupport","getSnippetSuggestSupport","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","defaultReplaceRange","defaultRange","onCompletionList","didAddResult","suggestion","snippetCompletions","providerGroup","getSuggestionComparator","defaultComparator","snippetUpComparator","snippetDownComparator","_snippetComparators","snippetConfig","triggerCharacter","maxItemsToResolve","completionProvider","completions","showSimpleSuggestions","QuickSuggestionsOptions","tokenType","ContentHoverController","ContentHoverWidget","participant","p1","p2","ContentHoverComputer","anchorCandidates","epsilon","filteredMessages","loadingMessage","messages","showAtRange","highlightRange","statusBar","EditorHoverStatusBar","fragment","colorPicker","msg","highlightDecoration","ContentHoverVisibleData","anchorRange","anchorLineNumber","renderStartColumn","renderEndColumn","forceShowAtRange","preferAbove","stoleFocus","visibleData","scrollDimensions","extraBottomPadding","_participants","maxColumn","__marked_exports","define","deps","factory","global","exports","_defineProperties","props","descriptor","_createClass","Constructor","protoProps","staticProps","_unsupportedIterableToArray","minLen","_arrayLikeToArray","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","getDefaults","changeDefaults","newDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","escape","html","encode","unescapeTest","unescape","caret","edit","regex","opt","obj","nonWordAndColonTest","originIndependentUrl","cleanUrl","sanitize","base","href","prot","resolveUrl","baseUrls","justDomain","protocol","domain","rtrim","relativeBase","noopTest","merge","splitCells","tableRow","count","row","curr","cells","invert","suffLen","currChar","findClosingBracket","level","checkSanitizeDeprecation","repeatString","pattern","outputLink","cap","lexer","indentCodeCompensation","matchIndentToCode","indentToCode","matchIndentInNode","indentInNode","Tokenizer","_proto","src","trimmed","istask","ischecked","blankLine","endsWithBlankLine","nextLine","rawLine","itemContents","endEarly","bull","isordered","itemRegex","nextBulletRegex","hrRegex","spacers","t","hasMultipleLineBreaks","chars","lineBreaks","_iterator","_step","_char","tag","j","k","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","maskedSrc","prevChar","nextChar","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","_text","hasNonSpaceChars","hasSpaceCharsOnBothEnds","mangle","prevCapZero","smartypants","block","inline","out","Lexer","rules","tokens","leading","tabs","lastToken","cutSrc","lastParagraphClipped","extTokenizer","tempSrc","tempStart","getStartIndex","errMsg","_this2","keepPrevChar","Renderer","_code","infostring","lang","quote","_html","slugger","body","ordered","startatt","checked","content","flags","TextRenderer","Slugger","originalSlug","isDryRun","slug","occurenceAccumulator","Parser","parser","l2","l3","cell","loose","itemBody","task","checkbox","renderer","marked","done","pending","code","_tokens","_len","_key","extensions","hasExtensions","pack","ext","prevRenderer","_len2","_key2","_loop","prop","_len3","_key3","tokenizer","_loop2","prevTokenizer","_len4","_key4","_walkTokens","_loop3","_iterator2","_step2","_iterator3","_step3","_iterator4","_step4","_cell","childTokens","setOptions","use","walkTokens","parseInline","parse","renderMarkdown","markdown","markedOptions","isDisposed","_uriMassage","_href","isDomUri","dimensions","attributes","codeBlocks","onClick","onAuxClick","resolveWithBaseUri","renderedMarkdown","markdownHtmlDoc","sanitizeRenderedMarkdown","img","resolvedHref","tuples","renderedElements","placeholderElements","placeholderElement","renderedElement","baseUri","allowedSchemes","getSanitizerOptions","dompurify","hook","MarkdownRenderer","_options","_openerService","languageAlias","MarginHoverWidget","openerService","MarginHoverComputer","markdownHoverElement","hoverContentsElement","renderedContents","editorLayout","topForLineNumber","editorScrollTop","nodeHeight","toHoverMessage","contents","HoverProviderResult","hover","ordinal","executeProvider","isValid","getHover","getHoverPromise","hasRange","hasHtmlContent","MarkdownHover","MarkdownHoverParticipant","maxTokenizationLineLength","rng","renderMarkdownHovers","hoverPart","MarkerCoordinate","total","MarkerList","resourceFilter","_configService","compareOrder","compareMarker","res","updateMarker","uris","oldIdx","IMarkerNavigationService","MarkerNavigationService","SeverityIcon","severity","errorIconForeground","errorCodiconSelector","warningIconForeground","warningCodiconSelector","infoIconForeground","infoCodiconSelector","onRelatedInformation","related","relatedInformation","sourceAndCodeLength","lastLineElement","detailsElement","sourceElement","codeElement","relatedInformationNode","relatedResource","relatedMessage","scrollWidth","scrollHeight","severityLabel","ariaLabel","MarkerNavigationWidget","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","headerBg","markerIdx","markerCount","detail","errorDefault","warningDefault","infoDefault","MarkerController","_markerNavigationService","CONTEXT_MARKERS_NAVIGATION_VISIBLE","reusePosition","multiFile","otherEditor","MarkerNavigationAction","_next","_multiFile","NextMarkerAction","PrevMarkerAction","NextMarkerInFilesAction","PrevMarkerInFilesAction","MarkerCommand","MarkerHover","markerCodeActionTrigger","MarkerHoverParticipant","_markerDecorationsService","markerHoverForStatusbar","markerHover","hoverElement","markerElement","messageElement","sourceAndCodeElement","codeLink","relatedInfoContainer","quickfixPlaceholderElement","updatePlaceholderDisposable","codeActionsPromise","showing","elementPosition","cancellationToken","linkFg","activeLinkFg","ModesHoverController","hideWidgetsEventHandler","hoverOpts","targetEm","ShowHoverAction","ShowDefinitionPreviewHoverAction","goto","editorHoverHighlightColor","hoverBackground","hoverBorder","linkHover","hoverForeground","actionsBackground","codeBackground","ColorContribution","hoverController","createStringDataTransferItem","stringOrPromise","createFileDataTransferItem","fileName","VSDataTransfer","mimeType","mine","mime","generateUuid","getRandomValues","bucket","_data","_hex","CodeDataTransfers","extractEditorsDropData","editors","rawEditorsData","rawResourcesData","createDraggedEditorInputFromRawResourcesData","file","rawCodeFiles","codeFiles","codeFile","contributions","Extensions","contribution","resourcesRaw","resourceRaw","DragAndDropContributionRegistry","toVSDataTransfer","dataTransfer","vsDataTransfer","asStringValue","createFileDataTransferItemFromFile","INTERNAL_DND_MIME_TYPES","addExternalEditorsDropData","dragEvent","overwriteUriList","editorData","input","UriList","internal","entries","normalizeDriveLetter","path","isWindowsOS","normalizedUserHomeCached","KnownSnippetVariableNames","CompositeSnippetVariableResolver","_delegates","SelectionBasedVariableResolver","_selection","_selectionIdx","_overtypingCapturer","isMultiline","lineLeadingWhitespace","varLeadingWhitespace","whitespaceCommonLength","newline","rest","ModelBasedVariableResolver","ClipboardBasedVariableResolver","_readClipboardText","_selectionCount","_spread","CommentBasedVariableResolver","langId","TimeBasedVariableResolver","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","filename","folderpath","RandomBasedVariableResolver","OneSnippet","_snippet","_snippetLineLeadingWhitespace","textChange","placeholderOffset","placeholderLen","operations","currentValue","transformedValueLines","couldSkipThisPlaceholder","activePlaceholders","enclosingPlaceholder","placeholdersWithEqualIndex","ranges","nested","indexLastPlaceholder","nestedPlaceholder","_defaultOptions","SnippetSession","_template","adjustIndentation","adjustNewlines","snippetTextString","newValue","overwriteBefore","overwriteAfter","positionLineNumber","positionColumn","positionColumnBefore","positionColumnAfter","adjustWhitespace","overtypingCapturer","edits","snippets","workspaceService","modelBasedVariableResolver","readClipboardText","firstBeforeText","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","extensionBefore","extensionAfter","snippetSelection","snippetLineLeadingWhitespace","snippetEdits","lastRange","textRange","textNode","snippetText","snippetFragmentText","_undoEdits","undoEdits","isTrivialSnippet","oneSelection","allPossibleSelections","possibleSelections","array","SnippetController2","_logService","activeChoice","isAnyOfOptions","suggestions","option","resetSelection","CommandCtor","ctrl","performSnippetEdit","vscodeClipboardMime","CopyPasteController","_bulkEditService","_clipboardService","primarySelection","wasFromEmptySelection","rawMetadata","originalDocVersion","tokenSource","textDataTransfer","BlockCommentCommand","insertSpace","haystack","needle","needleLength","haystackLength","codeA","codeB","startToken","endToken","startLineText","endLineText","startTokenIndex","endTokenIndex","startLineAfterStartToken","endLineBeforeEndToken","ops","op","inverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","commentStr","onlyWhitespaceLines","shouldRemoveComments","lineData","lineContentStartOffset","commentStrEndOffset","cursorPosition","startTokenAllowedBeforeColumn","firstNonWhitespaceIndex","afterCommentStr","currentVisibleColumn","isTab","columnSize","minVisibleColumn","lenJ","CommentLineAction","modelOptions","commentsOptions","ToggleCommentLineAction","AddLineCommentAction","RemoveLineCommentAction","BlockCommentAction","ContextMenuController","view","hasSelectionAtPosition","menuId","addedItems","subActions","oldHoverSetting","posx","posy","customActionViewItem","wasCancelled","minimapOptions","lastId","createAction","createSubmenuAction","createEnumAction","configName","configuredValue","createRunner","ShowContextMenu","CursorState","thisLen","otherLen","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","prevState","stackElement","CursorUndo","CursorRedo","DragAndDropCommand","targetPosition","copy","hasTriggerModifier","DragAndDropController","selectionStartLineNumber","selectionStartColumn","DropIntoEditorController","workspaceContextService","DefaultOnDropProvider","initialModelVersion","ourDataTransfer","textEditorDataTransfer","_workspaceContextService","urlListEntry","urlList","textEntry","strUriList","root","rel","FindDecorations","scopes","findScopeDecorationId","newStartPosition","desiredRange","candidateOpts","nextMatch","newCurrentDecorationId","matchPosition","lineBeforeEnd","lineBeforeEndMaxColumn","findMatches","findScopes","findMatchesOptions","newOverviewRulerApproximateDecorations","approxPixelsPerLine","mergeLinesDelta","prevStartLineNumber","prevEndLineNumber","newFindMatchesDecorations","findScope","ReplaceAllCommand","editorSelection","replaceStrings","o1","o2","resultOps","previousOp","buildReplaceStringWithCasePreserved","containsHyphens","validateSpecificSpecialCharacter","containsUnderscores","buildReplaceStringForSpecificSpecialCharacter","specialCharacter","splitPatternAtSpecialCharacter","splitMatchAtSpecialCharacter","replaceString","splitValue","StaticValueReplacePattern","staticValue","DynamicPiecesReplacePattern","pieces","ReplacePattern","ReplacePiece","preserveCase","piece","repl","lenOps","opIdx","matchIndex","remainder","caseOps","ReplacePieceBuilder","toCharIndex","parseReplaceString","chCode","nextChCode","nextNextChCode","CONTEXT_FIND_WIDGET_VISIBLE","CONTEXT_FIND_WIDGET_NOT_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","TogglePreserveCaseKeybinding","FIND_IDS","MATCHES_LIMIT","RESEARCH_DELAY","FindModelBoundToEditorModel","moveCursor","newFindScope","currentMatchesPosition","matchAfterSelection","matchesPosition","isUsingLineStops","isRecursed","nextMatchRange","prevMatchRange","searchRange","prevMatch","captureMatches","forceMove","replacePattern","limitResultCount","searchRanges","scope","searchData","searchRegex","modelText","fullModelRange","resultText","FindOptionsWidget","inputActiveOptionBorderColor","inputActiveOptionForegroundColor","inputActiveOptionBackgroundColor","somethingChanged","actionId","inputStyles","widgetBackground","widgetForeground","widgetShadowColor","hcBorder","effectiveOptionValue","override","FindReplaceState","matchesCount","currentMatch","changeEvent","updateHistory","oldEffectiveIsRegex","oldEffectiveWholeWords","oldEffectiveMatchCase","oldEffectivePreserveCase","newSearchScope","existingSearchScope","showHistoryKeybindingHint","findSelectionIcon","findCollapsedIcon","findExpandedIcon","findReplaceIcon","findReplaceAllIcon","findPreviousMatchIcon","findNextMatchIcon","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","FIND_WIDGET_INITIAL_WIDTH","FIND_INPUT_AREA_WIDTH","MAX_MATCHES_COUNT_WIDTH","FIND_INPUT_AREA_HEIGHT","ctrlEnterReplaceAllWarningPromptedKey","ctrlKeyMod","FindWidgetViewZone","stopPropagationForMultiLineUpwards","textarea","stopPropagationForMultiLineDownwards","FindWidget","codeEditor","addExtraSpaceOnTop","globalBufferTerm","showRedOutline","searchString","isSelection","isChecked","findInputIsNonEmpty","canReplace","isSelectionMultipleLine","adjustEditorScrollTop","startCoords","startLeft","startTop","leftOfFindWidget","endCoords","focusTheEditor","targetScrollTop","viewZone","adjustScroll","newHeight","scrollAdjustment","editorWidth","minimapWidth","collapsedFindWidget","reducedFindWidget","narrowFindWidget","findInputWidth","totalheight","totalHeight","_sash","SimpleButton","findPart","replacePart","replaceActionsContainer","originalWidth","currentWidth","expanded","addBackgroundColorRule","selector","findMatchHighlightBorder","findMatchBorder","findRangeHighlightBorder","foreground","resizeBorderBackground","border","toolbarHoverBackgroundColor","focusOutline","SEARCH_STRING_MAX_LENGTH","getSelectionSearchString","seedSearchStringFromSelection","seedSearchStringFromNonEmptySelection","wordAtPosition","CommonFindController","shouldRestartFind","ignoreWhenVisible","stateChanges","selectionSearchString","currentSelections","FindController","_super","updateSearchScope","findArgDescription","StartFindWithArgsAction","StartFindWithSelectionAction","MatchFindAction","NextMatchFindAction","PreviousMatchFindAction","SelectionMatchFindAction","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","currentSelection","findInputFocused","shouldFocus","FindCommand","MAX_FOLDING_REGIONS","MAX_LINE_NUMBER","MASK_INDENT","BitField","size","numWords","arrayIndex","bit","FoldingRegions","startIndexes","endIndexes","types","parentIndexes","isInsideLast","parentIndex","hasChanged","FoldingRegion","low","high","mid","rangesLength","gotTypes","regions","rangesA","rangesB","getIndexedFunction","limit","getA","getB","indexA","indexB","nextA","nextB","stackedRanges","topStackedRange","prevLineNumber","resultRanges","useRange","scanIndex","prescanB","FoldingModel","textModel","decorationProvider","toggledRegions","r1","r2","processed","dirtyRegionEndLine","lastHiddenLine","updateDecorationsUntil","isCollapsed","isManual","region","editorDecorationId","newCollapseState","newFoldingRanges","intersects","foldRange","newRegions","blockedLineNumers","foldedOrManualRanges","newRanges","newEditorDecorations","decorationRange","isBlocked","blockedLineNumber","foldedRanges","decRange","checksum","rangesToRestore","lineNumber1","lineNumber2","levelStack","toggleCollapseState","foldingModel","levels","lineNumbers","toToggle","doCollapse","regionsInside","setCollapseStateLevelsDown","setCollapseStateLevelsUp","setCollapseStateUp","setCollapseStateAtLevel","foldLevel","blockedLineNumbers","setCollapseStateForRest","filteredRegions","filteredRegion","setCollapseStateForMatchingLines","regExp","setCollapseStateForType","getParentFoldLine","foldingRegion","parentFoldingIdx","getPreviousFoldLine","expectedParentIndex","minLineNumber","getNextFoldLine","HiddenRangeModel","change","updateHiddenAreas","newHiddenAreas","lastCollapsedStart","lastCollapsedEnd","findRange","hasChanges","adjustLine","isInside","adjustedStartLine","adjustedEndLine","MAX_FOLDING_REGIONS_FOR_INDENT_DEFAULT","ID_INDENT_PROVIDER","IndentRangeProvider","maxFoldingRegions","cancelationToken","notifyTooManyRegions","foldingRules","offSide","markers","computeRanges","RangesCollector","foldingRangesLimit","_notifyTooManyRegions","maxIndent","previousRegions","previous","foldingExpandedIcon","foldingCollapsedIcon","foldingManualCollapsedIcon","foldingManualExpandedIcon","FoldingDecorationProvider","isHidden","decorationIds","foldingContext","ID_SYNTAX_PROVIDER","SyntaxRangeProvider","handleFoldingRangesChange","collectSyntaxRanges","sanitizeRanges","rangeData","nLines","nestingLevel","maxLevel","sorted","d1","d2","diff","CONTEXT_FOLDING_ENABLED","FoldingController","collapsedRegions","hr","foldingProviders","foldingRegionPromise","foldingRanges","selectionLineNumbers","hiddenRanges","iconClicked","offsetLeftInGutter","surrounding","otherRegion","toMaybeToggle","recursive","FoldingAction","foldingController","foldingModelPromise","foldingArgumentsConstraint","foldingArgs","UnfoldAction","_foldingController","UnFoldRecursivelyAction","_args","FoldAction","direction","ToggleFoldAction","selectedLines","FoldRecursivelyAction","FoldAllBlockCommentsAction","comments","FoldAllRegionsAction","UnfoldAllRegionsAction","FoldAllRegionsExceptAction","UnfoldAllRegionsExceptAction","FoldAllAction","UnfoldAllAction","FoldLevelAction","GotoParentFoldAction","GotoPreviousFoldAction","GotoNextFoldAction","FoldRangeFromSelectionAction","collapseRanges","RemoveFoldRangeFromSelectionAction","foldBackgroundBackground","editorFoldForeground","foldBackground","editorFoldColor","EditorFontZoomIn","EditorFontZoomOut","EditorFontZoomReset","FormatOnType","_workerService","support","triggerChars","lastCharCode","unbind","FormatOnPaste","format","FormatDocumentAction","FormatSelectionAction","TreeElement","candidateId","OutlineElement","OutlineGroup","order","OutlineModel","newProvider","childInfo","roots","overrideContainerLabel","IOutlineModelService","OutlineModelService","debounces","modelService","now","outlineModel","_err","outlineService","inlineSuggestCommitId","createDisposableRef","object","applyEdits","transformer","PositionOffsetTransformer","offsetEdits","getReadonlyEmptyArray","GhostText","additionalReservedLineCount","lineText","lastPart","cappedLineText","GhostTextPart","GhostTextReplacement","columnStart","length","newLines","_lineText","BaseGhostTextWidgetModel","minimizeInlineCompletion","inlineCompletion","valueToReplace","commonPrefixLen","startOffset","remainingValueToReplace","commonSuffixLen","normalizedInlineCompletionsEquals","inlineCompletionToGhostText","previewSuffixLength","sourceLine","sourceIndentationLength","suggestionAddedIndentationLength","replacedIndentation","rangeThatDoesNotReplaceIndentation","suggestionWithoutIndentationChange","valueToBeReplaced","changes","cachingDiff","filteredChanges","previewStartInCompletionText","insertColumn","modifiedEnd","nonPreviewTextEnd","nonPreviewText","italicText","lastRequest","originalValue","smartDiff","deletedChars","deletedCharacters","newChanges","sum","smartBracketMatching","getMaxCharCode","maxCharCode","charCode","getUniqueCharCode","getElements","characters","elements1","elements2","fixBracketsInLine","denseKeyProvider","bracketTokens","StaticTokenizerSource","processNode","closingTokenText","InlineCompletionsModel","cache","configurationService","active","triggerKind","InlineCompletionsSession","shouldUpdate","initialTriggerKind","debounce","lastCompletionItem","currentCompletion","filterText","cursorPosIndex","filterTextBefore","filterTextAfter","originalValueBefore","originalValueAfter","newIdx","ghostText","startTime","provideInlineCompletions","endTime","operation","UpdateOperation","SynchronizedInlineCompletionsCache","completionsSource","onChange","CachedInlineCompletion","getDefaultRange","itemsByHash","insertText","snippetInfo","closeBrackets","trackedItem","newLine","newTokens","slicedTokens","Memory","topScore","NoMemory","LRUMemory","lineSuffix","indexPreselect","indexRecency","seq","PrefixMemory","SuggestMemoryService","ISuggestMemoryService","WordContextKey","checkForWordEnd","SuggestAlternatives","acceptNext","CommitCharacterController","selected","acceptCharacters","BracketSelectionRangeProvider","round","counts","bracket","closing","innerBracket","outerBracket","startLine","aboveLine","WordDistance","service","wordRanges","wordUntilPos","wordLines","bestWordRange","blockDistance","LineContext","leadingLineContent","characterCountDelta","CompletionModel","lineContext","wordDistance","snippetSuggestions","fuzzyScoreOptions","incomplete","labelLengths","wordLow","scoreFn","wordLen","wordPos","auto","shy","noSelect","isSuggestPreviewEnabled","canShowQuickSuggest","allowQuickSuggestions","canShowSuggestOnTriggerCharacters","SuggestModel","_editorWorkerService","editorIsComposing","supportsByTriggerCharacter","set","checkTriggerCharacter","lastChar","supports","prevSelection","lineTokens","onlyFrom","noFilter","suggestCtx","itemKindFilter","completionOptions","cmpFn","suggestOptions","inactiveProvider","oldLineContext","isFrozen","OvertypingCapturer","suggestModel","selectionsLength","willOvertype","StatusBarViewItem","SuggestWidgetStatus","actionViewItemProvider","right","SYMBOL_ICON_ARRAY_FOREGROUND","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","symbolIconArrayColor","symbolIconBooleanColor","symbolIconClassColor","symbolIconMethodColor","symbolIconColorColor","symbolIconConstantColor","symbolIconConstructorColor","symbolIconEnumeratorColor","symbolIconEnumeratorMemberColor","symbolIconEventColor","symbolIconFieldColor","symbolIconFileColor","symbolIconFolderColor","symbolIconFunctionColor","symbolIconInterfaceColor","symbolIconKeyColor","symbolIconKeywordColor","symbolIconModuleColor","outlineNamespaceColor","symbolIconNullColor","symbolIconNumberColor","symbolIconObjectColor","symbolIconOperatorColor","symbolIconPackageColor","symbolIconPropertyColor","symbolIconReferenceColor","symbolIconSnippetColor","symbolIconStringColor","symbolIconStructColor","symbolIconTextColor","symbolIconTypeParameterColor","symbolIconUnitColor","symbolIconVariableColor","ResizableHTMLElement","currentSize","deltaY","deltaX","north","east","south","west","minHeight","minWidth","maxHeight","newSize","canExpandCompletionItem","SuggestDetailsWidget","fontWeight","fontSizePx","lineHeightPx","borderWidth","borderHeight","explainMode","md","cappedDetail","much","SuggestDetailsOverlay","topLeftNow","sizeNow","deltaTop","deltaLeft","updateTopLeft","sessionEnded","preferAlignAtTop","anchorBox","bodyBox","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","westPlacement","southPacement","placements","placement","bottom","alignAtTop","maxSize","topLeft","FileKind","fileIconDirectoryRegex","getIconClasses","fileKind","classes","cssEscape","dotSegments","detectedLanguageId","detectLanguageId","getAriaId","suggestMoreInfoIcon","_completionItemColor","ColorExtractor","ItemRenderer","_modelService","main","configureFont","fontFeatureSettings","letterSpacing","letterSpacingPx","labelOptions","labelClasses","detailClasses","stripNewLines","editorSuggestWidgetBackground","editorSuggestWidgetBorder","editorSuggestWidgetForeground","editorSuggestWidgetSelectedForeground","editorSuggestWidgetSelectedIconForeground","editorSuggestWidgetSelectedBackground","editorSuggestWidgetHighlightForeground","editorSuggestWidgetHighlightFocusForeground","editorSuggestWidgetStatusForeground","PersistedWidgetSize","_service","SuggestWidget","SuggestContentWidget","ResizeState","persistedSize","persistHeight","persistWidth","itemHeight","defaultSize","threshold","details","applyIconStyle","_element","description","docs","applyStatusBarStyle","completionModel","loading","delay","selectionIndex","isAuto","visibleCount","isEmpty","dim","minPersistedHeight","preferredWidth","fullHeight","editorBox","cursorBox","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","statusBarHeight","_widget","horizontalPadding","preference","_sticky","LineSuffix","SuggestController","_memoryService","PriorityRegistry","ctxInsertMode","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","snippetController","modelVersionNow","tasks","docListener","thisPosition","oldFlags","didType","typeListener","applied","TriggerSuggestAction","acceptedSuggestion","providerId","toggleMode","replace","columnDelta","suffixDelta","positionNow","fallback","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","prioritySelector","s1","s2","SuggestCommand","SuggestWidgetInlineCompletionProvider","suggestControllerPreselector","suggestController","suggestItems","normalizedItemToPreselect","suggestItem","inlineSuggestItem","suggestionToSuggestItemInfo","normalizedSuggestItem","valid","rangeStartsWith","isBoundToSuggestWidget","bindToSuggestWidget","newActive","newInlineCompletion","shouldFire","suggestItemInfoEquals","focusedItem","rangeToTest","prefix","isSnippetText","SuggestWidgetPreviewModel","newGhostText","isSuggestionPreviewEnabled","augmentedCompletion","suggestWidgetState","suggestInlineCompletion","isAugmentedCompletionValid","finalCompletion","inlineCompletionPreviewLength","DelegatingModel","GhostTextModel","SharedInlineCompletionCache","hoverRange","ttPolicy","GhostTextWidget","DecorationsWidget","AdditionalLinesWidget","DisposableDecorations","viewZoneId","inlineTexts","additionalLines","addToAdditionalLines","lastLine","textBufferLine","hiddenTextStartColumn","lastIdx","firstLineText","remainingLinesLength","spacer","button","ViewMoreLinesContentWidget","hiddenText","hiddenTextDecorations","languageIdCodec","minReservedLineCount","renderLines","disableMonospaceOptimizations","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","sb","isBasicASCII","containsRTL","trustedhtml","background","GhostTextController","inlineSuggestOptions","ActiveGhostTextController","GhostTextContextKeys","startsWithIndentation","startsWithIndentationLessThanTabSize","firstLine","indentationEndColumn","firstNonWsIdx","ShowNextInlineSuggestionAction","ShowPreviousInlineSuggestionAction","TriggerInlineSuggestionAction","InlineCompletionsHover","InlineCompletionsHoverParticipant","viewZoneData","previousAction","nextAction","hasMore","render","inlineSuggestionAvailable","GhostTextCommand","commitInlineSuggestionAction","getSpaceCnt","spacesCnt","generateIndent","insertSpaces","tabsCnt","getReindentEditOperations","inheritedIndent","indentationRules","indentSize","shiftIndent","indentation","unshiftIndent","indentEdits","globalIndent","currentLineText","adjustedLineContent","oldIndentation","idealIndentForNextLine","IndentationToSpacesAction","modelOpts","IndentationToSpacesCommand","IndentationToTabsAction","IndentationToTabsCommand","ChangeIndentationSizeAction","creationOpts","picks","autoFocusIndex","pick","IndentUsingTabs","IndentUsingSpaces","DetectIndentation","ReindentLinesAction","ReindentSelectedLinesAction","editOperations","AutoIndentOnPasteCommand","initialSelection","selectionIsSet","AutoIndentOnPaste","autoIndent","indentConverter","indentOfFirstLine","newSpaceCnt","oldSpaceCnt","newIndent","indentMetadata","firstLineNumber","virtualModel","indentOfSecondLine","newSpaceCntOfSecondLine","oldSpaceCntOfSecondLine","spaceCntOffset","originalIndent","newSpacesCnt","cmd","nonWhitespaceColumn","firstNonWhitespaceTokenIndex","getIndentationEditOperations","tabsToSpaces","spaces","spacesRegExp","lastIndentationColumn","originalIndentationRange","originalIndentation","newIndentation","InlayHintAnchor","InlayHintItem","hint","delta","newHint","InlayHintsFragments","asCommandLink","showGoToContextMenu","resolverService","contextMenuService","location","box","goToDefinitionWithLocation","isInPeek","InlayHintsCache","IInlayHintsCache","RenderedInlayHintLabelPart","ActiveInlayHintInfo","InlayHintsController","_featureDebounce","_inlayHintsCache","cached","watchedProviders","myToken","inlayHints","defaultMode","altMode","newRenderMode","copies","store","gesture","sessionStore","labelPart","lineHints","languages","updateInlayHints","hints","visibleRanges","extendedRange","newDecorationsData","addInjectedText","cursorStops","attachedData","addInjectedWhitespace","isLast","marginRule","padding","isUniform","isFirst","cssProperties","fixSpace","decorationIdsToReplace","newDecorationIds","editorFontSize","editorFontFamily","inlayHintsProvider","InlayHintsHoverAnchor","InlayHintsHover","_lineDecorations","executor","itemTooltip","partTooltip","linkHint","iterable","iterable_1","iterable_1_1","InPlaceReplaceCommand","editRange","originalSelection","InPlaceReplaceController","editorWorkerService","up","modelURI","InPlaceReplaceUp","InPlaceReplaceDown","ExpandLineSelectionAction","viewModel","TrimTrailingWhitespaceCommand","cursors","trimTrailingWhitespace","rLen","cursorIndex","cursorLen","maxLineColumn","minEditColumn","lastNonWhitespaceIndex","fromColumn","CopyLinesCommand","isCopyingDown","noop","sourceLines","sourceText","MoveLinesCommand","isMovingDown","modelLineCount","otherLineNumber","movingLineNumber","movingLineText","insertingText","movingLineMatchResult","indentOfMovingLine","newIndentatOfMovingBlock","oldIndent","enter","enterPrefix","indentMetadataOfMovelingLine","futureAboveLineNumber","futureAboveLineText","validPrecedingLine","oneLineAbove","previousLineText","languageAtSelectionStart","languageAtSelectionEnd","SortLinesCommand","descending","sortLines","getSortData","linesToSort","AbstractCopyLinesAction","down","CopyLinesUpAction","CopyLinesDownAction","DuplicateSelectionAction","insertSelection","AbstractMoveLinesAction","MoveLinesUpAction","MoveLinesDownAction","AbstractSortLinesAction","SortLinesAscendingAction","SortLinesDescendingAction","DeleteDuplicateLinesAction","endCursorState","linesDeleted","uniqueLines","selectionToReplace","adjustedSelectionStart","finalSelection","TrimTrailingWhitespaceAction","DeleteLinesAction","mergedOperations","previousOperation","IndentLinesAction","OutdentLinesAction","InsertLineBeforeAction","InsertLineAfterAction","AbstractDeleteAllToBoundaryAction","primaryCursor","rangesToDelete","effectiveRanges","nextRange","DeleteAllLeftAction","endPrimaryCursor","deletedLines","endCursor","newStartLine","deleteFromLine","deleteFromColumn","DeleteAllRightAction","JoinLinesAction","reducedSelections","lastSelection","previousValue","lineOffset","columnDeltaOffset","selectionEndPositionOffset","trimmedLinesContent","firstNonWhitespaceIdx","lineTextWithoutIndent","deleteSelection","resultSelection","TransposeAction","cursor","AbstractCaseAction","wordSeparators","UpperCaseAction","LowerCaseAction","BackwardsCompatibleRegExp","_pattern","_flags","TitleCaseAction","titleBoundary","SnakeCaseAction","caseBoundary","singleLetters","KebabCaseAction","regexp","underscoreBoundary","CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE","DECORATION_CLASS_NAME","LinkedEditingContribution","forceRefresh","rangeUpdateScheduler","triggerRangeUpdate","rangeSyncScheduler","triggerRangeSync","referenceRange","referenceValue","mirrorRange","oldValue","rangeStartColumn","rangeEndColumn","commonPrefixLength","commonSuffixLength","prevEditOperationType","force","modelVersionId","response","getLinkedEditingRanges","foundReferenceRange","LinkedEditingAction","LinkedEditingCommand","orderedByScore","arrays","editorLinkedEditingBackground","editorLinkedEditingBackgroundColor","linkedEditingRangeProvider","Link","LinksList","newLinks","oldLinks","oldIndex","oldLen","oldLink","newLink","getLinks","lists","linkProvider","LinkDetector","clickLinkGesture","useMetaKey","oldDecorations","keys","occurence","LinkOccurrence","occurrence","fromUserGesture","modelUri","parsedUri","fsPath","relativePath","messageOrError","currentOccurrence","isActive","getHoverMessage","executeCmd","nativeLabel","commandId","OpenLinkAction","linkDetector","announceCursorChange","previousCursorState","cursorDiff","cs","pcs","cursorPositions","InsertCursorAbove","useLogicalLine","InsertCursorBelow","InsertCursorAtEndOfEachLineSelected","currentLineMaxColumn","InsertCursorAtEndOfLineSelected","InsertCursorAtTopOfLineSelected","MultiCursorSessionResult","revealRange","revealScrollType","MultiCursorSession","findController","isDisconnectedFromFindController","searchText","wholeWord","matchCase","findState","allSelections","lastAddedSelection","previousMatch","searchScope","MultiCursorSelectionController","session","modelRangesContainSameText","resultingSelections","MultiCursorSelectionControllerAction","multiCursorController","AddSelectionToNextFindMatchAction","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","SelectionHighlighterState","_searchText","_matchCase","_wordSeparators","SelectionHighlighter","oldState","caseSensitive","findStateSearchString","mySearchString","allMatches","cmp","hasFindOccurrences","selectedText","getValueInRange","thisSelectedText","toLowerCase","FocusNextCursor","firstCursor","FocusPreviousCursor","provideSignatureHelp","ParameterHintState","Pending","previouslyActiveHints","Active","ParameterHintsModel","silent","triggerId","activeSignature","cycle","first","isRetrigger","activeSignatureHelp","mergeTriggerContexts","triggerContext","lastCharIndex","triggerCharCode","parameterHintsNextIcon","parameterHintsPreviousIcon","ParameterHintsWidget","newParameterHints","wrapper","overloads","scrollbar","signature","updateFont","hasParameters","activeParameterIndex","activeParameter","hasDocs","labelToAnnounce","param","aria","beforeSpan","paramSpan","afterSpan","paramIdx","editorHoverWidgetHighlightForeground","parameterHighlightColor","ParameterHintsController","TriggerParameterHintsAction","ParameterHintsCommand","CONTEXT_RENAME_INPUT_VISIBLE","RenameInputField","_acceptKeybindings","updateLabel","wantsPreview","selectionStart","selectionEnd","supportPreview","disposeOnDone","RenameSkeleton","rejects","newName","rename","skeleton","loc","RenameController","resolveLocationOperation","inputFieldResult","renameOperation","renameResult","RenameAction","RenameCommand","renameProvider","StickyScrollController","StickyScrollWidget","stickyLineNumbers","stickyLineNumber","updateOutline","hiddenRange","outlineElement","depth","didRecursion","outline","currentStartLine","currentEndLine","_depth","beginningLinesConsidered","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","topOfEndLine","bottomOfEndLine","StickyScrollCodeLine","_ttPolicy","_lineNumber","_zIndex","_relativePosition","viewLineNumber","lineRenderingData","actualInlineDecorations","renderLineInput","lineHTMLNode","lineNumberHTMLNode","innerLineNumberHTML","widgetLineRange","codeLine","widgetHeight","WordSelectionRangeProvider","lastCh","SelectionRanges","SmartSelectController","forward","provideSelectionRanges","AbstractSmartSelect","GrowSelectionAction","ShrinkSelectionAction","work","allRawRanges","allProviderRanges","oneProviderRanges","oneRawRanges","oneRanges","oneRangesWithTrivia","rangeNoWhitespace","rangeFull","SuggestInlineCompletion","additionalTextEdits","InlineCompletionResults","_suggestMemoryService","selectedIndex","second","SuggestInlineCompletions","_getEditorOption","_languageFeatureService","wordInfo","triggerCharacterInfo","leadingLineContents","newLineContext","_completions","EditorContribution","languageFeatureService","ForceRetokenizeAction","ToggleTabFocusModeAction","_link","onClickEmitter","onKeyPress","onEnterPress","onTap","onOpen","textLinkForegroundColor","textLinkActiveForegroundColor","BANNER_ELEMENT_HEIGHT","BannerController","Banner","iconContainer","messageContainer","actionBarContainer","warningIcon","UnicodeHighlighter","_workspaceTrustService","max","DisableHighlightingOfNonBasicAsciiCharactersAction","DisableHighlightingOfAmbiguousCharactersAction","DisableHighlightingOfInvisibleCharactersAction","resolveOptions","highlightOptions","locale","DocumentUnicodeHighlighter","ViewportUnicodeHighlighter","trusted","_updateState","Decorations","computeReason","totalResult","UnicodeHighlighterHoverParticipant","unicodeHighlighter","highlightInfo","codePoint","codePointStr","formatCodePointMarkdown","reason","adjustSettingsArgs","adjustSettings","ShowExcludeOptions","codePointToHex","renderCodePointAsInlineCode","char","hideInComments","hideInStrings","DisableHighlightingInCommentsAction","DisableHighlightingInStringsAction","inString","inComment","quickPickService","getExcludeCharFromBeingHighlightedLabel","excludeLocaleFromBeingHighlighted","excludeCharFromBeingHighlighted","expectNever","charCodes","existingValue","locales","ignoreUnusualLineTerminators","writeIgnoreState","readIgnoreState","UnusualLineTerminatorsDetector","_dialogService","_codeEditorService","ViewportSemanticTokensContribution","scheduleTokenizeViewport","req","requestVersionId","styling","editorWordHighlight","editorWordHighlightStrong","editorWordHighlightBorder","editorWordHighlightStrongBorder","overviewRulerWordHighlightForeground","overviewRulerWordHighlightStrongForeground","ctxHasWordHighlights","getOccurrencesAtPosition","OccurenceAtPositionRequest","currentWordRange","requestIsValid","SemanticOccurenceAtPositionRequest","TextualOccurenceAtPositionRequest","currentSelectionIsEmpty","computeOccurencesAtPosition","WordHighlighter","highlights","dest","workerRequestIsValid","myRequestId","currentTime","minimumRenderTime","WordHighlighterContribution","createWordHighlighterIfPossible","WordHighlightNavigationAction","NextWordHighlightAction","PrevWordHighlightAction","TriggerWordHighlightAction","selectionHighlight","wordHighlight","wordHighlightStrong","selectionHighlightBorder","wordHighlightBorder","wordHighlightStrongBorder","MoveWordCommand","inPosition","outPosition","inSelectionMode","WordLeftCommand","wordNavigationType","WordRightCommand","CursorWordStartLeft","CursorWordEndLeft","CursorWordLeft","CursorWordStartLeftSelect","CursorWordEndLeftSelect","CursorWordLeftSelect","CursorWordAccessibilityLeft","CursorWordAccessibilityLeftSelect","CursorWordStartRight","CursorWordEndRight","CursorWordRight","CursorWordStartRightSelect","CursorWordEndRightSelect","CursorWordRightSelect","CursorWordAccessibilityRight","CursorWordAccessibilityRightSelect","DeleteWordCommand","autoClosingBrackets","autoClosingQuotes","autoClosingPairs","deleteRange","DeleteWordLeftCommand","DeleteWordRightCommand","DeleteWordStartLeft","DeleteWordEndLeft","DeleteWordLeft","DeleteWordStartRight","DeleteWordEndRight","DeleteWordRight","DeleteInsideWord","DeleteWordPartLeft","DeleteWordPartRight","WordPartLeftCommand","CursorWordPartLeft","CursorWordPartLeftSelect","WordPartRightCommand","CursorWordPartRight","CursorWordPartRightSelect","ReadOnlyMessageController","messageController","CONTEXT_ACCESSIBILITY_WIDGET_VISIBLE","AccessibilityHelpController","AccessibilityHelpWidget","getSelectionLabel","charactersSelected","url","noKbMsg","turnOnMessage","openDocMessage","w","ShowAccessibilityHelpAction","AccessibilityHelpCommand","IPadShowKeyboard","shouldHaveWidget","ShowKeyboardWidget","InspectTokensController","standaloneColorService","InspectTokensWidget","InspectTokens","renderTokenText","tokenText","charIndex","getSafeTokenizationSupport","tokenizationSupport","encodedLanguageId","hasEOL","nullTokenize","token1Index","token2Index","tokenStartIndex","tokenEndIndex","colorMap","fontStyle","stateBeforeLine","tokenizationResult1","tokenizationResult2","HelpQuickAccessProvider","picker","providerDescriptor","providerA","providerB","helpEntry","AbstractEditorNavigationQuickAccessProvider","pickerDisposable","lastKnownEditorViewState","deleteDecorations","rangeHighlightId","overviewRulerDecorationId","rangeHighlightDecorationId","AbstractGotoLineQuickAccessProvider","updatePickerAndEditor","numbers","endLine","positionCandidate","StandaloneGotoLineQuickAccessProvider","GotoLineAction","NO_SCORE2","scoreFuzzy2","query","patternStart","wordStart","preparedQuery","doScoreFuzzy2Multiple","doScoreFuzzy2Single","totalScore","totalMatches","queryPiece","normalizeMatches","NO_ITEM_SCORE","sortedMatches","matchA","matchB","normalizedMatches","matchOverlaps","queryExpectsExactMatch","MULTIPLE_QUERY_VALUES_SEPARATOR","prepareQuery","original","originalLowercase","pathNormalized","normalized","normalizedLowercase","normalizeQuery","containsPathSeparator","expectExactMatch","originalSplit","originalPiece","expectExactMatchPiece","pathNormalizedPiece","normalizedPiece","normalizedLowercasePiece","pieceToQuery","arg1","AbstractGotoSymbolQuickAccessProvider","_outlineModelService","symbolProviderRegistryPromise","symbolProviderListener","symbolsPromise","picksCts","updatePickerItems","positionToEnclose","ignoreFirstActiveEvent","filterBySymbolKind","filterPos","symbolQuery","containerQuery","filteredSymbolPicks","symbolLabel","symbolLabelWithIcon","symbolLabelIconOffset","containerLabel","symbolScore","symbolMatches","containerScore","containerMatches","skipContainerQuery","deprecated","openSideBySideDirection","sortedFilteredSymbolPicks","symbolA","symbolB","symbolPicks","updateLastSeparatorLabel","lastSeparator","lastSymbolKind","lastSymbolKindCounter","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","symbolPick","kindA","kindB","document","StandaloneGotoSymbolQuickAccessProvider","outlineModelService","GotoSymbolAction","exceptionToErrorMessage","exception","verbose","detectSystemErrorMessage","stackToString","toErrorMessage","errors","TriggerAction","isPicksWithActive","isFastAndSlowPicks","PickerQuickAccessProvider","picksDisposable","picksDisposables","picksToken","picksFilter","providedPicks","applyPicks","skipEmpty","activeItem","fastPicksApplied","slowPicksApplied","awaitedAdditionalPicks","activePick","additionalPicks","additionalActivePick","fallbackActivePick","fallbackActivePickCandidate","awaitedPicks","buttonIndex","removed","activeItems","keepScrollPositionBefore","AbstractCommandsQuickAccessProvider","dialogService","CommandsHistory","allCommandPicks","filteredCommandPicks","commandPick","labelHighlights","aliasHighlights","mapLabelToCommand","existingCommandForLabel","commandPickA","commandPickB","commandACounter","commandBCounter","commandPicks","addSeparator","serializedCache","configuredCommandHistoryLength","AbstractEditorCommandsQuickAccessProvider","activeTextEditorControl","editorCommandPicks","editorAction","StandaloneCommandsQuickAccessProvider","StandaloneReferencesController","ToggleHighContrast","standaloneThemeService","currentTheme","typescriptVersion","ModuleKind","ModuleKind2","JsxEmit","JsxEmit2","NewLineKind","NewLineKind2","ScriptTarget","ScriptTarget2","ModuleResolutionKind","ModuleResolutionKind2","compilerOptions","workerOptions","inlayHintsOptions","_filePath","filePath","myVersion","extraLib","libs","lib","typescriptVersion2","typescriptDefaults","javascriptDefaults","getTypeScriptWorker","getJavaScriptWorker"],"sourceRoot":""}