"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[94],{30249:(at,H,i)=>{i.d(H,{o:()=>h});var O=i(74848),S=i(96540),B=i(85200),R=i(1173),Y=i(11261),F=i(90708),Z=i(67266),K=i(81297),W=i(16895),d=i(40458);function g(e,o,a=[]){for(const s of a)if(typeof s=="function"){if(!s(e,o))return!1}else if(o[s]!==e[s])return!1;return!0}const P={x:B.sJ.get(R.Ct.firstTimeField).get({}),y:B.sJ.get(R.Ct.byTypes).get(new Set([Y.PU.number,Y.PU.enum]))};class h extends S.Component{constructor(o){super(o),this.getTimeRange=()=>this.props.timeRange;let a=this.prepState(o);a.alignedData=a.config.prepData([a.alignedFrame]),this.state=a,this.plotInstance=S.createRef()}prepState(o,a=!0){let s=null;const{frames:f,fields:r=P,preparePlotFrame:y,replaceVariables:b,dataLinkPostProcessor:v}=o,w=y??d.m,C=f.some(j=>j.fields.some(V=>(V.config.links?.length??0)>0)),L=w(f,{...r,y:C?()=>!0:r.y},o.timeRange);if((0,W.uY)("GraphNG",!1,"data aligned",L),L){let j=L;if(C){const u=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let l=f.map((c,E)=>({...c,fields:L.fields.filter((x,U)=>U===0||x.state?.origin?.frameIndex===E),length:L.length}));l.forEach((c,E)=>{c.fields.forEach(x=>{x.getLinks=(0,F._M)(c,x,{...x.state?.scopedVars,__dataContext:{value:{data:l,field:x,frame:c,frameIndex:E}}},b,u,v)})}),j={...L,fields:L.fields.filter((c,E)=>E===0||r.y(c,L,[L]))}}let V=this.state?.config;a&&(V=o.prepConfig(j,this.props.frames,this.getTimeRange),(0,W.uY)("GraphNG",!1,"config prepared",V)),s={alignedFrame:j,config:V},(0,W.uY)("GraphNG",!1,"data prepared",s.alignedData)}return s}componentDidUpdate(o){const{frames:a,structureRev:s,timeZone:f,cursorSync:r,propsToDiff:y}=this.props,b=!g(o,this.props,y);if(a!==o.frames||b||f!==o.timeZone||r!==o.cursorSync){let v=this.prepState(this.props,!1);v&&((this.state.config===void 0||f!==o.timeZone||r!==o.cursorSync||s!==o.structureRev||!s||b)&&(v.config=this.props.prepConfig(v.alignedFrame,this.props.frames,this.getTimeRange),(0,W.uY)("GraphNG",!1,"config recreated",v.config)),v.alignedData=v.config.prepData([v.alignedFrame]),this.setState(v))}}render(){const{width:o,height:a,children:s,renderLegend:f}=this.props,{config:r,alignedFrame:y,alignedData:b}=this.state;return r?(0,O.jsx)(Z.KU,{width:o,height:a,legend:f(r),children:(v,w)=>(0,O.jsx)(K.Z,{config:r,data:b,width:v,height:w,plotRef:C=>this.plotInstance.current=C,children:s?s(r,y):null})}):null}}},40458:(at,H,i)=>{i.d(H,{m:()=>W});var O=i(11261),S=i(73060),B=i(46294);function R(d,g,P){let h,e;for(let o=0;o<g.length;o++)if(g[o]==null)e==null&&h!=null&&(e=o);else{if(e!=null&&h!=null){if(d[o]-h<P)for(;e<o;)g[e++]=void 0;e=null}h=d[o]}return g}var Y=i(52622);function F(d){return d.type===O.PU.number&&d.config.custom?.drawStyle===Y.GR.Bars&&!d.config.custom?.hideFrom?.viz}function Z(d,g){return d.fields.find(P=>g!=null?P.name===g:P.type===O.PU.time)}function K(d,g){const P=Z(d,g);let h=P?.values;for(let e=0;e<d.fields.length;e++){let o=d.fields[e];if(o===P||F(o))continue;let a=o.config.custom?.spanNulls;typeof a=="number"&&a!==-1&&h&&(o.values=R(h,o.values,a))}return d}function W(d,g,P){let h;t:for(let s of d)for(let f of s.fields)if(g.x(f,s,d)){h=f;break t}d=d.map(s=>h?.state?.nullThresholdApplied?s:(0,B.M)({frame:s,refFieldName:h.name,refFieldPseudoMin:P?.from.valueOf(),refFieldPseudoMax:P?.to.valueOf()}));let e=d.reduce((s,f)=>s+f.fields.reduce((r,y)=>r+(F(y)?1:0),0),0),o=1/0;e>1&&d.forEach(s=>{if(!s.fields.some(F))return;const f=h.values;for(let r=0;r<f.length;r++)r>0&&(o=Math.min(o,f[r]-f[r-1]))});let a=(0,S.Fd)({frames:d,joinBy:g.x,keep:g.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:s=>{if(F(s))return S.WO;let f=s.config.custom?.spanNulls;return f===!0?S.RC:f===-1?S.WO:S.JI}});return a?(a=K(a,h.name),o!==1/0&&(a.fields.forEach((s,f)=>{let r=s.values;if(f===0){let y=r[r.length-1];r.push(y+o,y+2*o)}else F(s)?r.push(null,null):r.push(void 0,void 0)}),a.length+=2),a):null}},95168:(at,H,i)=>{i.d(H,{Z:()=>V});var O=i(74848),S=i(96540),B=i(24182),R=i(40845),Y=i(30249),F=i(2543),Z=i(36613),K=i(11261),W=i(83195),d=i(57875),g=i(8066),P=i(24293),h=i(28240),e=i(52622),o=i(51336),a=i(74863),s=i(55129),f=i(16895);const r=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),y=Array(53);for(let u=0;u<y.length;u++)y[u]=2**u;const b=(u,l=1)=>u==null?"-":u.toFixed(l),v={drawStyle:e.GR.Line,showPoints:e.yL.Auto,axisPlacement:e.vM.Auto},w=({frame:u,theme:l,timeZones:c,getTimeRange:E,allFrames:x,renderers:U,tweakScale:X=_=>_,tweakAxis:ct=_=>_,hoverProximity:nt,orientation:ut=e.wV.Horizontal})=>{const _=ut!==e.wV.Vertical,T=new o.e(c[0]);let mt;T.setPrepData(p=>(mt=p[0],(0,f.bq)(p[0],T.getStackingGroups())));const N=u.fields[0];if(!N)return T;const rt="x";let pt="";const xt=N.config.custom?.axisPlacement===e.vM.Hidden?e.vM.Hidden:_?e.vM.Bottom:e.vM.Left,Mt=N.config.custom?.axisPlacement!==e.vM.Hidden;if(N.type===K.PU.time){T.addScale({scaleKey:rt,orientation:_?e.Lt.Horizontal:e.Lt.Vertical,direction:_?e.ON.Right:e.ON.Up,isTime:!0,range:()=>{const t=E();return[t.from.valueOf(),t.to.valueOf()]}});const p=c.length>1?(t,m)=>_?m.map((n,k)=>k<2?null:n):m:void 0;for(let t=0;t<c.length;t++){const m=c[t];T.addAxis({scaleKey:rt,isTime:!0,placement:xt,show:Mt,label:N.config.custom?.axisLabel,timeZone:m,theme:l,grid:{show:t===0&&N.config.custom?.axisGridShow},filter:p})}c.length>1&&T.addHook("drawAxes",t=>{t.ctx.save();let m=0;t.axes.forEach(n=>{if(_&&n.side===2){t.ctx.fillStyle=l.colors.text.primary,t.ctx.textAlign="left",t.ctx.textBaseline="bottom";let k=n._pos+n._size;t.ctx.fillText(c[m],t.bbox.left,k*Z.A.pxRatio),m++}}),t.ctx.restore()})}else T.addScale({scaleKey:rt,orientation:_?e.Lt.Horizontal:e.Lt.Vertical,direction:_?e.ON.Right:e.ON.Up,range:(p,t,m)=>[N.config.min??t,N.config.max??m]}),T.addAxis({scaleKey:rt,placement:xt,show:Mt,label:N.config.custom?.axisLabel,theme:l,grid:{show:N.config.custom?.axisGridShow},formatValue:(p,t)=>(0,W.cN)(N.display(p,t))});let Ot=U?.flatMap(p=>Object.values(p.fieldMap).filter(t=>p.indicesOnly.indexOf(t)===-1))??[],$;for(let p=1;p<u.fields.length;p++){const t=u.fields[p],m={...t.config,custom:{...v,...t.config.custom}},n=m.custom;if(t===N||t.type!==K.PU.number&&t.type!==K.PU.enum)continue;let k=t.display??b;t.config.custom?.stacking?.mode===e.gs.Percent&&(k=(0,d.J)({field:{...t,config:{...t.config,unit:"percentunit"}},theme:l}));const ot=(0,s.M)(m,t.type),lt=(0,g.Qi)(t),yt=(0,g.lz)(t,l).color;if(T.addScale(X({scaleKey:ot,orientation:_?e.Lt.Vertical:e.Lt.Horizontal,direction:_?e.ON.Up:e.ON.Right,distribution:n.scaleDistribution?.type,log:n.scaleDistribution?.log,linearThreshold:n.scaleDistribution?.linearThreshold,min:t.config.min,max:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax,centeredZero:n.axisCenteredZero,stackingMode:n.stacking?.mode,range:t.type===K.PU.enum?(M,Q,J)=>[-1,t.config.type.enum.text.length]:void 0,decimals:t.config.decimals},t)),pt||(pt=ot),n.axisPlacement!==e.vM.Hidden){let M;n.axisColorMode===e.Y$.Series&&(lt.isByValue&&t.config.custom?.gradientMode===e.on.Scheme&&lt.id===P.Y.Thresholds?M=(0,a.pl)(1,l,lt,t.config.thresholds):M=yt);const Q={border:{show:n.axisBorderShow||!1,width:1/devicePixelRatio,stroke:M||l.colors.text.primary},ticks:{show:n.axisBorderShow||!1,stroke:M||l.colors.text.primary},color:M||l.colors.text.primary};let J,D,I;if(r.has(m.unit))J=y;else if(t.type===K.PU.enum){let A=t.config.type.enum.text;I=A.map((G,z)=>z),D=A}T.addAxis(ct({scaleKey:ot,label:n.axisLabel,size:n.axisWidth,placement:_?n.axisPlacement??e.vM.Auto:e.vM.Bottom,formatValue:(A,G)=>(0,W.cN)(k(A,G)),theme:l,grid:{show:n.axisGridShow},decimals:t.config.decimals,distr:n.scaleDistribution?.type,splits:I,values:D,incrs:J,...Q},t))}const _t=n.drawStyle===e.GR.Points?e.yL.Always:n.showPoints;let Pt=()=>null;n.spanNulls!==!0&&(Pt=(M,Q,J,D)=>{let I=[],A=M.series[Q];if(!J&&D&&D.length){const[G,z]=A.idxs,ft=M.data[0],q=M.data[Q],gt=Math.round(M.valToPos(ft[G],"x",!0)),st=Math.round(M.valToPos(ft[z],"x",!0));D[0][0]===gt&&I.push(G);for(let tt=0;tt<D.length;tt++){let Tt=D[tt],Dt=D[tt+1];if(Dt&&Tt[1]===Dt[0]){let et=M.posToIdx(Tt[1],!0);if(q[et]==null)for(let it=1;it<100;it++){if(q[et+it]!=null){et+=it;break}if(q[et-it]!=null){et-=it;break}}I.push(et)}}D[D.length-1][1]===st&&I.push(z)}return I.length?I:null});let{fillOpacity:dt}=n,ht=null,vt=null;if(t.state?.origin){$||($=C(u,x));const M=x[t.state.origin.frameIndex],Q=M?.fields[t.state.origin.fieldIndex],J=(0,h.Ct)(Q??t,M,x);if(Ot.indexOf(J)>=0)ht=()=>null,vt=()=>{};else if(n.transform===e.NU.Constant){const D=Z.A.paths.linear();ht=(I,A)=>{const G=I._data,z=E();let ft=[z.from.valueOf(),z.to.valueOf()],q=G[A].find(tt=>tt!=null),gt=[q,q],st=G.slice();return st[0]=ft,st[A]=gt,D({...I,_data:st},A,0,1)}}if(n.fillBelowTo){const D=u.fields.find(z=>n.fillBelowTo===z.name||n.fillBelowTo===z.config?.displayNameFromDS||n.fillBelowTo===(0,h.Ct)(z,u,x)),I=D?(0,h.Ct)(D,u,x):n.fillBelowTo,A=$.get(J),G=$.get(I);(0,F.isNumber)(G)&&(0,F.isNumber)(A)?(T.addBand({series:[A,G],fill:void 0}),dt||(dt=35)):dt=0}}let Et;lt.id===P.Y.Thresholds&&(Et=M=>(0,g.lz)(mt.fields[M],l).color),T.addSeries({pathBuilder:ht,pointsBuilder:vt,scaleKey:ot,showPoints:_t,pointsFilter:Pt,colorMode:lt,fillOpacity:dt,theme:l,dynamicSeriesColor:Et,drawStyle:n.drawStyle,lineColor:n.lineColor??yt,lineWidth:n.lineWidth,lineInterpolation:n.lineInterpolation,lineStyle:n.lineStyle,barAlignment:n.barAlignment,barWidthFactor:n.barWidthFactor,barMaxWidth:n.barMaxWidth,pointSize:n.pointSize,spanNulls:n.spanNulls||!1,show:!n.hideFrom?.viz,gradientMode:n.gradientMode,thresholds:m.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax,dataFrameFieldIndex:t.state?.origin}),n.thresholdsStyle&&m.thresholds&&(n.thresholdsStyle.mode??e.Ly.Off)!==e.Ly.Off&&T.addThresholds({config:n.thresholdsStyle,thresholds:m.thresholds,scaleKey:ot,theme:l,hardMin:t.config.min,hardMax:t.config.max,softMin:n.axisSoftMin,softMax:n.axisSoftMax})}let Ct=(0,f.ro)(u);T.setStackingGroups(Ct),U?.forEach(p=>{$||($=C(u,x));let t={};for(let m in p.fieldMap){let n=p.fieldMap[m];t[m]=$.get(n)}p.init(T,t)});const St=15;let Bt={hover:{prox:(p,t,m)=>nt??(p.data[t][m]===null?St:null),skip:[null]},focus:{prox:nt??30}};return T.setCursor(Bt),T};function C(u,l){const c=new Map;return u.fields.forEach((E,x)=>{const U=E.state?.origin;if(U){const X=l[U.frameIndex]?.fields[U.fieldIndex];X&&c.set((0,h.Ct)(X,l[U.frameIndex],l),x)}}),c}const L=["legend","options","theme"];class j extends S.Component{constructor(){super(...arguments),this.prepConfig=(l,c,E)=>{const{theme:x,timeZone:U,options:X,renderers:ct,tweakAxis:nt,tweakScale:ut}=this.props;return w({frame:l,theme:x,timeZones:Array.isArray(U)?U:[U],getTimeRange:E,allFrames:c,renderers:ct,tweakScale:ut,tweakAxis:nt,hoverProximity:X?.tooltip?.hoverProximity,orientation:X?.orientation})},this.renderLegend=l=>{const{legend:c,frames:E}=this.props;return!l||c&&!c.showLegend||!(0,B.t)(l,E)?null:(0,O.jsx)(B.$,{data:E,config:l,...c})}}render(){return(0,O.jsx)(Y.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:L,renderLegend:this.renderLegend})}}const V=(0,R.cV)(j);V.displayName="TimeSeries"},22731:(at,H,i)=>{i.d(H,{k:()=>h});var O=i(74848),S=i(83195),B=i(11261),R=i(52622),Y=i(11389),F=i(75073),Z=i(52415),K=i(55307),W=i(10875),d=i(21164),g=i(5514),P=i(82915);const h=({series:e,_rest:o,dataIdxs:a,seriesIdx:s,mode:f=R.$N.Single,sortOrder:r=R.xB.None,isPinned:y,annotate:b,maxHeight:v,replaceVariables:w})=>{const C=e.fields[0],L=(0,S.cN)(C.display(C.values[a[0]])),j=(0,W.cp)(e.fields,C,a,s,f,r,l=>l.type===B.PU.number||l.type===B.PU.enum);o?.forEach(l=>{l.config.custom?.hideFrom?.tooltip||j.push({label:l.state?.displayName??l.name,value:(0,g.S)(l,l.values[a[0]])})});let V;if(y&&s!=null){const l=e.fields[s],c=a[s],E=(0,d.u)(l,c),x=(0,d.O)(e,l,w,c);V=(0,O.jsx)(F.S,{dataLinks:E,actions:x,annotate:b})}const u=C.config.custom?.hideFrom?.tooltip?null:{label:C.type===B.PU.time?"":C.state?.displayName??C.name,value:L};return(0,O.jsxs)(K.i,{children:[u!=null&&(0,O.jsx)(Z.A,{item:u,isPinned:y}),(0,O.jsx)(Y.o,{items:j,isPinned:y,scrollable:(0,P.T5)({mode:f,maxHeight:v}),maxHeight:v}),V]})}},5514:(at,H,i)=>{i.d(H,{S:()=>S});var O=i(83195);function S(B,R){return B.display?(0,O.cN)(B.display(R)):`${R}`}}}]);

//# sourceMappingURL=94.6acbb36fede37ba2a793.js.map