(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"5gaU":function(e,t,r){"use strict";r.d(t,"c",function(){return l}),r.d(t,"f",function(){return d}),r.d(t,"b",function(){return f}),r.d(t,"d",function(){return b}),r.d(t,"g",function(){return p}),r.d(t,"e",function(){return v}),r.d(t,"a",function(){return m});var n=r("mrSG"),i=r("Obii"),o=r("NXk7"),a=r("3SGO"),s=r("v2PB"),c=r("Xmxp"),u=r("BAXh");function l(e){var t=this;return function(r){return Object(n.__awaiter)(t,void 0,void 0,function(){var t;return Object(n.__generator)(this,function(n){switch(n.label){case 0:return[4,Object(o.b)().getFolderByUid(e)];case 1:return t=n.sent(),r(Object(u.b)(t)),r(Object(a.d)(Object(s.a)(t))),[2]}})})}}function d(e){var t=this;return function(r){return Object(n.__awaiter)(t,void 0,void 0,function(){var t;return Object(n.__generator)(this,function(n){switch(n.label){case 0:return[4,Object(o.b)().put("/api/folders/"+e.uid,{title:e.title,version:e.version})];case 1:return t=n.sent(),c.b.emit(i.AppEvents.alertSuccess,["Folder saved"]),r(Object(a.c)({path:t.url+"/settings"})),[2]}})})}}function f(e){var t=this;return function(r){return Object(n.__awaiter)(t,void 0,void 0,function(){return Object(n.__generator)(this,function(t){switch(t.label){case 0:return[4,Object(o.b)().deleteFolder(e,!0)];case 1:return t.sent(),r(Object(a.c)({path:"dashboards"})),[2]}})})}}function b(e){var t=this;return function(r){return Object(n.__awaiter)(t,void 0,void 0,function(){var t;return Object(n.__generator)(this,function(n){switch(n.label){case 0:return[4,Object(o.b)().get("/api/folders/"+e+"/permissions")];case 1:return t=n.sent(),r(Object(u.c)(t)),[2]}})})}}function h(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function p(e,t){var r=this;return function(i,a){return Object(n.__awaiter)(r,void 0,void 0,function(){var r,s,c,u,l,d,f,p;return Object(n.__generator)(this,function(v){switch(v.label){case 0:r=a().folder,s=[];try{for(c=Object(n.__values)(r.permissions),u=c.next();!u.done;u=c.next())(l=u.value).inherited||(d=h(l),e===l&&(d.permission=t),s.push(d))}catch(e){f={error:e}}finally{try{u&&!u.done&&(p=c.return)&&p.call(c)}finally{if(f)throw f.error}}return[4,Object(o.b)().post("/api/folders/"+r.uid+"/permissions",{items:s})];case 1:return v.sent(),[4,i(b(r.uid))];case 2:return v.sent(),[2]}})})}}function v(e){var t=this;return function(r,i){return Object(n.__awaiter)(t,void 0,void 0,function(){var t,a,s,c,u,l,d;return Object(n.__generator)(this,function(f){switch(f.label){case 0:t=i().folder,a=[];try{for(s=Object(n.__values)(t.permissions),c=s.next();!c.done;c=s.next())(u=c.value).inherited||u===e||a.push(h(u))}catch(e){l={error:e}}finally{try{c&&!c.done&&(d=s.return)&&d.call(s)}finally{if(l)throw l.error}}return[4,Object(o.b)().post("/api/folders/"+t.uid+"/permissions",{items:a})];case 1:return f.sent(),[4,r(b(t.uid))];case 2:return f.sent(),[2]}})})}}function m(e){var t=this;return function(r,i){return Object(n.__awaiter)(t,void 0,void 0,function(){var t,a,s,c,u,l,d;return Object(n.__generator)(this,function(f){switch(f.label){case 0:t=i().folder,a=[];try{for(s=Object(n.__values)(t.permissions),c=s.next();!c.done;c=s.next())(u=c.value).inherited||a.push(h(u))}catch(e){l={error:e}}finally{try{c&&!c.done&&(d=s.return)&&d.call(s)}finally{if(l)throw l.error}}return a.push({userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}),[4,Object(o.b)().post("/api/folders/"+t.uid+"/permissions",{items:a})];case 1:return f.sent(),[4,r(b(t.uid))];case 2:return f.sent(),[2]}})})}}},kzsD:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"FolderSettingsPage",function(){return v});var n=r("mrSG"),i=r("q1tI"),o=r.n(i),a=r("0cfB"),s=r("/MKj"),c=r("kDLi"),u=r("ZGyg"),l=r("Xmxp"),d=r("lzJ5"),f=r("GQ3c"),b=r("5gaU"),h=r("v2PB"),p=r("BAXh"),v=function(e){function t(t){var r=e.call(this,t)||this;return r.onTitleChange=function(e){r.props.setFolderTitle(e.target.value)},r.onSave=function(e){return Object(n.__awaiter)(r,void 0,void 0,function(){return Object(n.__generator)(this,function(t){switch(t.label){case 0:return e.preventDefault(),e.stopPropagation(),this.setState({isLoading:!0}),[4,this.props.saveFolder(this.props.folder)];case 1:return t.sent(),this.setState({isLoading:!1}),[2]}})})},r.onDelete=function(e){e.stopPropagation(),e.preventDefault(),l.b.emit(f.CoreEvents.showConfirmModal,{title:"Delete",text:"Do you want to delete this folder and all its dashboards?",icon:"fa-trash",yesText:"Delete",onConfirm:function(){r.props.deleteFolder(r.props.folder.uid)}})},r.state={isLoading:!1},r}return Object(n.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.getFolderByUid(this.props.folderUid)},t.prototype.render=function(){var e=this.props,t=e.navModel,r=e.folder;return o.a.createElement(u.a,{navModel:t},o.a.createElement(u.a.Contents,{isLoading:this.state.isLoading},o.a.createElement("h3",{className:"page-sub-heading"},"Folder Settings"),o.a.createElement("div",{className:"section gf-form-group"},o.a.createElement("form",{name:"folderSettingsForm",onSubmit:this.onSave},o.a.createElement("div",{className:"gf-form"},o.a.createElement("label",{className:"gf-form-label width-7"},"Name"),o.a.createElement(c.Input,{type:"text",className:"gf-form-input width-30",value:r.title,onChange:this.onTitleChange})),o.a.createElement("div",{className:"gf-form-button-row"},o.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!r.canSave||!r.hasChanged},"Save"),o.a.createElement("button",{className:"btn btn-danger",onClick:this.onDelete,disabled:!r.canSave},"Delete"))))))},t}(i.PureComponent),m={getFolderByUid:b.c,saveFolder:b.f,setFolderTitle:p.d,deleteFolder:b.b};t.default=Object(a.hot)(e)(Object(s.connect)(function(e){var t=e.location.routeParams.uid;return{navModel:Object(d.a)(e.navIndex,"folder-settings-"+t,Object(h.b)(2)),folderUid:t,folder:e.folder}},m)(v))}.call(this,r("3UD+")(e))},v2PB:function(e,t,r){"use strict";function n(e){return{icon:"fa fa-folder-open",id:"manage-folder",subTitle:"Manage folder dashboards & permissions",url:"",text:e.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"fa fa-fw fa-th-large",id:"folder-dashboards-"+e.uid,text:"Dashboards",url:e.url},{active:!1,icon:"fa fa-fw fa-lock",id:"folder-permissions-"+e.uid,text:"Permissions",url:e.url+"/permissions"},{active:!1,icon:"gicon gicon-cog",id:"folder-settings-"+e.uid,text:"Settings",url:e.url+"/settings"}]}}function i(e){var t=n({id:1,uid:"loading",title:"Loading",url:"url",canSave:!1,version:0});return t.children[e].active=!0,{main:t,node:t.children[e]}}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i})}}]);
//# sourceMappingURL=FolderSettingsPage.4d0490a94b199a11f40c.js.map