(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"01jY":function(e,t,n){e.exports=function(e,t){"use strict";function n(e,t){return e(t={exports:{}},t.exports),t.exports}function a(e){return function(){return e}}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var r=function(){};r.thatReturns=a,r.thatReturnsFalse=a(!1),r.thatReturnsTrue=a(!0),r.thatReturnsNull=a(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e};var o=r,i=function(e){};i=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")};var s=function(e,t,n,a,r,o,s,l){if(i(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,r,o,s,l],p=0;(c=new Error(t.replace(/%s/g,function(){return u[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},l=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,a=Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=0,o="Warning: "+e.replace(/%s/g,function(){return n[r++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}}).apply(void 0,[t].concat(a))}},c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,d=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==a.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var i in n=Object(arguments[o]))u.call(n,i)&&(r[i]=n[i]);if(c){a=c(n);for(var s=0;s<a.length;s++)p.call(n,a[s])&&(r[a[s]]=n[a[s]])}}return r},f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",h=s,m=l,g=f,b={},v=function(e,t,n,a,r){for(var o in e)if(e.hasOwnProperty(o)){var i;try{h("function"==typeof e[o],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",a||"React class",n,o,typeof e[o]),i=e[o](t,o,a,n,null,g)}catch(e){i=e}if(m(!i||i instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",a||"React class",n,o,typeof i),i instanceof Error&&!(i.message in b)){b[i.message]=!0;var s=r?r():"";m(!1,"Failed %s type: %s%s",n,i.message,null!=s?s:"")}}},y=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,a="@@iterator",r="<<anonymous>>",i={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:u(o.thatReturnsNull),arrayOf:function(e){return u(function(t,n,a,r,o){if("function"!=typeof e)return new c("Property `"+o+"` of component `"+a+"` has invalid PropType notation inside arrayOf.");var i=t[n];if(!Array.isArray(i)){var s=m(i);return new c("Invalid "+r+" `"+o+"` of type `"+s+"` supplied to `"+a+"`, expected an array.")}for(var l=0;l<i.length;l++){var u=e(i,l,a,r,o+"["+l+"]",f);if(u instanceof Error)return u}return null})},element:u(function(t,n,a,r,o){var i=t[n];if(!e(i)){var s=m(i);return new c("Invalid "+r+" `"+o+"` of type `"+s+"` supplied to `"+a+"`, expected a single ReactElement.")}return null}),instanceOf:function(e){return u(function(t,n,a,o,i){if(!(t[n]instanceof e)){var s=e.name||r,l=(u=t[n]).constructor&&u.constructor.name?u.constructor.name:r;return new c("Invalid "+o+" `"+i+"` of type `"+l+"` supplied to `"+a+"`, expected instance of `"+s+"`.")}var u;return null})},node:u(function(e,t,n,a,r){return h(e[t])?null:new c("Invalid "+a+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return u(function(t,n,a,r,o){if("function"!=typeof e)return new c("Property `"+o+"` of component `"+a+"` has invalid PropType notation inside objectOf.");var i=t[n],s=m(i);if("object"!==s)return new c("Invalid "+r+" `"+o+"` of type `"+s+"` supplied to `"+a+"`, expected an object.");for(var l in i)if(i.hasOwnProperty(l)){var u=e(i,l,a,r,o+"."+l,f);if(u instanceof Error)return u}return null})},oneOf:function(e){return Array.isArray(e)?u(function(t,n,a,r,o){for(var i=t[n],s=0;s<e.length;s++)if(l=i,u=e[s],l===u?0!==l||1/l==1/u:l!=l&&u!=u)return null;var l,u,p=JSON.stringify(e);return new c("Invalid "+r+" `"+o+"` of value `"+i+"` supplied to `"+a+"`, expected one of "+p+".")}):(l(!1,"Invalid argument supplied to oneOf, expected an instance of array."),o.thatReturnsNull)},oneOfType:function(e){if(!Array.isArray(e))return l(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),o.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return l(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",b(n),t),o.thatReturnsNull}return u(function(t,n,a,r,o){for(var i=0;i<e.length;i++){var s=e[i];if(null==s(t,n,a,r,o,f))return null}return new c("Invalid "+r+" `"+o+"` supplied to `"+a+"`.")})},shape:function(e){return u(function(t,n,a,r,o){var i=t[n],s=m(i);if("object"!==s)return new c("Invalid "+r+" `"+o+"` of type `"+s+"` supplied to `"+a+"`, expected `object`.");for(var l in e){var u=e[l];if(u){var p=u(i,l,a,r,o+"."+l,f);if(p)return p}}return null})},exact:function(e){return u(function(t,n,a,r,o){var i=t[n],s=m(i);if("object"!==s)return new c("Invalid "+r+" `"+o+"` of type `"+s+"` supplied to `"+a+"`, expected `object`.");var l=d({},t[n],e);for(var u in l){var p=e[u];if(!p)return new c("Invalid "+r+" `"+o+"` key `"+u+"` supplied to `"+a+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=p(i,u,a,r,o+"."+u,f);if(h)return h}return null})}};function c(e){this.message=e,this.stack=""}function u(e){var n={},a=0;function o(o,i,u,p,d,h,m){if(p=p||r,h=h||u,m!==f)if(t)s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("undefined"!=typeof console){var g=p+":"+u;!n[g]&&a<3&&(l(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",h,p),n[g]=!0,a++)}return null==i[u]?o?null===i[u]?new c("The "+d+" `"+h+"` is marked as required in `"+p+"`, but its value is `null`."):new c("The "+d+" `"+h+"` is marked as required in `"+p+"`, but its value is `undefined`."):null:e(i,u,p,d,h)}var i=o.bind(null,!1);return i.isRequired=o.bind(null,!0),i}function p(e){return u(function(t,n,a,r,o,i){var s=t[n];if(m(s)!==e){var l=g(s);return new c("Invalid "+r+" `"+o+"` of type `"+l+"` supplied to `"+a+"`, expected `"+e+"`.")}return null})}function h(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(h);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[a]);if("function"==typeof t)return t}(t);if(!r)return!1;var o,i=r.call(t);if(r!==t.entries){for(;!(o=i.next()).done;)if(!h(o.value))return!1}else for(;!(o=i.next()).done;){var s=o.value;if(s&&!h(s[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function g(e){if(null==e)return""+e;var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){var t=g(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return c.prototype=Error.prototype,i.checkPropTypes=v,i.PropTypes=i,i},E=n(function(e){var t="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=y(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},!0)}),O=n(function(e){
/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){var t={}.hasOwnProperty;function n(){for(var e=[],a=0;a<arguments.length;a++){var r=arguments[a];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var i in r)t.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}e.exports?e.exports=n:window.classNames=n}()});function S(e,t){for(var n=0,a=e.length;n<a;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function w(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function C(e){return"number"==typeof e&&!isNaN(e)}function x(e){return parseInt(e,10)}function P(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}var T=["Moz","Webkit","O","ms"];function _(e,t){return t?""+t+function(e){for(var t="",n=!0,a=0;a<e.length;a++)n?(t+=e[a].toUpperCase(),n=!1):"-"===e[a]?n=!0:t+=e[a];return t}(e):e}var N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<T.length;n++)if(_(e,T[n])in t)return T[n];return""}(),k=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),D=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},M=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},R=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},L=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A="";function q(e,t){return A||(A=S(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return w(e[t])})),!!w(e[A])&&e[A](t)}function V(e,t,n){var a=e;do{if(q(a,t))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1}function U(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function Q(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function F(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=x(n.borderTopWidth),t+=x(n.borderBottomWidth)}function H(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=x(n.borderLeftWidth),t+=x(n.borderRightWidth)}function z(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=x(n.paddingTop),t-=x(n.paddingBottom)}function B(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=x(n.paddingLeft),t-=x(n.paddingRight)}function G(e,t,n){var a=e.x,r=e.y,o="translate("+a+n+","+r+n+")";if(t){var i=""+("string"==typeof t.x?t.x:t.x+n),s=""+("string"==typeof t.y?t.y:t.y+n);o="translate("+i+", "+s+")"+o}return o}function Y(e){if(e){var t,n,a=e.getElementById("react-draggable-style-el");a||((a=e.createElement("style")).type="text/css",a.id="react-draggable-style-el",a.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",a.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(a)),e.body&&(t=e.body,n="react-draggable-transparent-selection",t.classList?t.classList.add(n):t.className.match(new RegExp("(?:^|\\s)"+n+"(?!\\S)"))||(t.className+=" "+n))}}function W(e){try{e&&e.body&&(t=e.body,n="react-draggable-transparent-selection",t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(?:^|\\s)"+n+"(?!\\S)","g"),"")),e.selection?e.selection.empty():window.getSelection().removeAllRanges()}catch(e){}var t,n}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return I({touchAction:"none"},e)}function J(e){return"both"===e.props.axis||"x"===e.props.axis}function $(e){return"both"===e.props.axis||"y"===e.props.axis}function K(e,t,n){var a="number"==typeof t?function(e,t){return e.targetTouches&&S(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&S(e.changedTouches,function(e){return t===e.identifier})}(e,t):null;if("number"==typeof t&&!a)return null;var r=te(n),o=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return function(e,t){var n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=e.clientX+t.scrollLeft-n.left,r=e.clientY+t.scrollTop-n.top;return{x:a,y:r}}(a||e,o)}function Z(e,t,n){var a=e.state,r=!C(a.lastX),o=te(e);return r?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-a.lastX,deltaY:n-a.lastY,lastX:a.lastX,lastY:a.lastY,x:t,y:n}}function ee(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function te(t){var n=e.findDOMNode(t);if(!n)throw new Error("<DraggableCore>: Unmounted during event!");return n}var ne={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},ae=ne.mouse,re=function(n){function a(){var t,n,r;k(this,a);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=R(this,(t=a.__proto__||Object.getPrototypeOf(a)).call.apply(t,[this].concat(i))),n=r,r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.handleDragStart=function(t){if(r.props.onMouseDown(t),!r.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode(r);if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var a=n.ownerDocument;if(!(r.props.disabled||!(t.target instanceof a.defaultView.Node)||r.props.handle&&!V(t.target,r.props.handle,n)||r.props.cancel&&V(t.target,r.props.cancel,n))){var o=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}(t);r.setState({touchIdentifier:o});var i=K(t,o,r);if(null!=i){var s=i.x,l=i.y,c=Z(r,s,l);r.props.onStart;var u=r.props.onStart(t,c);!1!==u&&(r.props.enableUserSelectHack&&Y(a),r.setState({dragging:!0,lastX:s,lastY:l}),U(a,ae.move,r.handleDrag),U(a,ae.stop,r.handleDragStop))}}},r.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=K(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,a=t.y;if(Array.isArray(r.props.grid)){var o=n-r.state.lastX,i=a-r.state.lastY,s=function(e,t,n){var a=Math.round(t/e[0])*e[0],r=Math.round(n/e[1])*e[1];return[a,r]}(r.props.grid,o,i),l=L(s,2);if(o=l[0],i=l[1],!o&&!i)return;n=r.state.lastX+o,a=r.state.lastY+i}var c=Z(r,n,a),u=r.props.onDrag(e,c);if(!1!==u)r.setState({lastX:n,lastY:a});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(e){var p=document.createEvent("MouseEvents");p.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(p)}}},r.handleDragStop=function(t){if(r.state.dragging){var n=K(t,r.state.touchIdentifier,r);if(null!=n){var a=n.x,o=n.y,i=Z(r,a,o),s=e.findDOMNode(r);s&&r.props.enableUserSelectHack&&W(s.ownerDocument),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(t,i),s&&(Q(s.ownerDocument,ae.move,r.handleDrag),Q(s.ownerDocument,ae.stop,r.handleDragStop))}}},r.onMouseDown=function(e){return ae=ne.mouse,r.handleDragStart(e)},r.onMouseUp=function(e){return ae=ne.mouse,r.handleDragStop(e)},r.onTouchStart=function(e){return ae=ne.touch,r.handleDragStart(e)},r.onTouchEnd=function(e){return ae=ne.touch,r.handleDragStop(e)},R(r,n)}return M(a,n),j(a,[{key:"componentWillUnmount",value:function(){var t=e.findDOMNode(this);if(t){var n=t.ownerDocument;Q(n,ne.mouse.move,this.handleDrag),Q(n,ne.touch.move,this.handleDrag),Q(n,ne.mouse.stop,this.handleDragStop),Q(n,ne.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&W(n)}}},{key:"render",value:function(){return t.cloneElement(t.Children.only(this.props.children),{style:X(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),a}(t.Component);re.displayName="DraggableCore",re.propTypes={allowAnyClick:E.bool,disabled:E.bool,enableUserSelectHack:E.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:E.arrayOf(E.number),scale:E.number,handle:E.string,cancel:E.string,onStart:E.func,onDrag:E.func,onStop:E.func,onMouseDown:E.func,className:P,style:P,transform:P},re.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}};var oe=function(n){function a(e){k(this,a);var t=R(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onDragStart=function(e,n){var a=t.props.onStart(e,ee(t,n));if(!1===a)return!1;t.setState({dragging:!0,dragged:!0})},t.onDrag=function(e,n){if(!t.state.dragging)return!1;var a=ee(t,n),r={x:a.x,y:a.y};if(t.props.bounds){var o=r.x,i=r.y;r.x+=t.state.slackX,r.y+=t.state.slackY;var s=function(e,t,n){if(!e.props.bounds)return[t,n];var a=e.props.bounds;a="string"==typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);var r=te(e);if("string"==typeof a){var o=r.ownerDocument,i=o.defaultView,s=void 0;if(!((s="parent"===a?r.parentNode:o.querySelector(a))instanceof i.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');var l=i.getComputedStyle(r),c=i.getComputedStyle(s);a={left:-r.offsetLeft+x(c.paddingLeft)+x(l.marginLeft),top:-r.offsetTop+x(c.paddingTop)+x(l.marginTop),right:B(s)-H(r)-r.offsetLeft+x(c.paddingRight)-x(l.marginRight),bottom:z(s)-F(r)-r.offsetTop+x(c.paddingBottom)-x(l.marginBottom)}}return C(a.right)&&(t=Math.min(t,a.right)),C(a.bottom)&&(n=Math.min(n,a.bottom)),C(a.left)&&(t=Math.max(t,a.left)),C(a.top)&&(n=Math.max(n,a.top)),[t,n]}(t,r.x,r.y),l=L(s,2),c=l[0],u=l[1];r.x=c,r.y=u,r.slackX=t.state.slackX+(o-r.x),r.slackY=t.state.slackY+(i-r.y),a.x=r.x,a.y=r.y,a.deltaX=r.x-t.state.x,a.deltaY=r.y-t.state.y}var p=t.props.onDrag(e,a);if(!1===p)return!1;t.setState(r)},t.onDragStop=function(e,n){if(!t.state.dragging)return!1;var a=t.props.onStop(e,ee(t,n));if(!1===a)return!1;var r={dragging:!1,slackX:0,slackY:0},o=Boolean(t.props.position);if(o){var i=t.props.position,s=i.x,l=i.y;r.x=s,r.y=l}t.setState(r)},t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return M(a,n),j(a,[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&e.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,n,a,r={},o=null,i=Boolean(this.props.position),s=!i||this.state.dragging,l=this.props.position||this.props.defaultPosition,c={x:J(this)&&s?this.state.x:l.x,y:$(this)&&s?this.state.y:l.y};this.state.isElementSVG?(n=c,a=this.props.positionOffset,o=G(n,a,"")):r=function(e,t){var n=G(e,t,"px");return D({},_("transform",N),n)}(c,this.props.positionOffset);var u=this.props,p=u.defaultClassName,d=u.defaultClassNameDragging,f=u.defaultClassNameDragged,h=t.Children.only(this.props.children),m=O(h.props.className||"",p,(D(e={},d,this.state.dragging),D(e,f,this.state.dragged),e));return t.createElement(re,I({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(h,{className:m,style:I({},h.props.style,r),transform:o}))}}]),a}(t.Component);return oe.displayName="Draggable",oe.propTypes=I({},re.propTypes,{axis:E.oneOf(["both","x","y","none"]),bounds:E.oneOfType([E.shape({left:E.number,right:E.number,top:E.number,bottom:E.number}),E.string,E.oneOf([!1])]),defaultClassName:E.string,defaultClassNameDragging:E.string,defaultClassNameDragged:E.string,defaultPosition:E.shape({x:E.number,y:E.number}),positionOffset:E.shape({x:E.oneOfType([E.number,E.string]),y:E.oneOfType([E.number,E.string])}),position:E.shape({x:E.number,y:E.number}),className:P,style:P,transform:P}),oe.defaultProps=I({},re.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}),oe.default=oe,oe.DraggableCore=re,oe}(n("i8i4"),n("q1tI"))},"7iUX":function(e,t,n){"use strict";var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("kDLi"),s=n("Obii"),l=n("PAeb");var c;t.a=function(e){var t=function(e){switch(e){case s.PluginState.alpha:return"Alpha Plugin: This plugin is a work in progress and updates may include breaking changes";case s.PluginState.beta:return"Beta Plugin: There could be bugs and minor breaking changes to this plugin"}return null}(e.state);return t?o.a.createElement(i.AlphaNotice,{state:e.state,text:t,className:Object(l.css)(c||(c=Object(a.__makeTemplateObject)(["\n        margin-left: 16px;\n      "],["\n        margin-left: 16px;\n      "])))}):null}},"8M//":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n("mrSG"),r=n("UvM7"),o=n("NXk7"),i=n("3SGO"),s=n("UIT+"),l=n("J4KJ"),c=n("GQ3c"),u=n("rd46");function p(e,t,n){return Object(a.__awaiter)(this,void 0,Promise,function(){var r,u,p,d,h;return Object(a.__generator)(this,function(m){switch(m.label){case 0:switch(m.trys.push([0,8,,9]),e.routeInfo){case c.DashboardRouteInfo.Home:return[3,1];case c.DashboardRouteInfo.Normal:return[3,3];case c.DashboardRouteInfo.New:return[3,5]}return[3,6];case 1:return[4,Object(o.b)().get("/api/dashboards/home")];case 2:return(u=m.sent()).redirectUri?(r=s.a.stripBaseFromUrl(u.redirectUri),t(Object(i.c)({path:r,replace:!0})),[2,null]):(u.meta.canSave=!1,u.meta.canShare=!1,u.meta.canStar=!1,[2,u]);case 3:return"db"===e.urlType?(function(e,t,n){Object(a.__awaiter)(this,void 0,void 0,function(){var r,l,c;return Object(a.__generator)(this,function(a){switch(a.label){case 0:return[4,Object(o.b)().getDashboardBySlug(e)];case 1:return(r=a.sent())&&(l=r.meta.url,-1!==n.indexOf("dashboard-solo")&&(l=l.replace("/d/","/d-solo/")),c=s.a.stripBaseFromUrl(l),t(Object(i.c)({path:c,partial:!0,replace:!0}))),[2]}})})}(e.urlSlug,t,n().location.path),[2,null]):[4,e.$injector.get("dashboardLoaderSrv").loadDashboard(e.urlType,e.urlSlug,e.urlUid)];case 4:return u=m.sent(),e.fixUrl&&u.meta.url&&(p=s.a.stripBaseFromUrl(u.meta.url),d=n().location.path,p!==d)?(t(Object(i.c)({path:p,partial:!0,replace:!0})),[2,null]):[2,u];case 5:return[2,f(e.urlFolderId)];case 6:throw{message:"Unknown route "+e.routeInfo};case 7:return[3,9];case 8:return h=m.sent(),t(Object(l.e)({message:"Failed to fetch dashboard",error:h})),console.log(h),[2,null];case 9:return[2]}})})}function d(e){var t=this;return function(n,o){return Object(a.__awaiter)(t,void 0,void 0,function(){var t,s,c,d,f,h,m,g,b,v,y,E,O,S;return Object(a.__generator)(this,function(a){switch(a.label){case 0:return n(Object(l.f)()),setTimeout(function(){null===o().dashboard.model&&n(Object(l.h)())},500),[4,p(e,n,o)];case 1:if(!(t=a.sent()))return[2];n(Object(l.g)());try{s=new u.a(t.dashboard,t.meta)}catch(e){return n(Object(l.e)({message:"Failed create dashboard model",error:e})),console.log(e),[2]}(c=o()).location.query.orgId||n(Object(i.c)({query:{orgId:c.user.orgId},partial:!0,replace:!0})),d=e.$injector.get("timeSrv"),f=e.$injector.get("annotationsSrv"),h=e.$injector.get("variableSrv"),m=e.$injector.get("keybindingSrv"),g=e.$injector.get("unsavedChangesSrv"),b=e.$injector.get("dashboardSrv"),d.init(s),f.init(s),v=c.dashboard.modifiedQueries,y=v.panelId,E=v.queries,s.meta.fromExplore=!(!y||!E),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,h.init(s)];case 3:return a.sent(),[3,5];case 4:return O=a.sent(),n(Object(i.b)(Object(r.a)("Templating init failed",O))),console.log(O),[3,5];case 5:try{s.processRepeats(),s.updateSubmenuVisibility(),(S=o().location.query).autofitpanels&&s.autoFitPanels(window.innerHeight,S.kiosk),g.init(s,e.$scope),m.setupDashboardBindings(e.$scope,s)}catch(e){n(Object(i.b)(Object(r.a)("Dashboard init failed",e))),console.log(e)}return s.meta.fromExplore&&function(e,t,n,a){var r=t.panels.findIndex(function(e){return e.id===n});r>-1&&(t.panels[r].targets=a);e(Object(l.c)())}(n,s,y,E),b.setCurrent(s),n(Object(l.d)(s)),[2]}})})}}function f(e){var t={meta:{canStar:!1,canShare:!1,isNew:!0,folderId:0},dashboard:{title:"New dashboard",panels:[{type:"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}]}};return e&&(t.meta.folderId=parseInt(e,10)),t}},"94Oj":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("Wwog"),r=n("xL/7"),o=Object(a.default)(function(e,t){var n=t.tabs.length>0?t.tabs[0].id:r.a.Queries;return{activeTab:e.query.tab||n,tabs:t.tabs}})},BkfJ:function(e,t,n){"use strict";var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("3ulR"),s=n("t8hP"),l=n("Xmxp"),c=n("GQ3c"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={stateHistoryItems:[]},t.clearHistory=function(){var e=t.props,n=e.dashboard,a=e.onRefresh,r=e.panelId;l.b.emit(c.CoreEvents.showConfirmModal,{title:"Delete Alert History",text:"Are you sure you want to remove all history & annotations for this alert?",icon:"fa-trash",yesText:"Yes",onConfirm:function(){Object(s.getBackendSrv)().post("/api/annotations/mass-delete",{dashboardId:n.id,panelId:r}).then(function(){t.setState({stateHistoryItems:[]}),a()})}})},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.dashboard,a=t.panelId;Object(s.getBackendSrv)().get("/api/annotations?dashboardId="+n.id+"&panelId="+a+"&limit=50&type=alert").then(function(t){var a=t.map(function(e){return{stateModel:i.a.getStateDisplayModel(e.newState),time:n.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),info:i.a.getAlertAnnotationInfo(e)}});e.setState({stateHistoryItems:a})})},t.prototype.render=function(){var e=this.state.stateHistoryItems;return o.a.createElement("div",null,e.length>0&&o.a.createElement("div",{className:"p-b-1"},o.a.createElement("span",{className:"muted"},"Last 50 state changes"),o.a.createElement("button",{className:"btn btn-small btn-danger pull-right",onClick:this.clearHistory},o.a.createElement("i",{className:"fa fa-trash"})," "," Clear history")),o.a.createElement("ol",{className:"alert-rule-list"},e.length>0?e.map(function(e,t){return o.a.createElement("li",{className:"alert-rule-item",key:e.time+"-"+t},o.a.createElement("div",{className:"alert-rule-item__icon "+e.stateModel.stateClass},o.a.createElement("i",{className:e.stateModel.iconClass})),o.a.createElement("div",{className:"alert-rule-item__body"},o.a.createElement("div",{className:"alert-rule-item__header"},o.a.createElement("p",{className:"alert-rule-item__name"},e.alertName),o.a.createElement("div",{className:"alert-rule-item__text"},o.a.createElement("span",{className:""+e.stateModel.stateClass},e.stateModel.text))),e.info),o.a.createElement("div",{className:"alert-rule-item__time"},e.time))}):o.a.createElement("i",null,"No state changes recorded")))},t}(r.PureComponent);t.a=u},EKT6:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("q1tI"),r=n.n(a),o=n("Obii"),i=Object(a.forwardRef)(function(e,t){return r.a.createElement("label",{className:e.labelClassName},r.a.createElement("input",{ref:t,type:"text",className:e.inputClassName,value:Object(o.unEscapeStringFromRegex)(e.value),onChange:function(t){return e.onChange(Object(o.escapeStringForRegex)(t.target.value))},placeholder:e.placeholder?e.placeholder:null}),r.a.createElement("i",{className:"gf-form-input-icon fa fa-search"}))})},"GP+p":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("kDLi"),s=n("9LhM"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.onToggleToolBarView=function(e){n.setState({openView:e,isOpen:n.state.openView!==e||!n.state.isOpen})},n.onCloseOpenView=function(){n.setState({isOpen:!1})},n.state={openView:null,fadeIn:!1,isOpen:!1},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.setState({fadeIn:!0})},t.getDerivedStateFromProps=function(e,t){if(t.openView){var n=e.toolbarItems.find(function(e){return e.title===t.openView.title&&e.icon===t.openView.icon});if(n)return Object(a.__assign)(Object(a.__assign)({},t),{openView:n})}return t},t.prototype.renderButton=function(e){var t=this;return o.a.createElement("div",{className:"nav-buttons",key:e.title+e.icon},o.a.createElement("button",{className:"btn navbar-button",onClick:function(){e.onClick&&e.onClick(),e.render&&t.onToggleToolBarView(e)},disabled:e.disabled},e.icon&&o.a.createElement("i",{className:e.icon})," ",e.title))},t.prototype.renderOpenView=function(e){return o.a.createElement(i.PanelOptionsGroup,{title:e.title||e.heading,onClose:this.onCloseOpenView},e.render())},t.prototype.render=function(){var e=this,t=this.props,n=t.children,a=t.renderToolbar,r=t.heading,l=t.toolbarItems,c=t.scrollTop,u=t.setScrollTop,p=this.state,d=p.openView,f=p.fadeIn,h=p.isOpen;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"toolbar"},o.a.createElement("div",{className:"toolbar__left"},o.a.createElement("div",{className:"toolbar__heading"},r),a&&a()),l.map(function(t){return e.renderButton(t)})),o.a.createElement("div",{className:"panel-editor__scroll"},o.a.createElement(i.CustomScrollbar,{autoHide:!1,scrollTop:c,setScrollTop:u,updateAfterMountMs:300},o.a.createElement("div",{className:"panel-editor__content"},o.a.createElement(s.a,{in:h,duration:200,unmountOnExit:!0},d&&this.renderOpenView(d)),o.a.createElement(s.a,{in:f,duration:50},n)))))},t.defaultProps={toolbarItems:[]},t}(r.PureComponent)},I1OQ:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var a=n("mrSG"),r=n("xL/7"),o=n("3SGO"),i=function(e){return function(t,n){return Object(a.__awaiter)(void 0,void 0,void 0,function(){var o,i,s,l,c;return Object(a.__generator)(this,function(a){return o=n().panelEditor.activeTab||r.a.Queries,i=e.hasQueriesTab,s=e.usesGraphPlugin,l=e.alertingEnabled,c=[Object(r.b)(r.a.Queries),Object(r.b)(r.a.Visualization),Object(r.b)(r.a.Advanced)],i||(c.shift(),o===r.a.Queries&&(o=r.a.Visualization)),l&&s&&c.push(Object(r.b)(r.a.Alert)),t(Object(r.d)({activeTab:o,tabs:c})),[2]})})}},s=function(e){return function(t){return Object(a.__awaiter)(void 0,void 0,void 0,function(){return Object(a.__generator)(this,function(n){return t(Object(o.c)({query:{tab:e.id,openVizPicker:null},partial:!0})),[2]})})}}},"OG+f":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("Obii"),s=n("t8hP"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isError:!1,isLoading:!1,help:""},t.loadHelp=function(){var e=t.props,n=e.plugin,a=e.type;t.setState({isLoading:!0}),Object(s.getBackendSrv)().get("/api/plugins/"+n.id+"/markdown/"+a).then(function(e){var n=Object(i.renderMarkdown)(e);""===e&&"help"===a?t.setState({isError:!1,isLoading:!1,help:t.constructPlaceholderInfo()}):t.setState({isError:!1,isLoading:!1,help:n})}).catch(function(){t.setState({isError:!0,isLoading:!1})})},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.loadHelp()},t.prototype.constructPlaceholderInfo=function(){return"No plugin help or readme markdown file was found"},t.prototype.render=function(){this.props.type;var e=this.state,t=e.isError,n=e.isLoading,a=e.help;return n?o.a.createElement("h2",null,"Loading help..."):t?o.a.createElement("h3",null,"'Error occurred when loading help'"):o.a.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:a}})},t}(r.PureComponent)},ShMG:function(e,t,n){"use strict";var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("t8hP"),s=n("GP+p"),l=n("txxJ"),c=function(e){return Object.keys(e).reduce(function(t,n){return t.concat(n+"="+e[n])},[]).join()},u=function(){function e(e){var t=this;this.panelCtrl=e.ctrl;e.$watch(function(e){var t=e.ctrl.panel;return["title","description","transparent","repeat","repeatDirection","minSpan"].map(function(e){return e+"="+(t[e]&&t[e].toString?t[e].toString():t[e])}).join()+(t.links||[]).map(c).join()},function(){console.log("panel.render()"),t.panelCtrl.panel.render()},!0)}return e.$inject=["$scope"],e}();l.c.directive("panelGeneralTab",function(){return{restrict:"E",templateUrl:"public/app/features/panel/partials/general_tab.html",controller:u}});var p=n("kDLi"),d=n("GkHB");n.d(t,"a",function(){return f});var f=function(e){function t(t){var n=e.call(this,t)||this;return n.onDataLinksChanged=function(e,t){n.props.panel.links=e,n.props.panel.render(),n.forceUpdate(t)},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){if(this.element){var e=this.props.panel,t=Object(i.getAngularLoader)(),n={ctrl:{panel:e}};this.component=t.load(this.element,n,"<panel-general-tab />")}},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.render=function(){var e=this,t=this.props.panel,n=Object(d.d)();return o.a.createElement(s.a,{heading:"General",toolbarItems:[]},o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:function(t){return e.element=t}}),o.a.createElement(p.PanelOptionsGroup,{title:"Panel links"},o.a.createElement(p.DataLinksEditor,{value:t.links,onChange:this.onDataLinksChanged,suggestions:n,maxLinks:10}))))},t}(r.PureComponent)},Yuww:function(e,t,n){"use strict";var a,r=n("mrSG"),o=n("q1tI"),i=n.n(o),s=n("TSYQ"),l=n.n(s),c=n("jYz7"),u=n("t8hP"),p=n("Vw/f"),d=n("LvDl"),f=n.n(d),h=n("1gCF"),m=n("ZFWI"),g=n("SMGL"),b=n("iODs"),v=n("3SGO"),y=n("eXZ6"),E=function(e){function t(t){var n=e.call(this,t)||this;return n.onCreateNewPanel=function(e){void 0===e&&(e="queries");var t=n.props.dashboard,a=n.props.panel.gridPos,r={type:"graph",title:"Panel Title",gridPos:{x:a.x,y:a.y,w:a.w,h:a.h}};t.addPanel(r),t.removePanel(n.props.panel);var o={query:{panelId:r.id,edit:!0,fullscreen:!0},partial:!0};"visualization"===e&&(o.query.tab="visualization",o.query.openVizPicker=!0),b.b.dispatch(Object(v.c)(o))},n.onPasteCopiedPanel=function(e){var t=n.props.dashboard,a=n.props.panel.gridPos,r={type:e.id,title:"Panel Title",gridPos:{x:a.x,y:a.y,w:e.defaults.gridPos.w,h:e.defaults.gridPos.h}};e.defaults&&(f.a.defaults(r,e.defaults),r.title=e.defaults.title,g.a.delete(y.f)),t.addPanel(r),t.removePanel(n.props.panel)},n.onCreateNewRow=function(){var e=n.props.dashboard;e.addPanel({type:"row",title:"Row title",gridPos:{x:0,y:0}}),e.removePanel(n.props.panel)},n.renderOptionLink=function(e,t,n){return i.a.createElement("div",null,i.a.createElement("a",{href:"#",onClick:n,className:"add-panel-widget__link btn btn-inverse","aria-label":h.a.pages.AddDashboard.selectors.ctaButtons(t)},i.a.createElement("div",{className:"add-panel-widget__icon"},i.a.createElement("i",{className:"gicon gicon-"+e})),i.a.createElement("span",null,t)))},n.handleCloseAddPanel=n.handleCloseAddPanel.bind(n),n.state={copiedPanelPlugins:n.getCopiedPanelPlugins()},n}return Object(r.__extends)(t,e),t.prototype.getCopiedPanelPlugins=function(){var e=f.a.chain(m.b.panels).filter({hideFromList:!1}).map(function(e){return e}).value(),t=[],n=g.a.get(y.f);if(n){var a=JSON.parse(n),r=f.a.find(e,{id:a.type});if(r){var o=f.a.cloneDeep(r);o.name=a.title,o.sort=-1,o.defaults=a,t.push(o)}}return f.a.sortBy(t,"sort")},t.prototype.handleCloseAddPanel=function(e){e.preventDefault(),this.props.dashboard.removePanel(this.props.panel)},t.prototype.render=function(){var e=this,t=this.state.copiedPanelPlugins;return i.a.createElement("div",{className:"panel-container add-panel-widget-container"},i.a.createElement("div",{className:"add-panel-widget"},i.a.createElement("div",{className:"add-panel-widget__header grid-drag-handle"},i.a.createElement("i",{className:"gicon gicon-add-panel"}),i.a.createElement("span",{className:"add-panel-widget__title"},"New Panel"),i.a.createElement("button",{className:"add-panel-widget__close",onClick:this.handleCloseAddPanel},i.a.createElement("i",{className:"fa fa-close"}))),i.a.createElement("div",{className:"add-panel-widget__btn-container"},i.a.createElement("div",{className:"add-panel-widget__create"},this.renderOptionLink("queries","Add Query",this.onCreateNewPanel),this.renderOptionLink("visualization","Choose Visualization",function(){return e.onCreateNewPanel("visualization")})),i.a.createElement("div",{className:"add-panel-widget__actions"},i.a.createElement("button",{className:"btn btn-inverse add-panel-widget__action",onClick:this.onCreateNewRow},"Convert to row"),1===t.length&&i.a.createElement("button",{className:"btn btn-inverse add-panel-widget__action",onClick:function(){return e.onPasteCopiedPanel(t[0])}},"Paste copied panel")))))},t}(i.a.Component),O=n("5kRJ"),S=n("Xmxp"),w=n("GQ3c"),C=function(e){function t(t){var n=e.call(this,t)||this;return n.onVariableUpdated=function(){n.forceUpdate()},n.onToggle=function(){n.props.dashboard.toggleRow(n.props.panel),n.setState(function(e){return{collapsed:!e.collapsed}})},n.onUpdate=function(){n.props.dashboard.processRepeats(),n.forceUpdate()},n.onOpenSettings=function(){S.b.emit(w.CoreEvents.showModal,{templateHtml:'<row-options row="model.row" on-updated="model.onUpdated()" dismiss="dismiss()"></row-options>',modalClass:"modal--narrow",model:{row:n.props.panel,onUpdated:n.onUpdate}})},n.onDelete=function(){S.b.emit(w.CoreEvents.showConfirmModal,{title:"Delete Row",text:"Are you sure you want to remove this row and all its panels?",altActionText:"Delete row only",icon:"fa-trash",onConfirm:function(){n.props.dashboard.removeRow(n.props.panel,!0)},onAltAction:function(){n.props.dashboard.removeRow(n.props.panel,!1)}})},n.state={collapsed:n.props.panel.collapsed},n.props.dashboard.on(w.CoreEvents.templateVariableValueUpdated,n.onVariableUpdated),n}return Object(r.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.props.dashboard.off(w.CoreEvents.templateVariableValueUpdated,this.onVariableUpdated)},t.prototype.render=function(){var e=l()({"dashboard-row":!0,"dashboard-row--collapsed":this.state.collapsed}),t=l()({fa:!0,"fa-chevron-down":!this.state.collapsed,"fa-chevron-right":this.state.collapsed}),n=O.b.replaceWithText(this.props.panel.title,this.props.panel.scopedVars),a=this.props.panel.panels?this.props.panel.panels.length:0,r=1===a?"panel":"panels",o=!0===this.props.dashboard.meta.canEdit;return i.a.createElement("div",{className:e},i.a.createElement("a",{className:"dashboard-row__title pointer",onClick:this.onToggle},i.a.createElement("i",{className:t}),n,i.a.createElement("span",{className:"dashboard-row__panel_count"},"(",a," ",r,")")),o&&i.a.createElement("div",{className:"dashboard-row__actions"},i.a.createElement("a",{className:"pointer",onClick:this.onOpenSettings},i.a.createElement("i",{className:"gicon gicon-cog"})),i.a.createElement("a",{className:"pointer",onClick:this.onDelete},i.a.createElement("i",{className:"fa fa-trash"}))),!0===this.state.collapsed&&i.a.createElement("div",{className:"dashboard-row__toggle-target",onClick:this.onToggle}," "),o&&i.a.createElement("div",{className:"dashboard-row__drag grid-drag-handle"}))},t}(i.a.Component),x=n("kDLi"),P=n("Obii"),T=n("NPB1");!function(e){e.Error="Error",e.Info="Info",e.Links="Links"}(a||(a={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeSrv=Object(T.a)(),t.getInfoMode=function(){var e=t.props,n=e.panel;return e.error?a.Error:n.description?a.Info:n.links&&n.links.length?a.Links:void 0},t.getInfoContent=function(){var e=t.props.panel,n=e.description||"",a=O.b.replace(n,e.scopedVars),r=Object(P.renderMarkdown)(a),o=t.props.links&&t.props.links.getLinks(e);return i.a.createElement("div",{className:"panel-info-content markdown-html"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:r}}),o&&o.length>0&&i.a.createElement("ul",{className:"panel-info-corner-links"},o.map(function(e,t){return i.a.createElement("li",{key:t},i.a.createElement("a",{className:"panel-info-corner-links__item",href:e.href,target:e.target},e.title))})))},t.onClickError=function(){Object(u.getLocationSrv)().update({partial:!0,query:{inspect:t.props.panel.id}})},t}return Object(r.__extends)(t,e),t.prototype.renderCornerType=function(e,t,n){var r=e===a.Error?"error":"info";return i.a.createElement(x.Tooltip,{content:t,placement:"top-start",theme:r},i.a.createElement("div",{className:"panel-info-corner panel-info-corner--"+e.toLowerCase(),onClick:n},i.a.createElement("i",{className:"fa"}),i.a.createElement("span",{className:"panel-info-corner-inner"})))},t.prototype.render=function(){var e=this.getInfoMode();return e?e===a.Error?this.renderCornerType(e,this.props.error,this.onClickError):e===a.Info||e===a.Links?this.renderCornerType(e,this.getInfoContent):null:null},t}(o.Component),N=function(e){var t="submenu"===e.type;return"divider"===e.type?i.a.createElement("li",{className:"divider"}):i.a.createElement("li",{className:t?"dropdown-submenu":null},i.a.createElement("a",{onClick:e.onClick},e.iconClassName&&i.a.createElement("i",{className:e.iconClassName}),i.a.createElement("span",{className:"dropdown-item-text","aria-label":h.a.pages.Dashboard.Panels.Panel.selectors.headerItems(e.text)},e.text),e.shortcut&&i.a.createElement("span",{className:"dropdown-menu-item-shortcut"},e.shortcut)),e.children)},k=n("+JUD"),j=n("umNM"),D=n("Efza"),I=n("m257"),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItems=function(e,n){return void 0===n&&(n=!1),i.a.createElement("ul",{className:"dropdown-menu dropdown-menu--menu panel-menu",role:n?"":"menu"},e.map(function(e,n){return i.a.createElement(N,{key:""+e.text+n,type:e.type,text:e.text,iconClassName:e.iconClassName,onClick:e.onClick,shortcut:e.shortcut},e.subMenu&&t.renderItems(e.subMenu,!0))}))},t}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=function(e,t){var n=[];n.push({text:"View",iconClassName:"gicon gicon-viewer",onClick:function(e){e.preventDefault(),b.b.dispatch(Object(v.c)({query:{panelId:t.id,edit:null,fullscreen:!0},partial:!0}))},shortcut:"v"}),e.canEditPanel(t)&&n.push({text:"Edit",iconClassName:"gicon gicon-editor",onClick:function(e){e.preventDefault(),b.b.dispatch(Object(v.c)({query:{panelId:t.id,edit:!0,fullscreen:!0},partial:!0}))},shortcut:"e"}),n.push({text:"Share",iconClassName:"fa fa-fw fa-share",onClick:function(n){n.preventDefault(),Object(k.h)(e,t)},shortcut:"p s"}),j.a.hasAccessToExplore()&&t.datasource&&n.push({text:"Explore",iconClassName:"gicon gicon-explore",shortcut:"x",onClick:function(e){e.preventDefault();var n=e.ctrlKey||e.metaKey?function(e){return window.open(e)}:void 0;b.b.dispatch(Object(D.k)(t,{getDataSourceSrv:u.getDataSourceSrv,getTimeSrv:T.a,getExploreUrl:I.k,openInNewWindow:n}))}}),m.b.featureToggles.inspect&&n.push({text:"Inspect",iconClassName:"fa fa-fw fa-info-circle",onClick:function(e){e.preventDefault(),Object(u.getLocationSrv)().update({partial:!0,query:{inspect:t.id}})},shortcut:"p i"}),m.b.featureToggles.newEdit&&n.push({text:"New edit",iconClassName:"gicon gicon-editor",onClick:function(e){e.preventDefault(),b.b.dispatch(Object(v.c)({query:{editPanel:t.id},partial:!0}))},shortcut:"p i"});var a=[];return!t.fullscreen&&e.canEditPanel(t)&&(a.push({text:"Duplicate",onClick:function(n){n.preventDefault(),Object(k.d)(e,t)},shortcut:"p d"}),a.push({text:"Copy",onClick:function(e){e.preventDefault(),Object(k.c)(t)}})),a.push({text:"Panel JSON",onClick:function(n){n.preventDefault(),Object(k.e)(e,t)}}),n.push({type:"submenu",text:"More...",iconClassName:"fa fa-fw fa-cube",subMenu:a,onClick:function(e){e.preventDefault()}}),e.canEditPanel(t)&&(n.push({type:"divider"}),n.push({text:"Remove",iconClassName:"fa fa-fw fa-trash",onClick:function(n){n.preventDefault(),Object(k.g)(e,t,!0)},shortcut:"p r"})),n}(e.dashboard,e.panel);return i.a.createElement("div",{className:"panel-menu-container dropdown open"},this.renderItems(t))},t}(o.PureComponent),R=n("MAcC"),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickCoordinates={x:0,y:0},t.state={panelMenuOpen:!1,clickCoordinates:{x:0,y:0}},t.eventToClickCoordinates=function(e){return{x:e.clientX,y:e.clientY}},t.onMouseDown=function(e){t.clickCoordinates=t.eventToClickCoordinates(e)},t.isClick=function(e){return Object(d.isEqual)(e,t.clickCoordinates)},t.onMenuToggle=function(e){t.isClick(t.eventToClickCoordinates(e))&&(e.stopPropagation(),t.setState(function(e){return{panelMenuOpen:!e.panelMenuOpen}}))},t.closeMenu=function(){t.setState({panelMenuOpen:!1})},t}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.panel,n=e.dashboard,a=e.timeInfo,r=e.scopedVars,o=e.error,s=e.isFullscreen,c=O.b.replaceWithText(t.title,r),u=l()({"panel-header":!0,"grid-drag-handle":!s});return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:u},i.a.createElement(_,{panel:t,title:t.title,description:t.description,scopedVars:t.scopedVars,links:Object(R.c)(t),error:o}),i.a.createElement("div",{className:"panel-title-container",onClick:this.onMenuToggle,onMouseDown:this.onMouseDown,"aria-label":h.a.pages.Dashboard.Panels.Panel.selectors.title(c)},i.a.createElement("div",{className:"panel-title"},i.a.createElement("span",{className:"icon-gf panel-alert-icon"}),i.a.createElement("span",{className:"panel-title-text"},c," ",i.a.createElement("span",{className:"fa fa-caret-down panel-menu-toggle"})),this.state.panelMenuOpen&&i.a.createElement(x.ClickOutsideWrapper,{onClick:this.closeMenu},i.a.createElement(M,{panel:t,dashboard:n})),a&&i.a.createElement("span",{className:"panel-time-info"},i.a.createElement("i",{className:"fa fa-clock-o"})," ",a)))))},t}(o.Component),A=n("T9PE"),q=n("kHZm"),V=function(e){function t(t){var n=e.call(this,t)||this;return n.timeSrv=Object(T.a)(),n.onRefresh=function(){var e=n.props,t=e.panel,a=e.isInView,r=e.width;if(!a)return console.log("Refresh when panel is visible",t.id),void n.setState({refreshWhenInView:!0});var o=Object(k.a)(t,n.timeSrv.timeRange());if(n.wantsQueryExecution){if(r<0)return void console.log("Refresh skippted, no width yet... wait till we know");var i=t.getQueryRunner();n.querySubscription||(n.querySubscription=i.getData().subscribe({next:function(e){return n.onDataUpdate(e)}})),i.run({datasource:t.datasource,queries:t.targets,panelId:t.id,dashboardId:n.props.dashboard.id,timezone:n.props.dashboard.getTimezone(),timeRange:o.timeRange,timeInfo:o.timeInfo,widthPixels:r,maxDataPoints:t.maxDataPoints,minInterval:t.interval,scopedVars:t.scopedVars,cacheTimeout:t.cacheTimeout,transformations:t.transformations})}},n.onRender=function(){var e={renderCounter:n.state.renderCounter+1};n.setState(e)},n.onOptionsChange=function(e){n.props.panel.updateOptions(e)},n.replaceVariables=function(e,t,a){var o=n.props.panel.scopedVars;return t&&(o=o?Object(r.__assign)(Object(r.__assign)({},o),t):t),O.b.replace(e,o,a)},n.onPanelError=function(e){n.state.errorMessage!==e&&n.setState({errorMessage:e})},n.onChangeTimeRange=function(e){n.timeSrv.setTime({from:Object(P.toUtc)(e.from),to:Object(P.toUtc)(e.to)})},n.state={isFirstLoad:!0,renderCounter:0,errorMessage:null,refreshWhenInView:!1,data:{state:P.LoadingState.NotStarted,series:[],timeRange:P.DefaultTimeRange}},n}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.panel,n=e.dashboard;t.events.on(P.PanelEvents.refresh,this.onRefresh),t.events.on(P.PanelEvents.render,this.onRender),n.panelInitialized(this.props.panel),this.hasPanelSnapshot?this.setState({data:Object(r.__assign)(Object(r.__assign)({},this.state.data),{state:P.LoadingState.Done,series:Object(q.a)(t.snapshotData)}),isFirstLoad:!1}):this.wantsQueryExecution||this.setState({isFirstLoad:!1})},t.prototype.componentWillUnmount=function(){this.props.panel.events.off(P.PanelEvents.refresh,this.onRefresh),this.props.panel.events.off(P.PanelEvents.render,this.onRender),this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)},t.prototype.componentDidUpdate=function(e){var t=this.props.isInView;t!==e.isInView&&(t?this.state.refreshWhenInView&&this.onRefresh():this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null))},t.prototype.onDataUpdate=function(e){if(this.props.isInView){var t=this.state.isFirstLoad,n=null;switch(e.state){case P.LoadingState.Loading:if(this.state.data.state===P.LoadingState.Loading)return;break;case P.LoadingState.Error:var a=e.error;a&&n!==a.message&&(n=a.message);break;case P.LoadingState.Done:this.props.dashboard.snapshot&&(this.props.panel.snapshotData=e.series.map(function(e){return Object(P.toDataFrameDTO)(e)})),t&&(t=!1)}this.setState({isFirstLoad:t,errorMessage:n,data:e})}},Object.defineProperty(t.prototype,"hasPanelSnapshot",{get:function(){var e=this.props.panel;return e.snapshotData&&e.snapshotData.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wantsQueryExecution",{get:function(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)},enumerable:!0,configurable:!0}),t.prototype.renderPanel=function(e,t){var n=this.props,a=n.panel,r=n.plugin,o=this.state,s=o.renderCounter,c=o.data,u=o.isFirstLoad,p=m.b.theme,d=c.state;if(d===P.LoadingState.Done&&A.a.renderingCompleted(),u&&(d===P.LoadingState.Loading||d===P.LoadingState.NotStarted))return this.renderLoadingState();var f=r.panel,h=c.timeRange||this.timeSrv.timeRange(),g=this.hasOverlayHeader()?0:p.panelHeaderHeight,b=r.noPadding?0:p.panelPadding,v=e-2*b-y.h,E=t-g-2*b-y.h,O=l()({"panel-content":!0,"panel-content--no-padding":r.noPadding});return i.a.createElement(i.a.Fragment,null,d===P.LoadingState.Loading&&this.renderLoadingState(),i.a.createElement("div",{className:O},i.a.createElement(f,{id:a.id,data:c,timeRange:h,timeZone:this.props.dashboard.getTimezone(),options:a.getOptions(),transparent:a.transparent,width:v,height:E,renderCounter:s,replaceVariables:this.replaceVariables,onOptionsChange:this.onOptionsChange,onChangeTimeRange:this.onChangeTimeRange})))},t.prototype.renderLoadingState=function(){return i.a.createElement("div",{className:"panel-loading"},i.a.createElement("i",{className:"fa fa-spinner fa-spin"}))},t.prototype.hasOverlayHeader=function(){var e=this.props.panel,t=this.state,n=t.errorMessage,a=t.data;return!n&&((!a.request||!a.request.timeInfo)&&!e.hasTitle())},t.prototype.render=function(){var e=this,t=this.props,n=t.dashboard,a=t.panel,r=t.isFullscreen,o=t.width,s=t.height,c=this.state,u=c.errorMessage,p=c.data,d=a.transparent,f=l()({"panel-container":!0,"panel-container--absolute":!0,"panel-container--transparent":d,"panel-container--no-title":this.hasOverlayHeader()});return i.a.createElement("div",{className:f},i.a.createElement(L,{panel:a,dashboard:n,timeInfo:p.request?p.request.timeInfo:null,title:a.title,description:a.description,scopedVars:a.scopedVars,links:a.links,error:u,isFullscreen:r}),i.a.createElement(x.ErrorBoundary,null,function(t){var n=t.error;return t.errorInfo?(e.onPanelError(n.message||"Error in plugin"),null):e.renderPanel(o,s)}))},t}(o.PureComponent),U=n("aEUA"),Q=n("01jY"),F=n.n(Q),H=function(e){function t(t){var n=e.call(this,t)||this;n.initialHeight=Math.floor(.3*document.documentElement.scrollHeight),n.noStyles={},n.changeHeight=function(e){var t=n.smallestHeight,a=n.largestHeight;e=(e=e<t?t:e)>a?a:e,n.prevEditorHeight=n.state.editorHeight,n.setState({editorHeight:e})},n.onDrag=function(e,t){var a=n.state.editorHeight+t.y;n.throttledChangeHeight(a),n.throttledResizeDone()};var a=n.props.panel;return n.state={editorHeight:n.initialHeight},n.throttledChangeHeight=Object(d.throttle)(n.changeHeight,20,{trailing:!0}),n.throttledResizeDone=Object(d.throttle)(function(){a.resizeDone()},50),n}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"largestHeight",{get:function(){return.9*document.documentElement.scrollHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallestHeight",{get:function(){return 100},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.render,n=e.isEditing,a=this.state.editorHeight;return i.a.createElement(i.a.Fragment,null,t(n?{height:a}:this.noStyles),n&&i.a.createElement("div",{className:"panel-editor-container__resizer"},i.a.createElement(F.a,{axis:"y",grid:[100,1],onDrag:this.onDrag,position:{x:0,y:0}},i.a.createElement("div",{className:"panel-editor-resizer"},i.a.createElement("div",{className:"panel-editor-resizer__handle"})))))},t}(o.PureComponent);n.d(t,"a",function(){return z});var z=function(e){function t(t){var n=e.call(this,t)||this;return n.specialPanels={},n.onPluginTypeChange=function(e){n.loadPlugin(e.id)},n.onMouseEnter=function(){n.props.dashboard.setPanelFocus(n.props.panel.id)},n.onMouseLeave=function(){n.props.dashboard.setPanelFocus(0)},n.state={plugin:null,angularPanel:null,isLazy:!t.isInView},n.specialPanels.row=n.renderRow.bind(n),n.specialPanels["add-panel"]=n.renderAddPanel.bind(n),n}return Object(r.__extends)(t,e),t.prototype.isSpecial=function(e){return this.specialPanels[e]},t.prototype.renderRow=function(){return i.a.createElement(C,{panel:this.props.panel,dashboard:this.props.dashboard})},t.prototype.renderAddPanel=function(){return i.a.createElement(E,{panel:this.props.panel,dashboard:this.props.dashboard})},t.prototype.loadPlugin=function(e){return Object(r.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(r.__generator)(this,function(a){switch(a.label){case 0:return this.isSpecial(e)?[2]:(t=this.props.panel,this.state.plugin&&this.state.plugin.meta.id===e?[3,2]:[4,Object(p.c)(e)]);case 1:n=a.sent(),this.cleanUpAngularPanel(),t.type!==e?t.changePlugin(n):t.pluginLoaded(n),this.setState({plugin:n,angularPanel:null}),a.label=2;case 2:return[2]}})})},t.prototype.componentDidMount=function(){this.loadPlugin(this.props.panel.type)},t.prototype.componentDidUpdate=function(e,t){if(this.state.isLazy&&this.props.isInView&&this.setState({isLazy:!1}),this.element&&!this.state.angularPanel){var n=Object(u.getAngularLoader)(),a={panel:this.props.panel,dashboard:this.props.dashboard},r=n.load(this.element,a,'<plugin-component type="panel" class="panel-height-helper"></plugin-component>');this.setState({angularPanel:r})}},t.prototype.cleanUpAngularPanel=function(){this.state.angularPanel&&(this.state.angularPanel.destroy(),this.element=null)},t.prototype.componentWillUnmount=function(){this.cleanUpAngularPanel()},t.prototype.renderPanel=function(){var e=this,t=this.props,n=t.dashboard,a=t.panel,r=t.isFullscreen,o=t.isInView,s=this.state.plugin;return s.angularPanelCtrl?i.a.createElement("div",{ref:function(t){return e.element=t},className:"panel-height-helper"}):i.a.createElement(c.a,null,function(e){var t=e.width,l=e.height;return 0===t?null:i.a.createElement(V,{plugin:s,panel:a,dashboard:n,isFullscreen:r,isInView:o,width:t,height:l})})},t.prototype.render=function(){var e=this,t=this.props,n=t.panel,a=t.dashboard,r=t.isFullscreen,o=t.isEditing,s=this.state,c=s.plugin,u=s.angularPanel,p=s.isLazy;if(this.isSpecial(n.type))return this.specialPanels[n.type]();if(!c)return null;if(p)return null;var d=l()({"panel-editor-container":o,"panel-height-helper":!o}),f=l()({"panel-wrapper":!0,"panel-wrapper--edit":o,"panel-wrapper--view":r&&!o});return i.a.createElement("div",{className:d},i.a.createElement(H,{isEditing:o,panel:n,render:function(t){return i.a.createElement("div",{className:f,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:t},e.renderPanel())}}),n.isEditing&&i.a.createElement(U.a,{panel:n,plugin:c,dashboard:a,angularPanel:u,onPluginTypeChange:this.onPluginTypeChange}))},t}(o.PureComponent)},aEUA:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return S});var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("TSYQ"),s=n.n(i),l=n("0cfB"),c=n("/MKj"),u=n("kDLi"),p=n("t8hP"),d=n("1gCF"),f=n("lubD"),h=n("boUQ"),m=n("ShMG"),g=n("t7Yz"),b=n("xL/7"),v=n("I1OQ"),y=n("94Oj"),E=function(e){function t(t){var n=e.call(this,t)||this;return n.refreshFromState=function(e){var t=n.props,a=t.refreshPanelEditor,r=t.plugin;a({hasQueriesTab:!(e=e||r.meta).skipDataQuery,usesGraphPlugin:"graph"===e.id,alertingEnabled:p.config.alertingEnabled})},n.onChangeTab=function(e){var t=n.props.changePanelEditorTab;setTimeout(function(){return t(e)},10)},n.onPluginTypeChange=function(e){(0,n.props.onPluginTypeChange)(e),n.refreshFromState(e)},n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.refreshFromState()},t.prototype.componentWillUnmount=function(){(0,this.props.panelEditorCleanUp)()},t.prototype.renderCurrentTab=function(e){var t=this.props,n=t.panel,a=t.dashboard,r=t.plugin,i=t.angularPanel;switch(e){case"advanced":return o.a.createElement(m.a,{panel:n});case"queries":return o.a.createElement(f.a,{panel:n,dashboard:a});case"alert":return o.a.createElement(g.a,{angularPanel:i,dashboard:a,panel:n});case"visualization":return o.a.createElement(h.a,{panel:n,dashboard:a,plugin:r,onPluginTypeChange:this.onPluginTypeChange,angularPanel:i});default:return null}},t.prototype.render=function(){var e=this,t=this.props,n=t.activeTab,a=t.tabs;return o.a.createElement("div",{className:"panel-editor-container__editor"},o.a.createElement("div",{className:"panel-editor-tabs"},a.map(function(t){return o.a.createElement(w,{tab:t,activeTab:n,onClick:e.onChangeTab,key:t.id})})),o.a.createElement("div",{className:"panel-editor__right"},this.renderCurrentTab(n)))},t}(r.PureComponent),O={refreshPanelEditor:v.b,panelEditorCleanUp:b.c,changePanelEditorTab:v.a},S=Object(l.hot)(e)(Object(c.connect)(function(e){return Object(y.a)(e.location,e.panelEditor)},O)(E));function w(e){var t=e.tab,n=e.activeTab,a=e.onClick,r=s()({"panel-editor-tabs__link":!0,active:n===t.id});return o.a.createElement("div",{className:"panel-editor-tabs__item",onClick:function(){return a(t)}},o.a.createElement("a",{className:r,"aria-label":d.a.pages.Dashboard.Panels.EditPanel.selectors.tabItems(t.text)},o.a.createElement(u.Tooltip,{content:""+t.text,placement:"auto"},o.a.createElement("i",{className:"gicon gicon-"+t.id+(n===t.id?"-active":"")}))))}}).call(this,n("3UD+")(e))},boUQ:function(e,t,n){"use strict";var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("t8hP"),s=n("AI1G"),l=n("3SGO"),c=n("GP+p"),u=n("ZFWI"),p=n("TSYQ"),d=n.n(p),f=o.a.memo(function(e){var t=e.isCurrent,n=e.plugin,a=e.onClick,r=d()({"viz-picker__item":!0,"viz-picker__item--current":t});return o.a.createElement("div",{className:r,onClick:a,title:n.name},o.a.createElement("div",{className:"viz-picker__item-name"},n.name),o.a.createElement("img",{className:"viz-picker__item-img",src:n.info.logos.small}))},function(e,t){return e.isCurrent===t.isCurrent}),h=n("kDLi"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.pluginList=n.getPanelPlugins,n.renderVizPlugin=function(e,t){var a=n.props.onTypeChange,r=e.id===n.props.current.id;return o.a.createElement(f,{key:e.id,isCurrent:r,plugin:e,onClick:function(){return a(e)}})},n.getFilteredPluginList=function(){var e=n.props.searchQuery,t=new RegExp(e,"i");return n.pluginList.filter(function(e){return t.test(e.name)})},n}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"maxSelectedIndex",{get:function(){return this.getFilteredPluginList().length-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getPanelPlugins",{get:function(){var e=u.b.panels;return Object.keys(e).filter(function(t){return!1===e[t].hideFromList}).map(function(t){return e[t]}).sort(function(e,t){return e.sort-t.sort})},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.getFilteredPluginList(),n=t.length>0;return o.a.createElement("div",{className:"viz-picker"},o.a.createElement("div",{className:"viz-picker-list"},n?t.map(function(t,n){return e.renderVizPlugin(t,n)}):o.a.createElement(h.EmptySearchResult,null,"Could not find anything matching your query")))},t}(r.PureComponent),g=n("OG+f"),b=n("9LhM"),v=n("EKT6"),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.searchQuery,n=e.onChange,a=e.onClose;return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{labelClassName:"gf-form--has-input-icon",inputClassName:"gf-form-input width-13",placeholder:"",onChange:n,value:t,ref:function(e){return e&&e.focus()}}),o.a.createElement("button",{className:"btn btn-link toolbar__close",onClick:a},o.a.createElement("i",{className:"fa fa-chevron-up"})))},t}(r.PureComponent),E=n("7iUX"),O=n("Obii"),S=function(e){function t(t){var n=e.call(this,t)||this;return n.getReactPanelOptions=function(){return n.props.panel.getOptions()},n.clearQuery=function(){n.setState({searchQuery:""})},n.onPanelOptionsChanged=function(e,t){n.props.panel.updateOptions(e),n.forceUpdate(t)},n.onOpenVizPicker=function(){n.setState({isVizPickerOpen:!0,scrollTop:0})},n.onCloseVizPicker=function(){n.props.urlOpenVizPicker&&n.props.updateLocation({query:{openVizPicker:null},partial:!0}),n.setState({isVizPickerOpen:!1,hasBeenFocused:!1})},n.onSearchQueryChange=function(e){n.setState({searchQuery:e})},n.renderToolbar=function(){var e=n.props.plugin,t=n.state,a=t.isVizPickerOpen,r=t.searchQuery,i=e.meta;return a?o.a.createElement(y,{plugin:i,searchQuery:r,onChange:n.onSearchQueryChange,onClose:n.onCloseVizPicker}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"toolbar__main",onClick:n.onOpenVizPicker},o.a.createElement("img",{className:"toolbar__main-image",src:i.info.logos.small}),o.a.createElement("div",{className:"toolbar__main-name"},i.name),o.a.createElement("i",{className:"fa fa-caret-down"})),o.a.createElement(E.a,{state:i.state}))},n.onPluginTypeChange=function(e){e.id===n.props.plugin.meta.id?n.setState({isVizPickerOpen:!1}):n.props.onPluginTypeChange(e)},n.renderHelp=function(){return o.a.createElement(g.a,{plugin:n.props.plugin.meta,type:"help"})},n.setScrollTop=function(e){var t=e.target;n.setState({scrollTop:t.scrollTop})},n.state={isVizPickerOpen:n.props.urlOpenVizPicker,hasBeenFocused:!1,searchQuery:"",scrollTop:0,data:{state:O.LoadingState.NotStarted,series:[],timeRange:O.DefaultTimeRange}},n}return Object(a.__extends)(t,e),t.prototype.renderPanelOptions=function(){var e=this,t=this.props,n=t.plugin;return t.angularPanel?o.a.createElement("div",{ref:function(t){return e.element=t}}):n.editor?o.a.createElement(n.editor,{data:this.state.data,options:this.getReactPanelOptions(),onOptionsChange:this.onPanelOptionsChanged}):o.a.createElement("p",null,"Visualization has no options")},t.prototype.componentDidMount=function(){var e=this,t=this.props.panel.getQueryRunner();this.shouldLoadAngularOptions()&&this.loadAngularOptions(),this.querySubscription=t.getData().subscribe({next:function(t){return e.setState({data:t})}})},t.prototype.componentDidUpdate=function(e){this.props.plugin!==e.plugin&&this.cleanUpAngularOptions(),this.shouldLoadAngularOptions()&&this.loadAngularOptions()},t.prototype.shouldLoadAngularOptions=function(){return this.props.angularPanel&&this.element&&!this.angularOptions},t.prototype.loadAngularOptions=function(){var e=this,t=this.props.angularPanel.getScope();if(t.$$childHead){var n=t.$$childHead.ctrl;n.initEditMode(),n.onPluginTypeChange=this.onPluginTypeChange;for(var a="",r=0;r<n.editorTabs.length;r++)a+='\n      <div class="panel-options-group" ng-cloak>'+(r>0?'<div class="panel-options-group__header">\n           <span class="panel-options-group__title">{{ctrl.editorTabs['+r+"].title}}\n           </span>\n         </div>":"")+'<div class="panel-options-group__body">\n          <panel-editor-tab editor-tab="ctrl.editorTabs['+r+']" ctrl="ctrl"></panel-editor-tab>\n        </div>\n      </div>\n      ';var o=Object(i.getAngularLoader)(),s={ctrl:n};this.angularOptions=o.load(this.element,s,a)}else setTimeout(function(){e.forceUpdate()})},t.prototype.componentWillUnmount=function(){this.querySubscription&&this.querySubscription.unsubscribe(),this.cleanUpAngularOptions()},t.prototype.cleanUpAngularOptions=function(){this.angularOptions&&(this.angularOptions.destroy(),this.angularOptions=null)},t.prototype.render=function(){var e=this.props.plugin,t=this.state,n=t.isVizPickerOpen,a=t.searchQuery,r=t.scrollTop,i=e.meta,s={heading:"Help",icon:"fa fa-question",render:this.renderHelp};return o.a.createElement(c.a,{heading:"Visualization",renderToolbar:this.renderToolbar,toolbarItems:[s],scrollTop:r,setScrollTop:this.setScrollTop},o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{in:n,duration:200,unmountOnExit:!0,onExited:this.clearQuery},o.a.createElement(m,{current:i,onTypeChange:this.onPluginTypeChange,searchQuery:a,onClose:this.onCloseVizPicker})),this.renderPanelOptions()))},t}(r.PureComponent),w={updateLocation:l.c};t.a=Object(s.a)(S,function(e){return{urlOpenVizPicker:!!e.location.query.openVizPicker}},w)},gYn9:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("kDLi"),s=n("Xmxp"),l=n("ttS0"),c=n("t8hP"),u=n("Obii"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!1,allNodesExpanded:null,testRuleResponse:{}},n.backendSrv=null,n.setFormattedJson=function(e){n.formattedJson=e},n.getTextForClipboard=function(){return JSON.stringify(n.formattedJson,null,2)},n.onClipboardSuccess=function(){s.b.emit(u.AppEvents.alertSuccess,["Content copied to clipboard"])},n.onToggleExpand=function(){n.setState(function(e){return Object(a.__assign)(Object(a.__assign)({},e),{allNodesExpanded:!n.state.allNodesExpanded})})},n.getNrOfOpenNodes=function(){return null===n.state.allNodesExpanded?3:n.state.allNodesExpanded?20:1},n.renderExpandCollapse=function(){var e=n.state.allNodesExpanded,t=o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fa fa-minus-square-o"})," Collapse All"),a=o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fa fa-plus-square-o"})," Expand All");return e?t:a},n.backendSrv=Object(c.getBackendSrv)(),n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.testRule()},t.prototype.testRule=function(){return Object(a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,o;return Object(a.__generator)(this,function(a){switch(a.label){case 0:return e=this.props,t=e.panelId,n=e.dashboard,r={dashboard:n.getSaveModelClone(),panelId:t},this.setState({isLoading:!0}),[4,this.backendSrv.post("/api/alerts/test",r)];case 1:return o=a.sent(),this.setState({isLoading:!1,testRuleResponse:o}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.testRuleResponse;if(!0===e.isLoading)return o.a.createElement(i.LoadingPlaceholder,{text:"Evaluating rule"});var n=this.getNrOfOpenNodes();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"pull-right"},o.a.createElement("button",{className:"btn btn-transparent btn-p-x-0 m-r-1",onClick:this.onToggleExpand},this.renderExpandCollapse()),o.a.createElement(l.a,{className:"btn btn-transparent btn-p-x-0",text:this.getTextForClipboard,onSuccess:this.onClipboardSuccess},o.a.createElement("i",{className:"fa fa-clipboard"})," Copy to Clipboard")),o.a.createElement(i.JSONFormatter,{json:t,open:n,onDidRender:this.setFormattedJson}))},t}(r.PureComponent)},lubD:function(e,t,n){"use strict";var a,r=n("mrSG"),o=n("q1tI"),i=n.n(o),s=n("PAeb"),l=n("GP+p"),c=n("Wkk1"),u=n("Xmxp"),p=n("ttS0"),d=n("kDLi"),f=n("GQ3c"),h=n("Obii"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.onPanelRefresh=function(){n.setState(function(e){return Object(r.__assign)(Object(r.__assign)({},e),{dsQuery:{isLoading:!0,response:{}}})})},n.onRequestError=function(e){n.onDataSourceResponse(e)},n.onDataSourceResponse=function(e){void 0===e&&(e={}),n.state.isMocking?n.handleMocking(e):((e=Object(r.__assign)({},e)).headers&&delete e.headers,e.config&&(e.request=e.config,delete e.config,delete e.request.transformRequest,delete e.request.transformResponse,delete e.request.paramSerializer,delete e.request.jsonpCallbackParam,delete e.request.headers,delete e.request.requestId,delete e.request.inspect,delete e.request.retry,delete e.request.timeout),e.data&&(e.response=e.data,delete e.data,delete e.status,delete e.statusText,delete e.$$config),n.setState(function(t){return Object(r.__assign)(Object(r.__assign)({},t),{dsQuery:{isLoading:!1,response:e}})}))},n.setFormattedJson=function(e){n.formattedJson=e},n.getTextForClipboard=function(){return JSON.stringify(n.formattedJson,null,2)},n.onClipboardSuccess=function(){u.b.emit(h.AppEvents.alertSuccess,["Content copied to clipboard"])},n.onToggleExpand=function(){n.setState(function(e){return Object(r.__assign)(Object(r.__assign)({},e),{allNodesExpanded:!n.state.allNodesExpanded})})},n.onToggleMocking=function(){n.setState(function(e){return Object(r.__assign)(Object(r.__assign)({},e),{isMocking:!n.state.isMocking})})},n.getNrOfOpenNodes=function(){return null===n.state.allNodesExpanded?3:n.state.allNodesExpanded?20:1},n.setMockedResponse=function(e){var t=e.target.value;n.setState(function(e){return Object(r.__assign)(Object(r.__assign)({},e),{mockedResponse:t})})},n.renderExpandCollapse=function(){var e=n.state.allNodesExpanded,t=i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fa fa-minus-square-o"})," Collapse All"),a=i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"fa fa-plus-square-o"})," Expand All");return e?t:a},n.state={allNodesExpanded:null,isMocking:!1,mockedResponse:"",dsQuery:{isLoading:!1,response:{}}},n}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.panel;u.b.on(f.CoreEvents.dsRequestResponse,this.onDataSourceResponse),u.b.on(f.CoreEvents.dsRequestError,this.onRequestError),e.events.on(h.PanelEvents.refresh,this.onPanelRefresh),e.refresh()},t.prototype.componentWillUnmount=function(){var e=this.props.panel;u.b.off(f.CoreEvents.dsRequestResponse,this.onDataSourceResponse),u.b.on(f.CoreEvents.dsRequestError,this.onRequestError),e.events.off(h.PanelEvents.refresh,this.onPanelRefresh)},t.prototype.handleMocking=function(e){var t,n=this.state.mockedResponse;try{t=JSON.parse(n)}catch(e){return void u.b.emit(h.AppEvents.alertError,["R: Failed to parse mocked response"])}e.data=t},t.prototype.render=function(){var e=this.state.dsQuery,t=e.response,n=e.isLoading,a=this.getNrOfOpenNodes();return n?i.a.createElement(d.LoadingPlaceholder,{text:"Loading query inspector..."}):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"pull-right"},i.a.createElement("button",{className:"btn btn-transparent btn-p-x-0 m-r-1",onClick:this.onToggleExpand},this.renderExpandCollapse()),i.a.createElement(p.a,{className:"btn btn-transparent btn-p-x-0",text:this.getTextForClipboard,onSuccess:this.onClipboardSuccess},i.a.createElement("i",{className:"fa fa-clipboard"})," Copy to Clipboard")),i.a.createElement(d.JSONFormatter,{json:t,open:a,onDidRender:this.setFormattedJson}))},t}(o.PureComponent),g=function(e){var t=e.label,n=e.placeholder,a=e.name,r=e.value,o=e.onBlur,s=e.onChange,l=e.tooltipInfo;return i.a.createElement("div",{className:"gf-form gf-form--flex-end"},i.a.createElement(d.FormLabel,{tooltip:l},t),i.a.createElement(d.Input,{type:"text",className:"gf-form-input width-6",placeholder:n,name:a,spellCheck:!1,onBlur:o,onChange:s,value:r}))},b=((a={})[d.EventsWithValidation.onBlur]=[{rule:function(e){return!e||h.rangeUtil.isValidTimeSpan(e)},errorMessage:"Not a valid timespan"}],a),v=function(e){return""===e?null:e},y=function(e){function t(t){var n=e.call(this,t)||this;return n.allOptions={cacheTimeout:{label:"Cache timeout",placeholder:"60",name:"cacheTimeout",tooltipInfo:i.a.createElement(i.a.Fragment,null,"If your time series store has a query cache this option can override the default cache timeout. Specify a numeric value in seconds.")},maxDataPoints:{label:"Max data points",placeholder:"auto",name:"maxDataPoints",tooltipInfo:i.a.createElement(i.a.Fragment,null,"The maximum data points the query should return. For graphs this is automatically set to one data point per pixel. For some data sources this can also be capped in the datasource settings page. With streaming data, this value is used for the rolling buffer.")},minInterval:{label:"Min time interval",placeholder:"0",name:"minInterval",panelKey:"interval",tooltipInfo:i.a.createElement(i.a.Fragment,null,"A lower limit for the auto group by time interval. Recommended to be set to write frequency, for example"," ",i.a.createElement("code",null,"1m")," if your data is written every minute. Access auto interval via variable"," ",i.a.createElement("code",null,"$__interval")," for time range string and ",i.a.createElement("code",null,"$__interval_ms")," for numeric variable that can be used in math expressions.")}},n.onRelativeTimeChange=function(e){n.setState({relativeTime:e.target.value})},n.onTimeShiftChange=function(e){n.setState({timeShift:e.target.value})},n.onOverrideTime=function(e,t){var a=e.target.value,r=n.props.panel,o=v(a);t===d.InputStatus.Valid&&r.timeFrom!==o&&(r.timeFrom=o,r.refresh())},n.onTimeShift=function(e,t){var a=e.target.value,r=n.props.panel,o=v(a);t===d.InputStatus.Valid&&r.timeShift!==o&&(r.timeShift=o,r.refresh())},n.onToggleTimeOverride=function(){var e=n.props.panel;n.setState({hideTimeOverride:!n.state.hideTimeOverride},function(){e.hideTimeOverride=n.state.hideTimeOverride,e.refresh()})},n.onDataSourceOptionBlur=function(e){return function(){var t=n.props.panel;t[e]=n.state[e],t.refresh()}},n.onDataSourceOptionChange=function(e){return function(t){var a;n.setState(Object(r.__assign)(Object(r.__assign)({},n.state),((a={})[e]=t.target.value,a)))}},n.renderOptions=function(){var e=n.props.datasource.meta.queryOptions||{};return Object.keys(n.allOptions).map(function(t){var a=n.allOptions[t],o=a.panelKey||t,s=n.state[o];return e[t]?i.a.createElement(g,Object(r.__assign)({key:t},a,{onChange:n.onDataSourceOptionChange(o),onBlur:n.onDataSourceOptionBlur(o),value:s})):null})},n.state={relativeTime:t.panel.timeFrom||"",timeShift:t.panel.timeShift||"",cacheTimeout:t.panel.cacheTimeout||"",maxDataPoints:t.panel.maxDataPoints||"",interval:t.panel.interval||"",hideTimeOverride:t.panel.hideTimeOverride||!1},n}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this.state.hideTimeOverride,t=this.state,n=t.relativeTime,a=t.timeShift;return i.a.createElement("div",{className:"gf-form-inline"},this.renderOptions(),i.a.createElement("div",{className:"gf-form"},i.a.createElement(d.FormLabel,null,"Relative time"),i.a.createElement(d.Input,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onRelativeTimeChange,onBlur:this.onOverrideTime,validationEvents:b,hideErrorMessage:!0,value:n})),i.a.createElement("div",{className:"gf-form"},i.a.createElement("span",{className:"gf-form-label"},"Time shift"),i.a.createElement(d.Input,{type:"text",className:"width-6",placeholder:"1h",onChange:this.onTimeShiftChange,onBlur:this.onTimeShift,validationEvents:b,hideErrorMessage:!0,value:a})),(a||n)&&i.a.createElement("div",{className:"gf-form-inline"},i.a.createElement(d.Switch,{label:"Hide time info",checked:e,onChange:this.onToggleTimeOverride})))},t}(o.PureComponent),E=n("LvDl"),O=n.n(E),S=n("O945"),w=n("bMS5"),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAddQuery=function(e){var n=t.props,a=n.queries;(0,n.onChangeQueries)(Object(w.a)(a,e)),t.props.onScrollBottom()},t.onRemoveQuery=function(e){var n=t.props,a=n.queries,r=n.onChangeQueries,o=n.panel;r(a.filter(function(t){return t!==e})),o.refresh()},t.onMoveQuery=function(e,n){var a=t.props,r=a.queries,o=a.onChangeQueries,i=a.panel,s=O.a.indexOf(r,e);O.a.move(r,s,s+n),o(r),i.refresh()},t}return Object(r.__extends)(t,e),t.prototype.onChangeQuery=function(e,t){var n=this.props,a=n.queries,r=n.onChangeQueries;e.refId=a[t].refId,r(a.map(function(n,a){return a===t?e:n}))},t.prototype.render=function(){var e=this,t=this.props;return i.a.createElement("div",{className:"query-editor-rows"},t.queries.map(function(n,a){return i.a.createElement(S.a,{dataSourceValue:n.datasource||t.datasource.value,key:n.refId,panel:t.panel,dashboard:t.dashboard,data:t.data,query:n,onChange:function(t){return e.onChangeQuery(t,a)},onRemoveQuery:e.onRemoveQuery,onAddQuery:e.onAddQuery,onMoveQuery:e.onMoveQuery,inMixedMode:t.datasource.meta.mixed})}))},t}(o.PureComponent),x=n("WnbS"),P=n("NXk7"),T=n("ZFWI"),_=n("OG+f"),N=n("4RCQ"),k=n("exx3");n.d(t,"a",function(){return D});var j,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.datasources=Object(x.a)().getMetricSources(),t.backendSrv=Object(P.b)(),t.state={isLoadingHelp:!1,currentDS:t.findCurrentDataSource(),helpContent:null,isPickerOpen:!1,isAddingMixed:!1,scrollTop:0,data:{state:h.LoadingState.NotStarted,series:[],timeRange:h.DefaultTimeRange}},t.onChangeDataSource=function(e){var n,a,o=t.props.panel,i=t.state.currentDS;if(e.meta.mixed)o.targets.forEach(function(e){e.datasource!==k.a&&(e.datasource=o.datasource,e.datasource||(e.datasource=T.b.defaultDatasource))});else if(i)if(i.meta.mixed)try{for(var s=Object(r.__values)(o.targets),l=s.next();!l.done;l=s.next()){var c=l.value;c.datasource!==k.a&&delete c.datasource}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}else i.meta.id!==e.meta.id&&(o.targets=[{refId:"A"}]);o.datasource=e.value,o.refresh(),t.setState({currentDS:e})},t.renderQueryInspector=function(){var e=t.props.panel;return i.a.createElement(m,{panel:e})},t.renderHelp=function(){return i.a.createElement(_.a,{plugin:t.state.currentDS.meta,type:"query_help"})},t.onUpdateQueries=function(e){t.props.panel.targets=e,t.forceUpdate()},t.onAddQueryClick=function(){t.state.currentDS.meta.mixed?t.setState({isAddingMixed:!0}):(t.onUpdateQueries(Object(w.a)(t.props.panel.targets)),t.onScrollBottom())},t.onAddExpressionClick=function(){t.onUpdateQueries(Object(w.a)(t.props.panel.targets,k.b.newQuery())),t.onScrollBottom()},t.onScrollBottom=function(){t.setState({scrollTop:t.state.scrollTop+1e4})},t.renderToolbar=function(){var e=t.state,n=e.currentDS,a=e.isAddingMixed,r=!(a||Object(N.b)(n.name));return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{datasources:t.datasources,onChange:t.onChangeDataSource,current:n}),i.a.createElement("div",{className:"flex-grow-1"}),r&&i.a.createElement("button",{className:"btn navbar-button",onClick:t.onAddQueryClick},"Add Query"),a&&t.renderMixedPicker(),T.b.featureToggles.expressions&&i.a.createElement("button",{className:"btn navbar-button",onClick:t.onAddExpressionClick},"Add Expression"))},t.renderMixedPicker=function(){var e=t.datasources.filter(function(e){return"mixed"!==e.meta.id});return i.a.createElement(c.a,{datasources:e,onChange:t.onAddMixedQuery,current:null,autoFocus:!0,onBlur:t.onMixedPickerBlur,openMenuOnFocus:!0})},t.onAddMixedQuery=function(e){t.props.panel.targets=Object(w.a)(t.props.panel.targets,{datasource:e.name}),t.setState({isAddingMixed:!1,scrollTop:t.state.scrollTop+1e4}),t.forceUpdate()},t.onMixedPickerBlur=function(){t.setState({isAddingMixed:!1})},t.onQueryChange=function(e,n){t.props.panel.changeQuery(e,n),t.forceUpdate()},t.onTransformersChange=function(e){t.props.panel.setTransformations(e),t.forceUpdate()},t.setScrollTop=function(e){var n=e.target;t.setState({scrollTop:n.scrollTop})},t.renderQueryBody=function(){var e=t.props,n=e.panel,a=e.dashboard,r=t.state,o=r.currentDS,s=r.data;return Object(N.b)(o.name)?i.a.createElement(N.a,{panel:n,panelData:s,onChange:function(e){return t.onUpdateQueries([e])}}):i.a.createElement(i.a.Fragment,null,i.a.createElement(C,{queries:n.targets,datasource:o,onChangeQueries:t.onUpdateQueries,onScrollBottom:t.onScrollBottom,panel:n,dashboard:a,data:s}),i.a.createElement(d.PanelOptionsGroup,null,i.a.createElement(y,{panel:n,datasource:o})))},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.panel.getQueryRunner();this.querySubscription=t.getData(!1).subscribe({next:function(t){return e.onPanelDataUpdate(t)}})},t.prototype.componentWillUnmount=function(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)},t.prototype.onPanelDataUpdate=function(e){this.setState({data:e})},t.prototype.findCurrentDataSource=function(){var e=this.props.panel;return this.datasources.find(function(t){return t.value===e.datasource})||this.datasources[0]},t.prototype.render=function(){var e=this.state,t=e.scrollTop,n=e.data,a={title:"Query Inspector",render:this.renderQueryInspector},o={heading:"Help",icon:"fa fa-question",render:this.renderHelp},c=T.b.featureToggles.transformations;return i.a.createElement(l.a,{heading:"Query",renderToolbar:this.renderToolbar,toolbarItems:[a,o],setScrollTop:this.setScrollTop,scrollTop:t},i.a.createElement(i.a.Fragment,null,this.renderQueryBody(),c&&i.a.createElement(d.PanelOptionsGroup,{title:i.a.createElement(i.a.Fragment,null,"Query results",i.a.createElement(d.AlphaNotice,{state:h.PluginState.alpha,className:Object(s.css)(j||(j=Object(r.__makeTemplateObject)(["\n                      margin-left: 16px;\n                    "],["\n                      margin-left: 16px;\n                    "])))}))},this.state.data.state!==h.LoadingState.NotStarted&&i.a.createElement(d.TransformationsEditor,{transformations:this.props.panel.transformations||[],onChange:this.onTransformersChange,dataFrames:n.series}))))},t}(o.PureComponent)},t7Yz:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return w});var a,r=n("mrSG"),o=n("q1tI"),i=n.n(o),s=n("0cfB"),l=n("/MKj"),c=n("PAeb"),u=n("kDLi"),p=n("t8hP"),d=n("Xmxp"),f=n("2nhE"),h=n("GP+p"),m=n("QQVG"),g=n("BkfJ"),b=(n("eK0o"),n("gYn9")),v=n("GQ3c"),y=n("xL/7"),E=n("I1OQ"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={validatonMessage:""},t.stateHistory=function(){return{title:"State history",render:function(){return i.a.createElement(g.a,{dashboard:t.props.dashboard,panelId:t.props.panel.id,onRefresh:t.panelCtrl.refresh})}}},t.deleteAlert=function(){var e=t.props.panel;return{title:"Delete",btnType:"danger",onClick:function(){d.b.emit(v.CoreEvents.showConfirmModal,{title:"Delete Alert",text:"Are you sure you want to delete this alert rule?",text2:"You need to save dashboard for the delete to take effect",icon:"fa-trash",yesText:"Delete",onConfirm:function(){delete e.alert,e.thresholds=[],t.panelCtrl.alertState=null,t.panelCtrl.render(),t.forceUpdate()}})}}},t.renderTestRuleResult=function(){var e=t.props,n=e.panel,a=e.dashboard;return i.a.createElement(b.a,{panelId:n.id,dashboard:a})},t.testRule=function(){return{title:"Test Rule",render:function(){return t.renderTestRuleResult()}}},t.onAddAlert=function(){t.panelCtrl._enableAlert(),t.component.digest(),t.forceUpdate()},t.switchToQueryTab=function(){(0,t.props.changePanelEditorTab)(Object(y.b)(y.a.Queries))},t.renderValidationMessage=function(){var e=t.state.validatonMessage;return i.a.createElement("div",{className:Object(c.css)(a||(a=Object(r.__makeTemplateObject)(["\n          width: 508px;\n          margin: 128px auto;\n        "],["\n          width: 508px;\n          margin: 128px auto;\n        "])))},i.a.createElement("h2",null,e),i.a.createElement("br",null),i.a.createElement("div",{className:"gf-form-group"},i.a.createElement(u.Button,{size:"md",variant:"secondary",icon:"fa fa-arrow-left",onClick:t.switchToQueryTab},"Go back to Queries")))},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.shouldLoadAlertTab()&&this.loadAlertTab()},t.prototype.componentDidUpdate=function(e){this.shouldLoadAlertTab()&&this.loadAlertTab()},t.prototype.shouldLoadAlertTab=function(){return this.props.angularPanel&&this.element&&!this.component},t.prototype.componentWillUnmount=function(){this.component&&this.component.destroy()},t.prototype.loadAlertTab=function(){return Object(r.__awaiter)(this,void 0,void 0,function(){var e,t,n,a,o,i,s,l=this;return Object(r.__generator)(this,function(r){switch(r.label){case 0:return e=this.props,t=e.angularPanel,n=e.panel,(a=t.getScope()).$$childHead?(this.panelCtrl=a.$$childHead.ctrl,o=Object(p.getAngularLoader)(),"<alert-tab />",i={ctrl:this.panelCtrl},this.component=o.load(this.element,i,"<alert-tab />"),[4,Object(f.a)(n.transformations,n.targets,Object(p.getDataSourceSrv)(),n.datasource)]):(setTimeout(function(){l.forceUpdate()}),[2]);case 1:return(s=r.sent())&&this.setState({validatonMessage:s}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props.panel,n=t.alert,a=t.transformations,o=this.state.validatonMessage,s=a&&a.length>0;if(!n&&o)return this.renderValidationMessage();var l=n?[this.stateHistory(),this.testRule(),this.deleteAlert()]:[],c={title:"Panel has no alert rule defined",buttonIcon:"gicon gicon-alert",onClick:this.onAddAlert,buttonTitle:"Create Alert"};return i.a.createElement(h.a,{heading:"Alert",toolbarItems:l},i.a.createElement(i.a.Fragment,null,n&&s&&i.a.createElement(u.Alert,{severity:v.AppNotificationSeverity.Error,title:"Transformations are not supported in alert queries"}),i.a.createElement("div",{ref:function(t){return e.element=t}}),!n&&!o&&i.a.createElement(m.a,Object(r.__assign)({},c))))},t}(o.PureComponent),S={changePanelEditorTab:E.a},w=Object(s.hot)(e)(Object(l.connect)(function(e){return{}},S)(O))}).call(this,n("3UD+")(e))},ttS0:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("mrSG"),r=n("q1tI"),o=n.n(r),i=n("sxGJ"),s=n.n(i),l=function(e){function t(t){var n=e.call(this,t)||this;return n.getElementType=function(){return n.props.elType||"button"},n.myRef=o.a.createRef(),n}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.text,n=e.onSuccess,a=e.onError;this.clipboardjs=new s.a(this.myRef.current,{text:t}),n&&this.clipboardjs.on("success",function(e){e.clearSelection(),n(e)}),a&&this.clipboardjs.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger),a(e)})},t.prototype.componentWillUnmount=function(){this.clipboardjs&&this.clipboardjs.destroy()},t.prototype.render=function(){var e=this.props,t=(e.elType,e.text,e.children,e.onError,e.onSuccess,Object(a.__rest)(e,["elType","text","children","onError","onSuccess"]));return o.a.createElement(this.getElementType(),Object(a.__assign)({ref:this.myRef},t),this.props.children)},t}(r.PureComponent)}}]);
//# sourceMappingURL=default~DashboardPage~SoloPanelPage.4d0490a94b199a11f40c.js.map