"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3236],{86695:(q,j,l)=>{l.r(j),l.d(j,{default:()=>tt});var a=l(74848),N=l(96540),I=l(32264),w=l(67061),U=l(90613),V=l(63021),R=l(40675),z=l(40980),k=l(37959),K=l(78742),m=l(32196),Y=l(8867),y=l(40845),A=l(94753),O=l(72109);function J(){const n=(0,y.$j)(),t=(0,y.of)(Q);return(0,a.jsxs)("div",{className:t.grid,children:[(0,a.jsx)(G,{children:(0,a.jsxs)(w.B,{direction:"column",gap:1,children:[(0,a.jsx)(A.E,{element:"h3",children:"How it works"}),(0,a.jsxs)("ul",{className:t.list,children:[(0,a.jsx)("li",{children:"Grafana alerting periodically queries data sources and evaluates the condition defined in the alert rule"}),(0,a.jsx)("li",{children:"If the condition is breached, an alert instance fires"}),(0,a.jsx)("li",{children:"Firing instances are routed to notification policies based on matching labels"}),(0,a.jsx)("li",{children:"Notifications are sent out to the contact points specified in the notification policy"})]}),(0,a.jsx)("div",{className:t.svgContainer,children:(0,a.jsx)(w.B,{justifyContent:"center",children:(0,a.jsx)(Y.default,{src:`public/img/alerting/at_a_glance_${n.name.toLowerCase()}.svg`,width:void 0,height:void 0})})})]})}),(0,a.jsx)(G,{children:(0,a.jsxs)(w.B,{direction:"column",gap:1,children:[(0,a.jsx)(A.E,{element:"h3",children:"Get started"}),(0,a.jsxs)("ul",{className:t.list,children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(A.E,{weight:"bold",children:"Create an alert rule"})," to query a data source and evaluate the condition defined in the alert rule"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(A.E,{weight:"bold",children:"Route alert notifications"})," either directly to a contact point or through notification policies for more flexibility"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)(A.E,{weight:"bold",children:"Monitor"})," your alert rules using dashboards and visualizations"]})]}),(0,a.jsxs)("p",{children:["For a hands-on introduction, refer to our"," ",(0,a.jsx)(O.Y,{href:"https://grafana.com/tutorials/alerting-get-started/",icon:"angle-right",inline:!0,external:!0,children:"tutorial to get started with Grafana Alerting"})]})]})})]})}const Q=n=>({grid:(0,m.css)({display:"grid",gridTemplateRows:"min-content auto auto",gridTemplateColumns:"1fr",gap:n.spacing(2),width:"100%",[n.breakpoints.up("lg")]:{gridTemplateColumns:"3fr 2fr"}}),ctaContainer:(0,m.css)({gridColumn:"1 / span 5"}),svgContainer:(0,m.css)({"& svg":{maxWidth:"900px",flex:1}}),list:(0,m.css)({margin:n.spacing(0,2),"& > li":{marginBottom:n.spacing(1)}})});function Z({className:n}){const t=(0,y.of)(X);return(0,a.jsx)(w.B,{gap:2,direction:"column",children:(0,a.jsxs)(G,{className:(0,m.cx)(t.ctaContainer,n),children:[(0,a.jsx)(T,{title:"Alert rules",description:"Define the condition that must be met before an alert rule fires",href:"/alerting/list",hrefText:"Manage alert rules"}),(0,a.jsx)("div",{className:t.separator}),(0,a.jsx)(T,{title:"Contact points",description:"Configure who receives notifications and how they are sent",href:"/alerting/notifications",hrefText:"Manage contact points"}),(0,a.jsx)("div",{className:t.separator}),(0,a.jsx)(T,{title:"Notification policies",description:"Configure how firing alert instances are routed to contact points",href:"/alerting/routes",hrefText:"Manage notification policies"})]})})}const X=n=>({ctaContainer:(0,m.css)({padding:n.spacing(2),display:"flex",gap:n.spacing(4),justifyContent:"space-between",flexWrap:"wrap",[n.breakpoints.down("lg")]:{flexDirection:"column"}}),separator:(0,m.css)({width:"1px",backgroundColor:n.colors.border.medium,[n.breakpoints.down("lg")]:{display:"none"}})});function T({title:n,description:t,href:r,hrefText:s}){const o=(0,y.of)(ee);return(0,a.jsxs)("div",{className:o.container,children:[(0,a.jsx)(A.E,{element:"h2",variant:"h3",children:n}),(0,a.jsx)("div",{className:o.desc,children:t}),(0,a.jsx)("div",{className:o.actionRow,children:(0,a.jsx)(O.Y,{href:r,inline:!1,children:s})})]})}const ee=n=>({container:(0,m.css)({color:n.colors.text.primary,flex:1,minWidth:"240px",display:"grid",rowGap:n.spacing(1),gridTemplateColumns:"min-content 1fr 1fr 1fr",gridTemplateRows:"min-content auto min-content","& h2":{marginBottom:0,gridColumn:"2 / span 3",gridRow:1}}),desc:(0,m.css)({gridColumn:"2 / span 3",gridRow:2}),actionRow:(0,m.css)({gridColumn:"2 / span 3",gridRow:3,maxWidth:"240px"})});function G({children:n,className:t}){const r=(0,y.of)(te);return(0,a.jsx)("div",{className:(0,m.cx)(r.box,t),children:n})}const te=n=>({box:(0,m.css)({padding:n.spacing(2),backgroundColor:n.colors.background.secondary,borderRadius:n.shape.radius.default})});var ne=l(19347),e=l(81887),ae=l(2913);function C({children:n}){const t=(0,y.of)(se);return(0,a.jsx)("div",{className:t.sectionFooter,children:n&&(0,a.jsx)("div",{children:n})})}const se=n=>({sectionFooter:(0,m.css)({marginBottom:n.spacing(2)})});function re({datasources:n}){const t=(0,y.of)(ie),r=n.map(s=>(0,a.jsxs)("div",{children:[s.settings?.meta.info.logos.small&&(0,a.jsx)("img",{className:t.dsImage,src:s.settings?.meta.info.logos.small,alt:s.settings?.name||s.uid}),(0,a.jsx)("span",{children:s.settings?.name||s.uid})]},s.uid));return(0,a.jsx)("div",{className:t.dsContainer,children:r})}const ie=n=>({dsImage:(0,m.css)({label:"ds-image",width:"16px",marginRight:"3px"}),dsContainer:(0,m.css)({display:"flex",flexDirection:"row",fontSize:n.typography.bodySmall.fontSize,gap:"10px",marginBottom:"10px",justifyContent:"flex-end"})});function D({children:n,datasources:t}){const r=(0,y.of)(oe);return(0,a.jsxs)("div",{className:r.container,children:[n,t&&(0,a.jsx)(re,{datasources:t})]})}const oe=n=>({container:(0,m.css)({display:"flex",flexDirection:"row",justifyContent:"space-between"})});var F=l(50082),le=l(37390),B=l(55852),E=l(14578),H=l(38138),ue=l(83122),ce=l(29158),de=l(25027);function d({panel:n}){const t=(0,y.of)(ge),[r,s]=(0,N.useState)(!1),o=()=>{s(!1)},p=h=>{(0,de.AK)({useful:h,panel:n}),o()},v=(0,a.jsx)(le.a,{title:"Rate this panel",isOpen:r,onDismiss:o,onClickBackdrop:o,className:t.container,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Help us improve this page by telling us whether this panel is useful to you!"}),(0,a.jsxs)("div",{className:t.buttonsContainer,children:[(0,a.jsx)(B.$n,{variant:"secondary",className:t.buttonContainer,onClick:()=>p(!1),children:(0,a.jsxs)("div",{className:t.button,children:[(0,a.jsx)(E.I,{name:"thumbs-up",className:t.thumbsdown,size:"xxxl"}),(0,a.jsx)("span",{children:"I don't like it"})]})}),(0,a.jsx)(B.$n,{variant:"secondary",className:t.buttonContainer,onClick:()=>p(!0),children:(0,a.jsxs)("div",{className:t.button,children:[(0,a.jsx)(E.I,{name:"thumbs-up",size:"xxxl"}),(0,a.jsx)("span",{children:"I like it"})]})})]})]})}),_=(0,a.jsx)(H.W,{children:(0,a.jsx)(H.W.Item,{label:"Rate this panel",icon:"comment-alt-message",onClick:()=>s(!0)})});return(0,a.jsxs)("div",{children:[(0,a.jsx)(ue.m,{overlay:_,placement:"bottom-start",children:(0,a.jsx)(ce.K,{name:"ellipsis-v",variant:"secondary",className:t.menu,"aria-label":"Rate this panel"})}),v]})}const ge=n=>({buttonsContainer:(0,m.css)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",gap:"25px"}),buttonContainer:(0,m.css)({height:"150px",width:"150px",cursor:"pointer",justifyContent:"center"}),button:(0,m.css)({display:"flex",flexDirection:"column"}),container:(0,m.css)({maxWidth:"370px"}),menu:(0,m.css)({height:"25px",margin:"0"}),thumbsdown:(0,m.css)({transform:"scale(-1, -1);"})});function me(n,t){const r=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active", id="${i}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="active"})',s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:r}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently active alert rules").setData(s).setThresholds({mode:F.O.Absolute,steps:[{color:"green",value:0},{color:"green",value:80}]}).setNoValue("0").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}var u=l(52622);function fe(n,t){const r=i?`sum by(state) (grafanacloud_grafana_instance_alerting_alerts{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alerts)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]}),o=new e.Es({$data:s,transformations:[{id:"renameByRegex",options:{regex:"alerting",renamePattern:"firing"}}]});return new e.vA({...g,height:"400px",body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your alert rule instances based on state").setData(o).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("firing").overrideColor(f("firing")).matchFieldsWithName("normal").overrideColor(f("normal")).matchFieldsWithName("pending").overrideColor(f("pending")).matchFieldsWithName("error").overrideColor(f("error")).matchFieldsWithName("nodata").overrideColor(f("nodata"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function pe(n,t){const r=i?`sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m{id="${i}"}) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${i}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluations_total:rate5m) - sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",s=i?`sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m{id="${i}"})`:"sum(grafanacloud_grafana_instance_alerting_rule_evaluation_failures_total:rate5m)",o=new e.dt({datasource:n,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(o).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function $(n,t,r,s){const o=i?`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${s}", id="${i}"})`:`sum by (state) (grafanacloud_grafana_instance_alerting_alerts{state="${s}"})`,p=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:o,legendFormat:"{{state}}"}]});return new e.vA({height:"100%",body:e.d0.stat().setTitle(t).setDescription(r).setData(p).setOverrides(v=>v.matchFieldsWithName(s).overrideColor(f(s))).setNoValue("0").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}var W=l(81160);function he(n,t){const r=`sum by(rule_group) (grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${i}"})`,s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{rule_group}}"}]}),o=()=>v=>v.pipe((0,W.T)(_=>_.map(h=>({...h,fields:h.fields.map(x=>{const S=(x.config.displayNameFromDS||"").match(/\/rules\/\d+\/(\w+);(\w+)/);return S&&(x.config.displayName=`Folder: ${S[1]} - Group: ${S[2]}`),x})})))),p=new e.Es({$data:s,transformations:[o]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of missed iterations per evaluation group").setData(p).setOption("tooltip",{mode:u.$N.Multi}).setCustomFieldConfig("drawStyle",u.GR.Line).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}var ve=l(50720),ye=l(3704);function _e(n,t){const r=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(labels_alertname, ruleUID) (count_over_time({from="state-history"} | json | current = `Alerting` [1w])))',instant:!0}]}),s=(v,_)=>({...v,values:v.values.map((h,x)=>{const S=_.fields.find(at=>at.name==="ruleUID")?.values[x];return(0,a.jsx)(xe,{value:h,ruleUID:S},h)})}),o=()=>v=>v.pipe((0,W.T)(_=>_.map(h=>({...h,fields:h.fields.map(x=>x.name==="labels_alertname"?s(x,h):x)})))),p=new e.Es({$data:r,transformations:[o,{id:"sortBy",options:{fields:{},sort:[{field:"Value #A",desc:!0}]}},{id:"organize",options:{excludeByName:{Time:!0,ruleUID:!0},indexByName:{labels_alertname:0,"Value #A":1},renameByName:{labels_alertname:"Alert rule name","Value #A":"Number of fires"}}}]});return new e.vA({...g,body:e.d0.table().setTitle(t).setDescription("The alert rule instances that have fired the most").setData(p).setNoValue("No new alerts fired last week").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function xe({value:n,ruleUID:t}){const r=o=>({link:(0,m.css)({"& > a":{color:o.colors.text.link}})}),s=(0,y.of)(r);return(0,a.jsx)("div",{className:s.link,children:(0,a.jsx)(ve.N,{target:"_blank",href:(0,ye.G)(`/alerting/grafana/${t}/view`),children:n})})}function be(n,t){const r=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused", id="${i}"})`:'sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{state="paused"})',s=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:r}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of current paused alert rules").setData(s).setThresholds({mode:F.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function we(n,t){const r=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See how many of your alert rules are paused or active").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(o=>o.matchFieldsWithName("active evaluation").overrideColor(f("active evaluation"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Ae(n,t){const r=i?`sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"}) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_rule_group_rules) / ignoring(state) group_left sum(grafanacloud_grafana_instance_alerting_rule_group_rules)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}} evaluation"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are paused or active").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setOption("tooltip",{mode:u.$N.Multi}).setMax(1).setOverrides(o=>o.matchFieldsWithName("active evaluation").overrideColor(f("active evaluation"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Ce(n,t){const r=i?`sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_alertmanager_alerts)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(o=>o.matchFieldsWithName("active").overrideColor(f("active"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Se(n,t){const r=i?`sum by (state) (grafanacloud_grafana_instance_alerting_silences{id="${i}"})`:"sum by (state) (grafanacloud_grafana_instance_alerting_silences)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function je(n,t){const r=i?`sum by (state) (grafanacloud_instance_alertmanager_alerts{id="${i}"})`:"sum by (state) (grafanacloud_instance_alertmanager_alerts)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("A breakdown of all of your firing alert rule instances based on state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(o=>o.matchFieldsWithName("active").overrideColor(f("active"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Ne(n,t){const r=i?`sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config{id="${i}"})`:"sum by (cluster)(grafanacloud_instance_alertmanager_invalid_config)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{cluster}}"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current state of your alertmanager configuration").setData(s).setUnit("bool_yes_no").setOption("graphMode",u.$p.None).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function De(n,t){const r=i?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second{id="${i}"}) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{id="${i}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_per_second) - sum by (cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",s=i?`sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second{id="${i}"})`:"sum by(cluster)(grafanacloud_instance_alertmanager_notifications_failed_per_second)",o=new e.dt({datasource:n,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed notifications").setData(o).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Fe(n,t){const r=i?`sum by (state) (grafanacloud_instance_alertmanager_silences{id="${i}"})`:"sum by (state) (grafanacloud_instance_alertmanager_silences)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of silences by state").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}var $e=l(73134);function Ie(n,t){const r=i?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", id="${i}"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", id="${i}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"} / grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"duration / interval"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The percentage of interval time spent evaluating").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setUnit("percentunit").setThresholds({mode:$e.Ol.Percentage,steps:[{color:"green",value:0},{color:"red",value:80},{color:"yellow",value:60}]}).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Te(n,t){const r=i?`grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group", id="${i}"}`:'grafanacloud_instance_rule_group_last_duration_seconds{rule_group="$rule_group"}',s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"{{rule_group}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("How long it took to evaluate the rule group").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setUnit("s").setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(o=>o.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Ge(n,t){const r=i?`grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group", id="${i}} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", id="${i}}`:'grafanacloud_instance_rule_evaluations_total:rate5m{rule_group="$rule_group"} - grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',s=i?`grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group", id="${i}}`:'grafanacloud_instance_rule_evaluation_failures_total:rate5m{rule_group=~"$rule_group"}',o=new e.dt({datasource:n,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed evaluations for the rule group").setData(o).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("success").overrideColor(f("success")).matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Me(n,t){const r=i?`grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group", id="${i}"}`:'grafanacloud_instance_rule_group_interval_seconds{rule_group="$rule_group"}',s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"interval"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current and historical rule group evaluation interval").setData(s).setUnit("s").setOption("graphMode",u.$p.Area).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Re(n,t){const r=i?`sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group", id="${i}"})`:'sum(grafanacloud_instance_rule_group_rules{rule_group="$rule_group"})',s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"number of rules"}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The current and historical number of alert rules in the rule group").setData(s).setUnit("none").setOption("graphMode",u.$p.Area).setOverrides(o=>o.matchFieldsByQuery("A").overrideColor({mode:"fixed",fixedColor:"blue"})).setNoValue("0").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Oe(n,t){const r=i?`sum(grafanacloud_instance_rule_evaluations_total:rate5m{id="${i}) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{id="${i})`:"sum(grafanacloud_instance_rule_evaluations_total:rate5m) - sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",s=i?`sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m{id="${i})`:"sum(grafanacloud_instance_rule_evaluation_failures_total:rate5m)",o=new e.dt({datasource:n,queries:[{refId:"A",exprA:r,range:!0,legendFormat:"success"},{refId:"B",exprB:s,range:!0,legendFormat:"failed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of successful and failed alert rule evaluations").setData(o).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(p=>p.matchFieldsWithName("failed").overrideColor(f("failed"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Be(n,t){const r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="firing"})'}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently firing alert rule instances").setData(r).setThresholds({mode:F.O.Absolute,steps:[{color:"red",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Ee(n,t){const r=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS)",range:!0,legendFormat:"{{state}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of firing and pending alert rule instances").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(s=>s.matchFieldsWithName("firing").overrideColor(f("firing"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function He(n,t){const r=new e.dt({datasource:n,queries:[{refId:"A",expr:"sum by (alertstate) (ALERTS) / ignoring(alertstate) group_left sum(ALERTS)",range:!0,legendFormat:"{{alertstate}}"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("See what percentage of your alert rules are firing versus pending").setData(r).setCustomFieldConfig("drawStyle",u.GR.Line).setCustomFieldConfig("fillOpacity",45).setUnit("percentunit").setMax(1).setOption("tooltip",{mode:u.$N.Multi}).setOverrides(s=>s.matchFieldsWithName("firing").overrideColor(f("firing"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function We(n,t){const r=i?`sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m{id="${i}"})`:"sum(grafanacloud_instance_rule_group_iterations_missed_total:rate5m)",s=new e.dt({datasource:n,queries:[{refId:"A",expr:r,range:!0,legendFormat:"missed"}]});return new e.vA({...g,body:e.d0.timeseries().setTitle(t).setDescription("The number of evaluations missed").setData(s).setCustomFieldConfig("drawStyle",u.GR.Line).setOption("tooltip",{mode:u.$N.Multi}).setOption("legend",{showLegend:!1}).setOverrides(o=>o.matchFieldsWithName("missed").overrideColor(f("missed"))).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Le(n,t){const r=new e.dt({datasource:n,queries:[{refId:"A",expr:'topk(10, sum by(alertname) (ALERTS{alertstate="firing"}))',instant:!0,range:!1,format:"table"}]}),s=new e.Es({$data:r,transformations:[{id:"organize",options:{excludeByName:{Time:!0},indexByName:{},renameByName:{Value:"Number of fires",alertname:"Alert Rule Name"}}}]});return new e.vA({...g,body:e.d0.table().setTitle(t).setDescription("The alert rules that have fired the most").setData(s).setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}function Pe(n,t){const r=new e.dt({datasource:n,queries:[{refId:"A",instant:!0,expr:'sum by (alertstate) (ALERTS{alertstate="pending"})'}]});return new e.vA({...g,body:e.d0.stat().setTitle(t).setDescription("The number of currently pending alert rule instances").setData(r).setThresholds({mode:F.O.Absolute,steps:[{color:"yellow",value:0},{color:"red",value:80}]}).setNoValue("0").setHeaderActions((0,a.jsx)(d,{panel:t})).build()})}const M={type:"loki",uid:"grafanacloud-alert-state-history",settings:void 0},c={type:"prometheus",uid:"grafanacloud-usage",settings:void 0},b={type:"prometheus",uid:"grafanacloud-prom",settings:void 0},qe={alerting:"red",firing:"red",active:"red",missed:"red",failed:"red",pending:"yellow",nodata:"blue","active evaluation":"blue",normal:"green",success:"green",error:"orange"};function f(n){return{mode:"fixed",fixedColor:qe[n]}}const g={minHeight:300},Ue=new e.JZ({from:"now-1w",to:"now"}),L=ae.$W.bootData.settings.namespace,i=L.includes("stack-")?L.replace("stack-",""):void 0,P=()=>{const n=(0,ne.l)();return[M,c,b].forEach(t=>{t.settings=n.getInstanceSettings(t.uid)}),[M,c,b]},Ve=()=>{const[n,t,r]=P();return t.settings};function ze(){const[n,t,r]=P(),s=[],o=n.settings&&t.settings,p=!!t.settings,v=!!t.settings,_=t.settings&&r.settings,h=!!t.settings;return o&&s.push(new e.vA({ySizing:"content",body:ke()})),p&&s.push(new e.vA({ySizing:"content",body:Ke()})),_&&s.push(new e.vA({ySizing:"content",body:Je()})),h&&s.push(new e.vA({ySizing:"content",body:Qe()})),v&&s.push(new e.vA({ySizing:"content",body:Ye()})),new e.P1({$timeRange:Ue,controls:[new e.dM({component:D,props:{children:(0,a.jsx)("div",{children:"Monitor the status of your system."})}}),new e.N0,new e.KE({}),new e.WM({})],body:new e.G1({direction:"column",children:s})})}function ke(){return new e.Or({title:"Grafana-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({direction:"column",children:[new e.G1({children:[_e(M,"Top 10 firing instances"),me(c,"Active rules"),be(c,"Paused rules")]}),new e.G1({children:[fe(c,"Alert instances by state"),new e.G1({height:"400px",direction:"column",children:[new e.G1({height:"400px",children:[$(c,"Firing instances","The number of currently firing alert rule instances","alerting"),$(c,"Pending instances","The number of currently pending alert rule instances","pending")]}),new e.G1({children:[$(c,"No data instances","The current number of alert rule instances in No data state","nodata"),$(c,"Error instances","The current number of alert rule instances in Error state","error")]})]})]}),new e.G1({children:[we(c,"Alert rule evaluation"),Ae(c,"% of alert rule evaluation")]}),new e.G1({children:[pe(c,"Evaluation success vs failures"),he(c,"Iterations missed per evaluation group")]})]}),new e.dM({component:C})]})})}function Ke(){return new e.Or({title:"Grafana Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.G1({children:[Ce(c,"Firing alerts by state"),Se(c,"Silences")]}),new e.dM({component:C})]})})}function Ye(){return new e.Or({title:"Mimir Alertmanager",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:D,props:{datasources:[c]}})}),new e.G1({children:[je(c,"Firing alerts by state"),De(c,"Notification delivery")]}),new e.G1({children:[Fe(c,"Silences"),Ne(c,"Invalid configuration")]}),new e.dM({component:C})]})})}function Je(){return new e.Or({title:"Mimir-managed alert rules",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:D,props:{datasources:[b,c]}})}),new e.G1({children:[Le(b,"Top 10 firing rules"),Be(b,"Firing instances"),Pe(b,"Pending instances")]}),new e.G1({children:[Ee(b,"Firing and pending alert instances"),He(b,"% of alert instances by state")]}),new e.G1({children:[Oe(c,"Evaluation success vs failures"),We(c,"Missed evaluations")]}),new e.dM({component:C})]})})}function Qe(){const n=new e.fS({label:"Rule Group",name:"rule_group",datasource:c,query:"label_values(grafanacloud_instance_rule_group_rules,rule_group)"});return new e.Or({title:"Mimir-managed alert rules - per rule group",canCollapse:!0,isCollapsed:!1,body:new e.G1({direction:"column",children:[new e.vA({body:new e.dM({component:D,props:{datasources:[c]}})}),new e.G1({children:[Ge(c,"Rule group evaluation"),Me(c,"Rule group interval")]}),new e.G1({children:[Te(c,"Rule group evaluation duration"),Re(c,"Rules per group"),Ie(c,"Evaluation duration / interval ratio")]}),new e.dM({component:C})]}),$variables:new e.Pj({variables:[n]}),controls:[new e.K8({})]})}var Ze=l(86171);function Xe(){const n=(0,y.of)(et),{components:t}=(0,Ze.u)();return t.length===0?null:(0,a.jsxs)(w.B,{direction:"column",gap:2,children:[(0,a.jsx)(A.E,{element:"h3",variant:"h4",children:"Speed up your alerts creation now by using one of our tailored apps"}),(0,a.jsx)(w.B,{gap:2,wrap:"wrap",direction:"row",children:t.map((r,s)=>(0,a.jsx)("div",{className:n.box,children:(0,a.jsx)(r,{})},s))})]})}const et=n=>({box:(0,m.css)({padding:n.spacing(2),flex:1,backgroundColor:n.colors.background.secondary,maxWidth:"460px"})});function tt(){const n=(Ve()||(0,K.ES)())&&!!I.$.featureToggles.alertingInsights,[t,r]=(0,N.useState)(n?"insights":"overview"),s=ze();return(0,a.jsxs)(k.d,{title:"Alerting",subTitle:"Learn about problems in your systems moments after they occur",navId:"alerting",children:[(0,a.jsxs)(w.B,{gap:2,direction:"column",children:[(0,a.jsx)(Z,{}),(0,a.jsx)(Xe,{})]}),(0,a.jsxs)(U.a,{marginTop:{lg:2,md:0,xs:0},children:[(0,a.jsxs)(V.U,{children:[n&&(0,a.jsx)(R.o,{label:"Insights",active:t==="insights",onChangeTab:()=>r("insights")},"insights"),(0,a.jsx)(R.o,{label:"Get started",active:t==="overview",onChangeTab:()=>r("overview")},"overview")]}),(0,a.jsxs)(z.J,{children:[t==="insights"&&(0,a.jsx)(s.Component,{model:s}),t==="overview"&&(0,a.jsx)(J,{})]})]})]})}},86171:(q,j,l)=>{l.d(j,{u:()=>I});var a=l(74135),N=l(7299);function I(){return(0,N.f)({extensionPointId:a.S.AlertingHomePage,limitPerPlugin:1})}}}]);

//# sourceMappingURL=AlertingHome.c7e35163ded55be1ab60.js.map