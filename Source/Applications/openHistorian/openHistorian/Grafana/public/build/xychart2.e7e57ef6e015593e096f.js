"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3772],{54391:(Je,ue,a)=>{a.d(ue,{R:()=>A});var D=a(74848),H=a(32196),fe=a(96540),S=a(40845),X=a(14578),G=a(10354),be=a(72093);const A=({name:F,onChange:K,verifyLayerNameUniqueness:ee,overrideStyles:ze})=>{const J=(0,S.of)(_),[Y,me]=(0,fe.useState)(!1),[W,te]=(0,fe.useState)(null),Q=T=>{me(!0)},L=T=>{if(me(!1),W){te(null);return}F!==T&&K(T)},j=T=>{const ne=T.currentTarget.value.trim();if(ne.length===0){te("An empty layer name is not allowed");return}if(ee&&!ee(ne)&&ne!==F){te("Layer name already exists");return}W&&te(null)},Le=T=>{L(T.currentTarget.value.trim())},Ce=T=>{T.key==="Enter"&&L(T.currentTarget.value)},je=T=>{T.target.select()};return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)("div",{className:J.wrapper,children:[!Y&&(0,D.jsxs)("button",{className:J.layerNameWrapper,title:"Edit layer name",onClick:Q,"data-testid":"layer-name-div",children:[(0,D.jsx)("span",{className:ze?"":J.layerName,children:F}),(0,D.jsx)(X.I,{name:"pen",className:J.layerEditIcon,size:"sm"})]}),Y&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(G.p,{type:"text",defaultValue:F,onBlur:Le,autoFocus:!0,onKeyDown:Ce,onFocus:je,invalid:W!==null,onChange:j,className:J.layerNameInput,"data-testid":"layer-name-input"}),W&&(0,D.jsx)(be.P,{horizontal:!0,children:W})]})]})})},_=F=>({wrapper:(0,H.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:F.spacing(.5)}),layerNameWrapper:(0,H.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:F.shape.radius.default,alignItems:"center",padding:`0 0 0 ${F.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:F.colors.action.hover,border:`1px dashed ${F.colors.border.strong}`},"&:focus":{border:`2px solid ${F.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,H.css)({fontWeight:F.typography.fontWeightMedium,color:F.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:F.spacing(.5)}),layerEditIcon:(0,H.cx)((0,H.css)({marginLeft:F.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,H.css)({maxWidth:"300px",margin:"-4px 0"})})},80983:(Je,ue,a)=>{a.r(ue),a.d(ue,{plugin:()=>Mt});var D=a(65158),H=a(89654),fe=a(22680),S=a(74848),X=a(32196),G=a(96540),be=a(84596),A=a(1173),_=a(27310),F=a(28240),K=a(11261),ee=a(40845),ze=a(55852),J=a(29158),Y=a(88575),me=a(90182),W=a(76218),te=a(54391),Q=(e=>(e.Circle="circle",e.Square="square",e))(Q||{}),L=(e=>(e.Auto="auto",e.Manual="manual",e))(L||{}),j=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(j||{});const Le={id:""},Ce={fillOpacity:50,show:"points"},je={series:[]},T=({value:e,onChange:n,context:l})=>{const f=(0,ee.of)(ne),c=l.options?.mapping,u=(0,be.A)(c),h=u!=null&&c!==u,d={frame:{matcher:{id:A.jR.byIndex,options:0}}},[o,g]=(0,G.useState)(0);(h||e==null)&&(e=[{...d}],n([...e]),o>0&&g(0));const p=()=>{e=e.concat({...d}),g(e.length-1),n([...e])},N=i=>{e=e.filter((t,r)=>r!==i),g(0),n([...e])},m=e[o],I=`${c}${o}`,s=c===L.Manual?_.X4.ExcludeBaseNames:l.data.length===1?_.X4.IncludeAll:_.X4.OnlyBaseNames;return l.data.forEach((i,t)=>{i.fields.forEach((r,y)=>{r.state={...r.state,origin:{frameIndex:t,fieldIndex:y}}})}),(0,S.jsxs)(S.Fragment,{children:[c===L.Manual&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ze.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:p,className:f.marginBot,children:"Add series"}),(0,S.jsx)("div",{className:f.marginBot,children:e.map((i,t)=>(0,S.jsxs)("div",{className:t===o?`${f.row} ${f.sel}`:f.row,onClick:()=>g(t),role:"button","aria-label":`Select series ${t+1}`,tabIndex:0,onKeyPress:r=>{r.key==="Enter"&&g(t)},children:[(0,S.jsx)(te.R,{name:i.name?.fixed??`Series ${t+1}`,onChange:r=>{i.name={fixed:r===""||r===`Series ${t+1}`?void 0:r},n([...e])}}),(0,S.jsx)(J.K,{name:"trash-alt",title:"remove",className:(0,X.cx)(f.actionIcon),onClick:()=>N(t),tooltip:"Delete series"})]},`series/${t}`))})]}),o>=0&&m!=null&&(0,S.jsxs)(G.Fragment,{children:[(0,S.jsx)(Y.D,{label:"Frame",children:(0,S.jsx)(me.l6,{placeholder:c===L.Auto?"All frames":"Select frame",isClearable:!0,options:l.data.map((i,t)=>({value:t,label:`${(0,F.Ri)(i,t)} (index: ${t}, rows: ${i.length})`})),value:m.frame?.matcher.options,onChange:i=>{i==null?delete m.frame:m.frame={matcher:{id:A.jR.byIndex,options:Number(i.value)}},n([...e])}})}),(0,S.jsx)(Y.D,{label:"X field",children:(0,S.jsx)(W.O,{value:m.x?.matcher.options,context:l,onChange:i=>{i==null?delete m.x:m.x={matcher:{id:A.Ct.byName,options:i}},n([...e])},item:{id:"x",name:"x",settings:{filter:i=>(c===L.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===K.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:c===L.Auto?"First number field in each frame":void 0}}})}),(0,S.jsx)(Y.D,{label:"Y field",children:(0,S.jsx)(W.O,{value:m.y?.matcher?.options,context:l,onChange:i=>{i==null?delete m.y:m.y={matcher:{id:A.Ct.byName,options:i}},n([...e])},item:{id:"y",name:"y",settings:{filter:i=>(c===L.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===K.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:c===L.Auto?"Remaining number fields in each frame":void 0}}})}),(0,S.jsx)(Y.D,{label:"Size field",children:(0,S.jsx)(W.O,{value:m.size?.matcher?.options,context:l,onChange:i=>{i==null?delete m.size:m.size={matcher:{id:A.Ct.byName,options:i}},n([...e])},item:{id:"size",name:"size",settings:{filter:i=>i.name!==m.x?.matcher.options&&(c===L.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===K.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:""}}})}),(0,S.jsx)(Y.D,{label:"Color field",children:(0,S.jsx)(W.O,{value:m.color?.matcher?.options,context:l,onChange:i=>{i==null?delete m.color:m.color={matcher:{id:A.Ct.byName,options:i}},n([...e])},item:{id:"color",name:"color",settings:{filter:i=>i.name!==m.x?.matcher.options&&(c===L.Auto||i.state?.origin?.frameIndex===m.frame?.matcher.options)&&i.type===K.PU.number&&!i.config.custom?.hideFrom?.viz,baseNameMode:s,placeholderText:""}}})})]},I)]})},ne=e=>({marginBot:(0,X.css)({marginBottom:"20px"}),row:(0,X.css)({padding:`${e.spacing(.5,1)}`,borderRadius:`${e.shape.radius.default}`,background:`${e.colors.background.secondary}`,minHeight:`${e.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${e.components.input.borderColor}`,"&:hover":{border:`1px solid ${e.components.input.borderHover}`}}),sel:(0,X.css)({border:`1px solid ${e.colors.primary.border}`,"&:hover":{border:`1px solid ${e.colors.primary.border}`}}),actionIcon:(0,X.css)({color:`${e.colors.text.secondary}`,"&:hover":{color:`${e.colors.text}`}})});var ie=a(24293),Z=a(23596),Oe=a(32264),Te=a(67266),Qe=a(96516),ke=a(81297),O=a(52622),$e=a(38761),qe=a(16895),_e=a(11389),et=a(75073),tt=a(52415),it=a(55307),lt=a(79871),De=a(21164),Ne=a(83195),he=a(85200);function ae(e,n){return e.display?(0,Ne.cN)(e.display(n)):`${n}`}function ot(e){return e.id===A.jR.byIndex?(n,l)=>l===e.options:()=>!1}function nt(e,n,l,f){(0,F.Fm)(l),(0,F.j2)(l,f);let c=[];n.length===0&&(n=[{}]);const{palette:u,getColorByName:h}=Oe.$.theme2.visualization;if(n.forEach((d,o)=>{if(e===L.Manual&&(d.frame?.matcher==null||d.x?.matcher==null||d.y?.matcher==null))return;let g=(0,he.NS)(d.x?.matcher??{id:A.Ct.byType,options:"number"}),p=(0,he.NS)(d.y?.matcher??{id:A.Ct.byType,options:"number"}),N=d.color?(0,he.NS)(d.color.matcher):null,m=d.size?(0,he.NS)(d.size.matcher):null,I=d.frame?ot(d.frame.matcher):null;l.forEach((s,i)=>{if(I!=null&&!I(s,i))return;let t=[],r=[],y=s.fields.filter(v=>v.type===K.PU.number),z=y.find(v=>g(v,s,l)),x=N!=null?y.find(v=>v!==z&&N(v,s,l)):void 0,C=m!=null?y.find(v=>v!==z&&v!==x&&m(v,s,l)):void 0;z!=null&&(y.forEach(v=>{if(v!==z&&!(e===L.Auto&&(v===x||v===C))&&!(e===L.Manual&&r.length>0)&&p(v,s,l)&&!v.config.custom?.hideFrom?.viz){let M=v,b={name:{value:d.name?.fixed??(0,F.Ct)(M,s,l)},showPoints:M.config.custom.show===j.Lines?O.yL.Never:O.yL.Always,pointShape:M.config.custom.pointShape,pointStrokeWidth:M.config.custom.pointStrokeWidth,fillOpacity:M.config.custom.fillOpacity,showLine:M.config.custom.show!==j.Points,lineWidth:M.config.custom.lineWidth??2,lineStyle:M.config.custom.lineStyle,x:{field:z},y:{field:M},color:{},size:{},_rest:t};x!=null&&(b.color.field=x),C!=null&&(b.size.field=C,b.size.min=C.config.custom.pointSize?.min??5,b.size.max=C.config.custom.pointSize?.max??100),r.push(b)}}),r.length,s.fields.forEach(v=>{r.some(({x:E,y:b,color:V,size:P})=>E.field===v||b.field===v||V.field===v||P.field===v)||t.push(v)}),c.push(...r))})}),c.length!==0){let d=0;c.forEach((o,g)=>{if(o.color.field==null){let p=o.y.field.config.color??{mode:ie.Y.PaletteClassic},N="";p.mode===ie.Y.PaletteClassic?N=h(u[d++%u.length]):p.mode===ie.Y.Fixed&&(N=h(p.fixedColor)),o.color.fixed=N}o.size.field==null&&(o.size.fixed=o.y.field.config.custom.pointSize?.fixed??5)}),at(c)}return c}function at(e){let n=e.map(c=>c.name.value.split(/\s+/g));const{prefix:l,suffix:f}=Re(n);(l<1/0||f<1/0)&&e.forEach((c,u)=>{c.name.value=n[u].slice(l,n[u].length-f).join(" ")})}function Ve(e){let n=e.map(h=>h.split(/\s+/g)),{prefix:l,suffix:f}=Re(n),c=n[0];if(c.length===1&&l===1&&f===1)return"";let u=[];return l>0&&u.push(...c.slice(0,l)),f>0&&u.push(...c.slice(-f)),u.join(" ")}function Re(e){let n=1/0,l=1/0,f=e[0];for(let c=1;c<e.length;c++)e[c].length<f.length&&(f=e[c]);for(let c=1;c<e.length;c++){let u=e[c];if(u!==f){let h=0;for(let o=0;o<f.length&&u[o]===f[o];o++)h++;h<n&&(n=h);let d=0;for(let o=f.length-1;o>=0&&u[o]===f[o];o--)d++;d<l&&(l=d)}}return{prefix:n,suffix:l}}function se(e,n){return e!==n&&e.includes(" ")&&(e=e.replace(n,"").trim()),e}const st=({dataIdxs:e,seriesIdx:n,data:l,xySeries:f,dismiss:c,isPinned:u,replaceVariables:h})=>{const d=e.find(y=>y!==null),o=f[n-1],g=o.x.field,p=o.y.field,N=o.size.field,m=o.color.field;let I=o.name.value,s=o.color.fixed;const i={label:I,value:"",color:(0,Z.X4)(s??"#fff",.5),colorIndicator:lt.fX.marker_md},t=[{label:se(g.state?.displayName??g.name,I),value:ae(g,g.values[d])},{label:se(p.state?.displayName??p.name,I),value:ae(p,p.values[d])}];N!=null&&N!==p&&t.push({label:se(N.state?.displayName??N.name,I),value:ae(N,N.values[d])}),m!=null&&m!==p&&t.push({label:se(m.state?.displayName??m.name,I),value:ae(m,m.values[d])}),o._rest.forEach(y=>{t.push({label:se(y.state?.displayName??y.name,I),value:ae(y,y.values[d])})});let r;if(u&&n!=null){const y=(0,De.u)(p,d),z=l.find(C=>C.fields.includes(p)),x=(0,De.O)(z,p,h,d);r=(0,S.jsx)(et.S,{dataLinks:y,actions:x})}return(0,S.jsxs)(it.i,{children:[(0,S.jsx)(tt.A,{item:i,isPinned:u}),(0,S.jsx)(_e.o,{items:t,isPinned:u}),r]})};var rt=a(84140),pe=a(36613),B=a(25019),dt=a(50082),ct=a(8066),ut=a(73134),ft=a(51336),We=a(4134),mt=a(88891);const ht=(e,n)=>{if(e.length===0)return{builder:null,prepData:()=>[]};let l,f;function c(s){return(t,r,y,z)=>(pe.A.orient(t,r,(x,C,v,M,E,b,V,P,w,Me,le,Pt,we,Ue,Vt)=>{const ce=pe.A.pxRatio,U=e[r-1];let Pe=t.data[r],Ae=U.showLine,At=U.showPoints===O.yL.Always,q=U.pointStrokeWidth??0;t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip();let xe=U.fillOpacity/100;t.ctx.fillStyle=(0,Z.X4)(x.fill(),xe),t.ctx.strokeStyle=(0,Z.X4)(x.stroke(),1),t.ctx.lineWidth=q;let Ft=2*Math.PI,Ke=M.key,He=E.key;const Xe=U.y.field.config.custom.pointSize,Fe=U.color.field!=null;let ge=(Xe.max??Xe.fixed)*ce,It=t.posToVal(-ge/2,Ke),Et=t.posToVal(t.bbox.width/ce+ge/2,Ke),Lt=t.posToVal(t.bbox.height/ce+ge/2,He),jt=t.posToVal(-ge/2,He),Ot=s.disp.size.values(t,r),Ye=m[r-1].values,Tt=m[r-1].index,$t=m[r-1].hasAlpha,Dt=U.pointShape===Q.Square,Ze=Ae?new Path2D:null,ve=-1;for(let $=0;$<Pe[0].length;$++){let Ie=Pe[0][$],Ee=Pe[1][$];if(Ie>=It&&Ie<=Et&&Ee>=Lt&&Ee<=jt){let R=Math.round(Ot[$]*ce),ye=b(Ie,M,Me,P),Se=V(Ee,E,le,w);if(Ae&&Ze.lineTo(ye,Se),At){if(Fe&&Ye[$]!==ve){ve=Ye[$];let oe=ve===-1?ie.F:Tt[ve];t.ctx.fillStyle=$t?oe:(0,Z.X4)(oe,xe),t.ctx.strokeStyle=(0,Z.X4)(oe,1)}if(Dt){let oe=Math.round(ye-R/2),Ge=Math.round(Se-R/2);(Fe||xe>0)&&t.ctx.fillRect(oe,Ge,R,R),q>0&&t.ctx.strokeRect(oe,Ge,R,R)}else t.ctx.beginPath(),t.ctx.arc(ye,Se,R/2,0,Ft),(Fe||xe>0)&&t.ctx.fill(),q>0&&t.ctx.stroke();s.each(t,r,$,ye-R/2-q/2,Se-R/2-q/2,R+q,R+q)}}}if(Ae){t.ctx.strokeStyle=U.color.fixed,t.ctx.lineWidth=U.lineWidth*ce;const{lineStyle:$}=U;$&&$.fill!=="solid"&&($.fill==="dot"&&(t.ctx.lineCap="round"),t.ctx.setLineDash($.dash??[10,10])),t.ctx.stroke(Ze)}t.ctx.restore()}),null)}let u=c({disp:{size:{values:(s,i)=>s.data[i][2]},color:{values:(s,i)=>s.data[i][3]}},each:(s,i,t,r,y,z,x)=>{r-=s.bbox.left,y-=s.bbox.top,l.add({x:r,y,w:z,h:x,sidx:i,didx:t})}});const h=new ft.e;h.setCursor({drag:{setScale:!0},dataIdx:(s,i)=>{if(i===1){const t=pe.A.pxRatio;f=null;let r=1/0,y=s.cursor.left*t,z=s.cursor.top*t;l.get(y,z,1,1,x=>{if((0,We.ur)(y,z,x.x,x.y,x.x+x.w,x.y+x.h)){let C=x.x+x.w/2,v=x.y+x.h/2,M=C-y,E=v-z,b=Math.sqrt(M**2+E**2);b<=x.w/2&&b<=r&&(r=b,f=x)}})}return f&&i===f.sidx?f.didx:null},points:{size:(s,i)=>f&&i===f.sidx?f.w/pe.A.pxRatio:0,fill:(s,i)=>"rgba(255,255,255,0.4)"}}),h.addHook("init",(s,i)=>{s.over.style.overflow="hidden"}),h.addHook("drawClear",s=>{l=l||new We.C$(0,0,s.bbox.width,s.bbox.height),l.clear(),s.series.forEach((i,t)=>{t>0&&(i._paths=null)})}),h.setMode(2);let d=e[0].x.field,o=d.config,g=o.custom,p=g?.scaleDistribution;h.addScale({scaleKey:"x",isTime:!1,orientation:O.Lt.Horizontal,direction:O.ON.Right,distribution:p?.type,log:p?.log,linearThreshold:p?.linearThreshold,min:o.min,max:o.max,softMin:g?.axisSoftMin,softMax:g?.axisSoftMax,centeredZero:g?.axisCenteredZero,decimals:o.decimals});let N=g.axisLabel;if(N==null||N===""){let s=e.map(t=>t.x.field.state?.displayName??""),i=e.length===1?d.state?.displayName??d.name:new Set(s).size===1?s[0]:Ve(s);i!==""&&(N=i)}h.addAxis({scaleKey:"x",placement:g?.axisPlacement!==O.vM.Hidden?O.vM.Bottom:O.vM.Hidden,show:g?.axisPlacement!==O.vM.Hidden,grid:{show:g?.axisGridShow},border:{show:g?.axisBorderShow},theme:n,label:N,formatValue:(s,i)=>(0,Ne.cN)(d.display(s,i))}),e.forEach((s,i)=>{let t=s.y.field;const r=s.color.fixed,y=s.color.fixed;let z=t.config.unit??"y",x=t.config,C=x.custom,v=C?.scaleDistribution;h.addScale({scaleKey:z,orientation:O.Lt.Vertical,direction:O.ON.Up,distribution:v?.type,log:v?.log,linearThreshold:v?.linearThreshold,min:x.min,max:x.max,softMin:C?.axisSoftMin,softMax:C?.axisSoftMax,centeredZero:C?.axisCenteredZero,decimals:x.decimals});let M=C.axisLabel;if(M==null||M===""){let E=e.map(V=>V.y.field.state?.displayName??""),b=e.length===1?t.state?.displayName??t.name:new Set(E).size===1?E[0]:Ve(E);b!==""&&(M=b)}h.addAxis({scaleKey:z,theme:n,placement:C?.axisPlacement===O.vM.Auto?O.vM.Left:C?.axisPlacement,show:C?.axisPlacement!==O.vM.Hidden,grid:{show:C?.axisGridShow},border:{show:C?.axisBorderShow},size:C?.axisWidth,label:M,formatValue:(E,b)=>(0,Ne.cN)(t.display(E,b))}),h.addSeries({facets:[{scale:"x",auto:!0},{scale:z,auto:!0}],pathBuilder:u,theme:n,scaleKey:"",lineColor:(0,Z.X4)(r??"#ffff",1),fillColor:(0,Z.X4)(y??"#ffff",.5),show:!t.state?.hideFrom?.viz})});const m=e.map(s=>{const i={index:[],getAll:()=>[],getOne:()=>-1,values:[],hasAlpha:!1},t=s.color.field;return t!=null&&(Object.assign(i,xt(t,n)),i.hasAlpha=i.index.some(r=>!r.endsWith("ff"))),i});function I(s){const{size:i,color:t}=pt(s);return s.forEach((r,y)=>{m[y].values=m[y].getAll(r.color.field?.values??[],t.min,t.max)}),[null,...s.map((r,y)=>{let z=r.x.field.values.length,x;if(r.size.field!=null){let{min:C,max:v}=r.size,M=C**2,b=v**2-M,V=r.size.field.values,P=i.min,Me=i.max-P;x=Array(z);for(let le=0;le<V.length;le++){let we=(V[le]-P)/Me,Ue=M+we*b;x[le]=Ue**.5}}else x=Array(z).fill(r.size.fixed);return[r.x.field.values,r.y.field.values,x,Array(z).fill(r.color.fixed)]})]}return{builder:h,prepData:I}},pt=e=>{const n={size:{min:1/0,max:-1/0},color:{min:1/0,max:-1/0}};return e.forEach(l=>{[l.size,l.color].forEach((f,c)=>{if(f.field!=null){let u=c===0?n.size:n.color;const h=f.field.values;for(let d=0;d<h.length;d++){const o=h[d];o!=null&&(o<u.min&&(u.min=o),o>u.max&&(u.max=o))}}})}),n};function re(e,n){return(0,rt.A)(n.visualization.getColorByName(e)).toHex8String()}function xt(e,n){let l=[],f=()=>[],c=()=>-1,u="";if(e.config.mappings?.length??!1){let h=e.config.mappings;for(let d=0;d<h.length;d++){let o=h[d];if(o.type===B.d.ValueToText)for(let g in o.options){let{color:p}=o.options[g];if(p!=null){let N=e.type===K.PU.string?JSON.stringify(g):Number(g);u+=`v === ${N} ? ${l.length} : `,l.push(re(p,n))}}else if(o.options.result.color!=null){let{color:g}=o.options.result;if(o.type===B.d.RangeToText){let p=[];o.options.from!=null&&p.push(`v >= ${Number(o.options.from)}`),o.options.to!=null&&p.push(`v <= ${Number(o.options.to)}`),p.length>0&&(u+=`${p.join(" && ")} ? ${l.length} : `,l.push(re(g,n)))}else if(o.type===B.d.SpecialValue){let p=o.options.match;p===B.W.NaN?u+="isNaN(v)":p===B.W.NullAndNaN?u+="v == null || isNaN(v)":u+=`v ${p===B.W.True?"=== true":p===B.W.False?"=== false":p===B.W.Null?"== null":p===B.W.Empty?'=== ""':"== null"}`,u+=` ? ${l.length} : `,l.push(re(g,n))}else o.type,B.d.RegexToText}}u+="-1"}else if(e.config.color?.mode===ut.Yb.Thresholds){if(e.config.thresholds?.mode===dt.O.Absolute){let h=e.config.thresholds.steps,d=h.length-1;for(let o=d;o>0;o--)u+=`v >= ${h[o].value} ? ${o} : `;u+="0",l=h.map(o=>re(o.color,n))}}else if(e.config.color?.mode?.startsWith("continuous")){let h=(0,ct.Qi)(e).getCalculator(e,n);l=Array(32);for(let d=0;d<l.length;d++){let o=d/(l.length-1);l[d]=re(h(o,o),n)}f=(d,o,g)=>(0,mt.O4)(d,l,o,g)}return u!==""&&(c=new Function("v",`return ${u};`),f=new Function("vals",`
      let idxs = Array(vals.length);

      for (let i = 0; i < vals.length; i++) {
        let v = vals[i];
        idxs[i] = ${u};
      }

      return idxs;
    `)),{index:l,getOne:c,getAll:f}}const gt=e=>{const n=(0,ee.of)(vt),l=(0,ee.$j)();let{mapping:f,series:c}=e.options,u=(0,G.useMemo)(()=>nt(f,c,e.data.series,e.fieldConfig),[f,c,e.data.series,e.fieldConfig]),{builder:h,prepData:d}=(0,G.useMemo)(()=>ht(u,Oe.$.theme2),[f,c,e.data.structureRev,e.fieldConfig,e.options.tooltip]),o=(0,G.useMemo)(()=>d(u),[u]),g=h==null||o.length===0?"Err":"";const p=()=>{if(!e.options.legend.showLegend)return null;const N=[];u.forEach((r,y)=>{let z=r.y.field;z.config.custom.hideFrom?.legend||N.push({yAxis:1,label:r.name.value,color:(0,Z.X4)(r.color.fixed??ie.F,1),getItemKey:()=>`${y}-${r.name.value}`,fieldName:z.state?.displayName??z.name,disabled:z.state?.hideFrom?.viz??!1,getDisplayValues:()=>(0,qe.UO)(e.options.legend.calcs,z,l)})});const{placement:m,displayMode:I,width:s,sortBy:i,sortDesc:t}=e.options.legend;return(0,S.jsx)(Te.KU.Legend,{placement:m,width:s,children:(0,S.jsx)(Qe.t,{className:n.legend,placement:m,items:N,displayMode:I,sortBy:i,sortDesc:t,isSortable:!0})})};return g?(0,S.jsx)("div",{className:"panel-empty",children:(0,S.jsx)("p",{children:g})}):(0,S.jsx)(Te.KU,{width:e.width,height:e.height,legend:p(),children:(N,m)=>(0,S.jsx)(ke.Z,{config:h,data:o,width:N,height:m,children:e.options.tooltip.mode!==O.$N.None&&(0,S.jsx)($e.xl,{config:h,hoverMode:$e.b3.xyOne,render:(I,s,i,t,r)=>(0,S.jsx)(st,{data:e.data.series,dataIdxs:s,xySeries:u,dismiss:r,isPinned:t,seriesIdx:i,replaceVariables:e.replaceVariables}),maxWidth:e.options.tooltip.maxWidth})})})},vt=()=>({legend:(0,X.css)({div:{justifyContent:"flex-start"}})});var k=a(37055),yt=a(38248),St=a(11404),Be=a(43228);const bt=5;function zt(e){return{standardOptions:{[k.uo.Min]:{hideFromDefaults:!0},[k.uo.Max]:{hideFromDefaults:!0},[k.uo.Unit]:{hideFromDefaults:!0},[k.uo.Decimals]:{hideFromDefaults:!0},[k.uo.NoValue]:{hideFromDefaults:!0},[k.uo.DisplayName]:{hideFromDefaults:!0},[k.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:ie.Y.PaletteClassic}}},useCustomConfig:n=>{n.addRadio({path:"show",name:"Show",defaultValue:e.show,settings:{options:[{label:"Points",value:j.Points},{label:"Lines",value:j.Lines},{label:"Both",value:j.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:e.pointSize?.fixed??bt,settings:{min:1,max:100,step:1},showIf:l=>l.show!==j.Lines}).addNumberInput({path:"pointSize.min",name:"Min point size",showIf:l=>l.show!==j.Lines}).addNumberInput({path:"pointSize.max",name:"Max point size",showIf:l=>l.show!==j.Lines}).addRadio({path:"pointShape",name:"Point shape",defaultValue:Q.Circle,settings:{options:[{value:Q.Circle,label:"Circle"},{value:Q.Square,label:"Square"}]},showIf:l=>l.show!==j.Lines}).addSliderInput({path:"pointStrokeWidth",name:"Point stroke width",defaultValue:1,settings:{min:0,max:10},showIf:l=>l.show!==j.Lines}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:50,settings:{min:0,max:100,step:1},showIf:l=>l.show!==j.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:l=>l.show!==j.Points,editor:Be.F,override:Be.F,process:_.hS,shouldApply:l=>l.type===K.PU.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:l=>l.show!==j.Points}),yt.r(n,e),St.e(n)}}}var de=a(735);const Ct=e=>{const n=e?.pluginVersion??"";return n===""||parseFloat(n)<11.1?Nt(e):e.options};function Nt(e){const{dims:n,seriesMapping:l,series:f,...c}=e.options,{exclude:u=[],frame:h,x:d}=n??{},o=e.fieldConfig.defaults.custom;let g=f;l===de.it.Auto&&(g=[{x:void 0,y:void 0}]);let p=0;const N=g.map(({x:I,y:s,pointColor:i,pointSize:t,frame:r})=>{const{fixed:y,field:z}=i??{},{fixed:x,field:C,min:v,max:M}=t??{};let E,b;return I==null&&d==null?E={id:A.Ct.byType,options:"number"}:E={id:A.Ct.byName,options:I??d},s==null?b={id:A.Ct.byType,options:"number"}:b={id:A.Ct.byName,options:s},z==null&&y&&o.pointColor?.fixed!==y&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(w=>w.id==="color"))||e.fieldConfig.overrides.push({matcher:b,properties:[{id:"color",value:{mode:"fixed",fixedColor:y}}]})),C==null&&x&&o.pointSize?.fixed!==x&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(w=>w.id==="custom.pointSize.fixed"))||e.fieldConfig.overrides.push({matcher:b,properties:[{id:"custom.pointSize.fixed",value:x}]})),C!=null&&(v&&o.pointSize?.min!==v&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(w=>w.id==="custom.pointSize.min"))||e.fieldConfig.overrides.push({matcher:{id:A.Ct.byName,options:C},properties:[{id:"custom.pointSize.min",value:v}]})),M&&o.pointSize?.max!==M&&(e.fieldConfig.overrides.some(P=>P.matcher.id===b.id&&P.matcher.options===b.options&&P.properties.some(w=>w.id==="custom.pointSize.max"))||e.fieldConfig.overrides.push({matcher:{id:A.Ct.byName,options:C},properties:[{id:"custom.pointSize.max",value:M}]}))),{frame:{matcher:{id:A.jR.byIndex,options:r??(l===de.it.Manual?p++:h??0)}},x:{matcher:E},y:{matcher:b,...u.length&&{exclude:{id:A.Ct.byNames,options:u}}},...z&&{color:{matcher:{id:A.Ct.byName,options:z}}},...C&&{size:{matcher:{id:A.Ct.byName,options:C}}}}});return{...c,mapping:l===de.it.Auto?de.it.Auto:de.it.Manual,series:N}}const Mt=new D.m(gt).setMigrationHandler(Ct).useFieldConfig(zt(Ce)).setPanelOptions(e=>{e.addRadio({path:"mapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"series",path:"series",name:"",editor:T,defaultValue:[{}]}),H.D(e,!0),fe.H(e)})}}]);

//# sourceMappingURL=xychart2.e7e57ef6e015593e096f.js.map