"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2666],{11389:(F,M,e)=>{e.d(M,{o:()=>m});var t=e(74848),r=e(32196),v=e(40845),C=e(13471);const m=({items:h,children:T,isPinned:a,scrollable:R=!1,maxHeight:U})=>{const D=(0,v.of)(d),f=R?{maxHeight:U,overflowY:"auto"}:{};return(0,t.jsxs)("div",{className:D.wrapper,style:f,children:[h.map(({label:o,value:u,color:s,colorIndicator:g,colorPlacement:x,isActive:p,lineStyle:n},c)=>(0,t.jsx)(C.B,{label:o,value:u,color:s,colorIndicator:g,colorPlacement:x,isActive:p,justify:"space-between",isPinned:a,lineStyle:n,showValueScroll:!R},c)),T]})},d=h=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${h.colors.border.medium}`,padding:h.spacing(1)})})},75073:(F,M,e)=>{e.d(M,{S:()=>U});var t=e(74848),r=e(32196),v=e(67061),C=e(14689),m=e(55852),d=e(40845);function h({action:f,...o}){return(0,t.jsx)(m.$n,{variant:"primary",size:"sm",onClick:f.onClick,...o,children:f.title})}const T="add-annotation-button",a=(f,o)=>(0,t.jsx)(v.B,{direction:"column",justifyContent:"flex-start",gap:.5,children:f.map((u,s)=>(0,t.jsx)(C.R,{link:u,buttonProps:{className:o.dataLinkButton,fill:"text"}},s))}),R=f=>(0,t.jsx)(v.B,{direction:"column",justifyContent:"flex-start",children:f.map((o,u)=>(0,t.jsx)(h,{action:o,variant:"secondary"},u))}),U=({dataLinks:f,actions:o,annotate:u})=>{const s=(0,d.of)(D);return(0,t.jsxs)("div",{className:s.wrapper,children:[f.length>0&&(0,t.jsx)("div",{className:s.dataLinks,children:a(f,s)}),o&&o.length>0&&(0,t.jsx)("div",{className:s.dataLinks,children:R(o)}),u!=null&&(0,t.jsx)("div",{className:s.addAnnotations,children:(0,t.jsx)(m.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:T,onClick:u,children:"Add annotation"})})]})},D=f=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:f.spacing(0)}),dataLinks:(0,r.css)({borderTop:`1px solid ${f.colors.border.medium}`,padding:f.spacing(1)}),addAnnotations:(0,r.css)({borderTop:`1px solid ${f.colors.border.medium}`,padding:f.spacing(1)}),dataLinkButton:(0,r.css)({cursor:"pointer","&:hover":{textDecoration:"underline",background:"none"}})})},52415:(F,M,e)=>{e.d(M,{A:()=>m});var t=e(74848),r=e(32196),v=e(40845),C=e(13471);const m=({item:h,isPinned:T})=>{const a=(0,v.of)(d),{label:R,value:U,color:D,colorIndicator:f}=h;return(0,t.jsx)("div",{className:a.wrapper,children:(0,t.jsx)(C.B,{label:R,value:U,color:D,colorIndicator:f,marginRight:"22px",isPinned:T})})},d=h=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",flex:1,padding:h.spacing(1),lineHeight:1})})},13471:(F,M,e)=>{e.d(M,{B:()=>x});var t=e(74848),r=e(32196),v=e(96540),C=e(40845),m=e(32982),d=e(56034),h=e(24293),T=e(94536),a=e(79871),R=e(10875),U=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(U||{});const D=({color:n=h.F,colorIndicator:c=a.Ev,position:l=0,lineStyle:O})=>{const y=(0,C.of)(f);return c===a.fX.series?(0,t.jsx)(T.p,{color:n,lineStyle:O,className:l===0?y.leading:y.trailing}):(0,t.jsx)("span",{style:{backgroundColor:n},className:(0,r.cx)(l===0?y.leading:y.trailing,(0,R.L$)(c,y))})},f=n=>({leading:(0,r.css)({marginRight:n.spacing(.5)}),trailing:(0,r.css)({marginLeft:n.spacing(.5)}),value:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,r.css)({}),pie_1_4:(0,r.css)({}),pie_2_4:(0,r.css)({}),pie_3_4:(0,r.css)({}),marker_sm:(0,r.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,r.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,r.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var o=(n=>(n.label="label",n.value="value",n))(o||{});const u="Copied to clipboard",s=2*1e3,g=7,x=({label:n,value:c,color:l,colorIndicator:O,colorPlacement:y=a.lJ.first,justify:E="flex-start",isActive:P=!1,marginRight:A="0px",isPinned:W,lineStyle:K,showValueScroll:j})=>{const i=(0,C.of)(p,E,A),$=j?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"wrap",wordBreak:"break-word"},[w,B]=(0,v.useState)(!1),[J,z]=(0,v.useState)(null),[V,_]=(0,v.useState)(!1),L=(0,v.useRef)(null),S=(0,v.useRef)(null);(0,v.useEffect)(()=>{let I;return V&&(I=setTimeout(()=>{_(!1)},s)),()=>{window.clearTimeout(I)}},[V]);const N=async(I,G)=>{if(!(navigator?.clipboard&&window.isSecureContext)){H(I,G);return}try{await navigator.clipboard.writeText(I),z({[`${G}`]:I}),_(!0)}catch{z(null)}},H=(I,G)=>{const X=document.createElement("textarea");L.current?.appendChild(X),X.value=I,X.focus(),X.select();try{document.execCommand("copy")&&(z({[`${G}`]:I}),_(!0))}catch(b){console.error("Unable to copy to clipboard",b)}X.remove()},Z=I=>{I.currentTarget.offsetWidth<I.currentTarget.scrollWidth&&B(!0)},Y=()=>B(!1);return n.length*g>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,t.jsxs)("div",{className:i.contentWrapper,children:[(l||n)&&(0,t.jsxs)("div",{className:i.valueWrapper,children:[l&&y===a.lJ.first&&(0,t.jsx)(D,{color:l,colorIndicator:O,lineStyle:K}),W?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.m,{content:n,interactive:!1,show:w,children:(0,t.jsxs)(t.Fragment,{children:[V&&J?.label&&(0,t.jsx)(m.r,{placement:"top",referenceElement:L.current,children:u}),(0,t.jsx)("div",{className:(0,r.cx)(i.label,P&&i.activeSeries,navigator?.clipboard&&i.copy),onMouseEnter:Z,onMouseLeave:Y,onClick:()=>N(n,"label"),ref:L,children:n})]})})}):(0,t.jsx)("div",{className:(0,r.cx)(i.label,P&&i.activeSeries),children:n})]}),(0,t.jsxs)("div",{className:i.valueWrapper,children:[l&&y===a.lJ.leading&&(0,t.jsx)(D,{color:l,colorIndicator:O,position:U.Leading,lineStyle:K}),W?(0,t.jsxs)(t.Fragment,{children:[V&&J?.value&&(0,t.jsx)(m.r,{placement:"top",referenceElement:S.current,children:u}),(0,t.jsx)("div",{className:(0,r.cx)(i.value,P,navigator?.clipboard&&i.copy),style:$,onClick:()=>N(c?c.toString():"","value"),ref:S,children:c})]}):(0,t.jsx)("div",{className:(0,r.cx)(i.value,P),style:$,children:c}),l&&y===a.lJ.trailing&&(0,t.jsx)(D,{color:l,colorIndicator:O,position:U.Trailing,lineStyle:K})]})]})},p=(n,c,l)=>({contentWrapper:(0,r.css)({display:"flex",alignItems:"start",justifyContent:c,marginRight:l}),label:(0,r.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,r.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,r.css)({display:"flex",alignItems:"center"}),activeSeries:(0,r.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,r.css)({cursor:"pointer"})})},55307:(F,M,e)=>{e.d(M,{i:()=>C});var t=e(74848),r=e(32196),v=e(40845);const C=({children:d,className:h})=>{const T=(0,v.of)(m);return(0,t.jsx)("div",{className:(0,r.cx)(T.wrapper,h),children:d})},m=d=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",fontSize:d.typography.bodySmall.fontSize})})},81530:(F,M,e)=>{e.d(M,{X:()=>U,k:()=>a});var t=e(90708),r=e(26272),v=e(11261),C=e(80997),m=e(17172),d=e(10096),h=e(77920),T=e(3704);const a=(o,u,s,g,x,p)=>!x||x.length===0?[]:x.map(c=>{const l=(0,t.vd)(o,u,s),O={...s,__dataContext:l},y=(P,A,W)=>g(P,{...O,...A},W);p.valueRowIndex!==void 0&&!isNaN(p.valueRowIndex)?l.value.rowIndex=p.valueRowIndex:l.value.calculatedValue=p.calculatedValue;let E={title:"",onClick:P=>{}};return E={title:g(c.title||"",O),onClick:(P,A)=>{R(c,y)}},E}).filter(c=>!!c),R=(o,u)=>{try{const s=new URL(D(u(o.fetch.url))),g={};let x={url:s.toString(),method:o.fetch.method,data:f(o,u),headers:g};o.fetch.headers&&o.fetch.headers.forEach(([p,n])=>{g[u(p)]=u(n)}),o.fetch.queryParams&&(o.fetch.queryParams?.forEach(([p,n])=>{s.searchParams.append(u(p),u(n))}),x.url=s.toString()),g["X-Grafana-Action"]="1",x.headers=g,(0,m.AI)().fetch(x).subscribe({error:p=>{d.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(p)},complete:()=>{d.lE.emit(r.r1.alertSuccess,["API call was successful"])}})}catch(s){d.lE.emit(r.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(s);return}},U=(o=[],u=[])=>({name:"Default field",type:v.PU.string,config:{links:o,actions:u},values:[]}),D=o=>{if(o.startsWith("/")){const s=C.sQ.sanitizeUrl(o);o=(0,T.z)(s,[])}return o},f=(o,u)=>{let s=o.fetch.body?u(o.fetch.body):"{}";return o.fetch.method===h.DO.GET&&(s=void 0),s}},77920:(F,M,e)=>{e.d(M,{DO:()=>C,en:()=>t,gR:()=>r,xp:()=>v});var t=(a=>(a.Center="center",a.Left="left",a.LeftRight="leftright",a.Right="right",a.Scale="scale",a))(t||{}),r=(a=>(a.Bottom="bottom",a.Center="center",a.Scale="scale",a.Top="top",a.TopBottom="topbottom",a))(r||{}),v=(a=>(a.Contain="contain",a.Cover="cover",a.Fill="fill",a.Original="original",a.Tile="tile",a))(v||{}),C=(a=>(a.GET="GET",a.POST="POST",a.PUT="PUT",a))(C||{}),m=(a=>(a.Straight="straight",a))(m||{});const d={vertices:[]},h={connections:[]},T={infinitePan:!0,inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0}},21164:(F,M,e)=>{e.d(M,{O:()=>C,u:()=>v});var t=e(32264),r=e(81530);const v=(m,d)=>{const h=[];if((m.config.links?.length??0)>0&&m.getLinks!=null){const T=m.values[d],a=m.display?m.display(T):{text:`${T}`,numeric:+T},R=new Set;m.getLinks({calculatedValue:a,valueRowIndex:d}).forEach(U=>{const D=`${U.title}/${U.href}`;R.has(D)||(h.push(U),R.add(D))})}return h},C=(m,d,h,T)=>{if(!t.$.featureToggles?.vizActions)return[];const a=[],R=new Set;return(0,r.k)(m,d,d.state.scopedVars,h,d.config.actions??[],{valueRowIndex:T}).forEach(D=>{const f=`${D.title}`;R.has(f)||(a.push(D),R.add(f))}),a}},82915:(F,M,e)=>{e.d(M,{B_:()=>U,Fg:()=>o,O2:()=>f,T5:()=>u});var t=e(11261),r=e(28240),v=e(83195),C=e(57875),m=e(50311),d=e(46294),h=e(39624),T=e(52622),a=e(55129);function R(s){let g=new Map;return s.map(p=>({...p,fields:p.fields.map(n=>{if(n.type===t.PU.enum){let c=(0,a.M)(n.config,n.type),l=g.get(c);l||(l=[],g.set(c,l));let O=n.values.toArray().slice(),y=n.config.type.enum.text;if(l.length>0)for(let E=0;E<O.length;E++)O[E]+=l.length;return l.push(...y),n.config.type.enum.text=l,{...n,values:O}}return n})}))}function U(s,g,x,p){if(!s?.length)return null;(0,r.Fm)(s);let n=p!=null;p!=null&&p>0&&(s=[{...s[0],fields:[s[0].fields[p],...s[0].fields.filter((y,E)=>E!==p)]}]);for(let y of s)for(let E of y.fields)E.type===t.PU.time&&typeof E.values[0]!="number"&&(E.values=(0,m.s7)(E,{destinationType:t.PU.time}).values);let c=0;e:for(let y of s)for(let E of y.fields)if(E.type===t.PU.enum&&++c>1){s=R(s);break e}let l;const O=[];for(let y of s){const E=[];let P=!1,A=!1,W=n?y:(0,d.M)({frame:y,refFieldPseudoMin:x?.from.valueOf(),refFieldPseudoMax:x?.to.valueOf()});const K=(0,h.C)(W).fields;for(let j=0;j<K?.length;j++){const i=K[j];switch(i.type){case t.PU.time:P=!0,E.push(i);break;case t.PU.number:A=n?j>0:!0,l={...i,values:i.values.map(B=>Number.isFinite(B)||B==null?B:null)},E.push(l);break;case t.PU.enum:A=!0;case t.PU.string:l={...i,values:i.values},E.push(l);break;case t.PU.boolean:A=!0;const $=i.config?.custom??{},w={...i.config,max:1,min:0,custom:$};$.lineInterpolation!==T.dx.StepBefore&&($.lineInterpolation=T.dx.StepAfter),l={...i,config:w,type:t.PU.number,values:i.values.map(B=>B==null?B:B?1:0)},(0,v.j9)(w.unit)||(w.unit="bool",l.display=(0,C.J)({field:l,theme:g})),E.push(l);break}}(n||P)&&A&&O.push({...y,length:W.length,fields:E})}return O.length?(f(O,g,0),D(O,g),O):null}const D=(s,g)=>{const{palette:x}=g.visualization;for(const p of s)for(const n of p.fields)if(n.type===t.PU.enum){const c=x[n.state?.seriesIndex%x.length],l=g.visualization.getColorByName(c),O=n.config.type.enum;O.color=Array(O.text.length).fill(l),n.display=(0,C.J)({field:n,theme:g})}},f=(s,g,x)=>{let p=0;s.forEach(n=>{n.fields.forEach((c,l)=>{l!==x&&(c.type===t.PU.number||c.type===t.PU.boolean||c.type===t.PU.enum)&&(c.state={...c.state,seriesIndex:p++},c.display=(0,C.J)({field:c,theme:g}))})})};function o(s,g){return!s||!s.length?[g]:s.map(x=>x?.length?x:g)}const u=s=>s.mode===T.$N.Multi&&s.maxHeight!=null},32475:(F,M,e)=>{e.r(M),e.d(M,{plugin:()=>E});var t=e(65158),r=e(11261),v=e(89654),C=e(22680),m=e(41706),d=e(74848),h=e(96540),T=e(85200),a=e(1173),R=e(73060),U=e(32264),D=e(97152),f=e(79041),o=e(23117),u=e(52622),s=e(38761),g=e(40458),x=e(95168),p=e(63577),n=e(22731),c=e(82915);const l=({data:P,timeRange:A,timeZone:W,width:K,height:j,options:i,fieldConfig:$,replaceVariables:w,id:B})=>{const{dataLinkPostProcessor:J}=(0,f.d2)(),z=i.xField??P.series[0].fields.find(L=>L.type===r.PU.number)?.name,V=(L,S,N)=>(S={...S,x:T.sJ.get(a.Ct.byName).get(z)},(0,g.m)(L,S)),_=(0,h.useMemo)(()=>{if(P.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:P.series};let L=P.series,S;if(i.xField){if(S=(0,p.findFieldIndex)(i.xField,L[0]),S==null)return{warning:"Unable to find field: "+i.xField,frames:P.series}}else if(S=L[0].fields.findIndex(N=>N.type===r.PU.number),S===-1)return{warning:"No numeric fields found for X axis",frames:L};if(S!=null){const N=L[0].fields[S];if(N.type===r.PU.number&&!(0,R.g2)(N.values))return{warning:"Values must be in ascending order",frames:L}}return{frames:(0,c.B_)(L,U.$.theme2,void 0,S)}},[P.series,i.xField]);return _.warning||!_.frames?(0,d.jsx)(D.a,{panelId:B,fieldConfig:$,data:P,message:_.warning,needsNumberField:!0}):(0,d.jsx)(x.Z,{frames:_.frames,structureRev:P.structureRev,timeRange:A,timeZone:W,width:K,height:j,legend:i.legend,options:i,preparePlotFrame:V,replaceVariables:w,dataLinkPostProcessor:J,children:(L,S)=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z,{config:L}),i.tooltip.mode!==u.$N.None&&(0,d.jsx)(s.xl,{config:L,hoverMode:i.tooltip.mode===u.$N.Single?s.b3.xOne:s.b3.xAll,render:(N,H,Z,Y=!1)=>(0,d.jsx)(n.k,{series:S,dataIdxs:H,seriesIdx:Z,mode:i.tooltip.mode,sortOrder:i.tooltip.sort,isPinned:Y,maxHeight:i.tooltip.maxHeight,replaceVariables:w}),maxWidth:i.tooltip.maxWidth})]})})};var O=e(38824);class y{getSuggestionsForData(A){const{dataSummary:W}=A;return W.numberFieldCount<2||W.rowCountTotal<2||W.rowCountTotal<2?void 0:A.getListAppender({name:O.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:u.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:j=>{j.fieldConfig?.defaults.custom?.drawStyle!==u.GR.Bars&&(j.fieldConfig.defaults.custom.lineWidth=Math.max(j.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const E=new t.m(l).useFieldConfig((0,m.V)(m.S,!1)).setPanelOptions(P=>{const A=["X axis"];P.addFieldNamePicker({path:"xField",name:"X field",description:"An increasing numeric value",category:A,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:W=>W.type===r.PU.number}}),v.D(P,!1,!0),C.H(P)}).setSuggestionsSupplier(new y)}}]);

//# sourceMappingURL=trendPanel.b2846eaa8485bd0d74e4.js.map