{"version":3,"sources":["webpack:///./public/app/features/admin/UserListAdminPage.tsx"],"names":["renderUser","user","editUrl","id","key","className","href","src","avatarUrl","title","login","email","name","lastSeenAtAge","isAdmin","placement","content","Array","isArray","authLabels","length","label","removeIcon","count","isDisabled","getStyles","stylesFactory","table","css","mapDispatchToProps","fetchUsers","changeQuery","changePage","hot","module","connect","state","navModel","getNavModel","navIndex","users","userListAdmin","query","showPaging","totalPages","page","props","styles","useEffect","Contents","justify","width","type","placeholder","tabIndex","autoFocus","value","spellCheck","onChange","event","currentTarget","prefix","variant","cx","style","map","numberOfPages","currentPage","onNavigate"],"mappings":"ibA+BA,IA4DMA,EAAa,SAACC,GAClB,IAAMC,EAAU,oBAAH,OAAuBD,EAAKE,IAEzC,OACE,wBAAIC,IAAKH,EAAKE,IACZ,wBAAIE,UAAU,+BACZ,uBAAGC,KAAMJ,GACP,yBAAKG,UAAU,uBAAuBE,IAAKN,EAAKO,cAGpD,wBAAIH,UAAU,wBACZ,uBAAGA,UAAU,WAAWC,KAAMJ,EAASO,MAAOR,EAAKS,OAChDT,EAAKS,QAGV,wBAAIL,UAAU,wBACZ,uBAAGA,UAAU,WAAWC,KAAMJ,EAASO,MAAOR,EAAKU,OAChDV,EAAKU,QAGV,wBAAIN,UAAU,wBACZ,uBAAGA,UAAU,WAAWC,KAAMJ,EAASO,MAAOR,EAAKW,MAChDX,EAAKW,OAGV,wBAAIP,UAAU,WAAWJ,EAAKY,eAAiB,uBAAGP,KAAMJ,GAAUD,EAAKY,gBACvE,wBAAIR,UAAU,WACXJ,EAAKa,SACJ,uBAAGR,KAAMJ,GACP,kBAAC,UAAD,CAASa,UAAU,MAAMC,QAAQ,iBAC/B,kBAAC,OAAD,CAAMJ,KAAK,cAKnB,wBAAIP,UAAU,cACXY,MAAMC,QAAQjB,EAAKkB,aAAelB,EAAKkB,WAAWC,OAAS,GAC1D,kBAAC,IAAD,CAAUC,MAAOpB,EAAKkB,WAAW,GAAIG,YAAY,EAAOC,MAAO,KAGnE,wBAAIlB,UAAU,cACXJ,EAAKuB,YAAc,0BAAMnB,UAAU,mCAAhB,eAMtBoB,EAAYC,yBAAc,WAC9B,MAAO,CACLC,MAAOC,cAAF,SAMHC,EAAkE,CACtEC,eACAC,gBACAC,gBAYaC,wBAAIC,EAAJD,CAAYE,mBAToD,SAAAC,GAAK,MAAK,CACvFC,SAAUC,YAAYF,EAAMG,SAAU,gBACtCC,MAAOJ,EAAMK,cAAcD,MAC3BE,MAAON,EAAMK,cAAcC,MAC3BC,WAAYP,EAAMK,cAAcE,WAChCC,WAAYR,EAAMK,cAAcG,WAChCC,KAAMT,EAAMK,cAAcI,QAGwBhB,EAAzBM,EAlI2B,SAAAW,GACpD,IAAMC,EAAStB,IAMf,OAJAuB,qBAAU,WACRF,EAAMhB,eACL,IAGD,kBAAC,IAAD,CAAMO,SAAUS,EAAMT,UACpB,kBAAC,IAAKY,SAAN,KACE,oCACE,6BACE,kBAAC,kBAAD,CAAiBC,QAAQ,iBACvB,kBAAC,QAAD,CACEC,MAAO,GACPC,KAAK,OACLC,YAAY,sCACZC,SAAU,EACVC,WAAW,EACXC,MAAOV,EAAMJ,MACbe,YAAY,EACZC,SAAU,SAAAC,GAAK,OAAIb,EAAMf,YAAY4B,EAAMC,cAAcJ,QACzDK,OAAQ,kBAAC,OAAD,CAAMjD,KAAK,aAErB,kBAAC,aAAD,CAAYN,KAAK,qBAAqBwD,QAAQ,WAA9C,cAMJ,yBAAKzD,UAAW0D,aAAGhB,EAAOpB,MAAO,qBAC/B,2BAAOtB,UAAU,gDACf,+BACE,4BACE,6BACA,qCACA,qCACA,oCACA,oCAEE,kBAAC,UAAD,CAASU,UAAU,MAAMC,QAAQ,0CAC/B,kBAAC,OAAD,CAAMJ,KAAK,sBAGf,6BACA,wBAAIoD,MAAO,CAAEb,MAAO,UAGxB,+BAAQL,EAAMN,MAAMyB,IAAIjE,MAG3B8C,EAAMH,YACL,kBAAC,aAAD,CAAYuB,cAAepB,EAAMF,WAAYuB,YAAarB,EAAMD,KAAMuB,WAAYtB,EAAMd,qB","file":"UserListAdminPage.591ee81e63053ad31983.js","sourcesContent":["import React, { useEffect } from 'react';\nimport { css, cx } from 'emotion';\nimport { hot } from 'react-hot-loader';\nimport { connect, MapDispatchToProps, MapStateToProps } from 'react-redux';\nimport { NavModel } from '@grafana/data';\nimport { Pagination, Tooltip, HorizontalGroup, stylesFactory, LinkButton, Input, Icon } from '@grafana/ui';\nimport { StoreState, UserDTO } from '../../types';\nimport Page from 'app/core/components/Page/Page';\nimport { getNavModel } from '../../core/selectors/navModel';\nimport { fetchUsers, changeQuery, changePage } from './state/actions';\nimport { TagBadge } from 'app/core/components/TagFilter/TagBadge';\n\ninterface OwnProps {}\n\ninterface ConnectedProps {\n  navModel: NavModel;\n  users: UserDTO[];\n  query: string;\n  showPaging: boolean;\n  totalPages: number;\n  page: number;\n}\n\ninterface DispatchProps {\n  fetchUsers: typeof fetchUsers;\n  changeQuery: typeof changeQuery;\n  changePage: typeof changePage;\n}\n\ntype Props = OwnProps & ConnectedProps & DispatchProps;\n\nconst UserListAdminPageUnConnected: React.FC<Props> = props => {\n  const styles = getStyles();\n\n  useEffect(() => {\n    props.fetchUsers();\n  }, []);\n\n  return (\n    <Page navModel={props.navModel}>\n      <Page.Contents>\n        <>\n          <div>\n            <HorizontalGroup justify=\"space-between\">\n              <Input\n                width={40}\n                type=\"text\"\n                placeholder=\"Search user by login, email or name\"\n                tabIndex={1}\n                autoFocus={true}\n                value={props.query}\n                spellCheck={false}\n                onChange={event => props.changeQuery(event.currentTarget.value)}\n                prefix={<Icon name=\"search\" />}\n              />\n              <LinkButton href=\"admin/users/create\" variant=\"primary\">\n                New user\n              </LinkButton>\n            </HorizontalGroup>\n          </div>\n\n          <div className={cx(styles.table, 'admin-list-table')}>\n            <table className=\"filter-table form-inline filter-table--hover\">\n              <thead>\n                <tr>\n                  <th></th>\n                  <th>Login</th>\n                  <th>Email</th>\n                  <th>Name</th>\n                  <th>\n                    Seen&nbsp;\n                    <Tooltip placement=\"top\" content=\"Time since user was seen using Grafana\">\n                      <Icon name=\"question-circle\" />\n                    </Tooltip>\n                  </th>\n                  <th></th>\n                  <th style={{ width: '1%' }}></th>\n                </tr>\n              </thead>\n              <tbody>{props.users.map(renderUser)}</tbody>\n            </table>\n          </div>\n          {props.showPaging && (\n            <Pagination numberOfPages={props.totalPages} currentPage={props.page} onNavigate={props.changePage} />\n          )}\n        </>\n      </Page.Contents>\n    </Page>\n  );\n};\n\nconst renderUser = (user: UserDTO) => {\n  const editUrl = `admin/users/edit/${user.id}`;\n\n  return (\n    <tr key={user.id}>\n      <td className=\"width-4 text-center link-td\">\n        <a href={editUrl}>\n          <img className=\"filter-table__avatar\" src={user.avatarUrl} />\n        </a>\n      </td>\n      <td className=\"link-td max-width-10\">\n        <a className=\"ellipsis\" href={editUrl} title={user.login}>\n          {user.login}\n        </a>\n      </td>\n      <td className=\"link-td max-width-10\">\n        <a className=\"ellipsis\" href={editUrl} title={user.email}>\n          {user.email}\n        </a>\n      </td>\n      <td className=\"link-td max-width-10\">\n        <a className=\"ellipsis\" href={editUrl} title={user.name}>\n          {user.name}\n        </a>\n      </td>\n      <td className=\"link-td\">{user.lastSeenAtAge && <a href={editUrl}>{user.lastSeenAtAge}</a>}</td>\n      <td className=\"link-td\">\n        {user.isAdmin && (\n          <a href={editUrl}>\n            <Tooltip placement=\"top\" content=\"Grafana Admin\">\n              <Icon name=\"shield\" />\n            </Tooltip>\n          </a>\n        )}\n      </td>\n      <td className=\"text-right\">\n        {Array.isArray(user.authLabels) && user.authLabels.length > 0 && (\n          <TagBadge label={user.authLabels[0]} removeIcon={false} count={0} />\n        )}\n      </td>\n      <td className=\"text-right\">\n        {user.isDisabled && <span className=\"label label-tag label-tag--gray\">Disabled</span>}\n      </td>\n    </tr>\n  );\n};\n\nconst getStyles = stylesFactory(() => {\n  return {\n    table: css`\n      margin-top: 28px;\n    `,\n  };\n});\n\nconst mapDispatchToProps: MapDispatchToProps<DispatchProps, OwnProps> = {\n  fetchUsers,\n  changeQuery,\n  changePage,\n};\n\nconst mapStateToProps: MapStateToProps<ConnectedProps, OwnProps, StoreState> = state => ({\n  navModel: getNavModel(state.navIndex, 'global-users'),\n  users: state.userListAdmin.users,\n  query: state.userListAdmin.query,\n  showPaging: state.userListAdmin.showPaging,\n  totalPages: state.userListAdmin.totalPages,\n  page: state.userListAdmin.page,\n});\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(UserListAdminPageUnConnected));\n"],"sourceRoot":""}