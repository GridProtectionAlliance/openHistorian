"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[1067],{"../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!../../node_modules/uplot/dist/uPlot.min.css":function(module,__webpack_exports__,__webpack_require__){var _storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js"),_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'.uplot, .uplot *, .uplot *::before, .uplot *::after {box-sizing: border-box;}.uplot {font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.5;width: min-content;}.u-title {text-align: center;font-size: 18px;font-weight: bold;}.u-wrap {position: relative;user-select: none;}.u-over, .u-under {position: absolute;}.u-under {overflow: hidden;}.uplot canvas {display: block;position: relative;width: 100%;height: 100%;}.u-axis {position: absolute;}.u-legend {font-size: 14px;margin: auto;text-align: center;}.u-inline {display: block;}.u-inline * {display: inline-block;}.u-inline tr {margin-right: 16px;}.u-legend th {font-weight: 600;}.u-legend th > * {vertical-align: middle;display: inline-block;}.u-legend .u-marker {width: 1em;height: 1em;margin-right: 4px;background-clip: padding-box !important;}.u-inline.u-live th::after {content: ":";vertical-align: middle;}.u-inline:not(.u-live) .u-value {display: none;}.u-series > * {padding: 4px;}.u-series th {cursor: pointer;}.u-legend .u-off > * {opacity: 0.3;}.u-select {background: rgba(0,0,0,0.07);position: absolute;pointer-events: none;}.u-cursor-x, .u-cursor-y {position: absolute;left: 0;top: 0;pointer-events: none;will-change: transform;}.u-hz .u-cursor-x, .u-vt .u-cursor-y {height: 100%;border-right: 1px dashed #607D8B;}.u-hz .u-cursor-y, .u-vt .u-cursor-x {width: 100%;border-bottom: 1px dashed #607D8B;}.u-cursor-pt {position: absolute;top: 0;left: 0;border-radius: 50%;border: 0 solid;pointer-events: none;will-change: transform;/*this has to be !important since we set inline "background" shorthand */background-clip: padding-box !important;}.u-axis.u-off, .u-select.u-off, .u-cursor-x.u-off, .u-cursor-y.u-off, .u-cursor-pt.u-off {display: none;}',"",{version:3,sources:["webpack://./../../node_modules/uplot/dist/uPlot.min.css"],names:[],mappings:"AAAA,qDAAqD,sBAAsB,CAAC,CAAC,QAAQ,yLAAyL,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC,UAAU,kBAAkB,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC,SAAS,kBAAkB,CAAC,iBAAiB,CAAC,CAAC,mBAAmB,kBAAkB,CAAC,CAAC,UAAU,gBAAgB,CAAC,CAAC,eAAe,cAAc,CAAC,kBAAkB,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,SAAS,kBAAkB,CAAC,CAAC,WAAW,eAAe,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC,WAAW,cAAc,CAAC,CAAC,aAAa,qBAAqB,CAAC,CAAC,cAAc,kBAAkB,CAAC,CAAC,cAAc,gBAAgB,CAAC,CAAC,kBAAkB,sBAAsB,CAAC,qBAAqB,CAAC,CAAC,qBAAqB,UAAU,CAAC,WAAW,CAAC,iBAAiB,CAAC,uCAAuC,CAAC,CAAC,4BAA4B,YAAY,CAAC,sBAAsB,CAAC,CAAC,iCAAiC,aAAa,CAAC,CAAC,eAAe,YAAY,CAAC,CAAC,cAAc,eAAe,CAAC,CAAC,sBAAsB,YAAY,CAAC,CAAC,WAAW,4BAA4B,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,CAAC,0BAA0B,kBAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,CAAC,sCAAsC,YAAY,CAAC,gCAAgC,CAAC,CAAC,sCAAsC,WAAW,CAAC,iCAAiC,CAAC,CAAC,cAAc,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,eAAe,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,wEAAwE,CAAC,uCAAuC,CAAC,CAAC,0FAA0F,aAAa,CAAC",sourcesContent:['.uplot, .uplot *, .uplot *::before, .uplot *::after {box-sizing: border-box;}.uplot {font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";line-height: 1.5;width: min-content;}.u-title {text-align: center;font-size: 18px;font-weight: bold;}.u-wrap {position: relative;user-select: none;}.u-over, .u-under {position: absolute;}.u-under {overflow: hidden;}.uplot canvas {display: block;position: relative;width: 100%;height: 100%;}.u-axis {position: absolute;}.u-legend {font-size: 14px;margin: auto;text-align: center;}.u-inline {display: block;}.u-inline * {display: inline-block;}.u-inline tr {margin-right: 16px;}.u-legend th {font-weight: 600;}.u-legend th > * {vertical-align: middle;display: inline-block;}.u-legend .u-marker {width: 1em;height: 1em;margin-right: 4px;background-clip: padding-box !important;}.u-inline.u-live th::after {content: ":";vertical-align: middle;}.u-inline:not(.u-live) .u-value {display: none;}.u-series > * {padding: 4px;}.u-series th {cursor: pointer;}.u-legend .u-off > * {opacity: 0.3;}.u-select {background: rgba(0,0,0,0.07);position: absolute;pointer-events: none;}.u-cursor-x, .u-cursor-y {position: absolute;left: 0;top: 0;pointer-events: none;will-change: transform;}.u-hz .u-cursor-x, .u-vt .u-cursor-y {height: 100%;border-right: 1px dashed #607D8B;}.u-hz .u-cursor-y, .u-vt .u-cursor-x {width: 100%;border-bottom: 1px dashed #607D8B;}.u-cursor-pt {position: absolute;top: 0;left: 0;border-radius: 50%;border: 0 solid;pointer-events: none;will-change: transform;/*this has to be !important since we set inline "background" shorthand */background-clip: padding-box !important;}.u-axis.u-off, .u-select.u-off, .u-cursor-x.u-off, .u-cursor-y.u-off, .u-cursor-pt.u-off {display: none;}'],sourceRoot:""}]),__webpack_exports__.A=___CSS_LOADER_EXPORT___},"../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js":function(module){module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map((function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content})).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js":function(module){module.exports=function(item){var content=item[1],cssMapping=item[3];if(!cssMapping)return content;if("function"==typeof btoa){var base64=btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64),sourceMapping="/*# ".concat(data," */");return[content].concat([sourceMapping]).join("\n")}return[content].join("\n")}},"../../node_modules/uplot/dist/uPlot.min.css":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){var _storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleDomAPI.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertBySelector.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertStyleElement.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleTagTransform.js"),_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__),_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_uPlot_min_css__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[7].use[1]!../../node_modules/uplot/dist/uPlot.min.css"),options={};options.styleTagTransform=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default(),options.setAttributes=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default(),options.insert=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null,"head"),options.domAPI=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default(),options.insertStyleElement=_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default();_storybook_builder_webpack5_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_uPlot_min_css__WEBPACK_IMPORTED_MODULE_6__.A,options),_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_uPlot_min_css__WEBPACK_IMPORTED_MODULE_6__.A&&_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_uPlot_min_css__WEBPACK_IMPORTED_MODULE_6__.A.locals&&_storybook_builder_webpack5_node_modules_css_loader_dist_cjs_js_ruleSet_1_rules_7_use_1_uPlot_min_css__WEBPACK_IMPORTED_MODULE_6__.A.locals},"../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(module){var stylesInDOM=[];function getIndexByIdentifier(identifier){for(var result=-1,i=0;i<stylesInDOM.length;i++)if(stylesInDOM[i].identifier===identifier){result=i;break}return result}function modulesToDom(list,options){for(var idCountMap={},identifiers=[],i=0;i<list.length;i++){var item=list[i],id=options.base?item[0]+options.base:item[0],count=idCountMap[id]||0,identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var indexByIdentifier=getIndexByIdentifier(identifier),obj={css:item[1],media:item[2],sourceMap:item[3],supports:item[4],layer:item[5]};if(-1!==indexByIdentifier)stylesInDOM[indexByIdentifier].references++,stylesInDOM[indexByIdentifier].updater(obj);else{var updater=addElementStyle(obj,options);options.byIndex=i,stylesInDOM.splice(i,0,{identifier:identifier,updater:updater,references:1})}identifiers.push(identifier)}return identifiers}function addElementStyle(obj,options){var api=options.domAPI(options);api.update(obj);return function updater(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap&&newObj.supports===obj.supports&&newObj.layer===obj.layer)return;api.update(obj=newObj)}else api.remove()}}module.exports=function(list,options){var lastIdentifiers=modulesToDom(list=list||[],options=options||{});return function update(newList){newList=newList||[];for(var i=0;i<lastIdentifiers.length;i++){var index=getIndexByIdentifier(lastIdentifiers[i]);stylesInDOM[index].references--}for(var newLastIdentifiers=modulesToDom(newList,options),_i=0;_i<lastIdentifiers.length;_i++){var _index=getIndexByIdentifier(lastIdentifiers[_i]);0===stylesInDOM[_index].references&&(stylesInDOM[_index].updater(),stylesInDOM.splice(_index,1))}lastIdentifiers=newLastIdentifiers}}},"../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertBySelector.js":function(module){var memo={};module.exports=function insertBySelector(insert,style){var target=function getTarget(target){if(void 0===memo[target]){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement)try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}memo[target]=styleTarget}return memo[target]}(insert);if(!target)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");target.appendChild(style)}},"../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertStyleElement.js":function(module){module.exports=function insertStyleElement(options){var element=document.createElement("style");return options.setAttributes(element,options.attributes),options.insert(element,options.options),element}},"../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":function(module,__unused_webpack_exports,__webpack_require__){module.exports=function setAttributesWithoutAttributes(styleElement){var nonce=__webpack_require__.nc;nonce&&styleElement.setAttribute("nonce",nonce)}},"../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleDomAPI.js":function(module){module.exports=function domAPI(options){if("undefined"==typeof document)return{update:function update(){},remove:function remove(){}};var styleElement=options.insertStyleElement(options);return{update:function update(obj){!function apply(styleElement,options,obj){var css="";obj.supports&&(css+="@supports (".concat(obj.supports,") {")),obj.media&&(css+="@media ".concat(obj.media," {"));var needLayer=void 0!==obj.layer;needLayer&&(css+="@layer".concat(obj.layer.length>0?" ".concat(obj.layer):""," {")),css+=obj.css,needLayer&&(css+="}"),obj.media&&(css+="}"),obj.supports&&(css+="}");var sourceMap=obj.sourceMap;sourceMap&&"undefined"!=typeof btoa&&(css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")),options.styleTagTransform(css,styleElement,options.options)}(styleElement,options,obj)},remove:function remove(){!function removeStyleElement(styleElement){if(null===styleElement.parentNode)return!1;styleElement.parentNode.removeChild(styleElement)}(styleElement)}}}},"../../node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleTagTransform.js":function(module){module.exports=function styleTagTransform(css,styleElement){if(styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}},"../../node_modules/rxjs/dist/esm5/internal/operators/map.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{T:function(){return map}});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function map(project,thisArg){return(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.N)((function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__._)(subscriber,(function(value){subscriber.next(project.call(thisArg,value,index++))})))}))}},"../../node_modules/uplot/dist/uPlot.esm.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:function(){return uPlot}});const UPLOT="uplot",ORI_HZ="u-hz",ORI_VT="u-vt",TITLE="u-title",WRAP="u-wrap",UNDER="u-under",OVER="u-over",AXIS="u-axis",OFF="u-off",SELECT="u-select",CURSOR_X="u-cursor-x",CURSOR_Y="u-cursor-y",CURSOR_PT="u-cursor-pt",LEGEND="u-legend",LEGEND_LIVE="u-live",LEGEND_INLINE="u-inline",LEGEND_SERIES="u-series",LEGEND_MARKER="u-marker",LEGEND_LABEL="u-label",LEGEND_VALUE="u-value",WIDTH="width",HEIGHT="height",TOP="top",BOTTOM="bottom",LEFT="left",RIGHT="right",transparent="#0000",mousemove="mousemove",mousedown="mousedown",mouseup="mouseup",mouseenter="mouseenter",mouseleave="mouseleave",dblclick="dblclick",dppxchange="dppxchange",LEGEND_DISP="--",domEnv="undefined"!=typeof window,doc=domEnv?document:null,win=domEnv?window:null,nav=domEnv?navigator:null;let pxRatio,query;function addClass(el,c){if(null!=c){let cl=el.classList;!cl.contains(c)&&cl.add(c)}}function remClass(el,c){let cl=el.classList;cl.contains(c)&&cl.remove(c)}function setStylePx(el,name,value){el.style[name]=value+"px"}function placeTag(tag,cls,targ,refEl){let el=doc.createElement(tag);return null!=cls&&addClass(el,cls),null!=targ&&targ.insertBefore(el,refEl),el}function placeDiv(cls,targ){return placeTag("div",cls,targ)}const xformCache=new WeakMap;function elTrans(el,xPos,yPos,xMax,yMax){let xform="translate("+xPos+"px,"+yPos+"px)";xform!=xformCache.get(el)&&(el.style.transform=xform,xformCache.set(el,xform),xPos<0||yPos<0||xPos>xMax||yPos>yMax?addClass(el,OFF):remClass(el,OFF))}const colorCache=new WeakMap;function elColor(el,background,borderColor){let newColor=background+borderColor;newColor!=colorCache.get(el)&&(colorCache.set(el,newColor),el.style.background=background,el.style.borderColor=borderColor)}const sizeCache=new WeakMap;function elSize(el,newWid,newHgt,centered){let newSize=newWid+""+newHgt;newSize!=sizeCache.get(el)&&(sizeCache.set(el,newSize),el.style.height=newHgt+"px",el.style.width=newWid+"px",el.style.marginLeft=centered?-newWid/2+"px":0,el.style.marginTop=centered?-newHgt/2+"px":0)}const evOpts={passive:!0},evOpts2={...evOpts,capture:!0};function on(ev,el,cb,capt){el.addEventListener(ev,cb,capt?evOpts2:evOpts)}function off(ev,el,cb,capt){el.removeEventListener(ev,cb,evOpts)}function closestIdx(num,arr,lo,hi){let mid;lo=lo||0;let bitwise=(hi=hi||arr.length-1)<=2147483647;for(;hi-lo>1;)mid=bitwise?lo+hi>>1:floor((lo+hi)/2),arr[mid]<num?lo=mid:hi=mid;return num-arr[lo]<=arr[hi]-num?lo:hi}function nonNullIdx(data,_i0,_i1,dir){for(let i=1==dir?_i0:_i1;i>=_i0&&i<=_i1;i+=dir)if(null!=data[i])return i;return-1}function rangeLog(min,max,base,fullMags){let minSign=sign(min),maxSign=sign(max);min==max&&(-1==minSign?(min*=base,max/=base):(min/=base,max*=base));let logFn=10==base?log10:log2,growMaxAbs=1==maxSign?ceil:floor,minExp=(1==minSign?floor:ceil)(logFn(abs(min))),maxExp=growMaxAbs(logFn(abs(max))),minIncr=pow(base,minExp),maxIncr=pow(base,maxExp);return 10==base&&(minExp<0&&(minIncr=roundDec(minIncr,-minExp)),maxExp<0&&(maxIncr=roundDec(maxIncr,-maxExp))),fullMags||2==base?(min=minIncr*minSign,max=maxIncr*maxSign):(min=incrRoundDn(min,minIncr),max=incrRoundUp(max,maxIncr)),[min,max]}function rangeAsinh(min,max,base,fullMags){let minMax=rangeLog(min,max,base,fullMags);return 0==min&&(minMax[0]=0),0==max&&(minMax[1]=0),minMax}domEnv&&function setPxRatio(){let _pxRatio=devicePixelRatio;pxRatio!=_pxRatio&&(pxRatio=_pxRatio,query&&off("change",query,setPxRatio),query=matchMedia(`(min-resolution: ${pxRatio-.001}dppx) and (max-resolution: ${pxRatio+.001}dppx)`),on("change",query,setPxRatio),win.dispatchEvent(new CustomEvent(dppxchange)))}();const rangePad=.1,autoRangePart={mode:3,pad:rangePad},_eqRangePart={pad:0,soft:null,mode:0},_eqRange={min:_eqRangePart,max:_eqRangePart};function rangeNum(_min,_max,mult,extra){return isObj(mult)?_rangeNum(_min,_max,mult):(_eqRangePart.pad=mult,_eqRangePart.soft=extra?0:null,_eqRangePart.mode=extra?3:0,_rangeNum(_min,_max,_eqRange))}function ifNull(lh,rh){return null==lh?rh:lh}function _rangeNum(_min,_max,cfg){let cmin=cfg.min,cmax=cfg.max,padMin=ifNull(cmin.pad,0),padMax=ifNull(cmax.pad,0),hardMin=ifNull(cmin.hard,-inf),hardMax=ifNull(cmax.hard,inf),softMin=ifNull(cmin.soft,inf),softMax=ifNull(cmax.soft,-inf),softMinMode=ifNull(cmin.mode,0),softMaxMode=ifNull(cmax.mode,0),delta=_max-_min,deltaMag=log10(delta),scalarMax=max(abs(_min),abs(_max)),scalarMag=log10(scalarMax),scalarMagDelta=abs(scalarMag-deltaMag);(delta<1e-24||scalarMagDelta>10)&&(delta=0,0!=_min&&0!=_max||(delta=1e-24,2==softMinMode&&softMin!=inf&&(padMin=0),2==softMaxMode&&softMax!=-inf&&(padMax=0)));let nonZeroDelta=delta||scalarMax||1e3,mag=log10(nonZeroDelta),base=pow(10,floor(mag)),_newMin=roundDec(incrRoundDn(_min-nonZeroDelta*(0==delta?0==_min?.1:1:padMin),base/10),24),_softMin=_min>=softMin&&(1==softMinMode||3==softMinMode&&_newMin<=softMin||2==softMinMode&&_newMin>=softMin)?softMin:inf,minLim=max(hardMin,_newMin<_softMin&&_min>=_softMin?_softMin:min(_softMin,_newMin)),_newMax=roundDec(incrRoundUp(_max+nonZeroDelta*(0==delta?0==_max?.1:1:padMax),base/10),24),_softMax=_max<=softMax&&(1==softMaxMode||3==softMaxMode&&_newMax>=softMax||2==softMaxMode&&_newMax<=softMax)?softMax:-inf,maxLim=min(hardMax,_newMax>_softMax&&_max<=_softMax?_softMax:max(_softMax,_newMax));return minLim==maxLim&&0==minLim&&(maxLim=100),[minLim,maxLim]}const numFormatter=new Intl.NumberFormat(domEnv?nav.language:"en-US"),fmtNum=val=>numFormatter.format(val),M=Math,PI=M.PI,abs=M.abs,floor=M.floor,round=M.round,ceil=M.ceil,min=M.min,max=M.max,pow=M.pow,sign=M.sign,log10=M.log10,log2=M.log2,sinh=(v,linthresh=1)=>M.sinh(v)*linthresh,asinh=(v,linthresh=1)=>M.asinh(v/linthresh),inf=1/0;function numIntDigits(x){return 1+(0|log10((x^x>>31)-(x>>31)))}function clamp(num,_min,_max){return min(max(num,_min),_max)}function fnOrSelf(v){return"function"==typeof v?v:()=>v}const retArg0=_0=>_0,retArg1=(_0,_1)=>_1,retNull=_=>null,retTrue=_=>!0,retEq=(a,b)=>a==b,regex6=/\.\d*?(?=9{6,}|0{6,})/gm,fixFloat=val=>{if(isInt(val)||fixedDec.has(val))return val;const str=`${val}`,match=str.match(regex6);if(null==match)return val;let len=match[0].length-1;if(-1!=str.indexOf("e-")){let[num,exp]=str.split("e");return+`${fixFloat(num)}e${exp}`}return roundDec(val,len)};function incrRound(num,incr){return fixFloat(roundDec(fixFloat(num/incr))*incr)}function incrRoundUp(num,incr){return fixFloat(ceil(fixFloat(num/incr))*incr)}function incrRoundDn(num,incr){return fixFloat(floor(fixFloat(num/incr))*incr)}function roundDec(val,dec=0){if(isInt(val))return val;let p=10**dec,n=val*p*(1+Number.EPSILON);return round(n)/p}const fixedDec=new Map;function guessDec(num){return((""+num).split(".")[1]||"").length}function genIncrs(base,minExp,maxExp,mults){let incrs=[],multDec=mults.map(guessDec);for(let exp=minExp;exp<maxExp;exp++){let expa=abs(exp),mag=roundDec(pow(base,exp),expa);for(let i=0;i<mults.length;i++){let _incr=10==base?+`${mults[i]}e${exp}`:mults[i]*mag,dec=(exp>=0?0:expa)+(exp>=multDec[i]?0:multDec[i]),incr=10==base?_incr:roundDec(_incr,dec);incrs.push(incr),fixedDec.set(incr,dec)}}return incrs}const EMPTY_OBJ={},EMPTY_ARR=[],nullNullTuple=[null,null],isArr=Array.isArray,isInt=Number.isInteger,isUndef=v=>void 0===v;function isStr(v){return"string"==typeof v}function isObj(v){let is=!1;if(null!=v){let c=v.constructor;is=null==c||c==Object}return is}function fastIsObj(v){return null!=v&&"object"==typeof v}const TypedArray=Object.getPrototypeOf(Uint8Array),__proto__="__proto__";function copy(o,_isObj=isObj){let out;if(isArr(o)){let val=o.find((v=>null!=v));if(isArr(val)||_isObj(val)){out=Array(o.length);for(let i=0;i<o.length;i++)out[i]=copy(o[i],_isObj)}else out=o.slice()}else if(o instanceof TypedArray)out=o.slice();else if(_isObj(o)){out={};for(let k in o)k!=__proto__&&(out[k]=copy(o[k],_isObj))}else out=o;return out}function assign(targ){let args=arguments;for(let i=1;i<args.length;i++){let src=args[i];for(let key in src)key!=__proto__&&(isObj(targ[key])?assign(targ[key],copy(src[key])):targ[key]=copy(src[key]))}return targ}function nullExpand(yVals,nullIdxs,alignedLen){for(let xi,i=0,lastNullIdx=-1;i<nullIdxs.length;i++){let nullIdx=nullIdxs[i];if(nullIdx>lastNullIdx){for(xi=nullIdx-1;xi>=0&&null==yVals[xi];)yVals[xi--]=null;for(xi=nullIdx+1;xi<alignedLen&&null==yVals[xi];)yVals[lastNullIdx=xi++]=null}}}const microTask="undefined"==typeof queueMicrotask?fn=>Promise.resolve().then(fn):queueMicrotask;const months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function slice3(str){return str.slice(0,3)}const days3=days.map(slice3),months3=months.map(slice3),engNames={MMMM:months,MMM:months3,WWWW:days,WWW:days3};function zeroPad2(int){return(int<10?"0":"")+int}const subs={YYYY:d=>d.getFullYear(),YY:d=>(d.getFullYear()+"").slice(2),MMMM:(d,names)=>names.MMMM[d.getMonth()],MMM:(d,names)=>names.MMM[d.getMonth()],MM:d=>zeroPad2(d.getMonth()+1),M:d=>d.getMonth()+1,DD:d=>zeroPad2(d.getDate()),D:d=>d.getDate(),WWWW:(d,names)=>names.WWWW[d.getDay()],WWW:(d,names)=>names.WWW[d.getDay()],HH:d=>zeroPad2(d.getHours()),H:d=>d.getHours(),h:d=>{let h=d.getHours();return 0==h?12:h>12?h-12:h},AA:d=>d.getHours()>=12?"PM":"AM",aa:d=>d.getHours()>=12?"pm":"am",a:d=>d.getHours()>=12?"p":"a",mm:d=>zeroPad2(d.getMinutes()),m:d=>d.getMinutes(),ss:d=>zeroPad2(d.getSeconds()),s:d=>d.getSeconds(),fff:d=>function zeroPad3(int){return(int<10?"00":int<100?"0":"")+int}(d.getMilliseconds())};function fmtDate(tpl,names){names=names||engNames;let m,parts=[],R=/\{([a-z]+)\}|[^{]+/gi;for(;m=R.exec(tpl);)parts.push("{"==m[0][0]?subs[m[1]]:m[0]);return d=>{let out="";for(let i=0;i<parts.length;i++)out+="string"==typeof parts[i]?parts[i]:parts[i](d,names);return out}}const localTz=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const onlyWhole=v=>v%1==0,allMults=[1,2,2.5,5],decIncrs=genIncrs(10,-32,0,allMults),oneIncrs=genIncrs(10,0,32,allMults),wholeIncrs=oneIncrs.filter(onlyWhole),numIncrs=decIncrs.concat(oneIncrs),md="{M}/{D}",NLmd="\n"+md,NLmdyy=NLmd+"/{YY}",hmmaa="{h}:{mm}{aa}",NLhmmaa="\n"+hmmaa,_=null;function genTimeStuffs(ms){let s=1e3*ms,m=60*s,h=60*m,d=24*h,mo=30*d,y=365*d;return[(1==ms?genIncrs(10,0,3,allMults).filter(onlyWhole):genIncrs(10,-3,0,allMults)).concat([s,5*s,10*s,15*s,30*s,m,5*m,10*m,15*m,30*m,h,2*h,3*h,4*h,6*h,8*h,12*h,d,2*d,3*d,4*d,5*d,6*d,7*d,8*d,9*d,10*d,15*d,mo,2*mo,3*mo,4*mo,6*mo,y,2*y,5*y,10*y,25*y,50*y,100*y]),[[y,"{YYYY}",_,_,_,_,_,_,1],[28*d,"{MMM}","\n{YYYY}",_,_,_,_,_,1],[d,md,"\n{YYYY}",_,_,_,_,_,1],[h,"{h}{aa}",NLmdyy,_,NLmd,_,_,_,1],[m,hmmaa,NLmdyy,_,NLmd,_,_,_,1],[s,":{ss}",NLmdyy+" "+hmmaa,_,NLmd+" "+hmmaa,_,NLhmmaa,_,1],[ms,":{ss}.{fff}",NLmdyy+" "+hmmaa,_,NLmd+" "+hmmaa,_,NLhmmaa,_,1]],function timeAxisSplits(tzDate){return(self,axisIdx,scaleMin,scaleMax,foundIncr,foundSpace)=>{let splits=[],isYr=foundIncr>=y,isMo=foundIncr>=mo&&foundIncr<y,minDate=tzDate(scaleMin),minDateTs=roundDec(minDate*ms,3),minMin=mkDate(minDate.getFullYear(),isYr?0:minDate.getMonth(),isMo||isYr?1:minDate.getDate()),minMinTs=roundDec(minMin*ms,3);if(isMo||isYr){let moIncr=isMo?foundIncr/mo:0,yrIncr=isYr?foundIncr/y:0,split=minDateTs==minMinTs?minDateTs:roundDec(mkDate(minMin.getFullYear()+yrIncr,minMin.getMonth()+moIncr,1)*ms,3),splitDate=new Date(round(split/ms)),baseYear=splitDate.getFullYear(),baseMonth=splitDate.getMonth();for(let i=0;split<=scaleMax;i++){let next=mkDate(baseYear+yrIncr*i,baseMonth+moIncr*i,1),offs=next-tzDate(roundDec(next*ms,3));split=roundDec((+next+offs)*ms,3),split<=scaleMax&&splits.push(split)}}else{let incr0=foundIncr>=d?d:foundIncr,split=minMinTs+(floor(scaleMin)-floor(minDateTs))+incrRoundUp(minDateTs-minMinTs,incr0);splits.push(split);let date0=tzDate(split),prevHour=date0.getHours()+date0.getMinutes()/m+date0.getSeconds()/h,incrHours=foundIncr/h,pctSpace=foundSpace/self.axes[axisIdx]._space;for(;split=roundDec(split+foundIncr,1==ms?0:3),!(split>scaleMax);)if(incrHours>1){let expectedHour=floor(roundDec(prevHour+incrHours,6))%24,dstShift=tzDate(split).getHours()-expectedHour;dstShift>1&&(dstShift=-1),split-=dstShift*h,prevHour=(prevHour+incrHours)%24,roundDec((split-splits[splits.length-1])/foundIncr,3)*pctSpace>=.7&&splits.push(split)}else splits.push(split)}return splits}}]}const[timeIncrsMs,_timeAxisStampsMs,timeAxisSplitsMs]=genTimeStuffs(1),[timeIncrsS,_timeAxisStampsS,timeAxisSplitsS]=genTimeStuffs(.001);function timeAxisStamps(stampCfg,fmtDate){return stampCfg.map((s=>s.map(((v,i)=>0==i||8==i||null==v?v:fmtDate(1==i||0==s[8]?v:s[1]+v)))))}function timeAxisVals(tzDate,stamps){return(self,splits,axisIdx,foundSpace,foundIncr)=>{let prevYear,prevMnth,prevDate,prevHour,prevMins,prevSecs,s=stamps.find((s=>foundIncr>=s[0]))||stamps[stamps.length-1];return splits.map((split=>{let date=tzDate(split),newYear=date.getFullYear(),newMnth=date.getMonth(),newDate=date.getDate(),newHour=date.getHours(),newMins=date.getMinutes(),newSecs=date.getSeconds(),stamp=newYear!=prevYear&&s[2]||newMnth!=prevMnth&&s[3]||newDate!=prevDate&&s[4]||newHour!=prevHour&&s[5]||newMins!=prevMins&&s[6]||newSecs!=prevSecs&&s[7]||s[1];return prevYear=newYear,prevMnth=newMnth,prevDate=newDate,prevHour=newHour,prevMins=newMins,prevSecs=newSecs,stamp(date)}))}}function mkDate(y,m,d){return new Date(y,m,d)}function timeSeriesStamp(stampCfg,fmtDate){return fmtDate(stampCfg)}genIncrs(2,-53,53,[1]);const _timeSeriesStamp="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function timeSeriesVal(tzDate,stamp){return(self,val,seriesIdx,dataIdx)=>null==dataIdx?LEGEND_DISP:stamp(tzDate(val))}const legendOpts={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function legendStroke(self,seriesIdx){let s=self.series[seriesIdx];return s.width?s.stroke(self,seriesIdx):s.points.width?s.points.stroke(self,seriesIdx):null},fill:function legendFill(self,seriesIdx){return self.series[seriesIdx].fill(self,seriesIdx)},dash:"solid"},idx:null,idxs:null,values:[]};const moveTuple=[0,0];function filtBtn0(self,targ,handle,onlyTarg=!0){return e=>{0==e.button&&(!onlyTarg||e.target==targ)&&handle(e)}}function filtTarg(self,targ,handle,onlyTarg=!0){return e=>{(!onlyTarg||e.target==targ)&&handle(e)}}const cursorOpts={show:!0,x:!0,y:!0,lock:!1,move:function cursorMove(self,mouseLeft1,mouseTop1){return moveTuple[0]=mouseLeft1,moveTuple[1]=mouseTop1,moveTuple},points:{one:!1,show:function cursorPointShow(self,si){let o=self.cursor.points,pt=placeDiv(),size=o.size(self,si);setStylePx(pt,WIDTH,size),setStylePx(pt,HEIGHT,size);let mar=size/-2;setStylePx(pt,"marginLeft",mar),setStylePx(pt,"marginTop",mar);let width=o.width(self,si,size);return width&&setStylePx(pt,"borderWidth",width),pt},size:function cursorPointSize(self,si){return self.series[si].points.size},width:0,stroke:function cursorPointStroke(self,si){let sp=self.series[si].points;return sp._stroke||sp._fill},fill:function cursorPointFill(self,si){let sp=self.series[si].points;return sp._fill||sp._stroke}},bind:{mousedown:filtBtn0,mouseup:filtBtn0,click:filtBtn0,dblclick:filtBtn0,mousemove:filtTarg,mouseleave:filtTarg,mouseenter:filtTarg},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(self,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(self,seriesIdx,dataIdx,valPos,curPos)=>valPos-curPos,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},axisLines={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},grid=assign({},axisLines,{filter:retArg1}),ticks=assign({},grid,{size:10}),border=assign({},axisLines,{show:!1}),font='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',labelFont="bold "+font,xAxisOpts={show:!0,scale:"x",stroke:"#000",space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:labelFont,side:2,grid:grid,ticks:ticks,border:border,font:font,lineGap:1.5,rotate:0},numSeriesLabel="Value",timeSeriesLabel="Time",xSeriesOpts={show:!0,scale:"x",auto:!1,sorted:1,min:inf,max:-inf,idxs:[]};function numAxisVals(self,splits,axisIdx,foundSpace,foundIncr){return splits.map((v=>null==v?"":fmtNum(v)))}function numAxisSplits(self,axisIdx,scaleMin,scaleMax,foundIncr,foundSpace,forceMin){let splits=[],numDec=fixedDec.get(foundIncr)||0;for(let val=scaleMin=forceMin?scaleMin:roundDec(incrRoundUp(scaleMin,foundIncr),numDec);val<=scaleMax;val=roundDec(val+foundIncr,numDec))splits.push(Object.is(val,-0)?0:val);return splits}function logAxisSplits(self,axisIdx,scaleMin,scaleMax,foundIncr,foundSpace,forceMin){const splits=[],logBase=self.scales[self.axes[axisIdx].scale].log,exp=floor((10==logBase?log10:log2)(scaleMin));foundIncr=pow(logBase,exp),10==logBase&&(foundIncr=numIncrs[closestIdx(foundIncr,numIncrs)]);let split=scaleMin,nextMagIncr=foundIncr*logBase;10==logBase&&(nextMagIncr=numIncrs[closestIdx(nextMagIncr,numIncrs)]);do{splits.push(split),split+=foundIncr,10!=logBase||fixedDec.has(split)||(split=roundDec(split,fixedDec.get(foundIncr))),split>=nextMagIncr&&(nextMagIncr=(foundIncr=split)*logBase,10==logBase&&(nextMagIncr=numIncrs[closestIdx(nextMagIncr,numIncrs)]))}while(split<=scaleMax);return splits}function asinhAxisSplits(self,axisIdx,scaleMin,scaleMax,foundIncr,foundSpace,forceMin){let linthresh=self.scales[self.axes[axisIdx].scale].asinh,posSplits=scaleMax>linthresh?logAxisSplits(self,axisIdx,max(linthresh,scaleMin),scaleMax,foundIncr):[linthresh],zero=scaleMax>=0&&scaleMin<=0?[0]:[];return(scaleMin<-linthresh?logAxisSplits(self,axisIdx,max(linthresh,-scaleMax),-scaleMin,foundIncr):[linthresh]).reverse().map((v=>-v)).concat(zero,posSplits)}const RE_ALL=/./,RE_12357=/[12357]/,RE_125=/[125]/,RE_1=/1/,_filt=(splits,distr,re,keepMod)=>splits.map(((v,i)=>4==distr&&0==v||i%keepMod==0&&re.test(v.toExponential()[v<0?1:0])?v:null));function log10AxisValsFilt(self,splits,axisIdx,foundSpace,foundIncr){let axis=self.axes[axisIdx],scaleKey=axis.scale,sc=self.scales[scaleKey],valToPos=self.valToPos,minSpace=axis._space,_10=valToPos(10,scaleKey),re=valToPos(9,scaleKey)-_10>=minSpace?RE_ALL:valToPos(7,scaleKey)-_10>=minSpace?RE_12357:valToPos(5,scaleKey)-_10>=minSpace?RE_125:RE_1;if(re==RE_1){let magSpace=abs(valToPos(1,scaleKey)-_10);if(magSpace<minSpace)return _filt(splits.slice().reverse(),sc.distr,re,ceil(minSpace/magSpace)).reverse()}return _filt(splits,sc.distr,re,1)}function log2AxisValsFilt(self,splits,axisIdx,foundSpace,foundIncr){let axis=self.axes[axisIdx],scaleKey=axis.scale,minSpace=axis._space,valToPos=self.valToPos,magSpace=abs(valToPos(1,scaleKey)-valToPos(2,scaleKey));return magSpace<minSpace?_filt(splits.slice().reverse(),3,RE_ALL,ceil(minSpace/magSpace)).reverse():splits}function numSeriesVal(self,val,seriesIdx,dataIdx){return null==dataIdx?LEGEND_DISP:null==val?"":fmtNum(val)}const yAxisOpts={show:!0,scale:"y",stroke:"#000",space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:labelFont,side:3,grid:grid,ticks:ticks,border:border,font:font,lineGap:1.5,rotate:0};const facet={scale:null,auto:!0,sorted:0,min:inf,max:-inf},gaps=(self,seriesIdx,idx0,idx1,nullGaps)=>nullGaps,xySeriesOpts={show:!0,auto:!0,sorted:0,gaps:gaps,alpha:1,facets:[assign({},facet,{scale:"x"}),assign({},facet,{scale:"y"})]},ySeriesOpts={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:gaps,alpha:1,points:{show:function seriesPointsShow(self,si){let{scale:scale,idxs:idxs}=self.series[0],xData=self._data[0],p0=self.valToPos(xData[idxs[0]],scale,!0),p1=self.valToPos(xData[idxs[1]],scale,!0),maxPts=abs(p1-p0)/(self.series[si].points.space*pxRatio);return idxs[1]-idxs[0]<=maxPts},filter:null},values:null,min:inf,max:-inf,idxs:[],path:null,clip:null};function clampScale(self,val,scaleMin,scaleMax,scaleKey){return scaleMin/10}const xScaleOpts={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},yScaleOpts=assign({},xScaleOpts,{time:!1,ori:1}),syncs={};function _sync(key,opts){let s=syncs[key];return s||(s={key:key,plots:[],sub(plot){s.plots.push(plot)},unsub(plot){s.plots=s.plots.filter((c=>c!=plot))},pub(type,self,x,y,w,h,i){for(let j=0;j<s.plots.length;j++)s.plots[j]!=self&&s.plots[j].pub(type,self,x,y,w,h,i)}},null!=key&&(syncs[key]=s)),s}const BAND_CLIP_FILL=1,BAND_CLIP_STROKE=2;function orient(u,seriesIdx,cb){const mode=u.mode,series=u.series[seriesIdx],data=2==mode?u._data[seriesIdx]:u._data,scales=u.scales,bbox=u.bbox;let dx=data[0],dy=2==mode?data[1]:data[seriesIdx],sx=2==mode?scales[series.facets[0].scale]:scales[u.series[0].scale],sy=2==mode?scales[series.facets[1].scale]:scales[series.scale],l=bbox.left,t=bbox.top,w=bbox.width,h=bbox.height,H=u.valToPosH,V=u.valToPosV;return 0==sx.ori?cb(series,dx,dy,sx,sy,H,V,l,t,w,h,moveToH,lineToH,rectH,arcH,bezierCurveToH):cb(series,dx,dy,sx,sy,V,H,t,l,h,w,moveToV,lineToV,rectV,arcV,bezierCurveToV)}function bandFillClipDirs(self,seriesIdx){let fillDir=0,clipDirs=0,bands=ifNull(self.bands,EMPTY_ARR);for(let i=0;i<bands.length;i++){let b=bands[i];b.series[0]==seriesIdx?fillDir=b.dir:b.series[1]==seriesIdx&&(1==b.dir?clipDirs|=1:clipDirs|=2)}return[fillDir,1==clipDirs?-1:2==clipDirs?1:3==clipDirs?2:0]}function seriesFillTo(self,seriesIdx,dataMin,dataMax,bandFillDir){let mode=self.mode,series=self.series[seriesIdx],scaleKey=2==mode?series.facets[1].scale:series.scale,scale=self.scales[scaleKey];return-1==bandFillDir?scale.min:1==bandFillDir?scale.max:3==scale.distr?1==scale.dir?scale.min:scale.max:0}function clipBandLine(self,seriesIdx,idx0,idx1,strokePath,clipDir){return orient(self,seriesIdx,((series,dataX,dataY,scaleX,scaleY,valToPosX,valToPosY,xOff,yOff,xDim,yDim)=>{let pxRound=series.pxRound;const dir=scaleX.dir*(0==scaleX.ori?1:-1),lineTo=0==scaleX.ori?lineToH:lineToV;let frIdx,toIdx;1==dir?(frIdx=idx0,toIdx=idx1):(frIdx=idx1,toIdx=idx0);let x0=pxRound(valToPosX(dataX[frIdx],scaleX,xDim,xOff)),y0=pxRound(valToPosY(dataY[frIdx],scaleY,yDim,yOff)),x1=pxRound(valToPosX(dataX[toIdx],scaleX,xDim,xOff)),yLimit=pxRound(valToPosY(1==clipDir?scaleY.max:scaleY.min,scaleY,yDim,yOff)),clip=new Path2D(strokePath);return lineTo(clip,x1,yLimit),lineTo(clip,x0,yLimit),lineTo(clip,x0,y0),clip}))}function clipGaps(gaps,ori,plotLft,plotTop,plotWid,plotHgt){let clip=null;if(gaps.length>0){clip=new Path2D;const rect=0==ori?rectH:rectV;let prevGapEnd=plotLft;for(let i=0;i<gaps.length;i++){let g=gaps[i];if(g[1]>g[0]){let w=g[0]-prevGapEnd;w>0&&rect(clip,prevGapEnd,plotTop,w,plotTop+plotHgt),prevGapEnd=g[1]}}let w=plotLft+plotWid-prevGapEnd,maxStrokeWidth=10;w>0&&rect(clip,prevGapEnd,plotTop-maxStrokeWidth/2,w,plotTop+plotHgt+maxStrokeWidth)}return clip}function findGaps(xs,ys,idx0,idx1,dir,pixelForX,align){let gaps=[],len=xs.length;for(let i=1==dir?idx0:idx1;i>=idx0&&i<=idx1;i+=dir){if(null===ys[i]){let fr=i,to=i;if(1==dir)for(;++i<=idx1&&null===ys[i];)to=i;else for(;--i>=idx0&&null===ys[i];)to=i;let frPx=pixelForX(xs[fr]),toPx=to==fr?frPx:pixelForX(xs[to]),fri2=fr-dir;frPx=align<=0&&fri2>=0&&fri2<len?pixelForX(xs[fri2]):frPx;let toi2=to+dir;toPx=align>=0&&toi2>=0&&toi2<len?pixelForX(xs[toi2]):toPx,toPx>=frPx&&gaps.push([frPx,toPx])}}return gaps}function pxRoundGen(pxAlign){return 0==pxAlign?retArg0:1==pxAlign?round:v=>incrRound(v,pxAlign)}function rect(ori){let moveTo=0==ori?moveToH:moveToV,arcTo=0==ori?(p,x1,y1,x2,y2,r)=>{p.arcTo(x1,y1,x2,y2,r)}:(p,y1,x1,y2,x2,r)=>{p.arcTo(x1,y1,x2,y2,r)},rect=0==ori?(p,x,y,w,h)=>{p.rect(x,y,w,h)}:(p,y,x,h,w)=>{p.rect(x,y,w,h)};return(p,x,y,w,h,endRad=0,baseRad=0)=>{0==endRad&&0==baseRad?rect(p,x,y,w,h):(endRad=min(endRad,w/2,h/2),baseRad=min(baseRad,w/2,h/2),moveTo(p,x+endRad,y),arcTo(p,x+w,y,x+w,y+h,endRad),arcTo(p,x+w,y+h,x,y+h,baseRad),arcTo(p,x,y+h,x,y,baseRad),arcTo(p,x,y,x+w,y,endRad),p.closePath())}}const moveToH=(p,x,y)=>{p.moveTo(x,y)},moveToV=(p,y,x)=>{p.moveTo(x,y)},lineToH=(p,x,y)=>{p.lineTo(x,y)},lineToV=(p,y,x)=>{p.lineTo(x,y)},rectH=rect(0),rectV=rect(1),arcH=(p,x,y,r,startAngle,endAngle)=>{p.arc(x,y,r,startAngle,endAngle)},arcV=(p,y,x,r,startAngle,endAngle)=>{p.arc(x,y,r,startAngle,endAngle)},bezierCurveToH=(p,bp1x,bp1y,bp2x,bp2y,p2x,p2y)=>{p.bezierCurveTo(bp1x,bp1y,bp2x,bp2y,p2x,p2y)},bezierCurveToV=(p,bp1y,bp1x,bp2y,bp2x,p2y,p2x)=>{p.bezierCurveTo(bp1x,bp1y,bp2x,bp2y,p2x,p2y)};function points(opts){return(u,seriesIdx,idx0,idx1,filtIdxs)=>orient(u,seriesIdx,((series,dataX,dataY,scaleX,scaleY,valToPosX,valToPosY,xOff,yOff,xDim,yDim)=>{let moveTo,arc,{pxRound:pxRound,points:points}=series;0==scaleX.ori?(moveTo=moveToH,arc=arcH):(moveTo=moveToV,arc=arcV);const width=roundDec(points.width*pxRatio,3);let rad=(points.size-points.width)/2*pxRatio,dia=roundDec(2*rad,3),fill=new Path2D,clip=new Path2D,{left:lft,top:top,width:wid,height:hgt}=u.bbox;rectH(clip,lft-dia,top-dia,wid+2*dia,hgt+2*dia);const drawPoint=pi=>{if(null!=dataY[pi]){let x=pxRound(valToPosX(dataX[pi],scaleX,xDim,xOff)),y=pxRound(valToPosY(dataY[pi],scaleY,yDim,yOff));moveTo(fill,x+rad,y),arc(fill,x,y,rad,0,2*PI)}};if(filtIdxs)filtIdxs.forEach(drawPoint);else for(let pi=idx0;pi<=idx1;pi++)drawPoint(pi);return{stroke:width>0?fill:null,fill:fill,clip:clip,flags:BAND_CLIP_FILL|BAND_CLIP_STROKE}}))}function _drawAcc(lineTo){return(stroke,accX,minY,maxY,inY,outY)=>{minY!=maxY&&(inY!=minY&&outY!=minY&&lineTo(stroke,accX,minY),inY!=maxY&&outY!=maxY&&lineTo(stroke,accX,maxY),lineTo(stroke,accX,outY))}}const drawAccH=_drawAcc(lineToH),drawAccV=_drawAcc(lineToV);function linear(opts){const alignGaps=ifNull(opts?.alignGaps,0);return(u,seriesIdx,idx0,idx1)=>orient(u,seriesIdx,((series,dataX,dataY,scaleX,scaleY,valToPosX,valToPosY,xOff,yOff,xDim,yDim)=>{let lineTo,drawAcc,pxRound=series.pxRound,pixelForX=val=>pxRound(valToPosX(val,scaleX,xDim,xOff)),pixelForY=val=>pxRound(valToPosY(val,scaleY,yDim,yOff));0==scaleX.ori?(lineTo=lineToH,drawAcc=drawAccH):(lineTo=lineToV,drawAcc=drawAccV);const dir=scaleX.dir*(0==scaleX.ori?1:-1),_paths={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:BAND_CLIP_FILL},stroke=_paths.stroke;let inY,outY,drawnAtX,minY=inf,maxY=-inf,accX=pixelForX(dataX[1==dir?idx0:idx1]),lftIdx=nonNullIdx(dataY,idx0,idx1,1*dir),rgtIdx=nonNullIdx(dataY,idx0,idx1,-1*dir),lftX=pixelForX(dataX[lftIdx]),rgtX=pixelForX(dataX[rgtIdx]),hasGap=!1;for(let i=1==dir?idx0:idx1;i>=idx0&&i<=idx1;i+=dir){let x=pixelForX(dataX[i]),yVal=dataY[i];x==accX?null!=yVal?(outY=pixelForY(yVal),minY==inf&&(lineTo(stroke,x,outY),inY=outY),minY=min(outY,minY),maxY=max(outY,maxY)):null===yVal&&(hasGap=!0):(minY!=inf&&(drawAcc(stroke,accX,minY,maxY,inY,outY),drawnAtX=accX),null!=yVal?(outY=pixelForY(yVal),lineTo(stroke,x,outY),minY=maxY=inY=outY):(minY=inf,maxY=-inf,null===yVal&&(hasGap=!0)),accX=x)}minY!=inf&&minY!=maxY&&drawnAtX!=accX&&drawAcc(stroke,accX,minY,maxY,inY,outY);let[bandFillDir,bandClipDir]=bandFillClipDirs(u,seriesIdx);if(null!=series.fill||0!=bandFillDir){let fill=_paths.fill=new Path2D(stroke),fillToY=pixelForY(series.fillTo(u,seriesIdx,series.min,series.max,bandFillDir));lineTo(fill,rgtX,fillToY),lineTo(fill,lftX,fillToY)}if(!series.spanGaps){let gaps=[];hasGap&&gaps.push(...findGaps(dataX,dataY,idx0,idx1,dir,pixelForX,alignGaps)),_paths.gaps=gaps=series.gaps(u,seriesIdx,idx0,idx1,gaps),_paths.clip=clipGaps(gaps,scaleX.ori,xOff,yOff,xDim,yDim)}return 0!=bandClipDir&&(_paths.band=2==bandClipDir?[clipBandLine(u,seriesIdx,idx0,idx1,stroke,-1),clipBandLine(u,seriesIdx,idx0,idx1,stroke,1)]:clipBandLine(u,seriesIdx,idx0,idx1,stroke,bandClipDir)),_paths}))}function findColWidth(dataX,dataY,valToPosX,scaleX,xDim,xOff,colWid=inf){if(dataX.length>1){let prevIdx=null;for(let i=0,minDelta=1/0;i<dataX.length;i++)if(void 0!==dataY[i]){if(null!=prevIdx){let delta=abs(dataX[i]-dataX[prevIdx]);delta<minDelta&&(minDelta=delta,colWid=abs(valToPosX(dataX[i],scaleX,xDim,xOff)-valToPosX(dataX[prevIdx],scaleX,xDim,xOff)))}prevIdx=i}}return colWid}function _monotoneCubic(xs,ys,moveTo,lineTo,bezierCurveTo,pxRound){const n=xs.length;if(n<2)return null;const path=new Path2D;if(moveTo(path,xs[0],ys[0]),2==n)lineTo(path,xs[1],ys[1]);else{let ms=Array(n),ds=Array(n-1),dys=Array(n-1),dxs=Array(n-1);for(let i=0;i<n-1;i++)dys[i]=ys[i+1]-ys[i],dxs[i]=xs[i+1]-xs[i],ds[i]=dys[i]/dxs[i];ms[0]=ds[0];for(let i=1;i<n-1;i++)0===ds[i]||0===ds[i-1]||ds[i-1]>0!=ds[i]>0?ms[i]=0:(ms[i]=3*(dxs[i-1]+dxs[i])/((2*dxs[i]+dxs[i-1])/ds[i-1]+(dxs[i]+2*dxs[i-1])/ds[i]),isFinite(ms[i])||(ms[i]=0));ms[n-1]=ds[n-2];for(let i=0;i<n-1;i++)bezierCurveTo(path,xs[i]+dxs[i]/3,ys[i]+ms[i]*dxs[i]/3,xs[i+1]-dxs[i]/3,ys[i+1]-ms[i+1]*dxs[i]/3,xs[i+1],ys[i+1])}return path}const cursorPlots=new Set;function invalidateRects(){for(let u of cursorPlots)u.syncRect(!0)}domEnv&&(on("resize",win,invalidateRects),on("scroll",win,invalidateRects,!0),on(dppxchange,win,(()=>{uPlot.pxRatio=pxRatio})));const linearPath=linear(),pointsPath=points();function setDefaults(d,xo,yo,initY){return(initY?[d[0],d[1]].concat(d.slice(2)):[d[0]].concat(d.slice(1))).map(((o,i)=>setDefault(o,i,xo,yo)))}function setDefault(o,i,xo,yo){return assign({},0==i?xo:yo,o)}function snapNumX(self,dataMin,dataMax){return null==dataMin?nullNullTuple:[dataMin,dataMax]}const snapTimeX=snapNumX;function snapNumY(self,dataMin,dataMax){return null==dataMin?nullNullTuple:rangeNum(dataMin,dataMax,rangePad,!0)}function snapLogY(self,dataMin,dataMax,scale){return null==dataMin?nullNullTuple:rangeLog(dataMin,dataMax,self.scales[scale].log,!1)}const snapLogX=snapLogY;function snapAsinhY(self,dataMin,dataMax,scale){return null==dataMin?nullNullTuple:rangeAsinh(dataMin,dataMax,self.scales[scale].log,!1)}const snapAsinhX=snapAsinhY;function findIncr(minVal,maxVal,incrs,dim,minSpace){let intDigits=max(numIntDigits(minVal),numIntDigits(maxVal)),delta=maxVal-minVal,incrIdx=closestIdx(minSpace/dim*delta,incrs);do{let foundIncr=incrs[incrIdx],foundSpace=dim*foundIncr/delta;if(foundSpace>=minSpace&&intDigits+(foundIncr<5?fixedDec.get(foundIncr):0)<=17)return[foundIncr,foundSpace]}while(++incrIdx<incrs.length);return[0,0]}function pxRatioFont(font){let fontSize,fontSizeCss;return[font=font.replace(/(\d+)px/,((m,p1)=>(fontSize=round((fontSizeCss=+p1)*pxRatio))+"px")),fontSize,fontSizeCss]}function syncFontSize(axis){axis.show&&[axis.font,axis.labelFont].forEach((f=>{let size=roundDec(f[2]*pxRatio,1);f[0]=f[0].replace(/[0-9.]+px/,size+"px"),f[1]=size}))}function uPlot(opts,data,then){const self={mode:ifNull(opts.mode,1)},mode=self.mode;function getValPct(val,scale){return((3==scale.distr?log10(val>0?val:scale.clamp(self,val,scale.min,scale.max,scale.key)):4==scale.distr?asinh(val,scale.asinh):100==scale.distr?scale.fwd(val):val)-scale._min)/(scale._max-scale._min)}function getHPos(val,scale,dim,off){let pct=getValPct(val,scale);return off+dim*(-1==scale.dir?1-pct:pct)}function getVPos(val,scale,dim,off){let pct=getValPct(val,scale);return off+dim*(-1==scale.dir?pct:1-pct)}function getPos(val,scale,dim,off){return 0==scale.ori?getHPos(val,scale,dim,off):getVPos(val,scale,dim,off)}self.valToPosH=getHPos,self.valToPosV=getVPos;let ready=!1;self.status=0;const root=self.root=placeDiv(UPLOT);if(null!=opts.id&&(root.id=opts.id),addClass(root,opts.class),opts.title){placeDiv(TITLE,root).textContent=opts.title}const can=placeTag("canvas"),ctx=self.ctx=can.getContext("2d"),wrap=placeDiv(WRAP,root);on("click",wrap,(e=>{if(e.target===over){(mouseLeft1!=mouseLeft0||mouseTop1!=mouseTop0)&&drag.click(self,e)}}),!0);const under=self.under=placeDiv(UNDER,wrap);wrap.appendChild(can);const over=self.over=placeDiv(OVER,wrap),pxAlign=+ifNull((opts=copy(opts)).pxAlign,1),pxRound=pxRoundGen(pxAlign);(opts.plugins||[]).forEach((p=>{p.opts&&(opts=p.opts(self,opts)||opts)}));const ms=opts.ms||.001,series=self.series=1==mode?setDefaults(opts.series||[],xSeriesOpts,ySeriesOpts,!1):function setDefaults2(d,xyo){return d.map(((o,i)=>0==i?{}:assign({},xyo,o)))}(opts.series||[null],xySeriesOpts),axes=self.axes=setDefaults(opts.axes||[],xAxisOpts,yAxisOpts,!0),scales=self.scales={},bands=self.bands=opts.bands||[];bands.forEach((b=>{b.fill=fnOrSelf(b.fill||null),b.dir=ifNull(b.dir,-1)}));const xScaleKey=2==mode?series[1].facets[0].scale:series[0].scale,drawOrderMap={axes:function drawAxesGrid(){for(let i=0;i<axes.length;i++){let axis=axes[i];if(!axis.show||!axis._show)continue;let x,y,side=axis.side,ori=side%2,fillStyle=axis.stroke(self,i),shiftDir=0==side||3==side?-1:1;if(axis.label){let shiftAmt=axis.labelGap*shiftDir,baseLpos=round((axis._lpos+shiftAmt)*pxRatio);setFontStyle(axis.labelFont[0],fillStyle,"center",2==side?TOP:BOTTOM),ctx.save(),1==ori?(x=y=0,ctx.translate(baseLpos,round(plotTop+plotHgt/2)),ctx.rotate((3==side?-PI:PI)/2)):(x=round(plotLft+plotWid/2),y=baseLpos),ctx.fillText(axis.label,x,y),ctx.restore()}let[_incr,_space]=axis._found;if(0==_space)continue;let scale=scales[axis.scale],plotDim=0==ori?plotWid:plotHgt,plotOff=0==ori?plotLft:plotTop,axisGap=round(axis.gap*pxRatio),_splits=axis._splits,splits=2==scale.distr?_splits.map((i=>data0[i])):_splits,incr=2==scale.distr?data0[_splits[1]]-data0[_splits[0]]:_incr,ticks=axis.ticks,border=axis.border,tickSize=ticks.show?round(ticks.size*pxRatio):0,angle=axis._rotate*-PI/180,basePos=pxRound(axis._pos*pxRatio),finalPos=basePos+(tickSize+axisGap)*shiftDir;y=0==ori?finalPos:0,x=1==ori?finalPos:0,setFontStyle(axis.font[0],fillStyle,1==axis.align?LEFT:2==axis.align?RIGHT:angle>0?LEFT:angle<0?RIGHT:0==ori?"center":3==side?RIGHT:LEFT,angle||1==ori?"middle":2==side?TOP:BOTTOM);let lineHeight=axis.font[1]*axis.lineGap,canOffs=_splits.map((val=>pxRound(getPos(val,scale,plotDim,plotOff)))),_values=axis._values;for(let i=0;i<_values.length;i++){let val=_values[i];if(null!=val){0==ori?x=canOffs[i]:y=canOffs[i],val=""+val;let _parts=-1==val.indexOf("\n")?[val]:val.split(/\n/gm);for(let j=0;j<_parts.length;j++){let text=_parts[j];angle?(ctx.save(),ctx.translate(x,y+j*lineHeight),ctx.rotate(angle),ctx.fillText(text,0,0),ctx.restore()):ctx.fillText(text,x,y+j*lineHeight)}}}ticks.show&&drawOrthoLines(canOffs,ticks.filter(self,splits,i,_space,incr),ori,side,basePos,tickSize,roundDec(ticks.width*pxRatio,3),ticks.stroke(self,i),ticks.dash,ticks.cap);let grid=axis.grid;grid.show&&drawOrthoLines(canOffs,grid.filter(self,splits,i,_space,incr),ori,0==ori?2:1,0==ori?plotTop:plotLft,0==ori?plotHgt:plotWid,roundDec(grid.width*pxRatio,3),grid.stroke(self,i),grid.dash,grid.cap),border.show&&drawOrthoLines([basePos],[1],0==ori?1:0,0==ori?1:2,1==ori?plotTop:plotLft,1==ori?plotHgt:plotWid,roundDec(border.width*pxRatio,3),border.stroke(self,i),border.dash,border.cap)}fire("drawAxes")},series:function drawSeries(){dataLen>0&&(series.forEach(((s,i)=>{if(i>0&&s.show&&(cacheStrokeFill(i,!1),cacheStrokeFill(i,!0),null==s._paths)){ctxAlpha!=s.alpha&&(ctx.globalAlpha=ctxAlpha=s.alpha);let _idxs=2==mode?[0,data[i][0].length-1]:function getOuterIdxs(ydata){let _i0=clamp(i0-1,0,dataLen-1),_i1=clamp(i1+1,0,dataLen-1);for(;null==ydata[_i0]&&_i0>0;)_i0--;for(;null==ydata[_i1]&&_i1<dataLen-1;)_i1++;return[_i0,_i1]}(data[i]);s._paths=s.paths(self,i,_idxs[0],_idxs[1]),1!=ctxAlpha&&(ctx.globalAlpha=ctxAlpha=1)}})),series.forEach(((s,i)=>{if(i>0&&s.show){ctxAlpha!=s.alpha&&(ctx.globalAlpha=ctxAlpha=s.alpha),null!=s._paths&&drawPath(i,!1);{let _gaps=null!=s._paths?s._paths.gaps:null,show=s.points.show(self,i,i0,i1,_gaps),idxs=s.points.filter(self,i,show,_gaps);(show||idxs)&&(s.points._paths=s.points.paths(self,i,i0,i1,idxs),drawPath(i,!0))}1!=ctxAlpha&&(ctx.globalAlpha=ctxAlpha=1),fire("drawSeries",i)}})))}},drawOrder=(opts.drawOrder||["axes","series"]).map((key=>drawOrderMap[key]));function initScale(scaleKey){let sc=scales[scaleKey];if(null==sc){let scaleOpts=(opts.scales||EMPTY_OBJ)[scaleKey]||EMPTY_OBJ;if(null!=scaleOpts.from)initScale(scaleOpts.from),scales[scaleKey]=assign({},scales[scaleOpts.from],scaleOpts,{key:scaleKey});else{sc=scales[scaleKey]=assign({},scaleKey==xScaleKey?xScaleOpts:yScaleOpts,scaleOpts),sc.key=scaleKey;let isTime=sc.time,rn=sc.range,rangeIsArr=isArr(rn);if((scaleKey!=xScaleKey||2==mode&&!isTime)&&(!rangeIsArr||null!=rn[0]&&null!=rn[1]||(rn={min:null==rn[0]?autoRangePart:{mode:1,hard:rn[0],soft:rn[0]},max:null==rn[1]?autoRangePart:{mode:1,hard:rn[1],soft:rn[1]}},rangeIsArr=!1),!rangeIsArr&&isObj(rn))){let cfg=rn;rn=(self,dataMin,dataMax)=>null==dataMin?nullNullTuple:rangeNum(dataMin,dataMax,cfg)}sc.range=fnOrSelf(rn||(isTime?snapTimeX:scaleKey==xScaleKey?3==sc.distr?snapLogX:4==sc.distr?snapAsinhX:snapNumX:3==sc.distr?snapLogY:4==sc.distr?snapAsinhY:snapNumY)),sc.auto=fnOrSelf(!rangeIsArr&&sc.auto),sc.clamp=fnOrSelf(sc.clamp||clampScale),sc._min=sc._max=null}}}initScale("x"),initScale("y"),1==mode&&series.forEach((s=>{initScale(s.scale)})),axes.forEach((a=>{initScale(a.scale)}));for(let k in opts.scales)initScale(k);const scaleX=scales[xScaleKey],xScaleDistr=scaleX.distr;let valToPosX,valToPosY;0==scaleX.ori?(addClass(root,ORI_HZ),valToPosX=getHPos,valToPosY=getVPos):(addClass(root,ORI_VT),valToPosX=getVPos,valToPosY=getHPos);const pendScales={};for(let k in scales){let sc=scales[k];null==sc.min&&null==sc.max||(pendScales[k]={min:sc.min,max:sc.max},sc.min=sc.max=null)}const _tzDate=opts.tzDate||(ts=>new Date(round(ts/ms))),_fmtDate=opts.fmtDate||fmtDate,_timeAxisSplits=1==ms?timeAxisSplitsMs(_tzDate):timeAxisSplitsS(_tzDate),_timeAxisVals=timeAxisVals(_tzDate,timeAxisStamps(1==ms?_timeAxisStampsMs:_timeAxisStampsS,_fmtDate)),_timeSeriesVal=timeSeriesVal(_tzDate,timeSeriesStamp(_timeSeriesStamp,_fmtDate)),activeIdxs=[],legend=self.legend=assign({},legendOpts,opts.legend),showLegend=legend.show,markers=legend.markers;let legendTable,legendHead,legendBody;legend.idxs=activeIdxs,markers.width=fnOrSelf(markers.width),markers.dash=fnOrSelf(markers.dash),markers.stroke=fnOrSelf(markers.stroke),markers.fill=fnOrSelf(markers.fill);let legendCols,legendRows=[],legendCells=[],multiValLegend=!1,NULL_LEGEND_VALUES={};if(legend.live){const getMultiVals=series[1]?series[1].values:null;multiValLegend=null!=getMultiVals,legendCols=multiValLegend?getMultiVals(self,1,0):{_:0};for(let k in legendCols)NULL_LEGEND_VALUES[k]=LEGEND_DISP}if(showLegend)if(legendTable=placeTag("table",LEGEND,root),legendBody=placeTag("tbody",null,legendTable),legend.mount(self,legendTable),multiValLegend){legendHead=placeTag("thead",null,legendTable,legendBody);let head=placeTag("tr",null,legendHead);for(var key in placeTag("th",null,head),legendCols)placeTag("th",LEGEND_LABEL,head).textContent=key}else addClass(legendTable,LEGEND_INLINE),legend.live&&addClass(legendTable,LEGEND_LIVE);const son={show:!0},soff={show:!1};const mouseListeners=new Map;function onMouse(ev,targ,fn,onlyTarg=!0){const targListeners=mouseListeners.get(targ)||{},listener=cursor.bind[ev](self,targ,fn,onlyTarg);listener&&(on(ev,targ,targListeners[ev]=listener),mouseListeners.set(targ,targListeners))}function offMouse(ev,targ,fn){const targListeners=mouseListeners.get(targ)||{};for(let k in targListeners)null!=ev&&k!=ev||(off(k,targ,targListeners[k]),delete targListeners[k]);null==ev&&mouseListeners.delete(targ)}let fullWidCss=0,fullHgtCss=0,plotWidCss=0,plotHgtCss=0,plotLftCss=0,plotTopCss=0,_plotLftCss=plotLftCss,_plotTopCss=plotTopCss,_plotWidCss=plotWidCss,_plotHgtCss=plotHgtCss,plotLft=0,plotTop=0,plotWid=0,plotHgt=0;self.bbox={};let shouldSetScales=!1,shouldSetSize=!1,shouldConvergeSize=!1,shouldSetCursor=!1,shouldSetSelect=!1,shouldSetLegend=!1;function _setSize(width,height,force){(force||width!=self.width||height!=self.height)&&calcSize(width,height),resetYSeries(!1),shouldConvergeSize=!0,shouldSetSize=!0,commit()}function calcSize(width,height){self.width=fullWidCss=plotWidCss=width,self.height=fullHgtCss=plotHgtCss=height,plotLftCss=plotTopCss=0,function calcPlotRect(){let hasTopAxis=!1,hasBtmAxis=!1,hasRgtAxis=!1,hasLftAxis=!1;axes.forEach(((axis,i)=>{if(axis.show&&axis._show){let{side:side,_size:_size}=axis,isVt=side%2,fullSize=_size+(null!=axis.label?axis.labelSize:0);fullSize>0&&(isVt?(plotWidCss-=fullSize,3==side?(plotLftCss+=fullSize,hasLftAxis=!0):hasRgtAxis=!0):(plotHgtCss-=fullSize,0==side?(plotTopCss+=fullSize,hasTopAxis=!0):hasBtmAxis=!0))}})),sidesWithAxes[0]=hasTopAxis,sidesWithAxes[1]=hasRgtAxis,sidesWithAxes[2]=hasBtmAxis,sidesWithAxes[3]=hasLftAxis,plotWidCss-=_padding[1]+_padding[3],plotLftCss+=_padding[3],plotHgtCss-=_padding[2]+_padding[0],plotTopCss+=_padding[0]}(),function calcAxesRects(){let off1=plotLftCss+plotWidCss,off2=plotTopCss+plotHgtCss,off3=plotLftCss,off0=plotTopCss;function incrOffset(side,size){switch(side){case 1:return off1+=size,off1-size;case 2:return off2+=size,off2-size;case 3:return off3-=size,off3+size;case 0:return off0-=size,off0+size}}axes.forEach(((axis,i)=>{if(axis.show&&axis._show){let side=axis.side;axis._pos=incrOffset(side,axis._size),null!=axis.label&&(axis._lpos=incrOffset(side,axis.labelSize))}}))}();let bb=self.bbox;plotLft=bb.left=incrRound(plotLftCss*pxRatio,.5),plotTop=bb.top=incrRound(plotTopCss*pxRatio,.5),plotWid=bb.width=incrRound(plotWidCss*pxRatio,.5),plotHgt=bb.height=incrRound(plotHgtCss*pxRatio,.5)}const CYCLE_LIMIT=3;self.setSize=function setSize({width:width,height:height}){_setSize(width,height)};const cursor=self.cursor=assign({},cursorOpts,{drag:{y:2==mode}},opts.cursor);if(null==cursor.dataIdx){let hov=cursor.hover,skip=hov.skip=new Set(hov.skip??[]);skip.add(void 0);let prox=hov.prox=fnOrSelf(hov.prox),bias=hov.bias??=0;cursor.dataIdx=(self,seriesIdx,cursorIdx,valAtPosX)=>{if(0==seriesIdx)return cursorIdx;let idx2=cursorIdx,_prox=prox(self,seriesIdx,cursorIdx,valAtPosX)??inf,withProx=_prox>=0&&_prox<inf,xDim=0==scaleX.ori?plotWidCss:plotHgtCss,cursorLft=cursor.left,xValues=data[0],yValues=data[seriesIdx];if(skip.has(yValues[cursorIdx])){idx2=null;let j,nonNullLft=null,nonNullRgt=null;if(0==bias||-1==bias)for(j=cursorIdx;null==nonNullLft&&j-- >0;)skip.has(yValues[j])||(nonNullLft=j);if(0==bias||1==bias)for(j=cursorIdx;null==nonNullRgt&&j++<yValues.length;)skip.has(yValues[j])||(nonNullRgt=j);if(null!=nonNullLft||null!=nonNullRgt)if(withProx){let lftDelta=cursorLft-(null==nonNullLft?-1/0:valToPosX(xValues[nonNullLft],scaleX,xDim,0)),rgtDelta=(null==nonNullRgt?1/0:valToPosX(xValues[nonNullRgt],scaleX,xDim,0))-cursorLft;lftDelta<=rgtDelta?lftDelta<=_prox&&(idx2=nonNullLft):rgtDelta<=_prox&&(idx2=nonNullRgt)}else idx2=null==nonNullRgt?nonNullLft:null==nonNullLft?nonNullRgt:cursorIdx-nonNullLft<=nonNullRgt-cursorIdx?nonNullLft:nonNullRgt}else if(withProx){abs(cursorLft-valToPosX(xValues[cursorIdx],scaleX,xDim,0))>_prox&&(idx2=null)}return idx2}}const setCursorEvent=e=>{cursor.event=e};cursor.idxs=activeIdxs,cursor._lock=!1;let points=cursor.points;points.show=fnOrSelf(points.show),points.size=fnOrSelf(points.size),points.stroke=fnOrSelf(points.stroke),points.width=fnOrSelf(points.width),points.fill=fnOrSelf(points.fill);const focus=self.focus=assign({},opts.focus||{alpha:.3},cursor.focus),cursorFocus=focus.prox>=0,cursorOnePt=cursorFocus&&points.one;let cursorPts=[],cursorPtsLft=[],cursorPtsTop=[];function initCursorPt(s,si){let pt=points.show(self,si);if(pt)return addClass(pt,CURSOR_PT),addClass(pt,s.class),elTrans(pt,-10,-10,plotWidCss,plotHgtCss),over.insertBefore(pt,cursorPts[si]),pt}function initSeries(s,i){if(1==mode||i>0){let isTime=1==mode&&scales[s.scale].time,sv=s.value;s.value=isTime?isStr(sv)?timeSeriesVal(_tzDate,timeSeriesStamp(sv,_fmtDate)):sv||_timeSeriesVal:sv||numSeriesVal,s.label=s.label||(isTime?timeSeriesLabel:numSeriesLabel)}if(cursorOnePt||i>0){s.width=null==s.width?1:s.width,s.paths=s.paths||linearPath||retNull,s.fillTo=fnOrSelf(s.fillTo||seriesFillTo),s.pxAlign=+ifNull(s.pxAlign,pxAlign),s.pxRound=pxRoundGen(s.pxAlign),s.stroke=fnOrSelf(s.stroke||null),s.fill=fnOrSelf(s.fill||null),s._stroke=s._fill=s._paths=s._focus=null;let _ptDia=function ptDia(width,mult){return roundDec((3+2*(width||1))*mult,3)}(max(1,s.width),1),points=s.points=assign({},{size:_ptDia,width:max(1,.2*_ptDia),stroke:s.stroke,space:2*_ptDia,paths:pointsPath,_stroke:null,_fill:null},s.points);points.show=fnOrSelf(points.show),points.filter=fnOrSelf(points.filter),points.fill=fnOrSelf(points.fill),points.stroke=fnOrSelf(points.stroke),points.paths=fnOrSelf(points.paths),points.pxAlign=s.pxAlign}if(showLegend){let rowCells=function initLegendRow(s,i){if(0==i&&(multiValLegend||!legend.live||2==mode))return nullNullTuple;let cells=[],row=placeTag("tr",LEGEND_SERIES,legendBody,legendBody.childNodes[i]);addClass(row,s.class),s.show||addClass(row,OFF);let label=placeTag("th",null,row);if(markers.show){let indic=placeDiv(LEGEND_MARKER,label);if(i>0){let width=markers.width(self,i);width&&(indic.style.border=width+"px "+markers.dash(self,i)+" "+markers.stroke(self,i)),indic.style.background=markers.fill(self,i)}}let text=placeDiv(LEGEND_LABEL,label);for(var key in text.textContent=s.label,i>0&&(markers.show||(text.style.color=s.width>0?markers.stroke(self,i):markers.fill(self,i)),onMouse("click",label,(e=>{if(cursor._lock)return;setCursorEvent(e);let seriesIdx=series.indexOf(s);if((e.ctrlKey||e.metaKey)!=legend.isolate){let isolate=series.some(((s,i)=>i>0&&i!=seriesIdx&&s.show));series.forEach(((s,i)=>{i>0&&setSeries(i,isolate?i==seriesIdx?son:soff:son,!0,syncOpts.setSeries)}))}else setSeries(seriesIdx,{show:!s.show},!0,syncOpts.setSeries)}),!1),cursorFocus&&onMouse(mouseenter,label,(e=>{cursor._lock||(setCursorEvent(e),setSeries(series.indexOf(s),FOCUS_TRUE,!0,syncOpts.setSeries))}),!1)),legendCols){let v=placeTag("td",LEGEND_VALUE,row);v.textContent="--",cells.push(v)}return[row,cells]}(s,i);legendRows.splice(i,0,rowCells[0]),legendCells.splice(i,0,rowCells[1]),legend.values.push(null)}if(cursor.show){activeIdxs.splice(i,0,null);let pt=null;cursorOnePt?0==i&&(pt=initCursorPt(s,i)):i>0&&(pt=initCursorPt(s,i)),cursorPts.splice(i,0,pt),cursorPtsLft.splice(i,0,0),cursorPtsTop.splice(i,0,0)}fire("addSeries",i)}self.addSeries=function addSeries(opts,si){si=null==si?series.length:si,opts=1==mode?setDefault(opts,si,xSeriesOpts,ySeriesOpts):setDefault(opts,si,{},xySeriesOpts),series.splice(si,0,opts),initSeries(series[si],si)},self.delSeries=function delSeries(i){if(series.splice(i,1),showLegend){legend.values.splice(i,1),legendCells.splice(i,1);let tr=legendRows.splice(i,1)[0];offMouse(null,tr.firstChild),tr.remove()}cursor.show&&(activeIdxs.splice(i,1),cursorPts.splice(i,1)[0].remove(),cursorPtsLft.splice(i,1),cursorPtsTop.splice(i,1)),fire("delSeries",i)};const sidesWithAxes=[!1,!1,!1,!1];function autoPadSide(self,side,sidesWithAxes,cycleNum){let[hasTopAxis,hasRgtAxis,hasBtmAxis,hasLftAxis]=sidesWithAxes,ori=side%2,size=0;return 0==ori&&(hasLftAxis||hasRgtAxis)&&(size=0==side&&!hasTopAxis||2==side&&!hasBtmAxis?round(xAxisOpts.size/3):0),1==ori&&(hasTopAxis||hasBtmAxis)&&(size=1==side&&!hasRgtAxis||3==side&&!hasLftAxis?round(yAxisOpts.size/2):0),size}const padding=self.padding=(opts.padding||[autoPadSide,autoPadSide,autoPadSide,autoPadSide]).map((p=>fnOrSelf(ifNull(p,autoPadSide)))),_padding=self._padding=padding.map(((p,i)=>p(self,i,sidesWithAxes,0)));let dataLen,i0=null,i1=null;const idxs=1==mode?series[0].idxs:null;let ctxStroke,ctxFill,ctxWidth,ctxDash,ctxJoin,ctxCap,ctxFont,ctxAlign,ctxBaseline,ctxAlpha,data0=null,viaAutoScaleX=!1;function setData(_data,_resetScales){if(data=null==_data?[]:_data,self.data=self._data=data,2==mode){dataLen=0;for(let i=1;i<series.length;i++)dataLen+=data[i][0].length}else{0==data.length&&(self.data=self._data=data=[[]]),data0=data[0],dataLen=data0.length;let scaleData=data;if(2==xScaleDistr){scaleData=data.slice();let _data0=scaleData[0]=Array(dataLen);for(let i=0;i<dataLen;i++)_data0[i]=i}self._data=data=scaleData}if(resetYSeries(!0),fire("setData"),2==xScaleDistr&&(shouldConvergeSize=!0),!1!==_resetScales){let xsc=scaleX;xsc.auto(self,viaAutoScaleX)?autoScaleX():_setScale(xScaleKey,xsc.min,xsc.max),shouldSetCursor=shouldSetCursor||cursor.left>=0,shouldSetLegend=!0,commit()}}function autoScaleX(){let _min,_max;viaAutoScaleX=!0,1==mode&&(dataLen>0?(i0=idxs[0]=0,i1=idxs[1]=dataLen-1,_min=data[0][i0],_max=data[0][i1],2==xScaleDistr?(_min=i0,_max=i1):_min==_max&&(3==xScaleDistr?[_min,_max]=rangeLog(_min,_min,scaleX.log,!1):4==xScaleDistr?[_min,_max]=rangeAsinh(_min,_min,scaleX.log,!1):scaleX.time?_max=_min+round(86400/ms):[_min,_max]=rangeNum(_min,_max,rangePad,!0))):(i0=idxs[0]=_min=null,i1=idxs[1]=_max=null)),_setScale(xScaleKey,_min,_max)}function setCtxStyle(stroke,width,dash,cap,fill,join){stroke??=transparent,dash??=EMPTY_ARR,cap??="butt",fill??=transparent,join??="round",stroke!=ctxStroke&&(ctx.strokeStyle=ctxStroke=stroke),fill!=ctxFill&&(ctx.fillStyle=ctxFill=fill),width!=ctxWidth&&(ctx.lineWidth=ctxWidth=width),join!=ctxJoin&&(ctx.lineJoin=ctxJoin=join),cap!=ctxCap&&(ctx.lineCap=ctxCap=cap),dash!=ctxDash&&ctx.setLineDash(ctxDash=dash)}function setFontStyle(font,fill,align,baseline){fill!=ctxFill&&(ctx.fillStyle=ctxFill=fill),font!=ctxFont&&(ctx.font=ctxFont=font),align!=ctxAlign&&(ctx.textAlign=ctxAlign=align),baseline!=ctxBaseline&&(ctx.textBaseline=ctxBaseline=baseline)}function accScale(wsc,psc,facet,data,sorted=0){if(data.length>0&&wsc.auto(self,viaAutoScaleX)&&(null==psc||null==psc.min)){let _i0=ifNull(i0,0),_i1=ifNull(i1,data.length-1),minMax=null==facet.min?3==wsc.distr?function getMinMaxLog(data,_i0,_i1){let _min=inf,_max=-inf;for(let i=_i0;i<=_i1;i++){let v=data[i];null!=v&&v>0&&(v<_min&&(_min=v),v>_max&&(_max=v))}return[_min,_max]}(data,_i0,_i1):function getMinMax(data,_i0,_i1,sorted){let _min=inf,_max=-inf;if(1==sorted)_min=data[_i0],_max=data[_i1];else if(-1==sorted)_min=data[_i1],_max=data[_i0];else for(let i=_i0;i<=_i1;i++){let v=data[i];null!=v&&(v<_min&&(_min=v),v>_max&&(_max=v))}return[_min,_max]}(data,_i0,_i1,sorted):[facet.min,facet.max];wsc.min=min(wsc.min,facet.min=minMax[0]),wsc.max=max(wsc.max,facet.max=minMax[1])}}self.setData=setData;const AUTOSCALE={min:null,max:null};function cacheStrokeFill(si,_points){let s=_points?series[si].points:series[si];s._stroke=s.stroke(self,si),s._fill=s.fill(self,si)}function drawPath(si,_points){let s=_points?series[si].points:series[si],{stroke:stroke,fill:fill,clip:gapsClip,flags:flags,_stroke:strokeStyle=s._stroke,_fill:fillStyle=s._fill,_width:width=s.width}=s._paths;width=roundDec(width*pxRatio,3);let boundsClip=null,offset=width%2/2;_points&&null==fillStyle&&(fillStyle=width>0?"#fff":strokeStyle);let _pxAlign=1==s.pxAlign&&offset>0;if(_pxAlign&&ctx.translate(offset,offset),!_points){let lft=plotLft-width/2,top=plotTop-width/2,wid=plotWid+width,hgt=plotHgt+width;boundsClip=new Path2D,boundsClip.rect(lft,top,wid,hgt)}_points?strokeFill(strokeStyle,width,s.dash,s.cap,fillStyle,stroke,fill,flags,gapsClip):function fillStroke(si,strokeStyle,lineWidth,lineDash,lineCap,fillStyle,strokePath,fillPath,flags,boundsClip,gapsClip){let didStrokeFill=!1;0!=flags&&bands.forEach(((b,bi)=>{if(b.series[0]==si){let gapsClip2,lowerEdge=series[b.series[1]],lowerData=data[b.series[1]],bandClip=(lowerEdge._paths||EMPTY_OBJ).band;isArr(bandClip)&&(bandClip=1==b.dir?bandClip[0]:bandClip[1]);let _fillStyle=null;lowerEdge.show&&bandClip&&function hasData(data,idx0,idx1){for(idx0=ifNull(idx0,0),idx1=ifNull(idx1,data.length-1);idx0<=idx1;){if(null!=data[idx0])return!0;idx0++}return!1}(lowerData,i0,i1)?(_fillStyle=b.fill(self,bi)||fillStyle,gapsClip2=lowerEdge._paths.clip):bandClip=null,strokeFill(strokeStyle,lineWidth,lineDash,lineCap,_fillStyle,strokePath,fillPath,flags,boundsClip,gapsClip,gapsClip2,bandClip),didStrokeFill=!0}})),didStrokeFill||strokeFill(strokeStyle,lineWidth,lineDash,lineCap,fillStyle,strokePath,fillPath,flags,boundsClip,gapsClip)}(si,strokeStyle,width,s.dash,s.cap,fillStyle,stroke,fill,flags,boundsClip,gapsClip),_pxAlign&&ctx.translate(-offset,-offset)}const CLIP_FILL_STROKE=BAND_CLIP_FILL|BAND_CLIP_STROKE;function strokeFill(strokeStyle,lineWidth,lineDash,lineCap,fillStyle,strokePath,fillPath,flags,boundsClip,gapsClip,gapsClip2,bandClip){setCtxStyle(strokeStyle,lineWidth,lineDash,lineCap,fillStyle),(boundsClip||gapsClip||bandClip)&&(ctx.save(),boundsClip&&ctx.clip(boundsClip),gapsClip&&ctx.clip(gapsClip)),bandClip?(flags&CLIP_FILL_STROKE)==CLIP_FILL_STROKE?(ctx.clip(bandClip),gapsClip2&&ctx.clip(gapsClip2),doFill(fillStyle,fillPath),doStroke(strokeStyle,strokePath,lineWidth)):flags&BAND_CLIP_STROKE?(doFill(fillStyle,fillPath),ctx.clip(bandClip),doStroke(strokeStyle,strokePath,lineWidth)):flags&BAND_CLIP_FILL&&(ctx.save(),ctx.clip(bandClip),gapsClip2&&ctx.clip(gapsClip2),doFill(fillStyle,fillPath),ctx.restore(),doStroke(strokeStyle,strokePath,lineWidth)):(doFill(fillStyle,fillPath),doStroke(strokeStyle,strokePath,lineWidth)),(boundsClip||gapsClip||bandClip)&&ctx.restore()}function doStroke(strokeStyle,strokePath,lineWidth){lineWidth>0&&(strokePath instanceof Map?strokePath.forEach(((strokePath,strokeStyle)=>{ctx.strokeStyle=ctxStroke=strokeStyle,ctx.stroke(strokePath)})):null!=strokePath&&strokeStyle&&ctx.stroke(strokePath))}function doFill(fillStyle,fillPath){fillPath instanceof Map?fillPath.forEach(((fillPath,fillStyle)=>{ctx.fillStyle=ctxFill=fillStyle,ctx.fill(fillPath)})):null!=fillPath&&fillStyle&&ctx.fill(fillPath)}function drawOrthoLines(offs,filts,ori,side,pos0,len,width,stroke,dash,cap){let offset=width%2/2;1==pxAlign&&ctx.translate(offset,offset),setCtxStyle(stroke,width,dash,cap,stroke),ctx.beginPath();let x0,y0,x1,y1,pos1=pos0+(0==side||3==side?-len:len);0==ori?(y0=pos0,y1=pos1):(x0=pos0,x1=pos1);for(let i=0;i<offs.length;i++)null!=filts[i]&&(0==ori?x0=x1=offs[i]:y0=y1=offs[i],ctx.moveTo(x0,y0),ctx.lineTo(x1,y1));ctx.stroke(),1==pxAlign&&ctx.translate(-offset,-offset)}function axesCalc(cycleNum){let converged=!0;return axes.forEach(((axis,i)=>{if(!axis.show)return;let scale=scales[axis.scale];if(null==scale.min)return void(axis._show&&(converged=!1,axis._show=!1,resetYSeries(!1)));axis._show||(converged=!1,axis._show=!0,resetYSeries(!1));let side=axis.side,ori=side%2,{min:min,max:max}=scale,[_incr,_space]=function getIncrSpace(axisIdx,min,max,fullDim){let incrSpace,axis=axes[axisIdx];if(fullDim<=0)incrSpace=[0,0];else{let minSpace=axis._space=axis.space(self,axisIdx,min,max,fullDim);incrSpace=findIncr(min,max,axis._incrs=axis.incrs(self,axisIdx,min,max,fullDim,minSpace),fullDim,minSpace)}return axis._found=incrSpace}(i,min,max,0==ori?plotWidCss:plotHgtCss);if(0==_space)return;let forceMin=2==scale.distr,_splits=axis._splits=axis.splits(self,i,min,max,_incr,_space,forceMin),splits=2==scale.distr?_splits.map((i=>data0[i])):_splits,incr=2==scale.distr?data0[_splits[1]]-data0[_splits[0]]:_incr,values=axis._values=axis.values(self,axis.filter(self,splits,i,_space,incr),i,_space,incr);axis._rotate=2==side?axis.rotate(self,values,i,_space):0;let oldSize=axis._size;axis._size=ceil(axis.size(self,values,i,cycleNum)),null!=oldSize&&axis._size!=oldSize&&(converged=!1)})),converged}function paddingCalc(cycleNum){let converged=!0;return padding.forEach(((p,i)=>{let _p=p(self,i,sidesWithAxes,cycleNum);_p!=_padding[i]&&(converged=!1),_padding[i]=_p})),converged}function resetYSeries(minMax){series.forEach(((s,i)=>{i>0&&(s._paths=null,minMax&&(1==mode?(s.min=null,s.max=null):s.facets.forEach((f=>{f.min=null,f.max=null}))))}))}let xCursor,yCursor,vCursor,hCursor,rawMouseLeft0,rawMouseTop0,mouseLeft0,mouseTop0,rawMouseLeft1,rawMouseTop1,mouseLeft1,mouseTop1,queuedCommit=!1,deferHooks=!1,hooksQueue=[];function flushHooks(){deferHooks=!1;for(let i=0;i<hooksQueue.length;i++)fire(...hooksQueue[i]);hooksQueue.length=0}function commit(){queuedCommit||(microTask(_commit),queuedCommit=!0)}function _commit(){if(shouldSetScales&&(!function setScales(){for(let k in scales){let sc=scales[k];null==pendScales[k]&&(null==sc.min||null!=pendScales[xScaleKey]&&sc.auto(self,viaAutoScaleX))&&(pendScales[k]=AUTOSCALE)}for(let k in scales){let sc=scales[k];null==pendScales[k]&&null!=sc.from&&null!=pendScales[sc.from]&&(pendScales[k]=AUTOSCALE)}null!=pendScales[xScaleKey]&&resetYSeries(!0);let wipScales={};for(let k in pendScales){let psc=pendScales[k];if(null!=psc){let wsc=wipScales[k]=copy(scales[k],fastIsObj);if(null!=psc.min)assign(wsc,psc);else if(k!=xScaleKey||2==mode)if(0==dataLen&&null==wsc.from){let minMax=wsc.range(self,null,null,k);wsc.min=minMax[0],wsc.max=minMax[1]}else wsc.min=inf,wsc.max=-inf}}if(dataLen>0){series.forEach(((s,i)=>{if(1==mode){let k=s.scale,psc=pendScales[k];if(null==psc)return;let wsc=wipScales[k];if(0==i){let minMax=wsc.range(self,wsc.min,wsc.max,k);wsc.min=minMax[0],wsc.max=minMax[1],i0=closestIdx(wsc.min,data[0]),i1=closestIdx(wsc.max,data[0]),i1-i0>1&&(data[0][i0]<wsc.min&&i0++,data[0][i1]>wsc.max&&i1--),s.min=data0[i0],s.max=data0[i1]}else s.show&&s.auto&&accScale(wsc,psc,s,data[i],s.sorted);s.idxs[0]=i0,s.idxs[1]=i1}else if(i>0&&s.show&&s.auto){let[xFacet,yFacet]=s.facets,xScaleKey=xFacet.scale,yScaleKey=yFacet.scale,[xData,yData]=data[i],wscx=wipScales[xScaleKey],wscy=wipScales[yScaleKey];null!=wscx&&accScale(wscx,pendScales[xScaleKey],xFacet,xData,xFacet.sorted),null!=wscy&&accScale(wscy,pendScales[yScaleKey],yFacet,yData,yFacet.sorted),s.min=yFacet.min,s.max=yFacet.max}}));for(let k in wipScales){let wsc=wipScales[k],psc=pendScales[k];if(null==wsc.from&&(null==psc||null==psc.min)){let minMax=wsc.range(self,wsc.min==inf?null:wsc.min,wsc.max==-inf?null:wsc.max,k);wsc.min=minMax[0],wsc.max=minMax[1]}}}for(let k in wipScales){let wsc=wipScales[k];if(null!=wsc.from){let base=wipScales[wsc.from];if(null==base.min)wsc.min=wsc.max=null;else{let minMax=wsc.range(self,base.min,base.max,k);wsc.min=minMax[0],wsc.max=minMax[1]}}}let changed={},anyChanged=!1;for(let k in wipScales){let wsc=wipScales[k],sc=scales[k];if(sc.min!=wsc.min||sc.max!=wsc.max){sc.min=wsc.min,sc.max=wsc.max;let distr=sc.distr;sc._min=3==distr?log10(sc.min):4==distr?asinh(sc.min,sc.asinh):100==distr?sc.fwd(sc.min):sc.min,sc._max=3==distr?log10(sc.max):4==distr?asinh(sc.max,sc.asinh):100==distr?sc.fwd(sc.max):sc.max,changed[k]=anyChanged=!0}}if(anyChanged){series.forEach(((s,i)=>{2==mode?i>0&&changed.y&&(s._paths=null):changed[s.scale]&&(s._paths=null)}));for(let k in changed)shouldConvergeSize=!0,fire("setScale",k);cursor.show&&cursor.left>=0&&(shouldSetCursor=shouldSetLegend=!0)}for(let k in pendScales)pendScales[k]=null}(),shouldSetScales=!1),shouldConvergeSize&&(!function convergeSize(){let converged=!1,cycleNum=0;for(;!converged;){cycleNum++;let axesConverged=axesCalc(cycleNum),paddingConverged=paddingCalc(cycleNum);converged=cycleNum==CYCLE_LIMIT||axesConverged&&paddingConverged,converged||(calcSize(self.width,self.height),shouldSetSize=!0)}}(),shouldConvergeSize=!1),shouldSetSize){if(setStylePx(under,LEFT,plotLftCss),setStylePx(under,TOP,plotTopCss),setStylePx(under,WIDTH,plotWidCss),setStylePx(under,HEIGHT,plotHgtCss),setStylePx(over,LEFT,plotLftCss),setStylePx(over,TOP,plotTopCss),setStylePx(over,WIDTH,plotWidCss),setStylePx(over,HEIGHT,plotHgtCss),setStylePx(wrap,WIDTH,fullWidCss),setStylePx(wrap,HEIGHT,fullHgtCss),can.width=round(fullWidCss*pxRatio),can.height=round(fullHgtCss*pxRatio),axes.forEach((({_el:_el,_show:_show,_size:_size,_pos:_pos,side:side})=>{if(null!=_el)if(_show){let isVt=side%2==1;setStylePx(_el,isVt?"left":"top",_pos-(3===side||0===side?_size:0)),setStylePx(_el,isVt?"width":"height",_size),setStylePx(_el,isVt?"top":"left",isVt?plotTopCss:plotLftCss),setStylePx(_el,isVt?"height":"width",isVt?plotHgtCss:plotWidCss),remClass(_el,OFF)}else addClass(_el,OFF)})),ctxStroke=ctxFill=ctxWidth=ctxJoin=ctxCap=ctxFont=ctxAlign=ctxBaseline=ctxDash=null,ctxAlpha=1,syncRect(!0),plotLftCss!=_plotLftCss||plotTopCss!=_plotTopCss||plotWidCss!=_plotWidCss||plotHgtCss!=_plotHgtCss){resetYSeries(!1);let pctWid=plotWidCss/_plotWidCss,pctHgt=plotHgtCss/_plotHgtCss;if(cursor.show&&!shouldSetCursor&&cursor.left>=0){cursor.left*=pctWid,cursor.top*=pctHgt,vCursor&&elTrans(vCursor,round(cursor.left),0,plotWidCss,plotHgtCss),hCursor&&elTrans(hCursor,0,round(cursor.top),plotWidCss,plotHgtCss);for(let i=0;i<cursorPts.length;i++){let pt=cursorPts[i];null!=pt&&(cursorPtsLft[i]*=pctWid,cursorPtsTop[i]*=pctHgt,elTrans(pt,ceil(cursorPtsLft[i]),ceil(cursorPtsTop[i]),plotWidCss,plotHgtCss))}}if(select.show&&!shouldSetSelect&&select.left>=0&&select.width>0){select.left*=pctWid,select.width*=pctWid,select.top*=pctHgt,select.height*=pctHgt;for(let prop in _hideProps)setStylePx(selectDiv,prop,select[prop])}_plotLftCss=plotLftCss,_plotTopCss=plotTopCss,_plotWidCss=plotWidCss,_plotHgtCss=plotHgtCss}fire("setSize"),shouldSetSize=!1}fullWidCss>0&&fullHgtCss>0&&(ctx.clearRect(0,0,can.width,can.height),fire("drawClear"),drawOrder.forEach((fn=>fn())),fire("draw")),select.show&&shouldSetSelect&&(setSelect(select),shouldSetSelect=!1),cursor.show&&shouldSetCursor&&(updateCursor(null,!0,!1),shouldSetCursor=!1),legend.show&&legend.live&&shouldSetLegend&&(setLegend(),shouldSetLegend=!1),ready||(ready=!0,self.status=1,fire("ready")),viaAutoScaleX=!1,queuedCommit=!1}function setScale(key,opts){let sc=scales[key];if(null==sc.from){if(0==dataLen){let minMax=sc.range(self,opts.min,opts.max,key);opts.min=minMax[0],opts.max=minMax[1]}if(opts.min>opts.max){let _min=opts.min;opts.min=opts.max,opts.max=_min}if(dataLen>1&&null!=opts.min&&null!=opts.max&&opts.max-opts.min<1e-16)return;key==xScaleKey&&2==sc.distr&&dataLen>0&&(opts.min=closestIdx(opts.min,data[0]),opts.max=closestIdx(opts.max,data[0]),opts.min==opts.max&&opts.max++),pendScales[key]=opts,shouldSetScales=!0,commit()}}self.batch=function batch(fn,_deferHooks=!1){queuedCommit=!0,deferHooks=_deferHooks,fn(self),_commit(),_deferHooks&&hooksQueue.length>0&&queueMicrotask(flushHooks)},self.redraw=(rebuildPaths,recalcAxes)=>{shouldConvergeSize=recalcAxes||!1,!1!==rebuildPaths?_setScale(xScaleKey,scaleX.min,scaleX.max):commit()},self.setScale=setScale;let dragging=!1;const drag=cursor.drag;let dragX=drag.x,dragY=drag.y;cursor.show&&(cursor.x&&(xCursor=placeDiv(CURSOR_X,over)),cursor.y&&(yCursor=placeDiv(CURSOR_Y,over)),0==scaleX.ori?(vCursor=xCursor,hCursor=yCursor):(vCursor=yCursor,hCursor=xCursor),mouseLeft1=cursor.left,mouseTop1=cursor.top);const select=self.select=assign({show:!0,over:!0,left:0,width:0,top:0,height:0},opts.select),selectDiv=select.show?placeDiv(SELECT,select.over?over:under):null;function setSelect(opts,_fire){if(select.show){for(let prop in opts)select[prop]=opts[prop],prop in _hideProps&&setStylePx(selectDiv,prop,opts[prop]);!1!==_fire&&fire("setSelect")}}function _setScale(key,min,max){setScale(key,{min:min,max:max})}function setSeries(i,opts,_fire,_pub){null!=opts.focus&&function setFocus(i){if(i!=focusedSeries){let allFocused=null==i,_setAlpha=1!=focus.alpha;series.forEach(((s,i2)=>{if(1==mode||i2>0){let isFocused=allFocused||0==i2||i2==i;s._focus=allFocused?null:isFocused,_setAlpha&&function setAlpha(i,value){series[i].alpha=value,cursor.show&&cursorPts[i]&&(cursorPts[i].style.opacity=value);showLegend&&legendRows[i]&&(legendRows[i].style.opacity=value)}(i2,isFocused?1:focus.alpha)}})),focusedSeries=i,_setAlpha&&commit()}}(i),null!=opts.show&&series.forEach(((s,si)=>{si>0&&(i==si||null==i)&&(s.show=opts.show,function toggleDOM(i,onOff){let s=series[i],label=showLegend?legendRows[i]:null;s.show?label&&remClass(label,OFF):(label&&addClass(label,OFF),elTrans(cursorOnePt?cursorPts[0]:cursorPts[i],-10,-10,plotWidCss,plotHgtCss))}(si,opts.show),2==mode?(_setScale(s.facets[0].scale,null,null),_setScale(s.facets[1].scale,null,null)):_setScale(s.scale,null,null),commit())})),!1!==_fire&&fire("setSeries",i,opts),_pub&&pubSync("setSeries",self,i,opts)}let closestDist,closestSeries,focusedSeries;self.setSelect=setSelect,self.setSeries=setSeries,self.addBand=function addBand(opts,bi){opts.fill=fnOrSelf(opts.fill||null),opts.dir=ifNull(opts.dir,-1),bi=null==bi?bands.length:bi,bands.splice(bi,0,opts)},self.setBand=function setBand(bi,opts){assign(bands[bi],opts)},self.delBand=function delBand(bi){null==bi?bands.length=0:bands.splice(bi,1)};const FOCUS_TRUE={focus:!0};function posToVal(pos,scale,can){let sc=scales[scale];can&&(pos=pos/pxRatio-(1==sc.ori?plotTopCss:plotLftCss));let dim=plotWidCss;1==sc.ori&&(dim=plotHgtCss,pos=dim-pos),-1==sc.dir&&(pos=dim-pos);let _min=sc._min,sv=_min+(sc._max-_min)*(pos/dim),distr=sc.distr;return 3==distr?pow(10,sv):4==distr?sinh(sv,sc.asinh):100==distr?sc.bwd(sv):sv}function setSelH(off,dim){setStylePx(selectDiv,LEFT,select.left=off),setStylePx(selectDiv,WIDTH,select.width=dim)}function setSelV(off,dim){setStylePx(selectDiv,TOP,select.top=off),setStylePx(selectDiv,HEIGHT,select.height=dim)}showLegend&&cursorFocus&&onMouse(mouseleave,legendTable,(e=>{cursor._lock||(setCursorEvent(e),null!=focusedSeries&&setSeries(null,FOCUS_TRUE,!0,syncOpts.setSeries))})),self.valToIdx=val=>closestIdx(val,data[0]),self.posToIdx=function closestIdxFromXpos(pos,can){return closestIdx(posToVal(pos,xScaleKey,can),data[0],i0,i1)},self.posToVal=posToVal,self.valToPos=(val,scale,can)=>0==scales[scale].ori?getHPos(val,scales[scale],can?plotWid:plotWidCss,can?plotLft:0):getVPos(val,scales[scale],can?plotHgt:plotHgtCss,can?plotTop:0),self.setCursor=(opts,_fire,_pub)=>{mouseLeft1=opts.left,mouseTop1=opts.top,updateCursor(null,_fire,_pub)};let setSelX=0==scaleX.ori?setSelH:setSelV,setSelY=1==scaleX.ori?setSelH:setSelV;function setLegend(opts,_fire){if(null!=opts&&(opts.idxs?opts.idxs.forEach(((didx,sidx)=>{activeIdxs[sidx]=didx})):isUndef(opts.idx)||activeIdxs.fill(opts.idx),legend.idx=activeIdxs[0]),showLegend&&legend.live){for(let sidx=0;sidx<series.length;sidx++)(sidx>0||1==mode&&!multiValLegend)&&setLegendValues(sidx,activeIdxs[sidx]);!function syncLegend(){if(showLegend&&legend.live)for(let i=2==mode?1:0;i<series.length;i++){if(0==i&&multiValLegend)continue;let vals=legend.values[i],j=0;for(let k in vals)legendCells[i][j++].firstChild.nodeValue=vals[k]}}()}shouldSetLegend=!1,!1!==_fire&&fire("setLegend")}function setLegendValues(sidx,idx){let val,s=series[sidx],src=0==sidx&&2==xScaleDistr?data0:data[sidx];multiValLegend?val=s.values(self,sidx,idx)??NULL_LEGEND_VALUES:(val=s.value(self,null==idx?null:src[idx],sidx,idx),val=null==val?NULL_LEGEND_VALUES:{_:val}),legend.values[sidx]=val}function updateCursor(src,_fire,_pub){let idx;rawMouseLeft1=mouseLeft1,rawMouseTop1=mouseTop1,[mouseLeft1,mouseTop1]=cursor.move(self,mouseLeft1,mouseTop1),cursor.left=mouseLeft1,cursor.top=mouseTop1,cursor.show&&(vCursor&&elTrans(vCursor,round(mouseLeft1),0,plotWidCss,plotHgtCss),hCursor&&elTrans(hCursor,0,round(mouseTop1),plotWidCss,plotHgtCss));let noDataInRange=i0>i1;closestDist=inf,closestSeries=null;let xDim=0==scaleX.ori?plotWidCss:plotHgtCss,yDim=1==scaleX.ori?plotWidCss:plotHgtCss;if(mouseLeft1<0||0==dataLen||noDataInRange){idx=cursor.idx=null;for(let i=0;i<series.length;i++){let pt=cursorPts[i];null!=pt&&elTrans(pt,-10,-10,plotWidCss,plotHgtCss)}cursorFocus&&setSeries(null,FOCUS_TRUE,!0,null==src&&syncOpts.setSeries),legend.live&&(activeIdxs.fill(idx),shouldSetLegend=!0)}else{let mouseXPos,valAtPosX,xPos;1==mode&&(mouseXPos=0==scaleX.ori?mouseLeft1:mouseTop1,valAtPosX=posToVal(mouseXPos,xScaleKey),idx=cursor.idx=closestIdx(valAtPosX,data[0],i0,i1),xPos=valToPosX(data[0][idx],scaleX,xDim,0));let _ptLft=-10,_ptTop=-10,_ptWid=0,_ptHgt=0,_centered=!0,_ptFill="",_ptStroke="";for(let i=2==mode?1:0;i<series.length;i++){let s=series[i],idx1=activeIdxs[i],yVal1=null==idx1?null:1==mode?data[i][idx1]:data[i][1][idx1],idx2=cursor.dataIdx(self,i,idx,valAtPosX),yVal2=null==idx2?null:1==mode?data[i][idx2]:data[i][1][idx2];shouldSetLegend=shouldSetLegend||yVal2!=yVal1||idx2!=idx1,activeIdxs[i]=idx2;let xPos2=idx2==idx?xPos:valToPosX(1==mode?data[0][idx2]:data[i][0][idx2],scaleX,xDim,0);if(i>0&&s.show){let yPos=null==yVal2?-10:valToPosY(yVal2,1==mode?scales[s.scale]:scales[s.facets[1].scale],yDim,0);if(cursorFocus&&null!=yVal2){let mouseYPos=1==scaleX.ori?mouseLeft1:mouseTop1,dist=abs(focus.dist(self,i,idx2,yPos,mouseYPos));if(dist<closestDist){let bias=focus.bias;if(0!=bias){let mouseYVal=posToVal(mouseYPos,s.scale),mouseYValSign=mouseYVal>=0?1:-1;mouseYValSign==(yVal2>=0?1:-1)&&(1==mouseYValSign?1==bias?yVal2>=mouseYVal:yVal2<=mouseYVal:1==bias?yVal2<=mouseYVal:yVal2>=mouseYVal)&&(closestDist=dist,closestSeries=i)}else closestDist=dist,closestSeries=i}}if(shouldSetLegend||cursorOnePt){let hPos,vPos;0==scaleX.ori?(hPos=xPos2,vPos=yPos):(hPos=yPos,vPos=xPos2);let ptWid,ptHgt,ptLft,ptTop,ptStroke,ptFill,centered=!0,getBBox=points.bbox;if(null!=getBBox){centered=!1;let bbox=getBBox(self,i);ptLft=bbox.left,ptTop=bbox.top,ptWid=bbox.width,ptHgt=bbox.height}else ptLft=hPos,ptTop=vPos,ptWid=ptHgt=points.size(self,i);if(ptFill=points.fill(self,i),ptStroke=points.stroke(self,i),cursorOnePt)i==closestSeries&&closestDist<=focus.prox&&(_ptLft=ptLft,_ptTop=ptTop,_ptWid=ptWid,_ptHgt=ptHgt,_centered=centered,_ptFill=ptFill,_ptStroke=ptStroke);else{let pt=cursorPts[i];null!=pt&&(cursorPtsLft[i]=ptLft,cursorPtsTop[i]=ptTop,elSize(pt,ptWid,ptHgt,centered),elColor(pt,ptFill,ptStroke),elTrans(pt,ceil(ptLft),ceil(ptTop),plotWidCss,plotHgtCss))}}}}if(cursorOnePt){let p=focus.prox;if(shouldSetLegend||(null==focusedSeries?closestDist<=p:closestDist>p||closestSeries!=focusedSeries)){let pt=cursorPts[0];cursorPtsLft[0]=_ptLft,cursorPtsTop[0]=_ptTop,elSize(pt,_ptWid,_ptHgt,_centered),elColor(pt,_ptFill,_ptStroke),elTrans(pt,ceil(_ptLft),ceil(_ptTop),plotWidCss,plotHgtCss)}}}if(select.show&&dragging)if(null!=src){let[xKey,yKey]=syncOpts.scales,[matchXKeys,matchYKeys]=syncOpts.match,[xKeySrc,yKeySrc]=src.cursor.sync.scales,sdrag=src.cursor.drag;if(dragX=sdrag._x,dragY=sdrag._y,dragX||dragY){let sOff,sDim,sc,a,b,{left:left,top:top,width:width,height:height}=src.select,sori=src.scales[xKeySrc].ori,sPosToVal=src.posToVal,matchingX=null!=xKey&&matchXKeys(xKey,xKeySrc),matchingY=null!=yKey&&matchYKeys(yKey,yKeySrc);matchingX&&dragX?(0==sori?(sOff=left,sDim=width):(sOff=top,sDim=height),sc=scales[xKey],a=valToPosX(sPosToVal(sOff,xKeySrc),sc,xDim,0),b=valToPosX(sPosToVal(sOff+sDim,xKeySrc),sc,xDim,0),setSelX(min(a,b),abs(b-a))):setSelX(0,xDim),matchingY&&dragY?(1==sori?(sOff=left,sDim=width):(sOff=top,sDim=height),sc=scales[yKey],a=valToPosY(sPosToVal(sOff,yKeySrc),sc,yDim,0),b=valToPosY(sPosToVal(sOff+sDim,yKeySrc),sc,yDim,0),setSelY(min(a,b),abs(b-a))):setSelY(0,yDim)}else hideSelect()}else{let rawDX=abs(rawMouseLeft1-rawMouseLeft0),rawDY=abs(rawMouseTop1-rawMouseTop0);if(1==scaleX.ori){let _rawDX=rawDX;rawDX=rawDY,rawDY=_rawDX}dragX=drag.x&&rawDX>=drag.dist,dragY=drag.y&&rawDY>=drag.dist;let p0,p1,uni=drag.uni;null!=uni?dragX&&dragY&&(dragX=rawDX>=uni,dragY=rawDY>=uni,dragX||dragY||(rawDY>rawDX?dragY=!0:dragX=!0)):drag.x&&drag.y&&(dragX||dragY)&&(dragX=dragY=!0),dragX&&(0==scaleX.ori?(p0=mouseLeft0,p1=mouseLeft1):(p0=mouseTop0,p1=mouseTop1),setSelX(min(p0,p1),abs(p1-p0)),dragY||setSelY(0,yDim)),dragY&&(1==scaleX.ori?(p0=mouseLeft0,p1=mouseLeft1):(p0=mouseTop0,p1=mouseTop1),setSelY(min(p0,p1),abs(p1-p0)),dragX||setSelX(0,xDim)),dragX||dragY||(setSelX(0,0),setSelY(0,0))}if(drag._x=dragX,drag._y=dragY,null==src){if(_pub){if(null!=syncKey){let[xSyncKey,ySyncKey]=syncOpts.scales;syncOpts.values[0]=null!=xSyncKey?posToVal(0==scaleX.ori?mouseLeft1:mouseTop1,xSyncKey):null,syncOpts.values[1]=null!=ySyncKey?posToVal(1==scaleX.ori?mouseLeft1:mouseTop1,ySyncKey):null}pubSync(mousemove,self,mouseLeft1,mouseTop1,plotWidCss,plotHgtCss,idx)}if(cursorFocus){let shouldPub=_pub&&syncOpts.setSeries,p=focus.prox;null==focusedSeries?closestDist<=p&&setSeries(closestSeries,FOCUS_TRUE,!0,shouldPub):closestDist>p?setSeries(null,FOCUS_TRUE,!0,shouldPub):closestSeries!=focusedSeries&&setSeries(closestSeries,FOCUS_TRUE,!0,shouldPub)}}shouldSetLegend&&(legend.idx=idx,setLegend()),!1!==_fire&&fire("setCursor")}self.setLegend=setLegend;let rect=null;function syncRect(defer=!1){defer?rect=null:(rect=over.getBoundingClientRect(),fire("syncRect",rect))}function mouseMove(e,src,_l,_t,_w,_h,_i){cursor._lock||dragging&&null!=e&&0==e.movementX&&0==e.movementY||(cacheMouse(e,src,_l,_t,_w,_h,_i,!1,null!=e),null!=e?updateCursor(null,!0,!0):updateCursor(src,!0,!1))}function cacheMouse(e,src,_l,_t,_w,_h,_i,initial,snap){if(null==rect&&syncRect(!1),setCursorEvent(e),null!=e)_l=e.clientX-rect.left,_t=e.clientY-rect.top;else{if(_l<0||_t<0)return mouseLeft1=-10,void(mouseTop1=-10);let[xKey,yKey]=syncOpts.scales,syncOptsSrc=src.cursor.sync,[xValSrc,yValSrc]=syncOptsSrc.values,[xKeySrc,yKeySrc]=syncOptsSrc.scales,[matchXKeys,matchYKeys]=syncOpts.match,rotSrc=src.axes[0].side%2==1,xDim=0==scaleX.ori?plotWidCss:plotHgtCss,yDim=1==scaleX.ori?plotWidCss:plotHgtCss,_xDim=rotSrc?_h:_w,_yDim=rotSrc?_w:_h,_xPos=rotSrc?_t:_l,_yPos=rotSrc?_l:_t;if(_l=null!=xKeySrc?matchXKeys(xKey,xKeySrc)?getPos(xValSrc,scales[xKey],xDim,0):-10:xDim*(_xPos/_xDim),_t=null!=yKeySrc?matchYKeys(yKey,yKeySrc)?getPos(yValSrc,scales[yKey],yDim,0):-10:yDim*(_yPos/_yDim),1==scaleX.ori){let __l=_l;_l=_t,_t=__l}}snap&&((_l<=1||_l>=plotWidCss-1)&&(_l=incrRound(_l,plotWidCss)),(_t<=1||_t>=plotHgtCss-1)&&(_t=incrRound(_t,plotHgtCss))),initial?(rawMouseLeft0=_l,rawMouseTop0=_t,[mouseLeft0,mouseTop0]=cursor.move(self,_l,_t)):(mouseLeft1=_l,mouseTop1=_t)}Object.defineProperty(self,"rect",{get(){return null==rect&&syncRect(!1),rect}});const _hideProps={width:0,height:0,left:0,top:0};function hideSelect(){setSelect(_hideProps,!1)}let downSelectLeft,downSelectTop,downSelectWidth,downSelectHeight;function mouseDown(e,src,_l,_t,_w,_h,_i){dragging=!0,dragX=dragY=drag._x=drag._y=!1,cacheMouse(e,src,_l,_t,_w,_h,0,!0,!1),null!=e&&(onMouse(mouseup,doc,mouseUp,!1),pubSync(mousedown,self,mouseLeft0,mouseTop0,plotWidCss,plotHgtCss,null));let{left:left,top:top,width:width,height:height}=select;downSelectLeft=left,downSelectTop=top,downSelectWidth=width,downSelectHeight=height,hideSelect()}function mouseUp(e,src,_l,_t,_w,_h,_i){dragging=drag._x=drag._y=!1,cacheMouse(e,src,_l,_t,_w,_h,0,!1,!0);let{left:left,top:top,width:width,height:height}=select,hasSelect=width>0||height>0,chgSelect=downSelectLeft!=left||downSelectTop!=top||downSelectWidth!=width||downSelectHeight!=height;if(hasSelect&&chgSelect&&setSelect(select),drag.setScale&&hasSelect&&chgSelect){let xOff=left,xDim=width,yOff=top,yDim=height;if(1==scaleX.ori&&(xOff=top,xDim=height,yOff=left,yDim=width),dragX&&_setScale(xScaleKey,posToVal(xOff,xScaleKey),posToVal(xOff+xDim,xScaleKey)),dragY)for(let k in scales){let sc=scales[k];k!=xScaleKey&&null==sc.from&&sc.min!=inf&&_setScale(k,posToVal(yOff+yDim,k),posToVal(yOff,k))}hideSelect()}else cursor.lock&&(cursor._lock=!cursor._lock,updateCursor(null,!0,!1));null!=e&&(offMouse(mouseup,doc),pubSync(mouseup,self,mouseLeft1,mouseTop1,plotWidCss,plotHgtCss,null))}function dblClick(e,src,_l,_t,_w,_h,_i){cursor._lock||(setCursorEvent(e),autoScaleX(),hideSelect(),null!=e&&pubSync(dblclick,self,mouseLeft1,mouseTop1,plotWidCss,plotHgtCss,null))}function syncPxRatio(){axes.forEach(syncFontSize),_setSize(self.width,self.height,!0)}on(dppxchange,win,syncPxRatio);const events={};events.mousedown=mouseDown,events.mousemove=mouseMove,events.mouseup=mouseUp,events.dblclick=dblClick,events.setSeries=(e,src,idx,opts)=>{-1!=(idx=(0,syncOpts.match[2])(self,src,idx))&&setSeries(idx,opts,!0,!1)},cursor.show&&(onMouse(mousedown,over,mouseDown),onMouse(mousemove,over,mouseMove),onMouse(mouseenter,over,(e=>{setCursorEvent(e),syncRect(!1)})),onMouse(mouseleave,over,(function mouseLeave(e,src,_l,_t,_w,_h,_i){if(cursor._lock)return;setCursorEvent(e);let _dragging=dragging;if(dragging){let dragH,dragV,snapH=!0,snapV=!0,snapProx=10;0==scaleX.ori?(dragH=dragX,dragV=dragY):(dragH=dragY,dragV=dragX),dragH&&dragV&&(snapH=mouseLeft1<=snapProx||mouseLeft1>=plotWidCss-snapProx,snapV=mouseTop1<=snapProx||mouseTop1>=plotHgtCss-snapProx),dragH&&snapH&&(mouseLeft1=mouseLeft1<mouseLeft0?0:plotWidCss),dragV&&snapV&&(mouseTop1=mouseTop1<mouseTop0?0:plotHgtCss),updateCursor(null,!0,!0),dragging=!1}mouseLeft1=-10,mouseTop1=-10,updateCursor(null,!0,!0),_dragging&&(dragging=_dragging)})),onMouse(dblclick,over,dblClick),cursorPlots.add(self),self.syncRect=syncRect);const hooks=self.hooks=opts.hooks||{};function fire(evName,a1,a2){deferHooks?hooksQueue.push([evName,a1,a2]):evName in hooks&&hooks[evName].forEach((fn=>{fn.call(null,self,a1,a2)}))}(opts.plugins||[]).forEach((p=>{for(let evName in p.hooks)hooks[evName]=(hooks[evName]||[]).concat(p.hooks[evName])}));const seriesIdxMatcher=(self,src,srcSeriesIdx)=>srcSeriesIdx,syncOpts=assign({key:null,setSeries:!1,filters:{pub:retTrue,sub:retTrue},scales:[xScaleKey,series[1]?series[1].scale:null],match:[retEq,retEq,seriesIdxMatcher],values:[null,null]},cursor.sync);2==syncOpts.match.length&&syncOpts.match.push(seriesIdxMatcher),cursor.sync=syncOpts;const syncKey=syncOpts.key,sync=_sync(syncKey);function pubSync(type,src,x,y,w,h,i){syncOpts.filters.pub(type,src,x,y,w,h,i)&&sync.pub(type,src,x,y,w,h,i)}function _init(){fire("init",opts,data),setData(data||opts.data,!1),pendScales[xScaleKey]?setScale(xScaleKey,pendScales[xScaleKey]):autoScaleX(),shouldSetSelect=select.show&&(select.width>0||select.height>0),shouldSetCursor=shouldSetLegend=!0,_setSize(opts.width,opts.height)}return sync.sub(self),self.pub=function pub(type,src,x,y,w,h,i){syncOpts.filters.sub(type,src,x,y,w,h,i)&&events[type](null,src,x,y,w,h,i)},self.destroy=function destroy(){sync.unsub(self),cursorPlots.delete(self),mouseListeners.clear(),off(dppxchange,win,syncPxRatio),root.remove(),legendTable?.remove(),fire("destroy")},series.forEach(initSeries),axes.forEach((function initAxis(axis,i){if(axis._show=axis.show,axis.show){let isVt=axis.side%2,sc=scales[axis.scale];null==sc&&(axis.scale=isVt?series[1].scale:xScaleKey,sc=scales[axis.scale]);let isTime=sc.time;axis.size=fnOrSelf(axis.size),axis.space=fnOrSelf(axis.space),axis.rotate=fnOrSelf(axis.rotate),isArr(axis.incrs)&&axis.incrs.forEach((incr=>{!fixedDec.has(incr)&&fixedDec.set(incr,guessDec(incr))})),axis.incrs=fnOrSelf(axis.incrs||(2==sc.distr?wholeIncrs:isTime?1==ms?timeIncrsMs:timeIncrsS:numIncrs)),axis.splits=fnOrSelf(axis.splits||(isTime&&1==sc.distr?_timeAxisSplits:3==sc.distr?logAxisSplits:4==sc.distr?asinhAxisSplits:numAxisSplits)),axis.stroke=fnOrSelf(axis.stroke),axis.grid.stroke=fnOrSelf(axis.grid.stroke),axis.ticks.stroke=fnOrSelf(axis.ticks.stroke),axis.border.stroke=fnOrSelf(axis.border.stroke);let av=axis.values;axis.values=isArr(av)&&!isArr(av[0])?fnOrSelf(av):isTime?isArr(av)?timeAxisVals(_tzDate,timeAxisStamps(av,_fmtDate)):isStr(av)?function timeAxisVal(tzDate,dateTpl){let stamp=fmtDate(dateTpl);return(self,splits,axisIdx,foundSpace,foundIncr)=>splits.map((split=>stamp(tzDate(split))))}(_tzDate,av):av||_timeAxisVals:av||numAxisVals,axis.filter=fnOrSelf(axis.filter||(sc.distr>=3&&10==sc.log?log10AxisValsFilt:3==sc.distr&&2==sc.log?log2AxisValsFilt:retArg1)),axis.font=pxRatioFont(axis.font),axis.labelFont=pxRatioFont(axis.labelFont),axis._size=axis.size(self,null,i,0),axis._space=axis._rotate=axis._incrs=axis._found=axis._splits=axis._values=null,axis._size>0&&(sidesWithAxes[i]=!0,axis._el=placeDiv(AXIS,wrap))}})),then?then instanceof HTMLElement?(then.appendChild(root),_init()):then(self,_init):_init(),self}uPlot.assign=assign,uPlot.fmtNum=fmtNum,uPlot.rangeNum=rangeNum,uPlot.rangeLog=rangeLog,uPlot.rangeAsinh=rangeAsinh,uPlot.orient=orient,uPlot.pxRatio=pxRatio,uPlot.join=function join(tables,nullModes){if(function allHeadersSame(tables){let vals0=tables[0][0],len0=vals0.length;for(let i=1;i<tables.length;i++){let vals1=tables[i][0];if(vals1.length!=len0)return!1;if(vals1!=vals0)for(let j=0;j<len0;j++)if(vals1[j]!=vals0[j])return!1}return!0}(tables)){let table=tables[0].slice();for(let i=1;i<tables.length;i++)table.push(...tables[i].slice(1));return function isAsc(vals,samples=100){const len=vals.length;if(len<=1)return!0;let firstIdx=0,lastIdx=len-1;for(;firstIdx<=lastIdx&&null==vals[firstIdx];)firstIdx++;for(;lastIdx>=firstIdx&&null==vals[lastIdx];)lastIdx--;if(lastIdx<=firstIdx)return!0;const stride=max(1,floor((lastIdx-firstIdx+1)/samples));for(let prevVal=vals[firstIdx],i=firstIdx+stride;i<=lastIdx;i+=stride){const v=vals[i];if(null!=v){if(v<=prevVal)return!1;prevVal=v}}return!0}(table[0])||(table=function sortCols(table){let head=table[0],rlen=head.length,idxs=Array(rlen);for(let i=0;i<idxs.length;i++)idxs[i]=i;idxs.sort(((i0,i1)=>head[i0]-head[i1]));let table2=[];for(let i=0;i<table.length;i++){let row=table[i],row2=Array(rlen);for(let j=0;j<rlen;j++)row2[j]=row[idxs[j]];table2.push(row2)}return table2}(table)),table}let xVals=new Set;for(let ti=0;ti<tables.length;ti++){let xs=tables[ti][0],len=xs.length;for(let i=0;i<len;i++)xVals.add(xs[i])}let data=[Array.from(xVals).sort(((a,b)=>a-b))],alignedLen=data[0].length,xIdxs=new Map;for(let i=0;i<alignedLen;i++)xIdxs.set(data[0][i],i);for(let ti=0;ti<tables.length;ti++){let t=tables[ti],xs=t[0];for(let si=1;si<t.length;si++){let ys=t[si],yVals=Array(alignedLen).fill(void 0),nullMode=nullModes?nullModes[ti][si]:1,nullIdxs=[];for(let i=0;i<ys.length;i++){let yVal=ys[i],alignedIdx=xIdxs.get(xs[i]);null===yVal?0!=nullMode&&(yVals[alignedIdx]=yVal,2==nullMode&&nullIdxs.push(alignedIdx)):yVals[alignedIdx]=yVal}nullExpand(yVals,nullIdxs,alignedLen),data.push(yVals)}}return data},uPlot.fmtDate=fmtDate,uPlot.tzDate=function tzDate(date,tz){let date2;return"UTC"==tz||"Etc/UTC"==tz?date2=new Date(+date+6e4*date.getTimezoneOffset()):tz==localTz?date2=date:(date2=new Date(date.toLocaleString("en-US",{timeZone:tz})),date2.setMilliseconds(date.getMilliseconds())),date2},uPlot.sync=_sync;{uPlot.addGap=function addGap(gaps,fromX,toX){let prevGap=gaps[gaps.length-1];prevGap&&prevGap[0]==fromX?prevGap[1]=toX:gaps.push([fromX,toX])},uPlot.clipGaps=clipGaps;let paths=uPlot.paths={points:points};paths.linear=linear,paths.stepped=function stepped(opts){const align=ifNull(opts.align,1),ascDesc=ifNull(opts.ascDesc,!1),alignGaps=ifNull(opts.alignGaps,0),extend=ifNull(opts.extend,!1);return(u,seriesIdx,idx0,idx1)=>orient(u,seriesIdx,((series,dataX,dataY,scaleX,scaleY,valToPosX,valToPosY,xOff,yOff,xDim,yDim)=>{let pxRound=series.pxRound,{left:left,width:width}=u.bbox,pixelForX=val=>pxRound(valToPosX(val,scaleX,xDim,xOff)),pixelForY=val=>pxRound(valToPosY(val,scaleY,yDim,yOff)),lineTo=0==scaleX.ori?lineToH:lineToV;const _paths={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:BAND_CLIP_FILL},stroke=_paths.stroke,dir=scaleX.dir*(0==scaleX.ori?1:-1);idx0=nonNullIdx(dataY,idx0,idx1,1),idx1=nonNullIdx(dataY,idx0,idx1,-1);let prevYPos=pixelForY(dataY[1==dir?idx0:idx1]),firstXPos=pixelForX(dataX[1==dir?idx0:idx1]),prevXPos=firstXPos,firstXPosExt=firstXPos;extend&&-1==align&&(firstXPosExt=left,lineTo(stroke,firstXPosExt,prevYPos)),lineTo(stroke,firstXPos,prevYPos);for(let i=1==dir?idx0:idx1;i>=idx0&&i<=idx1;i+=dir){let yVal1=dataY[i];if(null==yVal1)continue;let x1=pixelForX(dataX[i]),y1=pixelForY(yVal1);1==align?lineTo(stroke,x1,prevYPos):lineTo(stroke,prevXPos,y1),lineTo(stroke,x1,y1),prevYPos=y1,prevXPos=x1}let prevXPosExt=prevXPos;extend&&1==align&&(prevXPosExt=left+width,lineTo(stroke,prevXPosExt,prevYPos));let[bandFillDir,bandClipDir]=bandFillClipDirs(u,seriesIdx);if(null!=series.fill||0!=bandFillDir){let fill=_paths.fill=new Path2D(stroke),fillToY=pixelForY(series.fillTo(u,seriesIdx,series.min,series.max,bandFillDir));lineTo(fill,prevXPosExt,fillToY),lineTo(fill,firstXPosExt,fillToY)}if(!series.spanGaps){let gaps=[];gaps.push(...findGaps(dataX,dataY,idx0,idx1,dir,pixelForX,alignGaps));let halfStroke=series.width*pxRatio/2,startsOffset=ascDesc||1==align?halfStroke:-halfStroke,endsOffset=ascDesc||-1==align?-halfStroke:halfStroke;gaps.forEach((g=>{g[0]+=startsOffset,g[1]+=endsOffset})),_paths.gaps=gaps=series.gaps(u,seriesIdx,idx0,idx1,gaps),_paths.clip=clipGaps(gaps,scaleX.ori,xOff,yOff,xDim,yDim)}return 0!=bandClipDir&&(_paths.band=2==bandClipDir?[clipBandLine(u,seriesIdx,idx0,idx1,stroke,-1),clipBandLine(u,seriesIdx,idx0,idx1,stroke,1)]:clipBandLine(u,seriesIdx,idx0,idx1,stroke,bandClipDir)),_paths}))},paths.bars=function bars(opts){const size=ifNull((opts=opts||EMPTY_OBJ).size,[.6,inf,1]),align=opts.align||0,_extraGap=opts.gap||0;let ro=opts.radius;ro=null==ro?[0,0]:"number"==typeof ro?[ro,0]:ro;const radiusFn=fnOrSelf(ro),gapFactor=1-size[0],_maxWidth=ifNull(size[1],inf),_minWidth=ifNull(size[2],1),disp=ifNull(opts.disp,EMPTY_OBJ),_each=ifNull(opts.each,(_=>{})),{fill:dispFills,stroke:dispStrokes}=disp;return(u,seriesIdx,idx0,idx1)=>orient(u,seriesIdx,((series,dataX,dataY,scaleX,scaleY,valToPosX,valToPosY,xOff,yOff,xDim,yDim)=>{let valRadius,baseRadius,pxRound=series.pxRound,_align=align,extraGap=_extraGap*pxRatio,maxWidth=_maxWidth*pxRatio,minWidth=_minWidth*pxRatio;0==scaleX.ori?[valRadius,baseRadius]=radiusFn(u,seriesIdx):[baseRadius,valRadius]=radiusFn(u,seriesIdx);const _dirX=scaleX.dir*(0==scaleX.ori?1:-1);let xShift,barWid,fullGap,rect=0==scaleX.ori?rectH:rectV,each=0==scaleX.ori?_each:(u,seriesIdx,i,top,lft,hgt,wid)=>{_each(u,seriesIdx,i,lft,top,wid,hgt)},band=ifNull(u.bands,EMPTY_ARR).find((b=>b.series[0]==seriesIdx)),fillDir=null!=band?band.dir:0,fillTo=series.fillTo(u,seriesIdx,series.min,series.max,fillDir),fillToY=pxRound(valToPosY(fillTo,scaleY,yDim,yOff)),colWid=xDim,strokeWidth=pxRound(series.width*pxRatio),multiPath=!1,fillColors=null,fillPaths=null,strokeColors=null,strokePaths=null;null==dispFills||0!=strokeWidth&&null==dispStrokes||(multiPath=!0,fillColors=dispFills.values(u,seriesIdx,idx0,idx1),fillPaths=new Map,new Set(fillColors).forEach((color=>{null!=color&&fillPaths.set(color,new Path2D)})),strokeWidth>0&&(strokeColors=dispStrokes.values(u,seriesIdx,idx0,idx1),strokePaths=new Map,new Set(strokeColors).forEach((color=>{null!=color&&strokePaths.set(color,new Path2D)}))));let{x0:x0,size:size}=disp;if(null!=x0&&null!=size){_align=1,dataX=x0.values(u,seriesIdx,idx0,idx1),2==x0.unit&&(dataX=dataX.map((pct=>u.posToVal(xOff+pct*xDim,scaleX.key,!0))));let sizes=size.values(u,seriesIdx,idx0,idx1);barWid=2==size.unit?sizes[0]*xDim:valToPosX(sizes[0],scaleX,xDim,xOff)-valToPosX(0,scaleX,xDim,xOff),colWid=findColWidth(dataX,dataY,valToPosX,scaleX,xDim,xOff,colWid),fullGap=colWid-barWid+extraGap}else colWid=findColWidth(dataX,dataY,valToPosX,scaleX,xDim,xOff,colWid),fullGap=colWid*gapFactor+extraGap,barWid=colWid-fullGap;fullGap<1&&(fullGap=0),strokeWidth>=barWid/2&&(strokeWidth=0),fullGap<5&&(pxRound=retArg0);let insetStroke=fullGap>0;barWid=pxRound(clamp(colWid-fullGap-(insetStroke?strokeWidth:0),minWidth,maxWidth)),xShift=(0==_align?barWid/2:_align==_dirX?0:barWid)-_align*_dirX*((0==_align?extraGap/2:0)+(insetStroke?strokeWidth/2:0));const _paths={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},stroke=multiPath?null:new Path2D;let dataY0=null;if(null!=band)dataY0=u.data[band.series[1]];else{let{y0:y0,y1:y1}=disp;null!=y0&&null!=y1&&(dataY=y1.values(u,seriesIdx,idx0,idx1),dataY0=y0.values(u,seriesIdx,idx0,idx1))}let radVal=valRadius*barWid,radBase=baseRadius*barWid;for(let i=1==_dirX?idx0:idx1;i>=idx0&&i<=idx1;i+=_dirX){let yVal=dataY[i];if(null==yVal)continue;if(null!=dataY0){let yVal0=dataY0[i]??0;if(yVal-yVal0==0)continue;fillToY=valToPosY(yVal0,scaleY,yDim,yOff)}let xPos=valToPosX(2!=scaleX.distr||null!=disp?dataX[i]:i,scaleX,xDim,xOff),yPos=valToPosY(ifNull(yVal,fillTo),scaleY,yDim,yOff),lft=pxRound(xPos-xShift),btm=pxRound(max(yPos,fillToY)),top=pxRound(min(yPos,fillToY)),barHgt=btm-top;if(null!=yVal){let rv=yVal<0?radBase:radVal,rb=yVal<0?radVal:radBase;multiPath?(strokeWidth>0&&null!=strokeColors[i]&&rect(strokePaths.get(strokeColors[i]),lft,top+floor(strokeWidth/2),barWid,max(0,barHgt-strokeWidth),rv,rb),null!=fillColors[i]&&rect(fillPaths.get(fillColors[i]),lft,top+floor(strokeWidth/2),barWid,max(0,barHgt-strokeWidth),rv,rb)):rect(stroke,lft,top+floor(strokeWidth/2),barWid,max(0,barHgt-strokeWidth),rv,rb),each(u,seriesIdx,i,lft-strokeWidth/2,top,barWid+strokeWidth,barHgt)}}return strokeWidth>0?_paths.stroke=multiPath?strokePaths:stroke:multiPath||(_paths._fill=0==series.width?series._fill:series._stroke??series._fill,_paths.width=0),_paths.fill=multiPath?fillPaths:stroke,_paths}))},paths.spline=function monotoneCubic(opts){return function splineInterp(interp,opts){const alignGaps=ifNull(opts?.alignGaps,0);return(u,seriesIdx,idx0,idx1)=>orient(u,seriesIdx,((series,dataX,dataY,scaleX,scaleY,valToPosX,valToPosY,xOff,yOff,xDim,yDim)=>{let moveTo,bezierCurveTo,lineTo,pxRound=series.pxRound,pixelForX=val=>pxRound(valToPosX(val,scaleX,xDim,xOff)),pixelForY=val=>pxRound(valToPosY(val,scaleY,yDim,yOff));0==scaleX.ori?(moveTo=moveToH,lineTo=lineToH,bezierCurveTo=bezierCurveToH):(moveTo=moveToV,lineTo=lineToV,bezierCurveTo=bezierCurveToV);const dir=scaleX.dir*(0==scaleX.ori?1:-1);idx0=nonNullIdx(dataY,idx0,idx1,1),idx1=nonNullIdx(dataY,idx0,idx1,-1);let firstXPos=pixelForX(dataX[1==dir?idx0:idx1]),prevXPos=firstXPos,xCoords=[],yCoords=[];for(let i=1==dir?idx0:idx1;i>=idx0&&i<=idx1;i+=dir)if(null!=dataY[i]){let xPos=pixelForX(dataX[i]);xCoords.push(prevXPos=xPos),yCoords.push(pixelForY(dataY[i]))}const _paths={stroke:interp(xCoords,yCoords,moveTo,lineTo,bezierCurveTo,pxRound),fill:null,clip:null,band:null,gaps:null,flags:BAND_CLIP_FILL},stroke=_paths.stroke;let[bandFillDir,bandClipDir]=bandFillClipDirs(u,seriesIdx);if(null!=series.fill||0!=bandFillDir){let fill=_paths.fill=new Path2D(stroke),fillToY=pixelForY(series.fillTo(u,seriesIdx,series.min,series.max,bandFillDir));lineTo(fill,prevXPos,fillToY),lineTo(fill,firstXPos,fillToY)}if(!series.spanGaps){let gaps=[];gaps.push(...findGaps(dataX,dataY,idx0,idx1,dir,pixelForX,alignGaps)),_paths.gaps=gaps=series.gaps(u,seriesIdx,idx0,idx1,gaps),_paths.clip=clipGaps(gaps,scaleX.ori,xOff,yOff,xDim,yDim)}return 0!=bandClipDir&&(_paths.band=2==bandClipDir?[clipBandLine(u,seriesIdx,idx0,idx1,stroke,-1),clipBandLine(u,seriesIdx,idx0,idx1,stroke,1)]:clipBandLine(u,seriesIdx,idx0,idx1,stroke,bandClipDir)),_paths}))}(_monotoneCubic,opts)}}}}]);