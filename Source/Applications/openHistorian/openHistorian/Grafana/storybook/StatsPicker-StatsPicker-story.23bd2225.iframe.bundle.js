"use strict";(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[4446],{"../../node_modules/@storybook/addon-actions/dist/index.mjs":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{XI:function(){return action}});var v4=__webpack_require__("../../node_modules/uuid/dist/esm-browser/v4.js"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("@storybook/core-events/preview-errors"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name:name,deprecated:deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id:id,count:0,data:{name:name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}},"../grafana-data/src/types/plugin.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var PluginState,PluginType,PluginSignatureStatus,PluginSignatureType,PluginErrorCode,PluginLoadingStrategy,PluginIncludeType;__webpack_require__.d(__webpack_exports__,{Ac:function(){return PluginSignatureStatus},kv:function(){return PluginSignatureType},pn:function(){return PluginState}}),function(PluginState){PluginState.alpha="alpha",PluginState.beta="beta",PluginState.stable="stable",PluginState.deprecated="deprecated"}(PluginState||(PluginState={})),function(PluginType){PluginType.panel="panel",PluginType.datasource="datasource",PluginType.app="app",PluginType.renderer="renderer",PluginType.secretsmanager="secretsmanager"}(PluginType||(PluginType={})),function(PluginSignatureStatus){PluginSignatureStatus.internal="internal",PluginSignatureStatus.valid="valid",PluginSignatureStatus.invalid="invalid",PluginSignatureStatus.modified="modified",PluginSignatureStatus.missing="missing"}(PluginSignatureStatus||(PluginSignatureStatus={})),function(PluginSignatureType){PluginSignatureType.grafana="grafana",PluginSignatureType.commercial="commercial",PluginSignatureType.community="community",PluginSignatureType.private="private",PluginSignatureType.core="core"}(PluginSignatureType||(PluginSignatureType={})),function(PluginErrorCode){PluginErrorCode.missingSignature="signatureMissing",PluginErrorCode.invalidSignature="signatureInvalid",PluginErrorCode.modifiedSignature="signatureModified",PluginErrorCode.failedBackendStart="failedBackendStart",PluginErrorCode.angular="angular"}(PluginErrorCode||(PluginErrorCode={})),function(PluginLoadingStrategy){PluginLoadingStrategy.fetch="fetch",PluginLoadingStrategy.script="script"}(PluginLoadingStrategy||(PluginLoadingStrategy={})),function(PluginIncludeType){PluginIncludeType.dashboard="dashboard",PluginIncludeType.page="page",PluginIncludeType.panel="panel",PluginIncludeType.datasource="datasource"}(PluginIncludeType||(PluginIncludeType={}))},"../grafana-data/src/utils/Registry.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{O:function(){return Registry}});var _types_plugin__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../grafana-data/src/types/plugin.ts");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Registry=function(){function Registry(init){var _this=this;!function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Registry),_define_property(this,"init",void 0),_define_property(this,"ordered",void 0),_define_property(this,"byId",void 0),_define_property(this,"initialized",void 0),_define_property(this,"setInit",void 0),this.init=init,this.ordered=[],this.byId=new Map,this.initialized=!1,this.setInit=function(init){if(_this.initialized)throw new Error("Registry already initialized");_this.init=init},this.init=init}return function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Registry,[{key:"getIfExists",value:function getIfExists(id){if(this.initialized||this.initialize(),id)return this.byId.get(id)}},{key:"initialize",value:function initialize(){if(this.init){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.init()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var ext=_step.value;this.register(ext)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}this.sort(),this.initialized=!0}},{key:"get",value:function get(id){var v=this.getIfExists(id);if(!v)throw new Error('"'.concat(id,'" not found in: ').concat(this.list().map((function(v){return v.id}))));return v}},{key:"selectOptions",value:function selectOptions(current,filter){this.initialized||this.initialize();var select={options:[],current:[]},currentOptions={};if(current){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=current[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){currentOptions[_step.value]={}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=this.ordered[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0){var ext=_step1.value;if(!ext.excludeFromPicker&&(!filter||filter(ext))){var option={value:ext.id,label:ext.name,description:ext.description};ext.state===_types_plugin__WEBPACK_IMPORTED_MODULE_0__.pn.alpha&&(option.label+=" (alpha)"),select.options.push(option),currentOptions[ext.id]&&(currentOptions[ext.id]=option)}}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}return current&&(select.current=Object.values(currentOptions)),select}},{key:"list",value:function list(ids){if(this.initialized||this.initialize(),ids){var found=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=ids[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var id=_step.value,v=this.getIfExists(id);v&&found.push(v)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return found}return this.ordered}},{key:"isEmpty",value:function isEmpty(){return this.initialized||this.initialize(),0===this.ordered.length}},{key:"register",value:function register(ext){if(this.byId.has(ext.id))throw new Error("Duplicate Key:"+ext.id);if(this.byId.set(ext.id,ext),this.ordered.push(ext),ext.aliasIds){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=ext.aliasIds[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var alias=_step.value;this.byId.has(alias)||this.byId.set(alias,ext)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}this.initialized&&this.sort()}},{key:"sort",value:function sort(){}}]),Registry}()},"./src/components/StatsPicker/StatsPicker.story.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Picker:function(){return Picker},default:function(){return StatsPicker_story}});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),dist=__webpack_require__("../../node_modules/@storybook/addon-actions/dist/index.mjs"),react=__webpack_require__("../../node_modules/react/index.js"),lodash=__webpack_require__("../../node_modules/lodash/lodash.js"),fieldReducer=__webpack_require__("../grafana-data/src/transformations/fieldReducer.ts"),Select=__webpack_require__("./src/components/Select/Select.tsx");function _assert_this_initialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_get_prototype_of(o)}function _possible_constructor_return(self,call){return!call||"object"!==function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}(call)&&"function"!=typeof call?_assert_this_initialized(self):call}function _set_prototype_of(o,p){return _set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o},_set_prototype_of(o,p)}function _create_super(Derived){var hasNativeReflectConstruct=function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possible_constructor_return(this,result)}}var StatsPicker=function(PureComponent){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}(StatsPicker,PureComponent);var _super=_create_super(StatsPicker);function StatsPicker(){var _this;return function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,StatsPicker),_define_property(_assert_this_initialized(_this=_super.apply(this,arguments)),"checkInput",(function(){var _this_props=_this.props,stats=_this_props.stats,allowMultiple=_this_props.allowMultiple,defaultStat=_this_props.defaultStat,onChange=_this_props.onChange,current=fieldReducer.AS.list(stats);if(current.length!==stats.length){var found=current.map((function(v){return v.id})),notFound=(0,lodash.difference)(stats,found);console.warn("Unknown stats",notFound,stats),onChange(current.map((function(stat){return stat.id})))}!allowMultiple&&stats.length>1&&(console.warn("Removing extra stat",stats),onChange([stats[0]])),defaultStat&&stats.length<1&&onChange([defaultStat])})),_define_property(_assert_this_initialized(_this),"onSelectionChange",(function(item){var onChange=_this.props.onChange;Array.isArray(item)?onChange(item.map((function(v){return v.value}))):onChange(item&&item.value?[item.value]:[])})),_this}return function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StatsPicker,[{key:"componentDidMount",value:function componentDidMount(){this.checkInput()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){this.checkInput()}},{key:"render",value:function render(){var _this_props=this.props,stats=_this_props.stats,allowMultiple=_this_props.allowMultiple,defaultStat=_this_props.defaultStat,placeholder=_this_props.placeholder,className=_this_props.className,menuPlacement=_this_props.menuPlacement,width=_this_props.width,inputId=_this_props.inputId,filterOptions=_this_props.filterOptions,select=fieldReducer.AS.selectOptions(stats,filterOptions);return(0,jsx_runtime.jsx)(Select.l6,{value:select.current,className:className,isClearable:!defaultStat,isMulti:allowMultiple,width:width,isSearchable:!0,options:select.options,placeholder:placeholder,onChange:this.onSelectionChange,menuPlacement:menuPlacement,inputId:inputId})}}]),StatsPicker}(react.PureComponent);_define_property(StatsPicker,"defaultProps",{allowMultiple:!1});try{StatsPicker.displayName="StatsPicker",StatsPicker.__docgenInfo={description:"",displayName:"StatsPicker",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(stats: string[]) => void"}},stats:{defaultValue:null,description:"",name:"stats",required:!0,type:{name:"string[]"}},allowMultiple:{defaultValue:{value:"false"},description:"",name:"allowMultiple",required:!1,type:{name:"boolean"}},defaultStat:{defaultValue:null,description:"",name:"defaultStat",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},menuPlacement:{defaultValue:null,description:"",name:"menuPlacement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"bottom"'},{value:'"top"'}]}},inputId:{defaultValue:null,description:"",name:"inputId",required:!1,type:{name:"string"}},filterOptions:{defaultValue:null,description:"",name:"filterOptions",required:!1,type:{name:"((ext: FieldReducerInfo) => boolean)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/StatsPicker/StatsPicker.tsx#StatsPicker"]={docgenInfo:StatsPicker.__docgenInfo,name:"StatsPicker",path:"src/components/StatsPicker/StatsPicker.tsx#StatsPicker"})}catch(__react_docgen_typescript_loader_error){}function StatsPicker_story_assert_this_initialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function StatsPicker_story_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function StatsPicker_story_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function StatsPicker_story_get_prototype_of(o){return StatsPicker_story_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},StatsPicker_story_get_prototype_of(o)}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){StatsPicker_story_define_property(target,key,source[key])}))}return target}function StatsPicker_story_possible_constructor_return(self,call){return!call||"object"!==function StatsPicker_story_type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}(call)&&"function"!=typeof call?StatsPicker_story_assert_this_initialized(self):call}function StatsPicker_story_set_prototype_of(o,p){return StatsPicker_story_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o},StatsPicker_story_set_prototype_of(o,p)}function StatsPicker_story_create_super(Derived){var hasNativeReflectConstruct=function StatsPicker_story_is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=StatsPicker_story_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=StatsPicker_story_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return StatsPicker_story_possible_constructor_return(this,result)}}var WrapperWithState=function(PureComponent){!function StatsPicker_story_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&StatsPicker_story_set_prototype_of(subClass,superClass)}(WrapperWithState,PureComponent);var _super=StatsPicker_story_create_super(WrapperWithState);function WrapperWithState(props){var _this;return function StatsPicker_story_class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,WrapperWithState),StatsPicker_story_define_property(StatsPicker_story_assert_this_initialized(_this=_super.call(this,props)),"toStatsArray",(function(txt){return txt?txt.split(",").map((function(v){return v.trim()})):[]})),_this.state={stats:_this.toStatsArray(props.initialReducers)},_this}return function StatsPicker_story_create_class(Constructor,protoProps,staticProps){return protoProps&&StatsPicker_story_defineProperties(Constructor.prototype,protoProps),staticProps&&StatsPicker_story_defineProperties(Constructor,staticProps),Constructor}(WrapperWithState,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var initialReducers=this.props.initialReducers;initialReducers!==prevProps.initialReducers&&(console.log("Changing initial reducers"),this.setState({stats:this.toStatsArray(initialReducers)}))}},{key:"render",value:function render(){var _this=this,_this_props=this.props,placeholder=_this_props.placeholder,allowMultiple=_this_props.allowMultiple,menuPlacement=_this_props.menuPlacement,width=_this_props.width,stats=this.state.stats;return(0,jsx_runtime.jsx)(StatsPicker,{placeholder:placeholder,allowMultiple:allowMultiple,stats:stats,onChange:function(stats){(0,dist.XI)("Picked:")(stats),_this.setState({stats:stats})},menuPlacement:menuPlacement,width:width})}}]),WrapperWithState}(react.PureComponent),meta={title:"Pickers and Editors/StatsPicker",component:StatsPicker,parameters:{controls:{exclude:["onChange","stats","defaultStat","className"]}}},Picker=function(args){return(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(WrapperWithState,_object_spread({},args))})};Picker.args={placeholder:"placeholder",allowMultiple:!1,menuPlacement:"auto",width:10};var StatsPicker_story=meta;Picker.parameters={...Picker.parameters,docs:{...Picker.parameters?.docs,source:{originalSource:"args => {\n  return <div>\n      <WrapperWithState {...args} />\n    </div>;\n}",...Picker.parameters?.docs?.source}}}}}]);