/*! For license information please see 9428.e1f36aef.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_grafana_ui=self.webpackChunk_grafana_ui||[]).push([[9428],{"../../node_modules/calculate-size/lib/index.js":function(__unused_webpack_module,exports){"use strict";var cache={};exports.A=function(text,options){void 0===options&&(options={});var cacheKey=JSON.stringify({text:text,options:options});if(cache[cacheKey])return cache[cacheKey];options.font=options.font||"Times",options.fontSize=options.fontSize||"16px",options.fontWeight=options.fontWeight||"normal",options.width=options.width||"auto";var element=function createDummyElement(text,options){var element=document.createElement("div"),textNode=document.createTextNode(text);return element.appendChild(textNode),element.style.fontFamily=options.font,element.style.fontSize=options.fontSize,element.style.fontWeight=options.fontWeight,element.style.position="absolute",element.style.visibility="hidden",element.style.left="-999px",element.style.top="-999px",element.style.width=options.width,element.style.height="auto",document.body.appendChild(element),element}(text,options),size={width:element.offsetWidth,height:element.offsetHeight};return function destroyElement(element){element.parentNode.removeChild(element)}(element),cache[cacheKey]=size,size}},"../../node_modules/classnames/index.js":function(module,exports){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes="",i=0;i<arguments.length;i++){var arg=arguments[i];arg&&(classes=appendClass(classes,parseValue(arg)))}return classes}function parseValue(arg){if("string"==typeof arg||"number"==typeof arg)return arg;if("object"!=typeof arg)return"";if(Array.isArray(arg))return classNames.apply(null,arg);if(arg.toString!==Object.prototype.toString&&!arg.toString.toString().includes("[native code]"))return arg.toString();var classes="";for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&(classes=appendClass(classes,key));return classes}function appendClass(value,newClass){return newClass?value?value+" "+newClass:value+newClass:value}module.exports?(classNames.default=classNames,module.exports=classNames):void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"../../node_modules/direction/index.js":function(module){"use strict";var EXPRESSION_LEFT_TO_RIGHT,EXPRESSION_RIGHT_TO_LEFT;EXPRESSION_LEFT_TO_RIGHT=new RegExp("^[^֑-߿יִ-﷽ﹰ-ﻼ]*[A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿]"),EXPRESSION_RIGHT_TO_LEFT=new RegExp("^[^A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿]*[֑-߿יִ-﷽ﹰ-ﻼ]"),module.exports=function direction(value){return value=value.toString(),EXPRESSION_RIGHT_TO_LEFT.test(value)?"rtl":EXPRESSION_LEFT_TO_RIGHT.test(value)?"ltr":"neutral"}},"../../node_modules/esrever/esrever.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;module=__webpack_require__.nmd(module),function(root){var freeExports=exports,freeGlobal=(module&&module.exports,"object"==typeof __webpack_require__.g&&__webpack_require__.g);freeGlobal.global!==freeGlobal&&freeGlobal.window;var regexSymbolWithCombiningMarks=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,regexSurrogatePair=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,reverse=function(string){for(var result="",index=(string=string.replace(regexSymbolWithCombiningMarks,(function($0,$1,$2){return reverse($2)+$1})).replace(regexSurrogatePair,"$2$1")).length;index--;)result+=string.charAt(index);return result},esrever={version:"0.2.0",reverse:reverse};void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return esrever}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"../../node_modules/get-document/index.js":function(module){module.exports=function getDocument(node){if(isDocument(node))return node;if(isDocument(node.ownerDocument))return node.ownerDocument;if(isDocument(node.document))return node.document;if(node.parentNode)return getDocument(node.parentNode);if(node.commonAncestorContainer)return getDocument(node.commonAncestorContainer);if(node.startContainer)return getDocument(node.startContainer);if(node.anchorNode)return getDocument(node.anchorNode)};var DOCUMENT_NODE=9;function isDocument(d){return d&&d.nodeType===DOCUMENT_NODE}},"../../node_modules/get-window/index.js":function(module,__unused_webpack_exports,__webpack_require__){var getDocument=__webpack_require__("../../node_modules/get-document/index.js");module.exports=function getWindow(node){if(function isWindow(w){return w&&w.window===w}(node))return node;var doc=getDocument(node);if(needsIEFallback){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;return doc._parentWindow=null,win}return doc.defaultView||doc.parentWindow};var needsIEFallback=__webpack_require__("../../node_modules/get-window/needs-ie-fallback.br.js")},"../../node_modules/get-window/needs-ie-fallback.br.js":function(module){module.exports=!!document.attachEvent&&window!==document.parentWindow},"../../node_modules/immutable/dist/immutable.es.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Collection:function(){return Collection},Iterable:function(){return Iterable},List:function(){return List},Map:function(){return Map},OrderedMap:function(){return OrderedMap},OrderedSet:function(){return OrderedSet},PairSorting:function(){return PairSorting},Range:function(){return Range},Record:function(){return Record},Repeat:function(){return Repeat},Seq:function(){return Seq},Set:function(){return Set},Stack:function(){return Stack},fromJS:function(){return fromJS},get:function(){return get},getIn:function(){return getIn$1},has:function(){return has},hasIn:function(){return hasIn$1},hash:function(){return hash},is:function(){return is},isAssociative:function(){return isAssociative},isCollection:function(){return isCollection},isImmutable:function(){return isImmutable},isIndexed:function(){return isIndexed},isKeyed:function(){return isKeyed},isList:function(){return isList},isMap:function(){return isMap},isOrdered:function(){return isOrdered},isOrderedMap:function(){return isOrderedMap},isOrderedSet:function(){return isOrderedSet},isPlainObject:function(){return isPlainObject},isRecord:function(){return isRecord},isSeq:function(){return isSeq},isSet:function(){return isSet},isStack:function(){return isStack},isValueObject:function(){return isValueObject},merge:function(){return merge},mergeDeep:function(){return mergeDeep$1},mergeDeepWith:function(){return mergeDeepWith$1},mergeWith:function(){return mergeWith},remove:function(){return remove},removeIn:function(){return removeIn},set:function(){return set},setIn:function(){return setIn$1},update:function(){return update$1},updateIn:function(){return updateIn$1},version:function(){return version}});var SHIFT=5,SIZE=1<<SHIFT,MASK=SIZE-1,NOT_SET={};function SetRef(ref){ref&&(ref.value=!0)}function OwnerID(){}function ensureSize(iter){return void 0===iter.size&&(iter.size=iter.__iterate(returnTrue)),iter.size}function wrapIndex(iter,index){if("number"!=typeof index){var uint32Index=index>>>0;if(""+uint32Index!==index||4294967295===uint32Index)return NaN;index=uint32Index}return index<0?ensureSize(iter)+index:index}function returnTrue(){return!0}function wholeSlice(begin,end,size){return(0===begin&&!isNeg(begin)||void 0!==size&&begin<=-size)&&(void 0===end||void 0!==size&&end>=size)}function resolveBegin(begin,size){return resolveIndex(begin,size,0)}function resolveEnd(end,size){return resolveIndex(end,size,size)}function resolveIndex(index,size,defaultIndex){return void 0===index?defaultIndex:isNeg(index)?size===1/0?size:0|Math.max(0,size+index):void 0===size||size===index?index:0|Math.min(size,index)}function isNeg(value){return value<0||0===value&&1/value==-1/0}var IS_COLLECTION_SYMBOL="@@__IMMUTABLE_ITERABLE__@@";function isCollection(maybeCollection){return Boolean(maybeCollection&&maybeCollection[IS_COLLECTION_SYMBOL])}var IS_KEYED_SYMBOL="@@__IMMUTABLE_KEYED__@@";function isKeyed(maybeKeyed){return Boolean(maybeKeyed&&maybeKeyed[IS_KEYED_SYMBOL])}var IS_INDEXED_SYMBOL="@@__IMMUTABLE_INDEXED__@@";function isIndexed(maybeIndexed){return Boolean(maybeIndexed&&maybeIndexed[IS_INDEXED_SYMBOL])}function isAssociative(maybeAssociative){return isKeyed(maybeAssociative)||isIndexed(maybeAssociative)}var Collection=function Collection(value){return isCollection(value)?value:Seq(value)},KeyedCollection=function(Collection){function KeyedCollection(value){return isKeyed(value)?value:KeyedSeq(value)}return Collection&&(KeyedCollection.__proto__=Collection),KeyedCollection.prototype=Object.create(Collection&&Collection.prototype),KeyedCollection.prototype.constructor=KeyedCollection,KeyedCollection}(Collection),IndexedCollection=function(Collection){function IndexedCollection(value){return isIndexed(value)?value:IndexedSeq(value)}return Collection&&(IndexedCollection.__proto__=Collection),IndexedCollection.prototype=Object.create(Collection&&Collection.prototype),IndexedCollection.prototype.constructor=IndexedCollection,IndexedCollection}(Collection),SetCollection=function(Collection){function SetCollection(value){return isCollection(value)&&!isAssociative(value)?value:SetSeq(value)}return Collection&&(SetCollection.__proto__=Collection),SetCollection.prototype=Object.create(Collection&&Collection.prototype),SetCollection.prototype.constructor=SetCollection,SetCollection}(Collection);Collection.Keyed=KeyedCollection,Collection.Indexed=IndexedCollection,Collection.Set=SetCollection;var IS_SEQ_SYMBOL="@@__IMMUTABLE_SEQ__@@";function isSeq(maybeSeq){return Boolean(maybeSeq&&maybeSeq[IS_SEQ_SYMBOL])}var IS_RECORD_SYMBOL="@@__IMMUTABLE_RECORD__@@";function isRecord(maybeRecord){return Boolean(maybeRecord&&maybeRecord[IS_RECORD_SYMBOL])}function isImmutable(maybeImmutable){return isCollection(maybeImmutable)||isRecord(maybeImmutable)}var IS_ORDERED_SYMBOL="@@__IMMUTABLE_ORDERED__@@";function isOrdered(maybeOrdered){return Boolean(maybeOrdered&&maybeOrdered[IS_ORDERED_SYMBOL])}var ITERATE_KEYS=0,ITERATE_VALUES=1,ITERATE_ENTRIES=2,REAL_ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator",ITERATOR_SYMBOL=REAL_ITERATOR_SYMBOL||FAUX_ITERATOR_SYMBOL,Iterator=function Iterator(next){this.next=next};function iteratorValue(type,k,v,iteratorResult){var value=0===type?k:1===type?v:[k,v];return iteratorResult?iteratorResult.value=value:iteratorResult={value:value,done:!1},iteratorResult}function iteratorDone(){return{value:void 0,done:!0}}function hasIterator(maybeIterable){return!!Array.isArray(maybeIterable)||!!getIteratorFn(maybeIterable)}function isIterator(maybeIterator){return maybeIterator&&"function"==typeof maybeIterator.next}function getIterator(iterable){var iteratorFn=getIteratorFn(iterable);return iteratorFn&&iteratorFn.call(iterable)}function getIteratorFn(iterable){var iteratorFn=iterable&&(REAL_ITERATOR_SYMBOL&&iterable[REAL_ITERATOR_SYMBOL]||iterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}Iterator.prototype.toString=function toString(){return"[Iterator]"},Iterator.KEYS=ITERATE_KEYS,Iterator.VALUES=ITERATE_VALUES,Iterator.ENTRIES=ITERATE_ENTRIES,Iterator.prototype.inspect=Iterator.prototype.toSource=function(){return this.toString()},Iterator.prototype[ITERATOR_SYMBOL]=function(){return this};var hasOwnProperty=Object.prototype.hasOwnProperty;function isArrayLike(value){return!(!Array.isArray(value)&&"string"!=typeof value)||value&&"object"==typeof value&&Number.isInteger(value.length)&&value.length>=0&&(0===value.length?1===Object.keys(value).length:value.hasOwnProperty(value.length-1))}var Seq=function(Collection){function Seq(value){return null==value?emptySequence():isImmutable(value)?value.toSeq():function seqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(seq)return function isEntriesIterable(maybeIterable){var iteratorFn=getIteratorFn(maybeIterable);return iteratorFn&&iteratorFn===maybeIterable.entries}(value)?seq.fromEntrySeq():function isKeysIterable(maybeIterable){var iteratorFn=getIteratorFn(maybeIterable);return iteratorFn&&iteratorFn===maybeIterable.keys}(value)?seq.toSetSeq():seq;if("object"==typeof value)return new ObjectSeq(value);throw new TypeError("Expected Array or collection object of values, or keyed object: "+value)}(value)}return Collection&&(Seq.__proto__=Collection),Seq.prototype=Object.create(Collection&&Collection.prototype),Seq.prototype.constructor=Seq,Seq.prototype.toSeq=function toSeq(){return this},Seq.prototype.toString=function toString(){return this.__toString("Seq {","}")},Seq.prototype.cacheResult=function cacheResult(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},Seq.prototype.__iterate=function __iterate(fn,reverse){var cache=this._cache;if(cache){for(var size=cache.length,i=0;i!==size;){var entry=cache[reverse?size-++i:i++];if(!1===fn(entry[1],entry[0],this))break}return i}return this.__iterateUncached(fn,reverse)},Seq.prototype.__iterator=function __iterator(type,reverse){var cache=this._cache;if(cache){var size=cache.length,i=0;return new Iterator((function(){if(i===size)return{value:void 0,done:!0};var entry=cache[reverse?size-++i:i++];return iteratorValue(type,entry[0],entry[1])}))}return this.__iteratorUncached(type,reverse)},Seq}(Collection),KeyedSeq=function(Seq){function KeyedSeq(value){return null==value?emptySequence().toKeyedSeq():isCollection(value)?isKeyed(value)?value.toSeq():value.fromEntrySeq():isRecord(value)?value.toSeq():keyedSeqFromValue(value)}return Seq&&(KeyedSeq.__proto__=Seq),KeyedSeq.prototype=Object.create(Seq&&Seq.prototype),KeyedSeq.prototype.constructor=KeyedSeq,KeyedSeq.prototype.toKeyedSeq=function toKeyedSeq(){return this},KeyedSeq}(Seq),IndexedSeq=function(Seq){function IndexedSeq(value){return null==value?emptySequence():isCollection(value)?isKeyed(value)?value.entrySeq():value.toIndexedSeq():isRecord(value)?value.toSeq().entrySeq():indexedSeqFromValue(value)}return Seq&&(IndexedSeq.__proto__=Seq),IndexedSeq.prototype=Object.create(Seq&&Seq.prototype),IndexedSeq.prototype.constructor=IndexedSeq,IndexedSeq.of=function of(){return IndexedSeq(arguments)},IndexedSeq.prototype.toIndexedSeq=function toIndexedSeq(){return this},IndexedSeq.prototype.toString=function toString(){return this.__toString("Seq [","]")},IndexedSeq}(Seq),SetSeq=function(Seq){function SetSeq(value){return(isCollection(value)&&!isAssociative(value)?value:IndexedSeq(value)).toSetSeq()}return Seq&&(SetSeq.__proto__=Seq),SetSeq.prototype=Object.create(Seq&&Seq.prototype),SetSeq.prototype.constructor=SetSeq,SetSeq.of=function of(){return SetSeq(arguments)},SetSeq.prototype.toSetSeq=function toSetSeq(){return this},SetSeq}(Seq);Seq.isSeq=isSeq,Seq.Keyed=KeyedSeq,Seq.Set=SetSeq,Seq.Indexed=IndexedSeq,Seq.prototype[IS_SEQ_SYMBOL]=!0;var ArraySeq=function(IndexedSeq){function ArraySeq(array){this._array=array,this.size=array.length}return IndexedSeq&&(ArraySeq.__proto__=IndexedSeq),ArraySeq.prototype=Object.create(IndexedSeq&&IndexedSeq.prototype),ArraySeq.prototype.constructor=ArraySeq,ArraySeq.prototype.get=function get(index,notSetValue){return this.has(index)?this._array[wrapIndex(this,index)]:notSetValue},ArraySeq.prototype.__iterate=function __iterate(fn,reverse){for(var array=this._array,size=array.length,i=0;i!==size;){var ii=reverse?size-++i:i++;if(!1===fn(array[ii],ii,this))break}return i},ArraySeq.prototype.__iterator=function __iterator(type,reverse){var array=this._array,size=array.length,i=0;return new Iterator((function(){if(i===size)return{value:void 0,done:!0};var ii=reverse?size-++i:i++;return iteratorValue(type,ii,array[ii])}))},ArraySeq}(IndexedSeq),ObjectSeq=function(KeyedSeq){function ObjectSeq(object){var keys=Object.keys(object).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(object):[]);this._object=object,this._keys=keys,this.size=keys.length}return KeyedSeq&&(ObjectSeq.__proto__=KeyedSeq),ObjectSeq.prototype=Object.create(KeyedSeq&&KeyedSeq.prototype),ObjectSeq.prototype.constructor=ObjectSeq,ObjectSeq.prototype.get=function get(key,notSetValue){return void 0===notSetValue||this.has(key)?this._object[key]:notSetValue},ObjectSeq.prototype.has=function has(key){return hasOwnProperty.call(this._object,key)},ObjectSeq.prototype.__iterate=function __iterate(fn,reverse){for(var object=this._object,keys=this._keys,size=keys.length,i=0;i!==size;){var key=keys[reverse?size-++i:i++];if(!1===fn(object[key],key,this))break}return i},ObjectSeq.prototype.__iterator=function __iterator(type,reverse){var object=this._object,keys=this._keys,size=keys.length,i=0;return new Iterator((function(){if(i===size)return{value:void 0,done:!0};var key=keys[reverse?size-++i:i++];return iteratorValue(type,key,object[key])}))},ObjectSeq}(KeyedSeq);ObjectSeq.prototype[IS_ORDERED_SYMBOL]=!0;var EMPTY_SEQ,CollectionSeq=function(IndexedSeq){function CollectionSeq(collection){this._collection=collection,this.size=collection.length||collection.size}return IndexedSeq&&(CollectionSeq.__proto__=IndexedSeq),CollectionSeq.prototype=Object.create(IndexedSeq&&IndexedSeq.prototype),CollectionSeq.prototype.constructor=CollectionSeq,CollectionSeq.prototype.__iterateUncached=function __iterateUncached(fn,reverse){if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterator=getIterator(this._collection),iterations=0;if(isIterator(iterator))for(var step;!(step=iterator.next()).done&&!1!==fn(step.value,iterations++,this););return iterations},CollectionSeq.prototype.__iteratorUncached=function __iteratorUncached(type,reverse){if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=getIterator(this._collection);if(!isIterator(iterator))return new Iterator(iteratorDone);var iterations=0;return new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,iterations++,step.value)}))},CollectionSeq}(IndexedSeq);function emptySequence(){return EMPTY_SEQ||(EMPTY_SEQ=new ArraySeq([]))}function keyedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(seq)return seq.fromEntrySeq();if("object"==typeof value)return new ObjectSeq(value);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+value)}function indexedSeqFromValue(value){var seq=maybeIndexedSeqFromValue(value);if(seq)return seq;throw new TypeError("Expected Array or collection object of values: "+value)}function maybeIndexedSeqFromValue(value){return isArrayLike(value)?new ArraySeq(value):hasIterator(value)?new CollectionSeq(value):void 0}var IS_MAP_SYMBOL="@@__IMMUTABLE_MAP__@@";function isMap(maybeMap){return Boolean(maybeMap&&maybeMap[IS_MAP_SYMBOL])}function isOrderedMap(maybeOrderedMap){return isMap(maybeOrderedMap)&&isOrdered(maybeOrderedMap)}function isValueObject(maybeValue){return Boolean(maybeValue&&"function"==typeof maybeValue.equals&&"function"==typeof maybeValue.hashCode)}function is(valueA,valueB){if(valueA===valueB||valueA!=valueA&&valueB!=valueB)return!0;if(!valueA||!valueB)return!1;if("function"==typeof valueA.valueOf&&"function"==typeof valueB.valueOf){if((valueA=valueA.valueOf())===(valueB=valueB.valueOf())||valueA!=valueA&&valueB!=valueB)return!0;if(!valueA||!valueB)return!1}return!!(isValueObject(valueA)&&isValueObject(valueB)&&valueA.equals(valueB))}var imul="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function imul(a,b){var c=65535&(a|=0),d=65535&(b|=0);return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0};function smi(i32){return i32>>>1&1073741824|3221225471&i32}var defaultValueOf=Object.prototype.valueOf;function hash(o){if(null==o)return hashNullish(o);if("function"==typeof o.hashCode)return smi(o.hashCode(o));var v=function valueOf(obj){return obj.valueOf!==defaultValueOf&&"function"==typeof obj.valueOf?obj.valueOf(obj):obj}(o);if(null==v)return hashNullish(v);switch(typeof v){case"boolean":return v?1108378657:1108378656;case"number":return function hashNumber(n){if(n!=n||n===1/0)return 0;var hash=0|n;hash!==n&&(hash^=4294967295*n);for(;n>4294967295;)hash^=n/=4294967295;return smi(hash)}(v);case"string":return v.length>STRING_HASH_CACHE_MIN_STRLEN?function cachedHashString(string){var hashed=stringHashCache[string];void 0===hashed&&(hashed=hashString(string),STRING_HASH_CACHE_SIZE===STRING_HASH_CACHE_MAX_SIZE&&(STRING_HASH_CACHE_SIZE=0,stringHashCache={}),STRING_HASH_CACHE_SIZE++,stringHashCache[string]=hashed);return hashed}(v):hashString(v);case"object":case"function":return function hashJSObj(obj){var hashed;if(usingWeakMap&&void 0!==(hashed=weakMap.get(obj)))return hashed;if(void 0!==(hashed=obj[UID_HASH_KEY]))return hashed;if(!canDefineProperty){if(void 0!==(hashed=obj.propertyIsEnumerable&&obj.propertyIsEnumerable[UID_HASH_KEY]))return hashed;if(void 0!==(hashed=function getIENodeHash(node){if(node&&node.nodeType>0)switch(node.nodeType){case 1:return node.uniqueID;case 9:return node.documentElement&&node.documentElement.uniqueID}}(obj)))return hashed}if(hashed=nextHash(),usingWeakMap)weakMap.set(obj,hashed);else{if(void 0!==isExtensible&&!1===isExtensible(obj))throw new Error("Non-extensible objects are not allowed as keys.");if(canDefineProperty)Object.defineProperty(obj,UID_HASH_KEY,{enumerable:!1,configurable:!1,writable:!1,value:hashed});else if(void 0!==obj.propertyIsEnumerable&&obj.propertyIsEnumerable===obj.constructor.prototype.propertyIsEnumerable)obj.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},obj.propertyIsEnumerable[UID_HASH_KEY]=hashed;else{if(void 0===obj.nodeType)throw new Error("Unable to set a non-enumerable property on object.");obj[UID_HASH_KEY]=hashed}}return hashed}(v);case"symbol":return function hashSymbol(sym){var hashed=symbolMap[sym];if(void 0!==hashed)return hashed;return hashed=nextHash(),symbolMap[sym]=hashed,hashed}(v);default:if("function"==typeof v.toString)return hashString(v.toString());throw new Error("Value type "+typeof v+" cannot be hashed.")}}function hashNullish(nullish){return null===nullish?1108378658:1108378659}function hashString(string){for(var hashed=0,ii=0;ii<string.length;ii++)hashed=31*hashed+string.charCodeAt(ii)|0;return smi(hashed)}var isExtensible=Object.isExtensible,canDefineProperty=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function nextHash(){var nextHash=++_objHashUID;return 1073741824&_objHashUID&&(_objHashUID=0),nextHash}var weakMap,usingWeakMap="function"==typeof WeakMap;usingWeakMap&&(weakMap=new WeakMap);var symbolMap=Object.create(null),_objHashUID=0,UID_HASH_KEY="__immutablehash__";"function"==typeof Symbol&&(UID_HASH_KEY=Symbol(UID_HASH_KEY));var STRING_HASH_CACHE_MIN_STRLEN=16,STRING_HASH_CACHE_MAX_SIZE=255,STRING_HASH_CACHE_SIZE=0,stringHashCache={},ToKeyedSequence=function(KeyedSeq){function ToKeyedSequence(indexed,useKeys){this._iter=indexed,this._useKeys=useKeys,this.size=indexed.size}return KeyedSeq&&(ToKeyedSequence.__proto__=KeyedSeq),ToKeyedSequence.prototype=Object.create(KeyedSeq&&KeyedSeq.prototype),ToKeyedSequence.prototype.constructor=ToKeyedSequence,ToKeyedSequence.prototype.get=function get(key,notSetValue){return this._iter.get(key,notSetValue)},ToKeyedSequence.prototype.has=function has(key){return this._iter.has(key)},ToKeyedSequence.prototype.valueSeq=function valueSeq(){return this._iter.valueSeq()},ToKeyedSequence.prototype.reverse=function reverse(){var this$1$1=this,reversedSequence=reverseFactory(this,!0);return this._useKeys||(reversedSequence.valueSeq=function(){return this$1$1._iter.toSeq().reverse()}),reversedSequence},ToKeyedSequence.prototype.map=function map(mapper,context){var this$1$1=this,mappedSequence=mapFactory(this,mapper,context);return this._useKeys||(mappedSequence.valueSeq=function(){return this$1$1._iter.toSeq().map(mapper,context)}),mappedSequence},ToKeyedSequence.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this;return this._iter.__iterate((function(v,k){return fn(v,k,this$1$1)}),reverse)},ToKeyedSequence.prototype.__iterator=function __iterator(type,reverse){return this._iter.__iterator(type,reverse)},ToKeyedSequence}(KeyedSeq);ToKeyedSequence.prototype[IS_ORDERED_SYMBOL]=!0;var ToIndexedSequence=function(IndexedSeq){function ToIndexedSequence(iter){this._iter=iter,this.size=iter.size}return IndexedSeq&&(ToIndexedSequence.__proto__=IndexedSeq),ToIndexedSequence.prototype=Object.create(IndexedSeq&&IndexedSeq.prototype),ToIndexedSequence.prototype.constructor=ToIndexedSequence,ToIndexedSequence.prototype.includes=function includes(value){return this._iter.includes(value)},ToIndexedSequence.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this,i=0;return reverse&&ensureSize(this),this._iter.__iterate((function(v){return fn(v,reverse?this$1$1.size-++i:i++,this$1$1)}),reverse)},ToIndexedSequence.prototype.__iterator=function __iterator(type,reverse){var this$1$1=this,iterator=this._iter.__iterator(ITERATE_VALUES,reverse),i=0;return reverse&&ensureSize(this),new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,reverse?this$1$1.size-++i:i++,step.value,step)}))},ToIndexedSequence}(IndexedSeq),ToSetSequence=function(SetSeq){function ToSetSequence(iter){this._iter=iter,this.size=iter.size}return SetSeq&&(ToSetSequence.__proto__=SetSeq),ToSetSequence.prototype=Object.create(SetSeq&&SetSeq.prototype),ToSetSequence.prototype.constructor=ToSetSequence,ToSetSequence.prototype.has=function has(key){return this._iter.includes(key)},ToSetSequence.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this;return this._iter.__iterate((function(v){return fn(v,v,this$1$1)}),reverse)},ToSetSequence.prototype.__iterator=function __iterator(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator((function(){var step=iterator.next();return step.done?step:iteratorValue(type,step.value,step.value,step)}))},ToSetSequence}(SetSeq),FromEntriesSequence=function(KeyedSeq){function FromEntriesSequence(entries){this._iter=entries,this.size=entries.size}return KeyedSeq&&(FromEntriesSequence.__proto__=KeyedSeq),FromEntriesSequence.prototype=Object.create(KeyedSeq&&KeyedSeq.prototype),FromEntriesSequence.prototype.constructor=FromEntriesSequence,FromEntriesSequence.prototype.entrySeq=function entrySeq(){return this._iter.toSeq()},FromEntriesSequence.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this;return this._iter.__iterate((function(entry){if(entry){validateEntry(entry);var indexedCollection=isCollection(entry);return fn(indexedCollection?entry.get(1):entry[1],indexedCollection?entry.get(0):entry[0],this$1$1)}}),reverse)},FromEntriesSequence.prototype.__iterator=function __iterator(type,reverse){var iterator=this._iter.__iterator(ITERATE_VALUES,reverse);return new Iterator((function(){for(;;){var step=iterator.next();if(step.done)return step;var entry=step.value;if(entry){validateEntry(entry);var indexedCollection=isCollection(entry);return iteratorValue(type,indexedCollection?entry.get(0):entry[0],indexedCollection?entry.get(1):entry[1],step)}}}))},FromEntriesSequence}(KeyedSeq);function flipFactory(collection){var flipSequence=makeSequence(collection);return flipSequence._iter=collection,flipSequence.size=collection.size,flipSequence.flip=function(){return collection},flipSequence.reverse=function(){var reversedSequence=collection.reverse.apply(this);return reversedSequence.flip=function(){return collection.reverse()},reversedSequence},flipSequence.has=function(key){return collection.includes(key)},flipSequence.includes=function(key){return collection.has(key)},flipSequence.cacheResult=cacheResultThrough,flipSequence.__iterateUncached=function(fn,reverse){var this$1$1=this;return collection.__iterate((function(v,k){return!1!==fn(k,v,this$1$1)}),reverse)},flipSequence.__iteratorUncached=function(type,reverse){if(type===ITERATE_ENTRIES){var iterator=collection.__iterator(type,reverse);return new Iterator((function(){var step=iterator.next();if(!step.done){var k=step.value[0];step.value[0]=step.value[1],step.value[1]=k}return step}))}return collection.__iterator(type===ITERATE_VALUES?ITERATE_KEYS:ITERATE_VALUES,reverse)},flipSequence}function mapFactory(collection,mapper,context){var mappedSequence=makeSequence(collection);return mappedSequence.size=collection.size,mappedSequence.has=function(key){return collection.has(key)},mappedSequence.get=function(key,notSetValue){var v=collection.get(key,NOT_SET);return v===NOT_SET?notSetValue:mapper.call(context,v,key,collection)},mappedSequence.__iterateUncached=function(fn,reverse){var this$1$1=this;return collection.__iterate((function(v,k,c){return!1!==fn(mapper.call(context,v,k,c),k,this$1$1)}),reverse)},mappedSequence.__iteratorUncached=function(type,reverse){var iterator=collection.__iterator(ITERATE_ENTRIES,reverse);return new Iterator((function(){var step=iterator.next();if(step.done)return step;var entry=step.value,key=entry[0];return iteratorValue(type,key,mapper.call(context,entry[1],key,collection),step)}))},mappedSequence}function reverseFactory(collection,useKeys){var this$1$1=this,reversedSequence=makeSequence(collection);return reversedSequence._iter=collection,reversedSequence.size=collection.size,reversedSequence.reverse=function(){return collection},collection.flip&&(reversedSequence.flip=function(){var flipSequence=flipFactory(collection);return flipSequence.reverse=function(){return collection.flip()},flipSequence}),reversedSequence.get=function(key,notSetValue){return collection.get(useKeys?key:-1-key,notSetValue)},reversedSequence.has=function(key){return collection.has(useKeys?key:-1-key)},reversedSequence.includes=function(value){return collection.includes(value)},reversedSequence.cacheResult=cacheResultThrough,reversedSequence.__iterate=function(fn,reverse){var this$1$1=this,i=0;return reverse&&ensureSize(collection),collection.__iterate((function(v,k){return fn(v,useKeys?k:reverse?this$1$1.size-++i:i++,this$1$1)}),!reverse)},reversedSequence.__iterator=function(type,reverse){var i=0;reverse&&ensureSize(collection);var iterator=collection.__iterator(ITERATE_ENTRIES,!reverse);return new Iterator((function(){var step=iterator.next();if(step.done)return step;var entry=step.value;return iteratorValue(type,useKeys?entry[0]:reverse?this$1$1.size-++i:i++,entry[1],step)}))},reversedSequence}function filterFactory(collection,predicate,context,useKeys){var filterSequence=makeSequence(collection);return useKeys&&(filterSequence.has=function(key){var v=collection.get(key,NOT_SET);return v!==NOT_SET&&!!predicate.call(context,v,key,collection)},filterSequence.get=function(key,notSetValue){var v=collection.get(key,NOT_SET);return v!==NOT_SET&&predicate.call(context,v,key,collection)?v:notSetValue}),filterSequence.__iterateUncached=function(fn,reverse){var this$1$1=this,iterations=0;return collection.__iterate((function(v,k,c){if(predicate.call(context,v,k,c))return iterations++,fn(v,useKeys?k:iterations-1,this$1$1)}),reverse),iterations},filterSequence.__iteratorUncached=function(type,reverse){var iterator=collection.__iterator(ITERATE_ENTRIES,reverse),iterations=0;return new Iterator((function(){for(;;){var step=iterator.next();if(step.done)return step;var entry=step.value,key=entry[0],value=entry[1];if(predicate.call(context,value,key,collection))return iteratorValue(type,useKeys?key:iterations++,value,step)}}))},filterSequence}function sliceFactory(collection,begin,end,useKeys){var originalSize=collection.size;if(wholeSlice(begin,end,originalSize))return collection;if(void 0===originalSize&&(begin<0||end<0))return sliceFactory(collection.toSeq().cacheResult(),begin,end,useKeys);var sliceSize,resolvedBegin=resolveBegin(begin,originalSize),resolvedSize=resolveEnd(end,originalSize)-resolvedBegin;resolvedSize==resolvedSize&&(sliceSize=resolvedSize<0?0:resolvedSize);var sliceSeq=makeSequence(collection);return sliceSeq.size=0===sliceSize?sliceSize:collection.size&&sliceSize||void 0,!useKeys&&isSeq(collection)&&sliceSize>=0&&(sliceSeq.get=function(index,notSetValue){return(index=wrapIndex(this,index))>=0&&index<sliceSize?collection.get(index+resolvedBegin,notSetValue):notSetValue}),sliceSeq.__iterateUncached=function(fn,reverse){var this$1$1=this;if(0===sliceSize)return 0;if(reverse)return this.cacheResult().__iterate(fn,reverse);var skipped=0,isSkipping=!0,iterations=0;return collection.__iterate((function(v,k){if(!isSkipping||!(isSkipping=skipped++<resolvedBegin))return iterations++,!1!==fn(v,useKeys?k:iterations-1,this$1$1)&&iterations!==sliceSize})),iterations},sliceSeq.__iteratorUncached=function(type,reverse){if(0!==sliceSize&&reverse)return this.cacheResult().__iterator(type,reverse);if(0===sliceSize)return new Iterator(iteratorDone);var iterator=collection.__iterator(type,reverse),skipped=0,iterations=0;return new Iterator((function(){for(;skipped++<resolvedBegin;)iterator.next();if(++iterations>sliceSize)return{value:void 0,done:!0};var step=iterator.next();return useKeys||type===ITERATE_VALUES||step.done?step:iteratorValue(type,iterations-1,type===ITERATE_KEYS?void 0:step.value[1],step)}))},sliceSeq}function skipWhileFactory(collection,predicate,context,useKeys){var skipSequence=makeSequence(collection);return skipSequence.__iterateUncached=function(fn,reverse){var this$1$1=this;if(reverse)return this.cacheResult().__iterate(fn,reverse);var isSkipping=!0,iterations=0;return collection.__iterate((function(v,k,c){if(!isSkipping||!(isSkipping=predicate.call(context,v,k,c)))return iterations++,fn(v,useKeys?k:iterations-1,this$1$1)})),iterations},skipSequence.__iteratorUncached=function(type,reverse){var this$1$1=this;if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=collection.__iterator(ITERATE_ENTRIES,reverse),skipping=!0,iterations=0;return new Iterator((function(){var step,k,v;do{if((step=iterator.next()).done)return useKeys||type===ITERATE_VALUES?step:iteratorValue(type,iterations++,type===ITERATE_KEYS?void 0:step.value[1],step);var entry=step.value;k=entry[0],v=entry[1],skipping&&(skipping=predicate.call(context,v,k,this$1$1))}while(skipping);return type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step)}))},skipSequence}function flattenFactory(collection,depth,useKeys){var flatSequence=makeSequence(collection);return flatSequence.__iterateUncached=function(fn,reverse){if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterations=0,stopped=!1;return function flatDeep(iter,currentDepth){iter.__iterate((function(v,k){return(!depth||currentDepth<depth)&&isCollection(v)?flatDeep(v,currentDepth+1):(iterations++,!1===fn(v,useKeys?k:iterations-1,flatSequence)&&(stopped=!0)),!stopped}),reverse)}(collection,0),iterations},flatSequence.__iteratorUncached=function(type,reverse){if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=collection.__iterator(type,reverse),stack=[],iterations=0;return new Iterator((function(){for(;iterator;){var step=iterator.next();if(!1===step.done){var v=step.value;if(type===ITERATE_ENTRIES&&(v=v[1]),depth&&!(stack.length<depth)||!isCollection(v))return useKeys?step:iteratorValue(type,iterations++,v,step);stack.push(iterator),iterator=v.__iterator(type,reverse)}else iterator=stack.pop()}return{value:void 0,done:!0}}))},flatSequence}function sortFactory(collection,comparator,mapper){comparator||(comparator=defaultComparator);var isKeyedCollection=isKeyed(collection),index=0,entries=collection.toSeq().map((function(v,k){return[k,v,index++,mapper?mapper(v,k,collection):v]})).valueSeq().toArray();return entries.sort((function(a,b){return comparator(a[3],b[3])||a[2]-b[2]})).forEach(isKeyedCollection?function(v,i){entries[i].length=2}:function(v,i){entries[i]=v[1]}),isKeyedCollection?KeyedSeq(entries):isIndexed(collection)?IndexedSeq(entries):SetSeq(entries)}function maxFactory(collection,comparator,mapper){if(comparator||(comparator=defaultComparator),mapper){var entry=collection.toSeq().map((function(v,k){return[v,mapper(v,k,collection)]})).reduce((function(a,b){return maxCompare(comparator,a[1],b[1])?b:a}));return entry&&entry[0]}return collection.reduce((function(a,b){return maxCompare(comparator,a,b)?b:a}))}function maxCompare(comparator,a,b){var comp=comparator(b,a);return 0===comp&&b!==a&&(null==b||b!=b)||comp>0}function zipWithFactory(keyIter,zipper,iters,zipAll){var zipSequence=makeSequence(keyIter),sizes=new ArraySeq(iters).map((function(i){return i.size}));return zipSequence.size=zipAll?sizes.max():sizes.min(),zipSequence.__iterate=function(fn,reverse){for(var step,iterator=this.__iterator(ITERATE_VALUES,reverse),iterations=0;!(step=iterator.next()).done&&!1!==fn(step.value,iterations++,this););return iterations},zipSequence.__iteratorUncached=function(type,reverse){var iterators=iters.map((function(i){return i=Collection(i),getIterator(reverse?i.reverse():i)})),iterations=0,isDone=!1;return new Iterator((function(){var steps;return isDone||(steps=iterators.map((function(i){return i.next()})),isDone=zipAll?steps.every((function(s){return s.done})):steps.some((function(s){return s.done}))),isDone?{value:void 0,done:!0}:iteratorValue(type,iterations++,zipper.apply(null,steps.map((function(s){return s.value}))))}))},zipSequence}function reify(iter,seq){return iter===seq?iter:isSeq(iter)?seq:iter.constructor(seq)}function validateEntry(entry){if(entry!==Object(entry))throw new TypeError("Expected [K, V] tuple: "+entry)}function collectionClass(collection){return isKeyed(collection)?KeyedCollection:isIndexed(collection)?IndexedCollection:SetCollection}function makeSequence(collection){return Object.create((isKeyed(collection)?KeyedSeq:isIndexed(collection)?IndexedSeq:SetSeq).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Seq.prototype.cacheResult.call(this)}function defaultComparator(a,b){return void 0===a&&void 0===b?0:void 0===a?1:void 0===b?-1:a>b?1:a<b?-1:0}function arrCopy(arr,offset){offset=offset||0;for(var len=Math.max(0,arr.length-offset),newArr=new Array(len),ii=0;ii<len;ii++)newArr[ii]=arr[ii+offset];return newArr}function invariant(condition,error){if(!condition)throw new Error(error)}function assertNotInfinite(size){invariant(size!==1/0,"Cannot perform this action with an infinite size.")}function coerceKeyPath(keyPath){if(isArrayLike(keyPath)&&"string"!=typeof keyPath)return keyPath;if(isOrdered(keyPath))return keyPath.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+keyPath)}ToIndexedSequence.prototype.cacheResult=ToKeyedSequence.prototype.cacheResult=ToSetSequence.prototype.cacheResult=FromEntriesSequence.prototype.cacheResult=cacheResultThrough;var toString=Object.prototype.toString;function isPlainObject(value){if(!value||"object"!=typeof value||"[object Object]"!==toString.call(value))return!1;var proto=Object.getPrototypeOf(value);if(null===proto)return!0;for(var parentProto=proto,nextProto=Object.getPrototypeOf(proto);null!==nextProto;)parentProto=nextProto,nextProto=Object.getPrototypeOf(parentProto);return parentProto===proto}function isDataStructure(value){return"object"==typeof value&&(isImmutable(value)||Array.isArray(value)||isPlainObject(value))}function quoteString(value){try{return"string"==typeof value?JSON.stringify(value):String(value)}catch(_ignoreError){return JSON.stringify(value)}}function has(collection,key){return isImmutable(collection)?collection.has(key):isDataStructure(collection)&&hasOwnProperty.call(collection,key)}function get(collection,key,notSetValue){return isImmutable(collection)?collection.get(key,notSetValue):has(collection,key)?"function"==typeof collection.get?collection.get(key):collection[key]:notSetValue}function shallowCopy(from){if(Array.isArray(from))return arrCopy(from);var to={};for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);return to}function remove(collection,key){if(!isDataStructure(collection))throw new TypeError("Cannot update non-data-structure value: "+collection);if(isImmutable(collection)){if(!collection.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+collection);return collection.remove(key)}if(!hasOwnProperty.call(collection,key))return collection;var collectionCopy=shallowCopy(collection);return Array.isArray(collectionCopy)?collectionCopy.splice(key,1):delete collectionCopy[key],collectionCopy}function set(collection,key,value){if(!isDataStructure(collection))throw new TypeError("Cannot update non-data-structure value: "+collection);if(isImmutable(collection)){if(!collection.set)throw new TypeError("Cannot update immutable value without .set() method: "+collection);return collection.set(key,value)}if(hasOwnProperty.call(collection,key)&&value===collection[key])return collection;var collectionCopy=shallowCopy(collection);return collectionCopy[key]=value,collectionCopy}function updateIn$1(collection,keyPath,notSetValue,updater){updater||(updater=notSetValue,notSetValue=void 0);var updatedValue=updateInDeeply(isImmutable(collection),collection,coerceKeyPath(keyPath),0,notSetValue,updater);return updatedValue===NOT_SET?notSetValue:updatedValue}function updateInDeeply(inImmutable,existing,keyPath,i,notSetValue,updater){var wasNotSet=existing===NOT_SET;if(i===keyPath.length){var existingValue=wasNotSet?notSetValue:existing,newValue=updater(existingValue);return newValue===existingValue?existing:newValue}if(!wasNotSet&&!isDataStructure(existing))throw new TypeError("Cannot update within non-data-structure value in path ["+keyPath.slice(0,i).map(quoteString)+"]: "+existing);var key=keyPath[i],nextExisting=wasNotSet?NOT_SET:get(existing,key,NOT_SET),nextUpdated=updateInDeeply(nextExisting===NOT_SET?inImmutable:isImmutable(nextExisting),nextExisting,keyPath,i+1,notSetValue,updater);return nextUpdated===nextExisting?existing:nextUpdated===NOT_SET?remove(existing,key):set(wasNotSet?inImmutable?emptyMap():{}:existing,key,nextUpdated)}function setIn$1(collection,keyPath,value){return updateIn$1(collection,keyPath,NOT_SET,(function(){return value}))}function setIn(keyPath,v){return setIn$1(this,keyPath,v)}function removeIn(collection,keyPath){return updateIn$1(collection,keyPath,(function(){return NOT_SET}))}function deleteIn(keyPath){return removeIn(this,keyPath)}function update$1(collection,key,notSetValue,updater){return updateIn$1(collection,[key],notSetValue,updater)}function update(key,notSetValue,updater){return 1===arguments.length?key(this):update$1(this,key,notSetValue,updater)}function updateIn(keyPath,notSetValue,updater){return updateIn$1(this,keyPath,notSetValue,updater)}function merge$1(){for(var iters=[],len=arguments.length;len--;)iters[len]=arguments[len];return mergeIntoKeyedWith(this,iters)}function mergeWith$1(merger){for(var iters=[],len=arguments.length-1;len-- >0;)iters[len]=arguments[len+1];if("function"!=typeof merger)throw new TypeError("Invalid merger function: "+merger);return mergeIntoKeyedWith(this,iters,merger)}function mergeIntoKeyedWith(collection,collections,merger){for(var iters=[],ii=0;ii<collections.length;ii++){var collection$1=KeyedCollection(collections[ii]);0!==collection$1.size&&iters.push(collection$1)}return 0===iters.length?collection:0!==collection.toSeq().size||collection.__ownerID||1!==iters.length?collection.withMutations((function(collection){for(var mergeIntoCollection=merger?function(value,key){update$1(collection,key,NOT_SET,(function(oldVal){return oldVal===NOT_SET?value:merger(oldVal,value,key)}))}:function(value,key){collection.set(key,value)},ii=0;ii<iters.length;ii++)iters[ii].forEach(mergeIntoCollection)})):collection.constructor(iters[0])}function merge(collection){for(var sources=[],len=arguments.length-1;len-- >0;)sources[len]=arguments[len+1];return mergeWithSources(collection,sources)}function mergeWith(merger,collection){for(var sources=[],len=arguments.length-2;len-- >0;)sources[len]=arguments[len+2];return mergeWithSources(collection,sources,merger)}function mergeDeep$1(collection){for(var sources=[],len=arguments.length-1;len-- >0;)sources[len]=arguments[len+1];return mergeDeepWithSources(collection,sources)}function mergeDeepWith$1(merger,collection){for(var sources=[],len=arguments.length-2;len-- >0;)sources[len]=arguments[len+2];return mergeDeepWithSources(collection,sources,merger)}function mergeDeepWithSources(collection,sources,merger){return mergeWithSources(collection,sources,function deepMergerWith(merger){function deepMerger(oldValue,newValue,key){return isDataStructure(oldValue)&&isDataStructure(newValue)&&function areMergeable(oldDataStructure,newDataStructure){var oldSeq=Seq(oldDataStructure),newSeq=Seq(newDataStructure);return isIndexed(oldSeq)===isIndexed(newSeq)&&isKeyed(oldSeq)===isKeyed(newSeq)}(oldValue,newValue)?mergeWithSources(oldValue,[newValue],deepMerger):merger?merger(oldValue,newValue,key):newValue}return deepMerger}(merger))}function mergeWithSources(collection,sources,merger){if(!isDataStructure(collection))throw new TypeError("Cannot merge into non-data-structure value: "+collection);if(isImmutable(collection))return"function"==typeof merger&&collection.mergeWith?collection.mergeWith.apply(collection,[merger].concat(sources)):collection.merge?collection.merge.apply(collection,sources):collection.concat.apply(collection,sources);for(var isArray=Array.isArray(collection),merged=collection,Collection=isArray?IndexedCollection:KeyedCollection,mergeItem=isArray?function(value){merged===collection&&(merged=shallowCopy(merged)),merged.push(value)}:function(value,key){var hasVal=hasOwnProperty.call(merged,key),nextVal=hasVal&&merger?merger(merged[key],value,key):value;hasVal&&nextVal===merged[key]||(merged===collection&&(merged=shallowCopy(merged)),merged[key]=nextVal)},i=0;i<sources.length;i++)Collection(sources[i]).forEach(mergeItem);return merged}function mergeDeep(){for(var iters=[],len=arguments.length;len--;)iters[len]=arguments[len];return mergeDeepWithSources(this,iters)}function mergeDeepWith(merger){for(var iters=[],len=arguments.length-1;len-- >0;)iters[len]=arguments[len+1];return mergeDeepWithSources(this,iters,merger)}function mergeIn(keyPath){for(var iters=[],len=arguments.length-1;len-- >0;)iters[len]=arguments[len+1];return updateIn$1(this,keyPath,emptyMap(),(function(m){return mergeWithSources(m,iters)}))}function mergeDeepIn(keyPath){for(var iters=[],len=arguments.length-1;len-- >0;)iters[len]=arguments[len+1];return updateIn$1(this,keyPath,emptyMap(),(function(m){return mergeDeepWithSources(m,iters)}))}function withMutations(fn){var mutable=this.asMutable();return fn(mutable),mutable.wasAltered()?mutable.__ensureOwner(this.__ownerID):this}function asMutable(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)}function asImmutable(){return this.__ensureOwner()}function wasAltered(){return this.__altered}var Map=function(KeyedCollection){function Map(value){return null==value?emptyMap():isMap(value)&&!isOrdered(value)?value:emptyMap().withMutations((function(map){var iter=KeyedCollection(value);assertNotInfinite(iter.size),iter.forEach((function(v,k){return map.set(k,v)}))}))}return KeyedCollection&&(Map.__proto__=KeyedCollection),Map.prototype=Object.create(KeyedCollection&&KeyedCollection.prototype),Map.prototype.constructor=Map,Map.of=function of(){for(var keyValues=[],len=arguments.length;len--;)keyValues[len]=arguments[len];return emptyMap().withMutations((function(map){for(var i=0;i<keyValues.length;i+=2){if(i+1>=keyValues.length)throw new Error("Missing value for key: "+keyValues[i]);map.set(keyValues[i],keyValues[i+1])}}))},Map.prototype.toString=function toString(){return this.__toString("Map {","}")},Map.prototype.get=function get(k,notSetValue){return this._root?this._root.get(0,void 0,k,notSetValue):notSetValue},Map.prototype.set=function set(k,v){return updateMap(this,k,v)},Map.prototype.remove=function remove(k){return updateMap(this,k,NOT_SET)},Map.prototype.deleteAll=function deleteAll(keys){var collection=Collection(keys);return 0===collection.size?this:this.withMutations((function(map){collection.forEach((function(key){return map.remove(key)}))}))},Map.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):emptyMap()},Map.prototype.sort=function sort(comparator){return OrderedMap(sortFactory(this,comparator))},Map.prototype.sortBy=function sortBy(mapper,comparator){return OrderedMap(sortFactory(this,comparator,mapper))},Map.prototype.map=function map(mapper,context){var this$1$1=this;return this.withMutations((function(map){map.forEach((function(value,key){map.set(key,mapper.call(context,value,key,this$1$1))}))}))},Map.prototype.__iterator=function __iterator(type,reverse){return new MapIterator(this,type,reverse)},Map.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this,iterations=0;return this._root&&this._root.iterate((function(entry){return iterations++,fn(entry[1],entry[0],this$1$1)}),reverse),iterations},Map.prototype.__ensureOwner=function __ensureOwner(ownerID){return ownerID===this.__ownerID?this:ownerID?makeMap(this.size,this._root,ownerID,this.__hash):0===this.size?emptyMap():(this.__ownerID=ownerID,this.__altered=!1,this)},Map}(KeyedCollection);Map.isMap=isMap;var MapPrototype=Map.prototype;MapPrototype[IS_MAP_SYMBOL]=!0,MapPrototype.delete=MapPrototype.remove,MapPrototype.removeAll=MapPrototype.deleteAll,MapPrototype.setIn=setIn,MapPrototype.removeIn=MapPrototype.deleteIn=deleteIn,MapPrototype.update=update,MapPrototype.updateIn=updateIn,MapPrototype.merge=MapPrototype.concat=merge$1,MapPrototype.mergeWith=mergeWith$1,MapPrototype.mergeDeep=mergeDeep,MapPrototype.mergeDeepWith=mergeDeepWith,MapPrototype.mergeIn=mergeIn,MapPrototype.mergeDeepIn=mergeDeepIn,MapPrototype.withMutations=withMutations,MapPrototype.wasAltered=wasAltered,MapPrototype.asImmutable=asImmutable,MapPrototype["@@transducer/init"]=MapPrototype.asMutable=asMutable,MapPrototype["@@transducer/step"]=function(result,arr){return result.set(arr[0],arr[1])},MapPrototype["@@transducer/result"]=function(obj){return obj.asImmutable()};var ArrayMapNode=function ArrayMapNode(ownerID,entries){this.ownerID=ownerID,this.entries=entries};ArrayMapNode.prototype.get=function get(shift,keyHash,key,notSetValue){for(var entries=this.entries,ii=0,len=entries.length;ii<len;ii++)if(is(key,entries[ii][0]))return entries[ii][1];return notSetValue},ArrayMapNode.prototype.update=function update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){for(var removed=value===NOT_SET,entries=this.entries,idx=0,len=entries.length;idx<len&&!is(key,entries[idx][0]);idx++);var exists=idx<len;if(exists?entries[idx][1]===value:removed)return this;if(SetRef(didAlter),(removed||!exists)&&SetRef(didChangeSize),!removed||1!==entries.length){if(!exists&&!removed&&entries.length>=MAX_ARRAY_MAP_SIZE)return function createNodes(ownerID,entries,key,value){ownerID||(ownerID=new OwnerID);for(var node=new ValueNode(ownerID,hash(key),[key,value]),ii=0;ii<entries.length;ii++){var entry=entries[ii];node=node.update(ownerID,0,void 0,entry[0],entry[1])}return node}(ownerID,entries,key,value);var isEditable=ownerID&&ownerID===this.ownerID,newEntries=isEditable?entries:arrCopy(entries);return exists?removed?idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop():newEntries[idx]=[key,value]:newEntries.push([key,value]),isEditable?(this.entries=newEntries,this):new ArrayMapNode(ownerID,newEntries)}};var BitmapIndexedNode=function BitmapIndexedNode(ownerID,bitmap,nodes){this.ownerID=ownerID,this.bitmap=bitmap,this.nodes=nodes};BitmapIndexedNode.prototype.get=function get(shift,keyHash,key,notSetValue){void 0===keyHash&&(keyHash=hash(key));var bit=1<<((0===shift?keyHash:keyHash>>>shift)&MASK),bitmap=this.bitmap;return bitmap&bit?this.nodes[popCount(bitmap&bit-1)].get(shift+SHIFT,keyHash,key,notSetValue):notSetValue},BitmapIndexedNode.prototype.update=function update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var keyHashFrag=(0===shift?keyHash:keyHash>>>shift)&MASK,bit=1<<keyHashFrag,bitmap=this.bitmap,exists=!!(bitmap&bit);if(!exists&&value===NOT_SET)return this;var idx=popCount(bitmap&bit-1),nodes=this.nodes,node=exists?nodes[idx]:void 0,newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node)return this;if(!exists&&newNode&&nodes.length>=MAX_BITMAP_INDEXED_SIZE)return function expandNodes(ownerID,nodes,bitmap,including,node){for(var count=0,expandedNodes=new Array(SIZE),ii=0;0!==bitmap;ii++,bitmap>>>=1)expandedNodes[ii]=1&bitmap?nodes[count++]:void 0;return expandedNodes[including]=node,new HashArrayMapNode(ownerID,count+1,expandedNodes)}(ownerID,nodes,bitmap,keyHashFrag,newNode);if(exists&&!newNode&&2===nodes.length&&isLeafNode(nodes[1^idx]))return nodes[1^idx];if(exists&&newNode&&1===nodes.length&&isLeafNode(newNode))return newNode;var isEditable=ownerID&&ownerID===this.ownerID,newBitmap=exists?newNode?bitmap:bitmap^bit:bitmap|bit,newNodes=exists?newNode?setAt(nodes,idx,newNode,isEditable):function spliceOut(array,idx,canEdit){var newLen=array.length-1;if(canEdit&&idx===newLen)return array.pop(),array;for(var newArray=new Array(newLen),after=0,ii=0;ii<newLen;ii++)ii===idx&&(after=1),newArray[ii]=array[ii+after];return newArray}(nodes,idx,isEditable):function spliceIn(array,idx,val,canEdit){var newLen=array.length+1;if(canEdit&&idx+1===newLen)return array[idx]=val,array;for(var newArray=new Array(newLen),after=0,ii=0;ii<newLen;ii++)ii===idx?(newArray[ii]=val,after=-1):newArray[ii]=array[ii+after];return newArray}(nodes,idx,newNode,isEditable);return isEditable?(this.bitmap=newBitmap,this.nodes=newNodes,this):new BitmapIndexedNode(ownerID,newBitmap,newNodes)};var HashArrayMapNode=function HashArrayMapNode(ownerID,count,nodes){this.ownerID=ownerID,this.count=count,this.nodes=nodes};HashArrayMapNode.prototype.get=function get(shift,keyHash,key,notSetValue){void 0===keyHash&&(keyHash=hash(key));var idx=(0===shift?keyHash:keyHash>>>shift)&MASK,node=this.nodes[idx];return node?node.get(shift+SHIFT,keyHash,key,notSetValue):notSetValue},HashArrayMapNode.prototype.update=function update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var idx=(0===shift?keyHash:keyHash>>>shift)&MASK,removed=value===NOT_SET,nodes=this.nodes,node=nodes[idx];if(removed&&!node)return this;var newNode=updateNode(node,ownerID,shift+SHIFT,keyHash,key,value,didChangeSize,didAlter);if(newNode===node)return this;var newCount=this.count;if(node){if(!newNode&&--newCount<MIN_HASH_ARRAY_MAP_SIZE)return function packNodes(ownerID,nodes,count,excluding){for(var bitmap=0,packedII=0,packedNodes=new Array(count),ii=0,bit=1,len=nodes.length;ii<len;ii++,bit<<=1){var node=nodes[ii];void 0!==node&&ii!==excluding&&(bitmap|=bit,packedNodes[packedII++]=node)}return new BitmapIndexedNode(ownerID,bitmap,packedNodes)}(ownerID,nodes,newCount,idx)}else newCount++;var isEditable=ownerID&&ownerID===this.ownerID,newNodes=setAt(nodes,idx,newNode,isEditable);return isEditable?(this.count=newCount,this.nodes=newNodes,this):new HashArrayMapNode(ownerID,newCount,newNodes)};var HashCollisionNode=function HashCollisionNode(ownerID,keyHash,entries){this.ownerID=ownerID,this.keyHash=keyHash,this.entries=entries};HashCollisionNode.prototype.get=function get(shift,keyHash,key,notSetValue){for(var entries=this.entries,ii=0,len=entries.length;ii<len;ii++)if(is(key,entries[ii][0]))return entries[ii][1];return notSetValue},HashCollisionNode.prototype.update=function update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){void 0===keyHash&&(keyHash=hash(key));var removed=value===NOT_SET;if(keyHash!==this.keyHash)return removed?this:(SetRef(didAlter),SetRef(didChangeSize),mergeIntoNode(this,ownerID,shift,keyHash,[key,value]));for(var entries=this.entries,idx=0,len=entries.length;idx<len&&!is(key,entries[idx][0]);idx++);var exists=idx<len;if(exists?entries[idx][1]===value:removed)return this;if(SetRef(didAlter),(removed||!exists)&&SetRef(didChangeSize),removed&&2===len)return new ValueNode(ownerID,this.keyHash,entries[1^idx]);var isEditable=ownerID&&ownerID===this.ownerID,newEntries=isEditable?entries:arrCopy(entries);return exists?removed?idx===len-1?newEntries.pop():newEntries[idx]=newEntries.pop():newEntries[idx]=[key,value]:newEntries.push([key,value]),isEditable?(this.entries=newEntries,this):new HashCollisionNode(ownerID,this.keyHash,newEntries)};var ValueNode=function ValueNode(ownerID,keyHash,entry){this.ownerID=ownerID,this.keyHash=keyHash,this.entry=entry};ValueNode.prototype.get=function get(shift,keyHash,key,notSetValue){return is(key,this.entry[0])?this.entry[1]:notSetValue},ValueNode.prototype.update=function update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter){var removed=value===NOT_SET,keyMatch=is(key,this.entry[0]);return(keyMatch?value===this.entry[1]:removed)?this:(SetRef(didAlter),removed?void SetRef(didChangeSize):keyMatch?ownerID&&ownerID===this.ownerID?(this.entry[1]=value,this):new ValueNode(ownerID,this.keyHash,[key,value]):(SetRef(didChangeSize),mergeIntoNode(this,ownerID,shift,hash(key),[key,value])))},ArrayMapNode.prototype.iterate=HashCollisionNode.prototype.iterate=function(fn,reverse){for(var entries=this.entries,ii=0,maxIndex=entries.length-1;ii<=maxIndex;ii++)if(!1===fn(entries[reverse?maxIndex-ii:ii]))return!1},BitmapIndexedNode.prototype.iterate=HashArrayMapNode.prototype.iterate=function(fn,reverse){for(var nodes=this.nodes,ii=0,maxIndex=nodes.length-1;ii<=maxIndex;ii++){var node=nodes[reverse?maxIndex-ii:ii];if(node&&!1===node.iterate(fn,reverse))return!1}},ValueNode.prototype.iterate=function(fn,reverse){return fn(this.entry)};var EMPTY_MAP,MapIterator=function(Iterator){function MapIterator(map,type,reverse){this._type=type,this._reverse=reverse,this._stack=map._root&&mapIteratorFrame(map._root)}return Iterator&&(MapIterator.__proto__=Iterator),MapIterator.prototype=Object.create(Iterator&&Iterator.prototype),MapIterator.prototype.constructor=MapIterator,MapIterator.prototype.next=function next(){for(var type=this._type,stack=this._stack;stack;){var node=stack.node,index=stack.index++,maxIndex=void 0;if(node.entry){if(0===index)return mapIteratorValue(type,node.entry)}else if(node.entries){if(index<=(maxIndex=node.entries.length-1))return mapIteratorValue(type,node.entries[this._reverse?maxIndex-index:index])}else if(index<=(maxIndex=node.nodes.length-1)){var subNode=node.nodes[this._reverse?maxIndex-index:index];if(subNode){if(subNode.entry)return mapIteratorValue(type,subNode.entry);stack=this._stack=mapIteratorFrame(subNode,stack)}continue}stack=this._stack=this._stack.__prev}return{value:void 0,done:!0}},MapIterator}(Iterator);function mapIteratorValue(type,entry){return iteratorValue(type,entry[0],entry[1])}function mapIteratorFrame(node,prev){return{node:node,index:0,__prev:prev}}function makeMap(size,root,ownerID,hash){var map=Object.create(MapPrototype);return map.size=size,map._root=root,map.__ownerID=ownerID,map.__hash=hash,map.__altered=!1,map}function emptyMap(){return EMPTY_MAP||(EMPTY_MAP=makeMap(0))}function updateMap(map,k,v){var newRoot,newSize;if(map._root){var didChangeSize={value:!1},didAlter={value:!1};if(newRoot=updateNode(map._root,map.__ownerID,0,void 0,k,v,didChangeSize,didAlter),!didAlter.value)return map;newSize=map.size+(didChangeSize.value?v===NOT_SET?-1:1:0)}else{if(v===NOT_SET)return map;newSize=1,newRoot=new ArrayMapNode(map.__ownerID,[[k,v]])}return map.__ownerID?(map.size=newSize,map._root=newRoot,map.__hash=void 0,map.__altered=!0,map):newRoot?makeMap(newSize,newRoot):emptyMap()}function updateNode(node,ownerID,shift,keyHash,key,value,didChangeSize,didAlter){return node?node.update(ownerID,shift,keyHash,key,value,didChangeSize,didAlter):value===NOT_SET?node:(SetRef(didAlter),SetRef(didChangeSize),new ValueNode(ownerID,keyHash,[key,value]))}function isLeafNode(node){return node.constructor===ValueNode||node.constructor===HashCollisionNode}function mergeIntoNode(node,ownerID,shift,keyHash,entry){if(node.keyHash===keyHash)return new HashCollisionNode(ownerID,keyHash,[node.entry,entry]);var newNode,idx1=(0===shift?node.keyHash:node.keyHash>>>shift)&MASK,idx2=(0===shift?keyHash:keyHash>>>shift)&MASK,nodes=idx1===idx2?[mergeIntoNode(node,ownerID,shift+SHIFT,keyHash,entry)]:(newNode=new ValueNode(ownerID,keyHash,entry),idx1<idx2?[node,newNode]:[newNode,node]);return new BitmapIndexedNode(ownerID,1<<idx1|1<<idx2,nodes)}function popCount(x){return x=(x=(858993459&(x-=x>>1&1431655765))+(x>>2&858993459))+(x>>4)&252645135,x+=x>>8,127&(x+=x>>16)}function setAt(array,idx,val,canEdit){var newArray=canEdit?array:arrCopy(array);return newArray[idx]=val,newArray}var MAX_ARRAY_MAP_SIZE=SIZE/4,MAX_BITMAP_INDEXED_SIZE=SIZE/2,MIN_HASH_ARRAY_MAP_SIZE=SIZE/4,IS_LIST_SYMBOL="@@__IMMUTABLE_LIST__@@";function isList(maybeList){return Boolean(maybeList&&maybeList[IS_LIST_SYMBOL])}var List=function(IndexedCollection){function List(value){var empty=emptyList();if(null==value)return empty;if(isList(value))return value;var iter=IndexedCollection(value),size=iter.size;return 0===size?empty:(assertNotInfinite(size),size>0&&size<SIZE?makeList(0,size,SHIFT,null,new VNode(iter.toArray())):empty.withMutations((function(list){list.setSize(size),iter.forEach((function(v,i){return list.set(i,v)}))})))}return IndexedCollection&&(List.__proto__=IndexedCollection),List.prototype=Object.create(IndexedCollection&&IndexedCollection.prototype),List.prototype.constructor=List,List.of=function of(){return this(arguments)},List.prototype.toString=function toString(){return this.__toString("List [","]")},List.prototype.get=function get(index,notSetValue){if((index=wrapIndex(this,index))>=0&&index<this.size){var node=listNodeFor(this,index+=this._origin);return node&&node.array[index&MASK]}return notSetValue},List.prototype.set=function set(index,value){return function updateList(list,index,value){if(index=wrapIndex(list,index),index!=index)return list;if(index>=list.size||index<0)return list.withMutations((function(list){index<0?setListBounds(list,index).set(0,value):setListBounds(list,0,index+1).set(index,value)}));index+=list._origin;var newTail=list._tail,newRoot=list._root,didAlter={value:!1};index>=getTailOffset(list._capacity)?newTail=updateVNode(newTail,list.__ownerID,0,index,value,didAlter):newRoot=updateVNode(newRoot,list.__ownerID,list._level,index,value,didAlter);if(!didAlter.value)return list;if(list.__ownerID)return list._root=newRoot,list._tail=newTail,list.__hash=void 0,list.__altered=!0,list;return makeList(list._origin,list._capacity,list._level,newRoot,newTail)}(this,index,value)},List.prototype.remove=function remove(index){return this.has(index)?0===index?this.shift():index===this.size-1?this.pop():this.splice(index,1):this},List.prototype.insert=function insert(index,value){return this.splice(index,0,value)},List.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=SHIFT,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):emptyList()},List.prototype.push=function push(){var values=arguments,oldSize=this.size;return this.withMutations((function(list){setListBounds(list,0,oldSize+values.length);for(var ii=0;ii<values.length;ii++)list.set(oldSize+ii,values[ii])}))},List.prototype.pop=function pop(){return setListBounds(this,0,-1)},List.prototype.unshift=function unshift(){var values=arguments;return this.withMutations((function(list){setListBounds(list,-values.length);for(var ii=0;ii<values.length;ii++)list.set(ii,values[ii])}))},List.prototype.shift=function shift(){return setListBounds(this,1)},List.prototype.concat=function concat(){for(var arguments$1=arguments,seqs=[],i=0;i<arguments.length;i++){var argument=arguments$1[i],seq=IndexedCollection("string"!=typeof argument&&hasIterator(argument)?argument:[argument]);0!==seq.size&&seqs.push(seq)}return 0===seqs.length?this:0!==this.size||this.__ownerID||1!==seqs.length?this.withMutations((function(list){seqs.forEach((function(seq){return seq.forEach((function(value){return list.push(value)}))}))})):this.constructor(seqs[0])},List.prototype.setSize=function setSize(size){return setListBounds(this,0,size)},List.prototype.map=function map(mapper,context){var this$1$1=this;return this.withMutations((function(list){for(var i=0;i<this$1$1.size;i++)list.set(i,mapper.call(context,list.get(i),i,this$1$1))}))},List.prototype.slice=function slice(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:setListBounds(this,resolveBegin(begin,size),resolveEnd(end,size))},List.prototype.__iterator=function __iterator(type,reverse){var index=reverse?this.size:0,values=iterateList(this,reverse);return new Iterator((function(){var value=values();return value===DONE?{value:void 0,done:!0}:iteratorValue(type,reverse?--index:index++,value)}))},List.prototype.__iterate=function __iterate(fn,reverse){for(var value,index=reverse?this.size:0,values=iterateList(this,reverse);(value=values())!==DONE&&!1!==fn(value,reverse?--index:index++,this););return index},List.prototype.__ensureOwner=function __ensureOwner(ownerID){return ownerID===this.__ownerID?this:ownerID?makeList(this._origin,this._capacity,this._level,this._root,this._tail,ownerID,this.__hash):0===this.size?emptyList():(this.__ownerID=ownerID,this.__altered=!1,this)},List}(IndexedCollection);List.isList=isList;var ListPrototype=List.prototype;ListPrototype[IS_LIST_SYMBOL]=!0,ListPrototype.delete=ListPrototype.remove,ListPrototype.merge=ListPrototype.concat,ListPrototype.setIn=setIn,ListPrototype.deleteIn=ListPrototype.removeIn=deleteIn,ListPrototype.update=update,ListPrototype.updateIn=updateIn,ListPrototype.mergeIn=mergeIn,ListPrototype.mergeDeepIn=mergeDeepIn,ListPrototype.withMutations=withMutations,ListPrototype.wasAltered=wasAltered,ListPrototype.asImmutable=asImmutable,ListPrototype["@@transducer/init"]=ListPrototype.asMutable=asMutable,ListPrototype["@@transducer/step"]=function(result,arr){return result.push(arr)},ListPrototype["@@transducer/result"]=function(obj){return obj.asImmutable()};var VNode=function VNode(array,ownerID){this.array=array,this.ownerID=ownerID};VNode.prototype.removeBefore=function removeBefore(ownerID,level,index){if(index===level?1<<level:0===this.array.length)return this;var originIndex=index>>>level&MASK;if(originIndex>=this.array.length)return new VNode([],ownerID);var newChild,removingFirst=0===originIndex;if(level>0){var oldChild=this.array[originIndex];if((newChild=oldChild&&oldChild.removeBefore(ownerID,level-SHIFT,index))===oldChild&&removingFirst)return this}if(removingFirst&&!newChild)return this;var editable=editableVNode(this,ownerID);if(!removingFirst)for(var ii=0;ii<originIndex;ii++)editable.array[ii]=void 0;return newChild&&(editable.array[originIndex]=newChild),editable},VNode.prototype.removeAfter=function removeAfter(ownerID,level,index){if(index===(level?1<<level:0)||0===this.array.length)return this;var newChild,sizeIndex=index-1>>>level&MASK;if(sizeIndex>=this.array.length)return this;if(level>0){var oldChild=this.array[sizeIndex];if((newChild=oldChild&&oldChild.removeAfter(ownerID,level-SHIFT,index))===oldChild&&sizeIndex===this.array.length-1)return this}var editable=editableVNode(this,ownerID);return editable.array.splice(sizeIndex+1),newChild&&(editable.array[sizeIndex]=newChild),editable};var EMPTY_LIST,DONE={};function iterateList(list,reverse){var left=list._origin,right=list._capacity,tailPos=getTailOffset(right),tail=list._tail;return iterateNodeOrLeaf(list._root,list._level,0);function iterateNodeOrLeaf(node,level,offset){return 0===level?function iterateLeaf(node,offset){var array=offset===tailPos?tail&&tail.array:node&&node.array,from=offset>left?0:left-offset,to=right-offset;to>SIZE&&(to=SIZE);return function(){if(from===to)return DONE;var idx=reverse?--to:from++;return array&&array[idx]}}(node,offset):function iterateNode(node,level,offset){var values,array=node&&node.array,from=offset>left?0:left-offset>>level,to=1+(right-offset>>level);to>SIZE&&(to=SIZE);return function(){for(;;){if(values){var value=values();if(value!==DONE)return value;values=null}if(from===to)return DONE;var idx=reverse?--to:from++;values=iterateNodeOrLeaf(array&&array[idx],level-SHIFT,offset+(idx<<level))}}}(node,level,offset)}}function makeList(origin,capacity,level,root,tail,ownerID,hash){var list=Object.create(ListPrototype);return list.size=capacity-origin,list._origin=origin,list._capacity=capacity,list._level=level,list._root=root,list._tail=tail,list.__ownerID=ownerID,list.__hash=hash,list.__altered=!1,list}function emptyList(){return EMPTY_LIST||(EMPTY_LIST=makeList(0,0,SHIFT))}function updateVNode(node,ownerID,level,index,value,didAlter){var newNode,idx=index>>>level&MASK,nodeHas=node&&idx<node.array.length;if(!nodeHas&&void 0===value)return node;if(level>0){var lowerNode=node&&node.array[idx],newLowerNode=updateVNode(lowerNode,ownerID,level-SHIFT,index,value,didAlter);return newLowerNode===lowerNode?node:((newNode=editableVNode(node,ownerID)).array[idx]=newLowerNode,newNode)}return nodeHas&&node.array[idx]===value?node:(didAlter&&SetRef(didAlter),newNode=editableVNode(node,ownerID),void 0===value&&idx===newNode.array.length-1?newNode.array.pop():newNode.array[idx]=value,newNode)}function editableVNode(node,ownerID){return ownerID&&node&&ownerID===node.ownerID?node:new VNode(node?node.array.slice():[],ownerID)}function listNodeFor(list,rawIndex){if(rawIndex>=getTailOffset(list._capacity))return list._tail;if(rawIndex<1<<list._level+SHIFT){for(var node=list._root,level=list._level;node&&level>0;)node=node.array[rawIndex>>>level&MASK],level-=SHIFT;return node}}function setListBounds(list,begin,end){void 0!==begin&&(begin|=0),void 0!==end&&(end|=0);var owner=list.__ownerID||new OwnerID,oldOrigin=list._origin,oldCapacity=list._capacity,newOrigin=oldOrigin+begin,newCapacity=void 0===end?oldCapacity:end<0?oldCapacity+end:oldOrigin+end;if(newOrigin===oldOrigin&&newCapacity===oldCapacity)return list;if(newOrigin>=newCapacity)return list.clear();for(var newLevel=list._level,newRoot=list._root,offsetShift=0;newOrigin+offsetShift<0;)newRoot=new VNode(newRoot&&newRoot.array.length?[void 0,newRoot]:[],owner),offsetShift+=1<<(newLevel+=SHIFT);offsetShift&&(newOrigin+=offsetShift,oldOrigin+=offsetShift,newCapacity+=offsetShift,oldCapacity+=offsetShift);for(var oldTailOffset=getTailOffset(oldCapacity),newTailOffset=getTailOffset(newCapacity);newTailOffset>=1<<newLevel+SHIFT;)newRoot=new VNode(newRoot&&newRoot.array.length?[newRoot]:[],owner),newLevel+=SHIFT;var oldTail=list._tail,newTail=newTailOffset<oldTailOffset?listNodeFor(list,newCapacity-1):newTailOffset>oldTailOffset?new VNode([],owner):oldTail;if(oldTail&&newTailOffset>oldTailOffset&&newOrigin<oldCapacity&&oldTail.array.length){for(var node=newRoot=editableVNode(newRoot,owner),level=newLevel;level>SHIFT;level-=SHIFT){var idx=oldTailOffset>>>level&MASK;node=node.array[idx]=editableVNode(node.array[idx],owner)}node.array[oldTailOffset>>>SHIFT&MASK]=oldTail}if(newCapacity<oldCapacity&&(newTail=newTail&&newTail.removeAfter(owner,0,newCapacity)),newOrigin>=newTailOffset)newOrigin-=newTailOffset,newCapacity-=newTailOffset,newLevel=SHIFT,newRoot=null,newTail=newTail&&newTail.removeBefore(owner,0,newOrigin);else if(newOrigin>oldOrigin||newTailOffset<oldTailOffset){for(offsetShift=0;newRoot;){var beginIndex=newOrigin>>>newLevel&MASK;if(beginIndex!==newTailOffset>>>newLevel&MASK)break;beginIndex&&(offsetShift+=(1<<newLevel)*beginIndex),newLevel-=SHIFT,newRoot=newRoot.array[beginIndex]}newRoot&&newOrigin>oldOrigin&&(newRoot=newRoot.removeBefore(owner,newLevel,newOrigin-offsetShift)),newRoot&&newTailOffset<oldTailOffset&&(newRoot=newRoot.removeAfter(owner,newLevel,newTailOffset-offsetShift)),offsetShift&&(newOrigin-=offsetShift,newCapacity-=offsetShift)}return list.__ownerID?(list.size=newCapacity-newOrigin,list._origin=newOrigin,list._capacity=newCapacity,list._level=newLevel,list._root=newRoot,list._tail=newTail,list.__hash=void 0,list.__altered=!0,list):makeList(newOrigin,newCapacity,newLevel,newRoot,newTail)}function getTailOffset(size){return size<SIZE?0:size-1>>>SHIFT<<SHIFT}var EMPTY_ORDERED_MAP,OrderedMap=function(Map){function OrderedMap(value){return null==value?emptyOrderedMap():isOrderedMap(value)?value:emptyOrderedMap().withMutations((function(map){var iter=KeyedCollection(value);assertNotInfinite(iter.size),iter.forEach((function(v,k){return map.set(k,v)}))}))}return Map&&(OrderedMap.__proto__=Map),OrderedMap.prototype=Object.create(Map&&Map.prototype),OrderedMap.prototype.constructor=OrderedMap,OrderedMap.of=function of(){return this(arguments)},OrderedMap.prototype.toString=function toString(){return this.__toString("OrderedMap {","}")},OrderedMap.prototype.get=function get(k,notSetValue){var index=this._map.get(k);return void 0!==index?this._list.get(index)[1]:notSetValue},OrderedMap.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):emptyOrderedMap()},OrderedMap.prototype.set=function set(k,v){return updateOrderedMap(this,k,v)},OrderedMap.prototype.remove=function remove(k){return updateOrderedMap(this,k,NOT_SET)},OrderedMap.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this;return this._list.__iterate((function(entry){return entry&&fn(entry[1],entry[0],this$1$1)}),reverse)},OrderedMap.prototype.__iterator=function __iterator(type,reverse){return this._list.fromEntrySeq().__iterator(type,reverse)},OrderedMap.prototype.__ensureOwner=function __ensureOwner(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map.__ensureOwner(ownerID),newList=this._list.__ensureOwner(ownerID);return ownerID?makeOrderedMap(newMap,newList,ownerID,this.__hash):0===this.size?emptyOrderedMap():(this.__ownerID=ownerID,this.__altered=!1,this._map=newMap,this._list=newList,this)},OrderedMap}(Map);function makeOrderedMap(map,list,ownerID,hash){var omap=Object.create(OrderedMap.prototype);return omap.size=map?map.size:0,omap._map=map,omap._list=list,omap.__ownerID=ownerID,omap.__hash=hash,omap.__altered=!1,omap}function emptyOrderedMap(){return EMPTY_ORDERED_MAP||(EMPTY_ORDERED_MAP=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(omap,k,v){var newMap,newList,map=omap._map,list=omap._list,i=map.get(k),has=void 0!==i;if(v===NOT_SET){if(!has)return omap;list.size>=SIZE&&list.size>=2*map.size?(newMap=(newList=list.filter((function(entry,idx){return void 0!==entry&&i!==idx}))).toKeyedSeq().map((function(entry){return entry[0]})).flip().toMap(),omap.__ownerID&&(newMap.__ownerID=newList.__ownerID=omap.__ownerID)):(newMap=map.remove(k),newList=i===list.size-1?list.pop():list.set(i,void 0))}else if(has){if(v===list.get(i)[1])return omap;newMap=map,newList=list.set(i,[k,v])}else newMap=map.set(k,list.size),newList=list.set(list.size,[k,v]);return omap.__ownerID?(omap.size=newMap.size,omap._map=newMap,omap._list=newList,omap.__hash=void 0,omap.__altered=!0,omap):makeOrderedMap(newMap,newList)}OrderedMap.isOrderedMap=isOrderedMap,OrderedMap.prototype[IS_ORDERED_SYMBOL]=!0,OrderedMap.prototype.delete=OrderedMap.prototype.remove;var IS_STACK_SYMBOL="@@__IMMUTABLE_STACK__@@";function isStack(maybeStack){return Boolean(maybeStack&&maybeStack[IS_STACK_SYMBOL])}var Stack=function(IndexedCollection){function Stack(value){return null==value?emptyStack():isStack(value)?value:emptyStack().pushAll(value)}return IndexedCollection&&(Stack.__proto__=IndexedCollection),Stack.prototype=Object.create(IndexedCollection&&IndexedCollection.prototype),Stack.prototype.constructor=Stack,Stack.of=function of(){return this(arguments)},Stack.prototype.toString=function toString(){return this.__toString("Stack [","]")},Stack.prototype.get=function get(index,notSetValue){var head=this._head;for(index=wrapIndex(this,index);head&&index--;)head=head.next;return head?head.value:notSetValue},Stack.prototype.peek=function peek(){return this._head&&this._head.value},Stack.prototype.push=function push(){var arguments$1=arguments;if(0===arguments.length)return this;for(var newSize=this.size+arguments.length,head=this._head,ii=arguments.length-1;ii>=0;ii--)head={value:arguments$1[ii],next:head};return this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.pushAll=function pushAll(iter){if(0===(iter=IndexedCollection(iter)).size)return this;if(0===this.size&&isStack(iter))return iter;assertNotInfinite(iter.size);var newSize=this.size,head=this._head;return iter.__iterate((function(value){newSize++,head={value:value,next:head}}),!0),this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.pop=function pop(){return this.slice(1)},Stack.prototype.clear=function clear(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):emptyStack()},Stack.prototype.slice=function slice(begin,end){if(wholeSlice(begin,end,this.size))return this;var resolvedBegin=resolveBegin(begin,this.size);if(resolveEnd(end,this.size)!==this.size)return IndexedCollection.prototype.slice.call(this,begin,end);for(var newSize=this.size-resolvedBegin,head=this._head;resolvedBegin--;)head=head.next;return this.__ownerID?(this.size=newSize,this._head=head,this.__hash=void 0,this.__altered=!0,this):makeStack(newSize,head)},Stack.prototype.__ensureOwner=function __ensureOwner(ownerID){return ownerID===this.__ownerID?this:ownerID?makeStack(this.size,this._head,ownerID,this.__hash):0===this.size?emptyStack():(this.__ownerID=ownerID,this.__altered=!1,this)},Stack.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this;if(reverse)return new ArraySeq(this.toArray()).__iterate((function(v,k){return fn(v,k,this$1$1)}),reverse);for(var iterations=0,node=this._head;node&&!1!==fn(node.value,iterations++,this);)node=node.next;return iterations},Stack.prototype.__iterator=function __iterator(type,reverse){if(reverse)return new ArraySeq(this.toArray()).__iterator(type,reverse);var iterations=0,node=this._head;return new Iterator((function(){if(node){var value=node.value;return node=node.next,iteratorValue(type,iterations++,value)}return{value:void 0,done:!0}}))},Stack}(IndexedCollection);Stack.isStack=isStack;var EMPTY_STACK,StackPrototype=Stack.prototype;function makeStack(size,head,ownerID,hash){var map=Object.create(StackPrototype);return map.size=size,map._head=head,map.__ownerID=ownerID,map.__hash=hash,map.__altered=!1,map}function emptyStack(){return EMPTY_STACK||(EMPTY_STACK=makeStack(0))}StackPrototype[IS_STACK_SYMBOL]=!0,StackPrototype.shift=StackPrototype.pop,StackPrototype.unshift=StackPrototype.push,StackPrototype.unshiftAll=StackPrototype.pushAll,StackPrototype.withMutations=withMutations,StackPrototype.wasAltered=wasAltered,StackPrototype.asImmutable=asImmutable,StackPrototype["@@transducer/init"]=StackPrototype.asMutable=asMutable,StackPrototype["@@transducer/step"]=function(result,arr){return result.unshift(arr)},StackPrototype["@@transducer/result"]=function(obj){return obj.asImmutable()};var IS_SET_SYMBOL="@@__IMMUTABLE_SET__@@";function isSet(maybeSet){return Boolean(maybeSet&&maybeSet[IS_SET_SYMBOL])}function isOrderedSet(maybeOrderedSet){return isSet(maybeOrderedSet)&&isOrdered(maybeOrderedSet)}function deepEqual(a,b){if(a===b)return!0;if(!isCollection(b)||void 0!==a.size&&void 0!==b.size&&a.size!==b.size||void 0!==a.__hash&&void 0!==b.__hash&&a.__hash!==b.__hash||isKeyed(a)!==isKeyed(b)||isIndexed(a)!==isIndexed(b)||isOrdered(a)!==isOrdered(b))return!1;if(0===a.size&&0===b.size)return!0;var notAssociative=!isAssociative(a);if(isOrdered(a)){var entries=a.entries();return b.every((function(v,k){var entry=entries.next().value;return entry&&is(entry[1],v)&&(notAssociative||is(entry[0],k))}))&&entries.next().done}var flipped=!1;if(void 0===a.size)if(void 0===b.size)"function"==typeof a.cacheResult&&a.cacheResult();else{flipped=!0;var _=a;a=b,b=_}var allEqual=!0,bSize=b.__iterate((function(v,k){if(notAssociative?!a.has(v):flipped?!is(v,a.get(k,NOT_SET)):!is(a.get(k,NOT_SET),v))return allEqual=!1,!1}));return allEqual&&a.size===bSize}function mixin(ctor,methods){var keyCopier=function(key){ctor.prototype[key]=methods[key]};return Object.keys(methods).forEach(keyCopier),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(methods).forEach(keyCopier),ctor}function toJS(value){if(!value||"object"!=typeof value)return value;if(!isCollection(value)){if(!isDataStructure(value))return value;value=Seq(value)}if(isKeyed(value)){var result$1={};return value.__iterate((function(v,k){result$1[k]=toJS(v)})),result$1}var result=[];return value.__iterate((function(v){result.push(toJS(v))})),result}var Set=function(SetCollection){function Set(value){return null==value?emptySet():isSet(value)&&!isOrdered(value)?value:emptySet().withMutations((function(set){var iter=SetCollection(value);assertNotInfinite(iter.size),iter.forEach((function(v){return set.add(v)}))}))}return SetCollection&&(Set.__proto__=SetCollection),Set.prototype=Object.create(SetCollection&&SetCollection.prototype),Set.prototype.constructor=Set,Set.of=function of(){return this(arguments)},Set.fromKeys=function fromKeys(value){return this(KeyedCollection(value).keySeq())},Set.intersect=function intersect(sets){return(sets=Collection(sets).toArray()).length?SetPrototype.intersect.apply(Set(sets.pop()),sets):emptySet()},Set.union=function union(sets){return(sets=Collection(sets).toArray()).length?SetPrototype.union.apply(Set(sets.pop()),sets):emptySet()},Set.prototype.toString=function toString(){return this.__toString("Set {","}")},Set.prototype.has=function has(value){return this._map.has(value)},Set.prototype.add=function add(value){return updateSet(this,this._map.set(value,value))},Set.prototype.remove=function remove(value){return updateSet(this,this._map.remove(value))},Set.prototype.clear=function clear(){return updateSet(this,this._map.clear())},Set.prototype.map=function map(mapper,context){var this$1$1=this,didChanges=!1,newMap=updateSet(this,this._map.mapEntries((function(ref){var v=ref[1],mapped=mapper.call(context,v,v,this$1$1);return mapped!==v&&(didChanges=!0),[mapped,mapped]}),context));return didChanges?newMap:this},Set.prototype.union=function union(){for(var iters=[],len=arguments.length;len--;)iters[len]=arguments[len];return 0===(iters=iters.filter((function(x){return 0!==x.size}))).length?this:0!==this.size||this.__ownerID||1!==iters.length?this.withMutations((function(set){for(var ii=0;ii<iters.length;ii++)"string"==typeof iters[ii]?set.add(iters[ii]):SetCollection(iters[ii]).forEach((function(value){return set.add(value)}))})):this.constructor(iters[0])},Set.prototype.intersect=function intersect(){for(var iters=[],len=arguments.length;len--;)iters[len]=arguments[len];if(0===iters.length)return this;iters=iters.map((function(iter){return SetCollection(iter)}));var toRemove=[];return this.forEach((function(value){iters.every((function(iter){return iter.includes(value)}))||toRemove.push(value)})),this.withMutations((function(set){toRemove.forEach((function(value){set.remove(value)}))}))},Set.prototype.subtract=function subtract(){for(var iters=[],len=arguments.length;len--;)iters[len]=arguments[len];if(0===iters.length)return this;iters=iters.map((function(iter){return SetCollection(iter)}));var toRemove=[];return this.forEach((function(value){iters.some((function(iter){return iter.includes(value)}))&&toRemove.push(value)})),this.withMutations((function(set){toRemove.forEach((function(value){set.remove(value)}))}))},Set.prototype.sort=function sort(comparator){return OrderedSet(sortFactory(this,comparator))},Set.prototype.sortBy=function sortBy(mapper,comparator){return OrderedSet(sortFactory(this,comparator,mapper))},Set.prototype.wasAltered=function wasAltered(){return this._map.wasAltered()},Set.prototype.__iterate=function __iterate(fn,reverse){var this$1$1=this;return this._map.__iterate((function(k){return fn(k,k,this$1$1)}),reverse)},Set.prototype.__iterator=function __iterator(type,reverse){return this._map.__iterator(type,reverse)},Set.prototype.__ensureOwner=function __ensureOwner(ownerID){if(ownerID===this.__ownerID)return this;var newMap=this._map.__ensureOwner(ownerID);return ownerID?this.__make(newMap,ownerID):0===this.size?this.__empty():(this.__ownerID=ownerID,this._map=newMap,this)},Set}(SetCollection);Set.isSet=isSet;var EMPTY_SET,SetPrototype=Set.prototype;function updateSet(set,newMap){return set.__ownerID?(set.size=newMap.size,set._map=newMap,set):newMap===set._map?set:0===newMap.size?set.__empty():set.__make(newMap)}function makeSet(map,ownerID){var set=Object.create(SetPrototype);return set.size=map?map.size:0,set._map=map,set.__ownerID=ownerID,set}function emptySet(){return EMPTY_SET||(EMPTY_SET=makeSet(emptyMap()))}SetPrototype[IS_SET_SYMBOL]=!0,SetPrototype.delete=SetPrototype.remove,SetPrototype.merge=SetPrototype.concat=SetPrototype.union,SetPrototype.withMutations=withMutations,SetPrototype.asImmutable=asImmutable,SetPrototype["@@transducer/init"]=SetPrototype.asMutable=asMutable,SetPrototype["@@transducer/step"]=function(result,arr){return result.add(arr)},SetPrototype["@@transducer/result"]=function(obj){return obj.asImmutable()},SetPrototype.__empty=emptySet,SetPrototype.__make=makeSet;var EMPTY_RANGE,Range=function(IndexedSeq){function Range(start,end,step){if(!(this instanceof Range))return new Range(start,end,step);if(invariant(0!==step,"Cannot step a Range by 0"),start=start||0,void 0===end&&(end=1/0),step=void 0===step?1:Math.abs(step),end<start&&(step=-step),this._start=start,this._end=end,this._step=step,this.size=Math.max(0,Math.ceil((end-start)/step-1)+1),0===this.size){if(EMPTY_RANGE)return EMPTY_RANGE;EMPTY_RANGE=this}}return IndexedSeq&&(Range.__proto__=IndexedSeq),Range.prototype=Object.create(IndexedSeq&&IndexedSeq.prototype),Range.prototype.constructor=Range,Range.prototype.toString=function toString(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Range.prototype.get=function get(index,notSetValue){return this.has(index)?this._start+wrapIndex(this,index)*this._step:notSetValue},Range.prototype.includes=function includes(searchValue){var possibleIndex=(searchValue-this._start)/this._step;return possibleIndex>=0&&possibleIndex<this.size&&possibleIndex===Math.floor(possibleIndex)},Range.prototype.slice=function slice(begin,end){return wholeSlice(begin,end,this.size)?this:(begin=resolveBegin(begin,this.size),(end=resolveEnd(end,this.size))<=begin?new Range(0,0):new Range(this.get(begin,this._end),this.get(end,this._end),this._step))},Range.prototype.indexOf=function indexOf(searchValue){var offsetValue=searchValue-this._start;if(offsetValue%this._step==0){var index=offsetValue/this._step;if(index>=0&&index<this.size)return index}return-1},Range.prototype.lastIndexOf=function lastIndexOf(searchValue){return this.indexOf(searchValue)},Range.prototype.__iterate=function __iterate(fn,reverse){for(var size=this.size,step=this._step,value=reverse?this._start+(size-1)*step:this._start,i=0;i!==size&&!1!==fn(value,reverse?size-++i:i++,this);)value+=reverse?-step:step;return i},Range.prototype.__iterator=function __iterator(type,reverse){var size=this.size,step=this._step,value=reverse?this._start+(size-1)*step:this._start,i=0;return new Iterator((function(){if(i===size)return{value:void 0,done:!0};var v=value;return value+=reverse?-step:step,iteratorValue(type,reverse?size-++i:i++,v)}))},Range.prototype.equals=function equals(other){return other instanceof Range?this._start===other._start&&this._end===other._end&&this._step===other._step:deepEqual(this,other)},Range}(IndexedSeq);function getIn$1(collection,searchKeyPath,notSetValue){for(var keyPath=coerceKeyPath(searchKeyPath),i=0;i!==keyPath.length;)if((collection=get(collection,keyPath[i++],NOT_SET))===NOT_SET)return notSetValue;return collection}function getIn(searchKeyPath,notSetValue){return getIn$1(this,searchKeyPath,notSetValue)}function hasIn$1(collection,keyPath){return getIn$1(collection,keyPath,NOT_SET)!==NOT_SET}function toObject(){assertNotInfinite(this.size);var object={};return this.__iterate((function(v,k){object[k]=v})),object}Collection.isIterable=isCollection,Collection.isKeyed=isKeyed,Collection.isIndexed=isIndexed,Collection.isAssociative=isAssociative,Collection.isOrdered=isOrdered,Collection.Iterator=Iterator,mixin(Collection,{toArray:function toArray(){assertNotInfinite(this.size);var array=new Array(this.size||0),useTuples=isKeyed(this),i=0;return this.__iterate((function(v,k){array[i++]=useTuples?[k,v]:v})),array},toIndexedSeq:function toIndexedSeq(){return new ToIndexedSequence(this)},toJS:function toJS$1(){return toJS(this)},toKeyedSeq:function toKeyedSeq(){return new ToKeyedSequence(this,!0)},toMap:function toMap(){return Map(this.toKeyedSeq())},toObject:toObject,toOrderedMap:function toOrderedMap(){return OrderedMap(this.toKeyedSeq())},toOrderedSet:function toOrderedSet(){return OrderedSet(isKeyed(this)?this.valueSeq():this)},toSet:function toSet(){return Set(isKeyed(this)?this.valueSeq():this)},toSetSeq:function toSetSeq(){return new ToSetSequence(this)},toSeq:function toSeq(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function toStack(){return Stack(isKeyed(this)?this.valueSeq():this)},toList:function toList(){return List(isKeyed(this)?this.valueSeq():this)},toString:function toString(){return"[Collection]"},__toString:function __toString(head,tail){return 0===this.size?head+tail:head+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+tail},concat:function concat(){for(var values=[],len=arguments.length;len--;)values[len]=arguments[len];return reify(this,function concatFactory(collection,values){var isKeyedCollection=isKeyed(collection),iters=[collection].concat(values).map((function(v){return isCollection(v)?isKeyedCollection&&(v=KeyedCollection(v)):v=isKeyedCollection?keyedSeqFromValue(v):indexedSeqFromValue(Array.isArray(v)?v:[v]),v})).filter((function(v){return 0!==v.size}));if(0===iters.length)return collection;if(1===iters.length){var singleton=iters[0];if(singleton===collection||isKeyedCollection&&isKeyed(singleton)||isIndexed(collection)&&isIndexed(singleton))return singleton}var concatSeq=new ArraySeq(iters);return isKeyedCollection?concatSeq=concatSeq.toKeyedSeq():isIndexed(collection)||(concatSeq=concatSeq.toSetSeq()),(concatSeq=concatSeq.flatten(!0)).size=iters.reduce((function(sum,seq){if(void 0!==sum){var size=seq.size;if(void 0!==size)return sum+size}}),0),concatSeq}(this,values))},includes:function includes(searchValue){return this.some((function(value){return is(value,searchValue)}))},entries:function entries(){return this.__iterator(ITERATE_ENTRIES)},every:function every(predicate,context){assertNotInfinite(this.size);var returnValue=!0;return this.__iterate((function(v,k,c){if(!predicate.call(context,v,k,c))return returnValue=!1,!1})),returnValue},filter:function filter(predicate,context){return reify(this,filterFactory(this,predicate,context,!0))},partition:function partition(predicate,context){return function partitionFactory(collection,predicate,context){var isKeyedIter=isKeyed(collection),groups=[[],[]];collection.__iterate((function(v,k){groups[predicate.call(context,v,k,collection)?1:0].push(isKeyedIter?[k,v]:v)}));var coerce=collectionClass(collection);return groups.map((function(arr){return reify(collection,coerce(arr))}))}(this,predicate,context)},find:function find(predicate,context,notSetValue){var entry=this.findEntry(predicate,context);return entry?entry[1]:notSetValue},forEach:function forEach(sideEffect,context){return assertNotInfinite(this.size),this.__iterate(context?sideEffect.bind(context):sideEffect)},join:function join(separator){assertNotInfinite(this.size),separator=void 0!==separator?""+separator:",";var joined="",isFirst=!0;return this.__iterate((function(v){isFirst?isFirst=!1:joined+=separator,joined+=null!=v?v.toString():""})),joined},keys:function keys(){return this.__iterator(ITERATE_KEYS)},map:function map(mapper,context){return reify(this,mapFactory(this,mapper,context))},reduce:function reduce$1(reducer,initialReduction,context){return reduce(this,reducer,initialReduction,context,arguments.length<2,!1)},reduceRight:function reduceRight(reducer,initialReduction,context){return reduce(this,reducer,initialReduction,context,arguments.length<2,!0)},reverse:function reverse(){return reify(this,reverseFactory(this,!0))},slice:function slice(begin,end){return reify(this,sliceFactory(this,begin,end,!0))},some:function some(predicate,context){assertNotInfinite(this.size);var returnValue=!1;return this.__iterate((function(v,k,c){if(predicate.call(context,v,k,c))return returnValue=!0,!1})),returnValue},sort:function sort(comparator){return reify(this,sortFactory(this,comparator))},values:function values(){return this.__iterator(ITERATE_VALUES)},butLast:function butLast(){return this.slice(0,-1)},isEmpty:function isEmpty(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function count(predicate,context){return ensureSize(predicate?this.toSeq().filter(predicate,context):this)},countBy:function countBy(grouper,context){return function countByFactory(collection,grouper,context){var groups=Map().asMutable();return collection.__iterate((function(v,k){groups.update(grouper.call(context,v,k,collection),0,(function(a){return a+1}))})),groups.asImmutable()}(this,grouper,context)},equals:function equals(other){return deepEqual(this,other)},entrySeq:function entrySeq(){var collection=this;if(collection._cache)return new ArraySeq(collection._cache);var entriesSequence=collection.toSeq().map(entryMapper).toIndexedSeq();return entriesSequence.fromEntrySeq=function(){return collection.toSeq()},entriesSequence},filterNot:function filterNot(predicate,context){return this.filter(not(predicate),context)},findEntry:function findEntry(predicate,context,notSetValue){var found=notSetValue;return this.__iterate((function(v,k,c){if(predicate.call(context,v,k,c))return found=[k,v],!1})),found},findKey:function findKey(predicate,context){var entry=this.findEntry(predicate,context);return entry&&entry[0]},findLast:function findLast(predicate,context,notSetValue){return this.toKeyedSeq().reverse().find(predicate,context,notSetValue)},findLastEntry:function findLastEntry(predicate,context,notSetValue){return this.toKeyedSeq().reverse().findEntry(predicate,context,notSetValue)},findLastKey:function findLastKey(predicate,context){return this.toKeyedSeq().reverse().findKey(predicate,context)},first:function first(notSetValue){return this.find(returnTrue,null,notSetValue)},flatMap:function flatMap(mapper,context){return reify(this,function flatMapFactory(collection,mapper,context){var coerce=collectionClass(collection);return collection.toSeq().map((function(v,k){return coerce(mapper.call(context,v,k,collection))})).flatten(!0)}(this,mapper,context))},flatten:function flatten(depth){return reify(this,flattenFactory(this,depth,!0))},fromEntrySeq:function fromEntrySeq(){return new FromEntriesSequence(this)},get:function get(searchKey,notSetValue){return this.find((function(_,key){return is(key,searchKey)}),void 0,notSetValue)},getIn:getIn,groupBy:function groupBy(grouper,context){return function groupByFactory(collection,grouper,context){var isKeyedIter=isKeyed(collection),groups=(isOrdered(collection)?OrderedMap():Map()).asMutable();collection.__iterate((function(v,k){groups.update(grouper.call(context,v,k,collection),(function(a){return(a=a||[]).push(isKeyedIter?[k,v]:v),a}))}));var coerce=collectionClass(collection);return groups.map((function(arr){return reify(collection,coerce(arr))})).asImmutable()}(this,grouper,context)},has:function has(searchKey){return this.get(searchKey,NOT_SET)!==NOT_SET},hasIn:function hasIn(searchKeyPath){return hasIn$1(this,searchKeyPath)},isSubset:function isSubset(iter){return iter="function"==typeof iter.includes?iter:Collection(iter),this.every((function(value){return iter.includes(value)}))},isSuperset:function isSuperset(iter){return(iter="function"==typeof iter.isSubset?iter:Collection(iter)).isSubset(this)},keyOf:function keyOf(searchValue){return this.findKey((function(value){return is(value,searchValue)}))},keySeq:function keySeq(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function last(notSetValue){return this.toSeq().reverse().first(notSetValue)},lastKeyOf:function lastKeyOf(searchValue){return this.toKeyedSeq().reverse().keyOf(searchValue)},max:function max(comparator){return maxFactory(this,comparator)},maxBy:function maxBy(mapper,comparator){return maxFactory(this,comparator,mapper)},min:function min(comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator)},minBy:function minBy(mapper,comparator){return maxFactory(this,comparator?neg(comparator):defaultNegComparator,mapper)},rest:function rest(){return this.slice(1)},skip:function skip(amount){return 0===amount?this:this.slice(Math.max(0,amount))},skipLast:function skipLast(amount){return 0===amount?this:this.slice(0,-Math.max(0,amount))},skipWhile:function skipWhile(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,!0))},skipUntil:function skipUntil(predicate,context){return this.skipWhile(not(predicate),context)},sortBy:function sortBy(mapper,comparator){return reify(this,sortFactory(this,comparator,mapper))},take:function take(amount){return this.slice(0,Math.max(0,amount))},takeLast:function takeLast(amount){return this.slice(-Math.max(0,amount))},takeWhile:function takeWhile(predicate,context){return reify(this,function takeWhileFactory(collection,predicate,context){var takeSequence=makeSequence(collection);return takeSequence.__iterateUncached=function(fn,reverse){var this$1$1=this;if(reverse)return this.cacheResult().__iterate(fn,reverse);var iterations=0;return collection.__iterate((function(v,k,c){return predicate.call(context,v,k,c)&&++iterations&&fn(v,k,this$1$1)})),iterations},takeSequence.__iteratorUncached=function(type,reverse){var this$1$1=this;if(reverse)return this.cacheResult().__iterator(type,reverse);var iterator=collection.__iterator(ITERATE_ENTRIES,reverse),iterating=!0;return new Iterator((function(){if(!iterating)return{value:void 0,done:!0};var step=iterator.next();if(step.done)return step;var entry=step.value,k=entry[0],v=entry[1];return predicate.call(context,v,k,this$1$1)?type===ITERATE_ENTRIES?step:iteratorValue(type,k,v,step):(iterating=!1,{value:void 0,done:!0})}))},takeSequence}(this,predicate,context))},takeUntil:function takeUntil(predicate,context){return this.takeWhile(not(predicate),context)},update:function update(fn){return fn(this)},valueSeq:function valueSeq(){return this.toIndexedSeq()},hashCode:function hashCode(){return this.__hash||(this.__hash=function hashCollection(collection){if(collection.size===1/0)return 0;var ordered=isOrdered(collection),keyed=isKeyed(collection),h=ordered?1:0;return function murmurHashOfSize(size,h){return h=imul(h,3432918353),h=imul(h<<15|h>>>-15,461845907),h=imul(h<<13|h>>>-13,5),h=h+3864292196^size,h=imul(h^h>>>16,2246822507),h=imul(h^h>>>13,3266489909),h=smi(h^h>>>16),h}(collection.__iterate(keyed?ordered?function(v,k){h=31*h+hashMerge(hash(v),hash(k))|0}:function(v,k){h=h+hashMerge(hash(v),hash(k))|0}:ordered?function(v){h=31*h+hash(v)|0}:function(v){h=h+hash(v)|0}),h)}(this))}});var CollectionPrototype=Collection.prototype;CollectionPrototype[IS_COLLECTION_SYMBOL]=!0,CollectionPrototype[ITERATOR_SYMBOL]=CollectionPrototype.values,CollectionPrototype.toJSON=CollectionPrototype.toArray,CollectionPrototype.__toStringMapper=quoteString,CollectionPrototype.inspect=CollectionPrototype.toSource=function(){return this.toString()},CollectionPrototype.chain=CollectionPrototype.flatMap,CollectionPrototype.contains=CollectionPrototype.includes,mixin(KeyedCollection,{flip:function flip(){return reify(this,flipFactory(this))},mapEntries:function mapEntries(mapper,context){var this$1$1=this,iterations=0;return reify(this,this.toSeq().map((function(v,k){return mapper.call(context,[k,v],iterations++,this$1$1)})).fromEntrySeq())},mapKeys:function mapKeys(mapper,context){var this$1$1=this;return reify(this,this.toSeq().flip().map((function(k,v){return mapper.call(context,k,v,this$1$1)})).flip())}});var KeyedCollectionPrototype=KeyedCollection.prototype;KeyedCollectionPrototype[IS_KEYED_SYMBOL]=!0,KeyedCollectionPrototype[ITERATOR_SYMBOL]=CollectionPrototype.entries,KeyedCollectionPrototype.toJSON=toObject,KeyedCollectionPrototype.__toStringMapper=function(v,k){return quoteString(k)+": "+quoteString(v)},mixin(IndexedCollection,{toKeyedSeq:function toKeyedSeq(){return new ToKeyedSequence(this,!1)},filter:function filter(predicate,context){return reify(this,filterFactory(this,predicate,context,!1))},findIndex:function findIndex(predicate,context){var entry=this.findEntry(predicate,context);return entry?entry[0]:-1},indexOf:function indexOf(searchValue){var key=this.keyOf(searchValue);return void 0===key?-1:key},lastIndexOf:function lastIndexOf(searchValue){var key=this.lastKeyOf(searchValue);return void 0===key?-1:key},reverse:function reverse(){return reify(this,reverseFactory(this,!1))},slice:function slice(begin,end){return reify(this,sliceFactory(this,begin,end,!1))},splice:function splice(index,removeNum){var numArgs=arguments.length;if(removeNum=Math.max(removeNum||0,0),0===numArgs||2===numArgs&&!removeNum)return this;index=resolveBegin(index,index<0?this.count():this.size);var spliced=this.slice(0,index);return reify(this,1===numArgs?spliced:spliced.concat(arrCopy(arguments,2),this.slice(index+removeNum)))},findLastIndex:function findLastIndex(predicate,context){var entry=this.findLastEntry(predicate,context);return entry?entry[0]:-1},first:function first(notSetValue){return this.get(0,notSetValue)},flatten:function flatten(depth){return reify(this,flattenFactory(this,depth,!1))},get:function get(index,notSetValue){return(index=wrapIndex(this,index))<0||this.size===1/0||void 0!==this.size&&index>this.size?notSetValue:this.find((function(_,key){return key===index}),void 0,notSetValue)},has:function has(index){return(index=wrapIndex(this,index))>=0&&(void 0!==this.size?this.size===1/0||index<this.size:-1!==this.indexOf(index))},interpose:function interpose(separator){return reify(this,function interposeFactory(collection,separator){var interposedSequence=makeSequence(collection);return interposedSequence.size=collection.size&&2*collection.size-1,interposedSequence.__iterateUncached=function(fn,reverse){var this$1$1=this,iterations=0;return collection.__iterate((function(v){return(!iterations||!1!==fn(separator,iterations++,this$1$1))&&!1!==fn(v,iterations++,this$1$1)}),reverse),iterations},interposedSequence.__iteratorUncached=function(type,reverse){var step,iterator=collection.__iterator(ITERATE_VALUES,reverse),iterations=0;return new Iterator((function(){return(!step||iterations%2)&&(step=iterator.next()).done?step:iterations%2?iteratorValue(type,iterations++,separator):iteratorValue(type,iterations++,step.value,step)}))},interposedSequence}(this,separator))},interleave:function interleave(){var collections=[this].concat(arrCopy(arguments)),zipped=zipWithFactory(this.toSeq(),IndexedSeq.of,collections),interleaved=zipped.flatten(!0);return zipped.size&&(interleaved.size=zipped.size*collections.length),reify(this,interleaved)},keySeq:function keySeq(){return Range(0,this.size)},last:function last(notSetValue){return this.get(-1,notSetValue)},skipWhile:function skipWhile(predicate,context){return reify(this,skipWhileFactory(this,predicate,context,!1))},zip:function zip(){return reify(this,zipWithFactory(this,defaultZipper,[this].concat(arrCopy(arguments))))},zipAll:function zipAll(){return reify(this,zipWithFactory(this,defaultZipper,[this].concat(arrCopy(arguments)),!0))},zipWith:function zipWith(zipper){var collections=arrCopy(arguments);return collections[0]=this,reify(this,zipWithFactory(this,zipper,collections))}});var IndexedCollectionPrototype=IndexedCollection.prototype;IndexedCollectionPrototype[IS_INDEXED_SYMBOL]=!0,IndexedCollectionPrototype[IS_ORDERED_SYMBOL]=!0,mixin(SetCollection,{get:function get(value,notSetValue){return this.has(value)?value:notSetValue},includes:function includes(value){return this.has(value)},keySeq:function keySeq(){return this.valueSeq()}});var SetCollectionPrototype=SetCollection.prototype;function reduce(collection,reducer,reduction,context,useFirst,reverse){return assertNotInfinite(collection.size),collection.__iterate((function(v,k,c){useFirst?(useFirst=!1,reduction=v):reduction=reducer.call(context,reduction,v,k,c)}),reverse),reduction}function keyMapper(v,k){return k}function entryMapper(v,k){return[k,v]}function not(predicate){return function(){return!predicate.apply(this,arguments)}}function neg(predicate){return function(){return-predicate.apply(this,arguments)}}function defaultZipper(){return arrCopy(arguments)}function defaultNegComparator(a,b){return a<b?1:a>b?-1:0}function hashMerge(a,b){return a^b+2654435769+(a<<6)+(a>>2)}SetCollectionPrototype.has=CollectionPrototype.includes,SetCollectionPrototype.contains=SetCollectionPrototype.includes,SetCollectionPrototype.keys=SetCollectionPrototype.values,mixin(KeyedSeq,KeyedCollectionPrototype),mixin(IndexedSeq,IndexedCollectionPrototype),mixin(SetSeq,SetCollectionPrototype);var OrderedSet=function(Set){function OrderedSet(value){return null==value?emptyOrderedSet():isOrderedSet(value)?value:emptyOrderedSet().withMutations((function(set){var iter=SetCollection(value);assertNotInfinite(iter.size),iter.forEach((function(v){return set.add(v)}))}))}return Set&&(OrderedSet.__proto__=Set),OrderedSet.prototype=Object.create(Set&&Set.prototype),OrderedSet.prototype.constructor=OrderedSet,OrderedSet.of=function of(){return this(arguments)},OrderedSet.fromKeys=function fromKeys(value){return this(KeyedCollection(value).keySeq())},OrderedSet.prototype.toString=function toString(){return this.__toString("OrderedSet {","}")},OrderedSet}(Set);OrderedSet.isOrderedSet=isOrderedSet;var EMPTY_ORDERED_SET,OrderedSetPrototype=OrderedSet.prototype;function makeOrderedSet(map,ownerID){var set=Object.create(OrderedSetPrototype);return set.size=map?map.size:0,set._map=map,set.__ownerID=ownerID,set}function emptyOrderedSet(){return EMPTY_ORDERED_SET||(EMPTY_ORDERED_SET=makeOrderedSet(emptyOrderedMap()))}OrderedSetPrototype[IS_ORDERED_SYMBOL]=!0,OrderedSetPrototype.zip=IndexedCollectionPrototype.zip,OrderedSetPrototype.zipWith=IndexedCollectionPrototype.zipWith,OrderedSetPrototype.zipAll=IndexedCollectionPrototype.zipAll,OrderedSetPrototype.__empty=emptyOrderedSet,OrderedSetPrototype.__make=makeOrderedSet;var PairSorting={LeftThenRight:-1,RightThenLeft:1};var Record=function Record(defaultValues,name){var hasInitialized;!function throwOnInvalidDefaultValues(defaultValues){if(isRecord(defaultValues))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(isImmutable(defaultValues))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===defaultValues||"object"!=typeof defaultValues)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(defaultValues);var RecordType=function Record(values){var this$1$1=this;if(values instanceof RecordType)return values;if(!(this instanceof RecordType))return new RecordType(values);if(!hasInitialized){hasInitialized=!0;var keys=Object.keys(defaultValues),indices=RecordTypePrototype._indices={};RecordTypePrototype._name=name,RecordTypePrototype._keys=keys,RecordTypePrototype._defaultValues=defaultValues;for(var i=0;i<keys.length;i++){var propName=keys[i];indices[propName]=i,RecordTypePrototype[propName]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+recordName(this)+' with property "'+propName+'" since that property name is part of the Record API.'):setProp(RecordTypePrototype,propName)}}return this.__ownerID=void 0,this._values=List().withMutations((function(l){l.setSize(this$1$1._keys.length),KeyedCollection(values).forEach((function(v,k){l.set(this$1$1._indices[k],v===this$1$1._defaultValues[k]?void 0:v)}))})),this},RecordTypePrototype=RecordType.prototype=Object.create(RecordPrototype);return RecordTypePrototype.constructor=RecordType,name&&(RecordType.displayName=name),RecordType};Record.prototype.toString=function toString(){for(var k,str=recordName(this)+" { ",keys=this._keys,i=0,l=keys.length;i!==l;i++)str+=(i?", ":"")+(k=keys[i])+": "+quoteString(this.get(k));return str+" }"},Record.prototype.equals=function equals(other){return this===other||isRecord(other)&&recordSeq(this).equals(recordSeq(other))},Record.prototype.hashCode=function hashCode(){return recordSeq(this).hashCode()},Record.prototype.has=function has(k){return this._indices.hasOwnProperty(k)},Record.prototype.get=function get(k,notSetValue){if(!this.has(k))return notSetValue;var index=this._indices[k],value=this._values.get(index);return void 0===value?this._defaultValues[k]:value},Record.prototype.set=function set(k,v){if(this.has(k)){var newValues=this._values.set(this._indices[k],v===this._defaultValues[k]?void 0:v);if(newValues!==this._values&&!this.__ownerID)return makeRecord(this,newValues)}return this},Record.prototype.remove=function remove(k){return this.set(k)},Record.prototype.clear=function clear(){var newValues=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:makeRecord(this,newValues)},Record.prototype.wasAltered=function wasAltered(){return this._values.wasAltered()},Record.prototype.toSeq=function toSeq(){return recordSeq(this)},Record.prototype.toJS=function toJS$1(){return toJS(this)},Record.prototype.entries=function entries(){return this.__iterator(ITERATE_ENTRIES)},Record.prototype.__iterator=function __iterator(type,reverse){return recordSeq(this).__iterator(type,reverse)},Record.prototype.__iterate=function __iterate(fn,reverse){return recordSeq(this).__iterate(fn,reverse)},Record.prototype.__ensureOwner=function __ensureOwner(ownerID){if(ownerID===this.__ownerID)return this;var newValues=this._values.__ensureOwner(ownerID);return ownerID?makeRecord(this,newValues,ownerID):(this.__ownerID=ownerID,this._values=newValues,this)},Record.isRecord=isRecord,Record.getDescriptiveName=recordName;var RecordPrototype=Record.prototype;function makeRecord(likeRecord,values,ownerID){var record=Object.create(Object.getPrototypeOf(likeRecord));return record._values=values,record.__ownerID=ownerID,record}function recordName(record){return record.constructor.displayName||record.constructor.name||"Record"}function recordSeq(record){return keyedSeqFromValue(record._keys.map((function(k){return[k,record.get(k)]})))}function setProp(prototype,name){try{Object.defineProperty(prototype,name,{get:function(){return this.get(name)},set:function(value){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(name,value)}})}catch(error){}}RecordPrototype[IS_RECORD_SYMBOL]=!0,RecordPrototype.delete=RecordPrototype.remove,RecordPrototype.deleteIn=RecordPrototype.removeIn=deleteIn,RecordPrototype.getIn=getIn,RecordPrototype.hasIn=CollectionPrototype.hasIn,RecordPrototype.merge=merge$1,RecordPrototype.mergeWith=mergeWith$1,RecordPrototype.mergeIn=mergeIn,RecordPrototype.mergeDeep=mergeDeep,RecordPrototype.mergeDeepWith=mergeDeepWith,RecordPrototype.mergeDeepIn=mergeDeepIn,RecordPrototype.setIn=setIn,RecordPrototype.update=update,RecordPrototype.updateIn=updateIn,RecordPrototype.withMutations=withMutations,RecordPrototype.asMutable=asMutable,RecordPrototype.asImmutable=asImmutable,RecordPrototype[ITERATOR_SYMBOL]=RecordPrototype.entries,RecordPrototype.toJSON=RecordPrototype.toObject=CollectionPrototype.toObject,RecordPrototype.inspect=RecordPrototype.toSource=function(){return this.toString()};var EMPTY_REPEAT,Repeat=function(IndexedSeq){function Repeat(value,times){if(!(this instanceof Repeat))return new Repeat(value,times);if(this._value=value,this.size=void 0===times?1/0:Math.max(0,times),0===this.size){if(EMPTY_REPEAT)return EMPTY_REPEAT;EMPTY_REPEAT=this}}return IndexedSeq&&(Repeat.__proto__=IndexedSeq),Repeat.prototype=Object.create(IndexedSeq&&IndexedSeq.prototype),Repeat.prototype.constructor=Repeat,Repeat.prototype.toString=function toString(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Repeat.prototype.get=function get(index,notSetValue){return this.has(index)?this._value:notSetValue},Repeat.prototype.includes=function includes(searchValue){return is(this._value,searchValue)},Repeat.prototype.slice=function slice(begin,end){var size=this.size;return wholeSlice(begin,end,size)?this:new Repeat(this._value,resolveEnd(end,size)-resolveBegin(begin,size))},Repeat.prototype.reverse=function reverse(){return this},Repeat.prototype.indexOf=function indexOf(searchValue){return is(this._value,searchValue)?0:-1},Repeat.prototype.lastIndexOf=function lastIndexOf(searchValue){return is(this._value,searchValue)?this.size:-1},Repeat.prototype.__iterate=function __iterate(fn,reverse){for(var size=this.size,i=0;i!==size&&!1!==fn(this._value,reverse?size-++i:i++,this););return i},Repeat.prototype.__iterator=function __iterator(type,reverse){var this$1$1=this,size=this.size,i=0;return new Iterator((function(){return i===size?{value:void 0,done:!0}:iteratorValue(type,reverse?size-++i:i++,this$1$1._value)}))},Repeat.prototype.equals=function equals(other){return other instanceof Repeat?is(this._value,other._value):deepEqual(this,other)},Repeat}(IndexedSeq);function fromJS(value,converter){return fromJSWith([],converter||defaultConverter,value,"",converter&&converter.length>2?[]:void 0,{"":value})}function fromJSWith(stack,converter,value,key,keyPath,parentValue){if("string"!=typeof value&&!isImmutable(value)&&(isArrayLike(value)||hasIterator(value)||isPlainObject(value))){if(~stack.indexOf(value))throw new TypeError("Cannot convert circular structure to Immutable");stack.push(value),keyPath&&""!==key&&keyPath.push(key);var converted=converter.call(parentValue,key,Seq(value).map((function(v,k){return fromJSWith(stack,converter,v,k,keyPath,value)})),keyPath&&keyPath.slice());return stack.pop(),keyPath&&keyPath.pop(),converted}return value}function defaultConverter(k,v){return isIndexed(v)?v.toList():isKeyed(v)?v.toMap():v.toSet()}var version="4.3.7",Immutable={version:version,Collection:Collection,Iterable:Collection,Seq:Seq,Map:Map,OrderedMap:OrderedMap,List:List,Stack:Stack,Set:Set,OrderedSet:OrderedSet,PairSorting:PairSorting,Record:Record,Range:Range,Repeat:Repeat,is:is,fromJS:fromJS,hash:hash,isImmutable:isImmutable,isCollection:isCollection,isKeyed:isKeyed,isIndexed:isIndexed,isAssociative:isAssociative,isOrdered:isOrdered,isValueObject:isValueObject,isPlainObject:isPlainObject,isSeq:isSeq,isList:isList,isMap:isMap,isOrderedMap:isOrderedMap,isStack:isStack,isSet:isSet,isOrderedSet:isOrderedSet,isRecord:isRecord,get:get,getIn:getIn$1,has:has,hasIn:hasIn$1,merge:merge,mergeDeep:mergeDeep$1,mergeWith:mergeWith,mergeDeepWith:mergeDeepWith$1,remove:remove,removeIn:removeIn,set:set,setIn:setIn$1,update:update$1,updateIn:updateIn$1},Iterable=Collection;__webpack_exports__.default=Immutable},"../../node_modules/is-hotkey/lib/index.js":function(__unused_webpack_module,exports){"use strict";for(var IS_MAC="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),MODIFIERS={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ALIASES={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:IS_MAC?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},CODES={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},f=1;f<20;f++)CODES["f"+f]=111+f;function isHotkey(hotkey,options,event){options&&!("byKey"in options)&&(event=options,options=null),Array.isArray(hotkey)||(hotkey=[hotkey]);var array=hotkey.map((function(string){return parseHotkey(string,options)})),check=function check(e){return array.some((function(object){return compareHotkey(object,e)}))};return null==event?check:check(event)}function parseHotkey(hotkey,options){var byKey=options&&options.byKey,ret={},values=(hotkey=hotkey.replace("++","+add")).split("+"),length=values.length;for(var k in MODIFIERS)ret[MODIFIERS[k]]=!1;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=values[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var value=_step.value,optional=value.endsWith("?")&&value.length>1;optional&&(value=value.slice(0,-1));var name=toKeyName(value),modifier=MODIFIERS[name];if(value.length>1&&!modifier&&!ALIASES[value]&&!CODES[name])throw new TypeError('Unknown modifier: "'+value+'"');1!==length&&modifier||(byKey?ret.key=name:ret.which=toKeyCode(value)),modifier&&(ret[modifier]=!optional||null)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return ret}function compareHotkey(object,event){for(var key in object){var expected=object[key],actual=void 0;if(null!=expected&&((null!=(actual="key"===key&&null!=event.key?event.key.toLowerCase():"which"===key?91===expected&&93===event.which?91:event.which:event[key])||!1!==expected)&&actual!==expected))return!1}return!0}function toKeyCode(name){return name=toKeyName(name),CODES[name]||name.toUpperCase().charCodeAt(0)}function toKeyName(name){return name=name.toLowerCase(),name=ALIASES[name]||name}exports.Sn=function isKeyHotkey(hotkey,event){return isHotkey(hotkey,{byKey:!0},event)}},"../../node_modules/isobject/index.js":function(module){"use strict";module.exports=function isObject(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}},"../../node_modules/isomorphic-base64/browser.js":function(__unused_webpack_module,exports){"use strict";exports.l=self.atob.bind(self),exports.E=self.btoa.bind(self)},"../../node_modules/lodash/_baseSlice.js":function(module){module.exports=function baseSlice(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}},"../../node_modules/lodash/_baseTrim.js":function(module,__unused_webpack_exports,__webpack_require__){var trimmedEndIndex=__webpack_require__("../../node_modules/lodash/_trimmedEndIndex.js"),reTrimStart=/^\s+/;module.exports=function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},"../../node_modules/lodash/_baseUnset.js":function(module,__unused_webpack_exports,__webpack_require__){var castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),last=__webpack_require__("../../node_modules/lodash/last.js"),parent=__webpack_require__("../../node_modules/lodash/_parent.js"),toKey=__webpack_require__("../../node_modules/lodash/_toKey.js");module.exports=function baseUnset(object,path){return path=castPath(path,object),null==(object=parent(object,path))||delete object[toKey(last(path))]}},"../../node_modules/lodash/_customOmitClone.js":function(module,__unused_webpack_exports,__webpack_require__){var isPlainObject=__webpack_require__("../../node_modules/lodash/isPlainObject.js");module.exports=function customOmitClone(value){return isPlainObject(value)?void 0:value}},"../../node_modules/lodash/_parent.js":function(module,__unused_webpack_exports,__webpack_require__){var baseGet=__webpack_require__("../../node_modules/lodash/_baseGet.js"),baseSlice=__webpack_require__("../../node_modules/lodash/_baseSlice.js");module.exports=function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}},"../../node_modules/lodash/_trimmedEndIndex.js":function(module){var reWhitespace=/\s/;module.exports=function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},"../../node_modules/lodash/debounce.js":function(module,__unused_webpack_exports,__webpack_require__){var isObject=__webpack_require__("../../node_modules/lodash/isObject.js"),now=__webpack_require__("../../node_modules/lodash/now.js"),toNumber=__webpack_require__("../../node_modules/lodash/toNumber.js"),nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},"../../node_modules/lodash/last.js":function(module){module.exports=function last(array){var length=null==array?0:array.length;return length?array[length-1]:void 0}},"../../node_modules/lodash/now.js":function(module,__unused_webpack_exports,__webpack_require__){var root=__webpack_require__("../../node_modules/lodash/_root.js");module.exports=function(){return root.Date.now()}},"../../node_modules/lodash/omit.js":function(module,__unused_webpack_exports,__webpack_require__){var arrayMap=__webpack_require__("../../node_modules/lodash/_arrayMap.js"),baseClone=__webpack_require__("../../node_modules/lodash/_baseClone.js"),baseUnset=__webpack_require__("../../node_modules/lodash/_baseUnset.js"),castPath=__webpack_require__("../../node_modules/lodash/_castPath.js"),copyObject=__webpack_require__("../../node_modules/lodash/_copyObject.js"),customOmitClone=__webpack_require__("../../node_modules/lodash/_customOmitClone.js"),flatRest=__webpack_require__("../../node_modules/lodash/_flatRest.js"),getAllKeysIn=__webpack_require__("../../node_modules/lodash/_getAllKeysIn.js"),omit=flatRest((function(object,paths){var result={};if(null==object)return result;var isDeep=!1;paths=arrayMap(paths,(function(path){return path=castPath(path,object),isDeep||(isDeep=path.length>1),path})),copyObject(object,getAllKeysIn(object),result),isDeep&&(result=baseClone(result,7,customOmitClone));for(var length=paths.length;length--;)baseUnset(result,paths[length]);return result}));module.exports=omit},"../../node_modules/lodash/throttle.js":function(module,__unused_webpack_exports,__webpack_require__){var debounce=__webpack_require__("../../node_modules/lodash/debounce.js"),isObject=__webpack_require__("../../node_modules/lodash/isObject.js");module.exports=function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}},"../../node_modules/lodash/toNumber.js":function(module,__unused_webpack_exports,__webpack_require__){var baseTrim=__webpack_require__("../../node_modules/lodash/_baseTrim.js"),isObject=__webpack_require__("../../node_modules/lodash/isObject.js"),isSymbol=__webpack_require__("../../node_modules/lodash/isSymbol.js"),reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},"../../node_modules/marked-mangle/src/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function mangle(){return{mangle:!1,walkTokens(token){if("link"!==token.type)return;if(!token.href.startsWith("mailto:"))return;const email=token.href.substring(7),mangledEmail=function mangleEmail(text){let i,ch,out="";const l=text.length;for(i=0;i<l;i++)ch=text.charCodeAt(i),Math.random()>.5&&(ch="x"+ch.toString(16)),out+="&#"+ch+";";return out}(email);token.href=`mailto:${mangledEmail}`,1===token.tokens.length&&"text"===token.tokens[0].type&&token.tokens[0].text===email&&(token.text=mangledEmail,token.tokens[0].text=mangledEmail)}}}__webpack_require__.d(__webpack_exports__,{z:function(){return mangle}})},"../../node_modules/marked/lib/marked.esm.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function _getDefaults(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}__webpack_require__.d(__webpack_exports__,{xI:function(){return marked}});let _defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function changeDefaults(newDefaults){_defaults=newDefaults}const escapeTest=/[&<>"']/,escapeReplace=new RegExp(escapeTest.source,"g"),escapeTestNoEncode=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode=new RegExp(escapeTestNoEncode.source,"g"),escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=ch=>escapeReplacements[ch];function escape$1(html,encode){if(encode){if(escapeTest.test(html))return html.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(html))return html.replace(escapeReplaceNoEncode,getEscapeReplacement);return html}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function unescape(html){return html.replace(unescapeTest,((_,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(regex,opt){let source="string"==typeof regex?regex:regex.source;opt=opt||"";const obj={replace:(name,val)=>{let valSource="string"==typeof val?val:val.source;return valSource=valSource.replace(caret,"$1"),source=source.replace(name,valSource),obj},getRegex:()=>new RegExp(source,opt)};return obj}function cleanUrl(href){try{href=encodeURI(href).replace(/%25/g,"%")}catch(e){return null}return href}const noopTest={exec:()=>null};function splitCells(tableRow,count){const cells=tableRow.replace(/\|/g,((match,offset,str)=>{let escaped=!1,curr=offset;for(;--curr>=0&&"\\"===str[curr];)escaped=!escaped;return escaped?"|":" |"})).split(/ \|/);let i=0;if(cells[0].trim()||cells.shift(),cells.length>0&&!cells[cells.length-1].trim()&&cells.pop(),count)if(cells.length>count)cells.splice(count);else for(;cells.length<count;)cells.push("");for(;i<cells.length;i++)cells[i]=cells[i].trim().replace(/\\\|/g,"|");return cells}function rtrim(str,c,invert){const l=str.length;if(0===l)return"";let suffLen=0;for(;suffLen<l;){const currChar=str.charAt(l-suffLen-1);if(currChar!==c||invert){if(currChar===c||!invert)break;suffLen++}else suffLen++}return str.slice(0,l-suffLen)}function outputLink(cap,link,raw,lexer){const href=link.href,title=link.title?escape$1(link.title):null,text=cap[1].replace(/\\([\[\]])/g,"$1");if("!"!==cap[0].charAt(0)){lexer.state.inLink=!0;const token={type:"link",raw:raw,href:href,title:title,text:text,tokens:lexer.inlineTokens(text)};return lexer.state.inLink=!1,token}return{type:"image",raw:raw,href:href,title:title,text:escape$1(text)}}class _Tokenizer{options;rules;lexer;constructor(options){this.options=options||_defaults}space(src){const cap=this.rules.block.newline.exec(src);if(cap&&cap[0].length>0)return{type:"space",raw:cap[0]}}code(src){const cap=this.rules.block.code.exec(src);if(cap){const text=cap[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:cap[0],codeBlockStyle:"indented",text:this.options.pedantic?text:rtrim(text,"\n")}}}fences(src){const cap=this.rules.block.fences.exec(src);if(cap){const raw=cap[0],text=function indentCodeCompensation(raw,text){const matchIndentToCode=raw.match(/^(\s+)(?:```)/);if(null===matchIndentToCode)return text;const indentToCode=matchIndentToCode[1];return text.split("\n").map((node=>{const matchIndentInNode=node.match(/^\s+/);if(null===matchIndentInNode)return node;const[indentInNode]=matchIndentInNode;return indentInNode.length>=indentToCode.length?node.slice(indentToCode.length):node})).join("\n")}(raw,cap[3]||"");return{type:"code",raw:raw,lang:cap[2]?cap[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):cap[2],text:text}}}heading(src){const cap=this.rules.block.heading.exec(src);if(cap){let text=cap[2].trim();if(/#$/.test(text)){const trimmed=rtrim(text,"#");this.options.pedantic?text=trimmed.trim():trimmed&&!/ $/.test(trimmed)||(text=trimmed.trim())}return{type:"heading",raw:cap[0],depth:cap[1].length,text:text,tokens:this.lexer.inline(text)}}}hr(src){const cap=this.rules.block.hr.exec(src);if(cap)return{type:"hr",raw:cap[0]}}blockquote(src){const cap=this.rules.block.blockquote.exec(src);if(cap){let text=cap[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1");text=rtrim(text.replace(/^ *>[ \t]?/gm,""),"\n");const top=this.lexer.state.top;this.lexer.state.top=!0;const tokens=this.lexer.blockTokens(text);return this.lexer.state.top=top,{type:"blockquote",raw:cap[0],tokens:tokens,text:text}}}list(src){let cap=this.rules.block.list.exec(src);if(cap){let bull=cap[1].trim();const isordered=bull.length>1,list={type:"list",raw:"",ordered:isordered,start:isordered?+bull.slice(0,-1):"",loose:!1,items:[]};bull=isordered?`\\d{1,9}\\${bull.slice(-1)}`:`\\${bull}`,this.options.pedantic&&(bull=isordered?bull:"[*+-]");const itemRegex=new RegExp(`^( {0,3}${bull})((?:[\t ][^\\n]*)?(?:\\n|$))`);let raw="",itemContents="",endsWithBlankLine=!1;for(;src;){let endEarly=!1;if(!(cap=itemRegex.exec(src)))break;if(this.rules.block.hr.test(src))break;raw=cap[0],src=src.substring(raw.length);let line=cap[2].split("\n",1)[0].replace(/^\t+/,(t=>" ".repeat(3*t.length))),nextLine=src.split("\n",1)[0],indent=0;this.options.pedantic?(indent=2,itemContents=line.trimStart()):(indent=cap[2].search(/[^ ]/),indent=indent>4?1:indent,itemContents=line.slice(indent),indent+=cap[1].length);let blankLine=!1;if(!line&&/^ *$/.test(nextLine)&&(raw+=nextLine+"\n",src=src.substring(nextLine.length+1),endEarly=!0),!endEarly){const nextBulletRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}(?:\`\`\`|~~~)`),headingBeginRegex=new RegExp(`^ {0,${Math.min(3,indent-1)}}#`);for(;src;){const rawLine=src.split("\n",1)[0];if(nextLine=rawLine,this.options.pedantic&&(nextLine=nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),fencesBeginRegex.test(nextLine))break;if(headingBeginRegex.test(nextLine))break;if(nextBulletRegex.test(nextLine))break;if(hrRegex.test(src))break;if(nextLine.search(/[^ ]/)>=indent||!nextLine.trim())itemContents+="\n"+nextLine.slice(indent);else{if(blankLine)break;if(line.search(/[^ ]/)>=4)break;if(fencesBeginRegex.test(line))break;if(headingBeginRegex.test(line))break;if(hrRegex.test(line))break;itemContents+="\n"+nextLine}blankLine||nextLine.trim()||(blankLine=!0),raw+=rawLine+"\n",src=src.substring(rawLine.length+1),line=nextLine.slice(indent)}}list.loose||(endsWithBlankLine?list.loose=!0:/\n *\n *$/.test(raw)&&(endsWithBlankLine=!0));let ischecked,istask=null;this.options.gfm&&(istask=/^\[[ xX]\] /.exec(itemContents),istask&&(ischecked="[ ] "!==istask[0],itemContents=itemContents.replace(/^\[[ xX]\] +/,""))),list.items.push({type:"list_item",raw:raw,task:!!istask,checked:ischecked,loose:!1,text:itemContents,tokens:[]}),list.raw+=raw}list.items[list.items.length-1].raw=raw.trimEnd(),list.items[list.items.length-1].text=itemContents.trimEnd(),list.raw=list.raw.trimEnd();for(let i=0;i<list.items.length;i++)if(this.lexer.state.top=!1,list.items[i].tokens=this.lexer.blockTokens(list.items[i].text,[]),!list.loose){const spacers=list.items[i].tokens.filter((t=>"space"===t.type)),hasMultipleLineBreaks=spacers.length>0&&spacers.some((t=>/\n.*\n/.test(t.raw)));list.loose=hasMultipleLineBreaks}if(list.loose)for(let i=0;i<list.items.length;i++)list.items[i].loose=!0;return list}}html(src){const cap=this.rules.block.html.exec(src);if(cap){return{type:"html",block:!0,raw:cap[0],pre:"pre"===cap[1]||"script"===cap[1]||"style"===cap[1],text:cap[0]}}}def(src){const cap=this.rules.block.def.exec(src);if(cap){const tag=cap[1].toLowerCase().replace(/\s+/g," "),href=cap[2]?cap[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",title=cap[3]?cap[3].substring(1,cap[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):cap[3];return{type:"def",tag:tag,raw:cap[0],href:href,title:title}}}table(src){const cap=this.rules.block.table.exec(src);if(!cap)return;if(!/[:|]/.test(cap[2]))return;const headers=splitCells(cap[1]),aligns=cap[2].replace(/^\||\| *$/g,"").split("|"),rows=cap[3]&&cap[3].trim()?cap[3].replace(/\n[ \t]*$/,"").split("\n"):[],item={type:"table",raw:cap[0],header:[],align:[],rows:[]};if(headers.length===aligns.length){for(const align of aligns)/^ *-+: *$/.test(align)?item.align.push("right"):/^ *:-+: *$/.test(align)?item.align.push("center"):/^ *:-+ *$/.test(align)?item.align.push("left"):item.align.push(null);for(const header of headers)item.header.push({text:header,tokens:this.lexer.inline(header)});for(const row of rows)item.rows.push(splitCells(row,item.header.length).map((cell=>({text:cell,tokens:this.lexer.inline(cell)}))));return item}}lheading(src){const cap=this.rules.block.lheading.exec(src);if(cap)return{type:"heading",raw:cap[0],depth:"="===cap[2].charAt(0)?1:2,text:cap[1],tokens:this.lexer.inline(cap[1])}}paragraph(src){const cap=this.rules.block.paragraph.exec(src);if(cap){const text="\n"===cap[1].charAt(cap[1].length-1)?cap[1].slice(0,-1):cap[1];return{type:"paragraph",raw:cap[0],text:text,tokens:this.lexer.inline(text)}}}text(src){const cap=this.rules.block.text.exec(src);if(cap)return{type:"text",raw:cap[0],text:cap[0],tokens:this.lexer.inline(cap[0])}}escape(src){const cap=this.rules.inline.escape.exec(src);if(cap)return{type:"escape",raw:cap[0],text:escape$1(cap[1])}}tag(src){const cap=this.rules.inline.tag.exec(src);if(cap)return!this.lexer.state.inLink&&/^<a /i.test(cap[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(cap[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:cap[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:cap[0]}}link(src){const cap=this.rules.inline.link.exec(src);if(cap){const trimmedUrl=cap[2].trim();if(!this.options.pedantic&&/^</.test(trimmedUrl)){if(!/>$/.test(trimmedUrl))return;const rtrimSlash=rtrim(trimmedUrl.slice(0,-1),"\\");if((trimmedUrl.length-rtrimSlash.length)%2==0)return}else{const lastParenIndex=function findClosingBracket(str,b){if(-1===str.indexOf(b[1]))return-1;let level=0;for(let i=0;i<str.length;i++)if("\\"===str[i])i++;else if(str[i]===b[0])level++;else if(str[i]===b[1]&&(level--,level<0))return i;return-1}(cap[2],"()");if(lastParenIndex>-1){const linkLen=(0===cap[0].indexOf("!")?5:4)+cap[1].length+lastParenIndex;cap[2]=cap[2].substring(0,lastParenIndex),cap[0]=cap[0].substring(0,linkLen).trim(),cap[3]=""}}let href=cap[2],title="";if(this.options.pedantic){const link=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);link&&(href=link[1],title=link[3])}else title=cap[3]?cap[3].slice(1,-1):"";return href=href.trim(),/^</.test(href)&&(href=this.options.pedantic&&!/>$/.test(trimmedUrl)?href.slice(1):href.slice(1,-1)),outputLink(cap,{href:href?href.replace(this.rules.inline.anyPunctuation,"$1"):href,title:title?title.replace(this.rules.inline.anyPunctuation,"$1"):title},cap[0],this.lexer)}}reflink(src,links){let cap;if((cap=this.rules.inline.reflink.exec(src))||(cap=this.rules.inline.nolink.exec(src))){const link=links[(cap[2]||cap[1]).replace(/\s+/g," ").toLowerCase()];if(!link){const text=cap[0].charAt(0);return{type:"text",raw:text,text:text}}return outputLink(cap,link,cap[0],this.lexer)}}emStrong(src,maskedSrc,prevChar=""){let match=this.rules.inline.emStrongLDelim.exec(src);if(!match)return;if(match[3]&&prevChar.match(/[\p{L}\p{N}]/u))return;if(!(match[1]||match[2]||"")||!prevChar||this.rules.inline.punctuation.exec(prevChar)){const lLength=[...match[0]].length-1;let rDelim,rLength,delimTotal=lLength,midDelimTotal=0;const endReg="*"===match[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(endReg.lastIndex=0,maskedSrc=maskedSrc.slice(-1*src.length+lLength);null!=(match=endReg.exec(maskedSrc));){if(rDelim=match[1]||match[2]||match[3]||match[4]||match[5]||match[6],!rDelim)continue;if(rLength=[...rDelim].length,match[3]||match[4]){delimTotal+=rLength;continue}if((match[5]||match[6])&&lLength%3&&!((lLength+rLength)%3)){midDelimTotal+=rLength;continue}if(delimTotal-=rLength,delimTotal>0)continue;rLength=Math.min(rLength,rLength+delimTotal+midDelimTotal);const lastCharLength=[...match[0]][0].length,raw=src.slice(0,lLength+match.index+lastCharLength+rLength);if(Math.min(lLength,rLength)%2){const text=raw.slice(1,-1);return{type:"em",raw:raw,text:text,tokens:this.lexer.inlineTokens(text)}}const text=raw.slice(2,-2);return{type:"strong",raw:raw,text:text,tokens:this.lexer.inlineTokens(text)}}}}codespan(src){const cap=this.rules.inline.code.exec(src);if(cap){let text=cap[2].replace(/\n/g," ");const hasNonSpaceChars=/[^ ]/.test(text),hasSpaceCharsOnBothEnds=/^ /.test(text)&&/ $/.test(text);return hasNonSpaceChars&&hasSpaceCharsOnBothEnds&&(text=text.substring(1,text.length-1)),text=escape$1(text,!0),{type:"codespan",raw:cap[0],text:text}}}br(src){const cap=this.rules.inline.br.exec(src);if(cap)return{type:"br",raw:cap[0]}}del(src){const cap=this.rules.inline.del.exec(src);if(cap)return{type:"del",raw:cap[0],text:cap[2],tokens:this.lexer.inlineTokens(cap[2])}}autolink(src){const cap=this.rules.inline.autolink.exec(src);if(cap){let text,href;return"@"===cap[2]?(text=escape$1(cap[1]),href="mailto:"+text):(text=escape$1(cap[1]),href=text),{type:"link",raw:cap[0],text:text,href:href,tokens:[{type:"text",raw:text,text:text}]}}}url(src){let cap;if(cap=this.rules.inline.url.exec(src)){let text,href;if("@"===cap[2])text=escape$1(cap[0]),href="mailto:"+text;else{let prevCapZero;do{prevCapZero=cap[0],cap[0]=this.rules.inline._backpedal.exec(cap[0])?.[0]??""}while(prevCapZero!==cap[0]);text=escape$1(cap[0]),href="www."===cap[1]?"http://"+cap[0]:cap[0]}return{type:"link",raw:cap[0],text:text,href:href,tokens:[{type:"text",raw:text,text:text}]}}}inlineText(src){const cap=this.rules.inline.text.exec(src);if(cap){let text;return text=this.lexer.state.inRawBlock?cap[0]:escape$1(cap[0]),{type:"text",raw:cap[0],text:text}}}}const hr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,bullet=/(?:[*+-]|\d{1,9}[.)])/,lheading=edit(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,bullet).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_paragraph=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_blockLabel=/(?!\s*\])(?:\\.|[^\[\]\\])+/,def=edit(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",_blockLabel).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),list=edit(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bullet).getRegex(),_tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_comment=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,html=edit("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",_comment).replace("tag",_tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),paragraph=edit(_paragraph).replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex(),blockNormal={blockquote:edit(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",paragraph).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:def,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:hr,html:html,lheading:lheading,list:list,newline:/^(?: *(?:\n|$))+/,paragraph:paragraph,table:noopTest,text:/^[^\n]+/},gfmTable=edit("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex(),blockGfm={...blockNormal,table:gfmTable,paragraph:edit(_paragraph).replace("hr",hr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gfmTable).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_tag).getRegex()},blockPedantic={...blockNormal,html:edit("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",_comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:edit(_paragraph).replace("hr",hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",lheading).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},escape=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,br=/^( {2,}|\\)\n(?!\s*$)/,punctuation=edit(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,"\\p{P}\\p{S}").getRegex(),emStrongLDelim=edit(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,"\\p{P}\\p{S}").getRegex(),emStrongRDelimAst=edit("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,"\\p{P}\\p{S}").getRegex(),emStrongRDelimUnd=edit("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,"\\p{P}\\p{S}").getRegex(),anyPunctuation=edit(/\\([punct])/,"gu").replace(/punct/g,"\\p{P}\\p{S}").getRegex(),autolink=edit(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_inlineComment=edit(_comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),tag=edit("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_inlineComment).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_inlineLabel=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,link=edit(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",_inlineLabel).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),reflink=edit(/^!?\[(label)\]\[(ref)\]/).replace("label",_inlineLabel).replace("ref",_blockLabel).getRegex(),nolink=edit(/^!?\[(ref)\](?:\[\])?/).replace("ref",_blockLabel).getRegex(),inlineNormal={_backpedal:noopTest,anyPunctuation:anyPunctuation,autolink:autolink,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:br,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:noopTest,emStrongLDelim:emStrongLDelim,emStrongRDelimAst:emStrongRDelimAst,emStrongRDelimUnd:emStrongRDelimUnd,escape:escape,link:link,nolink:nolink,punctuation:punctuation,reflink:reflink,reflinkSearch:edit("reflink|nolink(?!\\()","g").replace("reflink",reflink).replace("nolink",nolink).getRegex(),tag:tag,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:noopTest},inlinePedantic={...inlineNormal,link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",_inlineLabel).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_inlineLabel).getRegex()},inlineGfm={...inlineNormal,escape:edit(escape).replace("])","~|])").getRegex(),url:edit(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},inlineBreaks={...inlineGfm,br:edit(br).replace("{2,}","*").getRegex(),text:edit(inlineGfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},block={normal:blockNormal,gfm:blockGfm,pedantic:blockPedantic},inline={normal:inlineNormal,gfm:inlineGfm,breaks:inlineBreaks,pedantic:inlinePedantic};class _Lexer{tokens;options;state;tokenizer;inlineQueue;constructor(options){this.tokens=[],this.tokens.links=Object.create(null),this.options=options||_defaults,this.options.tokenizer=this.options.tokenizer||new _Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const rules={block:block.normal,inline:inline.normal};this.options.pedantic?(rules.block=block.pedantic,rules.inline=inline.pedantic):this.options.gfm&&(rules.block=block.gfm,this.options.breaks?rules.inline=inline.breaks:rules.inline=inline.gfm),this.tokenizer.rules=rules}static get rules(){return{block:block,inline:inline}}static lex(src,options){return new _Lexer(options).lex(src)}static lexInline(src,options){return new _Lexer(options).inlineTokens(src)}lex(src){src=src.replace(/\r\n|\r/g,"\n"),this.blockTokens(src,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const next=this.inlineQueue[i];this.inlineTokens(next.src,next.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(src,tokens=[]){let token,lastToken,cutSrc,lastParagraphClipped;for(src=this.options.pedantic?src.replace(/\t/g,"    ").replace(/^ +$/gm,""):src.replace(/^( *)(\t+)/gm,((_,leading,tabs)=>leading+"    ".repeat(tabs.length)));src;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((extTokenizer=>!!(token=extTokenizer.call({lexer:this},src,tokens))&&(src=src.substring(token.raw.length),tokens.push(token),!0)))))if(token=this.tokenizer.space(src))src=src.substring(token.raw.length),1===token.raw.length&&tokens.length>0?tokens[tokens.length-1].raw+="\n":tokens.push(token);else if(token=this.tokenizer.code(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],!lastToken||"paragraph"!==lastToken.type&&"text"!==lastToken.type?tokens.push(token):(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text);else if(token=this.tokenizer.fences(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.heading(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.hr(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.blockquote(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.list(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.html(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.def(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],!lastToken||"paragraph"!==lastToken.type&&"text"!==lastToken.type?this.tokens.links[token.tag]||(this.tokens.links[token.tag]={href:token.href,title:token.title}):(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.raw,this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text);else if(token=this.tokenizer.table(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.lheading(src))src=src.substring(token.raw.length),tokens.push(token);else{if(cutSrc=src,this.options.extensions&&this.options.extensions.startBlock){let startIndex=1/0;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startBlock.forEach((getStartIndex=>{tempStart=getStartIndex.call({lexer:this},tempSrc),"number"==typeof tempStart&&tempStart>=0&&(startIndex=Math.min(startIndex,tempStart))})),startIndex<1/0&&startIndex>=0&&(cutSrc=src.substring(0,startIndex+1))}if(this.state.top&&(token=this.tokenizer.paragraph(cutSrc)))lastToken=tokens[tokens.length-1],lastParagraphClipped&&"paragraph"===lastToken.type?(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text):tokens.push(token),lastParagraphClipped=cutSrc.length!==src.length,src=src.substring(token.raw.length);else if(token=this.tokenizer.text(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===lastToken.type?(lastToken.raw+="\n"+token.raw,lastToken.text+="\n"+token.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=lastToken.text):tokens.push(token);else if(src){const errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}throw new Error(errMsg)}}return this.state.top=!0,tokens}inline(src,tokens=[]){return this.inlineQueue.push({src:src,tokens:tokens}),tokens}inlineTokens(src,tokens=[]){let token,lastToken,cutSrc,match,keepPrevChar,prevChar,maskedSrc=src;if(this.tokens.links){const links=Object.keys(this.tokens.links);if(links.length>0)for(;null!=(match=this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc));)links.includes(match[0].slice(match[0].lastIndexOf("[")+1,-1))&&(maskedSrc=maskedSrc.slice(0,match.index)+"["+"a".repeat(match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(match=this.tokenizer.rules.inline.blockSkip.exec(maskedSrc));)maskedSrc=maskedSrc.slice(0,match.index)+"["+"a".repeat(match[0].length-2)+"]"+maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(match=this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc));)maskedSrc=maskedSrc.slice(0,match.index)+"++"+maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;src;)if(keepPrevChar||(prevChar=""),keepPrevChar=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((extTokenizer=>!!(token=extTokenizer.call({lexer:this},src,tokens))&&(src=src.substring(token.raw.length),tokens.push(token),!0)))))if(token=this.tokenizer.escape(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.tag(src))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===token.type&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);else if(token=this.tokenizer.link(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.reflink(src,this.tokens.links))src=src.substring(token.raw.length),lastToken=tokens[tokens.length-1],lastToken&&"text"===token.type&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);else if(token=this.tokenizer.emStrong(src,maskedSrc,prevChar))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.codespan(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.br(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.del(src))src=src.substring(token.raw.length),tokens.push(token);else if(token=this.tokenizer.autolink(src))src=src.substring(token.raw.length),tokens.push(token);else if(this.state.inLink||!(token=this.tokenizer.url(src))){if(cutSrc=src,this.options.extensions&&this.options.extensions.startInline){let startIndex=1/0;const tempSrc=src.slice(1);let tempStart;this.options.extensions.startInline.forEach((getStartIndex=>{tempStart=getStartIndex.call({lexer:this},tempSrc),"number"==typeof tempStart&&tempStart>=0&&(startIndex=Math.min(startIndex,tempStart))})),startIndex<1/0&&startIndex>=0&&(cutSrc=src.substring(0,startIndex+1))}if(token=this.tokenizer.inlineText(cutSrc))src=src.substring(token.raw.length),"_"!==token.raw.slice(-1)&&(prevChar=token.raw.slice(-1)),keepPrevChar=!0,lastToken=tokens[tokens.length-1],lastToken&&"text"===lastToken.type?(lastToken.raw+=token.raw,lastToken.text+=token.text):tokens.push(token);else if(src){const errMsg="Infinite loop on byte: "+src.charCodeAt(0);if(this.options.silent){console.error(errMsg);break}throw new Error(errMsg)}}else src=src.substring(token.raw.length),tokens.push(token);return tokens}}class _Renderer{options;constructor(options){this.options=options||_defaults}code(code,infostring,escaped){const lang=(infostring||"").match(/^\S*/)?.[0];return code=code.replace(/\n$/,"")+"\n",lang?'<pre><code class="language-'+escape$1(lang)+'">'+(escaped?code:escape$1(code,!0))+"</code></pre>\n":"<pre><code>"+(escaped?code:escape$1(code,!0))+"</code></pre>\n"}blockquote(quote){return`<blockquote>\n${quote}</blockquote>\n`}html(html,block){return html}heading(text,level,raw){return`<h${level}>${text}</h${level}>\n`}hr(){return"<hr>\n"}list(body,ordered,start){const type=ordered?"ol":"ul";return"<"+type+(ordered&&1!==start?' start="'+start+'"':"")+">\n"+body+"</"+type+">\n"}listitem(text,task,checked){return`<li>${text}</li>\n`}checkbox(checked){return"<input "+(checked?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(text){return`<p>${text}</p>\n`}table(header,body){return body&&(body=`<tbody>${body}</tbody>`),"<table>\n<thead>\n"+header+"</thead>\n"+body+"</table>\n"}tablerow(content){return`<tr>\n${content}</tr>\n`}tablecell(content,flags){const type=flags.header?"th":"td";return(flags.align?`<${type} align="${flags.align}">`:`<${type}>`)+content+`</${type}>\n`}strong(text){return`<strong>${text}</strong>`}em(text){return`<em>${text}</em>`}codespan(text){return`<code>${text}</code>`}br(){return"<br>"}del(text){return`<del>${text}</del>`}link(href,title,text){const cleanHref=cleanUrl(href);if(null===cleanHref)return text;let out='<a href="'+(href=cleanHref)+'"';return title&&(out+=' title="'+title+'"'),out+=">"+text+"</a>",out}image(href,title,text){const cleanHref=cleanUrl(href);if(null===cleanHref)return text;let out=`<img src="${href=cleanHref}" alt="${text}"`;return title&&(out+=` title="${title}"`),out+=">",out}text(text){return text}}class _TextRenderer{strong(text){return text}em(text){return text}codespan(text){return text}del(text){return text}html(text){return text}text(text){return text}link(href,title,text){return""+text}image(href,title,text){return""+text}br(){return""}}class _Parser{options;renderer;textRenderer;constructor(options){this.options=options||_defaults,this.options.renderer=this.options.renderer||new _Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new _TextRenderer}static parse(tokens,options){return new _Parser(options).parse(tokens)}static parseInline(tokens,options){return new _Parser(options).parseInline(tokens)}parse(tokens,top=!0){let out="";for(let i=0;i<tokens.length;i++){const token=tokens[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]){const genericToken=token,ret=this.options.extensions.renderers[genericToken.type].call({parser:this},genericToken);if(!1!==ret||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(genericToken.type)){out+=ret||"";continue}}switch(token.type){case"space":continue;case"hr":out+=this.renderer.hr();continue;case"heading":{const headingToken=token;out+=this.renderer.heading(this.parseInline(headingToken.tokens),headingToken.depth,unescape(this.parseInline(headingToken.tokens,this.textRenderer)));continue}case"code":{const codeToken=token;out+=this.renderer.code(codeToken.text,codeToken.lang,!!codeToken.escaped);continue}case"table":{const tableToken=token;let header="",cell="";for(let j=0;j<tableToken.header.length;j++)cell+=this.renderer.tablecell(this.parseInline(tableToken.header[j].tokens),{header:!0,align:tableToken.align[j]});header+=this.renderer.tablerow(cell);let body="";for(let j=0;j<tableToken.rows.length;j++){const row=tableToken.rows[j];cell="";for(let k=0;k<row.length;k++)cell+=this.renderer.tablecell(this.parseInline(row[k].tokens),{header:!1,align:tableToken.align[k]});body+=this.renderer.tablerow(cell)}out+=this.renderer.table(header,body);continue}case"blockquote":{const blockquoteToken=token,body=this.parse(blockquoteToken.tokens);out+=this.renderer.blockquote(body);continue}case"list":{const listToken=token,ordered=listToken.ordered,start=listToken.start,loose=listToken.loose;let body="";for(let j=0;j<listToken.items.length;j++){const item=listToken.items[j],checked=item.checked,task=item.task;let itemBody="";if(item.task){const checkbox=this.renderer.checkbox(!!checked);loose?item.tokens.length>0&&"paragraph"===item.tokens[0].type?(item.tokens[0].text=checkbox+" "+item.tokens[0].text,item.tokens[0].tokens&&item.tokens[0].tokens.length>0&&"text"===item.tokens[0].tokens[0].type&&(item.tokens[0].tokens[0].text=checkbox+" "+item.tokens[0].tokens[0].text)):item.tokens.unshift({type:"text",text:checkbox+" "}):itemBody+=checkbox+" "}itemBody+=this.parse(item.tokens,loose),body+=this.renderer.listitem(itemBody,task,!!checked)}out+=this.renderer.list(body,ordered,start);continue}case"html":{const htmlToken=token;out+=this.renderer.html(htmlToken.text,htmlToken.block);continue}case"paragraph":{const paragraphToken=token;out+=this.renderer.paragraph(this.parseInline(paragraphToken.tokens));continue}case"text":{let textToken=token,body=textToken.tokens?this.parseInline(textToken.tokens):textToken.text;for(;i+1<tokens.length&&"text"===tokens[i+1].type;)textToken=tokens[++i],body+="\n"+(textToken.tokens?this.parseInline(textToken.tokens):textToken.text);out+=top?this.renderer.paragraph(body):body;continue}default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent)return console.error(errMsg),"";throw new Error(errMsg)}}}return out}parseInline(tokens,renderer){renderer=renderer||this.renderer;let out="";for(let i=0;i<tokens.length;i++){const token=tokens[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[token.type]){const ret=this.options.extensions.renderers[token.type].call({parser:this},token);if(!1!==ret||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(token.type)){out+=ret||"";continue}}switch(token.type){case"escape":{const escapeToken=token;out+=renderer.text(escapeToken.text);break}case"html":{const tagToken=token;out+=renderer.html(tagToken.text);break}case"link":{const linkToken=token;out+=renderer.link(linkToken.href,linkToken.title,this.parseInline(linkToken.tokens,renderer));break}case"image":{const imageToken=token;out+=renderer.image(imageToken.href,imageToken.title,imageToken.text);break}case"strong":{const strongToken=token;out+=renderer.strong(this.parseInline(strongToken.tokens,renderer));break}case"em":{const emToken=token;out+=renderer.em(this.parseInline(emToken.tokens,renderer));break}case"codespan":{const codespanToken=token;out+=renderer.codespan(codespanToken.text);break}case"br":out+=renderer.br();break;case"del":{const delToken=token;out+=renderer.del(this.parseInline(delToken.tokens,renderer));break}case"text":{const textToken=token;out+=renderer.text(textToken.text);break}default:{const errMsg='Token with "'+token.type+'" type was not found.';if(this.options.silent)return console.error(errMsg),"";throw new Error(errMsg)}}}return out}}class _Hooks{options;constructor(options){this.options=options||_defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(markdown){return markdown}postprocess(html){return html}processAllTokens(tokens){return tokens}}const markedInstance=new class Marked{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#parseMarkdown(_Lexer.lex,_Parser.parse);parseInline=this.#parseMarkdown(_Lexer.lexInline,_Parser.parseInline);Parser=_Parser;Renderer=_Renderer;TextRenderer=_TextRenderer;Lexer=_Lexer;Tokenizer=_Tokenizer;Hooks=_Hooks;constructor(...args){this.use(...args)}walkTokens(tokens,callback){let values=[];for(const token of tokens)switch(values=values.concat(callback.call(this,token)),token.type){case"table":{const tableToken=token;for(const cell of tableToken.header)values=values.concat(this.walkTokens(cell.tokens,callback));for(const row of tableToken.rows)for(const cell of row)values=values.concat(this.walkTokens(cell.tokens,callback));break}case"list":{const listToken=token;values=values.concat(this.walkTokens(listToken.items,callback));break}default:{const genericToken=token;this.defaults.extensions?.childTokens?.[genericToken.type]?this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens=>{const tokens=genericToken[childTokens].flat(1/0);values=values.concat(this.walkTokens(tokens,callback))})):genericToken.tokens&&(values=values.concat(this.walkTokens(genericToken.tokens,callback)))}}return values}use(...args){const extensions=this.defaults.extensions||{renderers:{},childTokens:{}};return args.forEach((pack=>{const opts={...pack};if(opts.async=this.defaults.async||opts.async||!1,pack.extensions&&(pack.extensions.forEach((ext=>{if(!ext.name)throw new Error("extension name required");if("renderer"in ext){const prevRenderer=extensions.renderers[ext.name];extensions.renderers[ext.name]=prevRenderer?function(...args){let ret=ext.renderer.apply(this,args);return!1===ret&&(ret=prevRenderer.apply(this,args)),ret}:ext.renderer}if("tokenizer"in ext){if(!ext.level||"block"!==ext.level&&"inline"!==ext.level)throw new Error("extension level must be 'block' or 'inline'");const extLevel=extensions[ext.level];extLevel?extLevel.unshift(ext.tokenizer):extensions[ext.level]=[ext.tokenizer],ext.start&&("block"===ext.level?extensions.startBlock?extensions.startBlock.push(ext.start):extensions.startBlock=[ext.start]:"inline"===ext.level&&(extensions.startInline?extensions.startInline.push(ext.start):extensions.startInline=[ext.start]))}"childTokens"in ext&&ext.childTokens&&(extensions.childTokens[ext.name]=ext.childTokens)})),opts.extensions=extensions),pack.renderer){const renderer=this.defaults.renderer||new _Renderer(this.defaults);for(const prop in pack.renderer){if(!(prop in renderer))throw new Error(`renderer '${prop}' does not exist`);if("options"===prop)continue;const rendererProp=prop,rendererFunc=pack.renderer[rendererProp],prevRenderer=renderer[rendererProp];renderer[rendererProp]=(...args)=>{let ret=rendererFunc.apply(renderer,args);return!1===ret&&(ret=prevRenderer.apply(renderer,args)),ret||""}}opts.renderer=renderer}if(pack.tokenizer){const tokenizer=this.defaults.tokenizer||new _Tokenizer(this.defaults);for(const prop in pack.tokenizer){if(!(prop in tokenizer))throw new Error(`tokenizer '${prop}' does not exist`);if(["options","rules","lexer"].includes(prop))continue;const tokenizerProp=prop,tokenizerFunc=pack.tokenizer[tokenizerProp],prevTokenizer=tokenizer[tokenizerProp];tokenizer[tokenizerProp]=(...args)=>{let ret=tokenizerFunc.apply(tokenizer,args);return!1===ret&&(ret=prevTokenizer.apply(tokenizer,args)),ret}}opts.tokenizer=tokenizer}if(pack.hooks){const hooks=this.defaults.hooks||new _Hooks;for(const prop in pack.hooks){if(!(prop in hooks))throw new Error(`hook '${prop}' does not exist`);if("options"===prop)continue;const hooksProp=prop,hooksFunc=pack.hooks[hooksProp],prevHook=hooks[hooksProp];_Hooks.passThroughHooks.has(prop)?hooks[hooksProp]=arg=>{if(this.defaults.async)return Promise.resolve(hooksFunc.call(hooks,arg)).then((ret=>prevHook.call(hooks,ret)));const ret=hooksFunc.call(hooks,arg);return prevHook.call(hooks,ret)}:hooks[hooksProp]=(...args)=>{let ret=hooksFunc.apply(hooks,args);return!1===ret&&(ret=prevHook.apply(hooks,args)),ret}}opts.hooks=hooks}if(pack.walkTokens){const walkTokens=this.defaults.walkTokens,packWalktokens=pack.walkTokens;opts.walkTokens=function(token){let values=[];return values.push(packWalktokens.call(this,token)),walkTokens&&(values=values.concat(walkTokens.call(this,token))),values}}this.defaults={...this.defaults,...opts}})),this}setOptions(opt){return this.defaults={...this.defaults,...opt},this}lexer(src,options){return _Lexer.lex(src,options??this.defaults)}parser(tokens,options){return _Parser.parse(tokens,options??this.defaults)}#parseMarkdown(lexer,parser){return(src,options)=>{const origOpt={...options},opt={...this.defaults,...origOpt};!0===this.defaults.async&&!1===origOpt.async&&(opt.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),opt.async=!0);const throwError=this.#onError(!!opt.silent,!!opt.async);if(null==src)return throwError(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof src)return throwError(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(src)+", string expected"));if(opt.hooks&&(opt.hooks.options=opt),opt.async)return Promise.resolve(opt.hooks?opt.hooks.preprocess(src):src).then((src=>lexer(src,opt))).then((tokens=>opt.hooks?opt.hooks.processAllTokens(tokens):tokens)).then((tokens=>opt.walkTokens?Promise.all(this.walkTokens(tokens,opt.walkTokens)).then((()=>tokens)):tokens)).then((tokens=>parser(tokens,opt))).then((html=>opt.hooks?opt.hooks.postprocess(html):html)).catch(throwError);try{opt.hooks&&(src=opt.hooks.preprocess(src));let tokens=lexer(src,opt);opt.hooks&&(tokens=opt.hooks.processAllTokens(tokens)),opt.walkTokens&&this.walkTokens(tokens,opt.walkTokens);let html=parser(tokens,opt);return opt.hooks&&(html=opt.hooks.postprocess(html)),html}catch(e){return throwError(e)}}}#onError(silent,async){return e=>{if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",silent){const msg="<p>An error occurred:</p><pre>"+escape$1(e.message+"",!0)+"</pre>";return async?Promise.resolve(msg):msg}if(async)return Promise.reject(e);throw e}}};function marked(src,opt){return markedInstance.parse(src,opt)}marked.options=marked.setOptions=function(options){return markedInstance.setOptions(options),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked},marked.getDefaults=_getDefaults,marked.defaults=_defaults,marked.use=function(...args){return markedInstance.use(...args),marked.defaults=markedInstance.defaults,changeDefaults(marked.defaults),marked},marked.walkTokens=function(tokens,callback){return markedInstance.walkTokens(tokens,callback)},marked.parseInline=markedInstance.parseInline,marked.Parser=_Parser,marked.parser=_Parser.parse,marked.Renderer=_Renderer,marked.TextRenderer=_TextRenderer,marked.Lexer=_Lexer,marked.lexer=_Lexer.lex,marked.Tokenizer=_Tokenizer,marked.Hooks=_Hooks,marked.parse=marked;marked.options,marked.setOptions,marked.use,marked.walkTokens,marked.parseInline,_Parser.parse,_Lexer.lex},"../../node_modules/ms/index.js":function(module){var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d;function plural(ms,msAbs,n,name){var isPlural=msAbs>=1.5*n;return Math.round(ms/n)+" "+name+(isPlural?"s":"")}module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return function parse(str){if((str=String(str)).length>100)return;var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(val);if("number"===type&&isFinite(val))return options.long?function fmtLong(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return plural(ms,msAbs,d,"day");if(msAbs>=h)return plural(ms,msAbs,h,"hour");if(msAbs>=m)return plural(ms,msAbs,m,"minute");if(msAbs>=s)return plural(ms,msAbs,s,"second");return ms+" ms"}(val):function fmtShort(ms){var msAbs=Math.abs(ms);if(msAbs>=d)return Math.round(ms/d)+"d";if(msAbs>=h)return Math.round(ms/h)+"h";if(msAbs>=m)return Math.round(ms/m)+"m";if(msAbs>=s)return Math.round(ms/s)+"s";return ms+"ms"}(val);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},"../../node_modules/react-highlight-words/dist/main.js":function(module,__unused_webpack_exports,__webpack_require__){module.exports=function(modules){var installedModules={};function __nested_webpack_require_187__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__nested_webpack_require_187__),module.loaded=!0,module.exports}return __nested_webpack_require_187__.m=modules,__nested_webpack_require_187__.c=installedModules,__nested_webpack_require_187__.p="",__nested_webpack_require_187__(0)}([function(module,exports,__nested_webpack_require_1468__){module.exports=__nested_webpack_require_1468__(1)},function(module,exports,__nested_webpack_require_1587__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Highlighter2=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__nested_webpack_require_1587__(2));exports.default=_Highlighter2.default,module.exports=exports.default},function(module,exports,__nested_webpack_require_2043__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=Highlighter;var _highlightWordsCore=__nested_webpack_require_2043__(3),_propTypes2=_interopRequireDefault(__nested_webpack_require_2043__(4)),_react=__nested_webpack_require_2043__(14),_memoizeOne2=_interopRequireDefault(__nested_webpack_require_2043__(15));function Highlighter(_ref){var _ref$activeClassName=_ref.activeClassName,activeClassName=void 0===_ref$activeClassName?"":_ref$activeClassName,_ref$activeIndex=_ref.activeIndex,activeIndex=void 0===_ref$activeIndex?-1:_ref$activeIndex,activeStyle=_ref.activeStyle,autoEscape=_ref.autoEscape,_ref$caseSensitive=_ref.caseSensitive,caseSensitive=void 0!==_ref$caseSensitive&&_ref$caseSensitive,className=_ref.className,findChunks=_ref.findChunks,_ref$highlightClassName=_ref.highlightClassName,highlightClassName=void 0===_ref$highlightClassName?"":_ref$highlightClassName,_ref$highlightStyle=_ref.highlightStyle,highlightStyle=void 0===_ref$highlightStyle?{}:_ref$highlightStyle,_ref$highlightTag=_ref.highlightTag,highlightTag=void 0===_ref$highlightTag?"mark":_ref$highlightTag,sanitize=_ref.sanitize,searchWords=_ref.searchWords,textToHighlight=_ref.textToHighlight,_ref$unhighlightTag=_ref.unhighlightTag,unhighlightTag=void 0===_ref$unhighlightTag?"span":_ref$unhighlightTag,_ref$unhighlightClassName=_ref.unhighlightClassName,unhighlightClassName=void 0===_ref$unhighlightClassName?"":_ref$unhighlightClassName,unhighlightStyle=_ref.unhighlightStyle,rest=function _objectWithoutProperties(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target}(_ref,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),chunks=(0,_highlightWordsCore.findAll)({autoEscape:autoEscape,caseSensitive:caseSensitive,findChunks:findChunks,sanitize:sanitize,searchWords:searchWords,textToHighlight:textToHighlight}),HighlightTag=highlightTag,highlightIndex=-1,highlightClassNames="",highlightStyles=void 0,memoizedLowercaseProps=(0,_memoizeOne2.default)((function lowercaseProps(object){var mapped={};for(var key in object)mapped[key.toLowerCase()]=object[key];return mapped}));return(0,_react.createElement)("span",_extends({className:className},rest,{children:chunks.map((function(chunk,index){var text=textToHighlight.substr(chunk.start,chunk.end-chunk.start);if(chunk.highlight){highlightIndex++;var highlightClass=void 0;highlightClass="object"==typeof highlightClassName?caseSensitive?highlightClassName[text]:(highlightClassName=memoizedLowercaseProps(highlightClassName))[text.toLowerCase()]:highlightClassName;var isActive=highlightIndex===+activeIndex;highlightClassNames=highlightClass+" "+(isActive?activeClassName:""),highlightStyles=!0===isActive&&null!=activeStyle?Object.assign({},highlightStyle,activeStyle):highlightStyle;var props={children:text,className:highlightClassNames,key:index,style:highlightStyles};return"string"!=typeof HighlightTag&&(props.highlightIndex=highlightIndex),(0,_react.createElement)(HighlightTag,props)}return(0,_react.createElement)(unhighlightTag,{children:text,className:unhighlightClassName,key:index,style:unhighlightStyle})}))}))}Highlighter.propTypes={activeClassName:_propTypes2.default.string,activeIndex:_propTypes2.default.number,activeStyle:_propTypes2.default.object,autoEscape:_propTypes2.default.bool,className:_propTypes2.default.string,findChunks:_propTypes2.default.func,highlightClassName:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),highlightStyle:_propTypes2.default.object,highlightTag:_propTypes2.default.oneOfType([_propTypes2.default.node,_propTypes2.default.func,_propTypes2.default.string]),sanitize:_propTypes2.default.func,searchWords:_propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.instanceOf(RegExp)])).isRequired,textToHighlight:_propTypes2.default.string.isRequired,unhighlightTag:_propTypes2.default.oneOfType([_propTypes2.default.node,_propTypes2.default.func,_propTypes2.default.string]),unhighlightClassName:_propTypes2.default.string,unhighlightStyle:_propTypes2.default.object},module.exports=exports.default},function(module,exports){module.exports=function(modules){var installedModules={};function __nested_webpack_require_8969__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__nested_webpack_require_8969__),module.loaded=!0,module.exports}return __nested_webpack_require_8969__.m=modules,__nested_webpack_require_8969__.c=installedModules,__nested_webpack_require_8969__.p="",__nested_webpack_require_8969__(0)}([function(module,exports,__nested_webpack_require_10289__){module.exports=__nested_webpack_require_10289__(1)},function(module,exports,__nested_webpack_require_10415__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _utils=__nested_webpack_require_10415__(2);Object.defineProperty(exports,"combineChunks",{enumerable:!0,get:function get(){return _utils.combineChunks}}),Object.defineProperty(exports,"fillInChunks",{enumerable:!0,get:function get(){return _utils.fillInChunks}}),Object.defineProperty(exports,"findAll",{enumerable:!0,get:function get(){return _utils.findAll}}),Object.defineProperty(exports,"findChunks",{enumerable:!0,get:function get(){return _utils.findChunks}})},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.findAll=function findAll(_ref){var autoEscape=_ref.autoEscape,_ref$caseSensitive=_ref.caseSensitive,caseSensitive=void 0!==_ref$caseSensitive&&_ref$caseSensitive,_ref$findChunks=_ref.findChunks,findChunks=void 0===_ref$findChunks?defaultFindChunks:_ref$findChunks,sanitize=_ref.sanitize,searchWords=_ref.searchWords,textToHighlight=_ref.textToHighlight;return fillInChunks({chunksToHighlight:combineChunks({chunks:findChunks({autoEscape:autoEscape,caseSensitive:caseSensitive,sanitize:sanitize,searchWords:searchWords,textToHighlight:textToHighlight})}),totalLength:textToHighlight?textToHighlight.length:0})};var combineChunks=exports.combineChunks=function combineChunks(_ref2){var chunks=_ref2.chunks;return chunks=chunks.sort((function(first,second){return first.start-second.start})).reduce((function(processedChunks,nextChunk){if(0===processedChunks.length)return[nextChunk];var prevChunk=processedChunks.pop();if(nextChunk.start<=prevChunk.end){var endIndex=Math.max(prevChunk.end,nextChunk.end);processedChunks.push({start:prevChunk.start,end:endIndex})}else processedChunks.push(prevChunk,nextChunk);return processedChunks}),[])},defaultFindChunks=function defaultFindChunks(_ref3){var autoEscape=_ref3.autoEscape,caseSensitive=_ref3.caseSensitive,_ref3$sanitize=_ref3.sanitize,sanitize=void 0===_ref3$sanitize?identity:_ref3$sanitize,searchWords=_ref3.searchWords,textToHighlight=_ref3.textToHighlight;return textToHighlight=sanitize(textToHighlight),searchWords.filter((function(searchWord){return searchWord})).reduce((function(chunks,searchWord){searchWord=sanitize(searchWord),autoEscape&&(searchWord=function escapeRegExpFn(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}(searchWord));for(var regex=new RegExp(searchWord,caseSensitive?"g":"gi"),match=void 0;match=regex.exec(textToHighlight);){var start=match.index,end=regex.lastIndex;end>start&&chunks.push({start:start,end:end}),match.index==regex.lastIndex&&regex.lastIndex++}return chunks}),[])};exports.findChunks=defaultFindChunks;var fillInChunks=exports.fillInChunks=function fillInChunks(_ref4){var chunksToHighlight=_ref4.chunksToHighlight,totalLength=_ref4.totalLength,allChunks=[],append=function append(start,end,highlight){end-start>0&&allChunks.push({start:start,end:end,highlight:highlight})};if(0===chunksToHighlight.length)append(0,totalLength,!1);else{var lastIndex=0;chunksToHighlight.forEach((function(chunk){append(lastIndex,chunk.start,!1),append(chunk.start,chunk.end,!0),lastIndex=chunk.end})),append(lastIndex,totalLength,!1)}return allChunks};function identity(value){return value}}])},function(module,exports,__nested_webpack_require_16653__){(function(process){if("production"!==process.env.NODE_ENV){var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;module.exports=__nested_webpack_require_16653__(6)((function(object){return"object"==typeof object&&null!==object&&object.$$typeof===REACT_ELEMENT_TYPE}),!0)}else module.exports=__nested_webpack_require_16653__(13)()}).call(exports,__nested_webpack_require_16653__(5))},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__nested_webpack_require_23461__){(function(process){"use strict";var emptyFunction=__nested_webpack_require_23461__(7),invariant=__nested_webpack_require_23461__(8),warning=__nested_webpack_require_23461__(9),assign=__nested_webpack_require_23461__(10),ReactPropTypesSecret=__nested_webpack_require_23461__(11),checkPropTypes=__nested_webpack_require_23461__(12);module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";var ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturnsNull)}(),arrayOf:function createArrayOfTypeChecker(typeChecker){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.");var propValue=props[propName];if(!Array.isArray(propValue))return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected an array.");for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error)return error}return null}))},element:function createElementTypeChecker(){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];return isValidElement(propValue)?null:new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPropType(propValue)+"` supplied to `"+componentName+"`, expected a single ReactElement.")}))}(),instanceOf:function createInstanceTypeChecker(expectedClass){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+function getClassName(propValue){return propValue.constructor&&propValue.constructor.name?propValue.constructor.name:ANONYMOUS}(props[propName])+"` supplied to `"+componentName+"`, expected instance of `"+expectedClassName+"`.")}return null}))},node:function createNodeChecker(){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){return isNode(props[propName])?null:new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`, expected a ReactNode.")}))}(),objectOf:function createObjectOfTypeChecker(typeChecker){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){if("function"!=typeof typeChecker)return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.");var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected an object.");for(var key in propValue)if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error)return error}return null}))},oneOf:function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues))return"production"!==process.env.NODE_ENV&&warning(!1,"Invalid argument supplied to oneOf, expected an instance of array."),emptyFunction.thatReturnsNull;return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){for(var propValue=props[propName],i=0;i<expectedValues.length;i++)if(is(propValue,expectedValues[i]))return null;return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+propValue+"` supplied to `"+componentName+"`, expected one of "+JSON.stringify(expectedValues)+".")}))},oneOfType:function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers))return"production"!==process.env.NODE_ENV&&warning(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),emptyFunction.thatReturnsNull;for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if("function"!=typeof checker)return warning(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",getPostfixForTypeWarning(checker),i),emptyFunction.thatReturnsNull}return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++)if(null==(0,arrayOfTypeCheckers[i])(props,propName,componentName,location,propFullName,ReactPropTypesSecret))return null;return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to `"+componentName+"`.")}))},shape:function createShapeTypeChecker(shapeTypes){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");for(var key in shapeTypes){var checker=shapeTypes[key];if(checker){var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}}return null}))},exact:function createStrictShapeTypeChecker(shapeTypes){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){var propValue=props[propName],propType=getPropType(propValue);if("object"!==propType)return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `object`.");var allKeys=assign({},props[propName],shapeTypes);for(var key in allKeys){var checker=shapeTypes[key];if(!checker)return new PropTypeError("Invalid "+location+" `"+propFullName+"` key `"+key+"` supplied to `"+componentName+"`.\nBad object: "+JSON.stringify(props[propName],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(shapeTypes),null,"  "));var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error)return error}return null}))}};function is(x,y){return x===y?0!==x||1/x==1/y:x!=x&&y!=y}function PropTypeError(message){this.message=message,this.stack=""}function createChainableTypeChecker(validate){if("production"!==process.env.NODE_ENV)var manualPropTypeCallCache={},manualPropTypeWarningCount=0;function checkType(isRequired,props,propName,componentName,location,propFullName,secret){if(componentName=componentName||ANONYMOUS,propFullName=propFullName||propName,secret!==ReactPropTypesSecret)if(throwOnDirectAccess)invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var cacheKey=componentName+":"+propName;!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3&&(warning(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",propFullName,componentName),manualPropTypeCallCache[cacheKey]=!0,manualPropTypeWarningCount++)}return null==props[propName]?isRequired?null===props[propName]?new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `null`."):new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in `"+componentName+"`, but its value is `undefined`."):null:validate(props,propName,componentName,location,propFullName)}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createPrimitiveTypeChecker(expectedType){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];return getPropType(propValue)!==expectedType?new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+getPreciseType(propValue)+"` supplied to `"+componentName+"`, expected `"+expectedType+"`."):null}))}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return!0;case"boolean":return!propValue;case"object":if(Array.isArray(propValue))return propValue.every(isNode);if(null===propValue||isValidElement(propValue))return!0;var iteratorFn=function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if("function"==typeof iteratorFn)return iteratorFn}(propValue);if(!iteratorFn)return!1;var step,iterator=iteratorFn.call(propValue);if(iteratorFn!==propValue.entries){for(;!(step=iterator.next()).done;)if(!isNode(step.value))return!1}else for(;!(step=iterator.next()).done;){var entry=step.value;if(entry&&!isNode(entry[1]))return!1}return!0;default:return!1}}function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":function isSymbol(propType,propValue){return"symbol"===propType||"Symbol"===propValue["@@toStringTag"]||"function"==typeof Symbol&&propValue instanceof Symbol}(propType,propValue)?"symbol":propType}function getPreciseType(propValue){if(null==propValue)return""+propValue;var propType=getPropType(propValue);if("object"===propType){if(propValue instanceof Date)return"date";if(propValue instanceof RegExp)return"regexp"}return propType}function getPostfixForTypeWarning(value){var type=getPreciseType(value);switch(type){case"array":case"object":return"an "+type;case"boolean":case"date":case"regexp":return"a "+type;default:return type}}return PropTypeError.prototype=Error.prototype,ReactPropTypes.checkPropTypes=checkPropTypes,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}}).call(exports,__nested_webpack_require_23461__(5))},function(module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(arg){return arg},module.exports=emptyFunction},function(module,exports,__nested_webpack_require_45053__){(function(process){"use strict";var validateFormat=function validateFormat(format){};"production"!==process.env.NODE_ENV&&(validateFormat=function validateFormat(format){if(void 0===format)throw new Error("invariant requires an error message argument")}),module.exports=function invariant(condition,format,a,b,c,d,e,f){if(validateFormat(format),!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;(error=new Error(format.replace(/%s/g,(function(){return args[argIndex++]})))).name="Invariant Violation"}throw error.framesToPop=1,error}}}).call(exports,__nested_webpack_require_45053__(5))},function(module,exports,__nested_webpack_require_46805__){(function(process){"use strict";var warning=__nested_webpack_require_46805__(7);if("production"!==process.env.NODE_ENV){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var argIndex=0,message="Warning: "+format.replace(/%s/g,(function(){return args[argIndex++]}));"undefined"!=typeof console&&console.error(message);try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(void 0===format)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==format.indexOf("Failed Composite propType: ")&&!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)args[_key2-2]=arguments[_key2];printWarning.apply(void 0,[format].concat(args))}}}module.exports=warning}).call(exports,__nested_webpack_require_46805__(5))},function(module,exports){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(test2).map((function(n){return test2[n]})).join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}}()?Object.assign:function(target,source){for(var from,symbols,to=function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(target),s=1;s<arguments.length;s++){for(var key in from=Object(arguments[s]))hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},function(module,exports){"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(module,exports,__nested_webpack_require_51592__){(function(process){"use strict";if("production"!==process.env.NODE_ENV)var invariant=__nested_webpack_require_51592__(8),warning=__nested_webpack_require_51592__(9),ReactPropTypesSecret=__nested_webpack_require_51592__(11),loggedTypeFailures={};module.exports=function checkPropTypes(typeSpecs,values,location,componentName,getStack){if("production"!==process.env.NODE_ENV)for(var typeSpecName in typeSpecs)if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{invariant("function"==typeof typeSpecs[typeSpecName],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",componentName||"React class",location,typeSpecName,typeof typeSpecs[typeSpecName]),error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}if(warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",componentName||"React class",location,typeSpecName,typeof error),error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=!0;var stack=getStack?getStack():"";warning(!1,"Failed %s type: %s%s",location,error.message,null!=stack?stack:"")}}}}).call(exports,__nested_webpack_require_51592__(5))},function(module,exports,__nested_webpack_require_54693__){"use strict";var emptyFunction=__nested_webpack_require_54693__(7),invariant=__nested_webpack_require_54693__(8),ReactPropTypesSecret=__nested_webpack_require_54693__(11);module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){secret!==ReactPropTypesSecret&&invariant(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};return ReactPropTypes.checkPropTypes=emptyFunction,ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},function(module,exports){module.exports=__webpack_require__("../../node_modules/react/index.js")},function(module,exports){"use strict";var simpleIsEqual=function simpleIsEqual(a,b){return a===b};module.exports=function index(resultFn){var isEqual=arguments.length>1&&void 0!==arguments[1]?arguments[1]:simpleIsEqual,lastThis=void 0,lastArgs=[],lastResult=void 0,calledOnce=!1,isNewArgEqualToLast=function isNewArgEqualToLast(newArg,index){return isEqual(newArg,lastArgs[index])};return function result(){for(var _len=arguments.length,newArgs=Array(_len),_key=0;_key<_len;_key++)newArgs[_key]=arguments[_key];return calledOnce&&lastThis===this&&newArgs.length===lastArgs.length&&newArgs.every(isNewArgEqualToLast)?lastResult:(calledOnce=!0,lastThis=this,lastArgs=newArgs,lastResult=resultFn.apply(this,newArgs))}}}])},"../../node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";var ImmutablePropTypes,Immutable=__webpack_require__("../../node_modules/immutable/dist/immutable.es.js"),ANONYMOUS="<<anonymous>>",productionTypeChecker=function productionTypeChecker(){invariant(!1,"ImmutablePropTypes type checking code is stripped in production.")};productionTypeChecker.isRequired=productionTypeChecker;var getProductionTypeChecker=function getProductionTypeChecker(){return productionTypeChecker};function getPropType(propValue){var propType=typeof propValue;return Array.isArray(propValue)?"array":propValue instanceof RegExp?"object":propValue instanceof Immutable.Iterable?"Immutable."+propValue.toSource().split(" ")[0]:propType}function createChainableTypeChecker(validate){function checkType(isRequired,props,propName,componentName,location,propFullName){for(var _len=arguments.length,rest=Array(_len>6?_len-6:0),_key=6;_key<_len;_key++)rest[_key-6]=arguments[_key];return propFullName=propFullName||propName,componentName=componentName||ANONYMOUS,null!=props[propName]?validate.apply(void 0,[props,propName,componentName,location,propFullName].concat(rest)):isRequired?new Error("Required "+location+" `"+propFullName+"` was not specified in `"+componentName+"`."):void 0}var chainedCheckType=checkType.bind(null,!1);return chainedCheckType.isRequired=checkType.bind(null,!0),chainedCheckType}function createIterableSubclassTypeChecker(subclassName,validator){return function createImmutableTypeChecker(immutableClassName,immutableClassTypeValidator){return createChainableTypeChecker((function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!immutableClassTypeValidator(propValue)){var propType=getPropType(propValue);return new Error("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` supplied to `"+componentName+"`, expected `"+immutableClassName+"`.")}return null}))}("Iterable."+subclassName,(function(propValue){return Immutable.Iterable.isIterable(propValue)&&validator(propValue)}))}(ImmutablePropTypes={listOf:getProductionTypeChecker,mapOf:getProductionTypeChecker,orderedMapOf:getProductionTypeChecker,setOf:getProductionTypeChecker,orderedSetOf:getProductionTypeChecker,stackOf:getProductionTypeChecker,iterableOf:getProductionTypeChecker,recordOf:getProductionTypeChecker,shape:getProductionTypeChecker,contains:getProductionTypeChecker,mapContains:getProductionTypeChecker,orderedMapContains:getProductionTypeChecker,list:productionTypeChecker,map:productionTypeChecker,orderedMap:productionTypeChecker,set:productionTypeChecker,orderedSet:productionTypeChecker,stack:productionTypeChecker,seq:productionTypeChecker,record:productionTypeChecker,iterable:productionTypeChecker}).iterable.indexed=createIterableSubclassTypeChecker("Indexed",Immutable.Iterable.isIndexed),ImmutablePropTypes.iterable.keyed=createIterableSubclassTypeChecker("Keyed",Immutable.Iterable.isKeyed),module.exports=ImmutablePropTypes},"../../node_modules/selection-is-backward/index.js":function(module){module.exports=function isBackward(selection){var startNode=selection.anchorNode,startOffset=selection.anchorOffset,endNode=selection.focusNode,endOffset=selection.focusOffset,position=startNode.compareDocumentPosition(endNode);return!(4===position||0===position&&startOffset<endOffset)}},"../../node_modules/slate-hotkeys/node_modules/is-hotkey/lib/index.js":function(__unused_webpack_module,exports){"use strict";for(var IS_MAC="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),MODIFIERS={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ALIASES={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:IS_MAC?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},CODES={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},f=1;f<20;f++)CODES["f"+f]=111+f;function isHotkey(hotkey,options,event){options&&!("byKey"in options)&&(event=options,options=null),Array.isArray(hotkey)||(hotkey=[hotkey]);var array=hotkey.map((function(string){return parseHotkey(string,options)})),check=function check(e){return array.some((function(object){return compareHotkey(object,e)}))};return null==event?check:check(event)}function parseHotkey(hotkey,options){var byKey=options&&options.byKey,ret={},values=(hotkey=hotkey.replace("++","+add")).split("+"),length=values.length;for(var k in MODIFIERS)ret[MODIFIERS[k]]=!1;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=values[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var value=_step.value,optional=value.endsWith("?");optional&&(value=value.slice(0,-1));var name=toKeyName(value),modifier=MODIFIERS[name];1!==length&&modifier||(byKey?ret.key=name:ret.which=toKeyCode(value)),modifier&&(ret[modifier]=!optional||null)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return ret}function compareHotkey(object,event){for(var key in object){var expected=object[key],actual=void 0;if(null!=expected&&((null!=(actual="key"===key?event.key.toLowerCase():"which"===key?91===expected&&93===event.which?91:event.which:event[key])||!1!==expected)&&actual!==expected))return!1}return!0}function toKeyCode(name){return name=toKeyName(name),CODES[name]||name.toUpperCase().charCodeAt(0)}function toKeyName(name){return name=name.toLowerCase(),name=ALIASES[name]||name}exports.Sn=function isKeyHotkey(hotkey,event){return isHotkey(hotkey,{byKey:!0},event)}},"../../node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var slate__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/slate/lib/slate.es.js"),immutable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/immutable/dist/immutable.es.js"),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};function serializeNode(node){var _options$delimiter2=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delimiter,delimiter=void 0===_options$delimiter2?"\n":_options$delimiter2;return"document"===node.object||"block"===node.object&&slate__WEBPACK_IMPORTED_MODULE_0__.eB.isBlockList(node.nodes)?node.nodes.map(serializeNode).join(delimiter):node.text}var index={deserialize:function deserialize(string){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_options$defaultBlock=options.defaultBlock,defaultBlock=void 0===_options$defaultBlock?"line":_options$defaultBlock,_options$defaultMarks=options.defaultMarks,defaultMarks=void 0===_options$defaultMarks?[]:_options$defaultMarks,_options$delimiter=options.delimiter,delimiter=void 0===_options$delimiter?"\n":_options$delimiter,_options$toJSON=options.toJSON,toJSON=void 0!==_options$toJSON&&_options$toJSON;immutable__WEBPACK_IMPORTED_MODULE_1__.Set.isSet(defaultMarks)&&(defaultMarks=defaultMarks.toArray()),defaultBlock=slate__WEBPACK_IMPORTED_MODULE_0__.bP.createProperties(defaultBlock),defaultMarks=defaultMarks.map(slate__WEBPACK_IMPORTED_MODULE_0__.CU.createProperties);var json={object:"value",document:{object:"document",data:{},nodes:string.split(delimiter).map((function(line){return _extends({},defaultBlock,{object:"block",data:{},nodes:[{object:"text",text:line,marks:defaultMarks}]})}))}};return toJSON?json:slate__WEBPACK_IMPORTED_MODULE_0__.WT.fromJSON(json)},serialize:function serialize(value){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return serializeNode(value.document,options)}};__webpack_exports__.A=index},"../../node_modules/slate-react/lib/slate-react.es.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{KE:function(){return Editor$1}});var react=__webpack_require__("../../node_modules/react/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),slate_es=__webpack_require__("../../node_modules/slate/lib/slate.es.js");function create(name,validate){function check(isRequired,props,propName,componentName,location){var value=props[propName];return null!=value||isRequired?null==value&&isRequired?new Error("The "+location+" `"+propName+"` is marked as required in `"+componentName+"`, but it was not supplied."):validate(value)?null:new Error("Invalid "+location+" `"+propName+"` supplied to `"+componentName+"`, expected a Slate `"+name+"` but received: "+value):null}function propType(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return check.apply(void 0,[!1].concat(args))}return propType.isRequired=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return check.apply(void 0,[!0].concat(args))},propType}var slate_prop_types_es={block:create("Block",(function(v){return slate_es.eB.isBlock(v)})),blocks:create("List<Block>",(function(v){return slate_es.eB.isBlockList(v)})),change:create("Change",(function(v){return slate_es.lY.isChange(v)})),data:create("Data",(function(v){return slate_es.B_.isData(v)})),document:create("Document",(function(v){return slate_es.yo.isDocument(v)})),inline:create("Inline",(function(v){return slate_es.cV.isInline(v)})),inlines:create("Inline",(function(v){return slate_es.cV.isInlineList(v)})),leaf:create("Leaf",(function(v){return slate_es.hK.isLeaf(v)})),leaves:create("List<Leaf>",(function(v){return slate_es.hK.isLeafList(v)})),mark:create("Mark",(function(v){return slate_es.CU.isMark(v)})),marks:create("Set<Mark>",(function(v){return slate_es.CU.isMarkSet(v)})),node:create("Node",(function(v){return slate_es.bP.isNode(v)})),nodes:create("List<Node>",(function(v){return slate_es.bP.isNodeList(v)})),range:create("Range",(function(v){return slate_es.Q6.isRange(v)})),ranges:create("List<Range>",(function(v){return slate_es.Q6.isRangeList(v)})),selection:create("Selection",(function(v){return slate_es.LN.isSelection(v)})),value:create("Value",(function(v){return slate_es.WT.isValue(v)})),text:create("Text",(function(v){return slate_es.EY.isText(v)})),texts:create("List<Text>",(function(v){return slate_es.EY.isTextList(v)}))},ImmutablePropTypes=__webpack_require__("../../node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js"),ImmutablePropTypes_default=__webpack_require__.n(ImmutablePropTypes),browser=__webpack_require__("../../node_modules/slate-react/node_modules/debug/src/browser.js"),browser_default=__webpack_require__.n(browser),tiny_warning_esm=function(condition,message){0},get_window=__webpack_require__("../../node_modules/get-window/index.js"),get_window_default=__webpack_require__.n(get_window),selection_is_backward=__webpack_require__("../../node_modules/selection-is-backward/index.js"),selection_is_backward_default=__webpack_require__.n(selection_is_backward),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},dist_module="object"===("undefined"==typeof window?"undefined":_typeof(window))&&"object"===("undefined"==typeof document?"undefined":_typeof(document))&&9===document.nodeType,slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},slate_dev_environment_es_browser=void 0;if(dist_module){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=slicedToArray(_ref,2),slate_dev_environment_es_name=_ref2[0];if(_ref2[1].test(window.navigator.userAgent)){slate_dev_environment_es_browser=slate_dev_environment_es_name;break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}var os=void 0;if(dist_module){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _ref3=_step2.value,_ref4=slicedToArray(_ref3,2),_name=_ref4[0];if(_ref4[1].test(window.navigator.userAgent)){os=_name;break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}var features=[];if(dist_module){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=[["inputeventslevel1",function(window){return"inputType"in(window.InputEvent?new window.InputEvent("input"):{})}],["inputeventslevel2",function(_){return!1}]][Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _ref5=_step3.value,_ref6=slicedToArray(_ref5,2),_name2=_ref6[0];(0,_ref6[1])(window)&&features.push(_name2)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}var ANDROID_API_VERSIONS=[[/^9([.]0|)/,28],[/^8[.]1/,27],[/^8([.]0|)/,26],[/^7[.]1/,25],[/^7([.]0|)/,24],[/^6([.]0|)/,23],[/^5[.]1/,22],[/^5([.]0|)/,21],[/^4[.]4/,20]];var IS_FIREFOX="firefox"===slate_dev_environment_es_browser,IS_SAFARI="safari"===slate_dev_environment_es_browser,IS_IE="ie"===slate_dev_environment_es_browser,IS_EDGE="edge"===slate_dev_environment_es_browser,IS_ANDROID="android"===os,IS_IOS="ios"===os,IS_MAC="macos"===os,ANDROID_API_VERSION=function getAndroidApiVersion(){if("android"!==os)return null;var matchData=window.navigator.userAgent.match(/Android\s([0-9\.]+)/);if(null==matchData)return null;var versionString=matchData[1],_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=ANDROID_API_VERSIONS[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _ref7=_step4.value,_ref8=slicedToArray(_ref7,2),regex=_ref8[0],version=_ref8[1];if(versionString.match(regex))return version}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return null}(),HAS_INPUT_EVENTS_LEVEL_2=(features.includes("inputeventslevel1"),features.includes("inputeventslevel2")||IS_ANDROID&&(28===ANDROID_API_VERSION||null===ANDROID_API_VERSION)),throttle=__webpack_require__("../../node_modules/lodash/throttle.js"),throttle_default=__webpack_require__.n(throttle),omit=__webpack_require__("../../node_modules/lodash/omit.js"),omit_default=__webpack_require__.n(omit),immutable_es=__webpack_require__("../../node_modules/immutable/dist/immutable.es.js"),lib=__webpack_require__("../../node_modules/slate-hotkeys/node_modules/is-hotkey/lib/index.js"),HOTKEYS={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},APPLE_HOTKEYS={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},WINDOWS_HOTKEYS={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:"ctrl+y"},Hotkeys={},IS_APPLE=IS_IOS||IS_MAC,slate_hotkeys_es_IS_WINDOWS=!IS_APPLE;[].concat(Object.keys(HOTKEYS)).concat(Object.keys(APPLE_HOTKEYS)).concat(Object.keys(WINDOWS_HOTKEYS)).forEach((function(key){var method="is"+key[0].toUpperCase()+key.slice(1);if(!Hotkeys[method]){var generic=HOTKEYS[key],apple=APPLE_HOTKEYS[key],windows=WINDOWS_HOTKEYS[key],isGeneric=generic&&(0,lib.Sn)(generic),isApple=apple&&(0,lib.Sn)(apple),isWindows=windows&&(0,lib.Sn)(windows);Hotkeys[method]=function(event){return!(!isGeneric||!isGeneric(event))||(!!(IS_APPLE&&isApple&&isApple(event))||!!(slate_hotkeys_es_IS_WINDOWS&&isWindows&&isWindows(event)))}}}));var slate_hotkeys_es=Hotkeys,react_dom=__webpack_require__("../../node_modules/react-dom/index.js"),isomorphic_base64_browser=__webpack_require__("../../node_modules/isomorphic-base64/browser.js");function encode(object){var string=JSON.stringify(object);return(0,isomorphic_base64_browser.E)(encodeURIComponent(string))}function decode(string){var decoded=decodeURIComponent((0,isomorphic_base64_browser.l)(string));return JSON.parse(decoded)}var slate_base64_serializer_es={deserialize:function deserialize(string,options){var raw=decode(string);return slate_es.WT.fromJSON(raw,options)},deserializeNode:function deserializeNode(string,options){var raw=decode(string);return slate_es.bP.fromJSON(raw,options)},serialize:function serialize(value,options){return encode(value.toJSON(options))},serializeNode:function serializeNode(node,options){return encode(node.toJSON(options))}},slate_plain_serializer_es=__webpack_require__("../../node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),tiny_invariant=__webpack_require__("../../node_modules/tiny-invariant/dist/esm/tiny-invariant.js"),slate_react_placeholder_es_index=function(condition,message){if(!condition)throw new Error("Invariant failed: "+(message||""))},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},slate_react_placeholder_es_slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},instanceCounter=0;var slate_react_placeholder_es=function SlateReactPlaceholder(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},instanceId=instanceCounter++,placeholder=options.placeholder,when=options.when,_options$style=options.style,style=void 0===_options$style?{}:_options$style;return slate_react_placeholder_es_index("string"==typeof placeholder,"You must pass `SlateReactPlaceholder` an `options.placeholder` string."),slate_react_placeholder_es_index("string"==typeof when||"function"==typeof when,"You must pass `SlateReactPlaceholder` an `options.when` query."),{decorateNode:function decorateNode(node,editor,next){if(!editor.query(when,node))return next();var others=next(),_node$texts=node.texts(),first=slate_react_placeholder_es_slicedToArray(_node$texts,1)[0],_node$texts3=node.texts({direction:"backward"}),last=slate_react_placeholder_es_slicedToArray(_node$texts3,1)[0],_first=slate_react_placeholder_es_slicedToArray(first,2),firstNode=_first[0],firstPath=_first[1],_last=slate_react_placeholder_es_slicedToArray(last,2),lastNode=_last[0],lastPath=_last[1],decoration={type:"placeholder",data:{key:instanceId},anchor:{key:firstNode.key,offset:0,path:firstPath},focus:{key:lastNode.key,offset:lastNode.text.length,path:lastPath}};return[].concat(function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(others),[decoration])},renderDecoration:function renderDecoration(props,editor,next){var children=props.children,deco=props.decoration;if("placeholder"===deco.type&&deco.data.get("key")===instanceId){var placeHolderStyle=_extends({pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333",verticalAlign:"text-top"},style);return react.createElement("span",null,react.createElement("span",{contentEditable:!1,style:placeHolderStyle},placeholder),children)}return next()}}},simpleIsEqual=function simpleIsEqual(a,b){return a===b};var memoize_one_esm=function memoize_one_esm_index(resultFn,isEqual){var lastThis;void 0===isEqual&&(isEqual=simpleIsEqual);var lastResult,lastArgs=[],calledOnce=!1,isNewArgEqualToLast=function isNewArgEqualToLast(newArg,index){return isEqual(newArg,lastArgs[index])};return function result(){for(var _len=arguments.length,newArgs=new Array(_len),_key=0;_key<_len;_key++)newArgs[_key]=arguments[_key];return calledOnce&&lastThis===this&&newArgs.length===lastArgs.length&&newArgs.every(isNewArgEqualToLast)||(lastResult=resultFn.apply(this,newArgs),calledOnce=!0,lastThis=this,lastArgs=newArgs),lastResult}},EVENT_HANDLERS=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onPaste","onSelect"],DATA_ATTRS={EDITOR:"data-slate-editor",FRAGMENT:"data-slate-fragment",KEY:"data-key",LEAF:"data-slate-leaf",LENGTH:"data-slate-length",OBJECT:"data-slate-object",OFFSET_KEY:"data-offset-key",SPACER:"data-slate-spacer",STRING:"data-slate-string",TEXT:"data-slate-object",VOID:"data-slate-void",ZERO_WIDTH:"data-slate-zero-width"},SELECTORS={BLOCK:"["+DATA_ATTRS.OBJECT+'="block"]',EDITOR:"["+DATA_ATTRS.EDITOR+"]",INLINE:"["+DATA_ATTRS.OBJECT+'="inline"]',KEY:"["+DATA_ATTRS.KEY+"]",LEAF:"["+DATA_ATTRS.LEAF+"]",OBJECT:"["+DATA_ATTRS.OBJECT+"]",STRING:"["+DATA_ATTRS.STRING+"]",TEXT:"["+DATA_ATTRS.OBJECT+'="text"]',VOID:"["+DATA_ATTRS.VOID+"]",ZERO_WIDTH:"["+DATA_ATTRS.ZERO_WIDTH+"]"},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},slate_react_es_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},slate_react_es_slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},slate_react_es_toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)},PARSER=/^([\w-]+)(?::(\d+))?$/;var OffsetKey={parse:function parse(string){var matches=PARSER.exec(string);if(!matches)throw new Error('Invalid offset key string "'+string+'".');var _matches=slate_react_es_slicedToArray(matches,3),key=(_matches[0],_matches[1]),index=_matches[2];return{key:key,index:parseInt(index,10)}},stringify:function stringify(object){return object.key+":"+object.index}},TextString=function TextString(_ref){var _ref$text=_ref.text,text=void 0===_ref$text?"":_ref$text,_ref$isTrailing=_ref.isTrailing,isTrailing=void 0!==_ref$isTrailing&&_ref$isTrailing;return react.createElement("span",defineProperty({},DATA_ATTRS.STRING,!0),text,isTrailing?"\n":null)},ZeroWidthString=function ZeroWidthString(_ref3){var _ref4,_ref3$length=_ref3.length,length=void 0===_ref3$length?0:_ref3$length,_ref3$isLineBreak=_ref3.isLineBreak,isLineBreak=void 0!==_ref3$isLineBreak&&_ref3$isLineBreak;return react.createElement("span",(defineProperty(_ref4={},DATA_ATTRS.ZERO_WIDTH,isLineBreak?"n":"z"),defineProperty(_ref4,DATA_ATTRS.LENGTH,length),_ref4),"\ufeff",isLineBreak?react.createElement("br",null):null)},Leaf=function Leaf(props){var _attrs,marks=props.marks,annotations=props.annotations,decorations=props.decorations,node=props.node,index=props.index,offset=props.offset,text=props.text,editor=props.editor,parent=props.parent,block=props.block,leaves=props.leaves,offsetKey=OffsetKey.stringify({key:node.key,index:index}),children=void 0;if(editor.query("isVoid",parent))children=react.createElement(ZeroWidthString,{length:parent.text.length});else if(""===text&&"block"===parent.object&&""===parent.text&&parent.nodes.last()===node)children=react.createElement(ZeroWidthString,{isLineBreak:!0});else if(""===text)children=react.createElement(ZeroWidthString,null);else{var lastText=block.getLastText(),lastChar=text.charAt(text.length-1),isLastText=node===lastText,isLastLeaf=index===leaves.size-1;children=isLastText&&isLastLeaf&&"\n"===lastChar?react.createElement(TextString,{isTrailing:!0,text:text}):react.createElement(TextString,{text:text})}var renderProps={editor:editor,marks:marks,annotations:annotations,decorations:decorations,node:node,offset:offset,text:text},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=marks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var mark=_step.value;(ret=editor.run("renderMark",slate_react_es_extends({},renderProps,{mark:mark,children:children,attributes:defineProperty({},DATA_ATTRS.OBJECT,"mark")})))&&(children=ret)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=decorations[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var decoration=_step2.value;(ret=editor.run("renderDecoration",slate_react_es_extends({},renderProps,{decoration:decoration,children:children,attributes:defineProperty({},DATA_ATTRS.OBJECT,"decoration")})))&&(children=ret)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=annotations[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var ret,annotation=_step3.value;(ret=editor.run("renderAnnotation",slate_react_es_extends({},renderProps,{annotation:annotation,children:children,attributes:defineProperty({},DATA_ATTRS.OBJECT,"annotation")})))&&(children=ret)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var attrs=(defineProperty(_attrs={},DATA_ATTRS.LEAF,!0),defineProperty(_attrs,DATA_ATTRS.OFFSET_KEY,offsetKey),_attrs);return react.createElement("span",attrs,children)};Leaf.propTypes={annotations:ImmutablePropTypes_default().list.isRequired,block:slate_prop_types_es.block.isRequired,decorations:ImmutablePropTypes_default().list.isRequired,editor:prop_types_default().object.isRequired,index:prop_types_default().number.isRequired,leaves:prop_types_default().object.isRequired,marks:slate_prop_types_es.marks.isRequired,node:slate_prop_types_es.node.isRequired,offset:prop_types_default().number.isRequired,parent:slate_prop_types_es.node.isRequired,text:prop_types_default().string.isRequired};var MemoizedLeaf=react.memo(Leaf,(function(prev,next){return next.block===prev.block&&next.index===prev.index&&next.marks===prev.marks&&next.parent===prev.parent&&next.text===prev.text&&next.annotations.equals(prev.annotations)&&next.decorations.equals(prev.decorations)})),Text=react.forwardRef((function(props,ref){var _ref,annotations=props.annotations,block=props.block,decorations=props.decorations,node=props.node,parent=props.parent,editor=props.editor,style=props.style,key=node.key,leaves=node.getLeaves(annotations,decorations),at=0;return react.createElement("span",slate_react_es_extends({ref:ref,style:style},(defineProperty(_ref={},DATA_ATTRS.OBJECT,node.object),defineProperty(_ref,DATA_ATTRS.KEY,key),_ref)),leaves.map((function(leaf,index){var text=leaf.text,offset=at;return at+=text.length,react.createElement(MemoizedLeaf,{key:node.key+"-"+index,block:block,editor:editor,index:index,annotations:leaf.annotations,decorations:leaf.decorations,marks:leaf.marks,node:node,offset:offset,parent:parent,leaves:leaves,text:text})})))}));Text.propTypes={annotations:ImmutablePropTypes_default().map.isRequired,block:slate_prop_types_es.block,decorations:ImmutablePropTypes_default().list.isRequired,editor:prop_types_default().object.isRequired,node:slate_prop_types_es.node.isRequired,parent:slate_prop_types_es.node.isRequired,style:prop_types_default().object};var MemoizedText=react.memo(Text,(function(prev,next){return next.node===prev.node&&"block"===next.parent.object&&prev.parent.nodes.last()===prev.node&&next.parent.nodes.last()!==next.node&&next.annotations.equals(prev.annotations)&&next.decorations.equals(prev.decorations)})),debug=browser_default()("slate:void"),Void=function(_React$Component){function Void(){var _ref,_temp,_this;classCallCheck(this,Void);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=Void.__proto__||Object.getPrototypeOf(Void)).call.apply(_ref,[this].concat(args))),_initialiseProps.call(_this),possibleConstructorReturn(_this,_temp)}return inherits(Void,_React$Component),createClass(Void,[{key:"render",value:function render(){var _attrs,props=this.props,children=props.children,node=props.node,readOnly=props.readOnly,Tag="block"===node.object?"div":"span",spacerAttrs=defineProperty({},DATA_ATTRS.SPACER,!0),spacer=react.createElement(Tag,slate_react_es_extends({style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},spacerAttrs),this.renderText()),content=react.createElement(Tag,{contentEditable:!!readOnly&&null},children);this.debug("render",{props:props});var attrs=(defineProperty(_attrs={},DATA_ATTRS.VOID,!0),defineProperty(_attrs,DATA_ATTRS.KEY,node.key),_attrs);return react.createElement(Tag,slate_react_es_extends({contentEditable:!(!readOnly&&"block"!==node.object)&&null},attrs),readOnly?null:spacer,content)}}]),Void}(react.Component);Void.propTypes={block:slate_prop_types_es.block,children:prop_types_default().any.isRequired,editor:prop_types_default().object.isRequired,node:slate_prop_types_es.node.isRequired,parent:slate_prop_types_es.node.isRequired,readOnly:prop_types_default().bool.isRequired};var _initialiseProps=function _initialiseProps(){var _this2=this;this.debug=function(message){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];var node=_this2.props.node,id=node.key+" ("+node.type+")";debug.apply(void 0,[message,""+id].concat(args))},this.renderText=function(){var _props=_this2.props,annotations=_props.annotations,block=_props.block,decorations=_props.decorations,node=_props.node,readOnly=_props.readOnly,editor=_props.editor,textRef=_props.textRef,child=node.getFirstText();return react.createElement(MemoizedText,{ref:textRef,annotations:annotations,block:"block"===node.object?node:block,decorations:decorations,editor:editor,key:child.key,node:child,parent:node,readOnly:readOnly})}},debug$1=browser_default()("slate:node"),Node$1=function(_React$Component){function Node$$1(){var _ref,_temp,_this;classCallCheck(this,Node$$1);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=Node$$1.__proto__||Object.getPrototypeOf(Node$$1)).call.apply(_ref,[this].concat(args))),_initialiseProps$1.call(_this),possibleConstructorReturn(_this,_temp)}return inherits(Node$$1,_React$Component),createClass(Node$$1,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){var props=this.props,shouldUpdate=props.editor.run("shouldNodeComponentUpdate",props,nextProps),n=nextProps,p=props;if(null!=shouldUpdate){if(tiny_warning_esm(!1,'As of slate-react@0.22 the `shouldNodeComponentUpdate` middleware is deprecated. You can pass specific values down the tree using React\'s built-in "context" construct instead.'),shouldUpdate)return!0;tiny_warning_esm(!1!==shouldUpdate,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return n.readOnly!==p.readOnly||(n.node!==p.node||(!!(!n.selection&&p.selection||n.selection&&!p.selection||n.selection&&p.selection&&!n.selection.equals(p.selection))||(!n.annotations.equals(p.annotations)||!n.decorations.equals(p.decorations))))}},{key:"render",value:function render(){var _attributes,_this2=this;this.debug("render",this);var _props=this.props,annotations=_props.annotations,block=_props.block,decorations=_props.decorations,editor=_props.editor,node=_props.node,parent=_props.parent,readOnly=_props.readOnly,selection=_props.selection,newDecorations=node.getDecorations(editor),children=node.nodes.toArray().map((function(child,i){var Component="text"===child.object?MemoizedText:Node$$1,sel=selection&&getRelativeRange(node,i,selection),decs=newDecorations.concat(decorations).map((function(d){return getRelativeRange(node,i,d)})).filter((function(d){return d})),anns=annotations.map((function(a){return getRelativeRange(node,i,a)})).filter((function(a){return a}));return react.createElement(Component,{block:"block"===node.object?node:block,editor:editor,annotations:anns,decorations:decs,selection:sel,key:child.key,node:child,parent:node,readOnly:readOnly,ref:function ref(_ref2){_ref2?_this2.tmp.nodeRefs[i]=_ref2:delete _this2.tmp.nodeRefs[i]}})})),attributes=(defineProperty(_attributes={},DATA_ATTRS.OBJECT,node.object),defineProperty(_attributes,DATA_ATTRS.KEY,node.key),defineProperty(_attributes,"ref",this.ref),_attributes);node.isLeafBlock()&&("rtl"===node.getTextDirection()&&(attributes.dir="rtl"));var render=void 0;"block"===node.object?render="renderBlock":"document"===node.object?render="renderDocument":"inline"===node.object&&(render="renderInline");var element=editor.run(render,{attributes:attributes,children:children,editor:editor,isFocused:!!selection&&selection.isFocused,isSelected:!!selection,node:node,parent:parent,readOnly:readOnly});return editor.isVoid(node)?react.createElement(Void,slate_react_es_extends({},this.props,{textRef:function textRef(ref){ref?_this2.tmp.nodeRefs[0]=ref:delete _this2.tmp.nodeRefs[0]}}),element):element}}]),Node$$1}(react.Component);Node$1.propTypes={annotations:ImmutablePropTypes_default().map.isRequired,block:slate_prop_types_es.block,decorations:ImmutablePropTypes_default().list.isRequired,editor:prop_types_default().object.isRequired,node:slate_prop_types_es.node.isRequired,parent:slate_prop_types_es.node,readOnly:prop_types_default().bool.isRequired,selection:slate_prop_types_es.selection};var _initialiseProps$1=function _initialiseProps(){var _this3=this;this.tmp={nodeRefs:{}},this.ref=react.createRef(),this.debug=function(message){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];var node=_this3.props.node,key=node.key,type=node.type;debug$1.apply(void 0,[message,key+" ("+type+")"].concat(args))}};function getRelativeRange(node,index,range){if(range.isUnset)return null;var child=node.nodes.get(index),_range=range,start=_range.start,end=_range.end,startPath=start.path,endPath=end.path,startIndex=startPath.first(),endIndex=endPath.first();if(startIndex===index)start=start.setPath(startPath.rest());else if(startIndex<index&&index<=endIndex)if("text"===child.object)start=start.moveTo(slate_es.PW.create([index]),0).setKey(child.key);else{var _child$texts=child.texts(),first=slate_react_es_slicedToArray(_child$texts,1)[0],_first=slate_react_es_slicedToArray(first,2),firstNode=_first[0],firstPath=_first[1];start=start.moveTo(firstPath,0).setKey(firstNode.key)}else start=null;if(endIndex===index)end=end.setPath(endPath.rest());else if(startIndex<=index&&index<endIndex)if("text"===child.object){var length=child.text.length;end=end.moveTo(slate_es.PW.create([index]),length).setKey(child.key)}else{var _child$texts3=child.texts({direction:"backward"}),last=slate_react_es_slicedToArray(_child$texts3,1)[0],_last=slate_react_es_slicedToArray(last,2),lastNode=_last[0],lastPath=_last[1];end=end.moveTo(lastPath,lastNode.text.length).setKey(lastNode.key)}else end=null;return start&&end?range=(range=range.setAnchor(start)).setFocus(end):null}var OVERFLOWS=["auto","overlay","scroll"],IS_IOS_11=IS_IOS&&!!window.navigator.userAgent.match(/os 11_/i);function scrollToSelection(selection){if(!IS_IOS_11&&selection.anchorNode){var window=get_window_default()(selection.anchorNode),scroller=function findScrollContainer(el,window){for(var parent=el.parentNode,scroller=void 0;!scroller&&parent.parentNode;){var overflowY=window.getComputedStyle(parent).overflowY;if(OVERFLOWS.includes(overflowY)){scroller=parent;break}parent=parent.parentNode}return scroller||window.document.body}(selection.anchorNode,window),isWindow=scroller===window.document.body||scroller===window.document.documentElement,backward=selection_is_backward_default()(selection),range=selection.getRangeAt(0).cloneRange();range.collapse(backward);var cursorRect=range.getBoundingClientRect();IS_SAFARI&&range.collapsed&&0===cursorRect.top&&0===cursorRect.height&&(0===range.startOffset?range.setEnd(range.endContainer,1):range.setStart(range.startContainer,range.startOffset-1),0===(cursorRect=range.getBoundingClientRect()).top&&0===cursorRect.height&&range.getClientRects().length&&(cursorRect=range.getClientRects()[0]));var width=void 0,height=void 0,yOffset=void 0,xOffset=void 0,scrollerTop=0,scrollerLeft=0,scrollerBordersY=0,scrollerBordersX=0,scrollerPaddingTop=0,scrollerPaddingBottom=0,scrollerPaddingLeft=0,scrollerPaddingRight=0;if(isWindow){width=window.innerWidth,height=window.innerHeight,yOffset=window.pageYOffset,xOffset=window.pageXOffset}else{var offsetWidth=scroller.offsetWidth,offsetHeight=scroller.offsetHeight,scrollTop=scroller.scrollTop,scrollLeft=scroller.scrollLeft,_window$getComputedSt=window.getComputedStyle(scroller),borderTopWidth=_window$getComputedSt.borderTopWidth,borderBottomWidth=_window$getComputedSt.borderBottomWidth,borderLeftWidth=_window$getComputedSt.borderLeftWidth,borderRightWidth=_window$getComputedSt.borderRightWidth,paddingTop=_window$getComputedSt.paddingTop,paddingBottom=_window$getComputedSt.paddingBottom,paddingLeft=_window$getComputedSt.paddingLeft,paddingRight=_window$getComputedSt.paddingRight,scrollerRect=scroller.getBoundingClientRect();width=offsetWidth,height=offsetHeight,scrollerTop=scrollerRect.top+parseInt(borderTopWidth,10),scrollerLeft=scrollerRect.left+parseInt(borderLeftWidth,10),scrollerBordersY=parseInt(borderTopWidth,10)+parseInt(borderBottomWidth,10),scrollerBordersX=parseInt(borderLeftWidth,10)+parseInt(borderRightWidth,10),scrollerPaddingTop=parseInt(paddingTop,10),scrollerPaddingBottom=parseInt(paddingBottom,10),scrollerPaddingLeft=parseInt(paddingLeft,10),scrollerPaddingRight=parseInt(paddingRight,10),yOffset=scrollTop,xOffset=scrollLeft}var cursorTop=cursorRect.top+yOffset-scrollerTop,cursorLeft=cursorRect.left+xOffset-scrollerLeft,x=xOffset,y=yOffset;cursorLeft<xOffset?x=cursorLeft-scrollerPaddingLeft:cursorLeft+cursorRect.width+scrollerBordersX>xOffset+width&&(x=cursorLeft+scrollerBordersX+scrollerPaddingRight-width),cursorTop<yOffset?y=cursorTop-scrollerPaddingTop:cursorTop+cursorRect.height+scrollerBordersY>yOffset+height&&(y=cursorTop+scrollerBordersY+scrollerPaddingBottom+cursorRect.height-height),isWindow?window.scrollTo(x,y):(scroller.scrollTop=y,scroller.scrollLeft=x)}}function removeAllRanges(domSelection){if(IS_IE){var range=window.document.body.createTextRange();range.collapse(),range.select()}else domSelection.removeAllRanges()}var FIREFOX_NODE_TYPE_ACCESS_ERROR=/Permission denied to access property "nodeType"/,debug$2=browser_default()("slate:content");debug$2.update=browser_default()("slate:update");var Content=function(_React$Component){function Content(){var _ref,_temp,_this;classCallCheck(this,Content);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=Content.__proto__||Object.getPrototypeOf(Content)).call.apply(_ref,[this].concat(args))),_this.tmp={isUpdatingSelection:!1,nodeRef:react.createRef(),nodeRefs:{},contentKey:0,nativeSelection:{}},_this.ref=react.createRef(),_this.setRef=function(el){_this.ref.current=el,_this.props.editor.el=el},_this.handlers=EVENT_HANDLERS.reduce((function(obj,handler){return obj[handler]=function(event){return _this.onEvent(handler,event)},obj}),{}),_this.updateSelection=function(){var editor=_this.props.editor,selection=editor.value.selection,isBackward$$1=selection.isBackward,window=get_window_default()(_this.ref.current),native=window.getSelection(),activeElement=window.document.activeElement;if(debug$2.update.enabled&&debug$2.update("updateSelection",{selection:selection.toJSON()}),native){var rangeCount=native.rangeCount,anchorNode=native.anchorNode,updated=!1;selection.isBlurred&&activeElement===_this.ref.current&&(_this.ref.current.blur(),updated=!0);var selectionsEqual=!0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=["anchorNode","anchorOffset","focusNode","focusOffset","isCollapsed","rangeCount","type"][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var prop=_step.value;_this.tmp.nativeSelection[prop]!==native[prop]&&(selectionsEqual=!1)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(selection.isUnset&&rangeCount&&_this.isInEditor(anchorNode)&&selectionsEqual&&(removeAllRanges(native),updated=!0),selection.isFocused&&activeElement!==_this.ref.current&&(_this.ref.current.focus({preventScroll:!0}),updated=!0),selection.isFocused&&selection.isSet){var current=!!native.rangeCount&&native.getRangeAt(0),range=editor.findDOMRange(selection);if(!range)return void tiny_warning_esm(!1,"Unable to find a native DOM range from the current selection.");var startContainer=range.startContainer,startOffset=range.startOffset,endContainer=range.endContainer,endOffset=range.endOffset;if(current&&(startContainer===current.startContainer&&startOffset===current.startOffset&&endContainer===current.endContainer&&endOffset===current.endOffset||startContainer===current.endContainer&&startOffset===current.endOffset&&endContainer===current.startContainer&&endOffset===current.startOffset))return;updated=!0,_this.tmp.isUpdatingSelection=!0,removeAllRanges(native),native.setBaseAndExtent?isBackward$$1?native.setBaseAndExtent(range.endContainer,range.endOffset,range.startContainer,range.startOffset):native.setBaseAndExtent(range.startContainer,range.startOffset,range.endContainer,range.endOffset):native.addRange(range),!0===editor.userActionPerformed()&&scrollToSelection(native),setTimeout((function(){IS_FIREFOX&&_this.ref.current&&_this.ref.current.focus(),_this.tmp.isUpdatingSelection=!1,debug$2.update("updateSelection:setTimeout",{anchorOffset:window.getSelection().anchorOffset})}))}updated&&(debug$2.enabled||debug$2.update.enabled)&&(debug$2("updateSelection",{selection:selection,native:native,activeElement:activeElement}),debug$2.update("updateSelection:applied",{selection:selection.toJSON(),native:{anchorOffset:native.anchorOffset,focusOffset:native.focusOffset}}))}},_this.isInEditor=function(target){var el=void 0;try{if(8===target.nodeType)return!1;el=3===target.nodeType?target.parentNode:target}catch(err){if(IS_FIREFOX&&FIREFOX_NODE_TYPE_ACCESS_ERROR.test(err.message))return!1;throw err}return el.isContentEditable&&(el===_this.ref.current||el.closest(SELECTORS.EDITOR)===_this.ref.current)},_this.onNativeSelectionChange=throttle_default()((function(event){if(!_this.props.readOnly){var window=get_window_default()(event.target),activeElement=window.document.activeElement,native=window.getSelection();debug$2.update("onNativeSelectionChange",{anchorOffset:native.anchorOffset}),activeElement===_this.ref.current&&(_this.tmp.nativeSelection={anchorNode:native.anchorNode,anchorOffset:native.anchorOffset,focusNode:native.focusNode,focusOffset:native.focusOffset,isCollapsed:native.isCollapsed,rangeCount:native.rangeCount,type:native.type},_this.props.onEvent("onSelect",event))}}),100),possibleConstructorReturn(_this,_temp)}return inherits(Content,_React$Component),createClass(Content,[{key:"componentDidCatch",value:function componentDidCatch(error,info){debug$2("componentDidCatch",{error:error,info:info}),this.setState({})}},{key:"componentDidMount",value:function componentDidMount(){get_window_default()(this.ref.current).document.addEventListener("selectionchange",this.onNativeSelectionChange),HAS_INPUT_EVENTS_LEVEL_2&&this.ref.current.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection(),this.props.onEvent("onComponentDidMount")}},{key:"componentWillUnmount",value:function componentWillUnmount(){var window=get_window_default()(this.ref.current);window&&window.document.removeEventListener("selectionchange",this.onNativeSelectionChange),HAS_INPUT_EVENTS_LEVEL_2&&this.ref.current.removeEventListener("beforeinput",this.handlers.onBeforeInput),this.props.onEvent("onComponentWillUnmount")}},{key:"componentDidUpdate",value:function componentDidUpdate(){debug$2.update("componentDidUpdate"),this.updateSelection(),this.props.editor.clearUserActionPerformed(),this.props.onEvent("onComponentDidUpdate")}},{key:"onEvent",value:function onEvent(handler,event){debug$2("onEvent",handler);var nativeEvent=event.nativeEvent||event,isUndoRedo="keydown"===event.type&&(slate_hotkeys_es.isUndo(nativeEvent)||slate_hotkeys_es.isRedo(nativeEvent));if(!this.tmp.isUpdatingSelection&&!isUndoRedo||"onSelect"!==handler&&"onBlur"!==handler&&"onFocus"!==handler){if(!IS_ANDROID&&"onSelect"===handler){var editor=this.props.editor,selection=editor.value.selection,domSelection=get_window_default()(event.target).getSelection(),range=editor.findRange(domSelection);if(range&&range.equals(selection.toRange()))return void this.updateSelection()}if("onDragEnd"===handler||"onDragEnter"===handler||"onDragExit"===handler||"onDragLeave"===handler||"onDragOver"===handler||"onDragStart"===handler||"onDrop"===handler)if(event.target.closest(SELECTORS.EDITOR)!==this.ref.current)return;("onBeforeInput"!==handler&&"onBlur"!==handler&&"onCompositionEnd"!==handler&&"onCompositionStart"!==handler&&"onCopy"!==handler&&"onCut"!==handler&&"onFocus"!==handler&&"onInput"!==handler&&"onKeyDown"!==handler&&"onKeyUp"!==handler&&"onPaste"!==handler&&"onSelect"!==handler||this.isInEditor(event.target))&&this.props.onEvent(handler,event)}}},{key:"render",value:function render(){var _data,props=this.props,handlers=this.handlers,id=props.id,className=props.className,readOnly=props.readOnly,editor=props.editor,tabIndex=props.tabIndex,role=props.role,tagName=props.tagName,spellCheck=props.spellCheck,value=editor.value,Container=tagName,document=value.document,selection=value.selection,style=slate_react_es_extends({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},readOnly?{}:{WebkitUserModify:"read-write-plaintext-only"},props.style);debug$2("render",{props:props}),debug$2.update("render",this.tmp.contentKey,document.text),this.props.onEvent("onRender");var data=(defineProperty(_data={},DATA_ATTRS.EDITOR,!0),defineProperty(_data,DATA_ATTRS.KEY,document.key),_data),domProps=omit_default()(this.props,Object.keys(Content.propTypes));return react.createElement(Container,slate_react_es_extends({},domProps,{key:this.tmp.contentKey},handlers,data,{ref:this.setRef,contentEditable:!readOnly||null,suppressContentEditableWarning:!0,id:id,className:className,autoCorrect:props.autoCorrect?"on":"off",spellCheck:spellCheck,style:style,role:readOnly?null:role||"textbox",tabIndex:tabIndex,"data-gramm":!!domProps["data-gramm"]&&void 0}),react.createElement(Node$1,{annotations:value.annotations,block:null,decorations:(0,immutable_es.List)(),editor:editor,node:document,parent:null,readOnly:readOnly,selection:selection,ref:this.tmp.nodeRef}))}}]),Content}(react.Component);Content.propTypes={autoCorrect:prop_types_default().bool.isRequired,className:prop_types_default().string,contentKey:prop_types_default().number,editor:prop_types_default().object.isRequired,id:prop_types_default().string,onEvent:prop_types_default().func.isRequired,readOnly:prop_types_default().bool.isRequired,role:prop_types_default().string,spellCheck:prop_types_default().bool.isRequired,style:prop_types_default().object,tabIndex:prop_types_default().number,tagName:prop_types_default().string},Content.defaultProps={style:{},tagName:"div"};var PROPS=[].concat(slate_react_es_toConsumableArray(EVENT_HANDLERS),["commands","decorateNode","queries","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark","schema"]);function QueriesPlugin(){return{queries:{findDOMNode:function findDOMNode(editor,path){path=slate_es.PW.create(path);var content=editor.tmp.contentRef.current;if(!content)return null;if(!path.size)return content.ref.current||null;var el=function search(instance,p){if(!instance)return null;if(!p.size)return instance.ref?instance.ref.current||null:instance||null;var index=p.first(),rest=p.rest();return search(instance.tmp.nodeRefs[index],rest)}(content.tmp.nodeRef.current,path);return el},findDOMPoint:function findDOMPoint(editor,point){var el=editor.findDOMNode(point.path),start=0;if(!el)return null;var texts=Array.from(el.querySelectorAll(SELECTORS.STRING+", "+SELECTORS.ZERO_WIDTH)),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=texts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var text=_step.value,node=text.childNodes[0],domLength=node.textContent.length,slateLength=domLength;text.hasAttribute(DATA_ATTRS.LENGTH)&&(slateLength=parseInt(text.getAttribute(DATA_ATTRS.LENGTH),10));var end=start+slateLength;if(point.offset<=end)return{node:node,offset:Math.min(domLength,Math.max(0,point.offset-start))};start=end}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null},findDOMRange:function findDOMRange(editor,range){var anchor=range.anchor,focus=range.focus,isBackward$$1=range.isBackward,isCollapsed=range.isCollapsed,domAnchor=editor.findDOMPoint(anchor),domFocus=isCollapsed?domAnchor:editor.findDOMPoint(focus);if(!domAnchor||!domFocus)return null;var r=get_window_default()(domAnchor.node).document.createRange(),start=isBackward$$1?domFocus:domAnchor,end=isBackward$$1?domAnchor:domFocus;return r.setStart(start.node,start.offset),r.setEnd(end.node,end.offset),r},findEventRange:function findEventRange(editor,event){event.nativeEvent&&(event=event.nativeEvent);var _event=event,x=_event.clientX,y=_event.clientY,target=_event.target;if(null==x||null==y)return null;var document=editor.value.document,path=editor.findPath(event.target);if(!path)return null;var node=document.getNode(path);if(editor.isVoid(node)){var rect=target.getBoundingClientRect(),isPrevious="inline"===node.object?x-rect.left<rect.left+rect.width-x:y-rect.top<rect.top+rect.height-y,_range=document.createRange(),move=isPrevious?"moveToEndOfNode":"moveToStartOfNode",entry=document[isPrevious?"getPreviousText":"getNextText"](path);return entry?_range[move](entry):null}var window=get_window_default()(target),native=void 0;if(window.document.caretRangeFromPoint)native=window.document.caretRangeFromPoint(x,y);else if(window.document.caretPositionFromPoint){var position=window.document.caretPositionFromPoint(x,y);(native=window.document.createRange()).setStart(position.offsetNode,position.offset),native.setEnd(position.offsetNode,position.offset)}else if(window.document.body.createTextRange){native=window.document.body.createTextRange();try{native.moveToPoint(x,y)}catch(error){return null}}return editor.findRange(native)},findNode:function findNode(editor,element){var path=editor.findPath(element);return path?editor.value.document.getNode(path):null},findPath:function findPath(editor,element){var content=editor.tmp.contentRef.current,nodeElement=element;if(nodeElement.hasAttribute(DATA_ATTRS.KEY)||(nodeElement=nodeElement.closest(SELECTORS.KEY)),!nodeElement||!nodeElement.getAttribute(DATA_ATTRS.KEY))return null;if(nodeElement===content.ref.current)return slate_es.PW.create([]);var path=function search(instance,p){if(nodeElement===instance)return p;if(!instance.ref)return null;if(nodeElement===instance.ref.current)return p;if(!instance.tmp)return null;var nodeRefs=instance.tmp.nodeRefs,keys=Object.keys(nodeRefs),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=keys[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var i=_step2.value,ref=nodeRefs[i],n=parseInt(i,10),_path=search(ref,[].concat(slate_react_es_toConsumableArray(p),[n]));if(_path)return _path}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return null}(content.tmp.nodeRef.current,[]);return path?slate_es.PW.create(path):null},findPoint:function findPoint(editor,nativeNode,nativeOffset){var _normalizeNodeAndOffs=function normalizeNodeAndOffset(node,offset){if(1===node.nodeType&&node.childNodes.length){var isLast=offset===node.childNodes.length,direction=isLast?"backward":"forward";for(node=getEditableChild(node,isLast?offset-1:offset,direction);1===node.nodeType&&node.childNodes.length;){node=getEditableChild(node,isLast?node.childNodes.length-1:0,direction)}offset=isLast?node.textContent.length:0}return{node:node,offset:offset}}(nativeNode,nativeOffset),nearestNode=_normalizeNodeAndOffs.node,nearestOffset=_normalizeNodeAndOffs.offset,window=get_window_default()(nativeNode),parentNode=nearestNode.parentNode,leafNode=parentNode.closest(SELECTORS.LEAF),textNode=void 0,offset=void 0,node=void 0;if(leafNode){textNode=leafNode.closest(SELECTORS.TEXT);var range=window.document.createRange();range.setStart(textNode,0),range.setEnd(nearestNode,nearestOffset);var contents=range.cloneContents(),zeroWidths=contents.querySelectorAll(SELECTORS.ZERO_WIDTH);Array.from(zeroWidths).forEach((function(el){el.parentNode.removeChild(el)})),offset=contents.textContent.length,node=textNode}else{var voidNode=parentNode.closest(SELECTORS.VOID);if(!voidNode)return null;if(!(leafNode=voidNode.querySelector(SELECTORS.LEAF)))return null;textNode=leafNode.closest(SELECTORS.TEXT),offset=(node=leafNode).textContent.length}offset===node.textContent.length&&parentNode.hasAttribute(DATA_ATTRS.ZERO_WIDTH)&&offset--;var path=editor.findPath(textNode);return path?editor.value.document.createPoint({path:path,offset:offset}):null},findRange:function findRange(editor,domRange){var el=domRange.anchorNode||domRange.startContainer;if(!el)return null;var window=get_window_default()(el);(domRange instanceof window.Range||window.StaticRange&&domRange instanceof window.StaticRange)&&(domRange={anchorNode:domRange.startContainer,anchorOffset:domRange.startOffset,focusNode:domRange.endContainer,focusOffset:domRange.endOffset});var _domRange=domRange,anchorNode=_domRange.anchorNode,anchorOffset=_domRange.anchorOffset,focusNode=_domRange.focusNode,focusOffset=_domRange.focusOffset,isCollapsed=_domRange.isCollapsed,value=editor.value,anchor=editor.findPoint(anchorNode,anchorOffset),focus=isCollapsed?anchor:editor.findPoint(focusNode,focusOffset);return anchor&&focus?value.document.createRange({anchor:anchor,focus:focus}):null},findSelection:function findSelection(editor,domSelection){var value=editor.value,document=value.document;if(!domSelection.rangeCount)return null;var range=editor.findRange(domSelection);if(!range)return null;var _range2=range,anchor=_range2.anchor,focus=_range2.focus,anchorText=document.getNode(anchor.path),focusText=document.getNode(focus.path),anchorInline=document.getClosestInline(anchor.path),focusInline=document.getClosestInline(focus.path),focusBlock=document.getClosestBlock(focus.path),anchorBlock=document.getClosestBlock(anchor.path);if(anchorBlock&&!editor.isVoid(anchorBlock)&&0===anchor.offset&&focusBlock&&editor.isVoid(focusBlock)&&0!==focus.offset&&(range=range.setFocus(focus.setOffset(0))),anchorInline&&!editor.isVoid(anchorInline)&&anchor.offset===anchorText.text.length){var block=document.getClosestBlock(anchor.path),depth=document.getDepth(block.key),relativePath=slate_es.PW.drop(anchor.path,depth),_block$texts=block.texts({path:relativePath}),next=slate_react_es_slicedToArray(_block$texts,1)[0];if(next){var nextPath=slate_react_es_slicedToArray(next,2)[1],absolutePath=anchor.path.slice(0,depth).concat(nextPath);range=range.moveAnchorTo(absolutePath,0)}}if(focusInline&&!editor.isVoid(focusInline)&&focus.offset===focusText.text.length){var _block=document.getClosestBlock(focus.path),_depth=document.getDepth(_block.key),_relativePath=slate_es.PW.drop(focus.path,_depth),_block$texts3=_block.texts({path:_relativePath}),_next2=slate_react_es_slicedToArray(_block$texts3,1)[0];if(_next2){var _nextPath=slate_react_es_slicedToArray(_next2,2)[1],_absolutePath=focus.path.slice(0,_depth).concat(_nextPath);range=range.moveFocusTo(_absolutePath,0)}}var selection=document.createSelection(range);return selection=(selection=selection.setIsFocused(!0)).set("marks",value.selection.marks)}}}}function getEditableChild(parent,index,direction){for(var childNodes=parent.childNodes,child=childNodes[index],i=index,triedForward=!1,triedBackward=!1;(8===child.nodeType||1===child.nodeType&&0===child.childNodes.length||1===child.nodeType&&"false"===child.getAttribute("contenteditable"))&&(!triedForward||!triedBackward);)i>=childNodes.length?(triedForward=!0,i=index-1,direction="backward"):i<0?(triedBackward=!0,i=index+1,direction="forward"):(child=childNodes[i],"forward"===direction&&i++,"backward"===direction&&i--);return child||null}function getDiffOffsets(prev,next){if(prev===next)return null;var start=function getDiffStart(prev,next){for(var length=Math.min(prev.length,next.length),i=0;i<length;i++)if(prev.charAt(i)!==next.charAt(i))return i;return prev.length!==next.length?length:null}(prev,next),end=function getDiffEnd(prev,next,max){for(var prevLength=prev.length,nextLength=next.length,length=Math.min(prevLength,nextLength,max),i=0;i<length;i++)if(prev.charAt(prevLength-i-1)!==next.charAt(nextLength-i-1))return i;return prev.length!==next.length?length:null}(prev,next,Math.min(prev.length-start,next.length-start));return{start:start,end:end,total:start+end}}function sliceText(text,offsets){return text.slice(offsets.start,text.length-offsets.end)}var debug$3=browser_default()("slate:composition-manager"),ZERO_WIDTH_SPACE=String.fromCharCode(65279),flushControlled=react_dom.unstable_flushControlled;function renderSync(editor,fn){flushControlled((function(){fn(),editor.controller.flush()}))}function fixTextAndOffset(prevText){for(var isLastNode=arguments.length>2&&void 0!==arguments[2]&&arguments[2],nextOffset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,nextText=prevText,index=0;-1!==index&&-1!==(index=nextText.indexOf(ZERO_WIDTH_SPACE,index));)nextOffset>index&&nextOffset--,nextText=""+nextText.slice(0,index)+nextText.slice(index+1);var lastChar=nextText.charAt(nextText.length-1);isLastNode&&"\n"===lastChar&&(nextText=nextText.slice(0,-1));var maxOffset=nextText.length;return nextOffset>maxOffset&&(nextOffset=maxOffset),{text:nextText,offset:nextOffset}}function CompositionManager(editor){var observer=new window.MutationObserver((function flush(mutations){var _bufferedMutations;debug$3("flush"),(_bufferedMutations=bufferedMutations).push.apply(_bufferedMutations,slate_react_es_toConsumableArray(mutations)),startAction()})),win=null,last={rootEl:null,diff:null,range:null,domNode:null};function clearAction(){debug$3("clearAction"),last.diff=null,last.domNode=null}function applyDiff(){debug$3("applyDiff");var diff$$1=last.diff;if(null!=diff$$1){debug$3("applyDiff:run");var document=editor.value.document,entire=editor.value.selection.moveAnchorTo(diff$$1.path,diff$$1.start).moveFocusTo(diff$$1.path,diff$$1.end);entire=document.resolveRange(entire),editor.insertTextAtRange(entire,diff$$1.insertText)}}function splitBlock(){debug$3("splitBlock"),renderSync(editor,(function(){applyDiff(),last.range?editor.select(last.range):debug$3("splitBlock:NO-SELECTION"),editor.splitBlock().focus().restoreDOM(),clearAction()}))}var onSelectTimeoutId=null,bufferedMutations=[],startActionFrameId=null,isFlushing=!1;function startAction(){onSelectTimeoutId&&(window.cancelAnimationFrame(onSelectTimeoutId),onSelectTimeoutId=null),isFlushing=!0,startActionFrameId&&window.cancelAnimationFrame(startActionFrameId),startActionFrameId=window.requestAnimationFrame((function(){bufferedMutations.length>0&&function flushAction(mutations){if(debug$3("flushAction",mutations.length,mutations),last.range&&!last.range.isCollapsed)return void renderSync(editor,(function(){editor.select(last.range).deleteBackward().focus().restoreDOM()}));if(mutations.length>1){if(mutations.find((function(m){if("childList"!==m.type)return!1;if(0===m.addedNodes.length)return!1;var addedNode=m.addedNodes[0];if(addedNode.nodeType===window.Node.TEXT_NODE&&"\n"===addedNode.textContent)return!0;if(addedNode.nodeType!==window.Node.ELEMENT_NODE)return!1;var key=addedNode.dataset.key;return null!=key&&!!editor.value.document.getClosestBlock(key)})))return void splitBlock()}var firstMutation=mutations[0];"characterData"===firstMutation.type?function resolveDOMNode(domNode){debug$3("resolveDOMNode");var document=editor.value.document,key=domNode.closest("[data-key]").dataset.key,path=document.getPath(key),block=document.getClosestBlock(key),node=document.getDescendant(key),prevText=node.text,isLastNode=block.nodes.last()===node,nextText=fixTextAndOffset(domNode.textContent,0,isLastNode).text;if(nextText===prevText)return void(last.diff=null);var diff$$1=function diff(prev,next){var offsets=getDiffOffsets(prev,next);if(null==offsets)return null;var insertText=sliceText(next,offsets),removeText=sliceText(prev,offsets);return{start:offsets.start,end:prev.length-offsets.end,cursor:offsets.start+insertText.length,insertText:insertText,removeText:removeText}}(prevText,nextText);last.diff={path:path,start:diff$$1.start,end:diff$$1.end,insertText:diff$$1.insertText},debug$3("resolveDOMNode:diff",last.diff)}(firstMutation.target.parentNode):"childList"===firstMutation.type&&(firstMutation.removedNodes.length>0?1===mutations.length?function removeNode(domNode){if(debug$3("removeNode"),domNode.nodeType!==window.Node.ELEMENT_NODE)return;var value=editor.value,document=value.document,selection=value.selection,node=editor.findNode(domNode),nodeSelection=document.resolveRange(selection.moveToRangeOfNode(node));renderSync(editor,(function(){editor.select(nodeSelection).delete().restoreDOM()}))}(firstMutation.removedNodes[0]):function mergeBlock(){debug$3("mergeBlock"),win.requestAnimationFrame((function(){renderSync(editor,(function(){applyDiff(),editor.select(last.range).deleteBackward().focus().restoreDOM(),clearAction()}))}))}():firstMutation.addedNodes.length>0&&splitBlock())}(bufferedMutations),startActionFrameId=null,bufferedMutations=[],isFlushing=!1}))}return{clearDiff:function clearDiff(){debug$3("clearDIff"),last.diff=null},connect:function connect(){debug$3("connect",{rootEl:rootEl});var rootEl=editor.findDOMNode([]);last.rootEl!==rootEl&&(debug$3("connect:run"),win=get_window_default()(rootEl),observer.observe(rootEl,{childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0}))},disconnect:function disconnect(){debug$3("disconnect"),observer.disconnect(),last.rootEl=null},onKeyDown:startAction,onCompositionStart:function onCompositionStart(){debug$3("onCompositionStart")},onCompositionEnd:function onCompositionEnd(){debug$3("onCompositionEnd"),window.setTimeout((function(){last.diff&&(debug$3("onCompositionEnd:applyDiff"),renderSync(editor,(function(){applyDiff();var domRange=win.getSelection().getRangeAt(0),fix=fixTextAndOffset(domRange.startContainer.textContent,domRange.startOffset),range=editor.findRange({anchorNode:domRange.startContainer,anchorOffset:0,focusNode:domRange.startContainer,focusOffset:0,isCollapsed:!0}).moveTo(fix.offset);editor.select(range).focus().restoreDOM()}))),clearAction()}),20)},onSelect:function onSelect(event){debug$3("onSelect:try"),event=event.nativeEvent?event.nativeEvent:event,window.cancelAnimationFrame(onSelectTimeoutId),onSelectTimeoutId=null,isFlushing||(onSelectTimeoutId=window.requestAnimationFrame((function(){debug$3("onSelect:save-selection");var selection,domSelection=get_window_default()(event.target).getSelection(),range=editor.findRange(domSelection),anchorFix=fixTextAndOffset(domSelection.anchorNode.textContent,domSelection.anchorOffset),focusFix=fixTextAndOffset(domSelection.focusNode.textContent,domSelection.focusOffset);range.anchor.offset!==anchorFix.offset&&(range=range.set("anchor",range.anchor.set("offset",anchorFix.offset))),range.focus.offset!==focusFix.offset&&(range=range.set("focus",range.focus.set("offset",focusFix.offset))),debug$3("onSelect:save-data",{domSelection:(selection=domSelection,{anchorNode:selection.anchorNode,anchorOffset:selection.anchorOffset,focusNode:selection.focusNode,focusOffset:selection.focusOffset}),range:range.toJS()}),domSelection.isCollapsed&&last.node!==domSelection.anchorNode&&null!=last.diff&&(debug$3("onSelect:applyDiff",last.diff),applyDiff(),editor.select(range),clearAction()),last.range=range,last.node=domSelection.anchorNode})))}}}function AndroidPlugin(_ref){var observer=new CompositionManager(_ref.editor);return{onComponentDidMount:function onComponentDidMount(){observer.connect()},onComponentDidUpdate:function onComponentDidUpdate(){observer.connect()},onComponentWillUnmount:function onComponentWillUnmount(){observer.disconnect()},onCompositionEnd:function onCompositionEnd(){observer.onCompositionEnd()},onCompositionStart:function onCompositionStart(){observer.onCompositionStart()},onRender:function onRender(){observer.disconnect(),observer.clearDiff()},onSelect:function onSelect(event){!function fixSelectionInZeroWidthBlock(window){var domSelection=window.getSelection(),anchorNode=domSelection.anchorNode;if(null!=anchorNode){var dataset=anchorNode.parentElement.dataset;if(dataset&&"n"===dataset.slateZeroWidth&&1===anchorNode.textContent.length&&0!==domSelection.anchorOffset){var range=window.document.createRange();range.setStart(anchorNode,0),range.setEnd(anchorNode,0),domSelection.removeAllRanges(),domSelection.addRange(range)}}}(get_window_default()(event.target)),observer.onSelect(event)}}}function NoopPlugin(){var plugin={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EVENT_HANDLERS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){plugin[_step.value]=function(event,editor,next){}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return plugin}var TRANSFER_TYPES={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},FRAGMENT=TRANSFER_TYPES.FRAGMENT,HTML=TRANSFER_TYPES.HTML,TEXT=TRANSFER_TYPES.TEXT;function cloneFragment(event,editor){var callback=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};(0,tiny_invariant.A)(!slate_es.WT.isValue(editor),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var window=get_window_default()(event.target),native=window.getSelection(),value=editor.value,document=value.document,fragment=value.fragment,selection=value.selection,start=selection.start,end=selection.end,startVoid=document.getClosestVoid(start.path,editor),endVoid=document.getClosestVoid(end.path,editor);if(!native.isCollapsed||startVoid){var encoded=slate_base64_serializer_es.serializeNode(fragment),range=native.getRangeAt(0),contents=range.cloneContents(),attach=contents.childNodes[0];if(contents.childNodes.forEach((function(node){node.textContent&&""!==node.textContent.trim()&&(attach=node)})),endVoid){var r=range.cloneRange(),path=document.getPath(endVoid.key);if(path){var node=editor.findDOMNode(path);r.setEndAfter(node),contents=r.cloneContents()}}if(startVoid&&(attach=contents.childNodes[0].childNodes[1].firstChild),[].slice.call(contents.querySelectorAll(SELECTORS.ZERO_WIDTH)).forEach((function(zw){var isNewline="n"===zw.getAttribute(DATA_ATTRS.ZERO_WIDTH);zw.textContent=isNewline?"\n":""})),3===attach.nodeType){var span=window.document.createElement("span");span.style.whiteSpace="pre",span.appendChild(attach),contents.appendChild(span),attach=span}attach.setAttribute(DATA_ATTRS.FRAGMENT,encoded);var valFromSelection=slate_es.WT.create({document:fragment}),plainText=slate_plain_serializer_es.A.serialize(valFromSelection),div=window.document.createElement("div");if(div.appendChild(contents),event.clipboardData&&event.clipboardData.setData&&!IS_IE)return event.preventDefault(),event.clipboardData.setData(TEXT,plainText),event.clipboardData.setData(FRAGMENT,encoded),event.clipboardData.setData(HTML,div.innerHTML),void callback();var editorEl=event.target.closest(SELECTORS.EDITOR);div.setAttribute("contenteditable",!0),div.style.position="absolute",div.style.left="-9999px",editorEl.appendChild(div),native.selectAllChildren(div),window.requestAnimationFrame((function(){editorEl.removeChild(div),removeAllRanges(native),native.addRange(range),callback()}))}}var FRAGMENT$1=TRANSFER_TYPES.FRAGMENT,HTML$1=TRANSFER_TYPES.HTML,NODE=TRANSFER_TYPES.NODE,RICH=TRANSFER_TYPES.RICH,TEXT$1=TRANSFER_TYPES.TEXT,FRAGMENT_MATCHER=/ data-slate-fragment="([^\s"]+)"/;function getEventTransfer(event){!IS_IE&&event.nativeEvent&&(event=event.nativeEvent);var transfer=event.dataTransfer||event.clipboardData,fragment=getType(transfer,FRAGMENT$1),node=getType(transfer,NODE),html=getType(transfer,HTML$1),rich=getType(transfer,RICH),text=getType(transfer,TEXT$1),files=void 0;if(!fragment&&html&&~html.indexOf(" "+DATA_ATTRS.FRAGMENT+'="')){var matches=FRAGMENT_MATCHER.exec(html),_matches=slate_react_es_slicedToArray(matches,2),encoded=(_matches[0],_matches[1]);encoded&&(fragment=encoded)}if(text){var embeddedTypes=function getEmbeddedTypes(text){var prefix="SLATE-DATA-EMBED::";if(text.substring(0,prefix.length)!==prefix)return{TEXT:text};try{return JSON.parse(text.substring(prefix.length))}catch(err){throw new Error("Unable to parse custom Slate drag event data.")}}(text);embeddedTypes[FRAGMENT$1]&&(fragment=embeddedTypes[FRAGMENT$1]),embeddedTypes[NODE]&&(node=embeddedTypes[NODE]),embeddedTypes[TEXT$1]&&(text=embeddedTypes[TEXT$1])}fragment&&(fragment=slate_base64_serializer_es.deserializeNode(fragment)),node&&(node=slate_base64_serializer_es.deserializeNode(node));try{transfer.items&&transfer.items.length?files=Array.from(transfer.items).map((function(item){return"file"===item.kind?item.getAsFile():null})).filter((function(exists){return exists})):transfer.files&&transfer.files.length&&(files=Array.from(transfer.files))}catch(err){transfer.files&&transfer.files.length&&(files=Array.from(transfer.files))}var data={files:files,fragment:fragment,html:html,node:node,rich:rich,text:text};return data.type=function getTransferType(data){return data.fragment?"fragment":data.node?"node":data.rich&&data.html?"html":data.rich&&data.text?"text":data.files&&data.files.length?"files":data.html?"html":data.text?"text":"unknown"}(data),data}function getType(transfer,type){return transfer.types&&transfer.types.length?-1!==Array.from(transfer.types).indexOf(type)&&transfer.getData(type)||null:type===TEXT$1&&transfer.getData("Text")||null}var TEXT$2=TRANSFER_TYPES.TEXT;function setEventTransfer(event,type,content){var mime=TRANSFER_TYPES[type.toUpperCase()];if(!mime)throw new Error('Cannot set unknown transfer type "'+mime+'".');event.nativeEvent&&(event=event.nativeEvent);var transfer=event.dataTransfer||event.clipboardData;try{transfer.setData(mime,content),transfer.setData("text",transfer.getData("text"))}catch(err){var prefix="SLATE-DATA-EMBED::",text=transfer.getData(TEXT$2),obj={};if(text.substring(0,18)===prefix)try{obj=JSON.parse(text.substring(18))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else obj[TEXT$2]=text;obj[mime]=content;var string=""+prefix+JSON.stringify(obj);transfer.setData(TEXT$2,string)}}var debug$4=browser_default()("slate:after");var debug$5=browser_default()("slate:before");function DOMPlugin(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$plugins=options.plugins,plugins=void 0===_options$plugins?[]:_options$plugins,beforePlugin=function BeforePlugin(){var activeElement=null,compositionCount=0,isComposing=!1,isCopying=!1,isDragging=!1,isUserActionPerformed=!1;return{onBeforeInput:function onBeforeInput(event,editor,next){var isSynthetic=!!event.nativeEvent;editor.readOnly||(isUserActionPerformed=!0,isSynthetic&&HAS_INPUT_EVENTS_LEVEL_2||(debug$5("onBeforeInput",{event:event}),next()))},onBlur:function onBlur(event,editor,next){if(!isCopying&&!editor.readOnly){var relatedTarget=event.relatedTarget,target=event.target,window=get_window_default()(target);if(activeElement!==window.document.activeElement){if(relatedTarget){var el=editor.findDOMNode([]);if(relatedTarget===el)return;if(relatedTarget.hasAttribute(DATA_ATTRS.SPACER))return;var node=editor.findNode(relatedTarget);if(el.contains(relatedTarget)&&node&&!editor.isVoid(node))return}debug$5("onBlur",{event:event}),next()}}},onClick:function onClick(event,editor,next){debug$5("onClick",{event:event}),isUserActionPerformed=!0,next()},onCompositionEnd:function onCompositionEnd(event,editor,next){var n=compositionCount;isUserActionPerformed=!0,window.requestAnimationFrame((function(){compositionCount>n||(isComposing=!1)})),debug$5("onCompositionEnd",{event:event}),next()},onCompositionStart:function onCompositionStart(event,editor,next){isComposing=!0,compositionCount++;var selection=editor.value.selection;isUserActionPerformed=!0,selection.isCollapsed||editor.delete(),debug$5("onCompositionStart",{event:event}),next()},onCopy:function onCopy(event,editor,next){var window=get_window_default()(event.target);isCopying=!0,window.requestAnimationFrame((function(){return isCopying=!1})),debug$5("onCopy",{event:event}),next()},onCut:function onCut(event,editor,next){if(!editor.readOnly){var window=get_window_default()(event.target);isCopying=!0,window.requestAnimationFrame((function(){return isCopying=!1})),debug$5("onCut",{event:event}),next()}},onDragEnd:function onDragEnd(event,editor,next){isDragging=!1,debug$5("onDragEnd",{event:event}),next()},onDragEnter:function onDragEnter(event,editor,next){debug$5("onDragEnter",{event:event}),next()},onDragExit:function onDragExit(event,editor,next){debug$5("onDragExit",{event:event}),next()},onDragLeave:function onDragLeave(event,editor,next){debug$5("onDragLeave",{event:event}),next()},onDragOver:function onDragOver(event,editor,next){var node=editor.findNode(event.target);node&&!editor.isVoid(node)||event.preventDefault(),IS_IE&&event.preventDefault(),isDragging||(isDragging=!0,IS_IE||(event.nativeEvent.dataTransfer.dropEffect="move")),debug$5("onDragOver",{event:event}),next()},onDragStart:function onDragStart(event,editor,next){isDragging=!0,debug$5("onDragStart",{event:event}),next()},onDrop:function onDrop(event,editor,next){editor.readOnly||(isUserActionPerformed=!0,event.preventDefault(),debug$5("onDrop",{event:event}),next())},onFocus:function onFocus(event,editor,next){if(!isCopying&&!editor.readOnly){var el=editor.findDOMNode([]),window=get_window_default()(event.target);activeElement=window.document.activeElement,IS_FIREFOX&&event.target!==el?el.focus():(debug$5("onFocus",{event:event}),next())}},onInput:function onInput(event,editor,next){isComposing||editor.value.selection.isBlurred||(isUserActionPerformed=!0,debug$5("onInput",{event:event}),next())},onKeyDown:function onKeyDown(event,editor,next){editor.readOnly||(isComposing?slate_hotkeys_es.isCompose(event)&&event.preventDefault():(!IS_IOS&&(slate_hotkeys_es.isBold(event)||slate_hotkeys_es.isDeleteBackward(event)||slate_hotkeys_es.isDeleteForward(event)||slate_hotkeys_es.isDeleteLineBackward(event)||slate_hotkeys_es.isDeleteLineForward(event)||slate_hotkeys_es.isDeleteWordBackward(event)||slate_hotkeys_es.isDeleteWordForward(event)||slate_hotkeys_es.isItalic(event)||slate_hotkeys_es.isRedo(event)||slate_hotkeys_es.isSplitBlock(event)||slate_hotkeys_es.isTransposeCharacter(event)||slate_hotkeys_es.isUndo(event))&&event.preventDefault(),isUserActionPerformed=!0,debug$5("onKeyDown",{event:event}),next()))},onPaste:function onPaste(event,editor,next){editor.readOnly||(isUserActionPerformed=!0,event.preventDefault(),debug$5("onPaste",{event:event}),next())},onSelect:function onSelect(event,editor,next){if(!isCopying&&!isComposing&&!editor.readOnly){var window=get_window_default()(event.target);activeElement=window.document.activeElement,isUserActionPerformed=!0,debug$5("onSelect",{event:event}),next()}},queries:{userActionPerformed:function userActionPerformed(){return isUserActionPerformed}},commands:{clearUserActionPerformed:function clearUserActionPerformed(){return isUserActionPerformed=!1,null}}}}(),afterPlugin=function AfterPlugin(){var isDraggingInternally=null,isMouseDown=!1;return{onBeforeInput:function onBeforeInput(event,editor,next){var value=editor.value;if(event.nativeEvent)return event.preventDefault(),editor.insertText(event.data),next();var _event$getTargetRange=event.getTargetRanges(),targetRange=slate_react_es_slicedToArray(_event$getTargetRange,1)[0];if(!targetRange)return next();debug$4("onBeforeInput",{event:event}),event.preventDefault();var document=value.document,selection=value.selection,range=editor.findRange(targetRange);switch(event.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":editor.deleteAtRange(range);break;case"deleteWordBackward":editor.deleteWordBackwardAtRange(range);break;case"deleteWordForward":editor.deleteWordForwardAtRange(range);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":editor.deleteLineBackwardAtRange(range);break;case"deleteSoftLineForward":case"deleteHardLineForward":editor.deleteLineForwardAtRange(range);break;case"insertLineBreak":case"insertParagraph":document.hasVoidParent(selection.start.path,editor)?editor.moveToStartOfNextText():editor.splitBlockAtRange(range);break;case"insertFromYank":case"insertReplacementText":case"insertText":var text=null==event.data?event.dataTransfer.getData("text/plain"):event.data;if(null==text)break;editor.insertTextAtRange(range,text,selection.marks),selection.marks&&value.document!==editor.value.document&&editor.select({marks:null})}next()},onBlur:function onBlur(event,editor,next){debug$4("onBlur",{event:event}),editor.blur(),next()},onClick:function onClick(event,editor,next){if(editor.readOnly)return next();var document=editor.value.document,path=editor.findPath(event.target);if(!path)return next();debug$4("onClick",{event:event});var node=document.getNode(path),ancestors=document.getAncestors(path);node&&(editor.isVoid(node)||ancestors.some((function(a){return editor.isVoid(a)})))&&editor.focus().moveToEndOfNode(node),next()},onCopy:function onCopy(event,editor,next){debug$4("onCopy",{event:event}),cloneFragment(event,editor),next()},onCut:function onCut(event,editor,next){debug$4("onCut",{event:event}),cloneFragment(event,editor,(function(){var value=editor.value,document=value.document,selection=value.selection,end=selection.end,voidPath=void 0;if(selection.isCollapsed){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=document.ancestors(end.path)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=slate_react_es_slicedToArray(_ref,2),node=_ref2[0],path=_ref2[1];if(editor.isVoid(node)){voidPath=path;break}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}voidPath?editor.removeNodeByKey(voidPath):editor.delete()})),next()},onDragEnd:function onDragEnd(event,editor,next){debug$4("onDragEnd",{event:event}),isDraggingInternally=null,next()},onDragStart:function onDragStart(event,editor,next){debug$4("onDragStart",{event:event}),isDraggingInternally=!0;var value=editor.value,document=value.document,path=editor.findPath(event.target),node=document.getNode(path),ancestors=document.getAncestors(path),isVoid=node&&(editor.isVoid(node)||ancestors.some((function(a){return editor.isVoid(a)}))),selectionIncludesNode=value.blocks.some((function(block){return block===node}));isVoid&&!selectionIncludesNode&&editor.moveToRangeOfNode(node);var fragment=editor.value.fragment;setEventTransfer(event,"fragment",slate_base64_serializer_es.serializeNode(fragment)),next()},onDrop:function onDrop(event,editor,next){var value=editor.value,document=value.document,selection=value.selection,window=get_window_default()(event.target),target=editor.findEventRange(event);if(!target)return next();debug$4("onDrop",{event:event});var transfer=getEventTransfer(event),type=transfer.type,fragment=transfer.fragment,text=transfer.text;editor.focus();var el=editor.findDOMNode(target.focus.path);el&&el.dispatchEvent(new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0}));var draggedRange=selection;if(editor.select(target),isDraggingInternally&&editor.deleteAtRange(draggedRange),"text"===type||"html"===type){var anchor=target.anchor,hasVoidParent=document.hasVoidParent(anchor.path,editor);if(hasVoidParent){for(var p=anchor.path,n=document.getNode(anchor.path);hasVoidParent;){var _document$texts=document.texts({path:p}),nxt=slate_react_es_slicedToArray(_document$texts,1)[0];if(!nxt)break;var _nxt=slate_react_es_slicedToArray(nxt,2);n=_nxt[0],p=_nxt[1],hasVoidParent=document.hasVoidParent(p,editor)}n&&editor.moveToStartOfNode(n)}text&&text.split("\n").forEach((function(line,i){i>0&&editor.splitBlock(),editor.insertText(line)}))}"fragment"===type&&editor.insertFragment(fragment),next()},onFocus:function onFocus(event,editor,next){debug$4("onFocus",{event:event}),!isMouseDown||IS_IE||IS_EDGE?editor.focus():editor.deselect().focus(),next()},onInput:function onInput(event,editor,next){debug$4("onInput");var domSelection=get_window_default()(event.target).getSelection(),selection=editor.findSelection(domSelection);selection?editor.select(selection):editor.blur();var anchorNode=domSelection.anchorNode;editor.reconcileDOMNode(anchorNode),next()},onKeyDown:function onKeyDown(event,editor,next){debug$4("onKeyDown",{event:event});var value=editor.value,document=value.document,selection=value.selection,start=selection.start,hasVoidParent=document.hasVoidParent(start.path,editor);if(slate_hotkeys_es.isSplitBlock(event)&&!IS_IOS)return hasVoidParent?editor.moveToStartOfNextText():editor.splitBlock();if(slate_hotkeys_es.isDeleteBackward(event)&&!IS_IOS)return editor.deleteCharBackward();if(slate_hotkeys_es.isDeleteForward(event)&&!IS_IOS)return editor.deleteCharForward();if(slate_hotkeys_es.isDeleteLineBackward(event))return editor.deleteLineBackward();if(slate_hotkeys_es.isDeleteLineForward(event))return editor.deleteLineForward();if(slate_hotkeys_es.isDeleteWordBackward(event))return editor.deleteWordBackward();if(slate_hotkeys_es.isDeleteWordForward(event))return editor.deleteWordForward();if(slate_hotkeys_es.isRedo(event))return editor.redo();if(slate_hotkeys_es.isUndo(event))return editor.undo();if(slate_hotkeys_es.isMoveLineBackward(event))return event.preventDefault(),editor.moveToStartOfBlock();if(slate_hotkeys_es.isMoveLineForward(event))return event.preventDefault(),editor.moveToEndOfBlock();if(slate_hotkeys_es.isExtendLineBackward(event))return event.preventDefault(),editor.moveFocusToStartOfBlock();if(slate_hotkeys_es.isExtendLineForward(event))return event.preventDefault(),editor.moveFocusToEndOfBlock();if(slate_hotkeys_es.isMoveBackward(event))return event.preventDefault(),selection.isCollapsed?editor.moveBackward():editor.moveToStart();if(slate_hotkeys_es.isMoveForward(event))return event.preventDefault(),selection.isCollapsed?editor.moveForward():editor.moveToEnd();if(slate_hotkeys_es.isMoveWordBackward(event))return event.preventDefault(),editor.moveWordBackward();if(slate_hotkeys_es.isMoveWordForward(event))return event.preventDefault(),editor.moveWordForward();if(slate_hotkeys_es.isExtendBackward(event)){var startText=document.getNode(start.path),_document$texts3=document.texts({path:start.path,direction:"backward"}),prevEntry=slate_react_es_slicedToArray(_document$texts3,1)[0],isPrevInVoid=!1;if(prevEntry){var prevPath=slate_react_es_slicedToArray(prevEntry,2)[1];isPrevInVoid=document.hasVoidParent(prevPath,editor)}if(hasVoidParent||isPrevInVoid||""===startText.text)return event.preventDefault(),editor.moveFocusBackward()}if(slate_hotkeys_es.isExtendForward(event)){var _startText=document.getNode(start.path),_document$texts5=document.texts({path:start.path}),nextEntry=slate_react_es_slicedToArray(_document$texts5,1)[0],isNextInVoid=!1;if(nextEntry){var nextPath=slate_react_es_slicedToArray(nextEntry,2)[1];isNextInVoid=document.hasVoidParent(nextPath,editor)}if(hasVoidParent||isNextInVoid||""===_startText.text)return event.preventDefault(),editor.moveFocusForward()}next()},onMouseDown:function onMouseDown(event,editor,next){debug$4("onMouseDown",{event:event}),isMouseDown=!0,next()},onMouseUp:function onMouseUp(event,editor,next){debug$4("onMouseUp",{event:event}),isMouseDown=!1,next()},onPaste:function onPaste(event,editor,next){debug$4("onPaste",{event:event});var value=editor.value,transfer=getEventTransfer(event),type=transfer.type,fragment=transfer.fragment,text=transfer.text;if("fragment"===type&&editor.insertFragment(fragment),"text"===type||"html"===type){if(!text)return next();var document=value.document,selection=value.selection,startBlock=value.startBlock;if(editor.isVoid(startBlock))return next();var defaultBlock=startBlock,defaultMarks=document.getInsertMarksAtRange(selection),frag=slate_plain_serializer_es.A.deserialize(text,{defaultBlock:defaultBlock,defaultMarks:defaultMarks}).document;editor.insertFragment(frag)}next()},onSelect:function onSelect(event,editor,next){debug$4("onSelect",{event:event});var domSelection=get_window_default()(event.target).getSelection(),selection=editor.findSelection(domSelection);selection?editor.select(selection):editor.blur(),isMouseDown=!1,next()}}}(),androidPlugins=IS_ANDROID?[AndroidPlugin(options),NoopPlugin()]:[];return[].concat(androidPlugins,[beforePlugin],slate_react_es_toConsumableArray(plugins),[afterPlugin])}function stringifyEvent(event){var e=event.nativeEvent||event;switch(e.type){case"keydown":return e.type+" "+JSON.stringify(e.key);case"input":case"beforeinput":case"textInput":return e.type+":"+e.inputType+" "+JSON.stringify(e.data);default:return e.type}}var debug$6=browser_default()("slate:events");var INTERVAL=2e3,debug$7=browser_default()("slate:batch-events");var debug$8=browser_default()("slate:mutations"),MUTATION_PROPERTIES=["type","oldValue","target","addedNodes","removedNodes","attributeName","attributeNamespace","nextSibling","previousSibling"];function normalizeNode(node){if(node.nodeType===window.Node.TEXT_NODE)return node.textContent;if(node.nodeType===window.Node.ELEMENT_NODE){var outerHTML=node.outerHTML,innerHTML=node.innerHTML;return null==outerHTML?JSON.stringify(node.textContent):outerHTML.slice(0,outerHTML.indexOf(innerHTML))}return"Node(type="+node.nodeType}function ReactPlugin(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$placeholder=options.placeholder,placeholder=void 0===_options$placeholder?"":_options$placeholder,debugEventsPlugin=browser_default().enabled("slate:events")?function DebugEventsPlugin(){var plugin={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EVENT_HANDLERS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)plugin[_step.value]=function(event,editor,next){var s=stringifyEvent(event);debug$6(s),next()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return plugin}():null,debugBatchEventsPlugin=browser_default().enabled("slate:batch-events")?function DebugBatchEventsPlugin(){var startDate=null,timeoutId=null,events=[];function dumpEvents(){debug$7("\n"+events.join("\n")),events.length=0}function pushEvent(event){0===events.length&&(startDate=new Date);var s=stringifyEvent(event),now=new Date;events.push("- "+(now-startDate)+" - "+s),clearTimeout(timeoutId),timeoutId=setTimeout(dumpEvents,INTERVAL)}var plugin={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=EVENT_HANDLERS[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)plugin[_step.value]=function(event,editor,next){pushEvent(event),next()}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return plugin}():null,debugMutationsPlugin=browser_default().enabled("slate:mutations")?function DebugMutationsPlugin(){var observer=new window.MutationObserver((function(mutations){var array=Array.from(mutations).map((function(mutationRecord){var object={};return MUTATION_PROPERTIES.forEach((function(key){var value=mutationRecord[key];if(null!=value)if(value instanceof window.NodeList){if(0===value.length)return;object[key]=Array.from(value).map(normalizeNode).join(", ")}else value instanceof window.Node&&(value=normalizeNode(value)),object[key]=value})),object}));debug$8.apply(void 0,[array.length+" Mutations"].concat(slate_react_es_toConsumableArray(array)))})),prevRootEl=null;function start(event,editor,next){var rootEl=editor.findDOMNode([]);if(rootEl===prevRootEl)return next();debug$8("start"),observer.observe(rootEl,{childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0}),prevRootEl=rootEl,next()}return{onComponentDidMount:start,onComponentDidUpdate:start,onComponentWillUnmount:function stop(event,editor,next){debug$8("stop"),observer.disconnect(),prevRootEl=null,next()}}}():null,renderingPlugin=function Rendering(){return{decorateNode:function decorateNode(){return[]},renderAnnotation:function renderAnnotation(_ref){var attributes=_ref.attributes,children=_ref.children;return react.createElement("span",attributes,children)},renderBlock:function renderBlock(_ref2){var attributes=_ref2.attributes,children=_ref2.children;return react.createElement("div",slate_react_es_extends({},attributes,{style:{position:"relative"}}),children)},renderDecoration:function renderDecoration(_ref3){var attributes=_ref3.attributes,children=_ref3.children;return react.createElement("span",attributes,children)},renderDocument:function renderDocument(_ref4){return _ref4.children},renderEditor:function renderEditor(_ref5){return _ref5.children},renderInline:function renderInline(_ref6){var attributes=_ref6.attributes,children=_ref6.children;return react.createElement("span",slate_react_es_extends({},attributes,{style:{position:"relative"}}),children)},renderMark:function renderMark(_ref7){var attributes=_ref7.attributes,children=_ref7.children;return react.createElement("span",attributes,children)}}}(),commandsPlugin={commands:{reconcileNode:function reconcileNode(editor,node){var value=editor.value,document=value.document,selection=value.selection,path=document.getPath(node.key),domElement=editor.findDOMNode(path),block=document.getClosestBlock(path),text=node.text,domText=domElement.textContent,isLastNode=block.nodes.last()===node,lastChar=domText.charAt(domText.length-1);if(isLastNode&&"\n"===lastChar&&(domText=domText.slice(0,-1)),text!==domText){var entire=selection.moveAnchorTo(path,0).moveFocusTo(path,text.length);entire=document.resolveRange(entire),editor.insertTextAtRange(entire,domText,node.marks)}},reconcileDOMNode:function reconcileDOMNode(editor,domNode){var domElement=domNode.parentElement.closest("[data-key]"),node=editor.findNode(domElement);editor.reconcileNode(node)}}},queriesPlugin=QueriesPlugin(),editorPropsPlugin=function EditorPropsPlugin(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return PROPS.reduce((function(memo,prop){return prop in options&&(memo[prop]=options[prop]),memo}),{})}(options);return[debugEventsPlugin,debugBatchEventsPlugin,debugMutationsPlugin,editorPropsPlugin,DOMPlugin(options),{commands:{restoreDOM:function restoreDOM(editor){var tmp=editor.tmp.contentRef.current.tmp;tmp.contentKey=tmp.contentKey+1}}},IS_ANDROID?null:slate_react_placeholder_es({placeholder:placeholder,when:function when(editor,node){return"document"===node.object&&""===node.text&&1===node.nodes.size&&1===Array.from(node.texts()).length}}),renderingPlugin,commandsPlugin,queriesPlugin]}var debug$9=browser_default()("slate:editor"),Editor$1=function(_React$Component){function Editor$$1(){var _ref,_temp,_this;classCallCheck(this,Editor$$1);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=possibleConstructorReturn(this,(_ref=Editor$$1.__proto__||Object.getPrototypeOf(Editor$$1)).call.apply(_ref,[this].concat(args))),_this.state={value:_this.props.defaultValue,contentKey:0},_this.tmp={mounted:!1,change:null,resolves:0,updates:0,contentRef:react.createRef()},_this.resolveController=memoize_one_esm((function(){var TheReactPlugin=arguments[5];tiny_warning_esm(_this.tmp.resolves<5||_this.tmp.resolves!==_this.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),_this.tmp.resolves++;var react=TheReactPlugin(slate_react_es_extends({},_this.props,{editor:_this,value:_this.props.value||_this.state.value}));_this.controller=new slate_es.KE({plugins:[react],onChange:function onChange(change){_this.tmp.mounted?_this.handleChange(change):_this.tmp.change=change}},{controller:_this,construct:!1}),_this.controller.run("onConstruct")})),possibleConstructorReturn(_this,_temp)}return inherits(Editor$$1,_React$Component),createClass(Editor$$1,[{key:"componentDidMount",value:function componentDidMount(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.focus(),this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.tmp.updates++,this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.tmp.mounted=!1}},{key:"render",value:function render(){var _this2=this;debug$9("render",this);var _props=this.props,commands=_props.commands,placeholder=_props.placeholder,plugins=_props.plugins,queries=_props.queries,schema=_props.schema;this.resolveController(plugins,schema,commands,queries,placeholder,ReactPlugin);var _props2=this.props,options=_props2.options,readOnly=_props2.readOnly,valueFromProps=_props2.value,valueFromState=this.state.value,value=valueFromProps||valueFromState,contentKey=this.state.contentKey;this.controller.setReadOnly(readOnly),this.controller.setValue(value,options);var _props3=this.props,autoCorrect=_props3.autoCorrect,className=_props3.className,id=_props3.id,role=_props3.role,spellCheck=_props3.spellCheck,tabIndex=_props3.tabIndex,style=_props3.style,tagName=_props3.tagName,domProps=omit_default()(this.props,Object.keys(Editor$$1.propTypes)),children=react.createElement(Content,slate_react_es_extends({},domProps,{ref:this.tmp.contentRef,autoCorrect:autoCorrect,className:className,contentKey:contentKey,editor:this,id:id,onEvent:function onEvent(handler,event){return _this2.run(handler,event)},readOnly:readOnly,role:role,spellCheck:spellCheck,style:style,tabIndex:tabIndex,tagName:tagName}));return this.controller.run("renderEditor",slate_react_es_extends({},this.props,{editor:this,children:children}))}},{key:"handleChange",value:function handleChange(change){var onChange=this.props.onChange;this.state.value&&this.setState({value:change.value}),onChange(change)}},{key:"applyOperation",value:function applyOperation(){var _controller;return(_controller=this.controller).applyOperation.apply(_controller,arguments)}},{key:"command",value:function command(){var _controller2;return(_controller2=this.controller).command.apply(_controller2,arguments)}},{key:"hasCommand",value:function hasCommand(){var _controller3;return(_controller3=this.controller).hasCommand.apply(_controller3,arguments)}},{key:"hasQuery",value:function hasQuery(){var _controller4;return(_controller4=this.controller).hasQuery.apply(_controller4,arguments)}},{key:"normalize",value:function normalize(){var _controller5;return(_controller5=this.controller).normalize.apply(_controller5,arguments)}},{key:"query",value:function query(){var _controller6;return(_controller6=this.controller).query.apply(_controller6,arguments)}},{key:"registerCommand",value:function registerCommand(){var _controller7;return(_controller7=this.controller).registerCommand.apply(_controller7,arguments)}},{key:"registerQuery",value:function registerQuery(){var _controller8;return(_controller8=this.controller).registerQuery.apply(_controller8,arguments)}},{key:"run",value:function run(){var _controller9;return(_controller9=this.controller).run.apply(_controller9,arguments)}},{key:"withoutNormalizing",value:function withoutNormalizing(){var _controller10;return(_controller10=this.controller).withoutNormalizing.apply(_controller10,arguments)}},{key:"call",value:function call(){var _controller11;return(_controller11=this.controller).call.apply(_controller11,arguments)}},{key:"change",value:function change(){var _controller12;return(_controller12=this.controller).change.apply(_controller12,arguments)}},{key:"onChange",value:function onChange(){var _controller13;return(_controller13=this.controller).onChange.apply(_controller13,arguments)}},{key:"applyOperations",value:function applyOperations(){var _controller14;return(_controller14=this.controller).applyOperations.apply(_controller14,arguments)}},{key:"setOperationFlag",value:function setOperationFlag(){var _controller15;return(_controller15=this.controller).setOperationFlag.apply(_controller15,arguments)}},{key:"getFlag",value:function getFlag(){var _controller16;return(_controller16=this.controller).getFlag.apply(_controller16,arguments)}},{key:"unsetOperationFlag",value:function unsetOperationFlag(){var _controller17;return(_controller17=this.controller).unsetOperationFlag.apply(_controller17,arguments)}},{key:"withoutNormalization",value:function withoutNormalization(){var _controller18;return(_controller18=this.controller).withoutNormalization.apply(_controller18,arguments)}},{key:"operations",get:function get$$1(){return this.controller.operations}},{key:"readOnly",get:function get$$1(){return this.controller.readOnly}},{key:"value",get:function get$$1(){return this.controller.value}},{key:"editor",get:function get$$1(){return this.controller.editor}},{key:"schema",get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),Editor$$1}(react.Component);Editor$1.propTypes=slate_react_es_extends({autoCorrect:prop_types_default().bool,autoFocus:prop_types_default().bool,className:prop_types_default().string,defaultValue:slate_prop_types_es.value,id:prop_types_default().string,onChange:prop_types_default().func,options:prop_types_default().object,placeholder:prop_types_default().any,plugins:prop_types_default().array,readOnly:prop_types_default().bool,role:prop_types_default().string,schema:prop_types_default().object,spellCheck:prop_types_default().bool,style:prop_types_default().object,tabIndex:prop_types_default().number,value:slate_prop_types_es.value},EVENT_HANDLERS.reduce((function(obj,handler){return obj[handler]=prop_types_default().func,obj}),{}),["decorateNode","renderAnnotation","renderBlock","renderDecoration","renderDocument","renderEditor","renderInline","renderMark"].reduce((function(obj,handler){return obj[handler]=prop_types_default().func,obj}),{})),Editor$1.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function onChange(){},options:{},placeholder:"",plugins:[],readOnly:!1,schema:{},spellCheck:!0}},"../../node_modules/slate-react/node_modules/debug/src/browser.js":function(module,exports,__webpack_require__){"use strict";var process=__webpack_require__("../../node_modules/process/browser.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}exports.log=function log(){var _console;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(_console=console).log.apply(_console,arguments)},exports.formatArgs=function formatArgs(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,(function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))})),args.splice(lastC,0,c)},exports.save=function save(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}},exports.load=function load(){var r;try{r=exports.storage.getItem("debug")}catch(error){}!r&&void 0!==process&&"env"in process&&(r=process.env.DEBUG);return r},exports.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage=function localstorage(){try{return localStorage}catch(error){}}(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=__webpack_require__("../../node_modules/slate-react/node_modules/debug/src/common.js")(exports),module.exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}},"../../node_modules/slate-react/node_modules/debug/src/common.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=function setup(env){function selectColor(namespace){for(var hash=0,i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]}function createDebug(namespace){var prevTime;function debug(){if(debug.enabled){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var self=debug,curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(function(match,format){if("%%"===match)return match;index++;var formatter=createDebug.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match})),createDebug.formatArgs.call(self,args),(self.log||createDebug.log).apply(self,args)}}return debug.namespace=namespace,debug.enabled=createDebug.enabled(namespace),debug.useColors=createDebug.useColors(),debug.color=selectColor(namespace),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var index=createDebug.instances.indexOf(this);return-1!==index&&(createDebug.instances.splice(index,1),!0)}function extend(namespace,delimiter){return createDebug(this.namespace+(void 0===delimiter?":":delimiter)+namespace)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(val){if(val instanceof Error)return val.stack||val.message;return val},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(namespaces){var i;createDebug.save(namespaces),createDebug.names=[],createDebug.skips=[];var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")));for(i=0;i<createDebug.instances.length;i++){var instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace)}},createDebug.enabled=function enabled(name){if("*"===name[name.length-1])return!0;var i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1},createDebug.humanize=__webpack_require__("../../node_modules/ms/index.js"),Object.keys(env).forEach((function(key){createDebug[key]=env[key]})),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},"../../node_modules/slate/lib/slate.es.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{eB:function(){return Block},lY:function(){return Change},B_:function(){return Data},yo:function(){return Document},KE:function(){return Editor},cV:function(){return Inline},hK:function(){return Leaf$1},CU:function(){return Mark},bP:function(){return Node},PW:function(){return PathUtils},Q6:function(){return Range},LN:function(){return Selection},EY:function(){return Text},WT:function(){return Value}});var immutable_es=__webpack_require__("../../node_modules/immutable/dist/immutable.es.js"),is_plain_object=__webpack_require__("../../node_modules/slate/node_modules/is-plain-object/index.js"),is_plain_object_default=__webpack_require__.n(is_plain_object),tiny_warning_esm=function(condition,message){0},tiny_invariant=__webpack_require__("../../node_modules/tiny-invariant/dist/esm/tiny-invariant.js"),browser=__webpack_require__("../../node_modules/slate/node_modules/debug/src/browser.js"),browser_default=__webpack_require__.n(browser),esrever=__webpack_require__("../../node_modules/esrever/esrever.js"),pick=__webpack_require__("../../node_modules/lodash/pick.js"),pick_default=__webpack_require__.n(pick),omit=__webpack_require__("../../node_modules/lodash/omit.js"),omit_default=__webpack_require__.n(omit),direction=__webpack_require__("../../node_modules/direction/index.js"),direction_default=__webpack_require__.n(direction),n=void 0,generate=void 0;function resetGenerator(){n=0,generate=function generate(){return""+n++}}resetGenerator();var KeyUtils={create:function create(key){if(null==key)return generate();if("string"==typeof key)return key;throw new Error("Keys must be strings, but you passed: "+key)},setGenerator:function setGenerator(func){generate=func},resetGenerator:resetGenerator},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj},_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},objectWithoutProperties=function(obj,keys){var target={};for(var i in obj)keys.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},slicedToArray=function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},toConsumableArray=function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)};function compare(path,target){for(var m=min(path,target),i=0;i<m;i++){var pv=path.get(i),tv=target.get(i);if(pv<tv)return-1;if(pv>tv)return 1}return path.size===target.size?0:null}function create$1(attrs){if(null==attrs)return null;if(immutable_es.List.isList(attrs))return attrs;if(Array.isArray(attrs))return(0,immutable_es.List)(attrs);throw new Error("Paths can only be created from arrays or lists, but you passed: "+attrs)}function crop(a,b){var size=arguments.length>2&&void 0!==arguments[2]?arguments[2]:min(a,b);return[a.slice(0,size),b.slice(0,size)]}function decrement(path){return increment(path,0-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),arguments.length>2&&void 0!==arguments[2]?arguments[2]:path.size-1)}function increment(path){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,index=arguments.length>2&&void 0!==arguments[2]?arguments[2]:path.size-1,newValue=path.get(index)+n;return path.set(index,newValue)}function isAbove(path,target){var _crop=crop(path,target),_crop2=slicedToArray(_crop,2),p=_crop2[0],t=_crop2[1];return path.size<target.size&&0===compare(p,t)}function isEqual(path,target){return path.equals(target)}function isYounger(path,target){var index=path.size-1,_crop9=crop(path,target,index),_crop10=slicedToArray(_crop9,2),p=_crop10[0],t=_crop10[1],pl=path.get(index),tl=target.get(index);return isEqual(p,t)&&pl<tl}function min(a,b){return Math.min(a.size,b.size)}var PathUtils={compare:compare,create:create$1,crop:crop,decrement:decrement,getAncestors:function getAncestors(path){return(0,immutable_es.List)().withMutations((function(list){for(var i=0;i<path.size;i++)list.push(path.slice(0,i))}))},increment:increment,isAbove:isAbove,isAfter:function isAfter(path,target){var _crop3=crop(path,target),_crop4=slicedToArray(_crop3,2);return 1===compare(_crop4[0],_crop4[1])},isBefore:function isBefore(path,target){var _crop5=crop(path,target),_crop6=slicedToArray(_crop5,2);return-1===compare(_crop6[0],_crop6[1])},isEqual:isEqual,isOlder:function isOlder(path,target){var index=path.size-1,_crop7=crop(path,target,index),_crop8=slicedToArray(_crop7,2),p=_crop8[0],t=_crop8[1],pl=path.get(index),tl=target.get(index);return isEqual(p,t)&&pl>tl},isPath:function isPath(any){return(immutable_es.List.isList(any)||Array.isArray(any))&&any.every((function(n){return"number"==typeof n}))},isSibling:function isSibling(path,target){if(path.size!==target.size)return!1;var p=path.butLast(),t=target.butLast();return p.equals(t)},isYounger:isYounger,lift:function lift(path){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return path.slice(0,-1*n)},drop:function drop(path){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return path.slice(n)},max:function max(a,b){return Math.max(a.size,b.size)},min:min,relate:function relate(a,b){for(var array=[],i=0;i<a.size&&i<b.size;i++){var av=a.get(i);if(av!==b.get(i))break;array.push(av)}return create$1(array)},transform:function transform(path,operation){var type=operation.type,position=operation.position,p=operation.path;if("add_mark"===type||"insert_text"===type||"remove_mark"===type||"remove_text"===type||"set_mark"===type||"set_node"===type||"set_selection"===type||"set_value"===type||"add_annotation"===type||"remove_annotation"===type||"set_annotation"===type||0===path.size)return(0,immutable_es.List)([path]);var pIndex=p.size-1,pEqual=isEqual(p,path),pYounger=isYounger(p,path),pAbove=isAbove(p,path);if("insert_node"===type&&(pEqual||pYounger||pAbove)&&(path=increment(path,1,pIndex)),"remove_node"===type&&(pYounger?path=decrement(path,1,pIndex):(pEqual||pAbove)&&(path=[])),"merge_node"===type&&(pEqual||pYounger?path=decrement(path,1,pIndex):pAbove&&(path=increment(path=decrement(path,1,pIndex),position,pIndex+1))),"split_node"===type&&(pEqual?path=[path,increment(path)]:pYounger?path=increment(path,1,pIndex):pAbove&&path.get(pIndex+1)>=position&&(path=decrement(path=increment(path,1,pIndex),position,pIndex+1))),"move_node"===type){var np=operation.newPath;if(isEqual(p,np))return(0,immutable_es.List)([path]);pAbove||pEqual?path=isYounger(p,np)&&p.size<np.size?decrement(np,1,min(np,p)-1).concat(path.slice(p.size)):np.concat(path.slice(p.size)):(pYounger&&(path=decrement(path,1,pIndex)),(isYounger(np,path)||isEqual(np,path)||isAbove(np,path))&&(path=increment(path,1,np.size-1)))}var paths=Array.isArray(path)?path:[path];return(0,immutable_es.List)(paths)}},DEFAULTS={key:void 0,offset:void 0,path:void 0},Point=function(_Record){function Point(){return classCallCheck(this,Point),possibleConstructorReturn(this,(Point.__proto__||Object.getPrototypeOf(Point)).apply(this,arguments))}return inherits(Point,_Record),createClass(Point,[{key:"isAfterPoint",value:function isAfterPoint(point){return!this.isUnset&&(this.key===point.key&&this.offset>point.offset||1===PathUtils.compare(this.path,point.path))}},{key:"isAfterRange",value:function isAfterRange(range){return!this.isUnset&&this.isAfterPoint(range.end)}},{key:"isAtEndOfRange",value:function isAtEndOfRange(range){return!this.isUnset&&this.equals(range.end)}},{key:"isAtStartOfRange",value:function isAtStartOfRange(range){return!this.isUnset&&this.equals(range.start)}},{key:"isBeforePoint",value:function isBeforePoint(point){return!this.isUnset&&(this.key===point.key&&this.offset<point.offset||-1===PathUtils.compare(this.path,point.path))}},{key:"isBeforeRange",value:function isBeforeRange(range){return!this.isUnset&&this.isBeforePoint(range.start)}},{key:"isInRange",value:function isInRange(range){return!this.isUnset&&(this.equals(range.start)||this.equals(range.end)||this.isAfterPoint(range.start)&&this.isBeforePoint(range.end))}},{key:"isAtEndOfNode",value:function isAtEndOfNode(node){if(this.isUnset)return!1;var last=node.getLastText();return this.key===last.key&&this.offset===last.text.length}},{key:"isAtStartOfNode",value:function isAtStartOfNode(node){if(this.isUnset)return!1;if(0!==this.offset)return!1;var first=node.getFirstText();return this.key===first.key}},{key:"isInNode",value:function isInNode(node){return!this.isUnset&&("text"===node.object&&node.key===this.key||!!node.hasNode(this.key))}},{key:"moveBackward",value:function moveBackward(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 0===n?this:n<0?this.moveForward(-n):this.setOffset(this.offset-n)}},{key:"moveForward",value:function moveForward(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 0===n?this:n<0?this.moveBackward(-n):this.setOffset(this.offset+n)}},{key:"moveTo",value:function moveTo(path){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,key=this.key;return"number"==typeof path?(offset=path,path=this.path):"string"==typeof path?path=(key=path)===this.key?this.path:null:key=path.equals(this.path)?this.key:null,this.merge({key:key,path:path,offset:offset})}},{key:"moveToStartOfNode",value:function moveToStartOfNode(node){var first=node.getFirstText();return this.moveTo(first.key,0)}},{key:"moveToEndOfNode",value:function moveToEndOfNode(node){var last=node.getLastText();return this.moveTo(last.key,last.text.length)}},{key:"normalize",value:function normalize(node){if(null==this.key&&null==this.path)return this.setOffset(null);var key=this.key,offset=this.offset,path=this.path,target=path&&node.getNode(path);if(!target&&(target=node.getNode(key)))return this.merge({path:node.getPath(key)});if(!target){tiny_warning_esm(!1,"A point's `path` or `key` invalid and was reset!");var text=node.getFirstText();return text?this.merge({key:text.key,offset:0,path:node.getPath(text.key)}):Point.create()}if("text"!==target.object){tiny_warning_esm(!1,"A point should not reference a non-text node!");var _text=target.getTextAtOffset(offset),before=target.getOffset(_text.key);return this.merge({offset:offset-before,key:_text.key,path:node.getPath(_text.key)})}target&&path&&key&&key!==target.key&&tiny_warning_esm(!1,"A point's `key` did not match its `path`!");var point=this.merge({key:target.key,path:null==path?node.getPath(target.key):path,offset:null==offset?0:Math.min(offset,target.text.length)});if(point.offset===target.text.length){var next=node.getClosestBlock(point.path).getNextText();next&&(point=point.merge({key:next.key,path:node.getPath(next.key),offset:0}))}return point}},{key:"setKey",value:function setKey(key){return null!=key&&(key=KeyUtils.create(key)),this.set("key",key)}},{key:"setOffset",value:function setOffset(offset){return this.set("offset",offset)}},{key:"setPath",value:function setPath(path){return null!=path&&(path=PathUtils.create(path)),this.set("path",path)}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,key:this.key,offset:this.offset,path:this.path&&this.path.toArray()};return options.preserveKeys||delete object.key,object}},{key:"unset",value:function unset(){return this.merge({key:null,offset:null,path:null})}},{key:"isSet",get:function get$$1(){return null!=this.key&&null!=this.offset&&null!=this.path}},{key:"isUnset",get:function get$$1(){return!this.isSet}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Point.isPoint(attrs))return attrs;if(is_plain_object_default()(attrs))return Point.fromJSON(attrs);throw new Error("`Point.create` only accepts objects or points, but you passed it: "+attrs)}},{key:"createProperties",value:function createProperties(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Point.isPoint(a))return{key:a.key,offset:a.offset,path:a.path};if(is_plain_object_default()(a)){var p={};return"key"in a&&(p.key=a.key),"offset"in a&&(p.offset=a.offset),"path"in a&&(p.path=PathUtils.create(a.path)),"path"in a&&!("key"in a)&&(p.key=null),"key"in a&&!("path"in a)&&(p.path=null),p}throw new Error("`Point.createProperties` only accepts objects or points, but you passed it: "+a)}},{key:"fromJSON",value:function fromJSON(object){var _object$key=object.key,key=void 0===_object$key?null:_object$key,_object$offset=object.offset,offset=void 0===_object$offset?null:_object$offset,_object$path=object.path,path=void 0===_object$path?null:_object$path;return new Point({key:key,offset:offset,path:PathUtils.create(path)})}}]),Point}((0,immutable_es.Record)(DEFAULTS)),Data=function(){function Data(){classCallCheck(this,Data)}return createClass(Data,null,[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(immutable_es.Map.isMap(attrs))return attrs;if(is_plain_object_default()(attrs))return Data.fromJSON(attrs);throw new Error("`Data.create` only accepts objects or maps, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(object){return new immutable_es.Map(object)}}]),Data}();Data.fromJS=Data.fromJSON;var DEFAULTS$1={data:void 0,type:void 0},Mark=function(_Record){function Mark(){return classCallCheck(this,Mark),possibleConstructorReturn(this,(Mark.__proto__||Object.getPrototypeOf(Mark)).apply(this,arguments))}return inherits(Mark,_Record),createClass(Mark,[{key:"toJSON",value:function toJSON(){return{object:this.object,type:this.type,data:this.data.toJSON()}}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Mark.isMark(attrs))return attrs;if("string"==typeof attrs&&(attrs={type:attrs}),is_plain_object_default()(attrs))return Mark.fromJSON(attrs);throw new Error("`Mark.create` only accepts objects, strings or marks, but you passed it: "+attrs)}},{key:"createSet",value:function createSet(elements){if(immutable_es.Set.isSet(elements)||Array.isArray(elements))return new immutable_es.Set(elements.map(Mark.create));if(null==elements)return(0,immutable_es.Set)();throw new Error("`Mark.createSet` only accepts sets, arrays or null, but you passed it: "+elements)}},{key:"createProperties",value:function createProperties(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Mark.isMark(attrs))return{data:attrs.data,type:attrs.type};if("string"==typeof attrs)return{type:attrs};if(is_plain_object_default()(attrs)){var props={};return"type"in attrs&&(props.type=attrs.type),"data"in attrs&&(props.data=Data.create(attrs.data)),props}throw new Error("`Mark.createProperties` only accepts objects, strings or marks, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(object){var _object$data=object.data,data=void 0===_object$data?{}:_object$data,type=object.type;if("string"!=typeof type)throw new Error("`Mark.fromJS` requires a `type` string.");return new Mark({type:type,data:new immutable_es.Map(data)})}},{key:"isMarkSet",value:function isMarkSet(any){return immutable_es.Set.isSet(any)&&any.every((function(item){return Mark.isMark(item)}))}}]),Mark}((0,immutable_es.Record)(DEFAULTS$1)),DEFAULTS$2={type:void 0,data:void 0,anchor:void 0,focus:void 0},Decoration=function(_Record){function Decoration(){return classCallCheck(this,Decoration),possibleConstructorReturn(this,(Decoration.__proto__||Object.getPrototypeOf(Decoration)).apply(this,arguments))}return inherits(Decoration,_Record),createClass(Decoration,[{key:"setProperties",value:function setProperties(properties){return properties=Decoration.createProperties(properties),this.merge(properties)}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Decoration.isDecoration(attrs))return attrs;if(Range.isRange(attrs))return Decoration.fromJSON(Range.createProperties(attrs));if(is_plain_object_default()(attrs))return Decoration.fromJSON(attrs);throw new Error("`Decoration.create` only accepts objects or decorations, but you passed it: "+attrs)}},{key:"createList",value:function createList(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(elements)||Array.isArray(elements))return new immutable_es.List(elements.map(Decoration.create));throw new Error("`Decoration.createList` only accepts arrays or lists, but you passed it: "+elements)}},{key:"createProperties",value:function createProperties(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Decoration.isDecoration(a))return{type:a.type,data:a.data,anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus),mark:Mark.create(a.mark)};if(is_plain_object_default()(a)){var p={};return"type"in a&&(p.type=a.type),"data"in a&&(p.data=Data.create(a.data)),"anchor"in a&&(p.anchor=Point.create(a.anchor)),"focus"in a&&(p.focus=Point.create(a.focus)),p}throw new Error("`Decoration.createProperties` only accepts objects or decorations, but you passed it: "+a)}},{key:"fromJSON",value:function fromJSON(object){var anchor=object.anchor,focus=object.focus,type=object.type,data=object.data;if(object.mark&&!type&&(tiny_warning_esm(!1,"As of slate@0.47 the `decoration.mark` property has been changed to `decoration.type` and `decoration.data` directly."),type=object.mark.type,data=object.mark.data),!type)throw new Error("Decorations must be created with a `type`, but you passed: "+JSON.stringify(object));return new Decoration({type:type,data:Data.create(data||{}),anchor:Point.fromJSON(anchor||{}),focus:Point.fromJSON(focus||{})})}}]),Decoration}((0,immutable_es.Record)(DEFAULTS$2)),DEFAULTS$3={anchor:void 0,focus:void 0,isFocused:void 0,marks:void 0},Selection=function(_Record){function Selection(){return classCallCheck(this,Selection),possibleConstructorReturn(this,(Selection.__proto__||Object.getPrototypeOf(Selection)).apply(this,arguments))}return inherits(Selection,_Record),createClass(Selection,[{key:"setIsFocused",value:function setIsFocused(value){return this.set("isFocused",value)}},{key:"setMarks",value:function setMarks(marks){return this.set("marks",marks)}},{key:"setProperties",value:function setProperties(properties){var _properties=properties=Selection.createProperties(properties),anchor=_properties.anchor,focus=_properties.focus,props=objectWithoutProperties(_properties,["anchor","focus"]);return anchor&&(props.anchor=Point.create(anchor)),focus&&(props.focus=Point.create(focus)),this.merge(props)}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options),isFocused:this.isFocused,marks:null==this.marks?null:this.marks.toArray().map((function(m){return m.toJSON()}))}}},{key:"isBlurred",get:function get$$1(){return!this.isFocused}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Selection.isSelection(attrs))return attrs;if(Range.isRange(attrs))return Selection.fromJSON(Range.createProperties(attrs));if(is_plain_object_default()(attrs))return Selection.fromJSON(attrs);throw new Error("`Selection.create` only accepts objects, ranges or selections, but you passed it: "+attrs)}},{key:"createProperties",value:function createProperties(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Selection.isSelection(a))return{anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus),isFocused:a.isFocused,marks:a.marks};if(Range.isRange(a))return{anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus)};if(is_plain_object_default()(a)){var p={};return"anchor"in a&&(p.anchor=Point.create(a.anchor)),"focus"in a&&(p.focus=Point.create(a.focus)),"isFocused"in a&&(p.isFocused=a.isFocused),"marks"in a&&(p.marks=null==a.marks?null:Mark.createSet(a.marks)),p}throw new Error("`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: "+a)}},{key:"fromJSON",value:function fromJSON(object){var anchor=object.anchor,focus=object.focus,_object$isFocused=object.isFocused,isFocused=void 0!==_object$isFocused&&_object$isFocused,_object$marks=object.marks,marks=void 0===_object$marks?null:_object$marks;return new Selection({anchor:Point.fromJSON(anchor||{}),focus:Point.fromJSON(focus||{}),isFocused:isFocused,marks:null==marks?null:new immutable_es.Set(marks.map(Mark.fromJSON))})}}]),Selection}((0,immutable_es.Record)(DEFAULTS$3)),TYPES={annotation:"@@__SLATE_ANNOTATION__@@",block:"@@__SLATE_BLOCK__@@",change:"@@__SLATE_CHANGE__@@",decoration:"@@__SLATE_DECORATION__@@",document:"@@__SLATE_DOCUMENT__@@",editor:"@@__SLATE_EDITOR__@@",inline:"@@__SLATE_INLINE__@@",leaf:"@@__SLATE_LEAF__@@",mark:"@@__SLATE_MARK__@@",operation:"@@__SLATE_OPERATION__@@",point:"@@__SLATE_POINT__@@",range:"@@__SLATE_RANGE__@@",selection:"@@__SLATE_SELECTION__@@",text:"@@__SLATE_TEXT__@@",value:"@@__SLATE_VALUE__@@"};function isObject(type,value){return!(!value||!value[TYPES[type]])}var DEFAULTS$4={anchor:void 0,focus:void 0},Range=function(_Record){function Range(){return classCallCheck(this,Range),possibleConstructorReturn(this,(Range.__proto__||Object.getPrototypeOf(Range)).apply(this,arguments))}return inherits(Range,_Record),createClass(Range,[{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Range.isRange(attrs))return"range"===attrs.object?attrs:Range.fromJSON(Range.createProperties(attrs));if(is_plain_object_default()(attrs))return Range.fromJSON(attrs);throw new Error("`Range.create` only accepts objects or ranges, but you passed it: "+attrs)}},{key:"createList",value:function createList(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(elements)||Array.isArray(elements))return new immutable_es.List(elements.map(Range.create));throw new Error("`Range.createList` only accepts arrays or lists, but you passed it: "+elements)}},{key:"createProperties",value:function createProperties(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Range.isRange(a))return{anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus)};if(is_plain_object_default()(a)){var p={};return"anchor"in a&&(p.anchor=Point.create(a.anchor)),"focus"in a&&(p.focus=Point.create(a.focus)),p}throw new Error("`Range.createProperties` only accepts objects, annotations, decorations, ranges or selections, but you passed it: "+a)}},{key:"fromJSON",value:function fromJSON(object){var anchor=object.anchor,focus=object.focus;return new Range({anchor:Point.fromJSON(anchor||{}),focus:Point.fromJSON(focus||{})})}},{key:"isRange",value:function isRange(value){return isObject("range",value)||Decoration.isDecoration(value)||Selection.isSelection(value)}}]),Range}((0,immutable_es.Record)(DEFAULTS$4)),DEFAULTS$5={key:void 0,type:void 0,data:void 0,anchor:void 0,focus:void 0},Annotation=function(_Record){function Annotation(){return classCallCheck(this,Annotation),possibleConstructorReturn(this,(Annotation.__proto__||Object.getPrototypeOf(Annotation)).apply(this,arguments))}return inherits(Annotation,_Record),createClass(Annotation,[{key:"setProperties",value:function setProperties(properties){return properties=Annotation.createProperties(properties),this.merge(properties)}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,key:this.key,type:this.type,data:this.data.toJSON(),anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Annotation.isAnnotation(attrs))return attrs;if(Range.isRange(attrs))return Annotation.fromJSON(Range.createProperties(attrs));if(is_plain_object_default()(attrs))return Annotation.fromJSON(attrs);throw new Error("`Annotation.create` only accepts objects or annotations, but you passed it: "+attrs)}},{key:"createMap",value:function createMap(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.Map.isMap(elements))return elements;if(is_plain_object_default()(elements)){var obj={};for(var key in elements){var value=elements[key],annotation=Annotation.create(value);obj[key]=annotation}return(0,immutable_es.Map)(obj)}throw new Error("`Annotation.createMap` only accepts arrays or lists, but you passed it: "+elements)}},{key:"createProperties",value:function createProperties(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Annotation.isAnnotation(a))return{key:a.key,type:a.type,data:a.data,anchor:Point.createProperties(a.anchor),focus:Point.createProperties(a.focus)};if(is_plain_object_default()(a)){var p={};return"key"in a&&(p.key=a.key),"type"in a&&(p.type=a.type),"data"in a&&(p.data=Data.create(a.data)),"anchor"in a&&(p.anchor=Point.create(a.anchor)),"focus"in a&&(p.focus=Point.create(a.focus)),p}throw new Error("`Annotation.createProperties` only accepts objects or annotations, but you passed it: "+a)}},{key:"fromJSON",value:function fromJSON(object){var key=object.key,type=object.type,data=object.data,anchor=object.anchor,focus=object.focus;if(!key)throw new Error("Annotations must be created with a `key`, but you passed: "+JSON.stringify(object));if(!type)throw new Error("Annotations must be created with a `type`, but you passed: "+JSON.stringify(object));return new Annotation({key:key,type:type,data:Data.create(data||{}),anchor:Point.fromJSON(anchor||{}),focus:Point.fromJSON(focus||{})})}}]),Annotation}((0,immutable_es.Record)(DEFAULTS$5)),DEFAULTS$6={data:void 0,key:void 0,nodes:void 0},Document=function(_Record){function Document(){return classCallCheck(this,Document),possibleConstructorReturn(this,(Document.__proto__||Object.getPrototypeOf(Document)).apply(this,arguments))}return inherits(Document,_Record),createClass(Document,[{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,data:this.data.toJSON(),nodes:this.nodes.toArray().map((function(n){return n.toJSON(options)}))};return options.preserveKeys&&(object.key=this.key),object}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Document.isDocument(attrs))return attrs;if((immutable_es.List.isList(attrs)||Array.isArray(attrs))&&(attrs={nodes:attrs}),is_plain_object_default()(attrs))return Document.fromJSON(attrs);throw new Error("`Document.create` only accepts objects, arrays, lists or documents, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(object){if(Document.isDocument(object))return object;var _object$data=object.data,data=void 0===_object$data?{}:_object$data,_object$key=object.key,key=void 0===_object$key?KeyUtils.create():_object$key,_object$nodes=object.nodes,nodes=void 0===_object$nodes?[]:_object$nodes;return new Document({key:key,data:new immutable_es.Map(data),nodes:Node.createList(nodes)})}}]),Document}((0,immutable_es.Record)(DEFAULTS$6)),DEFAULTS$7={data:void 0,key:void 0,nodes:void 0,type:void 0},Inline=function(_Record){function Inline(){return classCallCheck(this,Inline),possibleConstructorReturn(this,(Inline.__proto__||Object.getPrototypeOf(Inline)).apply(this,arguments))}return inherits(Inline,_Record),createClass(Inline,[{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map((function(n){return n.toJSON(options)}))};return options.preserveKeys&&(object.key=this.key),object}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Inline.isInline(attrs))return attrs;if("string"==typeof attrs&&(attrs={type:attrs}),is_plain_object_default()(attrs))return Inline.fromJSON(attrs);throw new Error("`Inline.create` only accepts objects, strings or inlines, but you passed it: "+attrs)}},{key:"createList",value:function createList(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(elements)||Array.isArray(elements))return new immutable_es.List(elements.map(Inline.create));throw new Error("`Inline.createList` only accepts arrays or lists, but you passed it: "+elements)}},{key:"fromJSON",value:function fromJSON(object){if(Inline.isInline(object))return object;var _object$data=object.data,data=void 0===_object$data?{}:_object$data,_object$key=object.key,key=void 0===_object$key?KeyUtils.create():_object$key,_object$nodes=object.nodes,nodes=void 0===_object$nodes?[]:_object$nodes,type=object.type;if("string"!=typeof type)throw new Error("`Inline.fromJS` requires a `type` string.");return new Inline({key:key,type:type,data:new immutable_es.Map(data),nodes:Node.createList(nodes)})}},{key:"isInlineList",value:function isInlineList(any){return immutable_es.List.isList(any)&&any.every((function(item){return Inline.isInline(item)}))}}]),Inline}((0,immutable_es.Record)(DEFAULTS$7)),DEFAULTS$8={key:void 0,marks:void 0,text:void 0},Leaf=(0,immutable_es.Record)({text:void 0,marks:void 0,annotations:void 0,decorations:void 0}),Text=function(_Record){function Text(){return classCallCheck(this,Text),possibleConstructorReturn(this,(Text.__proto__||Object.getPrototypeOf(Text)).apply(this,arguments))}return inherits(Text,_Record),createClass(Text,[{key:"addMark",value:function addMark(mark){mark=Mark.create(mark);var next=this.marks.add(mark);return this.set("marks",next)}},{key:"addMarks",value:function addMarks(marks){return marks=Mark.createSet(marks),this.set("marks",this.marks.union(marks))}},{key:"getLeaves",value:function getLeaves(annotations,decorations){var leaves=[{text:this.text,marks:this.marks,annotations:[],decorations:[]}],split=function split(leaf,at){return[{text:leaf.text.slice(0,at),marks:leaf.marks,annotations:[].concat(toConsumableArray(leaf.annotations)),decorations:[].concat(toConsumableArray(leaf.decorations))},{text:leaf.text.slice(at),marks:leaf.marks,annotations:[].concat(toConsumableArray(leaf.annotations)),decorations:[].concat(toConsumableArray(leaf.decorations))}]},compile=function compile(kind){var formats="annotations"===kind?annotations.values():decorations,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=formats[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var format=_step.value,start=format.start,end=format.end,next=[],o=0,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=leaves[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var leaf=_step2.value,length=leaf.text.length,offset=o;if(o+=length,start.offset<=offset&&end.offset>=offset+length)leaf[kind].push(format),next.push(leaf);else if(start.offset>offset+length||end.offset<offset||end.offset===offset&&0!==offset)next.push(leaf);else{var middle=leaf,before=void 0,after=void 0;if(end.offset<offset+length){var _split=split(middle,end.offset-offset),_split2=slicedToArray(_split,2);middle=_split2[0],after=_split2[1]}if(start.offset>offset){var _split3=split(middle,start.offset-offset),_split4=slicedToArray(_split3,2);before=_split4[0],middle=_split4[1]}middle[kind].push(format),before&&next.push(before),next.push(middle),after&&next.push(after)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}leaves=next}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}};return compile("annotations"),compile("decorations"),leaves=leaves.map((function(leaf){return new Leaf(_extends({},leaf,{annotations:(0,immutable_es.List)(leaf.annotations),decorations:(0,immutable_es.List)(leaf.decorations)}))})),(0,immutable_es.List)(leaves)}},{key:"insertText",value:function insertText(index,string){var text=this.text,next=text.slice(0,index)+string+text.slice(index);return this.set("text",next)}},{key:"removeMark",value:function removeMark(mark){mark=Mark.create(mark);var next=this.marks.remove(mark);return this.set("marks",next)}},{key:"removeText",value:function removeText(index,length){var text=this.text,next=text.slice(0,index)+text.slice(index+length);return this.set("text",next)}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,text:this.text,marks:this.marks.toArray().map((function(m){return m.toJSON()}))};return options.preserveKeys&&(object.key=this.key),object}},{key:"setMark",value:function setMark(properties,newProperties){var marks=this.marks,mark=Mark.create(properties),newMark=mark.merge(newProperties),next=marks.remove(mark).add(newMark);return this.set("marks",next)}},{key:"splitText",value:function splitText(index){var text=this.text;return[this.set("text",text.slice(0,index)),this.set("text",text.slice(index)).regenerateKey()]}},{key:"mergeText",value:function mergeText(other){var next=this.text+other.text;return this.set("text",next)}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(Text.isText(attrs))return attrs;if("string"==typeof attrs&&(attrs={text:attrs}),is_plain_object_default()(attrs))return Text.fromJSON(attrs);throw new Error("`Text.create` only accepts objects, arrays, strings or texts, but you passed it: "+attrs)}},{key:"createList",value:function createList(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(elements)||Array.isArray(elements))return new immutable_es.List(elements.map(Text.create));throw new Error("`Text.createList` only accepts arrays or lists, but you passed it: "+elements)}},{key:"fromJSON",value:function fromJSON(object){if(Text.isText(object))return object;(0,tiny_invariant.A)(null==object.leaves,"As of slate@0.46, the `leaves` property of text nodes has been removed! Each individual leaf should be created as a text node instead.");var _object$text=object.text,text=void 0===_object$text?"":_object$text,_object$marks=object.marks,marks=void 0===_object$marks?[]:_object$marks,_object$key=object.key;return new Text({key:void 0===_object$key?KeyUtils.create():_object$key,text:text,marks:Mark.createSet(marks)})}},{key:"isTextList",value:function isTextList(any){return immutable_es.List.isList(any)&&any.every((function(item){return Text.isText(item)}))}}]),Text}((0,immutable_es.Record)(DEFAULTS$8)),Node=function(){function Node(){classCallCheck(this,Node)}return createClass(Node,null,[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Node.isNode(attrs))return attrs;if(is_plain_object_default()(attrs)){var object=attrs.object;switch(!object&&attrs.kind&&(tiny_warning_esm(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),object=attrs.kind),object){case"block":return Block.create(attrs);case"document":return Document.create(attrs);case"inline":return Inline.create(attrs);case"text":return Text.create(attrs);default:throw new Error("`Node.create` requires a `object` string.")}}throw new Error("`Node.create` only accepts objects or nodes but you passed it: "+attrs)}},{key:"createList",value:function createList(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(elements)||Array.isArray(elements)){var array=[];return elements.forEach((function(el){if(el&&"text"===el.object&&el.leaves&&Array.isArray(el.leaves)){tiny_warning_esm(!1,"As of slate@0.46, the `leaves` property of Text nodes has been removed. Instead, each text node contains a string of text and a unique set of marks and leaves are unnecessary.");var texts=Text.createList(el.leaves).toArray();array=array.concat(texts)}else{var node=Node.create(el);array.push(node)}})),(0,immutable_es.List)(array)}throw new Error("`Node.createList` only accepts lists or arrays, but you passed it: "+elements)}},{key:"createProperties",value:function createProperties(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Block.isBlock(attrs)||Inline.isInline(attrs))return{data:attrs.data,type:attrs.type};if("string"==typeof attrs)return{type:attrs};if(is_plain_object_default()(attrs)){var props={};return"type"in attrs&&(props.type=attrs.type),"data"in attrs&&(props.data=Data.create(attrs.data)),props}throw new Error("`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(value){var object=value.object;switch(!object&&value.kind&&(tiny_warning_esm(!1,"As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`."),object=value.kind),object){case"block":return Block.fromJSON(value);case"document":return Document.fromJSON(value);case"inline":return Inline.fromJSON(value);case"text":return Text.fromJSON(value);default:throw new Error("`Node.fromJSON` requires an `object` of either 'block', 'document', 'inline' or 'text', but you passed: "+value)}}},{key:"isNode",value:function isNode(any){return Block.isBlock(any)||Document.isDocument(any)||Inline.isInline(any)||Text.isText(any)}},{key:"isNodeList",value:function isNodeList(any){return immutable_es.List.isList(any)&&any.every((function(item){return Node.isNode(item)}))}}]),Node}(),DEFAULTS$9={data:void 0,key:void 0,nodes:void 0,type:void 0},Block=function(_Record){function Block(){return classCallCheck(this,Block),possibleConstructorReturn(this,(Block.__proto__||Object.getPrototypeOf(Block)).apply(this,arguments))}return inherits(Block,_Record),createClass(Block,[{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,type:this.type,data:this.data.toJSON(),nodes:this.nodes.toArray().map((function(n){return n.toJSON(options)}))};return options.preserveKeys&&(object.key=this.key),object}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Block.isBlock(attrs))return attrs;if("string"==typeof attrs&&(attrs={type:attrs}),is_plain_object_default()(attrs))return Block.fromJSON(attrs);throw new Error("`Block.create` only accepts objects, strings or blocks, but you passed it: "+attrs)}},{key:"createList",value:function createList(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(attrs)||Array.isArray(attrs))return new immutable_es.List(attrs.map(Block.create));throw new Error("`Block.createList` only accepts arrays or lists, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(object){if(Block.isBlock(object))return object;var _object$data=object.data,data=void 0===_object$data?{}:_object$data,_object$key=object.key,key=void 0===_object$key?KeyUtils.create():_object$key,_object$nodes=object.nodes,nodes=void 0===_object$nodes?[]:_object$nodes,type=object.type;if("string"!=typeof type)throw new Error("`Block.fromJSON` requires a `type` string.");return new Block({key:key,type:type,data:(0,immutable_es.Map)(data),nodes:Node.createList(nodes)})}},{key:"isBlockList",value:function isBlockList(any){return immutable_es.List.isList(any)&&any.every((function(item){return Block.isBlock(item)}))}}]),Block}((0,immutable_es.Record)(DEFAULTS$9)),DEFAULTS$10={annotations:void 0,data:void 0,document:void 0,selection:void 0},Value=function(_Record){function Value(){return classCallCheck(this,Value),possibleConstructorReturn(this,(Value.__proto__||Object.getPrototypeOf(Value)).apply(this,arguments))}return inherits(Value,_Record),createClass(Value,[{key:"addAnnotation",value:function addAnnotation(annotation){annotation=Annotation.create(annotation);var value=this,_value=value,annotations=_value.annotations,document=_value.document,key=annotation.key;return annotation=annotation.updatePoints((function(point){return point.normalize(document)})),annotations=annotations.set(key,annotation),value=value.set("annotations",annotations)}},{key:"addMark",value:function addMark(path,mark){mark=Mark.create(mark);var value=this,document=value.document;return document=document.addMark(path,mark),value=value.set("document",document)}},{key:"insertNode",value:function insertNode(path,node){var value=this,document=value.document;return document=document.insertNode(path,node),value=(value=value.set("document",document)).mapRanges((function(range){return range.updatePoints((function(point){return point.setPath(null)}))}))}},{key:"insertText",value:function insertText(path,offset,text){var value=this,document=value.document,node=document.assertNode(path);return document=document.insertText(path,offset,text),node=document.assertNode(path),value=(value=value.set("document",document)).mapPoints((function(point){return point.key===node.key&&point.offset>=offset?point.setOffset(point.offset+text.length):point}))}},{key:"mergeNode",value:function mergeNode(path){var value=this,document=value.document,newDocument=document.mergeNode(path);path=document.resolvePath(path);var withPath=PathUtils.decrement(path),one=document.getNode(withPath),two=document.getNode(path);return value=(value=value.set("document",newDocument)).mapRanges((function(range){if("text"===two.object){var max=one.text.length;range.anchor.key===two.key&&(range=range.moveAnchorTo(one.key,max+range.anchor.offset)),range.focus.key===two.key&&(range=range.moveFocusTo(one.key,max+range.focus.offset))}return range=range.updatePoints((function(point){return point.setPath(null)}))})),value}},{key:"moveNode",value:function moveNode(path,newPath){var newIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,value=this,document=value.document;return PathUtils.isEqual(path,newPath)?value:(document=document.moveNode(path,newPath,newIndex),value=(value=value.set("document",document)).mapPoints((function(point){return point.setPath(null)})))}},{key:"removeAnnotation",value:function removeAnnotation(annotation){annotation=Annotation.create(annotation);var value=this,annotations=value.annotations,key=annotation.key;return annotations=annotations.delete(key),value=value.set("annotations",annotations)}},{key:"removeMark",value:function removeMark(path,mark){mark=Mark.create(mark);var value=this,document=value.document;return document=document.removeMark(path,mark),value=value.set("document",document)}},{key:"removeNode",value:function removeNode(path){var value=this,document=value.document,node=document.assertNode(path),first="text"===node.object?node:node.getFirstText()||node,last="text"===node.object?node:node.getLastText()||node,prev=document.getPreviousText(first.key),next=document.getNextText(last.key);return document=document.removeNode(path),value=(value=value.set("document",document)).mapRanges((function(range){var _range=range,anchor=_range.anchor,focus=_range.focus;return node.hasNode(anchor.key)&&(range=prev?range.moveAnchorTo(prev.key,prev.text.length):next?range.moveAnchorTo(next.key,0):range.unset()),node.hasNode(focus.key)&&(range=prev?range.moveFocusTo(prev.key,prev.text.length):next?range.moveFocusTo(next.key,0):range.unset()),range=range.updatePoints((function(point){return point.setPath(null)}))}))}},{key:"removeText",value:function removeText(path,offset,text){var value=this,document=value.document,node=document.assertNode(path);document=document.removeText(path,offset,text),value=value.set("document",document);var length=text.length,start=offset,end=offset+length;return value=value.mapPoints((function(point){return point.key!==node.key?point:point.offset>=end?point.setOffset(point.offset-length):point.offset>start?point.setOffset(start):point}))}},{key:"setAnnotation",value:function setAnnotation(properties,newProperties){newProperties=Annotation.createProperties(newProperties);var annotation=Annotation.create(properties),next=annotation.merge(newProperties),value=this,annotations=value.annotations,key=annotation.key;return annotations=annotations.set(key,next),value=value.set("annotations",annotations)}},{key:"setNode",value:function setNode(path,properties){var value=this,document=value.document;return document=document.setNode(path,properties),value=value.set("document",document)}},{key:"setMark",value:function setMark(path,mark,properties){var value=this,document=value.document;return document=document.setMark(path,mark,properties),value=value.set("document",document)}},{key:"setProperties",value:function setProperties(properties){var value=this,document=value.document,data=properties.data,annotations=properties.annotations,props={};return data&&(props.data=data),annotations&&(props.annotations=annotations.map((function(a){return a.isSet?a:document.resolveAnnotation(a)}))),value=value.merge(props)}},{key:"setSelection",value:function setSelection(properties){var value=this,_value15=value,document=_value15.document,selection=_value15.selection,next=selection.setProperties(properties);return selection=document.resolveSelection(next),value=value.set("selection",selection)}},{key:"splitNode",value:function splitNode(path,position,properties){var value=this,document=value.document,newDocument=document.splitNode(path,position,properties),node=document.assertNode(path);return value=(value=value.set("document",newDocument)).mapRanges((function(range){var next=newDocument.getNextText(node.key),_range2=range,anchor=_range2.anchor,focus=_range2.focus;return node.key===anchor.key&&position<=anchor.offset&&(range=range.moveAnchorTo(next.key,anchor.offset-position)),node.key===focus.key&&position<=focus.offset&&(range=range.moveFocusTo(next.key,focus.offset-position)),range=range.updatePoints((function(point){return point.setPath(null)}))}))}},{key:"mapRanges",value:function mapRanges(iterator){var value=this,_value17=value,document=_value17.document,selection=_value17.selection,annotations=_value17.annotations,sel=selection.isSet?iterator(selection):selection;sel||(sel=selection.unset()),sel!==selection&&(sel=document.createSelection(sel)),value=value.set("selection",sel);var anns=annotations.map((function(annotation){var n=annotation.isSet?iterator(annotation):annotation;return n&&n!==annotation&&(n=document.createAnnotation(n)),n}));return anns=anns.filter((function(annotation){return!!annotation})),value=value.set("annotations",anns)}},{key:"mapPoints",value:function mapPoints(iterator){return this.mapRanges((function(range){return range.updatePoints(iterator)}))}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},object={object:this.object,document:this.document.toJSON(options)};return options.preserveData&&(object.data=this.data.toJSON(options)),options.preserveAnnotations&&(object.annotations=this.annotations.map((function(a){return a.toJSON(options)})).toObject()),options.preserveSelection&&(object.selection=this.selection.toJSON(options)),object}},{key:"change",value:function change(){(0,tiny_invariant.A)(!1,"As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.")}},{key:"startBlock",get:function get$$1(){return this.selection.start.key&&this.document.getClosestBlock(this.selection.start.key)}},{key:"endBlock",get:function get$$1(){return this.selection.end.key&&this.document.getClosestBlock(this.selection.end.key)}},{key:"anchorBlock",get:function get$$1(){return this.selection.anchor.key&&this.document.getClosestBlock(this.selection.anchor.key)}},{key:"focusBlock",get:function get$$1(){return this.selection.focus.key&&this.document.getClosestBlock(this.selection.focus.key)}},{key:"startInline",get:function get$$1(){return this.selection.start.key&&this.document.getClosestInline(this.selection.start.key)}},{key:"endInline",get:function get$$1(){return this.selection.end.key&&this.document.getClosestInline(this.selection.end.key)}},{key:"anchorInline",get:function get$$1(){return this.selection.anchor.key&&this.document.getClosestInline(this.selection.anchor.key)}},{key:"focusInline",get:function get$$1(){return this.selection.focus.key&&this.document.getClosestInline(this.selection.focus.key)}},{key:"startText",get:function get$$1(){return this.selection.start.key&&this.document.getDescendant(this.selection.start.key)}},{key:"endText",get:function get$$1(){return this.selection.end.key&&this.document.getDescendant(this.selection.end.key)}},{key:"anchorText",get:function get$$1(){return this.selection.anchor.key&&this.document.getDescendant(this.selection.anchor.key)}},{key:"focusText",get:function get$$1(){return this.selection.focus.key&&this.document.getDescendant(this.selection.focus.key)}},{key:"nextBlock",get:function get$$1(){return this.selection.end.key&&this.document.getNextBlock(this.selection.end.key)}},{key:"previousBlock",get:function get$$1(){return this.selection.start.key&&this.document.getPreviousBlock(this.selection.start.key)}},{key:"nextInline",get:function get$$1(){return this.selection.end.key&&this.document.getNextInline(this.selection.end.key)}},{key:"previousInline",get:function get$$1(){return this.selection.start.key&&this.document.getPreviousInline(this.selection.start.key)}},{key:"nextText",get:function get$$1(){return this.selection.end.key&&this.document.getNextText(this.selection.end.key)}},{key:"previousText",get:function get$$1(){return this.selection.start.key&&this.document.getPreviousText(this.selection.start.key)}},{key:"marks",get:function get$$1(){return this.selection.isUnset?new immutable_es.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"activeMarks",get:function get$$1(){return this.selection.isUnset?new immutable_es.Set:this.selection.marks||this.document.getActiveMarksAtRange(this.selection)}},{key:"blocks",get:function get$$1(){return this.selection.isUnset?new immutable_es.List:this.document.getLeafBlocksAtRange(this.selection)}},{key:"fragment",get:function get$$1(){return this.selection.isUnset?Document.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function get$$1(){return this.selection.isUnset?new immutable_es.List:this.document.getLeafInlinesAtRange(this.selection)}},{key:"texts",get:function get$$1(){return this.selection.isUnset?new immutable_es.List:this.document.getTextsAtRange(this.selection)}},{key:"history",get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.")}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Value.isValue(attrs))return attrs;if(is_plain_object_default()(attrs))return Value.fromJSON(attrs,options);throw new Error("`Value.create` only accepts objects or values, but you passed it: "+attrs)}},{key:"createProperties",value:function createProperties(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Value.isValue(a))return{annotations:a.annotations,data:a.data};if(is_plain_object_default()(a)){var p={};return"annotations"in a&&(p.annotations=Annotation.createMap(a.annotations)),"data"in a&&(p.data=Data.create(a.data)),p}throw new Error("`Value.createProperties` only accepts objects or values, but you passed it: "+a)}},{key:"fromJSON",value:function fromJSON(object){var _object$data=object.data,data=void 0===_object$data?{}:_object$data,_object$annotations=object.annotations,annotations=void 0===_object$annotations?{}:_object$annotations,_object$document=object.document,document=void 0===_object$document?{}:_object$document,_object$selection=object.selection,selection=void 0===_object$selection?{}:_object$selection;if(data=Data.fromJSON(data),selection=(document=Document.fromJSON(document)).createSelection(selection),annotations=Annotation.createMap(annotations),selection.isUnset){var text=document.getFirstText();text&&(selection=selection.moveToStartOfNode(text)),selection=document.createSelection(selection)}return new Value({annotations:annotations,data:data,document:document,selection:selection})}}]),Value}((0,immutable_es.Record)(DEFAULTS$10)),debug=browser_default()("slate:operation:apply");function applyOperation(value,op){var type=(op=Operation.create(op)).type;switch(debug(type,op),type){case"add_annotation":var annotation=op.annotation;return value.addAnnotation(annotation);case"add_mark":var _op3=op,path=_op3.path,mark=_op3.mark;return value.addMark(path,mark);case"insert_node":var _op4=op,_path=_op4.path,node=_op4.node;return value.insertNode(_path,node);case"insert_text":var _op5=op,_path2=_op5.path,offset=_op5.offset,text=_op5.text,marks=_op5.marks;return value.insertText(_path2,offset,text,marks);case"merge_node":var _path3=op.path;return value.mergeNode(_path3);case"move_node":var _op7=op,_path4=_op7.path,newPath=_op7.newPath;return value.moveNode(_path4,newPath);case"remove_annotation":var _annotation=op.annotation;return value.removeAnnotation(_annotation);case"remove_mark":var _op9=op,_path5=_op9.path,_mark=_op9.mark;return value.removeMark(_path5,_mark);case"remove_node":var _path6=op.path;return value.removeNode(_path6);case"remove_text":var _op11=op,_path7=_op11.path,_offset=_op11.offset,_text=_op11.text;return value.removeText(_path7,_offset,_text);case"set_annotation":var _op12=op,properties=_op12.properties,newProperties=_op12.newProperties;return value.setAnnotation(properties,newProperties);case"set_mark":var _op13=op,_path8=_op13.path,_properties=_op13.properties,_newProperties=_op13.newProperties;return value.setMark(_path8,_properties,_newProperties);case"set_node":var _op14=op,_path9=_op14.path,_newProperties2=_op14.newProperties;return value.setNode(_path9,_newProperties2);case"set_selection":var _newProperties3=op.newProperties;return value.setSelection(_newProperties3);case"set_value":var _newProperties4=op.newProperties;return value.setProperties(_newProperties4);case"split_node":var _op17=op,_path10=_op17.path,position=_op17.position,_properties2=_op17.properties;return value.splitNode(_path10,position,_properties2);default:throw new Error('Unknown operation type: "'+type+'".')}}var debug$1=browser_default()("slate:operation:invert");function invertOperation(op){var type=(op=Operation.create(op)).type;switch(debug$1(type,op),type){case"move_node":var _op2=op,newPath=_op2.newPath,path=_op2.path;if(PathUtils.isEqual(newPath,path))return op;var inversePath=PathUtils.transform(path,op).first(),inverseNewPath=PathUtils.transform(PathUtils.increment(path),op).first();return op.set("path",inversePath).set("newPath",inverseNewPath);case"merge_node":var _path=op.path,_inversePath=PathUtils.decrement(_path);return op.set("type","split_node").set("path",_inversePath);case"split_node":var _path2=op.path,_inversePath2=PathUtils.increment(_path2);return op.set("type","merge_node").set("path",_inversePath2);case"set_annotation":case"set_node":case"set_value":case"set_selection":case"set_mark":var _op5=op,properties=_op5.properties,newProperties=_op5.newProperties;return op.set("properties",newProperties).set("newProperties",properties);case"insert_node":case"insert_text":return op.set("type",type.replace("insert_","remove_"));case"remove_node":case"remove_text":return op.set("type",type.replace("remove_","insert_"));case"add_annotation":case"add_mark":return op.set("type",type.replace("add_","remove_"));case"remove_annotation":case"remove_mark":return op.set("type",type.replace("remove_","add_"));default:throw new Error('Unknown operation type: "'+type+'".')}}var OPERATION_ATTRIBUTES={add_mark:["path","mark","data"],add_annotation:["annotation","data"],insert_node:["path","node","data"],insert_text:["path","offset","text","data"],merge_node:["path","position","properties","target","data"],move_node:["path","newPath","data"],remove_annotation:["annotation","data"],remove_mark:["path","mark","data"],remove_node:["path","node","data"],remove_text:["path","offset","text","data"],set_annotation:["properties","newProperties","data"],set_mark:["path","properties","newProperties","data"],set_node:["path","properties","newProperties","data"],set_selection:["properties","newProperties","data"],set_value:["properties","newProperties","data"],split_node:["path","position","properties","target","data"]},DEFAULTS$11={annotation:void 0,data:void 0,length:void 0,mark:void 0,marks:void 0,newPath:void 0,newProperties:void 0,node:void 0,offset:void 0,path:void 0,position:void 0,properties:void 0,target:void 0,text:void 0,type:void 0},Operation=function(_Record){function Operation(){return classCallCheck(this,Operation),possibleConstructorReturn(this,(Operation.__proto__||Object.getPrototypeOf(Operation)).apply(this,arguments))}return inherits(Operation,_Record),createClass(Operation,[{key:"apply",value:function apply(value){return applyOperation(value,this)}},{key:"invert",value:function invert(){return invertOperation(this)}},{key:"toJSON",value:function toJSON(){var object=this.object,type=this.type,json={object:object,type:type},ATTRIBUTES=OPERATION_ATTRIBUTES[type],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=ATTRIBUTES[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value,value=this[key];if("annotation"!==key&&"mark"!==key&&"marks"!==key&&"node"!==key&&"path"!==key&&"newPath"!==key||(value=value.toJSON()),"properties"===key&&"merge_node"===type){var v={};"data"in value&&(v.data=value.data.toJS()),"type"in value&&(v.type=value.type),value=v}if(("properties"===key||"newProperties"===key)&&"set_annotation"===type){var _v={};"anchor"in value&&(_v.anchor=value.anchor.toJS()),"focus"in value&&(_v.focus=value.focus.toJS()),"key"in value&&(_v.key=value.key),"data"in value&&(_v.data=value.data.toJS()),"type"in value&&(_v.type=value.type),value=_v}if(("properties"===key||"newProperties"===key)&&"set_mark"===type){var _v2={};"data"in value&&(_v2.data=value.data.toJS()),"type"in value&&(_v2.type=value.type),value=_v2}if(("properties"===key||"newProperties"===key)&&"set_node"===type){var _v3={};"data"in value&&(_v3.data=value.data.toJS()),"type"in value&&(_v3.type=value.type),value=_v3}if(("properties"===key||"newProperties"===key)&&"set_selection"===type){var _v4={};"anchor"in value&&(_v4.anchor=value.anchor.toJSON()),"focus"in value&&(_v4.focus=value.focus.toJSON()),"isFocused"in value&&(_v4.isFocused=value.isFocused),"marks"in value&&(_v4.marks=value.marks&&value.marks.toJSON()),value=_v4}if(("properties"===key||"newProperties"===key)&&"set_value"===type){var _v5={};"data"in value&&(_v5.data=value.data.toJS()),value=_v5}if("properties"===key&&"split_node"===type){var _v6={};"data"in value&&(_v6.data=value.data.toJS()),"type"in value&&(_v6.type=value.type),value=_v6}"data"===key&&(value=value.toJSON()),json[key]=value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return json}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Operation.isOperation(attrs))return attrs;if(is_plain_object_default()(attrs))return Operation.fromJSON(attrs);throw new Error("`Operation.create` only accepts objects or operations, but you passed it: "+attrs)}},{key:"createList",value:function createList(){var elements=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(elements)||Array.isArray(elements))return new immutable_es.List(elements.map(Operation.create));throw new Error("`Operation.createList` only accepts arrays or lists, but you passed it: "+elements)}},{key:"fromJSON",value:function fromJSON(object){if(Operation.isOperation(object))return object;var type=object.type,ATTRIBUTES=OPERATION_ATTRIBUTES[type],attrs={type:type};if(!ATTRIBUTES)throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: "'+type+'"');var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=ATTRIBUTES[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value,v=object[key];if("data"===key&&void 0===v&&(v={}),void 0===v)throw new Error('`Operation.fromJSON` was passed a "'+type+'" operation without the required "'+key+'" attribute.');"annotation"===key&&(v=Annotation.create(v)),"path"!==key&&"newPath"!==key||(v=PathUtils.create(v)),"mark"===key&&(v=Mark.create(v)),"node"===key&&(v=Node.create(v)),"properties"!==key&&"newProperties"!==key||"set_annotation"!==type||(v=Annotation.createProperties(v)),"properties"!==key&&"newProperties"!==key||"set_mark"!==type||(v=Mark.createProperties(v)),"properties"!==key&&"newProperties"!==key||"set_node"!==type&&"merge_node"!==type&&"split_node"!==type||(v=Node.createProperties(v)),"properties"!==key&&"newProperties"!==key||"set_selection"!==type||(v=Selection.createProperties(v)),"properties"!==key&&"newProperties"!==key||"set_value"!==type||(v=Value.createProperties(v)),"data"===key&&(v=(0,immutable_es.Map)(v)),attrs[key]=v}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return new Operation(attrs)}},{key:"isOperationList",value:function isOperationList(any){return immutable_es.List.isList(any)&&any.every((function(item){return Operation.isOperation(item)}))}}]),Operation}((0,immutable_es.Record)(DEFAULTS$11)),DEFAULTS$12={operations:void 0,value:void 0},Change=function(_Record){function Change(){return classCallCheck(this,Change),possibleConstructorReturn(this,(Change.__proto__||Object.getPrototypeOf(Change)).apply(this,arguments))}return inherits(Change,_Record),createClass(Change,[{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,value:this.value.toJSON(options),operations:this.operations.toArray().map((function(o){return o.toJSON(options)}))}}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Change.isChange(attrs))return attrs;if(is_plain_object_default()(attrs))return Change.fromJSON(attrs);throw new Error("`Change.create` only accepts objects or changes, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(object){var value=object.value,_object$operations=object.operations,operations=void 0===_object$operations?[]:_object$operations;return new Change({value:Value.create(value),operations:Operation.createList(operations)})}}]),Change}((0,immutable_es.Record)(DEFAULTS$12));function CommandsPlugin(){var commands=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{onCommand:function onCommand(command,editor,next){var type=command.type,args=command.args,fn=commands[type];if(!fn)return next();editor.command.apply(editor,[fn].concat(toConsumableArray(args)))},onConstruct:function onConstruct(editor,next){for(var command in commands)editor.registerCommand(command);return next()}}}var SURROGATE_START=55296,SURROGATE_END=57343,SPACE=/\s/,CHAMELEON=/['\u2018\u2019]/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;function isSurrogate(code){return SURROGATE_START<=code&&code<=SURROGATE_END}function isModifier(code,text,offset){if(55356===code){var next=text.charCodeAt(offset+1);return next<=57343&&next>=57339}return!1}function isVariationSelector(code){return code<=65039&&code>=65024}function isWord(char,remaining){if(SPACE.test(char))return!1;if(CHAMELEON.test(char)){var next=remaining.charAt(0),length=getCharLength(next);if(isWord(next=remaining.slice(0,length),remaining.slice(length)))return!0}return!PUNCTUATION.test(char)}function getCharLength(char){return isSurrogate(char.charCodeAt(0))?2:1}function getCharOffset(text,chars,forward){var code,offset=0;if(""===text)return 1;for(var i=0;i<chars;i++)for(var prev=null,charCode=text.charCodeAt(offset);charCode;)if(isSurrogate(charCode)){var modifier=isModifier(charCode,text,offset);if(forward){if(!modifier&&prev&&"ZWJ"!==prev||modifier&&prev&&"SURR"!==prev)break}else if("SURR"===prev||"BMP"===prev)break;offset+=2,prev=modifier?"MOD":"SURR",charCode=text.charCodeAt(offset)}else if(8205!==charCode)if(10084!==(code=charCode)&&9794!==code&&9792!==code&&9760!==code&&9877!==code&&9992!==code&&9711!==code){if(!isVariationSelector(charCode)){if(forward){if(isModifier(text.charCodeAt(offset+1),text,offset+1)){offset+=3,prev="MOD",charCode=text.charCodeAt(offset);continue}}else if("MOD"===prev){offset+=1;break}null===prev&&(offset+=1);break}if(!forward&&prev&&"ZWJ"!==prev)break;offset+=1,prev="VAR",charCode=text.charCodeAt(offset)}else{if(forward&&"VAR"===prev||prev&&"ZWJ"!==prev&&"VAR"!==prev)break;offset+=1,prev="BMP",charCode=text.charCodeAt(offset)}else offset+=1,prev="ZWJ",charCode=text.charCodeAt(offset);return offset}function getWordOffset(text){for(var length=0,i=0,started=!1,char=void 0;char=text.charAt(i);){var l=getCharLength(char);if(isWord(char=text.slice(i,i+l),text.slice(i+l)))started=!0,length+=l;else{if(started)break;length+=l}i+=l}return length}var TextUtils={getCharLength:getCharLength,getCharOffset:getCharOffset,getCharOffsetBackward:function getCharOffsetBackward(text,offset){var chars=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return text=text.slice(0,offset),getCharOffset(text=(0,esrever.reverse)(text),chars)},getCharOffsetForward:function getCharOffsetForward(text,offset){var chars=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return getCharOffset(text=text.slice(offset),chars,!0)},getWordOffset:getWordOffset,getWordOffsetBackward:function getWordOffsetBackward(text,offset){return text=text.slice(0,offset),getWordOffset(text=(0,esrever.reverse)(text))},getWordOffsetForward:function getWordOffsetForward(text,offset){return getWordOffset(text=text.slice(offset))},isSurrogate:isSurrogate,isWord:isWord};function deleteExpandedAtRange(editor,range){range.isExpanded&&editor.deleteAtRange(range);var document=editor.value.document,_range=range,start=_range.start,end=_range.end;return range=document.hasDescendant(start.path)?range.moveToStart():range.moveTo(end.path,0).normalize(document)}var Commands$1={addMarkAtRange:function(editor,range,mark){if(!range.isCollapsed){var document=editor.value.document,start=range.start,end=range.end,texts=document.getTextsAtRange(range);editor.withoutNormalizing((function(){texts.forEach((function(node){var key=node.key,index=0,length=node.text.length;key===start.key&&(index=start.offset),key===end.key&&(length=end.offset),key===start.key&&key===end.key&&(length=end.offset-start.offset),editor.addMarkByKey(key,index,length,mark)}))}))}},addMarksAtRange:function(editor,range,marks){marks.forEach((function(mark){return editor.addMarkAtRange(range,mark)}))},deleteAtRange:function(editor,range){editor.snapshotSelection();var value=editor.value,start=range.start,end=range.end,startKey=start.key,startOffset=start.offset,endKey=end.key,endOffset=end.offset,document=value.document,isStartVoid=document.hasVoidParent(startKey,editor),isEndVoid=document.hasVoidParent(endKey,editor),startBlock=document.getClosestBlock(startKey),endBlock=document.getClosestBlock(endKey),isHanging=0===startOffset&&0===endOffset&&!1===isStartVoid&&startKey===startBlock.getFirstText().key&&endKey===endBlock.getFirstText().key&&startKey!==endKey;if(isHanging&&isEndVoid){var prevText=document.getPreviousText(endKey);endKey=prevText.key,endOffset=prevText.text.length,isEndVoid=document.hasVoidParent(endKey,editor)}editor.withoutNormalizing((function(){for(;isStartVoid;){var startVoid=document.getClosestVoid(startKey,editor),nextText=document.getNextText(startKey);if(editor.removeNodeByKey(startVoid.key),startKey===endKey)return;if(!nextText)return;document=editor.value.document,startKey=nextText.key,startOffset=0,isStartVoid=document.hasVoidParent(startKey,editor)}for(;isEndVoid;){var endVoid=document.getClosestVoid(endKey,editor),_prevText=document.getPreviousText(endKey);editor.removeNodeByKey(endVoid.key),document=editor.value.document,endKey=_prevText.key,endOffset=_prevText.text.length,isEndVoid=document.hasVoidParent(endKey,editor)}if(startKey===endKey&&isHanging)editor.removeNodeByKey(startBlock.key);else if(startKey!==endKey){startBlock=document.getClosestBlock(startKey),endBlock=document.getClosestBlock(endKey);var startText=document.getNode(startKey),endText=document.getNode(endKey),startLength=startText.text.length-startOffset,endLength=endOffset,ancestor=document.getCommonAncestor(startKey,endKey),startChild=ancestor.getFurthestChild(startKey),endChild=ancestor.getFurthestChild(endKey),startParent=document.getParent(startBlock.key),startParentIndex=startParent.nodes.indexOf(startBlock),endParentIndex=startParent.nodes.indexOf(endBlock),child=void 0;for(child=startText;child.key!==startChild.key;){var parent=document.getParent(child.key),_index=parent.nodes.indexOf(child);parent.nodes.slice(_index+1).reverse().forEach((function(node){editor.removeNodeByKey(node.key)})),child=parent}var startChildIndex=ancestor.nodes.indexOf(startChild),endChildIndex=ancestor.nodes.indexOf(endChild);for(ancestor.nodes.slice(startChildIndex+1,endChildIndex).reverse().forEach((function(node){editor.removeNodeByKey(node.key)})),child=endText;child.key!==endChild.key;){var _parent=document.getParent(child.key),_index2=_parent.nodes.indexOf(child);_parent.nodes.slice(0,_index2).reverse().forEach((function(node){editor.removeNodeByKey(node.key)})),child=_parent}if(0!==startLength&&editor.removeTextByKey(startKey,startOffset,startLength),0!==endLength&&editor.removeTextByKey(endKey,0,endOffset),startBlock.key!==endBlock.key){document=editor.value.document;var onlyChildAncestor=void 0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=document.ancestors(endBlock.key)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,node=slicedToArray(_ref,1)[0];if(node.nodes.size>1)break;onlyChildAncestor=node}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}endParentIndex!==startParentIndex+1&&editor.moveNodeByKey(endBlock.key,startParent.key,startParentIndex+1),isHanging?editor.removeNodeByKey(startBlock.key):editor.mergeNodeByKey(endBlock.key),onlyChildAncestor&&editor.removeNodeByKey(onlyChildAncestor.key)}}else{var index=startOffset,length=endOffset-startOffset;editor.removeTextByKey(startKey,index,length)}}))},deleteBackwardAtRange:function(editor,range){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var document=editor.value.document,_range2=range,start=_range2.start,focus=_range2.focus;if(range.isExpanded)editor.deleteAtRange(range);else{var voidParent=document.getClosestVoid(start.path,editor);if(voidParent)editor.removeNodeByKey(voidParent.key);else if(!start.isAtStartOfNode(document)){var block=document.getClosestBlock(start.path);if(1!==document.nodes.size&&block&&""===block.text&&1===block.nodes.size)editor.removeNodeByKey(block.key);else{var text=document.getDescendant(start.path);if(start.isAtStartOfNode(text)){var prev=document.getPreviousText(text.key);document.getClosestInline(text.key)&&""===prev.text&&(prev=document.getPreviousText(prev.key));var prevBlock=document.getClosestBlock(prev.key),prevVoid=document.getClosestVoid(prev.key,editor);if(prevVoid)return void editor.removeNodeByKey(prevVoid.key);if(1===n&&prevBlock!==block)return range=range.moveAnchorTo(prev.key,prev.text.length),void editor.deleteAtRange(range)}if(n<=focus.offset)return range=range.moveFocusBackward(n),void editor.deleteAtRange(range);for(var node=text,offset=0,traversed=focus.offset;n>traversed;){var next=traversed+(node=document.getPreviousText(node.key)).text.length;if(n<=next){offset=next-n;break}traversed=next}range=range.moveAnchorTo(node.key,offset),editor.deleteAtRange(range)}}}}},deleteCharBackwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var document=editor.value.document,start=range.start,startBlock=document.getClosestBlock(start.path),o=startBlock.getOffset(start.key)+start.offset,text=startBlock.text,n=TextUtils.getCharOffsetBackward(text,o);editor.deleteBackwardAtRange(range,n)}},deleteCharForwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var document=editor.value.document,start=range.start,startBlock=document.getClosestBlock(start.path),o=startBlock.getOffset(start.key)+start.offset,text=startBlock.text,n=TextUtils.getCharOffsetForward(text,o);editor.deleteForwardAtRange(range,n)}},deleteForwardAtRange:function(editor,range){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){var document=editor.value.document,_range3=range,start=_range3.start,focus=_range3.focus;if(range.isExpanded)editor.deleteAtRange(range);else{var voidParent=document.getClosestVoid(start.path,editor);if(voidParent)editor.removeNodeByKey(voidParent.key);else{var block=document.getClosestBlock(start.path);if(block&&!editor.isVoid(block)&&""===block.text&&1!==document.nodes.size){var nextBlock=document.getNextBlock(block.key);return editor.removeNodeByKey(block.key),void(nextBlock&&nextBlock.key&&editor.moveToStartOfNode(nextBlock))}if(!start.isAtEndOfNode(document)){var text=document.getDescendant(start.path);if(start.isAtEndOfNode(text)){var next=document.getNextText(text.key),_nextBlock=document.getClosestBlock(next.key),nextVoid=document.getClosestVoid(next.key,editor);if(nextVoid)return void editor.removeNodeByKey(nextVoid.key);if(1===n&&_nextBlock!==block)return range=range.moveFocusTo(next.key,0),void editor.deleteAtRange(range)}if(n<=text.text.length-focus.offset)return range=range.moveFocusForward(n),void editor.deleteAtRange(range);for(var node=text,offset=focus.offset,traversed=text.text.length-focus.offset;n>traversed;){var _next=traversed+(node=document.getNextText(node.key)).text.length;if(n<=_next){offset=n-traversed;break}traversed=_next}range=range.moveFocusTo(node.key,offset),editor.deleteAtRange(range)}}}}},deleteLineBackwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var document=editor.value.document,start=range.start,o=document.getClosestBlock(start.path).getOffset(start.key)+start.offset;editor.deleteBackwardAtRange(range,o)}},deleteLineForwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var document=editor.value.document,start=range.start,startBlock=document.getClosestBlock(start.path),o=startBlock.getOffset(start.key)+start.offset;editor.deleteForwardAtRange(range,startBlock.text.length-o)}},deleteWordBackwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var document=editor.value.document,start=range.start,startBlock=document.getClosestBlock(start.path),o=startBlock.getOffset(start.key)+start.offset,text=startBlock.text,n=0===o?1:TextUtils.getWordOffsetBackward(text,o);editor.deleteBackwardAtRange(range,n)}},deleteWordForwardAtRange:function(editor,range){if(range.isExpanded)editor.deleteAtRange(range);else{var document=editor.value.document,start=range.start,startBlock=document.getClosestBlock(start.path),o=startBlock.getOffset(start.key)+start.offset,text=startBlock.text,wordOffset=TextUtils.getWordOffsetForward(text,o),n=0===wordOffset?1:wordOffset;editor.deleteForwardAtRange(range,n)}},insertBlockAtRange:function(editor,range,block){range=deleteExpandedAtRange(editor,range),block=Block.create(block);var document=editor.value.document,start=range.start,startKey=start.key,startOffset=start.offset,startBlock=document.getClosestBlock(startKey),startInline=document.getClosestInline(startKey),parent=document.getParent(startBlock.key),index=parent.nodes.indexOf(startBlock),insertionMode=getInsertionMode(editor,range);if("before"===insertionMode)editor.insertNodeByKey(parent.key,index,block);else if("behind"===insertionMode)editor.insertNodeByKey(parent.key,index+1,block);else{if(startInline&&editor.isVoid(startInline)){var atEnd=start.isAtEndOfNode(startInline),siblingText=atEnd?document.getNextText(startKey):document.getPreviousText(startKey),splitRange=atEnd?range.moveToStartOfNode(siblingText):range.moveToEndOfNode(siblingText);startKey=splitRange.start.key,startOffset=splitRange.start.offset}editor.withoutNormalizing((function(){editor.splitDescendantsByKey(startBlock.key,startKey,startOffset),editor.insertNodeByKey(parent.key,index+1,block)}))}}},getInsertionMode=function getInsertionMode(editor,range){var document=editor.value.document,start=range.start,startKey=start.key,startBlock=document.getClosestBlock(startKey),startInline=document.getClosestInline(startKey);return editor.isVoid(startBlock)?start.isAtEndOfNode(startBlock)?"behind":"before":startInline||""!==startBlock.text?start.isAtStartOfNode(startBlock)?"before":start.isAtEndOfNode(startBlock)?"behind":"split":"behind"};Commands$1.insertFragmentAtRange=function(editor,range,fragment){editor.withoutNormalizing((function(){if(range=deleteExpandedAtRange(editor,range),fragment.nodes.size){fragment=fragment.mapDescendants((function(child){return child.regenerateKey()}));var start=range.start,document=editor.value.document,startText=document.getDescendant(start.path),startBlock=document.getClosestBlock(startText.key),startChild=startBlock.getFurthestChild(startText.key),isAtStart=start.isAtStartOfNode(startBlock),parent=document.getParent(startBlock.key),index=parent.nodes.indexOf(startBlock),blocks=fragment.getBlocks(),firstChild=fragment.nodes.first(),lastChild=fragment.nodes.last(),firstBlock=blocks.first(),lastBlock=blocks.last(),insertionNode=findInsertionNode(fragment,document,startBlock.key);if(firstBlock===lastBlock&&editor.isVoid(firstBlock))editor.insertBlockAtRange(range,firstBlock);else if(insertionNode!==fragment||!firstChild.hasBlockChildren()&&!lastChild.hasBlockChildren()){if(firstBlock!==lastBlock){var lonelyChild=insertionNode.getFurthest(firstBlock.key,(function(p){return 1===p.nodes.size}))||firstBlock,startIndex=parent.nodes.indexOf(startBlock);insertionNode.removeNode(lonelyChild.key).nodes.forEach((function(node,i){var newIndex=startIndex+i+1;editor.insertNodeByKey(parent.key,newIndex,node)}))}if(0!==start.offset&&editor.splitDescendantsByKey(startChild.key,start.key,start.offset),startText=(document=editor.value.document).getDescendant(start.key),startChild=(startBlock=document.getClosestBlock(start.key)).getFurthestChild(startText.key),firstBlock!==lastBlock){var nextChild=isAtStart?startChild:startBlock.getNextSibling(startChild.key),nextNodes=nextChild?startBlock.nodes.skipUntil((function(n){return n.key===nextChild.key})):(0,immutable_es.List)(),lastIndex=lastBlock.nodes.size;nextNodes.forEach((function(node,i){var newIndex=lastIndex+i;editor.moveNodeByKey(node.key,lastBlock.key,newIndex)}))}if(editor.isVoid(startBlock)||""!==startBlock.text||startBlock.findDescendant((function(n){return editor.isVoid(n)}))){var inlineChild=startBlock.getFurthestChild(startText.key),inlineIndex=startBlock.nodes.indexOf(inlineChild);firstBlock.nodes.forEach((function(inline,i){var o=0===start.offset?0:1,newIndex=inlineIndex+i+o;editor.insertNodeByKey(startBlock.key,newIndex,inline)}))}else editor.removeNodeByKey(startBlock.key),editor.insertNodeByKey(parent.key,index,firstBlock)}else{("before"===getInsertionMode(editor,range)?fragment.nodes:fragment.nodes.reverse()).forEach((function(node){editor.insertBlockAtRange(range,node)}))}}}))};var findInsertionNode=function findInsertionNode(fragment,document,documentKey){var ancestorTypesMatch=function ancestorTypesMatch(fragmentAncestors,documentAncestors){return documentAncestors.size>=fragmentAncestors.size&&fragmentAncestors.every((function(fragmentNode,i){return documentAncestors.get(i).type===fragmentNode.type}))},getAncestorBlocks=function getAncestorBlocks(doc,key){return doc.getAncestors(key).slice(1).push(doc.getNode(key)).reverse()},fragmentStartBlock=function deepestSingleBlock(doc){for(var result=doc;1===result.nodes.size&&"block"===result.nodes.first().object;)result=result.nodes.first();return result===doc?null:result}(fragment);return fragmentStartBlock?function matchingFragmentAncestor(documentAncestors,fragmentAncestors){var depthDifference=documentAncestors.size-fragmentAncestors.size;if(depthDifference<0)return fragment;for(var fragIdx=0;fragIdx<fragmentAncestors.size;fragIdx++)for(var docIdx=0;docIdx<=depthDifference;docIdx++)if(ancestorTypesMatch(fragmentAncestors.slice(fragIdx),documentAncestors.slice(docIdx)))return fragmentAncestors.get(fragIdx);return fragment}(getAncestorBlocks(document,documentKey),getAncestorBlocks(fragment,fragmentStartBlock.key)):fragment};Commands$1.insertInlineAtRange=function(editor,range,inline){inline=Inline.create(inline),editor.withoutNormalizing((function(){range=deleteExpandedAtRange(editor,range);var document=editor.value.document,start=range.start,parent=document.getParent(start.path),startText=document.assertDescendant(start.path),index=parent.nodes.indexOf(startText);editor.isVoid(parent)||(editor.splitNodeByPath(start.path,start.offset),editor.insertNodeByKey(parent.key,index+1,inline))}))},Commands$1.insertTextAtRange=function(editor,range,text,marks){editor.withoutNormalizing((function(){range=deleteExpandedAtRange(editor,range);var document=editor.value.document,start=range.start,offset=start.offset,parent=document.getParent(start.path);editor.isVoid(parent)||editor.insertTextByPath(start.path,offset,text,marks)}))},Commands$1.removeMarkAtRange=function(editor,range,mark){if(!range.isCollapsed){var texts=editor.value.document.getTextsAtRange(range),start=range.start,end=range.end;editor.withoutNormalizing((function(){texts.forEach((function(node){var key=node.key,index=0,length=node.text.length;key===start.key&&(index=start.offset),key===end.key&&(length=end.offset),key===start.key&&key===end.key&&(length=end.offset-start.offset),editor.removeMarkByKey(key,index,length,mark)}))}))}},Commands$1.setBlocksAtRange=function(editor,range,properties){var document=editor.value.document,blocks=document.getLeafBlocksAtRange(range),start=range.start,end=range.end,isCollapsed=range.isCollapsed,isStartVoid=document.hasVoidParent(start.path,editor),startBlock=document.getClosestBlock(start.path),endBlock=document.getClosestBlock(end.key),sets=!1===isCollapsed&&0===start.offset&&0===end.offset&&!1===isStartVoid&&start.key===startBlock.getFirstText().key&&end.key===endBlock.getFirstText().key?blocks.slice(0,-1):blocks;editor.withoutNormalizing((function(){sets.forEach((function(block){editor.setNodeByKey(block.key,properties)}))}))},Commands$1.setInlinesAtRange=function(editor,range,properties){var inlines=editor.value.document.getLeafInlinesAtRange(range);editor.withoutNormalizing((function(){inlines.forEach((function(inline){editor.setNodeByKey(inline.key,properties)}))}))},Commands$1.splitBlockAtRange=function(editor,range){for(var height=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,_range8=range=deleteExpandedAtRange(editor,range),start=_range8.start,end=_range8.end,value=editor.value,document=value.document,node=document.assertDescendant(start.path),parent=document.getClosestBlock(node.key),h=0;parent&&"block"===parent.object&&h<height;)node=parent,parent=document.getClosestBlock(parent.key),h++;editor.withoutNormalizing((function(){if(editor.splitDescendantsByKey(node.key,start.path,start.offset),value=editor.value,document=value.document,range.isExpanded){range.isBackward&&(range=range.flip());var nextBlock=document.getNextBlock(node.key);range=(range=range.moveAnchorToStartOfNode(nextBlock)).setFocus(range.focus.setPath(null)),start.path.equals(end.path)&&(range=range.moveFocusTo(range.anchor.key,end.offset-start.offset)),range=document.resolveRange(range),editor.deleteAtRange(range)}}))},Commands$1.splitInlineAtRange=function(editor,range){for(var height=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,start=(range=deleteExpandedAtRange(editor,range)).start,document=editor.value.document,node=document.assertDescendant(start.path),parent=document.getClosestInline(node.key),h=0;parent&&"inline"===parent.object&&h<height;)node=parent,parent=document.getClosestInline(parent.key),h++;editor.splitDescendantsByKey(node.key,start.path,start.offset)},Commands$1.toggleMarkAtRange=function(editor,range,mark){range.isCollapsed||(mark=Mark.create(mark),editor.value.document.getActiveMarksAtRange(range).some((function(m){return m.equals(mark)}))?editor.removeMarkAtRange(range,mark):editor.addMarkAtRange(range,mark))},Commands$1.unwrapBlockAtRange=function(editor,range,properties){properties=Node.createProperties(properties);var document=editor.value.document,blocks=document.getLeafBlocksAtRange(range),wrappers=blocks.map((function(block){return document.getClosest(block.key,(function(parent){return"block"===parent.object&&((null==properties.type||parent.type===properties.type)&&!(null!=properties.data&&!parent.data.isSuperset(properties.data)))}))})).filter((function(exists){return exists})).toOrderedSet().toList();editor.withoutNormalizing((function(){wrappers.forEach((function(block){var first=block.nodes.first(),last=block.nodes.last(),parent=editor.value.document.getParent(block.key),index=parent.nodes.indexOf(block),children=block.nodes.filter((function(child){return blocks.some((function(b){return child===b||child.hasDescendant(b.key)}))})),firstMatch=children.first(),lastMatch=children.last();if(first===firstMatch&&last===lastMatch)block.nodes.forEach((function(child,i){editor.moveNodeByKey(child.key,parent.key,index+i)})),editor.removeNodeByKey(block.key);else if(last===lastMatch)block.nodes.skipUntil((function(n){return n===firstMatch})).forEach((function(child,i){editor.moveNodeByKey(child.key,parent.key,index+1+i)}));else if(first===firstMatch)block.nodes.takeUntil((function(n){return n===lastMatch})).push(lastMatch).forEach((function(child,i){editor.moveNodeByKey(child.key,parent.key,index+i)}));else{var firstText=firstMatch.getFirstText();editor.splitDescendantsByKey(block.key,firstText.key,0),document=editor.value.document,children.forEach((function(child,i){if(0===i){var extra=child;child=document.getNextBlock(child.key),editor.removeNodeByKey(extra.key)}editor.moveNodeByKey(child.key,parent.key,index+1+i)}))}}))}))},Commands$1.unwrapInlineAtRange=function(editor,range,properties){properties=Node.createProperties(properties);var document=editor.value.document,inlines=document.getTextsAtRange(range).map((function(text){return document.getClosest(text.key,(function(parent){return"inline"===parent.object&&((null==properties.type||parent.type===properties.type)&&!(null!=properties.data&&!parent.data.isSuperset(properties.data)))}))})).filter((function(exists){return exists})).toOrderedSet().toList();editor.withoutNormalizing((function(){inlines.forEach((function(inline){var parent=editor.value.document.getParent(inline.key),index=parent.nodes.indexOf(inline);inline.nodes.forEach((function(child,i){editor.moveNodeByKey(child.key,parent.key,index+i)})),editor.removeNodeByKey(inline.key)}))}))},Commands$1.wrapBlockAtRange=function(editor,range,block){block=(block=Block.create(block)).set("nodes",block.nodes.clear());var document=editor.value.document,blocks=document.getLeafBlocksAtRange(range),firstblock=blocks.first(),lastblock=blocks.last(),parent=void 0,siblings=void 0,index=void 0;if(1===blocks.length?(parent=document.getParent(firstblock.key),siblings=blocks):parent=document.getClosest(firstblock.key,(function(p1){return!!document.getClosest(lastblock.key,(function(p2){return p1===p2}))})),null==parent&&(parent=document),null==siblings){var indexes=parent.nodes.reduce((function(ind,node,i){return(node===firstblock||node.hasDescendant(firstblock.key))&&(ind[0]=i),(node===lastblock||node.hasDescendant(lastblock.key))&&(ind[1]=i),ind}),[]);index=indexes[0],siblings=parent.nodes.slice(indexes[0],indexes[1]+1)}null==index&&(index=parent.nodes.indexOf(siblings.first())),editor.withoutNormalizing((function(){editor.insertNodeByKey(parent.key,index,block),siblings.forEach((function(node,i){editor.moveNodeByKey(node.key,block.key,i)}))}))},Commands$1.wrapInlineAtRange=function(editor,range,inline){var document=editor.value.document,start=range.start,end=range.end;if(range.isCollapsed){var inlineParent=document.getClosestInline(start.path);if(!inlineParent)return;if(!editor.isVoid(inlineParent))return;return editor.wrapInlineByKey(inlineParent.key,inline)}inline=(inline=Inline.create(inline)).set("nodes",inline.nodes.clear());var blocks=document.getLeafBlocksAtRange(range),startBlock=document.getClosestBlock(start.path),endBlock=document.getClosestBlock(end.path),startInline=document.getClosestInline(start.path),endInline=document.getClosestInline(end.path),startChild=startBlock.getFurthestChild(start.key),endChild=endBlock.getFurthestChild(end.key);editor.withoutNormalizing((function(){startInline&&startInline===endInline||(editor.splitDescendantsByKey(endChild.key,end.key,end.offset),editor.splitDescendantsByKey(startChild.key,start.key,start.offset)),document=editor.value.document,startBlock=document.getDescendant(startBlock.key),endBlock=document.getDescendant(endBlock.key),startChild=startBlock.getFurthestChild(start.key),endChild=endBlock.getFurthestChild(end.key);var startIndex=startBlock.nodes.indexOf(startChild),endIndex=endBlock.nodes.indexOf(endChild);if(startInline&&startInline===endInline){var texts=startBlock.getTextsAtRange(range).map((function(text){return start.key===text.key&&end.key===text.key?text.splitText(start.offset)[1].splitText(end.offset-start.offset)[0].regenerateKey():start.key===text.key?text.splitText(start.offset)[1].regenerateKey():end.key===text.key?text.splitText(end.offset)[0].regenerateKey():text.regenerateKey()}));inline=inline.set("nodes",texts),editor.insertInlineAtRange(range,inline)}else if(startBlock===endBlock){document=editor.value.document,startBlock=document.getClosestBlock(start.key),startChild=startBlock.getFurthestChild(start.key);var startInner=document.getNextSibling(startChild.key),startInnerIndex=startBlock.nodes.indexOf(startInner),endInner=start.key===end.key?startInner:startBlock.getFurthestChild(end.key),inlines=startBlock.nodes.skipUntil((function(n){return n===startInner})).takeUntil((function(n){return n===endInner})).push(endInner),node=inline.regenerateKey();editor.insertNodeByKey(startBlock.key,startInnerIndex,node),inlines.forEach((function(child,i){editor.moveNodeByKey(child.key,node.key,i)}))}else{var startInlines=startBlock.nodes.slice(startIndex+1),endInlines=endBlock.nodes.slice(0,endIndex+1),startNode=inline.regenerateKey(),endNode=inline.regenerateKey();editor.insertNodeByKey(startBlock.key,startIndex+1,startNode),editor.insertNodeByKey(endBlock.key,endIndex,endNode),startInlines.forEach((function(child,i){editor.moveNodeByKey(child.key,startNode.key,i)})),endInlines.forEach((function(child,i){editor.moveNodeByKey(child.key,endNode.key,i)})),blocks.slice(1,-1).forEach((function(block){var node=inline.regenerateKey();editor.insertNodeByKey(block.key,0,node),block.nodes.forEach((function(child,i){editor.moveNodeByKey(child.key,node.key,i)}))}))}}))},Commands$1.wrapTextAtRange=function(editor,range,prefix){var suffix=arguments.length>3&&void 0!==arguments[3]?arguments[3]:prefix,start=range.start,end=range.end,startRange=range.moveToStart(),endRange=range.moveToEnd();start.path.equals(end.path)&&(endRange=endRange.moveForward(prefix.length)),editor.withoutNormalizing((function(){editor.insertTextAtRange(startRange,prefix),editor.insertTextAtRange(endRange,suffix)}))};var Commands$2={addMarkByPath:function(editor,path,offset,length,mark){mark=Mark.create(mark),editor.addMarksByPath(path,offset,length,[mark])},addMarksByPath:function(editor,path,offset,length,marks){if((marks=Mark.createSet(marks)).size){var node=editor.value.document.assertNode(path);editor.withoutNormalizing((function(){offset+length<node.text.length&&editor.splitNodeByPath(path,offset+length),offset>0&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0),marks.forEach((function(mark){editor.applyOperation({type:"add_mark",path:path,mark:Mark.create(mark)})}))}))}},replaceMarksByPath:function(editor,path,offset,length,marks){var marksSet=Mark.createSet(marks),node=editor.value.document.assertNode(path);node.marks.equals(marksSet)||editor.withoutNormalizing((function(){offset+length<node.text.length&&editor.splitNodeByPath(path,offset+length),offset>0&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0);var marksToApply=marksSet.subtract(node.marks);node.marks.subtract(marksSet).forEach((function(mark){editor.applyOperation({type:"remove_mark",path:path,mark:Mark.create(mark)})})),marksToApply.forEach((function(mark){editor.applyOperation({type:"add_mark",path:path,mark:Mark.create(mark)})}))}))},insertFragmentByPath:function(editor,path,index,fragment){fragment.nodes.forEach((function(node,i){editor.insertNodeByPath(path,index+i,node)}))},insertNodeByPath:function(editor,path,index,node){editor.applyOperation({type:"insert_node",path:path.concat(index),node:node})},insertTextByPath:function(editor,path,offset,text,marks){var value=editor.value,annotations=value.annotations;value.document.assertNode(path),editor.withoutNormalizing((function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=annotations.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var annotation=_step.value,start=annotation.start,end=annotation.end;editor.isAtomic(annotation)&&(start.path.equals(path)&&start.offset<offset&&(!end.path.equals(path)||end.offset>offset)&&editor.removeAnnotation(annotation))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}editor.applyOperation({type:"insert_text",path:path,offset:offset,text:text}),marks&&editor.replaceMarksByPath(path,offset,text.length,marks)}))},mergeNodeByPath:function(editor,path){var document=editor.value.document,original=document.getDescendant(path),previous=document.getPreviousSibling(path);if(!previous)throw new Error('Unable to merge node with path "'+path+'", because it has no previous sibling.');var position="text"===previous.object?previous.text.length:previous.nodes.size;editor.applyOperation({type:"merge_node",path:path,position:position,properties:{type:original.type,data:original.data},target:null})},moveNodeByPath:function(editor,path,newParentPath,newIndex){if(PathUtils.isEqual(path,newParentPath))return editor;var newPath=newParentPath.concat(newIndex);if(PathUtils.isEqual(path,newPath))return editor;editor.applyOperation({type:"move_node",path:path,newPath:newPath})},removeMarkByPath:function(editor,path,offset,length,mark){mark=Mark.create(mark),editor.removeMarksByPath(path,offset,length,[mark])},removeMarksByPath:function(editor,path,offset,length,marks){if((marks=Mark.createSet(marks)).size){var node=editor.value.document.assertNode(path);marks.intersect(node.marks).isEmpty()||editor.withoutNormalizing((function(){offset+length<node.text.length&&editor.splitNodeByPath(path,offset+length),offset>0&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0),marks.forEach((function(mark){editor.applyOperation({type:"remove_mark",path:path,offset:offset,length:length,mark:mark})}))}))}},removeAllMarksByPath:function(editor,path){var node=editor.state.document.assertNode(path);editor.withoutNormalizing((function(){if("text"!==node.object){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=node.texts()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _ref=_step2.value,_ref2=slicedToArray(_ref,2),n=_ref2[0],p=_ref2[1],pth=path.concat(p);editor.removeMarksByPath(pth,0,n.text.length,n.marks)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else editor.removeMarksByPath(path,0,node.text.length,node.marks)}))},removeNodeByPath:function(editor,path){var node=editor.value.document.assertNode(path);editor.applyOperation({type:"remove_node",path:path,node:node})},removeTextByPath:function(editor,path,offset,length){var value=editor.value,document=value.document,annotations=value.annotations,text=document.assertNode(path).text.slice(offset,offset+length);editor.withoutNormalizing((function(){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=annotations.values()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var annotation=_step3.value,start=annotation.start,end=annotation.end;editor.isAtomic(annotation)&&(start.path.equals(path)&&start.offset<offset&&(!end.path.equals(path)||end.offset>offset)&&editor.removeAnnotation(annotation))}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}editor.applyOperation({type:"remove_text",path:path,offset:offset,text:text})}))},replaceNodeByPath:function(editor,path,newNode){newNode=Node.create(newNode);var index=path.last(),parentPath=PathUtils.lift(path);editor.withoutNormalizing((function(){editor.removeNodeByPath(path),editor.insertNodeByPath(parentPath,index,newNode)}))},replaceTextByPath:function(editor,path,offset,length,text,marks){editor.withoutNormalizing((function(){editor.removeTextByPath(path,offset,length),editor.insertTextByPath(path,offset,text,marks)}))},setMarkByPath:function(editor,path,offset,length,properties,newProperties){properties=Mark.create(properties),newProperties=Mark.createProperties(newProperties);var node=editor.value.document.assertNode(path);editor.withoutNormalizing((function(){offset+length<node.text.length&&editor.splitNodeByPath(path,offset+length),offset>0&&(editor.splitNodeByPath(path,offset),path=PathUtils.increment(path),offset=0),editor.applyOperation({type:"set_mark",path:path,properties:properties,newProperties:newProperties})}))},setNodeByPath:function(editor,path,newProperties){var node=editor.value.document.assertNode(path);newProperties=Node.createProperties(newProperties);var prevProperties=pick_default()(node,Object.keys(newProperties));editor.applyOperation({type:"set_node",path:path,properties:prevProperties,newProperties:newProperties})},setTextByPath:function(editor,path,text,marks){var end=editor.value.document.assertNode(path).text.length;editor.replaceTextByPath(path,0,end,text,marks)},splitNodeByPath:function(editor,path,position){var _options$target=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).target,target=void 0===_options$target?null:_options$target,node=editor.value.document.getDescendant(path);editor.applyOperation({type:"split_node",path:path,position:position,target:target,properties:{type:node.type,data:node.data}})},splitDescendantsByPath:function(editor,path,textPath,textOffset){if(path.equals(textPath))editor.splitNodeByPath(textPath,textOffset);else{var document=editor.value.document,index=textOffset,lastPath=textPath;editor.withoutNormalizing((function(){editor.splitNodeByKey(textPath,textOffset);var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=document.ancestors(textPath)[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _ref3=_step4.value,ancestorPath=slicedToArray(_ref3,2)[1],target=index;if(index=lastPath.last()+1,lastPath=ancestorPath,editor.splitNodeByPath(ancestorPath,index,{target:target}),ancestorPath.equals(path))break}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}))}},unwrapInlineByPath:function(editor,path,properties){var value=editor.value,document=value.document,selection=value.selection,node=document.assertNode(path),first=node.getFirstText(),last=node.getLastText(),range=selection.moveToRangeOfNode(first,last);editor.unwrapInlineAtRange(range,properties)},unwrapBlockByPath:function(editor,path,properties){var value=editor.value,document=value.document,selection=value.selection,node=document.assertNode(path),first=node.getFirstText(),last=node.getLastText(),range=selection.moveToRangeOfNode(first,last);editor.unwrapBlockAtRange(range,properties)},unwrapNodeByPath:function(editor,path){var document=editor.value.document;document.assertNode(path);var parentPath=PathUtils.lift(path),parent=document.assertNode(parentPath),index=path.last(),parentIndex=parentPath.last(),grandPath=PathUtils.lift(parentPath),isFirst=0===index,isLast=index===parent.nodes.size-1;editor.withoutNormalizing((function(){if(1===parent.nodes.size)editor.moveNodeByPath(path,grandPath,parentIndex+1),editor.removeNodeByPath(parentPath);else if(isFirst)editor.moveNodeByPath(path,grandPath,parentIndex);else if(isLast)editor.moveNodeByPath(path,grandPath,parentIndex+1);else{var updatedPath=PathUtils.increment(path,1,parentPath.size-1);updatedPath=updatedPath.set(updatedPath.size-1,0),editor.splitNodeByPath(parentPath,index),editor.moveNodeByPath(updatedPath,grandPath,parentIndex+1)}}))},unwrapChildrenByPath:function(editor,path){path=PathUtils.create(path);var node=editor.value.document.assertNode(path),parentPath=PathUtils.lift(path),index=path.last(),nodes=node.nodes;editor.withoutNormalizing((function(){nodes.reverse().forEach((function(child,i){var childIndex=nodes.size-i-1,childPath=path.push(childIndex);editor.moveNodeByPath(childPath,parentPath,index+1)})),editor.removeNodeByPath(path)}))},wrapBlockByPath:function(editor,path,block){block=(block=Block.create(block)).set("nodes",block.nodes.clear());var parentPath=PathUtils.lift(path),index=path.last(),newPath=PathUtils.increment(path);editor.withoutNormalizing((function(){editor.insertNodeByPath(parentPath,index,block),editor.moveNodeByPath(newPath,path,0)}))},wrapInlineByPath:function(editor,path,inline){inline=(inline=Inline.create(inline)).set("nodes",inline.nodes.clear());var parentPath=PathUtils.lift(path),index=path.last(),newPath=PathUtils.increment(path);editor.withoutNormalizing((function(){editor.insertNodeByPath(parentPath,index,inline),editor.moveNodeByPath(newPath,path,0)}))},wrapNodeByPath:function(editor,path,node){"block"===(node=Node.create(node)).object?editor.wrapBlockByPath(path,node):"inline"===node.object&&editor.wrapInlineByPath(path,node)}},_loop=function _loop(method){Commands$2[method+"ByKey"]=function(editor,key){for(var _len3=arguments.length,args=Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)args[_key3-2]=arguments[_key3];var path=editor.value.document.assertPath(key);editor[method+"ByPath"].apply(editor,[path].concat(args))}},_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=["addMark","insertFragment","insertNode","insertText","mergeNode","removeAllMarks","removeMark","removeNode","removeText","replaceMarks","replaceNode","replaceText","setMark","setNode","setText","splitNode","unwrapBlock","unwrapChildren","unwrapInline","unwrapNode","wrapBlock","wrapInline","wrapNode"][Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_loop(_step5.value)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}Commands$2.moveNodeByKey=function(editor,key,newKey){for(var _len=arguments.length,args=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)args[_key-3]=arguments[_key];var document=editor.value.document,path=document.assertPath(key),newPath=document.assertPath(newKey);editor.moveNodeByPath.apply(editor,[path,newPath].concat(args))},Commands$2.splitDescendantsByKey=function(editor,key,textKey){for(var _len2=arguments.length,args=Array(_len2>3?_len2-3:0),_key2=3;_key2<_len2;_key2++)args[_key2-3]=arguments[_key2];var document=editor.value.document,path=document.assertPath(key),textPath=document.assertPath(textKey);editor.splitDescendantsByPath.apply(editor,[path,textPath].concat(args))};var Commands$3={};Commands$3.save=function(editor,operation){var operations=editor.operations,data=editor.value.data,_editor$tmp=editor.tmp,save=_editor$tmp.save,merge=_editor$tmp.merge;if(!1!==save&&function isValidOperation(o){if("set_selection"===o.type){var _o$newProperties=o.newProperties,isFocused=_o$newProperties.isFocused,anchor=_o$newProperties.anchor,focus=_o$newProperties.focus;if(void 0!==isFocused&&!anchor&&!focus)return!1}return!0}(operation)){var undos=data.get("undos")||(0,immutable_es.List)(),lastBatch=undos.last(),lastOperation=lastBatch&&lastBatch.last();if(null==merge&&(merge=0!==operations.size||function shouldMerge(o,p){if(!p)return!1;var merge="set_selection"===o.type&&"set_selection"===p.type||"insert_text"===o.type&&"insert_text"===p.type&&o.offset===p.offset+p.text.length&&o.path.equals(p.path)||"remove_text"===o.type&&"remove_text"===p.type&&o.offset+o.text.length===p.offset&&o.path.equals(p.path);return merge}(operation,lastOperation)),merge&&lastBatch){var batch=lastBatch.push(operation);undos=(undos=undos.pop()).push(batch)}else{var _batch=(0,immutable_es.List)([operation]);undos=undos.push(_batch)}undos.size>100&&(undos=undos.takeLast(100)),editor.withoutSaving((function(){var redos=(0,immutable_es.List)(),newData=data.set("undos",undos).set("redos",redos);editor.setData(newData)}))}},Commands$3.redo=function(editor){var data=editor.value.data,redos=data.get("redos")||(0,immutable_es.List)(),undos=data.get("undos")||(0,immutable_es.List)(),batch=redos.last();batch&&editor.withoutSaving((function(){editor.withoutNormalizing((function(){batch.forEach((function(op){var _op=op,type=_op.type,newProperties=_op.newProperties;"set_selection"===type&&(op=op.set("newProperties",omit_default()(newProperties,"isFocused"))),editor.applyOperation(op)})),redos=redos.pop(),undos=undos.push(batch);var newData=data.set("undos",undos).set("redos",redos);editor.setData(newData)}))}))},Commands$3.undo=function(editor){var data=editor.value.data,redos=data.get("redos")||(0,immutable_es.List)(),undos=data.get("undos")||(0,immutable_es.List)(),batch=undos.last();batch&&editor.withoutSaving((function(){editor.withoutNormalizing((function(){batch.slice().reverse().map((function(op){return op.invert()})).forEach((function(inverse){var _inverse=inverse,type=_inverse.type,newProperties=_inverse.newProperties;"set_selection"===type&&(inverse=inverse.set("newProperties",omit_default()(newProperties,"isFocused"))),editor.applyOperation(inverse)})),redos=redos.push(batch),undos=undos.pop();var newData=data.set("undos",undos).set("redos",redos);editor.setData(newData)}))}))},Commands$3.withoutMerging=function(editor,fn){var value=editor.tmp.merge;editor.tmp.merge=!1,fn(editor),editor.tmp.merge=value},Commands$3.withoutSaving=function(editor,fn){var value=editor.tmp.save;editor.tmp.save=!1,fn(editor),editor.tmp.save=value};var Commands$4={};function proxy(editor,method){for(var _editor$value$selecti,_len39=arguments.length,args=Array(_len39>2?_len39-2:0),_key39=2;_key39<_len39;_key39++)args[_key39-2]=arguments[_key39];var range=(_editor$value$selecti=editor.value.selection)[method].apply(_editor$value$selecti,args);editor.select(range)}function pointEdgeObject(editor,point,edge,object){var Point=point.slice(0,1).toUpperCase()+point.slice(1),Edge=edge.slice(0,1).toUpperCase()+edge.slice(1),Object=object.slice(0,1).toUpperCase()+object.slice(1),method="move"+Point+"To"+Edge+"OfNode",getNode="text"===object?"getNode":"getClosest"+Object,value=editor.value,document=value.document,p=value.selection[point],node=document[getNode](p.key);node&&editor[method](node)}function pointEdgeSideObject(editor,point,edge,side,object){var Point=point.slice(0,1).toUpperCase()+point.slice(1),Edge=edge.slice(0,1).toUpperCase()+edge.slice(1),Side=side.slice(0,1).toUpperCase()+side.slice(1),Object=object.slice(0,1).toUpperCase()+object.slice(1),method="move"+Point+"To"+Edge+"OfNode",getNode="text"===object?"getNode":"getClosest"+Object,getDirectionNode="get"+Side+Object,value=editor.value,document=value.document,p=value.selection[point],node=document[getNode](p.key);if(node){var target=document[getDirectionNode](node.key);target&&editor[method](target)}}function pointBackward(editor,point){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(n<0)return pointForward(editor,point,-n);var Point=point.slice(0,1).toUpperCase()+point.slice(1),value=editor.value,document=value.document,selection=value.selection,p=selection[point],hasVoidParent=document.hasVoidParent(p.path,editor);if(!hasVoidParent&&p.offset-n>=0){var range=selection["move"+Point+"Backward"](n);editor.select(range)}else{var previous=document.getPreviousText(p.path);if(previous){var isInBlock=document.getClosestBlock(p.path).hasNode(previous.key),isPreviousInVoid=previous&&document.hasVoidParent(previous.key,editor);if(editor["move"+Point+"ToEndOfNode"](previous),!hasVoidParent&&!isPreviousInVoid&&isInBlock){var _range=editor.value.selection["move"+Point+"Backward"](n);editor.select(_range)}}}}}function pointForward(editor,point){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==n){if(n<0)return pointBackward(editor,point,-n);var Point=point.slice(0,1).toUpperCase()+point.slice(1),value=editor.value,document=value.document,selection=value.selection,p=selection[point],text=document.getNode(p.path),hasVoidParent=document.hasVoidParent(p.path,editor);if(!hasVoidParent&&p.offset+n<=text.text.length){var range=selection["move"+Point+"Forward"](n);editor.select(range)}else{var next=document.getNextText(p.path);if(next){var isInBlock=document.getClosestBlock(p.path).hasNode(next.key),isNextInVoid=document.hasVoidParent(next.key,editor);if(editor["move"+Point+"ToStartOfNode"](next),!hasVoidParent&&!isNextInVoid&&isInBlock){var _range2=editor.value.selection["move"+Point+"Forward"](n);editor.select(_range2)}}}}}function pointWordBackward(editor,pointName){var value=editor.value,document=value.document,point=value.selection[pointName],block=document.getClosestBlock(point.key),o=block.getOffset(point.key)+point.offset,text=block.text,n=TextUtils.getWordOffsetBackward(text,o);editor.command(pointBackward,pointName,n>0?n:1)}function pointWordForward(editor,pointName){var value=editor.value,document=value.document,point=value.selection[pointName],block=document.getClosestBlock(point.key),o=block.getOffset(point.key)+point.offset,text=block.text,n=TextUtils.getWordOffsetForward(text,o);editor.command(pointForward,pointName,n>0?n:1)}Commands$4.blur=function(editor){editor.select({isFocused:!1})},Commands$4.deselect=function(editor){var range=Selection.create();editor.select(range)},Commands$4.focus=function(editor){editor.select({isFocused:!0})},Commands$4.flip=function(editor){editor.command(proxy,"flip")},Commands$4.moveAnchorBackward=function(editor){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];editor.command.apply(editor,[pointBackward,"anchor"].concat(args))},Commands$4.moveAnchorWordBackward=function(editor){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];editor.command.apply(editor,[pointWordBackward,"anchor"].concat(args))},Commands$4.moveAnchorForward=function(editor){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];editor.command.apply(editor,[pointForward,"anchor"].concat(args))},Commands$4.moveAnchorWordForward=function(editor){for(var _len4=arguments.length,args=Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];editor.command.apply(editor,[pointWordForward,"anchor"].concat(args))},Commands$4.moveAnchorTo=function(editor){for(var _len5=arguments.length,args=Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];editor.command.apply(editor,[proxy,"moveAnchorTo"].concat(args))},Commands$4.moveAnchorToEndOfBlock=function(editor){editor.command(pointEdgeObject,"anchor","end","block")},Commands$4.moveAnchorToEndOfInline=function(editor){editor.command(pointEdgeObject,"anchor","end","inline")},Commands$4.moveAnchorToEndOfDocument=function(editor){editor.moveAnchorToEndOfNode(editor.value.document).moveToAnchor()},Commands$4.moveAnchorToEndOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"anchor","end","next","block")},Commands$4.moveAnchorToEndOfNextInline=function(editor){editor.command(pointEdgeSideObject,"anchor","end","next","inline")},Commands$4.moveAnchorToEndOfNextText=function(editor){editor.command(pointEdgeSideObject,"anchor","end","next","text")},Commands$4.moveAnchorToEndOfNode=function(editor){for(var _len6=arguments.length,args=Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++)args[_key6-1]=arguments[_key6];editor.command.apply(editor,[proxy,"moveAnchorToEndOfNode"].concat(args))},Commands$4.moveAnchorToEndOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"anchor","end","previous","block")},Commands$4.moveAnchorToEndOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"anchor","end","previous","inline")},Commands$4.moveAnchorToEndOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"anchor","end","previous","text")},Commands$4.moveAnchorToEndOfText=function(editor){editor.command(pointEdgeObject,"anchor","end","text")},Commands$4.moveAnchorToStartOfBlock=function(editor){editor.command(pointEdgeObject,"anchor","start","block")},Commands$4.moveAnchorToStartOfDocument=function(editor){editor.moveAnchorToStartOfNode(editor.value.document).moveToAnchor()},Commands$4.moveAnchorToStartOfInline=function(editor){editor.command(pointEdgeObject,"anchor","start","inline")},Commands$4.moveAnchorToStartOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"anchor","start","next","block")},Commands$4.moveAnchorToStartOfNextInline=function(editor){editor.command(pointEdgeSideObject,"anchor","start","next","inline")},Commands$4.moveAnchorToStartOfNextText=function(editor){editor.command(pointEdgeSideObject,"anchor","start","next","text")},Commands$4.moveAnchorToStartOfNode=function(editor){for(var _len7=arguments.length,args=Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++)args[_key7-1]=arguments[_key7];editor.command.apply(editor,[proxy,"moveAnchorToStartOfNode"].concat(args))},Commands$4.moveAnchorToStartOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"anchor","start","previous","block")},Commands$4.moveAnchorToStartOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"anchor","start","previous","inline")},Commands$4.moveAnchorToStartOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"anchor","start","previous","text")},Commands$4.moveAnchorToStartOfText=function(editor){editor.command(pointEdgeObject,"anchor","start","text")},Commands$4.moveBackward=function(editor){var chars=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0!==chars){var value=editor.value,document=value.document,start=value.selection.start,startBlock=document.getClosestBlock(start.key),offset=startBlock.getOffset(start.key)+start.offset,text=startBlock.text,charsOffset=TextUtils.getCharOffsetBackward(text,offset,chars);editor.moveAnchorBackward(charsOffset).moveFocusBackward(charsOffset)}},Commands$4.moveWordBackward=function(editor){for(var _len8=arguments.length,args=Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++)args[_key8-1]=arguments[_key8];editor.moveFocusWordBackward.apply(editor,args).moveToFocus()},Commands$4.moveEndBackward=function(editor){for(var _len9=arguments.length,args=Array(_len9>1?_len9-1:0),_key9=1;_key9<_len9;_key9++)args[_key9-1]=arguments[_key9];editor.command.apply(editor,[pointBackward,"end"].concat(args))},Commands$4.moveEndWordBackward=function(editor){for(var _len10=arguments.length,args=Array(_len10>1?_len10-1:0),_key10=1;_key10<_len10;_key10++)args[_key10-1]=arguments[_key10];editor.command.apply(editor,[pointWordBackward,"end"].concat(args))},Commands$4.moveEndForward=function(editor){for(var _len11=arguments.length,args=Array(_len11>1?_len11-1:0),_key11=1;_key11<_len11;_key11++)args[_key11-1]=arguments[_key11];editor.command.apply(editor,[pointForward,"end"].concat(args))},Commands$4.moveEndWordForward=function(editor){for(var _len12=arguments.length,args=Array(_len12>1?_len12-1:0),_key12=1;_key12<_len12;_key12++)args[_key12-1]=arguments[_key12];editor.command.apply(editor,[pointWordForward,"end"].concat(args))},Commands$4.moveEndTo=function(editor){for(var _len13=arguments.length,args=Array(_len13>1?_len13-1:0),_key13=1;_key13<_len13;_key13++)args[_key13-1]=arguments[_key13];editor.command.apply(editor,[proxy,"moveEndTo"].concat(args))},Commands$4.moveEndToEndOfBlock=function(editor){editor.command(pointEdgeObject,"end","end","block")},Commands$4.moveEndToEndOfDocument=function(editor){editor.moveEndToEndOfNode(editor.value.document).moveToEnd()},Commands$4.moveEndToEndOfInline=function(editor){editor.command(pointEdgeObject,"end","end","inline")},Commands$4.moveEndToEndOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"end","end","next","block")},Commands$4.moveEndToEndOfNextInline=function(editor){editor.command(pointEdgeSideObject,"end","end","next","inline")},Commands$4.moveEndToEndOfNextText=function(editor){editor.command(pointEdgeSideObject,"end","end","next","text")},Commands$4.moveEndToEndOfNode=function(editor){for(var _len14=arguments.length,args=Array(_len14>1?_len14-1:0),_key14=1;_key14<_len14;_key14++)args[_key14-1]=arguments[_key14];editor.command.apply(editor,[proxy,"moveEndToEndOfNode"].concat(args))},Commands$4.moveEndToEndOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"end","end","previous","block")},Commands$4.moveEndToEndOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"end","end","previous","inline")},Commands$4.moveEndToEndOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"end","end","previous","text")},Commands$4.moveEndToEndOfText=function(editor){editor.command(pointEdgeObject,"end","end","text")},Commands$4.moveEndToStartOfBlock=function(editor){editor.command(pointEdgeObject,"end","start","block")},Commands$4.moveEndToStartOfDocument=function(editor){editor.moveEndToStartOfNode(editor.value.document).moveToEnd()},Commands$4.moveEndToStartOfInline=function(editor){editor.command(pointEdgeObject,"end","start","inline")},Commands$4.moveEndToStartOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"end","start","next","block")},Commands$4.moveEndToStartOfNextInline=function(editor){editor.command(pointEdgeSideObject,"end","start","next","inline")},Commands$4.moveEndToStartOfNextText=function(editor){editor.command(pointEdgeSideObject,"end","start","next","text")},Commands$4.moveEndToStartOfNode=function(editor){for(var _len15=arguments.length,args=Array(_len15>1?_len15-1:0),_key15=1;_key15<_len15;_key15++)args[_key15-1]=arguments[_key15];editor.command.apply(editor,[proxy,"moveEndToStartOfNode"].concat(args))},Commands$4.moveEndToStartOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"end","start","previous","block")},Commands$4.moveEndToStartOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"end","start","previous","inline")},Commands$4.moveEndToStartOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"end","start","previous","text")},Commands$4.moveEndToStartOfText=function(editor){editor.command(pointEdgeObject,"end","start","text")},Commands$4.moveFocusBackward=function(editor){for(var _len16=arguments.length,args=Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++)args[_key16-1]=arguments[_key16];editor.command.apply(editor,[pointBackward,"focus"].concat(args))},Commands$4.moveFocusWordBackward=function(editor){for(var _len17=arguments.length,args=Array(_len17>1?_len17-1:0),_key17=1;_key17<_len17;_key17++)args[_key17-1]=arguments[_key17];editor.command.apply(editor,[pointWordBackward,"focus"].concat(args))},Commands$4.moveFocusForward=function(editor){for(var _len18=arguments.length,args=Array(_len18>1?_len18-1:0),_key18=1;_key18<_len18;_key18++)args[_key18-1]=arguments[_key18];editor.command.apply(editor,[pointForward,"focus"].concat(args))},Commands$4.moveFocusWordForward=function(editor){for(var _len19=arguments.length,args=Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)args[_key19-1]=arguments[_key19];editor.command.apply(editor,[pointWordForward,"focus"].concat(args))},Commands$4.moveFocusTo=function(editor){for(var _len20=arguments.length,args=Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];editor.command.apply(editor,[proxy,"moveFocusTo"].concat(args))},Commands$4.moveFocusToEndOfBlock=function(editor){editor.command(pointEdgeObject,"focus","end","block")},Commands$4.moveFocusToEndOfDocument=function(editor){editor.moveFocusToEndOfNode(editor.value.document).moveToFocus()},Commands$4.moveFocusToEndOfInline=function(editor){editor.command(pointEdgeObject,"focus","end","inline")},Commands$4.moveFocusToEndOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"focus","end","next","block")},Commands$4.moveFocusToEndOfNextInline=function(editor){editor.command(pointEdgeSideObject,"focus","end","next","inline")},Commands$4.moveFocusToEndOfNextText=function(editor){editor.command(pointEdgeSideObject,"focus","end","next","text")},Commands$4.moveFocusToEndOfNode=function(editor){for(var _len21=arguments.length,args=Array(_len21>1?_len21-1:0),_key21=1;_key21<_len21;_key21++)args[_key21-1]=arguments[_key21];editor.command.apply(editor,[proxy,"moveFocusToEndOfNode"].concat(args))},Commands$4.moveFocusToEndOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"focus","end","previous","block")},Commands$4.moveFocusToEndOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"focus","end","previous","inline")},Commands$4.moveFocusToEndOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"focus","end","previous","text")},Commands$4.moveFocusToEndOfText=function(editor){editor.command(pointEdgeObject,"focus","end","text")},Commands$4.moveFocusToStartOfBlock=function(editor){editor.command(pointEdgeObject,"focus","start","block")},Commands$4.moveFocusToStartOfDocument=function(editor){editor.moveFocusToStartOfNode(editor.value.document).moveToFocus()},Commands$4.moveFocusToStartOfInline=function(editor){editor.command(pointEdgeObject,"focus","start","inline")},Commands$4.moveFocusToStartOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"focus","start","next","block")},Commands$4.moveFocusToStartOfNextInline=function(editor){editor.command(pointEdgeSideObject,"focus","start","next","inline")},Commands$4.moveFocusToStartOfNextText=function(editor){editor.command(pointEdgeSideObject,"focus","start","next","text")},Commands$4.moveFocusToStartOfNode=function(editor){for(var _len22=arguments.length,args=Array(_len22>1?_len22-1:0),_key22=1;_key22<_len22;_key22++)args[_key22-1]=arguments[_key22];editor.command.apply(editor,[proxy,"moveFocusToStartOfNode"].concat(args))},Commands$4.moveFocusToStartOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"focus","start","previous","block")},Commands$4.moveFocusToStartOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"focus","start","previous","inline")},Commands$4.moveFocusToStartOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"focus","start","previous","text")},Commands$4.moveFocusToStartOfText=function(editor){editor.command(pointEdgeObject,"focus","start","text")},Commands$4.moveForward=function(editor){var chars=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0!==chars){var value=editor.value,document=value.document,start=value.selection.start,startBlock=document.getClosestBlock(start.path),offset=startBlock.getOffset(start.key)+start.offset,text=startBlock.text,charsOffset=TextUtils.getCharOffsetForward(text,offset,chars);editor.moveAnchorForward(charsOffset).moveFocusForward(charsOffset)}},Commands$4.moveWordForward=function(editor){for(var _editor$moveFocusWord,_len23=arguments.length,args=Array(_len23>1?_len23-1:0),_key23=1;_key23<_len23;_key23++)args[_key23-1]=arguments[_key23];(_editor$moveFocusWord=editor.moveFocusWordForward.apply(editor,args)).moveToFocus.apply(_editor$moveFocusWord,args)},Commands$4.moveStartBackward=function(editor){for(var _len24=arguments.length,args=Array(_len24>1?_len24-1:0),_key24=1;_key24<_len24;_key24++)args[_key24-1]=arguments[_key24];editor.command.apply(editor,[pointBackward,"start"].concat(args))},Commands$4.moveStartWordBackward=function(editor){for(var _len25=arguments.length,args=Array(_len25>1?_len25-1:0),_key25=1;_key25<_len25;_key25++)args[_key25-1]=arguments[_key25];editor.command.apply(editor,[pointWordBackward,"start"].concat(args))},Commands$4.moveStartForward=function(editor){for(var _len26=arguments.length,args=Array(_len26>1?_len26-1:0),_key26=1;_key26<_len26;_key26++)args[_key26-1]=arguments[_key26];editor.command.apply(editor,[pointForward,"start"].concat(args))},Commands$4.moveStartWordForward=function(editor){for(var _len27=arguments.length,args=Array(_len27>1?_len27-1:0),_key27=1;_key27<_len27;_key27++)args[_key27-1]=arguments[_key27];editor.command.apply(editor,[pointWordForward,"start"].concat(args))},Commands$4.moveStartTo=function(editor){for(var _len28=arguments.length,args=Array(_len28>1?_len28-1:0),_key28=1;_key28<_len28;_key28++)args[_key28-1]=arguments[_key28];editor.command.apply(editor,[proxy,"moveStartTo"].concat(args))},Commands$4.moveStartToEndOfBlock=function(editor){editor.command(pointEdgeObject,"start","end","block")},Commands$4.moveStartToEndOfDocument=function(editor){editor.moveStartToEndOfNode(editor.value.document).moveToStart()},Commands$4.moveStartToEndOfInline=function(editor){editor.command(pointEdgeObject,"start","end","inline")},Commands$4.moveStartToEndOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"start","end","next","block")},Commands$4.moveStartToEndOfNextInline=function(editor){editor.command(pointEdgeSideObject,"start","end","next","inline")},Commands$4.moveStartToEndOfNextText=function(editor){editor.command(pointEdgeSideObject,"start","end","next","text")},Commands$4.moveStartToEndOfNode=function(editor){for(var _len29=arguments.length,args=Array(_len29>1?_len29-1:0),_key29=1;_key29<_len29;_key29++)args[_key29-1]=arguments[_key29];editor.command.apply(editor,[proxy,"moveStartToEndOfNode"].concat(args))},Commands$4.moveStartToEndOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"start","end","previous","block")},Commands$4.moveStartToEndOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"start","end","previous","inline")},Commands$4.moveStartToEndOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"start","end","previous","text")},Commands$4.moveStartToEndOfText=function(editor){editor.command(pointEdgeObject,"start","end","text")},Commands$4.moveStartToStartOfBlock=function(editor){editor.command(pointEdgeObject,"start","start","block")},Commands$4.moveStartToStartOfDocument=function(editor){editor.moveStartToStartOfNode(editor.value.document).moveToStart()},Commands$4.moveStartToStartOfInline=function(editor){editor.command(pointEdgeObject,"start","start","inline")},Commands$4.moveStartToStartOfNextBlock=function(editor){editor.command(pointEdgeSideObject,"start","start","next","block")},Commands$4.moveStartToStartOfNextInline=function(editor){editor.command(pointEdgeSideObject,"start","start","next","inline")},Commands$4.moveStartToStartOfNextText=function(editor){editor.command(pointEdgeSideObject,"start","start","next","text")},Commands$4.moveStartToStartOfNode=function(editor){for(var _len30=arguments.length,args=Array(_len30>1?_len30-1:0),_key30=1;_key30<_len30;_key30++)args[_key30-1]=arguments[_key30];editor.command.apply(editor,[proxy,"moveStartToStartOfNode"].concat(args))},Commands$4.moveStartToStartOfPreviousBlock=function(editor){editor.command(pointEdgeSideObject,"start","start","previous","block")},Commands$4.moveStartToStartOfPreviousInline=function(editor){editor.command(pointEdgeSideObject,"start","start","previous","inline")},Commands$4.moveStartToStartOfPreviousText=function(editor){editor.command(pointEdgeSideObject,"start","start","previous","text")},Commands$4.moveStartToStartOfText=function(editor){editor.command(pointEdgeObject,"start","start","text")},Commands$4.moveTo=function(editor){for(var _len31=arguments.length,args=Array(_len31>1?_len31-1:0),_key31=1;_key31<_len31;_key31++)args[_key31-1]=arguments[_key31];editor.command.apply(editor,[proxy,"moveTo"].concat(args))},Commands$4.moveToAnchor=function(editor){editor.command(proxy,"moveToAnchor")},Commands$4.moveToEnd=function(editor){editor.command(proxy,"moveToEnd")},Commands$4.moveToEndOfBlock=function(editor){editor.moveEndToEndOfBlock().moveToEnd()},Commands$4.moveToEndOfDocument=function(editor){editor.moveEndToEndOfNode(editor.value.document).moveToEnd()},Commands$4.moveToEndOfInline=function(editor){editor.moveEndToEndOfInline().moveToEnd()},Commands$4.moveToEndOfNextBlock=function(editor){editor.moveEndToEndOfNextBlock().moveToEnd()},Commands$4.moveToEndOfNextInline=function(editor){editor.moveEndToEndOfNextInline().moveToEnd()},Commands$4.moveToEndOfNextText=function(editor){editor.moveEndToEndOfNextText().moveToEnd()},Commands$4.moveToEndOfNode=function(editor){for(var _len32=arguments.length,args=Array(_len32>1?_len32-1:0),_key32=1;_key32<_len32;_key32++)args[_key32-1]=arguments[_key32];editor.command.apply(editor,[proxy,"moveToEndOfNode"].concat(args))},Commands$4.moveToEndOfPreviousBlock=function(editor){editor.moveStartToEndOfPreviousBlock().moveToStart()},Commands$4.moveToEndOfPreviousInline=function(editor){editor.moveStartToEndOfPreviousInline().moveToStart()},Commands$4.moveToEndOfPreviousText=function(editor){editor.moveStartToEndOfPreviousText().moveToStart()},Commands$4.moveToEndOfText=function(editor){editor.moveEndToEndOfText().moveToEnd()},Commands$4.moveToFocus=function(editor){editor.command(proxy,"moveToFocus")},Commands$4.moveToRangeOfDocument=function(editor){editor.moveToRangeOfNode(editor.value.document)},Commands$4.moveToRangeOfNode=function(editor){for(var _len33=arguments.length,args=Array(_len33>1?_len33-1:0),_key33=1;_key33<_len33;_key33++)args[_key33-1]=arguments[_key33];editor.command.apply(editor,[proxy,"moveToRangeOfNode"].concat(args))},Commands$4.moveToStart=function(editor){editor.command(proxy,"moveToStart")},Commands$4.moveToStartOfBlock=function(editor){editor.moveStartToStartOfBlock().moveToStart()},Commands$4.moveToStartOfDocument=function(editor){editor.moveStartToStartOfNode(editor.value.document).moveToStart()},Commands$4.moveToStartOfInline=function(editor){editor.moveStartToStartOfInline().moveToStart()},Commands$4.moveToStartOfNextBlock=function(editor){editor.moveEndToStartOfNextBlock().moveToEnd()},Commands$4.moveToStartOfNextInline=function(editor){editor.moveEndToStartOfNextInline().moveToEnd()},Commands$4.moveToStartOfNextText=function(editor){editor.moveEndToStartOfNextText().moveToEnd()},Commands$4.moveToStartOfNode=function(editor){for(var _len34=arguments.length,args=Array(_len34>1?_len34-1:0),_key34=1;_key34<_len34;_key34++)args[_key34-1]=arguments[_key34];editor.command.apply(editor,[proxy,"moveToStartOfNode"].concat(args))},Commands$4.moveToStartOfPreviousBlock=function(editor){editor.moveStartToStartOfPreviousBlock().moveToStart()},Commands$4.moveToStartOfPreviousInline=function(editor){editor.moveStartToStartOfPreviousInline().moveToStart()},Commands$4.moveToStartOfPreviousText=function(editor){editor.moveStartToStartOfPreviousText().moveToStart()},Commands$4.moveToStartOfText=function(editor){editor.moveStartToStartOfText().moveToStart()},Commands$4.select=function(editor,properties){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};properties=Selection.createProperties(properties);var _options$snapshot=options.snapshot,snapshot=void 0!==_options$snapshot&&_options$snapshot,value=editor.value,document=value.document,selection=value.selection,newProperties={},next=selection.setProperties(properties);for(var k in next=document.resolveSelection(next),properties=pick_default()(next,Object.keys(properties)))!0!==snapshot&&(0,immutable_es.is)(properties[k],selection[k])||(newProperties[k]=properties[k]);if(selection.marks&&!newProperties.marks&&(newProperties.anchor||newProperties.focus)&&(newProperties.marks=null),0!==Object.keys(newProperties).length){var prevProperties=pick_default()(selection.toJSON(),Object.keys(newProperties));editor.applyOperation({type:"set_selection",value:value,properties:prevProperties,newProperties:newProperties},snapshot?{skip:!1,merge:!1}:{})}},Commands$4.setAnchor=function(editor){for(var _len35=arguments.length,args=Array(_len35>1?_len35-1:0),_key35=1;_key35<_len35;_key35++)args[_key35-1]=arguments[_key35];editor.command.apply(editor,[proxy,"setAnchor"].concat(args))},Commands$4.setEnd=function(editor){for(var _len36=arguments.length,args=Array(_len36>1?_len36-1:0),_key36=1;_key36<_len36;_key36++)args[_key36-1]=arguments[_key36];editor.command.apply(editor,[proxy,"setEnd"].concat(args))},Commands$4.setFocus=function(editor){for(var _len37=arguments.length,args=Array(_len37>1?_len37-1:0),_key37=1;_key37<_len37;_key37++)args[_key37-1]=arguments[_key37];editor.command.apply(editor,[proxy,"setFocus"].concat(args))},Commands$4.setStart=function(editor){for(var _len38=arguments.length,args=Array(_len38>1?_len38-1:0),_key38=1;_key38<_len38;_key38++)args[_key38-1]=arguments[_key38];editor.command.apply(editor,[proxy,"setStart"].concat(args))},Commands$4.snapshotSelection=function(editor){editor.withoutMerging((function(){editor.select(editor.value.selection,{snapshot:!0})}))};var Commands$5={};function QueriesPlugin(){var queries=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{onConstruct:function onConstruct(editor,next){for(var query in queries)editor.registerQuery(query);return next()},onQuery:function onQuery(query,editor,next){var type=query.type,args=query.args,fn=queries[type];if(!fn)return next();var ret=fn.apply(void 0,[editor].concat(toConsumableArray(args)));return void 0===ret?next():ret}}}Commands$5.setData=function(editor){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},value=editor.value,newProperties=Value.createProperties({data:data}),prevProperties=pick_default()(value,Object.keys(newProperties));editor.applyOperation({type:"set_value",properties:prevProperties,newProperties:newProperties})},Commands$5.addAnnotation=function(editor,annotation){annotation=Annotation.create(annotation),editor.applyOperation({type:"add_annotation",annotation:annotation})},Commands$5.removeAnnotation=function(editor,annotation){annotation=Annotation.create(annotation),editor.applyOperation({type:"remove_annotation",annotation:annotation})},Commands$5.setAnnotation=function(editor,annotation,newProperties){annotation=Annotation.create(annotation),newProperties=Annotation.createProperties(newProperties),editor.applyOperation({type:"set_annotation",properties:annotation,newProperties:newProperties})},Commands$5.setAnnotations=function(editor){var annotations=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],value=editor.value,newProperties=Value.createProperties({annotations:annotations}),prevProperties=pick_default()(value,Object.keys(newProperties));editor.applyOperation({type:"set_value",properties:prevProperties,newProperties:newProperties})};var SlateError=function(_Error){function SlateError(code){var attrs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,SlateError);var _this=possibleConstructorReturn(this,(SlateError.__proto__||Object.getPrototypeOf(SlateError)).call(this,code));for(var key in _this.code=code,attrs)_this[key]=attrs[key];return Error.captureStackTrace?Error.captureStackTrace(_this,_this.constructor):_this.stack=(new Error).stack,_this}return inherits(SlateError,_Error),SlateError}(Error);function SchemaPlugin(schema){var rules=schema.rules,document=schema.document,blocks=schema.blocks,inlines=schema.inlines,marks=schema.marks,annotations=schema.annotations,decorations=schema.decorations,schemaRules=[];if(rules&&(schemaRules=schemaRules.concat(rules)),document&&schemaRules.push(_extends({match:[{object:"document"}]},document)),blocks)for(var key in blocks)schemaRules.push(_extends({match:[{object:"block",type:key}]},blocks[key]));if(inlines)for(var _key in inlines)schemaRules.push(_extends({match:[{object:"inline",type:_key}]},inlines[_key]));if(marks)for(var _key2 in marks)schemaRules.push(_extends({match:[{object:"mark",type:_key2}]},marks[_key2]));if(annotations)for(var _key3 in annotations)schemaRules.push(_extends({match:[{object:"annotation",type:_key3}]},annotations[_key3]));if(decorations)for(var _key4 in decorations)schemaRules.push(_extends({match:[{object:"decoration",type:_key4}]},decorations[_key4]));function validateNode(node,editor,next){var matches=schemaRules.filter((function(r){return testRules(node,r.match)})),failure=validateRules(node,matches,schemaRules,{every:!0});return failure?new SlateError(failure.code,failure):next()}return[{normalizeNode:function normalizeNode(node,editor,next){var error=validateNode(node,editor,(function(){}));return error?function(){var rule=error.rule,size=editor.operations.size;rule.normalize&&rule.normalize(editor,error),editor.operations.size===size&&function defaultNormalize(editor,error){var code=error.code,node=error.node,child=error.child,next=error.next,previous=error.previous,key=error.key,mark=error.mark;switch(code){case"child_max_invalid":case"child_object_invalid":case"child_type_invalid":case"child_unknown":case"first_child_object_invalid":case"first_child_type_invalid":case"last_child_object_invalid":case"last_child_type_invalid":return"text"===child.object&&"block"===node.object&&1===node.nodes.size?editor.removeNodeByKey(node.key):editor.removeNodeByKey(child.key);case"previous_sibling_object_invalid":case"previous_sibling_type_invalid":return"text"===previous.object&&"block"===node.object&&1===node.nodes.size?editor.removeNodeByKey(node.key):editor.removeNodeByKey(previous.key);case"next_sibling_object_invalid":case"next_sibling_type_invalid":return"text"===next.object&&"block"===node.object&&1===node.nodes.size?editor.removeNodeByKey(node.key):editor.removeNodeByKey(next.key);case"child_min_invalid":case"node_text_invalid":case"parent_object_invalid":case"parent_type_invalid":return"document"===node.object?node.nodes.forEach((function(n){return editor.removeNodeByKey(n.key)})):editor.removeNodeByKey(node.key);case"node_data_invalid":return void 0===node.data.get(key)&&"document"!==node.object?editor.removeNodeByKey(node.key):editor.setNodeByKey(node.key,{data:node.data.delete(key)});case"node_mark_invalid":return node.getTexts().forEach((function(t){return editor.removeMarkByKey(t.key,0,t.text.length,mark)}));default:return editor.removeNodeByKey(node.key)}}(editor,error)}:next()},validateNode:validateNode},QueriesPlugin({isAtomic:function isAtomic(editor,format){var rule=schemaRules.find((function(r){return"isAtomic"in r&&testRules(format,r.match)}));return rule&&rule.isAtomic},isVoid:function isVoid(editor,node){var rule=schemaRules.find((function(r){return"isVoid"in r&&testRules(node,r.match)}));return rule&&rule.isVoid}})]}function testRules(object,rules){return!validateRules(object,rules)}function validateRules(object,rule,rules){var options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},_options$every=options.every,every=void 0!==_options$every&&_options$every,_options$match=options.match;if("function"==typeof rule)return rule(object,void 0===_options$match?null:_options$match)?null:fail("node_invalid",{rule:rule,node:object});if(Array.isArray(rule)){var array=rule.length?rule:[{}],first=void 0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=array[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _error=validateRules(object,_step.value,rules);if(first=first||_error,every&&_error)return _error;if(!every&&!_error)return}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return first}var error=function validateObject(node,rule){if(null==rule.object)return;if(rule.object===node.object)return;if("function"==typeof rule.object&&rule.object(node.object))return;return fail("node_object_invalid",{rule:rule,node:node})}(object,rule)||function validateType(node,rule){if(null==rule.type)return;if(rule.type===node.type)return;if("function"==typeof rule.type&&rule.type(node.type))return;return fail("node_type_invalid",{rule:rule,node:node})}(object,rule)||function validateData(node,rule){if(null==rule.data)return;if(null==node.data)return;if("function"==typeof rule.data){if(rule.data(node.data))return;return fail("node_data_invalid",{rule:rule,node:node})}for(var key in rule.data){var fn=rule.data[key],value=node.data&&node.data.get(key);if(!("function"==typeof fn?fn(value):fn===value))return fail("node_data_invalid",{rule:rule,node:node,key:key,value:value})}}(object,rule)||function validateMarks(node,rule){if(null==rule.marks)return;var marks="text"===node.object?node.marks.toArray():node.getMarks().toArray(),_loop=function _loop(mark){return rule.marks.some((function(def){return"function"==typeof def.type?def.type(mark.type):def.type===mark.type}))?"continue":{v:fail("node_mark_invalid",{rule:rule,node:node,mark:mark})}},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=marks[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _ret=_loop(_step2.value);if("continue"!==_ret&&"object"===(void 0===_ret?"undefined":_typeof(_ret)))return _ret.v}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}(object,rule)||function validateText(node,rule){if(null==rule.text)return;var text=node.text,valid="function"==typeof rule.text?rule.text(text):rule.text.test(text);if(valid)return;return fail("node_text_invalid",{rule:rule,node:node,text:text})}(object,rule)||function validateFirst(node,rule){if(null==rule.first)return;var first=node.nodes.first();if(!first)return;var error=validateRules(first,rule.first);if(!error)return;return error.rule=rule,error.node=node,error.child=first,error.code=error.code.replace("node_","first_child_"),error}(object,rule)||function validateLast(node,rule){if(null==rule.last)return;var last=node.nodes.last();if(!last)return;var error=validateRules(last,rule.last);if(!error)return;return error.rule=rule,error.node=node,error.child=last,error.code=error.code.replace("node_","last_child_"),error}(object,rule)||function validateNodes(node,rule){var rules=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null==node.nodes)return;var children=node.nodes,defs=null!=rule.nodes?rule.nodes.slice():[],count=0,lastCount=0,min=null,index=-1,def=null,max=null,child=null,previous=null,next=null;function nextDef(){return 0!==defs.length&&(def=defs.shift(),lastCount=count,count=0,min=def.min||null,max=def.max||null,!0)}function nextChild(){return previous=(index+=1)?children.get(index-1):null,child=children.get(index),next=children.get(index+1),!!child&&(lastCount=count,count+=1,!0)}function rewind(){index>0&&(index-=1,count=lastCount)}null!=rule.nodes&&nextDef();for(;nextChild();){var err=validateParent(node,child,rules)||validatePrevious(node,child,previous,index,rules)||validateNext(node,child,next,index,rules);if(err)return err;if(null!=rule.nodes){if(!def)return fail("child_unknown",{rule:rule,node:node,child:child,index:index});if(def.match){var error=validateRules(child,def.match);if(error){if(null!=max&&count-1>max)return rewind(),fail("child_max_invalid",{rule:rule,node:node,index:index,child:children.get(index),count:count,limit:max});var lastMin=min;if(nextDef()){if(lastCount-1>=lastMin){index-=1;continue}return null==validateRules(child,def.match)?(rewind(),fail("child_min_invalid",{rule:rule,node:node,index:index,count:lastCount-1,limit:lastMin})):(error.rule=rule,error.node=node,error.child=child,error.index=index,error.code=error.code.replace("node_","child_"),error)}return null!=max&&count>max?fail("child_unknown",{rule:rule,node:node,child:child,index:index}):(error.rule=rule,error.node=node,error.child=child,error.index=index,error.code=error.code.replace("node_","child_"),error)}}}}if(null!=max&&count>max)return fail("child_max_invalid",{rule:rule,node:node,index:index-1,count:count,child:children.get(index-1),limit:max});if(null!=rule.nodes)do{if(count<min)return fail("child_min_invalid",{rule:rule,node:node,index:index,count:count,limit:min})}while(nextDef())}(object,rule,rules);return error}function validateParent(node,child,rules){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=rules[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var rule=_step3.value;if(null!=rule.parent&&testRules(child,rule.match)){var error=validateRules(node,rule.parent);if(error)return error.rule=rule,error.parent=node,error.node=child,error.code=error.code.replace("node_","parent_"),error}}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}function validatePrevious(node,child,previous,index,rules){if(previous){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=rules[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var rule=_step4.value;if(null!=rule.previous&&testRules(child,rule.match)){var error=validateRules(previous,rule.previous);if(error)return error.rule=rule,error.node=node,error.child=child,error.index=index,error.previous=previous,error.code=error.code.replace("node_","previous_sibling_"),error}}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}}function validateNext(node,child,next,index,rules){if(next){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=rules[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var rule=_step5.value;if(null!=rule.next&&testRules(child,rule.match)){var error=validateRules(next,rule.next,[],{match:child});if(error)return error.rule=rule,error.node=node,error.child=child,error.index=index,error.next=next,error.code=error.code.replace("node_","next_sibling_"),error}}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}}function fail(code,attrs){return _extends({code:code},attrs)}function deleteExpanded(editor){editor.value.selection.isExpanded&&editor.delete()}var Commands$6={};Commands$6.addMark=function(editor,mark){mark=Mark.create(mark);var value=editor.value,document=value.document,selection=value.selection;if(selection.isExpanded)editor.addMarkAtRange(selection,mark);else if(selection.marks){var marks=selection.marks.add(mark),sel=selection.set("marks",marks);editor.select(sel)}else{var _marks=document.getActiveMarksAtRange(selection).add(mark),_sel=selection.set("marks",_marks);editor.select(_sel)}},Commands$6.addMarks=function(editor,marks){marks.forEach((function(mark){return editor.addMark(mark)}))},Commands$6.delete=function(editor){var selection=editor.value.selection;editor.deleteAtRange(selection),editor.moveToFocus()},Commands$6.deleteBackward=function(editor){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteBackwardAtRange(selection,n)},Commands$6.deleteCharBackward=function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteCharBackwardAtRange(selection)},Commands$6.deleteLineBackward=function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteLineBackwardAtRange(selection)},Commands$6.deleteWordBackward=function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteWordBackwardAtRange(selection)},Commands$6.deleteForward=function(editor){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteForwardAtRange(selection,n)},Commands$6.deleteCharForward=function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteCharForwardAtRange(selection)},Commands$6.deleteLineForward=function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteLineForwardAtRange(selection)},Commands$6.deleteWordForward=function(editor){var selection=editor.value.selection;selection.isExpanded?editor.delete():editor.deleteWordForwardAtRange(selection)},Commands$6.insertBlock=function(editor,block){deleteExpanded(editor),block=Block.create(block);var selection=editor.value.selection;editor.insertBlockAtRange(selection,block);var node=editor.value.document.getNode(block.key);node&&editor.moveToEndOfNode(node)},Commands$6.insertFragment=function(editor,fragment){if(fragment.nodes.size){deleteExpanded(editor);var value=editor.value,_value=value,document=_value.document,selection=_value.selection,start=selection.start,keys=Array.from(document.texts(),(function(_ref){return slicedToArray(_ref,1)[0].key}));editor.insertFragmentAtRange(selection,fragment);var newTexts=(document=(value=editor.value).document).getTexts().filter((function(n){return!keys.includes(n.key)}));if(0!==newTexts.size){var fragmentLength=fragment.text.length,startText=document.getNode(start.key)||newTexts.first(),endText=newTexts.last()||startText;if(startText!==endText){var parent=document.getCommonAncestor(startText.key,endText.key),startOffset=parent.getOffset(startText.key)+(start.key===startText.key?start.offset:0);endText=parent.getTextAtOffset(startOffset+fragmentLength-1)||endText,editor.moveTo(endText.key,startOffset+fragmentLength-parent.getOffset(endText.key))}else editor.moveTo(endText.key,fragmentLength)}}},Commands$6.insertInline=function(editor,inline){deleteExpanded(editor),inline=Inline.create(inline);var selection=editor.value.selection;editor.insertInlineAtRange(selection,inline);var node=editor.value.document.getNode(inline.key);node&&editor.moveToEndOfNode(node)},Commands$6.insertText=function(editor,text,marks){deleteExpanded(editor);var value=editor.value,document=value.document,selection=value.selection;marks=marks||selection.marks||document.getInsertMarksAtRange(selection),editor.withoutNormalizing((function(){editor.insertTextAtRange(selection,text,marks),selection.marks&&document!==editor.value.document&&editor.select({marks:null})}))},Commands$6.removeMark=function(editor,mark){mark=Mark.create(mark);var value=editor.value,document=value.document,selection=value.selection;if(selection.isExpanded)editor.removeMarkAtRange(selection,mark);else if(selection.marks){var marks=selection.marks.remove(mark),sel=selection.set("marks",marks);editor.select(sel)}else{var _marks2=document.getActiveMarksAtRange(selection).remove(mark),_sel2=selection.set("marks",_marks2);editor.select(_sel2)}},Commands$6.replaceMark=function(editor,oldMark,newMark){editor.removeMark(oldMark),editor.addMark(newMark)},Commands$6.setBlocks=function(editor,properties){var selection=editor.value.selection;editor.setBlocksAtRange(selection,properties)},Commands$6.setInlines=function(editor,properties){var selection=editor.value.selection;editor.setInlinesAtRange(selection,properties)},Commands$6.splitBlock=function(editor){var depth=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;deleteExpanded(editor);var value=editor.value,selection=value.selection,document=value.document,marks=selection.marks||document.getInsertMarksAtRange(selection);editor.splitBlockAtRange(selection,depth).moveToEnd(),marks&&0!==marks.size&&editor.select({marks:marks})},Commands$6.splitInline=function(editor,height){deleteExpanded(editor);var selection=editor.value.selection;editor.splitInlineAtRange(selection,height)},Commands$6.toggleMark=function(editor,mark){mark=Mark.create(mark),editor.value.activeMarks.has(mark)?editor.removeMark(mark):editor.addMark(mark)},Commands$6.unwrapBlock=function(editor,properties){var selection=editor.value.selection;editor.unwrapBlockAtRange(selection,properties)},Commands$6.unwrapInline=function(editor,properties){var selection=editor.value.selection;editor.unwrapInlineAtRange(selection,properties)},Commands$6.wrapBlock=function(editor,block){var selection=editor.value.selection;editor.wrapBlockAtRange(selection,block)},Commands$6.wrapInline=function(editor,inline){var selection=editor.value.selection;editor.wrapInlineAtRange(selection,inline)},Commands$6.wrapText=function(editor,prefix){var suffix=arguments.length>2&&void 0!==arguments[2]?arguments[2]:prefix,selection=editor.value.selection;editor.wrapTextAtRange(selection,prefix,suffix),selection.isCollapsed&&editor.moveStartBackward(prefix.length),editor.moveEndBackward(suffix.length),selection.isForward!==editor.value.selection.isForward&&editor.flip()};var debug$2=browser_default()("slate:editor"),Editor=function(){function Editor(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};classCallCheck(this,Editor);var _options$controller=options.controller,controller=void 0===_options$controller?this:_options$controller,_options$construct=options.construct,construct=void 0===_options$construct||_options$construct,_attrs$onChange=attrs.onChange,onChange=void 0===_attrs$onChange?function(){}:_attrs$onChange,_attrs$plugins=attrs.plugins,plugins=void 0===_attrs$plugins?[]:_attrs$plugins,_attrs$readOnly=attrs.readOnly,readOnly=void 0!==_attrs$readOnly&&_attrs$readOnly,_attrs$value=attrs.value,value=void 0===_attrs$value?Value.create():_attrs$value;this.controller=controller,this.middleware={},this.onChange=onChange,this.operations=(0,immutable_es.List)(),this.readOnly=null,this.value=null,this.tmp={dirty:[],flushing:!1,merge:null,normalize:!0,save:!0};var core=function CorePlugin(){var _options$plugins=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,plugins=void 0===_options$plugins?[]:_options$plugins,commands=CommandsPlugin(_extends({},Commands$1,Commands$2,Commands$3,Commands$4,Commands$5,Commands$6)),queries=QueriesPlugin({isAtomic:function isAtomic(){return!1},isVoid:function isVoid(){return!1}}),schema=SchemaPlugin({rules:[{match:{object:"document"},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:{object:"block"}},nodes:[{match:{object:"block"}}]},{match:{object:"block",first:[{object:"inline"},{object:"text"}]},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:{object:"inline"},nodes:[{match:[{object:"inline"},{object:"text"}]}]},{match:[{object:"block"},{object:"inline"}],nodes:[{min:1}],normalize:function normalize(editor,error){var code=error.code,node=error.node;"child_min_invalid"===code&&node.nodes.isEmpty()&&editor.insertNodeByKey(node.key,0,Text.create())}},{match:{object:"block"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],normalize:function normalize(editor,error){var code=error.code,node=error.node,text=Text.create(),i=void 0;if("first_child_object_invalid"===code)i=0;else{if("last_child_object_invalid"!==code)return;i=node.nodes.size}editor.insertNodeByKey(node.key,i,text)}},{match:{object:"inline"},first:[{object:"block"},{object:"text"}],last:[{object:"block"},{object:"text"}],previous:[{object:"block"},{object:"text"}],next:[{object:"block"},{object:"text"}],normalize:function normalize(editor,error){var code=error.code,node=error.node,index=error.index,text=Text.create(),i=void 0;if("first_child_object_invalid"===code)i=0;else if("last_child_object_invalid"===code)i=node.nodes.size;else if("previous_sibling_object_invalid"===code)i=index;else{if("next_sibling_object_invalid"!==code)return;i=index+1}editor.insertNodeByKey(node.key,i,text)}},{match:{object:"text"},next:function next(_next,match){return"text"!==_next.object||!match.marks.equals(_next.marks)},normalize:function normalize(editor,error){var code=error.code,next=error.next;"next_sibling_invalid"===code&&editor.mergeNodeByKey(next.key)}},{match:{object:"text"},previous:function previous(prev){return"text"!==prev.object||""!==prev.text},next:function next(_next2){return"text"!==_next2.object||""!==_next2.text},normalize:function normalize(editor,error){var code=error.code,next=error.next,previous=error.previous;"next_sibling_invalid"===code?editor.removeNodeByKey(next.key):"previous_sibling_invalid"===code&&editor.removeNodeByKey(previous.key)}}]});return[schema].concat(toConsumableArray(plugins),[commands,queries])}({plugins:plugins});registerPlugin(this,core),construct&&(this.run("onConstruct"),this.setReadOnly(readOnly),this.setValue(value,options))}return createClass(Editor,[{key:"applyOperation",value:function applyOperation(operation){var _this=this,operations=this.operations,controller=this.controller,value=this.value;is_plain_object_default()(operation)&&(operation=_extends({},operation,{value:value})),operation=Operation.create(operation),this.withoutNormalizing((function(){controller.save(operation),value=_this.value})),debug$2("apply",{operation:operation}),this.value=operation.apply(value),this.operations=operations.push(operation);var newDirtyPaths=function getDirtyPaths(operation){var type=operation.type,node=operation.node,path=operation.path,newPath=operation.newPath;switch(type){case"add_mark":case"insert_text":case"remove_mark":case"remove_text":case"set_mark":case"set_node":var ancestors=PathUtils.getAncestors(path).toArray();return[].concat(toConsumableArray(ancestors),[path]);case"insert_node":var table=node.getKeysToPathsTable(),paths=Object.values(table).map((function(p){return path.concat(p)})),_ancestors=PathUtils.getAncestors(path).toArray();return[].concat(toConsumableArray(_ancestors),[path],toConsumableArray(paths));case"split_node":var _ancestors2=PathUtils.getAncestors(path).toArray(),nextPath=PathUtils.increment(path);return[].concat(toConsumableArray(_ancestors2),[path,nextPath]);case"merge_node":var _ancestors3=PathUtils.getAncestors(path).toArray(),previousPath=PathUtils.decrement(path);return[].concat(toConsumableArray(_ancestors3),[previousPath]);case"move_node":if(PathUtils.isEqual(path,newPath))return[];var oldAncestors=PathUtils.getAncestors(path).reduce((function(arr,p){return arr.push.apply(arr,toConsumableArray(PathUtils.transform(p,operation).toArray())),arr}),[]),newAncestors=PathUtils.getAncestors(newPath).reduce((function(arr,p){return arr.push.apply(arr,toConsumableArray(PathUtils.transform(p,operation).toArray())),arr}),[]);return[].concat(toConsumableArray(oldAncestors),toConsumableArray(newAncestors));case"remove_node":var _ancestors4=PathUtils.getAncestors(path).toArray();return[].concat(toConsumableArray(_ancestors4));default:return[]}}(operation),dirty=this.tmp.dirty.map((function(path){return path=PathUtils.create(path),PathUtils.transform(path,operation).toArray()})),pathIndex={},dirtyPaths=Array.prototype.concat.apply(newDirtyPaths,dirty);return this.tmp.dirty=[],dirtyPaths.forEach((function(dirtyPath){var key=dirtyPath.join(",");pathIndex[key]||_this.tmp.dirty.push(dirtyPath),pathIndex[key]=!0})),this.tmp.flushing||(this.tmp.flushing=!0,Promise.resolve().then((function(){return _this.flush()}))),controller}},{key:"flush",value:function flush(){this.run("onChange");var value=this.value,operations=this.operations,controller=this.controller,change={value:value,operations:operations};return this.operations=(0,immutable_es.List)(),this.tmp.flushing=!1,this.onChange(change),controller}},{key:"command",value:function command(type){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var controller=this.controller;if("function"==typeof type)return type.apply(void 0,[controller].concat(args)),normalizeDirtyPaths(this),controller;debug$2("command",{type:type,args:args});var obj={type:type,args:args};return this.run("onCommand",obj),normalizeDirtyPaths(this),controller}},{key:"hasCommand",value:function hasCommand(type){var controller=this.controller;return type in controller&&controller[type].__command}},{key:"hasQuery",value:function hasQuery(type){var controller=this.controller;return type in controller&&controller[type].__query}},{key:"normalize",value:function normalize(){var value=this.value,controller=this.controller,document=value.document,table=document.getKeysToPathsTable(),paths=Object.values(table).map(PathUtils.create);this.tmp.dirty=this.tmp.dirty.concat(paths),normalizeDirtyPaths(this);var selection=value.selection;return document=value.document,selection.isUnset&&document.nodes.size&&controller.moveToStartOfDocument(),controller}},{key:"query",value:function query(type){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];var controller=this.controller;if("function"==typeof type)return type.apply(void 0,[controller].concat(args));debug$2("query",{type:type,args:args});var obj={type:type,args:args};return this.run("onQuery",obj)}},{key:"registerCommand",value:function registerCommand(type){var _this2=this,controller=this.controller;if(type in controller&&controller[type].__command)return controller;(0,tiny_invariant.A)(!(type in controller),"You cannot register a `"+type+"` command because it would overwrite an existing property of the `Editor`.");var method=function method(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return _this2.command.apply(_this2,[type].concat(args))};return controller[type]=method,method.__command=!0,controller}},{key:"registerQuery",value:function registerQuery(type){var _this3=this,controller=this.controller;if(type in controller&&controller[type].__query)return controller;(0,tiny_invariant.A)(!(type in controller),"You cannot register a `"+type+"` query because it would overwrite an existing property of the `Editor`.");var method=function method(){for(var _len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return _this3.query.apply(_this3,[type].concat(args))};return controller[type]=method,method.__query=!0,controller}},{key:"run",value:function run(key){for(var _len5=arguments.length,args=Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)args[_key5-1]=arguments[_key5];var controller=this.controller,fns=this.middleware[key]||[],i=0;function next(){var fn=fns[i++];if(fn){for(var _len6=arguments.length,overrides=Array(_len6),_key6=0;_key6<_len6;_key6++)overrides[_key6]=arguments[_key6];return overrides.length&&(args=overrides),fn.apply(void 0,toConsumableArray(args).concat([controller,next]))}}return Object.defineProperty(next,"change",{get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(next,"onChange",{get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(next,"props",{get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(next,"schema",{get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),Object.defineProperty(next,"stack",{get:function get$$1(){(0,tiny_invariant.A)(!1,"As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.")}}),next()}},{key:"setReadOnly",value:function setReadOnly(readOnly){return this.readOnly=readOnly,this}},{key:"setValue",value:function setValue(value){var _options$normalize=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).normalize,normalize=void 0===_options$normalize?value!==this.value:_options$normalize;return this.value=value,normalize&&this.normalize(),this}},{key:"withoutNormalizing",value:function withoutNormalizing(fn){var controller=this.controller,value=this.tmp.normalize;return this.tmp.normalize=!1,fn(controller),this.tmp.normalize=value,normalizeDirtyPaths(this),controller}},{key:"change",value:function change(fn){tiny_warning_esm(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`");for(var _len7=arguments.length,args=Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++)args[_key7-1]=arguments[_key7];fn.apply(void 0,[this.controller].concat(args))}},{key:"call",value:function call(fn){tiny_warning_esm(!1,"As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.");for(var _len8=arguments.length,args=Array(_len8>1?_len8-1:0),_key8=1;_key8<_len8;_key8++)args[_key8-1]=arguments[_key8];return fn.apply(void 0,[this.controller].concat(args)),this.controller}},{key:"applyOperations",value:function applyOperations(operations){var _this4=this;return tiny_warning_esm(!1,"As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead."),operations.forEach((function(op){return _this4.applyOperation(op)})),this.controller}},{key:"setOperationFlag",value:function setOperationFlag(key,value){return tiny_warning_esm(!1,"As of slate@0.41 the `change.setOperationFlag` method has been deprecated."),this.tmp[key]=value,this}},{key:"getFlag",value:function getFlag(key){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tiny_warning_esm(!1,"As of slate@0.41 the `change.getFlag` method has been deprecated."),void 0!==options[key]?options[key]:this.tmp[key]}},{key:"unsetOperationFlag",value:function unsetOperationFlag(key){return tiny_warning_esm(!1,"As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated."),delete this.tmp[key],this}},{key:"withoutNormalization",value:function withoutNormalization(fn){return tiny_warning_esm(!1,"As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`."),this.withoutNormalizing(fn)}},{key:"editor",get:function get$$1(){return tiny_warning_esm(!1,"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`."),this.controller}}]),Editor}();function normalizeDirtyPaths(editor){editor.tmp.normalize&&editor.tmp.dirty.length&&editor.withoutNormalizing((function(){for(;editor.tmp.dirty.length;){var path=editor.tmp.dirty.pop();normalizeNodeByPath(editor,path)}}))}function normalizeNodeByPath(editor,path){for(var controller=editor.controller,value=editor.value,document=value.document,node=document.assertNode(path),iterations=0,max=100+("text"===node.object?1:node.nodes.size);node;){var fn=node.normalize(controller);if(!fn)break;fn(controller),document=(value=editor.value).document;var key=node.key,found=document.getDescendant(path);if(found&&found.key===key)node=found;else{if(!(found=document.getDescendant(key)))break;node=found,path=document.getPath(key)}if(++iterations>max)throw new Error("A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.")}}function registerPlugin(editor,plugin){if(Array.isArray(plugin))plugin.forEach((function(p){return registerPlugin(editor,p)}));else if(null!=plugin){var commands=plugin.commands,queries=plugin.queries,schema=plugin.schema,rest=objectWithoutProperties(plugin,["commands","queries","schema"]);if(commands){var commandsPlugin=CommandsPlugin(commands);registerPlugin(editor,commandsPlugin)}if(queries){var queriesPlugin=QueriesPlugin(queries);registerPlugin(editor,queriesPlugin)}if(schema){var schemaPlugin=SchemaPlugin(schema);registerPlugin(editor,schemaPlugin)}for(var key in rest){var fn=rest[key];(editor.middleware[key]=editor.middleware[key]||[]).push(fn)}}}var DEFAULTS$13={marks:void 0,text:void 0},Leaf$1=function(_Record){function Leaf(){return classCallCheck(this,Leaf),possibleConstructorReturn(this,(Leaf.__proto__||Object.getPrototypeOf(Leaf)).apply(this,arguments))}return inherits(Leaf,_Record),createClass(Leaf,[{key:"updateMark",value:function updateMark(mark,newMark){var marks=this.marks;if(newMark.equals(mark))return this;if(!marks.has(mark))return this;var newMarks=marks.withMutations((function(collection){collection.remove(mark).add(newMark)}));return this.set("marks",newMarks)}},{key:"addMark",value:function addMark(mark){var marks=this.marks;return this.set("marks",marks.add(mark))}},{key:"addMarks",value:function addMarks(set$$1){var marks=this.marks;return this.set("marks",marks.union(set$$1))}},{key:"insertText",value:function insertText(offset,string){var text=this.text,next=text.slice(0,offset)+string+text.slice(offset);return this.set("text",next)}},{key:"removeMark",value:function removeMark(mark){var marks=this.marks;return this.set("marks",marks.remove(mark))}},{key:"toJSON",value:function toJSON(){return{object:this.object,text:this.text,marks:this.marks.toArray().map((function(m){return m.toJSON()}))}}}],[{key:"create",value:function create(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(tiny_warning_esm(!1,"As of slate@0.47 the `Leaf` model is deprecated."),Leaf.isLeaf(attrs))return attrs;if("string"==typeof attrs&&(attrs={text:attrs}),is_plain_object_default()(attrs))return Leaf.fromJSON(attrs);throw new Error("`Leaf.create` only accepts objects, strings or leaves, but you passed it: "+attrs)}},{key:"createLeaves",value:function createLeaves(leaves){if(leaves.size<=1)return leaves;var invalid=!1,result=(0,immutable_es.List)().withMutations((function(cache){leaves.findLast((function(leaf,index){var firstLeaf=cache.first();if(firstLeaf){if(firstLeaf.marks.equals(leaf.marks))return invalid=!0,void cache.set(0,firstLeaf.set("text",""+leaf.text+firstLeaf.text));if(""===firstLeaf.text)return invalid=!0,void cache.set(0,leaf);if(""===leaf.text)return void(invalid=!0)}cache.unshift(leaf)}))}));return invalid?result:leaves}},{key:"splitLeaves",value:function splitLeaves(leaves,offset){if(offset<0)return[(0,immutable_es.List)(),leaves];if(0===leaves.size)return[(0,immutable_es.List)(),(0,immutable_es.List)()];var endOffset=0,index=-1,left=void 0,right=void 0;return leaves.find((function(leaf){index++;var startOffset=endOffset,text=leaf.text;if((endOffset+=text.length)<offset)return!1;if(startOffset>offset)return!1;var length=offset-startOffset;return left=leaf.set("text",text.slice(0,length)),right=leaf.set("text",text.slice(length)),!0})),left?""===left.text?0===index?[immutable_es.List.of(left),leaves]:[leaves.take(index),leaves.skip(index)]:""===right.text?index===leaves.size-1?[leaves,immutable_es.List.of(right)]:[leaves.take(index+1),leaves.skip(index+1)]:[leaves.take(index).push(left),leaves.skip(index+1).unshift(right)]:[leaves,(0,immutable_es.List)()]}},{key:"createList",value:function createList(){var attrs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(immutable_es.List.isList(attrs)||Array.isArray(attrs))return new immutable_es.List(attrs.map(Leaf.create));throw new Error("`Leaf.createList` only accepts arrays or lists, but you passed it: "+attrs)}},{key:"fromJSON",value:function fromJSON(object){var _object$text=object.text,text=void 0===_object$text?"":_object$text,_object$marks=object.marks,marks=void 0===_object$marks?[]:_object$marks;return new Leaf({text:text,marks:(0,immutable_es.Set)(marks.map(Mark.fromJSON))})}},{key:"isLeafList",value:function isLeafList(any){return immutable_es.List.isList(any)&&any.every((function(item){return Leaf.isLeaf(item)}))}}]),Leaf}((0,immutable_es.Record)(DEFAULTS$13));function mixin(Interface,Classes){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Classes[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var Class=_step.value,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Object.getOwnPropertyNames(Interface)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var name=_step2.value;if(!Class.hasOwnProperty(name)){var desc=Object.getOwnPropertyDescriptor(Interface,name);Object.defineProperty(Class,name,desc)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=Object.getOwnPropertyNames(Interface.prototype)[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _name=_step3.value;if(!Class.prototype.hasOwnProperty(_name)){desc=Object.getOwnPropertyDescriptor(Interface.prototype,_name);Object.defineProperty(Class.prototype,_name,desc)}}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}Object.entries({Annotation:Annotation,Block:Block,Change:Change,Decoration:Decoration,Document:Document,Editor:Editor,Inline:Inline,Leaf:Leaf$1,Mark:Mark,Node:Node,Operation:Operation,Point:Point,Range:Range,Selection:Selection,Text:Text,Value:Value}).forEach((function(_ref){var _ref2=slicedToArray(_ref,2),camel=_ref2[0],obj=_ref2[1];return mixin(function create$2(type){var TYPE=TYPES[type],is$$1="is"+type.charAt(0).toUpperCase()+type.slice(1),ObjectInterface=function(){function ObjectInterface(){classCallCheck(this,ObjectInterface)}return createClass(ObjectInterface,[{key:"object",get:function get$$1(){return type}}]),ObjectInterface}();return ObjectInterface[is$$1]=isObject.bind(null,type),ObjectInterface.prototype[TYPE]=!0,ObjectInterface}(camel.toLowerCase()),[obj])}));var ModelInterface=function(){function ModelInterface(){classCallCheck(this,ModelInterface)}return createClass(ModelInterface,[{key:"toJS",value:function toJS(){return this.toJSON.apply(this,arguments)}}],[{key:"fromJS",value:function fromJS(){return this.fromJSON.apply(this,arguments)}}]),ModelInterface}();mixin(ModelInterface,[Annotation,Block,Decoration,Document,Inline,Leaf$1,Mark,Node,Operation,Point,Range,Selection,Text,Value]);var ENABLED=!0,LEAF=Symbol("LEAF"),STORE_KEY=Symbol("STORE_KEY"),UNDEFINED=Symbol("undefined"),NULL=Symbol("null"),UNSET=void 0,memoizeStore=new WeakMap;function memoize(object,properties){var _loop=function _loop(property){var original=object[property];if(!original)throw new Error('Object does not have a property named "'+property+'".');object[property]=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(!ENABLED)return original.apply(this,args);memoizeStore.has(this)||memoizeStore.set(this,{noArgs:{},hasArgs:{}});var _memoizeStore$get=memoizeStore.get(this),noArgs=_memoizeStore$get.noArgs,hasArgs=_memoizeStore$get.hasArgs,takesArguments=0!==args.length,cachedValue=void 0,keys=void 0;if((cachedValue=takesArguments?function getIn(map,keys){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=keys[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var key=_step2.value;if(void 0===key?key=UNDEFINED:null==key&&(key=NULL),(map="object"===(void 0===key?"undefined":_typeof(key))?map[STORE_KEY]&&map[STORE_KEY].get(key):map[key])===UNSET)return UNSET}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return map[LEAF]}(hasArgs,keys=[property].concat(args)):noArgs[property])!==UNSET)return cachedValue===UNDEFINED?void 0:cachedValue;var value=original.apply(this,args),v=void 0===value?UNDEFINED:value;return takesArguments?function setIn(map,keys,value){var child=map,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=keys[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var key=_step3.value;if(void 0===key?key=UNDEFINED:null==key&&(key=NULL),"object"===(void 0===key?"undefined":_typeof(key)))if(child[STORE_KEY]||(child[STORE_KEY]=new WeakMap),child[STORE_KEY].has(key))child=child[STORE_KEY].get(key);else{var newChild={};child[STORE_KEY].set(key,newChild),child=newChild}else child[key]||(child[key]={}),child=child[key]}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return child[LEAF]=value,map}(hasArgs,keys,v):noArgs[property]=v,value}},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=properties[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_loop(_step.value)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}var NodeInterface=function(){function NodeInterface(){classCallCheck(this,NodeInterface)}return createClass(NodeInterface,[{key:"getFirstText",value:function getFirstText(){if("text"===this.object)return this;var descendant=null,found=this.nodes.find((function(node){return"text"===node.object||!!(descendant=node.getFirstText())}));return descendant||found}},{key:"getKeysToPathsTable",value:function getKeysToPathsTable(){var ret=defineProperty({},this.key,[]);return this.nodes&&this.nodes.forEach((function(node,i){var nested=node.getKeysToPathsTable();for(var key in nested){var path=nested[key];tiny_warning_esm(!(key in ret),'A node with a duplicate key of "'+key+'" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.'),ret[key]=[i].concat(toConsumableArray(path))}})),ret}},{key:"getLastText",value:function getLastText(){if("text"===this.object)return this;var descendant=null,found=this.nodes.findLast((function(node){return"text"===node.object||(descendant=node.getLastText())}));return descendant||found}},{key:"getNode",value:function getNode(path){return(path=this.resolvePath(path))?"text"===this.object&&path.size?null:path.size?this.getDescendant(path):this:null}},{key:"getPath",value:function getPath(key){if(immutable_es.List.isList(key))return key;if(Node.isNode(key)&&this.descendants){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.descendants()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=slicedToArray(_ref,2),node=_ref2[0],_path=_ref2[1];if(key===node)return _path}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}var path=this.getKeysToPathsTable()[key];return path?(0,immutable_es.List)(path):null}},{key:"getText",value:function getText(){return"text"===this.object?this.text:this.nodes.reduce((function(memo,c){return memo+c.text}),"")}},{key:"hasNode",value:function hasNode(path){return!!this.getNode(path)}},{key:"normalize",value:function normalize(editor){return editor.run("normalizeNode",this)}},{key:"regenerateKey",value:function regenerateKey(){var key=KeyUtils.create();return this.set("key",key)}},{key:"resolvePath",value:function resolvePath(path,index){return"string"==typeof path?(path=this.getPath(path),null!=index&&(path=path.concat(index))):path=PathUtils.create(path),path}},{key:"validate",value:function validate(editor){return editor.run("validateNode",this)}}]),NodeInterface}();memoize(NodeInterface.prototype,["getFirstText","getKeysToPathsTable","getLastText","getText","normalize","validate"]),mixin(NodeInterface,[Block,Document,Inline,Text]);var global$1=void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function identity(){return!0}var ElementInterface=function(){function ElementInterface(){classCallCheck(this,ElementInterface)}return createClass(ElementInterface,[{key:"addMark",value:function addMark(path,mark){path=this.resolvePath(path);var node=this.assertDescendant(path);return node=node.addMark(mark),this.replaceNode(path,node)}},{key:"ancestors",value:function ancestors(path){return this.createIterable({path:path,direction:null,downward:!1,includeTargetAncestors:!0,includeRoot:!0})}},{key:"blocks",value:function blocks(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},onlyLeaves=options.onlyLeaves,onlyRoots=options.onlyRoots,onlyTypes=options.onlyTypes,_match=options.match,rest=objectWithoutProperties(options,["onlyLeaves","onlyRoots","onlyTypes","match"]);return this.descendants(_extends({includeDocument:!1,includeInlines:!1,includeTexts:!1},rest,{match:function match(node,path){return!(onlyTypes&&!onlyTypes.includes(node.type))&&((!onlyRoots||1===path.size)&&(!(onlyLeaves&&!node.isLeafBlock())&&!(_match&&!_match(node,path))))}}))}},{key:"createAnnotation",value:function createAnnotation(properties){return properties=Annotation.createProperties(properties),this.resolveAnnotation(properties)}},{key:"createDecoration",value:function createDecoration(properties){return properties=Decoration.createProperties(properties),this.resolveDecoration(properties)}},{key:"createIterable",value:function createIterable(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$direction=options.direction,direction=void 0===_options$direction?"forward":_options$direction,_options$downward=options.downward,downward=void 0===_options$downward||_options$downward,_options$upward=options.upward,upward=void 0===_options$upward||_options$upward,_options$includeBlock=options.includeBlocks,includeBlocks=void 0===_options$includeBlock||_options$includeBlock,_options$includeDocum=options.includeDocument,includeDocument=void 0===_options$includeDocum||_options$includeDocum,_options$includeInlin=options.includeInlines,includeInlines=void 0===_options$includeInlin||_options$includeInlin,_options$includeRoot=options.includeRoot,includeRoot=void 0!==_options$includeRoot&&_options$includeRoot,_options$includeTarge=options.includeTarget,includeTarget=void 0===_options$includeTarge?!!options.range:_options$includeTarge,_options$includeTarge2=options.includeTargetAncestors,includeTargetAncestors=void 0!==_options$includeTarge2&&_options$includeTarge2,_options$includeTexts=options.includeTexts,includeTexts=void 0===_options$includeTexts||_options$includeTexts,_options$match=options.match,match=void 0===_options$match?null:_options$match,root=this,targetPath=null,targetRange=null;options.range?(targetRange=root.resolveRange(options.range),targetPath=root.resolvePath(targetRange.start.path)):options.path&&(targetPath=root.resolvePath(options.path));var targetNode=targetPath&&root.assertNode(targetPath),NativeSet="undefined"==typeof window?global$1.Set:window.Set;return defineProperty({},Symbol.iterator,(function(){var visited=new NativeSet,startPath=targetRange&&targetRange.start.path,endPath=targetRange&&targetRange.end.path,path=targetPath,node=targetNode,includedTarget=!1,includedStart=!1,includingStart=!1,result=function result(){return path&&node?(includeRoot||node!==root)&&(includeBlocks||"block"!==node.object)&&(includeDocument||"document"!==node.object)&&(includeInlines||"inline"!==node.object)&&(includeTexts||"text"!==node.object)?match&&!match(node,path)?next():{value:[node,path],done:!1}:next():{done:!0}},next=function next(){if(!path||!node)return result();if(startPath&&!includedStart)return includingStart?path.size===startPath.size-1?(includedStart=!0,path=targetPath,node=targetNode,next()):(path=startPath.slice(0,path.size+1),node=root.assertNode(path),result()):(includingStart=!0,path=PathUtils.create([]),node=root,result());if(includeTarget&&!includedTarget)return includedTarget=!0,result();if(endPath&&path.equals(endPath))return node=null,path=null,next();if(downward&&node.nodes&&node.nodes.size&&!visited.has(node)){visited.add(node);var nextIndex="forward"===direction?0:node.nodes.size-1;return path=path.push(nextIndex),node=root.assertNode(path),result()}if("forward"===direction){var newPath=PathUtils.increment(path),newNode=root.getNode(newPath);if(newNode)return path=newPath,node=newNode,result()}if("backward"===direction&&0!==path.last()){var _newPath=PathUtils.decrement(path),_newNode=root.getNode(_newPath);if(_newNode)return path=_newPath,node=_newNode,result()}return upward&&path.size?(path=PathUtils.lift(path),node=root.assertNode(path),visited.has(node)?next():(visited.add(node),includeTargetAncestors?result():next())):(path=null,node=null,next())};return{next:next}}))}},{key:"createPoint",value:function createPoint(properties){return properties=Point.createProperties(properties),this.resolvePoint(properties)}},{key:"createRange",value:function createRange(properties){return properties=Range.createProperties(properties),this.resolveRange(properties)}},{key:"createSelection",value:function createSelection(properties){return properties=Selection.createProperties(properties),this.resolveSelection(properties)}},{key:"descendants",value:function descendants(options){return this.createIterable(_extends({path:[]},options))}},{key:"filterDescendants",value:function filterDescendants(){var predicate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:identity,matches=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.descendants()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref2=_step.value,_ref3=slicedToArray(_ref2,2),node=_ref3[0];predicate(node,_ref3[1])&&matches.push(node)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return(0,immutable_es.List)(matches)}},{key:"findDescendant",value:function findDescendant(){var predicate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:identity,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.descendants()[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _ref4=_step2.value,_ref5=slicedToArray(_ref4,2),node=_ref5[0];if(predicate(node,_ref5[1]))return node}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return null}},{key:"forEachDescendant",value:function forEachDescendant(){var predicate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:identity,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=this.descendants()[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _next=_step3.value;if(!1===predicate.apply(void 0,toConsumableArray(_next)))return}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}},{key:"getActiveMarksAtRange",value:function getActiveMarksAtRange(range){if((range=this.resolveRange(range)).isUnset)return(0,immutable_es.Set)();if(range.isCollapsed){var _start=range.start;return this.getInsertMarksAtPoint(_start)}var _range2=range,start=_range2.start,end=_range2.end,startPath=start.path,startOffset=start.offset,endPath=end.path,endOffset=end.offset,startText=this.getDescendant(startPath),endText=this.getDescendant(endPath);if(!startPath.equals(endPath)){for(;!startPath.equals(endPath)&&0===endOffset;){var _texts=this.texts({path:endPath,direction:"backward"}),_texts2=slicedToArray(_texts,1),_texts2$=slicedToArray(_texts2[0],2);endText=_texts2$[0],endPath=_texts2$[1],endOffset=endText.text.length}for(;!startPath.equals(endPath)&&startOffset===startText.text.length;){var _texts3=this.texts({path:startPath}),_texts4=slicedToArray(_texts3,1),_texts4$=slicedToArray(_texts4[0],2);startText=_texts4$[0],startPath=_texts4$[1],startOffset=0}}if(startPath.equals(endPath))return startText.marks;var startMarks=startText.marks;if(0===startMarks.size)return(0,immutable_es.Set)();var endMarks=endText.marks,marks=startMarks.intersect(endMarks);if(0===marks.size)return marks;var _texts5=this.texts({path:startPath}),_texts6=slicedToArray(_texts5,1),_texts6$=slicedToArray(_texts6[0],2);for(startText=_texts6$[0],startPath=_texts6$[1];!startPath.equals(endPath);){if(0!==startText.text.length&&0===(marks=marks.intersect(startText.marks)).size)return(0,immutable_es.Set)();var _texts7=this.texts({path:startPath}),_texts8=slicedToArray(_texts7,1),_texts8$=slicedToArray(_texts8[0],2);startText=_texts8$[0],startPath=_texts8$[1]}return marks}},{key:"getAncestors",value:function getAncestors(path){var iterable=this.ancestors(path),array=Array.from(iterable,(function(_ref6){return slicedToArray(_ref6,1)[0]})).reverse();return(0,immutable_es.List)(array)}},{key:"getBlocks",value:function getBlocks(){var iterable=this.blocks({onlyLeaves:!0}),array=Array.from(iterable,(function(_ref8){return slicedToArray(_ref8,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getBlocksByType",value:function getBlocksByType(type){var iterable=this.blocks({onlyLeaves:!0,onlyTypes:[type]}),array=Array.from(iterable,(function(_ref10){return slicedToArray(_ref10,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getChild",value:function getChild(path){return!(path=this.resolvePath(path))||path.size>1?null:this.nodes.get(path.first())}},{key:"getClosest",value:function getClosest(path,predicate){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=this.ancestors(path)[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _ref12=_step4.value,_ref13=slicedToArray(_ref12,2),n=_ref13[0];if(predicate(n,_ref13[1]))return n}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}return null}},{key:"getClosestBlock",value:function getClosestBlock(path){var closest=this.getClosest(path,(function(n){return"block"===n.object}));return closest}},{key:"getClosestInline",value:function getClosestInline(path){var closest=this.getClosest(path,(function(n){return"inline"===n.object}));return closest}},{key:"getClosestVoid",value:function getClosestVoid(path,editor){(0,tiny_invariant.A)(!Value.isValue(editor),"As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.");var closest=this.getClosest(path,(function(n){return editor.isVoid(n)}));return closest}},{key:"getCommonAncestor",value:function getCommonAncestor(a,b){if(a=this.resolvePath(a),b=this.resolvePath(b),!a||!b)return null;var path=PathUtils.relate(a,b);return this.getNode(path)}},{key:"getDecorations",value:function getDecorations(editor){var decorations=editor.run("decorateNode",this);return decorations=Decoration.createList(decorations)}},{key:"getDepth",value:function getDepth(path){var startAt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(path=this.resolvePath(path))&&this.getNode(path)?path.size-1+startAt:null}},{key:"getDescendant",value:function getDescendant(path){if(!(path=this.resolvePath(path))||!path.size)return null;var node=this;return path.forEach((function(index){return!!(node=node.getIn(["nodes",index]))})),node}},{key:"getDescendantsAtRange",value:function getDescendantsAtRange(range){var iterable=this.descendants({range:range}),array=Array.from(iterable,(function(_ref14){return slicedToArray(_ref14,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getFragmentAtRange",value:function getFragmentAtRange(range){if((range=this.resolveRange(range)).isUnset)return Document.create();for(var _range3=range,start=_range3.start,end=_range3.end,node=this,targetPath=end.path,targetPosition=end.offset,side="end";targetPath.size;){var index=targetPath.last();node=node.splitNode(targetPath,targetPosition),targetPosition=index+1,(targetPath=PathUtils.lift(targetPath)).size||"end"!==side||(targetPath=start.path,targetPosition=start.offset,side="start")}var startIndex=start.path.first()+1,endIndex=end.path.first()+2,nodes=node.nodes.slice(startIndex,endIndex);return Document.create({nodes:nodes})}},{key:"getFurthest",value:function getFurthest(path){var predicate=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identity,iterable=this.ancestors(path),results=Array.from(iterable).reverse(),_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=results[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _ref16=_step5.value,_ref17=slicedToArray(_ref16,2),n=_ref17[0];if(predicate(n,_ref17[1]))return n}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}return null}},{key:"getFurthestBlock",value:function getFurthestBlock(path){var furthest=this.getFurthest(path,(function(n){return"block"===n.object}));return furthest}},{key:"getFurthestChild",value:function getFurthestChild(path){return(path=this.resolvePath(path))&&path.size?this.nodes.get(path.first()):null}},{key:"getFurthestInline",value:function getFurthestInline(path){var furthest=this.getFurthest(path,(function(n){return"inline"===n.object}));return furthest}},{key:"getInlines",value:function getInlines(){var iterable=this.inlines({onlyLeaves:!0}),array=Array.from(iterable,(function(_ref18){return slicedToArray(_ref18,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getInlinesByType",value:function getInlinesByType(type){var iterable=this.inlines({onlyLeaves:!0,onlyTypes:[type]}),array=Array.from(iterable,(function(_ref20){return slicedToArray(_ref20,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getInsertMarksAtPoint",value:function getInsertMarksAtPoint(point){var _point=point=this.resolvePoint(point),path=_point.path,offset=_point.offset,text=this.getDescendant(path);if(0!==offset)return text.marks;var blockNode=void 0,blockPath=void 0,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=this.ancestors(path)[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var entry=_step6.value,_entry=slicedToArray(entry,2),n=_entry[0],p=_entry[1];"block"===n.object&&(blockNode=n,blockPath=p)}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}var relativePath=PathUtils.drop(path,blockPath.size),_blockNode$texts=blockNode.texts({path:relativePath,direction:"backward"}),previous=slicedToArray(_blockNode$texts,1)[0];return previous?slicedToArray(previous,1)[0].marks:text.marks}},{key:"getInsertMarksAtRange",value:function getInsertMarksAtRange(range){var start=(range=this.resolveRange(range)).start;return range.isUnset?(0,immutable_es.Set)():range.isCollapsed?this.getInsertMarksAtPoint(start):this.getDescendant(start.path).marks}},{key:"getLeafBlocksAtRange",value:function getLeafBlocksAtRange(range){var iterable=this.blocks({range:range,onlyLeaves:!0}),array=Array.from(iterable,(function(_ref22){return slicedToArray(_ref22,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getLeafInlinesAtRange",value:function getLeafInlinesAtRange(range){var iterable=this.inlines({range:range,onlyLeaves:!0}),array=Array.from(iterable,(function(_ref24){return slicedToArray(_ref24,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getNodesToPathsMap",value:function getNodesToPathsMap(){var map="undefined"==typeof window?new global$1.Map:new window.Map;return map.set(this,PathUtils.create([])),this.forEachDescendant((function(node,path){map.set(node,path)})),map}},{key:"getMarks",value:function getMarks(){var iterable=this.marks(),array=Array.from(iterable,(function(_ref26){return slicedToArray(_ref26,1)[0]}));return(0,immutable_es.OrderedSet)(array)}},{key:"getMarksAtRange",value:function getMarksAtRange(range){var iterable=this.marks({range:range}),array=Array.from(iterable,(function(_ref28){return slicedToArray(_ref28,1)[0]}));return(0,immutable_es.OrderedSet)(array)}},{key:"getMarksByType",value:function getMarksByType(type){var iterable=this.marks({onlyTypes:[type]}),array=Array.from(iterable,(function(_ref30){return slicedToArray(_ref30,1)[0]}));return(0,immutable_es.OrderedSet)(array)}},{key:"getNextBlock",value:function getNextBlock(path){var _blocks=this.blocks({path:path,onlyLeaves:!0}),entry=slicedToArray(_blocks,1)[0];return entry?entry[0]:null}},{key:"getNextNode",value:function getNextNode(path){var iterable=this.createIterable({path:path,downward:!1}),entry=slicedToArray(iterable,1)[0];return entry?entry[0]:null}},{key:"getNextSibling",value:function getNextSibling(path){var _siblings=this.siblings(path),entry=slicedToArray(_siblings,1)[0];return entry?entry[0]:null}},{key:"getNextText",value:function getNextText(path){var _texts9=this.texts({path:path}),entry=slicedToArray(_texts9,1)[0];return entry?entry[0]:null}},{key:"getOffset",value:function getOffset(path){path=this.resolvePath(path),this.assertDescendant(path);var index=path.first(),offset=this.nodes.slice(0,index).reduce((function(memo,n){return memo+n.text.length}),0);return 1===path.size?offset:offset+this.nodes.get(index).getOffset(PathUtils.drop(path))}},{key:"getOffsetAtRange",value:function getOffsetAtRange(range){if((range=this.resolveRange(range)).isUnset)throw new Error("The range cannot be unset to calculcate its offset.");if(range.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var start=range.start;return this.getOffset(start.path)+start.offset}},{key:"getParent",value:function getParent(path){if(!(path=this.resolvePath(path)))return null;if(!path.size)return null;var parentPath=PathUtils.lift(path);return this.getNode(parentPath)}},{key:"getPreviousBlock",value:function getPreviousBlock(path){var _blocks3=this.blocks({path:path,onlyLeaves:!0,direction:"backward"}),entry=slicedToArray(_blocks3,1)[0];return entry?entry[0]:null}},{key:"getPreviousNode",value:function getPreviousNode(path){var iterable=this.createIterable({path:path,downward:!1,direction:"backward"}),entry=slicedToArray(iterable,1)[0];return entry?entry[0]:null}},{key:"getPreviousSibling",value:function getPreviousSibling(path){var _siblings3=this.siblings(path,{direction:"backward"}),entry=slicedToArray(_siblings3,1)[0];return entry?entry[0]:null}},{key:"getPreviousText",value:function getPreviousText(path){var _texts11=this.texts({path:path,direction:"backward"}),entry=slicedToArray(_texts11,1)[0];return entry?entry[0]:null}},{key:"getRootBlocksAtRange",value:function getRootBlocksAtRange(range){var iterable=this.blocks({range:range,onlyRoots:!0}),array=Array.from(iterable,(function(_ref32){return slicedToArray(_ref32,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getRootInlinesAtRange",value:function getRootInlinesAtRange(range){var iterable=this.inlines({range:range,onlyRoots:!0}),array=Array.from(iterable,(function(_ref34){return slicedToArray(_ref34,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getTextAtOffset",value:function getTextAtOffset(offset){if(0===offset)return this.getFirstText();if(offset===this.text.length)return this.getLastText();if(offset<0||offset>this.text.length)return null;var length=0,_iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=this.texts()[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var _ref36=_step7.value,node=slicedToArray(_ref36,1)[0];if((length+=node.text.length)>offset)return node}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}return null}},{key:"getTextDirection",value:function getTextDirection(){var dir=direction_default()(this.text);return"neutral"===dir?null:dir}},{key:"getTexts",value:function getTexts(){var iterable=this.texts(),array=Array.from(iterable,(function(_ref38){return slicedToArray(_ref38,1)[0]}));return(0,immutable_es.List)(array)}},{key:"getTextsAtRange",value:function getTextsAtRange(range){var iterable=this.texts({range:range}),array=Array.from(iterable,(function(_ref40){return slicedToArray(_ref40,1)[0]}));return(0,immutable_es.List)(array)}},{key:"hasBlockChildren",value:function hasBlockChildren(){return!(!this.nodes||!this.nodes.find((function(n){return"block"===n.object})))}},{key:"hasChild",value:function hasChild(path){return!!this.getChild(path)}},{key:"hasInlineChildren",value:function hasInlineChildren(){return!(!this.nodes||!this.nodes.find((function(n){return"inline"===n.object||"text"===n.object})))}},{key:"hasDescendant",value:function hasDescendant(path){return!!this.getDescendant(path)}},{key:"hasVoidParent",value:function hasVoidParent(path,editor){return(0,tiny_invariant.A)(!Value.isValue(editor),"As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`."),!!this.getClosestVoid(path,editor)}},{key:"inlines",value:function inlines(){var _this=this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},onlyLeaves=options.onlyLeaves,onlyRoots=options.onlyRoots,onlyTypes=options.onlyTypes,_match2=options.match,rest=objectWithoutProperties(options,["onlyLeaves","onlyRoots","onlyTypes","match"]);return this.descendants(_extends({includeBlocks:!1,includeTexts:!1,includeDocument:!1},rest,{match:function match(node,path){return!(onlyTypes&&!onlyTypes.includes(node.type))&&(!(onlyLeaves&&!node.isLeafInline())&&((!onlyRoots||"block"===_this.getParent(path).object)&&!(_match2&&!_match2(node,path))))}}))}},{key:"insertNode",value:function insertNode(path,node){var index=(path=this.resolvePath(path)).last(),parentPath=PathUtils.lift(path),parent=this.assertNode(parentPath),nodes=parent.nodes.splice(index,0,node);return parent=parent.set("nodes",nodes),this.replaceNode(parentPath,parent)}},{key:"insertText",value:function insertText(path,offset,text){path=this.resolvePath(path);var node=this.assertDescendant(path);return node=node.insertText(offset,text),this.replaceNode(path,node)}},{key:"isLeafBlock",value:function isLeafBlock(){return"block"===this.object&&!this.nodes.some((function(n){return"block"===n.object}))}},{key:"isLeafInline",value:function isLeafInline(){return"inline"===this.object&&!this.nodes.some((function(n){return"inline"===n.object}))}},{key:"isInRange",value:function isInRange(path,range){if(path=this.resolvePath(path),(range=this.resolveRange(range)).isUnset)return!1;var toStart=PathUtils.compare(path,range.start.path),toEnd=PathUtils.compare(path,range.end.path),isInRange=-1!==toStart&&1!==toEnd;return isInRange}},{key:"mapChildren",value:function mapChildren(){var _this2=this,predicate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:identity,nodes=this.nodes;return nodes.forEach((function(node,i){var ret=predicate(node,i,_this2.nodes);ret!==node&&(nodes=nodes.set(ret.key,ret))})),this.set("nodes",nodes)}},{key:"mapDescendants",value:function mapDescendants(){var _this3=this,predicate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:identity,nodes=this.nodes;return nodes.forEach((function(node,index){var ret=node;"text"!==ret.object&&(ret=ret.mapDescendants(predicate)),(ret=predicate(ret,index,_this3.nodes))!==node&&(nodes=nodes.set(index,ret))})),this.set("nodes",nodes)}},{key:"marks",value:function marks(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_options$onlyTypes=options.onlyTypes,onlyTypes=void 0===_options$onlyTypes?null:_options$onlyTypes,match=options.match,rest=objectWithoutProperties(options,["onlyTypes","match"]),texts=this.texts(rest);return defineProperty({},Symbol.iterator,(function(){var iterator=texts[Symbol.iterator](),node=null,path=null,remaining=[];return{next:function next(){if(remaining.length){var mark=remaining.shift();return onlyTypes&&!onlyTypes.includes(mark.type)||match&&!match(mark,node,path)?next():{value:[mark,node,path],done:!1}}var _iterator$next=iterator.next(),value=_iterator$next.value;if(_iterator$next.done)return{done:!0};var _value=slicedToArray(value,2);return node=_value[0],path=_value[1],remaining=node.marks.toArray(),next()}}}))}},{key:"mergeNode",value:function mergeNode(path){var b=this.assertNode(path);if(0===(path=this.resolvePath(path)).last())throw new Error("Unable to merge node because it has no previous sibling: "+b);var withPath=PathUtils.decrement(path),a=this.assertNode(withPath);if(a.object!==b.object)throw new Error("Unable to merge two different kinds of nodes: "+a+" and "+b);var newNode="text"===a.object?a.mergeText(b):a.set("nodes",a.nodes.concat(b.nodes)),ret=this;return ret=(ret=(ret=ret.removeNode(path)).removeNode(withPath)).insertNode(withPath,newNode)}},{key:"moveNode",value:function moveNode(path,newPath){var newIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,node=this.assertNode(path);path=this.resolvePath(path),newPath=this.resolvePath(newPath,newIndex);var newParentPath=PathUtils.lift(newPath);this.assertNode(newParentPath);var op=Operation.create({type:"move_node",path:path,newPath:newPath});newPath=PathUtils.transform(path,op).first();var ret=this;return ret=(ret=ret.removeNode(path)).insertNode(newPath,node)}},{key:"removeMark",value:function removeMark(path,mark){path=this.resolvePath(path);var node=this.assertDescendant(path);return node=node.removeMark(mark),this.replaceNode(path,node)}},{key:"removeNode",value:function removeNode(path){this.assertDescendant(path);var deep=(path=this.resolvePath(path)).flatMap((function(x){return["nodes",x]}));return this.deleteIn(deep)}},{key:"removeText",value:function removeText(path,offset,text){var node=this.assertDescendant(path);return node=node.removeText(offset,text.length),this.replaceNode(path,node)}},{key:"replaceNode",value:function replaceNode(path,node){if(!(path=this.resolvePath(path)))throw new Error("Unable to replace a node because it could not be found in the first place: "+path);if(!path.size)return node;this.assertNode(path);var deep=path.flatMap((function(x){return["nodes",x]}));return this.setIn(deep,node)}},{key:"resolveAnnotation",value:function resolveAnnotation(annotation){return annotation=(annotation=Annotation.create(annotation)).normalize(this)}},{key:"resolveDecoration",value:function resolveDecoration(decoration){return decoration=(decoration=Decoration.create(decoration)).normalize(this)}},{key:"resolvePoint",value:function resolvePoint(point){return point=(point=Point.create(point)).normalize(this)}},{key:"resolveRange",value:function resolveRange(range){return range=(range=Range.create(range)).normalize(this)}},{key:"resolveSelection",value:function resolveSelection(selection){return selection=(selection=Selection.create(selection)).normalize(this)}},{key:"setNode",value:function setNode(path,properties){var node=this.assertNode(path);return node=node.merge(properties),this.replaceNode(path,node)}},{key:"setMark",value:function setMark(path,properties,newProperties){path=this.resolvePath(path);var node=this.assertDescendant(path);return node=node.setMark(properties,newProperties),this.replaceNode(path,node)}},{key:"siblings",value:function siblings(path,options){return this.createIterable(_extends({path:path,upward:!1,downward:!1},options))}},{key:"splitNode",value:function splitNode(path,position,properties){var child=this.assertNode(path);path=this.resolvePath(path);var a=void 0,b=void 0;if("text"===child.object){var _child$splitText=child.splitText(position),_child$splitText2=slicedToArray(_child$splitText,2);a=_child$splitText2[0],b=_child$splitText2[1]}else{var befores=child.nodes.take(position),afters=child.nodes.skip(position);a=child.set("nodes",befores),b=child.set("nodes",afters).regenerateKey()}properties&&"text"!==child.object&&(b=b.merge(properties));var ret=this;return ret=(ret=(ret=ret.removeNode(path)).insertNode(path,b)).insertNode(path,a)}},{key:"texts",value:function texts(options){return this.descendants(_extends({includeBlocks:!1,includeInlines:!1,includeDocument:!1},options))}},{key:"getBlocksAtRange",value:function getBlocksAtRange(range){return tiny_warning_esm(!1,"As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`."),this.getLeafBlocksAtRange(range)}},{key:"getBlocksAtRangeAsArray",value:function getBlocksAtRangeAsArray(range){return tiny_warning_esm(!1,"As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`."),this.getLeafBlocksAtRangeAsArray(range)}},{key:"getInlinesAtRange",value:function getInlinesAtRange(range){return tiny_warning_esm(!1,"As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`."),this.getLeafInlinesAtRange(range)}},{key:"getInlinesAtRangeAsArray",value:function getInlinesAtRangeAsArray(range){return tiny_warning_esm(!1,"As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`."),this.getLeafInlinesAtRangeAsArray(range)}},{key:"getNextTextAndPath",value:function getNextTextAndPath(path){return tiny_warning_esm(!1,"As of slate@0.47, the `getNextTextAndPath` method has been renamed to `getNextTextEntry`."),this.getNextTextEntry(path)}},{key:"getNextDeepMatchingNodeAndPath",value:function getNextDeepMatchingNodeAndPath(path){var iterator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};tiny_warning_esm(!1,"As of slate@0.47, the `getNextDeepMatchingNodeAndPath` method is deprecated.");var match=this.getNextMatchingNodeAndPath(path);if(!match)return null;for(var _match3=slicedToArray(match,2),nextNode=_match3[0],nextPath=_match3[1],childMatch=void 0,assign=function assign(){return childMatch="text"!==nextNode.object&&nextNode.findFirstDescendantAndPath(iterator,nextPath)};assign();){var _childMatch2=slicedToArray(childMatch,2);nextNode=_childMatch2[0],nextPath=_childMatch2[1]}return nextNode?iterator(nextNode)?[nextNode,nextPath]:this.getNextDeepMatchingNodeAndPath(match[1],iterator):null}},{key:"getPreviousTextAndPath",value:function getPreviousTextAndPath(path){return tiny_warning_esm(!1,"As of slate@0.47, the `getPreviousTextAndPath` method has been renamed to `getPreviousTextEntry`."),this.getPreviousTextEntry(path)}},{key:"findFirstDescendantAndPath",value:function findFirstDescendantAndPath(iterator,pathToThisNode){return tiny_warning_esm(!1,"As of slate@0.47, the `findFirstDescendantAndPath` method is deprecated."),this.findDescendantAndPath(iterator,pathToThisNode,!1)}},{key:"getPreviousMatchingNodeAndPath",value:function getPreviousMatchingNodeAndPath(path){var iterator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(tiny_warning_esm(!1,"As of slate@0.47, the `getPreviousMatchingNodeAndPath` method is deprecated."),!path)return null;for(var i=path.size;i>0;i--){var p=path.slice(0,i);if(0!==p.last()){for(var previousPath=PathUtils.decrement(p),previousNode=this.getNode(previousPath);previousNode&&!iterator(previousNode);)previousPath=PathUtils.decrement(previousPath),previousNode=this.getNode(previousPath);if(previousNode)return[previousNode,previousPath]}}return null}},{key:"getPreviousDeepMatchingNodeAndPath",value:function getPreviousDeepMatchingNodeAndPath(path){var iterator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};tiny_warning_esm(!1,"As of slate@0.47, the `getPreviousDeepMatchingNodeAndPath` method is deprecated.");var match=this.getPreviousMatchingNodeAndPath(path);if(!match)return null;for(var _match4=slicedToArray(match,2),previousNode=_match4[0],previousPath=_match4[1],childMatch=void 0,assign=function assign(){return childMatch="text"!==previousNode.object&&previousNode.findLastDescendantAndPath(iterator,previousPath)};assign();){var _childMatch4=slicedToArray(childMatch,2);previousNode=_childMatch4[0],previousPath=_childMatch4[1]}return previousNode?iterator(previousNode)?[previousNode,previousPath]:this.getPreviousDeepMatchingNodeAndPath(match[1],iterator):null}},{key:"findLastDescendantAndPath",value:function findLastDescendantAndPath(iterator,pathToThisNode){return tiny_warning_esm(!1,"As of slate@0.47, the `findLastDescendantAndPath` method is deprecated."),this.findDescendantAndPath(iterator,pathToThisNode,!0)}},{key:"findDescendantAndPath",value:function findDescendantAndPath(iterator){var pathToThisNode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PathUtils.create([]),findLast=arguments.length>2&&void 0!==arguments[2]&&arguments[2];tiny_warning_esm(!1,"As of slate@0.47, the `findDescendantAndPath` method is deprecated.");var found=void 0,foundPath=void 0;return this.forEachDescendantWithPath((function(node,path,nodes){if(iterator(node,path,nodes))return found=node,foundPath=path,!1}),pathToThisNode,findLast),found?[found,foundPath]:null}},{key:"forEachDescendantWithPath",value:function forEachDescendantWithPath(iterator){var path=arguments.length>1&&void 0!==arguments[1]?arguments[1]:PathUtils.create([]),findLast=arguments[2];tiny_warning_esm(!1,"As of slate@0.47, the `forEachDescendantWithPath` method is deprecated.");var nodes=this.nodes,ret=void 0;return findLast&&(nodes=nodes.reverse()),nodes.forEach((function(child,i){var childPath=path.concat(i);return!1===iterator(child,childPath,nodes)?(ret=!1,!1):"text"!==child.object?ret=child.forEachDescendantWithPath(iterator,childPath,findLast):void 0})),ret}},{key:"getNextMatchingNodeAndPath",value:function getNextMatchingNodeAndPath(path){var iterator=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(tiny_warning_esm(!1,"As of slate@0.47, the `getNextMatchingNodeAndPath` method is deprecated."),!path)return null;for(var i=path.size;i>0;i--){for(var p=path.slice(0,i),nextPath=PathUtils.increment(p),nextNode=this.getNode(nextPath);nextNode&&!iterator(nextNode);)nextPath=PathUtils.increment(nextPath),nextNode=this.getNode(nextPath);if(nextNode)return[nextNode,nextPath]}return null}},{key:"getSelectionIndexes",value:function getSelectionIndexes(range){var isSelected=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];tiny_warning_esm(!1,"As of slate@0.47, the `getSelectionIndexes` method is deprecated.");var start=range.start,end=range.end;if(!isSelected)return null;if(range.isUnset)return null;if(start.path.equals(end.path)){var child=this.getFurthestAncestor(start.path),index=child?this.nodes.indexOf(child):null;return{start:index,end:index+1}}var startIndex=null,endIndex=null;return this.nodes.forEach((function(child,i){return"text"===child.object?(null==startIndex&&child.key===start.key&&(startIndex=i),null==endIndex&&child.key===end.key&&(endIndex=i+1)):(null==startIndex&&child.hasDescendant(start.key)&&(startIndex=i),null==endIndex&&child.hasDescendant(end.key)&&(endIndex=i+1)),null==startIndex||null==endIndex})),isSelected&&null==startIndex&&(startIndex=0),isSelected&&null==endIndex&&(endIndex=this.nodes.size),null==startIndex?null:{start:startIndex,end:endIndex}}},{key:"getTextsBetweenPositionsAsArray",value:function getTextsBetweenPositionsAsArray(startPath,endPath){return tiny_warning_esm(!1,"As of slate@0.47, the `getTextsBetweenPositionsAsArray` method is deprecated."),startPath=this.resolvePath(startPath),endPath=this.resolvePath(endPath),this.getTextsBetweenPathPositionsAsArray(startPath,endPath)}},{key:"getOrderedMarksBetweenPositions",value:function getOrderedMarksBetweenPositions(startPath,startOffset,endPath,endOffset){tiny_warning_esm(!1,"As of slate@0.47, the `getOrderedMarksBetweenPositions` method is deprecated."),startPath=this.resolvePath(startPath),endPath=this.resolvePath(endPath);var startText=this.getDescendant(startPath);if(PathUtils.isEqual(startPath,endPath))return startText.marks;var texts=this.getTextsBetweenPathPositionsAsArray(startPath,endPath);return(0,immutable_es.OrderedSet)().withMutations((function(result){texts.forEach((function(text){result.union(text.marks)}))}))}},{key:"getTextsBetweenPathPositionsAsArray",value:function getTextsBetweenPathPositionsAsArray(startPath,endPath){if(tiny_warning_esm(!1,"As of slate@0.47, the `getTextsBetweenPathPositionsAsArray` method is deprecated."),startPath&&endPath&&PathUtils.isEqual(startPath,endPath))return[this.getDescendant(startPath)];if(!startPath&&!endPath)return this.getTextsAsArray();var startIndex=startPath?startPath.get(0,0):0,endIndex=endPath?endPath.get(0,this.nodes.size-1):this.nodes.size-1,array=[];return this.nodes.slice(startIndex,endIndex+1).forEach((function(node,i){if("text"===node.object)array.push(node);else{var childStartPath=startPath&&0===i?PathUtils.drop(startPath):null,childEndPath=endPath&&i===endIndex-startIndex?PathUtils.drop(endPath):null;array=array.concat(node.getTextsBetweenPathPositionsAsArray(childStartPath,childEndPath))}})),array}},{key:"getFurthestAncestor",value:function getFurthestAncestor(path){return tiny_warning_esm(!1,"As of slate@0.47, the `getFurthestAncestor` method has been renamed to `getFurthestChild`."),this.getFurthestChild(path)}},{key:"getLeafBlocksAtRangeAsArray",value:function getLeafBlocksAtRangeAsArray(range){if(tiny_warning_esm(!1,"As of slate@0.47, the `getLeafBlocksAtRangeAsArray` method is deprecated."),(range=this.resolveRange(range)).isUnset)return[];var _range6=range,start=_range6.start,end=_range6.end;return this.getLeafBlocksBetweenPathPositionsAsArray(start.path,end.path)}},{key:"getLeafBlocksBetweenPathPositionsAsArray",value:function getLeafBlocksBetweenPathPositionsAsArray(startPath,endPath){if(tiny_warning_esm(!1,"As of slate@0.47, the `getLeafBlocksBetweenPathPositionsAsArray` method is deprecated."),startPath&&endPath&&PathUtils.isEqual(startPath,endPath))return[this.getClosestBlock(startPath)];if(!startPath&&!endPath)return this.getBlocksAsArray();var startIndex=startPath?startPath.get(0,0):0,endIndex=endPath?endPath.get(0,this.nodes.size-1):this.nodes.size-1,array=[];return this.nodes.slice(startIndex,endIndex+1).forEach((function(node,i){if("block"===node.object)if(node.isLeafBlock())array.push(node);else{var childStartPath=startPath&&0===i?PathUtils.drop(startPath):null,childEndPath=endPath&&i===endIndex-startIndex?PathUtils.drop(endPath):null;array=array.concat(node.getLeafBlocksBetweenPathPositionsAsArray(childStartPath,childEndPath))}})),array}},{key:"getBlocksAsArray",value:function getBlocksAsArray(){tiny_warning_esm(!1,"As of slate@0.47, the `getBlocksAsArray` method is deprecated.");var iterable=this.blocks({onlyLeaves:!0});return Array.from(iterable,(function(_ref43){return slicedToArray(_ref43,1)[0]}))}},{key:"getBlocksByTypeAsArray",value:function getBlocksByTypeAsArray(type){tiny_warning_esm(!1,"As of slate@0.47, the `getBlocksByTypeAsArray` method is deprecated.");var iterable=this.blocks({onlyLeaves:!0,onlyTypes:[type]});return Array.from(iterable,(function(_ref45){return slicedToArray(_ref45,1)[0]}))}},{key:"getFurthestOnlyChildAncestor",value:function getFurthestOnlyChildAncestor(path){tiny_warning_esm(!1,"As of slate@0.47, the `getFurthestOnlyChildAncestor` method is deprecated.");var ancestors=this.getAncestors(path);return ancestors&&ancestors.rest().reverse().takeUntil((function(p){return p.nodes.size>1})).last()||null}},{key:"getInlinesAsArray",value:function getInlinesAsArray(){return tiny_warning_esm(!1,"As of slate@0.47, the `getInlinesAsArray` method is deprecated."),Array.from(this.inlines({onlyLeaves:!0}),(function(_ref47){return slicedToArray(_ref47,1)[0]}))}},{key:"getInlinesByTypeAsArray",value:function getInlinesByTypeAsArray(type){return tiny_warning_esm(!1,"As of slate@0.47, the `getInlinesByTypeAsArray` method is deprecated."),Array.from(this.inlines({onlyLeaves:!0,onlyTypes:[type]}),(function(_ref49){return slicedToArray(_ref49,1)[0]}))}},{key:"getLeafInlinesAtRangeAsArray",value:function getLeafInlinesAtRangeAsArray(range){var _this4=this;return tiny_warning_esm(!1,"As of slate@0.47, the `getLeafInlinesAtRangeAsArray` method is deprecated."),(range=this.resolveRange(range)).isUnset?[]:this.getTextsAtRangeAsArray(range).map((function(text){return _this4.getClosestInline(text.key)})).filter((function(exists){return exists}))}},{key:"getOrderedMarks",value:function getOrderedMarks(){return tiny_warning_esm(!1,"As of slate@0.47, the `getOrderedMarks` method has been folded into `getMarks`, which will now return an ordered set."),this.getMarks()}},{key:"getOrderedMarksAtRange",value:function getOrderedMarksAtRange(range){return tiny_warning_esm(!1,"As of slate@0.47, the `getOrderedMarksAtRange` method has been folded into `getMarksAtRange`, which will now return an ordered set."),this.getMarksAtRange(range)}},{key:"getOrderedMarksByType",value:function getOrderedMarksByType(type){return tiny_warning_esm(!1,"As of slate@0.47, the `getOrderedMarksByType` method has been folded into `getMarksByType`, which will now return an ordered set."),this.getMarksByType(type)}},{key:"getMarksByTypeAsArray",value:function getMarksByTypeAsArray(type){return tiny_warning_esm(!1,"As of slate@0.47, the `getMarksByTypeAsArray` method is deprecated."),this.nodes.reduce((function(memo,node){return"text"===node.object?memo.concat(node.marks.filter((function(m){return m.type===type}))):memo.concat(node.getMarksByTypeAsArray(type))}),[])}},{key:"getMarksAsArray",value:function getMarksAsArray(){var _ref53;tiny_warning_esm(!1,"As of slate@0.47, the `getMarksAsArray` method is deprecated.");var result=[],_iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=this.texts()[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var _ref51=_step8.value,node=slicedToArray(_ref51,1)[0];result.push(node.marks.toArray())}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}return(_ref53=[]).concat.apply(_ref53,result)}},{key:"getRootInlinesAtRangeAsArray",value:function getRootInlinesAtRangeAsArray(range){var _this5=this;return tiny_warning_esm(!1,"As of slate@0.47, the `getRootInlinesAtRangeAsArray` method is deprecated."),(range=this.resolveRange(range)).isUnset?(0,immutable_es.List)():this.getTextsAtRangeAsArray(range).map((function(text){return _this5.getFurthestInline(text.key)})).filter((function(exists){return exists}))}},{key:"getTextsAsArray",value:function getTextsAsArray(){tiny_warning_esm(!1,"As of slate@0.47, the `getTextsAsArray` method is deprecated.");var iterable=this.texts();return Array.from(iterable,(function(_ref54){return slicedToArray(_ref54,1)[0]}))}},{key:"getTextsAtRangeAsArray",value:function getTextsAtRangeAsArray(range){tiny_warning_esm(!1,"As of slate@0.47, the `getTextsAtRangeAsArray` method is deprecated.");var iterable=this.texts({range:range});return Array.from(iterable,(function(_ref56){return slicedToArray(_ref56,1)[0]}))}},{key:"getMarksAtPosition",value:function getMarksAtPosition(path,offset){tiny_warning_esm(!1,"As of slate@0.47, the `getMarksAtPosition` method is deprecated."),path=this.resolvePath(path);var currentMarks=this.getDescendant(path).marks;if(0!==offset)return(0,immutable_es.OrderedSet)(currentMarks);var closestBlock=this.getClosestBlock(path);if(""===closestBlock.text)return(0,immutable_es.OrderedSet)(currentMarks);var _texts13=this.texts({path:path,direction:"backward"}),previous=slicedToArray(_texts13,1)[0];if(!previous)return(0,immutable_es.OrderedSet)();var _previous2=slicedToArray(previous,2),previousText=_previous2[0],previousPath=_previous2[1];return closestBlock.hasDescendant(previousPath)?(0,immutable_es.OrderedSet)(previousText.marks):(0,immutable_es.OrderedSet)(currentMarks)}},{key:"getNodesAtRange",value:function getNodesAtRange(range){tiny_warning_esm(!1,"As of slate@0.47, the `getNodesAtRange` method has been renamed to `getDescendantsAtRange`.");var iterable=this.descendants({range:range}),array=Array.from(iterable,(function(_ref58){return slicedToArray(_ref58,1)[0]}));return(0,immutable_es.List)(array)}},{key:"isNodeInRange",value:function isNodeInRange(path,range){return tiny_warning_esm(!1,"As of slate@0.47, the `isNodeInRange` method has been renamed to `isInRange`."),this.isInRange(path,range)}},{key:"text",get:function get$$1(){return this.getText()}}]),ElementInterface}(),_loop$1=function _loop(method){ElementInterface.prototype["assert"+method]=function(path){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var ret=this["get"+method].apply(this,[path].concat(args));if(null==ret)throw new Error("`Node.assert"+method+"` could not find node with path or key: "+path);return ret}},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=["Child","Depth","Descendant","Node","Parent","Path"][Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){_loop$1(_step9.value)}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}memoize(ElementInterface.prototype,["getBlocksAsArray","getBlocksByTypeAsArray","getDecorations","getFragmentAtRange","getInlinesAsArray","getInlinesByTypeAsArray","getInsertMarksAtRange","getLeafBlocksAtRangeAsArray","getLeafBlocksAtRangeAsArray","getLeafInlinesAtRangeAsArray","getMarksAsArray","getMarksAtPosition","getMarksByTypeAsArray","getNextBlock","getNodesAtRange","getNodesToPathsMap","getOffset","getOffsetAtRange","getOrderedMarksBetweenPositions","getPreviousBlock","getRootBlocksAtRange","getRootInlinesAtRangeAsArray","getTextAtOffset","getTextDirection","getTextsAsArray","getTextsBetweenPathPositionsAsArray"]),mixin(ElementInterface,[Block,Document,Inline]);var RangeInterface=function(){function RangeInterface(){classCallCheck(this,RangeInterface)}return createClass(RangeInterface,[{key:"flip",value:function flip(){return this.setPoints([this.focus,this.anchor])}},{key:"moveForward",value:function moveForward(n){return this.updatePoints((function(point){return point.moveForward(n)}))}},{key:"moveBackward",value:function moveBackward(n){return this.updatePoints((function(point){return point.moveBackward(n)}))}},{key:"moveAnchorBackward",value:function moveAnchorBackward(n){return this.setAnchor(this.anchor.moveBackward(n))}},{key:"moveAnchorForward",value:function moveAnchorForward(n){return this.setAnchor(this.anchor.moveForward(n))}},{key:"moveAnchorTo",value:function moveAnchorTo(path,offset){return this.setAnchor(this.anchor.moveTo(path,offset))}},{key:"moveAnchorToStartOfNode",value:function moveAnchorToStartOfNode(node){return this.setAnchor(this.anchor.moveToStartOfNode(node))}},{key:"moveAnchorToEndOfNode",value:function moveAnchorToEndOfNode(node){return this.setAnchor(this.anchor.moveToEndOfNode(node))}},{key:"moveEndBackward",value:function moveEndBackward(n){return this.setEnd(this.end.moveBackward(n))}},{key:"moveEndForward",value:function moveEndForward(n){return this.setEnd(this.end.moveForward(n))}},{key:"moveEndTo",value:function moveEndTo(path,offset){return this.setEnd(this.end.moveTo(path,offset))}},{key:"moveEndToStartOfNode",value:function moveEndToStartOfNode(node){return this.setEnd(this.end.moveToStartOfNode(node))}},{key:"moveEndToEndOfNode",value:function moveEndToEndOfNode(node){return this.setEnd(this.end.moveToEndOfNode(node))}},{key:"moveFocusBackward",value:function moveFocusBackward(n){return this.setFocus(this.focus.moveBackward(n))}},{key:"moveFocusForward",value:function moveFocusForward(n){return this.setFocus(this.focus.moveForward(n))}},{key:"moveFocusTo",value:function moveFocusTo(path,offset){return this.setFocus(this.focus.moveTo(path,offset))}},{key:"moveFocusToStartOfNode",value:function moveFocusToStartOfNode(node){return this.setFocus(this.focus.moveToStartOfNode(node))}},{key:"moveFocusToEndOfNode",value:function moveFocusToEndOfNode(node){return this.setFocus(this.focus.moveToEndOfNode(node))}},{key:"moveStartBackward",value:function moveStartBackward(n){return this.setStart(this.start.moveBackward(n))}},{key:"moveStartForward",value:function moveStartForward(n){return this.setStart(this.start.moveForward(n))}},{key:"moveStartTo",value:function moveStartTo(path,offset){return this.setStart(this.start.moveTo(path,offset))}},{key:"moveStartToStartOfNode",value:function moveStartToStartOfNode(node){return this.setStart(this.start.moveToStartOfNode(node))}},{key:"moveStartToEndOfNode",value:function moveStartToEndOfNode(node){return this.setStart(this.start.moveToEndOfNode(node))}},{key:"moveTo",value:function moveTo(path,offset){return this.updatePoints((function(point){return point.moveTo(path,offset)}))}},{key:"moveToAnchor",value:function moveToAnchor(){return this.setFocus(this.anchor)}},{key:"moveToEnd",value:function moveToEnd(){return this.setStart(this.end)}},{key:"moveToEndOfNode",value:function moveToEndOfNode(node){return this.updatePoints((function(point){return point.moveToEndOfNode(node)}))}},{key:"moveToFocus",value:function moveToFocus(){return this.setAnchor(this.focus)}},{key:"moveToRangeOfNode",value:function moveToRangeOfNode(start){var end=arguments.length>1&&void 0!==arguments[1]?arguments[1]:start;return this.setPoints([this.anchor.moveToStartOfNode(start),this.focus.moveToEndOfNode(end)])}},{key:"moveToStart",value:function moveToStart(){return this.setEnd(this.start)}},{key:"moveToStartOfNode",value:function moveToStartOfNode(node){return this.updatePoints((function(point){return point.moveToStartOfNode(node)}))}},{key:"normalize",value:function normalize(node){return this.updatePoints((function(point){return point.normalize(node)}))}},{key:"setAnchor",value:function setAnchor(anchor){return this.set("anchor",anchor)}},{key:"setEnd",value:function setEnd(point){return this.isBackward?this.setAnchor(point):this.setFocus(point)}},{key:"setFocus",value:function setFocus(focus){return this.set("focus",focus)}},{key:"setPoints",value:function setPoints(values){var _values=slicedToArray(values,2),anchor=_values[0],focus=_values[1];return this.set("anchor",anchor).set("focus",focus)}},{key:"updatePoints",value:function updatePoints(updater){var anchor=this.anchor,focus=this.focus;return anchor=updater(anchor),focus=updater(focus),this.merge({anchor:anchor,focus:focus})}},{key:"setStart",value:function setStart(point){return this.isBackward?this.setFocus(point):this.setAnchor(point)}},{key:"setProperties",value:function setProperties(properties){var _properties=properties=Range.createProperties(properties),anchor=_properties.anchor,focus=_properties.focus,props=objectWithoutProperties(_properties,["anchor","focus"]);return anchor&&(props.anchor=Point.create(anchor)),focus&&(props.focus=Point.create(focus)),this.merge(props)}},{key:"toJSON",value:function toJSON(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{object:this.object,anchor:this.anchor.toJSON(options),focus:this.focus.toJSON(options)}}},{key:"toRange",value:function toRange(){var properties=Range.createProperties(this);return Range.create(properties)}},{key:"unset",value:function unset(){return this.updatePoints((function(p){return p.unset()}))}},{key:"isCollapsed",get:function get$$1(){return this.anchor===this.focus||this.anchor.key===this.focus.key&&this.anchor.offset===this.focus.offset}},{key:"isExpanded",get:function get$$1(){return!this.isCollapsed}},{key:"isBackward",get:function get$$1(){var isUnset=this.isUnset,anchor=this.anchor,focus=this.focus;return isUnset?null:anchor.key===focus.key?anchor.offset>focus.offset:PathUtils.isBefore(focus.path,anchor.path)}},{key:"isForward",get:function get$$1(){var isBackward=this.isBackward;return null==isBackward?null:!isBackward}},{key:"isUnset",get:function get$$1(){var anchor=this.anchor,focus=this.focus;return anchor.isUnset||focus.isUnset}},{key:"isSet",get:function get$$1(){return!this.isUnset}},{key:"start",get:function get$$1(){return this.isBackward?this.focus:this.anchor}},{key:"end",get:function get$$1(){return this.isBackward?this.anchor:this.focus}}]),RangeInterface}();mixin(RangeInterface,[Annotation,Decoration,Range,Selection])},"../../node_modules/slate/node_modules/debug/src/browser.js":function(module,exports,__webpack_require__){"use strict";var process=__webpack_require__("../../node_modules/process/browser.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}exports.log=function log(){var _console;return"object"===("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&(_console=console).log.apply(_console,arguments)},exports.formatArgs=function formatArgs(args){if(args[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+args[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0,lastC=0;args[0].replace(/%[a-zA-Z%]/g,(function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))})),args.splice(lastC,0,c)},exports.save=function save(namespaces){try{namespaces?exports.storage.setItem("debug",namespaces):exports.storage.removeItem("debug")}catch(error){}},exports.load=function load(){var r;try{r=exports.storage.getItem("debug")}catch(error){}!r&&void 0!==process&&"env"in process&&(r=process.env.DEBUG);return r},exports.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},exports.storage=function localstorage(){try{return localStorage}catch(error){}}(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=__webpack_require__("../../node_modules/slate/node_modules/debug/src/common.js")(exports),module.exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(error){return"[UnexpectedJSONParseError]: "+error.message}}},"../../node_modules/slate/node_modules/debug/src/common.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=function setup(env){function selectColor(namespace){for(var hash=0,i=0;i<namespace.length;i++)hash=(hash<<5)-hash+namespace.charCodeAt(i),hash|=0;return createDebug.colors[Math.abs(hash)%createDebug.colors.length]}function createDebug(namespace){var prevTime;function debug(){if(debug.enabled){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var self=debug,curr=Number(new Date),ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,args[0]=createDebug.coerce(args[0]),"string"!=typeof args[0]&&args.unshift("%O");var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,(function(match,format){if("%%"===match)return match;index++;var formatter=createDebug.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match})),createDebug.formatArgs.call(self,args),(self.log||createDebug.log).apply(self,args)}}return debug.namespace=namespace,debug.enabled=createDebug.enabled(namespace),debug.useColors=createDebug.useColors(),debug.color=selectColor(namespace),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){var index=createDebug.instances.indexOf(this);return-1!==index&&(createDebug.instances.splice(index,1),!0)}function extend(namespace,delimiter){return createDebug(this.namespace+(void 0===delimiter?":":delimiter)+namespace)}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(val){if(val instanceof Error)return val.stack||val.message;return val},createDebug.disable=function disable(){createDebug.enable("")},createDebug.enable=function enable(namespaces){var i;createDebug.save(namespaces),createDebug.names=[],createDebug.skips=[];var split=("string"==typeof namespaces?namespaces:"").split(/[\s,]+/),len=split.length;for(i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):createDebug.names.push(new RegExp("^"+namespaces+"$")));for(i=0;i<createDebug.instances.length;i++){var instance=createDebug.instances[i];instance.enabled=createDebug.enabled(instance.namespace)}},createDebug.enabled=function enabled(name){if("*"===name[name.length-1])return!0;var i,len;for(i=0,len=createDebug.skips.length;i<len;i++)if(createDebug.skips[i].test(name))return!1;for(i=0,len=createDebug.names.length;i<len;i++)if(createDebug.names[i].test(name))return!0;return!1},createDebug.humanize=__webpack_require__("../../node_modules/ms/index.js"),Object.keys(env).forEach((function(key){createDebug[key]=env[key]})),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},"../../node_modules/slate/node_modules/is-plain-object/index.js":function(module,__unused_webpack_exports,__webpack_require__){"use strict";var isObject=__webpack_require__("../../node_modules/isobject/index.js");function isObjectObject(o){return!0===isObject(o)&&"[object Object]"===Object.prototype.toString.call(o)}module.exports=function isPlainObject(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}}}]);