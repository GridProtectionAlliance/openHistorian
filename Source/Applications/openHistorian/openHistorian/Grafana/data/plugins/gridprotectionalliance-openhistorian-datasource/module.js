(()=>{"use strict";var e={606:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(559),l=a.n(n),r=a(476),o=a.n(r)()(l());o.push([e.id,".dark-box {\n  background-color: rgba(32, 34, 38); \n  padding: 8px; \n  border-radius: 4px;\n  border-color: 1px darkgray;\n}\n\n.dark-box .switch {\n  background-color: blue; /* Change the background color */\n}\n\n.dark-box .switch::before {\n  background-color: white; /* Change the color of the switch thumb */\n}\n\n.dark-button {\n  background-color: rgb(34,37,43); \n  color: rgb(199,204,220); \n}","",{version:3,sources:["webpack://./css/config-editor.css"],names:[],mappings:"AAAA;EACE,kCAAkC;EAClC,YAAY;EACZ,kBAAkB;EAClB,0BAA0B;AAC5B;;AAEA;EACE,sBAAsB,EAAE,gCAAgC;AAC1D;;AAEA;EACE,uBAAuB,EAAE,yCAAyC;AACpE;;AAEA;EACE,+BAA+B;EAC/B,uBAAuB;AACzB",sourcesContent:[".dark-box {\n  background-color: rgba(32, 34, 38); \n  padding: 8px; \n  border-radius: 4px;\n  border-color: 1px darkgray;\n}\n\n.dark-box .switch {\n  background-color: blue; /* Change the background color */\n}\n\n.dark-box .switch::before {\n  background-color: white; /* Change the color of the switch thumb */\n}\n\n.dark-button {\n  background-color: rgb(34,37,43); \n  color: rgb(199,204,220); \n}"],sourceRoot:""}]);const i=o},413:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(559),l=a.n(n),r=a(476),o=a.n(r)()(l());o.push([e.id,".dark-box {\n    background-color: rgba(17, 18, 23);\n    padding: 6px;\n    border-radius: 2px;\n    border: 1px solid darkgray;\n    display: flex;\n    align-items: center;\n}\n  \n.dark-box span {\n    margin: 0;\n    padding: 2px; \n}\n\n.auto-width {\n    width: auto;\n}\n  \n  ","",{version:3,sources:["webpack://./css/query-editor.css"],names:[],mappings:"AAAA;IACI,kCAAkC;IAClC,YAAY;IACZ,kBAAkB;IAClB,0BAA0B;IAC1B,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,SAAS;IACT,YAAY;AAChB;;AAEA;IACI,WAAW;AACf",sourcesContent:[".dark-box {\n    background-color: rgba(17, 18, 23);\n    padding: 6px;\n    border-radius: 2px;\n    border: 1px solid darkgray;\n    display: flex;\n    align-items: center;\n}\n  \n.dark-box span {\n    margin: 0;\n    padding: 2px; \n}\n\n.auto-width {\n    width: auto;\n}\n  \n  "],sourceRoot:""}]);const i=o},476:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",n=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),n&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),n&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,n,l,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var i=0;i<this.length;i++){var u=this[i][0];null!=u&&(o[u]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&o[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),a&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=a):c[2]=a),l&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=l):c[4]="".concat(l)),t.push(c))}},t}},559:e=>{e.exports=function(e){var t=e[1],a=e[3];if(!a)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),r="/*# ".concat(l," */");return[t].concat([r]).join("\n")}return[t].join("\n")}},892:e=>{var t=[];function a(e){for(var a=-1,n=0;n<t.length;n++)if(t[n].identifier===e){a=n;break}return a}function n(e,n){for(var r={},o=[],i=0;i<e.length;i++){var u=e[i],s=n.base?u[0]+n.base:u[0],c=r[s]||0,d="".concat(s," ").concat(c);r[s]=c+1;var p=a(d),v={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)t[p].references++,t[p].updater(v);else{var m=l(v,n);n.byIndex=i,t.splice(i,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function l(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,l){var r=n(e=e||[],l=l||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var i=a(r[o]);t[i].references--}for(var u=n(e,l),s=0;s<r.length;s++){var c=a(r[s]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=u}}},311:e=>{var t={};e.exports=function(e,a){var n=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(a)}},60:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},192:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},760:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var n="";a.supports&&(n+="@supports (".concat(a.supports,") {")),a.media&&(n+="@media ".concat(a.media," {"));var l=void 0!==a.layer;l&&(n+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),n+=a.css,l&&(n+="}"),a.media&&(n+="}"),a.supports&&(n+="}");var r=a.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},865:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nc=void 0;var n={};(()=>{a.r(n),a.d(n,{plugin:()=>re});const e=require("@grafana/data"),t=require("@grafana/runtime"),l=[{label:"Query Wizard",value:"Elements"},{label:"Text Editor",value:"Text"}],r={"Select All":{Value:!1,Order:-1,Flag:0},Normal:{Value:!1,Order:0,Flag:0},BadData:{Value:!1,Order:1,Flag:1},SuspectData:{Value:!1,Order:2,Flag:2},OverRangeError:{Value:!1,Order:3,Flag:4},UnderRangeError:{Value:!1,Order:4,Flag:8},AlarmHigh:{Value:!1,Order:5,Flag:16},AlarmLow:{Value:!1,Order:6,Flag:32},WarningHigh:{Value:!1,Order:7,Flag:64},WarningLow:{Value:!1,Order:8,Flag:128},FlatlineAlarm:{Value:!1,Order:9,Flag:256},ComparisonAlarm:{Value:!1,Order:10,Flag:512},ROCAlarm:{Value:!1,Order:11,Flag:1024},ReceivedAsBad:{Value:!1,Order:12,Flag:2048},CalculatedValue:{Value:!1,Order:13,Flag:4096},CalculationError:{Value:!1,Order:14,Flag:8192},CalculationWarning:{Value:!1,Order:15,Flag:16384},ReservedQualityFlag:{Value:!1,Order:16,Flag:32768},BadTime:{Value:!1,Order:17,Flag:65536},SuspectTime:{Value:!1,Order:18,Flag:1<<17},LateTimeAlarm:{Value:!1,Order:19,Flag:1<<18},FutureTimeAlarm:{Value:!1,Order:20,Flag:1<<19},UpSampled:{Value:!1,Order:21,Flag:1<<20},DownSampled:{Value:!1,Order:22,Flag:1<<21},DiscardedValue:{Value:!1,Order:23,Flag:1<<22},ReservedTimeFlag:{Value:!1,Order:24,Flag:1<<23},UserDefinedFlag1:{Value:!1,Order:25,Flag:1<<24},UserDefinedFlag2:{Value:!1,Order:26,Flag:1<<25},UserDefinedFlag3:{Value:!1,Order:27,Flag:1<<26},UserDefinedFlag4:{Value:!1,Order:28,Flag:1<<27},UserDefinedFlag5:{Value:!1,Order:29,Flag:1<<28},SystemError:{Value:!1,Order:30,Flag:1<<29},SystemWarning:{Value:!1,Order:31,Flag:1<<30},MeasurementError:{Value:!1,Order:32,Flag:1<<31}},o=require("react");var i=a.n(o);const u=require("@grafana/ui");var s=a(892),c=a.n(s),d=a(760),p=a.n(d),v=a(311),m=a.n(v),y=a(192),b=a.n(y),g=a(60),f=a.n(g),h=a(865),E=a.n(h),F=a(413),O={};function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){T(e,t,a[t])}))}return e}function A(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function C({query:e,onChange:t}){return i().useEffect((()=>{"Annotations"!==e.queryType&&t(A(S({},e),{queryType:"Annotations"}))}),[e,t]),i().createElement("div",{className:"gf-form",style:{display:"flex",flexDirection:"column"}},i().createElement("div",{style:{width:"100%"}},i().createElement(u.InlineField,{label:"Query",labelWidth:12},i().createElement(u.TextArea,{value:e.queryText,onChange:a=>t(A(S({},e),{queryText:a.target.value})),rows:10,style:{minWidth:"300px",width:"100%"}}))))}function w(e,t,a,n,l,r,o){try{var i=e[r](o),u=i.value}catch(e){return void a(e)}i.done?t(u):Promise.resolve(u).then(n,l)}function j(e){return function(){var t=this,a=arguments;return new Promise((function(n,l){var r=e.apply(t,a);function o(e){w(r,n,l,o,i,"next",e)}function i(e){w(r,n,l,o,i,"throw",e)}o(void 0)}))}}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}O.styleTagTransform=E(),O.setAttributes=b(),O.insert=m().bind(null,"head"),O.domAPI=p(),O.insertStyleElement=f(),c()(F.Z,O),F.Z&&F.Z.locals&&F.Z.locals;class I extends e.DataSourceApi{metricFindQuery(e,a){var n=this;return j((function*(){var a,l;if(void 0!==e.tableName&&void 0!==e.fieldName&&0!==e.tableName.length&&0!==e.fieldName.length)return(yield(0,t.getBackendSrv)().post(n.url+"/Search",{dataTypeIndex:n.dataSourceValueType,expression:`SELECT DISTINCT ${e.fieldName} FROM ${e.tableName} ${null===(l=null===(a=e.condition)||void 0===a?void 0:a.length)||void 0===l||l?"":` WHERE ${e.condition}`}`})).map((e=>({text:e})))}))()}calculateFlags(){let e=0;for(const[t,a]of Object.entries(this.flags))"Select All"!==t&&"Normal"!==t&&!0===a&&(e^=r[t].Flag);return e}targetToString(e){return void 0===e?"":"Elements"===e.queryType||void 0===e.queryType?this.parsedQueryToString(e.parsedQuery):"Text"===e.queryType?e.queryText:""}functionToString(e){const t=e.Parameters.map((e=>e.type.type.includes("IAsyncEnumerable")?this.parsedQueryToString(e.value):e.value.toString())).join(",");return`${e.Function}(${t})`}parsedQueryToString(e){if(void 0===e)return"";const t=[];return void 0!==e.Elements&&t.push(e.Elements.join(";")),void 0!==e.Filters&&t.push(e.Filters.map((e=>{var t;return`Filter ${""===e.NumberMode?"":`${e.NumberMode} ${e.Number}`} ${e.Table}${(null===(t=e.Condition)||void 0===t?void 0:t.length)>0?` WHERE ${e.Condition}`:""}`})).join(";")),void 0!==e.Functions&&t.push(e.Functions.map((e=>this.functionToString(e))).join(";")),t.filter((e=>e.length>0)).join(";")}buildQueryParameters(e){const a=this.calculateFlags();var n;const l=null!==(n=this.flags.Normal)&&void 0!==n&&n,r=e.targets.filter((e=>{var t;return!(null!==(t=e.hide)&&void 0!==t&&t)&&"Annotations"!==e.queryType})).map((a=>{var n,l,r,o;const i=[];void 0!==a.metadataOptions&&a.metadataOptions.forEach((e=>{var t;void 0!==i.find((t=>t.tableName===e.Table))?null===(t=i.find((t=>t.tableName===e.Table)))||void 0===t||t.fieldNames.push(e.FieldName):i.push({tableName:e.Table,fieldNames:[e.FieldName]})}));let u=(0,t.getTemplateSrv)().replace(this.targetToString(a),e.scopedVars);var s,c,d,p,v,m,y,b;return null!==(s=null===(n=a.commandLevel)||void 0===n?void 0:n.DropEmpty)&&void 0!==s&&s&&(u+="; dropEmptySeries"),null!==(c=null===(l=a.commandLevel)||void 0===l?void 0:l.IncludePeaks)&&void 0!==c&&c&&(u+="; includePeaks"),null!==(d=null===(r=a.commandLevel)||void 0===r?void 0:r.FullResolution)&&void 0!==d&&d&&(u+="; fullResolutionQuery"),null!==(p=null===(o=a.commandLevel)||void 0===o?void 0:o.RadialDistribution)&&void 0!==p&&p&&(u+=`; radialDistribution={radius=${null!==(y=null===(v=a.commandLevel)||void 0===v?void 0:v.Radius)&&void 0!==y?y:1.5}; zoom=${null!==(b=null===(m=a.commandLevel)||void 0===m?void 0:m.Zoom)&&void 0!==b?b:2}}`),{refID:a.refId,target:u,metadataSelections:i}}));var o;return{dataTypeIndex:this.dataSourceValueType,range:{from:e.range.from.toISOString(),to:e.range.to.toISOString()},interval:e.interval,targets:r,adhocFilters:[],excludedFlags:a,excludeNormalFlags:l,maxDataPoints:null!==(o=e.maxDataPoints)&&void 0!==o?o:1e3}}getTags(){var e=this;return j((function*(){var a,n,l;return null!==(l=null===(n=(yield(0,t.getBackendSrv)().post(e.url+"/GetValueTypes",{})).find((t=>t.index===e.dataSourceValueType)))||void 0===n||null===(a=n.timeSeriesDefinition)||void 0===a?void 0:a.split(","))&&void 0!==l?l:[]}))()}query(a){var n=this;return j((function*(){const l=a.targets[0],r=a.targets.some((e=>"Annotations"!==e.queryType)),o=a.targets.some((e=>"Annotations"===e.queryType));let i=[];if(r){let r=n.buildQueryParameters(a),o=yield(0,t.getBackendSrv)().post(n.url+"/query",r);const u=yield n.getTags(),s=new e.MutableDataFrame({refId:l.refId,fields:u.map(((t,a)=>({name:t,type:a<u.length-1?e.FieldType.number:e.FieldType.time})))}),c=o.map((t=>{var n;const r=Object.keys(t.metadata);var o;if(null!==(o=null===(n=a.targets.find((e=>e.refId===t.refID)))||void 0===n?void 0:n.transpose)&&void 0!==o&&o){const a={};return u.forEach(((e,n)=>{a[e]=t.datapoints[0][n]})),r.forEach((n=>{s.fields.map((e=>e.name)).includes(n)||s.addField({name:n,type:e.FieldType.other}),a[n]=t.metadata[n]})),void s.add(a)}{const a=new e.MutableDataFrame({refId:l.refId,fields:r.concat(u).map(((t,a)=>({name:t,type:a<r.length?e.FieldType.other:a<r.length+u.length-1?e.FieldType.number:e.FieldType.time})))});return a.refId=t.refID,a.name=t.target,t.datapoints.forEach((e=>{const n={};u.forEach(((t,a)=>{n[t]=e[a]})),r.forEach((e=>{n[e]=t.metadata[e]})),a.add(n)})),a}}));a.targets.some((e=>e.transpose))&&c.push(s),i=c.filter((e=>void 0!==e))}return o&&i.push(yield n.queryAnnotations(a)),{data:i}}))()}testDatasource(){var e=this;return j((function*(){return yield(0,t.getBackendSrv)().get(e.url+"/").then((()=>({status:"success",message:"Data source is working",title:"Success"})),(()=>({status:"error",message:"Data source is not working",title:"Error"})))}))()}queryAnnotations(a){var n=this;return j((function*(){const l=a.targets.map((e=>(0,t.getTemplateSrv)().replace(e.queryText,a.scopedVars))).join(";"),r={range:a.range,annotationQuery:l,rangeRaw:a.rangeRaw},o=yield(0,t.getBackendSrv)().post(n.url+"/annotations",r);if(o.length>500)throw Error(`There are ${o.length} annotations. Grafana can not display more than 500.`);const i=new e.MutableDataFrame({refId:a.targets[0].refId,fields:[{name:"time",type:e.FieldType.time},{name:"timeEnd",type:e.FieldType.time},{name:"title",type:e.FieldType.string},{name:"text",type:e.FieldType.string},{name:"tags",type:e.FieldType.string}]});return o.forEach((e=>{i.add({time:e.time,timeEnd:e.endTime,title:e.title,text:e.text,tags:e.tags})})),i}))()}constructor(e){super(e),D(this,"url",void 0),D(this,"flags",void 0),D(this,"dataSourceValueType",void 0),this.annotations={QueryEditor:C},this.url=e.jsonData.http.url||"",this.flags=e.jsonData.flags||{},this.dataSourceValueType=parseInt(e.jsonData.valueType||"1",10)}}var x=a(606),k={};function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){P(e,t,a[t])}))}return e}function q(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}k.styleTagTransform=E(),k.setAttributes=b(),k.insert=m().bind(null,"head"),k.domAPI=p(),k.insertStyleElement=f(),c()(x.Z,k),x.Z&&x.Z.locals&&x.Z.locals;const V=require("lodash");var R=a.n(V);function M(e,t,a,n,l,r,o){try{var i=e[r](o),u=i.value}catch(e){return void a(e)}i.done?t(u):Promise.resolve(u).then(n,l)}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){B(e,t,a[t])}))}return e}function Q(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}const W=e=>{var a,n,l,r;const[o,u]=i().useState(null!==(r=null===(a=e.query.parsedQuery)||void 0===a?void 0:a.Elements)&&void 0!==r?r:[]);var s;const[c,d]=i().useState(null!==(s=null===(n=e.query.parsedQuery)||void 0===n?void 0:n.Functions)&&void 0!==s?s:[]),[p,v]=i().useState([]),[m,y]=i().useState([]);var b;const[g,f]=i().useState(null!==(b=null===(l=e.query.parsedQuery)||void 0===l?void 0:l.Filters)&&void 0!==b?b:[]);return i().useEffect((()=>{var a;null===(a=e.includeFunctions)||void 0===a||a?(0,t.getBackendSrv)().post(e.datasource.url+"/GetValueTypeFunctions",{dataTypeIndex:e.datasource.dataSourceValueType,expression:""}).then((e=>{v(e)})):v([])}),[e.datasource.url,e.includeFunctions,e.datasource.dataSourceValueType]),i().useEffect((()=>{(0,t.getBackendSrv)().post(e.datasource.url+"/GetValueTypeTables",{dataTypeIndex:e.datasource.dataSourceValueType,expression:""}).then((e=>{y(e)}))}),[e.datasource.url,e.datasource.dataSourceValueType]),i().createElement("div",{style:{width:"100%"}},i().createElement(U,{datasource:e.datasource,elements:o,update:function(t,a,n){u(t),void 0!==a&&d((e=>{var t;let n=R().clone(e);var l;return n.push({Function:a,Parameters:null!==(l=null===(t=p.find((e=>e.name===a)))||void 0===t?void 0:t.parameters.map((e=>({type:e,value:e.type.includes("IAsyncEnumerable")?{Elements:[],Functions:[],Filters:[]}:e.default}))))&&void 0!==l?l:[]}),n}));const l=L({},e.query);void 0===l.parsedQuery&&(l.parsedQuery={Elements:[],Functions:[],Filters:[]}),l.parsedQuery.Elements=t,n&&(l.parsedQuery.Filters.push({Table:"",Condition:"",Number:10,NumberMode:"Top"}),f(l.parsedQuery.Filters)),e.onChange(l)},availableFunctions:p}),null==c?void 0:c.map(((t,a)=>i().createElement($,{key:t.Function,update:t=>function(t,a){const n=L({},e.query);void 0===n.parsedQuery&&(n.parsedQuery={Elements:[],Functions:[],Filters:[]}),void 0===t?n.parsedQuery.Functions.splice(a,1):n.parsedQuery.Functions[a]=t,d(n.parsedQuery.Functions),e.onChange(n)}(t,a),func:t,availableFunctions:p,availableTables:m,datasource:e.datasource}))),null==g?void 0:g.map(((t,a)=>i().createElement(Z,{key:a,availableTables:m,update:t=>function(t,a){const n=L({},e.query);void 0===n.parsedQuery&&(n.parsedQuery={Elements:[],Functions:[],Filters:[]}),void 0===t?n.parsedQuery.Filters.splice(a,1):n.parsedQuery.Filters[a]=t,f(n.parsedQuery.Filters),e.onChange(n)}(t,a),filter:t}))))},U=e=>{const a=i().useMemo((()=>e.elements.map((e=>({value:e,label:e})))),[e.elements]),n=(l=function*(a){const n=(yield(0,t.getBackendSrv)().post(e.datasource.url+"/Search",{dataTypeIndex:e.datasource.dataSourceValueType,expression:a})).map((e=>({value:e,label:e})));return"filter".includes(a.toLocaleLowerCase())&&n.push({value:"FILTER",label:"FILTER"}),e.availableFunctions.filter((e=>{var t,n;return e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase())||null!==(n=null===(t=e.aliases)||void 0===t?void 0:t.some((e=>e.toLocaleLowerCase().includes(a.toLocaleLowerCase()))))&&void 0!==n&&n})).forEach((e=>{n.push({label:e.name,value:"fx-"+e.name})})),n},r=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=l.apply(e,t);function o(e){M(r,a,n,o,i,"next",e)}function i(e){M(r,a,n,o,i,"throw",e)}o(void 0)}))},function(e){return r.apply(this,arguments)});var l,r;return i().createElement(u.InlineField,{label:"Query",labelWidth:12},i().createElement(u.AsyncMultiSelect,{loadOptions:n,defaultOptions:!0,value:a,onChange:t=>{const a=t.map((e=>e.value));let n=a.includes("FILTER");const l=a.filter((e=>e.startsWith("fx-")));let r;l.length>0&&(r=l[0].substring(3)),e.update(a.filter((e=>"FILTER"!==e&&!e.startsWith("fx-"))),r,n)},isSearchable:!0}))},Z=e=>{const t=i().useMemo((()=>e.availableTables.map((e=>({label:e,value:e})))),[e.availableTables]),a=i().useMemo((()=>""===e.filter.Table?[]:[{value:e.filter.Table,label:e.filter.Table}]),[e.filter.Table]);return i().createElement(u.InlineFieldRow,null,i().createElement(u.IconButton,{name:"trash-alt",size:"xl",iconType:"default",variant:"destructive",onClick:()=>e.update(void 0)}),i().createElement(u.InlineField,{label:"Filter",labelWidth:12},i().createElement(u.Select,{value:e.filter.NumberMode,options:[{label:"TOP",value:"Top"},{label:"ALL",value:""}],onChange:function(t){e.update(Q(L({},e.filter),{NumberMode:t.value}))}})),""!==e.filter.NumberMode?i().createElement(u.Input,{type:"number",min:0,max:99999,value:e.filter.Number,onChange:function(t){const a=t.target.value;e.update(Q(L({},e.filter),{Number:parseInt(a,10)}))},width:20}):null,i().createElement(u.Select,{value:a,options:t,isLoading:0===t.length,onChange:function(t){var a;e.update(Q(L({},e.filter),{Table:null!==(a=t.value)&&void 0!==a?a:""}))},isSearchable:!0,width:80}),i().createElement(u.InlineField,{label:"WHERE",labelWidth:12},i().createElement(u.Input,{value:e.filter.Condition,onChange:function(t){e.update(Q(L({},e.filter),{Condition:t.target.value}))}})))},$=e=>{const[t,a]=i().useState(!0),n=i().useMemo((()=>e.availableFunctions.find((t=>t.name===e.func.Function))),[e.func,e.availableFunctions]),l=i().useMemo((()=>e.availableFunctions.map((e=>({value:e.name,label:e.name})))),[e.availableFunctions]);return i().createElement(u.Collapse,{label:i().createElement(u.InlineFieldRow,null,i().createElement(u.IconButton,{name:"trash-alt",size:"xl",iconType:"default",variant:"destructive",onClick:()=>e.update(void 0)}),i().createElement(u.Select,{value:e.func.Function,options:l,onChange:function(t){const n=e.availableFunctions.find((e=>e.name===t.value));var l,r;null!==n&&(e.update({Function:null!==(l=t.value)&&void 0!==l?l:"AbsoluteValue",Parameters:null!==(r=null==n?void 0:n.parameters.map((e=>({type:e,value:e.type.includes("IAsyncEnumerable")?{Elements:[],Functions:[],Filters:[]}:e.default}))))&&void 0!==r?r:[]}),a(!0))},isSearchable:!0,width:20})),isOpen:t,onToggle:()=>a((e=>!e))},i().createElement("p",null,null==n?void 0:n.description),i().createElement("ul",null,e.func.Parameters.map(((t,a)=>i().createElement("li",{key:t.type.name},i().createElement(G,{update:t=>function(t,a){const n=R().cloneDeep(e.func);n.Parameters[a]=t,e.update(n)}(t,a),param:t,availableFunctions:e.availableFunctions,availableTables:e.availableTables,datasource:e.datasource}))))))},G=e=>{var t,a,n,l,r,o,s,c,d,p,v,m,y,b,g,f,h,E,F,O,T;function S(t){e.update({type:e.param.type,value:t.target.value})}function A(t){e.update({type:e.param.type,value:t.value})}return i().createElement(u.Card,null,i().createElement(u.Card.Heading,null,e.param.type.name),i().createElement(u.Card.Description,null,i().createElement(i().Fragment,null,i().createElement("p",null,e.param.type.description," (",e.param.type.type,")"),e.param.type.type.includes("IAsyncEnumerable")?i().createElement(i().Fragment,null,i().createElement(U,{datasource:e.datasource,elements:null!==(g=null===(t=null===(a=e.param)||void 0===a?void 0:a.value)||void 0===t?void 0:t.Elements)&&void 0!==g?g:[],update:function(t,a,n){let l=R().cloneDeep(e.param);var r,o;void 0===l&&(l={type:e.param.type,value:{Elements:[],Functions:[],Filters:[]}}),void 0!==a&&(null===(r=l.value)||void 0===r||r.Functions.push({Function:a,Parameters:[]})),l.value.Elements=t,n&&(null===(o=l.value)||void 0===o||o.Filters.push({Table:"",Condition:"",Number:10,NumberMode:"Top"})),e.update(l)},availableFunctions:e.availableFunctions}),null===(l=null===(r=e.param)||void 0===r?void 0:r.value)||void 0===l||null===(n=l.Functions)||void 0===n?void 0:n.map(((t,a)=>i().createElement($,{key:t.Function,update:t=>function(t,a){let n=R().cloneDeep(e.param);var l;void 0===n&&(n={type:e.param.type,value:{Elements:[],Functions:[],Filters:[]}}),void 0===t?null===(l=n.value)||void 0===l||l.Functions.splice(a,1):n.value.Functions[a]=t,e.update(n)}(t,a),func:t,availableFunctions:e.availableFunctions,availableTables:e.availableTables,datasource:e.datasource}))),null===(s=null===(c=e.param)||void 0===c?void 0:c.value)||void 0===s||null===(o=s.Filters)||void 0===o?void 0:o.map(((t,a)=>i().createElement(Z,{key:a,availableTables:e.availableTables,update:t=>function(t,a){let n=R().cloneDeep(e.param);var l;void 0===n&&(n={type:e.param.type,value:{Elements:[],Functions:[],Filters:[]}}),void 0===t?null===(l=n.value)||void 0===l||l.Filters.splice(a,1):n.value.Filters[a]=t,e.update(n)}(t,a),filter:t})))):null,"Double"===e.param.type.type?i().createElement(u.Input,{type:"number",value:null!==(f=null===(d=e.param)||void 0===d?void 0:d.value)&&void 0!==f?f:"1.0",onChange:S,width:20}):null,"String"===e.param.type.type?i().createElement(u.Input,{type:"text",value:null!==(h=null===(p=e.param)||void 0===p?void 0:p.value)&&void 0!==h?h:"",onChange:S,width:20}):null,"Int32"===e.param.type.type?i().createElement(u.Input,{type:"number",min:0,max:99999,value:null!==(E=null===(v=e.param)||void 0===v?void 0:v.value)&&void 0!==E?E:"1",onChange:S,width:20}):null,"AngleUnit"===e.param.type.type?i().createElement(u.Select,{value:null!==(F=null===(m=e.param)||void 0===m?void 0:m.value)&&void 0!==F?F:"Degrees",options:[{value:"Radians",label:"Radians"},{value:"Degrees",label:"Degrees"},{value:"Grads",label:"Grads"},{value:"ArcMinutes",label:"ArcMinutes"},{value:"ArcSeconds",label:"ArcSeconds"},{value:"AngularMil",label:"AngularMil"}],onChange:A,isSearchable:!0}):null,"TargetTimeUnit"===e.param.type.type?i().createElement(u.Select,{value:null!==(O=null===(y=e.param)||void 0===y?void 0:y.value)&&void 0!==O?O:"Seconds",options:[{value:"Seconds",label:"Seconds"},{value:"Nanoseconds",label:"Nanoseconds"},{value:"Microseconds",label:"Microseconds"},{value:"Milliseconds",label:"Milliseconds"},{value:"Minutes",label:"Minutes"},{value:"Hours",label:"Hours"},{value:"Days",label:"Days"},{value:"Weeks",label:"Weeks"},{value:"Ke",label:"Ke (traditional Chinese)"},{value:"Ticks",label:"Ticks"},{value:"PlanckTime",label:"PlanckTime"},{value:"AtomicUnitsOfTime",label:"AtomicUnitsOfTime"}],onChange:A,isSearchable:!0}):null,"Boolean"===e.param.type.type?i().createElement(u.Select,{value:null!==(T=null===(b=e.param)||void 0===b?void 0:b.value)&&void 0!==T?T:"1",options:[{value:"1",label:"True"},{value:"0",label:"False"}],onChange:A,isSearchable:!0}):null)))},H=e=>{var a;const[n,l]=i().useState([]);return i().useEffect((()=>{(0,t.getBackendSrv)().post(e.datasource.url+"/GetValueTypeTables",{dataTypeIndex:e.datasource.dataSourceValueType,expression:""}).then((e=>{var t;l(null!==(t=null==e?void 0:e.map((e=>({value:e,label:e}))))&&void 0!==t?t:[])}))}),[e.datasource.dataSourceValueType,e.datasource.url]),i().createElement("div",{className:"gf-form-group"},null===(a=e.query)||void 0===a?void 0:a.map(((t,a)=>i().createElement(_,{Field:t,key:a,Remove:()=>(t=>{let a=[...e.query];a.splice(t,1),e.onChange(a)})(a),Update:t=>((t,a)=>{let n=[...e.query];n[a]=t,e.onChange(n)})(t,a),TableOptions:n,Datasource:e.datasource}))),i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,null,i().createElement(u.Button,{onClick:()=>(void 0===e.query&&e.onChange([{Table:"",FieldName:""}]),void e.onChange([...e.query,{Table:"",FieldName:""}]))}," Add Meta Data Field"))))},_=e=>{var a,n,l,r,o,s;const[c,d]=i().useState([]);var p,v,m;return i().useEffect((()=>{d([]),void 0!==e.Field.Table&&(0,t.getBackendSrv)().post(e.Datasource.url+"/GetValueTypeTableFields",{dataTypeIndex:e.Datasource.dataSourceValueType,expression:e.Field.Table}).then((e=>{var t;return d(null!==(t=null==e?void 0:e.map((e=>({value:e.name,label:e.name}))))&&void 0!==t?t:[])}))}),[e.Field.Table,e.Datasource.url,e.Datasource.dataSourceValueType]),i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Table",labelWidth:12},i().createElement(u.Select,{value:e.Field.Table,options:e.TableOptions,onChange:t=>{var a;e.Update({Table:null!==(a=t.value)&&void 0!==a?a:"",FieldName:""})},isLoading:0===e.TableOptions.length,invalid:0===(null!==(p=null===(n=e.Field)||void 0===n||null===(a=n.Table)||void 0===a?void 0:a.length)&&void 0!==p?p:0)})),i().createElement(u.InlineField,{label:"Field",labelWidth:12},i().createElement(u.Select,{value:e.Field.FieldName,options:c,onChange:t=>{var a;e.Update({Table:e.Field.Table,FieldName:null!==(a=t.value)&&void 0!==a?a:""})},isLoading:0===c.length,invalid:0===(null!==(v=null===(r=e.Field)||void 0===r||null===(l=r.FieldName)||void 0===l?void 0:l.length)&&void 0!==v?v:0),disabled:0===(null!==(m=null===(s=e.Field)||void 0===s||null===(o=s.Table)||void 0===o?void 0:o.length)&&void 0!==m?m:0)})),i().createElement(u.InlineField,null,i().createElement(u.IconButton,{name:"trash-alt",size:"xl",iconType:"default",variant:"destructive",onClick:()=>e.Remove()})))},z=e=>i().createElement("div",{className:"gf-form-group"},i().createElement(u.InlineField,{label:"Query Editor",labelWidth:12,grow:!0,shrink:!0},i().createElement(u.TextArea,{value:e.query,onChange:t=>e.onChange(t.target.value),rows:10})));function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Y(e,t,a[t])}))}return e}const K=e=>{var t,a,n,l,r,o,s;const c=(t,a)=>{let n={DropEmpty:!1,IncludePeaks:!1,FullResolution:!1,RadialDistribution:!1,Radius:1.5,Zoom:2};void 0!==e.query&&(n=J({},e.query)),n[a]=!n[a],e.onChange(n)};var d,p,v,m,y,b,g;return i().createElement("div",{className:"gf-form-group"},i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Drop Empty Points",labelWidth:24},i().createElement(u.InlineSwitch,{disabled:!1,value:null!==(d=null===(t=e.query)||void 0===t?void 0:t.DropEmpty)&&void 0!==d&&d,onChange:e=>c(0,"DropEmpty")}))),i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Include Peaks",labelWidth:24},i().createElement(u.InlineSwitch,{disabled:!1,value:null!==(p=null===(a=e.query)||void 0===a?void 0:a.IncludePeaks)&&void 0!==p&&p,onChange:e=>c(0,"IncludePeaks")}))),i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Get Full Resolution Data",labelWidth:24},i().createElement(u.InlineSwitch,{disabled:!1,value:null!==(v=null===(n=e.query)||void 0===n?void 0:n.FullResolution)&&void 0!==v&&v,onChange:e=>c(0,"FullResolution")}))),i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Distribute Radially",labelWidth:24},i().createElement(u.InlineSwitch,{disabled:!1,value:null!==(m=null===(l=e.query)||void 0===l?void 0:l.RadialDistribution)&&void 0!==m&&m,onChange:e=>c(0,"RadialDistribution")}))),null!==(y=null===(r=e.query)||void 0===r?void 0:r.RadialDistribution)&&void 0!==y&&y?i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Radius"},i().createElement(u.Input,{type:"number",value:(null!==(b=null===(o=e.query)||void 0===o?void 0:o.Radius)&&void 0!==b?b:1.5).toString(),onChange:function(t){let a={DropEmpty:!1,IncludePeaks:!1,FullResolution:!1,RadialDistribution:!1,Radius:1.5,Zoom:2};void 0!==e.query&&(a=J({},e.query)),a.Radius=parseFloat(t.toString()),e.onChange(a)}})),i().createElement(u.InlineField,{label:"Zoom"},i().createElement(u.Input,{type:"number",value:(null!==(g=null===(s=e.query)||void 0===s?void 0:s.Zoom)&&void 0!==g?g:2).toString(),onChange:function(t){let a={DropEmpty:!1,IncludePeaks:!1,FullResolution:!1,RadialDistribution:!1,Radius:1.5,Zoom:2};void 0!==e.query&&(a=J({},e.query)),a.Zoom=parseFloat(t.toString()),e.onChange(a)}}))):null)};function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){X(e,t,a[t])}))}return e}function te(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ae(e,t,a[t])}))}return e}function le(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}const re=new e.DataSourcePlugin(I).setConfigEditor((function(e){var a,n;const{onOptionsChange:l,options:o}=e,[s,c]=i().useState([]),d=i().useMemo((()=>s.map((e=>({value:e.index.toString(),label:e.name})))),[s]),p=i().useMemo((()=>{var e,t,a;return null!==(a=null==o||null===(t=o.jsonData)||void 0===t||null===(e=t.http)||void 0===e?void 0:e.url)&&void 0!==a?a:""}),[o]);i().useEffect((()=>{p.length<1||(0,t.getBackendSrv)().post(p+"/GetValueTypes",{}).then((e=>c(e)))}),[p]);const v=e=>{const t=e.target,{name:a,checked:n}=t;let i={};if("Select All"===a){const e=!o.jsonData.flags||!o.jsonData.flags["Select All"];i=Object.keys(r).reduce(((t,a)=>(t[a]=e,t)),{})}else i=q(N({},o.jsonData.flags),{[a]:n}),n||(i["Select All"]=!1);const u=q(N({},o.jsonData),{flags:i});l(q(N({},o),{jsonData:u}))};var m;return i().createElement("div",{className:"gf-form-group"},i().createElement(u.DataSourceHttpSettings,{defaultUrl:o.jsonData.http?o.jsonData.http.url:"",dataSourceConfig:o.jsonData.http?o.jsonData.http:o,showAccessOptions:!0,onChange:e=>{const t=q(N({},o.jsonData),{flags:o.jsonData.flags||{},http:e});l(q(N({},o),{jsonData:t}))}}),i().createElement("div",{className:"gf-form-group"},i().createElement("h3",{className:"page-heading"},"Excluded Data Flags",i().createElement(u.Tooltip,{content:"Mark flags which you want excluded"},i().createElement("span",{style:{cursor:"help"}}," ðŸ›ˆ"))),i().createElement("div",{className:"gf-form-inline"},i().createElement(u.InlineFieldRow,null,Object.keys(r).map(((e,t)=>i().createElement(u.InlineField,{key:t,label:e,labelWidth:16},i().createElement("div",{className:"dark-box"},i().createElement(u.Switch,{name:e,disabled:!1,value:!(!o.jsonData.flags||!o.jsonData.flags[e])&&o.jsonData.flags[e],onChange:v})))))))),i().createElement("div",{className:"gf-form-group"},i().createElement("h3",{className:"page-heading"},"Data Source Type",i().createElement(u.Tooltip,{content:"Determines the type of data that is being queried"},i().createElement("span",{style:{cursor:"help"}}," ðŸ›ˆ"))),i().createElement("div",{className:"gf-form-group"},i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Data Type",labelWidth:24},i().createElement(u.Select,{value:o.jsonData.valueType,options:d,onChange:e=>{var t;const a=q(N({},o.jsonData),{valueType:null!==(t=e.value)&&void 0!==t?t:"1"});l(q(N({},o),{jsonData:a}))},isLoading:0===d.length,invalid:void 0===o.jsonData.valueType})))),i().createElement(u.Card,null,i().createElement(u.Card.Heading,null,null===(a=s.find((e=>e.index.toString()===o.jsonData.valueType)))||void 0===a?void 0:a.name),i().createElement(u.Card.Description,null,i().createElement("p",null,"This type includes the following elements: "),i().createElement(u.TagList,{className:"pull-left",tags:null!==(m=null===(n=s.find((e=>e.index.toString()===o.jsonData.valueType)))||void 0===n?void 0:n.timeSeriesDefinition.split(","))&&void 0!==m?m:[]})))))})).setQueryEditor((function({query:e,onChange:t,datasource:a,onRunQuery:n}){const r=i().useMemo((()=>{var t;return null!==(t=e.queryType)&&void 0!==t?t:"Elements"}),[e]),[o,s]=i().useState(!1);i().useEffect((()=>{const e=setTimeout((()=>{n()}),3e3);return()=>{clearTimeout(e)}}),[o]);const c=i().useCallback((a=>{var n;t(te(ee({},e),{queryType:null!==(n=a.value)&&void 0!==n?n:"Elements"})),s((e=>!e))}),[e,t]),d=e=>{t(e),s((e=>!e))};var p;return i().createElement("div",{className:"gf-form",style:{display:"flex",flexDirection:"column"}},i().createElement("div",{className:"gf-form-group"},i().createElement("h3",{className:"page-heading"},"General Settings"),i().createElement("div",{className:"gf-form-group"},i().createElement(u.InlineField,{label:"Data Selection Mode",labelWidth:24},i().createElement(u.Select,{options:l,value:r,onChange:c,allowCustomValue:!1})),i().createElement(u.InlineField,{label:"Transpose Query",labelWidth:24},i().createElement(u.InlineSwitch,{value:null!==(p=e.transpose)&&void 0!==p&&p,onChange:t=>{var a;return d(te(ee({},e),{transpose:!(null!==(a=e.transpose)&&void 0!==a&&a)}))},showLabel:!0}))),"Elements"===r?i().createElement(K,{query:e.commandLevel,onChange:t=>d(te(ee({},e),{commandLevel:t}))}):null),i().createElement("div",{className:"gf-form-group"},i().createElement("h3",{className:"page-heading"},"Meta Data"),i().createElement(H,{datasource:a,onChange:t=>d(te(ee({},e),{metadataOptions:t})),query:e.metadataOptions})),i().createElement("div",{className:"gf-form-group"},i().createElement("h3",{className:"page-heading"},"Data Selection"),"Text"===e.queryType?i().createElement(z,{onChange:t=>d(te(ee({},e),{queryText:t})),query:e.queryText}):null,"Elements"===e.queryType||void 0===e.queryType?i().createElement(W,{onChange:t=>d(te(ee({},e),{queryText:t.queryText,parsedQuery:t.parsedQuery})),query:e,datasource:a}):null))})).setVariableQueryEditor((function(e){var a,n,l,r,o,s,c,d,p;const[v,m]=i().useState([]),[y,b]=i().useState([]);var g,f,h;return i().useEffect((()=>{(0,t.getBackendSrv)().post(e.datasource.url+"/GetValueTypeTables",{dataTypeIndex:e.datasource.dataSourceValueType,expression:""}).then((e=>{m(e.map((e=>({value:e,label:e}))))}))}),[e.datasource.url,e.datasource.dataSourceValueType]),i().useEffect((()=>{var a,n;void 0!==(null===(a=e.query)||void 0===a?void 0:a.tableName)&&0!==(null===(n=e.query)||void 0===n?void 0:n.tableName.length)&&(0,t.getBackendSrv)().post(e.datasource.url+"/GetValueTypeTableFields",{dataTypeIndex:e.datasource.dataSourceValueType,expression:e.query.tableName}).then((e=>{b(e.map((e=>({value:e.name,label:e.name}))))}))}),[e.datasource.url,e.datasource.dataSourceValueType,e.query.tableName]),i().createElement("div",{className:"gf-form",style:{display:"flex",flexDirection:"column"}},i().createElement("div",{className:"gf-form-group"},i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"Select",labelWidth:12},i().createElement(u.Select,{value:null===(a=e.query)||void 0===a?void 0:a.fieldName,options:y,isLoading:0===y.length,onChange:function(t){var a;e.onChange(le(ne({},e.query),{fieldName:null!==(a=t.value)&&void 0!==a?a:""}))},isSearchable:!0,invalid:0===(null!==(g=null===(l=e.query)||void 0===l||null===(n=l.fieldName)||void 0===n?void 0:n.length)&&void 0!==g?g:0),disabled:0===(null!==(f=null===(o=e.query)||void 0===o||null===(r=o.tableName)||void 0===r?void 0:r.length)&&void 0!==f?f:0)})),i().createElement(u.InlineField,{label:"FROM",labelWidth:12},i().createElement(u.Select,{value:null===(s=e.query)||void 0===s?void 0:s.tableName,options:v,isLoading:0===v.length,onChange:function(t){var a;e.onChange(le(ne({},e.query),{tableName:null!==(a=t.value)&&void 0!==a?a:"",fieldName:""}))},isSearchable:!0,invalid:0===(null!==(h=null===(d=e.query)||void 0===d||null===(c=d.tableName)||void 0===c?void 0:c.length)&&void 0!==h?h:0)}))),i().createElement(u.InlineFieldRow,null,i().createElement(u.InlineField,{label:"WHERE",labelWidth:12},i().createElement(u.Input,{value:null===(p=e.query)||void 0===p?void 0:p.condition,onChange:function(t){e.onChange(le(ne({},e.query),{condition:t.target.value}))}})))))}))})();var l=exports;for(var r in n)l[r]=n[r];n.__esModule&&Object.defineProperty(l,"__esModule",{value:!0})})();
//# sourceMappingURL=module.js.map