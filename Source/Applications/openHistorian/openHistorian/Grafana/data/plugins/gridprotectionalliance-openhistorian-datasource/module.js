!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultFlags={"Select All":{Value:!1,Order:-1,Flag:0},Normal:{Value:!1,Order:0,Flag:0},BadData:{Value:!1,Order:1,Flag:1},SuspectData:{Value:!1,Order:2,Flag:2},OverRangeError:{Value:!1,Order:3,Flag:4},UnderRangeError:{Value:!1,Order:4,Flag:8},AlarmHigh:{Value:!1,Order:5,Flag:16},AlarmLow:{Value:!1,Order:6,Flag:32},WarningHigh:{Value:!1,Order:7,Flag:64},WarningLow:{Value:!1,Order:8,Flag:128},FlatlineAlarm:{Value:!1,Order:9,Flag:256},ComparisonAlarm:{Value:!1,Order:10,Flag:512},ROCAlarm:{Value:!1,Order:11,Flag:1024},ReceivedAsBad:{Value:!1,Order:12,Flag:2048},CalculatedValue:{Value:!1,Order:13,Flag:4096},CalculationError:{Value:!1,Order:14,Flag:8192},CalculationWarning:{Value:!1,Order:15,Flag:16384},ReservedQualityFlag:{Value:!1,Order:16,Flag:32768},BadTime:{Value:!1,Order:17,Flag:65536},SuspectTime:{Value:!1,Order:18,Flag:1<<17},LateTimeAlarm:{Value:!1,Order:19,Flag:1<<18},FutureTimeAlarm:{Value:!1,Order:20,Flag:1<<19},UpSampled:{Value:!1,Order:21,Flag:1<<20},DownSampled:{Value:!1,Order:22,Flag:1<<21},DiscardedValue:{Value:!1,Order:23,Flag:1<<22},ReservedTimeFlag:{Value:!1,Order:24,Flag:1<<23},UserDefinedFlag1:{Value:!1,Order:25,Flag:1<<24},UserDefinedFlag2:{Value:!1,Order:26,Flag:1<<25},UserDefinedFlag3:{Value:!1,Order:27,Flag:1<<26},UserDefinedFlag4:{Value:!1,Order:28,Flag:1<<27},UserDefinedFlag5:{Value:!1,Order:29,Flag:1<<28},SystemError:{Value:!1,Order:30,Flag:1<<29},SystemWarning:{Value:!1,Order:31,Flag:1<<30},MeasurementError:{Value:!1,Order:32,Flag:1<<31}},t.FunctionList={Set:{Function:"Set",Parameters:[]},Slice:{Function:"Slice",Parameters:[{Default:1,Type:"double",Description:"A floating-point value that must be greater than or equal to zero that represents the desired time tolerance, in seconds, for the time slice."}]},Average:{Function:"Average",Parameters:[]},Minimum:{Function:"Minimum",Parameters:[]},Maximum:{Function:"Maximum",Parameters:[]},Total:{Function:"Total",Parameters:[]},Range:{Function:"Range",Parameters:[]},Count:{Function:"Count",Parameters:[]},Distinct:{Function:"Distinct",Parameters:[]},AbsoluteValute:{Function:"AbsoluteValue",Parameters:[]},Add:{Function:"Add",Parameters:[{Default:0,Type:"string",Description:"A floating point value representing an additive offset to be applied to each value the source series."}]},Subtract:{Function:"Subtract",Parameters:[{Default:0,Type:"string",Description:"A floating point value representing an additive offset to be applied to each value the source series."}]},Multiply:{Function:"Multiply",Parameters:[{Default:1,Type:"string",Description:"A floating point value representing an additive offset to be applied to each value the source series."}]},Divide:{Function:"Multiply",Parameters:[{Default:1,Type:"string",Description:"A floating point value representing an additive offset to be applied to each value the source series."}]},Round:{Function:"Round",Parameters:[{Default:0,Type:"double",Description:"A positive integer value representing the number of decimal places in the return value - defaults to 0."}]},Floor:{Function:"Floor",Parameters:[]},Ceiling:{Function:"Ceiling",Parameters:[]},Truncate:{Function:"Truncate",Parameters:[]},StandardDeviation:{Function:"StandardDeviation",Parameters:[{Default:!1,Type:"boolean",Description:"A boolean flag representing if the sample based calculation should be used - defaults to false, which means the population based calculation should be used."}]},Median:{Function:"Median",Parameters:[]},Mode:{Function:"Mode",Parameters:[]},Top:{Function:"Top",Parameters:[{Default:"100%",Type:"string",Description:"A positive integer value, representing a total, that is greater than zero - or - a floating point value, suffixed with ' %' representing a percentage, that must range from greater than 0 to less than or equal to 100."},{Default:!0,Type:"boolean",Description:"A boolean flag representing if time in dataset should be normalized - defaults to true."}]},Bottom:{Function:"Bottom",Parameters:[{Default:"100%",Type:"string",Description:"A positive integer value, representing a total, that is greater than zero - or - a floating point value, suffixed with ' %' representing a percentage, that must range from greater than 0 to less than or equal to 100."},{Default:!0,Type:"boolean",Description:"A boolean flag representing if time in dataset should be normalized - defaults to true."}]},Random:{Function:"Random",Parameters:[{Default:"100%",Type:"string",Description:"A positive integer value, representing a total, that is greater than zero - or - a floating point value, suffixed with ' %' representing a percentage, that must range from greater than 0 to less than or equal to 100."},{Default:!0,Type:"boolean",Description:"A boolean flag representing if time in dataset should be normalized - defaults to true."}]},First:{Function:"First",Parameters:[{Default:"1",Type:"string",Description:"A positive integer value, representing a total, that is greater than zero - or - a floating point value, suffixed with ' %' representing a percentage, that must range from greater than 0 to less than or equal to 100 - defaults to 1."}]},Last:{Function:"Last",Parameters:[{Default:"1",Type:"string",Description:"A positive integer value, representing a total, that is greater than zero - or - a floating point value, suffixed with ' %' representing a percentage, that must range from greater than 0 to less than or equal to 100 - defaults to 1."}]},Percentile:{Function:"Percentile",Parameters:[{Default:"100%",Type:"string",Description:"A floating point value, representing a percentage, that must range from 0 to 100."}]},Difference:{Function:"Difference",Parameters:[]},TimeDifference:{Function:"TimeDifference",Parameters:[{Default:"Seconds",Type:"time",Description:"Specifies the type of time units and must be one of the following: Seconds, Nanoseconds, Microseconds, Milliseconds, Minutes, Hours, Days, Weeks, Ke (i.e., traditional Chinese unit of decimal time), Ticks (i.e., 100-nanosecond intervals), PlanckTime or AtomicUnitsOfTime - defaults to Seconds."}]},Derivative:{Function:"Derivative",Parameters:[{Default:"Seconds",Type:"time",Description:"Specifies the type of time units and must be one of the following: Seconds, Nanoseconds, Microseconds, Milliseconds, Minutes, Hours, Days, Weeks, Ke (i.e., traditional Chinese unit of decimal time), Ticks (i.e., 100-nanosecond intervals), PlanckTime or AtomicUnitsOfTime - defaults to Seconds."}]},TimeIntegration:{Function:"TimeIntegration",Parameters:[{Default:"Hours",Type:"time",Description:"Specifies the type of time units and must be one of the following: Seconds, Nanoseconds, Microseconds, Milliseconds, Minutes, Hours, Days, Weeks, Ke (i.e., traditional Chinese unit of decimal time), Ticks (i.e., 100-nanosecond intervals), PlanckTime or AtomicUnitsOfTime - defaults to Hours."}]},Interval:{Function:"Interval",Parameters:[{Default:0,Type:"double",Description:"A floating-point value that must be greater than or equal to zero that represents the desired time interval, in time units, for the returned data. "},{Default:"Seconds",Type:"time",Description:"Specifies the type of time units and must be one of the following: Seconds, Nanoseconds, Microseconds, Milliseconds, Minutes, Hours, Days, Weeks, Ke (i.e., traditional Chinese unit of decimal time), Ticks (i.e., 100-nanosecond intervals), PlanckTime or AtomicUnitsOfTime - defaults to Seconds."}]},IncludeRange:{Function:"IncludeRange",Parameters:[{Default:0,Type:"double",Description:"Floating-point number that represents the low range of values allowed in the return series."},{Default:0,Type:"double",Description:"Floating-point number that represents the high range of values allowed in the return series."},{Default:!1,Type:"boolean",Description:"A boolean flag that determines if range values are inclusive, i.e., allowed values are >= low and <= high - defaults to false, which means values are exclusive, i.e., allowed values are > low and < high."},{Default:!1,Type:"boolean",Description:"A boolean flag - when four parameters are provided, third parameter determines if low value is inclusive and forth parameter determines if high value is inclusive."}]},ExcludeRange:{Function:"ExcludeRange",Parameters:[{Default:0,Type:"double",Description:"Floating-point number that represents the low range of values allowed in the return series."},{Default:0,Type:"double",Description:"Floating-point number that represents the high range of values allowed in the return series."},{Default:!1,Type:"boolean",Description:"A boolean flag that determines if range values are inclusive, i.e., allowed values are >= low and <= high - defaults to false, which means values are exclusive, i.e., allowed values are > low and < high."},{Default:!1,Type:"boolean",Description:"A boolean flag - when four parameters are provided, third parameter determines if low value is inclusive and forth parameter determines if high value is inclusive."}]},FilterNaN:{Function:"FilterNaN",Parameters:[{Default:!0,Type:"boolean",Description:"A boolean flag that determines if infinite values should also be excluded - defaults to true."}]},UnwrapAngle:{Function:"UnwrapAngle",Parameters:[{Default:"Degrees",Type:"angleUnits",Description:"Specifies the type of angle units and must be one of the following: Degrees, Radians, Grads, ArcMinutes, ArcSeconds or AngularMil - defaults to Degrees."}]},WrapAngle:{Function:"WrapAngle",Parameters:[{Default:"Degrees",Type:"angleUnits",Description:"Specifies the type of angle units and must be one of the following: Degrees, Radians, Grads, ArcMinutes, ArcSeconds or AngularMil - defaults to Degrees."}]},Label:{Function:"Label",Parameters:[{Default:"Name",Type:"string",Description:"Renames a series with the specified label value."}]}},t.WhereOperators=["=","<>","<","<=",">",">=","LIKE","NOT LIKE","IN","NOT IN","IS","IS NOT"],t.Booleans=["true","false"],t.AngleUnits=["Degrees","Radians","Grads","ArcMinutes","ArcSeconds","AngularMil"],t.TimeUnits=["Weeks","Days","Hours","Minutes","Seconds","Milliseconds","Microseconds","Nanoseconds","Ticks","PlankTime","AtomicUnitsOfTime","Ke"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){}return e.prototype.init=function(){},e.prototype.renderingCompleted=function(){},e.prototype.refresh=function(){},e.prototype.publishAppEvent=function(e,t){},e.prototype.changeView=function(e,t){},e.prototype.viewPanel=function(){this.changeView(!0,!1)},e.prototype.editPanel=function(){this.changeView(!0,!0)},e.prototype.exitFullscreen=function(){this.changeView(!1,!1)},e.prototype.initEditMode=function(){},e.prototype.changeTab=function(e){},e.prototype.addEditorTab=function(e,t,n){},e.prototype.getMenu=function(){return[]},e.prototype.getExtendedMenu=function(){return[]},e.prototype.otherPanelInFullscreenMode=function(){return!1},e.prototype.calculatePanelHeight=function(){},e.prototype.render=function(e){},e.prototype.toggleEditorHelp=function(e){},e.prototype.duplicate=function(){},e.prototype.updateColumnSpan=function(e){},e.prototype.removePanel=function(){},e.prototype.editPanelJson=function(){},e.prototype.replacePanel=function(e,t){},e.prototype.sharePanel=function(){},e.prototype.getInfoMode=function(){},e.prototype.getInfoContent=function(e){},e.prototype.openInspector=function(){},e}();t.PanelCtrl=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.Datasource=r.default;var i=n(5);t.QueryCtrl=i.default;var a=n(13);t.ConfigCtrl=a.default;var o=n(14);t.QueryOptionsCtrl=o.default;var s=n(15);t.AnnotationsQueryCtrl=s.default;var u=n(16),l=n(17),c=n(18);angular.module("grafana.directives").directive("queryOptions",(function(){return{templateUrl:"public/plugins/gridprotectionalliance-openhistorian-datasource/partial/query.options.html",restrict:"E",controller:o.default,controllerAs:"queryOptionCtrl",scope:{flags:"=",return:"="}}})),angular.module("grafana.directives").directive("elementPicker",(function(){return{templateUrl:"public/plugins/gridprotectionalliance-openhistorian-datasource/partial/query.elementPicker.html",restrict:"E",controller:u.default,controllerAs:"openHistorianElementPickerCtrl",scope:{target:"=",datasource:"=",panel:"="}}})),angular.module("grafana.directives").directive("textEditor",(function(){return{templateUrl:"public/plugins/gridprotectionalliance-openhistorian-datasource/partial/query.textEditor.html",restrict:"E",controller:l.default,controllerAs:"openHistorianTextEditorCtrl",scope:{target:"=",datasource:"=",panel:"="}}})),angular.module("grafana.directives").directive("filterExpression",(function(){return{templateUrl:"public/plugins/gridprotectionalliance-openhistorian-datasource/partial/query.filterExpression.html",restrict:"E",controller:c.default,controllerAs:"openHistorianFilterExpressionCtrl",scope:{target:"=",datasource:"=",panel:"="}}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r,i){this.backendSrv=n,this.templateSrv=r,this.uiSegmentSrv=i,this.type=e.type,this.url=e.url,this.name=e.name,this.q=t,this.backendSrv=n,this.templateSrv=r,this.uiSegmentSrv=i,this.dataFlags=e.jsonData.flags,this.options={excludedDataFlags:null==e.jsonData.Excluded?0:e.jsonData.Excluded,excludeNormalData:null!=e.jsonData.Normal&&e.jsonData.Normal,updateAlarms:null!=e.jsonData.Alarms&&e.jsonData.Alarms}}return e.prototype.query=function(e){var t=this.buildQueryParameters(e);if(t.targets=t.targets.filter((function(e){return!e.hide})),t.options=JSON.parse(JSON.stringify(this.options)),t.targets.length<=0)return Promise.resolve({data:[]});var n=this;return this.options.updateAlarms&&this.backendSrv.datasourceRequest({url:this.url+"/GetAlarms",data:t,method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){n.GetDashboard(e.data,t,n)})).catch((function(e){})),this.backendSrv.datasourceRequest({url:this.url+"/query",data:t,method:"POST",headers:{"Content-Type":"application/json"}})},e.prototype.testDatasource=function(){return this.backendSrv.datasourceRequest({url:this.url+"/",method:"GET"}).then((function(e){if(200===e.status)return{status:"success",message:"Data source is working",title:"Success"}}))},e.prototype.annotationQuery=function(e){var t=this.templateSrv.replace(e.annotation.query,{},"glob"),n={range:e.range,annotation:{name:e.annotation.name,datasource:e.annotation.datasource,enable:e.annotation.enable,iconColor:e.annotation.iconColor,query:t},rangeRaw:e.rangeRaw};return this.backendSrv.datasourceRequest({url:this.url+"/annotations",method:"POST",data:n}).then((function(e){return e.data}))},e.prototype.metricFindQuery=function(e,t){var n={target:this.templateSrv.replace(e,null,"regex")};return this.backendSrv.datasourceRequest({url:this.url+"/search",data:n,method:"POST",headers:{"Content-Type":"application/json"}}).then(this.mapToTextValue)},e.prototype.whereFindQuery=function(e){var t={target:this.templateSrv.replace(e,null,"regex")};return this.backendSrv.datasourceRequest({url:this.url+"/SearchFields",data:t,method:"POST",headers:{"Content-Type":"application/json"}}).then(this.mapToTextValue)},e.prototype.mapToTextValue=function(e){return _.map(e.data,(function(e,t){return{text:e,value:e}}))},e.prototype.buildQueryParameters=function(e){var t=this;e.targets=_.filter(e.targets,(function(e){return"select metric"!==e.target}));var n=_.map(e.targets,(function(e){return{target:t.fixTemplates(e),refId:e.refId,hide:e.hide,excludedFlags:((e||{}).queryOptions||{}).Excluded||0,excludeNormalFlags:((e||{}).queryOptions||{}).Normal||!1,queryType:e.queryType,queryOptions:e.queryOptions}}));return e.targets=n,e},e.prototype.filterFindQuery=function(){return this.backendSrv.datasourceRequest({url:this.url+"/SearchFilters",method:"POST",headers:{"Content-Type":"application/json"}}).then(this.mapToTextValue)},e.prototype.orderByFindQuery=function(e){var t={target:this.templateSrv.replace(e,null,"regex")};return this.backendSrv.datasourceRequest({url:this.url+"/SearchOrderBys",data:t,method:"POST",headers:{"Content-Type":"application/json"}}).then(this.mapToTextValue)},e.prototype.getMetaData=function(e){var t={target:this.templateSrv.replace(e,null,"regex")};return this.backendSrv.datasourceRequest({url:this.url+"/GetMetadata",data:t,method:"POST",headers:{"Content-Type":"application/json"}})},e.prototype.getAlarmStates=function(e){var t={target:this.templateSrv.replace(e,null,"regex")};return this.backendSrv.datasourceRequest({url:this.url+"/GetAlarmState",data:t,method:"POST",headers:{"Content-Type":"application/json"}})},e.prototype.getDataAvailability=function(e){var t={target:this.templateSrv.replace(e,null,"regex")};return this.backendSrv.datasourceRequest({url:this.url+"/GetDataAvailability",data:t,method:"POST",headers:{"Content-Type":"application/json"}})},e.prototype.fixTemplates=function(e){if(null==e.target)return"";var t=this,n=" ";return"Element List"==e.queryType&&(n=";"),e.target.split(n).map((function(e){return t.templateSrv.variableExists(e)?t.templateSrv.replaceWithText(e):e})).join(n)},e.prototype.queryLocation=function(e){return null!=e.target&&null!=e.target||(e.target={}),null==e.radius||null==e.radius||null==e.zoom||null==e.zoom?this.backendSrv.datasourceRequest({method:"POST",url:this.url+"/GetLocationData",data:JSON.stringify(e.target),headers:{"Content-Type":"application/json"}}):this.backendSrv.datasourceRequest({method:"POST",url:this.url+"/GetLocationData?radius="+e.radius+"&zoom="+e.zoom,data:JSON.stringify(e.target),headers:{"Content-Type":"application/json"}})},e.prototype.GetDashboard=function(e,t,n){n.backendSrv.datasourceRequest({url:n.url+"/QueryAlarms",method:"POST",data:t,headers:{"Content-Type":"application/json"}}).then((function(e){})).catch((function(e){})),n.backendSrv.datasourceRequest({url:"api/search?dashboardIds="+t.dashboardId,method:"GET",headers:{"Content-Type":"application/json"}}).then((function(r){n.backendSrv.datasourceRequest({url:"api/dashboards/uid/"+r.data[0].uid,method:"GET",headers:{"Content-Type":"application/json"}}).then((function(r){n.CheckPanel(e,t,r.data,n)}))}))},e.prototype.CheckPanel=function(e,t,n,r){var i=n.dashboard.panels;if(void 0!==i&&null!=(i=i.find((function(e){return e.id==t.panelId})))&&null!=i&&(null!=(i=i.thresholds)&&null!=i&&0!=i.length||0!=e.length))if((null==i||null==i||0==i.length)&&e.length>0)r.UpdateAlarms(e,n.dashboard.uid,t,r);else{var a=[];try{a=i.map((function(e){return e.value}))}catch(e){return}var o=!1;e.forEach((function(e){a.includes(e.SetPoint)||(o=!0)})),o&&r.UpdateAlarms(e,n.dashboard.uid,t,r)}},e.prototype.UpdateAlarms=function(e,t,n,r){r.backendSrv.datasourceRequest({url:"api/dashboards/uid/"+t,method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){var i=t.data.dashboard,a=i.panels.findIndex((function(e){return e.id==n.panelId}));i.panels[a].thresholds=e.map((function(e){var t="gt";21!=e.Operation&&22!=e.Operation||(t="lt");var n=!0;return 1!=e.Operation&&2!=e.Operation||(n=!1),{colorMode:"critical",fill:n,line:!0,op:t,value:e.SetPoint}})),r.backendSrv.datasourceRequest({url:"api/dashboards/db",method:"POST",data:{overwrite:!0,dashboard:i},headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e)}))}))},e}();t.default=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(6);n(9);var o=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n)||this;o.uiSegmentSrv=r,o.templateSrv=i,o.$compile=a,o.$scope=t,o.$compile=a;var s=o;return o.uiSegmentSrv=r,o.queryTypes=["Element List","Filter Expression","Text Editor"],o.queryType=null==o.target.queryType?"Element List":o.target.queryType,o.queryOptionsOpen=!1,null==s.target.queryOptions&&(s.target.queryOptions={Excluded:s.datasource.options.excludedDataFlags,Normal:s.datasource.options.excludeNormalData}),o}return i(t,e),t.prototype.toggleQueryOptions=function(){this.queryOptionsOpen=!this.queryOptionsOpen},t.prototype.onChangeInternal=function(){this.panelCtrl.refresh()},t.prototype.changeQueryType=function(){"Text Editor"==this.queryType?this.target.targetText=this.target.target:(this.target.target="",delete this.target.functionSegments)},t.templateUrl="partial/query.editor.html",t}(a.QueryCtrl);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.PanelCtrl=r.PanelCtrl;var i=n(7);t.MetricsPanelCtrl=i.MetricsPanelCtrl;var a=n(8);t.QueryCtrl=a.QueryCtrl,t.loadPluginCss=function(e){}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.editorTabIndex=1,r.panel.targets||(r.panel.targets=[{}]),r}return i(t,e),t.prototype.onPanelTearDown=function(){},t.prototype.onInitMetricsPanelEditMode=function(){},t.prototype.onMetricsPanelRefresh=function(){},t.prototype.setTimeQueryStart=function(){},t.prototype.setTimeQueryEnd=function(){},t.prototype.updateTimeRange=function(e){},t.prototype.calculateInterval=function(){},t.prototype.applyPanelTimeOverrides=function(){},t.prototype.issueQueries=function(e){},t.prototype.handleQueryResult=function(e){},t.prototype.handleDataStream=function(e){},t.prototype.setDatasource=function(e){},t.prototype.addQuery=function(e){},t.prototype.removeQuery=function(e){},t.prototype.moveQuery=function(e,t){},t}(n(1).PanelCtrl);t.MetricsPanelCtrl=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.$scope=e,this.$injector=t,this.panelCtrl=this.panelCtrl||{panel:{}},this.target=this.target||{target:""},this.panel=this.panelCtrl.panel}return e.prototype.refresh=function(){},e}();t.QueryCtrl=r},function(e,t,n){var r=n(10);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(12)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".generic-datasource-query-row .query-keyword {\n  width: 75px;\n}",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var o=0;o<e.length;o++){var s=e[o];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},function(e,t,n){"use strict";var r,i={},a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function s(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=i[r.id],o=0;if(a){for(a.refs++;o<a.parts.length;o++)a.parts[o](r.parts[o]);for(;o<r.parts.length;o++)a.parts.push(m(r.parts[o],t))}else{for(var s=[];o<r.parts.length;o++)s.push(m(r.parts[o],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function l(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,p=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=p(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i&&e.setAttribute("media",i),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,g=0;function m(e,t){var n,r,i;if(t.singleton){var a=g++;n=f||(f=l(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=l(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=s(e,t);return u(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var o=n[a],l=i[o.id];l&&(l.refs--,r.push(l))}e&&u(s(e,t),t);for(var c=0;c<r.length;c++){var p=r[c];if(0===p.refs){for(var d=0;d<p.parts.length;d++)p.parts[d]();delete i[p.id]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.current.jsonData.Excluded=this.current.jsonData.Excluded||0,this.current.jsonData.Normal=this.current.jsonData.Normal||!1,this.current.jsonData.Alarms=this.current.jsonData.Alarms||!1}return e.templateUrl="partial/config.html",e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function e(e,t){var n=this;this.$scope=e,this.$compile=t,this.$scope=e;var r=JSON.parse(JSON.stringify(e.return));this.dataFlags=this.hex2flags(parseInt(r.Excluded)),this.dataFlags.Normal.Value=r.Normal,this.includeAlarm=r.Alarms,this.return=e.return,this.flagArray=_.map(Object.keys(this.dataFlags),(function(e){return{key:e,order:n.dataFlags[e].Order}})).sort((function(e,t){return e.order-t.order}))}return e.prototype.calculateFlags=function(e){var t=this,n=t.return.Excluded;"Select All"==e?(_.each(Object.keys(t.dataFlags),(function(e,n,r){t.dataFlags[e].Value="Normal"!=e&&t.dataFlags["Select All"].Value})),n=t.dataFlags["Select All"].Value?4294967295:0):(t.dataFlags["Select All"].Value=!1,n^=t.dataFlags[e].Flag),t.return.Excluded=n,t.return.Normal=t.dataFlags.Normal.Value},e.prototype.changeAlarms=function(){this.return.Alarms=this.includeAlarm},e.prototype.hex2flags=function(e){var t=e,n=JSON.parse(JSON.stringify(r.DefaultFlags));return _.each(Object.keys(n),(function(e,r,i){"Select All"!=e&&(n[e].Value=0!=(n[e].Flag&t))})),n},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.templateUrl="partial/annotations.editor.html",e}();t.default=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function t(e,t){this.$scope=e,this.uiSegmentSrv=t;var n=this;this.$scope=e,this.uiSegmentSrv=t,this.segments=null==this.$scope.target.segments?[]:this.$scope.target.segments.map((function(e){return n.uiSegmentSrv.newSegment({value:e.text,expandable:!0})})),this.functionSegments=null==this.$scope.target.functionSegments?[]:this.$scope.target.functionSegments,this.functions=[],this.elementSegment=this.uiSegmentSrv.newPlusButton(),this.functionSegment=this.uiSegmentSrv.newPlusButton(),this.buildFunctionArray(),this.setTargetWithElements(),delete e.target.wheres,delete e.target.topNSegment,delete e.target.orderBys,delete e.target.whereSegment,delete e.target.filterSegment,delete e.target.orderBySegment,delete e.target.targetText}return t.prototype.getElementSegments=function(e){var t=this,n=null;return""!=event.target.value&&(n=event.target.value),t.$scope.datasource.metricFindQuery(n).then((function(n){var r=_.map(n,(function(e){return t.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})}));return r.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),_.each(t.$scope.datasource.templateSrv.variables,(function(e,n,i){"query"==e.type&&r.unshift(t.uiSegmentSrv.newCondition("$"+e.name))})),e||r.unshift(t.uiSegmentSrv.newSegment("-REMOVE-")),_.filter(r,(function(e){return null==_.find(t.segments,(function(t){return t.value==e.value}))}))}))},t.prototype.addElementSegment=function(){null!=event.target.text&&(this.segments.push(this.uiSegmentSrv.newSegment({value:event.target.text,expandable:!0})),this.setTargetWithElements());var e=this.uiSegmentSrv.newPlusButton();this.elementSegment.value=e.value,this.elementSegment.html=e.html,this.$scope.panel.refresh()},t.prototype.segmentValueChanged=function(e,t){"-REMOVE-"==e.value?this.segments.splice(t,1):this.segments[t]=e,this.setTargetWithElements()},t.prototype.setTargetWithElements=function(){var e="",t=this;_.each(t.functions,(function(n,r,i){"QUERY"==n.value?e+=t.segments.map((function(e){return e.value})).join(";"):e+=n.value})),t.$scope.target.target=""!=e?e:t.segments.map((function(e){return e.value})).join(";"),t.$scope.target.functionSegments=t.functionSegments,t.$scope.target.segments=t.segments,t.$scope.target.queryType="Element List",this.$scope.panel.refresh()},t.prototype.getFunctionsToAddNew=function(){var e=this,t=this,n=[];return _.each(Object.keys(r.FunctionList),(function(e,r,i){n.push(t.uiSegmentSrv.newSegment(e))})),0==this.functions.length&&(n=n.slice(2,n.length)),n.sort((function(e,t){var n=e.value.toUpperCase(),r=t.value.toUpperCase();return n<r?-1:n>r?1:0})),Promise.resolve(_.filter(n,(function(t){return null==_.find(e.functions,(function(e){return e.value==t.value}))})))},t.prototype.getFunctionsToEdit=function(e,t){var n=[this.uiSegmentSrv.newSegment("-REMOVE-")];return"Operator"==e.type?Promise.resolve():(e.value,Promise.resolve(n))},t.prototype.functionValueChanged=function(e,t){r.FunctionList[e.Function];if("-REMOVE-"==e.value){var n=1,i=_.findIndex(this.functionSegments,(function(t){return t.Function==e.Function}));"Slice"==e.Function?this.functionSegments[i+1].Parameters=this.functionSegments[i+1].Parameters.slice(1,this.functionSegments[i+1].Parameters.length):i>0&&("Set"==this.functionSegments[i-1].Function||"Slice"==this.functionSegments[i-1].Function)&&(--i,++n),this.functionSegments.splice(i,n)}else if("Function"!=e.Type){i=_.findIndex(this.functionSegments,(function(t){return t.Function==e.Function}));this.functionSegments[i].Parameters[e.Index].Default=e.value}this.buildFunctionArray(),this.setTargetWithElements()},t.prototype.addFunctionSegment=function(){var e=r.FunctionList[event.target.text];"Slice"==e.Function&&this.functionSegments[0].Parameters.unshift(e.Parameters[0]),this.functionSegments.unshift(JSON.parse(JSON.stringify(e))),this.buildFunctionArray();var t=this.uiSegmentSrv.newPlusButton();this.functionSegment.value=t.value,this.functionSegment.html=t.html,this.setTargetWithElements()},t.prototype.buildFunctionArray=function(){var e=this;if(e.functions=[],0!=this.functionSegments.length){_.each(e.functionSegments,(function(t,n,r){var i=e.uiSegmentSrv.newSegment(t.Function);if(i.Type="Function",i.Function=t.Function,e.functions.push(i),"Set"!=i.value&&"Slice"!=i.value){var a=e.uiSegmentSrv.newOperator("(");a.Type="Operator",e.functions.push(a),_.each(t.Parameters,(function(n,r,i){var a=e.uiSegmentSrv.newFake(n.Default.toString());a.Type=n.Type,a.Function=t.Function,a.Description=n.Description,a.Index=r,e.functions.push(a);var o=e.uiSegmentSrv.newOperator(",");o.Type="Operator",e.functions.push(o)}))}}));var t=e.uiSegmentSrv.newCondition("QUERY");for(var n in t.Type="Query",e.functions.push(t),e.functionSegments)if("Set"!=e.functionSegments[n].Function&&"Slice"!=e.functionSegments[n].Function){var r=e.uiSegmentSrv.newOperator(")");r.Type="Operator",e.functions.push(r)}}},t.prototype.getBooleans=function(){var e=this;return Promise.resolve(r.Booleans.map((function(t){return e.uiSegmentSrv.newSegment(t)})))},t.prototype.getAngleUnits=function(){var e=this;return Promise.resolve(r.AngleUnits.map((function(t){return e.uiSegmentSrv.newSegment(t)})))},t.prototype.getTimeSelect=function(){var e=this;return Promise.resolve(r.TimeUnits.map((function(t){return e.uiSegmentSrv.newSegment(t)})))},t.prototype.inputChange=function(t,n){var r=this;clearTimeout(this.typingTimer),this.typingTimer=e.setTimeout((function(){r.functionValueChanged(t,n)}),3e3),event.target.focus()},t}();t.default=i}).call(this,n(2))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.$scope=e,this.templateSrv=t,this.$scope=e,this.targetText=null==e.target.targetText?"":e.target.targetText,this.setTargetWithText(),delete e.target.segments,delete e.target.functionSegments,delete e.target.wheres,delete e.target.topNSegment,delete e.target.functions,delete e.target.orderBys,delete e.target.whereSegment,delete e.target.filterSegment,delete e.target.orderBySegment,delete e.target.functionSegment}return e.prototype.setTargetWithText=function(){this.$scope.target.targetText=this.targetText,this.$scope.target.target=this.targetText,this.$scope.target.queryType="Text Editor",this.$scope.panel.refresh()},e}();t.default=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(){function t(e,t,n){this.uiSegmentSrv=n,this.uiSegmentSrv=n,this.$scope=e,this.target=e.target,this.datasource=e.datasource,this.panelCtrl=e.panel;var r=this;this.wheres=null==this.target.wheres?[]:this.target.wheres.map((function(e){return"operator"==e.type?r.uiSegmentSrv.newOperator(e.text):"condition"==e.type?r.uiSegmentSrv.newCondition(e.text):r.uiSegmentSrv.newSegment(e.value)})),this.functionSegments=null==this.target.functionSegments?[]:this.target.functionSegments,this.topNSegment=null==this.target.topNSegment?null:this.target.topNSegment,this.functions=[],this.orderBys=null==this.target.orderBys?[]:this.target.orderBys.map((function(e){return"condition"==e.type?r.uiSegmentSrv.newCondition(e.value):r.uiSegmentSrv.newSegment(e.value)})),this.whereSegment=this.uiSegmentSrv.newPlusButton(),this.filterSegment=null==this.target.filterSegment?this.uiSegmentSrv.newSegment("ActiveMeasurements"):this.uiSegmentSrv.newSegment(this.target.filterSegment.value),this.orderBySegment=this.uiSegmentSrv.newPlusButton(),this.functionSegment=this.uiSegmentSrv.newPlusButton(),this.typingTimer,delete e.target.segments,delete e.target.targetText,this.setTargetWithQuery()}return t.prototype.setTargetWithQuery=function(){if(0==this.wheres.length)return this.target.target="",void this.panelCtrl.refresh();var e=this.filterSegment.value+" ",t=this.topNSegment?"TOP "+this.topNSegment+" ":"",n="WHERE ";_.each(this.wheres,(function(e,t,r){n+=e.value+" "}));var r="";_.each(this.orderBys,(function(e,t,n){r+=(0==t?"ORDER BY ":"")+e.value+("condition"==e.type&&t<n.length-1?",":"")+" "}));var i="FILTER "+t+e+n+r,a="";_.each(this.functions,(function(e,t,n){"QUERY"==e.value?a+=i:a+=e.value})),this.target.target=""!=a?a:i,this.target.topNSegment=this.topNSegment,this.target.filterSegment=this.filterSegment,this.target.orderBys=this.orderBys,this.target.wheres=this.wheres,this.target.functionSegments=this.functionSegments,this.target.queryType="Filter Expression",this.panelCtrl.refresh()},t.prototype.topNValueChanged=function(){var t=this;clearTimeout(t.typingTimer),t.typingTimer=e.setTimeout((function(){t.setTargetWithQuery()}),1e3),event.target.focus()},t.prototype.getWheresToEdit=function(e,t){var n=this;return"operator"===e.type?Promise.resolve(this.uiSegmentSrv.newOperators(r.WhereOperators)):"value"===e.type?Promise.resolve(null):"condition"===e.type?Promise.resolve([this.uiSegmentSrv.newCondition("AND"),this.uiSegmentSrv.newCondition("OR")]):this.datasource.whereFindQuery(this.filterSegment.value).then((function(e){var t=_.map(e,(function(e){return n.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})}));return t.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),t.unshift(n.uiSegmentSrv.newSegment("-REMOVE-")),t}))},t.prototype.whereValueChanged=function(e,t){"-REMOVE-"==e.value&&(0==t&&this.wheres.length>3&&"condition"==this.wheres[t+3].type?this.wheres.splice(t,4):t>0&&"condition"==this.wheres[t-1].type?this.wheres.splice(t-1,4):this.wheres.splice(t,3)),"operator"==e.type?this.wheres[t]=this.uiSegmentSrv.newOperator(e.value):"condition"==e.type?this.wheres[t]=this.uiSegmentSrv.newCondition(e.value):"value"!=e.type||$.isNumeric(e.value)||"NULL"==e.value.toUpperCase()||(this.wheres[t]=this.uiSegmentSrv.newSegment("'"+e.value+"'")),this.setTargetWithQuery()},t.prototype.getWheresToAddNew=function(){var e=this;return this.datasource.whereFindQuery(e.filterSegment.value).then((function(t){var n=_.map(t,(function(t){return e.uiSegmentSrv.newSegment({value:t.text,expandable:t.expandable})}));return n.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),n}))},t.prototype.addWhere=function(){this.wheres.length>0&&this.wheres.push(this.uiSegmentSrv.newCondition("AND")),this.wheres.push(this.uiSegmentSrv.newSegment(event.target.text)),this.wheres.push(this.uiSegmentSrv.newOperator("NOT LIKE")),this.wheres.push(this.uiSegmentSrv.newFake("''","value","query-segment-value"));var e=this.uiSegmentSrv.newPlusButton();this.whereSegment.value=e.value,this.whereSegment.html=e.html,this.setTargetWithQuery()},t.prototype.getFilterToEdit=function(){var e=this;return this.datasource.filterFindQuery().then((function(t){var n=_.map(t,(function(t){return e.uiSegmentSrv.newSegment({value:t.text,expandable:t.expandable})}));return n.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),n}))},t.prototype.filterValueChanged=function(){this.orderBySegment=this.uiSegmentSrv.newPlusButton(),this.wheres=[],this.setTargetWithQuery(),this.panelCtrl.refresh()},t.prototype.getOrderBysToAddNew=function(){var e=this;return this.datasource.orderByFindQuery(e.filterSegment.value).then((function(t){var n=_.map(t,(function(t){return e.uiSegmentSrv.newSegment({value:t.text,expandable:t.expandable})}));return n.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),_.filter(n,(function(t){return null==_.find(e.orderBys,(function(e){return e.value==t.value}))}))}))},t.prototype.getOrderBysToEdit=function(e){var t=this,n=this;return"condition"==e.type?Promise.resolve([this.uiSegmentSrv.newCondition("ASC"),this.uiSegmentSrv.newCondition("DESC")]):"condition"==e.type?Promise.resolve([this.uiSegmentSrv.newCondition("ASC"),this.uiSegmentSrv.newCondition("DESC")]):this.datasource.orderByFindQuery(n.filterSegment.value).then((function(r){var i=_.map(r,(function(e){return n.uiSegmentSrv.newSegment({value:e.text,expandable:e.expandable})}));return i.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),"plus-button"!==e.type&&i.unshift(t.uiSegmentSrv.newSegment("-REMOVE-")),_.filter(i,(function(e){return null==_.find(n.orderBys,(function(t){return t.value==e.value}))}))}))},t.prototype.addOrderBy=function(){this.orderBys.push(this.uiSegmentSrv.newSegment(event.target.text)),this.orderBys.push(this.uiSegmentSrv.newCondition("ASC"));var e=this.uiSegmentSrv.newPlusButton();this.orderBySegment.value=e.value,this.orderBySegment.html=e.html,this.setTargetWithQuery()},t.prototype.orderByValueChanged=function(e,t){"-REMOVE-"==event.target.text?this.orderBys.splice(t,2):"condition"==e.type?this.orderBys[t]=this.uiSegmentSrv.newCondition(event.target.text):this.orderBys[t]=this.uiSegmentSrv.newSegment(event.target.text),this.setTargetWithQuery()},t.prototype.getFunctionsToAddNew=function(){var e=this,t=this,n=[];return _.each(Object.keys(r.FunctionList),(function(e,r,i){n.push(t.uiSegmentSrv.newSegment(e))})),0==this.functions.length&&(n=n.slice(2,n.length)),n.sort((function(e,t){var n=e.value.toUpperCase(),r=t.value.toUpperCase();return n<r?-1:n>r?1:0})),Promise.resolve(_.filter(n,(function(t){return null==_.find(e.functions,(function(e){return e.value==t.value}))})))},t.prototype.getFunctionsToEdit=function(e,t){var n=[this.uiSegmentSrv.newSegment("-REMOVE-")];return"Operator"==e.type?Promise.resolve():(e.value,Promise.resolve(n))},t.prototype.functionValueChanged=function(e,t){r.FunctionList[e.Function];if("-REMOVE-"==e.value){var n=1,i=_.findIndex(this.functionSegments,(function(t){return t.Function==e.Function}));"Slice"==e.Function?this.functionSegments[i+1].Parameters=this.functionSegments[i+1].Parameters.slice(1,this.functionSegments[i+1].Parameters.length):i>0&&("Set"==this.functionSegments[i-1].Function||"Slice"==this.functionSegments[i-1].Function)&&(--i,++n),this.functionSegments.splice(i,n)}else if("Function"!=e.Type){i=_.findIndex(this.functionSegments,(function(t){return t.Function==e.Function}));this.functionSegments[i].Parameters[e.Index].Default=e.value}this.buildFunctionArray(),this.setTargetWithQuery()},t.prototype.addFunctionSegment=function(){var e=r.FunctionList[event.target.text];"Slice"==e.Function&&this.functionSegments[0].Parameters.unshift(e.Parameters[0]),this.functionSegments.unshift(JSON.parse(JSON.stringify(e))),this.buildFunctionArray();var t=this.uiSegmentSrv.newPlusButton();this.functionSegment.value=t.value,this.functionSegment.html=t.html,this.setTargetWithQuery()},t.prototype.buildFunctionArray=function(){var e=this;if(e.functions=[],0!=this.functionSegments.length){_.each(e.functionSegments,(function(t,n,r){var i=e.uiSegmentSrv.newSegment(t.Function);if(i.Type="Function",i.Function=t.Function,e.functions.push(i),"Set"!=i.value&&"Slice"!=i.value){var a=e.uiSegmentSrv.newOperator("(");a.Type="Operator",e.functions.push(a),_.each(t.Parameters,(function(n,r,i){var a=e.uiSegmentSrv.newFake(n.Default.toString());a.Type=n.Type,a.Function=t.Function,a.Description=n.Description,a.Index=r,e.functions.push(a);var o=e.uiSegmentSrv.newOperator(",");o.Type="Operator",e.functions.push(o)}))}}));var t=e.uiSegmentSrv.newCondition("QUERY");for(var n in t.Type="Query",e.functions.push(t),e.functionSegments)if("Set"!=e.functionSegments[n].Function&&"Slice"!=e.functionSegments[n].Function){var r=e.uiSegmentSrv.newOperator(")");r.Type="Operator",e.functions.push(r)}}},t.prototype.getBooleans=function(){var e=this;return Promise.resolve(r.Booleans.map((function(t){return e.uiSegmentSrv.newSegment(t)})))},t.prototype.getAngleUnits=function(){var e=this;return Promise.resolve(r.AngleUnits.map((function(t){return e.uiSegmentSrv.newSegment(t)})))},t.prototype.getTimeSelect=function(){var e=this;return Promise.resolve(r.TimeUnits.map((function(t){return e.uiSegmentSrv.newSegment(t)})))},t.prototype.inputChange=function(t,n){var r=this;clearTimeout(this.typingTimer),this.typingTimer=e.setTimeout((function(){r.functionValueChanged(t,n)}),3e3),event.target.focus()},t}();t.default=i}).call(this,n(2))}]));