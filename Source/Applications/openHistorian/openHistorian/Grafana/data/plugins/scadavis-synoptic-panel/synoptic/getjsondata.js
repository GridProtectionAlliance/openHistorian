"use strict";WebSAGE.getJSONData=function(){$.ajax({url:"jsondatasimul.php?KEYS="+WebSAGE.lstpnt+"&RAND="+Math.random(),dataType:"text",success:WebSAGE.getJSONData_onSuccess,headers:{"Content-Type":"application/json"}})},WebSAGE.getJSONData_onSuccess=function(e){let t,a,l,r,o,n,p,i,s,u,S,g,y,m,b,A,c,E,d,G,w,h;if("string"==typeof e?h=JSON.parse(e):"object"==typeof e&&(h=e),h.hasOwnProperty("data")&&(h=h.data),h.hasOwnProperty("tags"))for(t=0;t<h.tags.length;t++)r=h.tags[t],n=r.path,r.hasOwnProperty("type")||(r.type="bool"==typeof r.val?"bool":"float"),r.hasOwnProperty("quality")||(r.quality=!0),r.hasOwnProperty("parameters")||(r.parameters={}),r.parameters.hasOwnProperty("Value")||(r.parameters.Value={}),r.parameters.hasOwnProperty("HighAlarmLimit")||(r.parameters.HighAlarmLimit={}),r.parameters.hasOwnProperty("LowAlarmLimit")||(r.parameters.LowAlarmLimit={}),p=parseInt(r.parameters.Value.TagClientItem)||NaN,o=isNaN(p)||0===p?t+1:p,NPTS[n]=o,TAGS[o]=n,DCRS[o]=r.parameters.Value.Desc||n,SUBS[o]=r.parameters.Value.LocationLevel0||"",BAYS[o]=r.parameters.Value.LocationLevel1||"",T[o]=r.parameters.Value.TimeStamp||(new Date).getTime(),ANOTS[o]=r.parameters.Value.BlockingAnnotation||"","float"===r.type?(LIMSUPS[o]=parseFloat(r.parameters.HighAlarmLimit.Value||Number.POSITIVE_INFINITY),LIMINFS[o]=parseFloat(r.parameters.LowAlarmLimit.Value||Number.NEGATIVE_INFINITY),V[o]=r.value,F[o]=r.quality?32:160):"bool"===r.type?(STONS[o]=r.parameters.Value.DigitalAlarmTextAppendTrue||"_TRUE_",STOFS[o]=r.parameters.Value.DigitalAlarmTextAppendFalse||"_FALSE_",F[o]=r.quality?0:128,r.value?(V[o]=0,F[o]=2|F[o]):(V[o]=1,F[o]=1|F[o]),i=r.parameters.Value.OutOfRange||0,0!==i&&(V[o]=r.value?1:0,F[o]=F[o]|r.value?3:0)):"string"===r.type&&(LIMSUPS[o]=parseFloat(r.parameters.HighAlarmLimit.Value||Number.POSITIVE_INFINITY),LIMINFS[o]=parseFloat(r.parameters.LowAlarmLimit.Value||Number.NEGATIVE_INFINITY),V[o]=r.value,F[o]=r.quality?0:128),F[o]=F[o]|(!1|r.parameters.Value.Alarmed?256:0);if(h.hasOwnProperty("valueRanges"))for(G=0,t=0;t<h.valueRanges.length;t++)if(s=h.valueRanges[t],!s.hasOwnProperty("majorDimension")||"ROWS"===s.majorDimension)for(a=0;a<s.values.length;a++){for(r=s.values[a],A=null,c=!0,E=null,n=null,d=null,m=null,b=null,g=null,y=null,u=null,S=null,w=!1,l=0;l<r.length;l++)switch(typeof r[l]){case"boolean":null!==g&&null===y&&(y=r[l]),null===g&&(g=r[l]);break;case"number":null!==m&&null===b&&(b=r[l]),null===m&&(m=r[l]);break;case"string":null!==u&&null===S&&(S=r[l]),null===u&&(u=r[l])}null!==m?(A=m,null!==u&&isNaN(parseFloat(u))?n=u:null!==S&&isNaN(parseFloat(S))&&(n=S)):isNaN(parseFloat(u))?isNaN(parseFloat(S))||(A=parseFloat(S),null!==u&&isNaN(parseFloat(u))&&(n=u)):(A=parseFloat(u),null!==S&&isNaN(parseFloat(S))&&(n=S)),null===A&&null!==g?(A=g?1:0,w=!0,null!==y&&(c=y)):(null!==g&&(c=g),null!==b&&(E=b)),null===n||""===n?n=r.range+"-"+(a+1):null!==S&&(d=S),o=++G,NPTS[n]=o,TAGS[o]=n,DCRS[o]=d||n,SUBS[o]=r.range,BAYS[o]="",T[o]=E||(new Date).getTime(),ANOTS[o]="",w?(STONS[o]="_TRUE_",STOFS[o]="_FALSE_",F[o]=r.quality?32:160,A?(V[o]=0,F[o]=2|F[o]):(V[o]=1,F[o]=1|F[o])):(LIMSUPS[o]=999999999,LIMINFS[o]=-999999999,V[o]=A,F[o]=c?0:128)}if(h.hasOwnProperty("type")&&"zoomTo"===h.type){if(null===SVGDoc)return;let e=0,t=0;"string"==typeof h.target&&SVGDoc.getElementById(h.target)?(e=SVGDoc.getElementById(h.target).getBBox().x+SVGDoc.getElementById(h.target).getBBox().width/2,t=SVGDoc.getElementById(h.target).getBBox().y+SVGDoc.getElementById(h.target).getBBox().height/2):"object"==typeof h.target&&(e=h.target.x||0,t=h.target.y||0);let a=WebSAGE.g_zpW/h.zoomLevel,l=WebSAGE.g_zpH/h.zoomLevel,r=WebSAGE.g_zpX-(a-WebSAGE.g_zpW)*((e-WebSAGE.g_zpX)/WebSAGE.g_zpW),o=WebSAGE.g_zpY-(l-WebSAGE.g_zpH)*((t-WebSAGE.g_zpY)/WebSAGE.g_zpH);return WebSAGE.g_zpX=r,WebSAGE.g_zpY=o,WebSAGE.g_zpW=a,WebSAGE.g_zpH=l,void SVGDoc.setAttributeNS(null,"viewBox",WebSAGE.g_zpX+" "+WebSAGE.g_zpY+" "+WebSAGE.g_zpW+" "+WebSAGE.g_zpH)}if(h.hasOwnProperty("type")&&"moveBy"===h.type){if(null===SVGDoc)return;return WebSAGE.g_zpX+=h.dx,WebSAGE.g_zpY+=h.dy,void SVGDoc.setAttributeNS(null,"viewBox",WebSAGE.g_zpX+" "+WebSAGE.g_zpY+" "+WebSAGE.g_zpW+" "+WebSAGE.g_zpH)}if(h.hasOwnProperty("type")&&"zoomToOriginal"===h.type){if(null===SVGDoc)return;return WebSAGE.g_zpX=0,WebSAGE.g_zpY=0,WebSAGE.g_zpW=ScreenViewer_SVGMaxWidth,WebSAGE.g_zpH=ScreenViewer_SVGMaxHeight,void SVGDoc.setAttributeNS(null,"viewBox",WebSAGE.g_zpX+" "+WebSAGE.g_zpY+" "+WebSAGE.g_zpW+" "+WebSAGE.g_zpH)}if(h.hasOwnProperty("type")&&"enableTools"===h.type)return document.getElementById("ZOOMIN_ID").style.display=h.zoomEnabled?"":"none",document.getElementById("ZOOMOUT_ID").style.display=h.zoomEnabled?"":"none",void(document.getElementById("MOVE_ID").style.display=h.panEnabled?"":"none");if(h.hasOwnProperty("type")&&"enableMouse"===h.type)return!1===h.panEnabled?window.drgBlock=!0:delete window.drgBlock,void(!1===h.zoomEnabled?window.wheelBlock=!0:window.wheelBlock=!1);if(h.hasOwnProperty("type")&&"setMouseWheel"===h.type)return!0===h.directionBackOut?window.wheelDirBackOut=!0:delete window.wheelDirBackOut,void(!0===h.blockEventPropagation?window.wheelBlockEventPropagation=!0:delete window.wheelBlockEventPropagation);if(h.hasOwnProperty("type")&&"enableKeyboard"===h.type)return;if(h.hasOwnProperty("type")&&"enableAlarmFlash"===h.type)return void(h.alarmFlashEnabled?WebSAGE.timerBlink=function(){requestAnimationFrame(WebSAGE.timerBlinkDraw)}:WebSAGE.timerBlink=function(){});if(h.hasOwnProperty("type")&&"hideWatermark"===h.type)return void(document.getElementById("WATERMARK").style.display="none");if(h.hasOwnProperty("type")&&"setColor"===h.type)return void("colorNumber"in h&&"number"==typeof h.colorNumber&&"colorCode"in h&&"string"==typeof h.colorCode&&(-1==h.colorNumber?WebSAGE.setBgColor(h.colorCode):ScreenViewer_ColorTable[h.colorNumber]=h.colorCode));if(h.hasOwnProperty("type")&&"setColors"===h.type){if("colorsTable"in h&&"object"==typeof h.colorsTable)for(const e in h.colorsTable)-1===e?WebSAGE.setBgColor(h.colorsTable[e]):ScreenViewer_ColorTable[e]=h.colorsTable[e];return}if(h.hasOwnProperty("type")&&"resetData"===h.type){if(null===SVGDoc)return;TAGS=[],NPTS=[],SUBS=[],BAYS=[],DCRS=[],ANOTS=[],STONS=[],STOFS=[],LIMSUPS=[],LIMINFS=[]}let N=null;try{WebSAGE.showValsSVG()}catch(e){N=e}const W={data:{type:"updated",id:"4",handle:h.handle,attributes:{version:Version},error:N,links:{self:"http://scadavis.io/synoptic/synoptic.html"}},meta:Meta,jsonapi:{version:"1.0"}};parent.postMessage(W,"*")};